---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/namespaces/anonymous-offloadwrapper-cpp-
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - namespace

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `anonymous{OffloadWrapper.cpp}` Namespace Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Definition

<CodeBlock>namespace &#123; ... &#125;</CodeBlock>

## Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;</>}
  name={<><a href="#a6f467de3ca984f069ee86b9558388294">createBinDesc</a> (Module &amp;M, ArrayRef&lt; ArrayRef&lt; char &gt; &gt; Bufs, EntryArrayTy EntryArray, StringRef Suffix, bool Relocatable)</>}>
Creates binary descriptor for the given device images. <a href="#a6f467de3ca984f069ee86b9558388294">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;</>}
  name={<><a href="#a251d6cd85b676ea4be1e4c2c263494db">createFatbinDesc</a> (Module &amp;M, ArrayRef&lt; char &gt; Image, bool IsHIP, StringRef Suffix)</>}>
Embed the image <code>Image</code> into the module <code>M</code> so it can be found by the runtime. <a href="#a251d6cd85b676ea4be1e4c2c263494db">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a274467e5dc615c3f67e96d645c6b9cd3">createRegisterFatbinFunction</a> (Module &amp;M, GlobalVariable &#42;FatbinDesc, bool IsHIP, EntryArrayTy EntryArray, StringRef Suffix, bool EmitSurfacesAndTextures)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#afb5a26693a2aa4ccb54923bf6a6e86d6">createRegisterFunction</a> (Module &amp;M, GlobalVariable &#42;BinDesc, StringRef Suffix)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/function">Function</a> &#42;</>}
  name={<><a href="#aa95d3be8182edf7e68419d38f31dc9de">createRegisterGlobalsFunction</a> (Module &amp;M, bool IsHIP, EntryArrayTy EntryArray, StringRef Suffix, bool EmitSurfacesAndTextures)</>}>
Create the register globals function. <a href="#aa95d3be8182edf7e68419d38f31dc9de">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/function">Function</a> &#42;</>}
  name={<><a href="#a483af07ad9cee019751803fda2e04d1e">createUnregisterFunction</a> (Module &amp;M, GlobalVariable &#42;BinDesc, StringRef Suffix)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/pointertype">PointerType</a> &#42;</>}
  name={<><a href="#ab2b810a52c1fec67f50c9c4af0d60abe">getBinDescPtrTy</a> (Module &amp;M)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/structtype">StructType</a> &#42;</>}
  name={<><a href="#a604c924e11ca5df4475086acc8db0f4e">getBinDescTy</a> (Module &amp;M)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/pointertype">PointerType</a> &#42;</>}
  name={<><a href="#ad4020d9f897807c61a6c30e270ef7e1c">getDeviceImagePtrTy</a> (Module &amp;M)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/structtype">StructType</a> &#42;</>}
  name={<><a href="#a8ba7541c9160f54941d8b6029ec4d2ae">getDeviceImageTy</a> (Module &amp;M)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/structtype">StructType</a> &#42;</>}
  name={<><a href="#ad046f69ab8abe8d2605589e6daf42612">getFatbinWrapperTy</a> (Module &amp;M)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/integertype">IntegerType</a> &#42;</>}
  name={<><a href="#a106719002236502dad13854dfc2e86cd">getSizeTTy</a> (Module &amp;M)</>}>
</MembersIndexItem>

</MembersIndex>

## Variables Index

<MembersIndex>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a7e9e518ea02ebd547acc7acc17a38781">CudaFatMagic</a> = 0x466243b1</>}>
Magic number that begins the section containing the CUDA fatbinary. <a href="#a7e9e518ea02ebd547acc7acc17a38781">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a4b61d68c10cab55023942658e18b3ac4">HIPFatMagic</a> = 0x48495046</>}>
</MembersIndexItem>

</MembersIndex>


<SectionDefinition>

## Functions

### createBinDesc() {#a6f467de3ca984f069ee86b9558388294}

<MemberDefinition
  prototype={<>GlobalVariable &#42; anonymous&#95;namespace&#123;OffloadWrapper.cpp&#125;::createBinDesc (<a href="/docs/api/classes/llvm/module">Module</a> &amp; M, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; char &gt; &gt; Bufs, <a href="/docs/api/namespaces/llvm/offloading/#a8b583147c80ad356eeccb01b64688984">EntryArrayTy</a> EntryArray, <a href="/docs/api/classes/llvm/stringref">StringRef</a> Suffix, bool Relocatable)</>}>
Creates binary descriptor for the given device images.

Binary descriptor is an object that is passed to the offloading runtime at program startup and it describes all device images available in the executable or shared library. It is defined as follows

<b>attribute</b>((visibility(&quot;hidden&quot;))) extern <b>tgt&#95;offload&#95;entry &#42;&#95;&#95;start&#95;omp&#95;offloading&#95;entries; &#95;&#95;attribute</b>((visibility(&quot;hidden&quot;))) extern &#95;&#95;tgt&#95;offload&#95;entry &#42;&#95;&#95;stop&#95;omp&#95;offloading&#95;entries;

static const char Image0&#91;&#93; = &#123; &lt;Bufs.front() contents&gt; &#125;; ... static const char ImageN&#91;&#93; = &#123; &lt;Bufs.back() contents&gt; &#125;;

static const &#95;&#95;tgt&#95;device&#95;image Images&#91;&#93; = &#123; &#123; Image0, /&#42;ImageStart&#42;‍/ Image0 + sizeof(Image0), /&#42;ImageEnd&#42;‍/ &#95;&#95;start&#95;omp&#95;offloading&#95;entries, /&#42;EntriesBegin&#42;‍/ &#95;&#95;stop&#95;omp&#95;offloading&#95;entries /&#42;EntriesEnd&#42;‍/ &#125;, ... &#123; ImageN, /&#42;ImageStart&#42;‍/ ImageN + sizeof(ImageN), /&#42;ImageEnd&#42;‍/ &#95;&#95;start&#95;omp&#95;offloading&#95;entries, /&#42;EntriesBegin&#42;‍/ &#95;&#95;stop&#95;omp&#95;offloading&#95;entries /&#42;EntriesEnd&#42;‍/ &#125; &#125;;

static const &#95;&#95;tgt&#95;bin&#95;desc BinDesc = &#123; sizeof(Images) / sizeof(Images&#91;0&#93;), /&#42;NumDeviceImages&#42;‍/ Images, /&#42;DeviceImages&#42;‍/ &#95;&#95;start&#95;omp&#95;offloading&#95;entries, /&#42;HostEntriesBegin&#42;‍/ &#95;&#95;stop&#95;omp&#95;offloading&#95;entries /&#42;HostEntriesEnd&#42;‍/ &#125;;

Global variable that represents BinDesc is returned.

Definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp/#l00114">114</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp">OffloadWrapper.cpp</a>.
</MemberDefinition>

### createFatbinDesc() {#a251d6cd85b676ea4be1e4c2c263494db}

<MemberDefinition
  prototype={<>GlobalVariable &#42; anonymous&#95;namespace&#123;OffloadWrapper.cpp&#125;::createFatbinDesc (<a href="/docs/api/classes/llvm/module">Module</a> &amp; M, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; char &gt; Image, bool IsHIP, <a href="/docs/api/classes/llvm/stringref">StringRef</a> Suffix)</>}>
Embed the image <code>Image</code> into the module <code>M</code> so it can be found by the runtime.

Definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp/#l00266">266</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp">OffloadWrapper.cpp</a>.
</MemberDefinition>

### createRegisterFatbinFunction() {#a274467e5dc615c3f67e96d645c6b9cd3}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;OffloadWrapper.cpp&#125;::createRegisterFatbinFunction (<a href="/docs/api/classes/llvm/module">Module</a> &amp; M, <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42; FatbinDesc, bool IsHIP, <a href="/docs/api/namespaces/llvm/offloading/#a8b583147c80ad356eeccb01b64688984">EntryArrayTy</a> EntryArray, <a href="/docs/api/classes/llvm/stringref">StringRef</a> Suffix, bool EmitSurfacesAndTextures)</>}>

Definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp/#l00549">549</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp">OffloadWrapper.cpp</a>.
</MemberDefinition>

### createRegisterFunction() {#afb5a26693a2aa4ccb54923bf6a6e86d6}

<MemberDefinition
  prototype={<>void anonymous&#95;namespace&#123;OffloadWrapper.cpp&#125;::createRegisterFunction (<a href="/docs/api/classes/llvm/module">Module</a> &amp; M, <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42; BinDesc, <a href="/docs/api/classes/llvm/stringref">StringRef</a> Suffix)</>}>

Definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp/#l00212">212</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp">OffloadWrapper.cpp</a>.
</MemberDefinition>

### createRegisterGlobalsFunction() {#aa95d3be8182edf7e68419d38f31dc9de}

<MemberDefinition
  prototype={<>Function &#42; anonymous&#95;namespace&#123;OffloadWrapper.cpp&#125;::createRegisterGlobalsFunction (<a href="/docs/api/classes/llvm/module">Module</a> &amp; M, bool IsHIP, <a href="/docs/api/namespaces/llvm/offloading/#a8b583147c80ad356eeccb01b64688984">EntryArrayTy</a> EntryArray, <a href="/docs/api/classes/llvm/stringref">StringRef</a> Suffix, bool EmitSurfacesAndTextures)</>}>
Create the register globals function.

We will iterate all of the offloading entries stored at the begin / end symbols and register them according to their type. This creates the following function in IR:

extern struct &#95;&#95;tgt&#95;offload&#95;entry &#95;&#95;start&#95;cuda&#95;offloading&#95;entries; extern struct &#95;&#95;tgt&#95;offload&#95;entry &#95;&#95;stop&#95;cuda&#95;offloading&#95;entries;

extern void &#95;&#95;cudaRegisterFunction(void &#42;&#42;, void &#42;, void &#42;, void &#42;, int,
                                   void &#42;, void &#42;, void &#42;, void &#42;, int &#42;); extern void &#95;&#95;cudaRegisterVar(void &#42;&#42;, void &#42;, void &#42;, void &#42;, int32&#95;t,
                              int64&#95;t, int32&#95;t, int32&#95;t);

void &#95;&#95;cudaRegisterTest(void &#42;&#42;fatbinHandle) &#123; for (struct &#95;&#95;tgt&#95;offload&#95;entry &#42;entry = &amp;&#95;&#95;start&#95;cuda&#95;offloading&#95;entries; entry != &amp;&#95;&#95;stop&#95;cuda&#95;offloading&#95;entries; ++entry) &#123; if (entry-&gt;Kind != OFK&#95;CUDA) continue

if (!entry-&gt;Size) &#95;&#95;cudaRegisterFunction(fatbinHandle, entry-&gt;addr, entry-&gt;name, entry-&gt;name, -1, 0, 0, 0, 0, 0); else &#95;&#95;cudaRegisterVar(fatbinHandle, entry-&gt;addr, entry-&gt;name, entry-&gt;name, 0, entry-&gt;size, 0, 0); &#125; &#125;

Definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp/#l00331">331</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp">OffloadWrapper.cpp</a>.
</MemberDefinition>

### createUnregisterFunction() {#a483af07ad9cee019751803fda2e04d1e}

<MemberDefinition
  prototype={<>Function &#42; anonymous&#95;namespace&#123;OffloadWrapper.cpp&#125;::createUnregisterFunction (<a href="/docs/api/classes/llvm/module">Module</a> &amp; M, <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42; BinDesc, <a href="/docs/api/classes/llvm/stringref">StringRef</a> Suffix)</>}>

Definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp/#l00189">189</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp">OffloadWrapper.cpp</a>.
</MemberDefinition>

### getBinDescPtrTy() {#ab2b810a52c1fec67f50c9c4af0d60abe}

<MemberDefinition
  prototype={<>PointerType &#42; anonymous&#95;namespace&#123;OffloadWrapper.cpp&#125;::getBinDescPtrTy (<a href="/docs/api/classes/llvm/module">Module</a> &amp; M)</>}>

Definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp/#l00072">72</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp">OffloadWrapper.cpp</a>.
</MemberDefinition>

### getBinDescTy() {#a604c924e11ca5df4475086acc8db0f4e}

<MemberDefinition
  prototype={<>StructType &#42; anonymous&#95;namespace&#123;OffloadWrapper.cpp&#125;::getBinDescTy (<a href="/docs/api/classes/llvm/module">Module</a> &amp; M)</>}>

Definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp/#l00062">62</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp">OffloadWrapper.cpp</a>.
</MemberDefinition>

### getDeviceImagePtrTy() {#ad4020d9f897807c61a6c30e270ef7e1c}

<MemberDefinition
  prototype={<>PointerType &#42; anonymous&#95;namespace&#123;OffloadWrapper.cpp&#125;::getDeviceImagePtrTy (<a href="/docs/api/classes/llvm/module">Module</a> &amp; M)</>}>

Definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp/#l00052">52</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp">OffloadWrapper.cpp</a>.
</MemberDefinition>

### getDeviceImageTy() {#a8ba7541c9160f54941d8b6029ec4d2ae}

<MemberDefinition
  prototype={<>StructType &#42; anonymous&#95;namespace&#123;OffloadWrapper.cpp&#125;::getDeviceImageTy (<a href="/docs/api/classes/llvm/module">Module</a> &amp; M)</>}>

Definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp/#l00041">41</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp">OffloadWrapper.cpp</a>.
</MemberDefinition>

### getFatbinWrapperTy() {#ad046f69ab8abe8d2605589e6daf42612}

<MemberDefinition
  prototype={<>StructType &#42; anonymous&#95;namespace&#123;OffloadWrapper.cpp&#125;::getFatbinWrapperTy (<a href="/docs/api/classes/llvm/module">Module</a> &amp; M)</>}>

Definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp/#l00254">254</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp">OffloadWrapper.cpp</a>.
</MemberDefinition>

### getSizeTTy() {#a106719002236502dad13854dfc2e86cd}

<MemberDefinition
  prototype={<>IntegerType &#42; anonymous&#95;namespace&#123;OffloadWrapper.cpp&#125;::getSizeTTy (<a href="/docs/api/classes/llvm/module">Module</a> &amp; M)</>}>

Definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp/#l00031">31</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp">OffloadWrapper.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Variables

### CudaFatMagic {#a7e9e518ea02ebd547acc7acc17a38781}

<MemberDefinition
  prototype={<>unsigned anonymous&#95;namespace&#123;OffloadWrapper.cpp&#125;::CudaFatMagic = 0x466243b1</>}
  labels = {["constexpr"]}>
Magic number that begins the section containing the CUDA fatbinary.

Definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp/#l00028">28</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp">OffloadWrapper.cpp</a>.
</MemberDefinition>

### HIPFatMagic {#a4b61d68c10cab55023942658e18b3ac4}

<MemberDefinition
  prototype={<>unsigned anonymous&#95;namespace&#123;OffloadWrapper.cpp&#125;::HIPFatMagic = 0x48495046</>}
  labels = {["constexpr"]}>

Definition at line <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp/#l00029">29</a> of file <a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp">OffloadWrapper.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this namespace was generated from the following file:

<ul>
<li><a href="/docs/api/files/lib/lib/frontend/lib/frontend/offloading/offloadwrapper-cpp">OffloadWrapper.cpp</a></li>
</ul>

</DoxygenPage>
