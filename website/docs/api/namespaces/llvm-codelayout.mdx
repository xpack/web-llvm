---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/namespaces/llvm/codelayout
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - namespace

---

import CodeBlock from '@theme/CodeBlock'

import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `codelayout` Namespace Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Definition

<CodeBlock>namespace llvm::codelayout &#123; ... &#125;</CodeBlock>

## Classes Index

<MembersIndex>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/codelayout/cdsortconfig">CDSortConfig</a></>}>
Algorithm-specific params for Cache-Directed Sort. <a href="/docs/api/structs/llvm/codelayout/cdsortconfig/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/codelayout/edgecount">EdgeCount</a></>}>
</MembersIndexItem>

</MembersIndex>

## Typedefs Index

<MembersIndex>

<MembersIndexItem
  type="using"
  name={<><a href="#a90363531d13b5ad0853e7604759d3a12">EdgeT</a> = std::pair&lt; uint64&#95;t, uint64&#95;t &gt;</>}>
</MembersIndexItem>

</MembersIndex>

## Functions Index

<MembersIndex>

<MembersIndexItem
  type="double"
  name={<><a href="#a70c3cab5f18ff0a00d4ad43ec3287021">calcExtTspScore</a> (ArrayRef&lt; uint64&#95;t &gt; Order, ArrayRef&lt; uint64&#95;t &gt; NodeSizes, ArrayRef&lt; EdgeCount &gt; EdgeCounts)</>}>
Estimate the &quot;quality&quot; of a given node order in CFG. <a href="#a70c3cab5f18ff0a00d4ad43ec3287021">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="double"
  name={<><a href="#ab9785654b9d9d59e9f47ceac3364de40">calcExtTspScore</a> (ArrayRef&lt; uint64&#95;t &gt; NodeSizes, ArrayRef&lt; EdgeCount &gt; EdgeCounts)</>}>
Estimate the &quot;quality&quot; of the current node order in CFG. <a href="#ab9785654b9d9d59e9f47ceac3364de40">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::vector&lt; uint64&#95;t &gt;</>}
  name={<><a href="#a40b559a61a165123bb62e26c941a223b">computeCacheDirectedLayout</a> (ArrayRef&lt; uint64&#95;t &gt; FuncSizes, ArrayRef&lt; uint64&#95;t &gt; FuncCounts, ArrayRef&lt; EdgeCount &gt; CallCounts, ArrayRef&lt; uint64&#95;t &gt; CallOffsets)</>}>
Apply a Cache-Directed Sort for functions represented by a call graph. <a href="#a40b559a61a165123bb62e26c941a223b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::vector&lt; uint64&#95;t &gt;</>}
  name={<><a href="#a73e7e6f4b8c90a37295178a56661de2d">computeCacheDirectedLayout</a> (const CDSortConfig &amp;Config, ArrayRef&lt; uint64&#95;t &gt; FuncSizes, ArrayRef&lt; uint64&#95;t &gt; FuncCounts, ArrayRef&lt; EdgeCount &gt; CallCounts, ArrayRef&lt; uint64&#95;t &gt; CallOffsets)</>}>
Apply a Cache-Directed Sort with a custom config. <a href="#a73e7e6f4b8c90a37295178a56661de2d">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::vector&lt; uint64&#95;t &gt;</>}
  name={<><a href="#ab265fb35ca9607f01d99dae7a386ef77">computeExtTspLayout</a> (ArrayRef&lt; uint64&#95;t &gt; NodeSizes, ArrayRef&lt; uint64&#95;t &gt; NodeCounts, ArrayRef&lt; EdgeCount &gt; EdgeCounts)</>}>
Find a layout of nodes (basic blocks) of a given CFG optimizing jump locality and thus processor I-cache utilization. <a href="#ab265fb35ca9607f01d99dae7a386ef77">More...</a>
</MembersIndexItem>

</MembersIndex>


<SectionDefinition>

## Typedefs

### EdgeT {#a90363531d13b5ad0853e7604759d3a12}

<MemberDefinition
  prototype={<>using llvm::codelayout::EdgeT =  std::pair&lt;uint64&#95;t, uint64&#95;t&gt;</>}>

Definition at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/codelayout-h/#l00024">24</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/codelayout-h">CodeLayout.h</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Functions

### calcExtTspScore() {#a70c3cab5f18ff0a00d4ad43ec3287021}

<MemberDefinition
  prototype={<>double llvm::codelayout::calcExtTspScore (<a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; uint64&#95;t &gt; Order, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; uint64&#95;t &gt; NodeSizes, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/structs/llvm/codelayout/edgecount">EdgeCount</a> &gt; EdgeCounts)</>}>
Estimate the &quot;quality&quot; of a given node order in CFG.

The higher the score, the better the order is. The score is designed to reflect the locality of the given order, which is anti-correlated with the number of I-cache misses in a typical execution of the function.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/codelayout-h/#l00051">51</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/codelayout-h">CodeLayout.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/codelayout-cpp/#l01428">1428</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/codelayout-cpp">CodeLayout.cpp</a>.
</MemberDefinition>

### calcExtTspScore() {#ab9785654b9d9d59e9f47ceac3364de40}

<MemberDefinition
  prototype={<>double llvm::codelayout::calcExtTspScore (<a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; uint64&#95;t &gt; NodeSizes, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/structs/llvm/codelayout/edgecount">EdgeCount</a> &gt; EdgeCounts)</>}>
Estimate the &quot;quality&quot; of the current node order in CFG.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/codelayout-h/#l00055">55</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/codelayout-h">CodeLayout.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/codelayout-cpp/#l01449">1449</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/codelayout-cpp">CodeLayout.cpp</a>.
</MemberDefinition>

### computeCacheDirectedLayout() {#a40b559a61a165123bb62e26c941a223b}

<MemberDefinition
  prototype={<>std::vector&lt; uint64&#95;t &gt; llvm::codelayout::computeCacheDirectedLayout (<a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; uint64&#95;t &gt; FuncSizes, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; uint64&#95;t &gt; FuncCounts, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/structs/llvm/codelayout/edgecount">EdgeCount</a> &gt; CallCounts, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; uint64&#95;t &gt; CallOffsets)</>}>
Apply a Cache-Directed Sort for functions represented by a call graph.

The placement is done by optimizing the call locality by co-locating frequently executed functions. <code>FuncSizes:</code> The sizes of the nodes (in bytes). <code>FuncCounts:</code> The execution counts of the nodes in the profile. <code>CallCounts:</code> The execution counts of every edge (jump) in the profile. The map also defines the edges in CFG and should include 0-count edges. <code>CallOffsets:</code> The offsets of the calls from their source nodes. 
<SectionUser title="Returns">
The best function order found.
</SectionUser>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/codelayout-h/#l00082">82</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/codelayout-h">CodeLayout.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/codelayout-cpp/#l01471">1471</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/codelayout-cpp">CodeLayout.cpp</a>.
</MemberDefinition>

### computeCacheDirectedLayout() {#a73e7e6f4b8c90a37295178a56661de2d}

<MemberDefinition
  prototype={<>std::vector&lt; uint64&#95;t &gt; llvm::codelayout::computeCacheDirectedLayout (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/codelayout/cdsortconfig">CDSortConfig</a> &amp; Config, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; uint64&#95;t &gt; FuncSizes, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; uint64&#95;t &gt; FuncCounts, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/structs/llvm/codelayout/edgecount">EdgeCount</a> &gt; CallCounts, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; uint64&#95;t &gt; CallOffsets)</>}>
Apply a Cache-Directed Sort with a custom config.

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/codelayout-h/#l00087">87</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/codelayout-h">CodeLayout.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/codelayout-cpp/#l01457">1457</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/codelayout-cpp">CodeLayout.cpp</a>.
</MemberDefinition>

### computeExtTspLayout() {#ab265fb35ca9607f01d99dae7a386ef77}

<MemberDefinition
  prototype={<>std::vector&lt; uint64&#95;t &gt; llvm::codelayout::computeExtTspLayout (<a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; uint64&#95;t &gt; NodeSizes, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; uint64&#95;t &gt; NodeCounts, <a href="/docs/api/classes/llvm/arrayref">ArrayRef</a>&lt; <a href="/docs/api/structs/llvm/codelayout/edgecount">EdgeCount</a> &gt; EdgeCounts)</>}>
Find a layout of nodes (basic blocks) of a given CFG optimizing jump locality and thus processor I-cache utilization.

This is achieved via increasing the number of fall-through jumps and co-locating frequently executed nodes together. The nodes are assumed to be indexed by integers from &#91;0, |V|) so that the current order is the identity permutation. <code>NodeSizes:</code> The sizes of the nodes (in bytes). <code>NodeCounts:</code> The execution counts of the nodes in the profile. <code>EdgeCounts:</code> The execution counts of every edge (jump) in the profile. The map also defines the edges in CFG and should include 0-count edges. 
<SectionUser title="Returns">
The best block order found.
</SectionUser>

Declaration at line <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/codelayout-h/#l00043">43</a> of file <a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/codelayout-h">CodeLayout.h</a>, definition at line <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/codelayout-cpp/#l01411">1411</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/codelayout-cpp">CodeLayout.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<hr/>

The documentation for this namespace was generated from the following files:

<ul>
<li><a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/codelayout-h">CodeLayout.h</a></li>
<li><a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/codelayout-cpp">CodeLayout.cpp</a></li>
</ul>

</DoxygenPage>
