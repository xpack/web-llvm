---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/folders/lib/lib/support/lib/support/blake3
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - dir

---

import Link from '@docusaurus/Link'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import Highlight from '@xpack/docusaurus-plugin-doxygen/components/Highlight'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `lib/Support/BLAKE3` Folder Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Files Index

<MembersIndex>

<MembersIndexItem
  type="file"
  name={<><a href="/docs/api/files/lib/lib/support/lib/support/blake3/blake3-c">blake3.c</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="file"
  name={<><a href="/docs/api/files/lib/lib/support/lib/support/blake3/blake3-avx2-c">blake3_avx2.c</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="file"
  name={<><a href="/docs/api/files/lib/lib/support/lib/support/blake3/blake3-avx512-c">blake3_avx512.c</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="file"
  name={<><a href="/docs/api/files/lib/lib/support/lib/support/blake3/blake3-dispatch-c">blake3_dispatch.c</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="file"
  name={<><a href="/docs/api/files/lib/lib/support/lib/support/blake3/blake3-impl-h">blake3_impl.h</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="file"
  name={<><a href="/docs/api/files/lib/lib/support/lib/support/blake3/blake3-neon-c">blake3_neon.c</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="file"
  name={<><a href="/docs/api/files/lib/lib/support/lib/support/blake3/blake3-portable-c">blake3_portable.c</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="file"
  name={<><a href="/docs/api/files/lib/lib/support/lib/support/blake3/blake3-sse2-c">blake3_sse2.c</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="file"
  name={<><a href="/docs/api/files/lib/lib/support/lib/support/blake3/blake3-sse41-c">blake3_sse41.c</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="file"
  name={<><a href="/docs/api/files/lib/lib/support/lib/support/blake3/llvm-blake3-prefix-h">llvm_blake3_prefix.h</a></>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Implementation of BLAKE3, originating from <a href="https://github.com/BLAKE3-team/BLAKE3/tree/1.3.1/c">https://github.com/BLAKE3-team/BLAKE3/tree/1.3.1/c</a>

<Link id="details" />



An example program that hashes bytes from standard input and prints the result:



Using the C++ API:




<ProgramListing extension="c++">

<CodeLine><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/blake3-h">llvm/Support/BLAKE3.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;<a href="/docs/api/files/include/include/llvm/include/llvm/support/errno-h">errno.h</a>&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;stdio.h&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;stdlib.h&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;string.h&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;unistd.h&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/gen-inline-oz-test-model/#a217f2ab6000d72ad475b25276d3e1ac9">main</a>() &#123;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Initialize the hasher.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  <a href="/docs/api/classes/llvm/blake3">llvm::BLAKE3</a> hasher;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Read input bytes from stdin.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> buf&#91;65536&#93;;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (1) &#123;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">    ssize&#95;t n = <a href="/docs/api/namespaces/llvm/support/endian/#acfdf941f45bc58470ed8423b98862486">read</a>(STDIN&#95;FILENO, buf, </Highlight><Highlight kind="keyword">sizeof</Highlight><Highlight kind="normal">(buf));</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (n &gt; 0) &#123;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">      hasher.<a href="/docs/api/classes/llvm/blake3/#ad247de2450380eeba2fab0e794d5e44f">update</a>(<a href="/docs/api/classes/llvm/stringref">llvm::StringRef</a>(buf, n));</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (n == 0) &#123;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">; </Highlight><Highlight kind="comment">// end of file</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">      fprintf(stderr, </Highlight><Highlight kind="stringliteral">&quot;read failed: %s\\n&quot;</Highlight><Highlight kind="normal">, strerror(errno));</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">      exit(1);</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Finalize the hash. Default output length is 32 bytes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> output = hasher.<a href="/docs/api/classes/llvm/blake3/#a006c25a3aced3ec5ff196b8141161592">final</a>();</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Print the hash as hexadecimal.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (uint8&#95;t </Highlight><Highlight kind="keywordtype">byte</Highlight><Highlight kind="normal"> : output) &#123;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">    printf(</Highlight><Highlight kind="stringliteral">&quot;%02x&quot;</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="keywordtype">byte</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  printf(</Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 0;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">&#125;</Highlight></CodeLine>

</ProgramListing>



Using the C API:




<ProgramListing extension="c">

<CodeLine><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm-c/blake3-h">llvm-c/blake3.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;<a href="/docs/api/files/include/include/llvm/include/llvm/support/errno-h">errno.h</a>&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;stdio.h&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;stdlib.h&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;string.h&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;unistd.h&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/gen-inline-oz-test-model/#a217f2ab6000d72ad475b25276d3e1ac9">main</a>() &#123;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Initialize the hasher.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  <a href="/docs/api/structs/llvm-blake3-hasher">llvm&#95;blake3&#95;hasher</a> hasher;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm-c/blake3-h/#a8a051c13b70081b426f0c0693e6977af">llvm&#95;blake3&#95;hasher&#95;init</a>(&amp;hasher);</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Read input bytes from stdin.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> buf&#91;65536&#93;;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (1) &#123;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">    ssize&#95;t n = <a href="/docs/api/namespaces/llvm/support/endian/#acfdf941f45bc58470ed8423b98862486">read</a>(STDIN&#95;FILENO, buf, </Highlight><Highlight kind="keyword">sizeof</Highlight><Highlight kind="normal">(buf));</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (n &gt; 0) &#123;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm-c/blake3-h/#a75e25f25c6fc1db9056087bbc458a0bc">llvm&#95;blake3&#95;hasher&#95;update</a>(&amp;hasher, buf, n);</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (n == 0) &#123;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">; </Highlight><Highlight kind="comment">// end of file</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">      fprintf(stderr, </Highlight><Highlight kind="stringliteral">&quot;read failed: %s\\n&quot;</Highlight><Highlight kind="normal">, strerror(errno));</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">      exit(1);</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Finalize the hash. LLVM&#95;BLAKE3&#95;OUT&#95;LEN is the default output length, 32 bytes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  uint8&#95;t output&#91;<a href="/docs/api/files/include/include/llvm-c/blake3-h/#a9a7048b8a78d415916d028f4b8477cc3">LLVM&#95;BLAKE3&#95;OUT&#95;LEN</a>&#93;;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm-c/blake3-h/#a269ade5376073ccdb1307a0daddaa1de">llvm&#95;blake3&#95;hasher&#95;finalize</a>(&amp;hasher, output, <a href="/docs/api/files/include/include/llvm-c/blake3-h/#a9a7048b8a78d415916d028f4b8477cc3">LLVM&#95;BLAKE3&#95;OUT&#95;LEN</a>);</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Print the hash as hexadecimal.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> i = 0; i &lt; <a href="/docs/api/files/include/include/llvm-c/blake3-h/#a9a7048b8a78d415916d028f4b8477cc3">LLVM&#95;BLAKE3&#95;OUT&#95;LEN</a>; i++) &#123;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">    printf(</Highlight><Highlight kind="stringliteral">&quot;%02x&quot;</Highlight><Highlight kind="normal">, output&#91;i&#93;);</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  printf(</Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 0;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">&#125;</Highlight></CodeLine>

</ProgramListing>



<Link id="details" />




## The Class/Struct




<ProgramListing extension="c++">

<CodeLine><Highlight kind="keyword">class </Highlight><Highlight kind="normal"><a href="/docs/api/namespaces/llvm/codeview/#a1ec06922412c1f297e72b2134072621da021508d03d4b477e1a922f793599d69f">BLAKE3</a> &#123;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="comment">// API</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="keyword">private</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  llvm&#95;blake3&#95;hasher Hasher;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">&#125;;</Highlight></CodeLine>

</ProgramListing> 
<ProgramListing extension="c">

<CodeLine><Highlight kind="keyword">typedef</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="comment">// private fields</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal">&#125; <a href="/docs/api/structs/llvm-blake3-hasher">llvm&#95;blake3&#95;hasher</a>;</Highlight></CodeLine>

</ProgramListing>



An incremental BLAKE3 hashing state, which can accept any number of updates. This implementation doesn&#39;t allocate any heap memory, but <code>sizeof(llvm&#95;blake3&#95;hasher)</code> itself is relatively large, currently 1912 bytes on x86-64. This size can be reduced by restricting the maximum input length, as described in Section 5.4 of <a href="https://github.com/BLAKE3-team/BLAKE3-specs/blob/master/blake3.pdf">the BLAKE3 spec</a>, but this implementation doesn&#39;t currently support that strategy.






## Common API Functions




<ProgramListing extension="c++">

<CodeLine><Highlight kind="normal">BLAKE3::BLAKE3();</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> BLAKE3::init();</Highlight></CodeLine>

</ProgramListing> 
<ProgramListing extension="c">

<CodeLine><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/files/include/include/llvm-c/blake3-h/#a8a051c13b70081b426f0c0693e6977af">llvm&#95;blake3&#95;hasher&#95;init</a>(</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  <a href="/docs/api/structs/llvm-blake3-hasher">llvm&#95;blake3&#95;hasher</a> &#42;self);</Highlight></CodeLine>

</ProgramListing>



Initialize a <code><a href="/docs/api/structs/llvm-blake3-hasher">llvm&#95;blake3&#95;hasher</a></code> in the default hashing mode.



<hr/>





<ProgramListing extension="c++">

<CodeLine><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> BLAKE3::update(ArrayRef&lt;uint8&#95;t&gt; Data);</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> BLAKE3::update(StringRef Str);</Highlight></CodeLine>

</ProgramListing> 
<ProgramListing extension="c">

<CodeLine><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/files/include/include/llvm-c/blake3-h/#a75e25f25c6fc1db9056087bbc458a0bc">llvm&#95;blake3&#95;hasher&#95;update</a>(</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  <a href="/docs/api/structs/llvm-blake3-hasher">llvm&#95;blake3&#95;hasher</a> &#42;self,</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> &#42;input,</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> input&#95;len);</Highlight></CodeLine>

</ProgramListing>



Add input to the hasher. This can be called any number of times.



<hr/>





<ProgramListing extension="c++">

<CodeLine><Highlight kind="keyword">template</Highlight><Highlight kind="normal"> &lt;</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> NumBytes = LLVM&#95;BLAKE3&#95;OUT&#95;LEN&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="keyword">using </Highlight><Highlight kind="normal"><a href="/docs/api/namespaces/llvm/#a081d38a75bd71be1f6b2db493b46c70e">BLAKE3Result</a> = std::array&lt;uint8&#95;t, NumBytes&gt;;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="keyword">template</Highlight><Highlight kind="normal"> &lt;</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> NumBytes = LLVM&#95;BLAKE3&#95;OUT&#95;LEN&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> BLAKE3::final(BLAKE3Result&lt;NumBytes&gt; &amp;Result);</Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight></CodeLine>
<CodeLine><Highlight kind="normal"></Highlight><Highlight kind="keyword">template</Highlight><Highlight kind="normal"> &lt;</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> NumBytes = LLVM&#95;BLAKE3&#95;OUT&#95;LEN&gt;</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">BLAKE3Result&lt;NumBytes&gt; BLAKE3::final();</Highlight></CodeLine>

</ProgramListing> 
<ProgramListing extension="c">

<CodeLine><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/files/include/include/llvm-c/blake3-h/#a269ade5376073ccdb1307a0daddaa1de">llvm&#95;blake3&#95;hasher&#95;finalize</a>(</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm-blake3-hasher">llvm&#95;blake3&#95;hasher</a> &#42;self,</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  uint8&#95;t &#42;out,</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> out&#95;len);</Highlight></CodeLine>

</ProgramListing>



Finalize the hasher and return an output of any length, given in bytes. This doesn&#39;t modify the hasher itself, and it&#39;s possible to finalize again after adding more input. The constant <code>LLVM&#95;BLAKE3&#95;OUT&#95;LEN</code> provides the default output length, 32 bytes, which is recommended for most callers.



Outputs shorter than the default length of 32 bytes (256 bits) provide less security. An N-bit BLAKE3 output is intended to provide N bits of first and second preimage resistance and N/2 bits of collision resistance, for any N up to 256. Longer outputs don&#39;t provide any additional security.



Shorter BLAKE3 outputs are prefixes of longer ones. Explicitly requesting a short output is equivalent to truncating the default-length output. (Note that this is different between BLAKE2 and BLAKE3.)






## Less Common API Functions




<ProgramListing extension="c">

<CodeLine><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/files/include/include/llvm-c/blake3-h/#aaf8dcf7da9729af05bec0662d3873280">llvm&#95;blake3&#95;hasher&#95;init&#95;keyed</a>(</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  <a href="/docs/api/structs/llvm-blake3-hasher">llvm&#95;blake3&#95;hasher</a> &#42;self,</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint8&#95;t key&#91;<a href="/docs/api/files/include/include/llvm-c/blake3-h/#ac6e51ba539cfceb419c6ba3f03338b47">LLVM&#95;BLAKE3&#95;KEY&#95;LEN</a>&#93;);</Highlight></CodeLine>

</ProgramListing>



Initialize a <code><a href="/docs/api/structs/llvm-blake3-hasher">llvm&#95;blake3&#95;hasher</a></code> in the keyed hashing mode. The key must be exactly 32 bytes.



<hr/>





<ProgramListing extension="c">

<CodeLine><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/files/include/include/llvm-c/blake3-h/#acd67a8b965297a5e15381f1fea23fce6">llvm&#95;blake3&#95;hasher&#95;init&#95;derive&#95;key</a>(</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  <a href="/docs/api/structs/llvm-blake3-hasher">llvm&#95;blake3&#95;hasher</a> &#42;self,</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> &#42;context);</Highlight></CodeLine>

</ProgramListing>



Initialize a <code><a href="/docs/api/structs/llvm-blake3-hasher">llvm&#95;blake3&#95;hasher</a></code> in the key derivation mode. The context string is given as an initialization parameter, and afterwards input key material should be given with <code>llvm&#95;blake3&#95;hasher&#95;update</code>. The context string is a null-terminated C string which should be <b>hardcoded, globally unique, and application-specific</b>. The context string should not include any dynamic input like salts, nonces, or identifiers read from a database at runtime. A good default format for the context string is <code>&quot;&#91;application&#93; &#91;commit timestamp&#93; &#91;purpose&#93;&quot;</code>, e.g., <code>&quot;example.com
2019-12-25 16:18:03 session tokens v1&quot;</code>.



This function is intended for application code written in C. For language bindings, see <code>llvm&#95;blake3&#95;hasher&#95;init&#95;derive&#95;key&#95;raw</code> below.



<hr/>





<ProgramListing extension="c">

<CodeLine><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/files/include/include/llvm-c/blake3-h/#ae9a8ac402d13484bcb44c12d572fecb8">llvm&#95;blake3&#95;hasher&#95;init&#95;derive&#95;key&#95;raw</a>(</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  <a href="/docs/api/structs/llvm-blake3-hasher">llvm&#95;blake3&#95;hasher</a> &#42;self,</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> &#42;context,</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> context&#95;len);</Highlight></CodeLine>

</ProgramListing>



As <code>llvm&#95;blake3&#95;hasher&#95;init&#95;derive&#95;key</code> above, except that the context string is given as a pointer to an array of arbitrary bytes with a provided length. This is intended for writing language bindings, where C string conversion would add unnecessary overhead and new error cases. Unicode strings should be encoded as UTF-8.



Application code in C should prefer <code>llvm&#95;blake3&#95;hasher&#95;init&#95;derive&#95;key</code>, which takes the context as a C string. If you need to use arbitrary bytes as a context string in application code, consider whether you&#39;re violating the requirement that context strings should be hardcoded.



<hr/>





<ProgramListing extension="c">

<CodeLine><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/files/include/include/llvm-c/blake3-h/#ad3added645a514c2976352a72152c472">llvm&#95;blake3&#95;hasher&#95;finalize&#95;seek</a>(</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm-blake3-hasher">llvm&#95;blake3&#95;hasher</a> &#42;self,</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  uint64&#95;t seek,</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  uint8&#95;t &#42;out,</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> out&#95;len);</Highlight></CodeLine>

</ProgramListing>



The same as <code>llvm&#95;blake3&#95;hasher&#95;finalize</code>, but with an additional <code>seek</code> parameter for the starting byte position in the output stream. To efficiently stream a large output without allocating memory, call this function in a loop, incrementing <code>seek</code> by the output length each time.



<hr/>





<ProgramListing extension="c">

<CodeLine><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/files/include/include/llvm-c/blake3-h/#a368118adf27068d9bf7b8f34b8f9be7a">llvm&#95;blake3&#95;hasher&#95;reset</a>(</Highlight></CodeLine>
<CodeLine><Highlight kind="normal">  <a href="/docs/api/structs/llvm-blake3-hasher">llvm&#95;blake3&#95;hasher</a> &#42;self);</Highlight></CodeLine>

</ProgramListing>



Reset the hasher to its initial state, prior to any calls to <code>llvm&#95;blake3&#95;hasher&#95;update</code>. Currently this is no different from calling <code>llvm&#95;blake3&#95;hasher&#95;init</code> or similar again. However, if this implementation gains multithreading support in the future, and if <code><a href="/docs/api/structs/llvm-blake3-hasher">llvm&#95;blake3&#95;hasher</a></code> holds (optional) threading resources, this function will reuse those resources.





<Link id="details" />



This implementation is just C and assembly files.




## x86



Dynamic dispatch is enabled by default on x86. The implementation will query the CPU at runtime to detect SIMD support, and it will use the widest instruction set available. By default, <code><a href="/docs/api/files/lib/lib/support/lib/support/blake3/blake3-dispatch-c">blake3&#95;dispatch.c</a></code> expects to be linked with code for five different instruction sets: portable C, SSE2, SSE4.1, AVX2, and AVX-512.



For each of the x86 SIMD instruction sets, four versions are available: three flavors of assembly (Unix, Windows MSVC, and Windows GNU) and one version using C intrinsics. The assembly versions are generally preferred. They perform better, they perform more consistently across different compilers, and they build more quickly. On the other hand, the assembly versions are x86&#95;64-only, and you need to select the right flavor for your target platform.






## ARM NEON



The NEON implementation is enabled by default on AArch64, but not on other ARM targets, since not all of them support it. To enable it, set <code>BLAKE3&#95;USE&#95;NEON=1</code>.



To explicitiy disable using NEON instructions on AArch64, set <code>BLAKE3&#95;USE&#95;NEON=0</code>.






## Other Platforms



The portable implementation should work on most other architectures.





<Link id="details" />



The implementation doesn&#39;t currently support multithreading.

</DoxygenPage>
