---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/files/lib/lib/codegen/machinescheduler-cpp
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - file

---

import Link from '@docusaurus/Link'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `MachineScheduler.cpp` File Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/CodeGen/MachineScheduler.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinescheduler-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/ArrayRef.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/arrayref-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/BitVector.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/bitvector-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/DenseMap.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/densemap-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/PriorityQueue.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/priorityqueue-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/STLExtras.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/stlextras-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/SmallVector.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/smallvector-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/Statistic.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/iterator_range.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/iterator-range-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/AliasAnalysis.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/aliasanalysis-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/LiveInterval.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/liveinterval-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/LiveIntervals.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/liveintervals-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineBasicBlock.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinebasicblock-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineDominators.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinedominators-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineFunction.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinefunction-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineFunctionPass.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinefunctionpass-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineInstr.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machineinstr-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineLoopInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machineloopinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineOperand.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoperand-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachinePassRegistry.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinepassregistry-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineRegisterInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machineregisterinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/RegisterClassInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/registerclassinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/RegisterPressure.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/registerpressure-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/ScheduleDAG.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/scheduledag-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/ScheduleDAGInstrs.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/scheduledaginstrs-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/ScheduleDAGMutation.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/scheduledagmutation-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/ScheduleDFS.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/scheduledfs-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/ScheduleHazardRecognizer.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/schedulehazardrecognizer-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/SlotIndexes.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/slotindexes-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetFrameLowering.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetframelowering-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetInstrInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetinstrinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetLowering.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetlowering-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetPassConfig.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetpassconfig-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetRegisterInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetregisterinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetSchedule.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetschedule-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetSubtargetInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetsubtargetinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGenTypes/MachineValueType.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegentypes/machinevaluetype-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Config/llvm-config.h"
  permalink=""
  isLocal="true" />
<IncludesListItem
  filePath="llvm/InitializePasses.h"
  permalink="/docs/api/files/include/include/llvm/initializepasses-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/MC/LaneBitmask.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/mc/lanebitmask-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Pass.h"
  permalink="/docs/api/files/include/include/llvm/pass-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/CommandLine.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Compiler.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/compiler-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Debug.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/debug-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/ErrorHandling.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/GraphWriter.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/graphwriter-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/raw_ostream.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/raw-ostream-h"
  isLocal="true" />
<IncludesListItem
  filePath="algorithm"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="cassert"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="cstdint"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="iterator"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="limits"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="memory"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="string"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="tuple"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="utility"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="vector"
  permalink=""
  isLocal="false" />
</IncludesList>

## Namespaces Index

<MembersIndex>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/llvm">llvm</a></>}>
This is an optimization pass for GlobalISel generic memory operations. <a href="/docs/api/namespaces/llvm/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/anonymous-machinescheduler-cpp-">anonymous&#123;MachineScheduler.cpp&#125;</a></>}>
A region of an MBB for scheduling. <a href="/docs/api/namespaces/anonymous-machinescheduler-cpp-/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Classes Index

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase">MachineSchedulerBase</a></>}>
Base class for a machine scheduler class that can run at any point. <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler">MachineScheduler</a></>}>
<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler">MachineScheduler</a> runs after coalescing and before register allocation. <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler">PostMachineScheduler</a></>}>
<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler">PostMachineScheduler</a> runs after shortly before code emission. <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion">SchedRegion</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation">BaseMemOpClusterMutation</a></>}>
Post-process the DAG to create cluster edges between neighboring loads or between neighboring stores. <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/memopinfo">MemOpInfo</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/storeclustermutation">StoreClusterMutation</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/loadclustermutation">LoadClusterMutation</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain">CopyConstrain</a></>}>
Post-process the DAG to create weak edges from all uses of a copy to the one use that defines the copy&#39;s source vreg, most likely an induction variable increment. <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder">ILPOrder</a></>}>
Order nodes by the ILP metric. <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler">ILPScheduler</a></>}>
Schedule based on the ILP metric. <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/sunitorder">SUnitOrder&lt;IsReverse&gt;</a></>}>
Apply a less-than relation on the node order, which corresponds to the instruction order prior to scheduling. <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/sunitorder/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler">InstructionShuffler</a></>}>
Reorder instructions as much as possible. <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/graphtraits-3e4d2beef0711eb028dcc7799677e405">GraphTraits&lt;ScheduleDAGMI *&gt;</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405">DOTGraphTraits&lt;ScheduleDAGMI *&gt;</a></>}>
</MembersIndexItem>

</MembersIndex>

## Typedefs Index

<MembersIndex>

<MembersIndexItem
  type="using"
  name={<><a href="#aee652267c4ed8c882f06243aa0d601dd">MBBRegionsVector</a> = <a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; SchedRegion, 16 &gt;</>}>
</MembersIndexItem>

</MembersIndex>

## Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a77e51ffc94a77ff8e4778e59a02e7b67">checkResourceLimit</a> (unsigned LFactor, unsigned Count, unsigned Latency, bool AfterSchedNode)</>}>
Given a Count of resource usage and a Latency value, return true if a <a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> becomes resource limited. <a href="#a77e51ffc94a77ff8e4778e59a02e7b67">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a4d6bf176cc854701f61fba566b9dbf9b">computeRemLatency</a> (SchedBoundary &amp;CurrZone)</>}>
Compute remaining latency. <a href="#a4d6bf176cc854701f61fba566b9dbf9b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;</>}
  name={<><a href="#abd6b45623aab101450023f187488ad88">createConvergingSched</a> (MachineSchedContext &#42;C)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;</>}
  name={<><a href="#aea7e1660e87235378f5cc48ccb4ae84d">createILPMaxScheduler</a> (MachineSchedContext &#42;C)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;</>}
  name={<><a href="#af4d9ddf767f3d44d93ad376a247dabe4">createILPMinScheduler</a> (MachineSchedContext &#42;C)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;</>}
  name={<><a href="#a781e910364813dd3c1677ab7852630a6">createInstructionShuffler</a> (MachineSchedContext &#42;C)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ae1be3a2fc5dfa3281d32b6fb4e4ea6dd">getSchedRegions</a> (MachineBasicBlock &#42;MBB, MBBRegionsVector &amp;Regions, bool RegionsTopDown)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a43709087555742d45e0c99ab89ac1df3">INITIALIZE&#95;PASS&#95;BEGIN</a> (MachineScheduler, DEBUG&#95;TYPE, &quot;Machine Instruction Scheduler&quot;, false, false) INITIALIZE&#95;PASS&#95;END(MachineScheduler</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a219604df9ff809f1af95c0ead787c789">INITIALIZE&#95;PASS&#95;BEGIN</a> (PostMachineScheduler, &quot;postmisched&quot;, &quot;PostRA Machine Instruction Scheduler&quot;, false, false) INITIALIZE&#95;PASS&#95;END(PostMachineScheduler</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a0a9255314dba663576d6bc1bb42762b1">isSchedBoundary</a> (MachineBasicBlock::iterator MI, MachineBasicBlock &#42;MBB, MachineFunction &#42;MF, const TargetInstrInfo &#42;TII)</>}>
Return true of the given instruction should not be included in a scheduling region. <a href="#a0a9255314dba663576d6bc1bb42762b1">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a></>}
  name={<><a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a> (MachineBasicBlock::const&#95;iterator I, MachineBasicBlock::const&#95;iterator End)</>}>
If this iterator is a debug value, increment until reaching the End or a non-debug instruction. <a href="#a1c8a9363a3eb113ca42064a03636b135">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a></>}
  name={<><a href="#aa9432402dc18539818e3dae69e135ed4">nextIfDebug</a> (MachineBasicBlock::iterator I, MachineBasicBlock::const&#95;iterator End)</>}>
Non-const version. <a href="#aa9432402dc18539818e3dae69e135ed4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a></>}
  name={<><a href="#a459acab05344caa836aa036f1829c928">priorNonDebug</a> (MachineBasicBlock::const&#95;iterator I, MachineBasicBlock::const&#95;iterator Beg)</>}>
Decrement this iterator until reaching the top or a non-debug instr. <a href="#a459acab05344caa836aa036f1829c928">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a></>}
  name={<><a href="#a24aad0e646c24622750ff2ee10b74109">priorNonDebug</a> (MachineBasicBlock::iterator I, MachineBasicBlock::const&#95;iterator Beg)</>}>
Non-const version. <a href="#a24aad0e646c24622750ff2ee10b74109">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a885c0b81f13eff56642e780a0a7cecff">sortIntervals</a> (const ResourceSegments::IntervalTy &amp;A, const ResourceSegments::IntervalTy &amp;B)</>}>
Sort predicate for the intervals stored in an instance of <a href="/docs/api/classes/llvm/resourcesegments">ResourceSegments</a>. <a href="#a885c0b81f13eff56642e780a0a7cecff">More...</a>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a0e6827ad30d1073413a3fc2d8cebe305">STATISTIC</a> (NumClustered, &quot;Number of load/store pairs clustered&quot;)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a> (GenericSchedulerBase::CandReason Reason, bool IsTop)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a3352d36ab68528af960439073f22b304">tracePick</a> (const GenericSchedulerBase::SchedCandidate &amp;Cand)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;</>}
  name={<><a href="#a7c2f26bf8531d7774d205e720a71d616">useDefaultMachineSched</a> (MachineSchedContext &#42;C)</>}>
A dummy default scheduler factory indicates whether the scheduler is overridden on the command line. <a href="#a7c2f26bf8531d7774d205e720a71d616">More...</a>
</MembersIndexItem>

</MembersIndex>

## Variables Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a></>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a030569d5a541b6110f2ae1b6a3413a58">DEBUG&#95;TYPE</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a></>}
  name={<><a href="#aa37bca43d96ba0bf7541b49375e9c4ec">DefaultSchedRegistry</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a2f23c1bd760a7a5a5acc6e4eb40bd9d9">EnableCyclicPath</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a4b2ef2249df68fd80eb12e019875a75c">EnableMachineSched</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a1b85cadc1b5f4497a2ef2371ce3fa3c4">EnableMemOpCluster</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ad6a82628c5bb536ea7591cc3d51ba235">EnablePostRAMachineSched</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a589614403a45de30e887d6401dc1be2a">EnableRegPressure</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a2e16e55de32fe349f3e8242166918205">Machine</a> <a href="/docs/api/classes/llvm/instruction">Instruction</a></>}
  name={<><a href="#a7ce570ab44c3e7edb0d04fab9dd1d687">false</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#a6dac5cd81207b66c491978be7b8fbcde">FastClusterThreshold</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a6d7874db6e333966be014090e66b309b">ForceFastCluster</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a></>}
  name={<><a href="#a615fca179bf3fe73ce3d5271d1710c7a">GenericSchedRegistry</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#a6523b0d71574a464a78e2e05bd67b543">HeaderColWidth</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a></>}
  name={<><a href="#a0c63cc9aec9e7f21b6c9fc9ad6abf545">ILPMaxRegistry</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a></>}
  name={<><a href="#afcd0814798a2d0868cec352f25fc932c">ILPMinRegistry</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> unsigned</>}
  name={<><a href="#a2876d288bd148637a0e8d79ce3f0f3fb">InvalidCycle</a> = ~0U</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; <a href="/docs/api/classes/llvm/machineschedregistry/#a9fec0ddb5cfb9db5082a914d99310c2e">MachineSchedRegistry::ScheduleDAGCtor</a>, false, <a href="/docs/api/classes/llvm/registerpassparser">RegisterPassParser</a>&lt; <a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a> &gt; &gt;</>}
  name={<><a href="#a46878327214ad358989afa9f97d835f6">MachineSchedOpt</a></>}>
MachineSchedOpt allows command line selection of the scheduler. <a href="#a46878327214ad358989afa9f97d835f6">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> unsigned</>}
  name={<><a href="#a20646b5e577c00ae6fc2912a4081f9d5">MinSubtreeSize</a> = 8</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#ae812475cdb74bfae4780368f4ff01ccf">MIResourceCutOff</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#a533a172b0f7e2e6d667464a68c6f30ea">MISchedCutoff</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#afc178c1fabdc9ea75b2e47e85c12e3df">MISchedDumpScheduleTrace</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a2d7fe448a57a131b2533e439fd6eae1e">MISchedSortResourcesInTrace</a></>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a38ac294860d16fa2065e091d3b1790cf">postmisched</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#af040ecdbfbf801186c7941597cc793a6">ReadyListLimit</a></>}>
Avoid quadratic complexity in unusually large basic blocks by limiting the size of the ready lists. <a href="#af040ecdbfbf801186c7941597cc793a6">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#a55fc025b3f9710787dfefd7a551c2568">SchedOnlyBlock</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#ae2b0d0345572d6718e219aa76d1d54edab45cffe084dd3d20d928bee85e7b0f21">std::string</a> &gt;</>}
  name={<><a href="#aa9e9eecb42c6e825c279845f69f28aa2">SchedOnlyFunc</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a2e16e55de32fe349f3e8242166918205">Machine</a> <a href="/docs/api/classes/llvm/instruction">Instruction</a></>}
  name={<><a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char &#42;</>}
  name={<><a href="#aaae6594fa7ded6088910716df9f47553">scheduleTableLegend</a> = &quot;  i: issue\\n  x: resource booked&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a></>}
  name={<><a href="#ac68c4196407c59fdf134079a44647f81">ShufflerRegistry</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#ac2b8a3811867143546f43d3adc8cd2f6">ViewMISchedCutoff</a></>}>
In some situations a few uninteresting nodes depend on nearly all other nodes in the graph, provide a cutoff to hide them. <a href="#ac2b8a3811867143546f43d3adc8cd2f6">More...</a>
</MembersIndexItem>

</MembersIndex>

## Defines Index

<MembersIndex>

<MembersIndexItem
  type="#define"
  name={<><a href="#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>&nbsp;&nbsp;&nbsp;&quot;machine-scheduler&quot;</>}>
</MembersIndexItem>

</MembersIndex>


<SectionDefinition>

## Typedefs

### MBBRegionsVector {#aee652267c4ed8c882f06243aa0d601dd}

<MemberDefinition
  prototype={<>using MBBRegionsVector =  SmallVector&lt;SchedRegion, 16&gt;</>}>

Definition at line <a href="#l00539">539</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Functions

### checkResourceLimit() {#a77e51ffc94a77ff8e4778e59a02e7b67}

<MemberDefinition
  prototype="static bool checkResourceLimit (unsigned LFactor, unsigned Count, unsigned Latency, bool AfterSchedNode)"
  labels = {["static"]}>
Given a Count of resource usage and a Latency value, return true if a <a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> becomes resource limited.

If we are checking after scheduling a node, we should return true when we just reach the resource limit.

Definition at line <a href="#l02234">2234</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### computeRemLatency() {#a4d6bf176cc854701f61fba566b9dbf9b}

<MemberDefinition
  prototype={<>static unsigned computeRemLatency (<a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &amp; CurrZone)</>}
  labels = {["static"]}>
Compute remaining latency.

We need this both to determine whether the overall schedule has become latency-limited and whether the instructions outside this zone are resource or latency limited.

The &quot;dependent&quot; latency is updated incrementally during scheduling as the max height/depth of scheduled nodes minus the cycles since it was scheduled: DLat = max (N.depth - (CurrCycle - N.ReadyCycle) for N in Zone

The &quot;independent&quot; latency is the max ready queue depth: ILat = max N.depth for N in Available|Pending

RemainingLatency is the greater of independent and dependent latency.

These computations are expensive, especially in DAGs with many edges, so only do them if necessary.

Definition at line <a href="#l03002">3002</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### createConvergingSched() {#abd6b45623aab101450023f187488ad88}

<MemberDefinition
  prototype={<>static ScheduleDAGInstrs &#42; createConvergingSched (<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42; C)</>}
  labels = {["static"]}>

Definition at line <a href="#l03863">3863</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### createILPMaxScheduler() {#aea7e1660e87235378f5cc48ccb4ae84d}

<MemberDefinition
  prototype={<>static ScheduleDAGInstrs &#42; createILPMaxScheduler (<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42; C)</>}
  labels = {["static"]}>

Definition at line <a href="#l04271">4271</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### createILPMinScheduler() {#af4d9ddf767f3d44d93ad376a247dabe4}

<MemberDefinition
  prototype={<>static ScheduleDAGInstrs &#42; createILPMinScheduler (<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42; C)</>}
  labels = {["static"]}>

Definition at line <a href="#l04274">4274</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### createInstructionShuffler() {#a781e910364813dd3c1677ab7852630a6}

<MemberDefinition
  prototype={<>static ScheduleDAGInstrs &#42; createInstructionShuffler (<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42; C)</>}
  labels = {["static"]}>

Definition at line <a href="#l04363">4363</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### getSchedRegions() {#ae1be3a2fc5dfa3281d32b6fb4e4ea6dd}

<MemberDefinition
  prototype={<>static void getSchedRegions (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB, <a href="#aee652267c4ed8c882f06243aa0d601dd">MBBRegionsVector</a> &amp; Regions, bool RegionsTopDown)</>}
  labels = {["static"]}>

Definition at line <a href="#l00542">542</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### INITIALIZE&#95;PASS&#95;BEGIN() {#a43709087555742d45e0c99ab89ac1df3}

<MemberDefinition
  prototype={<>INITIALIZE&#95;PASS&#95;BEGIN (MachineScheduler, <a href="/docs/api/files/include/include/llvm/include/llvm/adt/genericcycleimpl-h/#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>, &quot;Machine <a href="/docs/api/classes/llvm/instruction">Instruction</a> Scheduler&quot;, false, false)</>}>

Definition at line <a href="#l00266">266</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### INITIALIZE&#95;PASS&#95;BEGIN() {#a219604df9ff809f1af95c0ead787c789}

<MemberDefinition
  prototype={<>INITIALIZE&#95;PASS&#95;BEGIN (PostMachineScheduler, &quot;postmisched&quot;, &quot;PostRA <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a2e16e55de32fe349f3e8242166918205">Machine</a> <a href="/docs/api/classes/llvm/instruction">Instruction</a> Scheduler&quot;, false, false)</>}>

Definition at line <a href="#l00297">297</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### isSchedBoundary() {#a0a9255314dba663576d6bc1bb42762b1}

<MemberDefinition
  prototype={<>static bool isSchedBoundary (<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> MI, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB, <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &#42; MF, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42; TII)</>}
  labels = {["static"]}>
Return true of the given instruction should not be included in a scheduling region.

<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler">MachineScheduler</a> does not currently support scheduling across calls. To handle calls, the DAG builder needs to be modified to create register anti/output dependencies on the registers clobbered by the call&#39;s regmask operand. In PreRA scheduling, the stack pointer adjustment already prevents scheduling across calls. In PostRA scheduling, we need the isCall to enforce the boundary, but there would be no benefit to postRA scheduling across calls this late anyway.

Definition at line <a href="#l00513">513</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### nextIfDebug() {#a1c8a9363a3eb113ca42064a03636b135}

<MemberDefinition
  prototype={<>static MachineBasicBlock::const&#95;iterator nextIfDebug (<a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> I, <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> End)</>}
  labels = {["static"]}>
If this iterator is a debug value, increment until reaching the End or a non-debug instruction.

Definition at line <a href="#l00371">371</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### nextIfDebug() {#aa9432402dc18539818e3dae69e135ed4}

<MemberDefinition
  prototype={<>static MachineBasicBlock::iterator nextIfDebug (<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> I, <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> End)</>}
  labels = {["static"]}>
Non-const version.

Definition at line <a href="#l00382">382</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### priorNonDebug() {#a459acab05344caa836aa036f1829c928}

<MemberDefinition
  prototype={<>static MachineBasicBlock::const&#95;iterator priorNonDebug (<a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> I, <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> Beg)</>}
  labels = {["static"]}>
Decrement this iterator until reaching the top or a non-debug instr.

Definition at line <a href="#l00350">350</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### priorNonDebug() {#a24aad0e646c24622750ff2ee10b74109}

<MemberDefinition
  prototype={<>static MachineBasicBlock::iterator priorNonDebug (<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> I, <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> Beg)</>}
  labels = {["static"]}>
Non-const version.

Definition at line <a href="#l00362">362</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### sortIntervals() {#a885c0b81f13eff56642e780a0a7cecff}

<MemberDefinition
  prototype={<>static bool sortIntervals (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> &amp; A, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> &amp; B)</>}
  labels = {["static"]}>
Sort predicate for the intervals stored in an instance of <a href="/docs/api/classes/llvm/resourcesegments">ResourceSegments</a>.

Intervals are always disjoint (no intersection for any pairs of intervals), therefore we can sort the totality of the intervals by looking only at the left boundary.

Definition at line <a href="#l04470">4470</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### STATISTIC() {#a0e6827ad30d1073413a3fc2d8cebe305}

<MemberDefinition
  prototype={<>STATISTIC (NumClustered, &quot;Number of <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpumarklastscratchload-cpp/#a8a3fe89940744b94ffe5dacd6704c2be">load</a>/store pairs clustered&quot;)</>}>

Definition at line <a href="#l00076">76</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### tracePick() {#a14c35b53586841aad69751a52b7d358a}

<MemberDefinition
  prototype={<>static void tracePick (<a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3">GenericSchedulerBase::CandReason</a> Reason, bool IsTop)</>}
  labels = {["static"]}>

Definition at line <a href="#l03236">3236</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### tracePick() {#a3352d36ab68528af960439073f22b304}

<MemberDefinition
  prototype={<>static void tracePick (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp; Cand)</>}
  labels = {["static"]}>

Definition at line <a href="#l03241">3241</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### useDefaultMachineSched() {#a7c2f26bf8531d7774d205e720a71d616}

<MemberDefinition
  prototype={<>static ScheduleDAGInstrs &#42; useDefaultMachineSched (<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42; C)</>}
  labels = {["static"]}>
A dummy default scheduler factory indicates whether the scheduler is overridden on the command line.

Definition at line <a href="#l00323">323</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Variables

### ColWidth {#aa0067e3bf6cee38792f2749e1d16fff4}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; ColWidth(&quot;misched-dump-schedule-trace-col-width&quot;, cl::Hidden, cl::desc(&quot;Set width of the columns showing resource booking.&quot;), cl::init(5))</>}
  labels = {["static"]}>

Definition at line <a href="#l00184">184</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### DEBUG&#95;TYPE {#a030569d5a541b6110f2ae1b6a3413a58}

<MemberDefinition
  prototype={<>DEBUG&#95;TYPE</>}>

Definition at line <a href="#l00273">273</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### DefaultSchedRegistry {#aa37bca43d96ba0bf7541b49375e9c4ec}

<MemberDefinition
  prototype={<>MachineSchedRegistry DefaultSchedRegistry(&quot;default&quot;, &quot;Use the target&#39;s default scheduler choice.&quot;, useDefaultMachineSched)</>}
  labels = {["static"]}>

Definition at line <a href="#l00335">335</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### EnableCyclicPath {#a2f23c1bd760a7a5a5acc6e4eb40bd9d9}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; EnableCyclicPath(&quot;misched-cyclicpath&quot;, cl::Hidden, cl::desc(&quot;Enable cyclic critical path analysis.&quot;), cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00158">158</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### EnableMachineSched {#a4b2ef2249df68fd80eb12e019875a75c}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; EnableMachineSched(&quot;enable-misched&quot;, cl::desc(&quot;Enable the machine instruction scheduling pass.&quot;), cl::init(true), cl::Hidden)</>}
  labels = {["static"]}>

Definition at line <a href="#l00338">338</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### EnableMemOpCluster {#a1b85cadc1b5f4497a2ef2371ce3fa3c4}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; EnableMemOpCluster(&quot;misched-cluster&quot;, cl::Hidden, cl::desc(&quot;Enable memop clustering.&quot;), cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00161">161</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### EnablePostRAMachineSched {#ad6a82628c5bb536ea7591cc3d51ba235}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; EnablePostRAMachineSched(&quot;enable-post-misched&quot;, cl::desc(&quot;Enable the post-ra machine instruction scheduling pass.&quot;), cl::init(true), cl::Hidden)</>}
  labels = {["static"]}>

Definition at line <a href="#l00343">343</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### EnableRegPressure {#a589614403a45de30e887d6401dc1be2a}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; EnableRegPressure(&quot;misched-regpressure&quot;, cl::Hidden, cl::desc(&quot;Enable register pressure scheduling.&quot;), cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00155">155</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### false {#a7ce570ab44c3e7edb0d04fab9dd1d687}

<MemberDefinition
  prototype="PostRA Machine Instruction false">

Definition at line <a href="#l00274">274</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### FastClusterThreshold {#a6dac5cd81207b66c491978be7b8fbcde}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; FastClusterThreshold(&quot;fast-cluster-threshold&quot;, cl::Hidden, cl::desc(&quot;The threshold for fast cluster&quot;), cl::init(1000))</>}
  labels = {["static"]}>

Definition at line <a href="#l00170">170</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### ForceFastCluster {#a6d7874db6e333966be014090e66b309b}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ForceFastCluster(&quot;force-fast-cluster&quot;, cl::Hidden, cl::desc(&quot;Switch to fast cluster algorithm with the lost &quot; &quot;of some fusion opportunities&quot;), cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00165">165</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### GenericSchedRegistry {#a615fca179bf3fe73ce3d5271d1710c7a}

<MemberDefinition
  prototype={<>MachineSchedRegistry GenericSchedRegistry(&quot;converge&quot;, &quot;Standard converging scheduler.&quot;, createConvergingSched)</>}
  labels = {["static"]}>

Definition at line <a href="#l03868">3868</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### HeaderColWidth {#a6523b0d71574a464a78e2e05bd67b543}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; HeaderColWidth(&quot;misched-dump-schedule-trace-col-header-width&quot;, cl::Hidden, cl::desc(&quot;Set width of the columns with &quot; &quot;the resources and schedule units&quot;), cl::init(19))</>}
  labels = {["static"]}>

Definition at line <a href="#l00179">179</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### ILPMaxRegistry {#a0c63cc9aec9e7f21b6c9fc9ad6abf545}

<MemberDefinition
  prototype={<>MachineSchedRegistry ILPMaxRegistry(&quot;ilpmax&quot;, &quot;Schedule bottom-up for max ILP&quot;, createILPMaxScheduler)</>}
  labels = {["static"]}>

Definition at line <a href="#l04278">4278</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### ILPMinRegistry {#afcd0814798a2d0868cec352f25fc932c}

<MemberDefinition
  prototype={<>MachineSchedRegistry ILPMinRegistry(&quot;ilpmin&quot;, &quot;Schedule bottom-up for min ILP&quot;, createILPMinScheduler)</>}
  labels = {["static"]}>

Definition at line <a href="#l04280">4280</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### InvalidCycle {#a2876d288bd148637a0e8d79ce3f0f3fb}

<MemberDefinition
  prototype="const unsigned InvalidCycle = ~0U"
  labels = {["static"]}>

Definition at line <a href="#l02226">2226</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### MachineSchedOpt {#a46878327214ad358989afa9f97d835f6}

<MemberDefinition
  prototype={<>cl::opt&lt; MachineSchedRegistry::ScheduleDAGCtor, false, RegisterPassParser&lt; MachineSchedRegistry &gt; &gt; MachineSchedOpt(&quot;misched&quot;, cl::init(&amp;useDefaultMachineSched), cl::Hidden, cl::desc(&quot;Machine instruction scheduler to use&quot;))</>}
  labels = {["static"]}>
MachineSchedOpt allows command line selection of the scheduler.

Definition at line <a href="#l00330">330</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### MinSubtreeSize {#a20646b5e577c00ae6fc2912a4081f9d5}

<MemberDefinition
  prototype="const unsigned MinSubtreeSize = 8"
  labels = {["static"]}>

Definition at line <a href="#l00197">197</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### MIResourceCutOff {#ae812475cdb74bfae4780368f4ff01ccf}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; MIResourceCutOff(&quot;misched-resource-cutoff&quot;, cl::Hidden, cl::desc(&quot;Number of intervals to track&quot;), cl::init(10))</>}
  labels = {["static"]}>

Definition at line <a href="#l00193">193</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### MISchedCutoff {#a533a172b0f7e2e6d667464a68c6f30ea}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; MISchedCutoff(&quot;misched-cutoff&quot;, cl::Hidden, cl::desc(&quot;Stop scheduling after N instructions&quot;), cl::init(~0U))</>}
  labels = {["static"]}>

Definition at line <a href="#l00141">141</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### MISchedDumpScheduleTrace {#afc178c1fabdc9ea75b2e47e85c12e3df}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; MISchedDumpScheduleTrace(&quot;misched-dump-schedule-trace&quot;, cl::Hidden, cl::init(false), cl::desc(&quot;Dump resource usage at schedule boundary.&quot;))</>}
  labels = {["static"]}>

Definition at line <a href="#l00175">175</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### MISchedSortResourcesInTrace {#a2d7fe448a57a131b2533e439fd6eae1e}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; MISchedSortResourcesInTrace(&quot;misched-sort-resources-in-trace&quot;, cl::Hidden, cl::init(true), cl::desc(&quot;Sort the resources printed in the dump trace&quot;))</>}
  labels = {["static"]}>

Definition at line <a href="#l00187">187</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### postmisched {#a38ac294860d16fa2065e091d3b1790cf}

<MemberDefinition
  prototype="postmisched">

Definition at line <a href="#l00302">302</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### ReadyListLimit {#af040ecdbfbf801186c7941597cc793a6}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; ReadyListLimit(&quot;misched-limit&quot;, cl::Hidden, cl::desc(&quot;Limit ready list to N instructions&quot;), cl::init(256))</>}
  labels = {["static"]}>
Avoid quadratic complexity in unusually large basic blocks by limiting the size of the ready lists.

Definition at line <a href="#l00152">152</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### SchedOnlyBlock {#a55fc025b3f9710787dfefd7a551c2568}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; SchedOnlyBlock(&quot;misched-only-block&quot;, cl::Hidden, cl::desc(&quot;Only schedule this MBB#&quot;))</>}
  labels = {["static"]}>

Definition at line <a href="#l00146">146</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### SchedOnlyFunc {#aa9e9eecb42c6e825c279845f69f28aa2}

<MemberDefinition
  prototype={<>cl::opt&lt; std::string &gt; SchedOnlyFunc(&quot;misched-only-func&quot;, cl::Hidden, cl::desc(&quot;Only schedule this function&quot;))</>}
  labels = {["static"]}>

Definition at line <a href="#l00144">144</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### Scheduler {#a1c735bd46fe1e1b5f6f85a710d99e149}

<MemberDefinition
  prototype="PostRA Machine Instruction Scheduler">

Definition at line <a href="#l00274">274</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### scheduleTableLegend {#aaae6594fa7ded6088910716df9f47553}

<MemberDefinition
  prototype={<>const char&#42; scheduleTableLegend = &quot;  i: issue\\n  x: resource booked&quot;</>}
  labels = {["static"]}>

Definition at line <a href="#l00991">991</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### ShufflerRegistry {#ac68c4196407c59fdf134079a44647f81}

<MemberDefinition
  prototype={<>MachineSchedRegistry ShufflerRegistry(&quot;shuffle&quot;, &quot;Shuffle machine instructions alternating directions&quot;, createInstructionShuffler)</>}
  labels = {["static"]}>

Definition at line <a href="#l04371">4371</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### ViewMISchedCutoff {#ac2b8a3811867143546f43d3adc8cd2f6}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; ViewMISchedCutoff(&quot;view-misched-cutoff&quot;, cl::Hidden, cl::desc(&quot;Hide nodes with more predecessor/successor than cutoff&quot;))</>}
  labels = {["static"]}>
In some situations a few uninteresting nodes depend on nearly all other nodes in the graph, provide a cutoff to hide them.

Definition at line <a href="#l00138">138</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Defines

### DEBUG&#95;TYPE {#ad78e062f62e0d6e453941fb4ca843e4d}

<MemberDefinition
  prototype={<>#define DEBUG&#95;TYPE&nbsp;&nbsp;&nbsp;&quot;machine-scheduler&quot;</>}>

Definition at line <a href="#l00074">74</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

</SectionDefinition>

## File Listing

The file content with the documentation metadata removed is:

<ProgramListing>

<Link id="l00001" /><CodeLine lineNumber="1"><span class="doxyHighlightComment">//===- MachineScheduler.cpp - Machine Instruction Scheduler ---------------===//</span></CodeLine>
<Link id="l00002" /><CodeLine lineNumber="2"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00003" /><CodeLine lineNumber="3"><span class="doxyHighlightComment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></CodeLine>
<Link id="l00004" /><CodeLine lineNumber="4"><span class="doxyHighlightComment">// See https://llvm.org/LICENSE.txt for license information.</span></CodeLine>
<Link id="l00005" /><CodeLine lineNumber="5"><span class="doxyHighlightComment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></CodeLine>
<Link id="l00006" /><CodeLine lineNumber="6"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00007" /><CodeLine lineNumber="7"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00008" /><CodeLine lineNumber="8"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00009" /><CodeLine lineNumber="9"><span class="doxyHighlightComment">// MachineScheduler schedules machine instructions after phi elimination. It</span></CodeLine>
<Link id="l00010" /><CodeLine lineNumber="10"><span class="doxyHighlightComment">// preserves LiveIntervals so it can be invoked before register allocation.</span></CodeLine>
<Link id="l00011" /><CodeLine lineNumber="11"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00012" /><CodeLine lineNumber="12"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00013" /><CodeLine lineNumber="13"></CodeLine>
<Link id="l00014" /><CodeLine lineNumber="14"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinescheduler-h">llvm/CodeGen/MachineScheduler.h</a>&quot;</span></CodeLine>
<Link id="l00015" /><CodeLine lineNumber="15"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/arrayref-h">llvm/ADT/ArrayRef.h</a>&quot;</span></CodeLine>
<Link id="l00016" /><CodeLine lineNumber="16"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/bitvector-h">llvm/ADT/BitVector.h</a>&quot;</span></CodeLine>
<Link id="l00017" /><CodeLine lineNumber="17"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/densemap-h">llvm/ADT/DenseMap.h</a>&quot;</span></CodeLine>
<Link id="l00018" /><CodeLine lineNumber="18"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/priorityqueue-h">llvm/ADT/PriorityQueue.h</a>&quot;</span></CodeLine>
<Link id="l00019" /><CodeLine lineNumber="19"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/stlextras-h">llvm/ADT/STLExtras.h</a>&quot;</span></CodeLine>
<Link id="l00020" /><CodeLine lineNumber="20"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/smallvector-h">llvm/ADT/SmallVector.h</a>&quot;</span></CodeLine>
<Link id="l00021" /><CodeLine lineNumber="21"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h">llvm/ADT/Statistic.h</a>&quot;</span></CodeLine>
<Link id="l00022" /><CodeLine lineNumber="22"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/iterator-range-h">llvm/ADT/iterator&#95;range.h</a>&quot;</span></CodeLine>
<Link id="l00023" /><CodeLine lineNumber="23"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/aliasanalysis-h">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></CodeLine>
<Link id="l00024" /><CodeLine lineNumber="24"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/liveinterval-h">llvm/CodeGen/LiveInterval.h</a>&quot;</span></CodeLine>
<Link id="l00025" /><CodeLine lineNumber="25"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/liveintervals-h">llvm/CodeGen/LiveIntervals.h</a>&quot;</span></CodeLine>
<Link id="l00026" /><CodeLine lineNumber="26"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinebasicblock-h">llvm/CodeGen/MachineBasicBlock.h</a>&quot;</span></CodeLine>
<Link id="l00027" /><CodeLine lineNumber="27"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinedominators-h">llvm/CodeGen/MachineDominators.h</a>&quot;</span></CodeLine>
<Link id="l00028" /><CodeLine lineNumber="28"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinefunction-h">llvm/CodeGen/MachineFunction.h</a>&quot;</span></CodeLine>
<Link id="l00029" /><CodeLine lineNumber="29"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinefunctionpass-h">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></CodeLine>
<Link id="l00030" /><CodeLine lineNumber="30"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineinstr-h">llvm/CodeGen/MachineInstr.h</a>&quot;</span></CodeLine>
<Link id="l00031" /><CodeLine lineNumber="31"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineloopinfo-h">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</span></CodeLine>
<Link id="l00032" /><CodeLine lineNumber="32"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoperand-h">llvm/CodeGen/MachineOperand.h</a>&quot;</span></CodeLine>
<Link id="l00033" /><CodeLine lineNumber="33"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinepassregistry-h">llvm/CodeGen/MachinePassRegistry.h</a>&quot;</span></CodeLine>
<Link id="l00034" /><CodeLine lineNumber="34"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineregisterinfo-h">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></CodeLine>
<Link id="l00035" /><CodeLine lineNumber="35"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/registerclassinfo-h">llvm/CodeGen/RegisterClassInfo.h</a>&quot;</span></CodeLine>
<Link id="l00036" /><CodeLine lineNumber="36"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/registerpressure-h">llvm/CodeGen/RegisterPressure.h</a>&quot;</span></CodeLine>
<Link id="l00037" /><CodeLine lineNumber="37"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/scheduledag-h">llvm/CodeGen/ScheduleDAG.h</a>&quot;</span></CodeLine>
<Link id="l00038" /><CodeLine lineNumber="38"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/scheduledaginstrs-h">llvm/CodeGen/ScheduleDAGInstrs.h</a>&quot;</span></CodeLine>
<Link id="l00039" /><CodeLine lineNumber="39"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/scheduledagmutation-h">llvm/CodeGen/ScheduleDAGMutation.h</a>&quot;</span></CodeLine>
<Link id="l00040" /><CodeLine lineNumber="40"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/scheduledfs-h">llvm/CodeGen/ScheduleDFS.h</a>&quot;</span></CodeLine>
<Link id="l00041" /><CodeLine lineNumber="41"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/schedulehazardrecognizer-h">llvm/CodeGen/ScheduleHazardRecognizer.h</a>&quot;</span></CodeLine>
<Link id="l00042" /><CodeLine lineNumber="42"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/slotindexes-h">llvm/CodeGen/SlotIndexes.h</a>&quot;</span></CodeLine>
<Link id="l00043" /><CodeLine lineNumber="43"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetframelowering-h">llvm/CodeGen/TargetFrameLowering.h</a>&quot;</span></CodeLine>
<Link id="l00044" /><CodeLine lineNumber="44"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetinstrinfo-h">llvm/CodeGen/TargetInstrInfo.h</a>&quot;</span></CodeLine>
<Link id="l00045" /><CodeLine lineNumber="45"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetlowering-h">llvm/CodeGen/TargetLowering.h</a>&quot;</span></CodeLine>
<Link id="l00046" /><CodeLine lineNumber="46"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetpassconfig-h">llvm/CodeGen/TargetPassConfig.h</a>&quot;</span></CodeLine>
<Link id="l00047" /><CodeLine lineNumber="47"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetregisterinfo-h">llvm/CodeGen/TargetRegisterInfo.h</a>&quot;</span></CodeLine>
<Link id="l00048" /><CodeLine lineNumber="48"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetschedule-h">llvm/CodeGen/TargetSchedule.h</a>&quot;</span></CodeLine>
<Link id="l00049" /><CodeLine lineNumber="49"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetsubtargetinfo-h">llvm/CodeGen/TargetSubtargetInfo.h</a>&quot;</span></CodeLine>
<Link id="l00050" /><CodeLine lineNumber="50"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegentypes/machinevaluetype-h">llvm/CodeGenTypes/MachineValueType.h</a>&quot;</span></CodeLine>
<Link id="l00051" /><CodeLine lineNumber="51"><span class="doxyHighlightPreprocessor">#include &quot;llvm/Config/llvm-config.h&quot;</span></CodeLine>
<Link id="l00052" /><CodeLine lineNumber="52"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/initializepasses-h">llvm/InitializePasses.h</a>&quot;</span></CodeLine>
<Link id="l00053" /><CodeLine lineNumber="53"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/mc/lanebitmask-h">llvm/MC/LaneBitmask.h</a>&quot;</span></CodeLine>
<Link id="l00054" /><CodeLine lineNumber="54"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/pass-h">llvm/Pass.h</a>&quot;</span></CodeLine>
<Link id="l00055" /><CodeLine lineNumber="55"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h">llvm/Support/CommandLine.h</a>&quot;</span></CodeLine>
<Link id="l00056" /><CodeLine lineNumber="56"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/compiler-h">llvm/Support/Compiler.h</a>&quot;</span></CodeLine>
<Link id="l00057" /><CodeLine lineNumber="57"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h">llvm/Support/Debug.h</a>&quot;</span></CodeLine>
<Link id="l00058" /><CodeLine lineNumber="58"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h">llvm/Support/ErrorHandling.h</a>&quot;</span></CodeLine>
<Link id="l00059" /><CodeLine lineNumber="59"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/graphwriter-h">llvm/Support/GraphWriter.h</a>&quot;</span></CodeLine>
<Link id="l00060" /><CodeLine lineNumber="60"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/raw-ostream-h">llvm/Support/raw&#95;ostream.h</a>&quot;</span></CodeLine>
<Link id="l00061" /><CodeLine lineNumber="61"><span class="doxyHighlightPreprocessor">#include &lt;algorithm&gt;</span></CodeLine>
<Link id="l00062" /><CodeLine lineNumber="62"><span class="doxyHighlightPreprocessor">#include &lt;cassert&gt;</span></CodeLine>
<Link id="l00063" /><CodeLine lineNumber="63"><span class="doxyHighlightPreprocessor">#include &lt;cstdint&gt;</span></CodeLine>
<Link id="l00064" /><CodeLine lineNumber="64"><span class="doxyHighlightPreprocessor">#include &lt;iterator&gt;</span></CodeLine>
<Link id="l00065" /><CodeLine lineNumber="65"><span class="doxyHighlightPreprocessor">#include &lt;limits&gt;</span></CodeLine>
<Link id="l00066" /><CodeLine lineNumber="66"><span class="doxyHighlightPreprocessor">#include &lt;memory&gt;</span></CodeLine>
<Link id="l00067" /><CodeLine lineNumber="67"><span class="doxyHighlightPreprocessor">#include &lt;string&gt;</span></CodeLine>
<Link id="l00068" /><CodeLine lineNumber="68"><span class="doxyHighlightPreprocessor">#include &lt;tuple&gt;</span></CodeLine>
<Link id="l00069" /><CodeLine lineNumber="69"><span class="doxyHighlightPreprocessor">#include &lt;utility&gt;</span></CodeLine>
<Link id="l00070" /><CodeLine lineNumber="70"><span class="doxyHighlightPreprocessor">#include &lt;vector&gt;</span></CodeLine>
<Link id="l00071" /><CodeLine lineNumber="71"></CodeLine>
<Link id="l00072" /><CodeLine lineNumber="72"><span class="doxyHighlightKeyword">using namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm">llvm</a>;</span></CodeLine>
<Link id="l00073" /><CodeLine lineNumber="73"></CodeLine>
<Link id="l00074" /><CodeLine lineNumber="74" lineLink="#ad78e062f62e0d6e453941fb4ca843e4d"><span class="doxyHighlightPreprocessor">#define DEBUG&#95;TYPE &quot;machine-scheduler&quot;</span></CodeLine>
<Link id="l00075" /><CodeLine lineNumber="75"></CodeLine>
<Link id="l00076" /><CodeLine lineNumber="76" lineLink="#a0e6827ad30d1073413a3fc2d8cebe305"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h/#ad6117415b93e5675d5a6c8e1855b3b2f">STATISTIC</a>(NumClustered, </span><span class="doxyHighlightStringLiteral">&quot;Number of load/store pairs clustered&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00077" /><CodeLine lineNumber="77"></CodeLine>
<Link id="l00078" /><CodeLine lineNumber="78"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm">llvm</a> &#123;</span></CodeLine>
<Link id="l00079" /><CodeLine lineNumber="79"></CodeLine>
<Link id="l00080" /><CodeLine lineNumber="80" lineLink="/docs/api/namespaces/llvm/#ad862bfb705d5dd126e0e49bfcb6f9e62"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;MISched::Direction&gt;</a> <a href="/docs/api/namespaces/llvm/#aa9ff814049edfef549accbca1a8e9eff">PreRADirection</a>(</span></CodeLine>
<Link id="l00081" /><CodeLine lineNumber="81"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;misched-prera-direction&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00082" /><CodeLine lineNumber="82"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Pre reg-alloc list scheduling direction&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00083" /><CodeLine lineNumber="83"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(<a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3ad688a19af1da6802784dc78a425d3923">MISched::Unspecified</a>),</span></CodeLine>
<Link id="l00084" /><CodeLine lineNumber="84"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a8fa743aa76b6902028f8a643dfb87171">cl::values</a>(</span></CodeLine>
<Link id="l00085" /><CodeLine lineNumber="85"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3ae89742249a15ad5696e3dcec82f0e76a">MISched::TopDown</a>, </span><span class="doxyHighlightStringLiteral">&quot;topdown&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00086" /><CodeLine lineNumber="86"><span class="doxyHighlight">                   </span><span class="doxyHighlightStringLiteral">&quot;Force top-down pre reg-alloc list scheduling&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00087" /><CodeLine lineNumber="87"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3abd98ce24773c9ca1e3f7ce3c541e43ea">MISched::BottomUp</a>, </span><span class="doxyHighlightStringLiteral">&quot;bottomup&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00088" /><CodeLine lineNumber="88"><span class="doxyHighlight">                   </span><span class="doxyHighlightStringLiteral">&quot;Force bottom-up pre reg-alloc list scheduling&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00089" /><CodeLine lineNumber="89"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3aab012f17d1537ed7a7c6d45b1d2fc0e9">MISched::Bidirectional</a>, </span><span class="doxyHighlightStringLiteral">&quot;bidirectional&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00090" /><CodeLine lineNumber="90"><span class="doxyHighlight">                   </span><span class="doxyHighlightStringLiteral">&quot;Force bidirectional pre reg-alloc list scheduling&quot;</span><span class="doxyHighlight">)));</span></CodeLine>
<Link id="l00091" /><CodeLine lineNumber="91"></CodeLine>
<Link id="l00092" /><CodeLine lineNumber="92" lineLink="/docs/api/namespaces/llvm/#a1e5fc889b7ee01722dbdfb92df8cb7df"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;MISched::Direction&gt;</a> <a href="/docs/api/namespaces/llvm/#a1e5fc889b7ee01722dbdfb92df8cb7df">PostRADirection</a>(</span></CodeLine>
<Link id="l00093" /><CodeLine lineNumber="93"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;misched-postra-direction&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00094" /><CodeLine lineNumber="94"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Post reg-alloc list scheduling direction&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00095" /><CodeLine lineNumber="95"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(<a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3ad688a19af1da6802784dc78a425d3923">MISched::Unspecified</a>),</span></CodeLine>
<Link id="l00096" /><CodeLine lineNumber="96"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a8fa743aa76b6902028f8a643dfb87171">cl::values</a>(</span></CodeLine>
<Link id="l00097" /><CodeLine lineNumber="97"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3ae89742249a15ad5696e3dcec82f0e76a">MISched::TopDown</a>, </span><span class="doxyHighlightStringLiteral">&quot;topdown&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00098" /><CodeLine lineNumber="98"><span class="doxyHighlight">                   </span><span class="doxyHighlightStringLiteral">&quot;Force top-down post reg-alloc list scheduling&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00099" /><CodeLine lineNumber="99"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3abd98ce24773c9ca1e3f7ce3c541e43ea">MISched::BottomUp</a>, </span><span class="doxyHighlightStringLiteral">&quot;bottomup&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00100" /><CodeLine lineNumber="100"><span class="doxyHighlight">                   </span><span class="doxyHighlightStringLiteral">&quot;Force bottom-up post reg-alloc list scheduling&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00101" /><CodeLine lineNumber="101"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3aab012f17d1537ed7a7c6d45b1d2fc0e9">MISched::Bidirectional</a>, </span><span class="doxyHighlightStringLiteral">&quot;bidirectional&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00102" /><CodeLine lineNumber="102"><span class="doxyHighlight">                   </span><span class="doxyHighlightStringLiteral">&quot;Force bidirectional post reg-alloc list scheduling&quot;</span><span class="doxyHighlight">)));</span></CodeLine>
<Link id="l00103" /><CodeLine lineNumber="103"></CodeLine>
<Link id="l00104" /><CodeLine lineNumber="104"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00105" /><CodeLine lineNumber="105" lineLink="/docs/api/namespaces/llvm/#a82ab0315644106de03b36f143328179f"><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/#a82ab0315644106de03b36f143328179f">DumpCriticalPathLength</a>(</span><span class="doxyHighlightStringLiteral">&quot;misched-dcpl&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00106" /><CodeLine lineNumber="106"><span class="doxyHighlight">                       <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Print critical path length to stdout&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00107" /><CodeLine lineNumber="107"></CodeLine>
<Link id="l00108" /><CodeLine lineNumber="108" lineLink="/docs/api/namespaces/llvm/#a8627addd5d299219f6bbf71de8e1e9db"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>(</span></CodeLine>
<Link id="l00109" /><CodeLine lineNumber="109"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;verify-misched&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00110" /><CodeLine lineNumber="110"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Verify machine instrs before and after machine scheduling&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00111" /><CodeLine lineNumber="111"></CodeLine>
<Link id="l00112" /><CodeLine lineNumber="112"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l00113" /><CodeLine lineNumber="113" lineLink="/docs/api/namespaces/llvm/#a910a848984f22eb7394be9141712cd47"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="/docs/api/namespaces/llvm/#a5ec9cfe35d76125af923975fa0c1730a">ViewMISchedDAGs</a>(</span></CodeLine>
<Link id="l00114" /><CodeLine lineNumber="114"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;view-misched-dags&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00115" /><CodeLine lineNumber="115"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Pop up a window to show MISched dags after they are processed&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00116" /><CodeLine lineNumber="116" lineLink="/docs/api/namespaces/llvm/#a69f79e7e5cdcd47a3cdfb33f1dbd89ef"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="/docs/api/namespaces/llvm/#a0e9fde7ed08fd233750d0a947147dfa1">PrintDAGs</a>(</span><span class="doxyHighlightStringLiteral">&quot;misched-print-dags&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00117" /><CodeLine lineNumber="117"><span class="doxyHighlight">                        <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Print schedule DAGs&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00118" /><CodeLine lineNumber="118" lineLink="/docs/api/namespaces/llvm/#a3f253389931150fd73bfae4cd61c3ae6"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="/docs/api/namespaces/llvm/#a3f253389931150fd73bfae4cd61c3ae6">MISchedDumpReservedCycles</a>(</span></CodeLine>
<Link id="l00119" /><CodeLine lineNumber="119"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;misched-dump-reserved-cycles&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00120" /><CodeLine lineNumber="120"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Dump resource usage at schedule boundary.&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00121" /><CodeLine lineNumber="121" lineLink="/docs/api/namespaces/llvm/#afaad94654d336ce094254a1c694ee4e5"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="/docs/api/namespaces/llvm/#afaad94654d336ce094254a1c694ee4e5">MischedDetailResourceBooking</a>(</span></CodeLine>
<Link id="l00122" /><CodeLine lineNumber="122"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;misched-detail-resource-booking&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00123" /><CodeLine lineNumber="123"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Show details of invoking getNextResoufceCycle.&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00124" /><CodeLine lineNumber="124"><span class="doxyHighlightPreprocessor">#else</span></CodeLine>
<Link id="l00125" /><CodeLine lineNumber="125"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a5ec9cfe35d76125af923975fa0c1730a">ViewMISchedDAGs</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00126" /><CodeLine lineNumber="126"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a0e9fde7ed08fd233750d0a947147dfa1">PrintDAGs</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00127" /><CodeLine lineNumber="127"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#afaad94654d336ce094254a1c694ee4e5">MischedDetailResourceBooking</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00128" /><CodeLine lineNumber="128"><span class="doxyHighlightPreprocessor">#ifdef LLVM&#95;ENABLE&#95;DUMP</span></CodeLine>
<Link id="l00129" /><CodeLine lineNumber="129"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a3f253389931150fd73bfae4cd61c3ae6">MISchedDumpReservedCycles</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00130" /><CodeLine lineNumber="130"><span class="doxyHighlightPreprocessor">#endif </span><span class="doxyHighlightComment">// LLVM&#95;ENABLE&#95;DUMP</span></CodeLine>
<Link id="l00131" /><CodeLine lineNumber="131"><span class="doxyHighlightPreprocessor">#endif </span><span class="doxyHighlightComment">// NDEBUG</span></CodeLine>
<Link id="l00132" /><CodeLine lineNumber="132"></CodeLine>
<Link id="l00133" /><CodeLine lineNumber="133"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end namespace llvm</span></CodeLine>
<Link id="l00134" /><CodeLine lineNumber="134"></CodeLine>
<Link id="l00135" /><CodeLine lineNumber="135"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l00136" /><CodeLine lineNumber="136"><span class="doxyHighlightComment">/// In some situations a few uninteresting nodes depend on nearly all other</span></CodeLine>
<Link id="l00137" /><CodeLine lineNumber="137"><span class="doxyHighlightComment">/// nodes in the graph, provide a cutoff to hide them.</span></CodeLine>
<Link id="l00138" /><CodeLine lineNumber="138" lineLink="#ac2b8a3811867143546f43d3adc8cd2f6"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a> <a href="#ac2b8a3811867143546f43d3adc8cd2f6">ViewMISchedCutoff</a>(</span><span class="doxyHighlightStringLiteral">&quot;view-misched-cutoff&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00139" /><CodeLine lineNumber="139"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Hide nodes with more predecessor/successor than cutoff&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00140" /><CodeLine lineNumber="140"></CodeLine>
<Link id="l00141" /><CodeLine lineNumber="141" lineLink="#a533a172b0f7e2e6d667464a68c6f30ea"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a> <a href="#a533a172b0f7e2e6d667464a68c6f30ea">MISchedCutoff</a>(</span><span class="doxyHighlightStringLiteral">&quot;misched-cutoff&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00142" /><CodeLine lineNumber="142"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Stop scheduling after N instructions&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(~0U));</span></CodeLine>
<Link id="l00143" /><CodeLine lineNumber="143"></CodeLine>
<Link id="l00144" /><CodeLine lineNumber="144" lineLink="#aa9e9eecb42c6e825c279845f69f28aa2"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;std::string&gt;</a> <a href="#aa9e9eecb42c6e825c279845f69f28aa2">SchedOnlyFunc</a>(</span><span class="doxyHighlightStringLiteral">&quot;misched-only-func&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00145" /><CodeLine lineNumber="145"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Only schedule this function&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00146" /><CodeLine lineNumber="146" lineLink="#a55fc025b3f9710787dfefd7a551c2568"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a> <a href="#a55fc025b3f9710787dfefd7a551c2568">SchedOnlyBlock</a>(</span><span class="doxyHighlightStringLiteral">&quot;misched-only-block&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00147" /><CodeLine lineNumber="147"><span class="doxyHighlight">                                        <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Only schedule this MBB#&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00148" /><CodeLine lineNumber="148"><span class="doxyHighlightPreprocessor">#endif </span><span class="doxyHighlightComment">// NDEBUG</span></CodeLine>
<Link id="l00149" /><CodeLine lineNumber="149"></CodeLine>
<Link id="l00150" /><CodeLine lineNumber="150"><span class="doxyHighlightComment">/// Avoid quadratic complexity in unusually large basic blocks by limiting the</span></CodeLine>
<Link id="l00151" /><CodeLine lineNumber="151"><span class="doxyHighlightComment">/// size of the ready lists.</span></CodeLine>
<Link id="l00152" /><CodeLine lineNumber="152" lineLink="#af040ecdbfbf801186c7941597cc793a6"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a> <a href="#af040ecdbfbf801186c7941597cc793a6">ReadyListLimit</a>(</span><span class="doxyHighlightStringLiteral">&quot;misched-limit&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00153" /><CodeLine lineNumber="153"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Limit ready list to N instructions&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(256));</span></CodeLine>
<Link id="l00154" /><CodeLine lineNumber="154"></CodeLine>
<Link id="l00155" /><CodeLine lineNumber="155" lineLink="#a589614403a45de30e887d6401dc1be2a"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a589614403a45de30e887d6401dc1be2a">EnableRegPressure</a>(</span><span class="doxyHighlightStringLiteral">&quot;misched-regpressure&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00156" /><CodeLine lineNumber="156"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Enable register pressure scheduling.&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00157" /><CodeLine lineNumber="157"></CodeLine>
<Link id="l00158" /><CodeLine lineNumber="158" lineLink="#a2f23c1bd760a7a5a5acc6e4eb40bd9d9"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a2f23c1bd760a7a5a5acc6e4eb40bd9d9">EnableCyclicPath</a>(</span><span class="doxyHighlightStringLiteral">&quot;misched-cyclicpath&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00159" /><CodeLine lineNumber="159"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Enable cyclic critical path analysis.&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00160" /><CodeLine lineNumber="160"></CodeLine>
<Link id="l00161" /><CodeLine lineNumber="161" lineLink="#a1b85cadc1b5f4497a2ef2371ce3fa3c4"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a1b85cadc1b5f4497a2ef2371ce3fa3c4">EnableMemOpCluster</a>(</span><span class="doxyHighlightStringLiteral">&quot;misched-cluster&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00162" /><CodeLine lineNumber="162"><span class="doxyHighlight">                                        <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Enable memop clustering.&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00163" /><CodeLine lineNumber="163"><span class="doxyHighlight">                                        <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00164" /><CodeLine lineNumber="164"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></span></CodeLine>
<Link id="l00165" /><CodeLine lineNumber="165" lineLink="#a6d7874db6e333966be014090e66b309b"><span class="doxyHighlight">    <a href="#a6d7874db6e333966be014090e66b309b">ForceFastCluster</a>(</span><span class="doxyHighlightStringLiteral">&quot;force-fast-cluster&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00166" /><CodeLine lineNumber="166"><span class="doxyHighlight">                     <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Switch to fast cluster algorithm with the lost &quot;</span></CodeLine>
<Link id="l00167" /><CodeLine lineNumber="167"><span class="doxyHighlight">                              </span><span class="doxyHighlightStringLiteral">&quot;of some fusion opportunities&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00168" /><CodeLine lineNumber="168"><span class="doxyHighlight">                     <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00169" /><CodeLine lineNumber="169"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a></span></CodeLine>
<Link id="l00170" /><CodeLine lineNumber="170" lineLink="#a6dac5cd81207b66c491978be7b8fbcde"><span class="doxyHighlight">    <a href="#a6dac5cd81207b66c491978be7b8fbcde">FastClusterThreshold</a>(</span><span class="doxyHighlightStringLiteral">&quot;fast-cluster-threshold&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00171" /><CodeLine lineNumber="171"><span class="doxyHighlight">                         <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;The threshold for fast cluster&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00172" /><CodeLine lineNumber="172"><span class="doxyHighlight">                         <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(1000));</span></CodeLine>
<Link id="l00173" /><CodeLine lineNumber="173"></CodeLine>
<Link id="l00174" /><CodeLine lineNumber="174"><span class="doxyHighlightPreprocessor">#if !defined(NDEBUG) || defined(LLVM&#95;ENABLE&#95;DUMP)</span></CodeLine>
<Link id="l00175" /><CodeLine lineNumber="175" lineLink="#afc178c1fabdc9ea75b2e47e85c12e3df"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#afc178c1fabdc9ea75b2e47e85c12e3df">MISchedDumpScheduleTrace</a>(</span></CodeLine>
<Link id="l00176" /><CodeLine lineNumber="176"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;misched-dump-schedule-trace&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00177" /><CodeLine lineNumber="177"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Dump resource usage at schedule boundary.&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00178" /><CodeLine lineNumber="178"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a></span></CodeLine>
<Link id="l00179" /><CodeLine lineNumber="179" lineLink="#a6523b0d71574a464a78e2e05bd67b543"><span class="doxyHighlight">    <a href="#a6523b0d71574a464a78e2e05bd67b543">HeaderColWidth</a>(</span><span class="doxyHighlightStringLiteral">&quot;misched-dump-schedule-trace-col-header-width&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00180" /><CodeLine lineNumber="180"><span class="doxyHighlight">                   <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Set width of the columns with &quot;</span></CodeLine>
<Link id="l00181" /><CodeLine lineNumber="181"><span class="doxyHighlight">                            </span><span class="doxyHighlightStringLiteral">&quot;the resources and schedule units&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00182" /><CodeLine lineNumber="182"><span class="doxyHighlight">                   <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(19));</span></CodeLine>
<Link id="l00183" /><CodeLine lineNumber="183"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a></span></CodeLine>
<Link id="l00184" /><CodeLine lineNumber="184" lineLink="#aa0067e3bf6cee38792f2749e1d16fff4"><span class="doxyHighlight">    <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>(</span><span class="doxyHighlightStringLiteral">&quot;misched-dump-schedule-trace-col-width&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00185" /><CodeLine lineNumber="185"><span class="doxyHighlight">             <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Set width of the columns showing resource booking.&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00186" /><CodeLine lineNumber="186"><span class="doxyHighlight">             <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(5));</span></CodeLine>
<Link id="l00187" /><CodeLine lineNumber="187" lineLink="#a2d7fe448a57a131b2533e439fd6eae1e"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a2d7fe448a57a131b2533e439fd6eae1e">MISchedSortResourcesInTrace</a>(</span></CodeLine>
<Link id="l00188" /><CodeLine lineNumber="188"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;misched-sort-resources-in-trace&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00189" /><CodeLine lineNumber="189"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Sort the resources printed in the dump trace&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00190" /><CodeLine lineNumber="190"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l00191" /><CodeLine lineNumber="191"></CodeLine>
<Link id="l00192" /><CodeLine lineNumber="192"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a></span></CodeLine>
<Link id="l00193" /><CodeLine lineNumber="193" lineLink="#ae812475cdb74bfae4780368f4ff01ccf"><span class="doxyHighlight">    <a href="#ae812475cdb74bfae4780368f4ff01ccf">MIResourceCutOff</a>(</span><span class="doxyHighlightStringLiteral">&quot;misched-resource-cutoff&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00194" /><CodeLine lineNumber="194"><span class="doxyHighlight">                     <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Number of intervals to track&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(10));</span></CodeLine>
<Link id="l00195" /><CodeLine lineNumber="195"></CodeLine>
<Link id="l00196" /><CodeLine lineNumber="196"><span class="doxyHighlightComment">// DAG subtrees must have at least this many nodes.</span></CodeLine>
<Link id="l00197" /><CodeLine lineNumber="197" lineLink="#a20646b5e577c00ae6fc2912a4081f9d5"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="#a20646b5e577c00ae6fc2912a4081f9d5">MinSubtreeSize</a> = 8;</span></CodeLine>
<Link id="l00198" /><CodeLine lineNumber="198"></CodeLine>
<Link id="l00199" /><CodeLine lineNumber="199"><span class="doxyHighlightComment">// Pin the vtables to this file.</span></CodeLine>
<Link id="l00200" /><CodeLine lineNumber="200"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> MachineSchedStrategy::anchor() &#123;&#125;</span></CodeLine>
<Link id="l00201" /><CodeLine lineNumber="201"></CodeLine>
<Link id="l00202" /><CodeLine lineNumber="202"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> ScheduleDAGMutation::anchor() &#123;&#125;</span></CodeLine>
<Link id="l00203" /><CodeLine lineNumber="203"></CodeLine>
<Link id="l00204" /><CodeLine lineNumber="204"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00205" /><CodeLine lineNumber="205"><span class="doxyHighlightComment">// Machine Instruction Scheduling Pass and Registry</span></CodeLine>
<Link id="l00206" /><CodeLine lineNumber="206"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00207" /><CodeLine lineNumber="207"></CodeLine>
<Link id="l00208" /><CodeLine lineNumber="208" lineLink="/docs/api/structs/llvm/machineschedcontext/#ac8df817832c60969961bfb498488fc70"><span class="doxyHighlight"><a href="/docs/api/structs/llvm/machineschedcontext/#ac8df817832c60969961bfb498488fc70">MachineSchedContext::MachineSchedContext</a>() &#123;</span></CodeLine>
<Link id="l00209" /><CodeLine lineNumber="209"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/machineschedcontext/#a510c29d57e9f0343df48b7c58cb89228">RegClassInfo</a> = </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/registerclassinfo">RegisterClassInfo</a>();</span></CodeLine>
<Link id="l00210" /><CodeLine lineNumber="210"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00211" /><CodeLine lineNumber="211"></CodeLine>
<Link id="l00212" /><CodeLine lineNumber="212" lineLink="/docs/api/structs/llvm/machineschedcontext/#ac66a5fd1e8991685c46cfc1652bfeeaf"><span class="doxyHighlight"><a href="/docs/api/structs/llvm/machineschedcontext/#ac66a5fd1e8991685c46cfc1652bfeeaf">MachineSchedContext::~MachineSchedContext</a>() &#123;</span></CodeLine>
<Link id="l00213" /><CodeLine lineNumber="213"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">delete</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/machineschedcontext/#a510c29d57e9f0343df48b7c58cb89228">RegClassInfo</a>;</span></CodeLine>
<Link id="l00214" /><CodeLine lineNumber="214"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00215" /><CodeLine lineNumber="215"></CodeLine>
<Link id="l00216" /><CodeLine lineNumber="216" lineLink="/docs/api/namespaces/anonymous-machinescheduler-cpp-"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00217" /><CodeLine lineNumber="217"></CodeLine>
<Link id="l00218" /><CodeLine lineNumber="218"><span class="doxyHighlightComment">/// Base class for a machine scheduler class that can run at any point.</span></CodeLine>
<Link id="l00219" /><CodeLine lineNumber="219" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#abed31a5bcff83980a1e38c534031aae8">MachineSchedulerBase</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/machineschedcontext/#ac8df817832c60969961bfb498488fc70">MachineSchedContext</a>,</span></CodeLine>
<Link id="l00220" /><CodeLine lineNumber="220"><span class="doxyHighlight">                             </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinefunctionpass/#a29c81d2386f4a727c6d33413807530c8">MachineFunctionPass</a> &#123;</span></CodeLine>
<Link id="l00221" /><CodeLine lineNumber="221"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00222" /><CodeLine lineNumber="222" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#abed31a5bcff83980a1e38c534031aae8"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#abed31a5bcff83980a1e38c534031aae8">MachineSchedulerBase</a>(</span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> &amp;<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>): <a href="/docs/api/classes/llvm/machinefunctionpass/#a29c81d2386f4a727c6d33413807530c8">MachineFunctionPass</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;&#125;</span></CodeLine>
<Link id="l00223" /><CodeLine lineNumber="223"></CodeLine>
<Link id="l00224" /><CodeLine lineNumber="224"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/object/archivewriter-cpp/#aa9f638c7ae7fdd206a6c60e26bef9751">print</a>(<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;O, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/module">Module</a>&#42; = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">) </span><span class="doxyHighlightKeyword">const override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00225" /><CodeLine lineNumber="225"></CodeLine>
<Link id="l00226" /><CodeLine lineNumber="226"><span class="doxyHighlightKeyword">protected</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00227" /><CodeLine lineNumber="227"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> scheduleRegions(<a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &amp;<a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> FixKillFlags);</span></CodeLine>
<Link id="l00228" /><CodeLine lineNumber="228"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00229" /><CodeLine lineNumber="229"></CodeLine>
<Link id="l00230" /><CodeLine lineNumber="230"><span class="doxyHighlightComment">/// MachineScheduler runs after coalescing and before register allocation.</span></CodeLine>
<Link id="l00231" /><CodeLine lineNumber="231" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a0107c12ed6aa7d7935b96015ef5b9ca4">MachineScheduler</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#abed31a5bcff83980a1e38c534031aae8">MachineSchedulerBase</a> &#123;</span></CodeLine>
<Link id="l00232" /><CodeLine lineNumber="232"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00233" /><CodeLine lineNumber="233"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a0107c12ed6aa7d7935b96015ef5b9ca4">MachineScheduler</a>();</span></CodeLine>
<Link id="l00234" /><CodeLine lineNumber="234"></CodeLine>
<Link id="l00235" /><CodeLine lineNumber="235"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#acfe823cc8d6d37bb30948aa5598ebbcd">getAnalysisUsage</a>(<a href="/docs/api/classes/llvm/analysisusage">AnalysisUsage</a> &amp;AU) </span><span class="doxyHighlightKeyword">const override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00236" /><CodeLine lineNumber="236"></CodeLine>
<Link id="l00237" /><CodeLine lineNumber="237"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a8539983d1d0a8b07d92b91c16b9f7a5a">runOnMachineFunction</a>(<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a>&amp;) </span><span class="doxyHighlightKeyword">override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00238" /><CodeLine lineNumber="238"></CodeLine>
<Link id="l00239" /><CodeLine lineNumber="239" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a54a8e8efbbc1034741164545a4777749"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a54a8e8efbbc1034741164545a4777749">ID</a>; </span><span class="doxyHighlightComment">// Class identification, replacement for typeinfo</span></CodeLine>
<Link id="l00240" /><CodeLine lineNumber="240"></CodeLine>
<Link id="l00241" /><CodeLine lineNumber="241"><span class="doxyHighlightKeyword">protected</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00242" /><CodeLine lineNumber="242"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a17ba7babfe87314e8d1fe3db5a8dc805">createMachineScheduler</a>();</span></CodeLine>
<Link id="l00243" /><CodeLine lineNumber="243"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00244" /><CodeLine lineNumber="244"></CodeLine>
<Link id="l00245" /><CodeLine lineNumber="245"><span class="doxyHighlightComment">/// PostMachineScheduler runs after shortly before code emission.</span></CodeLine>
<Link id="l00246" /><CodeLine lineNumber="246" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a95ac78157333c863b9fb682756477f6e">PostMachineScheduler</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#abed31a5bcff83980a1e38c534031aae8">MachineSchedulerBase</a> &#123;</span></CodeLine>
<Link id="l00247" /><CodeLine lineNumber="247"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00248" /><CodeLine lineNumber="248"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a95ac78157333c863b9fb682756477f6e">PostMachineScheduler</a>();</span></CodeLine>
<Link id="l00249" /><CodeLine lineNumber="249"></CodeLine>
<Link id="l00250" /><CodeLine lineNumber="250"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a065b9f9c1b17415e3e76fb115be4f7b4">getAnalysisUsage</a>(<a href="/docs/api/classes/llvm/analysisusage">AnalysisUsage</a> &amp;AU) </span><span class="doxyHighlightKeyword">const override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00251" /><CodeLine lineNumber="251"></CodeLine>
<Link id="l00252" /><CodeLine lineNumber="252"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#ab1dc85fd08ff7aa2a4057683e7a4dc8f">runOnMachineFunction</a>(<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a>&amp;) </span><span class="doxyHighlightKeyword">override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00253" /><CodeLine lineNumber="253"></CodeLine>
<Link id="l00254" /><CodeLine lineNumber="254" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b05199064ffa4992b9874f2470dad1a"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b05199064ffa4992b9874f2470dad1a">ID</a>; </span><span class="doxyHighlightComment">// Class identification, replacement for typeinfo</span></CodeLine>
<Link id="l00255" /><CodeLine lineNumber="255"></CodeLine>
<Link id="l00256" /><CodeLine lineNumber="256"><span class="doxyHighlightKeyword">protected</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00257" /><CodeLine lineNumber="257"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b741fadafc61d8c2e6409af2fc24e35">createPostMachineScheduler</a>();</span></CodeLine>
<Link id="l00258" /><CodeLine lineNumber="258"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00259" /><CodeLine lineNumber="259"></CodeLine>
<Link id="l00260" /><CodeLine lineNumber="260"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end anonymous namespace</span></CodeLine>
<Link id="l00261" /><CodeLine lineNumber="261"></CodeLine>
<Link id="l00262" /><CodeLine lineNumber="262"><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a54a8e8efbbc1034741164545a4777749">MachineScheduler::ID</a> = 0;</span></CodeLine>
<Link id="l00263" /><CodeLine lineNumber="263"></CodeLine>
<Link id="l00264" /><CodeLine lineNumber="264" lineLink="/docs/api/namespaces/llvm/#a4f3ce4ffd1eecf7a4fef2cce86560b1a"><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> &amp;<a href="/docs/api/namespaces/llvm/#a4f3ce4ffd1eecf7a4fef2cce86560b1a">llvm::MachineSchedulerID</a> = <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a54a8e8efbbc1034741164545a4777749">MachineScheduler::ID</a>;</span></CodeLine>
<Link id="l00265" /><CodeLine lineNumber="265"></CodeLine>
<Link id="l00266" /><CodeLine lineNumber="266" lineLink="#a43709087555742d45e0c99ab89ac1df3"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/passsupport-h/#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE&#95;PASS&#95;BEGIN</a>(MachineScheduler, <a href="/docs/api/files/include/include/llvm/include/llvm/adt/genericcycleimpl-h/#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>,</span></CodeLine>
<Link id="l00267" /><CodeLine lineNumber="267"><span class="doxyHighlight">                      </span><span class="doxyHighlightStringLiteral">&quot;Machine Instruction Scheduler&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l00268" /><CodeLine lineNumber="268"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a14724f1ccf528e73bb29bc9230737967">INITIALIZE&#95;PASS&#95;DEPENDENCY</a>(<a href="/docs/api/classes/llvm/aaresultswrapperpass">AAResultsWrapperPass</a>)</span></CodeLine>
<Link id="l00269" /><CodeLine lineNumber="269"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a14724f1ccf528e73bb29bc9230737967">INITIALIZE&#95;PASS&#95;DEPENDENCY</a>(<a href="/docs/api/classes/llvm/machinedominatortreewrapperpass">MachineDominatorTreeWrapperPass</a>)</span></CodeLine>
<Link id="l00270" /><CodeLine lineNumber="270"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a14724f1ccf528e73bb29bc9230737967">INITIALIZE&#95;PASS&#95;DEPENDENCY</a>(<a href="/docs/api/classes/llvm/machineloopinfowrapperpass">MachineLoopInfoWrapperPass</a>)</span></CodeLine>
<Link id="l00271" /><CodeLine lineNumber="271"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a14724f1ccf528e73bb29bc9230737967">INITIALIZE&#95;PASS&#95;DEPENDENCY</a>(<a href="/docs/api/classes/llvm/slotindexeswrapperpass">SlotIndexesWrapperPass</a>)</span></CodeLine>
<Link id="l00272" /><CodeLine lineNumber="272"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a14724f1ccf528e73bb29bc9230737967">INITIALIZE&#95;PASS&#95;DEPENDENCY</a>(<a href="/docs/api/classes/llvm/liveintervalswrapperpass">LiveIntervalsWrapperPass</a>)</span></CodeLine>
<Link id="l00273" /><CodeLine lineNumber="273" lineLink="#a030569d5a541b6110f2ae1b6a3413a58"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a74ce8276b89067e806f67c45a6d92575">INITIALIZE&#95;PASS&#95;END</a>(MachineScheduler, <a href="/docs/api/files/include/include/llvm/include/llvm/adt/genericcycleimpl-h/#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>,</span></CodeLine>
<Link id="l00274" /><CodeLine lineNumber="274" lineLink="#a7ce570ab44c3e7edb0d04fab9dd1d687"><span class="doxyHighlight">                    </span><span class="doxyHighlightStringLiteral">&quot;Machine Instruction Scheduler&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/false">false</a>, <a href="/docs/api/namespaces/false">false</a>)</span></CodeLine>
<Link id="l00275" /><CodeLine lineNumber="275"></CodeLine>
<Link id="l00276" /><CodeLine lineNumber="276" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a0107c12ed6aa7d7935b96015ef5b9ca4"><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a0107c12ed6aa7d7935b96015ef5b9ca4">MachineScheduler</a>::<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a0107c12ed6aa7d7935b96015ef5b9ca4">MachineScheduler</a>() : <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#abed31a5bcff83980a1e38c534031aae8">MachineSchedulerBase</a>(<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a54a8e8efbbc1034741164545a4777749">ID</a>) &#123;</span></CodeLine>
<Link id="l00277" /><CodeLine lineNumber="277"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a9b59b13f97bee321b57c23f4c0cb3ac2">initializeMachineSchedulerPass</a>(&#42;<a href="/docs/api/classes/llvm/passregistry/#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</span></CodeLine>
<Link id="l00278" /><CodeLine lineNumber="278"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00279" /><CodeLine lineNumber="279"></CodeLine>
<Link id="l00280" /><CodeLine lineNumber="280" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#acfe823cc8d6d37bb30948aa5598ebbcd"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#acfe823cc8d6d37bb30948aa5598ebbcd">MachineScheduler::getAnalysisUsage</a>(<a href="/docs/api/classes/llvm/analysisusage">AnalysisUsage</a> &amp;AU)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00281" /><CodeLine lineNumber="281"><span class="doxyHighlight">  AU.<a href="/docs/api/classes/llvm/analysisusage/#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</span></CodeLine>
<Link id="l00282" /><CodeLine lineNumber="282"><span class="doxyHighlight">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/machinedominatortreewrapperpass">MachineDominatorTreeWrapperPass</a>&gt;();</span></CodeLine>
<Link id="l00283" /><CodeLine lineNumber="283"><span class="doxyHighlight">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/machineloopinfowrapperpass">MachineLoopInfoWrapperPass</a>&gt;();</span></CodeLine>
<Link id="l00284" /><CodeLine lineNumber="284"><span class="doxyHighlight">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/aaresultswrapperpass">AAResultsWrapperPass</a>&gt;();</span></CodeLine>
<Link id="l00285" /><CodeLine lineNumber="285"><span class="doxyHighlight">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/targetpassconfig">TargetPassConfig</a>&gt;();</span></CodeLine>
<Link id="l00286" /><CodeLine lineNumber="286"><span class="doxyHighlight">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/slotindexeswrapperpass">SlotIndexesWrapperPass</a>&gt;();</span></CodeLine>
<Link id="l00287" /><CodeLine lineNumber="287"><span class="doxyHighlight">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae9356b720f6fbab112d809738dcc4f2a">addPreserved</a>&lt;<a href="/docs/api/classes/llvm/slotindexeswrapperpass">SlotIndexesWrapperPass</a>&gt;();</span></CodeLine>
<Link id="l00288" /><CodeLine lineNumber="288"><span class="doxyHighlight">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/liveintervalswrapperpass">LiveIntervalsWrapperPass</a>&gt;();</span></CodeLine>
<Link id="l00289" /><CodeLine lineNumber="289"><span class="doxyHighlight">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae9356b720f6fbab112d809738dcc4f2a">addPreserved</a>&lt;<a href="/docs/api/classes/llvm/liveintervalswrapperpass">LiveIntervalsWrapperPass</a>&gt;();</span></CodeLine>
<Link id="l00290" /><CodeLine lineNumber="290"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunctionpass/#a864fd57b4304ef933b3281d0ef85a88e">MachineFunctionPass::getAnalysisUsage</a>(AU);</span></CodeLine>
<Link id="l00291" /><CodeLine lineNumber="291"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00292" /><CodeLine lineNumber="292"></CodeLine>
<Link id="l00293" /><CodeLine lineNumber="293"><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b05199064ffa4992b9874f2470dad1a">PostMachineScheduler::ID</a> = 0;</span></CodeLine>
<Link id="l00294" /><CodeLine lineNumber="294"></CodeLine>
<Link id="l00295" /><CodeLine lineNumber="295" lineLink="/docs/api/namespaces/llvm/#a51a34bf4ca8119bdeb89ffc48c5d4783"><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> &amp;<a href="/docs/api/namespaces/llvm/#a51a34bf4ca8119bdeb89ffc48c5d4783">llvm::PostMachineSchedulerID</a> = <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b05199064ffa4992b9874f2470dad1a">PostMachineScheduler::ID</a>;</span></CodeLine>
<Link id="l00296" /><CodeLine lineNumber="296"></CodeLine>
<Link id="l00297" /><CodeLine lineNumber="297" lineLink="#a219604df9ff809f1af95c0ead787c789"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/passsupport-h/#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE&#95;PASS&#95;BEGIN</a>(PostMachineScheduler, </span><span class="doxyHighlightStringLiteral">&quot;postmisched&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00298" /><CodeLine lineNumber="298"><span class="doxyHighlight">                      </span><span class="doxyHighlightStringLiteral">&quot;PostRA Machine Instruction Scheduler&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l00299" /><CodeLine lineNumber="299"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a14724f1ccf528e73bb29bc9230737967">INITIALIZE&#95;PASS&#95;DEPENDENCY</a>(<a href="/docs/api/classes/llvm/machinedominatortreewrapperpass">MachineDominatorTreeWrapperPass</a>)</span></CodeLine>
<Link id="l00300" /><CodeLine lineNumber="300"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a14724f1ccf528e73bb29bc9230737967">INITIALIZE&#95;PASS&#95;DEPENDENCY</a>(<a href="/docs/api/classes/llvm/machineloopinfowrapperpass">MachineLoopInfoWrapperPass</a>)</span></CodeLine>
<Link id="l00301" /><CodeLine lineNumber="301"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a14724f1ccf528e73bb29bc9230737967">INITIALIZE&#95;PASS&#95;DEPENDENCY</a>(<a href="/docs/api/classes/llvm/aaresultswrapperpass">AAResultsWrapperPass</a>)</span></CodeLine>
<Link id="l00302" /><CodeLine lineNumber="302" lineLink="#a38ac294860d16fa2065e091d3b1790cf"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a74ce8276b89067e806f67c45a6d92575">INITIALIZE&#95;PASS&#95;END</a>(PostMachineScheduler, </span><span class="doxyHighlightStringLiteral">&quot;postmisched&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00303" /><CodeLine lineNumber="303"><span class="doxyHighlight">                    </span><span class="doxyHighlightStringLiteral">&quot;PostRA Machine Instruction Scheduler&quot;</span><span class="doxyHighlight">, <a href="/docs/api/namespaces/false">false</a>, <a href="/docs/api/namespaces/false">false</a>)</span></CodeLine>
<Link id="l00304" /><CodeLine lineNumber="304"></CodeLine>
<Link id="l00305" /><CodeLine lineNumber="305" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a95ac78157333c863b9fb682756477f6e"><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a95ac78157333c863b9fb682756477f6e">PostMachineScheduler</a>::<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a95ac78157333c863b9fb682756477f6e">PostMachineScheduler</a>() : <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#abed31a5bcff83980a1e38c534031aae8">MachineSchedulerBase</a>(<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b05199064ffa4992b9874f2470dad1a">ID</a>) &#123;</span></CodeLine>
<Link id="l00306" /><CodeLine lineNumber="306"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a4620b31befc2e9df66eeb669568332c6">initializePostMachineSchedulerPass</a>(&#42;<a href="/docs/api/classes/llvm/passregistry/#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</span></CodeLine>
<Link id="l00307" /><CodeLine lineNumber="307"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00308" /><CodeLine lineNumber="308"></CodeLine>
<Link id="l00309" /><CodeLine lineNumber="309" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a065b9f9c1b17415e3e76fb115be4f7b4"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a065b9f9c1b17415e3e76fb115be4f7b4">PostMachineScheduler::getAnalysisUsage</a>(<a href="/docs/api/classes/llvm/analysisusage">AnalysisUsage</a> &amp;AU)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00310" /><CodeLine lineNumber="310"><span class="doxyHighlight">  AU.<a href="/docs/api/classes/llvm/analysisusage/#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</span></CodeLine>
<Link id="l00311" /><CodeLine lineNumber="311"><span class="doxyHighlight">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/machinedominatortreewrapperpass">MachineDominatorTreeWrapperPass</a>&gt;();</span></CodeLine>
<Link id="l00312" /><CodeLine lineNumber="312"><span class="doxyHighlight">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/machineloopinfowrapperpass">MachineLoopInfoWrapperPass</a>&gt;();</span></CodeLine>
<Link id="l00313" /><CodeLine lineNumber="313"><span class="doxyHighlight">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/aaresultswrapperpass">AAResultsWrapperPass</a>&gt;();</span></CodeLine>
<Link id="l00314" /><CodeLine lineNumber="314"><span class="doxyHighlight">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/targetpassconfig">TargetPassConfig</a>&gt;();</span></CodeLine>
<Link id="l00315" /><CodeLine lineNumber="315"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunctionpass/#a864fd57b4304ef933b3281d0ef85a88e">MachineFunctionPass::getAnalysisUsage</a>(AU);</span></CodeLine>
<Link id="l00316" /><CodeLine lineNumber="316"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00317" /><CodeLine lineNumber="317"></CodeLine>
<Link id="l00318" /><CodeLine lineNumber="318"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/machinepassregistry">MachinePassRegistry&lt;MachineSchedRegistry::ScheduleDAGCtor&gt;</a></span></CodeLine>
<Link id="l00319" /><CodeLine lineNumber="319"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineschedregistry/#a27747bbaa6d919fb4a31796ac5146dfa">MachineSchedRegistry::Registry</a>;</span></CodeLine>
<Link id="l00320" /><CodeLine lineNumber="320"></CodeLine>
<Link id="l00321" /><CodeLine lineNumber="321"><span class="doxyHighlightComment">/// A dummy default scheduler factory indicates whether the scheduler</span></CodeLine>
<Link id="l00322" /><CodeLine lineNumber="322"><span class="doxyHighlightComment">/// is overridden on the command line.</span></CodeLine>
<Link id="l00323" /><CodeLine lineNumber="323" lineLink="#a7c2f26bf8531d7774d205e720a71d616"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="#a7c2f26bf8531d7774d205e720a71d616">useDefaultMachineSched</a>(<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</span></CodeLine>
<Link id="l00324" /><CodeLine lineNumber="324"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00325" /><CodeLine lineNumber="325"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00326" /><CodeLine lineNumber="326"></CodeLine>
<Link id="l00327" /><CodeLine lineNumber="327"><span class="doxyHighlightComment">/// MachineSchedOpt allows command line selection of the scheduler.</span></CodeLine>
<Link id="l00328" /><CodeLine lineNumber="328"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt;<a href="/docs/api/classes/llvm/machineschedregistry/#a9fec0ddb5cfb9db5082a914d99310c2e">MachineSchedRegistry::ScheduleDAGCtor</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00329" /><CodeLine lineNumber="329"><span class="doxyHighlight">               <a href="/docs/api/classes/llvm/registerpassparser">RegisterPassParser&lt;MachineSchedRegistry&gt;</a>&gt;</span></CodeLine>
<Link id="l00330" /><CodeLine lineNumber="330" lineLink="#a46878327214ad358989afa9f97d835f6"><span class="doxyHighlight"><a href="#a46878327214ad358989afa9f97d835f6">MachineSchedOpt</a>(</span><span class="doxyHighlightStringLiteral">&quot;misched&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00331" /><CodeLine lineNumber="331"><span class="doxyHighlight">                <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(&amp;<a href="#a7c2f26bf8531d7774d205e720a71d616">useDefaultMachineSched</a>), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</span></CodeLine>
<Link id="l00332" /><CodeLine lineNumber="332"><span class="doxyHighlight">                <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Machine instruction scheduler to use&quot;</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l00333" /><CodeLine lineNumber="333"></CodeLine>
<Link id="l00334" /><CodeLine lineNumber="334"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a></span></CodeLine>
<Link id="l00335" /><CodeLine lineNumber="335" lineLink="#aa37bca43d96ba0bf7541b49375e9c4ec"><span class="doxyHighlight"><a href="#aa37bca43d96ba0bf7541b49375e9c4ec">DefaultSchedRegistry</a>(</span><span class="doxyHighlightStringLiteral">&quot;default&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;Use the target&#39;s default scheduler choice.&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00336" /><CodeLine lineNumber="336"><span class="doxyHighlight">                     <a href="#a7c2f26bf8531d7774d205e720a71d616">useDefaultMachineSched</a>);</span></CodeLine>
<Link id="l00337" /><CodeLine lineNumber="337"></CodeLine>
<Link id="l00338" /><CodeLine lineNumber="338" lineLink="#a4b2ef2249df68fd80eb12e019875a75c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a4b2ef2249df68fd80eb12e019875a75c">EnableMachineSched</a>(</span></CodeLine>
<Link id="l00339" /><CodeLine lineNumber="339"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;enable-misched&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00340" /><CodeLine lineNumber="340"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Enable the machine instruction scheduling pass.&quot;</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00341" /><CodeLine lineNumber="341"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</span></CodeLine>
<Link id="l00342" /><CodeLine lineNumber="342"></CodeLine>
<Link id="l00343" /><CodeLine lineNumber="343" lineLink="#ad6a82628c5bb536ea7591cc3d51ba235"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#ad6a82628c5bb536ea7591cc3d51ba235">EnablePostRAMachineSched</a>(</span></CodeLine>
<Link id="l00344" /><CodeLine lineNumber="344"><span class="doxyHighlight">    </span><span class="doxyHighlightStringLiteral">&quot;enable-post-misched&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00345" /><CodeLine lineNumber="345"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Enable the post-ra machine instruction scheduling pass.&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00346" /><CodeLine lineNumber="346"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</span></CodeLine>
<Link id="l00347" /><CodeLine lineNumber="347"></CodeLine>
<Link id="l00348" /><CodeLine lineNumber="348"><span class="doxyHighlightComment">/// Decrement this iterator until reaching the top or a non-debug instr.</span></CodeLine>
<Link id="l00349" /><CodeLine lineNumber="349"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a></span></CodeLine>
<Link id="l00350" /><CodeLine lineNumber="350" lineLink="#a459acab05344caa836aa036f1829c928"><span class="doxyHighlight"><a href="#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</span></CodeLine>
<Link id="l00351" /><CodeLine lineNumber="351"><span class="doxyHighlight">              <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> Beg) &#123;</span></CodeLine>
<Link id="l00352" /><CodeLine lineNumber="352"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != Beg &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;reached the top of the region, cannot decrement&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00353" /><CodeLine lineNumber="353"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (--<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != Beg) &#123;</span></CodeLine>
<Link id="l00354" /><CodeLine lineNumber="354"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isDebugOrPseudoInstr())</span></CodeLine>
<Link id="l00355" /><CodeLine lineNumber="355"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00356" /><CodeLine lineNumber="356"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00357" /><CodeLine lineNumber="357"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</span></CodeLine>
<Link id="l00358" /><CodeLine lineNumber="358"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00359" /><CodeLine lineNumber="359"></CodeLine>
<Link id="l00360" /><CodeLine lineNumber="360"><span class="doxyHighlightComment">/// Non-const version.</span></CodeLine>
<Link id="l00361" /><CodeLine lineNumber="361"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a></span></CodeLine>
<Link id="l00362" /><CodeLine lineNumber="362" lineLink="#a24aad0e646c24622750ff2ee10b74109"><span class="doxyHighlight"><a href="#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</span></CodeLine>
<Link id="l00363" /><CodeLine lineNumber="363"><span class="doxyHighlight">              <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> Beg) &#123;</span></CodeLine>
<Link id="l00364" /><CodeLine lineNumber="364"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>), Beg)</span></CodeLine>
<Link id="l00365" /><CodeLine lineNumber="365"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/machineinstrbundleiterator/#a4682e01b75bf6adf297c9948f992ef79">getNonConstIterator</a>();</span></CodeLine>
<Link id="l00366" /><CodeLine lineNumber="366"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00367" /><CodeLine lineNumber="367"></CodeLine>
<Link id="l00368" /><CodeLine lineNumber="368"><span class="doxyHighlightComment">/// If this iterator is a debug value, increment until reaching the End or a</span></CodeLine>
<Link id="l00369" /><CodeLine lineNumber="369"><span class="doxyHighlightComment">/// non-debug instruction.</span></CodeLine>
<Link id="l00370" /><CodeLine lineNumber="370"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a></span></CodeLine>
<Link id="l00371" /><CodeLine lineNumber="371" lineLink="#a1c8a9363a3eb113ca42064a03636b135"><span class="doxyHighlight"><a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</span></CodeLine>
<Link id="l00372" /><CodeLine lineNumber="372"><span class="doxyHighlight">            <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> End) &#123;</span></CodeLine>
<Link id="l00373" /><CodeLine lineNumber="373"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight">(; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != End; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l00374" /><CodeLine lineNumber="374"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isDebugOrPseudoInstr())</span></CodeLine>
<Link id="l00375" /><CodeLine lineNumber="375"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00376" /><CodeLine lineNumber="376"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00377" /><CodeLine lineNumber="377"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</span></CodeLine>
<Link id="l00378" /><CodeLine lineNumber="378"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00379" /><CodeLine lineNumber="379"></CodeLine>
<Link id="l00380" /><CodeLine lineNumber="380"><span class="doxyHighlightComment">/// Non-const version.</span></CodeLine>
<Link id="l00381" /><CodeLine lineNumber="381"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a></span></CodeLine>
<Link id="l00382" /><CodeLine lineNumber="382" lineLink="#aa9432402dc18539818e3dae69e135ed4"><span class="doxyHighlight"><a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</span></CodeLine>
<Link id="l00383" /><CodeLine lineNumber="383"><span class="doxyHighlight">            <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> End) &#123;</span></CodeLine>
<Link id="l00384" /><CodeLine lineNumber="384"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>), End)</span></CodeLine>
<Link id="l00385" /><CodeLine lineNumber="385"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/machineinstrbundleiterator/#a4682e01b75bf6adf297c9948f992ef79">getNonConstIterator</a>();</span></CodeLine>
<Link id="l00386" /><CodeLine lineNumber="386"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00387" /><CodeLine lineNumber="387"></CodeLine>
<Link id="l00388" /><CodeLine lineNumber="388"><span class="doxyHighlightComment">/// Instantiate a ScheduleDAGInstrs that will be owned by the caller.</span></CodeLine>
<Link id="l00389" /><CodeLine lineNumber="389" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a17ba7babfe87314e8d1fe3db5a8dc805"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a17ba7babfe87314e8d1fe3db5a8dc805">MachineScheduler::createMachineScheduler</a>() &#123;</span></CodeLine>
<Link id="l00390" /><CodeLine lineNumber="390"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Select the scheduler, or set the default.</span></CodeLine>
<Link id="l00391" /><CodeLine lineNumber="391"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineschedregistry/#a9fec0ddb5cfb9db5082a914d99310c2e">MachineSchedRegistry::ScheduleDAGCtor</a> Ctor = <a href="#a46878327214ad358989afa9f97d835f6">MachineSchedOpt</a>;</span></CodeLine>
<Link id="l00392" /><CodeLine lineNumber="392"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ctor != <a href="#a7c2f26bf8531d7774d205e720a71d616">useDefaultMachineSched</a>)</span></CodeLine>
<Link id="l00393" /><CodeLine lineNumber="393"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Ctor(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00394" /><CodeLine lineNumber="394"></CodeLine>
<Link id="l00395" /><CodeLine lineNumber="395"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Get the default scheduler set by the target for this function.</span></CodeLine>
<Link id="l00396" /><CodeLine lineNumber="396"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a> = <a href="/docs/api/structs/llvm/machineschedcontext/#a3c04bf922b53ed32316b9725a99a5b2f">PassConfig</a>-&gt;createMachineScheduler(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00397" /><CodeLine lineNumber="397"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>)</span></CodeLine>
<Link id="l00398" /><CodeLine lineNumber="398"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>;</span></CodeLine>
<Link id="l00399" /><CodeLine lineNumber="399"></CodeLine>
<Link id="l00400" /><CodeLine lineNumber="400"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Default to GenericScheduler.</span></CodeLine>
<Link id="l00401" /><CodeLine lineNumber="401"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a5365898dd1deb10d065e288a2babd511">createGenericSchedLive</a>(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00402" /><CodeLine lineNumber="402"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00403" /><CodeLine lineNumber="403"></CodeLine>
<Link id="l00404" /><CodeLine lineNumber="404"><span class="doxyHighlightComment">/// Instantiate a ScheduleDAGInstrs for PostRA scheduling that will be owned by</span></CodeLine>
<Link id="l00405" /><CodeLine lineNumber="405"><span class="doxyHighlightComment">/// the caller. We don&#39;t have a command line option to override the postRA</span></CodeLine>
<Link id="l00406" /><CodeLine lineNumber="406"><span class="doxyHighlightComment">/// scheduler. The Target must configure it.</span></CodeLine>
<Link id="l00407" /><CodeLine lineNumber="407" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b741fadafc61d8c2e6409af2fc24e35"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b741fadafc61d8c2e6409af2fc24e35">PostMachineScheduler::createPostMachineScheduler</a>() &#123;</span></CodeLine>
<Link id="l00408" /><CodeLine lineNumber="408"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Get the postRA scheduler set by the target for this function.</span></CodeLine>
<Link id="l00409" /><CodeLine lineNumber="409"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a> = <a href="/docs/api/structs/llvm/machineschedcontext/#a3c04bf922b53ed32316b9725a99a5b2f">PassConfig</a>-&gt;createPostMachineScheduler(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00410" /><CodeLine lineNumber="410"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>)</span></CodeLine>
<Link id="l00411" /><CodeLine lineNumber="411"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>;</span></CodeLine>
<Link id="l00412" /><CodeLine lineNumber="412"></CodeLine>
<Link id="l00413" /><CodeLine lineNumber="413"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Default to GenericScheduler.</span></CodeLine>
<Link id="l00414" /><CodeLine lineNumber="414"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aa2f0c2f2a077d67dc0bcb24bc31e3b05">createGenericSchedPostRA</a>(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00415" /><CodeLine lineNumber="415"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00416" /><CodeLine lineNumber="416"></CodeLine>
<Link id="l00417" /><CodeLine lineNumber="417"><span class="doxyHighlightComment">/// Top-level MachineScheduler pass driver.</span></CodeLine>
<Link id="l00418" /><CodeLine lineNumber="418"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00419" /><CodeLine lineNumber="419"><span class="doxyHighlightComment">/// Visit blocks in function order. Divide each block into scheduling regions</span></CodeLine>
<Link id="l00420" /><CodeLine lineNumber="420"><span class="doxyHighlightComment">/// and visit them bottom-up. Visiting regions bottom-up is not required, but is</span></CodeLine>
<Link id="l00421" /><CodeLine lineNumber="421"><span class="doxyHighlightComment">/// consistent with the DAG builder, which traverses the interior of the</span></CodeLine>
<Link id="l00422" /><CodeLine lineNumber="422"><span class="doxyHighlightComment">/// scheduling regions bottom-up.</span></CodeLine>
<Link id="l00423" /><CodeLine lineNumber="423"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00424" /><CodeLine lineNumber="424"><span class="doxyHighlightComment">/// This design avoids exposing scheduling boundaries to the DAG builder,</span></CodeLine>
<Link id="l00425" /><CodeLine lineNumber="425"><span class="doxyHighlightComment">/// simplifying the DAG builder&#39;s support for &quot;special&quot; target instructions.</span></CodeLine>
<Link id="l00426" /><CodeLine lineNumber="426"><span class="doxyHighlightComment">/// At the same time the design allows target schedulers to operate across</span></CodeLine>
<Link id="l00427" /><CodeLine lineNumber="427"><span class="doxyHighlightComment">/// scheduling boundaries, for example to bundle the boundary instructions</span></CodeLine>
<Link id="l00428" /><CodeLine lineNumber="428"><span class="doxyHighlightComment">/// without reordering them. This creates complexity, because the target</span></CodeLine>
<Link id="l00429" /><CodeLine lineNumber="429"><span class="doxyHighlightComment">/// scheduler must update the RegionBegin and RegionEnd positions cached by</span></CodeLine>
<Link id="l00430" /><CodeLine lineNumber="430"><span class="doxyHighlightComment">/// ScheduleDAGInstrs whenever adding or removing instructions. A much simpler</span></CodeLine>
<Link id="l00431" /><CodeLine lineNumber="431"><span class="doxyHighlightComment">/// design would be to split blocks at scheduling boundaries, but LLVM has a</span></CodeLine>
<Link id="l00432" /><CodeLine lineNumber="432"><span class="doxyHighlightComment">/// general bias against block splitting purely for implementation simplicity.</span></CodeLine>
<Link id="l00433" /><CodeLine lineNumber="433" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a8539983d1d0a8b07d92b91c16b9f7a5a"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a8539983d1d0a8b07d92b91c16b9f7a5a">MachineScheduler::runOnMachineFunction</a>(<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;mf) &#123;</span></CodeLine>
<Link id="l00434" /><CodeLine lineNumber="434"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/functionpass/#af9f5f511d75e16f09a5520cb9444cfa8">skipFunction</a>(mf.<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>()))</span></CodeLine>
<Link id="l00435" /><CodeLine lineNumber="435"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00436" /><CodeLine lineNumber="436"></CodeLine>
<Link id="l00437" /><CodeLine lineNumber="437"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a4b2ef2249df68fd80eb12e019875a75c">EnableMachineSched</a>.getNumOccurrences()) &#123;</span></CodeLine>
<Link id="l00438" /><CodeLine lineNumber="438"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#a4b2ef2249df68fd80eb12e019875a75c">EnableMachineSched</a>)</span></CodeLine>
<Link id="l00439" /><CodeLine lineNumber="439"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00440" /><CodeLine lineNumber="440"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!mf.<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>().<a href="/docs/api/classes/llvm/targetsubtargetinfo/#a73d86eabd25d4e6a05310e1b0d445d0a">enableMachineScheduler</a>())</span></CodeLine>
<Link id="l00441" /><CodeLine lineNumber="441"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00442" /><CodeLine lineNumber="442"></CodeLine>
<Link id="l00443" /><CodeLine lineNumber="443"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Before MISched:\\n&quot;</span><span class="doxyHighlight">; mf.<a href="/docs/api/classes/llvm/machinefunction/#ad9c9c8915579c517eff56e638c1a643c">print</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()));</span></CodeLine>
<Link id="l00444" /><CodeLine lineNumber="444"></CodeLine>
<Link id="l00445" /><CodeLine lineNumber="445"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Initialize the context of the pass.</span></CodeLine>
<Link id="l00446" /><CodeLine lineNumber="446"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a> = &amp;mf;</span></CodeLine>
<Link id="l00447" /><CodeLine lineNumber="447"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/machineschedcontext/#a9334842806d97bee74af8752ebe19fbe">MLI</a> = &amp;<a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;MachineLoopInfoWrapperPass&gt;</a>().getLI();</span></CodeLine>
<Link id="l00448" /><CodeLine lineNumber="448"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/machineschedcontext/#a433a18eaf42c2038f519428e580cbc53">MDT</a> = &amp;<a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;MachineDominatorTreeWrapperPass&gt;</a>().getDomTree();</span></CodeLine>
<Link id="l00449" /><CodeLine lineNumber="449"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/machineschedcontext/#a3c04bf922b53ed32316b9725a99a5b2f">PassConfig</a> = &amp;<a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;TargetPassConfig&gt;</a>();</span></CodeLine>
<Link id="l00450" /><CodeLine lineNumber="450"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/machineschedcontext/#a55290be59c885ea01c412fa6926b61cf">AA</a> = &amp;<a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;AAResultsWrapperPass&gt;</a>().getAAResults();</span></CodeLine>
<Link id="l00451" /><CodeLine lineNumber="451"></CodeLine>
<Link id="l00452" /><CodeLine lineNumber="452"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/machineschedcontext/#aa604d18378910f87649c38841cc1531c">LIS</a> = &amp;<a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;LiveIntervalsWrapperPass&gt;</a>().getLIS();</span></CodeLine>
<Link id="l00453" /><CodeLine lineNumber="453"></CodeLine>
<Link id="l00454" /><CodeLine lineNumber="454"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>) &#123;</span></CodeLine>
<Link id="l00455" /><CodeLine lineNumber="455"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/structs/llvm/machineschedcontext/#aa604d18378910f87649c38841cc1531c">LIS</a>-&gt;dump());</span></CodeLine>
<Link id="l00456" /><CodeLine lineNumber="456"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;verify(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;Before machine scheduling.&quot;</span><span class="doxyHighlight">, &amp;<a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>());</span></CodeLine>
<Link id="l00457" /><CodeLine lineNumber="457"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00458" /><CodeLine lineNumber="458"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/machineschedcontext/#a510c29d57e9f0343df48b7c58cb89228">RegClassInfo</a>-&gt;runOnMachineFunction(&#42;<a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>);</span></CodeLine>
<Link id="l00459" /><CodeLine lineNumber="459"></CodeLine>
<Link id="l00460" /><CodeLine lineNumber="460"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instantiate the selected scheduler for this target, function, and</span></CodeLine>
<Link id="l00461" /><CodeLine lineNumber="461"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// optimization level.</span></CodeLine>
<Link id="l00462" /><CodeLine lineNumber="462"><span class="doxyHighlight">  std::unique&#95;ptr&lt;ScheduleDAGInstrs&gt; <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>(<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a17ba7babfe87314e8d1fe3db5a8dc805">createMachineScheduler</a>());</span></CodeLine>
<Link id="l00463" /><CodeLine lineNumber="463"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#a5d9f088a58ed26977308b92dba6c50f6">scheduleRegions</a>(&#42;<a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00464" /><CodeLine lineNumber="464"></CodeLine>
<Link id="l00465" /><CodeLine lineNumber="465"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/structs/llvm/machineschedcontext/#aa604d18378910f87649c38841cc1531c">LIS</a>-&gt;dump());</span></CodeLine>
<Link id="l00466" /><CodeLine lineNumber="466"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>)</span></CodeLine>
<Link id="l00467" /><CodeLine lineNumber="467"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;verify(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;After machine scheduling.&quot;</span><span class="doxyHighlight">, &amp;<a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>());</span></CodeLine>
<Link id="l00468" /><CodeLine lineNumber="468"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00469" /><CodeLine lineNumber="469"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00470" /><CodeLine lineNumber="470"></CodeLine>
<Link id="l00471" /><CodeLine lineNumber="471" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#ab1dc85fd08ff7aa2a4057683e7a4dc8f"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#ab1dc85fd08ff7aa2a4057683e7a4dc8f">PostMachineScheduler::runOnMachineFunction</a>(<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;mf) &#123;</span></CodeLine>
<Link id="l00472" /><CodeLine lineNumber="472"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/functionpass/#af9f5f511d75e16f09a5520cb9444cfa8">skipFunction</a>(mf.<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>()))</span></CodeLine>
<Link id="l00473" /><CodeLine lineNumber="473"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00474" /><CodeLine lineNumber="474"></CodeLine>
<Link id="l00475" /><CodeLine lineNumber="475"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#ad6a82628c5bb536ea7591cc3d51ba235">EnablePostRAMachineSched</a>.getNumOccurrences()) &#123;</span></CodeLine>
<Link id="l00476" /><CodeLine lineNumber="476"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#ad6a82628c5bb536ea7591cc3d51ba235">EnablePostRAMachineSched</a>)</span></CodeLine>
<Link id="l00477" /><CodeLine lineNumber="477"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00478" /><CodeLine lineNumber="478"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!mf.<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>().<a href="/docs/api/classes/llvm/targetsubtargetinfo/#ab4787adecfc77e72db225098a27e902f">enablePostRAMachineScheduler</a>()) &#123;</span></CodeLine>
<Link id="l00479" /><CodeLine lineNumber="479"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Subtarget disables post-MI-sched.\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00480" /><CodeLine lineNumber="480"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00481" /><CodeLine lineNumber="481"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00482" /><CodeLine lineNumber="482"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Before post-MI-sched:\\n&quot;</span><span class="doxyHighlight">; mf.<a href="/docs/api/classes/llvm/machinefunction/#ad9c9c8915579c517eff56e638c1a643c">print</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()));</span></CodeLine>
<Link id="l00483" /><CodeLine lineNumber="483"></CodeLine>
<Link id="l00484" /><CodeLine lineNumber="484"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Initialize the context of the pass.</span></CodeLine>
<Link id="l00485" /><CodeLine lineNumber="485"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a> = &amp;mf;</span></CodeLine>
<Link id="l00486" /><CodeLine lineNumber="486"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/machineschedcontext/#a9334842806d97bee74af8752ebe19fbe">MLI</a> = &amp;<a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;MachineLoopInfoWrapperPass&gt;</a>().getLI();</span></CodeLine>
<Link id="l00487" /><CodeLine lineNumber="487"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/machineschedcontext/#a3c04bf922b53ed32316b9725a99a5b2f">PassConfig</a> = &amp;<a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;TargetPassConfig&gt;</a>();</span></CodeLine>
<Link id="l00488" /><CodeLine lineNumber="488"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/machineschedcontext/#a55290be59c885ea01c412fa6926b61cf">AA</a> = &amp;<a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;AAResultsWrapperPass&gt;</a>().getAAResults();</span></CodeLine>
<Link id="l00489" /><CodeLine lineNumber="489"></CodeLine>
<Link id="l00490" /><CodeLine lineNumber="490"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>)</span></CodeLine>
<Link id="l00491" /><CodeLine lineNumber="491"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;verify(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;Before post machine scheduling.&quot;</span><span class="doxyHighlight">, &amp;<a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>());</span></CodeLine>
<Link id="l00492" /><CodeLine lineNumber="492"></CodeLine>
<Link id="l00493" /><CodeLine lineNumber="493"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instantiate the selected scheduler for this target, function, and</span></CodeLine>
<Link id="l00494" /><CodeLine lineNumber="494"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// optimization level.</span></CodeLine>
<Link id="l00495" /><CodeLine lineNumber="495"><span class="doxyHighlight">  std::unique&#95;ptr&lt;ScheduleDAGInstrs&gt; <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>(<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b741fadafc61d8c2e6409af2fc24e35">createPostMachineScheduler</a>());</span></CodeLine>
<Link id="l00496" /><CodeLine lineNumber="496"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#a5d9f088a58ed26977308b92dba6c50f6">scheduleRegions</a>(&#42;<a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00497" /><CodeLine lineNumber="497"></CodeLine>
<Link id="l00498" /><CodeLine lineNumber="498"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>)</span></CodeLine>
<Link id="l00499" /><CodeLine lineNumber="499"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;verify(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;After post machine scheduling.&quot;</span><span class="doxyHighlight">, &amp;<a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>());</span></CodeLine>
<Link id="l00500" /><CodeLine lineNumber="500"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00501" /><CodeLine lineNumber="501"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00502" /><CodeLine lineNumber="502"></CodeLine>
<Link id="l00503" /><CodeLine lineNumber="503"><span class="doxyHighlightComment">/// Return true of the given instruction should not be included in a scheduling</span></CodeLine>
<Link id="l00504" /><CodeLine lineNumber="504"><span class="doxyHighlightComment">/// region.</span></CodeLine>
<Link id="l00505" /><CodeLine lineNumber="505"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00506" /><CodeLine lineNumber="506"><span class="doxyHighlightComment">/// MachineScheduler does not currently support scheduling across calls. To</span></CodeLine>
<Link id="l00507" /><CodeLine lineNumber="507"><span class="doxyHighlightComment">/// handle calls, the DAG builder needs to be modified to create register</span></CodeLine>
<Link id="l00508" /><CodeLine lineNumber="508"><span class="doxyHighlightComment">/// anti/output dependencies on the registers clobbered by the call&#39;s regmask</span></CodeLine>
<Link id="l00509" /><CodeLine lineNumber="509"><span class="doxyHighlightComment">/// operand. In PreRA scheduling, the stack pointer adjustment already prevents</span></CodeLine>
<Link id="l00510" /><CodeLine lineNumber="510"><span class="doxyHighlightComment">/// scheduling across calls. In PostRA scheduling, we need the isCall to enforce</span></CodeLine>
<Link id="l00511" /><CodeLine lineNumber="511"><span class="doxyHighlightComment">/// the boundary, but there would be no benefit to postRA scheduling across</span></CodeLine>
<Link id="l00512" /><CodeLine lineNumber="512"><span class="doxyHighlightComment">/// calls this late anyway.</span></CodeLine>
<Link id="l00513" /><CodeLine lineNumber="513" lineLink="#a0a9255314dba663576d6bc1bb42762b1"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a0a9255314dba663576d6bc1bb42762b1">isSchedBoundary</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l00514" /><CodeLine lineNumber="514"><span class="doxyHighlight">                            <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>,</span></CodeLine>
<Link id="l00515" /><CodeLine lineNumber="515"><span class="doxyHighlight">                            <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &#42;MF,</span></CodeLine>
<Link id="l00516" /><CodeLine lineNumber="516"><span class="doxyHighlight">                            </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>) &#123;</span></CodeLine>
<Link id="l00517" /><CodeLine lineNumber="517"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isCall() || <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>-&gt;isSchedulingBoundary(&#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>, &#42;MF) ||</span></CodeLine>
<Link id="l00518" /><CodeLine lineNumber="518"><span class="doxyHighlight">         <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isFakeUse();</span></CodeLine>
<Link id="l00519" /><CodeLine lineNumber="519"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00520" /><CodeLine lineNumber="520"></CodeLine>
<Link id="l00521" /><CodeLine lineNumber="521"><span class="doxyHighlightComment">/// A region of an MBB for scheduling.</span></CodeLine>
<Link id="l00522" /><CodeLine lineNumber="522"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00523" /><CodeLine lineNumber="523" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a4393cd1869923adcedef312efbea07be">SchedRegion</a> &#123;</span></CodeLine>
<Link id="l00524" /><CodeLine lineNumber="524"><span class="doxyHighlightComment">  /// RegionBegin is the first instruction in the scheduling region, and</span></CodeLine>
<Link id="l00525" /><CodeLine lineNumber="525"><span class="doxyHighlightComment">  /// RegionEnd is either MBB-&gt;end() or the scheduling boundary after the</span></CodeLine>
<Link id="l00526" /><CodeLine lineNumber="526"><span class="doxyHighlightComment">  /// last instruction in the scheduling region. These iterators cannot refer</span></CodeLine>
<Link id="l00527" /><CodeLine lineNumber="527"><span class="doxyHighlightComment">  /// to instructions outside of the identified scheduling region because</span></CodeLine>
<Link id="l00528" /><CodeLine lineNumber="528"><span class="doxyHighlightComment">  /// those may be reordered before scheduling this region.</span></CodeLine>
<Link id="l00529" /><CodeLine lineNumber="529" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a45001a0139d1a95b18a048c6cc9d1554"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a45001a0139d1a95b18a048c6cc9d1554">RegionBegin</a>;</span></CodeLine>
<Link id="l00530" /><CodeLine lineNumber="530" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a54d638dab587b1dc3986718c411ba381"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a54d638dab587b1dc3986718c411ba381">RegionEnd</a>;</span></CodeLine>
<Link id="l00531" /><CodeLine lineNumber="531" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#ac72e998d272b3616752706972b32af89"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#ac72e998d272b3616752706972b32af89">NumRegionInstrs</a>;</span></CodeLine>
<Link id="l00532" /><CodeLine lineNumber="532"></CodeLine>
<Link id="l00533" /><CodeLine lineNumber="533" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a4393cd1869923adcedef312efbea07be"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a4393cd1869923adcedef312efbea07be">SchedRegion</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> E,</span></CodeLine>
<Link id="l00534" /><CodeLine lineNumber="534"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) :</span></CodeLine>
<Link id="l00535" /><CodeLine lineNumber="535"><span class="doxyHighlight">    <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a45001a0139d1a95b18a048c6cc9d1554">RegionBegin</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>), <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a54d638dab587b1dc3986718c411ba381">RegionEnd</a>(E), <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#ac72e998d272b3616752706972b32af89">NumRegionInstrs</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &#123;&#125;</span></CodeLine>
<Link id="l00536" /><CodeLine lineNumber="536"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00537" /><CodeLine lineNumber="537"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end anonymous namespace</span></CodeLine>
<Link id="l00538" /><CodeLine lineNumber="538"></CodeLine>
<Link id="l00539" /><CodeLine lineNumber="539" lineLink="#aee652267c4ed8c882f06243aa0d601dd"><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="#aee652267c4ed8c882f06243aa0d601dd">MBBRegionsVector</a> = <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;SchedRegion, 16&gt;</a>;</span></CodeLine>
<Link id="l00540" /><CodeLine lineNumber="540"></CodeLine>
<Link id="l00541" /><CodeLine lineNumber="541"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span></CodeLine>
<Link id="l00542" /><CodeLine lineNumber="542" lineLink="#ae1be3a2fc5dfa3281d32b6fb4e4ea6dd"><span class="doxyHighlight"><a href="#ae1be3a2fc5dfa3281d32b6fb4e4ea6dd">getSchedRegions</a>(<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>,</span></CodeLine>
<Link id="l00543" /><CodeLine lineNumber="543"><span class="doxyHighlight">                <a href="#aee652267c4ed8c882f06243aa0d601dd">MBBRegionsVector</a> &amp;Regions,</span></CodeLine>
<Link id="l00544" /><CodeLine lineNumber="544"><span class="doxyHighlight">                </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> RegionsTopDown) &#123;</span></CodeLine>
<Link id="l00545" /><CodeLine lineNumber="545"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &#42;MF = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;getParent();</span></CodeLine>
<Link id="l00546" /><CodeLine lineNumber="546"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a> = MF-&gt;<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>().<a href="/docs/api/classes/llvm/targetsubtargetinfo/#acd858ed72f11db9444617740c3622608">getInstrInfo</a>();</span></CodeLine>
<Link id="l00547" /><CodeLine lineNumber="547"></CodeLine>
<Link id="l00548" /><CodeLine lineNumber="548"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00549" /><CodeLine lineNumber="549"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight">(<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> RegionEnd = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;end();</span></CodeLine>
<Link id="l00550" /><CodeLine lineNumber="550"><span class="doxyHighlight">      RegionEnd != <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;begin(); RegionEnd = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l00551" /><CodeLine lineNumber="551"></CodeLine>
<Link id="l00552" /><CodeLine lineNumber="552"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Avoid decrementing RegionEnd for blocks with no terminator.</span></CodeLine>
<Link id="l00553" /><CodeLine lineNumber="553"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (RegionEnd != <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;end() ||</span></CodeLine>
<Link id="l00554" /><CodeLine lineNumber="554"><span class="doxyHighlight">        <a href="#a0a9255314dba663576d6bc1bb42762b1">isSchedBoundary</a>(&amp;&#42;std::prev(RegionEnd), &amp;&#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>, MF, <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>)) &#123;</span></CodeLine>
<Link id="l00555" /><CodeLine lineNumber="555"><span class="doxyHighlight">      --RegionEnd;</span></CodeLine>
<Link id="l00556" /><CodeLine lineNumber="556"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00557" /><CodeLine lineNumber="557"></CodeLine>
<Link id="l00558" /><CodeLine lineNumber="558"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The next region starts above the previous region. Look backward in the</span></CodeLine>
<Link id="l00559" /><CodeLine lineNumber="559"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// instruction stream until we find the nearest boundary.</span></CodeLine>
<Link id="l00560" /><CodeLine lineNumber="560"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumRegionInstrs = 0;</span></CodeLine>
<Link id="l00561" /><CodeLine lineNumber="561"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = RegionEnd;</span></CodeLine>
<Link id="l00562" /><CodeLine lineNumber="562"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;begin(); --<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l00563" /><CodeLine lineNumber="563"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = &#42;std::prev(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l00564" /><CodeLine lineNumber="564"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a0a9255314dba663576d6bc1bb42762b1">isSchedBoundary</a>(&amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, &amp;&#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>, MF, <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>))</span></CodeLine>
<Link id="l00565" /><CodeLine lineNumber="565"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00566" /><CodeLine lineNumber="566"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isDebugOrPseudoInstr()) &#123;</span></CodeLine>
<Link id="l00567" /><CodeLine lineNumber="567"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// MBB::size() uses instr&#95;iterator to count. Here we need a bundle to</span></CodeLine>
<Link id="l00568" /><CodeLine lineNumber="568"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// count as a single instruction.</span></CodeLine>
<Link id="l00569" /><CodeLine lineNumber="569"><span class="doxyHighlight">        ++NumRegionInstrs;</span></CodeLine>
<Link id="l00570" /><CodeLine lineNumber="570"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00571" /><CodeLine lineNumber="571"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00572" /><CodeLine lineNumber="572"></CodeLine>
<Link id="l00573" /><CodeLine lineNumber="573"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// It&#39;s possible we found a scheduling region that only has debug</span></CodeLine>
<Link id="l00574" /><CodeLine lineNumber="574"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// instructions. Don&#39;t bother scheduling these.</span></CodeLine>
<Link id="l00575" /><CodeLine lineNumber="575"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumRegionInstrs != 0)</span></CodeLine>
<Link id="l00576" /><CodeLine lineNumber="576"><span class="doxyHighlight">      Regions.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(SchedRegion(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, RegionEnd, NumRegionInstrs));</span></CodeLine>
<Link id="l00577" /><CodeLine lineNumber="577"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00578" /><CodeLine lineNumber="578"></CodeLine>
<Link id="l00579" /><CodeLine lineNumber="579"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (RegionsTopDown)</span></CodeLine>
<Link id="l00580" /><CodeLine lineNumber="580"><span class="doxyHighlight">    std::reverse(Regions.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a8a045d250952c0867382a9840ee18fdf">begin</a>(), Regions.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a075e34e98605d0e7c289763a104869ac">end</a>());</span></CodeLine>
<Link id="l00581" /><CodeLine lineNumber="581"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00582" /><CodeLine lineNumber="582"></CodeLine>
<Link id="l00583" /><CodeLine lineNumber="583"><span class="doxyHighlightComment">/// Main driver for both MachineScheduler and PostMachineScheduler.</span></CodeLine>
<Link id="l00584" /><CodeLine lineNumber="584" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#a5d9f088a58ed26977308b92dba6c50f6"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#a5d9f088a58ed26977308b92dba6c50f6">MachineSchedulerBase::scheduleRegions</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &amp;<a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>,</span></CodeLine>
<Link id="l00585" /><CodeLine lineNumber="585"><span class="doxyHighlight">                                           </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> FixKillFlags) &#123;</span></CodeLine>
<Link id="l00586" /><CodeLine lineNumber="586"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Visit all machine basic blocks.</span></CodeLine>
<Link id="l00587" /><CodeLine lineNumber="587"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00588" /><CodeLine lineNumber="588"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Visit blocks in global postorder or postorder within the bottom-up</span></CodeLine>
<Link id="l00589" /><CodeLine lineNumber="589"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// loop tree. Then we can optionally compute global RegPressure.</span></CodeLine>
<Link id="l00590" /><CodeLine lineNumber="590"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/machinefunction/#aaba82c71ffdca966cad10eae0992fff9">MachineFunction::iterator</a> <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a> = <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;begin(), MBBEnd = <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;end();</span></CodeLine>
<Link id="l00591" /><CodeLine lineNumber="591"><span class="doxyHighlight">       <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a> != MBBEnd; ++<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>) &#123;</span></CodeLine>
<Link id="l00592" /><CodeLine lineNumber="592"></CodeLine>
<Link id="l00593" /><CodeLine lineNumber="593"><span class="doxyHighlight">    <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.startBlock(&amp;&#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>);</span></CodeLine>
<Link id="l00594" /><CodeLine lineNumber="594"></CodeLine>
<Link id="l00595" /><CodeLine lineNumber="595"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l00596" /><CodeLine lineNumber="596"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#aa9e9eecb42c6e825c279845f69f28aa2">SchedOnlyFunc</a>.getNumOccurrences() &amp;&amp; <a href="#aa9e9eecb42c6e825c279845f69f28aa2">SchedOnlyFunc</a> != <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;getName())</span></CodeLine>
<Link id="l00597" /><CodeLine lineNumber="597"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00598" /><CodeLine lineNumber="598"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a55fc025b3f9710787dfefd7a551c2568">SchedOnlyBlock</a>.getNumOccurrences()</span></CodeLine>
<Link id="l00599" /><CodeLine lineNumber="599"><span class="doxyHighlight">        &amp;&amp; (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight">)<a href="#a55fc025b3f9710787dfefd7a551c2568">SchedOnlyBlock</a> != <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;getNumber())</span></CodeLine>
<Link id="l00600" /><CodeLine lineNumber="600"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00601" /><CodeLine lineNumber="601"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l00602" /><CodeLine lineNumber="602"></CodeLine>
<Link id="l00603" /><CodeLine lineNumber="603"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Break the block into scheduling regions &#91;I, RegionEnd). RegionEnd</span></CodeLine>
<Link id="l00604" /><CodeLine lineNumber="604"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// points to the scheduling boundary at the bottom of the region. The DAG</span></CodeLine>
<Link id="l00605" /><CodeLine lineNumber="605"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// does not include RegionEnd, but the region does (i.e. the next</span></CodeLine>
<Link id="l00606" /><CodeLine lineNumber="606"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// RegionEnd is above the previous RegionBegin). If the current block has</span></CodeLine>
<Link id="l00607" /><CodeLine lineNumber="607"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// no terminator then RegionEnd == MBB-&gt;end() for the bottom region.</span></CodeLine>
<Link id="l00608" /><CodeLine lineNumber="608"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00609" /><CodeLine lineNumber="609"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// All the regions of MBB are first found and stored in MBBRegions, which</span></CodeLine>
<Link id="l00610" /><CodeLine lineNumber="610"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// will be processed (MBB) top-down if initialized with true.</span></CodeLine>
<Link id="l00611" /><CodeLine lineNumber="611"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00612" /><CodeLine lineNumber="612"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The Scheduler may insert instructions during either schedule() or</span></CodeLine>
<Link id="l00613" /><CodeLine lineNumber="613"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// exitRegion(), even for empty regions. So the local iterators &#39;I&#39; and</span></CodeLine>
<Link id="l00614" /><CodeLine lineNumber="614"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// &#39;RegionEnd&#39; are invalid across these calls. Instructions must not be</span></CodeLine>
<Link id="l00615" /><CodeLine lineNumber="615"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// added to other regions than the current one without updating MBBRegions.</span></CodeLine>
<Link id="l00616" /><CodeLine lineNumber="616"></CodeLine>
<Link id="l00617" /><CodeLine lineNumber="617"><span class="doxyHighlight">    <a href="#aee652267c4ed8c882f06243aa0d601dd">MBBRegionsVector</a> MBBRegions;</span></CodeLine>
<Link id="l00618" /><CodeLine lineNumber="618"><span class="doxyHighlight">    <a href="#ae1be3a2fc5dfa3281d32b6fb4e4ea6dd">getSchedRegions</a>(&amp;&#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>, MBBRegions, <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.doMBBSchedRegionsTopDown());</span></CodeLine>
<Link id="l00619" /><CodeLine lineNumber="619"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion">SchedRegion</a> &amp;R : MBBRegions) &#123;</span></CodeLine>
<Link id="l00620" /><CodeLine lineNumber="620"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = R.RegionBegin;</span></CodeLine>
<Link id="l00621" /><CodeLine lineNumber="621"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> RegionEnd = R.RegionEnd;</span></CodeLine>
<Link id="l00622" /><CodeLine lineNumber="622"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumRegionInstrs = R.NumRegionInstrs;</span></CodeLine>
<Link id="l00623" /><CodeLine lineNumber="623"></CodeLine>
<Link id="l00624" /><CodeLine lineNumber="624"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Notify the scheduler of the region, even if we may skip scheduling</span></CodeLine>
<Link id="l00625" /><CodeLine lineNumber="625"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// it. Perhaps it still needs to be bundled.</span></CodeLine>
<Link id="l00626" /><CodeLine lineNumber="626"><span class="doxyHighlight">      <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.enterRegion(&amp;&#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, RegionEnd, NumRegionInstrs);</span></CodeLine>
<Link id="l00627" /><CodeLine lineNumber="627"></CodeLine>
<Link id="l00628" /><CodeLine lineNumber="628"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Skip empty scheduling regions (0 or 1 schedulable instructions).</span></CodeLine>
<Link id="l00629" /><CodeLine lineNumber="629"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> == RegionEnd || <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> == std::prev(RegionEnd)) &#123;</span></CodeLine>
<Link id="l00630" /><CodeLine lineNumber="630"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Close the current region. Bundle the terminator if needed.</span></CodeLine>
<Link id="l00631" /><CodeLine lineNumber="631"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// This invalidates &#39;RegionEnd&#39; and &#39;I&#39;.</span></CodeLine>
<Link id="l00632" /><CodeLine lineNumber="632"><span class="doxyHighlight">        <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.exitRegion();</span></CodeLine>
<Link id="l00633" /><CodeLine lineNumber="633"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00634" /><CodeLine lineNumber="634"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00635" /><CodeLine lineNumber="635"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42; MI Scheduling &#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00636" /><CodeLine lineNumber="636"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;:&quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/namespaces/llvm/#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(&#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>)</span></CodeLine>
<Link id="l00637" /><CodeLine lineNumber="637"><span class="doxyHighlight">                        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n  From: &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a></span></CodeLine>
<Link id="l00638" /><CodeLine lineNumber="638"><span class="doxyHighlight">                        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;    To: &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00639" /><CodeLine lineNumber="639"><span class="doxyHighlight">                 <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#acdfbcf188e2d4a80837e89de2ccdffab">if</a> (RegionEnd != <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;end()) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; &#42;RegionEnd;</span></CodeLine>
<Link id="l00640" /><CodeLine lineNumber="640"><span class="doxyHighlight">                 </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;End\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00641" /><CodeLine lineNumber="641"><span class="doxyHighlight">                 <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; RegionInstrs: &quot;</span><span class="doxyHighlight"> &lt;&lt; NumRegionInstrs &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00642" /><CodeLine lineNumber="642"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a82ab0315644106de03b36f143328179f">DumpCriticalPathLength</a>) &#123;</span></CodeLine>
<Link id="l00643" /><CodeLine lineNumber="643"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;getName();</span></CodeLine>
<Link id="l00644" /><CodeLine lineNumber="644"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;:%bb. &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;getNumber();</span></CodeLine>
<Link id="l00645" /><CodeLine lineNumber="645"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; \\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00646" /><CodeLine lineNumber="646"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00647" /><CodeLine lineNumber="647"></CodeLine>
<Link id="l00648" /><CodeLine lineNumber="648"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Schedule a region: possibly reorder instructions.</span></CodeLine>
<Link id="l00649" /><CodeLine lineNumber="649"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// This invalidates the original region iterators.</span></CodeLine>
<Link id="l00650" /><CodeLine lineNumber="650"><span class="doxyHighlight">      <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.schedule();</span></CodeLine>
<Link id="l00651" /><CodeLine lineNumber="651"></CodeLine>
<Link id="l00652" /><CodeLine lineNumber="652"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Close the current region.</span></CodeLine>
<Link id="l00653" /><CodeLine lineNumber="653"><span class="doxyHighlight">      <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.exitRegion();</span></CodeLine>
<Link id="l00654" /><CodeLine lineNumber="654"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00655" /><CodeLine lineNumber="655"><span class="doxyHighlight">    <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.finishBlock();</span></CodeLine>
<Link id="l00656" /><CodeLine lineNumber="656"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: Ideally, no further passes should rely on kill flags. However,</span></CodeLine>
<Link id="l00657" /><CodeLine lineNumber="657"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// thumb2 size reduction is currently an exception, so the PostMIScheduler</span></CodeLine>
<Link id="l00658" /><CodeLine lineNumber="658"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// needs to do this.</span></CodeLine>
<Link id="l00659" /><CodeLine lineNumber="659"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (FixKillFlags)</span></CodeLine>
<Link id="l00660" /><CodeLine lineNumber="660"><span class="doxyHighlight">      <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.fixupKills(&#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>);</span></CodeLine>
<Link id="l00661" /><CodeLine lineNumber="661"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00662" /><CodeLine lineNumber="662"><span class="doxyHighlight">  <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.finalizeSchedule();</span></CodeLine>
<Link id="l00663" /><CodeLine lineNumber="663"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00664" /><CodeLine lineNumber="664"></CodeLine>
<Link id="l00665" /><CodeLine lineNumber="665" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#a03962eb8f2d1aae10915000f72a8b030"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#a03962eb8f2d1aae10915000f72a8b030">MachineSchedulerBase::print</a>(<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;O, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/module">Module</a>&#42; m)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00666" /><CodeLine lineNumber="666"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// unimplemented</span></CodeLine>
<Link id="l00667" /><CodeLine lineNumber="667"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00668" /><CodeLine lineNumber="668"></CodeLine>
<Link id="l00669" /><CodeLine lineNumber="669"><span class="doxyHighlightPreprocessor">#if !defined(NDEBUG) || defined(LLVM&#95;ENABLE&#95;DUMP)</span></CodeLine>
<Link id="l00670" /><CodeLine lineNumber="670" lineLink="/docs/api/classes/llvm/readyqueue/#a61a4a769784e3da32d297c2752646aee"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/support/compiler-h/#aa863693eef567397d9c292da5bf22d34">LLVM&#95;DUMP&#95;METHOD</a> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/readyqueue/#a61a4a769784e3da32d297c2752646aee">ReadyQueue::dump</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00671" /><CodeLine lineNumber="671"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Queue &quot;</span><span class="doxyHighlight"> &lt;&lt; Name &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;: &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00672" /><CodeLine lineNumber="672"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU : Queue)</span></CodeLine>
<Link id="l00673" /><CodeLine lineNumber="673"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; SU-&gt;NodeNum &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00674" /><CodeLine lineNumber="674"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00675" /><CodeLine lineNumber="675"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00676" /><CodeLine lineNumber="676"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l00677" /><CodeLine lineNumber="677"></CodeLine>
<Link id="l00678" /><CodeLine lineNumber="678"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00679" /><CodeLine lineNumber="679"><span class="doxyHighlightComment">// ScheduleDAGMI - Basic machine instruction scheduling. This is</span></CodeLine>
<Link id="l00680" /><CodeLine lineNumber="680"><span class="doxyHighlightComment">// independent of PreRA/PostRA scheduling and involves no extra book-keeping for</span></CodeLine>
<Link id="l00681" /><CodeLine lineNumber="681"><span class="doxyHighlightComment">// virtual registers.</span></CodeLine>
<Link id="l00682" /><CodeLine lineNumber="682"><span class="doxyHighlightComment">// ===----------------------------------------------------------------------===/</span></CodeLine>
<Link id="l00683" /><CodeLine lineNumber="683"></CodeLine>
<Link id="l00684" /><CodeLine lineNumber="684"><span class="doxyHighlightComment">// Provide a vtable anchor.</span></CodeLine>
<Link id="l00685" /><CodeLine lineNumber="685"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/scheduledagmi/#a967aa1a22992b66fb06b83323ddccaa7">ScheduleDAGMI::~ScheduleDAGMI</a>() = </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00686" /><CodeLine lineNumber="686"></CodeLine>
<Link id="l00687" /><CodeLine lineNumber="687"><span class="doxyHighlightComment">/// ReleaseSucc - Decrement the NumPredsLeft count of a successor. When</span></CodeLine>
<Link id="l00688" /><CodeLine lineNumber="688"><span class="doxyHighlightComment">/// NumPredsLeft reaches zero, release the successor node.</span></CodeLine>
<Link id="l00689" /><CodeLine lineNumber="689"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00690" /><CodeLine lineNumber="690"><span class="doxyHighlightComment">/// FIXME: Adjust SuccSU height based on MinLatency.</span></CodeLine>
<Link id="l00691" /><CodeLine lineNumber="691" lineLink="/docs/api/classes/llvm/scheduledagmi/#a90ffd918ef80c711049758b2064e15c4"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a90ffd918ef80c711049758b2064e15c4">ScheduleDAGMI::releaseSucc</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, <a href="/docs/api/classes/llvm/sdep">SDep</a> &#42;SuccEdge) &#123;</span></CodeLine>
<Link id="l00692" /><CodeLine lineNumber="692"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SuccSU = SuccEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#a03a2dc5f9f321a2ce28f5c641dfe5455">getSUnit</a>();</span></CodeLine>
<Link id="l00693" /><CodeLine lineNumber="693"></CodeLine>
<Link id="l00694" /><CodeLine lineNumber="694"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SuccEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#a21e3367f21a2b07ce6e344fc6a2ed078">isWeak</a>()) &#123;</span></CodeLine>
<Link id="l00695" /><CodeLine lineNumber="695"><span class="doxyHighlight">    --SuccSU-&gt;<a href="/docs/api/classes/llvm/sunit/#ab9e02660290b9557b547b57870133467">WeakPredsLeft</a>;</span></CodeLine>
<Link id="l00696" /><CodeLine lineNumber="696"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SuccEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#ac2a5a158ff2d2bbbadae7accc72e7c51">isCluster</a>())</span></CodeLine>
<Link id="l00697" /><CodeLine lineNumber="697"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmi/#a2aa5cb48ee16ded1b263483026d08894">NextClusterSucc</a> = SuccSU;</span></CodeLine>
<Link id="l00698" /><CodeLine lineNumber="698"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00699" /><CodeLine lineNumber="699"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00700" /><CodeLine lineNumber="700"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l00701" /><CodeLine lineNumber="701"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SuccSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a94f78042fbba3ea4cd1004353daa46aa">NumPredsLeft</a> == 0) &#123;</span></CodeLine>
<Link id="l00702" /><CodeLine lineNumber="702"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#42;&#42;&#42; Scheduling failed! &#42;&#42;&#42;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00703" /><CodeLine lineNumber="703"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledaginstrs/#aa5f22315c4064579fca6cd88fb36ea5a">dumpNode</a>(&#42;SuccSU);</span></CodeLine>
<Link id="l00704" /><CodeLine lineNumber="704"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; has been released too many times!\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00705" /><CodeLine lineNumber="705"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00706" /><CodeLine lineNumber="706"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00707" /><CodeLine lineNumber="707"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l00708" /><CodeLine lineNumber="708"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// SU-&gt;TopReadyCycle was set to CurrCycle when it was scheduled. However,</span></CodeLine>
<Link id="l00709" /><CodeLine lineNumber="709"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// CurrCycle may have advanced since then.</span></CodeLine>
<Link id="l00710" /><CodeLine lineNumber="710"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SuccSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> &lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> + SuccEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#a5eca2019521fd47b79fe5ef66d02fd43">getLatency</a>())</span></CodeLine>
<Link id="l00711" /><CodeLine lineNumber="711"><span class="doxyHighlight">    SuccSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> + SuccEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#a5eca2019521fd47b79fe5ef66d02fd43">getLatency</a>();</span></CodeLine>
<Link id="l00712" /><CodeLine lineNumber="712"></CodeLine>
<Link id="l00713" /><CodeLine lineNumber="713"><span class="doxyHighlight">  --SuccSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a94f78042fbba3ea4cd1004353daa46aa">NumPredsLeft</a>;</span></CodeLine>
<Link id="l00714" /><CodeLine lineNumber="714"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SuccSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a94f78042fbba3ea4cd1004353daa46aa">NumPredsLeft</a> == 0 &amp;&amp; SuccSU != &amp;<a href="/docs/api/classes/llvm/scheduledag/#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>)</span></CodeLine>
<Link id="l00715" /><CodeLine lineNumber="715"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;releaseTopNode(SuccSU);</span></CodeLine>
<Link id="l00716" /><CodeLine lineNumber="716"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00717" /><CodeLine lineNumber="717"></CodeLine>
<Link id="l00718" /><CodeLine lineNumber="718"><span class="doxyHighlightComment">/// releaseSuccessors - Call releaseSucc on each of SU&#39;s successors.</span></CodeLine>
<Link id="l00719" /><CodeLine lineNumber="719" lineLink="/docs/api/classes/llvm/scheduledagmi/#acf56d667066b39177a3c0f134d759d98"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#acf56d667066b39177a3c0f134d759d98">ScheduleDAGMI::releaseSuccessors</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU) &#123;</span></CodeLine>
<Link id="l00720" /><CodeLine lineNumber="720"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sdep">SDep</a> &amp;Succ : SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>)</span></CodeLine>
<Link id="l00721" /><CodeLine lineNumber="721"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmi/#a90ffd918ef80c711049758b2064e15c4">releaseSucc</a>(SU, &amp;Succ);</span></CodeLine>
<Link id="l00722" /><CodeLine lineNumber="722"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00723" /><CodeLine lineNumber="723"></CodeLine>
<Link id="l00724" /><CodeLine lineNumber="724"><span class="doxyHighlightComment">/// ReleasePred - Decrement the NumSuccsLeft count of a predecessor. When</span></CodeLine>
<Link id="l00725" /><CodeLine lineNumber="725"><span class="doxyHighlightComment">/// NumSuccsLeft reaches zero, release the predecessor node.</span></CodeLine>
<Link id="l00726" /><CodeLine lineNumber="726"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00727" /><CodeLine lineNumber="727"><span class="doxyHighlightComment">/// FIXME: Adjust PredSU height based on MinLatency.</span></CodeLine>
<Link id="l00728" /><CodeLine lineNumber="728" lineLink="/docs/api/classes/llvm/scheduledagmi/#a1c51776d4e512a7f24d5b5d601c31016"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a1c51776d4e512a7f24d5b5d601c31016">ScheduleDAGMI::releasePred</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, <a href="/docs/api/classes/llvm/sdep">SDep</a> &#42;PredEdge) &#123;</span></CodeLine>
<Link id="l00729" /><CodeLine lineNumber="729"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;PredSU = PredEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#a03a2dc5f9f321a2ce28f5c641dfe5455">getSUnit</a>();</span></CodeLine>
<Link id="l00730" /><CodeLine lineNumber="730"></CodeLine>
<Link id="l00731" /><CodeLine lineNumber="731"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (PredEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#a21e3367f21a2b07ce6e344fc6a2ed078">isWeak</a>()) &#123;</span></CodeLine>
<Link id="l00732" /><CodeLine lineNumber="732"><span class="doxyHighlight">    --PredSU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae75d620ee809eaf50970a833f4a3ace9">WeakSuccsLeft</a>;</span></CodeLine>
<Link id="l00733" /><CodeLine lineNumber="733"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (PredEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#ac2a5a158ff2d2bbbadae7accc72e7c51">isCluster</a>())</span></CodeLine>
<Link id="l00734" /><CodeLine lineNumber="734"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmi/#a33503949e135cad03fa91fde0c005649">NextClusterPred</a> = PredSU;</span></CodeLine>
<Link id="l00735" /><CodeLine lineNumber="735"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00736" /><CodeLine lineNumber="736"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00737" /><CodeLine lineNumber="737"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l00738" /><CodeLine lineNumber="738"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (PredSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a40c2dfbd170941dd4d20ee9b60c9d49d">NumSuccsLeft</a> == 0) &#123;</span></CodeLine>
<Link id="l00739" /><CodeLine lineNumber="739"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#42;&#42;&#42; Scheduling failed! &#42;&#42;&#42;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00740" /><CodeLine lineNumber="740"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledaginstrs/#aa5f22315c4064579fca6cd88fb36ea5a">dumpNode</a>(&#42;PredSU);</span></CodeLine>
<Link id="l00741" /><CodeLine lineNumber="741"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; has been released too many times!\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00742" /><CodeLine lineNumber="742"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00743" /><CodeLine lineNumber="743"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00744" /><CodeLine lineNumber="744"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l00745" /><CodeLine lineNumber="745"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// SU-&gt;BotReadyCycle was set to CurrCycle when it was scheduled. However,</span></CodeLine>
<Link id="l00746" /><CodeLine lineNumber="746"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// CurrCycle may have advanced since then.</span></CodeLine>
<Link id="l00747" /><CodeLine lineNumber="747"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (PredSU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> &lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> + PredEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#a5eca2019521fd47b79fe5ef66d02fd43">getLatency</a>())</span></CodeLine>
<Link id="l00748" /><CodeLine lineNumber="748"><span class="doxyHighlight">    PredSU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> + PredEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#a5eca2019521fd47b79fe5ef66d02fd43">getLatency</a>();</span></CodeLine>
<Link id="l00749" /><CodeLine lineNumber="749"></CodeLine>
<Link id="l00750" /><CodeLine lineNumber="750"><span class="doxyHighlight">  --PredSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a40c2dfbd170941dd4d20ee9b60c9d49d">NumSuccsLeft</a>;</span></CodeLine>
<Link id="l00751" /><CodeLine lineNumber="751"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (PredSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a40c2dfbd170941dd4d20ee9b60c9d49d">NumSuccsLeft</a> == 0 &amp;&amp; PredSU != &amp;<a href="/docs/api/classes/llvm/scheduledag/#a521bf68518a92483130a58680716d153">EntrySU</a>)</span></CodeLine>
<Link id="l00752" /><CodeLine lineNumber="752"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;releaseBottomNode(PredSU);</span></CodeLine>
<Link id="l00753" /><CodeLine lineNumber="753"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00754" /><CodeLine lineNumber="754"></CodeLine>
<Link id="l00755" /><CodeLine lineNumber="755"><span class="doxyHighlightComment">/// releasePredecessors - Call releasePred on each of SU&#39;s predecessors.</span></CodeLine>
<Link id="l00756" /><CodeLine lineNumber="756" lineLink="/docs/api/classes/llvm/scheduledagmi/#a25f9975b56fe38f7a8bb4d10b7f6f5ea"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a25f9975b56fe38f7a8bb4d10b7f6f5ea">ScheduleDAGMI::releasePredecessors</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU) &#123;</span></CodeLine>
<Link id="l00757" /><CodeLine lineNumber="757"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sdep">SDep</a> &amp;Pred : SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae2b43854b542de66eec6475adc48f56c">Preds</a>)</span></CodeLine>
<Link id="l00758" /><CodeLine lineNumber="758"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmi/#a1c51776d4e512a7f24d5b5d601c31016">releasePred</a>(SU, &amp;Pred);</span></CodeLine>
<Link id="l00759" /><CodeLine lineNumber="759"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00760" /><CodeLine lineNumber="760"></CodeLine>
<Link id="l00761" /><CodeLine lineNumber="761" lineLink="/docs/api/classes/llvm/scheduledagmi/#a19c5e2b675721f465bc85a5f58e7c084"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a19c5e2b675721f465bc85a5f58e7c084">ScheduleDAGMI::startBlock</a>(<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;bb) &#123;</span></CodeLine>
<Link id="l00762" /><CodeLine lineNumber="762"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledaginstrs/#a2822215b7634783aece96ef695a72f1d">ScheduleDAGInstrs::startBlock</a>(bb);</span></CodeLine>
<Link id="l00763" /><CodeLine lineNumber="763"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;enterMBB(bb);</span></CodeLine>
<Link id="l00764" /><CodeLine lineNumber="764"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00765" /><CodeLine lineNumber="765"></CodeLine>
<Link id="l00766" /><CodeLine lineNumber="766" lineLink="/docs/api/classes/llvm/scheduledagmi/#a9ca687b69b34efab1604af98db151cbf"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a9ca687b69b34efab1604af98db151cbf">ScheduleDAGMI::finishBlock</a>() &#123;</span></CodeLine>
<Link id="l00767" /><CodeLine lineNumber="767"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;leaveMBB();</span></CodeLine>
<Link id="l00768" /><CodeLine lineNumber="768"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledaginstrs/#a1f9a4461e2c9ac06b97f55554f836d66">ScheduleDAGInstrs::finishBlock</a>();</span></CodeLine>
<Link id="l00769" /><CodeLine lineNumber="769"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00770" /><CodeLine lineNumber="770"></CodeLine>
<Link id="l00771" /><CodeLine lineNumber="771"><span class="doxyHighlightComment">/// enterRegion - Called back from PostMachineScheduler::runOnMachineFunction</span></CodeLine>
<Link id="l00772" /><CodeLine lineNumber="772"><span class="doxyHighlightComment">/// after crossing a scheduling boundary. &#91;begin, end) includes all instructions</span></CodeLine>
<Link id="l00773" /><CodeLine lineNumber="773"><span class="doxyHighlightComment">/// in the region, including the boundary itself and single-instruction regions</span></CodeLine>
<Link id="l00774" /><CodeLine lineNumber="774"><span class="doxyHighlightComment">/// that don&#39;t get scheduled.</span></CodeLine>
<Link id="l00775" /><CodeLine lineNumber="775" lineLink="/docs/api/classes/llvm/scheduledagmi/#a78e3672daf3301153eac2266dbc32885"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a78e3672daf3301153eac2266dbc32885">ScheduleDAGMI::enterRegion</a>(<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;bb,</span></CodeLine>
<Link id="l00776" /><CodeLine lineNumber="776"><span class="doxyHighlight">                                     <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>,</span></CodeLine>
<Link id="l00777" /><CodeLine lineNumber="777"><span class="doxyHighlight">                                     <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/classes/llvm/scheduledaginstrs/#a21805259f54dab47c2b3da009216996a">end</a>,</span></CodeLine>
<Link id="l00778" /><CodeLine lineNumber="778"><span class="doxyHighlight">                                     </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> regioninstrs)</span></CodeLine>
<Link id="l00779" /><CodeLine lineNumber="779"><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00780" /><CodeLine lineNumber="780"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledaginstrs/#ae8727d434d20639d563849891f5ca1e1">ScheduleDAGInstrs::enterRegion</a>(bb, <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a21805259f54dab47c2b3da009216996a">end</a>, regioninstrs);</span></CodeLine>
<Link id="l00781" /><CodeLine lineNumber="781"></CodeLine>
<Link id="l00782" /><CodeLine lineNumber="782"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;initPolicy(<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a21805259f54dab47c2b3da009216996a">end</a>, regioninstrs);</span></CodeLine>
<Link id="l00783" /><CodeLine lineNumber="783"></CodeLine>
<Link id="l00784" /><CodeLine lineNumber="784"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Set dump direction after initializing sched policy.</span></CodeLine>
<Link id="l00785" /><CodeLine lineNumber="785"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledaginstrs/#a8d1f67b9f6d31b169c0d4b1d2080b4e7">ScheduleDAGMI::DumpDirection</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>;</span></CodeLine>
<Link id="l00786" /><CodeLine lineNumber="786"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;getPolicy().OnlyTopDown)</span></CodeLine>
<Link id="l00787" /><CodeLine lineNumber="787"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a> = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a8d1f67b9f6d31b169c0d4b1d2080b4e7a622f7d95cc7d6d2dc7a32b140559b680">ScheduleDAGMI::DumpDirection::TopDown</a>;</span></CodeLine>
<Link id="l00788" /><CodeLine lineNumber="788"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;getPolicy().OnlyBottomUp)</span></CodeLine>
<Link id="l00789" /><CodeLine lineNumber="789"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a> = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a8d1f67b9f6d31b169c0d4b1d2080b4e7a3dac6c64382dc74b937892893d2595c6">ScheduleDAGMI::DumpDirection::BottomUp</a>;</span></CodeLine>
<Link id="l00790" /><CodeLine lineNumber="790"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00791" /><CodeLine lineNumber="791"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a> = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a8d1f67b9f6d31b169c0d4b1d2080b4e7a7aa4fbe53df8b2bf33ec065623b42e34">ScheduleDAGMI::DumpDirection::Bidirectional</a>;</span></CodeLine>
<Link id="l00792" /><CodeLine lineNumber="792"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledaginstrs/#afdb896a30eb0e9fc3143fe6c447570cb">setDumpDirection</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>);</span></CodeLine>
<Link id="l00793" /><CodeLine lineNumber="793"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00794" /><CodeLine lineNumber="794"></CodeLine>
<Link id="l00795" /><CodeLine lineNumber="795"><span class="doxyHighlightComment">/// This is normally called from the main scheduler loop but may also be invoked</span></CodeLine>
<Link id="l00796" /><CodeLine lineNumber="796"><span class="doxyHighlightComment">/// by the scheduling strategy to perform additional code motion.</span></CodeLine>
<Link id="l00797" /><CodeLine lineNumber="797" lineLink="/docs/api/classes/llvm/scheduledagmi/#a2209b15a069023499cc665b373e67703"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a2209b15a069023499cc665b373e67703">ScheduleDAGMI::moveInstruction</a>(</span></CodeLine>
<Link id="l00798" /><CodeLine lineNumber="798"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> InsertPos) &#123;</span></CodeLine>
<Link id="l00799" /><CodeLine lineNumber="799"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Advance RegionBegin if the first instruction moves down.</span></CodeLine>
<Link id="l00800" /><CodeLine lineNumber="800"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (&amp;&#42;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a> == <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</span></CodeLine>
<Link id="l00801" /><CodeLine lineNumber="801"><span class="doxyHighlight">    ++<a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>;</span></CodeLine>
<Link id="l00802" /><CodeLine lineNumber="802"></CodeLine>
<Link id="l00803" /><CodeLine lineNumber="803"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Update the instruction stream.</span></CodeLine>
<Link id="l00804" /><CodeLine lineNumber="804"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;splice(InsertPos, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l00805" /><CodeLine lineNumber="805"></CodeLine>
<Link id="l00806" /><CodeLine lineNumber="806"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Update LiveIntervals</span></CodeLine>
<Link id="l00807" /><CodeLine lineNumber="807"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>)</span></CodeLine>
<Link id="l00808" /><CodeLine lineNumber="808"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;handleMove(&#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, </span><span class="doxyHighlightComment">/&#42;UpdateFlags=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00809" /><CodeLine lineNumber="809"></CodeLine>
<Link id="l00810" /><CodeLine lineNumber="810"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Recede RegionBegin if an instruction moves above the first.</span></CodeLine>
<Link id="l00811" /><CodeLine lineNumber="811"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a> == InsertPos)</span></CodeLine>
<Link id="l00812" /><CodeLine lineNumber="812"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</span></CodeLine>
<Link id="l00813" /><CodeLine lineNumber="813"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00814" /><CodeLine lineNumber="814"></CodeLine>
<Link id="l00815" /><CodeLine lineNumber="815" lineLink="/docs/api/classes/llvm/scheduledagmi/#a569fc4139bec0217794e9f830d6ba852"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a569fc4139bec0217794e9f830d6ba852">ScheduleDAGMI::checkSchedLimit</a>() &#123;</span></CodeLine>
<Link id="l00816" /><CodeLine lineNumber="816"><span class="doxyHighlightPreprocessor">#if LLVM&#95;ENABLE&#95;ABI&#95;BREAKING&#95;CHECKS &amp;&amp; !defined(NDEBUG)</span></CodeLine>
<Link id="l00817" /><CodeLine lineNumber="817"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumInstrsScheduled == <a href="#a533a172b0f7e2e6d667464a68c6f30ea">MISchedCutoff</a> &amp;&amp; <a href="#a533a172b0f7e2e6d667464a68c6f30ea">MISchedCutoff</a> != ~0U) &#123;</span></CodeLine>
<Link id="l00818" /><CodeLine lineNumber="818"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> = <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>;</span></CodeLine>
<Link id="l00819" /><CodeLine lineNumber="819"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00820" /><CodeLine lineNumber="820"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00821" /><CodeLine lineNumber="821"><span class="doxyHighlight">  ++NumInstrsScheduled;</span></CodeLine>
<Link id="l00822" /><CodeLine lineNumber="822"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l00823" /><CodeLine lineNumber="823"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00824" /><CodeLine lineNumber="824"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00825" /><CodeLine lineNumber="825"></CodeLine>
<Link id="l00826" /><CodeLine lineNumber="826"><span class="doxyHighlightComment">/// Per-region scheduling driver, called back from</span></CodeLine>
<Link id="l00827" /><CodeLine lineNumber="827"><span class="doxyHighlightComment">/// PostMachineScheduler::runOnMachineFunction. This is a simplified driver</span></CodeLine>
<Link id="l00828" /><CodeLine lineNumber="828"><span class="doxyHighlightComment">/// that does not consider liveness or register pressure. It is useful for</span></CodeLine>
<Link id="l00829" /><CodeLine lineNumber="829"><span class="doxyHighlightComment">/// PostRA scheduling and potentially other custom schedulers.</span></CodeLine>
<Link id="l00830" /><CodeLine lineNumber="830" lineLink="/docs/api/classes/llvm/scheduledagmi/#a5d7e71cf32573e6b1762b5a1d82a1cf5"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a5d7e71cf32573e6b1762b5a1d82a1cf5">ScheduleDAGMI::schedule</a>() &#123;</span></CodeLine>
<Link id="l00831" /><CodeLine lineNumber="831"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;ScheduleDAGMI::schedule starting\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00832" /><CodeLine lineNumber="832"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;dumpPolicy());</span></CodeLine>
<Link id="l00833" /><CodeLine lineNumber="833"></CodeLine>
<Link id="l00834" /><CodeLine lineNumber="834"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Build the DAG.</span></CodeLine>
<Link id="l00835" /><CodeLine lineNumber="835"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab580983de4f7b69ebcca992be9cb3223">buildSchedGraph</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a79b8428bb41e16b71ae2bb0139bce5eb">AA</a>);</span></CodeLine>
<Link id="l00836" /><CodeLine lineNumber="836"></CodeLine>
<Link id="l00837" /><CodeLine lineNumber="837"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a2aa2eb6fd6a44ff6b9cbad960d446c7a">postProcessDAG</a>();</span></CodeLine>
<Link id="l00838" /><CodeLine lineNumber="838"></CodeLine>
<Link id="l00839" /><CodeLine lineNumber="839"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;SUnit&#42;, 8&gt;</a> TopRoots, BotRoots;</span></CodeLine>
<Link id="l00840" /><CodeLine lineNumber="840"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a6d0a0b4903e8d4d12c98b0f43fe83878">findRootsAndBiasEdges</a>(TopRoots, BotRoots);</span></CodeLine>
<Link id="l00841" /><CodeLine lineNumber="841"></CodeLine>
<Link id="l00842" /><CodeLine lineNumber="842"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs/#aea2d4ef1e00ee834ab155abd18a560e4">dump</a>());</span></CodeLine>
<Link id="l00843" /><CodeLine lineNumber="843"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a0e9fde7ed08fd233750d0a947147dfa1">PrintDAGs</a>) <a href="/docs/api/classes/llvm/scheduledaginstrs/#aea2d4ef1e00ee834ab155abd18a560e4">dump</a>();</span></CodeLine>
<Link id="l00844" /><CodeLine lineNumber="844"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a5ec9cfe35d76125af923975fa0c1730a">ViewMISchedDAGs</a>) <a href="/docs/api/classes/llvm/scheduledagmi/#a8b7babb023cad0842f5a177e7abe3651">viewGraph</a>();</span></CodeLine>
<Link id="l00845" /><CodeLine lineNumber="845"></CodeLine>
<Link id="l00846" /><CodeLine lineNumber="846"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Initialize the strategy before modifying the DAG.</span></CodeLine>
<Link id="l00847" /><CodeLine lineNumber="847"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This may initialize a DFSResult to be used for queue priority.</span></CodeLine>
<Link id="l00848" /><CodeLine lineNumber="848"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;initialize(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00849" /><CodeLine lineNumber="849"></CodeLine>
<Link id="l00850" /><CodeLine lineNumber="850"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Initialize ready queues now that the DAG and priority data are finalized.</span></CodeLine>
<Link id="l00851" /><CodeLine lineNumber="851"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a1f98694f104d052d71ed74ade38d69f0">initQueues</a>(TopRoots, BotRoots);</span></CodeLine>
<Link id="l00852" /><CodeLine lineNumber="852"></CodeLine>
<Link id="l00853" /><CodeLine lineNumber="853"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsTopNode = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00854" /><CodeLine lineNumber="854"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l00855" /><CodeLine lineNumber="855"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#42;&#42; ScheduleDAGMI::schedule picking next node\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00856" /><CodeLine lineNumber="856"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;pickNode(IsTopNode);</span></CodeLine>
<Link id="l00857" /><CodeLine lineNumber="857"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SU) </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00858" /><CodeLine lineNumber="858"></CodeLine>
<Link id="l00859" /><CodeLine lineNumber="859"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Node already scheduled&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00860" /><CodeLine lineNumber="860"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/scheduledagmi/#a569fc4139bec0217794e9f830d6ba852">checkSchedLimit</a>())</span></CodeLine>
<Link id="l00861" /><CodeLine lineNumber="861"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00862" /><CodeLine lineNumber="862"></CodeLine>
<Link id="l00863" /><CodeLine lineNumber="863"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</span></CodeLine>
<Link id="l00864" /><CodeLine lineNumber="864"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTopNode) &#123;</span></CodeLine>
<Link id="l00865" /><CodeLine lineNumber="865"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae0b8da4dfde85d4ddc32359ca52dc493">isTopReady</a>() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;node still has unscheduled dependencies&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00866" /><CodeLine lineNumber="866"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (&amp;&#42;<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> == <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</span></CodeLine>
<Link id="l00867" /><CodeLine lineNumber="867"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> = <a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(++<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>);</span></CodeLine>
<Link id="l00868" /><CodeLine lineNumber="868"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00869" /><CodeLine lineNumber="869"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/scheduledagmi/#a2209b15a069023499cc665b373e67703">moveInstruction</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>);</span></CodeLine>
<Link id="l00870" /><CodeLine lineNumber="870"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00871" /><CodeLine lineNumber="871"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ac198a5fb130b4c09836ba20e01b4290d">isBottomReady</a>() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;node still has unscheduled dependencies&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00872" /><CodeLine lineNumber="872"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> priorII =</span></CodeLine>
<Link id="l00873" /><CodeLine lineNumber="873"><span class="doxyHighlight">        <a href="#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>);</span></CodeLine>
<Link id="l00874" /><CodeLine lineNumber="874"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (&amp;&#42;priorII == <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</span></CodeLine>
<Link id="l00875" /><CodeLine lineNumber="875"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a> = priorII;</span></CodeLine>
<Link id="l00876" /><CodeLine lineNumber="876"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00877" /><CodeLine lineNumber="877"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (&amp;&#42;<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> == <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</span></CodeLine>
<Link id="l00878" /><CodeLine lineNumber="878"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> = <a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(++<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>, priorII);</span></CodeLine>
<Link id="l00879" /><CodeLine lineNumber="879"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/scheduledagmi/#a2209b15a069023499cc665b373e67703">moveInstruction</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>);</span></CodeLine>
<Link id="l00880" /><CodeLine lineNumber="880"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</span></CodeLine>
<Link id="l00881" /><CodeLine lineNumber="881"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00882" /><CodeLine lineNumber="882"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00883" /><CodeLine lineNumber="883"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Notify the scheduling strategy before updating the DAG.</span></CodeLine>
<Link id="l00884" /><CodeLine lineNumber="884"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// This sets the scheduled node&#39;s ReadyCycle to CurrCycle. When updateQueues</span></CodeLine>
<Link id="l00885" /><CodeLine lineNumber="885"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// runs, it can then use the accurate ReadyCycle time to determine whether</span></CodeLine>
<Link id="l00886" /><CodeLine lineNumber="886"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// newly released nodes can move to the readyQ.</span></CodeLine>
<Link id="l00887" /><CodeLine lineNumber="887"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;schedNode(SU, IsTopNode);</span></CodeLine>
<Link id="l00888" /><CodeLine lineNumber="888"></CodeLine>
<Link id="l00889" /><CodeLine lineNumber="889"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmi/#abfdd9a95217810c69b2557060a130318">updateQueues</a>(SU, IsTopNode);</span></CodeLine>
<Link id="l00890" /><CodeLine lineNumber="890"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00891" /><CodeLine lineNumber="891"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> == <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Nonempty unscheduled zone.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00892" /><CodeLine lineNumber="892"></CodeLine>
<Link id="l00893" /><CodeLine lineNumber="893"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#ac2dafe98c88d43b256622413886e2152">placeDebugValues</a>();</span></CodeLine>
<Link id="l00894" /><CodeLine lineNumber="894"></CodeLine>
<Link id="l00895" /><CodeLine lineNumber="895"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(&#123;</span></CodeLine>
<Link id="l00896" /><CodeLine lineNumber="896"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#42;&#42;&#42; Final schedule for &quot;</span></CodeLine>
<Link id="l00897" /><CodeLine lineNumber="897"><span class="doxyHighlight">           &lt;&lt; <a href="/docs/api/namespaces/llvm/#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(&#42;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>()-&gt;<a href="/docs/api/files/lib/lib/analysis/basicaliasanalysis-cpp/#a1b8850f1ed44c12bc3501175a71c251c">getParent</a>()) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &#42;&#42;&#42;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00898" /><CodeLine lineNumber="898"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmi/#a01b02e76c87211e7084ec17f18a2d16f">dumpSchedule</a>();</span></CodeLine>
<Link id="l00899" /><CodeLine lineNumber="899"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00900" /><CodeLine lineNumber="900"><span class="doxyHighlight">  &#125;);</span></CodeLine>
<Link id="l00901" /><CodeLine lineNumber="901"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00902" /><CodeLine lineNumber="902"></CodeLine>
<Link id="l00903" /><CodeLine lineNumber="903"><span class="doxyHighlightComment">/// Apply each ScheduleDAGMutation step in order.</span></CodeLine>
<Link id="l00904" /><CodeLine lineNumber="904" lineLink="/docs/api/classes/llvm/scheduledagmi/#a2aa2eb6fd6a44ff6b9cbad960d446c7a"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a2aa2eb6fd6a44ff6b9cbad960d446c7a">ScheduleDAGMI::postProcessDAG</a>() &#123;</span></CodeLine>
<Link id="l00905" /><CodeLine lineNumber="905"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;m : <a href="/docs/api/classes/llvm/scheduledagmi/#aed362d97300c9cd91f179f9c6c31c9ac">Mutations</a>)</span></CodeLine>
<Link id="l00906" /><CodeLine lineNumber="906"><span class="doxyHighlight">    m-&gt;apply(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00907" /><CodeLine lineNumber="907"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00908" /><CodeLine lineNumber="908"></CodeLine>
<Link id="l00909" /><CodeLine lineNumber="909" lineLink="/docs/api/classes/llvm/scheduledagmi/#a6d0a0b4903e8d4d12c98b0f43fe83878"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a6d0a0b4903e8d4d12c98b0f43fe83878">ScheduleDAGMI::</a></span></CodeLine>
<Link id="l00910" /><CodeLine lineNumber="910"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/scheduledagmi/#a6d0a0b4903e8d4d12c98b0f43fe83878">findRootsAndBiasEdges</a>(<a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;SUnit&#42;&gt;</a> &amp;TopRoots,</span></CodeLine>
<Link id="l00911" /><CodeLine lineNumber="911"><span class="doxyHighlight">                      <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;SUnit&#42;&gt;</a> &amp;BotRoots) &#123;</span></CodeLine>
<Link id="l00912" /><CodeLine lineNumber="912"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &amp;SU : <a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>) &#123;</span></CodeLine>
<Link id="l00913" /><CodeLine lineNumber="913"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!SU.isBoundaryNode() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Boundary node should not be in SUnits&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00914" /><CodeLine lineNumber="914"></CodeLine>
<Link id="l00915" /><CodeLine lineNumber="915"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Order predecessors so DFSResult follows the critical path.</span></CodeLine>
<Link id="l00916" /><CodeLine lineNumber="916"><span class="doxyHighlight">    SU.biasCriticalPath();</span></CodeLine>
<Link id="l00917" /><CodeLine lineNumber="917"></CodeLine>
<Link id="l00918" /><CodeLine lineNumber="918"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// A SUnit is ready to top schedule if it has no predecessors.</span></CodeLine>
<Link id="l00919" /><CodeLine lineNumber="919"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SU.NumPredsLeft)</span></CodeLine>
<Link id="l00920" /><CodeLine lineNumber="920"><span class="doxyHighlight">      TopRoots.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(&amp;SU);</span></CodeLine>
<Link id="l00921" /><CodeLine lineNumber="921"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// A SUnit is ready to bottom schedule if it has no successors.</span></CodeLine>
<Link id="l00922" /><CodeLine lineNumber="922"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SU.NumSuccsLeft)</span></CodeLine>
<Link id="l00923" /><CodeLine lineNumber="923"><span class="doxyHighlight">      BotRoots.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(&amp;SU);</span></CodeLine>
<Link id="l00924" /><CodeLine lineNumber="924"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00925" /><CodeLine lineNumber="925"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledag/#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>.biasCriticalPath();</span></CodeLine>
<Link id="l00926" /><CodeLine lineNumber="926"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00927" /><CodeLine lineNumber="927"></CodeLine>
<Link id="l00928" /><CodeLine lineNumber="928"><span class="doxyHighlightComment">/// Identify DAG roots and setup scheduler queues.</span></CodeLine>
<Link id="l00929" /><CodeLine lineNumber="929" lineLink="/docs/api/classes/llvm/scheduledagmi/#a1f98694f104d052d71ed74ade38d69f0"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a1f98694f104d052d71ed74ade38d69f0">ScheduleDAGMI::initQueues</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;SUnit&#42;&gt;</a> TopRoots,</span></CodeLine>
<Link id="l00930" /><CodeLine lineNumber="930"><span class="doxyHighlight">                               <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;SUnit&#42;&gt;</a> BotRoots) &#123;</span></CodeLine>
<Link id="l00931" /><CodeLine lineNumber="931"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a2aa5cb48ee16ded1b263483026d08894">NextClusterSucc</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00932" /><CodeLine lineNumber="932"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a33503949e135cad03fa91fde0c005649">NextClusterPred</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00933" /><CodeLine lineNumber="933"></CodeLine>
<Link id="l00934" /><CodeLine lineNumber="934"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Release all DAG roots for scheduling, not including EntrySU/ExitSU.</span></CodeLine>
<Link id="l00935" /><CodeLine lineNumber="935"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00936" /><CodeLine lineNumber="936"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Nodes with unreleased weak edges can still be roots.</span></CodeLine>
<Link id="l00937" /><CodeLine lineNumber="937"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Release top roots in forward order.</span></CodeLine>
<Link id="l00938" /><CodeLine lineNumber="938"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU : TopRoots)</span></CodeLine>
<Link id="l00939" /><CodeLine lineNumber="939"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;releaseTopNode(SU);</span></CodeLine>
<Link id="l00940" /><CodeLine lineNumber="940"></CodeLine>
<Link id="l00941" /><CodeLine lineNumber="941"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Release bottom roots in reverse order so the higher priority nodes appear</span></CodeLine>
<Link id="l00942" /><CodeLine lineNumber="942"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// first. This is more natural and slightly more efficient.</span></CodeLine>
<Link id="l00943" /><CodeLine lineNumber="943"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a739c383b97286396ce969b521da2f642">SmallVectorImpl&lt;SUnit&#42;&gt;::const&#95;reverse&#95;iterator</a></span></CodeLine>
<Link id="l00944" /><CodeLine lineNumber="944"><span class="doxyHighlight">         <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BotRoots.<a href="/docs/api/classes/llvm/arrayref/#aebe6da1ab4a07020669f3d6148c0b559">rbegin</a>(), E = BotRoots.<a href="/docs/api/classes/llvm/arrayref/#a709f5d7f042648ec20197939d9a6805f">rend</a>(); <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l00945" /><CodeLine lineNumber="945"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;releaseBottomNode(&#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l00946" /><CodeLine lineNumber="946"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00947" /><CodeLine lineNumber="947"></CodeLine>
<Link id="l00948" /><CodeLine lineNumber="948"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#acf56d667066b39177a3c0f134d759d98">releaseSuccessors</a>(&amp;<a href="/docs/api/classes/llvm/scheduledag/#a521bf68518a92483130a58680716d153">EntrySU</a>);</span></CodeLine>
<Link id="l00949" /><CodeLine lineNumber="949"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a25f9975b56fe38f7a8bb4d10b7f6f5ea">releasePredecessors</a>(&amp;<a href="/docs/api/classes/llvm/scheduledag/#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>);</span></CodeLine>
<Link id="l00950" /><CodeLine lineNumber="950"></CodeLine>
<Link id="l00951" /><CodeLine lineNumber="951"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;registerRoots();</span></CodeLine>
<Link id="l00952" /><CodeLine lineNumber="952"></CodeLine>
<Link id="l00953" /><CodeLine lineNumber="953"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Advance past initial DebugValues.</span></CodeLine>
<Link id="l00954" /><CodeLine lineNumber="954"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> = <a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>);</span></CodeLine>
<Link id="l00955" /><CodeLine lineNumber="955"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a> = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>;</span></CodeLine>
<Link id="l00956" /><CodeLine lineNumber="956"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00957" /><CodeLine lineNumber="957"></CodeLine>
<Link id="l00958" /><CodeLine lineNumber="958"><span class="doxyHighlightComment">/// Update scheduler queues after scheduling an instruction.</span></CodeLine>
<Link id="l00959" /><CodeLine lineNumber="959" lineLink="/docs/api/classes/llvm/scheduledagmi/#abfdd9a95217810c69b2557060a130318"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#abfdd9a95217810c69b2557060a130318">ScheduleDAGMI::updateQueues</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsTopNode) &#123;</span></CodeLine>
<Link id="l00960" /><CodeLine lineNumber="960"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Release dependent instructions for scheduling.</span></CodeLine>
<Link id="l00961" /><CodeLine lineNumber="961"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTopNode)</span></CodeLine>
<Link id="l00962" /><CodeLine lineNumber="962"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmi/#acf56d667066b39177a3c0f134d759d98">releaseSuccessors</a>(SU);</span></CodeLine>
<Link id="l00963" /><CodeLine lineNumber="963"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00964" /><CodeLine lineNumber="964"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmi/#a25f9975b56fe38f7a8bb4d10b7f6f5ea">releasePredecessors</a>(SU);</span></CodeLine>
<Link id="l00965" /><CodeLine lineNumber="965"></CodeLine>
<Link id="l00966" /><CodeLine lineNumber="966"><span class="doxyHighlight">  SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a> = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00967" /><CodeLine lineNumber="967"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00968" /><CodeLine lineNumber="968"></CodeLine>
<Link id="l00969" /><CodeLine lineNumber="969"><span class="doxyHighlightComment">/// Reinsert any remaining debug&#95;values, just like the PostRA scheduler.</span></CodeLine>
<Link id="l00970" /><CodeLine lineNumber="970" lineLink="/docs/api/classes/llvm/scheduledagmi/#ac2dafe98c88d43b256622413886e2152"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#ac2dafe98c88d43b256622413886e2152">ScheduleDAGMI::placeDebugValues</a>() &#123;</span></CodeLine>
<Link id="l00971" /><CodeLine lineNumber="971"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If first instruction was a DBG&#95;VALUE then put it back.</span></CodeLine>
<Link id="l00972" /><CodeLine lineNumber="972"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#a25ae020b571d18d34d03097d91ca0f40">FirstDbgValue</a>) &#123;</span></CodeLine>
<Link id="l00973" /><CodeLine lineNumber="973"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;splice(<a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a25ae020b571d18d34d03097d91ca0f40">FirstDbgValue</a>);</span></CodeLine>
<Link id="l00974" /><CodeLine lineNumber="974"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a> = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a25ae020b571d18d34d03097d91ca0f40">FirstDbgValue</a>;</span></CodeLine>
<Link id="l00975" /><CodeLine lineNumber="975"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00976" /><CodeLine lineNumber="976"></CodeLine>
<Link id="l00977" /><CodeLine lineNumber="977"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (std::vector&lt;std::pair&lt;MachineInstr &#42;, MachineInstr &#42;&gt;&gt;<a href="/docs/api/classes/llvm/iplist">::iterator</a></span></CodeLine>
<Link id="l00978" /><CodeLine lineNumber="978"><span class="doxyHighlight">         DI = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a6837fb2c08f4c8c986a4689a37ca93cf">DbgValues</a>.end(), DE = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a6837fb2c08f4c8c986a4689a37ca93cf">DbgValues</a>.begin(); DI != DE; --DI) &#123;</span></CodeLine>
<Link id="l00979" /><CodeLine lineNumber="979"><span class="doxyHighlight">    std::pair&lt;MachineInstr &#42;, MachineInstr &#42;&gt; <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = &#42;std::prev(DI);</span></CodeLine>
<Link id="l00980" /><CodeLine lineNumber="980"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/classes/livedebugvalues/dbgvalue">DbgValue</a> = <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.first;</span></CodeLine>
<Link id="l00981" /><CodeLine lineNumber="981"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> OrigPrevMI = <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.second;</span></CodeLine>
<Link id="l00982" /><CodeLine lineNumber="982"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (&amp;&#42;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a> == <a href="/docs/api/classes/livedebugvalues/dbgvalue">DbgValue</a>)</span></CodeLine>
<Link id="l00983" /><CodeLine lineNumber="983"><span class="doxyHighlight">      ++<a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>;</span></CodeLine>
<Link id="l00984" /><CodeLine lineNumber="984"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;splice(std::next(OrigPrevMI), <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>, <a href="/docs/api/classes/livedebugvalues/dbgvalue">DbgValue</a>);</span></CodeLine>
<Link id="l00985" /><CodeLine lineNumber="985"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a> != <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;end() &amp;&amp; OrigPrevMI == &amp;&#42;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>)</span></CodeLine>
<Link id="l00986" /><CodeLine lineNumber="986"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a> = <a href="/docs/api/classes/livedebugvalues/dbgvalue">DbgValue</a>;</span></CodeLine>
<Link id="l00987" /><CodeLine lineNumber="987"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00988" /><CodeLine lineNumber="988"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00989" /><CodeLine lineNumber="989"></CodeLine>
<Link id="l00990" /><CodeLine lineNumber="990"><span class="doxyHighlightPreprocessor">#if !defined(NDEBUG) || defined(LLVM&#95;ENABLE&#95;DUMP)</span></CodeLine>
<Link id="l00991" /><CodeLine lineNumber="991" lineLink="#aaae6594fa7ded6088910716df9f47553"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> &#42;<a href="#aaae6594fa7ded6088910716df9f47553">scheduleTableLegend</a> = </span><span class="doxyHighlightStringLiteral">&quot;  i: issue\\n  x: resource booked&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00992" /><CodeLine lineNumber="992"></CodeLine>
<Link id="l00993" /><CodeLine lineNumber="993" lineLink="/docs/api/classes/llvm/scheduledagmi/#a3010c4b89284791284aa6e2ec510501b"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/support/compiler-h/#aa863693eef567397d9c292da5bf22d34">LLVM&#95;DUMP&#95;METHOD</a> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a3010c4b89284791284aa6e2ec510501b">ScheduleDAGMI::dumpScheduleTraceTopDown</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00994" /><CodeLine lineNumber="994"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Bail off when there is no schedule model to query.</span></CodeLine>
<Link id="l00995" /><CodeLine lineNumber="995"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.hasInstrSchedModel())</span></CodeLine>
<Link id="l00996" /><CodeLine lineNumber="996"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00997" /><CodeLine lineNumber="997"></CodeLine>
<Link id="l00998" /><CodeLine lineNumber="998"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//  Nothing to show if there is no or just one instruction.</span></CodeLine>
<Link id="l00999" /><CodeLine lineNumber="999"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;size() &lt; 2)</span></CodeLine>
<Link id="l01000" /><CodeLine lineNumber="1000"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01001" /><CodeLine lineNumber="1001"></CodeLine>
<Link id="l01002" /><CodeLine lineNumber="1002"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &#42; Schedule table (TopDown):\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01003" /><CodeLine lineNumber="1003"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="#aaae6594fa7ded6088910716df9f47553">scheduleTableLegend</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01004" /><CodeLine lineNumber="1004"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> FirstCycle = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;&#42;(std::begin(&#42;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">)))-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a>;</span></CodeLine>
<Link id="l01005" /><CodeLine lineNumber="1005"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> LastCycle = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;&#42;(std::prev(std::end(&#42;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">))))-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a>;</span></CodeLine>
<Link id="l01006" /><CodeLine lineNumber="1006"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : &#42;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l01007" /><CodeLine lineNumber="1007"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01008" /><CodeLine lineNumber="1008"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SU)</span></CodeLine>
<Link id="l01009" /><CodeLine lineNumber="1009"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01010" /><CodeLine lineNumber="1010"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a4bf5573660c55924d68b517a0e9b4554">getSchedClass</a>(SU);</span></CodeLine>
<Link id="l01011" /><CodeLine lineNumber="1011"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/targetschedmodel/#a7b653a507e8307775b33e01655d3b8d8">TargetSchedModel::ProcResIter</a> PI = <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getWriteProcResBegin(SC),</span></CodeLine>
<Link id="l01012" /><CodeLine lineNumber="1012"><span class="doxyHighlight">                                       PE = <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getWriteProcResEnd(SC);</span></CodeLine>
<Link id="l01013" /><CodeLine lineNumber="1013"><span class="doxyHighlight">         PI != PE; ++PI) &#123;</span></CodeLine>
<Link id="l01014" /><CodeLine lineNumber="1014"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> + PI-&gt;ReleaseAtCycle - 1 &gt; LastCycle)</span></CodeLine>
<Link id="l01015" /><CodeLine lineNumber="1015"><span class="doxyHighlight">        LastCycle = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> + PI-&gt;ReleaseAtCycle - 1;</span></CodeLine>
<Link id="l01016" /><CodeLine lineNumber="1016"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01017" /><CodeLine lineNumber="1017"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01018" /><CodeLine lineNumber="1018"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Print the header with the cycles</span></CodeLine>
<Link id="l01019" /><CodeLine lineNumber="1019"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</span><span class="doxyHighlightStringLiteral">&quot;Cycle&quot;</span><span class="doxyHighlight">, <a href="#a6523b0d71574a464a78e2e05bd67b543">HeaderColWidth</a>);</span></CodeLine>
<Link id="l01020" /><CodeLine lineNumber="1020"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = FirstCycle; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> &lt;= LastCycle; ++<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>)</span></CodeLine>
<Link id="l01021" /><CodeLine lineNumber="1021"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</span><span class="doxyHighlightStringLiteral">&quot;| &quot;</span><span class="doxyHighlight"> + std::to&#95;string(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>), <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</span></CodeLine>
<Link id="l01022" /><CodeLine lineNumber="1022"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;|\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01023" /><CodeLine lineNumber="1023"></CodeLine>
<Link id="l01024" /><CodeLine lineNumber="1024"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : &#42;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l01025" /><CodeLine lineNumber="1025"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01026" /><CodeLine lineNumber="1026"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SU) &#123;</span></CodeLine>
<Link id="l01027" /><CodeLine lineNumber="1027"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Missing SUnit\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01028" /><CodeLine lineNumber="1028"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01029" /><CodeLine lineNumber="1029"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01030" /><CodeLine lineNumber="1030"><span class="doxyHighlight">    std::string NodeName(</span><span class="doxyHighlightStringLiteral">&quot;SU(&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01031" /><CodeLine lineNumber="1031"><span class="doxyHighlight">    NodeName += std::to&#95;string(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a>) + </span><span class="doxyHighlightStringLiteral">&quot;)&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01032" /><CodeLine lineNumber="1032"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(NodeName, <a href="#a6523b0d71574a464a78e2e05bd67b543">HeaderColWidth</a>);</span></CodeLine>
<Link id="l01033" /><CodeLine lineNumber="1033"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = FirstCycle;</span></CodeLine>
<Link id="l01034" /><CodeLine lineNumber="1034"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> &lt;= LastCycle; ++<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</span></CodeLine>
<Link id="l01035" /><CodeLine lineNumber="1035"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> == SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a>)</span></CodeLine>
<Link id="l01036" /><CodeLine lineNumber="1036"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</span><span class="doxyHighlightStringLiteral">&quot;| i&quot;</span><span class="doxyHighlight">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</span></CodeLine>
<Link id="l01037" /><CodeLine lineNumber="1037"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01038" /><CodeLine lineNumber="1038"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</span><span class="doxyHighlightStringLiteral">&quot;|&quot;</span><span class="doxyHighlight">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</span></CodeLine>
<Link id="l01039" /><CodeLine lineNumber="1039"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01040" /><CodeLine lineNumber="1040"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;|\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01041" /><CodeLine lineNumber="1041"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a4bf5573660c55924d68b517a0e9b4554">getSchedClass</a>(SU);</span></CodeLine>
<Link id="l01042" /><CodeLine lineNumber="1042"></CodeLine>
<Link id="l01043" /><CodeLine lineNumber="1043"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;MCWriteProcResEntry, 4&gt;</a> ResourcesIt(</span></CodeLine>
<Link id="l01044" /><CodeLine lineNumber="1044"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a341215803e83773a3e97860dc291f121">make&#95;range</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getWriteProcResBegin(SC),</span></CodeLine>
<Link id="l01045" /><CodeLine lineNumber="1045"><span class="doxyHighlight">                   <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getWriteProcResEnd(SC)));</span></CodeLine>
<Link id="l01046" /><CodeLine lineNumber="1046"></CodeLine>
<Link id="l01047" /><CodeLine lineNumber="1047"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a2d7fe448a57a131b2533e439fd6eae1e">MISchedSortResourcesInTrace</a>)</span></CodeLine>
<Link id="l01048" /><CodeLine lineNumber="1048"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a076f93c387f454f0db13d4bc7d4e7f9c">llvm::stable&#95;sort</a>(ResourcesIt,</span></CodeLine>
<Link id="l01049" /><CodeLine lineNumber="1049"><span class="doxyHighlight">                        &#91;&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcwriteprocresentry">MCWriteProcResEntry</a> &amp;LHS,</span></CodeLine>
<Link id="l01050" /><CodeLine lineNumber="1050"><span class="doxyHighlight">                           </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcwriteprocresentry">MCWriteProcResEntry</a> &amp;RHS) -&gt; </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01051" /><CodeLine lineNumber="1051"><span class="doxyHighlight">                          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> LHS.AcquireAtCycle &lt; RHS.AcquireAtCycle ||</span></CodeLine>
<Link id="l01052" /><CodeLine lineNumber="1052"><span class="doxyHighlight">                                 (LHS.AcquireAtCycle == RHS.AcquireAtCycle &amp;&amp;</span></CodeLine>
<Link id="l01053" /><CodeLine lineNumber="1053"><span class="doxyHighlight">                                  LHS.ReleaseAtCycle &lt; RHS.ReleaseAtCycle);</span></CodeLine>
<Link id="l01054" /><CodeLine lineNumber="1054"><span class="doxyHighlight">                        &#125;);</span></CodeLine>
<Link id="l01055" /><CodeLine lineNumber="1055"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcwriteprocresentry">MCWriteProcResEntry</a> &amp;PI : ResourcesIt) &#123;</span></CodeLine>
<Link id="l01056" /><CodeLine lineNumber="1056"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = FirstCycle;</span></CodeLine>
<Link id="l01057" /><CodeLine lineNumber="1057"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::string ResName =</span></CodeLine>
<Link id="l01058" /><CodeLine lineNumber="1058"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getResourceName(PI.ProcResourceIdx);</span></CodeLine>
<Link id="l01059" /><CodeLine lineNumber="1059"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#a1c6d735dfe8fc13a113405c1dda2991e">llvm::right&#95;justify</a>(ResName + </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight">, <a href="#a6523b0d71574a464a78e2e05bd67b543">HeaderColWidth</a>);</span></CodeLine>
<Link id="l01060" /><CodeLine lineNumber="1060"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> &lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> + PI.AcquireAtCycle; ++<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</span></CodeLine>
<Link id="l01061" /><CodeLine lineNumber="1061"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</span><span class="doxyHighlightStringLiteral">&quot;|&quot;</span><span class="doxyHighlight">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</span></CodeLine>
<Link id="l01062" /><CodeLine lineNumber="1062"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01063" /><CodeLine lineNumber="1063"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = PI.ReleaseAtCycle - PI.AcquireAtCycle; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E;</span></CodeLine>
<Link id="l01064" /><CodeLine lineNumber="1064"><span class="doxyHighlight">           ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ++<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>)</span></CodeLine>
<Link id="l01065" /><CodeLine lineNumber="1065"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</span><span class="doxyHighlightStringLiteral">&quot;| x&quot;</span><span class="doxyHighlight">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</span></CodeLine>
<Link id="l01066" /><CodeLine lineNumber="1066"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>++ &lt;= LastCycle)</span></CodeLine>
<Link id="l01067" /><CodeLine lineNumber="1067"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</span><span class="doxyHighlightStringLiteral">&quot;|&quot;</span><span class="doxyHighlight">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</span></CodeLine>
<Link id="l01068" /><CodeLine lineNumber="1068"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Place end char</span></CodeLine>
<Link id="l01069" /><CodeLine lineNumber="1069"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;| \\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01070" /><CodeLine lineNumber="1070"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01071" /><CodeLine lineNumber="1071"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01072" /><CodeLine lineNumber="1072"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01073" /><CodeLine lineNumber="1073"></CodeLine>
<Link id="l01074" /><CodeLine lineNumber="1074" lineLink="/docs/api/classes/llvm/scheduledagmi/#a942d716003056c037d46a4144e9cf885"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/support/compiler-h/#aa863693eef567397d9c292da5bf22d34">LLVM&#95;DUMP&#95;METHOD</a> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a942d716003056c037d46a4144e9cf885">ScheduleDAGMI::dumpScheduleTraceBottomUp</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01075" /><CodeLine lineNumber="1075"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Bail off when there is no schedule model to query.</span></CodeLine>
<Link id="l01076" /><CodeLine lineNumber="1076"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.hasInstrSchedModel())</span></CodeLine>
<Link id="l01077" /><CodeLine lineNumber="1077"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01078" /><CodeLine lineNumber="1078"></CodeLine>
<Link id="l01079" /><CodeLine lineNumber="1079"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//  Nothing to show if there is no or just one instruction.</span></CodeLine>
<Link id="l01080" /><CodeLine lineNumber="1080"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;size() &lt; 2)</span></CodeLine>
<Link id="l01081" /><CodeLine lineNumber="1081"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01082" /><CodeLine lineNumber="1082"></CodeLine>
<Link id="l01083" /><CodeLine lineNumber="1083"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &#42; Schedule table (BottomUp):\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01084" /><CodeLine lineNumber="1084"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="#aaae6594fa7ded6088910716df9f47553">scheduleTableLegend</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01085" /><CodeLine lineNumber="1085"></CodeLine>
<Link id="l01086" /><CodeLine lineNumber="1086"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> FirstCycle = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;&#42;(std::begin(&#42;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">)))-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>;</span></CodeLine>
<Link id="l01087" /><CodeLine lineNumber="1087"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> LastCycle = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;&#42;(std::prev(std::end(&#42;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">))))-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>;</span></CodeLine>
<Link id="l01088" /><CodeLine lineNumber="1088"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : &#42;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l01089" /><CodeLine lineNumber="1089"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01090" /><CodeLine lineNumber="1090"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SU)</span></CodeLine>
<Link id="l01091" /><CodeLine lineNumber="1091"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01092" /><CodeLine lineNumber="1092"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a4bf5573660c55924d68b517a0e9b4554">getSchedClass</a>(SU);</span></CodeLine>
<Link id="l01093" /><CodeLine lineNumber="1093"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/targetschedmodel/#a7b653a507e8307775b33e01655d3b8d8">TargetSchedModel::ProcResIter</a> PI = <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getWriteProcResBegin(SC),</span></CodeLine>
<Link id="l01094" /><CodeLine lineNumber="1094"><span class="doxyHighlight">                                       PE = <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getWriteProcResEnd(SC);</span></CodeLine>
<Link id="l01095" /><CodeLine lineNumber="1095"><span class="doxyHighlight">         PI != PE; ++PI) &#123;</span></CodeLine>
<Link id="l01096" /><CodeLine lineNumber="1096"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight">)SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> - PI-&gt;ReleaseAtCycle + 1 &lt; LastCycle)</span></CodeLine>
<Link id="l01097" /><CodeLine lineNumber="1097"><span class="doxyHighlight">        LastCycle = (int)SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> - PI-&gt;ReleaseAtCycle + 1;</span></CodeLine>
<Link id="l01098" /><CodeLine lineNumber="1098"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01099" /><CodeLine lineNumber="1099"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01100" /><CodeLine lineNumber="1100"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Print the header with the cycles</span></CodeLine>
<Link id="l01101" /><CodeLine lineNumber="1101"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</span><span class="doxyHighlightStringLiteral">&quot;Cycle&quot;</span><span class="doxyHighlight">, <a href="#a6523b0d71574a464a78e2e05bd67b543">HeaderColWidth</a>);</span></CodeLine>
<Link id="l01102" /><CodeLine lineNumber="1102"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = FirstCycle; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> &gt;= LastCycle; --<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>)</span></CodeLine>
<Link id="l01103" /><CodeLine lineNumber="1103"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</span><span class="doxyHighlightStringLiteral">&quot;| &quot;</span><span class="doxyHighlight"> + std::to&#95;string(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>), <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</span></CodeLine>
<Link id="l01104" /><CodeLine lineNumber="1104"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;|\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01105" /><CodeLine lineNumber="1105"></CodeLine>
<Link id="l01106" /><CodeLine lineNumber="1106"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : &#42;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l01107" /><CodeLine lineNumber="1107"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01108" /><CodeLine lineNumber="1108"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SU) &#123;</span></CodeLine>
<Link id="l01109" /><CodeLine lineNumber="1109"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Missing SUnit\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01110" /><CodeLine lineNumber="1110"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01111" /><CodeLine lineNumber="1111"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01112" /><CodeLine lineNumber="1112"><span class="doxyHighlight">    std::string NodeName(</span><span class="doxyHighlightStringLiteral">&quot;SU(&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01113" /><CodeLine lineNumber="1113"><span class="doxyHighlight">    NodeName += std::to&#95;string(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a>) + </span><span class="doxyHighlightStringLiteral">&quot;)&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01114" /><CodeLine lineNumber="1114"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(NodeName, <a href="#a6523b0d71574a464a78e2e05bd67b543">HeaderColWidth</a>);</span></CodeLine>
<Link id="l01115" /><CodeLine lineNumber="1115"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = FirstCycle;</span></CodeLine>
<Link id="l01116" /><CodeLine lineNumber="1116"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> &gt;= LastCycle; --<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</span></CodeLine>
<Link id="l01117" /><CodeLine lineNumber="1117"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> == (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight">)SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>)</span></CodeLine>
<Link id="l01118" /><CodeLine lineNumber="1118"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</span><span class="doxyHighlightStringLiteral">&quot;| i&quot;</span><span class="doxyHighlight">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</span></CodeLine>
<Link id="l01119" /><CodeLine lineNumber="1119"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01120" /><CodeLine lineNumber="1120"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</span><span class="doxyHighlightStringLiteral">&quot;|&quot;</span><span class="doxyHighlight">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</span></CodeLine>
<Link id="l01121" /><CodeLine lineNumber="1121"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01122" /><CodeLine lineNumber="1122"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;|\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01123" /><CodeLine lineNumber="1123"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a4bf5573660c55924d68b517a0e9b4554">getSchedClass</a>(SU);</span></CodeLine>
<Link id="l01124" /><CodeLine lineNumber="1124"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;MCWriteProcResEntry, 4&gt;</a> ResourcesIt(</span></CodeLine>
<Link id="l01125" /><CodeLine lineNumber="1125"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a341215803e83773a3e97860dc291f121">make&#95;range</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getWriteProcResBegin(SC),</span></CodeLine>
<Link id="l01126" /><CodeLine lineNumber="1126"><span class="doxyHighlight">                   <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getWriteProcResEnd(SC)));</span></CodeLine>
<Link id="l01127" /><CodeLine lineNumber="1127"></CodeLine>
<Link id="l01128" /><CodeLine lineNumber="1128"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a2d7fe448a57a131b2533e439fd6eae1e">MISchedSortResourcesInTrace</a>)</span></CodeLine>
<Link id="l01129" /><CodeLine lineNumber="1129"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a076f93c387f454f0db13d4bc7d4e7f9c">llvm::stable&#95;sort</a>(ResourcesIt,</span></CodeLine>
<Link id="l01130" /><CodeLine lineNumber="1130"><span class="doxyHighlight">                        &#91;&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcwriteprocresentry">MCWriteProcResEntry</a> &amp;LHS,</span></CodeLine>
<Link id="l01131" /><CodeLine lineNumber="1131"><span class="doxyHighlight">                           </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcwriteprocresentry">MCWriteProcResEntry</a> &amp;RHS) -&gt; </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01132" /><CodeLine lineNumber="1132"><span class="doxyHighlight">                          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> LHS.AcquireAtCycle &lt; RHS.AcquireAtCycle ||</span></CodeLine>
<Link id="l01133" /><CodeLine lineNumber="1133"><span class="doxyHighlight">                                 (LHS.AcquireAtCycle == RHS.AcquireAtCycle &amp;&amp;</span></CodeLine>
<Link id="l01134" /><CodeLine lineNumber="1134"><span class="doxyHighlight">                                  LHS.ReleaseAtCycle &lt; RHS.ReleaseAtCycle);</span></CodeLine>
<Link id="l01135" /><CodeLine lineNumber="1135"><span class="doxyHighlight">                        &#125;);</span></CodeLine>
<Link id="l01136" /><CodeLine lineNumber="1136"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcwriteprocresentry">MCWriteProcResEntry</a> &amp;PI : ResourcesIt) &#123;</span></CodeLine>
<Link id="l01137" /><CodeLine lineNumber="1137"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = FirstCycle;</span></CodeLine>
<Link id="l01138" /><CodeLine lineNumber="1138"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::string ResName =</span></CodeLine>
<Link id="l01139" /><CodeLine lineNumber="1139"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getResourceName(PI.ProcResourceIdx);</span></CodeLine>
<Link id="l01140" /><CodeLine lineNumber="1140"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#a1c6d735dfe8fc13a113405c1dda2991e">llvm::right&#95;justify</a>(ResName + </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight">, <a href="#a6523b0d71574a464a78e2e05bd67b543">HeaderColWidth</a>);</span></CodeLine>
<Link id="l01141" /><CodeLine lineNumber="1141"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> &gt; ((int)SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> - (int)PI.AcquireAtCycle); --<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</span></CodeLine>
<Link id="l01142" /><CodeLine lineNumber="1142"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</span><span class="doxyHighlightStringLiteral">&quot;|&quot;</span><span class="doxyHighlight">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</span></CodeLine>
<Link id="l01143" /><CodeLine lineNumber="1143"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01144" /><CodeLine lineNumber="1144"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = PI.ReleaseAtCycle - PI.AcquireAtCycle; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E;</span></CodeLine>
<Link id="l01145" /><CodeLine lineNumber="1145"><span class="doxyHighlight">           ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, --<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>)</span></CodeLine>
<Link id="l01146" /><CodeLine lineNumber="1146"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</span><span class="doxyHighlightStringLiteral">&quot;| x&quot;</span><span class="doxyHighlight">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</span></CodeLine>
<Link id="l01147" /><CodeLine lineNumber="1147"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-- &gt;= LastCycle)</span></CodeLine>
<Link id="l01148" /><CodeLine lineNumber="1148"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</span><span class="doxyHighlightStringLiteral">&quot;|&quot;</span><span class="doxyHighlight">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</span></CodeLine>
<Link id="l01149" /><CodeLine lineNumber="1149"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Place end char</span></CodeLine>
<Link id="l01150" /><CodeLine lineNumber="1150"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;| \\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01151" /><CodeLine lineNumber="1151"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01152" /><CodeLine lineNumber="1152"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01153" /><CodeLine lineNumber="1153"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01154" /><CodeLine lineNumber="1154"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l01155" /><CodeLine lineNumber="1155"></CodeLine>
<Link id="l01156" /><CodeLine lineNumber="1156"><span class="doxyHighlightPreprocessor">#if !defined(NDEBUG) || defined(LLVM&#95;ENABLE&#95;DUMP)</span></CodeLine>
<Link id="l01157" /><CodeLine lineNumber="1157" lineLink="/docs/api/classes/llvm/scheduledagmi/#a01b02e76c87211e7084ec17f18a2d16f"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/support/compiler-h/#aa863693eef567397d9c292da5bf22d34">LLVM&#95;DUMP&#95;METHOD</a> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a01b02e76c87211e7084ec17f18a2d16f">ScheduleDAGMI::dumpSchedule</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01158" /><CodeLine lineNumber="1158"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#afc178c1fabdc9ea75b2e47e85c12e3df">MISchedDumpScheduleTrace</a>) &#123;</span></CodeLine>
<Link id="l01159" /><CodeLine lineNumber="1159"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab3c913205add9c73e6bfe3540749737e">DumpDir</a> == <a href="/docs/api/classes/llvm/scheduledaginstrs/#a8d1f67b9f6d31b169c0d4b1d2080b4e7a622f7d95cc7d6d2dc7a32b140559b680">DumpDirection::TopDown</a>)</span></CodeLine>
<Link id="l01160" /><CodeLine lineNumber="1160"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmi/#a3010c4b89284791284aa6e2ec510501b">dumpScheduleTraceTopDown</a>();</span></CodeLine>
<Link id="l01161" /><CodeLine lineNumber="1161"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab3c913205add9c73e6bfe3540749737e">DumpDir</a> == <a href="/docs/api/classes/llvm/scheduledaginstrs/#a8d1f67b9f6d31b169c0d4b1d2080b4e7a3dac6c64382dc74b937892893d2595c6">DumpDirection::BottomUp</a>)</span></CodeLine>
<Link id="l01162" /><CodeLine lineNumber="1162"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmi/#a942d716003056c037d46a4144e9cf885">dumpScheduleTraceBottomUp</a>();</span></CodeLine>
<Link id="l01163" /><CodeLine lineNumber="1163"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab3c913205add9c73e6bfe3540749737e">DumpDir</a> == <a href="/docs/api/classes/llvm/scheduledaginstrs/#a8d1f67b9f6d31b169c0d4b1d2080b4e7a7aa4fbe53df8b2bf33ec065623b42e34">DumpDirection::Bidirectional</a>) &#123;</span></CodeLine>
<Link id="l01164" /><CodeLine lineNumber="1164"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#42; Schedule table (Bidirectional): not implemented\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01165" /><CodeLine lineNumber="1165"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01166" /><CodeLine lineNumber="1166"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#42; Schedule table: DumpDirection not set.\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01167" /><CodeLine lineNumber="1167"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01168" /><CodeLine lineNumber="1168"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01169" /><CodeLine lineNumber="1169"></CodeLine>
<Link id="l01170" /><CodeLine lineNumber="1170"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : &#42;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l01171" /><CodeLine lineNumber="1171"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</span></CodeLine>
<Link id="l01172" /><CodeLine lineNumber="1172"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledaginstrs/#aa5f22315c4064579fca6cd88fb36ea5a">dumpNode</a>(&#42;SU);</span></CodeLine>
<Link id="l01173" /><CodeLine lineNumber="1173"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01174" /><CodeLine lineNumber="1174"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Missing SUnit\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01175" /><CodeLine lineNumber="1175"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01176" /><CodeLine lineNumber="1176"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01177" /><CodeLine lineNumber="1177"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l01178" /><CodeLine lineNumber="1178"></CodeLine>
<Link id="l01179" /><CodeLine lineNumber="1179"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l01180" /><CodeLine lineNumber="1180"><span class="doxyHighlightComment">// ScheduleDAGMILive - Base class for MachineInstr scheduling with LiveIntervals</span></CodeLine>
<Link id="l01181" /><CodeLine lineNumber="1181"><span class="doxyHighlightComment">// preservation.</span></CodeLine>
<Link id="l01182" /><CodeLine lineNumber="1182"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l01183" /><CodeLine lineNumber="1183"></CodeLine>
<Link id="l01184" /><CodeLine lineNumber="1184" lineLink="/docs/api/classes/llvm/scheduledagmilive/#ada767569b82d6e57bf0b25f5d35d22df"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/scheduledagmilive/#ada767569b82d6e57bf0b25f5d35d22df">ScheduleDAGMILive::~ScheduleDAGMILive</a>() &#123;</span></CodeLine>
<Link id="l01185" /><CodeLine lineNumber="1185"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">delete</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>;</span></CodeLine>
<Link id="l01186" /><CodeLine lineNumber="1186"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01187" /><CodeLine lineNumber="1187"></CodeLine>
<Link id="l01188" /><CodeLine lineNumber="1188" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a920652e64042f72e913f81f9660b4f2f"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a920652e64042f72e913f81f9660b4f2f">ScheduleDAGMILive::collectVRegUses</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &amp;SU) &#123;</span></CodeLine>
<Link id="l01189" /><CodeLine lineNumber="1189"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = &#42;SU.<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</span></CodeLine>
<Link id="l01190" /><CodeLine lineNumber="1190"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;MO : <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.operands()) &#123;</span></CodeLine>
<Link id="l01191" /><CodeLine lineNumber="1191"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!MO.isReg())</span></CodeLine>
<Link id="l01192" /><CodeLine lineNumber="1192"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01193" /><CodeLine lineNumber="1193"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!MO.readsReg())</span></CodeLine>
<Link id="l01194" /><CodeLine lineNumber="1194"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01195" /><CodeLine lineNumber="1195"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#a96bb77f51ee973b0613bf5083144fa69">TrackLaneMasks</a> &amp;&amp; !MO.isUse())</span></CodeLine>
<Link id="l01196" /><CodeLine lineNumber="1196"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01197" /><CodeLine lineNumber="1197"></CodeLine>
<Link id="l01198" /><CodeLine lineNumber="1198"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> Reg = MO.getReg();</span></CodeLine>
<Link id="l01199" /><CodeLine lineNumber="1199"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Reg.isVirtual())</span></CodeLine>
<Link id="l01200" /><CodeLine lineNumber="1200"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01201" /><CodeLine lineNumber="1201"></CodeLine>
<Link id="l01202" /><CodeLine lineNumber="1202"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Ignore re-defs.</span></CodeLine>
<Link id="l01203" /><CodeLine lineNumber="1203"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#a96bb77f51ee973b0613bf5083144fa69">TrackLaneMasks</a>) &#123;</span></CodeLine>
<Link id="l01204" /><CodeLine lineNumber="1204"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> FoundDef = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01205" /><CodeLine lineNumber="1205"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;MO2 : <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.all&#95;defs()) &#123;</span></CodeLine>
<Link id="l01206" /><CodeLine lineNumber="1206"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MO2.getReg() == Reg &amp;&amp; !MO2.isDead()) &#123;</span></CodeLine>
<Link id="l01207" /><CodeLine lineNumber="1207"><span class="doxyHighlight">          FoundDef = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01208" /><CodeLine lineNumber="1208"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01209" /><CodeLine lineNumber="1209"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l01210" /><CodeLine lineNumber="1210"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01211" /><CodeLine lineNumber="1211"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (FoundDef)</span></CodeLine>
<Link id="l01212" /><CodeLine lineNumber="1212"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01213" /><CodeLine lineNumber="1213"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01214" /><CodeLine lineNumber="1214"></CodeLine>
<Link id="l01215" /><CodeLine lineNumber="1215"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Record this local VReg use.</span></CodeLine>
<Link id="l01216" /><CodeLine lineNumber="1216"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/sparsemultiset/#ada97379dfb89c01fb4065e33bf180f0e">VReg2SUnitMultiMap::iterator</a> UI = <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.find(Reg);</span></CodeLine>
<Link id="l01217" /><CodeLine lineNumber="1217"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (; UI != <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.end(); ++UI) &#123;</span></CodeLine>
<Link id="l01218" /><CodeLine lineNumber="1218"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UI-&gt;<a href="/docs/api/structs/llvm/vreg2sunit/#a62cea84ba15a90f1f6c497f16d8eeda3">SU</a> == &amp;SU)</span></CodeLine>
<Link id="l01219" /><CodeLine lineNumber="1219"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01220" /><CodeLine lineNumber="1220"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01221" /><CodeLine lineNumber="1221"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UI == <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.end())</span></CodeLine>
<Link id="l01222" /><CodeLine lineNumber="1222"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.insert(<a href="/docs/api/structs/llvm/vreg2sunit">VReg2SUnit</a>(Reg, <a href="/docs/api/structs/llvm/lanebitmask/#a9082b6aa4021114645045d9c5628eb26">LaneBitmask::getNone</a>(), &amp;SU));</span></CodeLine>
<Link id="l01223" /><CodeLine lineNumber="1223"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01224" /><CodeLine lineNumber="1224"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01225" /><CodeLine lineNumber="1225"></CodeLine>
<Link id="l01226" /><CodeLine lineNumber="1226"><span class="doxyHighlightComment">/// enterRegion - Called back from MachineScheduler::runOnMachineFunction after</span></CodeLine>
<Link id="l01227" /><CodeLine lineNumber="1227"><span class="doxyHighlightComment">/// crossing a scheduling boundary. &#91;begin, end) includes all instructions in</span></CodeLine>
<Link id="l01228" /><CodeLine lineNumber="1228"><span class="doxyHighlightComment">/// the region, including the boundary itself and single-instruction regions</span></CodeLine>
<Link id="l01229" /><CodeLine lineNumber="1229"><span class="doxyHighlightComment">/// that don&#39;t get scheduled.</span></CodeLine>
<Link id="l01230" /><CodeLine lineNumber="1230" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a34481791fdd8f5d9131431cb0a1a0c01"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a34481791fdd8f5d9131431cb0a1a0c01">ScheduleDAGMILive::enterRegion</a>(<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;bb,</span></CodeLine>
<Link id="l01231" /><CodeLine lineNumber="1231"><span class="doxyHighlight">                                <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>,</span></CodeLine>
<Link id="l01232" /><CodeLine lineNumber="1232"><span class="doxyHighlight">                                <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/classes/llvm/scheduledaginstrs/#a21805259f54dab47c2b3da009216996a">end</a>,</span></CodeLine>
<Link id="l01233" /><CodeLine lineNumber="1233"><span class="doxyHighlight">                                </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> regioninstrs)</span></CodeLine>
<Link id="l01234" /><CodeLine lineNumber="1234"><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01235" /><CodeLine lineNumber="1235"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// ScheduleDAGMI initializes SchedImpl&#39;s per-region policy.</span></CodeLine>
<Link id="l01236" /><CodeLine lineNumber="1236"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a78e3672daf3301153eac2266dbc32885">ScheduleDAGMI::enterRegion</a>(bb, <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a21805259f54dab47c2b3da009216996a">end</a>, regioninstrs);</span></CodeLine>
<Link id="l01237" /><CodeLine lineNumber="1237"></CodeLine>
<Link id="l01238" /><CodeLine lineNumber="1238"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For convenience remember the end of the liveness region.</span></CodeLine>
<Link id="l01239" /><CodeLine lineNumber="1239"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#ae8d156802e79e1d8f76dadc3e5d265b5">LiveRegionEnd</a> = (<a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a> == bb-&gt;<a href="/docs/api/classes/llvm/machinebasicblock/#acbc921830578e2741be6549db716c0ce">end</a>()) ? <a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a> : std::next(<a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>);</span></CodeLine>
<Link id="l01240" /><CodeLine lineNumber="1240"></CodeLine>
<Link id="l01241" /><CodeLine lineNumber="1241"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a6326ec771a59a9d13a860922f9e21b6c">SUPressureDiffs</a>.clear();</span></CodeLine>
<Link id="l01242" /><CodeLine lineNumber="1242"></CodeLine>
<Link id="l01243" /><CodeLine lineNumber="1243"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#ac46dc81cc2feaf48751834a3dd13e33a">ShouldTrackPressure</a> = <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;shouldTrackPressure();</span></CodeLine>
<Link id="l01244" /><CodeLine lineNumber="1244"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a> = <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;shouldTrackLaneMasks();</span></CodeLine>
<Link id="l01245" /><CodeLine lineNumber="1245"></CodeLine>
<Link id="l01246" /><CodeLine lineNumber="1246"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!<a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a> || <a href="/docs/api/classes/llvm/scheduledagmilive/#ac46dc81cc2feaf48751834a3dd13e33a">ShouldTrackPressure</a>) &amp;&amp;</span></CodeLine>
<Link id="l01247" /><CodeLine lineNumber="1247"><span class="doxyHighlight">         </span><span class="doxyHighlightStringLiteral">&quot;ShouldTrackLaneMasks requires ShouldTrackPressure&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01248" /><CodeLine lineNumber="1248"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01249" /><CodeLine lineNumber="1249"></CodeLine>
<Link id="l01250" /><CodeLine lineNumber="1250"><span class="doxyHighlightComment">// Setup the register pressure trackers for the top scheduled and bottom</span></CodeLine>
<Link id="l01251" /><CodeLine lineNumber="1251"><span class="doxyHighlightComment">// scheduled regions.</span></CodeLine>
<Link id="l01252" /><CodeLine lineNumber="1252" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a86daf2b1fb72fdd9a8785a4042ac1457"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a86daf2b1fb72fdd9a8785a4042ac1457">ScheduleDAGMILive::initRegPressure</a>() &#123;</span></CodeLine>
<Link id="l01253" /><CodeLine lineNumber="1253"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.clear();</span></CodeLine>
<Link id="l01254" /><CodeLine lineNumber="1254"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.setUniverse(<a href="/docs/api/classes/llvm/scheduledag/#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>.getNumVirtRegs());</span></CodeLine>
<Link id="l01255" /><CodeLine lineNumber="1255"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &amp;SU : <a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>)</span></CodeLine>
<Link id="l01256" /><CodeLine lineNumber="1256"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmilive/#a920652e64042f72e913f81f9660b4f2f">collectVRegUses</a>(SU);</span></CodeLine>
<Link id="l01257" /><CodeLine lineNumber="1257"></CodeLine>
<Link id="l01258" /><CodeLine lineNumber="1258"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.init(&amp;<a href="/docs/api/classes/llvm/scheduledag/#a5a3d3d075a208011a24a0918b58d7daa">MF</a>, <a href="/docs/api/classes/llvm/scheduledagmilive/#a9539744d7a0c1681540a64e935b671dd">RegClassInfo</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>,</span></CodeLine>
<Link id="l01259" /><CodeLine lineNumber="1259"><span class="doxyHighlight">                    <a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01260" /><CodeLine lineNumber="1260"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.init(&amp;<a href="/docs/api/classes/llvm/scheduledag/#a5a3d3d075a208011a24a0918b58d7daa">MF</a>, <a href="/docs/api/classes/llvm/scheduledagmilive/#a9539744d7a0c1681540a64e935b671dd">RegClassInfo</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>, <a href="/docs/api/classes/llvm/scheduledagmilive/#ae8d156802e79e1d8f76dadc3e5d265b5">LiveRegionEnd</a>,</span></CodeLine>
<Link id="l01261" /><CodeLine lineNumber="1261"><span class="doxyHighlight">                    <a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01262" /><CodeLine lineNumber="1262"></CodeLine>
<Link id="l01263" /><CodeLine lineNumber="1263"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Close the RPTracker to finalize live ins.</span></CodeLine>
<Link id="l01264" /><CodeLine lineNumber="1264"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.closeRegion();</span></CodeLine>
<Link id="l01265" /><CodeLine lineNumber="1265"></CodeLine>
<Link id="l01266" /><CodeLine lineNumber="1266"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.dump());</span></CodeLine>
<Link id="l01267" /><CodeLine lineNumber="1267"></CodeLine>
<Link id="l01268" /><CodeLine lineNumber="1268"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Initialize the live ins and live outs.</span></CodeLine>
<Link id="l01269" /><CodeLine lineNumber="1269"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.addLiveRegs(<a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.getPressure().LiveInRegs);</span></CodeLine>
<Link id="l01270" /><CodeLine lineNumber="1270"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.addLiveRegs(<a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.getPressure().LiveOutRegs);</span></CodeLine>
<Link id="l01271" /><CodeLine lineNumber="1271"></CodeLine>
<Link id="l01272" /><CodeLine lineNumber="1272"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Close one end of the tracker so we can call</span></CodeLine>
<Link id="l01273" /><CodeLine lineNumber="1273"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// getMaxUpward/DownwardPressureDelta before advancing across any</span></CodeLine>
<Link id="l01274" /><CodeLine lineNumber="1274"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// instructions. This converts currently live regs into live ins/outs.</span></CodeLine>
<Link id="l01275" /><CodeLine lineNumber="1275"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.closeTop();</span></CodeLine>
<Link id="l01276" /><CodeLine lineNumber="1276"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.closeBottom();</span></CodeLine>
<Link id="l01277" /><CodeLine lineNumber="1277"></CodeLine>
<Link id="l01278" /><CodeLine lineNumber="1278"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.initLiveThru(<a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>);</span></CodeLine>
<Link id="l01279" /><CodeLine lineNumber="1279"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getLiveThru().empty()) &#123;</span></CodeLine>
<Link id="l01280" /><CodeLine lineNumber="1280"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.initLiveThru(<a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getLiveThru());</span></CodeLine>
<Link id="l01281" /><CodeLine lineNumber="1281"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Live Thru: &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01282" /><CodeLine lineNumber="1282"><span class="doxyHighlight">               <a href="/docs/api/namespaces/llvm/#adb6fca77863850136760be488d6ea345">dumpRegSetPressure</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getLiveThru(), <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>));</span></CodeLine>
<Link id="l01283" /><CodeLine lineNumber="1283"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l01284" /><CodeLine lineNumber="1284"></CodeLine>
<Link id="l01285" /><CodeLine lineNumber="1285"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For each live out vreg reduce the pressure change associated with other</span></CodeLine>
<Link id="l01286" /><CodeLine lineNumber="1286"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// uses of the same vreg below the live-out reaching def.</span></CodeLine>
<Link id="l01287" /><CodeLine lineNumber="1287"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a91251ec06d557b21578095955b7b7fa7">updatePressureDiffs</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.getPressure().LiveOutRegs);</span></CodeLine>
<Link id="l01288" /><CodeLine lineNumber="1288"></CodeLine>
<Link id="l01289" /><CodeLine lineNumber="1289"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Account for liveness generated by the region boundary.</span></CodeLine>
<Link id="l01290" /><CodeLine lineNumber="1290"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#ae8d156802e79e1d8f76dadc3e5d265b5">LiveRegionEnd</a> != <a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>) &#123;</span></CodeLine>
<Link id="l01291" /><CodeLine lineNumber="1291"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;VRegMaskOrUnit, 8&gt;</a> LiveUses;</span></CodeLine>
<Link id="l01292" /><CodeLine lineNumber="1292"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.recede(&amp;LiveUses);</span></CodeLine>
<Link id="l01293" /><CodeLine lineNumber="1293"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmilive/#a91251ec06d557b21578095955b7b7fa7">updatePressureDiffs</a>(LiveUses);</span></CodeLine>
<Link id="l01294" /><CodeLine lineNumber="1294"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01295" /><CodeLine lineNumber="1295"></CodeLine>
<Link id="l01296" /><CodeLine lineNumber="1296"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Top Pressure:\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01297" /><CodeLine lineNumber="1297"><span class="doxyHighlight">             <a href="/docs/api/namespaces/llvm/#adb6fca77863850136760be488d6ea345">dumpRegSetPressure</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.getRegSetPressureAtPos(), <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>);</span></CodeLine>
<Link id="l01298" /><CodeLine lineNumber="1298"><span class="doxyHighlight">             <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Bottom Pressure:\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01299" /><CodeLine lineNumber="1299"><span class="doxyHighlight">             <a href="/docs/api/namespaces/llvm/#adb6fca77863850136760be488d6ea345">dumpRegSetPressure</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getRegSetPressureAtPos(), <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>););</span></CodeLine>
<Link id="l01300" /><CodeLine lineNumber="1300"></CodeLine>
<Link id="l01301" /><CodeLine lineNumber="1301"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getPos() == <a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a> ||</span></CodeLine>
<Link id="l01302" /><CodeLine lineNumber="1302"><span class="doxyHighlight">          (<a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>-&gt;isDebugInstr() &amp;&amp;</span></CodeLine>
<Link id="l01303" /><CodeLine lineNumber="1303"><span class="doxyHighlight">           <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getPos() == <a href="#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>))) &amp;&amp;</span></CodeLine>
<Link id="l01304" /><CodeLine lineNumber="1304"><span class="doxyHighlight">         </span><span class="doxyHighlightStringLiteral">&quot;Can&#39;t find the region bottom&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01305" /><CodeLine lineNumber="1305"></CodeLine>
<Link id="l01306" /><CodeLine lineNumber="1306"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Cache the list of excess pressure sets in this region. This will also track</span></CodeLine>
<Link id="l01307" /><CodeLine lineNumber="1307"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the max pressure in the scheduled code for these sets.</span></CodeLine>
<Link id="l01308" /><CodeLine lineNumber="1308"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>.clear();</span></CodeLine>
<Link id="l01309" /><CodeLine lineNumber="1309"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::vector&lt;unsigned&gt; &amp;<a href="/docs/api/structs/llvm/regionpressure">RegionPressure</a> =</span></CodeLine>
<Link id="l01310" /><CodeLine lineNumber="1310"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.getPressure().MaxSetPressure;</span></CodeLine>
<Link id="l01311" /><CodeLine lineNumber="1311"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 0, e = <a href="/docs/api/structs/llvm/regionpressure">RegionPressure</a>.size(); i &lt; e; ++i) &#123;</span></CodeLine>
<Link id="l01312" /><CodeLine lineNumber="1312"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Limit = <a href="/docs/api/classes/llvm/scheduledagmilive/#a9539744d7a0c1681540a64e935b671dd">RegClassInfo</a>-&gt;getRegPressureSetLimit(i);</span></CodeLine>
<Link id="l01313" /><CodeLine lineNumber="1313"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/llvm/regionpressure">RegionPressure</a>&#91;i&#93; &gt; Limit) &#123;</span></CodeLine>
<Link id="l01314" /><CodeLine lineNumber="1314"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>-&gt;getRegPressureSetName(i) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; Limit &quot;</span><span class="doxyHighlight"> &lt;&lt; Limit</span></CodeLine>
<Link id="l01315" /><CodeLine lineNumber="1315"><span class="doxyHighlight">                        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; Actual &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/structs/llvm/regionpressure">RegionPressure</a>&#91;i&#93; &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01316" /><CodeLine lineNumber="1316"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>.push&#95;back(<a href="/docs/api/classes/llvm/pressurechange">PressureChange</a>(i));</span></CodeLine>
<Link id="l01317" /><CodeLine lineNumber="1317"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01318" /><CodeLine lineNumber="1318"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01319" /><CodeLine lineNumber="1319"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Excess PSets: &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01320" /><CodeLine lineNumber="1320"><span class="doxyHighlight">             </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/pressurechange">PressureChange</a> &amp;RCPS</span></CodeLine>
<Link id="l01321" /><CodeLine lineNumber="1321"><span class="doxyHighlight">                  : <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</span></CodeLine>
<Link id="l01322" /><CodeLine lineNumber="1322"><span class="doxyHighlight">             &lt;&lt; <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>-&gt;getRegPressureSetName(RCPS.getPSet()) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01323" /><CodeLine lineNumber="1323"><span class="doxyHighlight">             <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01324" /><CodeLine lineNumber="1324"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01325" /><CodeLine lineNumber="1325"></CodeLine>
<Link id="l01326" /><CodeLine lineNumber="1326" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a556d08e5789e4c99bb9c24aa4e226f9b"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a556d08e5789e4c99bb9c24aa4e226f9b">ScheduleDAGMILive::</a></span></CodeLine>
<Link id="l01327" /><CodeLine lineNumber="1327"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/scheduledagmilive/#a556d08e5789e4c99bb9c24aa4e226f9b">updateScheduledPressure</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU,</span></CodeLine>
<Link id="l01328" /><CodeLine lineNumber="1328"><span class="doxyHighlight">                        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::vector&lt;unsigned&gt; &amp;NewMaxPressure) &#123;</span></CodeLine>
<Link id="l01329" /><CodeLine lineNumber="1329"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/pressurediff">PressureDiff</a> &amp;PDiff = <a href="/docs/api/classes/llvm/scheduledagmilive/#a24c23a8dc39475b1e913e41f1249c9f7">getPressureDiff</a>(SU);</span></CodeLine>
<Link id="l01330" /><CodeLine lineNumber="1330"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> CritIdx = 0, CritEnd = <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>.size();</span></CodeLine>
<Link id="l01331" /><CodeLine lineNumber="1331"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/pressurechange">PressureChange</a> &amp;PC : PDiff) &#123;</span></CodeLine>
<Link id="l01332" /><CodeLine lineNumber="1332"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!PC.isValid())</span></CodeLine>
<Link id="l01333" /><CodeLine lineNumber="1333"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01334" /><CodeLine lineNumber="1334"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a> = PC.getPSet();</span></CodeLine>
<Link id="l01335" /><CodeLine lineNumber="1335"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (CritIdx != CritEnd &amp;&amp; <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>&#91;CritIdx&#93;.getPSet() &lt; <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>)</span></CodeLine>
<Link id="l01336" /><CodeLine lineNumber="1336"><span class="doxyHighlight">      ++CritIdx;</span></CodeLine>
<Link id="l01337" /><CodeLine lineNumber="1337"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CritIdx != CritEnd &amp;&amp; <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>&#91;CritIdx&#93;.getPSet() == <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</span></CodeLine>
<Link id="l01338" /><CodeLine lineNumber="1338"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight">)NewMaxPressure&#91;<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>&#93; &gt; <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>&#91;CritIdx&#93;.getUnitInc()</span></CodeLine>
<Link id="l01339" /><CodeLine lineNumber="1339"><span class="doxyHighlight">          &amp;&amp; NewMaxPressure&#91;<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>&#93; &lt;= (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight">)std::numeric&#95;limits&lt;int16&#95;t&gt;::max())</span></CodeLine>
<Link id="l01340" /><CodeLine lineNumber="1340"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>&#91;CritIdx&#93;.setUnitInc(NewMaxPressure&#91;<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>&#93;);</span></CodeLine>
<Link id="l01341" /><CodeLine lineNumber="1341"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01342" /><CodeLine lineNumber="1342"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Limit = <a href="/docs/api/classes/llvm/scheduledagmilive/#a9539744d7a0c1681540a64e935b671dd">RegClassInfo</a>-&gt;getRegPressureSetLimit(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</span></CodeLine>
<Link id="l01343" /><CodeLine lineNumber="1343"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NewMaxPressure&#91;<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>&#93; &gt;= Limit - 2) &#123;</span></CodeLine>
<Link id="l01344" /><CodeLine lineNumber="1344"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>-&gt;getRegPressureSetName(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;: &quot;</span></CodeLine>
<Link id="l01345" /><CodeLine lineNumber="1345"><span class="doxyHighlight">                        &lt;&lt; NewMaxPressure&#91;<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>&#93;</span></CodeLine>
<Link id="l01346" /><CodeLine lineNumber="1346"><span class="doxyHighlight">                        &lt;&lt; ((NewMaxPressure&#91;<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>&#93; &gt; Limit) ? </span><span class="doxyHighlightStringLiteral">&quot; &gt; &quot;</span><span class="doxyHighlight"> : </span><span class="doxyHighlightStringLiteral">&quot; &lt;= &quot;</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l01347" /><CodeLine lineNumber="1347"><span class="doxyHighlight">                        &lt;&lt; Limit &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;(+ &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getLiveThru()&#91;<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>&#93;</span></CodeLine>
<Link id="l01348" /><CodeLine lineNumber="1348"><span class="doxyHighlight">                        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; livethru)\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01349" /><CodeLine lineNumber="1349"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01350" /><CodeLine lineNumber="1350"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01351" /><CodeLine lineNumber="1351"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01352" /><CodeLine lineNumber="1352"></CodeLine>
<Link id="l01353" /><CodeLine lineNumber="1353"><span class="doxyHighlightComment">/// Update the PressureDiff array for liveness after scheduling this</span></CodeLine>
<Link id="l01354" /><CodeLine lineNumber="1354"><span class="doxyHighlightComment">/// instruction.</span></CodeLine>
<Link id="l01355" /><CodeLine lineNumber="1355" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a91251ec06d557b21578095955b7b7fa7"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a91251ec06d557b21578095955b7b7fa7">ScheduleDAGMILive::updatePressureDiffs</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;VRegMaskOrUnit&gt;</a> LiveUses) &#123;</span></CodeLine>
<Link id="l01356" /><CodeLine lineNumber="1356"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/vregmaskorunit">VRegMaskOrUnit</a> &amp;<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> : LiveUses) &#123;</span></CodeLine>
<Link id="l01357" /><CodeLine lineNumber="1357"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> Reg = <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.RegUnit;</span></CodeLine>
<Link id="l01358" /><CodeLine lineNumber="1358"><span class="doxyHighlightComment">    /// FIXME: Currently assuming single-use physregs.</span></CodeLine>
<Link id="l01359" /><CodeLine lineNumber="1359"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Reg.isVirtual())</span></CodeLine>
<Link id="l01360" /><CodeLine lineNumber="1360"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01361" /><CodeLine lineNumber="1361"></CodeLine>
<Link id="l01362" /><CodeLine lineNumber="1362"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>) &#123;</span></CodeLine>
<Link id="l01363" /><CodeLine lineNumber="1363"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If the register has just become live then other uses won&#39;t change</span></CodeLine>
<Link id="l01364" /><CodeLine lineNumber="1364"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// this fact anymore =&gt; decrement pressure.</span></CodeLine>
<Link id="l01365" /><CodeLine lineNumber="1365"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If the register has just become dead then other uses make it come</span></CodeLine>
<Link id="l01366" /><CodeLine lineNumber="1366"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// back to life =&gt; increment pressure.</span></CodeLine>
<Link id="l01367" /><CodeLine lineNumber="1367"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Decrement = <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.LaneMask.any();</span></CodeLine>
<Link id="l01368" /><CodeLine lineNumber="1368"></CodeLine>
<Link id="l01369" /><CodeLine lineNumber="1369"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/vreg2sunit">VReg2SUnit</a> &amp;V2SU</span></CodeLine>
<Link id="l01370" /><CodeLine lineNumber="1370"><span class="doxyHighlight">           : <a href="/docs/api/namespaces/llvm/#a341215803e83773a3e97860dc291f121">make&#95;range</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.find(Reg), <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.end())) &#123;</span></CodeLine>
<Link id="l01371" /><CodeLine lineNumber="1371"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/sunit">SUnit</a> &amp;SU = &#42;V2SU.SU;</span></CodeLine>
<Link id="l01372" /><CodeLine lineNumber="1372"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU.<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a> || &amp;SU == &amp;<a href="/docs/api/classes/llvm/scheduledag/#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>)</span></CodeLine>
<Link id="l01373" /><CodeLine lineNumber="1373"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01374" /><CodeLine lineNumber="1374"></CodeLine>
<Link id="l01375" /><CodeLine lineNumber="1375"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/pressurediff">PressureDiff</a> &amp;PDiff = <a href="/docs/api/classes/llvm/scheduledagmilive/#a24c23a8dc39475b1e913e41f1249c9f7">getPressureDiff</a>(&amp;SU);</span></CodeLine>
<Link id="l01376" /><CodeLine lineNumber="1376"><span class="doxyHighlight">        PDiff.<a href="/docs/api/classes/llvm/pressurediff/#aae6716327eea2325dc426c98cbcc74b4">addPressureChange</a>(Reg, Decrement, &amp;<a href="/docs/api/classes/llvm/scheduledag/#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>);</span></CodeLine>
<Link id="l01377" /><CodeLine lineNumber="1377"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  UpdateRegP: SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; SU.<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) &quot;</span></CodeLine>
<Link id="l01378" /><CodeLine lineNumber="1378"><span class="doxyHighlight">                          &lt;&lt; <a href="/docs/api/namespaces/llvm/#af085ea923a328b9fa6a1975f1a4ff987">printReg</a>(Reg, <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>) &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;:&#39;</span></CodeLine>
<Link id="l01379" /><CodeLine lineNumber="1379"><span class="doxyHighlight">                          &lt;&lt; <a href="/docs/api/namespaces/llvm/#a3e30e18d6f7ebd943eaf8ebc3a2b2930">PrintLaneMask</a>(<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.LaneMask) &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39; &#39;</span><span class="doxyHighlight"> &lt;&lt; &#42;SU.<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</span></CodeLine>
<Link id="l01380" /><CodeLine lineNumber="1380"><span class="doxyHighlight">                   <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;              to &quot;</span><span class="doxyHighlight">; PDiff.<a href="/docs/api/classes/llvm/pressurediff/#a86962b61c920a437e06eda5dafd929d5">dump</a>(&#42;<a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>););</span></CodeLine>
<Link id="l01381" /><CodeLine lineNumber="1381"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01382" /><CodeLine lineNumber="1382"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01383" /><CodeLine lineNumber="1383"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.LaneMask.any());</span></CodeLine>
<Link id="l01384" /><CodeLine lineNumber="1384"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  LiveReg: &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/namespaces/llvm/#a788c5905de970028eb0efa2266bd10bf">printVRegOrUnit</a>(Reg, <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01385" /><CodeLine lineNumber="1385"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// This may be called before CurrentBottom has been initialized. However,</span></CodeLine>
<Link id="l01386" /><CodeLine lineNumber="1386"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// BotRPTracker must have a valid position. We want the value live into the</span></CodeLine>
<Link id="l01387" /><CodeLine lineNumber="1387"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// instruction or live out of the block, so ask for the previous</span></CodeLine>
<Link id="l01388" /><CodeLine lineNumber="1388"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// instruction&#39;s live-out.</span></CodeLine>
<Link id="l01389" /><CodeLine lineNumber="1389"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/liveinterval">LiveInterval</a> &amp;LI = <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getInterval(Reg);</span></CodeLine>
<Link id="l01390" /><CodeLine lineNumber="1390"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/vninfo">VNInfo</a> &#42;VNI;</span></CodeLine>
<Link id="l01391" /><CodeLine lineNumber="1391"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> =</span></CodeLine>
<Link id="l01392" /><CodeLine lineNumber="1392"><span class="doxyHighlight">        <a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getPos(), <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;end());</span></CodeLine>
<Link id="l01393" /><CodeLine lineNumber="1393"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> == <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;end())</span></CodeLine>
<Link id="l01394" /><CodeLine lineNumber="1394"><span class="doxyHighlight">        VNI = LI.<a href="/docs/api/classes/llvm/liverange/#a7e1ec6260b229b2f5913405b758bc146">getVNInfoBefore</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getMBBEndIdx(<a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>));</span></CodeLine>
<Link id="l01395" /><CodeLine lineNumber="1395"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01396" /><CodeLine lineNumber="1396"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/livequeryresult">LiveQueryResult</a> LRQ = LI.<a href="/docs/api/classes/llvm/liverange/#a6eb0e49d283729a5f8b99d4efa1be7c1">Query</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getInstructionIndex(&#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l01397" /><CodeLine lineNumber="1397"><span class="doxyHighlight">        VNI = LRQ.<a href="/docs/api/classes/llvm/livequeryresult/#a527e4a21e13a8455c75eb0d811701066">valueIn</a>();</span></CodeLine>
<Link id="l01398" /><CodeLine lineNumber="1398"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01399" /><CodeLine lineNumber="1399"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// RegisterPressureTracker guarantees that readsReg is true for LiveUses.</span></CodeLine>
<Link id="l01400" /><CodeLine lineNumber="1400"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VNI &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;No live value at use.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01401" /><CodeLine lineNumber="1401"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/vreg2sunit">VReg2SUnit</a> &amp;V2SU</span></CodeLine>
<Link id="l01402" /><CodeLine lineNumber="1402"><span class="doxyHighlight">           : <a href="/docs/api/namespaces/llvm/#a341215803e83773a3e97860dc291f121">make&#95;range</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.find(Reg), <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.end())) &#123;</span></CodeLine>
<Link id="l01403" /><CodeLine lineNumber="1403"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = V2SU.SU;</span></CodeLine>
<Link id="l01404" /><CodeLine lineNumber="1404"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// If this use comes before the reaching def, it cannot be a last use,</span></CodeLine>
<Link id="l01405" /><CodeLine lineNumber="1405"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// so decrease its pressure change.</span></CodeLine>
<Link id="l01406" /><CodeLine lineNumber="1406"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a> &amp;&amp; SU != &amp;<a href="/docs/api/classes/llvm/scheduledag/#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>) &#123;</span></CodeLine>
<Link id="l01407" /><CodeLine lineNumber="1407"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/livequeryresult">LiveQueryResult</a> LRQ =</span></CodeLine>
<Link id="l01408" /><CodeLine lineNumber="1408"><span class="doxyHighlight">              LI.<a href="/docs/api/classes/llvm/liverange/#a6eb0e49d283729a5f8b99d4efa1be7c1">Query</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getInstructionIndex(&#42;SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>()));</span></CodeLine>
<Link id="l01409" /><CodeLine lineNumber="1409"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LRQ.<a href="/docs/api/classes/llvm/livequeryresult/#a527e4a21e13a8455c75eb0d811701066">valueIn</a>() == VNI) &#123;</span></CodeLine>
<Link id="l01410" /><CodeLine lineNumber="1410"><span class="doxyHighlight">            <a href="/docs/api/classes/llvm/pressurediff">PressureDiff</a> &amp;PDiff = <a href="/docs/api/classes/llvm/scheduledagmilive/#a24c23a8dc39475b1e913e41f1249c9f7">getPressureDiff</a>(SU);</span></CodeLine>
<Link id="l01411" /><CodeLine lineNumber="1411"><span class="doxyHighlight">            PDiff.<a href="/docs/api/classes/llvm/pressurediff/#aae6716327eea2325dc426c98cbcc74b4">addPressureChange</a>(Reg, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, &amp;<a href="/docs/api/classes/llvm/scheduledag/#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>);</span></CodeLine>
<Link id="l01412" /><CodeLine lineNumber="1412"><span class="doxyHighlight">            <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  UpdateRegP: SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) &quot;</span></CodeLine>
<Link id="l01413" /><CodeLine lineNumber="1413"><span class="doxyHighlight">                              &lt;&lt; &#42;SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</span></CodeLine>
<Link id="l01414" /><CodeLine lineNumber="1414"><span class="doxyHighlight">                       <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;              to &quot;</span><span class="doxyHighlight">; PDiff.<a href="/docs/api/classes/llvm/pressurediff/#a86962b61c920a437e06eda5dafd929d5">dump</a>(&#42;<a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>););</span></CodeLine>
<Link id="l01415" /><CodeLine lineNumber="1415"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l01416" /><CodeLine lineNumber="1416"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l01417" /><CodeLine lineNumber="1417"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01418" /><CodeLine lineNumber="1418"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01419" /><CodeLine lineNumber="1419"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01420" /><CodeLine lineNumber="1420"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01421" /><CodeLine lineNumber="1421"></CodeLine>
<Link id="l01422" /><CodeLine lineNumber="1422" lineLink="/docs/api/classes/llvm/scheduledagmilive/#add5e3e74f2db8e669b830ae35edc8c02"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive/#add5e3e74f2db8e669b830ae35edc8c02">ScheduleDAGMILive::dump</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01423" /><CodeLine lineNumber="1423"><span class="doxyHighlightPreprocessor">#if !defined(NDEBUG) || defined(LLVM&#95;ENABLE&#95;DUMP)</span></CodeLine>
<Link id="l01424" /><CodeLine lineNumber="1424"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledag/#a521bf68518a92483130a58680716d153">EntrySU</a>.getInstr() != </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l01425" /><CodeLine lineNumber="1425"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledag/#a917f4d40ed0bbdaf4ab50e5df4de067b">dumpNodeAll</a>(<a href="/docs/api/classes/llvm/scheduledag/#a521bf68518a92483130a58680716d153">EntrySU</a>);</span></CodeLine>
<Link id="l01426" /><CodeLine lineNumber="1426"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &amp;SU : <a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>) &#123;</span></CodeLine>
<Link id="l01427" /><CodeLine lineNumber="1427"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledag/#a917f4d40ed0bbdaf4ab50e5df4de067b">dumpNodeAll</a>(SU);</span></CodeLine>
<Link id="l01428" /><CodeLine lineNumber="1428"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#ac46dc81cc2feaf48751834a3dd13e33a">ShouldTrackPressure</a>) &#123;</span></CodeLine>
<Link id="l01429" /><CodeLine lineNumber="1429"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Pressure Diff      : &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01430" /><CodeLine lineNumber="1430"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmilive/#a24c23a8dc39475b1e913e41f1249c9f7">getPressureDiff</a>(&amp;SU).<a href="/docs/api/classes/llvm/pressurediff/#a86962b61c920a437e06eda5dafd929d5">dump</a>(&#42;<a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>);</span></CodeLine>
<Link id="l01431" /><CodeLine lineNumber="1431"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01432" /><CodeLine lineNumber="1432"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Single Issue       : &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01433" /><CodeLine lineNumber="1433"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.mustBeginGroup(SU.getInstr()) &amp;&amp;</span></CodeLine>
<Link id="l01434" /><CodeLine lineNumber="1434"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.mustEndGroup(SU.getInstr()))</span></CodeLine>
<Link id="l01435" /><CodeLine lineNumber="1435"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;true;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01436" /><CodeLine lineNumber="1436"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01437" /><CodeLine lineNumber="1437"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;false;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01438" /><CodeLine lineNumber="1438"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01439" /><CodeLine lineNumber="1439"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01440" /><CodeLine lineNumber="1440"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledag/#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>.getInstr() != </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l01441" /><CodeLine lineNumber="1441"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledag/#a917f4d40ed0bbdaf4ab50e5df4de067b">dumpNodeAll</a>(<a href="/docs/api/classes/llvm/scheduledag/#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>);</span></CodeLine>
<Link id="l01442" /><CodeLine lineNumber="1442"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l01443" /><CodeLine lineNumber="1443"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01444" /><CodeLine lineNumber="1444"></CodeLine>
<Link id="l01445" /><CodeLine lineNumber="1445"><span class="doxyHighlightComment">/// schedule - Called back from MachineScheduler::runOnMachineFunction</span></CodeLine>
<Link id="l01446" /><CodeLine lineNumber="1446"><span class="doxyHighlightComment">/// after setting up the current scheduling region. &#91;RegionBegin, RegionEnd)</span></CodeLine>
<Link id="l01447" /><CodeLine lineNumber="1447"><span class="doxyHighlightComment">/// only includes instructions that have DAG nodes, not scheduling boundaries.</span></CodeLine>
<Link id="l01448" /><CodeLine lineNumber="1448"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l01449" /><CodeLine lineNumber="1449"><span class="doxyHighlightComment">/// This is a skeletal driver, with all the functionality pushed into helpers,</span></CodeLine>
<Link id="l01450" /><CodeLine lineNumber="1450"><span class="doxyHighlightComment">/// so that it can be easily extended by experimental schedulers. Generally,</span></CodeLine>
<Link id="l01451" /><CodeLine lineNumber="1451"><span class="doxyHighlightComment">/// implementing MachineSchedStrategy should be sufficient to implement a new</span></CodeLine>
<Link id="l01452" /><CodeLine lineNumber="1452"><span class="doxyHighlightComment">/// scheduling algorithm. However, if a scheduler further subclasses</span></CodeLine>
<Link id="l01453" /><CodeLine lineNumber="1453"><span class="doxyHighlightComment">/// ScheduleDAGMILive then it will want to override this virtual method in order</span></CodeLine>
<Link id="l01454" /><CodeLine lineNumber="1454"><span class="doxyHighlightComment">/// to update any specialized state.</span></CodeLine>
<Link id="l01455" /><CodeLine lineNumber="1455" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a1583ce23a69e8a1b4af8065e2019c75f"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a1583ce23a69e8a1b4af8065e2019c75f">ScheduleDAGMILive::schedule</a>() &#123;</span></CodeLine>
<Link id="l01456" /><CodeLine lineNumber="1456"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;ScheduleDAGMILive::schedule starting\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01457" /><CodeLine lineNumber="1457"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;dumpPolicy());</span></CodeLine>
<Link id="l01458" /><CodeLine lineNumber="1458"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a4be5ffcd4f76d433cc753be146a872b7">buildDAGWithRegPressure</a>();</span></CodeLine>
<Link id="l01459" /><CodeLine lineNumber="1459"></CodeLine>
<Link id="l01460" /><CodeLine lineNumber="1460"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a2aa2eb6fd6a44ff6b9cbad960d446c7a">postProcessDAG</a>();</span></CodeLine>
<Link id="l01461" /><CodeLine lineNumber="1461"></CodeLine>
<Link id="l01462" /><CodeLine lineNumber="1462"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;SUnit&#42;, 8&gt;</a> TopRoots, BotRoots;</span></CodeLine>
<Link id="l01463" /><CodeLine lineNumber="1463"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a6d0a0b4903e8d4d12c98b0f43fe83878">findRootsAndBiasEdges</a>(TopRoots, BotRoots);</span></CodeLine>
<Link id="l01464" /><CodeLine lineNumber="1464"></CodeLine>
<Link id="l01465" /><CodeLine lineNumber="1465"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Initialize the strategy before modifying the DAG.</span></CodeLine>
<Link id="l01466" /><CodeLine lineNumber="1466"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This may initialize a DFSResult to be used for queue priority.</span></CodeLine>
<Link id="l01467" /><CodeLine lineNumber="1467"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;initialize(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01468" /><CodeLine lineNumber="1468"></CodeLine>
<Link id="l01469" /><CodeLine lineNumber="1469"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#add5e3e74f2db8e669b830ae35edc8c02">dump</a>());</span></CodeLine>
<Link id="l01470" /><CodeLine lineNumber="1470"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a0e9fde7ed08fd233750d0a947147dfa1">PrintDAGs</a>) <a href="/docs/api/classes/llvm/scheduledagmilive/#add5e3e74f2db8e669b830ae35edc8c02">dump</a>();</span></CodeLine>
<Link id="l01471" /><CodeLine lineNumber="1471"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a5ec9cfe35d76125af923975fa0c1730a">ViewMISchedDAGs</a>) <a href="/docs/api/classes/llvm/scheduledagmi/#a8b7babb023cad0842f5a177e7abe3651">viewGraph</a>();</span></CodeLine>
<Link id="l01472" /><CodeLine lineNumber="1472"></CodeLine>
<Link id="l01473" /><CodeLine lineNumber="1473"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Initialize ready queues now that the DAG and priority data are finalized.</span></CodeLine>
<Link id="l01474" /><CodeLine lineNumber="1474"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a3668b7c35103540be55d96cd68948f43">initQueues</a>(TopRoots, BotRoots);</span></CodeLine>
<Link id="l01475" /><CodeLine lineNumber="1475"></CodeLine>
<Link id="l01476" /><CodeLine lineNumber="1476"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsTopNode = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01477" /><CodeLine lineNumber="1477"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">) &#123;</span></CodeLine>
<Link id="l01478" /><CodeLine lineNumber="1478"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#42;&#42; ScheduleDAGMILive::schedule picking next node\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01479" /><CodeLine lineNumber="1479"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;pickNode(IsTopNode);</span></CodeLine>
<Link id="l01480" /><CodeLine lineNumber="1480"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SU) </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01481" /><CodeLine lineNumber="1481"></CodeLine>
<Link id="l01482" /><CodeLine lineNumber="1482"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Node already scheduled&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01483" /><CodeLine lineNumber="1483"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/scheduledagmi/#a569fc4139bec0217794e9f830d6ba852">checkSchedLimit</a>())</span></CodeLine>
<Link id="l01484" /><CodeLine lineNumber="1484"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01485" /><CodeLine lineNumber="1485"></CodeLine>
<Link id="l01486" /><CodeLine lineNumber="1486"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmilive/#a04a2c04f918397dbac27a79e58807136">scheduleMI</a>(SU, IsTopNode);</span></CodeLine>
<Link id="l01487" /><CodeLine lineNumber="1487"></CodeLine>
<Link id="l01488" /><CodeLine lineNumber="1488"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>) &#123;</span></CodeLine>
<Link id="l01489" /><CodeLine lineNumber="1489"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SubtreeID = <a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>-&gt;getSubtreeID(SU);</span></CodeLine>
<Link id="l01490" /><CodeLine lineNumber="1490"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/scheduledagmilive/#aeaa92f00c361a14dd3da3992078894f1">ScheduledTrees</a>.test(SubtreeID)) &#123;</span></CodeLine>
<Link id="l01491" /><CodeLine lineNumber="1491"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/scheduledagmilive/#aeaa92f00c361a14dd3da3992078894f1">ScheduledTrees</a>.set(SubtreeID);</span></CodeLine>
<Link id="l01492" /><CodeLine lineNumber="1492"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>-&gt;scheduleTree(SubtreeID);</span></CodeLine>
<Link id="l01493" /><CodeLine lineNumber="1493"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;scheduleTree(SubtreeID);</span></CodeLine>
<Link id="l01494" /><CodeLine lineNumber="1494"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01495" /><CodeLine lineNumber="1495"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01496" /><CodeLine lineNumber="1496"></CodeLine>
<Link id="l01497" /><CodeLine lineNumber="1497"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Notify the scheduling strategy after updating the DAG.</span></CodeLine>
<Link id="l01498" /><CodeLine lineNumber="1498"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;schedNode(SU, IsTopNode);</span></CodeLine>
<Link id="l01499" /><CodeLine lineNumber="1499"></CodeLine>
<Link id="l01500" /><CodeLine lineNumber="1500"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmi/#abfdd9a95217810c69b2557060a130318">updateQueues</a>(SU, IsTopNode);</span></CodeLine>
<Link id="l01501" /><CodeLine lineNumber="1501"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01502" /><CodeLine lineNumber="1502"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> == <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Nonempty unscheduled zone.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01503" /><CodeLine lineNumber="1503"></CodeLine>
<Link id="l01504" /><CodeLine lineNumber="1504"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#ac2dafe98c88d43b256622413886e2152">placeDebugValues</a>();</span></CodeLine>
<Link id="l01505" /><CodeLine lineNumber="1505"></CodeLine>
<Link id="l01506" /><CodeLine lineNumber="1506"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(&#123;</span></CodeLine>
<Link id="l01507" /><CodeLine lineNumber="1507"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#42;&#42;&#42; Final schedule for &quot;</span></CodeLine>
<Link id="l01508" /><CodeLine lineNumber="1508"><span class="doxyHighlight">           &lt;&lt; <a href="/docs/api/namespaces/llvm/#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(&#42;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>()-&gt;<a href="/docs/api/files/lib/lib/analysis/basicaliasanalysis-cpp/#a1b8850f1ed44c12bc3501175a71c251c">getParent</a>()) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &#42;&#42;&#42;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01509" /><CodeLine lineNumber="1509"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmi/#a01b02e76c87211e7084ec17f18a2d16f">dumpSchedule</a>();</span></CodeLine>
<Link id="l01510" /><CodeLine lineNumber="1510"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01511" /><CodeLine lineNumber="1511"><span class="doxyHighlight">  &#125;);</span></CodeLine>
<Link id="l01512" /><CodeLine lineNumber="1512"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01513" /><CodeLine lineNumber="1513"></CodeLine>
<Link id="l01514" /><CodeLine lineNumber="1514"><span class="doxyHighlightComment">/// Build the DAG and setup three register pressure trackers.</span></CodeLine>
<Link id="l01515" /><CodeLine lineNumber="1515" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a4be5ffcd4f76d433cc753be146a872b7"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a4be5ffcd4f76d433cc753be146a872b7">ScheduleDAGMILive::buildDAGWithRegPressure</a>() &#123;</span></CodeLine>
<Link id="l01516" /><CodeLine lineNumber="1516"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/scheduledagmilive/#ac46dc81cc2feaf48751834a3dd13e33a">ShouldTrackPressure</a>) &#123;</span></CodeLine>
<Link id="l01517" /><CodeLine lineNumber="1517"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.reset();</span></CodeLine>
<Link id="l01518" /><CodeLine lineNumber="1518"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>.clear();</span></CodeLine>
<Link id="l01519" /><CodeLine lineNumber="1519"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab580983de4f7b69ebcca992be9cb3223">buildSchedGraph</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a79b8428bb41e16b71ae2bb0139bce5eb">AA</a>);</span></CodeLine>
<Link id="l01520" /><CodeLine lineNumber="1520"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01521" /><CodeLine lineNumber="1521"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01522" /><CodeLine lineNumber="1522"></CodeLine>
<Link id="l01523" /><CodeLine lineNumber="1523"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Initialize the register pressure tracker used by buildSchedGraph.</span></CodeLine>
<Link id="l01524" /><CodeLine lineNumber="1524"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.init(&amp;<a href="/docs/api/classes/llvm/scheduledag/#a5a3d3d075a208011a24a0918b58d7daa">MF</a>, <a href="/docs/api/classes/llvm/scheduledagmilive/#a9539744d7a0c1681540a64e935b671dd">RegClassInfo</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>, <a href="/docs/api/classes/llvm/scheduledagmilive/#ae8d156802e79e1d8f76dadc3e5d265b5">LiveRegionEnd</a>,</span></CodeLine>
<Link id="l01525" /><CodeLine lineNumber="1525"><span class="doxyHighlight">                 <a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>, </span><span class="doxyHighlightComment">/&#42;TrackUntiedDefs=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01526" /><CodeLine lineNumber="1526"></CodeLine>
<Link id="l01527" /><CodeLine lineNumber="1527"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Account for liveness generate by the region boundary.</span></CodeLine>
<Link id="l01528" /><CodeLine lineNumber="1528"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#ae8d156802e79e1d8f76dadc3e5d265b5">LiveRegionEnd</a> != <a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>)</span></CodeLine>
<Link id="l01529" /><CodeLine lineNumber="1529"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.recede();</span></CodeLine>
<Link id="l01530" /><CodeLine lineNumber="1530"></CodeLine>
<Link id="l01531" /><CodeLine lineNumber="1531"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Build the DAG, and compute current register pressure.</span></CodeLine>
<Link id="l01532" /><CodeLine lineNumber="1532"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab580983de4f7b69ebcca992be9cb3223">buildSchedGraph</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a79b8428bb41e16b71ae2bb0139bce5eb">AA</a>, &amp;<a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>, &amp;<a href="/docs/api/classes/llvm/scheduledagmilive/#a6326ec771a59a9d13a860922f9e21b6c">SUPressureDiffs</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>, <a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>);</span></CodeLine>
<Link id="l01533" /><CodeLine lineNumber="1533"></CodeLine>
<Link id="l01534" /><CodeLine lineNumber="1534"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Initialize top/bottom trackers after computing region pressure.</span></CodeLine>
<Link id="l01535" /><CodeLine lineNumber="1535"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a86daf2b1fb72fdd9a8785a4042ac1457">initRegPressure</a>();</span></CodeLine>
<Link id="l01536" /><CodeLine lineNumber="1536"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01537" /><CodeLine lineNumber="1537"></CodeLine>
<Link id="l01538" /><CodeLine lineNumber="1538" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a21c7721fcb12ebb55872b86d33e61e27"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a21c7721fcb12ebb55872b86d33e61e27">ScheduleDAGMILive::computeDFSResult</a>() &#123;</span></CodeLine>
<Link id="l01539" /><CodeLine lineNumber="1539"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>)</span></CodeLine>
<Link id="l01540" /><CodeLine lineNumber="1540"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a> = </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheddfsresult">SchedDFSResult</a>(</span><span class="doxyHighlightComment">/&#42;BottomU&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, <a href="#a20646b5e577c00ae6fc2912a4081f9d5">MinSubtreeSize</a>);</span></CodeLine>
<Link id="l01541" /><CodeLine lineNumber="1541"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>-&gt;clear();</span></CodeLine>
<Link id="l01542" /><CodeLine lineNumber="1542"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#aeaa92f00c361a14dd3da3992078894f1">ScheduledTrees</a>.clear();</span></CodeLine>
<Link id="l01543" /><CodeLine lineNumber="1543"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>-&gt;resize(<a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>.size());</span></CodeLine>
<Link id="l01544" /><CodeLine lineNumber="1544"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>-&gt;compute(<a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>);</span></CodeLine>
<Link id="l01545" /><CodeLine lineNumber="1545"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive/#aeaa92f00c361a14dd3da3992078894f1">ScheduledTrees</a>.resize(<a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>-&gt;getNumSubtrees());</span></CodeLine>
<Link id="l01546" /><CodeLine lineNumber="1546"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01547" /><CodeLine lineNumber="1547"></CodeLine>
<Link id="l01548" /><CodeLine lineNumber="1548"><span class="doxyHighlightComment">/// Compute the max cyclic critical path through the DAG. The scheduling DAG</span></CodeLine>
<Link id="l01549" /><CodeLine lineNumber="1549"><span class="doxyHighlightComment">/// only provides the critical path for single block loops. To handle loops that</span></CodeLine>
<Link id="l01550" /><CodeLine lineNumber="1550"><span class="doxyHighlightComment">/// span blocks, we could use the vreg path latencies provided by</span></CodeLine>
<Link id="l01551" /><CodeLine lineNumber="1551"><span class="doxyHighlightComment">/// MachineTraceMetrics instead. However, MachineTraceMetrics is not currently</span></CodeLine>
<Link id="l01552" /><CodeLine lineNumber="1552"><span class="doxyHighlightComment">/// available for use in the scheduler.</span></CodeLine>
<Link id="l01553" /><CodeLine lineNumber="1553"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l01554" /><CodeLine lineNumber="1554"><span class="doxyHighlightComment">/// The cyclic path estimation identifies a def-use pair that crosses the back</span></CodeLine>
<Link id="l01555" /><CodeLine lineNumber="1555"><span class="doxyHighlightComment">/// edge and considers the depth and height of the nodes. For example, consider</span></CodeLine>
<Link id="l01556" /><CodeLine lineNumber="1556"><span class="doxyHighlightComment">/// the following instruction sequence where each instruction has unit latency</span></CodeLine>
<Link id="l01557" /><CodeLine lineNumber="1557"><span class="doxyHighlightComment">/// and defines an eponymous virtual register:</span></CodeLine>
<Link id="l01558" /><CodeLine lineNumber="1558"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l01559" /><CodeLine lineNumber="1559"><span class="doxyHighlightComment">/// a-&gt;b(a,c)-&gt;c(b)-&gt;d(c)-&gt;exit</span></CodeLine>
<Link id="l01560" /><CodeLine lineNumber="1560"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l01561" /><CodeLine lineNumber="1561"><span class="doxyHighlightComment">/// The cyclic critical path is a two cycles: b-&gt;c-&gt;b</span></CodeLine>
<Link id="l01562" /><CodeLine lineNumber="1562"><span class="doxyHighlightComment">/// The acyclic critical path is four cycles: a-&gt;b-&gt;c-&gt;d-&gt;exit</span></CodeLine>
<Link id="l01563" /><CodeLine lineNumber="1563"><span class="doxyHighlightComment">/// LiveOutHeight = height(c) = len(c-&gt;d-&gt;exit) = 2</span></CodeLine>
<Link id="l01564" /><CodeLine lineNumber="1564"><span class="doxyHighlightComment">/// LiveOutDepth = depth(c) + 1 = len(a-&gt;b-&gt;c) + 1 = 3</span></CodeLine>
<Link id="l01565" /><CodeLine lineNumber="1565"><span class="doxyHighlightComment">/// LiveInHeight = height(b) + 1 = len(b-&gt;c-&gt;d-&gt;exit) + 1 = 4</span></CodeLine>
<Link id="l01566" /><CodeLine lineNumber="1566"><span class="doxyHighlightComment">/// LiveInDepth = depth(b) = len(a-&gt;b) = 1</span></CodeLine>
<Link id="l01567" /><CodeLine lineNumber="1567"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l01568" /><CodeLine lineNumber="1568"><span class="doxyHighlightComment">/// LiveOutDepth - LiveInDepth = 3 - 1 = 2</span></CodeLine>
<Link id="l01569" /><CodeLine lineNumber="1569"><span class="doxyHighlightComment">/// LiveInHeight - LiveOutHeight = 4 - 2 = 2</span></CodeLine>
<Link id="l01570" /><CodeLine lineNumber="1570"><span class="doxyHighlightComment">/// CyclicCriticalPath = min(2, 2) = 2</span></CodeLine>
<Link id="l01571" /><CodeLine lineNumber="1571"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l01572" /><CodeLine lineNumber="1572"><span class="doxyHighlightComment">/// This could be relevant to PostRA scheduling, but is currently implemented</span></CodeLine>
<Link id="l01573" /><CodeLine lineNumber="1573"><span class="doxyHighlightComment">/// assuming LiveIntervals.</span></CodeLine>
<Link id="l01574" /><CodeLine lineNumber="1574" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a7bb19d3e5b68421bc97c3c4b524e7888"><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a7bb19d3e5b68421bc97c3c4b524e7888">ScheduleDAGMILive::computeCyclicCriticalPath</a>() &#123;</span></CodeLine>
<Link id="l01575" /><CodeLine lineNumber="1575"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This only applies to single block loop.</span></CodeLine>
<Link id="l01576" /><CodeLine lineNumber="1576"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;isSuccessor(<a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>))</span></CodeLine>
<Link id="l01577" /><CodeLine lineNumber="1577"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> 0;</span></CodeLine>
<Link id="l01578" /><CodeLine lineNumber="1578"></CodeLine>
<Link id="l01579" /><CodeLine lineNumber="1579"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> MaxCyclicLatency = 0;</span></CodeLine>
<Link id="l01580" /><CodeLine lineNumber="1580"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Visit each live out vreg def to find def/use pairs that cross iterations.</span></CodeLine>
<Link id="l01581" /><CodeLine lineNumber="1581"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/vregmaskorunit">VRegMaskOrUnit</a> &amp;<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> : <a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.getPressure().LiveOutRegs) &#123;</span></CodeLine>
<Link id="l01582" /><CodeLine lineNumber="1582"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> Reg = <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.RegUnit;</span></CodeLine>
<Link id="l01583" /><CodeLine lineNumber="1583"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Reg.isVirtual())</span></CodeLine>
<Link id="l01584" /><CodeLine lineNumber="1584"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01585" /><CodeLine lineNumber="1585"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/liveinterval">LiveInterval</a> &amp;LI = <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getInterval(Reg);</span></CodeLine>
<Link id="l01586" /><CodeLine lineNumber="1586"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/vninfo">VNInfo</a> &#42;DefVNI = LI.<a href="/docs/api/classes/llvm/liverange/#a7e1ec6260b229b2f5913405b758bc146">getVNInfoBefore</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getMBBEndIdx(<a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>));</span></CodeLine>
<Link id="l01587" /><CodeLine lineNumber="1587"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!DefVNI)</span></CodeLine>
<Link id="l01588" /><CodeLine lineNumber="1588"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01589" /><CodeLine lineNumber="1589"></CodeLine>
<Link id="l01590" /><CodeLine lineNumber="1590"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#ad3ece0ac2421637044624c9b01c42466">DefMI</a> = <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getInstructionFromIndex(DefVNI-&gt;<a href="/docs/api/classes/llvm/vninfo/#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>);</span></CodeLine>
<Link id="l01591" /><CodeLine lineNumber="1591"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;DefSU = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#ad3ece0ac2421637044624c9b01c42466">DefMI</a>);</span></CodeLine>
<Link id="l01592" /><CodeLine lineNumber="1592"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!DefSU)</span></CodeLine>
<Link id="l01593" /><CodeLine lineNumber="1593"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01594" /><CodeLine lineNumber="1594"></CodeLine>
<Link id="l01595" /><CodeLine lineNumber="1595"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> LiveOutHeight = DefSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>();</span></CodeLine>
<Link id="l01596" /><CodeLine lineNumber="1596"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> LiveOutDepth = DefSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>() + DefSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a72e0568b7bf0e9a97260c34264a549a0">Latency</a>;</span></CodeLine>
<Link id="l01597" /><CodeLine lineNumber="1597"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Visit all local users of the vreg def.</span></CodeLine>
<Link id="l01598" /><CodeLine lineNumber="1598"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/vreg2sunit">VReg2SUnit</a> &amp;V2SU</span></CodeLine>
<Link id="l01599" /><CodeLine lineNumber="1599"><span class="doxyHighlight">         : <a href="/docs/api/namespaces/llvm/#a341215803e83773a3e97860dc291f121">make&#95;range</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.find(Reg), <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.end())) &#123;</span></CodeLine>
<Link id="l01600" /><CodeLine lineNumber="1600"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = V2SU.SU;</span></CodeLine>
<Link id="l01601" /><CodeLine lineNumber="1601"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU == &amp;<a href="/docs/api/classes/llvm/scheduledag/#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>)</span></CodeLine>
<Link id="l01602" /><CodeLine lineNumber="1602"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01603" /><CodeLine lineNumber="1603"></CodeLine>
<Link id="l01604" /><CodeLine lineNumber="1604"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Only consider uses of the phi.</span></CodeLine>
<Link id="l01605" /><CodeLine lineNumber="1605"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/livequeryresult">LiveQueryResult</a> LRQ = LI.<a href="/docs/api/classes/llvm/liverange/#a6eb0e49d283729a5f8b99d4efa1be7c1">Query</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getInstructionIndex(&#42;SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>()));</span></CodeLine>
<Link id="l01606" /><CodeLine lineNumber="1606"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!LRQ.<a href="/docs/api/classes/llvm/livequeryresult/#a527e4a21e13a8455c75eb0d811701066">valueIn</a>()-&gt;<a href="/docs/api/classes/llvm/vninfo/#ae72fbcf51be7574c84817cde814df07e">isPHIDef</a>())</span></CodeLine>
<Link id="l01607" /><CodeLine lineNumber="1607"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01608" /><CodeLine lineNumber="1608"></CodeLine>
<Link id="l01609" /><CodeLine lineNumber="1609"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Assume that a path spanning two iterations is a cycle, which could</span></CodeLine>
<Link id="l01610" /><CodeLine lineNumber="1610"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// overestimate in strange cases. This allows cyclic latency to be</span></CodeLine>
<Link id="l01611" /><CodeLine lineNumber="1611"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// estimated as the minimum slack of the vreg&#39;s depth or height.</span></CodeLine>
<Link id="l01612" /><CodeLine lineNumber="1612"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> CyclicLatency = 0;</span></CodeLine>
<Link id="l01613" /><CodeLine lineNumber="1613"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LiveOutDepth &gt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>())</span></CodeLine>
<Link id="l01614" /><CodeLine lineNumber="1614"><span class="doxyHighlight">        CyclicLatency = LiveOutDepth - SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>();</span></CodeLine>
<Link id="l01615" /><CodeLine lineNumber="1615"></CodeLine>
<Link id="l01616" /><CodeLine lineNumber="1616"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> LiveInHeight = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>() + DefSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a72e0568b7bf0e9a97260c34264a549a0">Latency</a>;</span></CodeLine>
<Link id="l01617" /><CodeLine lineNumber="1617"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LiveInHeight &gt; LiveOutHeight) &#123;</span></CodeLine>
<Link id="l01618" /><CodeLine lineNumber="1618"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LiveInHeight - LiveOutHeight &lt; CyclicLatency)</span></CodeLine>
<Link id="l01619" /><CodeLine lineNumber="1619"><span class="doxyHighlight">          CyclicLatency = LiveInHeight - LiveOutHeight;</span></CodeLine>
<Link id="l01620" /><CodeLine lineNumber="1620"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01621" /><CodeLine lineNumber="1621"><span class="doxyHighlight">        CyclicLatency = 0;</span></CodeLine>
<Link id="l01622" /><CodeLine lineNumber="1622"></CodeLine>
<Link id="l01623" /><CodeLine lineNumber="1623"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Cyclic Path: SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; DefSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) -&gt; SU(&quot;</span></CodeLine>
<Link id="l01624" /><CodeLine lineNumber="1624"><span class="doxyHighlight">                        &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) = &quot;</span><span class="doxyHighlight"> &lt;&lt; CyclicLatency &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01625" /><CodeLine lineNumber="1625"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CyclicLatency &gt; MaxCyclicLatency)</span></CodeLine>
<Link id="l01626" /><CodeLine lineNumber="1626"><span class="doxyHighlight">        MaxCyclicLatency = CyclicLatency;</span></CodeLine>
<Link id="l01627" /><CodeLine lineNumber="1627"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01628" /><CodeLine lineNumber="1628"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01629" /><CodeLine lineNumber="1629"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Cyclic Critical Path: &quot;</span><span class="doxyHighlight"> &lt;&lt; MaxCyclicLatency &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01630" /><CodeLine lineNumber="1630"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> MaxCyclicLatency;</span></CodeLine>
<Link id="l01631" /><CodeLine lineNumber="1631"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01632" /><CodeLine lineNumber="1632"></CodeLine>
<Link id="l01633" /><CodeLine lineNumber="1633"><span class="doxyHighlightComment">/// Release ExitSU predecessors and setup scheduler queues. Re-position</span></CodeLine>
<Link id="l01634" /><CodeLine lineNumber="1634"><span class="doxyHighlightComment">/// the Top RP tracker in case the region beginning has changed.</span></CodeLine>
<Link id="l01635" /><CodeLine lineNumber="1635" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a3668b7c35103540be55d96cd68948f43"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a3668b7c35103540be55d96cd68948f43">ScheduleDAGMILive::initQueues</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;SUnit&#42;&gt;</a> TopRoots,</span></CodeLine>
<Link id="l01636" /><CodeLine lineNumber="1636"><span class="doxyHighlight">                                   <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;SUnit&#42;&gt;</a> BotRoots) &#123;</span></CodeLine>
<Link id="l01637" /><CodeLine lineNumber="1637"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a1f98694f104d052d71ed74ade38d69f0">ScheduleDAGMI::initQueues</a>(TopRoots, BotRoots);</span></CodeLine>
<Link id="l01638" /><CodeLine lineNumber="1638"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#ac46dc81cc2feaf48751834a3dd13e33a">ShouldTrackPressure</a>) &#123;</span></CodeLine>
<Link id="l01639" /><CodeLine lineNumber="1639"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.getPos() == <a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;bad initial Top tracker&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01640" /><CodeLine lineNumber="1640"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.setPos(<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>);</span></CodeLine>
<Link id="l01641" /><CodeLine lineNumber="1641"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01642" /><CodeLine lineNumber="1642"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01643" /><CodeLine lineNumber="1643"></CodeLine>
<Link id="l01644" /><CodeLine lineNumber="1644"><span class="doxyHighlightComment">/// Move an instruction and update register pressure.</span></CodeLine>
<Link id="l01645" /><CodeLine lineNumber="1645" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a04a2c04f918397dbac27a79e58807136"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a04a2c04f918397dbac27a79e58807136">ScheduleDAGMILive::scheduleMI</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsTopNode) &#123;</span></CodeLine>
<Link id="l01646" /><CodeLine lineNumber="1646"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Move the instruction to its new location in the instruction stream.</span></CodeLine>
<Link id="l01647" /><CodeLine lineNumber="1647"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</span></CodeLine>
<Link id="l01648" /><CodeLine lineNumber="1648"></CodeLine>
<Link id="l01649" /><CodeLine lineNumber="1649"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTopNode) &#123;</span></CodeLine>
<Link id="l01650" /><CodeLine lineNumber="1650"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae0b8da4dfde85d4ddc32359ca52dc493">isTopReady</a>() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;node still has unscheduled dependencies&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01651" /><CodeLine lineNumber="1651"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (&amp;&#42;<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> == <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</span></CodeLine>
<Link id="l01652" /><CodeLine lineNumber="1652"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> = <a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(++<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>);</span></CodeLine>
<Link id="l01653" /><CodeLine lineNumber="1653"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01654" /><CodeLine lineNumber="1654"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmi/#a2209b15a069023499cc665b373e67703">moveInstruction</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>);</span></CodeLine>
<Link id="l01655" /><CodeLine lineNumber="1655"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.setPos(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01656" /><CodeLine lineNumber="1656"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01657" /><CodeLine lineNumber="1657"></CodeLine>
<Link id="l01658" /><CodeLine lineNumber="1658"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#ac46dc81cc2feaf48751834a3dd13e33a">ShouldTrackPressure</a>) &#123;</span></CodeLine>
<Link id="l01659" /><CodeLine lineNumber="1659"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Update top scheduled pressure.</span></CodeLine>
<Link id="l01660" /><CodeLine lineNumber="1660"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/registeroperands">RegisterOperands</a> RegOpers;</span></CodeLine>
<Link id="l01661" /><CodeLine lineNumber="1661"><span class="doxyHighlight">      RegOpers.<a href="/docs/api/classes/llvm/registeroperands/#a74e0a918c9705f23a1e5b66f68cc97e9">collect</a>(&#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, &#42;<a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>, <a href="/docs/api/classes/llvm/scheduledag/#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>, <a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>,</span></CodeLine>
<Link id="l01662" /><CodeLine lineNumber="1662"><span class="doxyHighlight">                       </span><span class="doxyHighlightComment">/&#42;IgnoreDead=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01663" /><CodeLine lineNumber="1663"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>) &#123;</span></CodeLine>
<Link id="l01664" /><CodeLine lineNumber="1664"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Adjust liveness and add missing dead+read-undef flags.</span></CodeLine>
<Link id="l01665" /><CodeLine lineNumber="1665"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/slotindex">SlotIndex</a> SlotIdx = <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getInstructionIndex(&#42;MI).getRegSlot();</span></CodeLine>
<Link id="l01666" /><CodeLine lineNumber="1666"><span class="doxyHighlight">        RegOpers.<a href="/docs/api/classes/llvm/registeroperands/#a8affa4b2a934ff08aa04e63253a00126">adjustLaneLiveness</a>(&#42;<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>, <a href="/docs/api/classes/llvm/scheduledag/#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>, SlotIdx, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01667" /><CodeLine lineNumber="1667"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01668" /><CodeLine lineNumber="1668"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Adjust for missing dead-def flags.</span></CodeLine>
<Link id="l01669" /><CodeLine lineNumber="1669"><span class="doxyHighlight">        RegOpers.<a href="/docs/api/classes/llvm/registeroperands/#acee6dacd4d30da478f3ad67f7fc27142">detectDeadDefs</a>(&#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, &#42;<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>);</span></CodeLine>
<Link id="l01670" /><CodeLine lineNumber="1670"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01671" /><CodeLine lineNumber="1671"></CodeLine>
<Link id="l01672" /><CodeLine lineNumber="1672"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.advance(RegOpers);</span></CodeLine>
<Link id="l01673" /><CodeLine lineNumber="1673"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.getPos() == <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;out of sync&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01674" /><CodeLine lineNumber="1674"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Top Pressure:\\n&quot;</span><span class="doxyHighlight">; <a href="/docs/api/namespaces/llvm/#adb6fca77863850136760be488d6ea345">dumpRegSetPressure</a>(</span></CodeLine>
<Link id="l01675" /><CodeLine lineNumber="1675"><span class="doxyHighlight">                     <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.getRegSetPressureAtPos(), <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>););</span></CodeLine>
<Link id="l01676" /><CodeLine lineNumber="1676"></CodeLine>
<Link id="l01677" /><CodeLine lineNumber="1677"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmilive/#a556d08e5789e4c99bb9c24aa4e226f9b">updateScheduledPressure</a>(SU, <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.getPressure().MaxSetPressure);</span></CodeLine>
<Link id="l01678" /><CodeLine lineNumber="1678"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01679" /><CodeLine lineNumber="1679"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01680" /><CodeLine lineNumber="1680"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ac198a5fb130b4c09836ba20e01b4290d">isBottomReady</a>() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;node still has unscheduled dependencies&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01681" /><CodeLine lineNumber="1681"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> priorII =</span></CodeLine>
<Link id="l01682" /><CodeLine lineNumber="1682"><span class="doxyHighlight">      <a href="#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>);</span></CodeLine>
<Link id="l01683" /><CodeLine lineNumber="1683"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (&amp;&#42;priorII == <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</span></CodeLine>
<Link id="l01684" /><CodeLine lineNumber="1684"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a> = priorII;</span></CodeLine>
<Link id="l01685" /><CodeLine lineNumber="1685"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01686" /><CodeLine lineNumber="1686"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (&amp;&#42;<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> == <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) &#123;</span></CodeLine>
<Link id="l01687" /><CodeLine lineNumber="1687"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> = <a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(++<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>, priorII);</span></CodeLine>
<Link id="l01688" /><CodeLine lineNumber="1688"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.setPos(<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>);</span></CodeLine>
<Link id="l01689" /><CodeLine lineNumber="1689"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01690" /><CodeLine lineNumber="1690"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmi/#a2209b15a069023499cc665b373e67703">moveInstruction</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>);</span></CodeLine>
<Link id="l01691" /><CodeLine lineNumber="1691"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</span></CodeLine>
<Link id="l01692" /><CodeLine lineNumber="1692"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.setPos(<a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>);</span></CodeLine>
<Link id="l01693" /><CodeLine lineNumber="1693"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01694" /><CodeLine lineNumber="1694"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#ac46dc81cc2feaf48751834a3dd13e33a">ShouldTrackPressure</a>) &#123;</span></CodeLine>
<Link id="l01695" /><CodeLine lineNumber="1695"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/registeroperands">RegisterOperands</a> RegOpers;</span></CodeLine>
<Link id="l01696" /><CodeLine lineNumber="1696"><span class="doxyHighlight">      RegOpers.<a href="/docs/api/classes/llvm/registeroperands/#a74e0a918c9705f23a1e5b66f68cc97e9">collect</a>(&#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, &#42;<a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>, <a href="/docs/api/classes/llvm/scheduledag/#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>, <a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>,</span></CodeLine>
<Link id="l01697" /><CodeLine lineNumber="1697"><span class="doxyHighlight">                       </span><span class="doxyHighlightComment">/&#42;IgnoreDead=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01698" /><CodeLine lineNumber="1698"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>) &#123;</span></CodeLine>
<Link id="l01699" /><CodeLine lineNumber="1699"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Adjust liveness and add missing dead+read-undef flags.</span></CodeLine>
<Link id="l01700" /><CodeLine lineNumber="1700"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/slotindex">SlotIndex</a> SlotIdx = <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getInstructionIndex(&#42;MI).getRegSlot();</span></CodeLine>
<Link id="l01701" /><CodeLine lineNumber="1701"><span class="doxyHighlight">        RegOpers.<a href="/docs/api/classes/llvm/registeroperands/#a8affa4b2a934ff08aa04e63253a00126">adjustLaneLiveness</a>(&#42;<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>, <a href="/docs/api/classes/llvm/scheduledag/#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>, SlotIdx, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l01702" /><CodeLine lineNumber="1702"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01703" /><CodeLine lineNumber="1703"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Adjust for missing dead-def flags.</span></CodeLine>
<Link id="l01704" /><CodeLine lineNumber="1704"><span class="doxyHighlight">        RegOpers.<a href="/docs/api/classes/llvm/registeroperands/#acee6dacd4d30da478f3ad67f7fc27142">detectDeadDefs</a>(&#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, &#42;<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>);</span></CodeLine>
<Link id="l01705" /><CodeLine lineNumber="1705"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01706" /><CodeLine lineNumber="1706"></CodeLine>
<Link id="l01707" /><CodeLine lineNumber="1707"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getPos() != <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>)</span></CodeLine>
<Link id="l01708" /><CodeLine lineNumber="1708"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.recedeSkipDebugValues();</span></CodeLine>
<Link id="l01709" /><CodeLine lineNumber="1709"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;VRegMaskOrUnit, 8&gt;</a> LiveUses;</span></CodeLine>
<Link id="l01710" /><CodeLine lineNumber="1710"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.recede(RegOpers, &amp;LiveUses);</span></CodeLine>
<Link id="l01711" /><CodeLine lineNumber="1711"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getPos() == <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;out of sync&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01712" /><CodeLine lineNumber="1712"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Bottom Pressure:\\n&quot;</span><span class="doxyHighlight">; <a href="/docs/api/namespaces/llvm/#adb6fca77863850136760be488d6ea345">dumpRegSetPressure</a>(</span></CodeLine>
<Link id="l01713" /><CodeLine lineNumber="1713"><span class="doxyHighlight">                     <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getRegSetPressureAtPos(), <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>););</span></CodeLine>
<Link id="l01714" /><CodeLine lineNumber="1714"></CodeLine>
<Link id="l01715" /><CodeLine lineNumber="1715"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmilive/#a556d08e5789e4c99bb9c24aa4e226f9b">updateScheduledPressure</a>(SU, <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getPressure().MaxSetPressure);</span></CodeLine>
<Link id="l01716" /><CodeLine lineNumber="1716"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/scheduledagmilive/#a91251ec06d557b21578095955b7b7fa7">updatePressureDiffs</a>(LiveUses);</span></CodeLine>
<Link id="l01717" /><CodeLine lineNumber="1717"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01718" /><CodeLine lineNumber="1718"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01719" /><CodeLine lineNumber="1719"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01720" /><CodeLine lineNumber="1720"></CodeLine>
<Link id="l01721" /><CodeLine lineNumber="1721"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l01722" /><CodeLine lineNumber="1722"><span class="doxyHighlightComment">// BaseMemOpClusterMutation - DAG post-processing to cluster loads or stores.</span></CodeLine>
<Link id="l01723" /><CodeLine lineNumber="1723"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l01724" /><CodeLine lineNumber="1724"></CodeLine>
<Link id="l01725" /><CodeLine lineNumber="1725"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01726" /><CodeLine lineNumber="1726"></CodeLine>
<Link id="l01727" /><CodeLine lineNumber="1727"><span class="doxyHighlightComment">/// Post-process the DAG to create cluster edges between neighboring</span></CodeLine>
<Link id="l01728" /><CodeLine lineNumber="1728"><span class="doxyHighlightComment">/// loads or between neighboring stores.</span></CodeLine>
<Link id="l01729" /><CodeLine lineNumber="1729" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a317d063bb2e9dfb39a12091f8a482a3e">BaseMemOpClusterMutation</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmutation">ScheduleDAGMutation</a> &#123;</span></CodeLine>
<Link id="l01730" /><CodeLine lineNumber="1730"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight">MemOpInfo &#123;</span></CodeLine>
<Link id="l01731" /><CodeLine lineNumber="1731"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU;</span></CodeLine>
<Link id="l01732" /><CodeLine lineNumber="1732"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;const MachineOperand &#42;, 4&gt;</a> BaseOps;</span></CodeLine>
<Link id="l01733" /><CodeLine lineNumber="1733"><span class="doxyHighlight">    int64&#95;t <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</span></CodeLine>
<Link id="l01734" /><CodeLine lineNumber="1734"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/locationsize">LocationSize</a> Width;</span></CodeLine>
<Link id="l01735" /><CodeLine lineNumber="1735"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> OffsetIsScalable;</span></CodeLine>
<Link id="l01736" /><CodeLine lineNumber="1736"></CodeLine>
<Link id="l01737" /><CodeLine lineNumber="1737"><span class="doxyHighlight">    MemOpInfo(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;const MachineOperand &#42;&gt;</a> BaseOps,</span></CodeLine>
<Link id="l01738" /><CodeLine lineNumber="1738"><span class="doxyHighlight">              int64&#95;t <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> OffsetIsScalable, <a href="/docs/api/classes/llvm/locationsize">LocationSize</a> Width)</span></CodeLine>
<Link id="l01739" /><CodeLine lineNumber="1739"><span class="doxyHighlight">        : SU(SU), BaseOps(BaseOps), <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>(<a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>), Width(Width),</span></CodeLine>
<Link id="l01740" /><CodeLine lineNumber="1740"><span class="doxyHighlight">          OffsetIsScalable(OffsetIsScalable) &#123;&#125;</span></CodeLine>
<Link id="l01741" /><CodeLine lineNumber="1741"></CodeLine>
<Link id="l01742" /><CodeLine lineNumber="1742"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Compare(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &#42;</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>,</span></CodeLine>
<Link id="l01743" /><CodeLine lineNumber="1743"><span class="doxyHighlight">                        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &#42;</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l01744" /><CodeLine lineNumber="1744"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType() != <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>-&gt;getType())</span></CodeLine>
<Link id="l01745" /><CodeLine lineNumber="1745"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType() &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>-&gt;getType();</span></CodeLine>
<Link id="l01746" /><CodeLine lineNumber="1746"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;isReg())</span></CodeLine>
<Link id="l01747" /><CodeLine lineNumber="1747"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getReg() &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>-&gt;getReg();</span></CodeLine>
<Link id="l01748" /><CodeLine lineNumber="1748"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;isFI()) &#123;</span></CodeLine>
<Link id="l01749" /><CodeLine lineNumber="1749"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getParent()-&gt;getParent()-&gt;getParent();</span></CodeLine>
<Link id="l01750" /><CodeLine lineNumber="1750"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetframelowering">TargetFrameLowering</a> &amp;TFI = &#42;MF.<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>().<a href="/docs/api/classes/llvm/targetsubtargetinfo/#ac83b44e69c9f9f4f9d60be2d72f4a5df">getFrameLowering</a>();</span></CodeLine>
<Link id="l01751" /><CodeLine lineNumber="1751"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> StackGrowsDown = TFI.<a href="/docs/api/classes/llvm/targetframelowering/#aa76eab97e3072a1ebd4bf1ff00d19423">getStackGrowthDirection</a>() ==</span></CodeLine>
<Link id="l01752" /><CodeLine lineNumber="1752"><span class="doxyHighlight">                              <a href="/docs/api/classes/llvm/targetframelowering/#a453c74e2daac0745b53f8b31c11fc50cad1fc7c9d0bae5bf76a67d2d26ce99c1a">TargetFrameLowering::StackGrowsDown</a>;</span></CodeLine>
<Link id="l01753" /><CodeLine lineNumber="1753"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> StackGrowsDown ? <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getIndex() &gt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>-&gt;getIndex()</span></CodeLine>
<Link id="l01754" /><CodeLine lineNumber="1754"><span class="doxyHighlight">                              : <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getIndex() &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>-&gt;getIndex();</span></CodeLine>
<Link id="l01755" /><CodeLine lineNumber="1755"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01756" /><CodeLine lineNumber="1756"></CodeLine>
<Link id="l01757" /><CodeLine lineNumber="1757"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;MemOpClusterMutation only supports register or frame &quot;</span></CodeLine>
<Link id="l01758" /><CodeLine lineNumber="1758"><span class="doxyHighlight">                       </span><span class="doxyHighlightStringLiteral">&quot;index bases.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01759" /><CodeLine lineNumber="1759"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01760" /><CodeLine lineNumber="1760"></CodeLine>
<Link id="l01761" /><CodeLine lineNumber="1761"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a061b224a1a3c3486fd854e5009a858c9">operator&lt;</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MemOpInfo &amp;RHS)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l01762" /><CodeLine lineNumber="1762"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// FIXME: Don&#39;t compare everything twice. Maybe use C++20 three way</span></CodeLine>
<Link id="l01763" /><CodeLine lineNumber="1763"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// comparison instead when it&#39;s available.</span></CodeLine>
<Link id="l01764" /><CodeLine lineNumber="1764"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (std::lexicographical&#95;compare(BaseOps.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a8a045d250952c0867382a9840ee18fdf">begin</a>(), BaseOps.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a075e34e98605d0e7c289763a104869ac">end</a>(),</span></CodeLine>
<Link id="l01765" /><CodeLine lineNumber="1765"><span class="doxyHighlight">                                       RHS.BaseOps.begin(), RHS.BaseOps.end(),</span></CodeLine>
<Link id="l01766" /><CodeLine lineNumber="1766"><span class="doxyHighlight">                                       Compare))</span></CodeLine>
<Link id="l01767" /><CodeLine lineNumber="1767"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01768" /><CodeLine lineNumber="1768"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (std::lexicographical&#95;compare(RHS.BaseOps.begin(), RHS.BaseOps.end(),</span></CodeLine>
<Link id="l01769" /><CodeLine lineNumber="1769"><span class="doxyHighlight">                                       BaseOps.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a8a045d250952c0867382a9840ee18fdf">begin</a>(), BaseOps.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a075e34e98605d0e7c289763a104869ac">end</a>(), Compare))</span></CodeLine>
<Link id="l01770" /><CodeLine lineNumber="1770"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01771" /><CodeLine lineNumber="1771"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> != RHS.Offset)</span></CodeLine>
<Link id="l01772" /><CodeLine lineNumber="1772"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &lt; RHS.Offset;</span></CodeLine>
<Link id="l01773" /><CodeLine lineNumber="1773"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt; RHS.SU-&gt;NodeNum;</span></CodeLine>
<Link id="l01774" /><CodeLine lineNumber="1774"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01775" /><CodeLine lineNumber="1775"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l01776" /><CodeLine lineNumber="1776"></CodeLine>
<Link id="l01777" /><CodeLine lineNumber="1777"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;TII;</span></CodeLine>
<Link id="l01778" /><CodeLine lineNumber="1778"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;TRI;</span></CodeLine>
<Link id="l01779" /><CodeLine lineNumber="1779"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsLoad;</span></CodeLine>
<Link id="l01780" /><CodeLine lineNumber="1780"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ReorderWhileClustering;</span></CodeLine>
<Link id="l01781" /><CodeLine lineNumber="1781"></CodeLine>
<Link id="l01782" /><CodeLine lineNumber="1782"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l01783" /><CodeLine lineNumber="1783" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a317d063bb2e9dfb39a12091f8a482a3e"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a317d063bb2e9dfb39a12091f8a482a3e">BaseMemOpClusterMutation</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;tii,</span></CodeLine>
<Link id="l01784" /><CodeLine lineNumber="1784"><span class="doxyHighlight">                           </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;tri, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsLoad,</span></CodeLine>
<Link id="l01785" /><CodeLine lineNumber="1785"><span class="doxyHighlight">                           </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ReorderWhileClustering)</span></CodeLine>
<Link id="l01786" /><CodeLine lineNumber="1786"><span class="doxyHighlight">      : TII(tii), TRI(tri), IsLoad(IsLoad),</span></CodeLine>
<Link id="l01787" /><CodeLine lineNumber="1787"><span class="doxyHighlight">        ReorderWhileClustering(ReorderWhileClustering) &#123;&#125;</span></CodeLine>
<Link id="l01788" /><CodeLine lineNumber="1788"></CodeLine>
<Link id="l01789" /><CodeLine lineNumber="1789"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> apply(<a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;DAGInstrs) </span><span class="doxyHighlightKeyword">override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01790" /><CodeLine lineNumber="1790"></CodeLine>
<Link id="l01791" /><CodeLine lineNumber="1791"><span class="doxyHighlightKeyword">protected</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l01792" /><CodeLine lineNumber="1792"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> clusterNeighboringMemOps(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;MemOpInfo&gt;</a> MemOps, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> FastCluster,</span></CodeLine>
<Link id="l01793" /><CodeLine lineNumber="1793"><span class="doxyHighlight">                                <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;DAG);</span></CodeLine>
<Link id="l01794" /><CodeLine lineNumber="1794"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> collectMemOpRecords(std::vector&lt;SUnit&gt; &amp;SUnits,</span></CodeLine>
<Link id="l01795" /><CodeLine lineNumber="1795"><span class="doxyHighlight">                           <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;MemOpInfo&gt;</a> &amp;MemOpRecords);</span></CodeLine>
<Link id="l01796" /><CodeLine lineNumber="1796"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> groupMemOps(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;MemOpInfo&gt;</a> MemOps, <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;DAG,</span></CodeLine>
<Link id="l01797" /><CodeLine lineNumber="1797"><span class="doxyHighlight">                   <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;MemOpInfo, 32&gt;</a>&gt; &amp;<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86instrfma3info-cpp/#ab138684de9096eb96683328900f78e48">Groups</a>);</span></CodeLine>
<Link id="l01798" /><CodeLine lineNumber="1798"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l01799" /><CodeLine lineNumber="1799"></CodeLine>
<Link id="l01800" /><CodeLine lineNumber="1800" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/storeclustermutation"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/storeclustermutation/#ad5a89e80fa32ad9d63c7d7ef712745aa">StoreClusterMutation</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a317d063bb2e9dfb39a12091f8a482a3e">BaseMemOpClusterMutation</a> &#123;</span></CodeLine>
<Link id="l01801" /><CodeLine lineNumber="1801"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l01802" /><CodeLine lineNumber="1802" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/storeclustermutation/#ad5a89e80fa32ad9d63c7d7ef712745aa"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/storeclustermutation/#ad5a89e80fa32ad9d63c7d7ef712745aa">StoreClusterMutation</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;tii,</span></CodeLine>
<Link id="l01803" /><CodeLine lineNumber="1803"><span class="doxyHighlight">                       </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;tri,</span></CodeLine>
<Link id="l01804" /><CodeLine lineNumber="1804"><span class="doxyHighlight">                       </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ReorderWhileClustering)</span></CodeLine>
<Link id="l01805" /><CodeLine lineNumber="1805"><span class="doxyHighlight">      : <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a317d063bb2e9dfb39a12091f8a482a3e">BaseMemOpClusterMutation</a>(tii, tri, <a href="/docs/api/namespaces/false">false</a>, ReorderWhileClustering) &#123;&#125;</span></CodeLine>
<Link id="l01806" /><CodeLine lineNumber="1806"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l01807" /><CodeLine lineNumber="1807"></CodeLine>
<Link id="l01808" /><CodeLine lineNumber="1808" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/loadclustermutation"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/loadclustermutation/#a9317a15c0a4f218e7f7ea4fe01f61223">LoadClusterMutation</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a317d063bb2e9dfb39a12091f8a482a3e">BaseMemOpClusterMutation</a> &#123;</span></CodeLine>
<Link id="l01809" /><CodeLine lineNumber="1809"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l01810" /><CodeLine lineNumber="1810" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/loadclustermutation/#a9317a15c0a4f218e7f7ea4fe01f61223"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/loadclustermutation/#a9317a15c0a4f218e7f7ea4fe01f61223">LoadClusterMutation</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;tii, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;tri,</span></CodeLine>
<Link id="l01811" /><CodeLine lineNumber="1811"><span class="doxyHighlight">                      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ReorderWhileClustering)</span></CodeLine>
<Link id="l01812" /><CodeLine lineNumber="1812"><span class="doxyHighlight">      : <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a317d063bb2e9dfb39a12091f8a482a3e">BaseMemOpClusterMutation</a>(tii, tri, <a href="/docs/api/files/lib/lib/analysis/basicaliasanalysis-cpp/#af6d5cafbdfc5313e65d990120021a3ec">true</a>, ReorderWhileClustering) &#123;&#125;</span></CodeLine>
<Link id="l01813" /><CodeLine lineNumber="1813"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l01814" /><CodeLine lineNumber="1814"></CodeLine>
<Link id="l01815" /><CodeLine lineNumber="1815"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end anonymous namespace</span></CodeLine>
<Link id="l01816" /><CodeLine lineNumber="1816"></CodeLine>
<Link id="l01817" /><CodeLine lineNumber="1817"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">llvm &#123;</span></CodeLine>
<Link id="l01818" /><CodeLine lineNumber="1818"></CodeLine>
<Link id="l01819" /><CodeLine lineNumber="1819"><span class="doxyHighlight">std::unique&#95;ptr&lt;ScheduleDAGMutation&gt;</span></CodeLine>
<Link id="l01820" /><CodeLine lineNumber="1820" lineLink="/docs/api/namespaces/llvm/#ab36ef7fb029dbd7ed2314db341b9f854"><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/#ab36ef7fb029dbd7ed2314db341b9f854">createLoadClusterDAGMutation</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>,</span></CodeLine>
<Link id="l01821" /><CodeLine lineNumber="1821"><span class="doxyHighlight">                             </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>,</span></CodeLine>
<Link id="l01822" /><CodeLine lineNumber="1822"><span class="doxyHighlight">                             </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ReorderWhileClustering) &#123;</span></CodeLine>
<Link id="l01823" /><CodeLine lineNumber="1823"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a1b85cadc1b5f4497a2ef2371ce3fa3c4">EnableMemOpCluster</a> ? std::make&#95;unique&lt;LoadClusterMutation&gt;(</span></CodeLine>
<Link id="l01824" /><CodeLine lineNumber="1824"><span class="doxyHighlight">                                  <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>, <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, ReorderWhileClustering)</span></CodeLine>
<Link id="l01825" /><CodeLine lineNumber="1825"><span class="doxyHighlight">                            : </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01826" /><CodeLine lineNumber="1826"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01827" /><CodeLine lineNumber="1827"></CodeLine>
<Link id="l01828" /><CodeLine lineNumber="1828"><span class="doxyHighlight">std::unique&#95;ptr&lt;ScheduleDAGMutation&gt;</span></CodeLine>
<Link id="l01829" /><CodeLine lineNumber="1829" lineLink="/docs/api/namespaces/llvm/#a7bc2ad470d8a41e9423748814b0e3596"><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/#a7bc2ad470d8a41e9423748814b0e3596">createStoreClusterDAGMutation</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>,</span></CodeLine>
<Link id="l01830" /><CodeLine lineNumber="1830"><span class="doxyHighlight">                              </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>,</span></CodeLine>
<Link id="l01831" /><CodeLine lineNumber="1831"><span class="doxyHighlight">                              </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ReorderWhileClustering) &#123;</span></CodeLine>
<Link id="l01832" /><CodeLine lineNumber="1832"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a1b85cadc1b5f4497a2ef2371ce3fa3c4">EnableMemOpCluster</a> ? std::make&#95;unique&lt;StoreClusterMutation&gt;(</span></CodeLine>
<Link id="l01833" /><CodeLine lineNumber="1833"><span class="doxyHighlight">                                  <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>, <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, ReorderWhileClustering)</span></CodeLine>
<Link id="l01834" /><CodeLine lineNumber="1834"><span class="doxyHighlight">                            : </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01835" /><CodeLine lineNumber="1835"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01836" /><CodeLine lineNumber="1836"></CodeLine>
<Link id="l01837" /><CodeLine lineNumber="1837"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end namespace llvm</span></CodeLine>
<Link id="l01838" /><CodeLine lineNumber="1838"></CodeLine>
<Link id="l01839" /><CodeLine lineNumber="1839"><span class="doxyHighlightComment">// Sorting all the loads/stores first, then for each load/store, checking the</span></CodeLine>
<Link id="l01840" /><CodeLine lineNumber="1840"><span class="doxyHighlightComment">// following load/store one by one, until reach the first non-dependent one and</span></CodeLine>
<Link id="l01841" /><CodeLine lineNumber="1841"><span class="doxyHighlightComment">// call target hook to see if they can cluster.</span></CodeLine>
<Link id="l01842" /><CodeLine lineNumber="1842"><span class="doxyHighlightComment">// If FastCluster is enabled, we assume that, all the loads/stores have been</span></CodeLine>
<Link id="l01843" /><CodeLine lineNumber="1843"><span class="doxyHighlightComment">// preprocessed and now, they didn&#39;t have dependencies on each other.</span></CodeLine>
<Link id="l01844" /><CodeLine lineNumber="1844" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a54fbbf29fc459bb243a1a43fb2ab9c1a"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a54fbbf29fc459bb243a1a43fb2ab9c1a">BaseMemOpClusterMutation::clusterNeighboringMemOps</a>(</span></CodeLine>
<Link id="l01845" /><CodeLine lineNumber="1845"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;MemOpInfo&gt;</a> MemOpRecords, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> FastCluster,</span></CodeLine>
<Link id="l01846" /><CodeLine lineNumber="1846"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;DAG) &#123;</span></CodeLine>
<Link id="l01847" /><CodeLine lineNumber="1847"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Keep track of the current cluster length and bytes for each SUnit.</span></CodeLine>
<Link id="l01848" /><CodeLine lineNumber="1848"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;unsigned, std::pair&lt;unsigned, unsigned&gt;</a>&gt; SUnit2ClusterInfo;</span></CodeLine>
<Link id="l01849" /><CodeLine lineNumber="1849"></CodeLine>
<Link id="l01850" /><CodeLine lineNumber="1850"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// At this point, &#96;MemOpRecords&#96; array must hold atleast two mem ops. Try to</span></CodeLine>
<Link id="l01851" /><CodeLine lineNumber="1851"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// cluster mem ops collected within &#96;MemOpRecords&#96; array.</span></CodeLine>
<Link id="l01852" /><CodeLine lineNumber="1852"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Idx = 0, End = MemOpRecords.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(); Idx &lt; (End - 1); ++Idx) &#123;</span></CodeLine>
<Link id="l01853" /><CodeLine lineNumber="1853"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Decision to cluster mem ops is taken based on target dependent logic</span></CodeLine>
<Link id="l01854" /><CodeLine lineNumber="1854"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MemOpa = MemOpRecords&#91;Idx&#93;;</span></CodeLine>
<Link id="l01855" /><CodeLine lineNumber="1855"></CodeLine>
<Link id="l01856" /><CodeLine lineNumber="1856"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Seek for the next load/store to do the cluster.</span></CodeLine>
<Link id="l01857" /><CodeLine lineNumber="1857"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NextIdx = Idx + 1;</span></CodeLine>
<Link id="l01858" /><CodeLine lineNumber="1858"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (; NextIdx &lt; End; ++NextIdx)</span></CodeLine>
<Link id="l01859" /><CodeLine lineNumber="1859"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Skip if MemOpb has been clustered already or has dependency with</span></CodeLine>
<Link id="l01860" /><CodeLine lineNumber="1860"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// MemOpa.</span></CodeLine>
<Link id="l01861" /><CodeLine lineNumber="1861"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SUnit2ClusterInfo.<a href="/docs/api/classes/llvm/densemapbase/#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(MemOpRecords&#91;NextIdx&#93;.SU-&gt;NodeNum) &amp;&amp;</span></CodeLine>
<Link id="l01862" /><CodeLine lineNumber="1862"><span class="doxyHighlight">          (FastCluster ||</span></CodeLine>
<Link id="l01863" /><CodeLine lineNumber="1863"><span class="doxyHighlight">           (!DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#aa79589a56769cd108d08e21544be1420">IsReachable</a>(MemOpRecords&#91;NextIdx&#93;.SU, MemOpa.SU) &amp;&amp;</span></CodeLine>
<Link id="l01864" /><CodeLine lineNumber="1864"><span class="doxyHighlight">            !DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#aa79589a56769cd108d08e21544be1420">IsReachable</a>(MemOpa.SU, MemOpRecords&#91;NextIdx&#93;.SU))))</span></CodeLine>
<Link id="l01865" /><CodeLine lineNumber="1865"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01866" /><CodeLine lineNumber="1866"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NextIdx == End)</span></CodeLine>
<Link id="l01867" /><CodeLine lineNumber="1867"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01868" /><CodeLine lineNumber="1868"></CodeLine>
<Link id="l01869" /><CodeLine lineNumber="1869"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MemOpb = MemOpRecords&#91;NextIdx&#93;;</span></CodeLine>
<Link id="l01870" /><CodeLine lineNumber="1870"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ClusterLength = 2;</span></CodeLine>
<Link id="l01871" /><CodeLine lineNumber="1871"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> CurrentClusterBytes = MemOpa.Width.getValue().getKnownMinValue() +</span></CodeLine>
<Link id="l01872" /><CodeLine lineNumber="1872"><span class="doxyHighlight">                                   MemOpb.Width.getValue().getKnownMinValue();</span></CodeLine>
<Link id="l01873" /><CodeLine lineNumber="1873"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SUnit2ClusterInfo.<a href="/docs/api/classes/llvm/densemapbase/#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(MemOpa.SU-&gt;NodeNum)) &#123;</span></CodeLine>
<Link id="l01874" /><CodeLine lineNumber="1874"><span class="doxyHighlight">      ClusterLength = SUnit2ClusterInfo&#91;MemOpa.SU-&gt;NodeNum&#93;.first + 1;</span></CodeLine>
<Link id="l01875" /><CodeLine lineNumber="1875"><span class="doxyHighlight">      CurrentClusterBytes = SUnit2ClusterInfo&#91;MemOpa.SU-&gt;NodeNum&#93;.second +</span></CodeLine>
<Link id="l01876" /><CodeLine lineNumber="1876"><span class="doxyHighlight">                            MemOpb.Width.getValue().getKnownMinValue();</span></CodeLine>
<Link id="l01877" /><CodeLine lineNumber="1877"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01878" /><CodeLine lineNumber="1878"></CodeLine>
<Link id="l01879" /><CodeLine lineNumber="1879"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!TII-&gt;shouldClusterMemOps(MemOpa.BaseOps, MemOpa.Offset,</span></CodeLine>
<Link id="l01880" /><CodeLine lineNumber="1880"><span class="doxyHighlight">                                  MemOpa.OffsetIsScalable, MemOpb.BaseOps,</span></CodeLine>
<Link id="l01881" /><CodeLine lineNumber="1881"><span class="doxyHighlight">                                  MemOpb.Offset, MemOpb.OffsetIsScalable,</span></CodeLine>
<Link id="l01882" /><CodeLine lineNumber="1882"><span class="doxyHighlight">                                  ClusterLength, CurrentClusterBytes))</span></CodeLine>
<Link id="l01883" /><CodeLine lineNumber="1883"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01884" /><CodeLine lineNumber="1884"></CodeLine>
<Link id="l01885" /><CodeLine lineNumber="1885"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SUa = MemOpa.SU;</span></CodeLine>
<Link id="l01886" /><CodeLine lineNumber="1886"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SUb = MemOpb.SU;</span></CodeLine>
<Link id="l01887" /><CodeLine lineNumber="1887"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ReorderWhileClustering &amp;&amp; SUa-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &gt; SUb-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a>)</span></CodeLine>
<Link id="l01888" /><CodeLine lineNumber="1888"><span class="doxyHighlight">      <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(SUa, SUb);</span></CodeLine>
<Link id="l01889" /><CodeLine lineNumber="1889"></CodeLine>
<Link id="l01890" /><CodeLine lineNumber="1890"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: Is this check really required?</span></CodeLine>
<Link id="l01891" /><CodeLine lineNumber="1891"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a86bfa4838cb7e42648615d27c94c8017">addEdge</a>(SUb, <a href="/docs/api/classes/llvm/sdep">SDep</a>(SUa, <a href="/docs/api/classes/llvm/sdep/#a551060cb0333d9d0cfdacd2576d817b9a04d28e273cd30fa75243240b15d08352">SDep::Cluster</a>)))</span></CodeLine>
<Link id="l01892" /><CodeLine lineNumber="1892"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01893" /><CodeLine lineNumber="1893"></CodeLine>
<Link id="l01894" /><CodeLine lineNumber="1894"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Cluster ld/st SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; SUa-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) - SU(&quot;</span></CodeLine>
<Link id="l01895" /><CodeLine lineNumber="1895"><span class="doxyHighlight">                      &lt;&lt; SUb-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;)\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01896" /><CodeLine lineNumber="1896"><span class="doxyHighlight">    ++NumClustered;</span></CodeLine>
<Link id="l01897" /><CodeLine lineNumber="1897"></CodeLine>
<Link id="l01898" /><CodeLine lineNumber="1898"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsLoad) &#123;</span></CodeLine>
<Link id="l01899" /><CodeLine lineNumber="1899"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Copy successor edges from SUa to SUb. Interleaving computation</span></CodeLine>
<Link id="l01900" /><CodeLine lineNumber="1900"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// dependent on SUa can prevent load combining due to register reuse.</span></CodeLine>
<Link id="l01901" /><CodeLine lineNumber="1901"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Predecessor edges do not need to be copied from SUb to SUa since</span></CodeLine>
<Link id="l01902" /><CodeLine lineNumber="1902"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// nearby loads should have effectively the same inputs.</span></CodeLine>
<Link id="l01903" /><CodeLine lineNumber="1903"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sdep">SDep</a> &amp;Succ : SUa-&gt;<a href="/docs/api/classes/llvm/sunit/#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>) &#123;</span></CodeLine>
<Link id="l01904" /><CodeLine lineNumber="1904"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Succ.<a href="/docs/api/classes/llvm/sdep/#a03a2dc5f9f321a2ce28f5c641dfe5455">getSUnit</a>() == SUb)</span></CodeLine>
<Link id="l01905" /><CodeLine lineNumber="1905"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01906" /><CodeLine lineNumber="1906"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Copy Succ SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; Succ.<a href="/docs/api/classes/llvm/sdep/#a03a2dc5f9f321a2ce28f5c641dfe5455">getSUnit</a>()-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a></span></CodeLine>
<Link id="l01907" /><CodeLine lineNumber="1907"><span class="doxyHighlight">                          &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;)\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01908" /><CodeLine lineNumber="1908"><span class="doxyHighlight">        DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a86bfa4838cb7e42648615d27c94c8017">addEdge</a>(Succ.<a href="/docs/api/classes/llvm/sdep/#a03a2dc5f9f321a2ce28f5c641dfe5455">getSUnit</a>(), <a href="/docs/api/classes/llvm/sdep">SDep</a>(SUb, <a href="/docs/api/classes/llvm/sdep/#a551060cb0333d9d0cfdacd2576d817b9a8afafe9e6f4c2fb9744242a6b369a0f1">SDep::Artificial</a>));</span></CodeLine>
<Link id="l01909" /><CodeLine lineNumber="1909"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01910" /><CodeLine lineNumber="1910"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01911" /><CodeLine lineNumber="1911"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Copy predecessor edges from SUb to SUa to avoid the SUnits that</span></CodeLine>
<Link id="l01912" /><CodeLine lineNumber="1912"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// SUb dependent on scheduled in-between SUb and SUa. Successor edges</span></CodeLine>
<Link id="l01913" /><CodeLine lineNumber="1913"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// do not need to be copied from SUa to SUb since no one will depend</span></CodeLine>
<Link id="l01914" /><CodeLine lineNumber="1914"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// on stores.</span></CodeLine>
<Link id="l01915" /><CodeLine lineNumber="1915"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Notice that, we don&#39;t need to care about the memory dependency as</span></CodeLine>
<Link id="l01916" /><CodeLine lineNumber="1916"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// we won&#39;t try to cluster them if they have any memory dependency.</span></CodeLine>
<Link id="l01917" /><CodeLine lineNumber="1917"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sdep">SDep</a> &amp;Pred : SUb-&gt;<a href="/docs/api/classes/llvm/sunit/#ae2b43854b542de66eec6475adc48f56c">Preds</a>) &#123;</span></CodeLine>
<Link id="l01918" /><CodeLine lineNumber="1918"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Pred.getSUnit() == SUa)</span></CodeLine>
<Link id="l01919" /><CodeLine lineNumber="1919"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01920" /><CodeLine lineNumber="1920"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Copy Pred SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; Pred.getSUnit()-&gt;NodeNum</span></CodeLine>
<Link id="l01921" /><CodeLine lineNumber="1921"><span class="doxyHighlight">                          &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;)\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01922" /><CodeLine lineNumber="1922"><span class="doxyHighlight">        DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a86bfa4838cb7e42648615d27c94c8017">addEdge</a>(SUa, <a href="/docs/api/classes/llvm/sdep">SDep</a>(Pred.getSUnit(), <a href="/docs/api/classes/llvm/sdep/#a551060cb0333d9d0cfdacd2576d817b9a8afafe9e6f4c2fb9744242a6b369a0f1">SDep::Artificial</a>));</span></CodeLine>
<Link id="l01923" /><CodeLine lineNumber="1923"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01924" /><CodeLine lineNumber="1924"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01925" /><CodeLine lineNumber="1925"></CodeLine>
<Link id="l01926" /><CodeLine lineNumber="1926"><span class="doxyHighlight">    SUnit2ClusterInfo&#91;MemOpb.SU-&gt;NodeNum&#93; = &#123;ClusterLength,</span></CodeLine>
<Link id="l01927" /><CodeLine lineNumber="1927"><span class="doxyHighlight">                                             CurrentClusterBytes&#125;;</span></CodeLine>
<Link id="l01928" /><CodeLine lineNumber="1928"></CodeLine>
<Link id="l01929" /><CodeLine lineNumber="1929"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Curr cluster length: &quot;</span><span class="doxyHighlight"> &lt;&lt; ClusterLength</span></CodeLine>
<Link id="l01930" /><CodeLine lineNumber="1930"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, Curr cluster bytes: &quot;</span><span class="doxyHighlight"> &lt;&lt; CurrentClusterBytes</span></CodeLine>
<Link id="l01931" /><CodeLine lineNumber="1931"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01932" /><CodeLine lineNumber="1932"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01933" /><CodeLine lineNumber="1933"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01934" /><CodeLine lineNumber="1934"></CodeLine>
<Link id="l01935" /><CodeLine lineNumber="1935" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a97b8f22f6c8ebb59fe454ba80d407baa"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a97b8f22f6c8ebb59fe454ba80d407baa">BaseMemOpClusterMutation::collectMemOpRecords</a>(</span></CodeLine>
<Link id="l01936" /><CodeLine lineNumber="1936"><span class="doxyHighlight">    std::vector&lt;SUnit&gt; &amp;SUnits, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;MemOpInfo&gt;</a> &amp;MemOpRecords) &#123;</span></CodeLine>
<Link id="l01937" /><CodeLine lineNumber="1937"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;SU : SUnits) &#123;</span></CodeLine>
<Link id="l01938" /><CodeLine lineNumber="1938"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((IsLoad &amp;&amp; !SU.getInstr()-&gt;mayLoad()) ||</span></CodeLine>
<Link id="l01939" /><CodeLine lineNumber="1939"><span class="doxyHighlight">        (!IsLoad &amp;&amp; !SU.getInstr()-&gt;mayStore()))</span></CodeLine>
<Link id="l01940" /><CodeLine lineNumber="1940"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01941" /><CodeLine lineNumber="1941"></CodeLine>
<Link id="l01942" /><CodeLine lineNumber="1942"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = &#42;SU.getInstr();</span></CodeLine>
<Link id="l01943" /><CodeLine lineNumber="1943"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;const MachineOperand &#42;, 4&gt;</a> BaseOps;</span></CodeLine>
<Link id="l01944" /><CodeLine lineNumber="1944"><span class="doxyHighlight">    int64&#95;t <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</span></CodeLine>
<Link id="l01945" /><CodeLine lineNumber="1945"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> OffsetIsScalable;</span></CodeLine>
<Link id="l01946" /><CodeLine lineNumber="1946"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/locationsize">LocationSize</a> Width = 0;</span></CodeLine>
<Link id="l01947" /><CodeLine lineNumber="1947"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TII-&gt;getMemOperandsWithOffsetWidth(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, BaseOps, <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>,</span></CodeLine>
<Link id="l01948" /><CodeLine lineNumber="1948"><span class="doxyHighlight">                                           OffsetIsScalable, Width, TRI)) &#123;</span></CodeLine>
<Link id="l01949" /><CodeLine lineNumber="1949"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Width.<a href="/docs/api/classes/llvm/locationsize/#a0b0401973fc9567440717a5d32a8eb8d">hasValue</a>())</span></CodeLine>
<Link id="l01950" /><CodeLine lineNumber="1950"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01951" /><CodeLine lineNumber="1951"></CodeLine>
<Link id="l01952" /><CodeLine lineNumber="1952"><span class="doxyHighlight">      MemOpRecords.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(</span></CodeLine>
<Link id="l01953" /><CodeLine lineNumber="1953"><span class="doxyHighlight">          MemOpInfo(&amp;SU, BaseOps, <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, OffsetIsScalable, Width));</span></CodeLine>
<Link id="l01954" /><CodeLine lineNumber="1954"></CodeLine>
<Link id="l01955" /><CodeLine lineNumber="1955"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Num BaseOps: &quot;</span><span class="doxyHighlight"> &lt;&lt; BaseOps.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, Offset: &quot;</span></CodeLine>
<Link id="l01956" /><CodeLine lineNumber="1956"><span class="doxyHighlight">                        &lt;&lt; <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, OffsetIsScalable: &quot;</span><span class="doxyHighlight"> &lt;&lt; OffsetIsScalable</span></CodeLine>
<Link id="l01957" /><CodeLine lineNumber="1957"><span class="doxyHighlight">                        &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;, Width: &quot;</span><span class="doxyHighlight"> &lt;&lt; Width &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l01958" /><CodeLine lineNumber="1958"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01959" /><CodeLine lineNumber="1959"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l01960" /><CodeLine lineNumber="1960"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> : BaseOps)</span></CodeLine>
<Link id="l01961" /><CodeLine lineNumber="1961"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</span></CodeLine>
<Link id="l01962" /><CodeLine lineNumber="1962"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l01963" /><CodeLine lineNumber="1963"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01964" /><CodeLine lineNumber="1964"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01965" /><CodeLine lineNumber="1965"></CodeLine>
<Link id="l01966" /><CodeLine lineNumber="1966" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a456ce65cd7eb7154bc9a1460dcd3eb4a"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a456ce65cd7eb7154bc9a1460dcd3eb4a">BaseMemOpClusterMutation::groupMemOps</a>(</span></CodeLine>
<Link id="l01967" /><CodeLine lineNumber="1967"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;MemOpInfo&gt;</a> MemOps, <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;DAG,</span></CodeLine>
<Link id="l01968" /><CodeLine lineNumber="1968"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;MemOpInfo, 32&gt;</a>&gt; &amp;<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86instrfma3info-cpp/#ab138684de9096eb96683328900f78e48">Groups</a>) &#123;</span></CodeLine>
<Link id="l01969" /><CodeLine lineNumber="1969"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> FastCluster =</span></CodeLine>
<Link id="l01970" /><CodeLine lineNumber="1970"><span class="doxyHighlight">      <a href="#a6d7874db6e333966be014090e66b309b">ForceFastCluster</a> ||</span></CodeLine>
<Link id="l01971" /><CodeLine lineNumber="1971"><span class="doxyHighlight">      MemOps.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() &#42; DAG-&gt;<a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>.size() / 1000 &gt; <a href="#a6dac5cd81207b66c491978be7b8fbcde">FastClusterThreshold</a>;</span></CodeLine>
<Link id="l01972" /><CodeLine lineNumber="1972"></CodeLine>
<Link id="l01973" /><CodeLine lineNumber="1973"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/structs/llvm/memop">MemOp</a> : MemOps) &#123;</span></CodeLine>
<Link id="l01974" /><CodeLine lineNumber="1974"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ChainPredID = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>.size();</span></CodeLine>
<Link id="l01975" /><CodeLine lineNumber="1975"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (FastCluster) &#123;</span></CodeLine>
<Link id="l01976" /><CodeLine lineNumber="1976"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sdep">SDep</a> &amp;Pred : <a href="/docs/api/structs/llvm/memop">MemOp</a>.SU-&gt;Preds) &#123;</span></CodeLine>
<Link id="l01977" /><CodeLine lineNumber="1977"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// We only want to cluster the mem ops that have the same ctrl(non-data)</span></CodeLine>
<Link id="l01978" /><CodeLine lineNumber="1978"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// pred so that they didn&#39;t have ctrl dependency for each other. But for</span></CodeLine>
<Link id="l01979" /><CodeLine lineNumber="1979"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// store instrs, we can still cluster them if the pred is load instr.</span></CodeLine>
<Link id="l01980" /><CodeLine lineNumber="1980"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((Pred.isCtrl() &amp;&amp;</span></CodeLine>
<Link id="l01981" /><CodeLine lineNumber="1981"><span class="doxyHighlight">             (IsLoad ||</span></CodeLine>
<Link id="l01982" /><CodeLine lineNumber="1982"><span class="doxyHighlight">              (Pred.getSUnit() &amp;&amp; Pred.getSUnit()-&gt;getInstr()-&gt;mayStore()))) &amp;&amp;</span></CodeLine>
<Link id="l01983" /><CodeLine lineNumber="1983"><span class="doxyHighlight">            !Pred.isArtificial()) &#123;</span></CodeLine>
<Link id="l01984" /><CodeLine lineNumber="1984"><span class="doxyHighlight">          ChainPredID = Pred.getSUnit()-&gt;NodeNum;</span></CodeLine>
<Link id="l01985" /><CodeLine lineNumber="1985"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01986" /><CodeLine lineNumber="1986"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l01987" /><CodeLine lineNumber="1987"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01988" /><CodeLine lineNumber="1988"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01989" /><CodeLine lineNumber="1989"><span class="doxyHighlight">      ChainPredID = 0;</span></CodeLine>
<Link id="l01990" /><CodeLine lineNumber="1990"></CodeLine>
<Link id="l01991" /><CodeLine lineNumber="1991"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86instrfma3info-cpp/#ab138684de9096eb96683328900f78e48">Groups</a>&#91;ChainPredID&#93;.push&#95;back(<a href="/docs/api/structs/llvm/memop">MemOp</a>);</span></CodeLine>
<Link id="l01992" /><CodeLine lineNumber="1992"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01993" /><CodeLine lineNumber="1993"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> FastCluster;</span></CodeLine>
<Link id="l01994" /><CodeLine lineNumber="1994"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l01995" /><CodeLine lineNumber="1995"></CodeLine>
<Link id="l01996" /><CodeLine lineNumber="1996"><span class="doxyHighlightComment">/// Callback from DAG postProcessing to create cluster edges for loads/stores.</span></CodeLine>
<Link id="l01997" /><CodeLine lineNumber="1997" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a0c7442486454c55b94469e8b7c8ab468"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a0c7442486454c55b94469e8b7c8ab468">BaseMemOpClusterMutation::apply</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;DAG) &#123;</span></CodeLine>
<Link id="l01998" /><CodeLine lineNumber="1998"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Collect all the clusterable loads/stores</span></CodeLine>
<Link id="l01999" /><CodeLine lineNumber="1999"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;MemOpInfo, 32&gt;</a> MemOpRecords;</span></CodeLine>
<Link id="l02000" /><CodeLine lineNumber="2000"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a97b8f22f6c8ebb59fe454ba80d407baa">collectMemOpRecords</a>(DAG-&gt;<a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>, MemOpRecords);</span></CodeLine>
<Link id="l02001" /><CodeLine lineNumber="2001"></CodeLine>
<Link id="l02002" /><CodeLine lineNumber="2002"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MemOpRecords.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() &lt; 2)</span></CodeLine>
<Link id="l02003" /><CodeLine lineNumber="2003"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02004" /><CodeLine lineNumber="2004"></CodeLine>
<Link id="l02005" /><CodeLine lineNumber="2005"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Put the loads/stores without dependency into the same group with some</span></CodeLine>
<Link id="l02006" /><CodeLine lineNumber="2006"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// heuristic if the DAG is too complex to avoid compiling time blow up.</span></CodeLine>
<Link id="l02007" /><CodeLine lineNumber="2007"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Notice that, some fusion pair could be lost with this.</span></CodeLine>
<Link id="l02008" /><CodeLine lineNumber="2008"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;unsigned, SmallVector&lt;MemOpInfo, 32&gt;</a>&gt; <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86instrfma3info-cpp/#ab138684de9096eb96683328900f78e48">Groups</a>;</span></CodeLine>
<Link id="l02009" /><CodeLine lineNumber="2009"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> FastCluster = <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a456ce65cd7eb7154bc9a1460dcd3eb4a">groupMemOps</a>(MemOpRecords, DAG, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86instrfma3info-cpp/#ab138684de9096eb96683328900f78e48">Groups</a>);</span></CodeLine>
<Link id="l02010" /><CodeLine lineNumber="2010"></CodeLine>
<Link id="l02011" /><CodeLine lineNumber="2011"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Group : <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86instrfma3info-cpp/#ab138684de9096eb96683328900f78e48">Groups</a>) &#123;</span></CodeLine>
<Link id="l02012" /><CodeLine lineNumber="2012"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Sorting the loads/stores, so that, we can stop the cluster as early as</span></CodeLine>
<Link id="l02013" /><CodeLine lineNumber="2013"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// possible.</span></CodeLine>
<Link id="l02014" /><CodeLine lineNumber="2014"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a>(Group.second);</span></CodeLine>
<Link id="l02015" /><CodeLine lineNumber="2015"></CodeLine>
<Link id="l02016" /><CodeLine lineNumber="2016"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Trying to cluster all the neighboring loads/stores.</span></CodeLine>
<Link id="l02017" /><CodeLine lineNumber="2017"><span class="doxyHighlight">    <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a54fbbf29fc459bb243a1a43fb2ab9c1a">clusterNeighboringMemOps</a>(Group.second, FastCluster, DAG);</span></CodeLine>
<Link id="l02018" /><CodeLine lineNumber="2018"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02019" /><CodeLine lineNumber="2019"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02020" /><CodeLine lineNumber="2020"></CodeLine>
<Link id="l02021" /><CodeLine lineNumber="2021"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l02022" /><CodeLine lineNumber="2022"><span class="doxyHighlightComment">// CopyConstrain - DAG post-processing to encourage copy elimination.</span></CodeLine>
<Link id="l02023" /><CodeLine lineNumber="2023"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l02024" /><CodeLine lineNumber="2024"></CodeLine>
<Link id="l02025" /><CodeLine lineNumber="2025"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02026" /><CodeLine lineNumber="2026"></CodeLine>
<Link id="l02027" /><CodeLine lineNumber="2027"><span class="doxyHighlightComment">/// Post-process the DAG to create weak edges from all uses of a copy to</span></CodeLine>
<Link id="l02028" /><CodeLine lineNumber="2028"><span class="doxyHighlightComment">/// the one use that defines the copy&#39;s source vreg, most likely an induction</span></CodeLine>
<Link id="l02029" /><CodeLine lineNumber="2029"><span class="doxyHighlightComment">/// variable increment.</span></CodeLine>
<Link id="l02030" /><CodeLine lineNumber="2030" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#a42e9bb90b21ba8622406f3337df0c467">CopyConstrain</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmutation">ScheduleDAGMutation</a> &#123;</span></CodeLine>
<Link id="l02031" /><CodeLine lineNumber="2031"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Transient state.</span></CodeLine>
<Link id="l02032" /><CodeLine lineNumber="2032"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/slotindex">SlotIndex</a> RegionBeginIdx;</span></CodeLine>
<Link id="l02033" /><CodeLine lineNumber="2033"></CodeLine>
<Link id="l02034" /><CodeLine lineNumber="2034"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// RegionEndIdx is the slot index of the last non-debug instruction in the</span></CodeLine>
<Link id="l02035" /><CodeLine lineNumber="2035"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// scheduling region. So we may have RegionBeginIdx == RegionEndIdx.</span></CodeLine>
<Link id="l02036" /><CodeLine lineNumber="2036"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/slotindex">SlotIndex</a> RegionEndIdx;</span></CodeLine>
<Link id="l02037" /><CodeLine lineNumber="2037"></CodeLine>
<Link id="l02038" /><CodeLine lineNumber="2038"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l02039" /><CodeLine lineNumber="2039" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#a42e9bb90b21ba8622406f3337df0c467"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#a42e9bb90b21ba8622406f3337df0c467">CopyConstrain</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;) &#123;&#125;</span></CodeLine>
<Link id="l02040" /><CodeLine lineNumber="2040"></CodeLine>
<Link id="l02041" /><CodeLine lineNumber="2041"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> apply(<a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;DAGInstrs) </span><span class="doxyHighlightKeyword">override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02042" /><CodeLine lineNumber="2042"></CodeLine>
<Link id="l02043" /><CodeLine lineNumber="2043"><span class="doxyHighlightKeyword">protected</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l02044" /><CodeLine lineNumber="2044"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> constrainLocalCopy(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;CopySU, <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a> &#42;DAG);</span></CodeLine>
<Link id="l02045" /><CodeLine lineNumber="2045"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l02046" /><CodeLine lineNumber="2046"></CodeLine>
<Link id="l02047" /><CodeLine lineNumber="2047"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end anonymous namespace</span></CodeLine>
<Link id="l02048" /><CodeLine lineNumber="2048"></CodeLine>
<Link id="l02049" /><CodeLine lineNumber="2049"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">llvm &#123;</span></CodeLine>
<Link id="l02050" /><CodeLine lineNumber="2050"></CodeLine>
<Link id="l02051" /><CodeLine lineNumber="2051"><span class="doxyHighlight">std::unique&#95;ptr&lt;ScheduleDAGMutation&gt;</span></CodeLine>
<Link id="l02052" /><CodeLine lineNumber="2052" lineLink="/docs/api/namespaces/llvm/#ae82d653cf862c571ba16050a19426458"><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/#ae82d653cf862c571ba16050a19426458">createCopyConstrainDAGMutation</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>,</span></CodeLine>
<Link id="l02053" /><CodeLine lineNumber="2053"><span class="doxyHighlight">                               </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>) &#123;</span></CodeLine>
<Link id="l02054" /><CodeLine lineNumber="2054"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::make&#95;unique&lt;CopyConstrain&gt;(<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>, <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>);</span></CodeLine>
<Link id="l02055" /><CodeLine lineNumber="2055"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02056" /><CodeLine lineNumber="2056"></CodeLine>
<Link id="l02057" /><CodeLine lineNumber="2057"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end namespace llvm</span></CodeLine>
<Link id="l02058" /><CodeLine lineNumber="2058"></CodeLine>
<Link id="l02059" /><CodeLine lineNumber="2059"><span class="doxyHighlightComment">/// constrainLocalCopy handles two possibilities:</span></CodeLine>
<Link id="l02060" /><CodeLine lineNumber="2060"><span class="doxyHighlightComment">/// 1) Local src:</span></CodeLine>
<Link id="l02061" /><CodeLine lineNumber="2061"><span class="doxyHighlightComment">/// I0:     = dst</span></CodeLine>
<Link id="l02062" /><CodeLine lineNumber="2062"><span class="doxyHighlightComment">/// I1: src = ...</span></CodeLine>
<Link id="l02063" /><CodeLine lineNumber="2063"><span class="doxyHighlightComment">/// I2:     = dst</span></CodeLine>
<Link id="l02064" /><CodeLine lineNumber="2064"><span class="doxyHighlightComment">/// I3: dst = src (copy)</span></CodeLine>
<Link id="l02065" /><CodeLine lineNumber="2065"><span class="doxyHighlightComment">/// (create pred-&gt;succ edges I0-&gt;I1, I2-&gt;I1)</span></CodeLine>
<Link id="l02066" /><CodeLine lineNumber="2066"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02067" /><CodeLine lineNumber="2067"><span class="doxyHighlightComment">/// 2) Local copy:</span></CodeLine>
<Link id="l02068" /><CodeLine lineNumber="2068"><span class="doxyHighlightComment">/// I0: dst = src (copy)</span></CodeLine>
<Link id="l02069" /><CodeLine lineNumber="2069"><span class="doxyHighlightComment">/// I1:     = dst</span></CodeLine>
<Link id="l02070" /><CodeLine lineNumber="2070"><span class="doxyHighlightComment">/// I2: src = ...</span></CodeLine>
<Link id="l02071" /><CodeLine lineNumber="2071"><span class="doxyHighlightComment">/// I3:     = dst</span></CodeLine>
<Link id="l02072" /><CodeLine lineNumber="2072"><span class="doxyHighlightComment">/// (create pred-&gt;succ edges I1-&gt;I2, I3-&gt;I2)</span></CodeLine>
<Link id="l02073" /><CodeLine lineNumber="2073"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02074" /><CodeLine lineNumber="2074"><span class="doxyHighlightComment">/// Although the MachineScheduler is currently constrained to single blocks,</span></CodeLine>
<Link id="l02075" /><CodeLine lineNumber="2075"><span class="doxyHighlightComment">/// this algorithm should handle extended blocks. An EBB is a set of</span></CodeLine>
<Link id="l02076" /><CodeLine lineNumber="2076"><span class="doxyHighlightComment">/// contiguously numbered blocks such that the previous block in the EBB is</span></CodeLine>
<Link id="l02077" /><CodeLine lineNumber="2077"><span class="doxyHighlightComment">/// always the single predecessor.</span></CodeLine>
<Link id="l02078" /><CodeLine lineNumber="2078" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#aee8fb987217bee89c0f2059168e834ec"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#aee8fb987217bee89c0f2059168e834ec">CopyConstrain::constrainLocalCopy</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;CopySU, <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a> &#42;DAG) &#123;</span></CodeLine>
<Link id="l02079" /><CodeLine lineNumber="2079"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/liveintervals">LiveIntervals</a> &#42;LIS = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a7dcf5173867549aff2a8cdcc70dd2800">getLIS</a>();</span></CodeLine>
<Link id="l02080" /><CodeLine lineNumber="2080"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;Copy = CopySU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</span></CodeLine>
<Link id="l02081" /><CodeLine lineNumber="2081"></CodeLine>
<Link id="l02082" /><CodeLine lineNumber="2082"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check for pure vreg copies.</span></CodeLine>
<Link id="l02083" /><CodeLine lineNumber="2083"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;<a href="/docs/api/classes/llvm/srcop">SrcOp</a> = Copy-&gt;getOperand(1);</span></CodeLine>
<Link id="l02084" /><CodeLine lineNumber="2084"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> SrcReg = <a href="/docs/api/classes/llvm/srcop">SrcOp</a>.<a href="/docs/api/classes/llvm/srcop/#ae229785d0c8a8ce25d34be18fe150a54">getReg</a>();</span></CodeLine>
<Link id="l02085" /><CodeLine lineNumber="2085"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SrcReg.<a href="/docs/api/classes/llvm/register/#ab203bbcbc320180b1da9e9a92ee0c784">isVirtual</a>() || !<a href="/docs/api/classes/llvm/srcop">SrcOp</a>.readsReg())</span></CodeLine>
<Link id="l02086" /><CodeLine lineNumber="2086"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02087" /><CodeLine lineNumber="2087"></CodeLine>
<Link id="l02088" /><CodeLine lineNumber="2088"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;<a href="/docs/api/classes/llvm/dstop">DstOp</a> = Copy-&gt;getOperand(0);</span></CodeLine>
<Link id="l02089" /><CodeLine lineNumber="2089"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DstReg = <a href="/docs/api/classes/llvm/dstop">DstOp</a>.<a href="/docs/api/classes/llvm/dstop/#ad5f891a5d9822c7aab1b8bb0190a522f">getReg</a>();</span></CodeLine>
<Link id="l02090" /><CodeLine lineNumber="2090"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!DstReg.<a href="/docs/api/classes/llvm/register/#ab203bbcbc320180b1da9e9a92ee0c784">isVirtual</a>() || <a href="/docs/api/classes/llvm/dstop">DstOp</a>.isDead())</span></CodeLine>
<Link id="l02091" /><CodeLine lineNumber="2091"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02092" /><CodeLine lineNumber="2092"></CodeLine>
<Link id="l02093" /><CodeLine lineNumber="2093"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check if either the dest or source is local. If it&#39;s live across a back</span></CodeLine>
<Link id="l02094" /><CodeLine lineNumber="2094"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// edge, it&#39;s not local. Note that if both vregs are live across the back</span></CodeLine>
<Link id="l02095" /><CodeLine lineNumber="2095"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// edge, we cannot successfully contrain the copy without cyclic scheduling.</span></CodeLine>
<Link id="l02096" /><CodeLine lineNumber="2096"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If both the copy&#39;s source and dest are local live intervals, then we</span></CodeLine>
<Link id="l02097" /><CodeLine lineNumber="2097"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// should treat the dest as the global for the purpose of adding</span></CodeLine>
<Link id="l02098" /><CodeLine lineNumber="2098"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// constraints. This adds edges from source&#39;s other uses to the copy.</span></CodeLine>
<Link id="l02099" /><CodeLine lineNumber="2099"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> LocalReg = SrcReg;</span></CodeLine>
<Link id="l02100" /><CodeLine lineNumber="2100"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> GlobalReg = DstReg;</span></CodeLine>
<Link id="l02101" /><CodeLine lineNumber="2101"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/liveinterval">LiveInterval</a> &#42;LocalLI = &amp;LIS-&gt;<a href="/docs/api/classes/llvm/liveintervals/#a8208eacaf02c9742c8ed7f09ec0837f3">getInterval</a>(LocalReg);</span></CodeLine>
<Link id="l02102" /><CodeLine lineNumber="2102"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!LocalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#ae17e7d305505cddb57d8093ee934c387">isLocal</a>(RegionBeginIdx, RegionEndIdx)) &#123;</span></CodeLine>
<Link id="l02103" /><CodeLine lineNumber="2103"><span class="doxyHighlight">    LocalReg = DstReg;</span></CodeLine>
<Link id="l02104" /><CodeLine lineNumber="2104"><span class="doxyHighlight">    GlobalReg = SrcReg;</span></CodeLine>
<Link id="l02105" /><CodeLine lineNumber="2105"><span class="doxyHighlight">    LocalLI = &amp;LIS-&gt;<a href="/docs/api/classes/llvm/liveintervals/#a8208eacaf02c9742c8ed7f09ec0837f3">getInterval</a>(LocalReg);</span></CodeLine>
<Link id="l02106" /><CodeLine lineNumber="2106"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!LocalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#ae17e7d305505cddb57d8093ee934c387">isLocal</a>(RegionBeginIdx, RegionEndIdx))</span></CodeLine>
<Link id="l02107" /><CodeLine lineNumber="2107"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02108" /><CodeLine lineNumber="2108"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02109" /><CodeLine lineNumber="2109"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/liveinterval">LiveInterval</a> &#42;GlobalLI = &amp;LIS-&gt;<a href="/docs/api/classes/llvm/liveintervals/#a8208eacaf02c9742c8ed7f09ec0837f3">getInterval</a>(GlobalReg);</span></CodeLine>
<Link id="l02110" /><CodeLine lineNumber="2110"></CodeLine>
<Link id="l02111" /><CodeLine lineNumber="2111"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Find the global segment after the start of the local LI.</span></CodeLine>
<Link id="l02112" /><CodeLine lineNumber="2112"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/liverange/#a143c1fcb6066cb301f828ec4c18d79f4">LiveInterval::iterator</a> GlobalSegment = GlobalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#afeb00b9049a2391c990df15692caef63">find</a>(LocalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#a9b4b2c1bb443279588bd6582ad6a86b2">beginIndex</a>());</span></CodeLine>
<Link id="l02113" /><CodeLine lineNumber="2113"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If GlobalLI does not overlap LocalLI-&gt;start, then a copy directly feeds a</span></CodeLine>
<Link id="l02114" /><CodeLine lineNumber="2114"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// local live range. We could create edges from other global uses to the local</span></CodeLine>
<Link id="l02115" /><CodeLine lineNumber="2115"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// start, but the coalescer should have already eliminated these cases, so</span></CodeLine>
<Link id="l02116" /><CodeLine lineNumber="2116"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// don&#39;t bother dealing with it.</span></CodeLine>
<Link id="l02117" /><CodeLine lineNumber="2117"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (GlobalSegment == GlobalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#a757fd6afba0f531db70e78e057d147c6">end</a>())</span></CodeLine>
<Link id="l02118" /><CodeLine lineNumber="2118"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02119" /><CodeLine lineNumber="2119"></CodeLine>
<Link id="l02120" /><CodeLine lineNumber="2120"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If GlobalSegment is killed at the LocalLI-&gt;start, the call to find()</span></CodeLine>
<Link id="l02121" /><CodeLine lineNumber="2121"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// returned the next global segment. But if GlobalSegment overlaps with</span></CodeLine>
<Link id="l02122" /><CodeLine lineNumber="2122"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// LocalLI-&gt;start, then advance to the next segment. If a hole in GlobalLI</span></CodeLine>
<Link id="l02123" /><CodeLine lineNumber="2123"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// exists in LocalLI&#39;s vicinity, GlobalSegment will be the end of the hole.</span></CodeLine>
<Link id="l02124" /><CodeLine lineNumber="2124"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (GlobalSegment-&gt;contains(LocalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#a9b4b2c1bb443279588bd6582ad6a86b2">beginIndex</a>()))</span></CodeLine>
<Link id="l02125" /><CodeLine lineNumber="2125"><span class="doxyHighlight">    ++GlobalSegment;</span></CodeLine>
<Link id="l02126" /><CodeLine lineNumber="2126"></CodeLine>
<Link id="l02127" /><CodeLine lineNumber="2127"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (GlobalSegment == GlobalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#a757fd6afba0f531db70e78e057d147c6">end</a>())</span></CodeLine>
<Link id="l02128" /><CodeLine lineNumber="2128"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02129" /><CodeLine lineNumber="2129"></CodeLine>
<Link id="l02130" /><CodeLine lineNumber="2130"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check if GlobalLI contains a hole in the vicinity of LocalLI.</span></CodeLine>
<Link id="l02131" /><CodeLine lineNumber="2131"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (GlobalSegment != GlobalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#a9a5e7c523f12f9f164b786769de1ca47">begin</a>()) &#123;</span></CodeLine>
<Link id="l02132" /><CodeLine lineNumber="2132"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Two address defs have no hole.</span></CodeLine>
<Link id="l02133" /><CodeLine lineNumber="2133"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/slotindex/#a0b73244049319d841fd11a238f35b5d1">SlotIndex::isSameInstr</a>(std::prev(GlobalSegment)-&gt;end,</span></CodeLine>
<Link id="l02134" /><CodeLine lineNumber="2134"><span class="doxyHighlight">                               GlobalSegment-&gt;start)) &#123;</span></CodeLine>
<Link id="l02135" /><CodeLine lineNumber="2135"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02136" /><CodeLine lineNumber="2136"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02137" /><CodeLine lineNumber="2137"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If the prior global segment may be defined by the same two-address</span></CodeLine>
<Link id="l02138" /><CodeLine lineNumber="2138"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// instruction that also defines LocalLI, then can&#39;t make a hole here.</span></CodeLine>
<Link id="l02139" /><CodeLine lineNumber="2139"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/slotindex/#a0b73244049319d841fd11a238f35b5d1">SlotIndex::isSameInstr</a>(std::prev(GlobalSegment)-&gt;start,</span></CodeLine>
<Link id="l02140" /><CodeLine lineNumber="2140"><span class="doxyHighlight">                               LocalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#a9b4b2c1bb443279588bd6582ad6a86b2">beginIndex</a>())) &#123;</span></CodeLine>
<Link id="l02141" /><CodeLine lineNumber="2141"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02142" /><CodeLine lineNumber="2142"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02143" /><CodeLine lineNumber="2143"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If GlobalLI has a prior segment, it must be live into the EBB. Otherwise</span></CodeLine>
<Link id="l02144" /><CodeLine lineNumber="2144"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// it would be a disconnected component in the live range.</span></CodeLine>
<Link id="l02145" /><CodeLine lineNumber="2145"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(std::prev(GlobalSegment)-&gt;start &lt; LocalLI-&gt;beginIndex() &amp;&amp;</span></CodeLine>
<Link id="l02146" /><CodeLine lineNumber="2146"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;Disconnected LRG within the scheduling region.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02147" /><CodeLine lineNumber="2147"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02148" /><CodeLine lineNumber="2148"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;GlobalDef = LIS-&gt;<a href="/docs/api/classes/llvm/liveintervals/#a1882fe2a570964e4c6abb0eac322beab">getInstructionFromIndex</a>(GlobalSegment-&gt;start);</span></CodeLine>
<Link id="l02149" /><CodeLine lineNumber="2149"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!GlobalDef)</span></CodeLine>
<Link id="l02150" /><CodeLine lineNumber="2150"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02151" /><CodeLine lineNumber="2151"></CodeLine>
<Link id="l02152" /><CodeLine lineNumber="2152"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;GlobalSU = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(GlobalDef);</span></CodeLine>
<Link id="l02153" /><CodeLine lineNumber="2153"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!GlobalSU)</span></CodeLine>
<Link id="l02154" /><CodeLine lineNumber="2154"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02155" /><CodeLine lineNumber="2155"></CodeLine>
<Link id="l02156" /><CodeLine lineNumber="2156"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// GlobalDef is the bottom of the GlobalLI hole. Open the hole by</span></CodeLine>
<Link id="l02157" /><CodeLine lineNumber="2157"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// constraining the uses of the last local def to precede GlobalDef.</span></CodeLine>
<Link id="l02158" /><CodeLine lineNumber="2158"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;SUnit&#42;,8&gt;</a> LocalUses;</span></CodeLine>
<Link id="l02159" /><CodeLine lineNumber="2159"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/vninfo">VNInfo</a> &#42;LastLocalVN = LocalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#a7e1ec6260b229b2f5913405b758bc146">getVNInfoBefore</a>(LocalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#aa1bc5510e870a77ebe055b1524d9fd26">endIndex</a>());</span></CodeLine>
<Link id="l02160" /><CodeLine lineNumber="2160"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;LastLocalDef = LIS-&gt;<a href="/docs/api/classes/llvm/liveintervals/#a1882fe2a570964e4c6abb0eac322beab">getInstructionFromIndex</a>(LastLocalVN-&gt;<a href="/docs/api/classes/llvm/vninfo/#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>);</span></CodeLine>
<Link id="l02161" /><CodeLine lineNumber="2161"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;LastLocalSU = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(LastLocalDef);</span></CodeLine>
<Link id="l02162" /><CodeLine lineNumber="2162"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sdep">SDep</a> &amp;Succ : LastLocalSU-&gt;<a href="/docs/api/classes/llvm/sunit/#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>) &#123;</span></CodeLine>
<Link id="l02163" /><CodeLine lineNumber="2163"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Succ.<a href="/docs/api/classes/llvm/sdep/#a055c65558a3e0f7d48f1ed3dde061199">getKind</a>() != <a href="/docs/api/classes/llvm/sdep/#a07333f8ba53e0454b7ec6365860c0732af91df2221290eaa1a368403ffad49a26">SDep::Data</a> || Succ.<a href="/docs/api/classes/llvm/sdep/#a8b51361656ac436c2c02a20e6196cff1">getReg</a>() != LocalReg)</span></CodeLine>
<Link id="l02164" /><CodeLine lineNumber="2164"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02165" /><CodeLine lineNumber="2165"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Succ.<a href="/docs/api/classes/llvm/sdep/#a03a2dc5f9f321a2ce28f5c641dfe5455">getSUnit</a>() == GlobalSU)</span></CodeLine>
<Link id="l02166" /><CodeLine lineNumber="2166"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02167" /><CodeLine lineNumber="2167"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ac384df17605ecce542a6d2567c7f1ee0">canAddEdge</a>(GlobalSU, Succ.<a href="/docs/api/classes/llvm/sdep/#a03a2dc5f9f321a2ce28f5c641dfe5455">getSUnit</a>()))</span></CodeLine>
<Link id="l02168" /><CodeLine lineNumber="2168"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02169" /><CodeLine lineNumber="2169"><span class="doxyHighlight">    LocalUses.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Succ.<a href="/docs/api/classes/llvm/sdep/#a03a2dc5f9f321a2ce28f5c641dfe5455">getSUnit</a>());</span></CodeLine>
<Link id="l02170" /><CodeLine lineNumber="2170"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02171" /><CodeLine lineNumber="2171"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Open the top of the GlobalLI hole by constraining any earlier global uses</span></CodeLine>
<Link id="l02172" /><CodeLine lineNumber="2172"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// to precede the start of LocalLI.</span></CodeLine>
<Link id="l02173" /><CodeLine lineNumber="2173"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;SUnit&#42;,8&gt;</a> GlobalUses;</span></CodeLine>
<Link id="l02174" /><CodeLine lineNumber="2174"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;FirstLocalDef =</span></CodeLine>
<Link id="l02175" /><CodeLine lineNumber="2175"><span class="doxyHighlight">    LIS-&gt;<a href="/docs/api/classes/llvm/liveintervals/#a1882fe2a570964e4c6abb0eac322beab">getInstructionFromIndex</a>(LocalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#a9b4b2c1bb443279588bd6582ad6a86b2">beginIndex</a>());</span></CodeLine>
<Link id="l02176" /><CodeLine lineNumber="2176"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;FirstLocalSU = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(FirstLocalDef);</span></CodeLine>
<Link id="l02177" /><CodeLine lineNumber="2177"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sdep">SDep</a> &amp;Pred : GlobalSU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae2b43854b542de66eec6475adc48f56c">Preds</a>) &#123;</span></CodeLine>
<Link id="l02178" /><CodeLine lineNumber="2178"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Pred.getKind() != <a href="/docs/api/classes/llvm/sdep/#a07333f8ba53e0454b7ec6365860c0732abe9561936346ab5c5e22fe544994b06e">SDep::Anti</a> || Pred.getReg() != GlobalReg)</span></CodeLine>
<Link id="l02179" /><CodeLine lineNumber="2179"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02180" /><CodeLine lineNumber="2180"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Pred.getSUnit() == FirstLocalSU)</span></CodeLine>
<Link id="l02181" /><CodeLine lineNumber="2181"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02182" /><CodeLine lineNumber="2182"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ac384df17605ecce542a6d2567c7f1ee0">canAddEdge</a>(FirstLocalSU, Pred.getSUnit()))</span></CodeLine>
<Link id="l02183" /><CodeLine lineNumber="2183"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02184" /><CodeLine lineNumber="2184"><span class="doxyHighlight">    GlobalUses.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Pred.getSUnit());</span></CodeLine>
<Link id="l02185" /><CodeLine lineNumber="2185"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02186" /><CodeLine lineNumber="2186"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Constraining copy SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; CopySU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;)\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02187" /><CodeLine lineNumber="2187"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Add the weak edges.</span></CodeLine>
<Link id="l02188" /><CodeLine lineNumber="2188"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;LU : LocalUses) &#123;</span></CodeLine>
<Link id="l02189" /><CodeLine lineNumber="2189"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Local use SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; LU-&gt;NodeNum &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) -&gt; SU(&quot;</span></CodeLine>
<Link id="l02190" /><CodeLine lineNumber="2190"><span class="doxyHighlight">                      &lt;&lt; GlobalSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;)\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02191" /><CodeLine lineNumber="2191"><span class="doxyHighlight">    DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a86bfa4838cb7e42648615d27c94c8017">addEdge</a>(GlobalSU, <a href="/docs/api/classes/llvm/sdep">SDep</a>(LU, <a href="/docs/api/classes/llvm/sdep/#a551060cb0333d9d0cfdacd2576d817b9ac698747d5c996ab4f760518f55be1346">SDep::Weak</a>));</span></CodeLine>
<Link id="l02192" /><CodeLine lineNumber="2192"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02193" /><CodeLine lineNumber="2193"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;GU : GlobalUses) &#123;</span></CodeLine>
<Link id="l02194" /><CodeLine lineNumber="2194"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Global use SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; GU-&gt;NodeNum &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) -&gt; SU(&quot;</span></CodeLine>
<Link id="l02195" /><CodeLine lineNumber="2195"><span class="doxyHighlight">                      &lt;&lt; FirstLocalSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;)\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02196" /><CodeLine lineNumber="2196"><span class="doxyHighlight">    DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a86bfa4838cb7e42648615d27c94c8017">addEdge</a>(FirstLocalSU, <a href="/docs/api/classes/llvm/sdep">SDep</a>(GU, <a href="/docs/api/classes/llvm/sdep/#a551060cb0333d9d0cfdacd2576d817b9ac698747d5c996ab4f760518f55be1346">SDep::Weak</a>));</span></CodeLine>
<Link id="l02197" /><CodeLine lineNumber="2197"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02198" /><CodeLine lineNumber="2198"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02199" /><CodeLine lineNumber="2199"></CodeLine>
<Link id="l02200" /><CodeLine lineNumber="2200"><span class="doxyHighlightComment">/// Callback from DAG postProcessing to create weak edges to encourage</span></CodeLine>
<Link id="l02201" /><CodeLine lineNumber="2201"><span class="doxyHighlightComment">/// copy elimination.</span></CodeLine>
<Link id="l02202" /><CodeLine lineNumber="2202" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#af6b0c8c54226e0aafa107e5e92c813a2"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#af6b0c8c54226e0aafa107e5e92c813a2">CopyConstrain::apply</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;DAGInstrs) &#123;</span></CodeLine>
<Link id="l02203" /><CodeLine lineNumber="2203"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;DAG = </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a>&#42;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(DAGInstrs);</span></CodeLine>
<Link id="l02204" /><CodeLine lineNumber="2204"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a78c0f3feb8a81ca338f843494cff564e">hasVRegLiveness</a>() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Expect VRegs with LiveIntervals&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02205" /><CodeLine lineNumber="2205"></CodeLine>
<Link id="l02206" /><CodeLine lineNumber="2206"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> FirstPos = <a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>(), DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a21805259f54dab47c2b3da009216996a">end</a>());</span></CodeLine>
<Link id="l02207" /><CodeLine lineNumber="2207"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (FirstPos == DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a21805259f54dab47c2b3da009216996a">end</a>())</span></CodeLine>
<Link id="l02208" /><CodeLine lineNumber="2208"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02209" /><CodeLine lineNumber="2209"><span class="doxyHighlight">  RegionBeginIdx = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a7dcf5173867549aff2a8cdcc70dd2800">getLIS</a>()-&gt;<a href="/docs/api/classes/llvm/liveintervals/#a6f3043b29023d270fc4bc5062dff7cee">getInstructionIndex</a>(&#42;FirstPos);</span></CodeLine>
<Link id="l02210" /><CodeLine lineNumber="2210"><span class="doxyHighlight">  RegionEndIdx = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a7dcf5173867549aff2a8cdcc70dd2800">getLIS</a>()-&gt;<a href="/docs/api/classes/llvm/liveintervals/#a6f3043b29023d270fc4bc5062dff7cee">getInstructionIndex</a>(</span></CodeLine>
<Link id="l02211" /><CodeLine lineNumber="2211"><span class="doxyHighlight">      &#42;<a href="#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a21805259f54dab47c2b3da009216996a">end</a>(), DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>()));</span></CodeLine>
<Link id="l02212" /><CodeLine lineNumber="2212"></CodeLine>
<Link id="l02213" /><CodeLine lineNumber="2213"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &amp;SU : DAG-&gt;<a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>) &#123;</span></CodeLine>
<Link id="l02214" /><CodeLine lineNumber="2214"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SU.<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>()-&gt;<a href="/docs/api/classes/llvm/machineinstr/#a1912d4fbc40c61a12b1f770ad54dfd74">isCopy</a>())</span></CodeLine>
<Link id="l02215" /><CodeLine lineNumber="2215"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02216" /><CodeLine lineNumber="2216"></CodeLine>
<Link id="l02217" /><CodeLine lineNumber="2217"><span class="doxyHighlight">    <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#aee8fb987217bee89c0f2059168e834ec">constrainLocalCopy</a>(&amp;SU, </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>&#42;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(DAG));</span></CodeLine>
<Link id="l02218" /><CodeLine lineNumber="2218"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02219" /><CodeLine lineNumber="2219"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02220" /><CodeLine lineNumber="2220"></CodeLine>
<Link id="l02221" /><CodeLine lineNumber="2221"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l02222" /><CodeLine lineNumber="2222"><span class="doxyHighlightComment">// MachineSchedStrategy helpers used by GenericScheduler, GenericPostScheduler</span></CodeLine>
<Link id="l02223" /><CodeLine lineNumber="2223"><span class="doxyHighlightComment">// and possibly other custom schedulers.</span></CodeLine>
<Link id="l02224" /><CodeLine lineNumber="2224"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l02225" /><CodeLine lineNumber="2225"></CodeLine>
<Link id="l02226" /><CodeLine lineNumber="2226" lineLink="#a2876d288bd148637a0e8d79ce3f0f3fb"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="#a2876d288bd148637a0e8d79ce3f0f3fb">InvalidCycle</a> = ~0U;</span></CodeLine>
<Link id="l02227" /><CodeLine lineNumber="2227"></CodeLine>
<Link id="l02228" /><CodeLine lineNumber="2228" lineLink="/docs/api/classes/llvm/schedboundary/#a8ec89d1b58602018ae4e1f98f980501e"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/schedboundary/#a8ec89d1b58602018ae4e1f98f980501e">SchedBoundary::~SchedBoundary</a>() &#123; </span><span class="doxyHighlightKeyword">delete</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>; &#125;</span></CodeLine>
<Link id="l02229" /><CodeLine lineNumber="2229"></CodeLine>
<Link id="l02230" /><CodeLine lineNumber="2230"><span class="doxyHighlightComment">/// Given a Count of resource usage and a Latency value, return true if a</span></CodeLine>
<Link id="l02231" /><CodeLine lineNumber="2231"><span class="doxyHighlightComment">/// SchedBoundary becomes resource limited.</span></CodeLine>
<Link id="l02232" /><CodeLine lineNumber="2232"><span class="doxyHighlightComment">/// If we are checking after scheduling a node, we should return true when</span></CodeLine>
<Link id="l02233" /><CodeLine lineNumber="2233"><span class="doxyHighlightComment">/// we just reach the resource limit.</span></CodeLine>
<Link id="l02234" /><CodeLine lineNumber="2234" lineLink="#a77e51ffc94a77ff8e4778e59a02e7b67"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a77e51ffc94a77ff8e4778e59a02e7b67">checkResourceLimit</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> LFactor, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a845e08be4b0320d66901a66b0c0e9509">Count</a>,</span></CodeLine>
<Link id="l02235" /><CodeLine lineNumber="2235"><span class="doxyHighlight">                               </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a>, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> AfterSchedNode) &#123;</span></CodeLine>
<Link id="l02236" /><CodeLine lineNumber="2236"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> ResCntFactor = (int)(<a href="/docs/api/namespaces/llvm/#a845e08be4b0320d66901a66b0c0e9509">Count</a> - (<a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a> &#42; LFactor));</span></CodeLine>
<Link id="l02237" /><CodeLine lineNumber="2237"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AfterSchedNode)</span></CodeLine>
<Link id="l02238" /><CodeLine lineNumber="2238"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ResCntFactor &gt;= (int)LFactor;</span></CodeLine>
<Link id="l02239" /><CodeLine lineNumber="2239"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l02240" /><CodeLine lineNumber="2240"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ResCntFactor &gt; (int)LFactor;</span></CodeLine>
<Link id="l02241" /><CodeLine lineNumber="2241"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02242" /><CodeLine lineNumber="2242"></CodeLine>
<Link id="l02243" /><CodeLine lineNumber="2243" lineLink="/docs/api/classes/llvm/schedboundary/#ad4863d625621382105fd66cd82810588"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#ad4863d625621382105fd66cd82810588">SchedBoundary::reset</a>() &#123;</span></CodeLine>
<Link id="l02244" /><CodeLine lineNumber="2244"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// A new HazardRec is created for each DAG and owned by SchedBoundary.</span></CodeLine>
<Link id="l02245" /><CodeLine lineNumber="2245"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Destroying and reconstructing it is very expensive though. So keep</span></CodeLine>
<Link id="l02246" /><CodeLine lineNumber="2246"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// invalid, placeholder HazardRecs.</span></CodeLine>
<Link id="l02247" /><CodeLine lineNumber="2247"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a> &amp;&amp; <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;isEnabled()) &#123;</span></CodeLine>
<Link id="l02248" /><CodeLine lineNumber="2248"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">delete</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>;</span></CodeLine>
<Link id="l02249" /><CodeLine lineNumber="2249"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02250" /><CodeLine lineNumber="2250"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02251" /><CodeLine lineNumber="2251"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.clear();</span></CodeLine>
<Link id="l02252" /><CodeLine lineNumber="2252"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.clear();</span></CodeLine>
<Link id="l02253" /><CodeLine lineNumber="2253"><span class="doxyHighlight">  CheckPending = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02254" /><CodeLine lineNumber="2254"><span class="doxyHighlight">  CurrCycle = 0;</span></CodeLine>
<Link id="l02255" /><CodeLine lineNumber="2255"><span class="doxyHighlight">  CurrMOps = 0;</span></CodeLine>
<Link id="l02256" /><CodeLine lineNumber="2256"><span class="doxyHighlight">  MinReadyCycle = std::numeric&#95;limits&lt;unsigned&gt;::max();</span></CodeLine>
<Link id="l02257" /><CodeLine lineNumber="2257"><span class="doxyHighlight">  ExpectedLatency = 0;</span></CodeLine>
<Link id="l02258" /><CodeLine lineNumber="2258"><span class="doxyHighlight">  DependentLatency = 0;</span></CodeLine>
<Link id="l02259" /><CodeLine lineNumber="2259"><span class="doxyHighlight">  RetiredMOps = 0;</span></CodeLine>
<Link id="l02260" /><CodeLine lineNumber="2260"><span class="doxyHighlight">  MaxExecutedResCount = 0;</span></CodeLine>
<Link id="l02261" /><CodeLine lineNumber="2261"><span class="doxyHighlight">  ZoneCritResIdx = 0;</span></CodeLine>
<Link id="l02262" /><CodeLine lineNumber="2262"><span class="doxyHighlight">  IsResourceLimited = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02263" /><CodeLine lineNumber="2263"><span class="doxyHighlight">  ReservedCycles.clear();</span></CodeLine>
<Link id="l02264" /><CodeLine lineNumber="2264"><span class="doxyHighlight">  ReservedResourceSegments.clear();</span></CodeLine>
<Link id="l02265" /><CodeLine lineNumber="2265"><span class="doxyHighlight">  ReservedCyclesIndex.clear();</span></CodeLine>
<Link id="l02266" /><CodeLine lineNumber="2266"><span class="doxyHighlight">  ResourceGroupSubUnitMasks.clear();</span></CodeLine>
<Link id="l02267" /><CodeLine lineNumber="2267"><span class="doxyHighlightPreprocessor">#if LLVM&#95;ENABLE&#95;ABI&#95;BREAKING&#95;CHECKS</span></CodeLine>
<Link id="l02268" /><CodeLine lineNumber="2268"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Track the maximum number of stall cycles that could arise either from the</span></CodeLine>
<Link id="l02269" /><CodeLine lineNumber="2269"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// latency of a DAG edge or the number of cycles that a processor resource is</span></CodeLine>
<Link id="l02270" /><CodeLine lineNumber="2270"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// reserved (SchedBoundary::ReservedCycles).</span></CodeLine>
<Link id="l02271" /><CodeLine lineNumber="2271"><span class="doxyHighlight">  MaxObservedStall = 0;</span></CodeLine>
<Link id="l02272" /><CodeLine lineNumber="2272"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l02273" /><CodeLine lineNumber="2273"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Reserve a zero-count for invalid CritResIdx.</span></CodeLine>
<Link id="l02274" /><CodeLine lineNumber="2274"><span class="doxyHighlight">  ExecutedResCounts.resize(1);</span></CodeLine>
<Link id="l02275" /><CodeLine lineNumber="2275"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!ExecutedResCounts&#91;0&#93; &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;nonzero count for bad resource&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02276" /><CodeLine lineNumber="2276"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02277" /><CodeLine lineNumber="2277"></CodeLine>
<Link id="l02278" /><CodeLine lineNumber="2278" lineLink="/docs/api/structs/llvm/schedremainder/#a55cad625d59b0f4452d893b4a25c66b6"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/schedremainder/#a55cad625d59b0f4452d893b4a25c66b6">SchedRemainder::</a></span></CodeLine>
<Link id="l02279" /><CodeLine lineNumber="2279"><span class="doxyHighlight"><a href="/docs/api/structs/llvm/schedremainder/#a55cad625d59b0f4452d893b4a25c66b6">init</a>(<a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;DAG, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetschedmodel">TargetSchedModel</a> &#42;SchedModel) &#123;</span></CodeLine>
<Link id="l02280" /><CodeLine lineNumber="2280"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/schedremainder/#ad27287120e709785dac7c6e4da555953">reset</a>();</span></CodeLine>
<Link id="l02281" /><CodeLine lineNumber="2281"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SchedModel-&gt;<a href="/docs/api/classes/llvm/targetschedmodel/#a572a0c9d17306d9414106ad1cf4c8052">hasInstrSchedModel</a>())</span></CodeLine>
<Link id="l02282" /><CodeLine lineNumber="2282"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02283" /><CodeLine lineNumber="2283"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/schedremainder/#a7bab07d89945b679f337765882d48362">RemainingCounts</a>.resize(SchedModel-&gt;<a href="/docs/api/classes/llvm/targetschedmodel/#aefe560ffcce905bc34e2d46becb54e84">getNumProcResourceKinds</a>());</span></CodeLine>
<Link id="l02284" /><CodeLine lineNumber="2284"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &amp;SU : DAG-&gt;<a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>) &#123;</span></CodeLine>
<Link id="l02285" /><CodeLine lineNumber="2285"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a4bf5573660c55924d68b517a0e9b4554">getSchedClass</a>(&amp;SU);</span></CodeLine>
<Link id="l02286" /><CodeLine lineNumber="2286"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/schedremainder/#a69f55541ec46d86d2fdef78b950f4fef">RemIssueCount</a> += SchedModel-&gt;<a href="/docs/api/classes/llvm/targetschedmodel/#adc6870d8a702ca4f480785afd7a1eba7">getNumMicroOps</a>(SU.<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>(), SC)</span></CodeLine>
<Link id="l02287" /><CodeLine lineNumber="2287"><span class="doxyHighlight">      &#42; SchedModel-&gt;<a href="/docs/api/classes/llvm/targetschedmodel/#a3803fd752ed113c37d71580a50888f26">getMicroOpFactor</a>();</span></CodeLine>
<Link id="l02288" /><CodeLine lineNumber="2288"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/targetschedmodel/#a7b653a507e8307775b33e01655d3b8d8">TargetSchedModel::ProcResIter</a></span></CodeLine>
<Link id="l02289" /><CodeLine lineNumber="2289"><span class="doxyHighlight">           PI = SchedModel-&gt;<a href="/docs/api/classes/llvm/targetschedmodel/#af7c94f0b04c1a466ee77ca749cd8dc50">getWriteProcResBegin</a>(SC),</span></CodeLine>
<Link id="l02290" /><CodeLine lineNumber="2290"><span class="doxyHighlight">           PE = SchedModel-&gt;<a href="/docs/api/classes/llvm/targetschedmodel/#a3e53e3e37d8a810d38ffb83268103b23">getWriteProcResEnd</a>(SC); PI != PE; ++PI) &#123;</span></CodeLine>
<Link id="l02291" /><CodeLine lineNumber="2291"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> PIdx = PI-&gt;ProcResourceIdx;</span></CodeLine>
<Link id="l02292" /><CodeLine lineNumber="2292"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Factor = SchedModel-&gt;<a href="/docs/api/classes/llvm/targetschedmodel/#a9c30a0cd9c2311a92add146b8def5eea">getResourceFactor</a>(PIdx);</span></CodeLine>
<Link id="l02293" /><CodeLine lineNumber="2293"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PI-&gt;ReleaseAtCycle &gt;= PI-&gt;AcquireAtCycle);</span></CodeLine>
<Link id="l02294" /><CodeLine lineNumber="2294"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/schedremainder/#a7bab07d89945b679f337765882d48362">RemainingCounts</a>&#91;PIdx&#93; +=</span></CodeLine>
<Link id="l02295" /><CodeLine lineNumber="2295"><span class="doxyHighlight">          (Factor &#42; (PI-&gt;ReleaseAtCycle - PI-&gt;AcquireAtCycle));</span></CodeLine>
<Link id="l02296" /><CodeLine lineNumber="2296"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02297" /><CodeLine lineNumber="2297"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02298" /><CodeLine lineNumber="2298"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02299" /><CodeLine lineNumber="2299"></CodeLine>
<Link id="l02300" /><CodeLine lineNumber="2300" lineLink="/docs/api/classes/llvm/schedboundary/#aab0971160b7ebc9ee2581f651a3b7f01"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#aab0971160b7ebc9ee2581f651a3b7f01">SchedBoundary::</a></span></CodeLine>
<Link id="l02301" /><CodeLine lineNumber="2301"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/schedboundary/#aab0971160b7ebc9ee2581f651a3b7f01">init</a>(<a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;dag, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetschedmodel">TargetSchedModel</a> &#42;smodel, <a href="/docs/api/structs/llvm/schedremainder">SchedRemainder</a> &#42;<a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#ac7752c64c2d688b882808f06328ad521">rem</a>) &#123;</span></CodeLine>
<Link id="l02302" /><CodeLine lineNumber="2302"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/schedboundary/#ad4863d625621382105fd66cd82810588">reset</a>();</span></CodeLine>
<Link id="l02303" /><CodeLine lineNumber="2303"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/schedboundary/#a4f3e434b23939cec7a3c61b45071a017">DAG</a> = dag;</span></CodeLine>
<Link id="l02304" /><CodeLine lineNumber="2304"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a> = smodel;</span></CodeLine>
<Link id="l02305" /><CodeLine lineNumber="2305"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/schedboundary/#a64b3464e46fb663d1c409fd21a0fa97b">Rem</a> = <a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#ac7752c64c2d688b882808f06328ad521">rem</a>;</span></CodeLine>
<Link id="l02306" /><CodeLine lineNumber="2306"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;hasInstrSchedModel()) &#123;</span></CodeLine>
<Link id="l02307" /><CodeLine lineNumber="2307"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ResourceCount = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getNumProcResourceKinds();</span></CodeLine>
<Link id="l02308" /><CodeLine lineNumber="2308"><span class="doxyHighlight">    ReservedCyclesIndex.resize(ResourceCount);</span></CodeLine>
<Link id="l02309" /><CodeLine lineNumber="2309"><span class="doxyHighlight">    ExecutedResCounts.resize(ResourceCount);</span></CodeLine>
<Link id="l02310" /><CodeLine lineNumber="2310"><span class="doxyHighlight">    ResourceGroupSubUnitMasks.resize(ResourceCount, <a href="/docs/api/classes/llvm/apint">APInt</a>(ResourceCount, 0));</span></CodeLine>
<Link id="l02311" /><CodeLine lineNumber="2311"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumUnits = 0;</span></CodeLine>
<Link id="l02312" /><CodeLine lineNumber="2312"></CodeLine>
<Link id="l02313" /><CodeLine lineNumber="2313"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 0; i &lt; ResourceCount; ++i) &#123;</span></CodeLine>
<Link id="l02314" /><CodeLine lineNumber="2314"><span class="doxyHighlight">      ReservedCyclesIndex&#91;i&#93; = NumUnits;</span></CodeLine>
<Link id="l02315" /><CodeLine lineNumber="2315"><span class="doxyHighlight">      NumUnits += <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getProcResource(i)-&gt;NumUnits;</span></CodeLine>
<Link id="l02316" /><CodeLine lineNumber="2316"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#aa00ca9cf2d191f3ae5e93a8cd3ddeb60">isUnbufferedGroup</a>(i)) &#123;</span></CodeLine>
<Link id="l02317" /><CodeLine lineNumber="2317"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SubUnits = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getProcResource(i)-&gt;SubUnitsIdxBegin;</span></CodeLine>
<Link id="l02318" /><CodeLine lineNumber="2318"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> U = 0, UE = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getProcResource(i)-&gt;NumUnits;</span></CodeLine>
<Link id="l02319" /><CodeLine lineNumber="2319"><span class="doxyHighlight">             U != UE; ++U)</span></CodeLine>
<Link id="l02320" /><CodeLine lineNumber="2320"><span class="doxyHighlight">          ResourceGroupSubUnitMasks&#91;i&#93;.setBit(SubUnits&#91;U&#93;);</span></CodeLine>
<Link id="l02321" /><CodeLine lineNumber="2321"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02322" /><CodeLine lineNumber="2322"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02323" /><CodeLine lineNumber="2323"></CodeLine>
<Link id="l02324" /><CodeLine lineNumber="2324"><span class="doxyHighlight">    ReservedCycles.resize(NumUnits, <a href="#a2876d288bd148637a0e8d79ce3f0f3fb">InvalidCycle</a>);</span></CodeLine>
<Link id="l02325" /><CodeLine lineNumber="2325"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02326" /><CodeLine lineNumber="2326"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02327" /><CodeLine lineNumber="2327"></CodeLine>
<Link id="l02328" /><CodeLine lineNumber="2328"><span class="doxyHighlightComment">/// Compute the stall cycles based on this SUnit&#39;s ready time. Heuristics treat</span></CodeLine>
<Link id="l02329" /><CodeLine lineNumber="2329"><span class="doxyHighlightComment">/// these &quot;soft stalls&quot; differently than the hard stall cycles based on CPU</span></CodeLine>
<Link id="l02330" /><CodeLine lineNumber="2330"><span class="doxyHighlightComment">/// resources and computed by checkHazard(). A fully in-order model</span></CodeLine>
<Link id="l02331" /><CodeLine lineNumber="2331"><span class="doxyHighlightComment">/// (MicroOpBufferSize==0) will not make use of this since instructions are not</span></CodeLine>
<Link id="l02332" /><CodeLine lineNumber="2332"><span class="doxyHighlightComment">/// available for scheduling until they are ready. However, a weaker in-order</span></CodeLine>
<Link id="l02333" /><CodeLine lineNumber="2333"><span class="doxyHighlightComment">/// model may use this for heuristics. For example, if a processor has in-order</span></CodeLine>
<Link id="l02334" /><CodeLine lineNumber="2334"><span class="doxyHighlightComment">/// behavior when reading certain resources, this may come into play.</span></CodeLine>
<Link id="l02335" /><CodeLine lineNumber="2335" lineLink="/docs/api/classes/llvm/schedboundary/#a4a674627365b72b17a9b2e0a99d40ce1"><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#a4a674627365b72b17a9b2e0a99d40ce1">SchedBoundary::getLatencyStallCycles</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU) &#123;</span></CodeLine>
<Link id="l02336" /><CodeLine lineNumber="2336"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a4ac4d36cb59a4bbf5d93513dad0ff0e9">isUnbuffered</a>)</span></CodeLine>
<Link id="l02337" /><CodeLine lineNumber="2337"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> 0;</span></CodeLine>
<Link id="l02338" /><CodeLine lineNumber="2338"></CodeLine>
<Link id="l02339" /><CodeLine lineNumber="2339"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ReadyCycle = (<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() ? SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> : SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>);</span></CodeLine>
<Link id="l02340" /><CodeLine lineNumber="2340"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ReadyCycle &gt; CurrCycle)</span></CodeLine>
<Link id="l02341" /><CodeLine lineNumber="2341"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ReadyCycle - CurrCycle;</span></CodeLine>
<Link id="l02342" /><CodeLine lineNumber="2342"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> 0;</span></CodeLine>
<Link id="l02343" /><CodeLine lineNumber="2343"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02344" /><CodeLine lineNumber="2344"></CodeLine>
<Link id="l02345" /><CodeLine lineNumber="2345"><span class="doxyHighlightComment">/// Compute the next cycle at which the given processor resource unit</span></CodeLine>
<Link id="l02346" /><CodeLine lineNumber="2346"><span class="doxyHighlightComment">/// can be scheduled.</span></CodeLine>
<Link id="l02347" /><CodeLine lineNumber="2347" lineLink="/docs/api/classes/llvm/schedboundary/#a0b30387e76d2b5a34988ed566a3e5188"><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#a0b30387e76d2b5a34988ed566a3e5188">SchedBoundary::getNextResourceCycleByInstance</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> InstanceIdx,</span></CodeLine>
<Link id="l02348" /><CodeLine lineNumber="2348"><span class="doxyHighlight">                                                       </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ReleaseAtCycle,</span></CodeLine>
<Link id="l02349" /><CodeLine lineNumber="2349"><span class="doxyHighlight">                                                       </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AcquireAtCycle) &#123;</span></CodeLine>
<Link id="l02350" /><CodeLine lineNumber="2350"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a> &amp;&amp; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;enableIntervals()) &#123;</span></CodeLine>
<Link id="l02351" /><CodeLine lineNumber="2351"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>())</span></CodeLine>
<Link id="l02352" /><CodeLine lineNumber="2352"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ReservedResourceSegments&#91;InstanceIdx&#93;.getFirstAvailableAtFromTop(</span></CodeLine>
<Link id="l02353" /><CodeLine lineNumber="2353"><span class="doxyHighlight">          CurrCycle, AcquireAtCycle, ReleaseAtCycle);</span></CodeLine>
<Link id="l02354" /><CodeLine lineNumber="2354"></CodeLine>
<Link id="l02355" /><CodeLine lineNumber="2355"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ReservedResourceSegments&#91;InstanceIdx&#93;.getFirstAvailableAtFromBottom(</span></CodeLine>
<Link id="l02356" /><CodeLine lineNumber="2356"><span class="doxyHighlight">        CurrCycle, AcquireAtCycle, ReleaseAtCycle);</span></CodeLine>
<Link id="l02357" /><CodeLine lineNumber="2357"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02358" /><CodeLine lineNumber="2358"></CodeLine>
<Link id="l02359" /><CodeLine lineNumber="2359"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NextUnreserved = ReservedCycles&#91;InstanceIdx&#93;;</span></CodeLine>
<Link id="l02360" /><CodeLine lineNumber="2360"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If this resource has never been used, always return cycle zero.</span></CodeLine>
<Link id="l02361" /><CodeLine lineNumber="2361"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NextUnreserved == <a href="#a2876d288bd148637a0e8d79ce3f0f3fb">InvalidCycle</a>)</span></CodeLine>
<Link id="l02362" /><CodeLine lineNumber="2362"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> CurrCycle;</span></CodeLine>
<Link id="l02363" /><CodeLine lineNumber="2363"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For bottom-up scheduling add the cycles needed for the current operation.</span></CodeLine>
<Link id="l02364" /><CodeLine lineNumber="2364"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>())</span></CodeLine>
<Link id="l02365" /><CodeLine lineNumber="2365"><span class="doxyHighlight">    NextUnreserved = std::max(CurrCycle, NextUnreserved + ReleaseAtCycle);</span></CodeLine>
<Link id="l02366" /><CodeLine lineNumber="2366"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> NextUnreserved;</span></CodeLine>
<Link id="l02367" /><CodeLine lineNumber="2367"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02368" /><CodeLine lineNumber="2368"></CodeLine>
<Link id="l02369" /><CodeLine lineNumber="2369"><span class="doxyHighlightComment">/// Compute the next cycle at which the given processor resource can be</span></CodeLine>
<Link id="l02370" /><CodeLine lineNumber="2370"><span class="doxyHighlightComment">/// scheduled.  Returns the next cycle and the index of the processor resource</span></CodeLine>
<Link id="l02371" /><CodeLine lineNumber="2371"><span class="doxyHighlightComment">/// instance in the reserved cycles vector.</span></CodeLine>
<Link id="l02372" /><CodeLine lineNumber="2372"><span class="doxyHighlight">std::pair&lt;unsigned, unsigned&gt;</span></CodeLine>
<Link id="l02373" /><CodeLine lineNumber="2373" lineLink="/docs/api/classes/llvm/schedboundary/#adfca67c9b359b7ad02ab497632bd6b74"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/schedboundary/#adfca67c9b359b7ad02ab497632bd6b74">SchedBoundary::getNextResourceCycle</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> PIdx,</span></CodeLine>
<Link id="l02374" /><CodeLine lineNumber="2374"><span class="doxyHighlight">                                    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ReleaseAtCycle,</span></CodeLine>
<Link id="l02375" /><CodeLine lineNumber="2375"><span class="doxyHighlight">                                    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AcquireAtCycle) &#123;</span></CodeLine>
<Link id="l02376" /><CodeLine lineNumber="2376"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#afaad94654d336ce094254a1c694ee4e5">MischedDetailResourceBooking</a>) &#123;</span></CodeLine>
<Link id="l02377" /><CodeLine lineNumber="2377"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Resource booking (@&quot;</span><span class="doxyHighlight"> &lt;&lt; CurrCycle &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c): \\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02378" /><CodeLine lineNumber="2378"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/schedboundary/#a53bfc0f964240b77c4569bea523c2b39">dumpReservedCycles</a>());</span></CodeLine>
<Link id="l02379" /><CodeLine lineNumber="2379"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  getNextResourceCycle (@&quot;</span><span class="doxyHighlight"> &lt;&lt; CurrCycle &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c): \\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02380" /><CodeLine lineNumber="2380"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02381" /><CodeLine lineNumber="2381"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> MinNextUnreserved = <a href="#a2876d288bd148637a0e8d79ce3f0f3fb">InvalidCycle</a>;</span></CodeLine>
<Link id="l02382" /><CodeLine lineNumber="2382"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> InstanceIdx = 0;</span></CodeLine>
<Link id="l02383" /><CodeLine lineNumber="2383"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> StartIndex = ReservedCyclesIndex&#91;PIdx&#93;;</span></CodeLine>
<Link id="l02384" /><CodeLine lineNumber="2384"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumberOfInstances = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getProcResource(PIdx)-&gt;NumUnits;</span></CodeLine>
<Link id="l02385" /><CodeLine lineNumber="2385"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumberOfInstances &gt; 0 &amp;&amp;</span></CodeLine>
<Link id="l02386" /><CodeLine lineNumber="2386"><span class="doxyHighlight">         </span><span class="doxyHighlightStringLiteral">&quot;Cannot have zero instances of a ProcResource&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02387" /><CodeLine lineNumber="2387"></CodeLine>
<Link id="l02388" /><CodeLine lineNumber="2388"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#aa00ca9cf2d191f3ae5e93a8cd3ddeb60">isUnbufferedGroup</a>(PIdx)) &#123;</span></CodeLine>
<Link id="l02389" /><CodeLine lineNumber="2389"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If any subunits are used by the instruction, report that the</span></CodeLine>
<Link id="l02390" /><CodeLine lineNumber="2390"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// subunits of the resource group are available at the first cycle</span></CodeLine>
<Link id="l02391" /><CodeLine lineNumber="2391"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// in which the unit is available, effectively removing the group</span></CodeLine>
<Link id="l02392" /><CodeLine lineNumber="2392"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// record from hazarding and basing the hazarding decisions on the</span></CodeLine>
<Link id="l02393" /><CodeLine lineNumber="2393"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// subunit records. Otherwise, choose the first available instance</span></CodeLine>
<Link id="l02394" /><CodeLine lineNumber="2394"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// from among the subunits.  Specifications which assign cycles to</span></CodeLine>
<Link id="l02395" /><CodeLine lineNumber="2395"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// both the subunits and the group or which use an unbuffered</span></CodeLine>
<Link id="l02396" /><CodeLine lineNumber="2396"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// group with buffered subunits will appear to schedule</span></CodeLine>
<Link id="l02397" /><CodeLine lineNumber="2397"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// strangely. In the first case, the additional cycles for the</span></CodeLine>
<Link id="l02398" /><CodeLine lineNumber="2398"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// group will be ignored.  In the second, the group will be</span></CodeLine>
<Link id="l02399" /><CodeLine lineNumber="2399"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// ignored entirely.</span></CodeLine>
<Link id="l02400" /><CodeLine lineNumber="2400"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcwriteprocresentry">MCWriteProcResEntry</a> &amp;PE :</span></CodeLine>
<Link id="l02401" /><CodeLine lineNumber="2401"><span class="doxyHighlight">         <a href="/docs/api/namespaces/llvm/#a341215803e83773a3e97860dc291f121">make&#95;range</a>(<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getWriteProcResBegin(SC),</span></CodeLine>
<Link id="l02402" /><CodeLine lineNumber="2402"><span class="doxyHighlight">                    <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getWriteProcResEnd(SC)))</span></CodeLine>
<Link id="l02403" /><CodeLine lineNumber="2403"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ResourceGroupSubUnitMasks&#91;PIdx&#93;&#91;PE.ProcResourceIdx&#93;)</span></CodeLine>
<Link id="l02404" /><CodeLine lineNumber="2404"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::make&#95;pair(<a href="/docs/api/classes/llvm/schedboundary/#a0b30387e76d2b5a34988ed566a3e5188">getNextResourceCycleByInstance</a>(</span></CodeLine>
<Link id="l02405" /><CodeLine lineNumber="2405"><span class="doxyHighlight">                                  StartIndex, ReleaseAtCycle, AcquireAtCycle),</span></CodeLine>
<Link id="l02406" /><CodeLine lineNumber="2406"><span class="doxyHighlight">                              StartIndex);</span></CodeLine>
<Link id="l02407" /><CodeLine lineNumber="2407"></CodeLine>
<Link id="l02408" /><CodeLine lineNumber="2408"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SubUnits = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getProcResource(PIdx)-&gt;SubUnitsIdxBegin;</span></CodeLine>
<Link id="l02409" /><CodeLine lineNumber="2409"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, End = NumberOfInstances; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; End; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02410" /><CodeLine lineNumber="2410"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NextUnreserved, NextInstanceIdx;</span></CodeLine>
<Link id="l02411" /><CodeLine lineNumber="2411"><span class="doxyHighlight">      std::tie(NextUnreserved, NextInstanceIdx) =</span></CodeLine>
<Link id="l02412" /><CodeLine lineNumber="2412"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/schedboundary/#adfca67c9b359b7ad02ab497632bd6b74">getNextResourceCycle</a>(SC, SubUnits&#91;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>&#93;, ReleaseAtCycle, AcquireAtCycle);</span></CodeLine>
<Link id="l02413" /><CodeLine lineNumber="2413"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MinNextUnreserved &gt; NextUnreserved) &#123;</span></CodeLine>
<Link id="l02414" /><CodeLine lineNumber="2414"><span class="doxyHighlight">        InstanceIdx = NextInstanceIdx;</span></CodeLine>
<Link id="l02415" /><CodeLine lineNumber="2415"><span class="doxyHighlight">        MinNextUnreserved = NextUnreserved;</span></CodeLine>
<Link id="l02416" /><CodeLine lineNumber="2416"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02417" /><CodeLine lineNumber="2417"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02418" /><CodeLine lineNumber="2418"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::make&#95;pair(MinNextUnreserved, InstanceIdx);</span></CodeLine>
<Link id="l02419" /><CodeLine lineNumber="2419"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02420" /><CodeLine lineNumber="2420"></CodeLine>
<Link id="l02421" /><CodeLine lineNumber="2421"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = StartIndex, End = StartIndex + NumberOfInstances; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; End;</span></CodeLine>
<Link id="l02422" /><CodeLine lineNumber="2422"><span class="doxyHighlight">       ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02423" /><CodeLine lineNumber="2423"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NextUnreserved =</span></CodeLine>
<Link id="l02424" /><CodeLine lineNumber="2424"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/schedboundary/#a0b30387e76d2b5a34988ed566a3e5188">getNextResourceCycleByInstance</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ReleaseAtCycle, AcquireAtCycle);</span></CodeLine>
<Link id="l02425" /><CodeLine lineNumber="2425"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#afaad94654d336ce094254a1c694ee4e5">MischedDetailResourceBooking</a>)</span></CodeLine>
<Link id="l02426" /><CodeLine lineNumber="2426"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;    Instance &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> - StartIndex &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; available @&quot;</span></CodeLine>
<Link id="l02427" /><CodeLine lineNumber="2427"><span class="doxyHighlight">                        &lt;&lt; NextUnreserved &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02428" /><CodeLine lineNumber="2428"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MinNextUnreserved &gt; NextUnreserved) &#123;</span></CodeLine>
<Link id="l02429" /><CodeLine lineNumber="2429"><span class="doxyHighlight">      InstanceIdx = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</span></CodeLine>
<Link id="l02430" /><CodeLine lineNumber="2430"><span class="doxyHighlight">      MinNextUnreserved = NextUnreserved;</span></CodeLine>
<Link id="l02431" /><CodeLine lineNumber="2431"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02432" /><CodeLine lineNumber="2432"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02433" /><CodeLine lineNumber="2433"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#afaad94654d336ce094254a1c694ee4e5">MischedDetailResourceBooking</a>)</span></CodeLine>
<Link id="l02434" /><CodeLine lineNumber="2434"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;    selecting &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceName(PIdx)</span></CodeLine>
<Link id="l02435" /><CodeLine lineNumber="2435"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#91;&quot;</span><span class="doxyHighlight"> &lt;&lt; InstanceIdx - StartIndex &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#93;&quot;</span></CodeLine>
<Link id="l02436" /><CodeLine lineNumber="2436"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; available @&quot;</span><span class="doxyHighlight"> &lt;&lt; MinNextUnreserved &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c&quot;</span></CodeLine>
<Link id="l02437" /><CodeLine lineNumber="2437"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02438" /><CodeLine lineNumber="2438"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::make&#95;pair(MinNextUnreserved, InstanceIdx);</span></CodeLine>
<Link id="l02439" /><CodeLine lineNumber="2439"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02440" /><CodeLine lineNumber="2440"></CodeLine>
<Link id="l02441" /><CodeLine lineNumber="2441"><span class="doxyHighlightComment">/// Does this SU have a hazard within the current instruction group.</span></CodeLine>
<Link id="l02442" /><CodeLine lineNumber="2442"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02443" /><CodeLine lineNumber="2443"><span class="doxyHighlightComment">/// The scheduler supports two modes of hazard recognition. The first is the</span></CodeLine>
<Link id="l02444" /><CodeLine lineNumber="2444"><span class="doxyHighlightComment">/// ScheduleHazardRecognizer API. It is a fully general hazard recognizer that</span></CodeLine>
<Link id="l02445" /><CodeLine lineNumber="2445"><span class="doxyHighlightComment">/// supports highly complicated in-order reservation tables</span></CodeLine>
<Link id="l02446" /><CodeLine lineNumber="2446"><span class="doxyHighlightComment">/// (ScoreboardHazardRecognizer) and arbitrary target-specific logic.</span></CodeLine>
<Link id="l02447" /><CodeLine lineNumber="2447"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02448" /><CodeLine lineNumber="2448"><span class="doxyHighlightComment">/// The second is a streamlined mechanism that checks for hazards based on</span></CodeLine>
<Link id="l02449" /><CodeLine lineNumber="2449"><span class="doxyHighlightComment">/// simple counters that the scheduler itself maintains. It explicitly checks</span></CodeLine>
<Link id="l02450" /><CodeLine lineNumber="2450"><span class="doxyHighlightComment">/// for instruction dispatch limitations, including the number of micro-ops that</span></CodeLine>
<Link id="l02451" /><CodeLine lineNumber="2451"><span class="doxyHighlightComment">/// can dispatch per cycle.</span></CodeLine>
<Link id="l02452" /><CodeLine lineNumber="2452"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02453" /><CodeLine lineNumber="2453"><span class="doxyHighlightComment">/// TODO: Also check whether the SU must start a new group.</span></CodeLine>
<Link id="l02454" /><CodeLine lineNumber="2454" lineLink="/docs/api/classes/llvm/schedboundary/#adb8558f52662b83fe081b34b1f31fb20"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#adb8558f52662b83fe081b34b1f31fb20">SchedBoundary::checkHazard</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU) &#123;</span></CodeLine>
<Link id="l02455" /><CodeLine lineNumber="2455"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;isEnabled()</span></CodeLine>
<Link id="l02456" /><CodeLine lineNumber="2456"><span class="doxyHighlight">      &amp;&amp; <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;getHazardType(SU) != <a href="/docs/api/classes/llvm/schedulehazardrecognizer/#a9bec0e329b12bbc503d08db497d43267a4e42ac50bfd060349e49904842121cf1">ScheduleHazardRecognizer::NoHazard</a>) &#123;</span></CodeLine>
<Link id="l02457" /><CodeLine lineNumber="2457"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02458" /><CodeLine lineNumber="2458"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02459" /><CodeLine lineNumber="2459"></CodeLine>
<Link id="l02460" /><CodeLine lineNumber="2460"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> uops = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getNumMicroOps(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>());</span></CodeLine>
<Link id="l02461" /><CodeLine lineNumber="2461"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((CurrMOps &gt; 0) &amp;&amp; (CurrMOps + uops &gt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getIssueWidth())) &#123;</span></CodeLine>
<Link id="l02462" /><CodeLine lineNumber="2462"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) uops=&quot;</span></CodeLine>
<Link id="l02463" /><CodeLine lineNumber="2463"><span class="doxyHighlight">                      &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getNumMicroOps(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>()) &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02464" /><CodeLine lineNumber="2464"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02465" /><CodeLine lineNumber="2465"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02466" /><CodeLine lineNumber="2466"></CodeLine>
<Link id="l02467" /><CodeLine lineNumber="2467"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CurrMOps &gt; 0 &amp;&amp;</span></CodeLine>
<Link id="l02468" /><CodeLine lineNumber="2468"><span class="doxyHighlight">      ((<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() &amp;&amp; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;mustBeginGroup(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>())) ||</span></CodeLine>
<Link id="l02469" /><CodeLine lineNumber="2469"><span class="doxyHighlight">       (!<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() &amp;&amp; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;mustEndGroup(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>())))) &#123;</span></CodeLine>
<Link id="l02470" /><CodeLine lineNumber="2470"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  hazard: SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) must &quot;</span></CodeLine>
<Link id="l02471" /><CodeLine lineNumber="2471"><span class="doxyHighlight">                      &lt;&lt; (<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() ? </span><span class="doxyHighlightStringLiteral">&quot;begin&quot;</span><span class="doxyHighlight"> : </span><span class="doxyHighlightStringLiteral">&quot;end&quot;</span><span class="doxyHighlight">) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; group\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02472" /><CodeLine lineNumber="2472"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02473" /><CodeLine lineNumber="2473"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02474" /><CodeLine lineNumber="2474"></CodeLine>
<Link id="l02475" /><CodeLine lineNumber="2475"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;hasInstrSchedModel() &amp;&amp; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ab76e4a602699ddc57019efaba62a92b6">hasReservedResource</a>) &#123;</span></CodeLine>
<Link id="l02476" /><CodeLine lineNumber="2476"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC = <a href="/docs/api/classes/llvm/schedboundary/#a4f3e434b23939cec7a3c61b45071a017">DAG</a>-&gt;getSchedClass(SU);</span></CodeLine>
<Link id="l02477" /><CodeLine lineNumber="2477"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcwriteprocresentry">MCWriteProcResEntry</a> &amp;PE :</span></CodeLine>
<Link id="l02478" /><CodeLine lineNumber="2478"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a341215803e83773a3e97860dc291f121">make&#95;range</a>(<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getWriteProcResBegin(SC),</span></CodeLine>
<Link id="l02479" /><CodeLine lineNumber="2479"><span class="doxyHighlight">                     <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getWriteProcResEnd(SC))) &#123;</span></CodeLine>
<Link id="l02480" /><CodeLine lineNumber="2480"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ResIdx = PE.ProcResourceIdx;</span></CodeLine>
<Link id="l02481" /><CodeLine lineNumber="2481"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ReleaseAtCycle = PE.ReleaseAtCycle;</span></CodeLine>
<Link id="l02482" /><CodeLine lineNumber="2482"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AcquireAtCycle = PE.AcquireAtCycle;</span></CodeLine>
<Link id="l02483" /><CodeLine lineNumber="2483"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NRCycle, InstanceIdx;</span></CodeLine>
<Link id="l02484" /><CodeLine lineNumber="2484"><span class="doxyHighlight">      std::tie(NRCycle, InstanceIdx) =</span></CodeLine>
<Link id="l02485" /><CodeLine lineNumber="2485"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/schedboundary/#adfca67c9b359b7ad02ab497632bd6b74">getNextResourceCycle</a>(SC, ResIdx, ReleaseAtCycle, AcquireAtCycle);</span></CodeLine>
<Link id="l02486" /><CodeLine lineNumber="2486"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NRCycle &gt; CurrCycle) &#123;</span></CodeLine>
<Link id="l02487" /><CodeLine lineNumber="2487"><span class="doxyHighlightPreprocessor">#if LLVM&#95;ENABLE&#95;ABI&#95;BREAKING&#95;CHECKS</span></CodeLine>
<Link id="l02488" /><CodeLine lineNumber="2488"><span class="doxyHighlight">        MaxObservedStall = std::max(ReleaseAtCycle, MaxObservedStall);</span></CodeLine>
<Link id="l02489" /><CodeLine lineNumber="2489"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l02490" /><CodeLine lineNumber="2490"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) &quot;</span></CodeLine>
<Link id="l02491" /><CodeLine lineNumber="2491"><span class="doxyHighlight">                          &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceName(ResIdx)</span></CodeLine>
<Link id="l02492" /><CodeLine lineNumber="2492"><span class="doxyHighlight">                          &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;&#91;&#39;</span><span class="doxyHighlight"> &lt;&lt; InstanceIdx - ReservedCyclesIndex&#91;ResIdx&#93;  &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;&#93;&#39;</span></CodeLine>
<Link id="l02493" /><CodeLine lineNumber="2493"><span class="doxyHighlight">                          &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;=&quot;</span><span class="doxyHighlight"> &lt;&lt; NRCycle &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02494" /><CodeLine lineNumber="2494"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02495" /><CodeLine lineNumber="2495"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02496" /><CodeLine lineNumber="2496"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02497" /><CodeLine lineNumber="2497"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02498" /><CodeLine lineNumber="2498"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02499" /><CodeLine lineNumber="2499"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02500" /><CodeLine lineNumber="2500"></CodeLine>
<Link id="l02501" /><CodeLine lineNumber="2501"><span class="doxyHighlightComment">// Find the unscheduled node in ReadySUs with the highest latency.</span></CodeLine>
<Link id="l02502" /><CodeLine lineNumber="2502" lineLink="/docs/api/classes/llvm/schedboundary/#a4e57bf16f8ed97dbbdc4d48655455b3c"><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#a4e57bf16f8ed97dbbdc4d48655455b3c">SchedBoundary::</a></span></CodeLine>
<Link id="l02503" /><CodeLine lineNumber="2503"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/schedboundary/#a4e57bf16f8ed97dbbdc4d48655455b3c">findMaxLatency</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;SUnit&#42;&gt;</a> ReadySUs) &#123;</span></CodeLine>
<Link id="l02504" /><CodeLine lineNumber="2504"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;LateSU = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02505" /><CodeLine lineNumber="2505"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> RemLatency = 0;</span></CodeLine>
<Link id="l02506" /><CodeLine lineNumber="2506"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU : ReadySUs) &#123;</span></CodeLine>
<Link id="l02507" /><CodeLine lineNumber="2507"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> L = <a href="/docs/api/classes/llvm/schedboundary/#af7a9c62acba4010b5c47f12f458eaf00">getUnscheduledLatency</a>(SU);</span></CodeLine>
<Link id="l02508" /><CodeLine lineNumber="2508"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (L &gt; RemLatency) &#123;</span></CodeLine>
<Link id="l02509" /><CodeLine lineNumber="2509"><span class="doxyHighlight">      RemLatency = L;</span></CodeLine>
<Link id="l02510" /><CodeLine lineNumber="2510"><span class="doxyHighlight">      LateSU = SU;</span></CodeLine>
<Link id="l02511" /><CodeLine lineNumber="2511"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02512" /><CodeLine lineNumber="2512"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02513" /><CodeLine lineNumber="2513"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LateSU) &#123;</span></CodeLine>
<Link id="l02514" /><CodeLine lineNumber="2514"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; RemLatency SU(&quot;</span></CodeLine>
<Link id="l02515" /><CodeLine lineNumber="2515"><span class="doxyHighlight">                      &lt;&lt; LateSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) &quot;</span><span class="doxyHighlight"> &lt;&lt; RemLatency &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02516" /><CodeLine lineNumber="2516"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02517" /><CodeLine lineNumber="2517"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> RemLatency;</span></CodeLine>
<Link id="l02518" /><CodeLine lineNumber="2518"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02519" /><CodeLine lineNumber="2519"></CodeLine>
<Link id="l02520" /><CodeLine lineNumber="2520"><span class="doxyHighlightComment">// Count resources in this zone and the remaining unscheduled</span></CodeLine>
<Link id="l02521" /><CodeLine lineNumber="2521"><span class="doxyHighlightComment">// instruction. Return the max count, scaled. Set OtherCritIdx to the critical</span></CodeLine>
<Link id="l02522" /><CodeLine lineNumber="2522"><span class="doxyHighlightComment">// resource index, or zero if the zone is issue limited.</span></CodeLine>
<Link id="l02523" /><CodeLine lineNumber="2523" lineLink="/docs/api/classes/llvm/schedboundary/#a5af50e4260bb23b1035c52c186fdcc8b"><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#a5af50e4260bb23b1035c52c186fdcc8b">SchedBoundary::</a></span></CodeLine>
<Link id="l02524" /><CodeLine lineNumber="2524"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/schedboundary/#a5af50e4260bb23b1035c52c186fdcc8b">getOtherResourceCount</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> &amp;OtherCritIdx) &#123;</span></CodeLine>
<Link id="l02525" /><CodeLine lineNumber="2525"><span class="doxyHighlight">  OtherCritIdx = 0;</span></CodeLine>
<Link id="l02526" /><CodeLine lineNumber="2526"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;hasInstrSchedModel())</span></CodeLine>
<Link id="l02527" /><CodeLine lineNumber="2527"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> 0;</span></CodeLine>
<Link id="l02528" /><CodeLine lineNumber="2528"></CodeLine>
<Link id="l02529" /><CodeLine lineNumber="2529"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> OtherCritCount = <a href="/docs/api/classes/llvm/schedboundary/#a64b3464e46fb663d1c409fd21a0fa97b">Rem</a>-&gt;RemIssueCount</span></CodeLine>
<Link id="l02530" /><CodeLine lineNumber="2530"><span class="doxyHighlight">    + (RetiredMOps &#42; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getMicroOpFactor());</span></CodeLine>
<Link id="l02531" /><CodeLine lineNumber="2531"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; + Remain MOps: &quot;</span></CodeLine>
<Link id="l02532" /><CodeLine lineNumber="2532"><span class="doxyHighlight">                    &lt;&lt; OtherCritCount / <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getMicroOpFactor() &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02533" /><CodeLine lineNumber="2533"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> PIdx = 1, PEnd = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getNumProcResourceKinds();</span></CodeLine>
<Link id="l02534" /><CodeLine lineNumber="2534"><span class="doxyHighlight">       PIdx != PEnd; ++PIdx) &#123;</span></CodeLine>
<Link id="l02535" /><CodeLine lineNumber="2535"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> OtherCount = <a href="/docs/api/classes/llvm/schedboundary/#ab873e76ca432b2280dad3ffc130b6515">getResourceCount</a>(PIdx) + <a href="/docs/api/classes/llvm/schedboundary/#a64b3464e46fb663d1c409fd21a0fa97b">Rem</a>-&gt;RemainingCounts&#91;PIdx&#93;;</span></CodeLine>
<Link id="l02536" /><CodeLine lineNumber="2536"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (OtherCount &gt; OtherCritCount) &#123;</span></CodeLine>
<Link id="l02537" /><CodeLine lineNumber="2537"><span class="doxyHighlight">      OtherCritCount = OtherCount;</span></CodeLine>
<Link id="l02538" /><CodeLine lineNumber="2538"><span class="doxyHighlight">      OtherCritIdx = PIdx;</span></CodeLine>
<Link id="l02539" /><CodeLine lineNumber="2539"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02540" /><CodeLine lineNumber="2540"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02541" /><CodeLine lineNumber="2541"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (OtherCritIdx) &#123;</span></CodeLine>
<Link id="l02542" /><CodeLine lineNumber="2542"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</span></CodeLine>
<Link id="l02543" /><CodeLine lineNumber="2543"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; + Remain CritRes: &quot;</span></CodeLine>
<Link id="l02544" /><CodeLine lineNumber="2544"><span class="doxyHighlight">               &lt;&lt; OtherCritCount / <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceFactor(OtherCritIdx)</span></CodeLine>
<Link id="l02545" /><CodeLine lineNumber="2545"><span class="doxyHighlight">               &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceName(OtherCritIdx) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02546" /><CodeLine lineNumber="2546"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02547" /><CodeLine lineNumber="2547"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> OtherCritCount;</span></CodeLine>
<Link id="l02548" /><CodeLine lineNumber="2548"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02549" /><CodeLine lineNumber="2549"></CodeLine>
<Link id="l02550" /><CodeLine lineNumber="2550" lineLink="/docs/api/classes/llvm/schedboundary/#a751090565ab555f2738aec07bc1a350c"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#a751090565ab555f2738aec07bc1a350c">SchedBoundary::releaseNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ReadyCycle, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> InPQueue,</span></CodeLine>
<Link id="l02551" /><CodeLine lineNumber="2551"><span class="doxyHighlight">                                </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Idx) &#123;</span></CodeLine>
<Link id="l02552" /><CodeLine lineNumber="2552"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Scheduled SUnit must have instr&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02553" /><CodeLine lineNumber="2553"></CodeLine>
<Link id="l02554" /><CodeLine lineNumber="2554"><span class="doxyHighlightPreprocessor">#if LLVM&#95;ENABLE&#95;ABI&#95;BREAKING&#95;CHECKS</span></CodeLine>
<Link id="l02555" /><CodeLine lineNumber="2555"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// ReadyCycle was been bumped up to the CurrCycle when this node was</span></CodeLine>
<Link id="l02556" /><CodeLine lineNumber="2556"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// scheduled, but CurrCycle may have been eagerly advanced immediately after</span></CodeLine>
<Link id="l02557" /><CodeLine lineNumber="2557"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// scheduling, so may now be greater than ReadyCycle.</span></CodeLine>
<Link id="l02558" /><CodeLine lineNumber="2558"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ReadyCycle &gt; CurrCycle)</span></CodeLine>
<Link id="l02559" /><CodeLine lineNumber="2559"><span class="doxyHighlight">    MaxObservedStall = std::max(ReadyCycle - CurrCycle, MaxObservedStall);</span></CodeLine>
<Link id="l02560" /><CodeLine lineNumber="2560"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l02561" /><CodeLine lineNumber="2561"></CodeLine>
<Link id="l02562" /><CodeLine lineNumber="2562"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ReadyCycle &lt; MinReadyCycle)</span></CodeLine>
<Link id="l02563" /><CodeLine lineNumber="2563"><span class="doxyHighlight">    MinReadyCycle = ReadyCycle;</span></CodeLine>
<Link id="l02564" /><CodeLine lineNumber="2564"></CodeLine>
<Link id="l02565" /><CodeLine lineNumber="2565"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check for interlocks first. For the purpose of other heuristics, an</span></CodeLine>
<Link id="l02566" /><CodeLine lineNumber="2566"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// instruction that cannot issue appears as if it&#39;s not in the ReadyQueue.</span></CodeLine>
<Link id="l02567" /><CodeLine lineNumber="2567"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsBuffered = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getMicroOpBufferSize() != 0;</span></CodeLine>
<Link id="l02568" /><CodeLine lineNumber="2568"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> HazardDetected = (!IsBuffered &amp;&amp; ReadyCycle &gt; CurrCycle) ||</span></CodeLine>
<Link id="l02569" /><CodeLine lineNumber="2569"><span class="doxyHighlight">                        <a href="/docs/api/classes/llvm/schedboundary/#adb8558f52662b83fe081b34b1f31fb20">checkHazard</a>(SU) || (<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.size() &gt;= <a href="#af040ecdbfbf801186c7941597cc793a6">ReadyListLimit</a>);</span></CodeLine>
<Link id="l02570" /><CodeLine lineNumber="2570"></CodeLine>
<Link id="l02571" /><CodeLine lineNumber="2571"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!HazardDetected) &#123;</span></CodeLine>
<Link id="l02572" /><CodeLine lineNumber="2572"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.push(SU);</span></CodeLine>
<Link id="l02573" /><CodeLine lineNumber="2573"></CodeLine>
<Link id="l02574" /><CodeLine lineNumber="2574"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (InPQueue)</span></CodeLine>
<Link id="l02575" /><CodeLine lineNumber="2575"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.remove(<a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.begin() + Idx);</span></CodeLine>
<Link id="l02576" /><CodeLine lineNumber="2576"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02577" /><CodeLine lineNumber="2577"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02578" /><CodeLine lineNumber="2578"></CodeLine>
<Link id="l02579" /><CodeLine lineNumber="2579"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!InPQueue)</span></CodeLine>
<Link id="l02580" /><CodeLine lineNumber="2580"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.push(SU);</span></CodeLine>
<Link id="l02581" /><CodeLine lineNumber="2581"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02582" /><CodeLine lineNumber="2582"></CodeLine>
<Link id="l02583" /><CodeLine lineNumber="2583"><span class="doxyHighlightComment">/// Move the boundary of scheduled code by one cycle.</span></CodeLine>
<Link id="l02584" /><CodeLine lineNumber="2584" lineLink="/docs/api/classes/llvm/schedboundary/#abb74f3d3a30e2ae598ec8a782d9031e8"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#abb74f3d3a30e2ae598ec8a782d9031e8">SchedBoundary::bumpCycle</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NextCycle) &#123;</span></CodeLine>
<Link id="l02585" /><CodeLine lineNumber="2585"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getMicroOpBufferSize() == 0) &#123;</span></CodeLine>
<Link id="l02586" /><CodeLine lineNumber="2586"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MinReadyCycle &lt; std::numeric&#95;limits&lt;unsigned&gt;::max() &amp;&amp;</span></CodeLine>
<Link id="l02587" /><CodeLine lineNumber="2587"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;MinReadyCycle uninitialized&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02588" /><CodeLine lineNumber="2588"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MinReadyCycle &gt; NextCycle)</span></CodeLine>
<Link id="l02589" /><CodeLine lineNumber="2589"><span class="doxyHighlight">      NextCycle = MinReadyCycle;</span></CodeLine>
<Link id="l02590" /><CodeLine lineNumber="2590"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02591" /><CodeLine lineNumber="2591"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Update the current micro-ops, which will issue in the next cycle.</span></CodeLine>
<Link id="l02592" /><CodeLine lineNumber="2592"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> DecMOps = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getIssueWidth() &#42; (NextCycle - CurrCycle);</span></CodeLine>
<Link id="l02593" /><CodeLine lineNumber="2593"><span class="doxyHighlight">  CurrMOps = (CurrMOps &lt;= DecMOps) ? 0 : CurrMOps - DecMOps;</span></CodeLine>
<Link id="l02594" /><CodeLine lineNumber="2594"></CodeLine>
<Link id="l02595" /><CodeLine lineNumber="2595"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Decrement DependentLatency based on the next cycle.</span></CodeLine>
<Link id="l02596" /><CodeLine lineNumber="2596"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((NextCycle - CurrCycle) &gt; DependentLatency)</span></CodeLine>
<Link id="l02597" /><CodeLine lineNumber="2597"><span class="doxyHighlight">    DependentLatency = 0;</span></CodeLine>
<Link id="l02598" /><CodeLine lineNumber="2598"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l02599" /><CodeLine lineNumber="2599"><span class="doxyHighlight">    DependentLatency -= (NextCycle - CurrCycle);</span></CodeLine>
<Link id="l02600" /><CodeLine lineNumber="2600"></CodeLine>
<Link id="l02601" /><CodeLine lineNumber="2601"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;isEnabled()) &#123;</span></CodeLine>
<Link id="l02602" /><CodeLine lineNumber="2602"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Bypass HazardRec virtual calls.</span></CodeLine>
<Link id="l02603" /><CodeLine lineNumber="2603"><span class="doxyHighlight">    CurrCycle = NextCycle;</span></CodeLine>
<Link id="l02604" /><CodeLine lineNumber="2604"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02605" /><CodeLine lineNumber="2605"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Bypass getHazardType calls in case of long latency.</span></CodeLine>
<Link id="l02606" /><CodeLine lineNumber="2606"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (; CurrCycle != NextCycle; ++CurrCycle) &#123;</span></CodeLine>
<Link id="l02607" /><CodeLine lineNumber="2607"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>())</span></CodeLine>
<Link id="l02608" /><CodeLine lineNumber="2608"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;AdvanceCycle();</span></CodeLine>
<Link id="l02609" /><CodeLine lineNumber="2609"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l02610" /><CodeLine lineNumber="2610"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;RecedeCycle();</span></CodeLine>
<Link id="l02611" /><CodeLine lineNumber="2611"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02612" /><CodeLine lineNumber="2612"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02613" /><CodeLine lineNumber="2613"><span class="doxyHighlight">  CheckPending = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02614" /><CodeLine lineNumber="2614"><span class="doxyHighlight">  IsResourceLimited =</span></CodeLine>
<Link id="l02615" /><CodeLine lineNumber="2615"><span class="doxyHighlight">      <a href="#a77e51ffc94a77ff8e4778e59a02e7b67">checkResourceLimit</a>(<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getLatencyFactor(), <a href="/docs/api/classes/llvm/schedboundary/#a6f3130b70563722e1dc6ddbf616e3e77">getCriticalCount</a>(),</span></CodeLine>
<Link id="l02616" /><CodeLine lineNumber="2616"><span class="doxyHighlight">                         <a href="/docs/api/classes/llvm/schedboundary/#a29ef846d6fac7aa275808c8866035968">getScheduledLatency</a>(), </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02617" /><CodeLine lineNumber="2617"></CodeLine>
<Link id="l02618" /><CodeLine lineNumber="2618"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Cycle: &quot;</span><span class="doxyHighlight"> &lt;&lt; CurrCycle &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39; &#39;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.getName()</span></CodeLine>
<Link id="l02619" /><CodeLine lineNumber="2619"><span class="doxyHighlight">                    &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02620" /><CodeLine lineNumber="2620"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02621" /><CodeLine lineNumber="2621"></CodeLine>
<Link id="l02622" /><CodeLine lineNumber="2622" lineLink="/docs/api/classes/llvm/schedboundary/#a2e4f8d7ebc77cdaa0241f46d01e7375b"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#a2e4f8d7ebc77cdaa0241f46d01e7375b">SchedBoundary::incExecutedResources</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> PIdx, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a845e08be4b0320d66901a66b0c0e9509">Count</a>) &#123;</span></CodeLine>
<Link id="l02623" /><CodeLine lineNumber="2623"><span class="doxyHighlight">  ExecutedResCounts&#91;PIdx&#93; += <a href="/docs/api/namespaces/llvm/#a845e08be4b0320d66901a66b0c0e9509">Count</a>;</span></CodeLine>
<Link id="l02624" /><CodeLine lineNumber="2624"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ExecutedResCounts&#91;PIdx&#93; &gt; MaxExecutedResCount)</span></CodeLine>
<Link id="l02625" /><CodeLine lineNumber="2625"><span class="doxyHighlight">    MaxExecutedResCount = ExecutedResCounts&#91;PIdx&#93;;</span></CodeLine>
<Link id="l02626" /><CodeLine lineNumber="2626"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02627" /><CodeLine lineNumber="2627"></CodeLine>
<Link id="l02628" /><CodeLine lineNumber="2628"><span class="doxyHighlightComment">/// Add the given processor resource to this scheduled zone.</span></CodeLine>
<Link id="l02629" /><CodeLine lineNumber="2629"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02630" /><CodeLine lineNumber="2630"><span class="doxyHighlightComment">/// \\param ReleaseAtCycle indicates the number of consecutive (non-pipelined)</span></CodeLine>
<Link id="l02631" /><CodeLine lineNumber="2631"><span class="doxyHighlightComment">/// cycles during which this resource is released.</span></CodeLine>
<Link id="l02632" /><CodeLine lineNumber="2632"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02633" /><CodeLine lineNumber="2633"><span class="doxyHighlightComment">/// \\param AcquireAtCycle indicates the number of consecutive (non-pipelined)</span></CodeLine>
<Link id="l02634" /><CodeLine lineNumber="2634"><span class="doxyHighlightComment">/// cycles at which the resource is aquired after issue (assuming no stalls).</span></CodeLine>
<Link id="l02635" /><CodeLine lineNumber="2635"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02636" /><CodeLine lineNumber="2636"><span class="doxyHighlightComment">/// \\return the next cycle at which the instruction may execute without</span></CodeLine>
<Link id="l02637" /><CodeLine lineNumber="2637"><span class="doxyHighlightComment">/// oversubscribing resources.</span></CodeLine>
<Link id="l02638" /><CodeLine lineNumber="2638" lineLink="/docs/api/classes/llvm/schedboundary/#a7776303c35c1b064126b7b310b546be0"><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#a7776303c35c1b064126b7b310b546be0">SchedBoundary::countResource</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> PIdx,</span></CodeLine>
<Link id="l02639" /><CodeLine lineNumber="2639"><span class="doxyHighlight">                                      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ReleaseAtCycle,</span></CodeLine>
<Link id="l02640" /><CodeLine lineNumber="2640"><span class="doxyHighlight">                                      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NextCycle,</span></CodeLine>
<Link id="l02641" /><CodeLine lineNumber="2641"><span class="doxyHighlight">                                      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AcquireAtCycle) &#123;</span></CodeLine>
<Link id="l02642" /><CodeLine lineNumber="2642"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Factor = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceFactor(PIdx);</span></CodeLine>
<Link id="l02643" /><CodeLine lineNumber="2643"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a845e08be4b0320d66901a66b0c0e9509">Count</a> = Factor &#42; (ReleaseAtCycle- AcquireAtCycle);</span></CodeLine>
<Link id="l02644" /><CodeLine lineNumber="2644"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceName(PIdx) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; +&quot;</span></CodeLine>
<Link id="l02645" /><CodeLine lineNumber="2645"><span class="doxyHighlight">                    &lt;&lt; ReleaseAtCycle &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;x&quot;</span><span class="doxyHighlight"> &lt;&lt; Factor &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;u\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02646" /><CodeLine lineNumber="2646"></CodeLine>
<Link id="l02647" /><CodeLine lineNumber="2647"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Update Executed resources counts.</span></CodeLine>
<Link id="l02648" /><CodeLine lineNumber="2648"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/schedboundary/#a2e4f8d7ebc77cdaa0241f46d01e7375b">incExecutedResources</a>(PIdx, <a href="/docs/api/namespaces/llvm/#a845e08be4b0320d66901a66b0c0e9509">Count</a>);</span></CodeLine>
<Link id="l02649" /><CodeLine lineNumber="2649"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/schedboundary/#a64b3464e46fb663d1c409fd21a0fa97b">Rem</a>-&gt;RemainingCounts&#91;PIdx&#93; &gt;= <a href="/docs/api/namespaces/llvm/#a845e08be4b0320d66901a66b0c0e9509">Count</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;resource double counted&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02650" /><CodeLine lineNumber="2650"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/schedboundary/#a64b3464e46fb663d1c409fd21a0fa97b">Rem</a>-&gt;RemainingCounts&#91;PIdx&#93; -= <a href="/docs/api/namespaces/llvm/#a845e08be4b0320d66901a66b0c0e9509">Count</a>;</span></CodeLine>
<Link id="l02651" /><CodeLine lineNumber="2651"></CodeLine>
<Link id="l02652" /><CodeLine lineNumber="2652"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check if this resource exceeds the current critical resource. If so, it</span></CodeLine>
<Link id="l02653" /><CodeLine lineNumber="2653"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// becomes the critical resource.</span></CodeLine>
<Link id="l02654" /><CodeLine lineNumber="2654"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ZoneCritResIdx != PIdx &amp;&amp; (<a href="/docs/api/classes/llvm/schedboundary/#ab873e76ca432b2280dad3ffc130b6515">getResourceCount</a>(PIdx) &gt; <a href="/docs/api/classes/llvm/schedboundary/#a6f3130b70563722e1dc6ddbf616e3e77">getCriticalCount</a>())) &#123;</span></CodeLine>
<Link id="l02655" /><CodeLine lineNumber="2655"><span class="doxyHighlight">    ZoneCritResIdx = PIdx;</span></CodeLine>
<Link id="l02656" /><CodeLine lineNumber="2656"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  &#42;&#42;&#42; Critical resource &quot;</span></CodeLine>
<Link id="l02657" /><CodeLine lineNumber="2657"><span class="doxyHighlight">                      &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceName(PIdx) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;: &quot;</span></CodeLine>
<Link id="l02658" /><CodeLine lineNumber="2658"><span class="doxyHighlight">                      &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#ab873e76ca432b2280dad3ffc130b6515">getResourceCount</a>(PIdx) / <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getLatencyFactor()</span></CodeLine>
<Link id="l02659" /><CodeLine lineNumber="2659"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02660" /><CodeLine lineNumber="2660"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02661" /><CodeLine lineNumber="2661"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For reserved resources, record the highest cycle using the resource.</span></CodeLine>
<Link id="l02662" /><CodeLine lineNumber="2662"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NextAvailable, InstanceIdx;</span></CodeLine>
<Link id="l02663" /><CodeLine lineNumber="2663"><span class="doxyHighlight">  std::tie(NextAvailable, InstanceIdx) =</span></CodeLine>
<Link id="l02664" /><CodeLine lineNumber="2664"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/schedboundary/#adfca67c9b359b7ad02ab497632bd6b74">getNextResourceCycle</a>(SC, PIdx, ReleaseAtCycle, AcquireAtCycle);</span></CodeLine>
<Link id="l02665" /><CodeLine lineNumber="2665"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NextAvailable &gt; CurrCycle) &#123;</span></CodeLine>
<Link id="l02666" /><CodeLine lineNumber="2666"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Resource conflict: &quot;</span></CodeLine>
<Link id="l02667" /><CodeLine lineNumber="2667"><span class="doxyHighlight">                      &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceName(PIdx)</span></CodeLine>
<Link id="l02668" /><CodeLine lineNumber="2668"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;&#91;&#39;</span><span class="doxyHighlight"> &lt;&lt; InstanceIdx - ReservedCyclesIndex&#91;PIdx&#93;  &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;&#93;&#39;</span></CodeLine>
<Link id="l02669" /><CodeLine lineNumber="2669"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; reserved until @&quot;</span><span class="doxyHighlight"> &lt;&lt; NextAvailable &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02670" /><CodeLine lineNumber="2670"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02671" /><CodeLine lineNumber="2671"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> NextAvailable;</span></CodeLine>
<Link id="l02672" /><CodeLine lineNumber="2672"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02673" /><CodeLine lineNumber="2673"></CodeLine>
<Link id="l02674" /><CodeLine lineNumber="2674"><span class="doxyHighlightComment">/// Move the boundary of scheduled code by one SUnit.</span></CodeLine>
<Link id="l02675" /><CodeLine lineNumber="2675" lineLink="/docs/api/classes/llvm/schedboundary/#a6b1771cf492495f8f82727657c68e571"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#a6b1771cf492495f8f82727657c68e571">SchedBoundary::bumpNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU) &#123;</span></CodeLine>
<Link id="l02676" /><CodeLine lineNumber="2676"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Update the reservation table.</span></CodeLine>
<Link id="l02677" /><CodeLine lineNumber="2677"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;isEnabled()) &#123;</span></CodeLine>
<Link id="l02678" /><CodeLine lineNumber="2678"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() &amp;&amp; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a0be1f84d53e90c247d75f2ed63636761">isCall</a>) &#123;</span></CodeLine>
<Link id="l02679" /><CodeLine lineNumber="2679"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Calls are scheduled with their preceding instructions. For bottom-up</span></CodeLine>
<Link id="l02680" /><CodeLine lineNumber="2680"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// scheduling, clear the pipeline state before emitting.</span></CodeLine>
<Link id="l02681" /><CodeLine lineNumber="2681"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;Reset();</span></CodeLine>
<Link id="l02682" /><CodeLine lineNumber="2682"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02683" /><CodeLine lineNumber="2683"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;EmitInstruction(SU);</span></CodeLine>
<Link id="l02684" /><CodeLine lineNumber="2684"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Scheduling an instruction may have made pending instructions available.</span></CodeLine>
<Link id="l02685" /><CodeLine lineNumber="2685"><span class="doxyHighlight">    CheckPending = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02686" /><CodeLine lineNumber="2686"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02687" /><CodeLine lineNumber="2687"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// checkHazard should prevent scheduling multiple instructions per cycle that</span></CodeLine>
<Link id="l02688" /><CodeLine lineNumber="2688"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// exceed the issue width.</span></CodeLine>
<Link id="l02689" /><CodeLine lineNumber="2689"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC = <a href="/docs/api/classes/llvm/schedboundary/#a4f3e434b23939cec7a3c61b45071a017">DAG</a>-&gt;getSchedClass(SU);</span></CodeLine>
<Link id="l02690" /><CodeLine lineNumber="2690"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> IncMOps = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getNumMicroOps(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>());</span></CodeLine>
<Link id="l02691" /><CodeLine lineNumber="2691"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</span></CodeLine>
<Link id="l02692" /><CodeLine lineNumber="2692"><span class="doxyHighlight">      (CurrMOps == 0 || (CurrMOps + IncMOps) &lt;= <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getIssueWidth()) &amp;&amp;</span></CodeLine>
<Link id="l02693" /><CodeLine lineNumber="2693"><span class="doxyHighlight">      </span><span class="doxyHighlightStringLiteral">&quot;Cannot schedule this instruction&#39;s MicroOps in the current cycle.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02694" /><CodeLine lineNumber="2694"></CodeLine>
<Link id="l02695" /><CodeLine lineNumber="2695"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ReadyCycle = (<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() ? SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> : SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>);</span></CodeLine>
<Link id="l02696" /><CodeLine lineNumber="2696"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Ready @&quot;</span><span class="doxyHighlight"> &lt;&lt; ReadyCycle &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02697" /><CodeLine lineNumber="2697"></CodeLine>
<Link id="l02698" /><CodeLine lineNumber="2698"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NextCycle = CurrCycle;</span></CodeLine>
<Link id="l02699" /><CodeLine lineNumber="2699"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getMicroOpBufferSize()) &#123;</span></CodeLine>
<Link id="l02700" /><CodeLine lineNumber="2700"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 0:</span></CodeLine>
<Link id="l02701" /><CodeLine lineNumber="2701"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ReadyCycle &lt;= CurrCycle &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Broken PendingQueue&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02702" /><CodeLine lineNumber="2702"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02703" /><CodeLine lineNumber="2703"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 1:</span></CodeLine>
<Link id="l02704" /><CodeLine lineNumber="2704"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ReadyCycle &gt; NextCycle) &#123;</span></CodeLine>
<Link id="l02705" /><CodeLine lineNumber="2705"><span class="doxyHighlight">      NextCycle = ReadyCycle;</span></CodeLine>
<Link id="l02706" /><CodeLine lineNumber="2706"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  &#42;&#42;&#42; Stall until: &quot;</span><span class="doxyHighlight"> &lt;&lt; ReadyCycle &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02707" /><CodeLine lineNumber="2707"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02708" /><CodeLine lineNumber="2708"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02709" /><CodeLine lineNumber="2709"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l02710" /><CodeLine lineNumber="2710"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We don&#39;t currently model the OOO reorder buffer, so consider all</span></CodeLine>
<Link id="l02711" /><CodeLine lineNumber="2711"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// scheduled MOps to be &quot;retired&quot;. We do loosely model in-order resource</span></CodeLine>
<Link id="l02712" /><CodeLine lineNumber="2712"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// latency. If this instruction uses an in-order resource, account for any</span></CodeLine>
<Link id="l02713" /><CodeLine lineNumber="2713"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// likely stall cycles.</span></CodeLine>
<Link id="l02714" /><CodeLine lineNumber="2714"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a4ac4d36cb59a4bbf5d93513dad0ff0e9">isUnbuffered</a> &amp;&amp; ReadyCycle &gt; NextCycle)</span></CodeLine>
<Link id="l02715" /><CodeLine lineNumber="2715"><span class="doxyHighlight">      NextCycle = ReadyCycle;</span></CodeLine>
<Link id="l02716" /><CodeLine lineNumber="2716"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02717" /><CodeLine lineNumber="2717"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02718" /><CodeLine lineNumber="2718"><span class="doxyHighlight">  RetiredMOps += IncMOps;</span></CodeLine>
<Link id="l02719" /><CodeLine lineNumber="2719"></CodeLine>
<Link id="l02720" /><CodeLine lineNumber="2720"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Update resource counts and critical resource.</span></CodeLine>
<Link id="l02721" /><CodeLine lineNumber="2721"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;hasInstrSchedModel()) &#123;</span></CodeLine>
<Link id="l02722" /><CodeLine lineNumber="2722"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> DecRemIssue = IncMOps &#42; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getMicroOpFactor();</span></CodeLine>
<Link id="l02723" /><CodeLine lineNumber="2723"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/schedboundary/#a64b3464e46fb663d1c409fd21a0fa97b">Rem</a>-&gt;RemIssueCount &gt;= DecRemIssue &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;MOps double counted&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02724" /><CodeLine lineNumber="2724"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/schedboundary/#a64b3464e46fb663d1c409fd21a0fa97b">Rem</a>-&gt;RemIssueCount -= DecRemIssue;</span></CodeLine>
<Link id="l02725" /><CodeLine lineNumber="2725"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ZoneCritResIdx) &#123;</span></CodeLine>
<Link id="l02726" /><CodeLine lineNumber="2726"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Scale scheduled micro-ops for comparing with the critical resource.</span></CodeLine>
<Link id="l02727" /><CodeLine lineNumber="2727"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ScaledMOps =</span></CodeLine>
<Link id="l02728" /><CodeLine lineNumber="2728"><span class="doxyHighlight">        RetiredMOps &#42; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getMicroOpFactor();</span></CodeLine>
<Link id="l02729" /><CodeLine lineNumber="2729"></CodeLine>
<Link id="l02730" /><CodeLine lineNumber="2730"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If scaled micro-ops are now more than the previous critical resource by</span></CodeLine>
<Link id="l02731" /><CodeLine lineNumber="2731"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// a full cycle, then micro-ops issue becomes critical.</span></CodeLine>
<Link id="l02732" /><CodeLine lineNumber="2732"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight">)(ScaledMOps - <a href="/docs/api/classes/llvm/schedboundary/#ab873e76ca432b2280dad3ffc130b6515">getResourceCount</a>(ZoneCritResIdx))</span></CodeLine>
<Link id="l02733" /><CodeLine lineNumber="2733"><span class="doxyHighlight">          &gt;= (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight">)<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getLatencyFactor()) &#123;</span></CodeLine>
<Link id="l02734" /><CodeLine lineNumber="2734"><span class="doxyHighlight">        ZoneCritResIdx = 0;</span></CodeLine>
<Link id="l02735" /><CodeLine lineNumber="2735"><span class="doxyHighlight">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  &#42;&#42;&#42; Critical resource NumMicroOps: &quot;</span></CodeLine>
<Link id="l02736" /><CodeLine lineNumber="2736"><span class="doxyHighlight">                          &lt;&lt; ScaledMOps / <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getLatencyFactor()</span></CodeLine>
<Link id="l02737" /><CodeLine lineNumber="2737"><span class="doxyHighlight">                          &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02738" /><CodeLine lineNumber="2738"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02739" /><CodeLine lineNumber="2739"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02740" /><CodeLine lineNumber="2740"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/targetschedmodel/#a7b653a507e8307775b33e01655d3b8d8">TargetSchedModel::ProcResIter</a></span></CodeLine>
<Link id="l02741" /><CodeLine lineNumber="2741"><span class="doxyHighlight">           PI = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getWriteProcResBegin(SC),</span></CodeLine>
<Link id="l02742" /><CodeLine lineNumber="2742"><span class="doxyHighlight">           PE = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getWriteProcResEnd(SC); PI != PE; ++PI) &#123;</span></CodeLine>
<Link id="l02743" /><CodeLine lineNumber="2743"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> RCycle =</span></CodeLine>
<Link id="l02744" /><CodeLine lineNumber="2744"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/schedboundary/#a7776303c35c1b064126b7b310b546be0">countResource</a>(SC, PI-&gt;ProcResourceIdx, PI-&gt;ReleaseAtCycle, NextCycle,</span></CodeLine>
<Link id="l02745" /><CodeLine lineNumber="2745"><span class="doxyHighlight">                        PI-&gt;AcquireAtCycle);</span></CodeLine>
<Link id="l02746" /><CodeLine lineNumber="2746"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (RCycle &gt; NextCycle)</span></CodeLine>
<Link id="l02747" /><CodeLine lineNumber="2747"><span class="doxyHighlight">        NextCycle = RCycle;</span></CodeLine>
<Link id="l02748" /><CodeLine lineNumber="2748"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02749" /><CodeLine lineNumber="2749"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ab76e4a602699ddc57019efaba62a92b6">hasReservedResource</a>) &#123;</span></CodeLine>
<Link id="l02750" /><CodeLine lineNumber="2750"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// For reserved resources, record the highest cycle using the resource.</span></CodeLine>
<Link id="l02751" /><CodeLine lineNumber="2751"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// For top-down scheduling, this is the cycle in which we schedule this</span></CodeLine>
<Link id="l02752" /><CodeLine lineNumber="2752"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// instruction plus the number of cycles the operations reserves the</span></CodeLine>
<Link id="l02753" /><CodeLine lineNumber="2753"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// resource. For bottom-up is it simply the instruction&#39;s cycle.</span></CodeLine>
<Link id="l02754" /><CodeLine lineNumber="2754"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/targetschedmodel/#a7b653a507e8307775b33e01655d3b8d8">TargetSchedModel::ProcResIter</a></span></CodeLine>
<Link id="l02755" /><CodeLine lineNumber="2755"><span class="doxyHighlight">             PI = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getWriteProcResBegin(SC),</span></CodeLine>
<Link id="l02756" /><CodeLine lineNumber="2756"><span class="doxyHighlight">             PE = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getWriteProcResEnd(SC); PI != PE; ++PI) &#123;</span></CodeLine>
<Link id="l02757" /><CodeLine lineNumber="2757"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> PIdx = PI-&gt;ProcResourceIdx;</span></CodeLine>
<Link id="l02758" /><CodeLine lineNumber="2758"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getProcResource(PIdx)-&gt;BufferSize == 0) &#123;</span></CodeLine>
<Link id="l02759" /><CodeLine lineNumber="2759"></CodeLine>
<Link id="l02760" /><CodeLine lineNumber="2760"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a> &amp;&amp; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;enableIntervals()) &#123;</span></CodeLine>
<Link id="l02761" /><CodeLine lineNumber="2761"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ReservedUntil, InstanceIdx;</span></CodeLine>
<Link id="l02762" /><CodeLine lineNumber="2762"><span class="doxyHighlight">            std::tie(ReservedUntil, InstanceIdx) = <a href="/docs/api/classes/llvm/schedboundary/#adfca67c9b359b7ad02ab497632bd6b74">getNextResourceCycle</a>(</span></CodeLine>
<Link id="l02763" /><CodeLine lineNumber="2763"><span class="doxyHighlight">                SC, PIdx, PI-&gt;ReleaseAtCycle, PI-&gt;AcquireAtCycle);</span></CodeLine>
<Link id="l02764" /><CodeLine lineNumber="2764"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>()) &#123;</span></CodeLine>
<Link id="l02765" /><CodeLine lineNumber="2765"><span class="doxyHighlight">              ReservedResourceSegments&#91;InstanceIdx&#93;.add(</span></CodeLine>
<Link id="l02766" /><CodeLine lineNumber="2766"><span class="doxyHighlight">                  <a href="/docs/api/classes/llvm/resourcesegments/#ad0173019797b2f865e64a85377cb3bd5">ResourceSegments::getResourceIntervalTop</a>(</span></CodeLine>
<Link id="l02767" /><CodeLine lineNumber="2767"><span class="doxyHighlight">                      NextCycle, PI-&gt;AcquireAtCycle, PI-&gt;ReleaseAtCycle),</span></CodeLine>
<Link id="l02768" /><CodeLine lineNumber="2768"><span class="doxyHighlight">                  <a href="#ae812475cdb74bfae4780368f4ff01ccf">MIResourceCutOff</a>);</span></CodeLine>
<Link id="l02769" /><CodeLine lineNumber="2769"><span class="doxyHighlight">            &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02770" /><CodeLine lineNumber="2770"><span class="doxyHighlight">              ReservedResourceSegments&#91;InstanceIdx&#93;.add(</span></CodeLine>
<Link id="l02771" /><CodeLine lineNumber="2771"><span class="doxyHighlight">                  <a href="/docs/api/classes/llvm/resourcesegments/#a46315c932ddcacb368f78ecc39a96fe3">ResourceSegments::getResourceIntervalBottom</a>(</span></CodeLine>
<Link id="l02772" /><CodeLine lineNumber="2772"><span class="doxyHighlight">                      NextCycle, PI-&gt;AcquireAtCycle, PI-&gt;ReleaseAtCycle),</span></CodeLine>
<Link id="l02773" /><CodeLine lineNumber="2773"><span class="doxyHighlight">                  <a href="#ae812475cdb74bfae4780368f4ff01ccf">MIResourceCutOff</a>);</span></CodeLine>
<Link id="l02774" /><CodeLine lineNumber="2774"><span class="doxyHighlight">            &#125;</span></CodeLine>
<Link id="l02775" /><CodeLine lineNumber="2775"><span class="doxyHighlight">          &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02776" /><CodeLine lineNumber="2776"></CodeLine>
<Link id="l02777" /><CodeLine lineNumber="2777"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ReservedUntil, InstanceIdx;</span></CodeLine>
<Link id="l02778" /><CodeLine lineNumber="2778"><span class="doxyHighlight">            std::tie(ReservedUntil, InstanceIdx) = <a href="/docs/api/classes/llvm/schedboundary/#adfca67c9b359b7ad02ab497632bd6b74">getNextResourceCycle</a>(</span></CodeLine>
<Link id="l02779" /><CodeLine lineNumber="2779"><span class="doxyHighlight">                SC, PIdx, PI-&gt;ReleaseAtCycle, PI-&gt;AcquireAtCycle);</span></CodeLine>
<Link id="l02780" /><CodeLine lineNumber="2780"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>()) &#123;</span></CodeLine>
<Link id="l02781" /><CodeLine lineNumber="2781"><span class="doxyHighlight">              ReservedCycles&#91;InstanceIdx&#93; =</span></CodeLine>
<Link id="l02782" /><CodeLine lineNumber="2782"><span class="doxyHighlight">                  std::max(ReservedUntil, NextCycle + PI-&gt;ReleaseAtCycle);</span></CodeLine>
<Link id="l02783" /><CodeLine lineNumber="2783"><span class="doxyHighlight">            &#125; </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l02784" /><CodeLine lineNumber="2784"><span class="doxyHighlight">              ReservedCycles&#91;InstanceIdx&#93; = NextCycle;</span></CodeLine>
<Link id="l02785" /><CodeLine lineNumber="2785"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l02786" /><CodeLine lineNumber="2786"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l02787" /><CodeLine lineNumber="2787"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l02788" /><CodeLine lineNumber="2788"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02789" /><CodeLine lineNumber="2789"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02790" /><CodeLine lineNumber="2790"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Update ExpectedLatency and DependentLatency.</span></CodeLine>
<Link id="l02791" /><CodeLine lineNumber="2791"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> &amp;TopLatency = <a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() ? ExpectedLatency : DependentLatency;</span></CodeLine>
<Link id="l02792" /><CodeLine lineNumber="2792"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> &amp;BotLatency = <a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() ? DependentLatency : ExpectedLatency;</span></CodeLine>
<Link id="l02793" /><CodeLine lineNumber="2793"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>() &gt; TopLatency) &#123;</span></CodeLine>
<Link id="l02794" /><CodeLine lineNumber="2794"><span class="doxyHighlight">    TopLatency = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>();</span></CodeLine>
<Link id="l02795" /><CodeLine lineNumber="2795"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; TopLatency SU(&quot;</span></CodeLine>
<Link id="l02796" /><CodeLine lineNumber="2796"><span class="doxyHighlight">                      &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) &quot;</span><span class="doxyHighlight"> &lt;&lt; TopLatency &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02797" /><CodeLine lineNumber="2797"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02798" /><CodeLine lineNumber="2798"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>() &gt; BotLatency) &#123;</span></CodeLine>
<Link id="l02799" /><CodeLine lineNumber="2799"><span class="doxyHighlight">    BotLatency = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>();</span></CodeLine>
<Link id="l02800" /><CodeLine lineNumber="2800"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; BotLatency SU(&quot;</span></CodeLine>
<Link id="l02801" /><CodeLine lineNumber="2801"><span class="doxyHighlight">                      &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) &quot;</span><span class="doxyHighlight"> &lt;&lt; BotLatency &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02802" /><CodeLine lineNumber="2802"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02803" /><CodeLine lineNumber="2803"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If we stall for any reason, bump the cycle.</span></CodeLine>
<Link id="l02804" /><CodeLine lineNumber="2804"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NextCycle &gt; CurrCycle)</span></CodeLine>
<Link id="l02805" /><CodeLine lineNumber="2805"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/schedboundary/#abb74f3d3a30e2ae598ec8a782d9031e8">bumpCycle</a>(NextCycle);</span></CodeLine>
<Link id="l02806" /><CodeLine lineNumber="2806"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l02807" /><CodeLine lineNumber="2807"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// After updating ZoneCritResIdx and ExpectedLatency, check if we&#39;re</span></CodeLine>
<Link id="l02808" /><CodeLine lineNumber="2808"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// resource limited. If a stall occurred, bumpCycle does this.</span></CodeLine>
<Link id="l02809" /><CodeLine lineNumber="2809"><span class="doxyHighlight">    IsResourceLimited =</span></CodeLine>
<Link id="l02810" /><CodeLine lineNumber="2810"><span class="doxyHighlight">        <a href="#a77e51ffc94a77ff8e4778e59a02e7b67">checkResourceLimit</a>(<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getLatencyFactor(), <a href="/docs/api/classes/llvm/schedboundary/#a6f3130b70563722e1dc6ddbf616e3e77">getCriticalCount</a>(),</span></CodeLine>
<Link id="l02811" /><CodeLine lineNumber="2811"><span class="doxyHighlight">                           <a href="/docs/api/classes/llvm/schedboundary/#a29ef846d6fac7aa275808c8866035968">getScheduledLatency</a>(), </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02812" /><CodeLine lineNumber="2812"></CodeLine>
<Link id="l02813" /><CodeLine lineNumber="2813"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Update CurrMOps after calling bumpCycle to handle stalls, since bumpCycle</span></CodeLine>
<Link id="l02814" /><CodeLine lineNumber="2814"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// resets CurrMOps. Loop to handle instructions with more MOps than issue in</span></CodeLine>
<Link id="l02815" /><CodeLine lineNumber="2815"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// one cycle.  Since we commonly reach the max MOps here, opportunistically</span></CodeLine>
<Link id="l02816" /><CodeLine lineNumber="2816"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// bump the cycle to avoid uselessly checking everything in the readyQ.</span></CodeLine>
<Link id="l02817" /><CodeLine lineNumber="2817"><span class="doxyHighlight">  CurrMOps += IncMOps;</span></CodeLine>
<Link id="l02818" /><CodeLine lineNumber="2818"></CodeLine>
<Link id="l02819" /><CodeLine lineNumber="2819"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Bump the cycle count for issue group constraints.</span></CodeLine>
<Link id="l02820" /><CodeLine lineNumber="2820"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This must be done after NextCycle has been adjust for all other stalls.</span></CodeLine>
<Link id="l02821" /><CodeLine lineNumber="2821"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Calling bumpCycle(X) will reduce CurrMOps by one issue group and set</span></CodeLine>
<Link id="l02822" /><CodeLine lineNumber="2822"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// currCycle to X.</span></CodeLine>
<Link id="l02823" /><CodeLine lineNumber="2823"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() &amp;&amp;  <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;mustEndGroup(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>())) ||</span></CodeLine>
<Link id="l02824" /><CodeLine lineNumber="2824"><span class="doxyHighlight">      (!<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() &amp;&amp; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;mustBeginGroup(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>()))) &#123;</span></CodeLine>
<Link id="l02825" /><CodeLine lineNumber="2825"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Bump cycle to &quot;</span><span class="doxyHighlight"> &lt;&lt; (<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() ? </span><span class="doxyHighlightStringLiteral">&quot;end&quot;</span><span class="doxyHighlight"> : </span><span class="doxyHighlightStringLiteral">&quot;begin&quot;</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l02826" /><CodeLine lineNumber="2826"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; group\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02827" /><CodeLine lineNumber="2827"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/schedboundary/#abb74f3d3a30e2ae598ec8a782d9031e8">bumpCycle</a>(++NextCycle);</span></CodeLine>
<Link id="l02828" /><CodeLine lineNumber="2828"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02829" /><CodeLine lineNumber="2829"></CodeLine>
<Link id="l02830" /><CodeLine lineNumber="2830"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (CurrMOps &gt;= <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getIssueWidth()) &#123;</span></CodeLine>
<Link id="l02831" /><CodeLine lineNumber="2831"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  &#42;&#42;&#42; Max MOps &quot;</span><span class="doxyHighlight"> &lt;&lt; CurrMOps &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; at cycle &quot;</span></CodeLine>
<Link id="l02832" /><CodeLine lineNumber="2832"><span class="doxyHighlight">                      &lt;&lt; CurrCycle &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02833" /><CodeLine lineNumber="2833"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/schedboundary/#abb74f3d3a30e2ae598ec8a782d9031e8">bumpCycle</a>(++NextCycle);</span></CodeLine>
<Link id="l02834" /><CodeLine lineNumber="2834"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02835" /><CodeLine lineNumber="2835"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/schedboundary/#ae01f950d577dadad26a49baa47d10d66">dumpScheduledState</a>());</span></CodeLine>
<Link id="l02836" /><CodeLine lineNumber="2836"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02837" /><CodeLine lineNumber="2837"></CodeLine>
<Link id="l02838" /><CodeLine lineNumber="2838"><span class="doxyHighlightComment">/// Release pending ready nodes in to the available queue. This makes them</span></CodeLine>
<Link id="l02839" /><CodeLine lineNumber="2839"><span class="doxyHighlightComment">/// visible to heuristics.</span></CodeLine>
<Link id="l02840" /><CodeLine lineNumber="2840" lineLink="/docs/api/classes/llvm/schedboundary/#a155166a788cfe0d992af6f2e21e6118e"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#a155166a788cfe0d992af6f2e21e6118e">SchedBoundary::releasePending</a>() &#123;</span></CodeLine>
<Link id="l02841" /><CodeLine lineNumber="2841"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If the available queue is empty, it is safe to reset MinReadyCycle.</span></CodeLine>
<Link id="l02842" /><CodeLine lineNumber="2842"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.empty())</span></CodeLine>
<Link id="l02843" /><CodeLine lineNumber="2843"><span class="doxyHighlight">    MinReadyCycle = std::numeric&#95;limits&lt;unsigned&gt;::max();</span></CodeLine>
<Link id="l02844" /><CodeLine lineNumber="2844"></CodeLine>
<Link id="l02845" /><CodeLine lineNumber="2845"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check to see if any of the pending instructions are ready to issue.  If</span></CodeLine>
<Link id="l02846" /><CodeLine lineNumber="2846"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// so, add them to the available queue.</span></CodeLine>
<Link id="l02847" /><CodeLine lineNumber="2847"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = <a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.size(); <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; E; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l02848" /><CodeLine lineNumber="2848"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = &#42;(<a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.begin() + <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02849" /><CodeLine lineNumber="2849"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ReadyCycle = <a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() ? SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> : SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>;</span></CodeLine>
<Link id="l02850" /><CodeLine lineNumber="2850"></CodeLine>
<Link id="l02851" /><CodeLine lineNumber="2851"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ReadyCycle &lt; MinReadyCycle)</span></CodeLine>
<Link id="l02852" /><CodeLine lineNumber="2852"><span class="doxyHighlight">      MinReadyCycle = ReadyCycle;</span></CodeLine>
<Link id="l02853" /><CodeLine lineNumber="2853"></CodeLine>
<Link id="l02854" /><CodeLine lineNumber="2854"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.size() &gt;= <a href="#af040ecdbfbf801186c7941597cc793a6">ReadyListLimit</a>)</span></CodeLine>
<Link id="l02855" /><CodeLine lineNumber="2855"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02856" /><CodeLine lineNumber="2856"></CodeLine>
<Link id="l02857" /><CodeLine lineNumber="2857"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/schedboundary/#a751090565ab555f2738aec07bc1a350c">releaseNode</a>(SU, ReadyCycle, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02858" /><CodeLine lineNumber="2858"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (E != <a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.size()) &#123;</span></CodeLine>
<Link id="l02859" /><CodeLine lineNumber="2859"><span class="doxyHighlight">      --<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</span></CodeLine>
<Link id="l02860" /><CodeLine lineNumber="2860"><span class="doxyHighlight">      --E;</span></CodeLine>
<Link id="l02861" /><CodeLine lineNumber="2861"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02862" /><CodeLine lineNumber="2862"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02863" /><CodeLine lineNumber="2863"><span class="doxyHighlight">  CheckPending = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02864" /><CodeLine lineNumber="2864"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02865" /><CodeLine lineNumber="2865"></CodeLine>
<Link id="l02866" /><CodeLine lineNumber="2866"><span class="doxyHighlightComment">/// Remove SU from the ready set for this boundary.</span></CodeLine>
<Link id="l02867" /><CodeLine lineNumber="2867" lineLink="/docs/api/classes/llvm/schedboundary/#ae28da0579ee268c38eb2a5ababa222fa"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#ae28da0579ee268c38eb2a5ababa222fa">SchedBoundary::removeReady</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU) &#123;</span></CodeLine>
<Link id="l02868" /><CodeLine lineNumber="2868"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.isInQueue(SU))</span></CodeLine>
<Link id="l02869" /><CodeLine lineNumber="2869"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.remove(<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.find(SU));</span></CodeLine>
<Link id="l02870" /><CodeLine lineNumber="2870"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02871" /><CodeLine lineNumber="2871"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.isInQueue(SU) &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;bad ready count&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02872" /><CodeLine lineNumber="2872"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.remove(<a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.find(SU));</span></CodeLine>
<Link id="l02873" /><CodeLine lineNumber="2873"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02874" /><CodeLine lineNumber="2874"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02875" /><CodeLine lineNumber="2875"></CodeLine>
<Link id="l02876" /><CodeLine lineNumber="2876"><span class="doxyHighlightComment">/// If this queue only has one ready candidate, return it. As a side effect,</span></CodeLine>
<Link id="l02877" /><CodeLine lineNumber="2877"><span class="doxyHighlightComment">/// defer any nodes that now hit a hazard, and advance the cycle until at least</span></CodeLine>
<Link id="l02878" /><CodeLine lineNumber="2878"><span class="doxyHighlightComment">/// one node is ready. If multiple instructions are ready, return NULL.</span></CodeLine>
<Link id="l02879" /><CodeLine lineNumber="2879" lineLink="/docs/api/classes/llvm/schedboundary/#a744d69baffaf2903667eb65cf07a6814"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/llvm/schedboundary/#a744d69baffaf2903667eb65cf07a6814">SchedBoundary::pickOnlyChoice</a>() &#123;</span></CodeLine>
<Link id="l02880" /><CodeLine lineNumber="2880"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CheckPending)</span></CodeLine>
<Link id="l02881" /><CodeLine lineNumber="2881"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/schedboundary/#a155166a788cfe0d992af6f2e21e6118e">releasePending</a>();</span></CodeLine>
<Link id="l02882" /><CodeLine lineNumber="2882"></CodeLine>
<Link id="l02883" /><CodeLine lineNumber="2883"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Defer any ready instrs that now have a hazard.</span></CodeLine>
<Link id="l02884" /><CodeLine lineNumber="2884"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/readyqueue/#ac382b8e28fb3d7992c04e6362c3b5295">ReadyQueue::iterator</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.begin(); <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.end();) &#123;</span></CodeLine>
<Link id="l02885" /><CodeLine lineNumber="2885"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#adb8558f52662b83fe081b34b1f31fb20">checkHazard</a>(&#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</span></CodeLine>
<Link id="l02886" /><CodeLine lineNumber="2886"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.push(&#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02887" /><CodeLine lineNumber="2887"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.remove(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l02888" /><CodeLine lineNumber="2888"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02889" /><CodeLine lineNumber="2889"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02890" /><CodeLine lineNumber="2890"><span class="doxyHighlight">    ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</span></CodeLine>
<Link id="l02891" /><CodeLine lineNumber="2891"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02892" /><CodeLine lineNumber="2892"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 0; <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.empty(); ++i) &#123;</span></CodeLine>
<Link id="l02893" /><CodeLine lineNumber="2893"><span class="doxyHighlightComment">//  FIXME: Re-enable assert once PR20057 is resolved.</span></CodeLine>
<Link id="l02894" /><CodeLine lineNumber="2894"><span class="doxyHighlightComment">//    assert(i &lt;= (HazardRec-&gt;getMaxLookAhead() + MaxObservedStall) &amp;&amp;</span></CodeLine>
<Link id="l02895" /><CodeLine lineNumber="2895"><span class="doxyHighlightComment">//           &quot;permanent hazard&quot;);</span></CodeLine>
<Link id="l02896" /><CodeLine lineNumber="2896"><span class="doxyHighlight">    (void)i;</span></CodeLine>
<Link id="l02897" /><CodeLine lineNumber="2897"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/schedboundary/#abb74f3d3a30e2ae598ec8a782d9031e8">bumpCycle</a>(CurrCycle + 1);</span></CodeLine>
<Link id="l02898" /><CodeLine lineNumber="2898"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/schedboundary/#a155166a788cfe0d992af6f2e21e6118e">releasePending</a>();</span></CodeLine>
<Link id="l02899" /><CodeLine lineNumber="2899"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02900" /><CodeLine lineNumber="2900"></CodeLine>
<Link id="l02901" /><CodeLine lineNumber="2901"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.dump());</span></CodeLine>
<Link id="l02902" /><CodeLine lineNumber="2902"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.dump());</span></CodeLine>
<Link id="l02903" /><CodeLine lineNumber="2903"></CodeLine>
<Link id="l02904" /><CodeLine lineNumber="2904"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.size() == 1)</span></CodeLine>
<Link id="l02905" /><CodeLine lineNumber="2905"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#42;<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.begin();</span></CodeLine>
<Link id="l02906" /><CodeLine lineNumber="2906"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02907" /><CodeLine lineNumber="2907"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02908" /><CodeLine lineNumber="2908"></CodeLine>
<Link id="l02909" /><CodeLine lineNumber="2909"><span class="doxyHighlightPreprocessor">#if !defined(NDEBUG) || defined(LLVM&#95;ENABLE&#95;DUMP)</span></CodeLine>
<Link id="l02910" /><CodeLine lineNumber="2910"></CodeLine>
<Link id="l02911" /><CodeLine lineNumber="2911"><span class="doxyHighlightComment">/// Dump the content of the \\ref ReservedCycles vector for the</span></CodeLine>
<Link id="l02912" /><CodeLine lineNumber="2912"><span class="doxyHighlightComment">/// resources that are used in the basic block.</span></CodeLine>
<Link id="l02913" /><CodeLine lineNumber="2913"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02914" /><CodeLine lineNumber="2914" lineLink="/docs/api/classes/llvm/schedboundary/#a53bfc0f964240b77c4569bea523c2b39"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/support/compiler-h/#aa863693eef567397d9c292da5bf22d34">LLVM&#95;DUMP&#95;METHOD</a> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#a53bfc0f964240b77c4569bea523c2b39">SchedBoundary::dumpReservedCycles</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02915" /><CodeLine lineNumber="2915"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;hasInstrSchedModel())</span></CodeLine>
<Link id="l02916" /><CodeLine lineNumber="2916"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02917" /><CodeLine lineNumber="2917"></CodeLine>
<Link id="l02918" /><CodeLine lineNumber="2918"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ResourceCount = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getNumProcResourceKinds();</span></CodeLine>
<Link id="l02919" /><CodeLine lineNumber="2919"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> StartIdx = 0;</span></CodeLine>
<Link id="l02920" /><CodeLine lineNumber="2920"></CodeLine>
<Link id="l02921" /><CodeLine lineNumber="2921"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ResIdx = 0; ResIdx &lt; ResourceCount; ++ResIdx) &#123;</span></CodeLine>
<Link id="l02922" /><CodeLine lineNumber="2922"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumUnits = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getProcResource(ResIdx)-&gt;NumUnits;</span></CodeLine>
<Link id="l02923" /><CodeLine lineNumber="2923"><span class="doxyHighlight">    std::string ResName = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceName(ResIdx);</span></CodeLine>
<Link id="l02924" /><CodeLine lineNumber="2924"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> UnitIdx = 0; UnitIdx &lt; NumUnits; ++UnitIdx) &#123;</span></CodeLine>
<Link id="l02925" /><CodeLine lineNumber="2925"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; ResName &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;(&quot;</span><span class="doxyHighlight"> &lt;&lt; UnitIdx &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) = &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02926" /><CodeLine lineNumber="2926"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a> &amp;&amp; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;enableIntervals()) &#123;</span></CodeLine>
<Link id="l02927" /><CodeLine lineNumber="2927"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ReservedResourceSegments.count(StartIdx + UnitIdx))</span></CodeLine>
<Link id="l02928" /><CodeLine lineNumber="2928"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; ReservedResourceSegments.at(StartIdx + UnitIdx);</span></CodeLine>
<Link id="l02929" /><CodeLine lineNumber="2929"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l02930" /><CodeLine lineNumber="2930"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;&#123; &#125;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02931" /><CodeLine lineNumber="2931"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l02932" /><CodeLine lineNumber="2932"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; ReservedCycles&#91;StartIdx + UnitIdx&#93; &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02933" /><CodeLine lineNumber="2933"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02934" /><CodeLine lineNumber="2934"><span class="doxyHighlight">    StartIdx += NumUnits;</span></CodeLine>
<Link id="l02935" /><CodeLine lineNumber="2935"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02936" /><CodeLine lineNumber="2936"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02937" /><CodeLine lineNumber="2937"></CodeLine>
<Link id="l02938" /><CodeLine lineNumber="2938"><span class="doxyHighlightComment">// This is useful information to dump after bumpNode.</span></CodeLine>
<Link id="l02939" /><CodeLine lineNumber="2939"><span class="doxyHighlightComment">// Note that the Queue contents are more useful before pickNodeFromQueue.</span></CodeLine>
<Link id="l02940" /><CodeLine lineNumber="2940" lineLink="/docs/api/classes/llvm/schedboundary/#ae01f950d577dadad26a49baa47d10d66"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/include/llvm/support/compiler-h/#aa863693eef567397d9c292da5bf22d34">LLVM&#95;DUMP&#95;METHOD</a> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/schedboundary/#ae01f950d577dadad26a49baa47d10d66">SchedBoundary::dumpScheduledState</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02941" /><CodeLine lineNumber="2941"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ResFactor;</span></CodeLine>
<Link id="l02942" /><CodeLine lineNumber="2942"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ResCount;</span></CodeLine>
<Link id="l02943" /><CodeLine lineNumber="2943"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ZoneCritResIdx) &#123;</span></CodeLine>
<Link id="l02944" /><CodeLine lineNumber="2944"><span class="doxyHighlight">    ResFactor = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceFactor(ZoneCritResIdx);</span></CodeLine>
<Link id="l02945" /><CodeLine lineNumber="2945"><span class="doxyHighlight">    ResCount = <a href="/docs/api/classes/llvm/schedboundary/#ab873e76ca432b2280dad3ffc130b6515">getResourceCount</a>(ZoneCritResIdx);</span></CodeLine>
<Link id="l02946" /><CodeLine lineNumber="2946"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02947" /><CodeLine lineNumber="2947"><span class="doxyHighlight">    ResFactor = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getMicroOpFactor();</span></CodeLine>
<Link id="l02948" /><CodeLine lineNumber="2948"><span class="doxyHighlight">    ResCount = RetiredMOps &#42; ResFactor;</span></CodeLine>
<Link id="l02949" /><CodeLine lineNumber="2949"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02950" /><CodeLine lineNumber="2950"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> LFactor = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getLatencyFactor();</span></CodeLine>
<Link id="l02951" /><CodeLine lineNumber="2951"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; @&quot;</span><span class="doxyHighlight"> &lt;&lt; CurrCycle &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c\\n&quot;</span></CodeLine>
<Link id="l02952" /><CodeLine lineNumber="2952"><span class="doxyHighlight">         &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Retired: &quot;</span><span class="doxyHighlight"> &lt;&lt; RetiredMOps;</span></CodeLine>
<Link id="l02953" /><CodeLine lineNumber="2953"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n  Executed: &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a42aaa1b48f61e21b104a0aab30142385">getExecutedCount</a>() / LFactor &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02954" /><CodeLine lineNumber="2954"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n  Critical: &quot;</span><span class="doxyHighlight"> &lt;&lt; ResCount / LFactor &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c, &quot;</span></CodeLine>
<Link id="l02955" /><CodeLine lineNumber="2955"><span class="doxyHighlight">         &lt;&lt; ResCount / ResFactor &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span></CodeLine>
<Link id="l02956" /><CodeLine lineNumber="2956"><span class="doxyHighlight">         &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceName(ZoneCritResIdx)</span></CodeLine>
<Link id="l02957" /><CodeLine lineNumber="2957"><span class="doxyHighlight">         &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n  ExpectedLatency: &quot;</span><span class="doxyHighlight"> &lt;&lt; ExpectedLatency &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c\\n&quot;</span></CodeLine>
<Link id="l02958" /><CodeLine lineNumber="2958"><span class="doxyHighlight">         &lt;&lt; (IsResourceLimited ? </span><span class="doxyHighlightStringLiteral">&quot;  - Resource&quot;</span><span class="doxyHighlight"> : </span><span class="doxyHighlightStringLiteral">&quot;  - Latency&quot;</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l02959" /><CodeLine lineNumber="2959"><span class="doxyHighlight">         &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; limited.\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02960" /><CodeLine lineNumber="2960"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a3f253389931150fd73bfae4cd61c3ae6">MISchedDumpReservedCycles</a>)</span></CodeLine>
<Link id="l02961" /><CodeLine lineNumber="2961"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/schedboundary/#a53bfc0f964240b77c4569bea523c2b39">dumpReservedCycles</a>();</span></CodeLine>
<Link id="l02962" /><CodeLine lineNumber="2962"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02963" /><CodeLine lineNumber="2963"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l02964" /><CodeLine lineNumber="2964"></CodeLine>
<Link id="l02965" /><CodeLine lineNumber="2965"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l02966" /><CodeLine lineNumber="2966"><span class="doxyHighlightComment">// GenericScheduler - Generic implementation of MachineSchedStrategy.</span></CodeLine>
<Link id="l02967" /><CodeLine lineNumber="2967"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l02968" /><CodeLine lineNumber="2968"></CodeLine>
<Link id="l02969" /><CodeLine lineNumber="2969" lineLink="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a47cc8c89db10ac27483585cd61cf4f91"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a47cc8c89db10ac27483585cd61cf4f91">GenericSchedulerBase::SchedCandidate::</a></span></CodeLine>
<Link id="l02970" /><CodeLine lineNumber="2970"><span class="doxyHighlight"><a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a47cc8c89db10ac27483585cd61cf4f91">initResourceDelta</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;DAG,</span></CodeLine>
<Link id="l02971" /><CodeLine lineNumber="2971"><span class="doxyHighlight">                  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetschedmodel">TargetSchedModel</a> &#42;<a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>) &#123;</span></CodeLine>
<Link id="l02972" /><CodeLine lineNumber="2972"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>.ReduceResIdx &amp;&amp; !<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>.DemandResIdx)</span></CodeLine>
<Link id="l02973" /><CodeLine lineNumber="2973"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02974" /><CodeLine lineNumber="2974"></CodeLine>
<Link id="l02975" /><CodeLine lineNumber="2975"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a4bf5573660c55924d68b517a0e9b4554">getSchedClass</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>);</span></CodeLine>
<Link id="l02976" /><CodeLine lineNumber="2976"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/targetschedmodel/#a7b653a507e8307775b33e01655d3b8d8">TargetSchedModel::ProcResIter</a></span></CodeLine>
<Link id="l02977" /><CodeLine lineNumber="2977"><span class="doxyHighlight">         PI = <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getWriteProcResBegin(SC),</span></CodeLine>
<Link id="l02978" /><CodeLine lineNumber="2978"><span class="doxyHighlight">         PE = <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getWriteProcResEnd(SC); PI != PE; ++PI) &#123;</span></CodeLine>
<Link id="l02979" /><CodeLine lineNumber="2979"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (PI-&gt;ProcResourceIdx == <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>.ReduceResIdx)</span></CodeLine>
<Link id="l02980" /><CodeLine lineNumber="2980"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.CritResources += PI-&gt;ReleaseAtCycle;</span></CodeLine>
<Link id="l02981" /><CodeLine lineNumber="2981"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (PI-&gt;ProcResourceIdx == <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>.DemandResIdx)</span></CodeLine>
<Link id="l02982" /><CodeLine lineNumber="2982"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.DemandedResources += PI-&gt;ReleaseAtCycle;</span></CodeLine>
<Link id="l02983" /><CodeLine lineNumber="2983"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02984" /><CodeLine lineNumber="2984"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02985" /><CodeLine lineNumber="2985"></CodeLine>
<Link id="l02986" /><CodeLine lineNumber="2986"><span class="doxyHighlightComment">/// Compute remaining latency. We need this both to determine whether the</span></CodeLine>
<Link id="l02987" /><CodeLine lineNumber="2987"><span class="doxyHighlightComment">/// overall schedule has become latency-limited and whether the instructions</span></CodeLine>
<Link id="l02988" /><CodeLine lineNumber="2988"><span class="doxyHighlightComment">/// outside this zone are resource or latency limited.</span></CodeLine>
<Link id="l02989" /><CodeLine lineNumber="2989"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02990" /><CodeLine lineNumber="2990"><span class="doxyHighlightComment">/// The &quot;dependent&quot; latency is updated incrementally during scheduling as the</span></CodeLine>
<Link id="l02991" /><CodeLine lineNumber="2991"><span class="doxyHighlightComment">/// max height/depth of scheduled nodes minus the cycles since it was</span></CodeLine>
<Link id="l02992" /><CodeLine lineNumber="2992"><span class="doxyHighlightComment">/// scheduled:</span></CodeLine>
<Link id="l02993" /><CodeLine lineNumber="2993"><span class="doxyHighlightComment">///   DLat = max (N.depth - (CurrCycle - N.ReadyCycle) for N in Zone</span></CodeLine>
<Link id="l02994" /><CodeLine lineNumber="2994"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02995" /><CodeLine lineNumber="2995"><span class="doxyHighlightComment">/// The &quot;independent&quot; latency is the max ready queue depth:</span></CodeLine>
<Link id="l02996" /><CodeLine lineNumber="2996"><span class="doxyHighlightComment">///   ILat = max N.depth for N in Available|Pending</span></CodeLine>
<Link id="l02997" /><CodeLine lineNumber="2997"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l02998" /><CodeLine lineNumber="2998"><span class="doxyHighlightComment">/// RemainingLatency is the greater of independent and dependent latency.</span></CodeLine>
<Link id="l02999" /><CodeLine lineNumber="2999"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l03000" /><CodeLine lineNumber="3000"><span class="doxyHighlightComment">/// These computations are expensive, especially in DAGs with many edges, so</span></CodeLine>
<Link id="l03001" /><CodeLine lineNumber="3001"><span class="doxyHighlightComment">/// only do them if necessary.</span></CodeLine>
<Link id="l03002" /><CodeLine lineNumber="3002" lineLink="#a4d6bf176cc854701f61fba566b9dbf9b"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="#a4d6bf176cc854701f61fba566b9dbf9b">computeRemLatency</a>(<a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &amp;CurrZone) &#123;</span></CodeLine>
<Link id="l03003" /><CodeLine lineNumber="3003"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> RemLatency = CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#a24bc7ce4ae7f1bc672ee20aaefcce30b">getDependentLatency</a>();</span></CodeLine>
<Link id="l03004" /><CodeLine lineNumber="3004"><span class="doxyHighlight">  RemLatency = std::max(RemLatency,</span></CodeLine>
<Link id="l03005" /><CodeLine lineNumber="3005"><span class="doxyHighlight">                        CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#a4e57bf16f8ed97dbbdc4d48655455b3c">findMaxLatency</a>(CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.<a href="/docs/api/classes/llvm/readyqueue/#a57a4bd7fcd66c8d555fa3b6a7e982002">elements</a>()));</span></CodeLine>
<Link id="l03006" /><CodeLine lineNumber="3006"><span class="doxyHighlight">  RemLatency = std::max(RemLatency,</span></CodeLine>
<Link id="l03007" /><CodeLine lineNumber="3007"><span class="doxyHighlight">                        CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#a4e57bf16f8ed97dbbdc4d48655455b3c">findMaxLatency</a>(CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.<a href="/docs/api/classes/llvm/readyqueue/#a57a4bd7fcd66c8d555fa3b6a7e982002">elements</a>()));</span></CodeLine>
<Link id="l03008" /><CodeLine lineNumber="3008"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> RemLatency;</span></CodeLine>
<Link id="l03009" /><CodeLine lineNumber="3009"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03010" /><CodeLine lineNumber="3010"></CodeLine>
<Link id="l03011" /><CodeLine lineNumber="3011"><span class="doxyHighlightComment">/// Returns true if the current cycle plus remaning latency is greater than</span></CodeLine>
<Link id="l03012" /><CodeLine lineNumber="3012"><span class="doxyHighlightComment">/// the critical path in the scheduling region.</span></CodeLine>
<Link id="l03013" /><CodeLine lineNumber="3013"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> GenericSchedulerBase::shouldReduceLatency(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> &amp;Policy,</span></CodeLine>
<Link id="l03014" /><CodeLine lineNumber="3014"><span class="doxyHighlight">                                               SchedBoundary &amp;CurrZone,</span></CodeLine>
<Link id="l03015" /><CodeLine lineNumber="3015"><span class="doxyHighlight">                                               </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ComputeRemLatency,</span></CodeLine>
<Link id="l03016" /><CodeLine lineNumber="3016"><span class="doxyHighlight">                                               </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> &amp;RemLatency)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03017" /><CodeLine lineNumber="3017"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The current cycle is already greater than the critical path, so we are</span></CodeLine>
<Link id="l03018" /><CodeLine lineNumber="3018"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// already latency limited and don&#39;t need to compute the remaining latency.</span></CodeLine>
<Link id="l03019" /><CodeLine lineNumber="3019"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#acef1c37226a48a752d933063e8ba6f83">getCurrCycle</a>() &gt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath)</span></CodeLine>
<Link id="l03020" /><CodeLine lineNumber="3020"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03021" /><CodeLine lineNumber="3021"></CodeLine>
<Link id="l03022" /><CodeLine lineNumber="3022"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If we haven&#39;t scheduled anything yet, then we aren&#39;t latency limited.</span></CodeLine>
<Link id="l03023" /><CodeLine lineNumber="3023"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#acef1c37226a48a752d933063e8ba6f83">getCurrCycle</a>() == 0)</span></CodeLine>
<Link id="l03024" /><CodeLine lineNumber="3024"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03025" /><CodeLine lineNumber="3025"></CodeLine>
<Link id="l03026" /><CodeLine lineNumber="3026"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ComputeRemLatency)</span></CodeLine>
<Link id="l03027" /><CodeLine lineNumber="3027"><span class="doxyHighlight">    RemLatency = <a href="#a4d6bf176cc854701f61fba566b9dbf9b">computeRemLatency</a>(CurrZone);</span></CodeLine>
<Link id="l03028" /><CodeLine lineNumber="3028"></CodeLine>
<Link id="l03029" /><CodeLine lineNumber="3029"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> RemLatency + CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#acef1c37226a48a752d933063e8ba6f83">getCurrCycle</a>() &gt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath;</span></CodeLine>
<Link id="l03030" /><CodeLine lineNumber="3030"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03031" /><CodeLine lineNumber="3031"></CodeLine>
<Link id="l03032" /><CodeLine lineNumber="3032"><span class="doxyHighlightComment">/// Set the CandPolicy given a scheduling zone given the current resources and</span></CodeLine>
<Link id="l03033" /><CodeLine lineNumber="3033"><span class="doxyHighlightComment">/// latencies inside and outside the zone.</span></CodeLine>
<Link id="l03034" /><CodeLine lineNumber="3034" lineLink="/docs/api/classes/llvm/genericschedulerbase/#a8668556014566994c07b21391762551b"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#a8668556014566994c07b21391762551b">GenericSchedulerBase::setPolicy</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> &amp;Policy, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsPostRA,</span></CodeLine>
<Link id="l03035" /><CodeLine lineNumber="3035"><span class="doxyHighlight">                                     <a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &amp;CurrZone,</span></CodeLine>
<Link id="l03036" /><CodeLine lineNumber="3036"><span class="doxyHighlight">                                     <a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &#42;OtherZone) &#123;</span></CodeLine>
<Link id="l03037" /><CodeLine lineNumber="3037"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Apply preemptive heuristics based on the total latency and resources</span></CodeLine>
<Link id="l03038" /><CodeLine lineNumber="3038"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// inside and outside this zone. Potential stalls should be considered before</span></CodeLine>
<Link id="l03039" /><CodeLine lineNumber="3039"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// following this policy.</span></CodeLine>
<Link id="l03040" /><CodeLine lineNumber="3040"></CodeLine>
<Link id="l03041" /><CodeLine lineNumber="3041"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Compute the critical resource outside the zone.</span></CodeLine>
<Link id="l03042" /><CodeLine lineNumber="3042"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> OtherCritIdx = 0;</span></CodeLine>
<Link id="l03043" /><CodeLine lineNumber="3043"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> OtherCount =</span></CodeLine>
<Link id="l03044" /><CodeLine lineNumber="3044"><span class="doxyHighlight">    OtherZone ? OtherZone-&gt;<a href="/docs/api/classes/llvm/schedboundary/#a5af50e4260bb23b1035c52c186fdcc8b">getOtherResourceCount</a>(OtherCritIdx) : 0;</span></CodeLine>
<Link id="l03045" /><CodeLine lineNumber="3045"></CodeLine>
<Link id="l03046" /><CodeLine lineNumber="3046"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> OtherResLimited = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03047" /><CodeLine lineNumber="3047"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> RemLatency = 0;</span></CodeLine>
<Link id="l03048" /><CodeLine lineNumber="3048"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> RemLatencyComputed = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03049" /><CodeLine lineNumber="3049"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;hasInstrSchedModel() &amp;&amp; OtherCount != 0) &#123;</span></CodeLine>
<Link id="l03050" /><CodeLine lineNumber="3050"><span class="doxyHighlight">    RemLatency = <a href="#a4d6bf176cc854701f61fba566b9dbf9b">computeRemLatency</a>(CurrZone);</span></CodeLine>
<Link id="l03051" /><CodeLine lineNumber="3051"><span class="doxyHighlight">    RemLatencyComputed = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03052" /><CodeLine lineNumber="3052"><span class="doxyHighlight">    OtherResLimited = <a href="#a77e51ffc94a77ff8e4778e59a02e7b67">checkResourceLimit</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getLatencyFactor(),</span></CodeLine>
<Link id="l03053" /><CodeLine lineNumber="3053"><span class="doxyHighlight">                                         OtherCount, RemLatency, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03054" /><CodeLine lineNumber="3054"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03055" /><CodeLine lineNumber="3055"></CodeLine>
<Link id="l03056" /><CodeLine lineNumber="3056"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Schedule aggressively for latency in PostRA mode. We don&#39;t check for</span></CodeLine>
<Link id="l03057" /><CodeLine lineNumber="3057"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// acyclic latency during PostRA, and highly out-of-order processors will</span></CodeLine>
<Link id="l03058" /><CodeLine lineNumber="3058"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// skip PostRA scheduling.</span></CodeLine>
<Link id="l03059" /><CodeLine lineNumber="3059"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!OtherResLimited &amp;&amp;</span></CodeLine>
<Link id="l03060" /><CodeLine lineNumber="3060"><span class="doxyHighlight">      (IsPostRA || shouldReduceLatency(Policy, CurrZone, !RemLatencyComputed,</span></CodeLine>
<Link id="l03061" /><CodeLine lineNumber="3061"><span class="doxyHighlight">                                       RemLatency))) &#123;</span></CodeLine>
<Link id="l03062" /><CodeLine lineNumber="3062"><span class="doxyHighlight">    Policy.<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy/#acd9f1ecfaa9db2800e6fe15a385b4a6f">ReduceLatency</a> |= </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03063" /><CodeLine lineNumber="3063"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  &quot;</span><span class="doxyHighlight"> &lt;&lt; CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.<a href="/docs/api/classes/llvm/readyqueue/#ac90e8349a5117f988bbb4cf8bf8c5f9f">getName</a>()</span></CodeLine>
<Link id="l03064" /><CodeLine lineNumber="3064"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; RemainingLatency &quot;</span><span class="doxyHighlight"> &lt;&lt; RemLatency &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; + &quot;</span></CodeLine>
<Link id="l03065" /><CodeLine lineNumber="3065"><span class="doxyHighlight">                      &lt;&lt; CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#acef1c37226a48a752d933063e8ba6f83">getCurrCycle</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c &gt; CritPath &quot;</span></CodeLine>
<Link id="l03066" /><CodeLine lineNumber="3066"><span class="doxyHighlight">                      &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03067" /><CodeLine lineNumber="3067"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03068" /><CodeLine lineNumber="3068"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If the same resource is limiting inside and outside the zone, do nothing.</span></CodeLine>
<Link id="l03069" /><CodeLine lineNumber="3069"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#ae98af615296b8adf67556301343d6ca2">getZoneCritResIdx</a>() == OtherCritIdx)</span></CodeLine>
<Link id="l03070" /><CodeLine lineNumber="3070"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03071" /><CodeLine lineNumber="3071"></CodeLine>
<Link id="l03072" /><CodeLine lineNumber="3072"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#a2ec93f0e570be68d89930c8e4032ef83">isResourceLimited</a>()) &#123;</span></CodeLine>
<Link id="l03073" /><CodeLine lineNumber="3073"><span class="doxyHighlight">    dbgs() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  &quot;</span><span class="doxyHighlight"> &lt;&lt; CurrZone.Available.getName() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; ResourceLimited: &quot;</span></CodeLine>
<Link id="l03074" /><CodeLine lineNumber="3074"><span class="doxyHighlight">           &lt;&lt; SchedModel-&gt;getResourceName(CurrZone.getZoneCritResIdx()) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03075" /><CodeLine lineNumber="3075"><span class="doxyHighlight">  &#125; <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#acdfbcf188e2d4a80837e89de2ccdffab">if</a> (OtherResLimited) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</span></CodeLine>
<Link id="l03076" /><CodeLine lineNumber="3076"><span class="doxyHighlight">                 &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  RemainingLimit: &quot;</span></CodeLine>
<Link id="l03077" /><CodeLine lineNumber="3077"><span class="doxyHighlight">                 &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getResourceName(OtherCritIdx) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03078" /><CodeLine lineNumber="3078"><span class="doxyHighlight">             <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#acdfbcf188e2d4a80837e89de2ccdffab">if</a> (!CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#a2ec93f0e570be68d89930c8e4032ef83">isResourceLimited</a>() &amp;&amp; !OtherResLimited) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</span></CodeLine>
<Link id="l03079" /><CodeLine lineNumber="3079"><span class="doxyHighlight">             &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Latency limited both directions.\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03080" /><CodeLine lineNumber="3080"></CodeLine>
<Link id="l03081" /><CodeLine lineNumber="3081"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#a2ec93f0e570be68d89930c8e4032ef83">isResourceLimited</a>() &amp;&amp; !Policy.<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy/#a413ba6a1fb7916faa6b5d34aa4397d9b">ReduceResIdx</a>)</span></CodeLine>
<Link id="l03082" /><CodeLine lineNumber="3082"><span class="doxyHighlight">    Policy.<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy/#a413ba6a1fb7916faa6b5d34aa4397d9b">ReduceResIdx</a> = CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#ae98af615296b8adf67556301343d6ca2">getZoneCritResIdx</a>();</span></CodeLine>
<Link id="l03083" /><CodeLine lineNumber="3083"></CodeLine>
<Link id="l03084" /><CodeLine lineNumber="3084"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (OtherResLimited)</span></CodeLine>
<Link id="l03085" /><CodeLine lineNumber="3085"><span class="doxyHighlight">    Policy.<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy/#a61f080e69dc94a237cc49b7a3ca8c558">DemandResIdx</a> = OtherCritIdx;</span></CodeLine>
<Link id="l03086" /><CodeLine lineNumber="3086"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03087" /><CodeLine lineNumber="3087"></CodeLine>
<Link id="l03088" /><CodeLine lineNumber="3088"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l03089" /><CodeLine lineNumber="3089" lineLink="/docs/api/classes/llvm/genericschedulerbase/#a9df77ae80f822b788cb2464992a05bc1"><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> &#42;<a href="/docs/api/classes/llvm/genericschedulerbase/#a9df77ae80f822b788cb2464992a05bc1">GenericSchedulerBase::getReasonStr</a>(</span></CodeLine>
<Link id="l03090" /><CodeLine lineNumber="3090"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3">GenericSchedulerBase::CandReason</a> Reason) &#123;</span></CodeLine>
<Link id="l03091" /><CodeLine lineNumber="3091"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (Reason) &#123;</span></CodeLine>
<Link id="l03092" /><CodeLine lineNumber="3092"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>:         </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;NOCAND    &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03093" /><CodeLine lineNumber="3093"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a3e5ec7d7634a70f61fd64c3ef22d02f1">Only1</a>:          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;ONLY1     &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03094" /><CodeLine lineNumber="3094"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3ab58c08e8fa9324ebf332e11601ec6c0d">PhysReg</a>:        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;PHYS-REG  &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03095" /><CodeLine lineNumber="3095"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a01d264553167fb005aba23a6d2a6e9bb">RegExcess</a>:      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;REG-EXCESS&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03096" /><CodeLine lineNumber="3096"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a974161ce84e375b6d40bd8855c29dd7f">RegCritical</a>:    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;REG-CRIT  &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03097" /><CodeLine lineNumber="3097"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3ab6aae8902e724a36ed16d537784777a2">Stall</a>:          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;STALL     &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03098" /><CodeLine lineNumber="3098"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a5a905614458af47ec4a5054a53d23e1b">Cluster</a>:        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;CLUSTER   &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03099" /><CodeLine lineNumber="3099"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3aed8b719fe1a669c2fed4bacc6f46e8df">Weak</a>:           </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;WEAK      &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03100" /><CodeLine lineNumber="3100"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a01ef8d8423fe645e50ad5a179b4f4483">RegMax</a>:         </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;REG-MAX   &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03101" /><CodeLine lineNumber="3101"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a56637d3435d7e1953a615371cfe4d5ec">ResourceReduce</a>: </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;RES-REDUCE&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03102" /><CodeLine lineNumber="3102"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a07409a8a5b9657af23f0a1c962f5c0c1">ResourceDemand</a>: </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;RES-DEMAND&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03103" /><CodeLine lineNumber="3103"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3afb16e35278ff80f34d2ad9889213b406">TopDepthReduce</a>: </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;TOP-DEPTH &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03104" /><CodeLine lineNumber="3104"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a768a7f66e30d6b2d2d81ab1af56bf6c4">TopPathReduce</a>:  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;TOP-PATH  &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03105" /><CodeLine lineNumber="3105"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a8ea4d71243c1b82d5e35065d580c1e49">BotHeightReduce</a>:</span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;BOT-HEIGHT&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03106" /><CodeLine lineNumber="3106"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3ad3c3c8a47c777d0f591ca18eaf7000d4">BotPathReduce</a>:  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;BOT-PATH  &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03107" /><CodeLine lineNumber="3107"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3af9d4eb6d4d0ca011ccbb24f139c9bf73">NextDefUse</a>:     </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;DEF-USE   &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03108" /><CodeLine lineNumber="3108"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3aa00a8e5741a604eb07320e981473b4e7">NodeOrder</a>:      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;ORDER     &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03109" /><CodeLine lineNumber="3109"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l03110" /><CodeLine lineNumber="3110"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;Unknown reason!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03111" /><CodeLine lineNumber="3111"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03112" /><CodeLine lineNumber="3112"></CodeLine>
<Link id="l03113" /><CodeLine lineNumber="3113" lineLink="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">GenericSchedulerBase::traceCandidate</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> &amp;Cand) &#123;</span></CodeLine>
<Link id="l03114" /><CodeLine lineNumber="3114"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/pressurechange">PressureChange</a> <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>;</span></CodeLine>
<Link id="l03115" /><CodeLine lineNumber="3115"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ResIdx = 0;</span></CodeLine>
<Link id="l03116" /><CodeLine lineNumber="3116"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a> = 0;</span></CodeLine>
<Link id="l03117" /><CodeLine lineNumber="3117"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a>) &#123;</span></CodeLine>
<Link id="l03118" /><CodeLine lineNumber="3118"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l03119" /><CodeLine lineNumber="3119"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03120" /><CodeLine lineNumber="3120"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a01d264553167fb005aba23a6d2a6e9bb">RegExcess</a>:</span></CodeLine>
<Link id="l03121" /><CodeLine lineNumber="3121"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>;</span></CodeLine>
<Link id="l03122" /><CodeLine lineNumber="3122"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03123" /><CodeLine lineNumber="3123"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a974161ce84e375b6d40bd8855c29dd7f">RegCritical</a>:</span></CodeLine>
<Link id="l03124" /><CodeLine lineNumber="3124"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>;</span></CodeLine>
<Link id="l03125" /><CodeLine lineNumber="3125"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03126" /><CodeLine lineNumber="3126"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a01ef8d8423fe645e50ad5a179b4f4483">RegMax</a>:</span></CodeLine>
<Link id="l03127" /><CodeLine lineNumber="3127"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>;</span></CodeLine>
<Link id="l03128" /><CodeLine lineNumber="3128"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03129" /><CodeLine lineNumber="3129"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a56637d3435d7e1953a615371cfe4d5ec">ResourceReduce</a>:</span></CodeLine>
<Link id="l03130" /><CodeLine lineNumber="3130"><span class="doxyHighlight">    ResIdx = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy/#a413ba6a1fb7916faa6b5d34aa4397d9b">ReduceResIdx</a>;</span></CodeLine>
<Link id="l03131" /><CodeLine lineNumber="3131"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03132" /><CodeLine lineNumber="3132"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a07409a8a5b9657af23f0a1c962f5c0c1">ResourceDemand</a>:</span></CodeLine>
<Link id="l03133" /><CodeLine lineNumber="3133"><span class="doxyHighlight">    ResIdx = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy/#a61f080e69dc94a237cc49b7a3ca8c558">DemandResIdx</a>;</span></CodeLine>
<Link id="l03134" /><CodeLine lineNumber="3134"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03135" /><CodeLine lineNumber="3135"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3afb16e35278ff80f34d2ad9889213b406">TopDepthReduce</a>:</span></CodeLine>
<Link id="l03136" /><CodeLine lineNumber="3136"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a> = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>();</span></CodeLine>
<Link id="l03137" /><CodeLine lineNumber="3137"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03138" /><CodeLine lineNumber="3138"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a768a7f66e30d6b2d2d81ab1af56bf6c4">TopPathReduce</a>:</span></CodeLine>
<Link id="l03139" /><CodeLine lineNumber="3139"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a> = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>();</span></CodeLine>
<Link id="l03140" /><CodeLine lineNumber="3140"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03141" /><CodeLine lineNumber="3141"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a8ea4d71243c1b82d5e35065d580c1e49">BotHeightReduce</a>:</span></CodeLine>
<Link id="l03142" /><CodeLine lineNumber="3142"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a> = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>();</span></CodeLine>
<Link id="l03143" /><CodeLine lineNumber="3143"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03144" /><CodeLine lineNumber="3144"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3ad3c3c8a47c777d0f591ca18eaf7000d4">BotPathReduce</a>:</span></CodeLine>
<Link id="l03145" /><CodeLine lineNumber="3145"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a> = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>();</span></CodeLine>
<Link id="l03146" /><CodeLine lineNumber="3146"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03147" /><CodeLine lineNumber="3147"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03148" /><CodeLine lineNumber="3148"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Cand SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9df77ae80f822b788cb2464992a05bc1">getReasonStr</a>(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a>);</span></CodeLine>
<Link id="l03149" /><CodeLine lineNumber="3149"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.isValid())</span></CodeLine>
<Link id="l03150" /><CodeLine lineNumber="3150"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#ae9476ffbc2f3f195a2116b13f3186194">TRI</a>-&gt;getRegPressureSetName(<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.getPSet())</span></CodeLine>
<Link id="l03151" /><CodeLine lineNumber="3151"><span class="doxyHighlight">           &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;:&quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.getUnitInc() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03152" /><CodeLine lineNumber="3152"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l03153" /><CodeLine lineNumber="3153"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;      &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03154" /><CodeLine lineNumber="3154"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ResIdx)</span></CodeLine>
<Link id="l03155" /><CodeLine lineNumber="3155"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getProcResource(ResIdx)-&gt;Name &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03156" /><CodeLine lineNumber="3156"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l03157" /><CodeLine lineNumber="3157"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;         &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03158" /><CodeLine lineNumber="3158"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a>)</span></CodeLine>
<Link id="l03159" /><CodeLine lineNumber="3159"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; cycles &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03160" /><CodeLine lineNumber="3160"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l03161" /><CodeLine lineNumber="3161"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;          &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03162" /><CodeLine lineNumber="3162"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03163" /><CodeLine lineNumber="3163"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03164" /><CodeLine lineNumber="3164"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l03165" /><CodeLine lineNumber="3165"></CodeLine>
<Link id="l03166" /><CodeLine lineNumber="3166"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm">llvm</a> &#123;</span></CodeLine>
<Link id="l03167" /><CodeLine lineNumber="3167"><span class="doxyHighlightComment">/// Return true if this heuristic determines order.</span></CodeLine>
<Link id="l03168" /><CodeLine lineNumber="3168"><span class="doxyHighlightComment">/// TODO: Consider refactor return type of these functions as integer or enum,</span></CodeLine>
<Link id="l03169" /><CodeLine lineNumber="3169"><span class="doxyHighlightComment">/// as we may need to differentiate whether TryCand is better than Cand.</span></CodeLine>
<Link id="l03170" /><CodeLine lineNumber="3170" lineLink="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> TryVal, </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> CandVal,</span></CodeLine>
<Link id="l03171" /><CodeLine lineNumber="3171"><span class="doxyHighlight">             <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;TryCand,</span></CodeLine>
<Link id="l03172" /><CodeLine lineNumber="3172"><span class="doxyHighlight">             <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;Cand,</span></CodeLine>
<Link id="l03173" /><CodeLine lineNumber="3173"><span class="doxyHighlight">             <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3">GenericSchedulerBase::CandReason</a> Reason) &#123;</span></CodeLine>
<Link id="l03174" /><CodeLine lineNumber="3174"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TryVal &lt; CandVal) &#123;</span></CodeLine>
<Link id="l03175" /><CodeLine lineNumber="3175"><span class="doxyHighlight">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> = Reason;</span></CodeLine>
<Link id="l03176" /><CodeLine lineNumber="3176"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03177" /><CodeLine lineNumber="3177"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03178" /><CodeLine lineNumber="3178"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TryVal &gt; CandVal) &#123;</span></CodeLine>
<Link id="l03179" /><CodeLine lineNumber="3179"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> &gt; Reason)</span></CodeLine>
<Link id="l03180" /><CodeLine lineNumber="3180"><span class="doxyHighlight">      Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> = Reason;</span></CodeLine>
<Link id="l03181" /><CodeLine lineNumber="3181"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03182" /><CodeLine lineNumber="3182"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03183" /><CodeLine lineNumber="3183"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03184" /><CodeLine lineNumber="3184"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03185" /><CodeLine lineNumber="3185"></CodeLine>
<Link id="l03186" /><CodeLine lineNumber="3186" lineLink="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> TryVal, </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> CandVal,</span></CodeLine>
<Link id="l03187" /><CodeLine lineNumber="3187"><span class="doxyHighlight">                <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;TryCand,</span></CodeLine>
<Link id="l03188" /><CodeLine lineNumber="3188"><span class="doxyHighlight">                <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;Cand,</span></CodeLine>
<Link id="l03189" /><CodeLine lineNumber="3189"><span class="doxyHighlight">                <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3">GenericSchedulerBase::CandReason</a> Reason) &#123;</span></CodeLine>
<Link id="l03190" /><CodeLine lineNumber="3190"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TryVal &gt; CandVal) &#123;</span></CodeLine>
<Link id="l03191" /><CodeLine lineNumber="3191"><span class="doxyHighlight">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> = Reason;</span></CodeLine>
<Link id="l03192" /><CodeLine lineNumber="3192"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03193" /><CodeLine lineNumber="3193"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03194" /><CodeLine lineNumber="3194"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TryVal &lt; CandVal) &#123;</span></CodeLine>
<Link id="l03195" /><CodeLine lineNumber="3195"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> &gt; Reason)</span></CodeLine>
<Link id="l03196" /><CodeLine lineNumber="3196"><span class="doxyHighlight">      Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> = Reason;</span></CodeLine>
<Link id="l03197" /><CodeLine lineNumber="3197"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03198" /><CodeLine lineNumber="3198"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03199" /><CodeLine lineNumber="3199"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03200" /><CodeLine lineNumber="3200"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03201" /><CodeLine lineNumber="3201"></CodeLine>
<Link id="l03202" /><CodeLine lineNumber="3202" lineLink="/docs/api/namespaces/llvm/#a8c9a83bf7b5f6e85f215ff07a31e0fbe"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a8c9a83bf7b5f6e85f215ff07a31e0fbe">tryLatency</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;TryCand,</span></CodeLine>
<Link id="l03203" /><CodeLine lineNumber="3203"><span class="doxyHighlight">                <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;Cand,</span></CodeLine>
<Link id="l03204" /><CodeLine lineNumber="3204"><span class="doxyHighlight">                <a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &amp;Zone) &#123;</span></CodeLine>
<Link id="l03205" /><CodeLine lineNumber="3205"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Zone.<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>()) &#123;</span></CodeLine>
<Link id="l03206" /><CodeLine lineNumber="3206"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Prefer the candidate with the lesser depth, but only if one of them has</span></CodeLine>
<Link id="l03207" /><CodeLine lineNumber="3207"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// depth greater than the total latency scheduled so far, otherwise either</span></CodeLine>
<Link id="l03208" /><CodeLine lineNumber="3208"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// of them could be scheduled now with no stall.</span></CodeLine>
<Link id="l03209" /><CodeLine lineNumber="3209"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (std::max(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>(), Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>()) &gt;</span></CodeLine>
<Link id="l03210" /><CodeLine lineNumber="3210"><span class="doxyHighlight">        Zone.<a href="/docs/api/classes/llvm/schedboundary/#a29ef846d6fac7aa275808c8866035968">getScheduledLatency</a>()) &#123;</span></CodeLine>
<Link id="l03211" /><CodeLine lineNumber="3211"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>(), Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>(),</span></CodeLine>
<Link id="l03212" /><CodeLine lineNumber="3212"><span class="doxyHighlight">                  TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3afb16e35278ff80f34d2ad9889213b406">GenericSchedulerBase::TopDepthReduce</a>))</span></CodeLine>
<Link id="l03213" /><CodeLine lineNumber="3213"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03214" /><CodeLine lineNumber="3214"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03215" /><CodeLine lineNumber="3215"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>(), Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>(),</span></CodeLine>
<Link id="l03216" /><CodeLine lineNumber="3216"><span class="doxyHighlight">                   TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a768a7f66e30d6b2d2d81ab1af56bf6c4">GenericSchedulerBase::TopPathReduce</a>))</span></CodeLine>
<Link id="l03217" /><CodeLine lineNumber="3217"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03218" /><CodeLine lineNumber="3218"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03219" /><CodeLine lineNumber="3219"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Prefer the candidate with the lesser height, but only if one of them has</span></CodeLine>
<Link id="l03220" /><CodeLine lineNumber="3220"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// height greater than the total latency scheduled so far, otherwise either</span></CodeLine>
<Link id="l03221" /><CodeLine lineNumber="3221"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// of them could be scheduled now with no stall.</span></CodeLine>
<Link id="l03222" /><CodeLine lineNumber="3222"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (std::max(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>(), Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>()) &gt;</span></CodeLine>
<Link id="l03223" /><CodeLine lineNumber="3223"><span class="doxyHighlight">        Zone.<a href="/docs/api/classes/llvm/schedboundary/#a29ef846d6fac7aa275808c8866035968">getScheduledLatency</a>()) &#123;</span></CodeLine>
<Link id="l03224" /><CodeLine lineNumber="3224"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>(), Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>(),</span></CodeLine>
<Link id="l03225" /><CodeLine lineNumber="3225"><span class="doxyHighlight">                  TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a8ea4d71243c1b82d5e35065d580c1e49">GenericSchedulerBase::BotHeightReduce</a>))</span></CodeLine>
<Link id="l03226" /><CodeLine lineNumber="3226"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03227" /><CodeLine lineNumber="3227"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03228" /><CodeLine lineNumber="3228"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>(), Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>(),</span></CodeLine>
<Link id="l03229" /><CodeLine lineNumber="3229"><span class="doxyHighlight">                   TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3ad3c3c8a47c777d0f591ca18eaf7000d4">GenericSchedulerBase::BotPathReduce</a>))</span></CodeLine>
<Link id="l03230" /><CodeLine lineNumber="3230"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03231" /><CodeLine lineNumber="3231"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03232" /><CodeLine lineNumber="3232"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03233" /><CodeLine lineNumber="3233"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03234" /><CodeLine lineNumber="3234"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end namespace llvm</span></CodeLine>
<Link id="l03235" /><CodeLine lineNumber="3235"></CodeLine>
<Link id="l03236" /><CodeLine lineNumber="3236" lineLink="#a14c35b53586841aad69751a52b7d358a"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3">GenericSchedulerBase::CandReason</a> Reason, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsTop) &#123;</span></CodeLine>
<Link id="l03237" /><CodeLine lineNumber="3237"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Pick &quot;</span><span class="doxyHighlight"> &lt;&lt; (IsTop ? </span><span class="doxyHighlightStringLiteral">&quot;Top &quot;</span><span class="doxyHighlight"> : </span><span class="doxyHighlightStringLiteral">&quot;Bot &quot;</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l03238" /><CodeLine lineNumber="3238"><span class="doxyHighlight">                    &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9df77ae80f822b788cb2464992a05bc1">GenericSchedulerBase::getReasonStr</a>(Reason) &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03239" /><CodeLine lineNumber="3239"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03240" /><CodeLine lineNumber="3240"></CodeLine>
<Link id="l03241" /><CodeLine lineNumber="3241" lineLink="#a3352d36ab68528af960439073f22b304"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;Cand) &#123;</span></CodeLine>
<Link id="l03242" /><CodeLine lineNumber="3242"><span class="doxyHighlight">  <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a>, Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>);</span></CodeLine>
<Link id="l03243" /><CodeLine lineNumber="3243"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03244" /><CodeLine lineNumber="3244"></CodeLine>
<Link id="l03245" /><CodeLine lineNumber="3245" lineLink="/docs/api/classes/llvm/genericscheduler/#aa8cddd2ea015f8177a8395035f87e332"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericscheduler/#aa8cddd2ea015f8177a8395035f87e332">GenericScheduler::initialize</a>(<a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;dag) &#123;</span></CodeLine>
<Link id="l03246" /><CodeLine lineNumber="3246"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(dag-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a78c0f3feb8a81ca338f843494cff564e">hasVRegLiveness</a>() &amp;&amp;</span></CodeLine>
<Link id="l03247" /><CodeLine lineNumber="3247"><span class="doxyHighlight">         </span><span class="doxyHighlightStringLiteral">&quot;(PreRA)GenericScheduler needs vreg liveness&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03248" /><CodeLine lineNumber="3248"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a> = </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>&#42;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(dag);</span></CodeLine>
<Link id="l03249" /><CodeLine lineNumber="3249"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a> = <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getSchedModel();</span></CodeLine>
<Link id="l03250" /><CodeLine lineNumber="3250"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#ae9476ffbc2f3f195a2116b13f3186194">TRI</a> = <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;TRI;</span></CodeLine>
<Link id="l03251" /><CodeLine lineNumber="3251"></CodeLine>
<Link id="l03252" /><CodeLine lineNumber="3252"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.ComputeDFSResult)</span></CodeLine>
<Link id="l03253" /><CodeLine lineNumber="3253"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;computeDFSResult();</span></CodeLine>
<Link id="l03254" /><CodeLine lineNumber="3254"></CodeLine>
<Link id="l03255" /><CodeLine lineNumber="3255"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.init(<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>);</span></CodeLine>
<Link id="l03256" /><CodeLine lineNumber="3256"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.init(<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>, &amp;<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>);</span></CodeLine>
<Link id="l03257" /><CodeLine lineNumber="3257"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.init(<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>, &amp;<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>);</span></CodeLine>
<Link id="l03258" /><CodeLine lineNumber="3258"></CodeLine>
<Link id="l03259" /><CodeLine lineNumber="3259"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Initialize resource counts.</span></CodeLine>
<Link id="l03260" /><CodeLine lineNumber="3260"></CodeLine>
<Link id="l03261" /><CodeLine lineNumber="3261"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Initialize the HazardRecognizers. If itineraries don&#39;t exist, are empty, or</span></CodeLine>
<Link id="l03262" /><CodeLine lineNumber="3262"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// are disabled, then these HazardRecs will be disabled.</span></CodeLine>
<Link id="l03263" /><CodeLine lineNumber="3263"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/instritinerarydata">InstrItineraryData</a> &#42;Itin = <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getInstrItineraries();</span></CodeLine>
<Link id="l03264" /><CodeLine lineNumber="3264"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.HazardRec) &#123;</span></CodeLine>
<Link id="l03265" /><CodeLine lineNumber="3265"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.HazardRec = <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;TII-&gt;CreateTargetMIHazardRecognizer(Itin, <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>);</span></CodeLine>
<Link id="l03266" /><CodeLine lineNumber="3266"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03267" /><CodeLine lineNumber="3267"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.HazardRec) &#123;</span></CodeLine>
<Link id="l03268" /><CodeLine lineNumber="3268"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.HazardRec = <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;TII-&gt;CreateTargetMIHazardRecognizer(Itin, <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>);</span></CodeLine>
<Link id="l03269" /><CodeLine lineNumber="3269"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03270" /><CodeLine lineNumber="3270"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.SU = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03271" /><CodeLine lineNumber="3271"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.SU = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03272" /><CodeLine lineNumber="3272"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03273" /><CodeLine lineNumber="3273"></CodeLine>
<Link id="l03274" /><CodeLine lineNumber="3274"><span class="doxyHighlightComment">/// Initialize the per-region scheduling policy.</span></CodeLine>
<Link id="l03275" /><CodeLine lineNumber="3275" lineLink="/docs/api/classes/llvm/genericscheduler/#ac8e2225e71c3b7d40575a2ab9bfffc78"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericscheduler/#ac8e2225e71c3b7d40575a2ab9bfffc78">GenericScheduler::initPolicy</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> Begin,</span></CodeLine>
<Link id="l03276" /><CodeLine lineNumber="3276"><span class="doxyHighlight">                                  <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> End,</span></CodeLine>
<Link id="l03277" /><CodeLine lineNumber="3277"><span class="doxyHighlight">                                  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumRegionInstrs) &#123;</span></CodeLine>
<Link id="l03278" /><CodeLine lineNumber="3278"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = &#42;Begin-&gt;getMF();</span></CodeLine>
<Link id="l03279" /><CodeLine lineNumber="3279"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &#42;TLI = MF.<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>().<a href="/docs/api/classes/llvm/targetsubtargetinfo/#ade3f0d8b35d67c43df9425bb730a9a7c">getTargetLowering</a>();</span></CodeLine>
<Link id="l03280" /><CodeLine lineNumber="3280"></CodeLine>
<Link id="l03281" /><CodeLine lineNumber="3281"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Avoid setting up the register pressure tracker for small regions to save</span></CodeLine>
<Link id="l03282" /><CodeLine lineNumber="3282"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// compile time. As a rough heuristic, only track pressure when the number of</span></CodeLine>
<Link id="l03283" /><CodeLine lineNumber="3283"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// schedulable instructions exceeds half the allocatable integer register file</span></CodeLine>
<Link id="l03284" /><CodeLine lineNumber="3284"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// that is the largest legal integer regiser type.</span></CodeLine>
<Link id="l03285" /><CodeLine lineNumber="3285"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.ShouldTrackPressure = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03286" /><CodeLine lineNumber="3286"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> VT = MVT::i64; VT &gt; (unsigned)MVT::i1; --VT) &#123;</span></CodeLine>
<Link id="l03287" /><CodeLine lineNumber="3287"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/mvt/#a184043a6ab3a9922618b34117003e64d">MVT::SimpleValueType</a> LegalIntVT = (<a href="/docs/api/classes/llvm/mvt/#a184043a6ab3a9922618b34117003e64d">MVT::SimpleValueType</a>)VT;</span></CodeLine>
<Link id="l03288" /><CodeLine lineNumber="3288"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TLI-&gt;<a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(LegalIntVT)) &#123;</span></CodeLine>
<Link id="l03289" /><CodeLine lineNumber="3289"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NIntRegs = <a href="/docs/api/classes/llvm/genericschedulerbase/#ad0f9f52bf2f7c54d9546cedd1c47ef45">Context</a>-&gt;RegClassInfo-&gt;getNumAllocatableRegs(</span></CodeLine>
<Link id="l03290" /><CodeLine lineNumber="3290"><span class="doxyHighlight">        TLI-&gt;<a href="/docs/api/classes/llvm/targetloweringbase/#a1a78b9f867cb5be3a052d6ad972484ca">getRegClassFor</a>(LegalIntVT));</span></CodeLine>
<Link id="l03291" /><CodeLine lineNumber="3291"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.ShouldTrackPressure = NumRegionInstrs &gt; (NIntRegs / 2);</span></CodeLine>
<Link id="l03292" /><CodeLine lineNumber="3292"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03293" /><CodeLine lineNumber="3293"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03294" /><CodeLine lineNumber="3294"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03295" /><CodeLine lineNumber="3295"></CodeLine>
<Link id="l03296" /><CodeLine lineNumber="3296"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For generic targets, we default to bottom-up, because it&#39;s simpler and more</span></CodeLine>
<Link id="l03297" /><CodeLine lineNumber="3297"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// compile-time optimizations have been implemented in that direction.</span></CodeLine>
<Link id="l03298" /><CodeLine lineNumber="3298"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03299" /><CodeLine lineNumber="3299"></CodeLine>
<Link id="l03300" /><CodeLine lineNumber="3300"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Allow the subtarget to override default policy.</span></CodeLine>
<Link id="l03301" /><CodeLine lineNumber="3301"><span class="doxyHighlight">  MF.<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>().<a href="/docs/api/classes/llvm/targetsubtargetinfo/#a9cd7c54e0bb13cc01c4e2a4133a40ee4">overrideSchedPolicy</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>, NumRegionInstrs);</span></CodeLine>
<Link id="l03302" /><CodeLine lineNumber="3302"></CodeLine>
<Link id="l03303" /><CodeLine lineNumber="3303"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// After subtarget overrides, apply command line options.</span></CodeLine>
<Link id="l03304" /><CodeLine lineNumber="3304"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#a589614403a45de30e887d6401dc1be2a">EnableRegPressure</a>) &#123;</span></CodeLine>
<Link id="l03305" /><CodeLine lineNumber="3305"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.ShouldTrackPressure = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03306" /><CodeLine lineNumber="3306"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.ShouldTrackLaneMasks = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03307" /><CodeLine lineNumber="3307"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03308" /><CodeLine lineNumber="3308"></CodeLine>
<Link id="l03309" /><CodeLine lineNumber="3309"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#aa9ff814049edfef549accbca1a8e9eff">PreRADirection</a> == <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3ae89742249a15ad5696e3dcec82f0e76a">MISched::TopDown</a>) &#123;</span></CodeLine>
<Link id="l03310" /><CodeLine lineNumber="3310"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03311" /><CodeLine lineNumber="3311"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03312" /><CodeLine lineNumber="3312"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#aa9ff814049edfef549accbca1a8e9eff">PreRADirection</a> == <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3abd98ce24773c9ca1e3f7ce3c541e43ea">MISched::BottomUp</a>) &#123;</span></CodeLine>
<Link id="l03313" /><CodeLine lineNumber="3313"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03314" /><CodeLine lineNumber="3314"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03315" /><CodeLine lineNumber="3315"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#aa9ff814049edfef549accbca1a8e9eff">PreRADirection</a> == <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3aab012f17d1537ed7a7c6d45b1d2fc0e9">MISched::Bidirectional</a>) &#123;</span></CodeLine>
<Link id="l03316" /><CodeLine lineNumber="3316"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03317" /><CodeLine lineNumber="3317"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03318" /><CodeLine lineNumber="3318"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03319" /><CodeLine lineNumber="3319"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03320" /><CodeLine lineNumber="3320"></CodeLine>
<Link id="l03321" /><CodeLine lineNumber="3321" lineLink="/docs/api/classes/llvm/genericscheduler/#a8329c2fe0a6267d1e0f94dc4aecc5892"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericscheduler/#a8329c2fe0a6267d1e0f94dc4aecc5892">GenericScheduler::dumpPolicy</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03322" /><CodeLine lineNumber="3322"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Cannot completely remove virtual function even in release mode.</span></CodeLine>
<Link id="l03323" /><CodeLine lineNumber="3323"><span class="doxyHighlightPreprocessor">#if !defined(NDEBUG) || defined(LLVM&#95;ENABLE&#95;DUMP)</span></CodeLine>
<Link id="l03324" /><CodeLine lineNumber="3324"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;GenericScheduler RegionPolicy: &quot;</span></CodeLine>
<Link id="l03325" /><CodeLine lineNumber="3325"><span class="doxyHighlight">         &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; ShouldTrackPressure=&quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.ShouldTrackPressure</span></CodeLine>
<Link id="l03326" /><CodeLine lineNumber="3326"><span class="doxyHighlight">         &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; OnlyTopDown=&quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown</span></CodeLine>
<Link id="l03327" /><CodeLine lineNumber="3327"><span class="doxyHighlight">         &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; OnlyBottomUp=&quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp</span></CodeLine>
<Link id="l03328" /><CodeLine lineNumber="3328"><span class="doxyHighlight">         &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03329" /><CodeLine lineNumber="3329"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l03330" /><CodeLine lineNumber="3330"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03331" /><CodeLine lineNumber="3331"></CodeLine>
<Link id="l03332" /><CodeLine lineNumber="3332"><span class="doxyHighlightComment">/// Set IsAcyclicLatencyLimited if the acyclic path is longer than the cyclic</span></CodeLine>
<Link id="l03333" /><CodeLine lineNumber="3333"><span class="doxyHighlightComment">/// critical path by more cycles than it takes to drain the instruction buffer.</span></CodeLine>
<Link id="l03334" /><CodeLine lineNumber="3334"><span class="doxyHighlightComment">/// We estimate an upper bounds on in-flight instructions as:</span></CodeLine>
<Link id="l03335" /><CodeLine lineNumber="3335"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l03336" /><CodeLine lineNumber="3336"><span class="doxyHighlightComment">/// CyclesPerIteration = max( CyclicPath, Loop-Resource-Height )</span></CodeLine>
<Link id="l03337" /><CodeLine lineNumber="3337"><span class="doxyHighlightComment">/// InFlightIterations = AcyclicPath / CyclesPerIteration</span></CodeLine>
<Link id="l03338" /><CodeLine lineNumber="3338"><span class="doxyHighlightComment">/// InFlightResources = InFlightIterations &#42; LoopResources</span></CodeLine>
<Link id="l03339" /><CodeLine lineNumber="3339"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l03340" /><CodeLine lineNumber="3340"><span class="doxyHighlightComment">/// TODO: Check execution resources in addition to IssueCount.</span></CodeLine>
<Link id="l03341" /><CodeLine lineNumber="3341" lineLink="/docs/api/classes/llvm/genericscheduler/#a0aa33f27fbf7be1e7e53512ceb6de885"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericscheduler/#a0aa33f27fbf7be1e7e53512ceb6de885">GenericScheduler::checkAcyclicLatency</a>() &#123;</span></CodeLine>
<Link id="l03342" /><CodeLine lineNumber="3342"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CyclicCritPath == 0 || <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CyclicCritPath &gt;= <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath)</span></CodeLine>
<Link id="l03343" /><CodeLine lineNumber="3343"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03344" /><CodeLine lineNumber="3344"></CodeLine>
<Link id="l03345" /><CodeLine lineNumber="3345"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Scaled number of cycles per loop iteration.</span></CodeLine>
<Link id="l03346" /><CodeLine lineNumber="3346"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> IterCount =</span></CodeLine>
<Link id="l03347" /><CodeLine lineNumber="3347"><span class="doxyHighlight">    std::max(<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CyclicCritPath &#42; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getLatencyFactor(),</span></CodeLine>
<Link id="l03348" /><CodeLine lineNumber="3348"><span class="doxyHighlight">             <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.RemIssueCount);</span></CodeLine>
<Link id="l03349" /><CodeLine lineNumber="3349"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Scaled acyclic critical path.</span></CodeLine>
<Link id="l03350" /><CodeLine lineNumber="3350"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AcyclicCount = <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath &#42; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getLatencyFactor();</span></CodeLine>
<Link id="l03351" /><CodeLine lineNumber="3351"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// InFlightCount = (AcyclicPath / IterCycles) &#42; InstrPerLoop</span></CodeLine>
<Link id="l03352" /><CodeLine lineNumber="3352"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> InFlightCount =</span></CodeLine>
<Link id="l03353" /><CodeLine lineNumber="3353"><span class="doxyHighlight">    (AcyclicCount &#42; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.RemIssueCount + IterCount-1) / IterCount;</span></CodeLine>
<Link id="l03354" /><CodeLine lineNumber="3354"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> BufferLimit =</span></CodeLine>
<Link id="l03355" /><CodeLine lineNumber="3355"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getMicroOpBufferSize() &#42; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getMicroOpFactor();</span></CodeLine>
<Link id="l03356" /><CodeLine lineNumber="3356"></CodeLine>
<Link id="l03357" /><CodeLine lineNumber="3357"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.IsAcyclicLatencyLimited = InFlightCount &gt; BufferLimit;</span></CodeLine>
<Link id="l03358" /><CodeLine lineNumber="3358"></CodeLine>
<Link id="l03359" /><CodeLine lineNumber="3359"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</span></CodeLine>
<Link id="l03360" /><CodeLine lineNumber="3360"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;IssueCycles=&quot;</span></CodeLine>
<Link id="l03361" /><CodeLine lineNumber="3361"><span class="doxyHighlight">             &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.RemIssueCount / <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getLatencyFactor() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c &quot;</span></CodeLine>
<Link id="l03362" /><CodeLine lineNumber="3362"><span class="doxyHighlight">             &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;IterCycles=&quot;</span><span class="doxyHighlight"> &lt;&lt; IterCount / <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getLatencyFactor()</span></CodeLine>
<Link id="l03363" /><CodeLine lineNumber="3363"><span class="doxyHighlight">             &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;c NumIters=&quot;</span><span class="doxyHighlight"> &lt;&lt; (AcyclicCount + IterCount - 1) / IterCount</span></CodeLine>
<Link id="l03364" /><CodeLine lineNumber="3364"><span class="doxyHighlight">             &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; InFlight=&quot;</span><span class="doxyHighlight"> &lt;&lt; InFlightCount / <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getMicroOpFactor()</span></CodeLine>
<Link id="l03365" /><CodeLine lineNumber="3365"><span class="doxyHighlight">             &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;m BufferLim=&quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getMicroOpBufferSize() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;m\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03366" /><CodeLine lineNumber="3366"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#acdfbcf188e2d4a80837e89de2ccdffab">if</a> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.IsAcyclicLatencyLimited) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  ACYCLIC LATENCY LIMIT\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03367" /><CodeLine lineNumber="3367"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03368" /><CodeLine lineNumber="3368"></CodeLine>
<Link id="l03369" /><CodeLine lineNumber="3369" lineLink="/docs/api/classes/llvm/genericscheduler/#ac047246e76df6b86564a6b62c2403aef"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericscheduler/#ac047246e76df6b86564a6b62c2403aef">GenericScheduler::registerRoots</a>() &#123;</span></CodeLine>
<Link id="l03370" /><CodeLine lineNumber="3370"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath = <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;ExitSU.getDepth();</span></CodeLine>
<Link id="l03371" /><CodeLine lineNumber="3371"></CodeLine>
<Link id="l03372" /><CodeLine lineNumber="3372"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Some roots may not feed into ExitSU. Check all of them in case.</span></CodeLine>
<Link id="l03373" /><CodeLine lineNumber="3373"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU : <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.Available) &#123;</span></CodeLine>
<Link id="l03374" /><CodeLine lineNumber="3374"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>() &gt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath)</span></CodeLine>
<Link id="l03375" /><CodeLine lineNumber="3375"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>();</span></CodeLine>
<Link id="l03376" /><CodeLine lineNumber="3376"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03377" /><CodeLine lineNumber="3377"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Critical Path(GS-RR ): &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03378" /><CodeLine lineNumber="3378"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a82ab0315644106de03b36f143328179f">DumpCriticalPathLength</a>) &#123;</span></CodeLine>
<Link id="l03379" /><CodeLine lineNumber="3379"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Critical Path(GS-RR ): &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; \\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03380" /><CodeLine lineNumber="3380"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03381" /><CodeLine lineNumber="3381"></CodeLine>
<Link id="l03382" /><CodeLine lineNumber="3382"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a2f23c1bd760a7a5a5acc6e4eb40bd9d9">EnableCyclicPath</a> &amp;&amp; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getMicroOpBufferSize() &gt; 0) &#123;</span></CodeLine>
<Link id="l03383" /><CodeLine lineNumber="3383"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CyclicCritPath = <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;computeCyclicCriticalPath();</span></CodeLine>
<Link id="l03384" /><CodeLine lineNumber="3384"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericscheduler/#a0aa33f27fbf7be1e7e53512ceb6de885">checkAcyclicLatency</a>();</span></CodeLine>
<Link id="l03385" /><CodeLine lineNumber="3385"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03386" /><CodeLine lineNumber="3386"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03387" /><CodeLine lineNumber="3387"></CodeLine>
<Link id="l03388" /><CodeLine lineNumber="3388"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm">llvm</a> &#123;</span></CodeLine>
<Link id="l03389" /><CodeLine lineNumber="3389" lineLink="/docs/api/namespaces/llvm/#a62cf34ac18c5612524978166788b5c80"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a62cf34ac18c5612524978166788b5c80">tryPressure</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/pressurechange">PressureChange</a> &amp;TryP,</span></CodeLine>
<Link id="l03390" /><CodeLine lineNumber="3390"><span class="doxyHighlight">                 </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/pressurechange">PressureChange</a> &amp;CandP,</span></CodeLine>
<Link id="l03391" /><CodeLine lineNumber="3391"><span class="doxyHighlight">                 <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;TryCand,</span></CodeLine>
<Link id="l03392" /><CodeLine lineNumber="3392"><span class="doxyHighlight">                 <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;Cand,</span></CodeLine>
<Link id="l03393" /><CodeLine lineNumber="3393"><span class="doxyHighlight">                 <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3">GenericSchedulerBase::CandReason</a> Reason,</span></CodeLine>
<Link id="l03394" /><CodeLine lineNumber="3394"><span class="doxyHighlight">                 </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>,</span></CodeLine>
<Link id="l03395" /><CodeLine lineNumber="3395"><span class="doxyHighlight">                 </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF) &#123;</span></CodeLine>
<Link id="l03396" /><CodeLine lineNumber="3396"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If one candidate decreases and the other increases, go with it.</span></CodeLine>
<Link id="l03397" /><CodeLine lineNumber="3397"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Invalid candidates have UnitInc==0.</span></CodeLine>
<Link id="l03398" /><CodeLine lineNumber="3398"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryP.<a href="/docs/api/classes/llvm/pressurechange/#a1eef24878593ee0080b20b96ce3eb4c4">getUnitInc</a>() &lt; 0, CandP.<a href="/docs/api/classes/llvm/pressurechange/#a1eef24878593ee0080b20b96ce3eb4c4">getUnitInc</a>() &lt; 0, TryCand, Cand,</span></CodeLine>
<Link id="l03399" /><CodeLine lineNumber="3399"><span class="doxyHighlight">                 Reason)) &#123;</span></CodeLine>
<Link id="l03400" /><CodeLine lineNumber="3400"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03401" /><CodeLine lineNumber="3401"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03402" /><CodeLine lineNumber="3402"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Do not compare the magnitude of pressure changes between top and bottom</span></CodeLine>
<Link id="l03403" /><CodeLine lineNumber="3403"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// boundary.</span></CodeLine>
<Link id="l03404" /><CodeLine lineNumber="3404"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> != TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>)</span></CodeLine>
<Link id="l03405" /><CodeLine lineNumber="3405"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03406" /><CodeLine lineNumber="3406"></CodeLine>
<Link id="l03407" /><CodeLine lineNumber="3407"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If both candidates affect the same set in the same boundary, go with the</span></CodeLine>
<Link id="l03408" /><CodeLine lineNumber="3408"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// smallest increase.</span></CodeLine>
<Link id="l03409" /><CodeLine lineNumber="3409"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TryPSet = TryP.<a href="/docs/api/classes/llvm/pressurechange/#a2914e3c0dd7cb72d6d1eb4343a0bd6c9">getPSetOrMax</a>();</span></CodeLine>
<Link id="l03410" /><CodeLine lineNumber="3410"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> CandPSet = CandP.<a href="/docs/api/classes/llvm/pressurechange/#a2914e3c0dd7cb72d6d1eb4343a0bd6c9">getPSetOrMax</a>();</span></CodeLine>
<Link id="l03411" /><CodeLine lineNumber="3411"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TryPSet == CandPSet) &#123;</span></CodeLine>
<Link id="l03412" /><CodeLine lineNumber="3412"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(TryP.<a href="/docs/api/classes/llvm/pressurechange/#a1eef24878593ee0080b20b96ce3eb4c4">getUnitInc</a>(), CandP.<a href="/docs/api/classes/llvm/pressurechange/#a1eef24878593ee0080b20b96ce3eb4c4">getUnitInc</a>(), TryCand, Cand,</span></CodeLine>
<Link id="l03413" /><CodeLine lineNumber="3413"><span class="doxyHighlight">                   Reason);</span></CodeLine>
<Link id="l03414" /><CodeLine lineNumber="3414"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03415" /><CodeLine lineNumber="3415"></CodeLine>
<Link id="l03416" /><CodeLine lineNumber="3416"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> TryRank = TryP.<a href="/docs/api/classes/llvm/pressurechange/#a488d33ac015981b0f8e2086fcbd49db2">isValid</a>() ? <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;getRegPressureSetScore(MF, TryPSet) :</span></CodeLine>
<Link id="l03417" /><CodeLine lineNumber="3417"><span class="doxyHighlight">                                 std::numeric&#95;limits&lt;int&gt;::max();</span></CodeLine>
<Link id="l03418" /><CodeLine lineNumber="3418"></CodeLine>
<Link id="l03419" /><CodeLine lineNumber="3419"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> CandRank = CandP.<a href="/docs/api/classes/llvm/pressurechange/#a488d33ac015981b0f8e2086fcbd49db2">isValid</a>() ? <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;getRegPressureSetScore(MF, CandPSet) :</span></CodeLine>
<Link id="l03420" /><CodeLine lineNumber="3420"><span class="doxyHighlight">                                   std::numeric&#95;limits&lt;int&gt;::max();</span></CodeLine>
<Link id="l03421" /><CodeLine lineNumber="3421"></CodeLine>
<Link id="l03422" /><CodeLine lineNumber="3422"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If the candidates are decreasing pressure, reverse priority.</span></CodeLine>
<Link id="l03423" /><CodeLine lineNumber="3423"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TryP.<a href="/docs/api/classes/llvm/pressurechange/#a1eef24878593ee0080b20b96ce3eb4c4">getUnitInc</a>() &lt; 0)</span></CodeLine>
<Link id="l03424" /><CodeLine lineNumber="3424"><span class="doxyHighlight">    <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(TryRank, CandRank);</span></CodeLine>
<Link id="l03425" /><CodeLine lineNumber="3425"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryRank, CandRank, TryCand, Cand, Reason);</span></CodeLine>
<Link id="l03426" /><CodeLine lineNumber="3426"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03427" /><CodeLine lineNumber="3427"></CodeLine>
<Link id="l03428" /><CodeLine lineNumber="3428" lineLink="/docs/api/namespaces/llvm/#a13933f8ac2f5e1a34cf53b2c1e1bdc5b"><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a13933f8ac2f5e1a34cf53b2c1e1bdc5b">getWeakLeft</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> isTop) &#123;</span></CodeLine>
<Link id="l03429" /><CodeLine lineNumber="3429"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> (isTop) ? SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ab9e02660290b9557b547b57870133467">WeakPredsLeft</a> : SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae75d620ee809eaf50970a833f4a3ace9">WeakSuccsLeft</a>;</span></CodeLine>
<Link id="l03430" /><CodeLine lineNumber="3430"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03431" /><CodeLine lineNumber="3431"></CodeLine>
<Link id="l03432" /><CodeLine lineNumber="3432"><span class="doxyHighlightComment">/// Minimize physical register live ranges. Regalloc wants them adjacent to</span></CodeLine>
<Link id="l03433" /><CodeLine lineNumber="3433"><span class="doxyHighlightComment">/// their physreg def/use.</span></CodeLine>
<Link id="l03434" /><CodeLine lineNumber="3434"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l03435" /><CodeLine lineNumber="3435"><span class="doxyHighlightComment">/// FIXME: This is an unnecessary check on the critical path. Most are root/leaf</span></CodeLine>
<Link id="l03436" /><CodeLine lineNumber="3436"><span class="doxyHighlightComment">/// copies which can be prescheduled. The rest (e.g. x86 MUL) could be bundled</span></CodeLine>
<Link id="l03437" /><CodeLine lineNumber="3437"><span class="doxyHighlightComment">/// with the operation that produces or consumes the physreg. We&#39;ll do this when</span></CodeLine>
<Link id="l03438" /><CodeLine lineNumber="3438"><span class="doxyHighlightComment">/// regalloc has support for parallel copies.</span></CodeLine>
<Link id="l03439" /><CodeLine lineNumber="3439" lineLink="/docs/api/namespaces/llvm/#afb4b9423201406d79ba16481c90cb6cb"><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#afb4b9423201406d79ba16481c90cb6cb">biasPhysReg</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> isTop) &#123;</span></CodeLine>
<Link id="l03440" /><CodeLine lineNumber="3440"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</span></CodeLine>
<Link id="l03441" /><CodeLine lineNumber="3441"></CodeLine>
<Link id="l03442" /><CodeLine lineNumber="3442"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isCopy()) &#123;</span></CodeLine>
<Link id="l03443" /><CodeLine lineNumber="3443"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ScheduledOper = isTop ? 1 : 0;</span></CodeLine>
<Link id="l03444" /><CodeLine lineNumber="3444"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> UnscheduledOper = isTop ? 0 : 1;</span></CodeLine>
<Link id="l03445" /><CodeLine lineNumber="3445"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If we have already scheduled the physreg produce/consumer, immediately</span></CodeLine>
<Link id="l03446" /><CodeLine lineNumber="3446"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// schedule the copy.</span></CodeLine>
<Link id="l03447" /><CodeLine lineNumber="3447"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(ScheduledOper).getReg().isPhysical())</span></CodeLine>
<Link id="l03448" /><CodeLine lineNumber="3448"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> 1;</span></CodeLine>
<Link id="l03449" /><CodeLine lineNumber="3449"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If the physreg is at the boundary, defer it. Otherwise schedule it</span></CodeLine>
<Link id="l03450" /><CodeLine lineNumber="3450"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// immediately to free the dependent. We can hoist the copy later.</span></CodeLine>
<Link id="l03451" /><CodeLine lineNumber="3451"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> AtBoundary = isTop ? !SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a40c2dfbd170941dd4d20ee9b60c9d49d">NumSuccsLeft</a> : !SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a94f78042fbba3ea4cd1004353daa46aa">NumPredsLeft</a>;</span></CodeLine>
<Link id="l03452" /><CodeLine lineNumber="3452"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(UnscheduledOper).getReg().isPhysical())</span></CodeLine>
<Link id="l03453" /><CodeLine lineNumber="3453"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AtBoundary ? -1 : 1;</span></CodeLine>
<Link id="l03454" /><CodeLine lineNumber="3454"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03455" /><CodeLine lineNumber="3455"></CodeLine>
<Link id="l03456" /><CodeLine lineNumber="3456"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isMoveImmediate()) &#123;</span></CodeLine>
<Link id="l03457" /><CodeLine lineNumber="3457"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If we have a move immediate and all successors have been assigned, bias</span></CodeLine>
<Link id="l03458" /><CodeLine lineNumber="3458"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// towards scheduling this later. Make sure all register defs are to</span></CodeLine>
<Link id="l03459" /><CodeLine lineNumber="3459"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// physical registers.</span></CodeLine>
<Link id="l03460" /><CodeLine lineNumber="3460"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> DoBias = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03461" /><CodeLine lineNumber="3461"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> : <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;defs()) &#123;</span></CodeLine>
<Link id="l03462" /><CodeLine lineNumber="3462"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.isReg() &amp;&amp; !<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getReg().isPhysical()) &#123;</span></CodeLine>
<Link id="l03463" /><CodeLine lineNumber="3463"><span class="doxyHighlight">        DoBias = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03464" /><CodeLine lineNumber="3464"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03465" /><CodeLine lineNumber="3465"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l03466" /><CodeLine lineNumber="3466"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03467" /><CodeLine lineNumber="3467"></CodeLine>
<Link id="l03468" /><CodeLine lineNumber="3468"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DoBias)</span></CodeLine>
<Link id="l03469" /><CodeLine lineNumber="3469"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> isTop ? -1 : 1;</span></CodeLine>
<Link id="l03470" /><CodeLine lineNumber="3470"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03471" /><CodeLine lineNumber="3471"></CodeLine>
<Link id="l03472" /><CodeLine lineNumber="3472"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> 0;</span></CodeLine>
<Link id="l03473" /><CodeLine lineNumber="3473"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03474" /><CodeLine lineNumber="3474"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end namespace llvm</span></CodeLine>
<Link id="l03475" /><CodeLine lineNumber="3475"></CodeLine>
<Link id="l03476" /><CodeLine lineNumber="3476" lineLink="/docs/api/classes/llvm/genericscheduler/#ab0d12eb20352f092840f7f8df60abe26"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericscheduler/#ab0d12eb20352f092840f7f8df60abe26">GenericScheduler::initCandidate</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> &amp;Cand, <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU,</span></CodeLine>
<Link id="l03477" /><CodeLine lineNumber="3477"><span class="doxyHighlight">                                     </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> AtTop,</span></CodeLine>
<Link id="l03478" /><CodeLine lineNumber="3478"><span class="doxyHighlight">                                     </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regpressuretracker">RegPressureTracker</a> &amp;RPTracker,</span></CodeLine>
<Link id="l03479" /><CodeLine lineNumber="3479"><span class="doxyHighlight">                                     <a href="/docs/api/classes/llvm/regpressuretracker">RegPressureTracker</a> &amp;TempTracker) &#123;</span></CodeLine>
<Link id="l03480" /><CodeLine lineNumber="3480"><span class="doxyHighlight">  Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> = SU;</span></CodeLine>
<Link id="l03481" /><CodeLine lineNumber="3481"><span class="doxyHighlight">  Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> = AtTop;</span></CodeLine>
<Link id="l03482" /><CodeLine lineNumber="3482"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;isTrackingPressure()) &#123;</span></CodeLine>
<Link id="l03483" /><CodeLine lineNumber="3483"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AtTop) &#123;</span></CodeLine>
<Link id="l03484" /><CodeLine lineNumber="3484"><span class="doxyHighlight">      TempTracker.<a href="/docs/api/classes/llvm/regpressuretracker/#a972fa38378a3d49a9bb48ca584621438">getMaxDownwardPressureDelta</a>(</span></CodeLine>
<Link id="l03485" /><CodeLine lineNumber="3485"><span class="doxyHighlight">        Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>(),</span></CodeLine>
<Link id="l03486" /><CodeLine lineNumber="3486"><span class="doxyHighlight">        Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>,</span></CodeLine>
<Link id="l03487" /><CodeLine lineNumber="3487"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getRegionCriticalPSets(),</span></CodeLine>
<Link id="l03488" /><CodeLine lineNumber="3488"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getRegPressure().MaxSetPressure);</span></CodeLine>
<Link id="l03489" /><CodeLine lineNumber="3489"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03490" /><CodeLine lineNumber="3490"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>) &#123;</span></CodeLine>
<Link id="l03491" /><CodeLine lineNumber="3491"><span class="doxyHighlight">        TempTracker.<a href="/docs/api/classes/llvm/regpressuretracker/#a41a3118fb6bd46e397256b3c9794b61c">getMaxUpwardPressureDelta</a>(</span></CodeLine>
<Link id="l03492" /><CodeLine lineNumber="3492"><span class="doxyHighlight">          Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>(),</span></CodeLine>
<Link id="l03493" /><CodeLine lineNumber="3493"><span class="doxyHighlight">          &amp;<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getPressureDiff(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>),</span></CodeLine>
<Link id="l03494" /><CodeLine lineNumber="3494"><span class="doxyHighlight">          Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>,</span></CodeLine>
<Link id="l03495" /><CodeLine lineNumber="3495"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getRegionCriticalPSets(),</span></CodeLine>
<Link id="l03496" /><CodeLine lineNumber="3496"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getRegPressure().MaxSetPressure);</span></CodeLine>
<Link id="l03497" /><CodeLine lineNumber="3497"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03498" /><CodeLine lineNumber="3498"><span class="doxyHighlight">        RPTracker.<a href="/docs/api/classes/llvm/regpressuretracker/#af7a0688faef62284ad684e70f342b3da">getUpwardPressureDelta</a>(</span></CodeLine>
<Link id="l03499" /><CodeLine lineNumber="3499"><span class="doxyHighlight">          Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>(),</span></CodeLine>
<Link id="l03500" /><CodeLine lineNumber="3500"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getPressureDiff(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>),</span></CodeLine>
<Link id="l03501" /><CodeLine lineNumber="3501"><span class="doxyHighlight">          Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>,</span></CodeLine>
<Link id="l03502" /><CodeLine lineNumber="3502"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getRegionCriticalPSets(),</span></CodeLine>
<Link id="l03503" /><CodeLine lineNumber="3503"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getRegPressure().MaxSetPressure);</span></CodeLine>
<Link id="l03504" /><CodeLine lineNumber="3504"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l03505" /><CodeLine lineNumber="3505"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03506" /><CodeLine lineNumber="3506"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03507" /><CodeLine lineNumber="3507"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a href="/docs/api/classes/llvm/pressurechange/#a488d33ac015981b0f8e2086fcbd49db2">isValid</a>()) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</span></CodeLine>
<Link id="l03508" /><CodeLine lineNumber="3508"><span class="doxyHighlight">             &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Try  SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) &quot;</span></CodeLine>
<Link id="l03509" /><CodeLine lineNumber="3509"><span class="doxyHighlight">             &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#ae9476ffbc2f3f195a2116b13f3186194">TRI</a>-&gt;getRegPressureSetName(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a href="/docs/api/classes/llvm/pressurechange/#ad47247ae6eaa7104e4d4ef6e002840f9">getPSet</a>()) &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;:&quot;</span></CodeLine>
<Link id="l03510" /><CodeLine lineNumber="3510"><span class="doxyHighlight">             &lt;&lt; Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a href="/docs/api/classes/llvm/pressurechange/#a1eef24878593ee0080b20b96ce3eb4c4">getUnitInc</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03511" /><CodeLine lineNumber="3511"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03512" /><CodeLine lineNumber="3512"></CodeLine>
<Link id="l03513" /><CodeLine lineNumber="3513"><span class="doxyHighlightComment">/// Apply a set of heuristics to a new candidate. Heuristics are currently</span></CodeLine>
<Link id="l03514" /><CodeLine lineNumber="3514"><span class="doxyHighlightComment">/// hierarchical. This may be more efficient than a graduated cost model because</span></CodeLine>
<Link id="l03515" /><CodeLine lineNumber="3515"><span class="doxyHighlightComment">/// we don&#39;t need to evaluate all aspects of the model for each node in the</span></CodeLine>
<Link id="l03516" /><CodeLine lineNumber="3516"><span class="doxyHighlightComment">/// queue. But it&#39;s really done to make the heuristics easier to debug and</span></CodeLine>
<Link id="l03517" /><CodeLine lineNumber="3517"><span class="doxyHighlightComment">/// statistically analyze.</span></CodeLine>
<Link id="l03518" /><CodeLine lineNumber="3518"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l03519" /><CodeLine lineNumber="3519"><span class="doxyHighlightComment">/// \\param Cand provides the policy and current best candidate.</span></CodeLine>
<Link id="l03520" /><CodeLine lineNumber="3520"><span class="doxyHighlightComment">/// \\param TryCand refers to the next SUnit candidate, otherwise uninitialized.</span></CodeLine>
<Link id="l03521" /><CodeLine lineNumber="3521"><span class="doxyHighlightComment">/// \\param Zone describes the scheduled zone that we are extending, or nullptr</span></CodeLine>
<Link id="l03522" /><CodeLine lineNumber="3522"><span class="doxyHighlightComment">///             if Cand is from a different zone than TryCand.</span></CodeLine>
<Link id="l03523" /><CodeLine lineNumber="3523"><span class="doxyHighlightComment">/// \\return \\c true if TryCand is better than Cand (Reason is NOT NoCand)</span></CodeLine>
<Link id="l03524" /><CodeLine lineNumber="3524" lineLink="/docs/api/classes/llvm/genericscheduler/#a6ef23d22af6c895d9c255de3e940b8bf"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericscheduler/#a6ef23d22af6c895d9c255de3e940b8bf">GenericScheduler::tryCandidate</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> &amp;Cand,</span></CodeLine>
<Link id="l03525" /><CodeLine lineNumber="3525"><span class="doxyHighlight">                                    <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> &amp;TryCand,</span></CodeLine>
<Link id="l03526" /><CodeLine lineNumber="3526"><span class="doxyHighlight">                                    <a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &#42;Zone)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03527" /><CodeLine lineNumber="3527"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Initialize the candidate if needed.</span></CodeLine>
<Link id="l03528" /><CodeLine lineNumber="3528"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#acdc733638a93dca6bb0eb290ec896271">isValid</a>()) &#123;</span></CodeLine>
<Link id="l03529" /><CodeLine lineNumber="3529"><span class="doxyHighlight">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> = <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3aa00a8e5741a604eb07320e981473b4e7">NodeOrder</a>;</span></CodeLine>
<Link id="l03530" /><CodeLine lineNumber="3530"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03531" /><CodeLine lineNumber="3531"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03532" /><CodeLine lineNumber="3532"></CodeLine>
<Link id="l03533" /><CodeLine lineNumber="3533"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Bias PhysReg Defs and copies to their uses and defined respectively.</span></CodeLine>
<Link id="l03534" /><CodeLine lineNumber="3534"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(<a href="/docs/api/namespaces/llvm/#afb4b9423201406d79ba16481c90cb6cb">biasPhysReg</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>, TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>),</span></CodeLine>
<Link id="l03535" /><CodeLine lineNumber="3535"><span class="doxyHighlight">                 <a href="/docs/api/namespaces/llvm/#afb4b9423201406d79ba16481c90cb6cb">biasPhysReg</a>(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>, Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>), TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3ab58c08e8fa9324ebf332e11601ec6c0d">PhysReg</a>))</span></CodeLine>
<Link id="l03536" /><CodeLine lineNumber="3536"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03537" /><CodeLine lineNumber="3537"></CodeLine>
<Link id="l03538" /><CodeLine lineNumber="3538"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Avoid exceeding the target&#39;s limit.</span></CodeLine>
<Link id="l03539" /><CodeLine lineNumber="3539"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;isTrackingPressure() &amp;&amp; <a href="/docs/api/namespaces/llvm/#a62cf34ac18c5612524978166788b5c80">tryPressure</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>,</span></CodeLine>
<Link id="l03540" /><CodeLine lineNumber="3540"><span class="doxyHighlight">                                               Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>,</span></CodeLine>
<Link id="l03541" /><CodeLine lineNumber="3541"><span class="doxyHighlight">                                               TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a01d264553167fb005aba23a6d2a6e9bb">RegExcess</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae9476ffbc2f3f195a2116b13f3186194">TRI</a>,</span></CodeLine>
<Link id="l03542" /><CodeLine lineNumber="3542"><span class="doxyHighlight">                                               <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;MF))</span></CodeLine>
<Link id="l03543" /><CodeLine lineNumber="3543"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03544" /><CodeLine lineNumber="3544"></CodeLine>
<Link id="l03545" /><CodeLine lineNumber="3545"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Avoid increasing the max critical pressure in the scheduled region.</span></CodeLine>
<Link id="l03546" /><CodeLine lineNumber="3546"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;isTrackingPressure() &amp;&amp; <a href="/docs/api/namespaces/llvm/#a62cf34ac18c5612524978166788b5c80">tryPressure</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>,</span></CodeLine>
<Link id="l03547" /><CodeLine lineNumber="3547"><span class="doxyHighlight">                                               Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>,</span></CodeLine>
<Link id="l03548" /><CodeLine lineNumber="3548"><span class="doxyHighlight">                                               TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a974161ce84e375b6d40bd8855c29dd7f">RegCritical</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae9476ffbc2f3f195a2116b13f3186194">TRI</a>,</span></CodeLine>
<Link id="l03549" /><CodeLine lineNumber="3549"><span class="doxyHighlight">                                               <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;MF))</span></CodeLine>
<Link id="l03550" /><CodeLine lineNumber="3550"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03551" /><CodeLine lineNumber="3551"></CodeLine>
<Link id="l03552" /><CodeLine lineNumber="3552"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We only compare a subset of features when comparing nodes between</span></CodeLine>
<Link id="l03553" /><CodeLine lineNumber="3553"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Top and Bottom boundary. Some properties are simply incomparable, in many</span></CodeLine>
<Link id="l03554" /><CodeLine lineNumber="3554"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// other instances we should only override the other boundary if something</span></CodeLine>
<Link id="l03555" /><CodeLine lineNumber="3555"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// is a clear good pick on one boundary. Skip heuristics that are more</span></CodeLine>
<Link id="l03556" /><CodeLine lineNumber="3556"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// &quot;tie-breaking&quot; in nature.</span></CodeLine>
<Link id="l03557" /><CodeLine lineNumber="3557"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> SameBoundary = Zone != </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03558" /><CodeLine lineNumber="3558"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SameBoundary) &#123;</span></CodeLine>
<Link id="l03559" /><CodeLine lineNumber="3559"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For loops that are acyclic path limited, aggressively schedule for</span></CodeLine>
<Link id="l03560" /><CodeLine lineNumber="3560"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// latency. Within an single cycle, whenever CurrMOps &gt; 0, allow normal</span></CodeLine>
<Link id="l03561" /><CodeLine lineNumber="3561"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// heuristics to take precedence.</span></CodeLine>
<Link id="l03562" /><CodeLine lineNumber="3562"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.IsAcyclicLatencyLimited &amp;&amp; !Zone-&gt;<a href="/docs/api/classes/llvm/schedboundary/#ac984b92ac3a64875c7f2908ef617584d">getCurrMOps</a>() &amp;&amp;</span></CodeLine>
<Link id="l03563" /><CodeLine lineNumber="3563"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a8c9a83bf7b5f6e85f215ff07a31e0fbe">tryLatency</a>(TryCand, Cand, &#42;Zone))</span></CodeLine>
<Link id="l03564" /><CodeLine lineNumber="3564"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03565" /><CodeLine lineNumber="3565"></CodeLine>
<Link id="l03566" /><CodeLine lineNumber="3566"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Prioritize instructions that read unbuffered resources by stall cycles.</span></CodeLine>
<Link id="l03567" /><CodeLine lineNumber="3567"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(Zone-&gt;<a href="/docs/api/classes/llvm/schedboundary/#a4a674627365b72b17a9b2e0a99d40ce1">getLatencyStallCycles</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>),</span></CodeLine>
<Link id="l03568" /><CodeLine lineNumber="3568"><span class="doxyHighlight">                Zone-&gt;<a href="/docs/api/classes/llvm/schedboundary/#a4a674627365b72b17a9b2e0a99d40ce1">getLatencyStallCycles</a>(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>), TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3ab6aae8902e724a36ed16d537784777a2">Stall</a>))</span></CodeLine>
<Link id="l03569" /><CodeLine lineNumber="3569"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03570" /><CodeLine lineNumber="3570"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03571" /><CodeLine lineNumber="3571"></CodeLine>
<Link id="l03572" /><CodeLine lineNumber="3572"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Keep clustered nodes together to encourage downstream peephole</span></CodeLine>
<Link id="l03573" /><CodeLine lineNumber="3573"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// optimizations which may reduce resource requirements.</span></CodeLine>
<Link id="l03574" /><CodeLine lineNumber="3574"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03575" /><CodeLine lineNumber="3575"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// This is a best effort to set things up for a post-RA pass. Optimizations</span></CodeLine>
<Link id="l03576" /><CodeLine lineNumber="3576"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// like generating loads of multiple registers should ideally be done within</span></CodeLine>
<Link id="l03577" /><CodeLine lineNumber="3577"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the scheduler pass by combining the loads during DAG postprocessing.</span></CodeLine>
<Link id="l03578" /><CodeLine lineNumber="3578"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;CandNextClusterSU =</span></CodeLine>
<Link id="l03579" /><CodeLine lineNumber="3579"><span class="doxyHighlight">    Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> ? <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getNextClusterSucc() : <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getNextClusterPred();</span></CodeLine>
<Link id="l03580" /><CodeLine lineNumber="3580"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;TryCandNextClusterSU =</span></CodeLine>
<Link id="l03581" /><CodeLine lineNumber="3581"><span class="doxyHighlight">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> ? <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getNextClusterSucc() : <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getNextClusterPred();</span></CodeLine>
<Link id="l03582" /><CodeLine lineNumber="3582"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> == TryCandNextClusterSU,</span></CodeLine>
<Link id="l03583" /><CodeLine lineNumber="3583"><span class="doxyHighlight">                 Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> == CandNextClusterSU,</span></CodeLine>
<Link id="l03584" /><CodeLine lineNumber="3584"><span class="doxyHighlight">                 TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a5a905614458af47ec4a5054a53d23e1b">Cluster</a>))</span></CodeLine>
<Link id="l03585" /><CodeLine lineNumber="3585"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03586" /><CodeLine lineNumber="3586"></CodeLine>
<Link id="l03587" /><CodeLine lineNumber="3587"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SameBoundary) &#123;</span></CodeLine>
<Link id="l03588" /><CodeLine lineNumber="3588"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Weak edges are for clustering and other constraints.</span></CodeLine>
<Link id="l03589" /><CodeLine lineNumber="3589"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(<a href="/docs/api/namespaces/llvm/#a13933f8ac2f5e1a34cf53b2c1e1bdc5b">getWeakLeft</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>, TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>),</span></CodeLine>
<Link id="l03590" /><CodeLine lineNumber="3590"><span class="doxyHighlight">                <a href="/docs/api/namespaces/llvm/#a13933f8ac2f5e1a34cf53b2c1e1bdc5b">getWeakLeft</a>(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>, Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>),</span></CodeLine>
<Link id="l03591" /><CodeLine lineNumber="3591"><span class="doxyHighlight">                TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3aed8b719fe1a669c2fed4bacc6f46e8df">Weak</a>))</span></CodeLine>
<Link id="l03592" /><CodeLine lineNumber="3592"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03593" /><CodeLine lineNumber="3593"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03594" /><CodeLine lineNumber="3594"></CodeLine>
<Link id="l03595" /><CodeLine lineNumber="3595"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Avoid increasing the max pressure of the entire region.</span></CodeLine>
<Link id="l03596" /><CodeLine lineNumber="3596"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;isTrackingPressure() &amp;&amp; <a href="/docs/api/namespaces/llvm/#a62cf34ac18c5612524978166788b5c80">tryPressure</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>,</span></CodeLine>
<Link id="l03597" /><CodeLine lineNumber="3597"><span class="doxyHighlight">                                               Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>,</span></CodeLine>
<Link id="l03598" /><CodeLine lineNumber="3598"><span class="doxyHighlight">                                               TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a01ef8d8423fe645e50ad5a179b4f4483">RegMax</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae9476ffbc2f3f195a2116b13f3186194">TRI</a>,</span></CodeLine>
<Link id="l03599" /><CodeLine lineNumber="3599"><span class="doxyHighlight">                                               <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;MF))</span></CodeLine>
<Link id="l03600" /><CodeLine lineNumber="3600"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03601" /><CodeLine lineNumber="3601"></CodeLine>
<Link id="l03602" /><CodeLine lineNumber="3602"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SameBoundary) &#123;</span></CodeLine>
<Link id="l03603" /><CodeLine lineNumber="3603"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Avoid critical resource consumption and balance the schedule.</span></CodeLine>
<Link id="l03604" /><CodeLine lineNumber="3604"><span class="doxyHighlight">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a47cc8c89db10ac27483585cd61cf4f91">initResourceDelta</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>);</span></CodeLine>
<Link id="l03605" /><CodeLine lineNumber="3605"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta/#a3ffd08e01bba20c9af1ae13630ed7acd">CritResources</a>, Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta/#a3ffd08e01bba20c9af1ae13630ed7acd">CritResources</a>,</span></CodeLine>
<Link id="l03606" /><CodeLine lineNumber="3606"><span class="doxyHighlight">                TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a56637d3435d7e1953a615371cfe4d5ec">ResourceReduce</a>))</span></CodeLine>
<Link id="l03607" /><CodeLine lineNumber="3607"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03608" /><CodeLine lineNumber="3608"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta/#ab660550157a92f83f7b4f2db2d2d9304">DemandedResources</a>,</span></CodeLine>
<Link id="l03609" /><CodeLine lineNumber="3609"><span class="doxyHighlight">                   Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta/#ab660550157a92f83f7b4f2db2d2d9304">DemandedResources</a>,</span></CodeLine>
<Link id="l03610" /><CodeLine lineNumber="3610"><span class="doxyHighlight">                   TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a07409a8a5b9657af23f0a1c962f5c0c1">ResourceDemand</a>))</span></CodeLine>
<Link id="l03611" /><CodeLine lineNumber="3611"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03612" /><CodeLine lineNumber="3612"></CodeLine>
<Link id="l03613" /><CodeLine lineNumber="3613"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Avoid serializing long latency dependence chains.</span></CodeLine>
<Link id="l03614" /><CodeLine lineNumber="3614"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For acyclic path limited loops, latency was already checked above.</span></CodeLine>
<Link id="l03615" /><CodeLine lineNumber="3615"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.DisableLatencyHeuristic &amp;&amp; TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy/#acd9f1ecfaa9db2800e6fe15a385b4a6f">ReduceLatency</a> &amp;&amp;</span></CodeLine>
<Link id="l03616" /><CodeLine lineNumber="3616"><span class="doxyHighlight">        !<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.IsAcyclicLatencyLimited &amp;&amp; <a href="/docs/api/namespaces/llvm/#a8c9a83bf7b5f6e85f215ff07a31e0fbe">tryLatency</a>(TryCand, Cand, &#42;Zone))</span></CodeLine>
<Link id="l03617" /><CodeLine lineNumber="3617"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03618" /><CodeLine lineNumber="3618"></CodeLine>
<Link id="l03619" /><CodeLine lineNumber="3619"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Fall through to original instruction order.</span></CodeLine>
<Link id="l03620" /><CodeLine lineNumber="3620"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((Zone-&gt;<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() &amp;&amp; TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt; Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a>)</span></CodeLine>
<Link id="l03621" /><CodeLine lineNumber="3621"><span class="doxyHighlight">        || (!Zone-&gt;<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() &amp;&amp; TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &gt; Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a>)) &#123;</span></CodeLine>
<Link id="l03622" /><CodeLine lineNumber="3622"><span class="doxyHighlight">      TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> = <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3aa00a8e5741a604eb07320e981473b4e7">NodeOrder</a>;</span></CodeLine>
<Link id="l03623" /><CodeLine lineNumber="3623"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03624" /><CodeLine lineNumber="3624"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03625" /><CodeLine lineNumber="3625"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03626" /><CodeLine lineNumber="3626"></CodeLine>
<Link id="l03627" /><CodeLine lineNumber="3627"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03628" /><CodeLine lineNumber="3628"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03629" /><CodeLine lineNumber="3629"></CodeLine>
<Link id="l03630" /><CodeLine lineNumber="3630"><span class="doxyHighlightComment">/// Pick the best candidate from the queue.</span></CodeLine>
<Link id="l03631" /><CodeLine lineNumber="3631"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l03632" /><CodeLine lineNumber="3632"><span class="doxyHighlightComment">/// TODO: getMaxPressureDelta results can be mostly cached for each SUnit during</span></CodeLine>
<Link id="l03633" /><CodeLine lineNumber="3633"><span class="doxyHighlightComment">/// DAG building. To adjust for the current scheduling location we need to</span></CodeLine>
<Link id="l03634" /><CodeLine lineNumber="3634"><span class="doxyHighlightComment">/// maintain the number of vreg uses remaining to be top-scheduled.</span></CodeLine>
<Link id="l03635" /><CodeLine lineNumber="3635" lineLink="/docs/api/classes/llvm/genericscheduler/#ad9779ec3011b4547f9a509af82d87a6e"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericscheduler/#ad9779ec3011b4547f9a509af82d87a6e">GenericScheduler::pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &amp;Zone,</span></CodeLine>
<Link id="l03636" /><CodeLine lineNumber="3636"><span class="doxyHighlight">                                         </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> &amp;ZonePolicy,</span></CodeLine>
<Link id="l03637" /><CodeLine lineNumber="3637"><span class="doxyHighlight">                                         </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regpressuretracker">RegPressureTracker</a> &amp;RPTracker,</span></CodeLine>
<Link id="l03638" /><CodeLine lineNumber="3638"><span class="doxyHighlight">                                         <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> &amp;Cand) &#123;</span></CodeLine>
<Link id="l03639" /><CodeLine lineNumber="3639"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// getMaxPressureDelta temporarily modifies the tracker.</span></CodeLine>
<Link id="l03640" /><CodeLine lineNumber="3640"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/regpressuretracker">RegPressureTracker</a> &amp;TempTracker = </span><span class="doxyHighlightKeyword">const&#95;cast&lt;</span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/regpressuretracker">RegPressureTracker</a>&amp;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(RPTracker);</span></CodeLine>
<Link id="l03641" /><CodeLine lineNumber="3641"></CodeLine>
<Link id="l03642" /><CodeLine lineNumber="3642"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/readyqueue">ReadyQueue</a> &amp;Q = Zone.<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>;</span></CodeLine>
<Link id="l03643" /><CodeLine lineNumber="3643"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU : Q) &#123;</span></CodeLine>
<Link id="l03644" /><CodeLine lineNumber="3644"></CodeLine>
<Link id="l03645" /><CodeLine lineNumber="3645"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> TryCand(ZonePolicy);</span></CodeLine>
<Link id="l03646" /><CodeLine lineNumber="3646"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericscheduler/#ab0d12eb20352f092840f7f8df60abe26">initCandidate</a>(TryCand, SU, Zone.<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>(), RPTracker, TempTracker);</span></CodeLine>
<Link id="l03647" /><CodeLine lineNumber="3647"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Pass SchedBoundary only when comparing nodes from the same boundary.</span></CodeLine>
<Link id="l03648" /><CodeLine lineNumber="3648"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &#42;ZoneArg = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> == TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> ? &amp;Zone : </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03649" /><CodeLine lineNumber="3649"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/genericscheduler/#a6ef23d22af6c895d9c255de3e940b8bf">tryCandidate</a>(Cand, TryCand, ZoneArg)) &#123;</span></CodeLine>
<Link id="l03650" /><CodeLine lineNumber="3650"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Initialize resource delta if needed in case future heuristics query it.</span></CodeLine>
<Link id="l03651" /><CodeLine lineNumber="3651"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a> == <a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta">SchedResourceDelta</a>())</span></CodeLine>
<Link id="l03652" /><CodeLine lineNumber="3652"><span class="doxyHighlight">        TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a47cc8c89db10ac27483585cd61cf4f91">initResourceDelta</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>);</span></CodeLine>
<Link id="l03653" /><CodeLine lineNumber="3653"><span class="doxyHighlight">      Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a294e77c4f7245940981e5e259045c7c0">setBest</a>(TryCand);</span></CodeLine>
<Link id="l03654" /><CodeLine lineNumber="3654"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(Cand));</span></CodeLine>
<Link id="l03655" /><CodeLine lineNumber="3655"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03656" /><CodeLine lineNumber="3656"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03657" /><CodeLine lineNumber="3657"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03658" /><CodeLine lineNumber="3658"></CodeLine>
<Link id="l03659" /><CodeLine lineNumber="3659"><span class="doxyHighlightComment">/// Pick the best candidate node from either the top or bottom queue.</span></CodeLine>
<Link id="l03660" /><CodeLine lineNumber="3660" lineLink="/docs/api/classes/llvm/genericscheduler/#aef82bce77971408815c3b90979188d1e"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/llvm/genericscheduler/#aef82bce77971408815c3b90979188d1e">GenericScheduler::pickNodeBidirectional</a>(</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &amp;IsTopNode) &#123;</span></CodeLine>
<Link id="l03661" /><CodeLine lineNumber="3661"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Schedule as far as possible in the direction of no choice. This is most</span></CodeLine>
<Link id="l03662" /><CodeLine lineNumber="3662"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// efficient, but also provides the best heuristics for CriticalPSets.</span></CodeLine>
<Link id="l03663" /><CodeLine lineNumber="3663"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.pickOnlyChoice()) &#123;</span></CodeLine>
<Link id="l03664" /><CodeLine lineNumber="3664"><span class="doxyHighlight">    IsTopNode = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03665" /><CodeLine lineNumber="3665"><span class="doxyHighlight">    <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a3e5ec7d7634a70f61fd64c3ef22d02f1">Only1</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03666" /><CodeLine lineNumber="3666"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> SU;</span></CodeLine>
<Link id="l03667" /><CodeLine lineNumber="3667"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03668" /><CodeLine lineNumber="3668"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.pickOnlyChoice()) &#123;</span></CodeLine>
<Link id="l03669" /><CodeLine lineNumber="3669"><span class="doxyHighlight">    IsTopNode = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03670" /><CodeLine lineNumber="3670"><span class="doxyHighlight">    <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a3e5ec7d7634a70f61fd64c3ef22d02f1">Only1</a>, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03671" /><CodeLine lineNumber="3671"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> SU;</span></CodeLine>
<Link id="l03672" /><CodeLine lineNumber="3672"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03673" /><CodeLine lineNumber="3673"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Set the bottom-up policy based on the state of the current bottom zone and</span></CodeLine>
<Link id="l03674" /><CodeLine lineNumber="3674"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the instructions outside the zone, including the top zone.</span></CodeLine>
<Link id="l03675" /><CodeLine lineNumber="3675"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> BotPolicy;</span></CodeLine>
<Link id="l03676" /><CodeLine lineNumber="3676"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a8668556014566994c07b21391762551b">setPolicy</a>(BotPolicy, </span><span class="doxyHighlightComment">/&#42;IsPostRA=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>, &amp;<a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>);</span></CodeLine>
<Link id="l03677" /><CodeLine lineNumber="3677"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Set the top-down policy based on the state of the current top zone and</span></CodeLine>
<Link id="l03678" /><CodeLine lineNumber="3678"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the instructions outside the zone, including the bottom zone.</span></CodeLine>
<Link id="l03679" /><CodeLine lineNumber="3679"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> TopPolicy;</span></CodeLine>
<Link id="l03680" /><CodeLine lineNumber="3680"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a8668556014566994c07b21391762551b">setPolicy</a>(TopPolicy, </span><span class="doxyHighlightComment">/&#42;IsPostRA=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>, &amp;<a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>);</span></CodeLine>
<Link id="l03681" /><CodeLine lineNumber="3681"></CodeLine>
<Link id="l03682" /><CodeLine lineNumber="3682"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// See if BotCand is still valid (because we previously scheduled from Top).</span></CodeLine>
<Link id="l03683" /><CodeLine lineNumber="3683"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Picking from Bot:\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03684" /><CodeLine lineNumber="3684"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.isValid() || <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.SU-&gt;isScheduled ||</span></CodeLine>
<Link id="l03685" /><CodeLine lineNumber="3685"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.Policy != BotPolicy) &#123;</span></CodeLine>
<Link id="l03686" /><CodeLine lineNumber="3686"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.reset(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a>());</span></CodeLine>
<Link id="l03687" /><CodeLine lineNumber="3687"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericscheduler/#ad9779ec3011b4547f9a509af82d87a6e">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>, BotPolicy, <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getBotRPTracker(), <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>);</span></CodeLine>
<Link id="l03688" /><CodeLine lineNumber="3688"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.Reason != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;failed to find the first candidate&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03689" /><CodeLine lineNumber="3689"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03690" /><CodeLine lineNumber="3690"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>));</span></CodeLine>
<Link id="l03691" /><CodeLine lineNumber="3691"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l03692" /><CodeLine lineNumber="3692"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>) &#123;</span></CodeLine>
<Link id="l03693" /><CodeLine lineNumber="3693"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> TCand;</span></CodeLine>
<Link id="l03694" /><CodeLine lineNumber="3694"><span class="doxyHighlight">      TCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a361fa10c095c303e093021c6a1d04e75">reset</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a>());</span></CodeLine>
<Link id="l03695" /><CodeLine lineNumber="3695"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/genericscheduler/#ad9779ec3011b4547f9a509af82d87a6e">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>, BotPolicy, <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getBotRPTracker(), TCand);</span></CodeLine>
<Link id="l03696" /><CodeLine lineNumber="3696"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> == <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.SU &amp;&amp;</span></CodeLine>
<Link id="l03697" /><CodeLine lineNumber="3697"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;Last pick result should correspond to re-picking right now&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03698" /><CodeLine lineNumber="3698"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03699" /><CodeLine lineNumber="3699"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l03700" /><CodeLine lineNumber="3700"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03701" /><CodeLine lineNumber="3701"></CodeLine>
<Link id="l03702" /><CodeLine lineNumber="3702"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check if the top Q has a better candidate.</span></CodeLine>
<Link id="l03703" /><CodeLine lineNumber="3703"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Picking from Top:\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03704" /><CodeLine lineNumber="3704"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.isValid() || <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.SU-&gt;isScheduled ||</span></CodeLine>
<Link id="l03705" /><CodeLine lineNumber="3705"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.Policy != TopPolicy) &#123;</span></CodeLine>
<Link id="l03706" /><CodeLine lineNumber="3706"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.reset(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a>());</span></CodeLine>
<Link id="l03707" /><CodeLine lineNumber="3707"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericscheduler/#ad9779ec3011b4547f9a509af82d87a6e">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>, TopPolicy, <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getTopRPTracker(), <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>);</span></CodeLine>
<Link id="l03708" /><CodeLine lineNumber="3708"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.Reason != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;failed to find the first candidate&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03709" /><CodeLine lineNumber="3709"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03710" /><CodeLine lineNumber="3710"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>));</span></CodeLine>
<Link id="l03711" /><CodeLine lineNumber="3711"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l03712" /><CodeLine lineNumber="3712"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>) &#123;</span></CodeLine>
<Link id="l03713" /><CodeLine lineNumber="3713"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> TCand;</span></CodeLine>
<Link id="l03714" /><CodeLine lineNumber="3714"><span class="doxyHighlight">      TCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a361fa10c095c303e093021c6a1d04e75">reset</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a>());</span></CodeLine>
<Link id="l03715" /><CodeLine lineNumber="3715"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/genericscheduler/#ad9779ec3011b4547f9a509af82d87a6e">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>, TopPolicy, <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getTopRPTracker(), TCand);</span></CodeLine>
<Link id="l03716" /><CodeLine lineNumber="3716"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> == <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.SU &amp;&amp;</span></CodeLine>
<Link id="l03717" /><CodeLine lineNumber="3717"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;Last pick result should correspond to re-picking right now&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03718" /><CodeLine lineNumber="3718"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03719" /><CodeLine lineNumber="3719"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l03720" /><CodeLine lineNumber="3720"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03721" /><CodeLine lineNumber="3721"></CodeLine>
<Link id="l03722" /><CodeLine lineNumber="3722"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Pick best from BotCand and TopCand.</span></CodeLine>
<Link id="l03723" /><CodeLine lineNumber="3723"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.isValid());</span></CodeLine>
<Link id="l03724" /><CodeLine lineNumber="3724"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.isValid());</span></CodeLine>
<Link id="l03725" /><CodeLine lineNumber="3725"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> Cand = <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>;</span></CodeLine>
<Link id="l03726" /><CodeLine lineNumber="3726"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.Reason = <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03727" /><CodeLine lineNumber="3727"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/genericscheduler/#a6ef23d22af6c895d9c255de3e940b8bf">tryCandidate</a>(Cand, <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">)) &#123;</span></CodeLine>
<Link id="l03728" /><CodeLine lineNumber="3728"><span class="doxyHighlight">    Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a294e77c4f7245940981e5e259045c7c0">setBest</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>);</span></CodeLine>
<Link id="l03729" /><CodeLine lineNumber="3729"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(Cand));</span></CodeLine>
<Link id="l03730" /><CodeLine lineNumber="3730"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03731" /><CodeLine lineNumber="3731"></CodeLine>
<Link id="l03732" /><CodeLine lineNumber="3732"><span class="doxyHighlight">  IsTopNode = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>;</span></CodeLine>
<Link id="l03733" /><CodeLine lineNumber="3733"><span class="doxyHighlight">  <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(Cand);</span></CodeLine>
<Link id="l03734" /><CodeLine lineNumber="3734"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>;</span></CodeLine>
<Link id="l03735" /><CodeLine lineNumber="3735"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03736" /><CodeLine lineNumber="3736"></CodeLine>
<Link id="l03737" /><CodeLine lineNumber="3737"><span class="doxyHighlightComment">/// Pick the best node to balance the schedule. Implements MachineSchedStrategy.</span></CodeLine>
<Link id="l03738" /><CodeLine lineNumber="3738" lineLink="/docs/api/classes/llvm/genericscheduler/#ad4cc558b6cbcc4e9cea5df915c197e14"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/llvm/genericscheduler/#ad4cc558b6cbcc4e9cea5df915c197e14">GenericScheduler::pickNode</a>(</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &amp;IsTopNode) &#123;</span></CodeLine>
<Link id="l03739" /><CodeLine lineNumber="3739"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;top() == <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;bottom()) &#123;</span></CodeLine>
<Link id="l03740" /><CodeLine lineNumber="3740"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.Available.empty() &amp;&amp; <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.Pending.empty() &amp;&amp;</span></CodeLine>
<Link id="l03741" /><CodeLine lineNumber="3741"><span class="doxyHighlight">           <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.Available.empty() &amp;&amp; <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.Pending.empty() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;ReadyQ garbage&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03742" /><CodeLine lineNumber="3742"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03743" /><CodeLine lineNumber="3743"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03744" /><CodeLine lineNumber="3744"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU;</span></CodeLine>
<Link id="l03745" /><CodeLine lineNumber="3745"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">do</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03746" /><CodeLine lineNumber="3746"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown) &#123;</span></CodeLine>
<Link id="l03747" /><CodeLine lineNumber="3747"><span class="doxyHighlight">      SU = <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.pickOnlyChoice();</span></CodeLine>
<Link id="l03748" /><CodeLine lineNumber="3748"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SU) &#123;</span></CodeLine>
<Link id="l03749" /><CodeLine lineNumber="3749"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> NoPolicy;</span></CodeLine>
<Link id="l03750" /><CodeLine lineNumber="3750"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.reset(NoPolicy);</span></CodeLine>
<Link id="l03751" /><CodeLine lineNumber="3751"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/genericscheduler/#ad9779ec3011b4547f9a509af82d87a6e">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>, NoPolicy, <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getTopRPTracker(), <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>);</span></CodeLine>
<Link id="l03752" /><CodeLine lineNumber="3752"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.Reason != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;failed to find a candidate&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03753" /><CodeLine lineNumber="3753"><span class="doxyHighlight">        <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>);</span></CodeLine>
<Link id="l03754" /><CodeLine lineNumber="3754"><span class="doxyHighlight">        SU = <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.SU;</span></CodeLine>
<Link id="l03755" /><CodeLine lineNumber="3755"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l03756" /><CodeLine lineNumber="3756"><span class="doxyHighlight">      IsTopNode = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03757" /><CodeLine lineNumber="3757"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp) &#123;</span></CodeLine>
<Link id="l03758" /><CodeLine lineNumber="3758"><span class="doxyHighlight">      SU = <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.pickOnlyChoice();</span></CodeLine>
<Link id="l03759" /><CodeLine lineNumber="3759"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SU) &#123;</span></CodeLine>
<Link id="l03760" /><CodeLine lineNumber="3760"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> NoPolicy;</span></CodeLine>
<Link id="l03761" /><CodeLine lineNumber="3761"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.reset(NoPolicy);</span></CodeLine>
<Link id="l03762" /><CodeLine lineNumber="3762"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/genericscheduler/#ad9779ec3011b4547f9a509af82d87a6e">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>, NoPolicy, <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getBotRPTracker(), <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>);</span></CodeLine>
<Link id="l03763" /><CodeLine lineNumber="3763"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.Reason != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;failed to find a candidate&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03764" /><CodeLine lineNumber="3764"><span class="doxyHighlight">        <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>);</span></CodeLine>
<Link id="l03765" /><CodeLine lineNumber="3765"><span class="doxyHighlight">        SU = <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.SU;</span></CodeLine>
<Link id="l03766" /><CodeLine lineNumber="3766"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l03767" /><CodeLine lineNumber="3767"><span class="doxyHighlight">      IsTopNode = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03768" /><CodeLine lineNumber="3768"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03769" /><CodeLine lineNumber="3769"><span class="doxyHighlight">      SU = <a href="/docs/api/classes/llvm/genericscheduler/#aef82bce77971408815c3b90979188d1e">pickNodeBidirectional</a>(IsTopNode);</span></CodeLine>
<Link id="l03770" /><CodeLine lineNumber="3770"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03771" /><CodeLine lineNumber="3771"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a>);</span></CodeLine>
<Link id="l03772" /><CodeLine lineNumber="3772"></CodeLine>
<Link id="l03773" /><CodeLine lineNumber="3773"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If IsTopNode, then SU is in Top.Available and must be removed. Otherwise,</span></CodeLine>
<Link id="l03774" /><CodeLine lineNumber="3774"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// if isTopReady(), then SU is in either Top.Available or Top.Pending.</span></CodeLine>
<Link id="l03775" /><CodeLine lineNumber="3775"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If !IsTopNode, then SU is in Bot.Available and must be removed. Otherwise,</span></CodeLine>
<Link id="l03776" /><CodeLine lineNumber="3776"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// if isBottomReady(), then SU is in either Bot.Available or Bot.Pending.</span></CodeLine>
<Link id="l03777" /><CodeLine lineNumber="3777"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03778" /><CodeLine lineNumber="3778"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// It is coincidental when !IsTopNode &amp;&amp; isTopReady or when IsTopNode &amp;&amp;</span></CodeLine>
<Link id="l03779" /><CodeLine lineNumber="3779"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// isBottomReady. That is, it didn&#39;t factor into the decision to choose SU</span></CodeLine>
<Link id="l03780" /><CodeLine lineNumber="3780"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// because it isTopReady or isBottomReady, respectively. In fact, if the</span></CodeLine>
<Link id="l03781" /><CodeLine lineNumber="3781"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// RegionPolicy is OnlyTopDown or OnlyBottomUp, then the Bot queues and Top</span></CodeLine>
<Link id="l03782" /><CodeLine lineNumber="3782"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// queues respectivley contain the original roots and don&#39;t get updated when</span></CodeLine>
<Link id="l03783" /><CodeLine lineNumber="3783"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// picking a node. So if SU isTopReady on a OnlyBottomUp pick, then it was</span></CodeLine>
<Link id="l03784" /><CodeLine lineNumber="3784"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// because we schduled everything but the top roots. Conversley, if SU</span></CodeLine>
<Link id="l03785" /><CodeLine lineNumber="3785"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// isBottomReady on OnlyTopDown, then it was because we scheduled everything</span></CodeLine>
<Link id="l03786" /><CodeLine lineNumber="3786"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// but the bottom roots. If its in a queue even coincidentally, it should be</span></CodeLine>
<Link id="l03787" /><CodeLine lineNumber="3787"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// removed so it does not get re-picked in a subsequent pickNode call.</span></CodeLine>
<Link id="l03788" /><CodeLine lineNumber="3788"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae0b8da4dfde85d4ddc32359ca52dc493">isTopReady</a>())</span></CodeLine>
<Link id="l03789" /><CodeLine lineNumber="3789"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.removeReady(SU);</span></CodeLine>
<Link id="l03790" /><CodeLine lineNumber="3790"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ac198a5fb130b4c09836ba20e01b4290d">isBottomReady</a>())</span></CodeLine>
<Link id="l03791" /><CodeLine lineNumber="3791"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.removeReady(SU);</span></CodeLine>
<Link id="l03792" /><CodeLine lineNumber="3792"></CodeLine>
<Link id="l03793" /><CodeLine lineNumber="3793"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Scheduling SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) &quot;</span></CodeLine>
<Link id="l03794" /><CodeLine lineNumber="3794"><span class="doxyHighlight">                    &lt;&lt; &#42;SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>());</span></CodeLine>
<Link id="l03795" /><CodeLine lineNumber="3795"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> SU;</span></CodeLine>
<Link id="l03796" /><CodeLine lineNumber="3796"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03797" /><CodeLine lineNumber="3797"></CodeLine>
<Link id="l03798" /><CodeLine lineNumber="3798" lineLink="/docs/api/classes/llvm/genericscheduler/#ad04f609cdff2331741525e5328836598"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericscheduler/#ad04f609cdff2331741525e5328836598">GenericScheduler::reschedulePhysReg</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> isTop) &#123;</span></CodeLine>
<Link id="l03799" /><CodeLine lineNumber="3799"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> InsertPos = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</span></CodeLine>
<Link id="l03800" /><CodeLine lineNumber="3800"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!isTop)</span></CodeLine>
<Link id="l03801" /><CodeLine lineNumber="3801"><span class="doxyHighlight">    ++InsertPos;</span></CodeLine>
<Link id="l03802" /><CodeLine lineNumber="3802"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;SDep&gt;</a> &amp;Deps = isTop ? SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae2b43854b542de66eec6475adc48f56c">Preds</a> : SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>;</span></CodeLine>
<Link id="l03803" /><CodeLine lineNumber="3803"></CodeLine>
<Link id="l03804" /><CodeLine lineNumber="3804"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Find already scheduled copies with a single physreg dependence and move</span></CodeLine>
<Link id="l03805" /><CodeLine lineNumber="3805"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// them just above the scheduled instruction.</span></CodeLine>
<Link id="l03806" /><CodeLine lineNumber="3806"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sdep">SDep</a> &amp;Dep : Deps) &#123;</span></CodeLine>
<Link id="l03807" /><CodeLine lineNumber="3807"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Dep.getKind() != <a href="/docs/api/classes/llvm/sdep/#a07333f8ba53e0454b7ec6365860c0732af91df2221290eaa1a368403ffad49a26">SDep::Data</a> ||</span></CodeLine>
<Link id="l03808" /><CodeLine lineNumber="3808"><span class="doxyHighlight">        !<a href="/docs/api/classes/llvm/register/#afacc26f29d80e10be4785a96ed6444dc">Register::isPhysicalRegister</a>(Dep.getReg()))</span></CodeLine>
<Link id="l03809" /><CodeLine lineNumber="3809"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03810" /><CodeLine lineNumber="3810"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;DepSU = Dep.getSUnit();</span></CodeLine>
<Link id="l03811" /><CodeLine lineNumber="3811"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (isTop ? DepSU-&gt;<a href="/docs/api/classes/llvm/sunit/#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>.size() &gt; 1 : DepSU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae2b43854b542de66eec6475adc48f56c">Preds</a>.size() &gt; 1)</span></CodeLine>
<Link id="l03812" /><CodeLine lineNumber="3812"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03813" /><CodeLine lineNumber="3813"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;Copy = DepSU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</span></CodeLine>
<Link id="l03814" /><CodeLine lineNumber="3814"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Copy-&gt;isCopy() &amp;&amp; !Copy-&gt;isMoveImmediate())</span></CodeLine>
<Link id="l03815" /><CodeLine lineNumber="3815"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03816" /><CodeLine lineNumber="3816"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;  Rescheduling physreg copy &quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03817" /><CodeLine lineNumber="3817"><span class="doxyHighlight">               <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;dumpNode(&#42;Dep.getSUnit()));</span></CodeLine>
<Link id="l03818" /><CodeLine lineNumber="3818"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;moveInstruction(Copy, InsertPos);</span></CodeLine>
<Link id="l03819" /><CodeLine lineNumber="3819"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03820" /><CodeLine lineNumber="3820"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03821" /><CodeLine lineNumber="3821"></CodeLine>
<Link id="l03822" /><CodeLine lineNumber="3822"><span class="doxyHighlightComment">/// Update the scheduler&#39;s state after scheduling a node. This is the same node</span></CodeLine>
<Link id="l03823" /><CodeLine lineNumber="3823"><span class="doxyHighlightComment">/// that was just returned by pickNode(). However, ScheduleDAGMILive needs to</span></CodeLine>
<Link id="l03824" /><CodeLine lineNumber="3824"><span class="doxyHighlightComment">/// update it&#39;s state based on the current cycle before MachineSchedStrategy</span></CodeLine>
<Link id="l03825" /><CodeLine lineNumber="3825"><span class="doxyHighlightComment">/// does.</span></CodeLine>
<Link id="l03826" /><CodeLine lineNumber="3826"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l03827" /><CodeLine lineNumber="3827"><span class="doxyHighlightComment">/// FIXME: Eventually, we may bundle physreg copies rather than rescheduling</span></CodeLine>
<Link id="l03828" /><CodeLine lineNumber="3828"><span class="doxyHighlightComment">/// them here. See comments in biasPhysReg.</span></CodeLine>
<Link id="l03829" /><CodeLine lineNumber="3829" lineLink="/docs/api/classes/llvm/genericscheduler/#adf574ab3455d7292bed998d8ba50bfeb"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/genericscheduler/#adf574ab3455d7292bed998d8ba50bfeb">GenericScheduler::schedNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsTopNode) &#123;</span></CodeLine>
<Link id="l03830" /><CodeLine lineNumber="3830"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTopNode) &#123;</span></CodeLine>
<Link id="l03831" /><CodeLine lineNumber="3831"><span class="doxyHighlight">    SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> = std::max(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a>, <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.getCurrCycle());</span></CodeLine>
<Link id="l03832" /><CodeLine lineNumber="3832"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.bumpNode(SU);</span></CodeLine>
<Link id="l03833" /><CodeLine lineNumber="3833"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#adc4d8df3725fd70ffbaffeead756025c">hasPhysRegUses</a>)</span></CodeLine>
<Link id="l03834" /><CodeLine lineNumber="3834"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/genericscheduler/#ad04f609cdff2331741525e5328836598">reschedulePhysReg</a>(SU, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03835" /><CodeLine lineNumber="3835"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03836" /><CodeLine lineNumber="3836"><span class="doxyHighlight">    SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> = std::max(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>, <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.getCurrCycle());</span></CodeLine>
<Link id="l03837" /><CodeLine lineNumber="3837"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.bumpNode(SU);</span></CodeLine>
<Link id="l03838" /><CodeLine lineNumber="3838"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a9d9a8b8d5225f85cecbbada4ce4406b0">hasPhysRegDefs</a>)</span></CodeLine>
<Link id="l03839" /><CodeLine lineNumber="3839"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/genericscheduler/#ad04f609cdff2331741525e5328836598">reschedulePhysReg</a>(SU, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03840" /><CodeLine lineNumber="3840"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03841" /><CodeLine lineNumber="3841"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03842" /><CodeLine lineNumber="3842"></CodeLine>
<Link id="l03843" /><CodeLine lineNumber="3843"><span class="doxyHighlightComment">/// Create the standard converging machine scheduler. This will be used as the</span></CodeLine>
<Link id="l03844" /><CodeLine lineNumber="3844"><span class="doxyHighlightComment">/// default scheduler if the target does not set a default.</span></CodeLine>
<Link id="l03845" /><CodeLine lineNumber="3845" lineLink="/docs/api/namespaces/llvm/#a5365898dd1deb10d065e288a2babd511"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a> &#42;<a href="/docs/api/namespaces/llvm/#a5365898dd1deb10d065e288a2babd511">llvm::createGenericSchedLive</a>(<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</span></CodeLine>
<Link id="l03846" /><CodeLine lineNumber="3846"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a> &#42;DAG =</span></CodeLine>
<Link id="l03847" /><CodeLine lineNumber="3847"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, std::make&#95;unique&lt;GenericScheduler&gt;(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>));</span></CodeLine>
<Link id="l03848" /><CodeLine lineNumber="3848"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Register DAG post-processors.</span></CodeLine>
<Link id="l03849" /><CodeLine lineNumber="3849"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03850" /><CodeLine lineNumber="3850"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: extend the mutation API to allow earlier mutations to instantiate</span></CodeLine>
<Link id="l03851" /><CodeLine lineNumber="3851"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// data and pass it to later mutations. Have a single mutation that gathers</span></CodeLine>
<Link id="l03852" /><CodeLine lineNumber="3852"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the interesting nodes in one pass.</span></CodeLine>
<Link id="l03853" /><CodeLine lineNumber="3853"><span class="doxyHighlight">  DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a2002164aea6fabe20598e0526746b1fa">addMutation</a>(<a href="/docs/api/namespaces/llvm/#ae82d653cf862c571ba16050a19426458">createCopyConstrainDAGMutation</a>(DAG-&gt;<a href="/docs/api/classes/llvm/scheduledag/#a348590624c488b04d0f9e227e6c3960e">TII</a>, DAG-&gt;<a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>));</span></CodeLine>
<Link id="l03854" /><CodeLine lineNumber="3854"></CodeLine>
<Link id="l03855" /><CodeLine lineNumber="3855"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetsubtargetinfo">TargetSubtargetInfo</a> &amp;STI = <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;MF-&gt;getSubtarget();</span></CodeLine>
<Link id="l03856" /><CodeLine lineNumber="3856"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Add MacroFusion mutation if fusions are not empty.</span></CodeLine>
<Link id="l03857" /><CodeLine lineNumber="3857"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;MacroFusions = STI.<a href="/docs/api/classes/llvm/targetsubtargetinfo/#a2b74e2ebb235e247397d5d87df776e66">getMacroFusions</a>();</span></CodeLine>
<Link id="l03858" /><CodeLine lineNumber="3858"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!MacroFusions.empty())</span></CodeLine>
<Link id="l03859" /><CodeLine lineNumber="3859"><span class="doxyHighlight">    DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a2002164aea6fabe20598e0526746b1fa">addMutation</a>(<a href="/docs/api/namespaces/llvm/#a1b646d2ebeba4a7119c3d4fec4d137dc">createMacroFusionDAGMutation</a>(MacroFusions));</span></CodeLine>
<Link id="l03860" /><CodeLine lineNumber="3860"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> DAG;</span></CodeLine>
<Link id="l03861" /><CodeLine lineNumber="3861"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03862" /><CodeLine lineNumber="3862"></CodeLine>
<Link id="l03863" /><CodeLine lineNumber="3863" lineLink="#abd6b45623aab101450023f187488ad88"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="#abd6b45623aab101450023f187488ad88">createConvergingSched</a>(<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</span></CodeLine>
<Link id="l03864" /><CodeLine lineNumber="3864"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a5365898dd1deb10d065e288a2babd511">createGenericSchedLive</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</span></CodeLine>
<Link id="l03865" /><CodeLine lineNumber="3865"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03866" /><CodeLine lineNumber="3866"></CodeLine>
<Link id="l03867" /><CodeLine lineNumber="3867"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> MachineSchedRegistry</span></CodeLine>
<Link id="l03868" /><CodeLine lineNumber="3868" lineLink="#a615fca179bf3fe73ce3d5271d1710c7a"><span class="doxyHighlight"><a href="#a615fca179bf3fe73ce3d5271d1710c7a">GenericSchedRegistry</a>(</span><span class="doxyHighlightStringLiteral">&quot;converge&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;Standard converging scheduler.&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l03869" /><CodeLine lineNumber="3869"><span class="doxyHighlight">                     <a href="#abd6b45623aab101450023f187488ad88">createConvergingSched</a>);</span></CodeLine>
<Link id="l03870" /><CodeLine lineNumber="3870"></CodeLine>
<Link id="l03871" /><CodeLine lineNumber="3871"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l03872" /><CodeLine lineNumber="3872"><span class="doxyHighlightComment">// PostGenericScheduler - Generic PostRA implementation of MachineSchedStrategy.</span></CodeLine>
<Link id="l03873" /><CodeLine lineNumber="3873"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l03874" /><CodeLine lineNumber="3874"></CodeLine>
<Link id="l03875" /><CodeLine lineNumber="3875" lineLink="/docs/api/classes/llvm/postgenericscheduler/#a744ad04adf5ae507a33542ec18b0d97f"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/postgenericscheduler/#a744ad04adf5ae507a33542ec18b0d97f">PostGenericScheduler::initialize</a>(<a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;Dag) &#123;</span></CodeLine>
<Link id="l03876" /><CodeLine lineNumber="3876"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a> = Dag;</span></CodeLine>
<Link id="l03877" /><CodeLine lineNumber="3877"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a> = <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;getSchedModel();</span></CodeLine>
<Link id="l03878" /><CodeLine lineNumber="3878"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#ae9476ffbc2f3f195a2116b13f3186194">TRI</a> = <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;TRI;</span></CodeLine>
<Link id="l03879" /><CodeLine lineNumber="3879"></CodeLine>
<Link id="l03880" /><CodeLine lineNumber="3880"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.init(<a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>);</span></CodeLine>
<Link id="l03881" /><CodeLine lineNumber="3881"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.init(<a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>, &amp;<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>);</span></CodeLine>
<Link id="l03882" /><CodeLine lineNumber="3882"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.init(<a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>, &amp;<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>);</span></CodeLine>
<Link id="l03883" /><CodeLine lineNumber="3883"></CodeLine>
<Link id="l03884" /><CodeLine lineNumber="3884"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Initialize the HazardRecognizers. If itineraries don&#39;t exist, are empty,</span></CodeLine>
<Link id="l03885" /><CodeLine lineNumber="3885"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// or are disabled, then these HazardRecs will be disabled.</span></CodeLine>
<Link id="l03886" /><CodeLine lineNumber="3886"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/instritinerarydata">InstrItineraryData</a> &#42;Itin = <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getInstrItineraries();</span></CodeLine>
<Link id="l03887" /><CodeLine lineNumber="3887"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.HazardRec) &#123;</span></CodeLine>
<Link id="l03888" /><CodeLine lineNumber="3888"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.HazardRec = <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;TII-&gt;CreateTargetMIHazardRecognizer(Itin, <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>);</span></CodeLine>
<Link id="l03889" /><CodeLine lineNumber="3889"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03890" /><CodeLine lineNumber="3890"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.HazardRec) &#123;</span></CodeLine>
<Link id="l03891" /><CodeLine lineNumber="3891"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.HazardRec = <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;TII-&gt;CreateTargetMIHazardRecognizer(Itin, <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>);</span></CodeLine>
<Link id="l03892" /><CodeLine lineNumber="3892"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03893" /><CodeLine lineNumber="3893"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03894" /><CodeLine lineNumber="3894"></CodeLine>
<Link id="l03895" /><CodeLine lineNumber="3895" lineLink="/docs/api/classes/llvm/postgenericscheduler/#a04711828471ee40bed1b0e0ae8584cf4"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/postgenericscheduler/#a04711828471ee40bed1b0e0ae8584cf4">PostGenericScheduler::initPolicy</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> Begin,</span></CodeLine>
<Link id="l03896" /><CodeLine lineNumber="3896"><span class="doxyHighlight">                                      <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> End,</span></CodeLine>
<Link id="l03897" /><CodeLine lineNumber="3897"><span class="doxyHighlight">                                      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumRegionInstrs) &#123;</span></CodeLine>
<Link id="l03898" /><CodeLine lineNumber="3898"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = &#42;Begin-&gt;getMF();</span></CodeLine>
<Link id="l03899" /><CodeLine lineNumber="3899"></CodeLine>
<Link id="l03900" /><CodeLine lineNumber="3900"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Default to top-down because it was implemented first and existing targets</span></CodeLine>
<Link id="l03901" /><CodeLine lineNumber="3901"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// expect that behavior by default.</span></CodeLine>
<Link id="l03902" /><CodeLine lineNumber="3902"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03903" /><CodeLine lineNumber="3903"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03904" /><CodeLine lineNumber="3904"></CodeLine>
<Link id="l03905" /><CodeLine lineNumber="3905"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Allow the subtarget to override default policy.</span></CodeLine>
<Link id="l03906" /><CodeLine lineNumber="3906"><span class="doxyHighlight">  MF.<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>().<a href="/docs/api/classes/llvm/targetsubtargetinfo/#a960319789166bad30f214270de5cbadc">overridePostRASchedPolicy</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>, NumRegionInstrs);</span></CodeLine>
<Link id="l03907" /><CodeLine lineNumber="3907"></CodeLine>
<Link id="l03908" /><CodeLine lineNumber="3908"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// After subtarget overrides, apply command line options.</span></CodeLine>
<Link id="l03909" /><CodeLine lineNumber="3909"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a1e5fc889b7ee01722dbdfb92df8cb7df">PostRADirection</a> == <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3ae89742249a15ad5696e3dcec82f0e76a">MISched::TopDown</a>) &#123;</span></CodeLine>
<Link id="l03910" /><CodeLine lineNumber="3910"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03911" /><CodeLine lineNumber="3911"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03912" /><CodeLine lineNumber="3912"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a1e5fc889b7ee01722dbdfb92df8cb7df">PostRADirection</a> == <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3abd98ce24773c9ca1e3f7ce3c541e43ea">MISched::BottomUp</a>) &#123;</span></CodeLine>
<Link id="l03913" /><CodeLine lineNumber="3913"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03914" /><CodeLine lineNumber="3914"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03915" /><CodeLine lineNumber="3915"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a1e5fc889b7ee01722dbdfb92df8cb7df">PostRADirection</a> == <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3aab012f17d1537ed7a7c6d45b1d2fc0e9">MISched::Bidirectional</a>) &#123;</span></CodeLine>
<Link id="l03916" /><CodeLine lineNumber="3916"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03917" /><CodeLine lineNumber="3917"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03918" /><CodeLine lineNumber="3918"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03919" /><CodeLine lineNumber="3919"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03920" /><CodeLine lineNumber="3920"></CodeLine>
<Link id="l03921" /><CodeLine lineNumber="3921" lineLink="/docs/api/classes/llvm/postgenericscheduler/#aee5ca47cbb46d1237ce496179411b03e"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/postgenericscheduler/#aee5ca47cbb46d1237ce496179411b03e">PostGenericScheduler::registerRoots</a>() &#123;</span></CodeLine>
<Link id="l03922" /><CodeLine lineNumber="3922"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath = <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;ExitSU.getDepth();</span></CodeLine>
<Link id="l03923" /><CodeLine lineNumber="3923"></CodeLine>
<Link id="l03924" /><CodeLine lineNumber="3924"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Some roots may not feed into ExitSU. Check all of them in case.</span></CodeLine>
<Link id="l03925" /><CodeLine lineNumber="3925"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU : <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.Available) &#123;</span></CodeLine>
<Link id="l03926" /><CodeLine lineNumber="3926"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>() &gt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath)</span></CodeLine>
<Link id="l03927" /><CodeLine lineNumber="3927"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>();</span></CodeLine>
<Link id="l03928" /><CodeLine lineNumber="3928"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03929" /><CodeLine lineNumber="3929"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Critical Path: (PGS-RR) &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03930" /><CodeLine lineNumber="3930"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a82ab0315644106de03b36f143328179f">DumpCriticalPathLength</a>) &#123;</span></CodeLine>
<Link id="l03931" /><CodeLine lineNumber="3931"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Critical Path(PGS-RR ): &quot;</span><span class="doxyHighlight"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; \\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03932" /><CodeLine lineNumber="3932"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03933" /><CodeLine lineNumber="3933"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03934" /><CodeLine lineNumber="3934"></CodeLine>
<Link id="l03935" /><CodeLine lineNumber="3935"><span class="doxyHighlightComment">/// Apply a set of heuristics to a new candidate for PostRA scheduling.</span></CodeLine>
<Link id="l03936" /><CodeLine lineNumber="3936"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l03937" /><CodeLine lineNumber="3937"><span class="doxyHighlightComment">/// \\param Cand provides the policy and current best candidate.</span></CodeLine>
<Link id="l03938" /><CodeLine lineNumber="3938"><span class="doxyHighlightComment">/// \\param TryCand refers to the next SUnit candidate, otherwise uninitialized.</span></CodeLine>
<Link id="l03939" /><CodeLine lineNumber="3939"><span class="doxyHighlightComment">/// \\return \\c true if TryCand is better than Cand (Reason is NOT NoCand)</span></CodeLine>
<Link id="l03940" /><CodeLine lineNumber="3940" lineLink="/docs/api/classes/llvm/postgenericscheduler/#a09835bd12a7088d224f84e7899946040"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/postgenericscheduler/#a09835bd12a7088d224f84e7899946040">PostGenericScheduler::tryCandidate</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> &amp;Cand,</span></CodeLine>
<Link id="l03941" /><CodeLine lineNumber="3941"><span class="doxyHighlight">                                        <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> &amp;TryCand) &#123;</span></CodeLine>
<Link id="l03942" /><CodeLine lineNumber="3942"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Initialize the candidate if needed.</span></CodeLine>
<Link id="l03943" /><CodeLine lineNumber="3943"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#acdc733638a93dca6bb0eb290ec896271">isValid</a>()) &#123;</span></CodeLine>
<Link id="l03944" /><CodeLine lineNumber="3944"><span class="doxyHighlight">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> = <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3aa00a8e5741a604eb07320e981473b4e7">NodeOrder</a>;</span></CodeLine>
<Link id="l03945" /><CodeLine lineNumber="3945"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03946" /><CodeLine lineNumber="3946"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03947" /><CodeLine lineNumber="3947"></CodeLine>
<Link id="l03948" /><CodeLine lineNumber="3948"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Prioritize instructions that read unbuffered resources by stall cycles.</span></CodeLine>
<Link id="l03949" /><CodeLine lineNumber="3949"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.getLatencyStallCycles(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>),</span></CodeLine>
<Link id="l03950" /><CodeLine lineNumber="3950"><span class="doxyHighlight">              <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.getLatencyStallCycles(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>), TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3ab6aae8902e724a36ed16d537784777a2">Stall</a>))</span></CodeLine>
<Link id="l03951" /><CodeLine lineNumber="3951"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03952" /><CodeLine lineNumber="3952"></CodeLine>
<Link id="l03953" /><CodeLine lineNumber="3953"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Keep clustered nodes together.</span></CodeLine>
<Link id="l03954" /><CodeLine lineNumber="3954"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;CandNextClusterSU =</span></CodeLine>
<Link id="l03955" /><CodeLine lineNumber="3955"><span class="doxyHighlight">      Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> ? <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;getNextClusterSucc() : <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;getNextClusterPred();</span></CodeLine>
<Link id="l03956" /><CodeLine lineNumber="3956"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;TryCandNextClusterSU =</span></CodeLine>
<Link id="l03957" /><CodeLine lineNumber="3957"><span class="doxyHighlight">      TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> ? <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;getNextClusterSucc() : <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;getNextClusterPred();</span></CodeLine>
<Link id="l03958" /><CodeLine lineNumber="3958"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> == TryCandNextClusterSU,</span></CodeLine>
<Link id="l03959" /><CodeLine lineNumber="3959"><span class="doxyHighlight">                 Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> == CandNextClusterSU, TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a5a905614458af47ec4a5054a53d23e1b">Cluster</a>))</span></CodeLine>
<Link id="l03960" /><CodeLine lineNumber="3960"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03961" /><CodeLine lineNumber="3961"></CodeLine>
<Link id="l03962" /><CodeLine lineNumber="3962"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Avoid critical resource consumption and balance the schedule.</span></CodeLine>
<Link id="l03963" /><CodeLine lineNumber="3963"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta/#a3ffd08e01bba20c9af1ae13630ed7acd">CritResources</a>, Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta/#a3ffd08e01bba20c9af1ae13630ed7acd">CritResources</a>,</span></CodeLine>
<Link id="l03964" /><CodeLine lineNumber="3964"><span class="doxyHighlight">              TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a56637d3435d7e1953a615371cfe4d5ec">ResourceReduce</a>))</span></CodeLine>
<Link id="l03965" /><CodeLine lineNumber="3965"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03966" /><CodeLine lineNumber="3966"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta/#ab660550157a92f83f7b4f2db2d2d9304">DemandedResources</a>,</span></CodeLine>
<Link id="l03967" /><CodeLine lineNumber="3967"><span class="doxyHighlight">                 Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta/#ab660550157a92f83f7b4f2db2d2d9304">DemandedResources</a>,</span></CodeLine>
<Link id="l03968" /><CodeLine lineNumber="3968"><span class="doxyHighlight">                 TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a07409a8a5b9657af23f0a1c962f5c0c1">ResourceDemand</a>))</span></CodeLine>
<Link id="l03969" /><CodeLine lineNumber="3969"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03970" /><CodeLine lineNumber="3970"></CodeLine>
<Link id="l03971" /><CodeLine lineNumber="3971"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We only compare a subset of features when comparing nodes between</span></CodeLine>
<Link id="l03972" /><CodeLine lineNumber="3972"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Top and Bottom boundary.</span></CodeLine>
<Link id="l03973" /><CodeLine lineNumber="3973"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> == TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>) &#123;</span></CodeLine>
<Link id="l03974" /><CodeLine lineNumber="3974"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Avoid serializing long latency dependence chains.</span></CodeLine>
<Link id="l03975" /><CodeLine lineNumber="3975"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy/#acd9f1ecfaa9db2800e6fe15a385b4a6f">ReduceLatency</a> &amp;&amp;</span></CodeLine>
<Link id="l03976" /><CodeLine lineNumber="3976"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a8c9a83bf7b5f6e85f215ff07a31e0fbe">tryLatency</a>(TryCand, Cand, Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> ? <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a> : <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>))</span></CodeLine>
<Link id="l03977" /><CodeLine lineNumber="3977"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l03978" /><CodeLine lineNumber="3978"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03979" /><CodeLine lineNumber="3979"></CodeLine>
<Link id="l03980" /><CodeLine lineNumber="3980"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Fall through to original instruction order.</span></CodeLine>
<Link id="l03981" /><CodeLine lineNumber="3981"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt; Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a>) &#123;</span></CodeLine>
<Link id="l03982" /><CodeLine lineNumber="3982"><span class="doxyHighlight">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> = <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3aa00a8e5741a604eb07320e981473b4e7">NodeOrder</a>;</span></CodeLine>
<Link id="l03983" /><CodeLine lineNumber="3983"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03984" /><CodeLine lineNumber="3984"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03985" /><CodeLine lineNumber="3985"></CodeLine>
<Link id="l03986" /><CodeLine lineNumber="3986"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03987" /><CodeLine lineNumber="3987"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03988" /><CodeLine lineNumber="3988"></CodeLine>
<Link id="l03989" /><CodeLine lineNumber="3989" lineLink="/docs/api/classes/llvm/postgenericscheduler/#a5db5287f3514fcc23bb3f93d769b3e96"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/postgenericscheduler/#a5db5287f3514fcc23bb3f93d769b3e96">PostGenericScheduler::pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &amp;Zone,</span></CodeLine>
<Link id="l03990" /><CodeLine lineNumber="3990"><span class="doxyHighlight">                                             <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> &amp;Cand) &#123;</span></CodeLine>
<Link id="l03991" /><CodeLine lineNumber="3991"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/readyqueue">ReadyQueue</a> &amp;Q = Zone.<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>;</span></CodeLine>
<Link id="l03992" /><CodeLine lineNumber="3992"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU : Q) &#123;</span></CodeLine>
<Link id="l03993" /><CodeLine lineNumber="3993"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> TryCand(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>);</span></CodeLine>
<Link id="l03994" /><CodeLine lineNumber="3994"><span class="doxyHighlight">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> = SU;</span></CodeLine>
<Link id="l03995" /><CodeLine lineNumber="3995"><span class="doxyHighlight">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> = Zone.<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>();</span></CodeLine>
<Link id="l03996" /><CodeLine lineNumber="3996"><span class="doxyHighlight">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a47cc8c89db10ac27483585cd61cf4f91">initResourceDelta</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>);</span></CodeLine>
<Link id="l03997" /><CodeLine lineNumber="3997"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/postgenericscheduler/#a09835bd12a7088d224f84e7899946040">tryCandidate</a>(Cand, TryCand)) &#123;</span></CodeLine>
<Link id="l03998" /><CodeLine lineNumber="3998"><span class="doxyHighlight">      Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a294e77c4f7245940981e5e259045c7c0">setBest</a>(TryCand);</span></CodeLine>
<Link id="l03999" /><CodeLine lineNumber="3999"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(Cand));</span></CodeLine>
<Link id="l04000" /><CodeLine lineNumber="4000"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04001" /><CodeLine lineNumber="4001"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04002" /><CodeLine lineNumber="4002"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04003" /><CodeLine lineNumber="4003"></CodeLine>
<Link id="l04004" /><CodeLine lineNumber="4004"><span class="doxyHighlightComment">/// Pick the best candidate node from either the top or bottom queue.</span></CodeLine>
<Link id="l04005" /><CodeLine lineNumber="4005" lineLink="/docs/api/classes/llvm/postgenericscheduler/#ae8950b6343e504e2112df60ee464603d"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/llvm/postgenericscheduler/#ae8950b6343e504e2112df60ee464603d">PostGenericScheduler::pickNodeBidirectional</a>(</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &amp;IsTopNode) &#123;</span></CodeLine>
<Link id="l04006" /><CodeLine lineNumber="4006"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: This is similiar to GenericScheduler::pickNodeBidirectional. Factor</span></CodeLine>
<Link id="l04007" /><CodeLine lineNumber="4007"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// out common parts.</span></CodeLine>
<Link id="l04008" /><CodeLine lineNumber="4008"></CodeLine>
<Link id="l04009" /><CodeLine lineNumber="4009"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Schedule as far as possible in the direction of no choice. This is most</span></CodeLine>
<Link id="l04010" /><CodeLine lineNumber="4010"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// efficient, but also provides the best heuristics for CriticalPSets.</span></CodeLine>
<Link id="l04011" /><CodeLine lineNumber="4011"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.pickOnlyChoice()) &#123;</span></CodeLine>
<Link id="l04012" /><CodeLine lineNumber="4012"><span class="doxyHighlight">    IsTopNode = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04013" /><CodeLine lineNumber="4013"><span class="doxyHighlight">    <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a3e5ec7d7634a70f61fd64c3ef22d02f1">Only1</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04014" /><CodeLine lineNumber="4014"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> SU;</span></CodeLine>
<Link id="l04015" /><CodeLine lineNumber="4015"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04016" /><CodeLine lineNumber="4016"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.pickOnlyChoice()) &#123;</span></CodeLine>
<Link id="l04017" /><CodeLine lineNumber="4017"><span class="doxyHighlight">    IsTopNode = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04018" /><CodeLine lineNumber="4018"><span class="doxyHighlight">    <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a3e5ec7d7634a70f61fd64c3ef22d02f1">Only1</a>, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04019" /><CodeLine lineNumber="4019"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> SU;</span></CodeLine>
<Link id="l04020" /><CodeLine lineNumber="4020"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04021" /><CodeLine lineNumber="4021"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Set the bottom-up policy based on the state of the current bottom zone and</span></CodeLine>
<Link id="l04022" /><CodeLine lineNumber="4022"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the instructions outside the zone, including the top zone.</span></CodeLine>
<Link id="l04023" /><CodeLine lineNumber="4023"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> BotPolicy;</span></CodeLine>
<Link id="l04024" /><CodeLine lineNumber="4024"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a8668556014566994c07b21391762551b">setPolicy</a>(BotPolicy, </span><span class="doxyHighlightComment">/&#42;IsPostRA=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>, &amp;<a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>);</span></CodeLine>
<Link id="l04025" /><CodeLine lineNumber="4025"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Set the top-down policy based on the state of the current top zone and</span></CodeLine>
<Link id="l04026" /><CodeLine lineNumber="4026"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the instructions outside the zone, including the bottom zone.</span></CodeLine>
<Link id="l04027" /><CodeLine lineNumber="4027"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> TopPolicy;</span></CodeLine>
<Link id="l04028" /><CodeLine lineNumber="4028"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a8668556014566994c07b21391762551b">setPolicy</a>(TopPolicy, </span><span class="doxyHighlightComment">/&#42;IsPostRA=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>, &amp;<a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>);</span></CodeLine>
<Link id="l04029" /><CodeLine lineNumber="4029"></CodeLine>
<Link id="l04030" /><CodeLine lineNumber="4030"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// See if BotCand is still valid (because we previously scheduled from Top).</span></CodeLine>
<Link id="l04031" /><CodeLine lineNumber="4031"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Picking from Bot:\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04032" /><CodeLine lineNumber="4032"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.isValid() || <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.SU-&gt;isScheduled ||</span></CodeLine>
<Link id="l04033" /><CodeLine lineNumber="4033"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.Policy != BotPolicy) &#123;</span></CodeLine>
<Link id="l04034" /><CodeLine lineNumber="4034"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.reset(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a>());</span></CodeLine>
<Link id="l04035" /><CodeLine lineNumber="4035"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a5db5287f3514fcc23bb3f93d769b3e96">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>, <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>);</span></CodeLine>
<Link id="l04036" /><CodeLine lineNumber="4036"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.Reason != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;failed to find the first candidate&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04037" /><CodeLine lineNumber="4037"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04038" /><CodeLine lineNumber="4038"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>));</span></CodeLine>
<Link id="l04039" /><CodeLine lineNumber="4039"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l04040" /><CodeLine lineNumber="4040"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>) &#123;</span></CodeLine>
<Link id="l04041" /><CodeLine lineNumber="4041"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> TCand;</span></CodeLine>
<Link id="l04042" /><CodeLine lineNumber="4042"><span class="doxyHighlight">      TCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a361fa10c095c303e093021c6a1d04e75">reset</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a>());</span></CodeLine>
<Link id="l04043" /><CodeLine lineNumber="4043"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/postgenericscheduler/#a5db5287f3514fcc23bb3f93d769b3e96">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>, <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>);</span></CodeLine>
<Link id="l04044" /><CodeLine lineNumber="4044"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> == <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.SU &amp;&amp;</span></CodeLine>
<Link id="l04045" /><CodeLine lineNumber="4045"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;Last pick result should correspond to re-picking right now&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04046" /><CodeLine lineNumber="4046"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04047" /><CodeLine lineNumber="4047"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l04048" /><CodeLine lineNumber="4048"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04049" /><CodeLine lineNumber="4049"></CodeLine>
<Link id="l04050" /><CodeLine lineNumber="4050"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check if the top Q has a better candidate.</span></CodeLine>
<Link id="l04051" /><CodeLine lineNumber="4051"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Picking from Top:\\n&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04052" /><CodeLine lineNumber="4052"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.isValid() || <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.SU-&gt;isScheduled ||</span></CodeLine>
<Link id="l04053" /><CodeLine lineNumber="4053"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.Policy != TopPolicy) &#123;</span></CodeLine>
<Link id="l04054" /><CodeLine lineNumber="4054"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.reset(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a>());</span></CodeLine>
<Link id="l04055" /><CodeLine lineNumber="4055"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a5db5287f3514fcc23bb3f93d769b3e96">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>, <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>);</span></CodeLine>
<Link id="l04056" /><CodeLine lineNumber="4056"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.Reason != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;failed to find the first candidate&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04057" /><CodeLine lineNumber="4057"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04058" /><CodeLine lineNumber="4058"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>));</span></CodeLine>
<Link id="l04059" /><CodeLine lineNumber="4059"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l04060" /><CodeLine lineNumber="4060"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>) &#123;</span></CodeLine>
<Link id="l04061" /><CodeLine lineNumber="4061"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> TCand;</span></CodeLine>
<Link id="l04062" /><CodeLine lineNumber="4062"><span class="doxyHighlight">      TCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a361fa10c095c303e093021c6a1d04e75">reset</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a>());</span></CodeLine>
<Link id="l04063" /><CodeLine lineNumber="4063"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/postgenericscheduler/#a5db5287f3514fcc23bb3f93d769b3e96">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>, <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>);</span></CodeLine>
<Link id="l04064" /><CodeLine lineNumber="4064"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> == <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.SU &amp;&amp;</span></CodeLine>
<Link id="l04065" /><CodeLine lineNumber="4065"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;Last pick result should correspond to re-picking right now&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04066" /><CodeLine lineNumber="4066"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04067" /><CodeLine lineNumber="4067"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l04068" /><CodeLine lineNumber="4068"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04069" /><CodeLine lineNumber="4069"></CodeLine>
<Link id="l04070" /><CodeLine lineNumber="4070"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Pick best from BotCand and TopCand.</span></CodeLine>
<Link id="l04071" /><CodeLine lineNumber="4071"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.isValid());</span></CodeLine>
<Link id="l04072" /><CodeLine lineNumber="4072"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.isValid());</span></CodeLine>
<Link id="l04073" /><CodeLine lineNumber="4073"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> Cand = <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>;</span></CodeLine>
<Link id="l04074" /><CodeLine lineNumber="4074"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.Reason = <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</span></CodeLine>
<Link id="l04075" /><CodeLine lineNumber="4075"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/postgenericscheduler/#a09835bd12a7088d224f84e7899946040">tryCandidate</a>(Cand, <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>)) &#123;</span></CodeLine>
<Link id="l04076" /><CodeLine lineNumber="4076"><span class="doxyHighlight">    Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a294e77c4f7245940981e5e259045c7c0">setBest</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>);</span></CodeLine>
<Link id="l04077" /><CodeLine lineNumber="4077"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(Cand));</span></CodeLine>
<Link id="l04078" /><CodeLine lineNumber="4078"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04079" /><CodeLine lineNumber="4079"></CodeLine>
<Link id="l04080" /><CodeLine lineNumber="4080"><span class="doxyHighlight">  IsTopNode = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>;</span></CodeLine>
<Link id="l04081" /><CodeLine lineNumber="4081"><span class="doxyHighlight">  <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(Cand);</span></CodeLine>
<Link id="l04082" /><CodeLine lineNumber="4082"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>;</span></CodeLine>
<Link id="l04083" /><CodeLine lineNumber="4083"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04084" /><CodeLine lineNumber="4084"></CodeLine>
<Link id="l04085" /><CodeLine lineNumber="4085"><span class="doxyHighlightComment">/// Pick the next node to schedule.</span></CodeLine>
<Link id="l04086" /><CodeLine lineNumber="4086" lineLink="/docs/api/classes/llvm/postgenericscheduler/#af8a37b0efa51cfd3f6b4729e3298de7f"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/llvm/postgenericscheduler/#af8a37b0efa51cfd3f6b4729e3298de7f">PostGenericScheduler::pickNode</a>(</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &amp;IsTopNode) &#123;</span></CodeLine>
<Link id="l04087" /><CodeLine lineNumber="4087"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;top() == <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;bottom()) &#123;</span></CodeLine>
<Link id="l04088" /><CodeLine lineNumber="4088"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.Available.empty() &amp;&amp; <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.Pending.empty() &amp;&amp;</span></CodeLine>
<Link id="l04089" /><CodeLine lineNumber="4089"><span class="doxyHighlight">           <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.Available.empty() &amp;&amp; <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.Pending.empty() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;ReadyQ garbage&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04090" /><CodeLine lineNumber="4090"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04091" /><CodeLine lineNumber="4091"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04092" /><CodeLine lineNumber="4092"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU;</span></CodeLine>
<Link id="l04093" /><CodeLine lineNumber="4093"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">do</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04094" /><CodeLine lineNumber="4094"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp) &#123;</span></CodeLine>
<Link id="l04095" /><CodeLine lineNumber="4095"><span class="doxyHighlight">      SU = <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.pickOnlyChoice();</span></CodeLine>
<Link id="l04096" /><CodeLine lineNumber="4096"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU) &#123;</span></CodeLine>
<Link id="l04097" /><CodeLine lineNumber="4097"><span class="doxyHighlight">        <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a3e5ec7d7634a70f61fd64c3ef22d02f1">Only1</a>, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04098" /><CodeLine lineNumber="4098"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04099" /><CodeLine lineNumber="4099"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> NoPolicy;</span></CodeLine>
<Link id="l04100" /><CodeLine lineNumber="4100"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.reset(NoPolicy);</span></CodeLine>
<Link id="l04101" /><CodeLine lineNumber="4101"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Set the bottom-up policy based on the state of the current bottom</span></CodeLine>
<Link id="l04102" /><CodeLine lineNumber="4102"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// zone and the instructions outside the zone, including the top zone.</span></CodeLine>
<Link id="l04103" /><CodeLine lineNumber="4103"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/genericschedulerbase/#a8668556014566994c07b21391762551b">setPolicy</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.Policy, </span><span class="doxyHighlightComment">/&#42;IsPostRA=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04104" /><CodeLine lineNumber="4104"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/postgenericscheduler/#a5db5287f3514fcc23bb3f93d769b3e96">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>, <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>);</span></CodeLine>
<Link id="l04105" /><CodeLine lineNumber="4105"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.Reason != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;failed to find a candidate&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04106" /><CodeLine lineNumber="4106"><span class="doxyHighlight">        <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>);</span></CodeLine>
<Link id="l04107" /><CodeLine lineNumber="4107"><span class="doxyHighlight">        SU = <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.SU;</span></CodeLine>
<Link id="l04108" /><CodeLine lineNumber="4108"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l04109" /><CodeLine lineNumber="4109"><span class="doxyHighlight">      IsTopNode = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04110" /><CodeLine lineNumber="4110"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown) &#123;</span></CodeLine>
<Link id="l04111" /><CodeLine lineNumber="4111"><span class="doxyHighlight">      SU = <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.pickOnlyChoice();</span></CodeLine>
<Link id="l04112" /><CodeLine lineNumber="4112"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU) &#123;</span></CodeLine>
<Link id="l04113" /><CodeLine lineNumber="4113"><span class="doxyHighlight">        <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a3e5ec7d7634a70f61fd64c3ef22d02f1">Only1</a>, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04114" /><CodeLine lineNumber="4114"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04115" /><CodeLine lineNumber="4115"><span class="doxyHighlight">        <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> NoPolicy;</span></CodeLine>
<Link id="l04116" /><CodeLine lineNumber="4116"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.reset(NoPolicy);</span></CodeLine>
<Link id="l04117" /><CodeLine lineNumber="4117"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Set the top-down policy based on the state of the current top zone</span></CodeLine>
<Link id="l04118" /><CodeLine lineNumber="4118"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// and the instructions outside the zone, including the bottom zone.</span></CodeLine>
<Link id="l04119" /><CodeLine lineNumber="4119"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/genericschedulerbase/#a8668556014566994c07b21391762551b">setPolicy</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.Policy, </span><span class="doxyHighlightComment">/&#42;IsPostRA=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>, </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04120" /><CodeLine lineNumber="4120"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/postgenericscheduler/#a5db5287f3514fcc23bb3f93d769b3e96">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>, <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>);</span></CodeLine>
<Link id="l04121" /><CodeLine lineNumber="4121"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.Reason != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;failed to find a candidate&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04122" /><CodeLine lineNumber="4122"><span class="doxyHighlight">        <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>);</span></CodeLine>
<Link id="l04123" /><CodeLine lineNumber="4123"><span class="doxyHighlight">        SU = <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.SU;</span></CodeLine>
<Link id="l04124" /><CodeLine lineNumber="4124"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l04125" /><CodeLine lineNumber="4125"><span class="doxyHighlight">      IsTopNode = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04126" /><CodeLine lineNumber="4126"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04127" /><CodeLine lineNumber="4127"><span class="doxyHighlight">      SU = <a href="/docs/api/classes/llvm/postgenericscheduler/#ae8950b6343e504e2112df60ee464603d">pickNodeBidirectional</a>(IsTopNode);</span></CodeLine>
<Link id="l04128" /><CodeLine lineNumber="4128"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04129" /><CodeLine lineNumber="4129"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a>);</span></CodeLine>
<Link id="l04130" /><CodeLine lineNumber="4130"></CodeLine>
<Link id="l04131" /><CodeLine lineNumber="4131"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae0b8da4dfde85d4ddc32359ca52dc493">isTopReady</a>())</span></CodeLine>
<Link id="l04132" /><CodeLine lineNumber="4132"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.removeReady(SU);</span></CodeLine>
<Link id="l04133" /><CodeLine lineNumber="4133"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ac198a5fb130b4c09836ba20e01b4290d">isBottomReady</a>())</span></CodeLine>
<Link id="l04134" /><CodeLine lineNumber="4134"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.removeReady(SU);</span></CodeLine>
<Link id="l04135" /><CodeLine lineNumber="4135"></CodeLine>
<Link id="l04136" /><CodeLine lineNumber="4136"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Scheduling SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) &quot;</span></CodeLine>
<Link id="l04137" /><CodeLine lineNumber="4137"><span class="doxyHighlight">                    &lt;&lt; &#42;SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>());</span></CodeLine>
<Link id="l04138" /><CodeLine lineNumber="4138"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> SU;</span></CodeLine>
<Link id="l04139" /><CodeLine lineNumber="4139"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04140" /><CodeLine lineNumber="4140"></CodeLine>
<Link id="l04141" /><CodeLine lineNumber="4141"><span class="doxyHighlightComment">/// Called after ScheduleDAGMI has scheduled an instruction and updated</span></CodeLine>
<Link id="l04142" /><CodeLine lineNumber="4142"><span class="doxyHighlightComment">/// scheduled/remaining flags in the DAG nodes.</span></CodeLine>
<Link id="l04143" /><CodeLine lineNumber="4143" lineLink="/docs/api/classes/llvm/postgenericscheduler/#a19c13266ab002ad2ce608573c4d2c98e"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/postgenericscheduler/#a19c13266ab002ad2ce608573c4d2c98e">PostGenericScheduler::schedNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsTopNode) &#123;</span></CodeLine>
<Link id="l04144" /><CodeLine lineNumber="4144"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTopNode) &#123;</span></CodeLine>
<Link id="l04145" /><CodeLine lineNumber="4145"><span class="doxyHighlight">    SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> = std::max(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a>, <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.getCurrCycle());</span></CodeLine>
<Link id="l04146" /><CodeLine lineNumber="4146"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.bumpNode(SU);</span></CodeLine>
<Link id="l04147" /><CodeLine lineNumber="4147"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04148" /><CodeLine lineNumber="4148"><span class="doxyHighlight">    SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> = std::max(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>, <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.getCurrCycle());</span></CodeLine>
<Link id="l04149" /><CodeLine lineNumber="4149"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.bumpNode(SU);</span></CodeLine>
<Link id="l04150" /><CodeLine lineNumber="4150"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04151" /><CodeLine lineNumber="4151"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04152" /><CodeLine lineNumber="4152"></CodeLine>
<Link id="l04153" /><CodeLine lineNumber="4153" lineLink="/docs/api/namespaces/llvm/#aa2f0c2f2a077d67dc0bcb24bc31e3b05"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;<a href="/docs/api/namespaces/llvm/#aa2f0c2f2a077d67dc0bcb24bc31e3b05">llvm::createGenericSchedPostRA</a>(<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</span></CodeLine>
<Link id="l04154" /><CodeLine lineNumber="4154"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;DAG =</span></CodeLine>
<Link id="l04155" /><CodeLine lineNumber="4155"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, std::make&#95;unique&lt;PostGenericScheduler&gt;(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>),</span></CodeLine>
<Link id="l04156" /><CodeLine lineNumber="4156"><span class="doxyHighlight">                        </span><span class="doxyHighlightComment">/&#42;RemoveKillFlags=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04157" /><CodeLine lineNumber="4157"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetsubtargetinfo">TargetSubtargetInfo</a> &amp;STI = <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;MF-&gt;getSubtarget();</span></CodeLine>
<Link id="l04158" /><CodeLine lineNumber="4158"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Add MacroFusion mutation if fusions are not empty.</span></CodeLine>
<Link id="l04159" /><CodeLine lineNumber="4159"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;MacroFusions = STI.<a href="/docs/api/classes/llvm/targetsubtargetinfo/#a2b74e2ebb235e247397d5d87df776e66">getMacroFusions</a>();</span></CodeLine>
<Link id="l04160" /><CodeLine lineNumber="4160"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!MacroFusions.empty())</span></CodeLine>
<Link id="l04161" /><CodeLine lineNumber="4161"><span class="doxyHighlight">    DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a2002164aea6fabe20598e0526746b1fa">addMutation</a>(<a href="/docs/api/namespaces/llvm/#a1b646d2ebeba4a7119c3d4fec4d137dc">createMacroFusionDAGMutation</a>(MacroFusions));</span></CodeLine>
<Link id="l04162" /><CodeLine lineNumber="4162"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> DAG;</span></CodeLine>
<Link id="l04163" /><CodeLine lineNumber="4163"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04164" /><CodeLine lineNumber="4164"></CodeLine>
<Link id="l04165" /><CodeLine lineNumber="4165"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l04166" /><CodeLine lineNumber="4166"><span class="doxyHighlightComment">// ILP Scheduler. Currently for experimental analysis of heuristics.</span></CodeLine>
<Link id="l04167" /><CodeLine lineNumber="4167"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l04168" /><CodeLine lineNumber="4168"></CodeLine>
<Link id="l04169" /><CodeLine lineNumber="4169"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04170" /><CodeLine lineNumber="4170"></CodeLine>
<Link id="l04171" /><CodeLine lineNumber="4171"><span class="doxyHighlightComment">/// Order nodes by the ILP metric.</span></CodeLine>
<Link id="l04172" /><CodeLine lineNumber="4172" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#abf160a684d52727348fa1a8a64a68799">ILPOrder</a> &#123;</span></CodeLine>
<Link id="l04173" /><CodeLine lineNumber="4173" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheddfsresult">SchedDFSResult</a> &#42;<a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04174" /><CodeLine lineNumber="4174" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a066bf2acd636df6d9c364efc9020e9b1"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/bitvector">BitVector</a> &#42;<a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a066bf2acd636df6d9c364efc9020e9b1">ScheduledTrees</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04175" /><CodeLine lineNumber="4175" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#ad8a508685c4207a0b1b88ad607d06efd"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#ad8a508685c4207a0b1b88ad607d06efd">MaximizeILP</a>;</span></CodeLine>
<Link id="l04176" /><CodeLine lineNumber="4176"></CodeLine>
<Link id="l04177" /><CodeLine lineNumber="4177" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#abf160a684d52727348fa1a8a64a68799"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#abf160a684d52727348fa1a8a64a68799">ILPOrder</a>(</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> MaxILP) : <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#ad8a508685c4207a0b1b88ad607d06efd">MaximizeILP</a>(MaxILP) &#123;&#125;</span></CodeLine>
<Link id="l04178" /><CodeLine lineNumber="4178"></CodeLine>
<Link id="l04179" /><CodeLine lineNumber="4179"><span class="doxyHighlightComment">  /// Apply a less-than relation on node priority.</span></CodeLine>
<Link id="l04180" /><CodeLine lineNumber="4180"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l04181" /><CodeLine lineNumber="4181"><span class="doxyHighlightComment">  /// (Return true if A comes after B in the Q.)</span></CodeLine>
<Link id="l04182" /><CodeLine lineNumber="4182" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a9cef0fc1ea3d0a80f8e881d1a60f0a04"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a9cef0fc1ea3d0a80f8e881d1a60f0a04">operator()</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04183" /><CodeLine lineNumber="4183"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SchedTreeA = <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getSubtreeID(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>);</span></CodeLine>
<Link id="l04184" /><CodeLine lineNumber="4184"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SchedTreeB = <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getSubtreeID(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l04185" /><CodeLine lineNumber="4185"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SchedTreeA != SchedTreeB) &#123;</span></CodeLine>
<Link id="l04186" /><CodeLine lineNumber="4186"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Unscheduled trees have lower priority.</span></CodeLine>
<Link id="l04187" /><CodeLine lineNumber="4187"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a066bf2acd636df6d9c364efc9020e9b1">ScheduledTrees</a>-&gt;test(SchedTreeA) != <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a066bf2acd636df6d9c364efc9020e9b1">ScheduledTrees</a>-&gt;test(SchedTreeB))</span></CodeLine>
<Link id="l04188" /><CodeLine lineNumber="4188"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a066bf2acd636df6d9c364efc9020e9b1">ScheduledTrees</a>-&gt;test(SchedTreeB);</span></CodeLine>
<Link id="l04189" /><CodeLine lineNumber="4189"></CodeLine>
<Link id="l04190" /><CodeLine lineNumber="4190"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Trees with shallower connections have lower priority.</span></CodeLine>
<Link id="l04191" /><CodeLine lineNumber="4191"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getSubtreeLevel(SchedTreeA)</span></CodeLine>
<Link id="l04192" /><CodeLine lineNumber="4192"><span class="doxyHighlight">          != <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getSubtreeLevel(SchedTreeB)) &#123;</span></CodeLine>
<Link id="l04193" /><CodeLine lineNumber="4193"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getSubtreeLevel(SchedTreeA)</span></CodeLine>
<Link id="l04194" /><CodeLine lineNumber="4194"><span class="doxyHighlight">          &lt; <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getSubtreeLevel(SchedTreeB);</span></CodeLine>
<Link id="l04195" /><CodeLine lineNumber="4195"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l04196" /><CodeLine lineNumber="4196"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04197" /><CodeLine lineNumber="4197"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#ad8a508685c4207a0b1b88ad607d06efd">MaximizeILP</a>)</span></CodeLine>
<Link id="l04198" /><CodeLine lineNumber="4198"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getILP(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>) &lt; <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getILP(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l04199" /><CodeLine lineNumber="4199"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l04200" /><CodeLine lineNumber="4200"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getILP(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>) &gt; <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getILP(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l04201" /><CodeLine lineNumber="4201"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04202" /><CodeLine lineNumber="4202"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l04203" /><CodeLine lineNumber="4203"></CodeLine>
<Link id="l04204" /><CodeLine lineNumber="4204"><span class="doxyHighlightComment">/// Schedule based on the ILP metric.</span></CodeLine>
<Link id="l04205" /><CodeLine lineNumber="4205" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a64f45a80a15c38a77d27f3264e954fd2">ILPScheduler</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineschedstrategy">MachineSchedStrategy</a> &#123;</span></CodeLine>
<Link id="l04206" /><CodeLine lineNumber="4206"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a> &#42;DAG = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04207" /><CodeLine lineNumber="4207"><span class="doxyHighlight">  <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder">ILPOrder</a> Cmp;</span></CodeLine>
<Link id="l04208" /><CodeLine lineNumber="4208"></CodeLine>
<Link id="l04209" /><CodeLine lineNumber="4209"><span class="doxyHighlight">  std::vector&lt;SUnit&#42;&gt; ReadyQ;</span></CodeLine>
<Link id="l04210" /><CodeLine lineNumber="4210"></CodeLine>
<Link id="l04211" /><CodeLine lineNumber="4211"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l04212" /><CodeLine lineNumber="4212" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a64f45a80a15c38a77d27f3264e954fd2"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a64f45a80a15c38a77d27f3264e954fd2">ILPScheduler</a>(</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> MaximizeILP) : Cmp(MaximizeILP) &#123;&#125;</span></CodeLine>
<Link id="l04213" /><CodeLine lineNumber="4213"></CodeLine>
<Link id="l04214" /><CodeLine lineNumber="4214" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a6fc742f69804969334c5298829787a0d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a6fc742f69804969334c5298829787a0d">initialize</a>(<a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;dag)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04215" /><CodeLine lineNumber="4215"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(dag-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a78c0f3feb8a81ca338f843494cff564e">hasVRegLiveness</a>() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;ILPScheduler needs vreg liveness&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04216" /><CodeLine lineNumber="4216"><span class="doxyHighlight">    DAG = </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>&#42;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(dag);</span></CodeLine>
<Link id="l04217" /><CodeLine lineNumber="4217"><span class="doxyHighlight">    DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmilive/#a21c7721fcb12ebb55872b86d33e61e27">computeDFSResult</a>();</span></CodeLine>
<Link id="l04218" /><CodeLine lineNumber="4218"><span class="doxyHighlight">    Cmp.DFSResult = DAG-&gt;getDFSResult();</span></CodeLine>
<Link id="l04219" /><CodeLine lineNumber="4219"><span class="doxyHighlight">    Cmp.ScheduledTrees = &amp;DAG-&gt;getScheduledTrees();</span></CodeLine>
<Link id="l04220" /><CodeLine lineNumber="4220"><span class="doxyHighlight">    ReadyQ.clear();</span></CodeLine>
<Link id="l04221" /><CodeLine lineNumber="4221"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04222" /><CodeLine lineNumber="4222"></CodeLine>
<Link id="l04223" /><CodeLine lineNumber="4223" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a14a4581dac109e6b41ed6d99b05e523d"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a14a4581dac109e6b41ed6d99b05e523d">registerRoots</a>()</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04224" /><CodeLine lineNumber="4224"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Restore the heap in ReadyQ with the updated DFS results.</span></CodeLine>
<Link id="l04225" /><CodeLine lineNumber="4225"><span class="doxyHighlight">    std::make&#95;heap(ReadyQ.begin(), ReadyQ.end(), Cmp);</span></CodeLine>
<Link id="l04226" /><CodeLine lineNumber="4226"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04227" /><CodeLine lineNumber="4227"></CodeLine>
<Link id="l04228" /><CodeLine lineNumber="4228"><span class="doxyHighlightComment">  /// Implement MachineSchedStrategy interface.</span></CodeLine>
<Link id="l04229" /><CodeLine lineNumber="4229"><span class="doxyHighlightComment">  /// -----------------------------------------</span></CodeLine>
<Link id="l04230" /><CodeLine lineNumber="4230"></CodeLine>
<Link id="l04231" /><CodeLine lineNumber="4231"><span class="doxyHighlightComment">  /// Callback to select the highest priority node from the ready Q.</span></CodeLine>
<Link id="l04232" /><CodeLine lineNumber="4232" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a636abcad4364da7508f5fdce3bbf40e7"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a636abcad4364da7508f5fdce3bbf40e7">pickNode</a>(</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &amp;IsTopNode)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04233" /><CodeLine lineNumber="4233"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ReadyQ.empty()) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04234" /><CodeLine lineNumber="4234"><span class="doxyHighlight">    std::pop&#95;heap(ReadyQ.begin(), ReadyQ.end(), Cmp);</span></CodeLine>
<Link id="l04235" /><CodeLine lineNumber="4235"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = ReadyQ.back();</span></CodeLine>
<Link id="l04236" /><CodeLine lineNumber="4236"><span class="doxyHighlight">    ReadyQ.pop&#95;back();</span></CodeLine>
<Link id="l04237" /><CodeLine lineNumber="4237"><span class="doxyHighlight">    IsTopNode = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04238" /><CodeLine lineNumber="4238"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Pick node &quot;</span></CodeLine>
<Link id="l04239" /><CodeLine lineNumber="4239"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;SU(&quot;</span><span class="doxyHighlight"> &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;) &quot;</span></CodeLine>
<Link id="l04240" /><CodeLine lineNumber="4240"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; ILP: &quot;</span><span class="doxyHighlight"> &lt;&lt; DAG-&gt;getDFSResult()-&gt;getILP(SU)</span></CodeLine>
<Link id="l04241" /><CodeLine lineNumber="4241"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; Tree: &quot;</span><span class="doxyHighlight"> &lt;&lt; DAG-&gt;getDFSResult()-&gt;getSubtreeID(SU)</span></CodeLine>
<Link id="l04242" /><CodeLine lineNumber="4242"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; @&quot;</span></CodeLine>
<Link id="l04243" /><CodeLine lineNumber="4243"><span class="doxyHighlight">                      &lt;&lt; DAG-&gt;getDFSResult()-&gt;getSubtreeLevel(</span></CodeLine>
<Link id="l04244" /><CodeLine lineNumber="4244"><span class="doxyHighlight">                             DAG-&gt;getDFSResult()-&gt;getSubtreeID(SU))</span></CodeLine>
<Link id="l04245" /><CodeLine lineNumber="4245"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightCharLiteral">&#39;\\n&#39;</span></CodeLine>
<Link id="l04246" /><CodeLine lineNumber="4246"><span class="doxyHighlight">                      &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;Scheduling &quot;</span><span class="doxyHighlight"> &lt;&lt; &#42;SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>());</span></CodeLine>
<Link id="l04247" /><CodeLine lineNumber="4247"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> SU;</span></CodeLine>
<Link id="l04248" /><CodeLine lineNumber="4248"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04249" /><CodeLine lineNumber="4249"></CodeLine>
<Link id="l04250" /><CodeLine lineNumber="4250"><span class="doxyHighlightComment">  /// Scheduler callback to notify that a new subtree is scheduled.</span></CodeLine>
<Link id="l04251" /><CodeLine lineNumber="4251" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a7ea668fb4421816f15292b19b1e20398"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a7ea668fb4421816f15292b19b1e20398">scheduleTree</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SubtreeID)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04252" /><CodeLine lineNumber="4252"><span class="doxyHighlight">    std::make&#95;heap(ReadyQ.begin(), ReadyQ.end(), Cmp);</span></CodeLine>
<Link id="l04253" /><CodeLine lineNumber="4253"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04254" /><CodeLine lineNumber="4254"></CodeLine>
<Link id="l04255" /><CodeLine lineNumber="4255"><span class="doxyHighlightComment">  /// Callback after a node is scheduled. Mark a newly scheduled tree, notify</span></CodeLine>
<Link id="l04256" /><CodeLine lineNumber="4256"><span class="doxyHighlightComment">  /// DFSResults, and resort the priority Q.</span></CodeLine>
<Link id="l04257" /><CodeLine lineNumber="4257" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a34e4821f128212dcf78f0d39981220a1"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a34e4821f128212dcf78f0d39981220a1">schedNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsTopNode)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04258" /><CodeLine lineNumber="4258"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!IsTopNode &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;SchedDFSResult needs bottom-up&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04259" /><CodeLine lineNumber="4259"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04260" /><CodeLine lineNumber="4260"></CodeLine>
<Link id="l04261" /><CodeLine lineNumber="4261" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#aca5d5809b6f8c33edd2000ded2be3911"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#aca5d5809b6f8c33edd2000ded2be3911">releaseTopNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightComment">/&#42;only called for top roots&#42;/</span><span class="doxyHighlight"> &#125;</span></CodeLine>
<Link id="l04262" /><CodeLine lineNumber="4262"></CodeLine>
<Link id="l04263" /><CodeLine lineNumber="4263" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#aa37a1b64ef4694b941ddf3a435999006"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#aa37a1b64ef4694b941ddf3a435999006">releaseBottomNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04264" /><CodeLine lineNumber="4264"><span class="doxyHighlight">    ReadyQ.push&#95;back(SU);</span></CodeLine>
<Link id="l04265" /><CodeLine lineNumber="4265"><span class="doxyHighlight">    std::push&#95;heap(ReadyQ.begin(), ReadyQ.end(), Cmp);</span></CodeLine>
<Link id="l04266" /><CodeLine lineNumber="4266"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04267" /><CodeLine lineNumber="4267"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l04268" /><CodeLine lineNumber="4268"></CodeLine>
<Link id="l04269" /><CodeLine lineNumber="4269"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end anonymous namespace</span></CodeLine>
<Link id="l04270" /><CodeLine lineNumber="4270"></CodeLine>
<Link id="l04271" /><CodeLine lineNumber="4271" lineLink="#aea7e1660e87235378f5cc48ccb4ae84d"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="#aea7e1660e87235378f5cc48ccb4ae84d">createILPMaxScheduler</a>(<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</span></CodeLine>
<Link id="l04272" /><CodeLine lineNumber="4272"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, std::make&#95;unique&lt;ILPScheduler&gt;(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l04273" /><CodeLine lineNumber="4273"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04274" /><CodeLine lineNumber="4274" lineLink="#af4d9ddf767f3d44d93ad376a247dabe4"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="#af4d9ddf767f3d44d93ad376a247dabe4">createILPMinScheduler</a>(<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</span></CodeLine>
<Link id="l04275" /><CodeLine lineNumber="4275"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, std::make&#95;unique&lt;ILPScheduler&gt;(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l04276" /><CodeLine lineNumber="4276"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04277" /><CodeLine lineNumber="4277"></CodeLine>
<Link id="l04278" /><CodeLine lineNumber="4278" lineLink="#a0c63cc9aec9e7f21b6c9fc9ad6abf545"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a> <a href="#a0c63cc9aec9e7f21b6c9fc9ad6abf545">ILPMaxRegistry</a>(</span></CodeLine>
<Link id="l04279" /><CodeLine lineNumber="4279"><span class="doxyHighlight">  </span><span class="doxyHighlightStringLiteral">&quot;ilpmax&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;Schedule bottom-up for max ILP&quot;</span><span class="doxyHighlight">, <a href="#aea7e1660e87235378f5cc48ccb4ae84d">createILPMaxScheduler</a>);</span></CodeLine>
<Link id="l04280" /><CodeLine lineNumber="4280" lineLink="#afcd0814798a2d0868cec352f25fc932c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a> <a href="#afcd0814798a2d0868cec352f25fc932c">ILPMinRegistry</a>(</span></CodeLine>
<Link id="l04281" /><CodeLine lineNumber="4281"><span class="doxyHighlight">  </span><span class="doxyHighlightStringLiteral">&quot;ilpmin&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;Schedule bottom-up for min ILP&quot;</span><span class="doxyHighlight">, <a href="#af4d9ddf767f3d44d93ad376a247dabe4">createILPMinScheduler</a>);</span></CodeLine>
<Link id="l04282" /><CodeLine lineNumber="4282"></CodeLine>
<Link id="l04283" /><CodeLine lineNumber="4283"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l04284" /><CodeLine lineNumber="4284"><span class="doxyHighlightComment">// Machine Instruction Shuffler for Correctness Testing</span></CodeLine>
<Link id="l04285" /><CodeLine lineNumber="4285"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l04286" /><CodeLine lineNumber="4286"></CodeLine>
<Link id="l04287" /><CodeLine lineNumber="4287"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l04288" /><CodeLine lineNumber="4288"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04289" /><CodeLine lineNumber="4289"></CodeLine>
<Link id="l04290" /><CodeLine lineNumber="4290"><span class="doxyHighlightComment">/// Apply a less-than relation on the node order, which corresponds to the</span></CodeLine>
<Link id="l04291" /><CodeLine lineNumber="4291"><span class="doxyHighlightComment">/// instruction order prior to scheduling. IsReverse implements greater-than.</span></CodeLine>
<Link id="l04292" /><CodeLine lineNumber="4292"><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight">&lt;</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsReverse&gt;</span></CodeLine>
<Link id="l04293" /><CodeLine lineNumber="4293" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/sunitorder"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/sunitorder">SUnitOrder</a> &#123;</span></CodeLine>
<Link id="l04294" /><CodeLine lineNumber="4294" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/sunitorder/#a13579df131de5c8add4a77d07a86c11a"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/sunitorder/#a13579df131de5c8add4a77d07a86c11a">operator()</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04295" /><CodeLine lineNumber="4295"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsReverse)</span></CodeLine>
<Link id="l04296" /><CodeLine lineNumber="4296"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;NodeNum &gt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>-&gt;NodeNum;</span></CodeLine>
<Link id="l04297" /><CodeLine lineNumber="4297"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l04298" /><CodeLine lineNumber="4298"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;NodeNum &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>-&gt;NodeNum;</span></CodeLine>
<Link id="l04299" /><CodeLine lineNumber="4299"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04300" /><CodeLine lineNumber="4300"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l04301" /><CodeLine lineNumber="4301"></CodeLine>
<Link id="l04302" /><CodeLine lineNumber="4302"><span class="doxyHighlightComment">/// Reorder instructions as much as possible.</span></CodeLine>
<Link id="l04303" /><CodeLine lineNumber="4303" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#a1c4502a5bcd3cf03d4ae0f6f5c1fd833">InstructionShuffler</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineschedstrategy">MachineSchedStrategy</a> &#123;</span></CodeLine>
<Link id="l04304" /><CodeLine lineNumber="4304"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsAlternating;</span></CodeLine>
<Link id="l04305" /><CodeLine lineNumber="4305"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsTopDown;</span></CodeLine>
<Link id="l04306" /><CodeLine lineNumber="4306"></CodeLine>
<Link id="l04307" /><CodeLine lineNumber="4307"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Using a less-than relation (SUnitOrder&lt;false&gt;) for the TopQ priority</span></CodeLine>
<Link id="l04308" /><CodeLine lineNumber="4308"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// gives nodes with a higher number higher priority causing the latest</span></CodeLine>
<Link id="l04309" /><CodeLine lineNumber="4309"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// instructions to be scheduled first.</span></CodeLine>
<Link id="l04310" /><CodeLine lineNumber="4310"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/priorityqueue">PriorityQueue&lt;SUnit&#42;, std::vector&lt;SUnit&#42;&gt;</a>, <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/sunitorder">SUnitOrder&lt;false&gt;</a>&gt;</span></CodeLine>
<Link id="l04311" /><CodeLine lineNumber="4311"><span class="doxyHighlight">    TopQ;</span></CodeLine>
<Link id="l04312" /><CodeLine lineNumber="4312"></CodeLine>
<Link id="l04313" /><CodeLine lineNumber="4313"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// When scheduling bottom-up, use greater-than as the queue priority.</span></CodeLine>
<Link id="l04314" /><CodeLine lineNumber="4314"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/priorityqueue">PriorityQueue&lt;SUnit&#42;, std::vector&lt;SUnit&#42;&gt;</a>, <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/sunitorder">SUnitOrder&lt;true&gt;</a>&gt;</span></CodeLine>
<Link id="l04315" /><CodeLine lineNumber="4315"><span class="doxyHighlight">    BottomQ;</span></CodeLine>
<Link id="l04316" /><CodeLine lineNumber="4316"></CodeLine>
<Link id="l04317" /><CodeLine lineNumber="4317"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l04318" /><CodeLine lineNumber="4318" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#a1c4502a5bcd3cf03d4ae0f6f5c1fd833"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#a1c4502a5bcd3cf03d4ae0f6f5c1fd833">InstructionShuffler</a>(</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> alternate, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> topdown)</span></CodeLine>
<Link id="l04319" /><CodeLine lineNumber="4319"><span class="doxyHighlight">    : IsAlternating(alternate), IsTopDown(topdown) &#123;&#125;</span></CodeLine>
<Link id="l04320" /><CodeLine lineNumber="4320"></CodeLine>
<Link id="l04321" /><CodeLine lineNumber="4321" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#a0c0887c26b8a145b851726fb71bc7424"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#a0c0887c26b8a145b851726fb71bc7424">initialize</a>(<a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a>&#42;)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04322" /><CodeLine lineNumber="4322"><span class="doxyHighlight">    TopQ.clear();</span></CodeLine>
<Link id="l04323" /><CodeLine lineNumber="4323"><span class="doxyHighlight">    BottomQ.clear();</span></CodeLine>
<Link id="l04324" /><CodeLine lineNumber="4324"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04325" /><CodeLine lineNumber="4325"></CodeLine>
<Link id="l04326" /><CodeLine lineNumber="4326"><span class="doxyHighlightComment">  /// Implement MachineSchedStrategy interface.</span></CodeLine>
<Link id="l04327" /><CodeLine lineNumber="4327"><span class="doxyHighlightComment">  /// -----------------------------------------</span></CodeLine>
<Link id="l04328" /><CodeLine lineNumber="4328"></CodeLine>
<Link id="l04329" /><CodeLine lineNumber="4329" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#ab2f0461b159b9b2dc36f1ce07ef8f360"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#ab2f0461b159b9b2dc36f1ce07ef8f360">pickNode</a>(</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &amp;IsTopNode)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04330" /><CodeLine lineNumber="4330"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU;</span></CodeLine>
<Link id="l04331" /><CodeLine lineNumber="4331"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTopDown) &#123;</span></CodeLine>
<Link id="l04332" /><CodeLine lineNumber="4332"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">do</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04333" /><CodeLine lineNumber="4333"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TopQ.empty()) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04334" /><CodeLine lineNumber="4334"><span class="doxyHighlight">        SU = TopQ.top();</span></CodeLine>
<Link id="l04335" /><CodeLine lineNumber="4335"><span class="doxyHighlight">        TopQ.pop();</span></CodeLine>
<Link id="l04336" /><CodeLine lineNumber="4336"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a>);</span></CodeLine>
<Link id="l04337" /><CodeLine lineNumber="4337"><span class="doxyHighlight">      IsTopNode = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04338" /><CodeLine lineNumber="4338"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04339" /><CodeLine lineNumber="4339"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">do</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04340" /><CodeLine lineNumber="4340"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BottomQ.empty()) </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04341" /><CodeLine lineNumber="4341"><span class="doxyHighlight">        SU = BottomQ.top();</span></CodeLine>
<Link id="l04342" /><CodeLine lineNumber="4342"><span class="doxyHighlight">        BottomQ.pop();</span></CodeLine>
<Link id="l04343" /><CodeLine lineNumber="4343"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a>);</span></CodeLine>
<Link id="l04344" /><CodeLine lineNumber="4344"><span class="doxyHighlight">      IsTopNode = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04345" /><CodeLine lineNumber="4345"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04346" /><CodeLine lineNumber="4346"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsAlternating)</span></CodeLine>
<Link id="l04347" /><CodeLine lineNumber="4347"><span class="doxyHighlight">      IsTopDown = !IsTopDown;</span></CodeLine>
<Link id="l04348" /><CodeLine lineNumber="4348"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> SU;</span></CodeLine>
<Link id="l04349" /><CodeLine lineNumber="4349"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04350" /><CodeLine lineNumber="4350"></CodeLine>
<Link id="l04351" /><CodeLine lineNumber="4351" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#a7513d8d3f4078ce1ec2307197dc97bd5"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#a7513d8d3f4078ce1ec2307197dc97bd5">schedNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsTopNode)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;&#125;</span></CodeLine>
<Link id="l04352" /><CodeLine lineNumber="4352"></CodeLine>
<Link id="l04353" /><CodeLine lineNumber="4353" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#ab2e24baa75c09ce5615ff615de882a08"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#ab2e24baa75c09ce5615ff615de882a08">releaseTopNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04354" /><CodeLine lineNumber="4354"><span class="doxyHighlight">    TopQ.push(SU);</span></CodeLine>
<Link id="l04355" /><CodeLine lineNumber="4355"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04356" /><CodeLine lineNumber="4356" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#ac0909ecd8661372e3a566375b5afd181"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#ac0909ecd8661372e3a566375b5afd181">releaseBottomNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04357" /><CodeLine lineNumber="4357"><span class="doxyHighlight">    BottomQ.push(SU);</span></CodeLine>
<Link id="l04358" /><CodeLine lineNumber="4358"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04359" /><CodeLine lineNumber="4359"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l04360" /><CodeLine lineNumber="4360"></CodeLine>
<Link id="l04361" /><CodeLine lineNumber="4361"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end anonymous namespace</span></CodeLine>
<Link id="l04362" /><CodeLine lineNumber="4362"></CodeLine>
<Link id="l04363" /><CodeLine lineNumber="4363" lineLink="#a781e910364813dd3c1677ab7852630a6"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="#a781e910364813dd3c1677ab7852630a6">createInstructionShuffler</a>(<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</span></CodeLine>
<Link id="l04364" /><CodeLine lineNumber="4364"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Alternate =</span></CodeLine>
<Link id="l04365" /><CodeLine lineNumber="4365"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#aa9ff814049edfef549accbca1a8e9eff">PreRADirection</a> != <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3ae89742249a15ad5696e3dcec82f0e76a">MISched::TopDown</a> &amp;&amp; <a href="/docs/api/namespaces/llvm/#aa9ff814049edfef549accbca1a8e9eff">PreRADirection</a> != <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3abd98ce24773c9ca1e3f7ce3c541e43ea">MISched::BottomUp</a>;</span></CodeLine>
<Link id="l04366" /><CodeLine lineNumber="4366"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> TopDown = <a href="/docs/api/namespaces/llvm/#aa9ff814049edfef549accbca1a8e9eff">PreRADirection</a> != <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3abd98ce24773c9ca1e3f7ce3c541e43ea">MISched::BottomUp</a>;</span></CodeLine>
<Link id="l04367" /><CodeLine lineNumber="4367"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">new</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>(</span></CodeLine>
<Link id="l04368" /><CodeLine lineNumber="4368"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, std::make&#95;unique&lt;InstructionShuffler&gt;(Alternate, TopDown));</span></CodeLine>
<Link id="l04369" /><CodeLine lineNumber="4369"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04370" /><CodeLine lineNumber="4370"></CodeLine>
<Link id="l04371" /><CodeLine lineNumber="4371" lineLink="#ac68c4196407c59fdf134079a44647f81"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a> <a href="#ac68c4196407c59fdf134079a44647f81">ShufflerRegistry</a>(</span></CodeLine>
<Link id="l04372" /><CodeLine lineNumber="4372"><span class="doxyHighlight">  </span><span class="doxyHighlightStringLiteral">&quot;shuffle&quot;</span><span class="doxyHighlight">, </span><span class="doxyHighlightStringLiteral">&quot;Shuffle machine instructions alternating directions&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l04373" /><CodeLine lineNumber="4373"><span class="doxyHighlight">  <a href="#a781e910364813dd3c1677ab7852630a6">createInstructionShuffler</a>);</span></CodeLine>
<Link id="l04374" /><CodeLine lineNumber="4374"><span class="doxyHighlightPreprocessor">#endif </span><span class="doxyHighlightComment">// !NDEBUG</span></CodeLine>
<Link id="l04375" /><CodeLine lineNumber="4375"></CodeLine>
<Link id="l04376" /><CodeLine lineNumber="4376"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l04377" /><CodeLine lineNumber="4377"><span class="doxyHighlightComment">// GraphWriter support for ScheduleDAGMILive.</span></CodeLine>
<Link id="l04378" /><CodeLine lineNumber="4378"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l04379" /><CodeLine lineNumber="4379"></CodeLine>
<Link id="l04380" /><CodeLine lineNumber="4380"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l04381" /><CodeLine lineNumber="4381"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm">llvm</a> &#123;</span></CodeLine>
<Link id="l04382" /><CodeLine lineNumber="4382"></CodeLine>
<Link id="l04383" /><CodeLine lineNumber="4383" lineLink="/docs/api/structs/llvm/graphtraits-3e4d2beef0711eb028dcc7799677e405"><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight">&lt;&gt; </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/graphtraits">GraphTraits</a>&lt;</span></CodeLine>
<Link id="l04384" /><CodeLine lineNumber="4384"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a>&#42;&gt; : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/graphtraits">GraphTraits&lt;ScheduleDAG&#42;&gt;</a> &#123;&#125;;</span></CodeLine>
<Link id="l04385" /><CodeLine lineNumber="4385"></CodeLine>
<Link id="l04386" /><CodeLine lineNumber="4386"><span class="doxyHighlightKeyword">template</span><span class="doxyHighlight">&lt;&gt;</span></CodeLine>
<Link id="l04387" /><CodeLine lineNumber="4387" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405"><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#ae60a7222415878571912427e758f4297">DOTGraphTraits</a>&lt;<a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a>&#42;&gt; : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/defaultdotgraphtraits/#a8a0585a182245d87b224f4a26a41cf16">DefaultDOTGraphTraits</a> &#123;</span></CodeLine>
<Link id="l04388" /><CodeLine lineNumber="4388" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#ae60a7222415878571912427e758f4297"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#ae60a7222415878571912427e758f4297">DOTGraphTraits</a>(</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/defaultdotgraphtraits/#ae8629cdc360910256304238ca5db1a45">isSimple</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">) : <a href="/docs/api/structs/llvm/defaultdotgraphtraits/#a8a0585a182245d87b224f4a26a41cf16">DefaultDOTGraphTraits</a>(<a href="/docs/api/structs/llvm/defaultdotgraphtraits/#ae8629cdc360910256304238ca5db1a45">isSimple</a>) &#123;&#125;</span></CodeLine>
<Link id="l04389" /><CodeLine lineNumber="4389"></CodeLine>
<Link id="l04390" /><CodeLine lineNumber="4390" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#a9cb35016314cf6da022701d4e0a06fcb"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> std::string <a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#a9cb35016314cf6da022701d4e0a06fcb">getGraphName</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledag">ScheduleDAG</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) &#123;</span></CodeLine>
<Link id="l04391" /><CodeLine lineNumber="4391"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::string(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;MF.getName());</span></CodeLine>
<Link id="l04392" /><CodeLine lineNumber="4392"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04393" /><CodeLine lineNumber="4393"></CodeLine>
<Link id="l04394" /><CodeLine lineNumber="4394" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#aff0201d90e079596116145d196d677b2"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#aff0201d90e079596116145d196d677b2">renderGraphFromBottomUp</a>() &#123;</span></CodeLine>
<Link id="l04395" /><CodeLine lineNumber="4395"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04396" /><CodeLine lineNumber="4396"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04397" /><CodeLine lineNumber="4397"></CodeLine>
<Link id="l04398" /><CodeLine lineNumber="4398" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#ad5f17f1a4e1d3ba6af4b61d1a268fcc6"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#ad5f17f1a4e1d3ba6af4b61d1a268fcc6">isNodeHidden</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/node">Node</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledag">ScheduleDAG</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) &#123;</span></CodeLine>
<Link id="l04399" /><CodeLine lineNumber="4399"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#ac2b8a3811867143546f43d3adc8cd2f6">ViewMISchedCutoff</a> == 0)</span></CodeLine>
<Link id="l04400" /><CodeLine lineNumber="4400"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04401" /><CodeLine lineNumber="4401"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> (<a href="/docs/api/classes/node">Node</a>-&gt;Preds.size() &gt; <a href="#ac2b8a3811867143546f43d3adc8cd2f6">ViewMISchedCutoff</a></span></CodeLine>
<Link id="l04402" /><CodeLine lineNumber="4402"><span class="doxyHighlight">         || <a href="/docs/api/classes/node">Node</a>-&gt;Succs.size() &gt; <a href="#ac2b8a3811867143546f43d3adc8cd2f6">ViewMISchedCutoff</a>);</span></CodeLine>
<Link id="l04403" /><CodeLine lineNumber="4403"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04404" /><CodeLine lineNumber="4404"></CodeLine>
<Link id="l04405" /><CodeLine lineNumber="4405"><span class="doxyHighlightComment">  /// If you want to override the dot attributes printed for a particular</span></CodeLine>
<Link id="l04406" /><CodeLine lineNumber="4406"><span class="doxyHighlightComment">  /// edge, override this method.</span></CodeLine>
<Link id="l04407" /><CodeLine lineNumber="4407" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#a738a1d6d967fd5a8cdf539bced89b0c5"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> std::string <a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#a738a1d6d967fd5a8cdf539bced89b0c5">getEdgeAttributes</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/node">Node</a>,</span></CodeLine>
<Link id="l04408" /><CodeLine lineNumber="4408"><span class="doxyHighlight">                                       <a href="/docs/api/classes/llvm/sunititerator">SUnitIterator</a> EI,</span></CodeLine>
<Link id="l04409" /><CodeLine lineNumber="4409"><span class="doxyHighlight">                                       </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledag">ScheduleDAG</a> &#42;Graph) &#123;</span></CodeLine>
<Link id="l04410" /><CodeLine lineNumber="4410"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (EI.<a href="/docs/api/classes/llvm/sunititerator/#ad21c405410acc1224a0c595dfee78db3">isArtificialDep</a>())</span></CodeLine>
<Link id="l04411" /><CodeLine lineNumber="4411"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;color=cyan,style=dashed&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04412" /><CodeLine lineNumber="4412"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (EI.<a href="/docs/api/classes/llvm/sunititerator/#ad6eeca3c40d9ebbab3bde59949fc3c13">isCtrlDep</a>())</span></CodeLine>
<Link id="l04413" /><CodeLine lineNumber="4413"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;color=blue,style=dashed&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04414" /><CodeLine lineNumber="4414"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04415" /><CodeLine lineNumber="4415"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04416" /><CodeLine lineNumber="4416"></CodeLine>
<Link id="l04417" /><CodeLine lineNumber="4417" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#a9e281d4b0718506e4ec5596a06ae36dd"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> std::string <a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#a9e281d4b0718506e4ec5596a06ae36dd">getNodeLabel</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledag">ScheduleDAG</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) &#123;</span></CodeLine>
<Link id="l04418" /><CodeLine lineNumber="4418"><span class="doxyHighlight">    std::string Str;</span></CodeLine>
<Link id="l04419" /><CodeLine lineNumber="4419"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/raw-string-ostream">raw&#95;string&#95;ostream</a> SS(Str);</span></CodeLine>
<Link id="l04420" /><CodeLine lineNumber="4420"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;DAG = </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeyword">const </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a>&#42;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</span></CodeLine>
<Link id="l04421" /><CodeLine lineNumber="4421"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheddfsresult">SchedDFSResult</a> &#42;DFS = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a78c0f3feb8a81ca338f843494cff564e">hasVRegLiveness</a>() ?</span></CodeLine>
<Link id="l04422" /><CodeLine lineNumber="4422"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeyword">const </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>&#42;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>)-&gt;getDFSResult() : </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04423" /><CodeLine lineNumber="4423"><span class="doxyHighlight">    SS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;SU:&quot;</span><span class="doxyHighlight"> &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a>;</span></CodeLine>
<Link id="l04424" /><CodeLine lineNumber="4424"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DFS)</span></CodeLine>
<Link id="l04425" /><CodeLine lineNumber="4425"><span class="doxyHighlight">      SS &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot; I:&quot;</span><span class="doxyHighlight"> &lt;&lt; DFS-&gt;<a href="/docs/api/classes/llvm/scheddfsresult/#a1bd5822bcf45690f998c2fd86a092ced">getNumInstrs</a>(SU);</span></CodeLine>
<Link id="l04426" /><CodeLine lineNumber="4426"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Str;</span></CodeLine>
<Link id="l04427" /><CodeLine lineNumber="4427"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04428" /><CodeLine lineNumber="4428"></CodeLine>
<Link id="l04429" /><CodeLine lineNumber="4429" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#a412a621ecd1fa0c812338cf768411946"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> std::string <a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#a412a621ecd1fa0c812338cf768411946">getNodeDescription</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledag">ScheduleDAG</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) &#123;</span></CodeLine>
<Link id="l04430" /><CodeLine lineNumber="4430"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getGraphNodeLabel(SU);</span></CodeLine>
<Link id="l04431" /><CodeLine lineNumber="4431"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04432" /><CodeLine lineNumber="4432"></CodeLine>
<Link id="l04433" /><CodeLine lineNumber="4433" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#aeec5b7bbdeddc6e81486c44f34c5975a"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> std::string <a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#aeec5b7bbdeddc6e81486c44f34c5975a">getNodeAttributes</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledag">ScheduleDAG</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) &#123;</span></CodeLine>
<Link id="l04434" /><CodeLine lineNumber="4434"><span class="doxyHighlight">    std::string Str(</span><span class="doxyHighlightStringLiteral">&quot;shape=Mrecord&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04435" /><CodeLine lineNumber="4435"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;DAG = </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeyword">const </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a>&#42;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</span></CodeLine>
<Link id="l04436" /><CodeLine lineNumber="4436"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheddfsresult">SchedDFSResult</a> &#42;DFS = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a78c0f3feb8a81ca338f843494cff564e">hasVRegLiveness</a>() ?</span></CodeLine>
<Link id="l04437" /><CodeLine lineNumber="4437"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeyword">const </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>&#42;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>)-&gt;getDFSResult() : </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04438" /><CodeLine lineNumber="4438"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DFS) &#123;</span></CodeLine>
<Link id="l04439" /><CodeLine lineNumber="4439"><span class="doxyHighlight">      Str += </span><span class="doxyHighlightStringLiteral">&quot;,style=filled,fillcolor=\\&quot;#&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04440" /><CodeLine lineNumber="4440"><span class="doxyHighlight">      Str += <a href="/docs/api/namespaces/llvm/dot/#a65ec6bb0b1bfe75533186557a9077d28">DOT::getColorString</a>(DFS-&gt;<a href="/docs/api/classes/llvm/scheddfsresult/#a2b2b597b59be28845565af32824bc8ed">getSubtreeID</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>));</span></CodeLine>
<Link id="l04441" /><CodeLine lineNumber="4441"><span class="doxyHighlight">      Str += </span><span class="doxyHighlightCharLiteral">&#39;&quot;&#39;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04442" /><CodeLine lineNumber="4442"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04443" /><CodeLine lineNumber="4443"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Str;</span></CodeLine>
<Link id="l04444" /><CodeLine lineNumber="4444"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04445" /><CodeLine lineNumber="4445"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l04446" /><CodeLine lineNumber="4446"></CodeLine>
<Link id="l04447" /><CodeLine lineNumber="4447"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end namespace llvm</span></CodeLine>
<Link id="l04448" /><CodeLine lineNumber="4448"><span class="doxyHighlightPreprocessor">#endif </span><span class="doxyHighlightComment">// NDEBUG</span></CodeLine>
<Link id="l04449" /><CodeLine lineNumber="4449"></CodeLine>
<Link id="l04450" /><CodeLine lineNumber="4450"><span class="doxyHighlightComment">/// viewGraph - Pop up a ghostview window with the reachable parts of the DAG</span></CodeLine>
<Link id="l04451" /><CodeLine lineNumber="4451"><span class="doxyHighlightComment">/// rendered using &#39;dot&#39;.</span></CodeLine>
<Link id="l04452" /><CodeLine lineNumber="4452" lineLink="/docs/api/classes/llvm/scheduledagmi/#a8181ae26c7912b2ae6214be22c4f6cf5"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a8b7babb023cad0842f5a177e7abe3651">ScheduleDAGMI::viewGraph</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/twine">Twine</a> &amp;Name, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/twine">Twine</a> &amp;Title) &#123;</span></CodeLine>
<Link id="l04453" /><CodeLine lineNumber="4453"><span class="doxyHighlightPreprocessor">#ifndef NDEBUG</span></CodeLine>
<Link id="l04454" /><CodeLine lineNumber="4454"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#ab8635363d4287c93f64c55ad5567fcf0">ViewGraph</a>(</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">, Name, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, Title);</span></CodeLine>
<Link id="l04455" /><CodeLine lineNumber="4455"><span class="doxyHighlightPreprocessor">#else</span></CodeLine>
<Link id="l04456" /><CodeLine lineNumber="4456"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;ScheduleDAGMI::viewGraph is only available in debug builds on &quot;</span></CodeLine>
<Link id="l04457" /><CodeLine lineNumber="4457"><span class="doxyHighlight">         &lt;&lt; </span><span class="doxyHighlightStringLiteral">&quot;systems with Graphviz or gv!\\n&quot;</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04458" /><CodeLine lineNumber="4458"><span class="doxyHighlightPreprocessor">#endif  </span><span class="doxyHighlightComment">// NDEBUG</span></CodeLine>
<Link id="l04459" /><CodeLine lineNumber="4459"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04460" /><CodeLine lineNumber="4460"></CodeLine>
<Link id="l04461" /><CodeLine lineNumber="4461"><span class="doxyHighlightComment">/// Out-of-line implementation with no arguments is handy for gdb.</span></CodeLine>
<Link id="l04462" /><CodeLine lineNumber="4462" lineLink="/docs/api/classes/llvm/scheduledagmi/#a8b7babb023cad0842f5a177e7abe3651"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/scheduledagmi/#a8b7babb023cad0842f5a177e7abe3651">ScheduleDAGMI::viewGraph</a>() &#123;</span></CodeLine>
<Link id="l04463" /><CodeLine lineNumber="4463"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/scheduledagmi/#a8181ae26c7912b2ae6214be22c4f6cf5">viewGraph</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs/#a23f7a6c4d1be0ca66f44eb4aa499075a">getDAGName</a>(), </span><span class="doxyHighlightStringLiteral">&quot;Scheduling-Units Graph for &quot;</span><span class="doxyHighlight"> + <a href="/docs/api/classes/llvm/scheduledaginstrs/#a23f7a6c4d1be0ca66f44eb4aa499075a">getDAGName</a>());</span></CodeLine>
<Link id="l04464" /><CodeLine lineNumber="4464"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04465" /><CodeLine lineNumber="4465"></CodeLine>
<Link id="l04466" /><CodeLine lineNumber="4466"><span class="doxyHighlightComment">/// Sort predicate for the intervals stored in an instance of</span></CodeLine>
<Link id="l04467" /><CodeLine lineNumber="4467"><span class="doxyHighlightComment">/// ResourceSegments. Intervals are always disjoint (no intersection</span></CodeLine>
<Link id="l04468" /><CodeLine lineNumber="4468"><span class="doxyHighlightComment">/// for any pairs of intervals), therefore we can sort the totality of</span></CodeLine>
<Link id="l04469" /><CodeLine lineNumber="4469"><span class="doxyHighlightComment">/// the intervals by looking only at the left boundary.</span></CodeLine>
<Link id="l04470" /><CodeLine lineNumber="4470" lineLink="#a885c0b81f13eff56642e780a0a7cecff"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a885c0b81f13eff56642e780a0a7cecff">sortIntervals</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>,</span></CodeLine>
<Link id="l04471" /><CodeLine lineNumber="4471"><span class="doxyHighlight">                          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l04472" /><CodeLine lineNumber="4472"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.first;</span></CodeLine>
<Link id="l04473" /><CodeLine lineNumber="4473"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04474" /><CodeLine lineNumber="4474"></CodeLine>
<Link id="l04475" /><CodeLine lineNumber="4475"><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ResourceSegments::getFirstAvailableAt(</span></CodeLine>
<Link id="l04476" /><CodeLine lineNumber="4476"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> CurrCycle, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AcquireAtCycle, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ReleaseAtCycle,</span></CodeLine>
<Link id="l04477" /><CodeLine lineNumber="4477"><span class="doxyHighlight">    std::function&lt;<a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight">)&gt;</span></CodeLine>
<Link id="l04478" /><CodeLine lineNumber="4478"><span class="doxyHighlight">        IntervalBuilder)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04479" /><CodeLine lineNumber="4479"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(std::is&#95;sorted(std::begin(&#95;Intervals), std::end(&#95;Intervals),</span></CodeLine>
<Link id="l04480" /><CodeLine lineNumber="4480"><span class="doxyHighlight">                        <a href="#a885c0b81f13eff56642e780a0a7cecff">sortIntervals</a>) &amp;&amp;</span></CodeLine>
<Link id="l04481" /><CodeLine lineNumber="4481"><span class="doxyHighlight">         </span><span class="doxyHighlightStringLiteral">&quot;Cannot execute on an un-sorted set of intervals.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04482" /><CodeLine lineNumber="4482"></CodeLine>
<Link id="l04483" /><CodeLine lineNumber="4483"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Zero resource usage is allowed by TargetSchedule.td but we do not construct</span></CodeLine>
<Link id="l04484" /><CodeLine lineNumber="4484"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// a ResourceSegment interval for that situation.</span></CodeLine>
<Link id="l04485" /><CodeLine lineNumber="4485"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AcquireAtCycle == ReleaseAtCycle)</span></CodeLine>
<Link id="l04486" /><CodeLine lineNumber="4486"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> CurrCycle;</span></CodeLine>
<Link id="l04487" /><CodeLine lineNumber="4487"></CodeLine>
<Link id="l04488" /><CodeLine lineNumber="4488"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> RetCycle = CurrCycle;</span></CodeLine>
<Link id="l04489" /><CodeLine lineNumber="4489"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> NewInterval =</span></CodeLine>
<Link id="l04490" /><CodeLine lineNumber="4490"><span class="doxyHighlight">      IntervalBuilder(RetCycle, AcquireAtCycle, ReleaseAtCycle);</span></CodeLine>
<Link id="l04491" /><CodeLine lineNumber="4491"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/mappedblockstream-cpp/#a4ab9bd667f674c16b2cee01ab8823644">Interval</a> : &#95;Intervals) &#123;</span></CodeLine>
<Link id="l04492" /><CodeLine lineNumber="4492"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/codegen/lib/codegen/asmprinter/dbgentityhistorycalculator-cpp/#a0250c150e720772b7e0feac3d2f43e82">intersects</a>(NewInterval, <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/mappedblockstream-cpp/#a4ab9bd667f674c16b2cee01ab8823644">Interval</a>))</span></CodeLine>
<Link id="l04493" /><CodeLine lineNumber="4493"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04494" /><CodeLine lineNumber="4494"></CodeLine>
<Link id="l04495" /><CodeLine lineNumber="4495"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Move the interval right next to the top of the one it</span></CodeLine>
<Link id="l04496" /><CodeLine lineNumber="4496"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// intersects.</span></CodeLine>
<Link id="l04497" /><CodeLine lineNumber="4497"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/mappedblockstream-cpp/#a4ab9bd667f674c16b2cee01ab8823644">Interval</a>.second &gt; NewInterval.first &amp;&amp;</span></CodeLine>
<Link id="l04498" /><CodeLine lineNumber="4498"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;Invalid intervals configuration.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04499" /><CodeLine lineNumber="4499"><span class="doxyHighlight">    RetCycle += (unsigned)<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/mappedblockstream-cpp/#a4ab9bd667f674c16b2cee01ab8823644">Interval</a>.second - (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight">)NewInterval.first;</span></CodeLine>
<Link id="l04500" /><CodeLine lineNumber="4500"><span class="doxyHighlight">    NewInterval = IntervalBuilder(RetCycle, AcquireAtCycle, ReleaseAtCycle);</span></CodeLine>
<Link id="l04501" /><CodeLine lineNumber="4501"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04502" /><CodeLine lineNumber="4502"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> RetCycle;</span></CodeLine>
<Link id="l04503" /><CodeLine lineNumber="4503"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04504" /><CodeLine lineNumber="4504"></CodeLine>
<Link id="l04505" /><CodeLine lineNumber="4505" lineLink="/docs/api/classes/llvm/resourcesegments/#a173bcdd8f59b31a810aead1000274448"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/resourcesegments/#a173bcdd8f59b31a810aead1000274448">ResourceSegments::add</a>(<a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>,</span></CodeLine>
<Link id="l04506" /><CodeLine lineNumber="4506"><span class="doxyHighlight">                           </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> CutOff) &#123;</span></CodeLine>
<Link id="l04507" /><CodeLine lineNumber="4507"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first &lt;= <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.second &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Cannot add negative resource usage&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04508" /><CodeLine lineNumber="4508"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CutOff &gt; 0 &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;0-size interval history has no use.&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04509" /><CodeLine lineNumber="4509"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Zero resource usage is allowed by TargetSchedule.td, in the case that the</span></CodeLine>
<Link id="l04510" /><CodeLine lineNumber="4510"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// instruction needed the resource to be available but does not use it.</span></CodeLine>
<Link id="l04511" /><CodeLine lineNumber="4511"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// However, ResourceSegment represents an interval that is closed on the left</span></CodeLine>
<Link id="l04512" /><CodeLine lineNumber="4512"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// and open on the right. It is impossible to represent an empty interval when</span></CodeLine>
<Link id="l04513" /><CodeLine lineNumber="4513"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the left is closed. Do not add it to Intervals.</span></CodeLine>
<Link id="l04514" /><CodeLine lineNumber="4514"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first == <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.second)</span></CodeLine>
<Link id="l04515" /><CodeLine lineNumber="4515"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04516" /><CodeLine lineNumber="4516"></CodeLine>
<Link id="l04517" /><CodeLine lineNumber="4517"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a0d10fe510ced2849a8074fe81e5d04ce">all&#95;of</a>(&#95;Intervals,</span></CodeLine>
<Link id="l04518" /><CodeLine lineNumber="4518"><span class="doxyHighlight">                &#91;&amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> &amp;<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/mappedblockstream-cpp/#a4ab9bd667f674c16b2cee01ab8823644">Interval</a>) -&gt; </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04519" /><CodeLine lineNumber="4519"><span class="doxyHighlight">                  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> !<a href="/docs/api/files/lib/lib/codegen/lib/codegen/asmprinter/dbgentityhistorycalculator-cpp/#a0250c150e720772b7e0feac3d2f43e82">intersects</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/mappedblockstream-cpp/#a4ab9bd667f674c16b2cee01ab8823644">Interval</a>);</span></CodeLine>
<Link id="l04520" /><CodeLine lineNumber="4520"><span class="doxyHighlight">                &#125;) &amp;&amp;</span></CodeLine>
<Link id="l04521" /><CodeLine lineNumber="4521"><span class="doxyHighlight">         </span><span class="doxyHighlightStringLiteral">&quot;A resource is being overwritten&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04522" /><CodeLine lineNumber="4522"><span class="doxyHighlight">  &#95;Intervals.push&#95;back(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>);</span></CodeLine>
<Link id="l04523" /><CodeLine lineNumber="4523"></CodeLine>
<Link id="l04524" /><CodeLine lineNumber="4524"><span class="doxyHighlight">  sortAndMerge();</span></CodeLine>
<Link id="l04525" /><CodeLine lineNumber="4525"></CodeLine>
<Link id="l04526" /><CodeLine lineNumber="4526"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Do not keep the full history of the intervals, just the</span></CodeLine>
<Link id="l04527" /><CodeLine lineNumber="4527"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// latest #CutOff.</span></CodeLine>
<Link id="l04528" /><CodeLine lineNumber="4528"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (&#95;Intervals.size() &gt; CutOff)</span></CodeLine>
<Link id="l04529" /><CodeLine lineNumber="4529"><span class="doxyHighlight">    &#95;Intervals.pop&#95;front();</span></CodeLine>
<Link id="l04530" /><CodeLine lineNumber="4530"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04531" /><CodeLine lineNumber="4531"></CodeLine>
<Link id="l04532" /><CodeLine lineNumber="4532" lineLink="/docs/api/classes/llvm/resourcesegments/#a7fbb23b17b45652a8d28aadabbabf3c9"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/resourcesegments/#a7fbb23b17b45652a8d28aadabbabf3c9">ResourceSegments::intersects</a>(<a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>,</span></CodeLine>
<Link id="l04533" /><CodeLine lineNumber="4533"><span class="doxyHighlight">                                  <a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l04534" /><CodeLine lineNumber="4534"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first &lt;= <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.second &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Invalid interval&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04535" /><CodeLine lineNumber="4535"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.first &lt;= <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.second &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Invalid interval&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04536" /><CodeLine lineNumber="4536"></CodeLine>
<Link id="l04537" /><CodeLine lineNumber="4537"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Share one boundary.</span></CodeLine>
<Link id="l04538" /><CodeLine lineNumber="4538"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first == <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.first) || (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.second == <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.second))</span></CodeLine>
<Link id="l04539" /><CodeLine lineNumber="4539"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04540" /><CodeLine lineNumber="4540"></CodeLine>
<Link id="l04541" /><CodeLine lineNumber="4541"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// full intersersect: &#91;    &#42;&#42;&#42;     )  B</span></CodeLine>
<Link id="l04542" /><CodeLine lineNumber="4542"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//                        &#91;&#42;&#42;&#42;)       A</span></CodeLine>
<Link id="l04543" /><CodeLine lineNumber="4543"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first &gt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.first) &amp;&amp; (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.second &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.second))</span></CodeLine>
<Link id="l04544" /><CodeLine lineNumber="4544"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04545" /><CodeLine lineNumber="4545"></CodeLine>
<Link id="l04546" /><CodeLine lineNumber="4546"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// right intersect: &#91;     &#42;&#42;&#42;)        B</span></CodeLine>
<Link id="l04547" /><CodeLine lineNumber="4547"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//                       &#91;&#42;&#42;&#42;      )  A</span></CodeLine>
<Link id="l04548" /><CodeLine lineNumber="4548"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first &gt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.first) &amp;&amp; (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.second) &amp;&amp; (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.second &gt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.second))</span></CodeLine>
<Link id="l04549" /><CodeLine lineNumber="4549"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04550" /><CodeLine lineNumber="4550"></CodeLine>
<Link id="l04551" /><CodeLine lineNumber="4551"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// left intersect:      &#91;&#42;&#42;&#42;      )  B</span></CodeLine>
<Link id="l04552" /><CodeLine lineNumber="4552"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//                 &#91;     &#42;&#42;&#42;)        A</span></CodeLine>
<Link id="l04553" /><CodeLine lineNumber="4553"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.first) &amp;&amp; (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.first &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.second) &amp;&amp; (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.second &gt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.first))</span></CodeLine>
<Link id="l04554" /><CodeLine lineNumber="4554"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04555" /><CodeLine lineNumber="4555"></CodeLine>
<Link id="l04556" /><CodeLine lineNumber="4556"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04557" /><CodeLine lineNumber="4557"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04558" /><CodeLine lineNumber="4558"></CodeLine>
<Link id="l04559" /><CodeLine lineNumber="4559"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> ResourceSegments::sortAndMerge() &#123;</span></CodeLine>
<Link id="l04560" /><CodeLine lineNumber="4560"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (&#95;Intervals.size() &lt;= 1)</span></CodeLine>
<Link id="l04561" /><CodeLine lineNumber="4561"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04562" /><CodeLine lineNumber="4562"></CodeLine>
<Link id="l04563" /><CodeLine lineNumber="4563"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// First sort the collection.</span></CodeLine>
<Link id="l04564" /><CodeLine lineNumber="4564"><span class="doxyHighlight">  &#95;Intervals.sort(<a href="#a885c0b81f13eff56642e780a0a7cecff">sortIntervals</a>);</span></CodeLine>
<Link id="l04565" /><CodeLine lineNumber="4565"></CodeLine>
<Link id="l04566" /><CodeLine lineNumber="4566"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// can use next because I have at least 2 elements in the list</span></CodeLine>
<Link id="l04567" /><CodeLine lineNumber="4567"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> next = std::next(std::begin(&#95;Intervals));</span></CodeLine>
<Link id="l04568" /><CodeLine lineNumber="4568"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> E = std::end(&#95;Intervals);</span></CodeLine>
<Link id="l04569" /><CodeLine lineNumber="4569"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (; next != E; ++next) &#123;</span></CodeLine>
<Link id="l04570" /><CodeLine lineNumber="4570"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (std::prev(next)-&gt;second &gt;= next-&gt;first) &#123;</span></CodeLine>
<Link id="l04571" /><CodeLine lineNumber="4571"><span class="doxyHighlight">      next-&gt;first = std::prev(next)-&gt;first;</span></CodeLine>
<Link id="l04572" /><CodeLine lineNumber="4572"><span class="doxyHighlight">      &#95;Intervals.erase(std::prev(next));</span></CodeLine>
<Link id="l04573" /><CodeLine lineNumber="4573"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04574" /><CodeLine lineNumber="4574"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04575" /><CodeLine lineNumber="4575"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04576" /><CodeLine lineNumber="4576"><span class="doxyHighlight">&#125;</span></CodeLine>

</ProgramListing>


</DoxygenPage>
