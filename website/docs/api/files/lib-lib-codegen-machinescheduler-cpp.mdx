---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/files/lib/lib/codegen/machinescheduler-cpp
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - file

---

import Link from '@docusaurus/Link'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import Highlight from '@xpack/docusaurus-plugin-doxygen/components/Highlight'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `MachineScheduler.cpp` File Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/CodeGen/MachineScheduler.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinescheduler-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/ArrayRef.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/arrayref-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/BitVector.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/bitvector-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/DenseMap.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/densemap-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/PriorityQueue.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/priorityqueue-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/STLExtras.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/stlextras-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/SmallVector.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/smallvector-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/Statistic.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/iterator_range.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/iterator-range-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/AliasAnalysis.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/aliasanalysis-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/LiveInterval.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/liveinterval-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/LiveIntervals.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/liveintervals-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineBasicBlock.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinebasicblock-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineDominators.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinedominators-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineFunction.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinefunction-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineFunctionPass.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinefunctionpass-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineInstr.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machineinstr-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineLoopInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machineloopinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineOperand.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoperand-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachinePassRegistry.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinepassregistry-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineRegisterInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machineregisterinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/RegisterClassInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/registerclassinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/RegisterPressure.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/registerpressure-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/ScheduleDAG.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/scheduledag-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/ScheduleDAGInstrs.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/scheduledaginstrs-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/ScheduleDAGMutation.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/scheduledagmutation-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/ScheduleDFS.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/scheduledfs-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/ScheduleHazardRecognizer.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/schedulehazardrecognizer-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/SlotIndexes.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/slotindexes-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetFrameLowering.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetframelowering-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetInstrInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetinstrinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetLowering.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetlowering-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetPassConfig.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetpassconfig-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetRegisterInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetregisterinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetSchedule.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetschedule-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetSubtargetInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetsubtargetinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGenTypes/MachineValueType.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegentypes/machinevaluetype-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Config/llvm-config.h"
  permalink=""
  isLocal="true" />
<IncludesListItem
  filePath="llvm/InitializePasses.h"
  permalink="/docs/api/files/include/include/llvm/initializepasses-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/MC/LaneBitmask.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/mc/lanebitmask-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Pass.h"
  permalink="/docs/api/files/include/include/llvm/pass-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/CommandLine.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Compiler.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/compiler-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Debug.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/debug-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/ErrorHandling.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/GraphWriter.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/graphwriter-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/raw_ostream.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/raw-ostream-h"
  isLocal="true" />
<IncludesListItem
  filePath="algorithm"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="cassert"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="cstdint"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="iterator"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="limits"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="memory"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="string"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="tuple"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="utility"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="vector"
  permalink=""
  isLocal="false" />
</IncludesList>

## Namespaces Index

<MembersIndex>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/llvm">llvm</a></>}>
This is an optimization pass for GlobalISel generic memory operations. <a href="/docs/api/namespaces/llvm/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/anonymous-machinescheduler-cpp-">anonymous&#123;MachineScheduler.cpp&#125;</a></>}>
A region of an MBB for scheduling. <a href="/docs/api/namespaces/anonymous-machinescheduler-cpp-/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Classes Index

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase">MachineSchedulerBase</a></>}>
Base class for a machine scheduler class that can run at any point. <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler">MachineScheduler</a></>}>
<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler">MachineScheduler</a> runs after coalescing and before register allocation. <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler">PostMachineScheduler</a></>}>
<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler">PostMachineScheduler</a> runs after shortly before code emission. <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion">SchedRegion</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation">BaseMemOpClusterMutation</a></>}>
Post-process the DAG to create cluster edges between neighboring loads or between neighboring stores. <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/memopinfo">MemOpInfo</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/storeclustermutation">StoreClusterMutation</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/loadclustermutation">LoadClusterMutation</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain">CopyConstrain</a></>}>
Post-process the DAG to create weak edges from all uses of a copy to the one use that defines the copy&#39;s source vreg, most likely an induction variable increment. <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder">ILPOrder</a></>}>
Order nodes by the ILP metric. <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler">ILPScheduler</a></>}>
Schedule based on the ILP metric. <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/sunitorder">SUnitOrder&lt;IsReverse&gt;</a></>}>
Apply a less-than relation on the node order, which corresponds to the instruction order prior to scheduling. <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/sunitorder/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler">InstructionShuffler</a></>}>
Reorder instructions as much as possible. <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/graphtraits-3e4d2beef0711eb028dcc7799677e405">GraphTraits&lt;ScheduleDAGMI *&gt;</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405">DOTGraphTraits&lt;ScheduleDAGMI *&gt;</a></>}>
</MembersIndexItem>

</MembersIndex>

## Typedefs Index

<MembersIndex>

<MembersIndexItem
  type="using"
  name={<><a href="#aee652267c4ed8c882f06243aa0d601dd">MBBRegionsVector</a> = <a href="/docs/api/classes/llvm/smallvector">SmallVector</a>&lt; SchedRegion, 16 &gt;</>}>
</MembersIndexItem>

</MembersIndex>

## Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a77e51ffc94a77ff8e4778e59a02e7b67">checkResourceLimit</a> (unsigned LFactor, unsigned Count, unsigned Latency, bool AfterSchedNode)</>}>
Given a Count of resource usage and a Latency value, return true if a <a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> becomes resource limited. <a href="#a77e51ffc94a77ff8e4778e59a02e7b67">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a4d6bf176cc854701f61fba566b9dbf9b">computeRemLatency</a> (SchedBoundary &amp;CurrZone)</>}>
Compute remaining latency. <a href="#a4d6bf176cc854701f61fba566b9dbf9b">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;</>}
  name={<><a href="#abd6b45623aab101450023f187488ad88">createConvergingSched</a> (MachineSchedContext &#42;C)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;</>}
  name={<><a href="#aea7e1660e87235378f5cc48ccb4ae84d">createILPMaxScheduler</a> (MachineSchedContext &#42;C)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;</>}
  name={<><a href="#af4d9ddf767f3d44d93ad376a247dabe4">createILPMinScheduler</a> (MachineSchedContext &#42;C)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;</>}
  name={<><a href="#a781e910364813dd3c1677ab7852630a6">createInstructionShuffler</a> (MachineSchedContext &#42;C)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ae1be3a2fc5dfa3281d32b6fb4e4ea6dd">getSchedRegions</a> (MachineBasicBlock &#42;MBB, MBBRegionsVector &amp;Regions, bool RegionsTopDown)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a43709087555742d45e0c99ab89ac1df3">INITIALIZE&#95;PASS&#95;BEGIN</a> (MachineScheduler, DEBUG&#95;TYPE, &quot;Machine Instruction Scheduler&quot;, false, false) INITIALIZE&#95;PASS&#95;END(MachineScheduler</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a219604df9ff809f1af95c0ead787c789">INITIALIZE&#95;PASS&#95;BEGIN</a> (PostMachineScheduler, &quot;postmisched&quot;, &quot;PostRA Machine Instruction Scheduler&quot;, false, false) INITIALIZE&#95;PASS&#95;END(PostMachineScheduler</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a0a9255314dba663576d6bc1bb42762b1">isSchedBoundary</a> (MachineBasicBlock::iterator MI, MachineBasicBlock &#42;MBB, MachineFunction &#42;MF, const TargetInstrInfo &#42;TII)</>}>
Return true of the given instruction should not be included in a scheduling region. <a href="#a0a9255314dba663576d6bc1bb42762b1">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a></>}
  name={<><a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a> (MachineBasicBlock::const&#95;iterator I, MachineBasicBlock::const&#95;iterator End)</>}>
If this iterator is a debug value, increment until reaching the End or a non-debug instruction. <a href="#a1c8a9363a3eb113ca42064a03636b135">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a></>}
  name={<><a href="#aa9432402dc18539818e3dae69e135ed4">nextIfDebug</a> (MachineBasicBlock::iterator I, MachineBasicBlock::const&#95;iterator End)</>}>
Non-const version. <a href="#aa9432402dc18539818e3dae69e135ed4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a></>}
  name={<><a href="#a459acab05344caa836aa036f1829c928">priorNonDebug</a> (MachineBasicBlock::const&#95;iterator I, MachineBasicBlock::const&#95;iterator Beg)</>}>
Decrement this iterator until reaching the top or a non-debug instr. <a href="#a459acab05344caa836aa036f1829c928">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a></>}
  name={<><a href="#a24aad0e646c24622750ff2ee10b74109">priorNonDebug</a> (MachineBasicBlock::iterator I, MachineBasicBlock::const&#95;iterator Beg)</>}>
Non-const version. <a href="#a24aad0e646c24622750ff2ee10b74109">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a885c0b81f13eff56642e780a0a7cecff">sortIntervals</a> (const ResourceSegments::IntervalTy &amp;A, const ResourceSegments::IntervalTy &amp;B)</>}>
Sort predicate for the intervals stored in an instance of <a href="/docs/api/classes/llvm/resourcesegments">ResourceSegments</a>. <a href="#a885c0b81f13eff56642e780a0a7cecff">More...</a>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a0e6827ad30d1073413a3fc2d8cebe305">STATISTIC</a> (NumClustered, &quot;Number of load/store pairs clustered&quot;)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a> (GenericSchedulerBase::CandReason Reason, bool IsTop)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a3352d36ab68528af960439073f22b304">tracePick</a> (const GenericSchedulerBase::SchedCandidate &amp;Cand)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;</>}
  name={<><a href="#a7c2f26bf8531d7774d205e720a71d616">useDefaultMachineSched</a> (MachineSchedContext &#42;C)</>}>
A dummy default scheduler factory indicates whether the scheduler is overridden on the command line. <a href="#a7c2f26bf8531d7774d205e720a71d616">More...</a>
</MembersIndexItem>

</MembersIndex>

## Variables Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a></>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a030569d5a541b6110f2ae1b6a3413a58">DEBUG&#95;TYPE</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a></>}
  name={<><a href="#aa37bca43d96ba0bf7541b49375e9c4ec">DefaultSchedRegistry</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a2f23c1bd760a7a5a5acc6e4eb40bd9d9">EnableCyclicPath</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a4b2ef2249df68fd80eb12e019875a75c">EnableMachineSched</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a1b85cadc1b5f4497a2ef2371ce3fa3c4">EnableMemOpCluster</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ad6a82628c5bb536ea7591cc3d51ba235">EnablePostRAMachineSched</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a589614403a45de30e887d6401dc1be2a">EnableRegPressure</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a2e16e55de32fe349f3e8242166918205">Machine</a> <a href="/docs/api/classes/llvm/instruction">Instruction</a></>}
  name={<><a href="#a7ce570ab44c3e7edb0d04fab9dd1d687">false</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#a6dac5cd81207b66c491978be7b8fbcde">FastClusterThreshold</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a6d7874db6e333966be014090e66b309b">ForceFastCluster</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a></>}
  name={<><a href="#a615fca179bf3fe73ce3d5271d1710c7a">GenericSchedRegistry</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#a6523b0d71574a464a78e2e05bd67b543">HeaderColWidth</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a></>}
  name={<><a href="#a0c63cc9aec9e7f21b6c9fc9ad6abf545">ILPMaxRegistry</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a></>}
  name={<><a href="#afcd0814798a2d0868cec352f25fc932c">ILPMinRegistry</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> unsigned</>}
  name={<><a href="#a2876d288bd148637a0e8d79ce3f0f3fb">InvalidCycle</a> = ~0U</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; <a href="/docs/api/classes/llvm/machineschedregistry/#a9fec0ddb5cfb9db5082a914d99310c2e">MachineSchedRegistry::ScheduleDAGCtor</a>, false, <a href="/docs/api/classes/llvm/registerpassparser">RegisterPassParser</a>&lt; <a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a> &gt; &gt;</>}
  name={<><a href="#a46878327214ad358989afa9f97d835f6">MachineSchedOpt</a></>}>
MachineSchedOpt allows command line selection of the scheduler. <a href="#a46878327214ad358989afa9f97d835f6">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> unsigned</>}
  name={<><a href="#a20646b5e577c00ae6fc2912a4081f9d5">MinSubtreeSize</a> = 8</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#ae812475cdb74bfae4780368f4ff01ccf">MIResourceCutOff</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#a533a172b0f7e2e6d667464a68c6f30ea">MISchedCutoff</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#afc178c1fabdc9ea75b2e47e85c12e3df">MISchedDumpScheduleTrace</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a2d7fe448a57a131b2533e439fd6eae1e">MISchedSortResourcesInTrace</a></>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a38ac294860d16fa2065e091d3b1790cf">postmisched</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#af040ecdbfbf801186c7941597cc793a6">ReadyListLimit</a></>}>
Avoid quadratic complexity in unusually large basic blocks by limiting the size of the ready lists. <a href="#af040ecdbfbf801186c7941597cc793a6">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#a55fc025b3f9710787dfefd7a551c2568">SchedOnlyBlock</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#ae2b0d0345572d6718e219aa76d1d54edab45cffe084dd3d20d928bee85e7b0f21">std::string</a> &gt;</>}
  name={<><a href="#aa9e9eecb42c6e825c279845f69f28aa2">SchedOnlyFunc</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a2e16e55de32fe349f3e8242166918205">Machine</a> <a href="/docs/api/classes/llvm/instruction">Instruction</a></>}
  name={<><a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char &#42;</>}
  name={<><a href="#aaae6594fa7ded6088910716df9f47553">scheduleTableLegend</a> = &quot;  i: issue\\n  x: resource booked&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a></>}
  name={<><a href="#ac68c4196407c59fdf134079a44647f81">ShufflerRegistry</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#ac2b8a3811867143546f43d3adc8cd2f6">ViewMISchedCutoff</a></>}>
In some situations a few uninteresting nodes depend on nearly all other nodes in the graph, provide a cutoff to hide them. <a href="#ac2b8a3811867143546f43d3adc8cd2f6">More...</a>
</MembersIndexItem>

</MembersIndex>

## Defines Index

<MembersIndex>

<MembersIndexItem
  type="#define"
  name={<><a href="#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>&nbsp;&nbsp;&nbsp;&quot;machine-scheduler&quot;</>}>
</MembersIndexItem>

</MembersIndex>


<SectionDefinition>

## Typedefs

### MBBRegionsVector {#aee652267c4ed8c882f06243aa0d601dd}

<MemberDefinition
  prototype={<>using MBBRegionsVector =  SmallVector&lt;SchedRegion, 16&gt;</>}>

Definition at line <a href="#l00539">539</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Functions

### checkResourceLimit() {#a77e51ffc94a77ff8e4778e59a02e7b67}

<MemberDefinition
  prototype="static bool checkResourceLimit (unsigned LFactor, unsigned Count, unsigned Latency, bool AfterSchedNode)"
  labels = {["static"]}>
Given a Count of resource usage and a Latency value, return true if a <a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> becomes resource limited.

If we are checking after scheduling a node, we should return true when we just reach the resource limit.

Definition at line <a href="#l02234">2234</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### computeRemLatency() {#a4d6bf176cc854701f61fba566b9dbf9b}

<MemberDefinition
  prototype={<>static unsigned computeRemLatency (<a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &amp; CurrZone)</>}
  labels = {["static"]}>
Compute remaining latency.

We need this both to determine whether the overall schedule has become latency-limited and whether the instructions outside this zone are resource or latency limited.

The &quot;dependent&quot; latency is updated incrementally during scheduling as the max height/depth of scheduled nodes minus the cycles since it was scheduled: DLat = max (N.depth - (CurrCycle - N.ReadyCycle) for N in Zone

The &quot;independent&quot; latency is the max ready queue depth: ILat = max N.depth for N in Available|Pending

RemainingLatency is the greater of independent and dependent latency.

These computations are expensive, especially in DAGs with many edges, so only do them if necessary.

Definition at line <a href="#l03002">3002</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### createConvergingSched() {#abd6b45623aab101450023f187488ad88}

<MemberDefinition
  prototype={<>static ScheduleDAGInstrs &#42; createConvergingSched (<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42; C)</>}
  labels = {["static"]}>

Definition at line <a href="#l03863">3863</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### createILPMaxScheduler() {#aea7e1660e87235378f5cc48ccb4ae84d}

<MemberDefinition
  prototype={<>static ScheduleDAGInstrs &#42; createILPMaxScheduler (<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42; C)</>}
  labels = {["static"]}>

Definition at line <a href="#l04271">4271</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### createILPMinScheduler() {#af4d9ddf767f3d44d93ad376a247dabe4}

<MemberDefinition
  prototype={<>static ScheduleDAGInstrs &#42; createILPMinScheduler (<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42; C)</>}
  labels = {["static"]}>

Definition at line <a href="#l04274">4274</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### createInstructionShuffler() {#a781e910364813dd3c1677ab7852630a6}

<MemberDefinition
  prototype={<>static ScheduleDAGInstrs &#42; createInstructionShuffler (<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42; C)</>}
  labels = {["static"]}>

Definition at line <a href="#l04363">4363</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### getSchedRegions() {#ae1be3a2fc5dfa3281d32b6fb4e4ea6dd}

<MemberDefinition
  prototype={<>static void getSchedRegions (<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB, <a href="#aee652267c4ed8c882f06243aa0d601dd">MBBRegionsVector</a> &amp; Regions, bool RegionsTopDown)</>}
  labels = {["static"]}>

Definition at line <a href="#l00542">542</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### INITIALIZE&#95;PASS&#95;BEGIN() {#a43709087555742d45e0c99ab89ac1df3}

<MemberDefinition
  prototype={<>INITIALIZE&#95;PASS&#95;BEGIN (MachineScheduler, <a href="/docs/api/files/include/include/llvm/include/llvm/adt/genericcycleimpl-h/#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>, &quot;Machine <a href="/docs/api/classes/llvm/instruction">Instruction</a> Scheduler&quot;, false, false)</>}>

Definition at line <a href="#l00266">266</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### INITIALIZE&#95;PASS&#95;BEGIN() {#a219604df9ff809f1af95c0ead787c789}

<MemberDefinition
  prototype={<>INITIALIZE&#95;PASS&#95;BEGIN (PostMachineScheduler, &quot;postmisched&quot;, &quot;PostRA <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a2e16e55de32fe349f3e8242166918205">Machine</a> <a href="/docs/api/classes/llvm/instruction">Instruction</a> Scheduler&quot;, false, false)</>}>

Definition at line <a href="#l00297">297</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### isSchedBoundary() {#a0a9255314dba663576d6bc1bb42762b1}

<MemberDefinition
  prototype={<>static bool isSchedBoundary (<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> MI, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42; MBB, <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &#42; MF, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42; TII)</>}
  labels = {["static"]}>
Return true of the given instruction should not be included in a scheduling region.

<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler">MachineScheduler</a> does not currently support scheduling across calls. To handle calls, the DAG builder needs to be modified to create register anti/output dependencies on the registers clobbered by the call&#39;s regmask operand. In PreRA scheduling, the stack pointer adjustment already prevents scheduling across calls. In PostRA scheduling, we need the isCall to enforce the boundary, but there would be no benefit to postRA scheduling across calls this late anyway.

Definition at line <a href="#l00513">513</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### nextIfDebug() {#a1c8a9363a3eb113ca42064a03636b135}

<MemberDefinition
  prototype={<>static MachineBasicBlock::const&#95;iterator nextIfDebug (<a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> I, <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> End)</>}
  labels = {["static"]}>
If this iterator is a debug value, increment until reaching the End or a non-debug instruction.

Definition at line <a href="#l00371">371</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### nextIfDebug() {#aa9432402dc18539818e3dae69e135ed4}

<MemberDefinition
  prototype={<>static MachineBasicBlock::iterator nextIfDebug (<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> I, <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> End)</>}
  labels = {["static"]}>
Non-const version.

Definition at line <a href="#l00382">382</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### priorNonDebug() {#a459acab05344caa836aa036f1829c928}

<MemberDefinition
  prototype={<>static MachineBasicBlock::const&#95;iterator priorNonDebug (<a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> I, <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> Beg)</>}
  labels = {["static"]}>
Decrement this iterator until reaching the top or a non-debug instr.

Definition at line <a href="#l00350">350</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### priorNonDebug() {#a24aad0e646c24622750ff2ee10b74109}

<MemberDefinition
  prototype={<>static MachineBasicBlock::iterator priorNonDebug (<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> I, <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> Beg)</>}
  labels = {["static"]}>
Non-const version.

Definition at line <a href="#l00362">362</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### sortIntervals() {#a885c0b81f13eff56642e780a0a7cecff}

<MemberDefinition
  prototype={<>static bool sortIntervals (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> &amp; A, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> &amp; B)</>}
  labels = {["static"]}>
Sort predicate for the intervals stored in an instance of <a href="/docs/api/classes/llvm/resourcesegments">ResourceSegments</a>.

Intervals are always disjoint (no intersection for any pairs of intervals), therefore we can sort the totality of the intervals by looking only at the left boundary.

Definition at line <a href="#l04470">4470</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### STATISTIC() {#a0e6827ad30d1073413a3fc2d8cebe305}

<MemberDefinition
  prototype={<>STATISTIC (NumClustered, &quot;Number of <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpumarklastscratchload-cpp/#a8a3fe89940744b94ffe5dacd6704c2be">load</a>/store pairs clustered&quot;)</>}>

Definition at line <a href="#l00076">76</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### tracePick() {#a14c35b53586841aad69751a52b7d358a}

<MemberDefinition
  prototype={<>static void tracePick (<a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3">GenericSchedulerBase::CandReason</a> Reason, bool IsTop)</>}
  labels = {["static"]}>

Definition at line <a href="#l03236">3236</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### tracePick() {#a3352d36ab68528af960439073f22b304}

<MemberDefinition
  prototype={<>static void tracePick (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp; Cand)</>}
  labels = {["static"]}>

Definition at line <a href="#l03241">3241</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### useDefaultMachineSched() {#a7c2f26bf8531d7774d205e720a71d616}

<MemberDefinition
  prototype={<>static ScheduleDAGInstrs &#42; useDefaultMachineSched (<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42; C)</>}
  labels = {["static"]}>
A dummy default scheduler factory indicates whether the scheduler is overridden on the command line.

Definition at line <a href="#l00323">323</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Variables

### ColWidth {#aa0067e3bf6cee38792f2749e1d16fff4}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; ColWidth(&quot;misched-dump-schedule-trace-col-width&quot;, cl::Hidden, cl::desc(&quot;Set width of the columns showing resource booking.&quot;), cl::init(5))</>}
  labels = {["static"]}>

Definition at line <a href="#l00184">184</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### DEBUG&#95;TYPE {#a030569d5a541b6110f2ae1b6a3413a58}

<MemberDefinition
  prototype={<>DEBUG&#95;TYPE</>}>

Definition at line <a href="#l00273">273</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### DefaultSchedRegistry {#aa37bca43d96ba0bf7541b49375e9c4ec}

<MemberDefinition
  prototype={<>MachineSchedRegistry DefaultSchedRegistry(&quot;default&quot;, &quot;Use the target&#39;s default scheduler choice.&quot;, useDefaultMachineSched)</>}
  labels = {["static"]}>

Definition at line <a href="#l00335">335</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### EnableCyclicPath {#a2f23c1bd760a7a5a5acc6e4eb40bd9d9}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; EnableCyclicPath(&quot;misched-cyclicpath&quot;, cl::Hidden, cl::desc(&quot;Enable cyclic critical path analysis.&quot;), cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00158">158</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### EnableMachineSched {#a4b2ef2249df68fd80eb12e019875a75c}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; EnableMachineSched(&quot;enable-misched&quot;, cl::desc(&quot;Enable the machine instruction scheduling pass.&quot;), cl::init(true), cl::Hidden)</>}
  labels = {["static"]}>

Definition at line <a href="#l00338">338</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### EnableMemOpCluster {#a1b85cadc1b5f4497a2ef2371ce3fa3c4}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; EnableMemOpCluster(&quot;misched-cluster&quot;, cl::Hidden, cl::desc(&quot;Enable memop clustering.&quot;), cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00161">161</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### EnablePostRAMachineSched {#ad6a82628c5bb536ea7591cc3d51ba235}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; EnablePostRAMachineSched(&quot;enable-post-misched&quot;, cl::desc(&quot;Enable the post-ra machine instruction scheduling pass.&quot;), cl::init(true), cl::Hidden)</>}
  labels = {["static"]}>

Definition at line <a href="#l00343">343</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### EnableRegPressure {#a589614403a45de30e887d6401dc1be2a}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; EnableRegPressure(&quot;misched-regpressure&quot;, cl::Hidden, cl::desc(&quot;Enable register pressure scheduling.&quot;), cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00155">155</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### false {#a7ce570ab44c3e7edb0d04fab9dd1d687}

<MemberDefinition
  prototype="PostRA Machine Instruction false">

Definition at line <a href="#l00274">274</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### FastClusterThreshold {#a6dac5cd81207b66c491978be7b8fbcde}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; FastClusterThreshold(&quot;fast-cluster-threshold&quot;, cl::Hidden, cl::desc(&quot;The threshold for fast cluster&quot;), cl::init(1000))</>}
  labels = {["static"]}>

Definition at line <a href="#l00170">170</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### ForceFastCluster {#a6d7874db6e333966be014090e66b309b}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ForceFastCluster(&quot;force-fast-cluster&quot;, cl::Hidden, cl::desc(&quot;Switch to fast cluster algorithm with the lost &quot; &quot;of some fusion opportunities&quot;), cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00165">165</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### GenericSchedRegistry {#a615fca179bf3fe73ce3d5271d1710c7a}

<MemberDefinition
  prototype={<>MachineSchedRegistry GenericSchedRegistry(&quot;converge&quot;, &quot;Standard converging scheduler.&quot;, createConvergingSched)</>}
  labels = {["static"]}>

Definition at line <a href="#l03868">3868</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### HeaderColWidth {#a6523b0d71574a464a78e2e05bd67b543}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; HeaderColWidth(&quot;misched-dump-schedule-trace-col-header-width&quot;, cl::Hidden, cl::desc(&quot;Set width of the columns with &quot; &quot;the resources and schedule units&quot;), cl::init(19))</>}
  labels = {["static"]}>

Definition at line <a href="#l00179">179</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### ILPMaxRegistry {#a0c63cc9aec9e7f21b6c9fc9ad6abf545}

<MemberDefinition
  prototype={<>MachineSchedRegistry ILPMaxRegistry(&quot;ilpmax&quot;, &quot;Schedule bottom-up for max ILP&quot;, createILPMaxScheduler)</>}
  labels = {["static"]}>

Definition at line <a href="#l04278">4278</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### ILPMinRegistry {#afcd0814798a2d0868cec352f25fc932c}

<MemberDefinition
  prototype={<>MachineSchedRegistry ILPMinRegistry(&quot;ilpmin&quot;, &quot;Schedule bottom-up for min ILP&quot;, createILPMinScheduler)</>}
  labels = {["static"]}>

Definition at line <a href="#l04280">4280</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### InvalidCycle {#a2876d288bd148637a0e8d79ce3f0f3fb}

<MemberDefinition
  prototype="const unsigned InvalidCycle = ~0U"
  labels = {["static"]}>

Definition at line <a href="#l02226">2226</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### MachineSchedOpt {#a46878327214ad358989afa9f97d835f6}

<MemberDefinition
  prototype={<>cl::opt&lt; MachineSchedRegistry::ScheduleDAGCtor, false, RegisterPassParser&lt; MachineSchedRegistry &gt; &gt; MachineSchedOpt(&quot;misched&quot;, cl::init(&amp;useDefaultMachineSched), cl::Hidden, cl::desc(&quot;Machine instruction scheduler to use&quot;))</>}
  labels = {["static"]}>
MachineSchedOpt allows command line selection of the scheduler.

Definition at line <a href="#l00330">330</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### MinSubtreeSize {#a20646b5e577c00ae6fc2912a4081f9d5}

<MemberDefinition
  prototype="const unsigned MinSubtreeSize = 8"
  labels = {["static"]}>

Definition at line <a href="#l00197">197</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### MIResourceCutOff {#ae812475cdb74bfae4780368f4ff01ccf}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; MIResourceCutOff(&quot;misched-resource-cutoff&quot;, cl::Hidden, cl::desc(&quot;Number of intervals to track&quot;), cl::init(10))</>}
  labels = {["static"]}>

Definition at line <a href="#l00193">193</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### MISchedCutoff {#a533a172b0f7e2e6d667464a68c6f30ea}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; MISchedCutoff(&quot;misched-cutoff&quot;, cl::Hidden, cl::desc(&quot;Stop scheduling after N instructions&quot;), cl::init(~0U))</>}
  labels = {["static"]}>

Definition at line <a href="#l00141">141</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### MISchedDumpScheduleTrace {#afc178c1fabdc9ea75b2e47e85c12e3df}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; MISchedDumpScheduleTrace(&quot;misched-dump-schedule-trace&quot;, cl::Hidden, cl::init(false), cl::desc(&quot;Dump resource usage at schedule boundary.&quot;))</>}
  labels = {["static"]}>

Definition at line <a href="#l00175">175</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### MISchedSortResourcesInTrace {#a2d7fe448a57a131b2533e439fd6eae1e}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; MISchedSortResourcesInTrace(&quot;misched-sort-resources-in-trace&quot;, cl::Hidden, cl::init(true), cl::desc(&quot;Sort the resources printed in the dump trace&quot;))</>}
  labels = {["static"]}>

Definition at line <a href="#l00187">187</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### postmisched {#a38ac294860d16fa2065e091d3b1790cf}

<MemberDefinition
  prototype="postmisched">

Definition at line <a href="#l00302">302</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### ReadyListLimit {#af040ecdbfbf801186c7941597cc793a6}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; ReadyListLimit(&quot;misched-limit&quot;, cl::Hidden, cl::desc(&quot;Limit ready list to N instructions&quot;), cl::init(256))</>}
  labels = {["static"]}>
Avoid quadratic complexity in unusually large basic blocks by limiting the size of the ready lists.

Definition at line <a href="#l00152">152</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### SchedOnlyBlock {#a55fc025b3f9710787dfefd7a551c2568}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; SchedOnlyBlock(&quot;misched-only-block&quot;, cl::Hidden, cl::desc(&quot;Only schedule this MBB#&quot;))</>}
  labels = {["static"]}>

Definition at line <a href="#l00146">146</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### SchedOnlyFunc {#aa9e9eecb42c6e825c279845f69f28aa2}

<MemberDefinition
  prototype={<>cl::opt&lt; std::string &gt; SchedOnlyFunc(&quot;misched-only-func&quot;, cl::Hidden, cl::desc(&quot;Only schedule this function&quot;))</>}
  labels = {["static"]}>

Definition at line <a href="#l00144">144</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### Scheduler {#a1c735bd46fe1e1b5f6f85a710d99e149}

<MemberDefinition
  prototype="PostRA Machine Instruction Scheduler">

Definition at line <a href="#l00274">274</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### scheduleTableLegend {#aaae6594fa7ded6088910716df9f47553}

<MemberDefinition
  prototype={<>const char&#42; scheduleTableLegend = &quot;  i: issue\\n  x: resource booked&quot;</>}
  labels = {["static"]}>

Definition at line <a href="#l00991">991</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### ShufflerRegistry {#ac68c4196407c59fdf134079a44647f81}

<MemberDefinition
  prototype={<>MachineSchedRegistry ShufflerRegistry(&quot;shuffle&quot;, &quot;Shuffle machine instructions alternating directions&quot;, createInstructionShuffler)</>}
  labels = {["static"]}>

Definition at line <a href="#l04371">4371</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

### ViewMISchedCutoff {#ac2b8a3811867143546f43d3adc8cd2f6}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; ViewMISchedCutoff(&quot;view-misched-cutoff&quot;, cl::Hidden, cl::desc(&quot;Hide nodes with more predecessor/successor than cutoff&quot;))</>}
  labels = {["static"]}>
In some situations a few uninteresting nodes depend on nearly all other nodes in the graph, provide a cutoff to hide them.

Definition at line <a href="#l00138">138</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Defines

### DEBUG&#95;TYPE {#ad78e062f62e0d6e453941fb4ca843e4d}

<MemberDefinition
  prototype={<>#define DEBUG&#95;TYPE&nbsp;&nbsp;&nbsp;&quot;machine-scheduler&quot;</>}>

Definition at line <a href="#l00074">74</a> of file <a href="/docs/api/files/lib/lib/codegen/machinescheduler-cpp">MachineScheduler.cpp</a>.
</MemberDefinition>

</SectionDefinition>

## File Listing

The file content with the documentation metadata removed is:

<ProgramListing>

<Link id="l00001" /><CodeLine lineNumber="1"><Highlight kind="comment">//===- MachineScheduler.cpp - Machine Instruction Scheduler ---------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00002" /><CodeLine lineNumber="2"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00003" /><CodeLine lineNumber="3"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00004" /><CodeLine lineNumber="4"><Highlight kind="normal"></Highlight><Highlight kind="comment">// See https://llvm.org/LICENSE.txt for license information.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00005" /><CodeLine lineNumber="5"><Highlight kind="normal"></Highlight><Highlight kind="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00006" /><CodeLine lineNumber="6"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00007" /><CodeLine lineNumber="7"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00008" /><CodeLine lineNumber="8"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00009" /><CodeLine lineNumber="9"><Highlight kind="normal"></Highlight><Highlight kind="comment">// MachineScheduler schedules machine instructions after phi elimination. It</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00010" /><CodeLine lineNumber="10"><Highlight kind="normal"></Highlight><Highlight kind="comment">// preserves LiveIntervals so it can be invoked before register allocation.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00011" /><CodeLine lineNumber="11"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00012" /><CodeLine lineNumber="12"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00013" /><CodeLine lineNumber="13"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00014" /><CodeLine lineNumber="14"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinescheduler-h">llvm/CodeGen/MachineScheduler.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00015" /><CodeLine lineNumber="15"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/arrayref-h">llvm/ADT/ArrayRef.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00016" /><CodeLine lineNumber="16"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/bitvector-h">llvm/ADT/BitVector.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00017" /><CodeLine lineNumber="17"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/densemap-h">llvm/ADT/DenseMap.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00018" /><CodeLine lineNumber="18"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/priorityqueue-h">llvm/ADT/PriorityQueue.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00019" /><CodeLine lineNumber="19"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/stlextras-h">llvm/ADT/STLExtras.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00020" /><CodeLine lineNumber="20"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/smallvector-h">llvm/ADT/SmallVector.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00021" /><CodeLine lineNumber="21"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h">llvm/ADT/Statistic.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00022" /><CodeLine lineNumber="22"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/iterator-range-h">llvm/ADT/iterator&#95;range.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00023" /><CodeLine lineNumber="23"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/aliasanalysis-h">llvm/Analysis/AliasAnalysis.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00024" /><CodeLine lineNumber="24"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/liveinterval-h">llvm/CodeGen/LiveInterval.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00025" /><CodeLine lineNumber="25"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/liveintervals-h">llvm/CodeGen/LiveIntervals.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00026" /><CodeLine lineNumber="26"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinebasicblock-h">llvm/CodeGen/MachineBasicBlock.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00027" /><CodeLine lineNumber="27"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinedominators-h">llvm/CodeGen/MachineDominators.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00028" /><CodeLine lineNumber="28"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinefunction-h">llvm/CodeGen/MachineFunction.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00029" /><CodeLine lineNumber="29"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinefunctionpass-h">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00030" /><CodeLine lineNumber="30"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineinstr-h">llvm/CodeGen/MachineInstr.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00031" /><CodeLine lineNumber="31"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineloopinfo-h">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00032" /><CodeLine lineNumber="32"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoperand-h">llvm/CodeGen/MachineOperand.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00033" /><CodeLine lineNumber="33"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinepassregistry-h">llvm/CodeGen/MachinePassRegistry.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00034" /><CodeLine lineNumber="34"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineregisterinfo-h">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00035" /><CodeLine lineNumber="35"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/registerclassinfo-h">llvm/CodeGen/RegisterClassInfo.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00036" /><CodeLine lineNumber="36"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/registerpressure-h">llvm/CodeGen/RegisterPressure.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00037" /><CodeLine lineNumber="37"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/scheduledag-h">llvm/CodeGen/ScheduleDAG.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00038" /><CodeLine lineNumber="38"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/scheduledaginstrs-h">llvm/CodeGen/ScheduleDAGInstrs.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00039" /><CodeLine lineNumber="39"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/scheduledagmutation-h">llvm/CodeGen/ScheduleDAGMutation.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00040" /><CodeLine lineNumber="40"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/scheduledfs-h">llvm/CodeGen/ScheduleDFS.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00041" /><CodeLine lineNumber="41"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/schedulehazardrecognizer-h">llvm/CodeGen/ScheduleHazardRecognizer.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00042" /><CodeLine lineNumber="42"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/slotindexes-h">llvm/CodeGen/SlotIndexes.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00043" /><CodeLine lineNumber="43"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetframelowering-h">llvm/CodeGen/TargetFrameLowering.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00044" /><CodeLine lineNumber="44"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetinstrinfo-h">llvm/CodeGen/TargetInstrInfo.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00045" /><CodeLine lineNumber="45"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetlowering-h">llvm/CodeGen/TargetLowering.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00046" /><CodeLine lineNumber="46"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetpassconfig-h">llvm/CodeGen/TargetPassConfig.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00047" /><CodeLine lineNumber="47"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetregisterinfo-h">llvm/CodeGen/TargetRegisterInfo.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00048" /><CodeLine lineNumber="48"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetschedule-h">llvm/CodeGen/TargetSchedule.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00049" /><CodeLine lineNumber="49"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetsubtargetinfo-h">llvm/CodeGen/TargetSubtargetInfo.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00050" /><CodeLine lineNumber="50"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegentypes/machinevaluetype-h">llvm/CodeGenTypes/MachineValueType.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00051" /><CodeLine lineNumber="51"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;llvm/Config/llvm-config.h&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00052" /><CodeLine lineNumber="52"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/initializepasses-h">llvm/InitializePasses.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00053" /><CodeLine lineNumber="53"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/mc/lanebitmask-h">llvm/MC/LaneBitmask.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00054" /><CodeLine lineNumber="54"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/pass-h">llvm/Pass.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00055" /><CodeLine lineNumber="55"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h">llvm/Support/CommandLine.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00056" /><CodeLine lineNumber="56"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/compiler-h">llvm/Support/Compiler.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00057" /><CodeLine lineNumber="57"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h">llvm/Support/Debug.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00058" /><CodeLine lineNumber="58"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h">llvm/Support/ErrorHandling.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00059" /><CodeLine lineNumber="59"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/graphwriter-h">llvm/Support/GraphWriter.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00060" /><CodeLine lineNumber="60"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/raw-ostream-h">llvm/Support/raw&#95;ostream.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00061" /><CodeLine lineNumber="61"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;algorithm&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00062" /><CodeLine lineNumber="62"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;cassert&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00063" /><CodeLine lineNumber="63"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;cstdint&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00064" /><CodeLine lineNumber="64"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;iterator&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00065" /><CodeLine lineNumber="65"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;limits&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00066" /><CodeLine lineNumber="66"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;memory&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00067" /><CodeLine lineNumber="67"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;string&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00068" /><CodeLine lineNumber="68"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;tuple&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00069" /><CodeLine lineNumber="69"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;utility&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00070" /><CodeLine lineNumber="70"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;vector&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00071" /><CodeLine lineNumber="71"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00072" /><CodeLine lineNumber="72"><Highlight kind="normal"></Highlight><Highlight kind="keyword">using namespace </Highlight><Highlight kind="normal"><a href="/docs/api/namespaces/llvm">llvm</a>;</Highlight></CodeLine>
<Link id="l00073" /><CodeLine lineNumber="73"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00074" /><CodeLine lineNumber="74" lineLink="#ad78e062f62e0d6e453941fb4ca843e4d"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#define DEBUG&#95;TYPE &quot;machine-scheduler&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00075" /><CodeLine lineNumber="75"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00076" /><CodeLine lineNumber="76" lineLink="#a0e6827ad30d1073413a3fc2d8cebe305"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h/#ad6117415b93e5675d5a6c8e1855b3b2f">STATISTIC</a>(NumClustered, </Highlight><Highlight kind="stringliteral">&quot;Number of load/store pairs clustered&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00077" /><CodeLine lineNumber="77"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00078" /><CodeLine lineNumber="78"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal"><a href="/docs/api/namespaces/llvm">llvm</a> &#123;</Highlight></CodeLine>
<Link id="l00079" /><CodeLine lineNumber="79"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00080" /><CodeLine lineNumber="80" lineLink="/docs/api/namespaces/llvm/#ad862bfb705d5dd126e0e49bfcb6f9e62"><Highlight kind="normal"><a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;MISched::Direction&gt;</a> <a href="/docs/api/namespaces/llvm/#aa9ff814049edfef549accbca1a8e9eff">PreRADirection</a>(</Highlight></CodeLine>
<Link id="l00081" /><CodeLine lineNumber="81"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;misched-prera-direction&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00082" /><CodeLine lineNumber="82"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Pre reg-alloc list scheduling direction&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00083" /><CodeLine lineNumber="83"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(<a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3ad688a19af1da6802784dc78a425d3923">MISched::Unspecified</a>),</Highlight></CodeLine>
<Link id="l00084" /><CodeLine lineNumber="84"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a8fa743aa76b6902028f8a643dfb87171">cl::values</a>(</Highlight></CodeLine>
<Link id="l00085" /><CodeLine lineNumber="85"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3ae89742249a15ad5696e3dcec82f0e76a">MISched::TopDown</a>, </Highlight><Highlight kind="stringliteral">&quot;topdown&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00086" /><CodeLine lineNumber="86"><Highlight kind="normal">                   </Highlight><Highlight kind="stringliteral">&quot;Force top-down pre reg-alloc list scheduling&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00087" /><CodeLine lineNumber="87"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3abd98ce24773c9ca1e3f7ce3c541e43ea">MISched::BottomUp</a>, </Highlight><Highlight kind="stringliteral">&quot;bottomup&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00088" /><CodeLine lineNumber="88"><Highlight kind="normal">                   </Highlight><Highlight kind="stringliteral">&quot;Force bottom-up pre reg-alloc list scheduling&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00089" /><CodeLine lineNumber="89"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3aab012f17d1537ed7a7c6d45b1d2fc0e9">MISched::Bidirectional</a>, </Highlight><Highlight kind="stringliteral">&quot;bidirectional&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00090" /><CodeLine lineNumber="90"><Highlight kind="normal">                   </Highlight><Highlight kind="stringliteral">&quot;Force bidirectional pre reg-alloc list scheduling&quot;</Highlight><Highlight kind="normal">)));</Highlight></CodeLine>
<Link id="l00091" /><CodeLine lineNumber="91"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00092" /><CodeLine lineNumber="92" lineLink="/docs/api/namespaces/llvm/#a1e5fc889b7ee01722dbdfb92df8cb7df"><Highlight kind="normal"><a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;MISched::Direction&gt;</a> <a href="/docs/api/namespaces/llvm/#a1e5fc889b7ee01722dbdfb92df8cb7df">PostRADirection</a>(</Highlight></CodeLine>
<Link id="l00093" /><CodeLine lineNumber="93"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;misched-postra-direction&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00094" /><CodeLine lineNumber="94"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Post reg-alloc list scheduling direction&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00095" /><CodeLine lineNumber="95"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(<a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3ad688a19af1da6802784dc78a425d3923">MISched::Unspecified</a>),</Highlight></CodeLine>
<Link id="l00096" /><CodeLine lineNumber="96"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a8fa743aa76b6902028f8a643dfb87171">cl::values</a>(</Highlight></CodeLine>
<Link id="l00097" /><CodeLine lineNumber="97"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3ae89742249a15ad5696e3dcec82f0e76a">MISched::TopDown</a>, </Highlight><Highlight kind="stringliteral">&quot;topdown&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00098" /><CodeLine lineNumber="98"><Highlight kind="normal">                   </Highlight><Highlight kind="stringliteral">&quot;Force top-down post reg-alloc list scheduling&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00099" /><CodeLine lineNumber="99"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3abd98ce24773c9ca1e3f7ce3c541e43ea">MISched::BottomUp</a>, </Highlight><Highlight kind="stringliteral">&quot;bottomup&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00100" /><CodeLine lineNumber="100"><Highlight kind="normal">                   </Highlight><Highlight kind="stringliteral">&quot;Force bottom-up post reg-alloc list scheduling&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00101" /><CodeLine lineNumber="101"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3aab012f17d1537ed7a7c6d45b1d2fc0e9">MISched::Bidirectional</a>, </Highlight><Highlight kind="stringliteral">&quot;bidirectional&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00102" /><CodeLine lineNumber="102"><Highlight kind="normal">                   </Highlight><Highlight kind="stringliteral">&quot;Force bidirectional post reg-alloc list scheduling&quot;</Highlight><Highlight kind="normal">)));</Highlight></CodeLine>
<Link id="l00103" /><CodeLine lineNumber="103"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00104" /><CodeLine lineNumber="104"><Highlight kind="normal"><a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></Highlight></CodeLine>
<Link id="l00105" /><CodeLine lineNumber="105" lineLink="/docs/api/namespaces/llvm/#a82ab0315644106de03b36f143328179f"><Highlight kind="normal"><a href="/docs/api/namespaces/llvm/#a82ab0315644106de03b36f143328179f">DumpCriticalPathLength</a>(</Highlight><Highlight kind="stringliteral">&quot;misched-dcpl&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00106" /><CodeLine lineNumber="106"><Highlight kind="normal">                       <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Print critical path length to stdout&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00107" /><CodeLine lineNumber="107"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00108" /><CodeLine lineNumber="108" lineLink="/docs/api/namespaces/llvm/#a8627addd5d299219f6bbf71de8e1e9db"><Highlight kind="normal"><a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>(</Highlight></CodeLine>
<Link id="l00109" /><CodeLine lineNumber="109"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;verify-misched&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00110" /><CodeLine lineNumber="110"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Verify machine instrs before and after machine scheduling&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00111" /><CodeLine lineNumber="111"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00112" /><CodeLine lineNumber="112"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#ifndef NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00113" /><CodeLine lineNumber="113" lineLink="/docs/api/namespaces/llvm/#a910a848984f22eb7394be9141712cd47"><Highlight kind="normal"><a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="/docs/api/namespaces/llvm/#a5ec9cfe35d76125af923975fa0c1730a">ViewMISchedDAGs</a>(</Highlight></CodeLine>
<Link id="l00114" /><CodeLine lineNumber="114"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;view-misched-dags&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00115" /><CodeLine lineNumber="115"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Pop up a window to show MISched dags after they are processed&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00116" /><CodeLine lineNumber="116" lineLink="/docs/api/namespaces/llvm/#a69f79e7e5cdcd47a3cdfb33f1dbd89ef"><Highlight kind="normal"><a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="/docs/api/namespaces/llvm/#a0e9fde7ed08fd233750d0a947147dfa1">PrintDAGs</a>(</Highlight><Highlight kind="stringliteral">&quot;misched-print-dags&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00117" /><CodeLine lineNumber="117"><Highlight kind="normal">                        <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Print schedule DAGs&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00118" /><CodeLine lineNumber="118" lineLink="/docs/api/namespaces/llvm/#a3f253389931150fd73bfae4cd61c3ae6"><Highlight kind="normal"><a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="/docs/api/namespaces/llvm/#a3f253389931150fd73bfae4cd61c3ae6">MISchedDumpReservedCycles</a>(</Highlight></CodeLine>
<Link id="l00119" /><CodeLine lineNumber="119"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;misched-dump-reserved-cycles&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00120" /><CodeLine lineNumber="120"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Dump resource usage at schedule boundary.&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00121" /><CodeLine lineNumber="121" lineLink="/docs/api/namespaces/llvm/#afaad94654d336ce094254a1c694ee4e5"><Highlight kind="normal"><a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="/docs/api/namespaces/llvm/#afaad94654d336ce094254a1c694ee4e5">MischedDetailResourceBooking</a>(</Highlight></CodeLine>
<Link id="l00122" /><CodeLine lineNumber="122"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;misched-detail-resource-booking&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00123" /><CodeLine lineNumber="123"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Show details of invoking getNextResoufceCycle.&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00124" /><CodeLine lineNumber="124"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00125" /><CodeLine lineNumber="125"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a5ec9cfe35d76125af923975fa0c1730a">ViewMISchedDAGs</a> = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00126" /><CodeLine lineNumber="126"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a0e9fde7ed08fd233750d0a947147dfa1">PrintDAGs</a> = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00127" /><CodeLine lineNumber="127"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#afaad94654d336ce094254a1c694ee4e5">MischedDetailResourceBooking</a> = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00128" /><CodeLine lineNumber="128"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#ifdef LLVM&#95;ENABLE&#95;DUMP</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00129" /><CodeLine lineNumber="129"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a3f253389931150fd73bfae4cd61c3ae6">MISchedDumpReservedCycles</a> = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00130" /><CodeLine lineNumber="130"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif </Highlight><Highlight kind="comment">// LLVM&#95;ENABLE&#95;DUMP</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00131" /><CodeLine lineNumber="131"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif </Highlight><Highlight kind="comment">// NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00132" /><CodeLine lineNumber="132"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00133" /><CodeLine lineNumber="133"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// end namespace llvm</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00134" /><CodeLine lineNumber="134"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00135" /><CodeLine lineNumber="135"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#ifndef NDEBUG</Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00136" /><CodeLine lineNumber="136"><Highlight kind="comment">/// In some situations a few uninteresting nodes depend on nearly all other</Highlight></CodeLine>
<Link id="l00137" /><CodeLine lineNumber="137"><Highlight kind="comment">/// nodes in the graph, provide a cutoff to hide them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00138" /><CodeLine lineNumber="138" lineLink="#ac2b8a3811867143546f43d3adc8cd2f6"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a> <a href="#ac2b8a3811867143546f43d3adc8cd2f6">ViewMISchedCutoff</a>(</Highlight><Highlight kind="stringliteral">&quot;view-misched-cutoff&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00139" /><CodeLine lineNumber="139"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Hide nodes with more predecessor/successor than cutoff&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00140" /><CodeLine lineNumber="140"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00141" /><CodeLine lineNumber="141" lineLink="#a533a172b0f7e2e6d667464a68c6f30ea"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a> <a href="#a533a172b0f7e2e6d667464a68c6f30ea">MISchedCutoff</a>(</Highlight><Highlight kind="stringliteral">&quot;misched-cutoff&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00142" /><CodeLine lineNumber="142"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Stop scheduling after N instructions&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(~0U));</Highlight></CodeLine>
<Link id="l00143" /><CodeLine lineNumber="143"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00144" /><CodeLine lineNumber="144" lineLink="#aa9e9eecb42c6e825c279845f69f28aa2"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;std::string&gt;</a> <a href="#aa9e9eecb42c6e825c279845f69f28aa2">SchedOnlyFunc</a>(</Highlight><Highlight kind="stringliteral">&quot;misched-only-func&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00145" /><CodeLine lineNumber="145"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Only schedule this function&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00146" /><CodeLine lineNumber="146" lineLink="#a55fc025b3f9710787dfefd7a551c2568"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a> <a href="#a55fc025b3f9710787dfefd7a551c2568">SchedOnlyBlock</a>(</Highlight><Highlight kind="stringliteral">&quot;misched-only-block&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00147" /><CodeLine lineNumber="147"><Highlight kind="normal">                                        <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Only schedule this MBB#&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00148" /><CodeLine lineNumber="148"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif </Highlight><Highlight kind="comment">// NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00149" /><CodeLine lineNumber="149"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00150" /><CodeLine lineNumber="150"><Highlight kind="comment">/// Avoid quadratic complexity in unusually large basic blocks by limiting the</Highlight></CodeLine>
<Link id="l00151" /><CodeLine lineNumber="151"><Highlight kind="comment">/// size of the ready lists.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00152" /><CodeLine lineNumber="152" lineLink="#af040ecdbfbf801186c7941597cc793a6"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a> <a href="#af040ecdbfbf801186c7941597cc793a6">ReadyListLimit</a>(</Highlight><Highlight kind="stringliteral">&quot;misched-limit&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00153" /><CodeLine lineNumber="153"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Limit ready list to N instructions&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(256));</Highlight></CodeLine>
<Link id="l00154" /><CodeLine lineNumber="154"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00155" /><CodeLine lineNumber="155" lineLink="#a589614403a45de30e887d6401dc1be2a"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a589614403a45de30e887d6401dc1be2a">EnableRegPressure</a>(</Highlight><Highlight kind="stringliteral">&quot;misched-regpressure&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00156" /><CodeLine lineNumber="156"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Enable register pressure scheduling.&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00157" /><CodeLine lineNumber="157"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00158" /><CodeLine lineNumber="158" lineLink="#a2f23c1bd760a7a5a5acc6e4eb40bd9d9"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a2f23c1bd760a7a5a5acc6e4eb40bd9d9">EnableCyclicPath</a>(</Highlight><Highlight kind="stringliteral">&quot;misched-cyclicpath&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00159" /><CodeLine lineNumber="159"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Enable cyclic critical path analysis.&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00160" /><CodeLine lineNumber="160"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00161" /><CodeLine lineNumber="161" lineLink="#a1b85cadc1b5f4497a2ef2371ce3fa3c4"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a1b85cadc1b5f4497a2ef2371ce3fa3c4">EnableMemOpCluster</a>(</Highlight><Highlight kind="stringliteral">&quot;misched-cluster&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00162" /><CodeLine lineNumber="162"><Highlight kind="normal">                                        <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Enable memop clustering.&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00163" /><CodeLine lineNumber="163"><Highlight kind="normal">                                        <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00164" /><CodeLine lineNumber="164"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></Highlight></CodeLine>
<Link id="l00165" /><CodeLine lineNumber="165" lineLink="#a6d7874db6e333966be014090e66b309b"><Highlight kind="normal">    <a href="#a6d7874db6e333966be014090e66b309b">ForceFastCluster</a>(</Highlight><Highlight kind="stringliteral">&quot;force-fast-cluster&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00166" /><CodeLine lineNumber="166"><Highlight kind="normal">                     <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Switch to fast cluster algorithm with the lost &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00167" /><CodeLine lineNumber="167"><Highlight kind="normal">                              </Highlight><Highlight kind="stringliteral">&quot;of some fusion opportunities&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00168" /><CodeLine lineNumber="168"><Highlight kind="normal">                     <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00169" /><CodeLine lineNumber="169"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a></Highlight></CodeLine>
<Link id="l00170" /><CodeLine lineNumber="170" lineLink="#a6dac5cd81207b66c491978be7b8fbcde"><Highlight kind="normal">    <a href="#a6dac5cd81207b66c491978be7b8fbcde">FastClusterThreshold</a>(</Highlight><Highlight kind="stringliteral">&quot;fast-cluster-threshold&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00171" /><CodeLine lineNumber="171"><Highlight kind="normal">                         <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;The threshold for fast cluster&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00172" /><CodeLine lineNumber="172"><Highlight kind="normal">                         <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(1000));</Highlight></CodeLine>
<Link id="l00173" /><CodeLine lineNumber="173"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00174" /><CodeLine lineNumber="174"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#if !defined(NDEBUG) || defined(LLVM&#95;ENABLE&#95;DUMP)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00175" /><CodeLine lineNumber="175" lineLink="#afc178c1fabdc9ea75b2e47e85c12e3df"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#afc178c1fabdc9ea75b2e47e85c12e3df">MISchedDumpScheduleTrace</a>(</Highlight></CodeLine>
<Link id="l00176" /><CodeLine lineNumber="176"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;misched-dump-schedule-trace&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00177" /><CodeLine lineNumber="177"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Dump resource usage at schedule boundary.&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00178" /><CodeLine lineNumber="178"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a></Highlight></CodeLine>
<Link id="l00179" /><CodeLine lineNumber="179" lineLink="#a6523b0d71574a464a78e2e05bd67b543"><Highlight kind="normal">    <a href="#a6523b0d71574a464a78e2e05bd67b543">HeaderColWidth</a>(</Highlight><Highlight kind="stringliteral">&quot;misched-dump-schedule-trace-col-header-width&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00180" /><CodeLine lineNumber="180"><Highlight kind="normal">                   <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Set width of the columns with &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00181" /><CodeLine lineNumber="181"><Highlight kind="normal">                            </Highlight><Highlight kind="stringliteral">&quot;the resources and schedule units&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00182" /><CodeLine lineNumber="182"><Highlight kind="normal">                   <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(19));</Highlight></CodeLine>
<Link id="l00183" /><CodeLine lineNumber="183"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a></Highlight></CodeLine>
<Link id="l00184" /><CodeLine lineNumber="184" lineLink="#aa0067e3bf6cee38792f2749e1d16fff4"><Highlight kind="normal">    <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>(</Highlight><Highlight kind="stringliteral">&quot;misched-dump-schedule-trace-col-width&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00185" /><CodeLine lineNumber="185"><Highlight kind="normal">             <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Set width of the columns showing resource booking.&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00186" /><CodeLine lineNumber="186"><Highlight kind="normal">             <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(5));</Highlight></CodeLine>
<Link id="l00187" /><CodeLine lineNumber="187" lineLink="#a2d7fe448a57a131b2533e439fd6eae1e"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a2d7fe448a57a131b2533e439fd6eae1e">MISchedSortResourcesInTrace</a>(</Highlight></CodeLine>
<Link id="l00188" /><CodeLine lineNumber="188"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;misched-sort-resources-in-trace&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00189" /><CodeLine lineNumber="189"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Sort the resources printed in the dump trace&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00190" /><CodeLine lineNumber="190"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00191" /><CodeLine lineNumber="191"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00192" /><CodeLine lineNumber="192"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a></Highlight></CodeLine>
<Link id="l00193" /><CodeLine lineNumber="193" lineLink="#ae812475cdb74bfae4780368f4ff01ccf"><Highlight kind="normal">    <a href="#ae812475cdb74bfae4780368f4ff01ccf">MIResourceCutOff</a>(</Highlight><Highlight kind="stringliteral">&quot;misched-resource-cutoff&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00194" /><CodeLine lineNumber="194"><Highlight kind="normal">                     <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Number of intervals to track&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(10));</Highlight></CodeLine>
<Link id="l00195" /><CodeLine lineNumber="195"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00196" /><CodeLine lineNumber="196"><Highlight kind="normal"></Highlight><Highlight kind="comment">// DAG subtrees must have at least this many nodes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00197" /><CodeLine lineNumber="197" lineLink="#a20646b5e577c00ae6fc2912a4081f9d5"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="#a20646b5e577c00ae6fc2912a4081f9d5">MinSubtreeSize</a> = 8;</Highlight></CodeLine>
<Link id="l00198" /><CodeLine lineNumber="198"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00199" /><CodeLine lineNumber="199"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Pin the vtables to this file.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00200" /><CodeLine lineNumber="200"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> MachineSchedStrategy::anchor() &#123;&#125;</Highlight></CodeLine>
<Link id="l00201" /><CodeLine lineNumber="201"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00202" /><CodeLine lineNumber="202"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> ScheduleDAGMutation::anchor() &#123;&#125;</Highlight></CodeLine>
<Link id="l00203" /><CodeLine lineNumber="203"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00204" /><CodeLine lineNumber="204"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00205" /><CodeLine lineNumber="205"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Machine Instruction Scheduling Pass and Registry</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00206" /><CodeLine lineNumber="206"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00207" /><CodeLine lineNumber="207"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00208" /><CodeLine lineNumber="208" lineLink="/docs/api/structs/llvm/machineschedcontext/#ac8df817832c60969961bfb498488fc70"><Highlight kind="normal"><a href="/docs/api/structs/llvm/machineschedcontext/#ac8df817832c60969961bfb498488fc70">MachineSchedContext::MachineSchedContext</a>() &#123;</Highlight></CodeLine>
<Link id="l00209" /><CodeLine lineNumber="209"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/machineschedcontext/#a510c29d57e9f0343df48b7c58cb89228">RegClassInfo</a> = </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/registerclassinfo">RegisterClassInfo</a>();</Highlight></CodeLine>
<Link id="l00210" /><CodeLine lineNumber="210"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00211" /><CodeLine lineNumber="211"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00212" /><CodeLine lineNumber="212" lineLink="/docs/api/structs/llvm/machineschedcontext/#ac66a5fd1e8991685c46cfc1652bfeeaf"><Highlight kind="normal"><a href="/docs/api/structs/llvm/machineschedcontext/#ac66a5fd1e8991685c46cfc1652bfeeaf">MachineSchedContext::~MachineSchedContext</a>() &#123;</Highlight></CodeLine>
<Link id="l00213" /><CodeLine lineNumber="213"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">delete</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/machineschedcontext/#a510c29d57e9f0343df48b7c58cb89228">RegClassInfo</a>;</Highlight></CodeLine>
<Link id="l00214" /><CodeLine lineNumber="214"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00215" /><CodeLine lineNumber="215"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00216" /><CodeLine lineNumber="216" lineLink="/docs/api/namespaces/anonymous-machinescheduler-cpp-"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00217" /><CodeLine lineNumber="217"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00218" /><CodeLine lineNumber="218"><Highlight kind="comment">/// Base class for a machine scheduler class that can run at any point.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00219" /><CodeLine lineNumber="219" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase"><Highlight kind="normal"></Highlight><Highlight kind="keyword">class </Highlight><Highlight kind="normal"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#abed31a5bcff83980a1e38c534031aae8">MachineSchedulerBase</a> : </Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/machineschedcontext/#ac8df817832c60969961bfb498488fc70">MachineSchedContext</a>,</Highlight></CodeLine>
<Link id="l00220" /><CodeLine lineNumber="220"><Highlight kind="normal">                             </Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machinefunctionpass/#a29c81d2386f4a727c6d33413807530c8">MachineFunctionPass</a> &#123;</Highlight></CodeLine>
<Link id="l00221" /><CodeLine lineNumber="221"><Highlight kind="normal"></Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l00222" /><CodeLine lineNumber="222" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#abed31a5bcff83980a1e38c534031aae8"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#abed31a5bcff83980a1e38c534031aae8">MachineSchedulerBase</a>(</Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> &amp;<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>): <a href="/docs/api/classes/llvm/machinefunctionpass/#a29c81d2386f4a727c6d33413807530c8">MachineFunctionPass</a>(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;&#125;</Highlight></CodeLine>
<Link id="l00223" /><CodeLine lineNumber="223"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00224" /><CodeLine lineNumber="224"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/object/archivewriter-cpp/#aa9f638c7ae7fdd206a6c60e26bef9751">print</a>(<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;O, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/module">Module</a>&#42; = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">) </Highlight><Highlight kind="keyword">const override</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00225" /><CodeLine lineNumber="225"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00226" /><CodeLine lineNumber="226"><Highlight kind="normal"></Highlight><Highlight kind="keyword">protected</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l00227" /><CodeLine lineNumber="227"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> scheduleRegions(<a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &amp;<a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> FixKillFlags);</Highlight></CodeLine>
<Link id="l00228" /><CodeLine lineNumber="228"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l00229" /><CodeLine lineNumber="229"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00230" /><CodeLine lineNumber="230"><Highlight kind="comment">/// MachineScheduler runs after coalescing and before register allocation.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00231" /><CodeLine lineNumber="231" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler"><Highlight kind="normal"></Highlight><Highlight kind="keyword">class </Highlight><Highlight kind="normal"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a0107c12ed6aa7d7935b96015ef5b9ca4">MachineScheduler</a> : </Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#abed31a5bcff83980a1e38c534031aae8">MachineSchedulerBase</a> &#123;</Highlight></CodeLine>
<Link id="l00232" /><CodeLine lineNumber="232"><Highlight kind="normal"></Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l00233" /><CodeLine lineNumber="233"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a0107c12ed6aa7d7935b96015ef5b9ca4">MachineScheduler</a>();</Highlight></CodeLine>
<Link id="l00234" /><CodeLine lineNumber="234"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00235" /><CodeLine lineNumber="235"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#acfe823cc8d6d37bb30948aa5598ebbcd">getAnalysisUsage</a>(<a href="/docs/api/classes/llvm/analysisusage">AnalysisUsage</a> &amp;AU) </Highlight><Highlight kind="keyword">const override</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00236" /><CodeLine lineNumber="236"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00237" /><CodeLine lineNumber="237"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a8539983d1d0a8b07d92b91c16b9f7a5a">runOnMachineFunction</a>(<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a>&amp;) </Highlight><Highlight kind="keyword">override</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00238" /><CodeLine lineNumber="238"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00239" /><CodeLine lineNumber="239" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a54a8e8efbbc1034741164545a4777749"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a54a8e8efbbc1034741164545a4777749">ID</a>; </Highlight><Highlight kind="comment">// Class identification, replacement for typeinfo</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00240" /><CodeLine lineNumber="240"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00241" /><CodeLine lineNumber="241"><Highlight kind="normal"></Highlight><Highlight kind="keyword">protected</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l00242" /><CodeLine lineNumber="242"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a17ba7babfe87314e8d1fe3db5a8dc805">createMachineScheduler</a>();</Highlight></CodeLine>
<Link id="l00243" /><CodeLine lineNumber="243"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l00244" /><CodeLine lineNumber="244"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00245" /><CodeLine lineNumber="245"><Highlight kind="comment">/// PostMachineScheduler runs after shortly before code emission.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00246" /><CodeLine lineNumber="246" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler"><Highlight kind="normal"></Highlight><Highlight kind="keyword">class </Highlight><Highlight kind="normal"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a95ac78157333c863b9fb682756477f6e">PostMachineScheduler</a> : </Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#abed31a5bcff83980a1e38c534031aae8">MachineSchedulerBase</a> &#123;</Highlight></CodeLine>
<Link id="l00247" /><CodeLine lineNumber="247"><Highlight kind="normal"></Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l00248" /><CodeLine lineNumber="248"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a95ac78157333c863b9fb682756477f6e">PostMachineScheduler</a>();</Highlight></CodeLine>
<Link id="l00249" /><CodeLine lineNumber="249"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00250" /><CodeLine lineNumber="250"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a065b9f9c1b17415e3e76fb115be4f7b4">getAnalysisUsage</a>(<a href="/docs/api/classes/llvm/analysisusage">AnalysisUsage</a> &amp;AU) </Highlight><Highlight kind="keyword">const override</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00251" /><CodeLine lineNumber="251"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00252" /><CodeLine lineNumber="252"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#ab1dc85fd08ff7aa2a4057683e7a4dc8f">runOnMachineFunction</a>(<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a>&amp;) </Highlight><Highlight kind="keyword">override</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00253" /><CodeLine lineNumber="253"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00254" /><CodeLine lineNumber="254" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b05199064ffa4992b9874f2470dad1a"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b05199064ffa4992b9874f2470dad1a">ID</a>; </Highlight><Highlight kind="comment">// Class identification, replacement for typeinfo</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00255" /><CodeLine lineNumber="255"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00256" /><CodeLine lineNumber="256"><Highlight kind="normal"></Highlight><Highlight kind="keyword">protected</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l00257" /><CodeLine lineNumber="257"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b741fadafc61d8c2e6409af2fc24e35">createPostMachineScheduler</a>();</Highlight></CodeLine>
<Link id="l00258" /><CodeLine lineNumber="258"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l00259" /><CodeLine lineNumber="259"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00260" /><CodeLine lineNumber="260"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// end anonymous namespace</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00261" /><CodeLine lineNumber="261"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00262" /><CodeLine lineNumber="262"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a54a8e8efbbc1034741164545a4777749">MachineScheduler::ID</a> = 0;</Highlight></CodeLine>
<Link id="l00263" /><CodeLine lineNumber="263"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00264" /><CodeLine lineNumber="264" lineLink="/docs/api/namespaces/llvm/#a4f3ce4ffd1eecf7a4fef2cce86560b1a"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> &amp;<a href="/docs/api/namespaces/llvm/#a4f3ce4ffd1eecf7a4fef2cce86560b1a">llvm::MachineSchedulerID</a> = <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a54a8e8efbbc1034741164545a4777749">MachineScheduler::ID</a>;</Highlight></CodeLine>
<Link id="l00265" /><CodeLine lineNumber="265"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00266" /><CodeLine lineNumber="266" lineLink="#a43709087555742d45e0c99ab89ac1df3"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/passsupport-h/#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE&#95;PASS&#95;BEGIN</a>(MachineScheduler, <a href="/docs/api/files/include/include/llvm/include/llvm/adt/genericcycleimpl-h/#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>,</Highlight></CodeLine>
<Link id="l00267" /><CodeLine lineNumber="267"><Highlight kind="normal">                      </Highlight><Highlight kind="stringliteral">&quot;Machine Instruction Scheduler&quot;</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">)</Highlight></CodeLine>
<Link id="l00268" /><CodeLine lineNumber="268"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a14724f1ccf528e73bb29bc9230737967">INITIALIZE&#95;PASS&#95;DEPENDENCY</a>(<a href="/docs/api/classes/llvm/aaresultswrapperpass">AAResultsWrapperPass</a>)</Highlight></CodeLine>
<Link id="l00269" /><CodeLine lineNumber="269"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a14724f1ccf528e73bb29bc9230737967">INITIALIZE&#95;PASS&#95;DEPENDENCY</a>(<a href="/docs/api/classes/llvm/machinedominatortreewrapperpass">MachineDominatorTreeWrapperPass</a>)</Highlight></CodeLine>
<Link id="l00270" /><CodeLine lineNumber="270"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a14724f1ccf528e73bb29bc9230737967">INITIALIZE&#95;PASS&#95;DEPENDENCY</a>(<a href="/docs/api/classes/llvm/machineloopinfowrapperpass">MachineLoopInfoWrapperPass</a>)</Highlight></CodeLine>
<Link id="l00271" /><CodeLine lineNumber="271"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a14724f1ccf528e73bb29bc9230737967">INITIALIZE&#95;PASS&#95;DEPENDENCY</a>(<a href="/docs/api/classes/llvm/slotindexeswrapperpass">SlotIndexesWrapperPass</a>)</Highlight></CodeLine>
<Link id="l00272" /><CodeLine lineNumber="272"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a14724f1ccf528e73bb29bc9230737967">INITIALIZE&#95;PASS&#95;DEPENDENCY</a>(<a href="/docs/api/classes/llvm/liveintervalswrapperpass">LiveIntervalsWrapperPass</a>)</Highlight></CodeLine>
<Link id="l00273" /><CodeLine lineNumber="273" lineLink="#a030569d5a541b6110f2ae1b6a3413a58"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a74ce8276b89067e806f67c45a6d92575">INITIALIZE&#95;PASS&#95;END</a>(MachineScheduler, <a href="/docs/api/files/include/include/llvm/include/llvm/adt/genericcycleimpl-h/#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>,</Highlight></CodeLine>
<Link id="l00274" /><CodeLine lineNumber="274" lineLink="#a7ce570ab44c3e7edb0d04fab9dd1d687"><Highlight kind="normal">                    </Highlight><Highlight kind="stringliteral">&quot;Machine Instruction Scheduler&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/false">false</a>, <a href="/docs/api/namespaces/false">false</a>)</Highlight></CodeLine>
<Link id="l00275" /><CodeLine lineNumber="275"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00276" /><CodeLine lineNumber="276" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a0107c12ed6aa7d7935b96015ef5b9ca4"><Highlight kind="normal"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a0107c12ed6aa7d7935b96015ef5b9ca4">MachineScheduler</a>::<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a0107c12ed6aa7d7935b96015ef5b9ca4">MachineScheduler</a>() : <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#abed31a5bcff83980a1e38c534031aae8">MachineSchedulerBase</a>(<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a54a8e8efbbc1034741164545a4777749">ID</a>) &#123;</Highlight></CodeLine>
<Link id="l00277" /><CodeLine lineNumber="277"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a9b59b13f97bee321b57c23f4c0cb3ac2">initializeMachineSchedulerPass</a>(&#42;<a href="/docs/api/classes/llvm/passregistry/#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</Highlight></CodeLine>
<Link id="l00278" /><CodeLine lineNumber="278"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00279" /><CodeLine lineNumber="279"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00280" /><CodeLine lineNumber="280" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#acfe823cc8d6d37bb30948aa5598ebbcd"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#acfe823cc8d6d37bb30948aa5598ebbcd">MachineScheduler::getAnalysisUsage</a>(<a href="/docs/api/classes/llvm/analysisusage">AnalysisUsage</a> &amp;AU)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00281" /><CodeLine lineNumber="281"><Highlight kind="normal">  AU.<a href="/docs/api/classes/llvm/analysisusage/#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</Highlight></CodeLine>
<Link id="l00282" /><CodeLine lineNumber="282"><Highlight kind="normal">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/machinedominatortreewrapperpass">MachineDominatorTreeWrapperPass</a>&gt;();</Highlight></CodeLine>
<Link id="l00283" /><CodeLine lineNumber="283"><Highlight kind="normal">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/machineloopinfowrapperpass">MachineLoopInfoWrapperPass</a>&gt;();</Highlight></CodeLine>
<Link id="l00284" /><CodeLine lineNumber="284"><Highlight kind="normal">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/aaresultswrapperpass">AAResultsWrapperPass</a>&gt;();</Highlight></CodeLine>
<Link id="l00285" /><CodeLine lineNumber="285"><Highlight kind="normal">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/targetpassconfig">TargetPassConfig</a>&gt;();</Highlight></CodeLine>
<Link id="l00286" /><CodeLine lineNumber="286"><Highlight kind="normal">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/slotindexeswrapperpass">SlotIndexesWrapperPass</a>&gt;();</Highlight></CodeLine>
<Link id="l00287" /><CodeLine lineNumber="287"><Highlight kind="normal">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae9356b720f6fbab112d809738dcc4f2a">addPreserved</a>&lt;<a href="/docs/api/classes/llvm/slotindexeswrapperpass">SlotIndexesWrapperPass</a>&gt;();</Highlight></CodeLine>
<Link id="l00288" /><CodeLine lineNumber="288"><Highlight kind="normal">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/liveintervalswrapperpass">LiveIntervalsWrapperPass</a>&gt;();</Highlight></CodeLine>
<Link id="l00289" /><CodeLine lineNumber="289"><Highlight kind="normal">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae9356b720f6fbab112d809738dcc4f2a">addPreserved</a>&lt;<a href="/docs/api/classes/llvm/liveintervalswrapperpass">LiveIntervalsWrapperPass</a>&gt;();</Highlight></CodeLine>
<Link id="l00290" /><CodeLine lineNumber="290"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/machinefunctionpass/#a864fd57b4304ef933b3281d0ef85a88e">MachineFunctionPass::getAnalysisUsage</a>(AU);</Highlight></CodeLine>
<Link id="l00291" /><CodeLine lineNumber="291"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00292" /><CodeLine lineNumber="292"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00293" /><CodeLine lineNumber="293"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b05199064ffa4992b9874f2470dad1a">PostMachineScheduler::ID</a> = 0;</Highlight></CodeLine>
<Link id="l00294" /><CodeLine lineNumber="294"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00295" /><CodeLine lineNumber="295" lineLink="/docs/api/namespaces/llvm/#a51a34bf4ca8119bdeb89ffc48c5d4783"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> &amp;<a href="/docs/api/namespaces/llvm/#a51a34bf4ca8119bdeb89ffc48c5d4783">llvm::PostMachineSchedulerID</a> = <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b05199064ffa4992b9874f2470dad1a">PostMachineScheduler::ID</a>;</Highlight></CodeLine>
<Link id="l00296" /><CodeLine lineNumber="296"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00297" /><CodeLine lineNumber="297" lineLink="#a219604df9ff809f1af95c0ead787c789"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/passsupport-h/#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE&#95;PASS&#95;BEGIN</a>(PostMachineScheduler, </Highlight><Highlight kind="stringliteral">&quot;postmisched&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00298" /><CodeLine lineNumber="298"><Highlight kind="normal">                      </Highlight><Highlight kind="stringliteral">&quot;PostRA Machine Instruction Scheduler&quot;</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">)</Highlight></CodeLine>
<Link id="l00299" /><CodeLine lineNumber="299"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a14724f1ccf528e73bb29bc9230737967">INITIALIZE&#95;PASS&#95;DEPENDENCY</a>(<a href="/docs/api/classes/llvm/machinedominatortreewrapperpass">MachineDominatorTreeWrapperPass</a>)</Highlight></CodeLine>
<Link id="l00300" /><CodeLine lineNumber="300"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a14724f1ccf528e73bb29bc9230737967">INITIALIZE&#95;PASS&#95;DEPENDENCY</a>(<a href="/docs/api/classes/llvm/machineloopinfowrapperpass">MachineLoopInfoWrapperPass</a>)</Highlight></CodeLine>
<Link id="l00301" /><CodeLine lineNumber="301"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a14724f1ccf528e73bb29bc9230737967">INITIALIZE&#95;PASS&#95;DEPENDENCY</a>(<a href="/docs/api/classes/llvm/aaresultswrapperpass">AAResultsWrapperPass</a>)</Highlight></CodeLine>
<Link id="l00302" /><CodeLine lineNumber="302" lineLink="#a38ac294860d16fa2065e091d3b1790cf"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/passsupport-h/#a74ce8276b89067e806f67c45a6d92575">INITIALIZE&#95;PASS&#95;END</a>(PostMachineScheduler, </Highlight><Highlight kind="stringliteral">&quot;postmisched&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00303" /><CodeLine lineNumber="303"><Highlight kind="normal">                    </Highlight><Highlight kind="stringliteral">&quot;PostRA Machine Instruction Scheduler&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/false">false</a>, <a href="/docs/api/namespaces/false">false</a>)</Highlight></CodeLine>
<Link id="l00304" /><CodeLine lineNumber="304"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00305" /><CodeLine lineNumber="305" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a95ac78157333c863b9fb682756477f6e"><Highlight kind="normal"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a95ac78157333c863b9fb682756477f6e">PostMachineScheduler</a>::<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a95ac78157333c863b9fb682756477f6e">PostMachineScheduler</a>() : <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#abed31a5bcff83980a1e38c534031aae8">MachineSchedulerBase</a>(<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b05199064ffa4992b9874f2470dad1a">ID</a>) &#123;</Highlight></CodeLine>
<Link id="l00306" /><CodeLine lineNumber="306"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a4620b31befc2e9df66eeb669568332c6">initializePostMachineSchedulerPass</a>(&#42;<a href="/docs/api/classes/llvm/passregistry/#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</Highlight></CodeLine>
<Link id="l00307" /><CodeLine lineNumber="307"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00308" /><CodeLine lineNumber="308"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00309" /><CodeLine lineNumber="309" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a065b9f9c1b17415e3e76fb115be4f7b4"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a065b9f9c1b17415e3e76fb115be4f7b4">PostMachineScheduler::getAnalysisUsage</a>(<a href="/docs/api/classes/llvm/analysisusage">AnalysisUsage</a> &amp;AU)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00310" /><CodeLine lineNumber="310"><Highlight kind="normal">  AU.<a href="/docs/api/classes/llvm/analysisusage/#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</Highlight></CodeLine>
<Link id="l00311" /><CodeLine lineNumber="311"><Highlight kind="normal">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/machinedominatortreewrapperpass">MachineDominatorTreeWrapperPass</a>&gt;();</Highlight></CodeLine>
<Link id="l00312" /><CodeLine lineNumber="312"><Highlight kind="normal">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/machineloopinfowrapperpass">MachineLoopInfoWrapperPass</a>&gt;();</Highlight></CodeLine>
<Link id="l00313" /><CodeLine lineNumber="313"><Highlight kind="normal">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/aaresultswrapperpass">AAResultsWrapperPass</a>&gt;();</Highlight></CodeLine>
<Link id="l00314" /><CodeLine lineNumber="314"><Highlight kind="normal">  AU.<a href="/docs/api/classes/llvm/analysisusage/#ae0adcccca08fb686c9ce00f9397b660c">addRequired</a>&lt;<a href="/docs/api/classes/llvm/targetpassconfig">TargetPassConfig</a>&gt;();</Highlight></CodeLine>
<Link id="l00315" /><CodeLine lineNumber="315"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/machinefunctionpass/#a864fd57b4304ef933b3281d0ef85a88e">MachineFunctionPass::getAnalysisUsage</a>(AU);</Highlight></CodeLine>
<Link id="l00316" /><CodeLine lineNumber="316"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00317" /><CodeLine lineNumber="317"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00318" /><CodeLine lineNumber="318"><Highlight kind="normal"><a href="/docs/api/classes/llvm/machinepassregistry">MachinePassRegistry&lt;MachineSchedRegistry::ScheduleDAGCtor&gt;</a></Highlight></CodeLine>
<Link id="l00319" /><CodeLine lineNumber="319"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/machineschedregistry/#a27747bbaa6d919fb4a31796ac5146dfa">MachineSchedRegistry::Registry</a>;</Highlight></CodeLine>
<Link id="l00320" /><CodeLine lineNumber="320"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00321" /><CodeLine lineNumber="321"><Highlight kind="comment">/// A dummy default scheduler factory indicates whether the scheduler</Highlight></CodeLine>
<Link id="l00322" /><CodeLine lineNumber="322"><Highlight kind="comment">/// is overridden on the command line.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00323" /><CodeLine lineNumber="323" lineLink="#a7c2f26bf8531d7774d205e720a71d616"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="#a7c2f26bf8531d7774d205e720a71d616">useDefaultMachineSched</a>(<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l00324" /><CodeLine lineNumber="324"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00325" /><CodeLine lineNumber="325"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00326" /><CodeLine lineNumber="326"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00327" /><CodeLine lineNumber="327"><Highlight kind="comment">/// MachineSchedOpt allows command line selection of the scheduler.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00328" /><CodeLine lineNumber="328"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt;<a href="/docs/api/classes/llvm/machineschedregistry/#a9fec0ddb5cfb9db5082a914d99310c2e">MachineSchedRegistry::ScheduleDAGCtor</a>, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00329" /><CodeLine lineNumber="329"><Highlight kind="normal">               <a href="/docs/api/classes/llvm/registerpassparser">RegisterPassParser&lt;MachineSchedRegistry&gt;</a>&gt;</Highlight></CodeLine>
<Link id="l00330" /><CodeLine lineNumber="330" lineLink="#a46878327214ad358989afa9f97d835f6"><Highlight kind="normal"><a href="#a46878327214ad358989afa9f97d835f6">MachineSchedOpt</a>(</Highlight><Highlight kind="stringliteral">&quot;misched&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00331" /><CodeLine lineNumber="331"><Highlight kind="normal">                <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(&amp;<a href="#a7c2f26bf8531d7774d205e720a71d616">useDefaultMachineSched</a>), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00332" /><CodeLine lineNumber="332"><Highlight kind="normal">                <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Machine instruction scheduler to use&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00333" /><CodeLine lineNumber="333"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00334" /><CodeLine lineNumber="334"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a></Highlight></CodeLine>
<Link id="l00335" /><CodeLine lineNumber="335" lineLink="#aa37bca43d96ba0bf7541b49375e9c4ec"><Highlight kind="normal"><a href="#aa37bca43d96ba0bf7541b49375e9c4ec">DefaultSchedRegistry</a>(</Highlight><Highlight kind="stringliteral">&quot;default&quot;</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;Use the target&#39;s default scheduler choice.&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00336" /><CodeLine lineNumber="336"><Highlight kind="normal">                     <a href="#a7c2f26bf8531d7774d205e720a71d616">useDefaultMachineSched</a>);</Highlight></CodeLine>
<Link id="l00337" /><CodeLine lineNumber="337"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00338" /><CodeLine lineNumber="338" lineLink="#a4b2ef2249df68fd80eb12e019875a75c"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a4b2ef2249df68fd80eb12e019875a75c">EnableMachineSched</a>(</Highlight></CodeLine>
<Link id="l00339" /><CodeLine lineNumber="339"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;enable-misched&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00340" /><CodeLine lineNumber="340"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Enable the machine instruction scheduling pass.&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00341" /><CodeLine lineNumber="341"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</Highlight></CodeLine>
<Link id="l00342" /><CodeLine lineNumber="342"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00343" /><CodeLine lineNumber="343" lineLink="#ad6a82628c5bb536ea7591cc3d51ba235"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#ad6a82628c5bb536ea7591cc3d51ba235">EnablePostRAMachineSched</a>(</Highlight></CodeLine>
<Link id="l00344" /><CodeLine lineNumber="344"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;enable-post-misched&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00345" /><CodeLine lineNumber="345"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Enable the post-ra machine instruction scheduling pass.&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00346" /><CodeLine lineNumber="346"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</Highlight></CodeLine>
<Link id="l00347" /><CodeLine lineNumber="347"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00348" /><CodeLine lineNumber="348"><Highlight kind="comment">/// Decrement this iterator until reaching the top or a non-debug instr.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00349" /><CodeLine lineNumber="349"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a></Highlight></CodeLine>
<Link id="l00350" /><CodeLine lineNumber="350" lineLink="#a459acab05344caa836aa036f1829c928"><Highlight kind="normal"><a href="#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</Highlight></CodeLine>
<Link id="l00351" /><CodeLine lineNumber="351"><Highlight kind="normal">              <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> Beg) &#123;</Highlight></CodeLine>
<Link id="l00352" /><CodeLine lineNumber="352"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != Beg &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;reached the top of the region, cannot decrement&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00353" /><CodeLine lineNumber="353"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (--<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != Beg) &#123;</Highlight></CodeLine>
<Link id="l00354" /><CodeLine lineNumber="354"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isDebugOrPseudoInstr())</Highlight></CodeLine>
<Link id="l00355" /><CodeLine lineNumber="355"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00356" /><CodeLine lineNumber="356"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00357" /><CodeLine lineNumber="357"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</Highlight></CodeLine>
<Link id="l00358" /><CodeLine lineNumber="358"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00359" /><CodeLine lineNumber="359"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00360" /><CodeLine lineNumber="360"><Highlight kind="comment">/// Non-const version.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00361" /><CodeLine lineNumber="361"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a></Highlight></CodeLine>
<Link id="l00362" /><CodeLine lineNumber="362" lineLink="#a24aad0e646c24622750ff2ee10b74109"><Highlight kind="normal"><a href="#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</Highlight></CodeLine>
<Link id="l00363" /><CodeLine lineNumber="363"><Highlight kind="normal">              <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> Beg) &#123;</Highlight></CodeLine>
<Link id="l00364" /><CodeLine lineNumber="364"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>), Beg)</Highlight></CodeLine>
<Link id="l00365" /><CodeLine lineNumber="365"><Highlight kind="normal">      .<a href="/docs/api/classes/llvm/machineinstrbundleiterator/#a4682e01b75bf6adf297c9948f992ef79">getNonConstIterator</a>();</Highlight></CodeLine>
<Link id="l00366" /><CodeLine lineNumber="366"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00367" /><CodeLine lineNumber="367"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00368" /><CodeLine lineNumber="368"><Highlight kind="comment">/// If this iterator is a debug value, increment until reaching the End or a</Highlight></CodeLine>
<Link id="l00369" /><CodeLine lineNumber="369"><Highlight kind="comment">/// non-debug instruction.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00370" /><CodeLine lineNumber="370"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a></Highlight></CodeLine>
<Link id="l00371" /><CodeLine lineNumber="371" lineLink="#a1c8a9363a3eb113ca42064a03636b135"><Highlight kind="normal"><a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</Highlight></CodeLine>
<Link id="l00372" /><CodeLine lineNumber="372"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> End) &#123;</Highlight></CodeLine>
<Link id="l00373" /><CodeLine lineNumber="373"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal">(; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != End; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</Highlight></CodeLine>
<Link id="l00374" /><CodeLine lineNumber="374"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isDebugOrPseudoInstr())</Highlight></CodeLine>
<Link id="l00375" /><CodeLine lineNumber="375"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00376" /><CodeLine lineNumber="376"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00377" /><CodeLine lineNumber="377"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</Highlight></CodeLine>
<Link id="l00378" /><CodeLine lineNumber="378"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00379" /><CodeLine lineNumber="379"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00380" /><CodeLine lineNumber="380"><Highlight kind="comment">/// Non-const version.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00381" /><CodeLine lineNumber="381"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a></Highlight></CodeLine>
<Link id="l00382" /><CodeLine lineNumber="382" lineLink="#aa9432402dc18539818e3dae69e135ed4"><Highlight kind="normal"><a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</Highlight></CodeLine>
<Link id="l00383" /><CodeLine lineNumber="383"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> End) &#123;</Highlight></CodeLine>
<Link id="l00384" /><CodeLine lineNumber="384"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>), End)</Highlight></CodeLine>
<Link id="l00385" /><CodeLine lineNumber="385"><Highlight kind="normal">      .<a href="/docs/api/classes/llvm/machineinstrbundleiterator/#a4682e01b75bf6adf297c9948f992ef79">getNonConstIterator</a>();</Highlight></CodeLine>
<Link id="l00386" /><CodeLine lineNumber="386"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00387" /><CodeLine lineNumber="387"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00388" /><CodeLine lineNumber="388"><Highlight kind="comment">/// Instantiate a ScheduleDAGInstrs that will be owned by the caller.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00389" /><CodeLine lineNumber="389" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a17ba7babfe87314e8d1fe3db5a8dc805"><Highlight kind="normal"><a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a17ba7babfe87314e8d1fe3db5a8dc805">MachineScheduler::createMachineScheduler</a>() &#123;</Highlight></CodeLine>
<Link id="l00390" /><CodeLine lineNumber="390"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Select the scheduler, or set the default.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00391" /><CodeLine lineNumber="391"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/machineschedregistry/#a9fec0ddb5cfb9db5082a914d99310c2e">MachineSchedRegistry::ScheduleDAGCtor</a> Ctor = <a href="#a46878327214ad358989afa9f97d835f6">MachineSchedOpt</a>;</Highlight></CodeLine>
<Link id="l00392" /><CodeLine lineNumber="392"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Ctor != <a href="#a7c2f26bf8531d7774d205e720a71d616">useDefaultMachineSched</a>)</Highlight></CodeLine>
<Link id="l00393" /><CodeLine lineNumber="393"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Ctor(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00394" /><CodeLine lineNumber="394"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00395" /><CodeLine lineNumber="395"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Get the default scheduler set by the target for this function.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00396" /><CodeLine lineNumber="396"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a> = <a href="/docs/api/structs/llvm/machineschedcontext/#a3c04bf922b53ed32316b9725a99a5b2f">PassConfig</a>-&gt;createMachineScheduler(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00397" /><CodeLine lineNumber="397"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>)</Highlight></CodeLine>
<Link id="l00398" /><CodeLine lineNumber="398"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>;</Highlight></CodeLine>
<Link id="l00399" /><CodeLine lineNumber="399"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00400" /><CodeLine lineNumber="400"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Default to GenericScheduler.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00401" /><CodeLine lineNumber="401"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a5365898dd1deb10d065e288a2babd511">createGenericSchedLive</a>(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00402" /><CodeLine lineNumber="402"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00403" /><CodeLine lineNumber="403"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00404" /><CodeLine lineNumber="404"><Highlight kind="comment">/// Instantiate a ScheduleDAGInstrs for PostRA scheduling that will be owned by</Highlight></CodeLine>
<Link id="l00405" /><CodeLine lineNumber="405"><Highlight kind="comment">/// the caller. We don&#39;t have a command line option to override the postRA</Highlight></CodeLine>
<Link id="l00406" /><CodeLine lineNumber="406"><Highlight kind="comment">/// scheduler. The Target must configure it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00407" /><CodeLine lineNumber="407" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b741fadafc61d8c2e6409af2fc24e35"><Highlight kind="normal"><a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b741fadafc61d8c2e6409af2fc24e35">PostMachineScheduler::createPostMachineScheduler</a>() &#123;</Highlight></CodeLine>
<Link id="l00408" /><CodeLine lineNumber="408"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Get the postRA scheduler set by the target for this function.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00409" /><CodeLine lineNumber="409"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a> = <a href="/docs/api/structs/llvm/machineschedcontext/#a3c04bf922b53ed32316b9725a99a5b2f">PassConfig</a>-&gt;createPostMachineScheduler(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00410" /><CodeLine lineNumber="410"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>)</Highlight></CodeLine>
<Link id="l00411" /><CodeLine lineNumber="411"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>;</Highlight></CodeLine>
<Link id="l00412" /><CodeLine lineNumber="412"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00413" /><CodeLine lineNumber="413"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Default to GenericScheduler.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00414" /><CodeLine lineNumber="414"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#aa2f0c2f2a077d67dc0bcb24bc31e3b05">createGenericSchedPostRA</a>(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00415" /><CodeLine lineNumber="415"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00416" /><CodeLine lineNumber="416"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00417" /><CodeLine lineNumber="417"><Highlight kind="comment">/// Top-level MachineScheduler pass driver.</Highlight></CodeLine>
<Link id="l00418" /><CodeLine lineNumber="418"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l00419" /><CodeLine lineNumber="419"><Highlight kind="comment">/// Visit blocks in function order. Divide each block into scheduling regions</Highlight></CodeLine>
<Link id="l00420" /><CodeLine lineNumber="420"><Highlight kind="comment">/// and visit them bottom-up. Visiting regions bottom-up is not required, but is</Highlight></CodeLine>
<Link id="l00421" /><CodeLine lineNumber="421"><Highlight kind="comment">/// consistent with the DAG builder, which traverses the interior of the</Highlight></CodeLine>
<Link id="l00422" /><CodeLine lineNumber="422"><Highlight kind="comment">/// scheduling regions bottom-up.</Highlight></CodeLine>
<Link id="l00423" /><CodeLine lineNumber="423"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l00424" /><CodeLine lineNumber="424"><Highlight kind="comment">/// This design avoids exposing scheduling boundaries to the DAG builder,</Highlight></CodeLine>
<Link id="l00425" /><CodeLine lineNumber="425"><Highlight kind="comment">/// simplifying the DAG builder&#39;s support for &quot;special&quot; target instructions.</Highlight></CodeLine>
<Link id="l00426" /><CodeLine lineNumber="426"><Highlight kind="comment">/// At the same time the design allows target schedulers to operate across</Highlight></CodeLine>
<Link id="l00427" /><CodeLine lineNumber="427"><Highlight kind="comment">/// scheduling boundaries, for example to bundle the boundary instructions</Highlight></CodeLine>
<Link id="l00428" /><CodeLine lineNumber="428"><Highlight kind="comment">/// without reordering them. This creates complexity, because the target</Highlight></CodeLine>
<Link id="l00429" /><CodeLine lineNumber="429"><Highlight kind="comment">/// scheduler must update the RegionBegin and RegionEnd positions cached by</Highlight></CodeLine>
<Link id="l00430" /><CodeLine lineNumber="430"><Highlight kind="comment">/// ScheduleDAGInstrs whenever adding or removing instructions. A much simpler</Highlight></CodeLine>
<Link id="l00431" /><CodeLine lineNumber="431"><Highlight kind="comment">/// design would be to split blocks at scheduling boundaries, but LLVM has a</Highlight></CodeLine>
<Link id="l00432" /><CodeLine lineNumber="432"><Highlight kind="comment">/// general bias against block splitting purely for implementation simplicity.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00433" /><CodeLine lineNumber="433" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a8539983d1d0a8b07d92b91c16b9f7a5a"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a8539983d1d0a8b07d92b91c16b9f7a5a">MachineScheduler::runOnMachineFunction</a>(<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;mf) &#123;</Highlight></CodeLine>
<Link id="l00434" /><CodeLine lineNumber="434"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/functionpass/#af9f5f511d75e16f09a5520cb9444cfa8">skipFunction</a>(mf.<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>()))</Highlight></CodeLine>
<Link id="l00435" /><CodeLine lineNumber="435"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00436" /><CodeLine lineNumber="436"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00437" /><CodeLine lineNumber="437"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a4b2ef2249df68fd80eb12e019875a75c">EnableMachineSched</a>.getNumOccurrences()) &#123;</Highlight></CodeLine>
<Link id="l00438" /><CodeLine lineNumber="438"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="#a4b2ef2249df68fd80eb12e019875a75c">EnableMachineSched</a>)</Highlight></CodeLine>
<Link id="l00439" /><CodeLine lineNumber="439"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00440" /><CodeLine lineNumber="440"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!mf.<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>().<a href="/docs/api/classes/llvm/targetsubtargetinfo/#a73d86eabd25d4e6a05310e1b0d445d0a">enableMachineScheduler</a>())</Highlight></CodeLine>
<Link id="l00441" /><CodeLine lineNumber="441"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00442" /><CodeLine lineNumber="442"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00443" /><CodeLine lineNumber="443"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Before MISched:\\n&quot;</Highlight><Highlight kind="normal">; mf.<a href="/docs/api/classes/llvm/machinefunction/#ad9c9c8915579c517eff56e638c1a643c">print</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()));</Highlight></CodeLine>
<Link id="l00444" /><CodeLine lineNumber="444"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00445" /><CodeLine lineNumber="445"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Initialize the context of the pass.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00446" /><CodeLine lineNumber="446"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a> = &amp;mf;</Highlight></CodeLine>
<Link id="l00447" /><CodeLine lineNumber="447"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/machineschedcontext/#a9334842806d97bee74af8752ebe19fbe">MLI</a> = &amp;<a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;MachineLoopInfoWrapperPass&gt;</a>().getLI();</Highlight></CodeLine>
<Link id="l00448" /><CodeLine lineNumber="448"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/machineschedcontext/#a433a18eaf42c2038f519428e580cbc53">MDT</a> = &amp;<a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;MachineDominatorTreeWrapperPass&gt;</a>().getDomTree();</Highlight></CodeLine>
<Link id="l00449" /><CodeLine lineNumber="449"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/machineschedcontext/#a3c04bf922b53ed32316b9725a99a5b2f">PassConfig</a> = &amp;<a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;TargetPassConfig&gt;</a>();</Highlight></CodeLine>
<Link id="l00450" /><CodeLine lineNumber="450"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/machineschedcontext/#a55290be59c885ea01c412fa6926b61cf">AA</a> = &amp;<a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;AAResultsWrapperPass&gt;</a>().getAAResults();</Highlight></CodeLine>
<Link id="l00451" /><CodeLine lineNumber="451"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00452" /><CodeLine lineNumber="452"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/machineschedcontext/#aa604d18378910f87649c38841cc1531c">LIS</a> = &amp;<a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;LiveIntervalsWrapperPass&gt;</a>().getLIS();</Highlight></CodeLine>
<Link id="l00453" /><CodeLine lineNumber="453"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00454" /><CodeLine lineNumber="454"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>) &#123;</Highlight></CodeLine>
<Link id="l00455" /><CodeLine lineNumber="455"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/structs/llvm/machineschedcontext/#aa604d18378910f87649c38841cc1531c">LIS</a>-&gt;dump());</Highlight></CodeLine>
<Link id="l00456" /><CodeLine lineNumber="456"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;verify(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;Before machine scheduling.&quot;</Highlight><Highlight kind="normal">, &amp;<a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>());</Highlight></CodeLine>
<Link id="l00457" /><CodeLine lineNumber="457"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00458" /><CodeLine lineNumber="458"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/machineschedcontext/#a510c29d57e9f0343df48b7c58cb89228">RegClassInfo</a>-&gt;runOnMachineFunction(&#42;<a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>);</Highlight></CodeLine>
<Link id="l00459" /><CodeLine lineNumber="459"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00460" /><CodeLine lineNumber="460"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Instantiate the selected scheduler for this target, function, and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00461" /><CodeLine lineNumber="461"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// optimization level.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00462" /><CodeLine lineNumber="462"><Highlight kind="normal">  std::unique&#95;ptr&lt;ScheduleDAGInstrs&gt; <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>(<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machinescheduler/#a17ba7babfe87314e8d1fe3db5a8dc805">createMachineScheduler</a>());</Highlight></CodeLine>
<Link id="l00463" /><CodeLine lineNumber="463"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#a5d9f088a58ed26977308b92dba6c50f6">scheduleRegions</a>(&#42;<a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00464" /><CodeLine lineNumber="464"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00465" /><CodeLine lineNumber="465"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/structs/llvm/machineschedcontext/#aa604d18378910f87649c38841cc1531c">LIS</a>-&gt;dump());</Highlight></CodeLine>
<Link id="l00466" /><CodeLine lineNumber="466"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>)</Highlight></CodeLine>
<Link id="l00467" /><CodeLine lineNumber="467"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;verify(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;After machine scheduling.&quot;</Highlight><Highlight kind="normal">, &amp;<a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>());</Highlight></CodeLine>
<Link id="l00468" /><CodeLine lineNumber="468"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00469" /><CodeLine lineNumber="469"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00470" /><CodeLine lineNumber="470"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00471" /><CodeLine lineNumber="471" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#ab1dc85fd08ff7aa2a4057683e7a4dc8f"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#ab1dc85fd08ff7aa2a4057683e7a4dc8f">PostMachineScheduler::runOnMachineFunction</a>(<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;mf) &#123;</Highlight></CodeLine>
<Link id="l00472" /><CodeLine lineNumber="472"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/functionpass/#af9f5f511d75e16f09a5520cb9444cfa8">skipFunction</a>(mf.<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>()))</Highlight></CodeLine>
<Link id="l00473" /><CodeLine lineNumber="473"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00474" /><CodeLine lineNumber="474"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00475" /><CodeLine lineNumber="475"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#ad6a82628c5bb536ea7591cc3d51ba235">EnablePostRAMachineSched</a>.getNumOccurrences()) &#123;</Highlight></CodeLine>
<Link id="l00476" /><CodeLine lineNumber="476"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="#ad6a82628c5bb536ea7591cc3d51ba235">EnablePostRAMachineSched</a>)</Highlight></CodeLine>
<Link id="l00477" /><CodeLine lineNumber="477"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00478" /><CodeLine lineNumber="478"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!mf.<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>().<a href="/docs/api/classes/llvm/targetsubtargetinfo/#ab4787adecfc77e72db225098a27e902f">enablePostRAMachineScheduler</a>()) &#123;</Highlight></CodeLine>
<Link id="l00479" /><CodeLine lineNumber="479"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Subtarget disables post-MI-sched.\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00480" /><CodeLine lineNumber="480"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00481" /><CodeLine lineNumber="481"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00482" /><CodeLine lineNumber="482"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Before post-MI-sched:\\n&quot;</Highlight><Highlight kind="normal">; mf.<a href="/docs/api/classes/llvm/machinefunction/#ad9c9c8915579c517eff56e638c1a643c">print</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()));</Highlight></CodeLine>
<Link id="l00483" /><CodeLine lineNumber="483"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00484" /><CodeLine lineNumber="484"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Initialize the context of the pass.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00485" /><CodeLine lineNumber="485"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a> = &amp;mf;</Highlight></CodeLine>
<Link id="l00486" /><CodeLine lineNumber="486"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/machineschedcontext/#a9334842806d97bee74af8752ebe19fbe">MLI</a> = &amp;<a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;MachineLoopInfoWrapperPass&gt;</a>().getLI();</Highlight></CodeLine>
<Link id="l00487" /><CodeLine lineNumber="487"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/machineschedcontext/#a3c04bf922b53ed32316b9725a99a5b2f">PassConfig</a> = &amp;<a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;TargetPassConfig&gt;</a>();</Highlight></CodeLine>
<Link id="l00488" /><CodeLine lineNumber="488"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/machineschedcontext/#a55290be59c885ea01c412fa6926b61cf">AA</a> = &amp;<a href="/docs/api/classes/llvm/pass/#a4863e5e463fb79955269fbf7fbf52b80">getAnalysis&lt;AAResultsWrapperPass&gt;</a>().getAAResults();</Highlight></CodeLine>
<Link id="l00489" /><CodeLine lineNumber="489"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00490" /><CodeLine lineNumber="490"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>)</Highlight></CodeLine>
<Link id="l00491" /><CodeLine lineNumber="491"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;verify(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;Before post machine scheduling.&quot;</Highlight><Highlight kind="normal">, &amp;<a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>());</Highlight></CodeLine>
<Link id="l00492" /><CodeLine lineNumber="492"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00493" /><CodeLine lineNumber="493"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Instantiate the selected scheduler for this target, function, and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00494" /><CodeLine lineNumber="494"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// optimization level.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00495" /><CodeLine lineNumber="495"><Highlight kind="normal">  std::unique&#95;ptr&lt;ScheduleDAGInstrs&gt; <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>(<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/postmachinescheduler/#a5b741fadafc61d8c2e6409af2fc24e35">createPostMachineScheduler</a>());</Highlight></CodeLine>
<Link id="l00496" /><CodeLine lineNumber="496"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#a5d9f088a58ed26977308b92dba6c50f6">scheduleRegions</a>(&#42;<a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00497" /><CodeLine lineNumber="497"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00498" /><CodeLine lineNumber="498"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>)</Highlight></CodeLine>
<Link id="l00499" /><CodeLine lineNumber="499"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;verify(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;After post machine scheduling.&quot;</Highlight><Highlight kind="normal">, &amp;<a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>());</Highlight></CodeLine>
<Link id="l00500" /><CodeLine lineNumber="500"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00501" /><CodeLine lineNumber="501"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00502" /><CodeLine lineNumber="502"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00503" /><CodeLine lineNumber="503"><Highlight kind="comment">/// Return true of the given instruction should not be included in a scheduling</Highlight></CodeLine>
<Link id="l00504" /><CodeLine lineNumber="504"><Highlight kind="comment">/// region.</Highlight></CodeLine>
<Link id="l00505" /><CodeLine lineNumber="505"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l00506" /><CodeLine lineNumber="506"><Highlight kind="comment">/// MachineScheduler does not currently support scheduling across calls. To</Highlight></CodeLine>
<Link id="l00507" /><CodeLine lineNumber="507"><Highlight kind="comment">/// handle calls, the DAG builder needs to be modified to create register</Highlight></CodeLine>
<Link id="l00508" /><CodeLine lineNumber="508"><Highlight kind="comment">/// anti/output dependencies on the registers clobbered by the call&#39;s regmask</Highlight></CodeLine>
<Link id="l00509" /><CodeLine lineNumber="509"><Highlight kind="comment">/// operand. In PreRA scheduling, the stack pointer adjustment already prevents</Highlight></CodeLine>
<Link id="l00510" /><CodeLine lineNumber="510"><Highlight kind="comment">/// scheduling across calls. In PostRA scheduling, we need the isCall to enforce</Highlight></CodeLine>
<Link id="l00511" /><CodeLine lineNumber="511"><Highlight kind="comment">/// the boundary, but there would be no benefit to postRA scheduling across</Highlight></CodeLine>
<Link id="l00512" /><CodeLine lineNumber="512"><Highlight kind="comment">/// calls this late anyway.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00513" /><CodeLine lineNumber="513" lineLink="#a0a9255314dba663576d6bc1bb42762b1"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="#a0a9255314dba663576d6bc1bb42762b1">isSchedBoundary</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</Highlight></CodeLine>
<Link id="l00514" /><CodeLine lineNumber="514"><Highlight kind="normal">                            <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>,</Highlight></CodeLine>
<Link id="l00515" /><CodeLine lineNumber="515"><Highlight kind="normal">                            <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &#42;MF,</Highlight></CodeLine>
<Link id="l00516" /><CodeLine lineNumber="516"><Highlight kind="normal">                            </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>) &#123;</Highlight></CodeLine>
<Link id="l00517" /><CodeLine lineNumber="517"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isCall() || <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>-&gt;isSchedulingBoundary(&#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>, &#42;MF) ||</Highlight></CodeLine>
<Link id="l00518" /><CodeLine lineNumber="518"><Highlight kind="normal">         <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isFakeUse();</Highlight></CodeLine>
<Link id="l00519" /><CodeLine lineNumber="519"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00520" /><CodeLine lineNumber="520"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00521" /><CodeLine lineNumber="521"><Highlight kind="comment">/// A region of an MBB for scheduling.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00522" /><CodeLine lineNumber="522"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00523" /><CodeLine lineNumber="523" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion"><Highlight kind="normal"></Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal"><a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a4393cd1869923adcedef312efbea07be">SchedRegion</a> &#123;</Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00524" /><CodeLine lineNumber="524"><Highlight kind="comment">  /// RegionBegin is the first instruction in the scheduling region, and</Highlight></CodeLine>
<Link id="l00525" /><CodeLine lineNumber="525"><Highlight kind="comment">  /// RegionEnd is either MBB-&gt;end() or the scheduling boundary after the</Highlight></CodeLine>
<Link id="l00526" /><CodeLine lineNumber="526"><Highlight kind="comment">  /// last instruction in the scheduling region. These iterators cannot refer</Highlight></CodeLine>
<Link id="l00527" /><CodeLine lineNumber="527"><Highlight kind="comment">  /// to instructions outside of the identified scheduling region because</Highlight></CodeLine>
<Link id="l00528" /><CodeLine lineNumber="528"><Highlight kind="comment">  /// those may be reordered before scheduling this region.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00529" /><CodeLine lineNumber="529" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a45001a0139d1a95b18a048c6cc9d1554"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a45001a0139d1a95b18a048c6cc9d1554">RegionBegin</a>;</Highlight></CodeLine>
<Link id="l00530" /><CodeLine lineNumber="530" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a54d638dab587b1dc3986718c411ba381"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a54d638dab587b1dc3986718c411ba381">RegionEnd</a>;</Highlight></CodeLine>
<Link id="l00531" /><CodeLine lineNumber="531" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#ac72e998d272b3616752706972b32af89"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#ac72e998d272b3616752706972b32af89">NumRegionInstrs</a>;</Highlight></CodeLine>
<Link id="l00532" /><CodeLine lineNumber="532"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00533" /><CodeLine lineNumber="533" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a4393cd1869923adcedef312efbea07be"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a4393cd1869923adcedef312efbea07be">SchedRegion</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> E,</Highlight></CodeLine>
<Link id="l00534" /><CodeLine lineNumber="534"><Highlight kind="normal">              </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) :</Highlight></CodeLine>
<Link id="l00535" /><CodeLine lineNumber="535"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a45001a0139d1a95b18a048c6cc9d1554">RegionBegin</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>), <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#a54d638dab587b1dc3986718c411ba381">RegionEnd</a>(E), <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion/#ac72e998d272b3616752706972b32af89">NumRegionInstrs</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &#123;&#125;</Highlight></CodeLine>
<Link id="l00536" /><CodeLine lineNumber="536"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l00537" /><CodeLine lineNumber="537"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// end anonymous namespace</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00538" /><CodeLine lineNumber="538"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00539" /><CodeLine lineNumber="539" lineLink="#aee652267c4ed8c882f06243aa0d601dd"><Highlight kind="normal"></Highlight><Highlight kind="keyword">using </Highlight><Highlight kind="normal"><a href="#aee652267c4ed8c882f06243aa0d601dd">MBBRegionsVector</a> = <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;SchedRegion, 16&gt;</a>;</Highlight></CodeLine>
<Link id="l00540" /><CodeLine lineNumber="540"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00541" /><CodeLine lineNumber="541"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00542" /><CodeLine lineNumber="542" lineLink="#ae1be3a2fc5dfa3281d32b6fb4e4ea6dd"><Highlight kind="normal"><a href="#ae1be3a2fc5dfa3281d32b6fb4e4ea6dd">getSchedRegions</a>(<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>,</Highlight></CodeLine>
<Link id="l00543" /><CodeLine lineNumber="543"><Highlight kind="normal">                <a href="#aee652267c4ed8c882f06243aa0d601dd">MBBRegionsVector</a> &amp;Regions,</Highlight></CodeLine>
<Link id="l00544" /><CodeLine lineNumber="544"><Highlight kind="normal">                </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> RegionsTopDown) &#123;</Highlight></CodeLine>
<Link id="l00545" /><CodeLine lineNumber="545"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &#42;MF = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;getParent();</Highlight></CodeLine>
<Link id="l00546" /><CodeLine lineNumber="546"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a> = MF-&gt;<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>().<a href="/docs/api/classes/llvm/targetsubtargetinfo/#acd858ed72f11db9444617740c3622608">getInstrInfo</a>();</Highlight></CodeLine>
<Link id="l00547" /><CodeLine lineNumber="547"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00548" /><CodeLine lineNumber="548"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00549" /><CodeLine lineNumber="549"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal">(<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> RegionEnd = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;end();</Highlight></CodeLine>
<Link id="l00550" /><CodeLine lineNumber="550"><Highlight kind="normal">      RegionEnd != <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;begin(); RegionEnd = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</Highlight></CodeLine>
<Link id="l00551" /><CodeLine lineNumber="551"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00552" /><CodeLine lineNumber="552"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Avoid decrementing RegionEnd for blocks with no terminator.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00553" /><CodeLine lineNumber="553"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (RegionEnd != <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;end() ||</Highlight></CodeLine>
<Link id="l00554" /><CodeLine lineNumber="554"><Highlight kind="normal">        <a href="#a0a9255314dba663576d6bc1bb42762b1">isSchedBoundary</a>(&amp;&#42;std::prev(RegionEnd), &amp;&#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>, MF, <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>)) &#123;</Highlight></CodeLine>
<Link id="l00555" /><CodeLine lineNumber="555"><Highlight kind="normal">      --RegionEnd;</Highlight></CodeLine>
<Link id="l00556" /><CodeLine lineNumber="556"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00557" /><CodeLine lineNumber="557"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00558" /><CodeLine lineNumber="558"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The next region starts above the previous region. Look backward in the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00559" /><CodeLine lineNumber="559"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// instruction stream until we find the nearest boundary.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00560" /><CodeLine lineNumber="560"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumRegionInstrs = 0;</Highlight></CodeLine>
<Link id="l00561" /><CodeLine lineNumber="561"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = RegionEnd;</Highlight></CodeLine>
<Link id="l00562" /><CodeLine lineNumber="562"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;begin(); --<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</Highlight></CodeLine>
<Link id="l00563" /><CodeLine lineNumber="563"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = &#42;std::prev(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</Highlight></CodeLine>
<Link id="l00564" /><CodeLine lineNumber="564"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a0a9255314dba663576d6bc1bb42762b1">isSchedBoundary</a>(&amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, &amp;&#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>, MF, <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>))</Highlight></CodeLine>
<Link id="l00565" /><CodeLine lineNumber="565"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00566" /><CodeLine lineNumber="566"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isDebugOrPseudoInstr()) &#123;</Highlight></CodeLine>
<Link id="l00567" /><CodeLine lineNumber="567"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// MBB::size() uses instr&#95;iterator to count. Here we need a bundle to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00568" /><CodeLine lineNumber="568"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// count as a single instruction.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00569" /><CodeLine lineNumber="569"><Highlight kind="normal">        ++NumRegionInstrs;</Highlight></CodeLine>
<Link id="l00570" /><CodeLine lineNumber="570"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00571" /><CodeLine lineNumber="571"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00572" /><CodeLine lineNumber="572"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00573" /><CodeLine lineNumber="573"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// It&#39;s possible we found a scheduling region that only has debug</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00574" /><CodeLine lineNumber="574"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// instructions. Don&#39;t bother scheduling these.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00575" /><CodeLine lineNumber="575"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumRegionInstrs != 0)</Highlight></CodeLine>
<Link id="l00576" /><CodeLine lineNumber="576"><Highlight kind="normal">      Regions.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(SchedRegion(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, RegionEnd, NumRegionInstrs));</Highlight></CodeLine>
<Link id="l00577" /><CodeLine lineNumber="577"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00578" /><CodeLine lineNumber="578"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00579" /><CodeLine lineNumber="579"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (RegionsTopDown)</Highlight></CodeLine>
<Link id="l00580" /><CodeLine lineNumber="580"><Highlight kind="normal">    std::reverse(Regions.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a8a045d250952c0867382a9840ee18fdf">begin</a>(), Regions.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a075e34e98605d0e7c289763a104869ac">end</a>());</Highlight></CodeLine>
<Link id="l00581" /><CodeLine lineNumber="581"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00582" /><CodeLine lineNumber="582"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00583" /><CodeLine lineNumber="583"><Highlight kind="comment">/// Main driver for both MachineScheduler and PostMachineScheduler.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00584" /><CodeLine lineNumber="584" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#a5d9f088a58ed26977308b92dba6c50f6"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#a5d9f088a58ed26977308b92dba6c50f6">MachineSchedulerBase::scheduleRegions</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &amp;<a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>,</Highlight></CodeLine>
<Link id="l00585" /><CodeLine lineNumber="585"><Highlight kind="normal">                                           </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> FixKillFlags) &#123;</Highlight></CodeLine>
<Link id="l00586" /><CodeLine lineNumber="586"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Visit all machine basic blocks.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00587" /><CodeLine lineNumber="587"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00588" /><CodeLine lineNumber="588"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: Visit blocks in global postorder or postorder within the bottom-up</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00589" /><CodeLine lineNumber="589"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// loop tree. Then we can optionally compute global RegPressure.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00590" /><CodeLine lineNumber="590"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/machinefunction/#aaba82c71ffdca966cad10eae0992fff9">MachineFunction::iterator</a> <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a> = <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;begin(), MBBEnd = <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;end();</Highlight></CodeLine>
<Link id="l00591" /><CodeLine lineNumber="591"><Highlight kind="normal">       <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a> != MBBEnd; ++<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>) &#123;</Highlight></CodeLine>
<Link id="l00592" /><CodeLine lineNumber="592"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00593" /><CodeLine lineNumber="593"><Highlight kind="normal">    <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.startBlock(&amp;&#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>);</Highlight></CodeLine>
<Link id="l00594" /><CodeLine lineNumber="594"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00595" /><CodeLine lineNumber="595"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#ifndef NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00596" /><CodeLine lineNumber="596"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#aa9e9eecb42c6e825c279845f69f28aa2">SchedOnlyFunc</a>.getNumOccurrences() &amp;&amp; <a href="#aa9e9eecb42c6e825c279845f69f28aa2">SchedOnlyFunc</a> != <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;getName())</Highlight></CodeLine>
<Link id="l00597" /><CodeLine lineNumber="597"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00598" /><CodeLine lineNumber="598"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a55fc025b3f9710787dfefd7a551c2568">SchedOnlyBlock</a>.getNumOccurrences()</Highlight></CodeLine>
<Link id="l00599" /><CodeLine lineNumber="599"><Highlight kind="normal">        &amp;&amp; (</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal">)<a href="#a55fc025b3f9710787dfefd7a551c2568">SchedOnlyBlock</a> != <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;getNumber())</Highlight></CodeLine>
<Link id="l00600" /><CodeLine lineNumber="600"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00601" /><CodeLine lineNumber="601"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00602" /><CodeLine lineNumber="602"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00603" /><CodeLine lineNumber="603"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Break the block into scheduling regions &#91;I, RegionEnd). RegionEnd</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00604" /><CodeLine lineNumber="604"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// points to the scheduling boundary at the bottom of the region. The DAG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00605" /><CodeLine lineNumber="605"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// does not include RegionEnd, but the region does (i.e. the next</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00606" /><CodeLine lineNumber="606"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// RegionEnd is above the previous RegionBegin). If the current block has</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00607" /><CodeLine lineNumber="607"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// no terminator then RegionEnd == MBB-&gt;end() for the bottom region.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00608" /><CodeLine lineNumber="608"><Highlight kind="normal">    </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00609" /><CodeLine lineNumber="609"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// All the regions of MBB are first found and stored in MBBRegions, which</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00610" /><CodeLine lineNumber="610"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// will be processed (MBB) top-down if initialized with true.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00611" /><CodeLine lineNumber="611"><Highlight kind="normal">    </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00612" /><CodeLine lineNumber="612"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The Scheduler may insert instructions during either schedule() or</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00613" /><CodeLine lineNumber="613"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// exitRegion(), even for empty regions. So the local iterators &#39;I&#39; and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00614" /><CodeLine lineNumber="614"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// &#39;RegionEnd&#39; are invalid across these calls. Instructions must not be</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00615" /><CodeLine lineNumber="615"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// added to other regions than the current one without updating MBBRegions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00616" /><CodeLine lineNumber="616"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00617" /><CodeLine lineNumber="617"><Highlight kind="normal">    <a href="#aee652267c4ed8c882f06243aa0d601dd">MBBRegionsVector</a> MBBRegions;</Highlight></CodeLine>
<Link id="l00618" /><CodeLine lineNumber="618"><Highlight kind="normal">    <a href="#ae1be3a2fc5dfa3281d32b6fb4e4ea6dd">getSchedRegions</a>(&amp;&#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>, MBBRegions, <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.doMBBSchedRegionsTopDown());</Highlight></CodeLine>
<Link id="l00619" /><CodeLine lineNumber="619"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/schedregion">SchedRegion</a> &amp;R : MBBRegions) &#123;</Highlight></CodeLine>
<Link id="l00620" /><CodeLine lineNumber="620"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = R.RegionBegin;</Highlight></CodeLine>
<Link id="l00621" /><CodeLine lineNumber="621"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> RegionEnd = R.RegionEnd;</Highlight></CodeLine>
<Link id="l00622" /><CodeLine lineNumber="622"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumRegionInstrs = R.NumRegionInstrs;</Highlight></CodeLine>
<Link id="l00623" /><CodeLine lineNumber="623"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00624" /><CodeLine lineNumber="624"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Notify the scheduler of the region, even if we may skip scheduling</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00625" /><CodeLine lineNumber="625"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// it. Perhaps it still needs to be bundled.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00626" /><CodeLine lineNumber="626"><Highlight kind="normal">      <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.enterRegion(&amp;&#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, RegionEnd, NumRegionInstrs);</Highlight></CodeLine>
<Link id="l00627" /><CodeLine lineNumber="627"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00628" /><CodeLine lineNumber="628"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Skip empty scheduling regions (0 or 1 schedulable instructions).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00629" /><CodeLine lineNumber="629"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> == RegionEnd || <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> == std::prev(RegionEnd)) &#123;</Highlight></CodeLine>
<Link id="l00630" /><CodeLine lineNumber="630"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Close the current region. Bundle the terminator if needed.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00631" /><CodeLine lineNumber="631"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// This invalidates &#39;RegionEnd&#39; and &#39;I&#39;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00632" /><CodeLine lineNumber="632"><Highlight kind="normal">        <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.exitRegion();</Highlight></CodeLine>
<Link id="l00633" /><CodeLine lineNumber="633"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00634" /><CodeLine lineNumber="634"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00635" /><CodeLine lineNumber="635"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42; MI Scheduling &#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00636" /><CodeLine lineNumber="636"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;getName() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;:&quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/namespaces/llvm/#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(&#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>)</Highlight></CodeLine>
<Link id="l00637" /><CodeLine lineNumber="637"><Highlight kind="normal">                        &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;getName() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n  From: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a></Highlight></CodeLine>
<Link id="l00638" /><CodeLine lineNumber="638"><Highlight kind="normal">                        &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;    To: &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00639" /><CodeLine lineNumber="639"><Highlight kind="normal">                 <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#acdfbcf188e2d4a80837e89de2ccdffab">if</a> (RegionEnd != <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;end()) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; &#42;RegionEnd;</Highlight></CodeLine>
<Link id="l00640" /><CodeLine lineNumber="640"><Highlight kind="normal">                 </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;End\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00641" /><CodeLine lineNumber="641"><Highlight kind="normal">                 <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; RegionInstrs: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; NumRegionInstrs &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00642" /><CodeLine lineNumber="642"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a82ab0315644106de03b36f143328179f">DumpCriticalPathLength</a>) &#123;</Highlight></CodeLine>
<Link id="l00643" /><CodeLine lineNumber="643"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <a href="/docs/api/structs/llvm/machineschedcontext/#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>-&gt;getName();</Highlight></CodeLine>
<Link id="l00644" /><CodeLine lineNumber="644"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;:%bb. &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;getNumber();</Highlight></CodeLine>
<Link id="l00645" /><CodeLine lineNumber="645"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;getName() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; \\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00646" /><CodeLine lineNumber="646"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00647" /><CodeLine lineNumber="647"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00648" /><CodeLine lineNumber="648"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Schedule a region: possibly reorder instructions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00649" /><CodeLine lineNumber="649"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// This invalidates the original region iterators.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00650" /><CodeLine lineNumber="650"><Highlight kind="normal">      <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.schedule();</Highlight></CodeLine>
<Link id="l00651" /><CodeLine lineNumber="651"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00652" /><CodeLine lineNumber="652"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Close the current region.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00653" /><CodeLine lineNumber="653"><Highlight kind="normal">      <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.exitRegion();</Highlight></CodeLine>
<Link id="l00654" /><CodeLine lineNumber="654"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00655" /><CodeLine lineNumber="655"><Highlight kind="normal">    <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.finishBlock();</Highlight></CodeLine>
<Link id="l00656" /><CodeLine lineNumber="656"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// FIXME: Ideally, no further passes should rely on kill flags. However,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00657" /><CodeLine lineNumber="657"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// thumb2 size reduction is currently an exception, so the PostMIScheduler</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00658" /><CodeLine lineNumber="658"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// needs to do this.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00659" /><CodeLine lineNumber="659"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (FixKillFlags)</Highlight></CodeLine>
<Link id="l00660" /><CodeLine lineNumber="660"><Highlight kind="normal">      <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.fixupKills(&#42;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>);</Highlight></CodeLine>
<Link id="l00661" /><CodeLine lineNumber="661"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00662" /><CodeLine lineNumber="662"><Highlight kind="normal">  <a href="#a1c735bd46fe1e1b5f6f85a710d99e149">Scheduler</a>.finalizeSchedule();</Highlight></CodeLine>
<Link id="l00663" /><CodeLine lineNumber="663"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00664" /><CodeLine lineNumber="664"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00665" /><CodeLine lineNumber="665" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#a03962eb8f2d1aae10915000f72a8b030"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/machineschedulerbase/#a03962eb8f2d1aae10915000f72a8b030">MachineSchedulerBase::print</a>(<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;O, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/module">Module</a>&#42; m)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00666" /><CodeLine lineNumber="666"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// unimplemented</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00667" /><CodeLine lineNumber="667"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00668" /><CodeLine lineNumber="668"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00669" /><CodeLine lineNumber="669"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#if !defined(NDEBUG) || defined(LLVM&#95;ENABLE&#95;DUMP)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00670" /><CodeLine lineNumber="670" lineLink="/docs/api/classes/llvm/readyqueue/#a61a4a769784e3da32d297c2752646aee"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/include/llvm/support/compiler-h/#aa863693eef567397d9c292da5bf22d34">LLVM&#95;DUMP&#95;METHOD</a> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/readyqueue/#a61a4a769784e3da32d297c2752646aee">ReadyQueue::dump</a>()</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00671" /><CodeLine lineNumber="671"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Queue &quot;</Highlight><Highlight kind="normal"> &lt;&lt; Name &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;: &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00672" /><CodeLine lineNumber="672"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU : Queue)</Highlight></CodeLine>
<Link id="l00673" /><CodeLine lineNumber="673"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; SU-&gt;NodeNum &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00674" /><CodeLine lineNumber="674"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00675" /><CodeLine lineNumber="675"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00676" /><CodeLine lineNumber="676"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00677" /><CodeLine lineNumber="677"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00678" /><CodeLine lineNumber="678"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00679" /><CodeLine lineNumber="679"><Highlight kind="normal"></Highlight><Highlight kind="comment">// ScheduleDAGMI - Basic machine instruction scheduling. This is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00680" /><CodeLine lineNumber="680"><Highlight kind="normal"></Highlight><Highlight kind="comment">// independent of PreRA/PostRA scheduling and involves no extra book-keeping for</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00681" /><CodeLine lineNumber="681"><Highlight kind="normal"></Highlight><Highlight kind="comment">// virtual registers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00682" /><CodeLine lineNumber="682"><Highlight kind="normal"></Highlight><Highlight kind="comment">// ===----------------------------------------------------------------------===/</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00683" /><CodeLine lineNumber="683"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00684" /><CodeLine lineNumber="684"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Provide a vtable anchor.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00685" /><CodeLine lineNumber="685"><Highlight kind="normal"><a href="/docs/api/classes/llvm/scheduledagmi/#a967aa1a22992b66fb06b83323ddccaa7">ScheduleDAGMI::~ScheduleDAGMI</a>() = </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00686" /><CodeLine lineNumber="686"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00687" /><CodeLine lineNumber="687"><Highlight kind="comment">/// ReleaseSucc - Decrement the NumPredsLeft count of a successor. When</Highlight></CodeLine>
<Link id="l00688" /><CodeLine lineNumber="688"><Highlight kind="comment">/// NumPredsLeft reaches zero, release the successor node.</Highlight></CodeLine>
<Link id="l00689" /><CodeLine lineNumber="689"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l00690" /><CodeLine lineNumber="690"><Highlight kind="comment">/// FIXME: Adjust SuccSU height based on MinLatency.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00691" /><CodeLine lineNumber="691" lineLink="/docs/api/classes/llvm/scheduledagmi/#a90ffd918ef80c711049758b2064e15c4"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a90ffd918ef80c711049758b2064e15c4">ScheduleDAGMI::releaseSucc</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, <a href="/docs/api/classes/llvm/sdep">SDep</a> &#42;SuccEdge) &#123;</Highlight></CodeLine>
<Link id="l00692" /><CodeLine lineNumber="692"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SuccSU = SuccEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#a03a2dc5f9f321a2ce28f5c641dfe5455">getSUnit</a>();</Highlight></CodeLine>
<Link id="l00693" /><CodeLine lineNumber="693"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00694" /><CodeLine lineNumber="694"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SuccEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#a21e3367f21a2b07ce6e344fc6a2ed078">isWeak</a>()) &#123;</Highlight></CodeLine>
<Link id="l00695" /><CodeLine lineNumber="695"><Highlight kind="normal">    --SuccSU-&gt;<a href="/docs/api/classes/llvm/sunit/#ab9e02660290b9557b547b57870133467">WeakPredsLeft</a>;</Highlight></CodeLine>
<Link id="l00696" /><CodeLine lineNumber="696"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SuccEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#ac2a5a158ff2d2bbbadae7accc72e7c51">isCluster</a>())</Highlight></CodeLine>
<Link id="l00697" /><CodeLine lineNumber="697"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmi/#a2aa5cb48ee16ded1b263483026d08894">NextClusterSucc</a> = SuccSU;</Highlight></CodeLine>
<Link id="l00698" /><CodeLine lineNumber="698"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00699" /><CodeLine lineNumber="699"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00700" /><CodeLine lineNumber="700"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#ifndef NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00701" /><CodeLine lineNumber="701"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SuccSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a94f78042fbba3ea4cd1004353daa46aa">NumPredsLeft</a> == 0) &#123;</Highlight></CodeLine>
<Link id="l00702" /><CodeLine lineNumber="702"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;&#42;&#42;&#42; Scheduling failed! &#42;&#42;&#42;\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00703" /><CodeLine lineNumber="703"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledaginstrs/#aa5f22315c4064579fca6cd88fb36ea5a">dumpNode</a>(&#42;SuccSU);</Highlight></CodeLine>
<Link id="l00704" /><CodeLine lineNumber="704"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; has been released too many times!\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00705" /><CodeLine lineNumber="705"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00706" /><CodeLine lineNumber="706"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00707" /><CodeLine lineNumber="707"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00708" /><CodeLine lineNumber="708"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// SU-&gt;TopReadyCycle was set to CurrCycle when it was scheduled. However,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00709" /><CodeLine lineNumber="709"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// CurrCycle may have advanced since then.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00710" /><CodeLine lineNumber="710"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SuccSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> &lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> + SuccEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#a5eca2019521fd47b79fe5ef66d02fd43">getLatency</a>())</Highlight></CodeLine>
<Link id="l00711" /><CodeLine lineNumber="711"><Highlight kind="normal">    SuccSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> + SuccEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#a5eca2019521fd47b79fe5ef66d02fd43">getLatency</a>();</Highlight></CodeLine>
<Link id="l00712" /><CodeLine lineNumber="712"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00713" /><CodeLine lineNumber="713"><Highlight kind="normal">  --SuccSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a94f78042fbba3ea4cd1004353daa46aa">NumPredsLeft</a>;</Highlight></CodeLine>
<Link id="l00714" /><CodeLine lineNumber="714"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SuccSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a94f78042fbba3ea4cd1004353daa46aa">NumPredsLeft</a> == 0 &amp;&amp; SuccSU != &amp;<a href="/docs/api/classes/llvm/scheduledag/#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>)</Highlight></CodeLine>
<Link id="l00715" /><CodeLine lineNumber="715"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;releaseTopNode(SuccSU);</Highlight></CodeLine>
<Link id="l00716" /><CodeLine lineNumber="716"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00717" /><CodeLine lineNumber="717"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00718" /><CodeLine lineNumber="718"><Highlight kind="comment">/// releaseSuccessors - Call releaseSucc on each of SU&#39;s successors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00719" /><CodeLine lineNumber="719" lineLink="/docs/api/classes/llvm/scheduledagmi/#acf56d667066b39177a3c0f134d759d98"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#acf56d667066b39177a3c0f134d759d98">ScheduleDAGMI::releaseSuccessors</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU) &#123;</Highlight></CodeLine>
<Link id="l00720" /><CodeLine lineNumber="720"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sdep">SDep</a> &amp;Succ : SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>)</Highlight></CodeLine>
<Link id="l00721" /><CodeLine lineNumber="721"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmi/#a90ffd918ef80c711049758b2064e15c4">releaseSucc</a>(SU, &amp;Succ);</Highlight></CodeLine>
<Link id="l00722" /><CodeLine lineNumber="722"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00723" /><CodeLine lineNumber="723"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00724" /><CodeLine lineNumber="724"><Highlight kind="comment">/// ReleasePred - Decrement the NumSuccsLeft count of a predecessor. When</Highlight></CodeLine>
<Link id="l00725" /><CodeLine lineNumber="725"><Highlight kind="comment">/// NumSuccsLeft reaches zero, release the predecessor node.</Highlight></CodeLine>
<Link id="l00726" /><CodeLine lineNumber="726"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l00727" /><CodeLine lineNumber="727"><Highlight kind="comment">/// FIXME: Adjust PredSU height based on MinLatency.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00728" /><CodeLine lineNumber="728" lineLink="/docs/api/classes/llvm/scheduledagmi/#a1c51776d4e512a7f24d5b5d601c31016"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a1c51776d4e512a7f24d5b5d601c31016">ScheduleDAGMI::releasePred</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, <a href="/docs/api/classes/llvm/sdep">SDep</a> &#42;PredEdge) &#123;</Highlight></CodeLine>
<Link id="l00729" /><CodeLine lineNumber="729"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;PredSU = PredEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#a03a2dc5f9f321a2ce28f5c641dfe5455">getSUnit</a>();</Highlight></CodeLine>
<Link id="l00730" /><CodeLine lineNumber="730"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00731" /><CodeLine lineNumber="731"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PredEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#a21e3367f21a2b07ce6e344fc6a2ed078">isWeak</a>()) &#123;</Highlight></CodeLine>
<Link id="l00732" /><CodeLine lineNumber="732"><Highlight kind="normal">    --PredSU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae75d620ee809eaf50970a833f4a3ace9">WeakSuccsLeft</a>;</Highlight></CodeLine>
<Link id="l00733" /><CodeLine lineNumber="733"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PredEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#ac2a5a158ff2d2bbbadae7accc72e7c51">isCluster</a>())</Highlight></CodeLine>
<Link id="l00734" /><CodeLine lineNumber="734"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmi/#a33503949e135cad03fa91fde0c005649">NextClusterPred</a> = PredSU;</Highlight></CodeLine>
<Link id="l00735" /><CodeLine lineNumber="735"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00736" /><CodeLine lineNumber="736"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00737" /><CodeLine lineNumber="737"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#ifndef NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00738" /><CodeLine lineNumber="738"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PredSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a40c2dfbd170941dd4d20ee9b60c9d49d">NumSuccsLeft</a> == 0) &#123;</Highlight></CodeLine>
<Link id="l00739" /><CodeLine lineNumber="739"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;&#42;&#42;&#42; Scheduling failed! &#42;&#42;&#42;\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00740" /><CodeLine lineNumber="740"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledaginstrs/#aa5f22315c4064579fca6cd88fb36ea5a">dumpNode</a>(&#42;PredSU);</Highlight></CodeLine>
<Link id="l00741" /><CodeLine lineNumber="741"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; has been released too many times!\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00742" /><CodeLine lineNumber="742"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00743" /><CodeLine lineNumber="743"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00744" /><CodeLine lineNumber="744"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00745" /><CodeLine lineNumber="745"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// SU-&gt;BotReadyCycle was set to CurrCycle when it was scheduled. However,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00746" /><CodeLine lineNumber="746"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// CurrCycle may have advanced since then.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00747" /><CodeLine lineNumber="747"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PredSU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> &lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> + PredEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#a5eca2019521fd47b79fe5ef66d02fd43">getLatency</a>())</Highlight></CodeLine>
<Link id="l00748" /><CodeLine lineNumber="748"><Highlight kind="normal">    PredSU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> + PredEdge-&gt;<a href="/docs/api/classes/llvm/sdep/#a5eca2019521fd47b79fe5ef66d02fd43">getLatency</a>();</Highlight></CodeLine>
<Link id="l00749" /><CodeLine lineNumber="749"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00750" /><CodeLine lineNumber="750"><Highlight kind="normal">  --PredSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a40c2dfbd170941dd4d20ee9b60c9d49d">NumSuccsLeft</a>;</Highlight></CodeLine>
<Link id="l00751" /><CodeLine lineNumber="751"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PredSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a40c2dfbd170941dd4d20ee9b60c9d49d">NumSuccsLeft</a> == 0 &amp;&amp; PredSU != &amp;<a href="/docs/api/classes/llvm/scheduledag/#a521bf68518a92483130a58680716d153">EntrySU</a>)</Highlight></CodeLine>
<Link id="l00752" /><CodeLine lineNumber="752"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;releaseBottomNode(PredSU);</Highlight></CodeLine>
<Link id="l00753" /><CodeLine lineNumber="753"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00754" /><CodeLine lineNumber="754"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00755" /><CodeLine lineNumber="755"><Highlight kind="comment">/// releasePredecessors - Call releasePred on each of SU&#39;s predecessors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00756" /><CodeLine lineNumber="756" lineLink="/docs/api/classes/llvm/scheduledagmi/#a25f9975b56fe38f7a8bb4d10b7f6f5ea"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a25f9975b56fe38f7a8bb4d10b7f6f5ea">ScheduleDAGMI::releasePredecessors</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU) &#123;</Highlight></CodeLine>
<Link id="l00757" /><CodeLine lineNumber="757"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sdep">SDep</a> &amp;Pred : SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae2b43854b542de66eec6475adc48f56c">Preds</a>)</Highlight></CodeLine>
<Link id="l00758" /><CodeLine lineNumber="758"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmi/#a1c51776d4e512a7f24d5b5d601c31016">releasePred</a>(SU, &amp;Pred);</Highlight></CodeLine>
<Link id="l00759" /><CodeLine lineNumber="759"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00760" /><CodeLine lineNumber="760"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00761" /><CodeLine lineNumber="761" lineLink="/docs/api/classes/llvm/scheduledagmi/#a19c5e2b675721f465bc85a5f58e7c084"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a19c5e2b675721f465bc85a5f58e7c084">ScheduleDAGMI::startBlock</a>(<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;bb) &#123;</Highlight></CodeLine>
<Link id="l00762" /><CodeLine lineNumber="762"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledaginstrs/#a2822215b7634783aece96ef695a72f1d">ScheduleDAGInstrs::startBlock</a>(bb);</Highlight></CodeLine>
<Link id="l00763" /><CodeLine lineNumber="763"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;enterMBB(bb);</Highlight></CodeLine>
<Link id="l00764" /><CodeLine lineNumber="764"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00765" /><CodeLine lineNumber="765"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00766" /><CodeLine lineNumber="766" lineLink="/docs/api/classes/llvm/scheduledagmi/#a9ca687b69b34efab1604af98db151cbf"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a9ca687b69b34efab1604af98db151cbf">ScheduleDAGMI::finishBlock</a>() &#123;</Highlight></CodeLine>
<Link id="l00767" /><CodeLine lineNumber="767"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;leaveMBB();</Highlight></CodeLine>
<Link id="l00768" /><CodeLine lineNumber="768"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledaginstrs/#a1f9a4461e2c9ac06b97f55554f836d66">ScheduleDAGInstrs::finishBlock</a>();</Highlight></CodeLine>
<Link id="l00769" /><CodeLine lineNumber="769"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00770" /><CodeLine lineNumber="770"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00771" /><CodeLine lineNumber="771"><Highlight kind="comment">/// enterRegion - Called back from PostMachineScheduler::runOnMachineFunction</Highlight></CodeLine>
<Link id="l00772" /><CodeLine lineNumber="772"><Highlight kind="comment">/// after crossing a scheduling boundary. &#91;begin, end) includes all instructions</Highlight></CodeLine>
<Link id="l00773" /><CodeLine lineNumber="773"><Highlight kind="comment">/// in the region, including the boundary itself and single-instruction regions</Highlight></CodeLine>
<Link id="l00774" /><CodeLine lineNumber="774"><Highlight kind="comment">/// that don&#39;t get scheduled.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00775" /><CodeLine lineNumber="775" lineLink="/docs/api/classes/llvm/scheduledagmi/#a78e3672daf3301153eac2266dbc32885"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a78e3672daf3301153eac2266dbc32885">ScheduleDAGMI::enterRegion</a>(<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;bb,</Highlight></CodeLine>
<Link id="l00776" /><CodeLine lineNumber="776"><Highlight kind="normal">                                     <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>,</Highlight></CodeLine>
<Link id="l00777" /><CodeLine lineNumber="777"><Highlight kind="normal">                                     <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/classes/llvm/scheduledaginstrs/#a21805259f54dab47c2b3da009216996a">end</a>,</Highlight></CodeLine>
<Link id="l00778" /><CodeLine lineNumber="778"><Highlight kind="normal">                                     </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> regioninstrs)</Highlight></CodeLine>
<Link id="l00779" /><CodeLine lineNumber="779"><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00780" /><CodeLine lineNumber="780"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledaginstrs/#ae8727d434d20639d563849891f5ca1e1">ScheduleDAGInstrs::enterRegion</a>(bb, <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a21805259f54dab47c2b3da009216996a">end</a>, regioninstrs);</Highlight></CodeLine>
<Link id="l00781" /><CodeLine lineNumber="781"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00782" /><CodeLine lineNumber="782"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;initPolicy(<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a21805259f54dab47c2b3da009216996a">end</a>, regioninstrs);</Highlight></CodeLine>
<Link id="l00783" /><CodeLine lineNumber="783"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00784" /><CodeLine lineNumber="784"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Set dump direction after initializing sched policy.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00785" /><CodeLine lineNumber="785"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledaginstrs/#a8d1f67b9f6d31b169c0d4b1d2080b4e7">ScheduleDAGMI::DumpDirection</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>;</Highlight></CodeLine>
<Link id="l00786" /><CodeLine lineNumber="786"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;getPolicy().OnlyTopDown)</Highlight></CodeLine>
<Link id="l00787" /><CodeLine lineNumber="787"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a> = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a8d1f67b9f6d31b169c0d4b1d2080b4e7a622f7d95cc7d6d2dc7a32b140559b680">ScheduleDAGMI::DumpDirection::TopDown</a>;</Highlight></CodeLine>
<Link id="l00788" /><CodeLine lineNumber="788"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;getPolicy().OnlyBottomUp)</Highlight></CodeLine>
<Link id="l00789" /><CodeLine lineNumber="789"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a> = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a8d1f67b9f6d31b169c0d4b1d2080b4e7a3dac6c64382dc74b937892893d2595c6">ScheduleDAGMI::DumpDirection::BottomUp</a>;</Highlight></CodeLine>
<Link id="l00790" /><CodeLine lineNumber="790"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00791" /><CodeLine lineNumber="791"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a> = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a8d1f67b9f6d31b169c0d4b1d2080b4e7a7aa4fbe53df8b2bf33ec065623b42e34">ScheduleDAGMI::DumpDirection::Bidirectional</a>;</Highlight></CodeLine>
<Link id="l00792" /><CodeLine lineNumber="792"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledaginstrs/#afdb896a30eb0e9fc3143fe6c447570cb">setDumpDirection</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>);</Highlight></CodeLine>
<Link id="l00793" /><CodeLine lineNumber="793"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00794" /><CodeLine lineNumber="794"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00795" /><CodeLine lineNumber="795"><Highlight kind="comment">/// This is normally called from the main scheduler loop but may also be invoked</Highlight></CodeLine>
<Link id="l00796" /><CodeLine lineNumber="796"><Highlight kind="comment">/// by the scheduling strategy to perform additional code motion.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00797" /><CodeLine lineNumber="797" lineLink="/docs/api/classes/llvm/scheduledagmi/#a2209b15a069023499cc665b373e67703"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a2209b15a069023499cc665b373e67703">ScheduleDAGMI::moveInstruction</a>(</Highlight></CodeLine>
<Link id="l00798" /><CodeLine lineNumber="798"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> InsertPos) &#123;</Highlight></CodeLine>
<Link id="l00799" /><CodeLine lineNumber="799"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Advance RegionBegin if the first instruction moves down.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00800" /><CodeLine lineNumber="800"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (&amp;&#42;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a> == <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</Highlight></CodeLine>
<Link id="l00801" /><CodeLine lineNumber="801"><Highlight kind="normal">    ++<a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>;</Highlight></CodeLine>
<Link id="l00802" /><CodeLine lineNumber="802"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00803" /><CodeLine lineNumber="803"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Update the instruction stream.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00804" /><CodeLine lineNumber="804"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;splice(InsertPos, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</Highlight></CodeLine>
<Link id="l00805" /><CodeLine lineNumber="805"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00806" /><CodeLine lineNumber="806"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Update LiveIntervals</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00807" /><CodeLine lineNumber="807"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>)</Highlight></CodeLine>
<Link id="l00808" /><CodeLine lineNumber="808"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;handleMove(&#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, </Highlight><Highlight kind="comment">/&#42;UpdateFlags=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00809" /><CodeLine lineNumber="809"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00810" /><CodeLine lineNumber="810"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Recede RegionBegin if an instruction moves above the first.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00811" /><CodeLine lineNumber="811"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a> == InsertPos)</Highlight></CodeLine>
<Link id="l00812" /><CodeLine lineNumber="812"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</Highlight></CodeLine>
<Link id="l00813" /><CodeLine lineNumber="813"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00814" /><CodeLine lineNumber="814"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00815" /><CodeLine lineNumber="815" lineLink="/docs/api/classes/llvm/scheduledagmi/#a569fc4139bec0217794e9f830d6ba852"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a569fc4139bec0217794e9f830d6ba852">ScheduleDAGMI::checkSchedLimit</a>() &#123;</Highlight></CodeLine>
<Link id="l00816" /><CodeLine lineNumber="816"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#if LLVM&#95;ENABLE&#95;ABI&#95;BREAKING&#95;CHECKS &amp;&amp; !defined(NDEBUG)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00817" /><CodeLine lineNumber="817"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumInstrsScheduled == <a href="#a533a172b0f7e2e6d667464a68c6f30ea">MISchedCutoff</a> &amp;&amp; <a href="#a533a172b0f7e2e6d667464a68c6f30ea">MISchedCutoff</a> != ~0U) &#123;</Highlight></CodeLine>
<Link id="l00818" /><CodeLine lineNumber="818"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> = <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>;</Highlight></CodeLine>
<Link id="l00819" /><CodeLine lineNumber="819"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00820" /><CodeLine lineNumber="820"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00821" /><CodeLine lineNumber="821"><Highlight kind="normal">  ++NumInstrsScheduled;</Highlight></CodeLine>
<Link id="l00822" /><CodeLine lineNumber="822"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00823" /><CodeLine lineNumber="823"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00824" /><CodeLine lineNumber="824"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00825" /><CodeLine lineNumber="825"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00826" /><CodeLine lineNumber="826"><Highlight kind="comment">/// Per-region scheduling driver, called back from</Highlight></CodeLine>
<Link id="l00827" /><CodeLine lineNumber="827"><Highlight kind="comment">/// PostMachineScheduler::runOnMachineFunction. This is a simplified driver</Highlight></CodeLine>
<Link id="l00828" /><CodeLine lineNumber="828"><Highlight kind="comment">/// that does not consider liveness or register pressure. It is useful for</Highlight></CodeLine>
<Link id="l00829" /><CodeLine lineNumber="829"><Highlight kind="comment">/// PostRA scheduling and potentially other custom schedulers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00830" /><CodeLine lineNumber="830" lineLink="/docs/api/classes/llvm/scheduledagmi/#a5d7e71cf32573e6b1762b5a1d82a1cf5"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a5d7e71cf32573e6b1762b5a1d82a1cf5">ScheduleDAGMI::schedule</a>() &#123;</Highlight></CodeLine>
<Link id="l00831" /><CodeLine lineNumber="831"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;ScheduleDAGMI::schedule starting\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00832" /><CodeLine lineNumber="832"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;dumpPolicy());</Highlight></CodeLine>
<Link id="l00833" /><CodeLine lineNumber="833"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00834" /><CodeLine lineNumber="834"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Build the DAG.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00835" /><CodeLine lineNumber="835"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab580983de4f7b69ebcca992be9cb3223">buildSchedGraph</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a79b8428bb41e16b71ae2bb0139bce5eb">AA</a>);</Highlight></CodeLine>
<Link id="l00836" /><CodeLine lineNumber="836"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00837" /><CodeLine lineNumber="837"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a2aa2eb6fd6a44ff6b9cbad960d446c7a">postProcessDAG</a>();</Highlight></CodeLine>
<Link id="l00838" /><CodeLine lineNumber="838"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00839" /><CodeLine lineNumber="839"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;SUnit&#42;, 8&gt;</a> TopRoots, BotRoots;</Highlight></CodeLine>
<Link id="l00840" /><CodeLine lineNumber="840"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a6d0a0b4903e8d4d12c98b0f43fe83878">findRootsAndBiasEdges</a>(TopRoots, BotRoots);</Highlight></CodeLine>
<Link id="l00841" /><CodeLine lineNumber="841"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00842" /><CodeLine lineNumber="842"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs/#aea2d4ef1e00ee834ab155abd18a560e4">dump</a>());</Highlight></CodeLine>
<Link id="l00843" /><CodeLine lineNumber="843"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a0e9fde7ed08fd233750d0a947147dfa1">PrintDAGs</a>) <a href="/docs/api/classes/llvm/scheduledaginstrs/#aea2d4ef1e00ee834ab155abd18a560e4">dump</a>();</Highlight></CodeLine>
<Link id="l00844" /><CodeLine lineNumber="844"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a5ec9cfe35d76125af923975fa0c1730a">ViewMISchedDAGs</a>) <a href="/docs/api/classes/llvm/scheduledagmi/#a8b7babb023cad0842f5a177e7abe3651">viewGraph</a>();</Highlight></CodeLine>
<Link id="l00845" /><CodeLine lineNumber="845"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00846" /><CodeLine lineNumber="846"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Initialize the strategy before modifying the DAG.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00847" /><CodeLine lineNumber="847"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This may initialize a DFSResult to be used for queue priority.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00848" /><CodeLine lineNumber="848"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;initialize(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00849" /><CodeLine lineNumber="849"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00850" /><CodeLine lineNumber="850"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Initialize ready queues now that the DAG and priority data are finalized.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00851" /><CodeLine lineNumber="851"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a1f98694f104d052d71ed74ade38d69f0">initQueues</a>(TopRoots, BotRoots);</Highlight></CodeLine>
<Link id="l00852" /><CodeLine lineNumber="852"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00853" /><CodeLine lineNumber="853"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsTopNode = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00854" /><CodeLine lineNumber="854"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l00855" /><CodeLine lineNumber="855"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;&#42;&#42; ScheduleDAGMI::schedule picking next node\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00856" /><CodeLine lineNumber="856"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;pickNode(IsTopNode);</Highlight></CodeLine>
<Link id="l00857" /><CodeLine lineNumber="857"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SU) </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00858" /><CodeLine lineNumber="858"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00859" /><CodeLine lineNumber="859"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Node already scheduled&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00860" /><CodeLine lineNumber="860"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/scheduledagmi/#a569fc4139bec0217794e9f830d6ba852">checkSchedLimit</a>())</Highlight></CodeLine>
<Link id="l00861" /><CodeLine lineNumber="861"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00862" /><CodeLine lineNumber="862"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00863" /><CodeLine lineNumber="863"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</Highlight></CodeLine>
<Link id="l00864" /><CodeLine lineNumber="864"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsTopNode) &#123;</Highlight></CodeLine>
<Link id="l00865" /><CodeLine lineNumber="865"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae0b8da4dfde85d4ddc32359ca52dc493">isTopReady</a>() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;node still has unscheduled dependencies&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00866" /><CodeLine lineNumber="866"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (&amp;&#42;<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> == <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</Highlight></CodeLine>
<Link id="l00867" /><CodeLine lineNumber="867"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> = <a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(++<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>);</Highlight></CodeLine>
<Link id="l00868" /><CodeLine lineNumber="868"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00869" /><CodeLine lineNumber="869"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/scheduledagmi/#a2209b15a069023499cc665b373e67703">moveInstruction</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>);</Highlight></CodeLine>
<Link id="l00870" /><CodeLine lineNumber="870"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l00871" /><CodeLine lineNumber="871"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ac198a5fb130b4c09836ba20e01b4290d">isBottomReady</a>() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;node still has unscheduled dependencies&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00872" /><CodeLine lineNumber="872"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> priorII =</Highlight></CodeLine>
<Link id="l00873" /><CodeLine lineNumber="873"><Highlight kind="normal">        <a href="#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>);</Highlight></CodeLine>
<Link id="l00874" /><CodeLine lineNumber="874"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (&amp;&#42;priorII == <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</Highlight></CodeLine>
<Link id="l00875" /><CodeLine lineNumber="875"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a> = priorII;</Highlight></CodeLine>
<Link id="l00876" /><CodeLine lineNumber="876"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l00877" /><CodeLine lineNumber="877"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (&amp;&#42;<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> == <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</Highlight></CodeLine>
<Link id="l00878" /><CodeLine lineNumber="878"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> = <a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(++<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>, priorII);</Highlight></CodeLine>
<Link id="l00879" /><CodeLine lineNumber="879"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/scheduledagmi/#a2209b15a069023499cc665b373e67703">moveInstruction</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>);</Highlight></CodeLine>
<Link id="l00880" /><CodeLine lineNumber="880"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</Highlight></CodeLine>
<Link id="l00881" /><CodeLine lineNumber="881"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00882" /><CodeLine lineNumber="882"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00883" /><CodeLine lineNumber="883"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Notify the scheduling strategy before updating the DAG.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00884" /><CodeLine lineNumber="884"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// This sets the scheduled node&#39;s ReadyCycle to CurrCycle. When updateQueues</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00885" /><CodeLine lineNumber="885"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// runs, it can then use the accurate ReadyCycle time to determine whether</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00886" /><CodeLine lineNumber="886"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// newly released nodes can move to the readyQ.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00887" /><CodeLine lineNumber="887"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;schedNode(SU, IsTopNode);</Highlight></CodeLine>
<Link id="l00888" /><CodeLine lineNumber="888"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00889" /><CodeLine lineNumber="889"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmi/#abfdd9a95217810c69b2557060a130318">updateQueues</a>(SU, IsTopNode);</Highlight></CodeLine>
<Link id="l00890" /><CodeLine lineNumber="890"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00891" /><CodeLine lineNumber="891"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> == <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Nonempty unscheduled zone.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00892" /><CodeLine lineNumber="892"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00893" /><CodeLine lineNumber="893"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#ac2dafe98c88d43b256622413886e2152">placeDebugValues</a>();</Highlight></CodeLine>
<Link id="l00894" /><CodeLine lineNumber="894"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00895" /><CodeLine lineNumber="895"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(&#123;</Highlight></CodeLine>
<Link id="l00896" /><CodeLine lineNumber="896"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;&#42;&#42;&#42; Final schedule for &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00897" /><CodeLine lineNumber="897"><Highlight kind="normal">           &lt;&lt; <a href="/docs/api/namespaces/llvm/#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(&#42;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>()-&gt;<a href="/docs/api/files/lib/lib/analysis/basicaliasanalysis-cpp/#a1b8850f1ed44c12bc3501175a71c251c">getParent</a>()) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &#42;&#42;&#42;\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00898" /><CodeLine lineNumber="898"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmi/#a01b02e76c87211e7084ec17f18a2d16f">dumpSchedule</a>();</Highlight></CodeLine>
<Link id="l00899" /><CodeLine lineNumber="899"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00900" /><CodeLine lineNumber="900"><Highlight kind="normal">  &#125;);</Highlight></CodeLine>
<Link id="l00901" /><CodeLine lineNumber="901"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00902" /><CodeLine lineNumber="902"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00903" /><CodeLine lineNumber="903"><Highlight kind="comment">/// Apply each ScheduleDAGMutation step in order.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00904" /><CodeLine lineNumber="904" lineLink="/docs/api/classes/llvm/scheduledagmi/#a2aa2eb6fd6a44ff6b9cbad960d446c7a"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a2aa2eb6fd6a44ff6b9cbad960d446c7a">ScheduleDAGMI::postProcessDAG</a>() &#123;</Highlight></CodeLine>
<Link id="l00905" /><CodeLine lineNumber="905"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;m : <a href="/docs/api/classes/llvm/scheduledagmi/#aed362d97300c9cd91f179f9c6c31c9ac">Mutations</a>)</Highlight></CodeLine>
<Link id="l00906" /><CodeLine lineNumber="906"><Highlight kind="normal">    m-&gt;apply(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00907" /><CodeLine lineNumber="907"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00908" /><CodeLine lineNumber="908"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00909" /><CodeLine lineNumber="909" lineLink="/docs/api/classes/llvm/scheduledagmi/#a6d0a0b4903e8d4d12c98b0f43fe83878"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a6d0a0b4903e8d4d12c98b0f43fe83878">ScheduleDAGMI::</a></Highlight></CodeLine>
<Link id="l00910" /><CodeLine lineNumber="910"><Highlight kind="normal"><a href="/docs/api/classes/llvm/scheduledagmi/#a6d0a0b4903e8d4d12c98b0f43fe83878">findRootsAndBiasEdges</a>(<a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;SUnit&#42;&gt;</a> &amp;TopRoots,</Highlight></CodeLine>
<Link id="l00911" /><CodeLine lineNumber="911"><Highlight kind="normal">                      <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;SUnit&#42;&gt;</a> &amp;BotRoots) &#123;</Highlight></CodeLine>
<Link id="l00912" /><CodeLine lineNumber="912"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &amp;SU : <a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>) &#123;</Highlight></CodeLine>
<Link id="l00913" /><CodeLine lineNumber="913"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!SU.isBoundaryNode() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Boundary node should not be in SUnits&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00914" /><CodeLine lineNumber="914"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00915" /><CodeLine lineNumber="915"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Order predecessors so DFSResult follows the critical path.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00916" /><CodeLine lineNumber="916"><Highlight kind="normal">    SU.biasCriticalPath();</Highlight></CodeLine>
<Link id="l00917" /><CodeLine lineNumber="917"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00918" /><CodeLine lineNumber="918"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// A SUnit is ready to top schedule if it has no predecessors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00919" /><CodeLine lineNumber="919"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SU.NumPredsLeft)</Highlight></CodeLine>
<Link id="l00920" /><CodeLine lineNumber="920"><Highlight kind="normal">      TopRoots.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(&amp;SU);</Highlight></CodeLine>
<Link id="l00921" /><CodeLine lineNumber="921"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// A SUnit is ready to bottom schedule if it has no successors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00922" /><CodeLine lineNumber="922"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SU.NumSuccsLeft)</Highlight></CodeLine>
<Link id="l00923" /><CodeLine lineNumber="923"><Highlight kind="normal">      BotRoots.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(&amp;SU);</Highlight></CodeLine>
<Link id="l00924" /><CodeLine lineNumber="924"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00925" /><CodeLine lineNumber="925"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledag/#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>.biasCriticalPath();</Highlight></CodeLine>
<Link id="l00926" /><CodeLine lineNumber="926"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00927" /><CodeLine lineNumber="927"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00928" /><CodeLine lineNumber="928"><Highlight kind="comment">/// Identify DAG roots and setup scheduler queues.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00929" /><CodeLine lineNumber="929" lineLink="/docs/api/classes/llvm/scheduledagmi/#a1f98694f104d052d71ed74ade38d69f0"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a1f98694f104d052d71ed74ade38d69f0">ScheduleDAGMI::initQueues</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;SUnit&#42;&gt;</a> TopRoots,</Highlight></CodeLine>
<Link id="l00930" /><CodeLine lineNumber="930"><Highlight kind="normal">                               <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;SUnit&#42;&gt;</a> BotRoots) &#123;</Highlight></CodeLine>
<Link id="l00931" /><CodeLine lineNumber="931"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a2aa5cb48ee16ded1b263483026d08894">NextClusterSucc</a> = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00932" /><CodeLine lineNumber="932"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a33503949e135cad03fa91fde0c005649">NextClusterPred</a> = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00933" /><CodeLine lineNumber="933"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00934" /><CodeLine lineNumber="934"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Release all DAG roots for scheduling, not including EntrySU/ExitSU.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00935" /><CodeLine lineNumber="935"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00936" /><CodeLine lineNumber="936"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Nodes with unreleased weak edges can still be roots.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00937" /><CodeLine lineNumber="937"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Release top roots in forward order.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00938" /><CodeLine lineNumber="938"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU : TopRoots)</Highlight></CodeLine>
<Link id="l00939" /><CodeLine lineNumber="939"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;releaseTopNode(SU);</Highlight></CodeLine>
<Link id="l00940" /><CodeLine lineNumber="940"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00941" /><CodeLine lineNumber="941"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Release bottom roots in reverse order so the higher priority nodes appear</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00942" /><CodeLine lineNumber="942"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// first. This is more natural and slightly more efficient.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00943" /><CodeLine lineNumber="943"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a739c383b97286396ce969b521da2f642">SmallVectorImpl&lt;SUnit&#42;&gt;::const&#95;reverse&#95;iterator</a></Highlight></CodeLine>
<Link id="l00944" /><CodeLine lineNumber="944"><Highlight kind="normal">         <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BotRoots.<a href="/docs/api/classes/llvm/arrayref/#aebe6da1ab4a07020669f3d6148c0b559">rbegin</a>(), E = BotRoots.<a href="/docs/api/classes/llvm/arrayref/#a709f5d7f042648ec20197939d9a6805f">rend</a>(); <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</Highlight></CodeLine>
<Link id="l00945" /><CodeLine lineNumber="945"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;releaseBottomNode(&#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</Highlight></CodeLine>
<Link id="l00946" /><CodeLine lineNumber="946"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00947" /><CodeLine lineNumber="947"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00948" /><CodeLine lineNumber="948"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#acf56d667066b39177a3c0f134d759d98">releaseSuccessors</a>(&amp;<a href="/docs/api/classes/llvm/scheduledag/#a521bf68518a92483130a58680716d153">EntrySU</a>);</Highlight></CodeLine>
<Link id="l00949" /><CodeLine lineNumber="949"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a25f9975b56fe38f7a8bb4d10b7f6f5ea">releasePredecessors</a>(&amp;<a href="/docs/api/classes/llvm/scheduledag/#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>);</Highlight></CodeLine>
<Link id="l00950" /><CodeLine lineNumber="950"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00951" /><CodeLine lineNumber="951"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;registerRoots();</Highlight></CodeLine>
<Link id="l00952" /><CodeLine lineNumber="952"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00953" /><CodeLine lineNumber="953"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Advance past initial DebugValues.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00954" /><CodeLine lineNumber="954"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> = <a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>);</Highlight></CodeLine>
<Link id="l00955" /><CodeLine lineNumber="955"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a> = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>;</Highlight></CodeLine>
<Link id="l00956" /><CodeLine lineNumber="956"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00957" /><CodeLine lineNumber="957"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00958" /><CodeLine lineNumber="958"><Highlight kind="comment">/// Update scheduler queues after scheduling an instruction.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00959" /><CodeLine lineNumber="959" lineLink="/docs/api/classes/llvm/scheduledagmi/#abfdd9a95217810c69b2557060a130318"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#abfdd9a95217810c69b2557060a130318">ScheduleDAGMI::updateQueues</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsTopNode) &#123;</Highlight></CodeLine>
<Link id="l00960" /><CodeLine lineNumber="960"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Release dependent instructions for scheduling.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00961" /><CodeLine lineNumber="961"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsTopNode)</Highlight></CodeLine>
<Link id="l00962" /><CodeLine lineNumber="962"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmi/#acf56d667066b39177a3c0f134d759d98">releaseSuccessors</a>(SU);</Highlight></CodeLine>
<Link id="l00963" /><CodeLine lineNumber="963"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00964" /><CodeLine lineNumber="964"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmi/#a25f9975b56fe38f7a8bb4d10b7f6f5ea">releasePredecessors</a>(SU);</Highlight></CodeLine>
<Link id="l00965" /><CodeLine lineNumber="965"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00966" /><CodeLine lineNumber="966"><Highlight kind="normal">  SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a> = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00967" /><CodeLine lineNumber="967"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00968" /><CodeLine lineNumber="968"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00969" /><CodeLine lineNumber="969"><Highlight kind="comment">/// Reinsert any remaining debug&#95;values, just like the PostRA scheduler.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00970" /><CodeLine lineNumber="970" lineLink="/docs/api/classes/llvm/scheduledagmi/#ac2dafe98c88d43b256622413886e2152"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#ac2dafe98c88d43b256622413886e2152">ScheduleDAGMI::placeDebugValues</a>() &#123;</Highlight></CodeLine>
<Link id="l00971" /><CodeLine lineNumber="971"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If first instruction was a DBG&#95;VALUE then put it back.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00972" /><CodeLine lineNumber="972"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#a25ae020b571d18d34d03097d91ca0f40">FirstDbgValue</a>) &#123;</Highlight></CodeLine>
<Link id="l00973" /><CodeLine lineNumber="973"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;splice(<a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a25ae020b571d18d34d03097d91ca0f40">FirstDbgValue</a>);</Highlight></CodeLine>
<Link id="l00974" /><CodeLine lineNumber="974"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a> = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a25ae020b571d18d34d03097d91ca0f40">FirstDbgValue</a>;</Highlight></CodeLine>
<Link id="l00975" /><CodeLine lineNumber="975"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00976" /><CodeLine lineNumber="976"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00977" /><CodeLine lineNumber="977"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (std::vector&lt;std::pair&lt;MachineInstr &#42;, MachineInstr &#42;&gt;&gt;<a href="/docs/api/classes/llvm/iplist">::iterator</a></Highlight></CodeLine>
<Link id="l00978" /><CodeLine lineNumber="978"><Highlight kind="normal">         DI = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a6837fb2c08f4c8c986a4689a37ca93cf">DbgValues</a>.end(), DE = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a6837fb2c08f4c8c986a4689a37ca93cf">DbgValues</a>.begin(); DI != DE; --DI) &#123;</Highlight></CodeLine>
<Link id="l00979" /><CodeLine lineNumber="979"><Highlight kind="normal">    std::pair&lt;MachineInstr &#42;, MachineInstr &#42;&gt; <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = &#42;std::prev(DI);</Highlight></CodeLine>
<Link id="l00980" /><CodeLine lineNumber="980"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/classes/livedebugvalues/dbgvalue">DbgValue</a> = <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.first;</Highlight></CodeLine>
<Link id="l00981" /><CodeLine lineNumber="981"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> OrigPrevMI = <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.second;</Highlight></CodeLine>
<Link id="l00982" /><CodeLine lineNumber="982"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (&amp;&#42;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a> == <a href="/docs/api/classes/livedebugvalues/dbgvalue">DbgValue</a>)</Highlight></CodeLine>
<Link id="l00983" /><CodeLine lineNumber="983"><Highlight kind="normal">      ++<a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>;</Highlight></CodeLine>
<Link id="l00984" /><CodeLine lineNumber="984"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;splice(std::next(OrigPrevMI), <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>, <a href="/docs/api/classes/livedebugvalues/dbgvalue">DbgValue</a>);</Highlight></CodeLine>
<Link id="l00985" /><CodeLine lineNumber="985"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a> != <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;end() &amp;&amp; OrigPrevMI == &amp;&#42;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>)</Highlight></CodeLine>
<Link id="l00986" /><CodeLine lineNumber="986"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a> = <a href="/docs/api/classes/livedebugvalues/dbgvalue">DbgValue</a>;</Highlight></CodeLine>
<Link id="l00987" /><CodeLine lineNumber="987"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00988" /><CodeLine lineNumber="988"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00989" /><CodeLine lineNumber="989"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00990" /><CodeLine lineNumber="990"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#if !defined(NDEBUG) || defined(LLVM&#95;ENABLE&#95;DUMP)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00991" /><CodeLine lineNumber="991" lineLink="#aaae6594fa7ded6088910716df9f47553"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> &#42;<a href="#aaae6594fa7ded6088910716df9f47553">scheduleTableLegend</a> = </Highlight><Highlight kind="stringliteral">&quot;  i: issue\\n  x: resource booked&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00992" /><CodeLine lineNumber="992"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00993" /><CodeLine lineNumber="993" lineLink="/docs/api/classes/llvm/scheduledagmi/#a3010c4b89284791284aa6e2ec510501b"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/include/llvm/support/compiler-h/#aa863693eef567397d9c292da5bf22d34">LLVM&#95;DUMP&#95;METHOD</a> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a3010c4b89284791284aa6e2ec510501b">ScheduleDAGMI::dumpScheduleTraceTopDown</a>()</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00994" /><CodeLine lineNumber="994"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Bail off when there is no schedule model to query.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00995" /><CodeLine lineNumber="995"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.hasInstrSchedModel())</Highlight></CodeLine>
<Link id="l00996" /><CodeLine lineNumber="996"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00997" /><CodeLine lineNumber="997"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00998" /><CodeLine lineNumber="998"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//  Nothing to show if there is no or just one instruction.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00999" /><CodeLine lineNumber="999"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;size() &lt; 2)</Highlight></CodeLine>
<Link id="l01000" /><CodeLine lineNumber="1000"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01001" /><CodeLine lineNumber="1001"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01002" /><CodeLine lineNumber="1002"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &#42; Schedule table (TopDown):\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01003" /><CodeLine lineNumber="1003"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="#aaae6594fa7ded6088910716df9f47553">scheduleTableLegend</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01004" /><CodeLine lineNumber="1004"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> FirstCycle = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;&#42;(std::begin(&#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">)))-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a>;</Highlight></CodeLine>
<Link id="l01005" /><CodeLine lineNumber="1005"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LastCycle = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;&#42;(std::prev(std::end(&#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">))))-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a>;</Highlight></CodeLine>
<Link id="l01006" /><CodeLine lineNumber="1006"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : &#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l01007" /><CodeLine lineNumber="1007"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</Highlight></CodeLine>
<Link id="l01008" /><CodeLine lineNumber="1008"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SU)</Highlight></CodeLine>
<Link id="l01009" /><CodeLine lineNumber="1009"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01010" /><CodeLine lineNumber="1010"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a4bf5573660c55924d68b517a0e9b4554">getSchedClass</a>(SU);</Highlight></CodeLine>
<Link id="l01011" /><CodeLine lineNumber="1011"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetschedmodel/#a7b653a507e8307775b33e01655d3b8d8">TargetSchedModel::ProcResIter</a> PI = <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getWriteProcResBegin(SC),</Highlight></CodeLine>
<Link id="l01012" /><CodeLine lineNumber="1012"><Highlight kind="normal">                                       PE = <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getWriteProcResEnd(SC);</Highlight></CodeLine>
<Link id="l01013" /><CodeLine lineNumber="1013"><Highlight kind="normal">         PI != PE; ++PI) &#123;</Highlight></CodeLine>
<Link id="l01014" /><CodeLine lineNumber="1014"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> + PI-&gt;ReleaseAtCycle - 1 &gt; LastCycle)</Highlight></CodeLine>
<Link id="l01015" /><CodeLine lineNumber="1015"><Highlight kind="normal">        LastCycle = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> + PI-&gt;ReleaseAtCycle - 1;</Highlight></CodeLine>
<Link id="l01016" /><CodeLine lineNumber="1016"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01017" /><CodeLine lineNumber="1017"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01018" /><CodeLine lineNumber="1018"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Print the header with the cycles</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01019" /><CodeLine lineNumber="1019"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</Highlight><Highlight kind="stringliteral">&quot;Cycle&quot;</Highlight><Highlight kind="normal">, <a href="#a6523b0d71574a464a78e2e05bd67b543">HeaderColWidth</a>);</Highlight></CodeLine>
<Link id="l01020" /><CodeLine lineNumber="1020"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = FirstCycle; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> &lt;= LastCycle; ++<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>)</Highlight></CodeLine>
<Link id="l01021" /><CodeLine lineNumber="1021"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</Highlight><Highlight kind="stringliteral">&quot;| &quot;</Highlight><Highlight kind="normal"> + std::to&#95;string(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>), <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</Highlight></CodeLine>
<Link id="l01022" /><CodeLine lineNumber="1022"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;|\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01023" /><CodeLine lineNumber="1023"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01024" /><CodeLine lineNumber="1024"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : &#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l01025" /><CodeLine lineNumber="1025"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</Highlight></CodeLine>
<Link id="l01026" /><CodeLine lineNumber="1026"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SU) &#123;</Highlight></CodeLine>
<Link id="l01027" /><CodeLine lineNumber="1027"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Missing SUnit\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01028" /><CodeLine lineNumber="1028"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01029" /><CodeLine lineNumber="1029"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01030" /><CodeLine lineNumber="1030"><Highlight kind="normal">    std::string NodeName(</Highlight><Highlight kind="stringliteral">&quot;SU(&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01031" /><CodeLine lineNumber="1031"><Highlight kind="normal">    NodeName += std::to&#95;string(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a>) + </Highlight><Highlight kind="stringliteral">&quot;)&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01032" /><CodeLine lineNumber="1032"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(NodeName, <a href="#a6523b0d71574a464a78e2e05bd67b543">HeaderColWidth</a>);</Highlight></CodeLine>
<Link id="l01033" /><CodeLine lineNumber="1033"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = FirstCycle;</Highlight></CodeLine>
<Link id="l01034" /><CodeLine lineNumber="1034"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> &lt;= LastCycle; ++<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l01035" /><CodeLine lineNumber="1035"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> == SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a>)</Highlight></CodeLine>
<Link id="l01036" /><CodeLine lineNumber="1036"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</Highlight><Highlight kind="stringliteral">&quot;| i&quot;</Highlight><Highlight kind="normal">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</Highlight></CodeLine>
<Link id="l01037" /><CodeLine lineNumber="1037"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01038" /><CodeLine lineNumber="1038"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</Highlight><Highlight kind="stringliteral">&quot;|&quot;</Highlight><Highlight kind="normal">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</Highlight></CodeLine>
<Link id="l01039" /><CodeLine lineNumber="1039"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01040" /><CodeLine lineNumber="1040"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;|\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01041" /><CodeLine lineNumber="1041"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a4bf5573660c55924d68b517a0e9b4554">getSchedClass</a>(SU);</Highlight></CodeLine>
<Link id="l01042" /><CodeLine lineNumber="1042"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01043" /><CodeLine lineNumber="1043"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;MCWriteProcResEntry, 4&gt;</a> ResourcesIt(</Highlight></CodeLine>
<Link id="l01044" /><CodeLine lineNumber="1044"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a341215803e83773a3e97860dc291f121">make&#95;range</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getWriteProcResBegin(SC),</Highlight></CodeLine>
<Link id="l01045" /><CodeLine lineNumber="1045"><Highlight kind="normal">                   <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getWriteProcResEnd(SC)));</Highlight></CodeLine>
<Link id="l01046" /><CodeLine lineNumber="1046"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01047" /><CodeLine lineNumber="1047"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a2d7fe448a57a131b2533e439fd6eae1e">MISchedSortResourcesInTrace</a>)</Highlight></CodeLine>
<Link id="l01048" /><CodeLine lineNumber="1048"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a076f93c387f454f0db13d4bc7d4e7f9c">llvm::stable&#95;sort</a>(ResourcesIt,</Highlight></CodeLine>
<Link id="l01049" /><CodeLine lineNumber="1049"><Highlight kind="normal">                        &#91;&#93;(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcwriteprocresentry">MCWriteProcResEntry</a> &amp;LHS,</Highlight></CodeLine>
<Link id="l01050" /><CodeLine lineNumber="1050"><Highlight kind="normal">                           </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcwriteprocresentry">MCWriteProcResEntry</a> &amp;RHS) -&gt; </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01051" /><CodeLine lineNumber="1051"><Highlight kind="normal">                          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> LHS.AcquireAtCycle &lt; RHS.AcquireAtCycle ||</Highlight></CodeLine>
<Link id="l01052" /><CodeLine lineNumber="1052"><Highlight kind="normal">                                 (LHS.AcquireAtCycle == RHS.AcquireAtCycle &amp;&amp;</Highlight></CodeLine>
<Link id="l01053" /><CodeLine lineNumber="1053"><Highlight kind="normal">                                  LHS.ReleaseAtCycle &lt; RHS.ReleaseAtCycle);</Highlight></CodeLine>
<Link id="l01054" /><CodeLine lineNumber="1054"><Highlight kind="normal">                        &#125;);</Highlight></CodeLine>
<Link id="l01055" /><CodeLine lineNumber="1055"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcwriteprocresentry">MCWriteProcResEntry</a> &amp;PI : ResourcesIt) &#123;</Highlight></CodeLine>
<Link id="l01056" /><CodeLine lineNumber="1056"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = FirstCycle;</Highlight></CodeLine>
<Link id="l01057" /><CodeLine lineNumber="1057"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> std::string ResName =</Highlight></CodeLine>
<Link id="l01058" /><CodeLine lineNumber="1058"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getResourceName(PI.ProcResourceIdx);</Highlight></CodeLine>
<Link id="l01059" /><CodeLine lineNumber="1059"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#a1c6d735dfe8fc13a113405c1dda2991e">llvm::right&#95;justify</a>(ResName + </Highlight><Highlight kind="stringliteral">&quot; &quot;</Highlight><Highlight kind="normal">, <a href="#a6523b0d71574a464a78e2e05bd67b543">HeaderColWidth</a>);</Highlight></CodeLine>
<Link id="l01060" /><CodeLine lineNumber="1060"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> &lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> + PI.AcquireAtCycle; ++<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l01061" /><CodeLine lineNumber="1061"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</Highlight><Highlight kind="stringliteral">&quot;|&quot;</Highlight><Highlight kind="normal">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</Highlight></CodeLine>
<Link id="l01062" /><CodeLine lineNumber="1062"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01063" /><CodeLine lineNumber="1063"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = PI.ReleaseAtCycle - PI.AcquireAtCycle; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E;</Highlight></CodeLine>
<Link id="l01064" /><CodeLine lineNumber="1064"><Highlight kind="normal">           ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ++<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>)</Highlight></CodeLine>
<Link id="l01065" /><CodeLine lineNumber="1065"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</Highlight><Highlight kind="stringliteral">&quot;| x&quot;</Highlight><Highlight kind="normal">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</Highlight></CodeLine>
<Link id="l01066" /><CodeLine lineNumber="1066"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>++ &lt;= LastCycle)</Highlight></CodeLine>
<Link id="l01067" /><CodeLine lineNumber="1067"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</Highlight><Highlight kind="stringliteral">&quot;|&quot;</Highlight><Highlight kind="normal">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</Highlight></CodeLine>
<Link id="l01068" /><CodeLine lineNumber="1068"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Place end char</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01069" /><CodeLine lineNumber="1069"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;| \\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01070" /><CodeLine lineNumber="1070"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01071" /><CodeLine lineNumber="1071"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01072" /><CodeLine lineNumber="1072"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01073" /><CodeLine lineNumber="1073"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01074" /><CodeLine lineNumber="1074" lineLink="/docs/api/classes/llvm/scheduledagmi/#a942d716003056c037d46a4144e9cf885"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/include/llvm/support/compiler-h/#aa863693eef567397d9c292da5bf22d34">LLVM&#95;DUMP&#95;METHOD</a> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a942d716003056c037d46a4144e9cf885">ScheduleDAGMI::dumpScheduleTraceBottomUp</a>()</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l01075" /><CodeLine lineNumber="1075"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Bail off when there is no schedule model to query.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01076" /><CodeLine lineNumber="1076"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.hasInstrSchedModel())</Highlight></CodeLine>
<Link id="l01077" /><CodeLine lineNumber="1077"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01078" /><CodeLine lineNumber="1078"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01079" /><CodeLine lineNumber="1079"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//  Nothing to show if there is no or just one instruction.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01080" /><CodeLine lineNumber="1080"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;size() &lt; 2)</Highlight></CodeLine>
<Link id="l01081" /><CodeLine lineNumber="1081"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01082" /><CodeLine lineNumber="1082"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01083" /><CodeLine lineNumber="1083"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &#42; Schedule table (BottomUp):\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01084" /><CodeLine lineNumber="1084"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="#aaae6594fa7ded6088910716df9f47553">scheduleTableLegend</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01085" /><CodeLine lineNumber="1085"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01086" /><CodeLine lineNumber="1086"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> FirstCycle = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;&#42;(std::begin(&#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">)))-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>;</Highlight></CodeLine>
<Link id="l01087" /><CodeLine lineNumber="1087"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> LastCycle = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;&#42;(std::prev(std::end(&#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">))))-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>;</Highlight></CodeLine>
<Link id="l01088" /><CodeLine lineNumber="1088"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : &#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l01089" /><CodeLine lineNumber="1089"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</Highlight></CodeLine>
<Link id="l01090" /><CodeLine lineNumber="1090"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SU)</Highlight></CodeLine>
<Link id="l01091" /><CodeLine lineNumber="1091"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01092" /><CodeLine lineNumber="1092"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a4bf5573660c55924d68b517a0e9b4554">getSchedClass</a>(SU);</Highlight></CodeLine>
<Link id="l01093" /><CodeLine lineNumber="1093"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetschedmodel/#a7b653a507e8307775b33e01655d3b8d8">TargetSchedModel::ProcResIter</a> PI = <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getWriteProcResBegin(SC),</Highlight></CodeLine>
<Link id="l01094" /><CodeLine lineNumber="1094"><Highlight kind="normal">                                       PE = <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getWriteProcResEnd(SC);</Highlight></CodeLine>
<Link id="l01095" /><CodeLine lineNumber="1095"><Highlight kind="normal">         PI != PE; ++PI) &#123;</Highlight></CodeLine>
<Link id="l01096" /><CodeLine lineNumber="1096"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal">)SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> - PI-&gt;ReleaseAtCycle + 1 &lt; LastCycle)</Highlight></CodeLine>
<Link id="l01097" /><CodeLine lineNumber="1097"><Highlight kind="normal">        LastCycle = (int)SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> - PI-&gt;ReleaseAtCycle + 1;</Highlight></CodeLine>
<Link id="l01098" /><CodeLine lineNumber="1098"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01099" /><CodeLine lineNumber="1099"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01100" /><CodeLine lineNumber="1100"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Print the header with the cycles</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01101" /><CodeLine lineNumber="1101"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</Highlight><Highlight kind="stringliteral">&quot;Cycle&quot;</Highlight><Highlight kind="normal">, <a href="#a6523b0d71574a464a78e2e05bd67b543">HeaderColWidth</a>);</Highlight></CodeLine>
<Link id="l01102" /><CodeLine lineNumber="1102"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = FirstCycle; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> &gt;= LastCycle; --<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>)</Highlight></CodeLine>
<Link id="l01103" /><CodeLine lineNumber="1103"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</Highlight><Highlight kind="stringliteral">&quot;| &quot;</Highlight><Highlight kind="normal"> + std::to&#95;string(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>), <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</Highlight></CodeLine>
<Link id="l01104" /><CodeLine lineNumber="1104"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;|\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01105" /><CodeLine lineNumber="1105"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01106" /><CodeLine lineNumber="1106"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : &#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l01107" /><CodeLine lineNumber="1107"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</Highlight></CodeLine>
<Link id="l01108" /><CodeLine lineNumber="1108"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SU) &#123;</Highlight></CodeLine>
<Link id="l01109" /><CodeLine lineNumber="1109"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Missing SUnit\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01110" /><CodeLine lineNumber="1110"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01111" /><CodeLine lineNumber="1111"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01112" /><CodeLine lineNumber="1112"><Highlight kind="normal">    std::string NodeName(</Highlight><Highlight kind="stringliteral">&quot;SU(&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01113" /><CodeLine lineNumber="1113"><Highlight kind="normal">    NodeName += std::to&#95;string(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a>) + </Highlight><Highlight kind="stringliteral">&quot;)&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01114" /><CodeLine lineNumber="1114"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(NodeName, <a href="#a6523b0d71574a464a78e2e05bd67b543">HeaderColWidth</a>);</Highlight></CodeLine>
<Link id="l01115" /><CodeLine lineNumber="1115"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = FirstCycle;</Highlight></CodeLine>
<Link id="l01116" /><CodeLine lineNumber="1116"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> &gt;= LastCycle; --<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l01117" /><CodeLine lineNumber="1117"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> == (</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal">)SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>)</Highlight></CodeLine>
<Link id="l01118" /><CodeLine lineNumber="1118"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</Highlight><Highlight kind="stringliteral">&quot;| i&quot;</Highlight><Highlight kind="normal">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</Highlight></CodeLine>
<Link id="l01119" /><CodeLine lineNumber="1119"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01120" /><CodeLine lineNumber="1120"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</Highlight><Highlight kind="stringliteral">&quot;|&quot;</Highlight><Highlight kind="normal">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</Highlight></CodeLine>
<Link id="l01121" /><CodeLine lineNumber="1121"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01122" /><CodeLine lineNumber="1122"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;|\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01123" /><CodeLine lineNumber="1123"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC = <a href="/docs/api/classes/llvm/scheduledaginstrs/#a4bf5573660c55924d68b517a0e9b4554">getSchedClass</a>(SU);</Highlight></CodeLine>
<Link id="l01124" /><CodeLine lineNumber="1124"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;MCWriteProcResEntry, 4&gt;</a> ResourcesIt(</Highlight></CodeLine>
<Link id="l01125" /><CodeLine lineNumber="1125"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a341215803e83773a3e97860dc291f121">make&#95;range</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getWriteProcResBegin(SC),</Highlight></CodeLine>
<Link id="l01126" /><CodeLine lineNumber="1126"><Highlight kind="normal">                   <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getWriteProcResEnd(SC)));</Highlight></CodeLine>
<Link id="l01127" /><CodeLine lineNumber="1127"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01128" /><CodeLine lineNumber="1128"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a2d7fe448a57a131b2533e439fd6eae1e">MISchedSortResourcesInTrace</a>)</Highlight></CodeLine>
<Link id="l01129" /><CodeLine lineNumber="1129"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a076f93c387f454f0db13d4bc7d4e7f9c">llvm::stable&#95;sort</a>(ResourcesIt,</Highlight></CodeLine>
<Link id="l01130" /><CodeLine lineNumber="1130"><Highlight kind="normal">                        &#91;&#93;(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcwriteprocresentry">MCWriteProcResEntry</a> &amp;LHS,</Highlight></CodeLine>
<Link id="l01131" /><CodeLine lineNumber="1131"><Highlight kind="normal">                           </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcwriteprocresentry">MCWriteProcResEntry</a> &amp;RHS) -&gt; </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01132" /><CodeLine lineNumber="1132"><Highlight kind="normal">                          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> LHS.AcquireAtCycle &lt; RHS.AcquireAtCycle ||</Highlight></CodeLine>
<Link id="l01133" /><CodeLine lineNumber="1133"><Highlight kind="normal">                                 (LHS.AcquireAtCycle == RHS.AcquireAtCycle &amp;&amp;</Highlight></CodeLine>
<Link id="l01134" /><CodeLine lineNumber="1134"><Highlight kind="normal">                                  LHS.ReleaseAtCycle &lt; RHS.ReleaseAtCycle);</Highlight></CodeLine>
<Link id="l01135" /><CodeLine lineNumber="1135"><Highlight kind="normal">                        &#125;);</Highlight></CodeLine>
<Link id="l01136" /><CodeLine lineNumber="1136"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcwriteprocresentry">MCWriteProcResEntry</a> &amp;PI : ResourcesIt) &#123;</Highlight></CodeLine>
<Link id="l01137" /><CodeLine lineNumber="1137"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = FirstCycle;</Highlight></CodeLine>
<Link id="l01138" /><CodeLine lineNumber="1138"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> std::string ResName =</Highlight></CodeLine>
<Link id="l01139" /><CodeLine lineNumber="1139"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.getResourceName(PI.ProcResourceIdx);</Highlight></CodeLine>
<Link id="l01140" /><CodeLine lineNumber="1140"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#a1c6d735dfe8fc13a113405c1dda2991e">llvm::right&#95;justify</a>(ResName + </Highlight><Highlight kind="stringliteral">&quot; &quot;</Highlight><Highlight kind="normal">, <a href="#a6523b0d71574a464a78e2e05bd67b543">HeaderColWidth</a>);</Highlight></CodeLine>
<Link id="l01141" /><CodeLine lineNumber="1141"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> &gt; ((int)SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> - (int)PI.AcquireAtCycle); --<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l01142" /><CodeLine lineNumber="1142"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</Highlight><Highlight kind="stringliteral">&quot;|&quot;</Highlight><Highlight kind="normal">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</Highlight></CodeLine>
<Link id="l01143" /><CodeLine lineNumber="1143"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01144" /><CodeLine lineNumber="1144"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = PI.ReleaseAtCycle - PI.AcquireAtCycle; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E;</Highlight></CodeLine>
<Link id="l01145" /><CodeLine lineNumber="1145"><Highlight kind="normal">           ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, --<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>)</Highlight></CodeLine>
<Link id="l01146" /><CodeLine lineNumber="1146"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</Highlight><Highlight kind="stringliteral">&quot;| x&quot;</Highlight><Highlight kind="normal">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</Highlight></CodeLine>
<Link id="l01147" /><CodeLine lineNumber="1147"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-- &gt;= LastCycle)</Highlight></CodeLine>
<Link id="l01148" /><CodeLine lineNumber="1148"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/namespaces/llvm/#aa5b1b4e94f62050dd1bccb48141ef4b9">llvm::left&#95;justify</a>(</Highlight><Highlight kind="stringliteral">&quot;|&quot;</Highlight><Highlight kind="normal">, <a href="#aa0067e3bf6cee38792f2749e1d16fff4">ColWidth</a>);</Highlight></CodeLine>
<Link id="l01149" /><CodeLine lineNumber="1149"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Place end char</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01150" /><CodeLine lineNumber="1150"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;| \\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01151" /><CodeLine lineNumber="1151"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01152" /><CodeLine lineNumber="1152"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01153" /><CodeLine lineNumber="1153"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01154" /><CodeLine lineNumber="1154"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01155" /><CodeLine lineNumber="1155"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01156" /><CodeLine lineNumber="1156"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#if !defined(NDEBUG) || defined(LLVM&#95;ENABLE&#95;DUMP)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01157" /><CodeLine lineNumber="1157" lineLink="/docs/api/classes/llvm/scheduledagmi/#a01b02e76c87211e7084ec17f18a2d16f"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/include/llvm/support/compiler-h/#aa863693eef567397d9c292da5bf22d34">LLVM&#95;DUMP&#95;METHOD</a> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a01b02e76c87211e7084ec17f18a2d16f">ScheduleDAGMI::dumpSchedule</a>()</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l01158" /><CodeLine lineNumber="1158"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#afc178c1fabdc9ea75b2e47e85c12e3df">MISchedDumpScheduleTrace</a>) &#123;</Highlight></CodeLine>
<Link id="l01159" /><CodeLine lineNumber="1159"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab3c913205add9c73e6bfe3540749737e">DumpDir</a> == <a href="/docs/api/classes/llvm/scheduledaginstrs/#a8d1f67b9f6d31b169c0d4b1d2080b4e7a622f7d95cc7d6d2dc7a32b140559b680">DumpDirection::TopDown</a>)</Highlight></CodeLine>
<Link id="l01160" /><CodeLine lineNumber="1160"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmi/#a3010c4b89284791284aa6e2ec510501b">dumpScheduleTraceTopDown</a>();</Highlight></CodeLine>
<Link id="l01161" /><CodeLine lineNumber="1161"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab3c913205add9c73e6bfe3540749737e">DumpDir</a> == <a href="/docs/api/classes/llvm/scheduledaginstrs/#a8d1f67b9f6d31b169c0d4b1d2080b4e7a3dac6c64382dc74b937892893d2595c6">DumpDirection::BottomUp</a>)</Highlight></CodeLine>
<Link id="l01162" /><CodeLine lineNumber="1162"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmi/#a942d716003056c037d46a4144e9cf885">dumpScheduleTraceBottomUp</a>();</Highlight></CodeLine>
<Link id="l01163" /><CodeLine lineNumber="1163"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab3c913205add9c73e6bfe3540749737e">DumpDir</a> == <a href="/docs/api/classes/llvm/scheduledaginstrs/#a8d1f67b9f6d31b169c0d4b1d2080b4e7a7aa4fbe53df8b2bf33ec065623b42e34">DumpDirection::Bidirectional</a>) &#123;</Highlight></CodeLine>
<Link id="l01164" /><CodeLine lineNumber="1164"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;&#42; Schedule table (Bidirectional): not implemented\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01165" /><CodeLine lineNumber="1165"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01166" /><CodeLine lineNumber="1166"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;&#42; Schedule table: DumpDirection not set.\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01167" /><CodeLine lineNumber="1167"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01168" /><CodeLine lineNumber="1168"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01169" /><CodeLine lineNumber="1169"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01170" /><CodeLine lineNumber="1170"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : &#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l01171" /><CodeLine lineNumber="1171"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</Highlight></CodeLine>
<Link id="l01172" /><CodeLine lineNumber="1172"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledaginstrs/#aa5f22315c4064579fca6cd88fb36ea5a">dumpNode</a>(&#42;SU);</Highlight></CodeLine>
<Link id="l01173" /><CodeLine lineNumber="1173"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01174" /><CodeLine lineNumber="1174"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Missing SUnit\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01175" /><CodeLine lineNumber="1175"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01176" /><CodeLine lineNumber="1176"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01177" /><CodeLine lineNumber="1177"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01178" /><CodeLine lineNumber="1178"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01179" /><CodeLine lineNumber="1179"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01180" /><CodeLine lineNumber="1180"><Highlight kind="normal"></Highlight><Highlight kind="comment">// ScheduleDAGMILive - Base class for MachineInstr scheduling with LiveIntervals</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01181" /><CodeLine lineNumber="1181"><Highlight kind="normal"></Highlight><Highlight kind="comment">// preservation.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01182" /><CodeLine lineNumber="1182"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01183" /><CodeLine lineNumber="1183"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01184" /><CodeLine lineNumber="1184" lineLink="/docs/api/classes/llvm/scheduledagmilive/#ada767569b82d6e57bf0b25f5d35d22df"><Highlight kind="normal"><a href="/docs/api/classes/llvm/scheduledagmilive/#ada767569b82d6e57bf0b25f5d35d22df">ScheduleDAGMILive::~ScheduleDAGMILive</a>() &#123;</Highlight></CodeLine>
<Link id="l01185" /><CodeLine lineNumber="1185"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">delete</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>;</Highlight></CodeLine>
<Link id="l01186" /><CodeLine lineNumber="1186"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01187" /><CodeLine lineNumber="1187"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01188" /><CodeLine lineNumber="1188" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a920652e64042f72e913f81f9660b4f2f"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a920652e64042f72e913f81f9660b4f2f">ScheduleDAGMILive::collectVRegUses</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &amp;SU) &#123;</Highlight></CodeLine>
<Link id="l01189" /><CodeLine lineNumber="1189"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = &#42;SU.<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</Highlight></CodeLine>
<Link id="l01190" /><CodeLine lineNumber="1190"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;MO : <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.operands()) &#123;</Highlight></CodeLine>
<Link id="l01191" /><CodeLine lineNumber="1191"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!MO.isReg())</Highlight></CodeLine>
<Link id="l01192" /><CodeLine lineNumber="1192"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01193" /><CodeLine lineNumber="1193"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!MO.readsReg())</Highlight></CodeLine>
<Link id="l01194" /><CodeLine lineNumber="1194"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01195" /><CodeLine lineNumber="1195"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#a96bb77f51ee973b0613bf5083144fa69">TrackLaneMasks</a> &amp;&amp; !MO.isUse())</Highlight></CodeLine>
<Link id="l01196" /><CodeLine lineNumber="1196"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01197" /><CodeLine lineNumber="1197"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01198" /><CodeLine lineNumber="1198"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/register">Register</a> Reg = MO.getReg();</Highlight></CodeLine>
<Link id="l01199" /><CodeLine lineNumber="1199"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Reg.isVirtual())</Highlight></CodeLine>
<Link id="l01200" /><CodeLine lineNumber="1200"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01201" /><CodeLine lineNumber="1201"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01202" /><CodeLine lineNumber="1202"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Ignore re-defs.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01203" /><CodeLine lineNumber="1203"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#a96bb77f51ee973b0613bf5083144fa69">TrackLaneMasks</a>) &#123;</Highlight></CodeLine>
<Link id="l01204" /><CodeLine lineNumber="1204"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> FoundDef = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01205" /><CodeLine lineNumber="1205"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;MO2 : <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.all&#95;defs()) &#123;</Highlight></CodeLine>
<Link id="l01206" /><CodeLine lineNumber="1206"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (MO2.getReg() == Reg &amp;&amp; !MO2.isDead()) &#123;</Highlight></CodeLine>
<Link id="l01207" /><CodeLine lineNumber="1207"><Highlight kind="normal">          FoundDef = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01208" /><CodeLine lineNumber="1208"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01209" /><CodeLine lineNumber="1209"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01210" /><CodeLine lineNumber="1210"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01211" /><CodeLine lineNumber="1211"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (FoundDef)</Highlight></CodeLine>
<Link id="l01212" /><CodeLine lineNumber="1212"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01213" /><CodeLine lineNumber="1213"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01214" /><CodeLine lineNumber="1214"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01215" /><CodeLine lineNumber="1215"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Record this local VReg use.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01216" /><CodeLine lineNumber="1216"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sparsemultiset/#ada97379dfb89c01fb4065e33bf180f0e">VReg2SUnitMultiMap::iterator</a> UI = <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.find(Reg);</Highlight></CodeLine>
<Link id="l01217" /><CodeLine lineNumber="1217"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (; UI != <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.end(); ++UI) &#123;</Highlight></CodeLine>
<Link id="l01218" /><CodeLine lineNumber="1218"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UI-&gt;<a href="/docs/api/structs/llvm/vreg2sunit/#a62cea84ba15a90f1f6c497f16d8eeda3">SU</a> == &amp;SU)</Highlight></CodeLine>
<Link id="l01219" /><CodeLine lineNumber="1219"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01220" /><CodeLine lineNumber="1220"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01221" /><CodeLine lineNumber="1221"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UI == <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.end())</Highlight></CodeLine>
<Link id="l01222" /><CodeLine lineNumber="1222"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.insert(<a href="/docs/api/structs/llvm/vreg2sunit">VReg2SUnit</a>(Reg, <a href="/docs/api/structs/llvm/lanebitmask/#a9082b6aa4021114645045d9c5628eb26">LaneBitmask::getNone</a>(), &amp;SU));</Highlight></CodeLine>
<Link id="l01223" /><CodeLine lineNumber="1223"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01224" /><CodeLine lineNumber="1224"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01225" /><CodeLine lineNumber="1225"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01226" /><CodeLine lineNumber="1226"><Highlight kind="comment">/// enterRegion - Called back from MachineScheduler::runOnMachineFunction after</Highlight></CodeLine>
<Link id="l01227" /><CodeLine lineNumber="1227"><Highlight kind="comment">/// crossing a scheduling boundary. &#91;begin, end) includes all instructions in</Highlight></CodeLine>
<Link id="l01228" /><CodeLine lineNumber="1228"><Highlight kind="comment">/// the region, including the boundary itself and single-instruction regions</Highlight></CodeLine>
<Link id="l01229" /><CodeLine lineNumber="1229"><Highlight kind="comment">/// that don&#39;t get scheduled.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01230" /><CodeLine lineNumber="1230" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a34481791fdd8f5d9131431cb0a1a0c01"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a34481791fdd8f5d9131431cb0a1a0c01">ScheduleDAGMILive::enterRegion</a>(<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;bb,</Highlight></CodeLine>
<Link id="l01231" /><CodeLine lineNumber="1231"><Highlight kind="normal">                                <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>,</Highlight></CodeLine>
<Link id="l01232" /><CodeLine lineNumber="1232"><Highlight kind="normal">                                <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/classes/llvm/scheduledaginstrs/#a21805259f54dab47c2b3da009216996a">end</a>,</Highlight></CodeLine>
<Link id="l01233" /><CodeLine lineNumber="1233"><Highlight kind="normal">                                </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> regioninstrs)</Highlight></CodeLine>
<Link id="l01234" /><CodeLine lineNumber="1234"><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l01235" /><CodeLine lineNumber="1235"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ScheduleDAGMI initializes SchedImpl&#39;s per-region policy.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01236" /><CodeLine lineNumber="1236"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a78e3672daf3301153eac2266dbc32885">ScheduleDAGMI::enterRegion</a>(bb, <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a21805259f54dab47c2b3da009216996a">end</a>, regioninstrs);</Highlight></CodeLine>
<Link id="l01237" /><CodeLine lineNumber="1237"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01238" /><CodeLine lineNumber="1238"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For convenience remember the end of the liveness region.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01239" /><CodeLine lineNumber="1239"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#ae8d156802e79e1d8f76dadc3e5d265b5">LiveRegionEnd</a> = (<a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a> == bb-&gt;<a href="/docs/api/classes/llvm/machinebasicblock/#acbc921830578e2741be6549db716c0ce">end</a>()) ? <a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a> : std::next(<a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>);</Highlight></CodeLine>
<Link id="l01240" /><CodeLine lineNumber="1240"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01241" /><CodeLine lineNumber="1241"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a6326ec771a59a9d13a860922f9e21b6c">SUPressureDiffs</a>.clear();</Highlight></CodeLine>
<Link id="l01242" /><CodeLine lineNumber="1242"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01243" /><CodeLine lineNumber="1243"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#ac46dc81cc2feaf48751834a3dd13e33a">ShouldTrackPressure</a> = <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;shouldTrackPressure();</Highlight></CodeLine>
<Link id="l01244" /><CodeLine lineNumber="1244"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a> = <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;shouldTrackLaneMasks();</Highlight></CodeLine>
<Link id="l01245" /><CodeLine lineNumber="1245"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01246" /><CodeLine lineNumber="1246"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!<a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a> || <a href="/docs/api/classes/llvm/scheduledagmilive/#ac46dc81cc2feaf48751834a3dd13e33a">ShouldTrackPressure</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l01247" /><CodeLine lineNumber="1247"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;ShouldTrackLaneMasks requires ShouldTrackPressure&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01248" /><CodeLine lineNumber="1248"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01249" /><CodeLine lineNumber="1249"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01250" /><CodeLine lineNumber="1250"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Setup the register pressure trackers for the top scheduled and bottom</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01251" /><CodeLine lineNumber="1251"><Highlight kind="normal"></Highlight><Highlight kind="comment">// scheduled regions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01252" /><CodeLine lineNumber="1252" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a86daf2b1fb72fdd9a8785a4042ac1457"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a86daf2b1fb72fdd9a8785a4042ac1457">ScheduleDAGMILive::initRegPressure</a>() &#123;</Highlight></CodeLine>
<Link id="l01253" /><CodeLine lineNumber="1253"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.clear();</Highlight></CodeLine>
<Link id="l01254" /><CodeLine lineNumber="1254"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.setUniverse(<a href="/docs/api/classes/llvm/scheduledag/#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>.getNumVirtRegs());</Highlight></CodeLine>
<Link id="l01255" /><CodeLine lineNumber="1255"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &amp;SU : <a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>)</Highlight></CodeLine>
<Link id="l01256" /><CodeLine lineNumber="1256"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmilive/#a920652e64042f72e913f81f9660b4f2f">collectVRegUses</a>(SU);</Highlight></CodeLine>
<Link id="l01257" /><CodeLine lineNumber="1257"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01258" /><CodeLine lineNumber="1258"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.init(&amp;<a href="/docs/api/classes/llvm/scheduledag/#a5a3d3d075a208011a24a0918b58d7daa">MF</a>, <a href="/docs/api/classes/llvm/scheduledagmilive/#a9539744d7a0c1681540a64e935b671dd">RegClassInfo</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>,</Highlight></CodeLine>
<Link id="l01259" /><CodeLine lineNumber="1259"><Highlight kind="normal">                    <a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01260" /><CodeLine lineNumber="1260"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.init(&amp;<a href="/docs/api/classes/llvm/scheduledag/#a5a3d3d075a208011a24a0918b58d7daa">MF</a>, <a href="/docs/api/classes/llvm/scheduledagmilive/#a9539744d7a0c1681540a64e935b671dd">RegClassInfo</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>, <a href="/docs/api/classes/llvm/scheduledagmilive/#ae8d156802e79e1d8f76dadc3e5d265b5">LiveRegionEnd</a>,</Highlight></CodeLine>
<Link id="l01261" /><CodeLine lineNumber="1261"><Highlight kind="normal">                    <a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01262" /><CodeLine lineNumber="1262"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01263" /><CodeLine lineNumber="1263"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Close the RPTracker to finalize live ins.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01264" /><CodeLine lineNumber="1264"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.closeRegion();</Highlight></CodeLine>
<Link id="l01265" /><CodeLine lineNumber="1265"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01266" /><CodeLine lineNumber="1266"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.dump());</Highlight></CodeLine>
<Link id="l01267" /><CodeLine lineNumber="1267"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01268" /><CodeLine lineNumber="1268"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Initialize the live ins and live outs.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01269" /><CodeLine lineNumber="1269"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.addLiveRegs(<a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.getPressure().LiveInRegs);</Highlight></CodeLine>
<Link id="l01270" /><CodeLine lineNumber="1270"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.addLiveRegs(<a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.getPressure().LiveOutRegs);</Highlight></CodeLine>
<Link id="l01271" /><CodeLine lineNumber="1271"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01272" /><CodeLine lineNumber="1272"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Close one end of the tracker so we can call</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01273" /><CodeLine lineNumber="1273"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// getMaxUpward/DownwardPressureDelta before advancing across any</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01274" /><CodeLine lineNumber="1274"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// instructions. This converts currently live regs into live ins/outs.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01275" /><CodeLine lineNumber="1275"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.closeTop();</Highlight></CodeLine>
<Link id="l01276" /><CodeLine lineNumber="1276"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.closeBottom();</Highlight></CodeLine>
<Link id="l01277" /><CodeLine lineNumber="1277"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01278" /><CodeLine lineNumber="1278"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.initLiveThru(<a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>);</Highlight></CodeLine>
<Link id="l01279" /><CodeLine lineNumber="1279"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getLiveThru().empty()) &#123;</Highlight></CodeLine>
<Link id="l01280" /><CodeLine lineNumber="1280"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.initLiveThru(<a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getLiveThru());</Highlight></CodeLine>
<Link id="l01281" /><CodeLine lineNumber="1281"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Live Thru: &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01282" /><CodeLine lineNumber="1282"><Highlight kind="normal">               <a href="/docs/api/namespaces/llvm/#adb6fca77863850136760be488d6ea345">dumpRegSetPressure</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getLiveThru(), <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>));</Highlight></CodeLine>
<Link id="l01283" /><CodeLine lineNumber="1283"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l01284" /><CodeLine lineNumber="1284"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01285" /><CodeLine lineNumber="1285"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For each live out vreg reduce the pressure change associated with other</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01286" /><CodeLine lineNumber="1286"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// uses of the same vreg below the live-out reaching def.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01287" /><CodeLine lineNumber="1287"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a91251ec06d557b21578095955b7b7fa7">updatePressureDiffs</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.getPressure().LiveOutRegs);</Highlight></CodeLine>
<Link id="l01288" /><CodeLine lineNumber="1288"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01289" /><CodeLine lineNumber="1289"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Account for liveness generated by the region boundary.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01290" /><CodeLine lineNumber="1290"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#ae8d156802e79e1d8f76dadc3e5d265b5">LiveRegionEnd</a> != <a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>) &#123;</Highlight></CodeLine>
<Link id="l01291" /><CodeLine lineNumber="1291"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;VRegMaskOrUnit, 8&gt;</a> LiveUses;</Highlight></CodeLine>
<Link id="l01292" /><CodeLine lineNumber="1292"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.recede(&amp;LiveUses);</Highlight></CodeLine>
<Link id="l01293" /><CodeLine lineNumber="1293"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmilive/#a91251ec06d557b21578095955b7b7fa7">updatePressureDiffs</a>(LiveUses);</Highlight></CodeLine>
<Link id="l01294" /><CodeLine lineNumber="1294"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01295" /><CodeLine lineNumber="1295"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01296" /><CodeLine lineNumber="1296"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Top Pressure:\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01297" /><CodeLine lineNumber="1297"><Highlight kind="normal">             <a href="/docs/api/namespaces/llvm/#adb6fca77863850136760be488d6ea345">dumpRegSetPressure</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.getRegSetPressureAtPos(), <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>);</Highlight></CodeLine>
<Link id="l01298" /><CodeLine lineNumber="1298"><Highlight kind="normal">             <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Bottom Pressure:\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01299" /><CodeLine lineNumber="1299"><Highlight kind="normal">             <a href="/docs/api/namespaces/llvm/#adb6fca77863850136760be488d6ea345">dumpRegSetPressure</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getRegSetPressureAtPos(), <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>););</Highlight></CodeLine>
<Link id="l01300" /><CodeLine lineNumber="1300"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01301" /><CodeLine lineNumber="1301"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getPos() == <a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a> ||</Highlight></CodeLine>
<Link id="l01302" /><CodeLine lineNumber="1302"><Highlight kind="normal">          (<a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>-&gt;isDebugInstr() &amp;&amp;</Highlight></CodeLine>
<Link id="l01303" /><CodeLine lineNumber="1303"><Highlight kind="normal">           <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getPos() == <a href="#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>))) &amp;&amp;</Highlight></CodeLine>
<Link id="l01304" /><CodeLine lineNumber="1304"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Can&#39;t find the region bottom&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01305" /><CodeLine lineNumber="1305"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01306" /><CodeLine lineNumber="1306"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Cache the list of excess pressure sets in this region. This will also track</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01307" /><CodeLine lineNumber="1307"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the max pressure in the scheduled code for these sets.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01308" /><CodeLine lineNumber="1308"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>.clear();</Highlight></CodeLine>
<Link id="l01309" /><CodeLine lineNumber="1309"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> std::vector&lt;unsigned&gt; &amp;<a href="/docs/api/structs/llvm/regionpressure">RegionPressure</a> =</Highlight></CodeLine>
<Link id="l01310" /><CodeLine lineNumber="1310"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.getPressure().MaxSetPressure;</Highlight></CodeLine>
<Link id="l01311" /><CodeLine lineNumber="1311"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0, e = <a href="/docs/api/structs/llvm/regionpressure">RegionPressure</a>.size(); i &lt; e; ++i) &#123;</Highlight></CodeLine>
<Link id="l01312" /><CodeLine lineNumber="1312"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Limit = <a href="/docs/api/classes/llvm/scheduledagmilive/#a9539744d7a0c1681540a64e935b671dd">RegClassInfo</a>-&gt;getRegPressureSetLimit(i);</Highlight></CodeLine>
<Link id="l01313" /><CodeLine lineNumber="1313"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/llvm/regionpressure">RegionPressure</a>&#91;i&#93; &gt; Limit) &#123;</Highlight></CodeLine>
<Link id="l01314" /><CodeLine lineNumber="1314"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>-&gt;getRegPressureSetName(i) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; Limit &quot;</Highlight><Highlight kind="normal"> &lt;&lt; Limit</Highlight></CodeLine>
<Link id="l01315" /><CodeLine lineNumber="1315"><Highlight kind="normal">                        &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; Actual &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/structs/llvm/regionpressure">RegionPressure</a>&#91;i&#93; &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01316" /><CodeLine lineNumber="1316"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>.push&#95;back(<a href="/docs/api/classes/llvm/pressurechange">PressureChange</a>(i));</Highlight></CodeLine>
<Link id="l01317" /><CodeLine lineNumber="1317"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01318" /><CodeLine lineNumber="1318"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01319" /><CodeLine lineNumber="1319"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Excess PSets: &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01320" /><CodeLine lineNumber="1320"><Highlight kind="normal">             </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/pressurechange">PressureChange</a> &amp;RCPS</Highlight></CodeLine>
<Link id="l01321" /><CodeLine lineNumber="1321"><Highlight kind="normal">                  : <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</Highlight></CodeLine>
<Link id="l01322" /><CodeLine lineNumber="1322"><Highlight kind="normal">             &lt;&lt; <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>-&gt;getRegPressureSetName(RCPS.getPSet()) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01323" /><CodeLine lineNumber="1323"><Highlight kind="normal">             <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01324" /><CodeLine lineNumber="1324"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01325" /><CodeLine lineNumber="1325"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01326" /><CodeLine lineNumber="1326" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a556d08e5789e4c99bb9c24aa4e226f9b"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a556d08e5789e4c99bb9c24aa4e226f9b">ScheduleDAGMILive::</a></Highlight></CodeLine>
<Link id="l01327" /><CodeLine lineNumber="1327"><Highlight kind="normal"><a href="/docs/api/classes/llvm/scheduledagmilive/#a556d08e5789e4c99bb9c24aa4e226f9b">updateScheduledPressure</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU,</Highlight></CodeLine>
<Link id="l01328" /><CodeLine lineNumber="1328"><Highlight kind="normal">                        </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> std::vector&lt;unsigned&gt; &amp;NewMaxPressure) &#123;</Highlight></CodeLine>
<Link id="l01329" /><CodeLine lineNumber="1329"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/pressurediff">PressureDiff</a> &amp;PDiff = <a href="/docs/api/classes/llvm/scheduledagmilive/#a24c23a8dc39475b1e913e41f1249c9f7">getPressureDiff</a>(SU);</Highlight></CodeLine>
<Link id="l01330" /><CodeLine lineNumber="1330"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> CritIdx = 0, CritEnd = <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>.size();</Highlight></CodeLine>
<Link id="l01331" /><CodeLine lineNumber="1331"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/pressurechange">PressureChange</a> &amp;PC : PDiff) &#123;</Highlight></CodeLine>
<Link id="l01332" /><CodeLine lineNumber="1332"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!PC.isValid())</Highlight></CodeLine>
<Link id="l01333" /><CodeLine lineNumber="1333"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01334" /><CodeLine lineNumber="1334"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a> = PC.getPSet();</Highlight></CodeLine>
<Link id="l01335" /><CodeLine lineNumber="1335"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (CritIdx != CritEnd &amp;&amp; <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>&#91;CritIdx&#93;.getPSet() &lt; <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>)</Highlight></CodeLine>
<Link id="l01336" /><CodeLine lineNumber="1336"><Highlight kind="normal">      ++CritIdx;</Highlight></CodeLine>
<Link id="l01337" /><CodeLine lineNumber="1337"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CritIdx != CritEnd &amp;&amp; <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>&#91;CritIdx&#93;.getPSet() == <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &#123;</Highlight></CodeLine>
<Link id="l01338" /><CodeLine lineNumber="1338"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal">)NewMaxPressure&#91;<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>&#93; &gt; <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>&#91;CritIdx&#93;.getUnitInc()</Highlight></CodeLine>
<Link id="l01339" /><CodeLine lineNumber="1339"><Highlight kind="normal">          &amp;&amp; NewMaxPressure&#91;<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>&#93; &lt;= (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal">)std::numeric&#95;limits&lt;int16&#95;t&gt;::max())</Highlight></CodeLine>
<Link id="l01340" /><CodeLine lineNumber="1340"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>&#91;CritIdx&#93;.setUnitInc(NewMaxPressure&#91;<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>&#93;);</Highlight></CodeLine>
<Link id="l01341" /><CodeLine lineNumber="1341"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01342" /><CodeLine lineNumber="1342"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Limit = <a href="/docs/api/classes/llvm/scheduledagmilive/#a9539744d7a0c1681540a64e935b671dd">RegClassInfo</a>-&gt;getRegPressureSetLimit(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>);</Highlight></CodeLine>
<Link id="l01343" /><CodeLine lineNumber="1343"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NewMaxPressure&#91;<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>&#93; &gt;= Limit - 2) &#123;</Highlight></CodeLine>
<Link id="l01344" /><CodeLine lineNumber="1344"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>-&gt;getRegPressureSetName(<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;: &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01345" /><CodeLine lineNumber="1345"><Highlight kind="normal">                        &lt;&lt; NewMaxPressure&#91;<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>&#93;</Highlight></CodeLine>
<Link id="l01346" /><CodeLine lineNumber="1346"><Highlight kind="normal">                        &lt;&lt; ((NewMaxPressure&#91;<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>&#93; &gt; Limit) ? </Highlight><Highlight kind="stringliteral">&quot; &gt; &quot;</Highlight><Highlight kind="normal"> : </Highlight><Highlight kind="stringliteral">&quot; &lt;= &quot;</Highlight><Highlight kind="normal">)</Highlight></CodeLine>
<Link id="l01347" /><CodeLine lineNumber="1347"><Highlight kind="normal">                        &lt;&lt; Limit &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;(+ &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getLiveThru()&#91;<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a>&#93;</Highlight></CodeLine>
<Link id="l01348" /><CodeLine lineNumber="1348"><Highlight kind="normal">                        &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; livethru)\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01349" /><CodeLine lineNumber="1349"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01350" /><CodeLine lineNumber="1350"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01351" /><CodeLine lineNumber="1351"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01352" /><CodeLine lineNumber="1352"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01353" /><CodeLine lineNumber="1353"><Highlight kind="comment">/// Update the PressureDiff array for liveness after scheduling this</Highlight></CodeLine>
<Link id="l01354" /><CodeLine lineNumber="1354"><Highlight kind="comment">/// instruction.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01355" /><CodeLine lineNumber="1355" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a91251ec06d557b21578095955b7b7fa7"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a91251ec06d557b21578095955b7b7fa7">ScheduleDAGMILive::updatePressureDiffs</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;VRegMaskOrUnit&gt;</a> LiveUses) &#123;</Highlight></CodeLine>
<Link id="l01356" /><CodeLine lineNumber="1356"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/vregmaskorunit">VRegMaskOrUnit</a> &amp;<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> : LiveUses) &#123;</Highlight></CodeLine>
<Link id="l01357" /><CodeLine lineNumber="1357"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/register">Register</a> Reg = <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.RegUnit;</Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01358" /><CodeLine lineNumber="1358"><Highlight kind="comment">    /// FIXME: Currently assuming single-use physregs.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01359" /><CodeLine lineNumber="1359"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Reg.isVirtual())</Highlight></CodeLine>
<Link id="l01360" /><CodeLine lineNumber="1360"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01361" /><CodeLine lineNumber="1361"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01362" /><CodeLine lineNumber="1362"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>) &#123;</Highlight></CodeLine>
<Link id="l01363" /><CodeLine lineNumber="1363"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If the register has just become live then other uses won&#39;t change</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01364" /><CodeLine lineNumber="1364"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// this fact anymore =&gt; decrement pressure.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01365" /><CodeLine lineNumber="1365"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If the register has just become dead then other uses make it come</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01366" /><CodeLine lineNumber="1366"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// back to life =&gt; increment pressure.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01367" /><CodeLine lineNumber="1367"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Decrement = <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.LaneMask.any();</Highlight></CodeLine>
<Link id="l01368" /><CodeLine lineNumber="1368"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01369" /><CodeLine lineNumber="1369"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/vreg2sunit">VReg2SUnit</a> &amp;V2SU</Highlight></CodeLine>
<Link id="l01370" /><CodeLine lineNumber="1370"><Highlight kind="normal">           : <a href="/docs/api/namespaces/llvm/#a341215803e83773a3e97860dc291f121">make&#95;range</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.find(Reg), <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.end())) &#123;</Highlight></CodeLine>
<Link id="l01371" /><CodeLine lineNumber="1371"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/sunit">SUnit</a> &amp;SU = &#42;V2SU.SU;</Highlight></CodeLine>
<Link id="l01372" /><CodeLine lineNumber="1372"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU.<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a> || &amp;SU == &amp;<a href="/docs/api/classes/llvm/scheduledag/#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>)</Highlight></CodeLine>
<Link id="l01373" /><CodeLine lineNumber="1373"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01374" /><CodeLine lineNumber="1374"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01375" /><CodeLine lineNumber="1375"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/pressurediff">PressureDiff</a> &amp;PDiff = <a href="/docs/api/classes/llvm/scheduledagmilive/#a24c23a8dc39475b1e913e41f1249c9f7">getPressureDiff</a>(&amp;SU);</Highlight></CodeLine>
<Link id="l01376" /><CodeLine lineNumber="1376"><Highlight kind="normal">        PDiff.<a href="/docs/api/classes/llvm/pressurediff/#aae6716327eea2325dc426c98cbcc74b4">addPressureChange</a>(Reg, Decrement, &amp;<a href="/docs/api/classes/llvm/scheduledag/#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>);</Highlight></CodeLine>
<Link id="l01377" /><CodeLine lineNumber="1377"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  UpdateRegP: SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; SU.<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01378" /><CodeLine lineNumber="1378"><Highlight kind="normal">                          &lt;&lt; <a href="/docs/api/namespaces/llvm/#af085ea923a328b9fa6a1975f1a4ff987">printReg</a>(Reg, <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>) &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;:&#39;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01379" /><CodeLine lineNumber="1379"><Highlight kind="normal">                          &lt;&lt; <a href="/docs/api/namespaces/llvm/#a3e30e18d6f7ebd943eaf8ebc3a2b2930">PrintLaneMask</a>(<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.LaneMask) &lt;&lt; </Highlight><Highlight kind="charliteral">&#39; &#39;</Highlight><Highlight kind="normal"> &lt;&lt; &#42;SU.<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</Highlight></CodeLine>
<Link id="l01380" /><CodeLine lineNumber="1380"><Highlight kind="normal">                   <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;              to &quot;</Highlight><Highlight kind="normal">; PDiff.<a href="/docs/api/classes/llvm/pressurediff/#a86962b61c920a437e06eda5dafd929d5">dump</a>(&#42;<a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>););</Highlight></CodeLine>
<Link id="l01381" /><CodeLine lineNumber="1381"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01382" /><CodeLine lineNumber="1382"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01383" /><CodeLine lineNumber="1383"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.LaneMask.any());</Highlight></CodeLine>
<Link id="l01384" /><CodeLine lineNumber="1384"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  LiveReg: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/namespaces/llvm/#a788c5905de970028eb0efa2266bd10bf">printVRegOrUnit</a>(Reg, <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01385" /><CodeLine lineNumber="1385"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// This may be called before CurrentBottom has been initialized. However,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01386" /><CodeLine lineNumber="1386"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// BotRPTracker must have a valid position. We want the value live into the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01387" /><CodeLine lineNumber="1387"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// instruction or live out of the block, so ask for the previous</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01388" /><CodeLine lineNumber="1388"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// instruction&#39;s live-out.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01389" /><CodeLine lineNumber="1389"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/liveinterval">LiveInterval</a> &amp;LI = <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getInterval(Reg);</Highlight></CodeLine>
<Link id="l01390" /><CodeLine lineNumber="1390"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/vninfo">VNInfo</a> &#42;VNI;</Highlight></CodeLine>
<Link id="l01391" /><CodeLine lineNumber="1391"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/machinebasicblock/#a199a6e4bfdffc8f3379ef4f35004488f">MachineBasicBlock::const&#95;iterator</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> =</Highlight></CodeLine>
<Link id="l01392" /><CodeLine lineNumber="1392"><Highlight kind="normal">        <a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getPos(), <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;end());</Highlight></CodeLine>
<Link id="l01393" /><CodeLine lineNumber="1393"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> == <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;end())</Highlight></CodeLine>
<Link id="l01394" /><CodeLine lineNumber="1394"><Highlight kind="normal">        VNI = LI.<a href="/docs/api/classes/llvm/liverange/#a7e1ec6260b229b2f5913405b758bc146">getVNInfoBefore</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getMBBEndIdx(<a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>));</Highlight></CodeLine>
<Link id="l01395" /><CodeLine lineNumber="1395"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01396" /><CodeLine lineNumber="1396"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/livequeryresult">LiveQueryResult</a> LRQ = LI.<a href="/docs/api/classes/llvm/liverange/#a6eb0e49d283729a5f8b99d4efa1be7c1">Query</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getInstructionIndex(&#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</Highlight></CodeLine>
<Link id="l01397" /><CodeLine lineNumber="1397"><Highlight kind="normal">        VNI = LRQ.<a href="/docs/api/classes/llvm/livequeryresult/#a527e4a21e13a8455c75eb0d811701066">valueIn</a>();</Highlight></CodeLine>
<Link id="l01398" /><CodeLine lineNumber="1398"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01399" /><CodeLine lineNumber="1399"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// RegisterPressureTracker guarantees that readsReg is true for LiveUses.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01400" /><CodeLine lineNumber="1400"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VNI &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;No live value at use.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01401" /><CodeLine lineNumber="1401"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/vreg2sunit">VReg2SUnit</a> &amp;V2SU</Highlight></CodeLine>
<Link id="l01402" /><CodeLine lineNumber="1402"><Highlight kind="normal">           : <a href="/docs/api/namespaces/llvm/#a341215803e83773a3e97860dc291f121">make&#95;range</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.find(Reg), <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.end())) &#123;</Highlight></CodeLine>
<Link id="l01403" /><CodeLine lineNumber="1403"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = V2SU.SU;</Highlight></CodeLine>
<Link id="l01404" /><CodeLine lineNumber="1404"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// If this use comes before the reaching def, it cannot be a last use,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01405" /><CodeLine lineNumber="1405"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// so decrease its pressure change.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01406" /><CodeLine lineNumber="1406"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a> &amp;&amp; SU != &amp;<a href="/docs/api/classes/llvm/scheduledag/#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>) &#123;</Highlight></CodeLine>
<Link id="l01407" /><CodeLine lineNumber="1407"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/livequeryresult">LiveQueryResult</a> LRQ =</Highlight></CodeLine>
<Link id="l01408" /><CodeLine lineNumber="1408"><Highlight kind="normal">              LI.<a href="/docs/api/classes/llvm/liverange/#a6eb0e49d283729a5f8b99d4efa1be7c1">Query</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getInstructionIndex(&#42;SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>()));</Highlight></CodeLine>
<Link id="l01409" /><CodeLine lineNumber="1409"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LRQ.<a href="/docs/api/classes/llvm/livequeryresult/#a527e4a21e13a8455c75eb0d811701066">valueIn</a>() == VNI) &#123;</Highlight></CodeLine>
<Link id="l01410" /><CodeLine lineNumber="1410"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/pressurediff">PressureDiff</a> &amp;PDiff = <a href="/docs/api/classes/llvm/scheduledagmilive/#a24c23a8dc39475b1e913e41f1249c9f7">getPressureDiff</a>(SU);</Highlight></CodeLine>
<Link id="l01411" /><CodeLine lineNumber="1411"><Highlight kind="normal">            PDiff.<a href="/docs/api/classes/llvm/pressurediff/#aae6716327eea2325dc426c98cbcc74b4">addPressureChange</a>(Reg, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, &amp;<a href="/docs/api/classes/llvm/scheduledag/#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>);</Highlight></CodeLine>
<Link id="l01412" /><CodeLine lineNumber="1412"><Highlight kind="normal">            <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  UpdateRegP: SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01413" /><CodeLine lineNumber="1413"><Highlight kind="normal">                              &lt;&lt; &#42;SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</Highlight></CodeLine>
<Link id="l01414" /><CodeLine lineNumber="1414"><Highlight kind="normal">                       <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;              to &quot;</Highlight><Highlight kind="normal">; PDiff.<a href="/docs/api/classes/llvm/pressurediff/#a86962b61c920a437e06eda5dafd929d5">dump</a>(&#42;<a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>););</Highlight></CodeLine>
<Link id="l01415" /><CodeLine lineNumber="1415"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l01416" /><CodeLine lineNumber="1416"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01417" /><CodeLine lineNumber="1417"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01418" /><CodeLine lineNumber="1418"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01419" /><CodeLine lineNumber="1419"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01420" /><CodeLine lineNumber="1420"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01421" /><CodeLine lineNumber="1421"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01422" /><CodeLine lineNumber="1422" lineLink="/docs/api/classes/llvm/scheduledagmilive/#add5e3e74f2db8e669b830ae35edc8c02"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive/#add5e3e74f2db8e669b830ae35edc8c02">ScheduleDAGMILive::dump</a>()</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l01423" /><CodeLine lineNumber="1423"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#if !defined(NDEBUG) || defined(LLVM&#95;ENABLE&#95;DUMP)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01424" /><CodeLine lineNumber="1424"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledag/#a521bf68518a92483130a58680716d153">EntrySU</a>.getInstr() != </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">)</Highlight></CodeLine>
<Link id="l01425" /><CodeLine lineNumber="1425"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledag/#a917f4d40ed0bbdaf4ab50e5df4de067b">dumpNodeAll</a>(<a href="/docs/api/classes/llvm/scheduledag/#a521bf68518a92483130a58680716d153">EntrySU</a>);</Highlight></CodeLine>
<Link id="l01426" /><CodeLine lineNumber="1426"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &amp;SU : <a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>) &#123;</Highlight></CodeLine>
<Link id="l01427" /><CodeLine lineNumber="1427"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledag/#a917f4d40ed0bbdaf4ab50e5df4de067b">dumpNodeAll</a>(SU);</Highlight></CodeLine>
<Link id="l01428" /><CodeLine lineNumber="1428"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#ac46dc81cc2feaf48751834a3dd13e33a">ShouldTrackPressure</a>) &#123;</Highlight></CodeLine>
<Link id="l01429" /><CodeLine lineNumber="1429"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  Pressure Diff      : &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01430" /><CodeLine lineNumber="1430"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmilive/#a24c23a8dc39475b1e913e41f1249c9f7">getPressureDiff</a>(&amp;SU).<a href="/docs/api/classes/llvm/pressurediff/#a86962b61c920a437e06eda5dafd929d5">dump</a>(&#42;<a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>);</Highlight></CodeLine>
<Link id="l01431" /><CodeLine lineNumber="1431"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01432" /><CodeLine lineNumber="1432"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  Single Issue       : &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01433" /><CodeLine lineNumber="1433"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.mustBeginGroup(SU.getInstr()) &amp;&amp;</Highlight></CodeLine>
<Link id="l01434" /><CodeLine lineNumber="1434"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/scheduledaginstrs/#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a>.mustEndGroup(SU.getInstr()))</Highlight></CodeLine>
<Link id="l01435" /><CodeLine lineNumber="1435"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;true;&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01436" /><CodeLine lineNumber="1436"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01437" /><CodeLine lineNumber="1437"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;false;&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01438" /><CodeLine lineNumber="1438"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01439" /><CodeLine lineNumber="1439"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01440" /><CodeLine lineNumber="1440"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledag/#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>.getInstr() != </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">)</Highlight></CodeLine>
<Link id="l01441" /><CodeLine lineNumber="1441"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledag/#a917f4d40ed0bbdaf4ab50e5df4de067b">dumpNodeAll</a>(<a href="/docs/api/classes/llvm/scheduledag/#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>);</Highlight></CodeLine>
<Link id="l01442" /><CodeLine lineNumber="1442"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01443" /><CodeLine lineNumber="1443"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01444" /><CodeLine lineNumber="1444"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01445" /><CodeLine lineNumber="1445"><Highlight kind="comment">/// schedule - Called back from MachineScheduler::runOnMachineFunction</Highlight></CodeLine>
<Link id="l01446" /><CodeLine lineNumber="1446"><Highlight kind="comment">/// after setting up the current scheduling region. &#91;RegionBegin, RegionEnd)</Highlight></CodeLine>
<Link id="l01447" /><CodeLine lineNumber="1447"><Highlight kind="comment">/// only includes instructions that have DAG nodes, not scheduling boundaries.</Highlight></CodeLine>
<Link id="l01448" /><CodeLine lineNumber="1448"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l01449" /><CodeLine lineNumber="1449"><Highlight kind="comment">/// This is a skeletal driver, with all the functionality pushed into helpers,</Highlight></CodeLine>
<Link id="l01450" /><CodeLine lineNumber="1450"><Highlight kind="comment">/// so that it can be easily extended by experimental schedulers. Generally,</Highlight></CodeLine>
<Link id="l01451" /><CodeLine lineNumber="1451"><Highlight kind="comment">/// implementing MachineSchedStrategy should be sufficient to implement a new</Highlight></CodeLine>
<Link id="l01452" /><CodeLine lineNumber="1452"><Highlight kind="comment">/// scheduling algorithm. However, if a scheduler further subclasses</Highlight></CodeLine>
<Link id="l01453" /><CodeLine lineNumber="1453"><Highlight kind="comment">/// ScheduleDAGMILive then it will want to override this virtual method in order</Highlight></CodeLine>
<Link id="l01454" /><CodeLine lineNumber="1454"><Highlight kind="comment">/// to update any specialized state.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01455" /><CodeLine lineNumber="1455" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a1583ce23a69e8a1b4af8065e2019c75f"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a1583ce23a69e8a1b4af8065e2019c75f">ScheduleDAGMILive::schedule</a>() &#123;</Highlight></CodeLine>
<Link id="l01456" /><CodeLine lineNumber="1456"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;ScheduleDAGMILive::schedule starting\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01457" /><CodeLine lineNumber="1457"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;dumpPolicy());</Highlight></CodeLine>
<Link id="l01458" /><CodeLine lineNumber="1458"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a4be5ffcd4f76d433cc753be146a872b7">buildDAGWithRegPressure</a>();</Highlight></CodeLine>
<Link id="l01459" /><CodeLine lineNumber="1459"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01460" /><CodeLine lineNumber="1460"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a2aa2eb6fd6a44ff6b9cbad960d446c7a">postProcessDAG</a>();</Highlight></CodeLine>
<Link id="l01461" /><CodeLine lineNumber="1461"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01462" /><CodeLine lineNumber="1462"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;SUnit&#42;, 8&gt;</a> TopRoots, BotRoots;</Highlight></CodeLine>
<Link id="l01463" /><CodeLine lineNumber="1463"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a6d0a0b4903e8d4d12c98b0f43fe83878">findRootsAndBiasEdges</a>(TopRoots, BotRoots);</Highlight></CodeLine>
<Link id="l01464" /><CodeLine lineNumber="1464"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01465" /><CodeLine lineNumber="1465"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Initialize the strategy before modifying the DAG.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01466" /><CodeLine lineNumber="1466"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This may initialize a DFSResult to be used for queue priority.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01467" /><CodeLine lineNumber="1467"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;initialize(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01468" /><CodeLine lineNumber="1468"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01469" /><CodeLine lineNumber="1469"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#add5e3e74f2db8e669b830ae35edc8c02">dump</a>());</Highlight></CodeLine>
<Link id="l01470" /><CodeLine lineNumber="1470"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a0e9fde7ed08fd233750d0a947147dfa1">PrintDAGs</a>) <a href="/docs/api/classes/llvm/scheduledagmilive/#add5e3e74f2db8e669b830ae35edc8c02">dump</a>();</Highlight></CodeLine>
<Link id="l01471" /><CodeLine lineNumber="1471"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a5ec9cfe35d76125af923975fa0c1730a">ViewMISchedDAGs</a>) <a href="/docs/api/classes/llvm/scheduledagmi/#a8b7babb023cad0842f5a177e7abe3651">viewGraph</a>();</Highlight></CodeLine>
<Link id="l01472" /><CodeLine lineNumber="1472"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01473" /><CodeLine lineNumber="1473"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Initialize ready queues now that the DAG and priority data are finalized.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01474" /><CodeLine lineNumber="1474"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a3668b7c35103540be55d96cd68948f43">initQueues</a>(TopRoots, BotRoots);</Highlight></CodeLine>
<Link id="l01475" /><CodeLine lineNumber="1475"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01476" /><CodeLine lineNumber="1476"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsTopNode = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01477" /><CodeLine lineNumber="1477"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l01478" /><CodeLine lineNumber="1478"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;&#42;&#42; ScheduleDAGMILive::schedule picking next node\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01479" /><CodeLine lineNumber="1479"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;pickNode(IsTopNode);</Highlight></CodeLine>
<Link id="l01480" /><CodeLine lineNumber="1480"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SU) </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01481" /><CodeLine lineNumber="1481"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01482" /><CodeLine lineNumber="1482"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Node already scheduled&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01483" /><CodeLine lineNumber="1483"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/scheduledagmi/#a569fc4139bec0217794e9f830d6ba852">checkSchedLimit</a>())</Highlight></CodeLine>
<Link id="l01484" /><CodeLine lineNumber="1484"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01485" /><CodeLine lineNumber="1485"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01486" /><CodeLine lineNumber="1486"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmilive/#a04a2c04f918397dbac27a79e58807136">scheduleMI</a>(SU, IsTopNode);</Highlight></CodeLine>
<Link id="l01487" /><CodeLine lineNumber="1487"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01488" /><CodeLine lineNumber="1488"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>) &#123;</Highlight></CodeLine>
<Link id="l01489" /><CodeLine lineNumber="1489"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SubtreeID = <a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>-&gt;getSubtreeID(SU);</Highlight></CodeLine>
<Link id="l01490" /><CodeLine lineNumber="1490"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/scheduledagmilive/#aeaa92f00c361a14dd3da3992078894f1">ScheduledTrees</a>.test(SubtreeID)) &#123;</Highlight></CodeLine>
<Link id="l01491" /><CodeLine lineNumber="1491"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/scheduledagmilive/#aeaa92f00c361a14dd3da3992078894f1">ScheduledTrees</a>.set(SubtreeID);</Highlight></CodeLine>
<Link id="l01492" /><CodeLine lineNumber="1492"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>-&gt;scheduleTree(SubtreeID);</Highlight></CodeLine>
<Link id="l01493" /><CodeLine lineNumber="1493"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;scheduleTree(SubtreeID);</Highlight></CodeLine>
<Link id="l01494" /><CodeLine lineNumber="1494"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01495" /><CodeLine lineNumber="1495"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01496" /><CodeLine lineNumber="1496"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01497" /><CodeLine lineNumber="1497"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Notify the scheduling strategy after updating the DAG.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01498" /><CodeLine lineNumber="1498"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmi/#a0318c90d99b85c47bc82d9e0844462f6">SchedImpl</a>-&gt;schedNode(SU, IsTopNode);</Highlight></CodeLine>
<Link id="l01499" /><CodeLine lineNumber="1499"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01500" /><CodeLine lineNumber="1500"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmi/#abfdd9a95217810c69b2557060a130318">updateQueues</a>(SU, IsTopNode);</Highlight></CodeLine>
<Link id="l01501" /><CodeLine lineNumber="1501"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01502" /><CodeLine lineNumber="1502"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> == <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Nonempty unscheduled zone.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01503" /><CodeLine lineNumber="1503"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01504" /><CodeLine lineNumber="1504"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#ac2dafe98c88d43b256622413886e2152">placeDebugValues</a>();</Highlight></CodeLine>
<Link id="l01505" /><CodeLine lineNumber="1505"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01506" /><CodeLine lineNumber="1506"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(&#123;</Highlight></CodeLine>
<Link id="l01507" /><CodeLine lineNumber="1507"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;&#42;&#42;&#42; Final schedule for &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01508" /><CodeLine lineNumber="1508"><Highlight kind="normal">           &lt;&lt; <a href="/docs/api/namespaces/llvm/#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(&#42;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>()-&gt;<a href="/docs/api/files/lib/lib/analysis/basicaliasanalysis-cpp/#a1b8850f1ed44c12bc3501175a71c251c">getParent</a>()) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &#42;&#42;&#42;\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01509" /><CodeLine lineNumber="1509"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmi/#a01b02e76c87211e7084ec17f18a2d16f">dumpSchedule</a>();</Highlight></CodeLine>
<Link id="l01510" /><CodeLine lineNumber="1510"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01511" /><CodeLine lineNumber="1511"><Highlight kind="normal">  &#125;);</Highlight></CodeLine>
<Link id="l01512" /><CodeLine lineNumber="1512"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01513" /><CodeLine lineNumber="1513"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01514" /><CodeLine lineNumber="1514"><Highlight kind="comment">/// Build the DAG and setup three register pressure trackers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01515" /><CodeLine lineNumber="1515" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a4be5ffcd4f76d433cc753be146a872b7"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a4be5ffcd4f76d433cc753be146a872b7">ScheduleDAGMILive::buildDAGWithRegPressure</a>() &#123;</Highlight></CodeLine>
<Link id="l01516" /><CodeLine lineNumber="1516"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/scheduledagmilive/#ac46dc81cc2feaf48751834a3dd13e33a">ShouldTrackPressure</a>) &#123;</Highlight></CodeLine>
<Link id="l01517" /><CodeLine lineNumber="1517"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.reset();</Highlight></CodeLine>
<Link id="l01518" /><CodeLine lineNumber="1518"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmilive/#a4d37514645e531a608da1d7292057886">RegionCriticalPSets</a>.clear();</Highlight></CodeLine>
<Link id="l01519" /><CodeLine lineNumber="1519"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab580983de4f7b69ebcca992be9cb3223">buildSchedGraph</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a79b8428bb41e16b71ae2bb0139bce5eb">AA</a>);</Highlight></CodeLine>
<Link id="l01520" /><CodeLine lineNumber="1520"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01521" /><CodeLine lineNumber="1521"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01522" /><CodeLine lineNumber="1522"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01523" /><CodeLine lineNumber="1523"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Initialize the register pressure tracker used by buildSchedGraph.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01524" /><CodeLine lineNumber="1524"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.init(&amp;<a href="/docs/api/classes/llvm/scheduledag/#a5a3d3d075a208011a24a0918b58d7daa">MF</a>, <a href="/docs/api/classes/llvm/scheduledagmilive/#a9539744d7a0c1681540a64e935b671dd">RegClassInfo</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>, <a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>, <a href="/docs/api/classes/llvm/scheduledagmilive/#ae8d156802e79e1d8f76dadc3e5d265b5">LiveRegionEnd</a>,</Highlight></CodeLine>
<Link id="l01525" /><CodeLine lineNumber="1525"><Highlight kind="normal">                 <a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>, </Highlight><Highlight kind="comment">/&#42;TrackUntiedDefs=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01526" /><CodeLine lineNumber="1526"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01527" /><CodeLine lineNumber="1527"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Account for liveness generate by the region boundary.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01528" /><CodeLine lineNumber="1528"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#ae8d156802e79e1d8f76dadc3e5d265b5">LiveRegionEnd</a> != <a href="/docs/api/classes/llvm/scheduledaginstrs/#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>)</Highlight></CodeLine>
<Link id="l01529" /><CodeLine lineNumber="1529"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.recede();</Highlight></CodeLine>
<Link id="l01530" /><CodeLine lineNumber="1530"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01531" /><CodeLine lineNumber="1531"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Build the DAG, and compute current register pressure.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01532" /><CodeLine lineNumber="1532"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab580983de4f7b69ebcca992be9cb3223">buildSchedGraph</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a79b8428bb41e16b71ae2bb0139bce5eb">AA</a>, &amp;<a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>, &amp;<a href="/docs/api/classes/llvm/scheduledagmilive/#a6326ec771a59a9d13a860922f9e21b6c">SUPressureDiffs</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>, <a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>);</Highlight></CodeLine>
<Link id="l01533" /><CodeLine lineNumber="1533"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01534" /><CodeLine lineNumber="1534"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Initialize top/bottom trackers after computing region pressure.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01535" /><CodeLine lineNumber="1535"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a86daf2b1fb72fdd9a8785a4042ac1457">initRegPressure</a>();</Highlight></CodeLine>
<Link id="l01536" /><CodeLine lineNumber="1536"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01537" /><CodeLine lineNumber="1537"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01538" /><CodeLine lineNumber="1538" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a21c7721fcb12ebb55872b86d33e61e27"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a21c7721fcb12ebb55872b86d33e61e27">ScheduleDAGMILive::computeDFSResult</a>() &#123;</Highlight></CodeLine>
<Link id="l01539" /><CodeLine lineNumber="1539"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>)</Highlight></CodeLine>
<Link id="l01540" /><CodeLine lineNumber="1540"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a> = </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheddfsresult">SchedDFSResult</a>(</Highlight><Highlight kind="comment">/&#42;BottomU&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, <a href="#a20646b5e577c00ae6fc2912a4081f9d5">MinSubtreeSize</a>);</Highlight></CodeLine>
<Link id="l01541" /><CodeLine lineNumber="1541"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>-&gt;clear();</Highlight></CodeLine>
<Link id="l01542" /><CodeLine lineNumber="1542"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#aeaa92f00c361a14dd3da3992078894f1">ScheduledTrees</a>.clear();</Highlight></CodeLine>
<Link id="l01543" /><CodeLine lineNumber="1543"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>-&gt;resize(<a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>.size());</Highlight></CodeLine>
<Link id="l01544" /><CodeLine lineNumber="1544"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>-&gt;compute(<a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>);</Highlight></CodeLine>
<Link id="l01545" /><CodeLine lineNumber="1545"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive/#aeaa92f00c361a14dd3da3992078894f1">ScheduledTrees</a>.resize(<a href="/docs/api/classes/llvm/scheduledagmilive/#a3000d2b281b2c4c46c1afb89e060ce04">DFSResult</a>-&gt;getNumSubtrees());</Highlight></CodeLine>
<Link id="l01546" /><CodeLine lineNumber="1546"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01547" /><CodeLine lineNumber="1547"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01548" /><CodeLine lineNumber="1548"><Highlight kind="comment">/// Compute the max cyclic critical path through the DAG. The scheduling DAG</Highlight></CodeLine>
<Link id="l01549" /><CodeLine lineNumber="1549"><Highlight kind="comment">/// only provides the critical path for single block loops. To handle loops that</Highlight></CodeLine>
<Link id="l01550" /><CodeLine lineNumber="1550"><Highlight kind="comment">/// span blocks, we could use the vreg path latencies provided by</Highlight></CodeLine>
<Link id="l01551" /><CodeLine lineNumber="1551"><Highlight kind="comment">/// MachineTraceMetrics instead. However, MachineTraceMetrics is not currently</Highlight></CodeLine>
<Link id="l01552" /><CodeLine lineNumber="1552"><Highlight kind="comment">/// available for use in the scheduler.</Highlight></CodeLine>
<Link id="l01553" /><CodeLine lineNumber="1553"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l01554" /><CodeLine lineNumber="1554"><Highlight kind="comment">/// The cyclic path estimation identifies a def-use pair that crosses the back</Highlight></CodeLine>
<Link id="l01555" /><CodeLine lineNumber="1555"><Highlight kind="comment">/// edge and considers the depth and height of the nodes. For example, consider</Highlight></CodeLine>
<Link id="l01556" /><CodeLine lineNumber="1556"><Highlight kind="comment">/// the following instruction sequence where each instruction has unit latency</Highlight></CodeLine>
<Link id="l01557" /><CodeLine lineNumber="1557"><Highlight kind="comment">/// and defines an eponymous virtual register:</Highlight></CodeLine>
<Link id="l01558" /><CodeLine lineNumber="1558"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l01559" /><CodeLine lineNumber="1559"><Highlight kind="comment">/// a-&gt;b(a,c)-&gt;c(b)-&gt;d(c)-&gt;exit</Highlight></CodeLine>
<Link id="l01560" /><CodeLine lineNumber="1560"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l01561" /><CodeLine lineNumber="1561"><Highlight kind="comment">/// The cyclic critical path is a two cycles: b-&gt;c-&gt;b</Highlight></CodeLine>
<Link id="l01562" /><CodeLine lineNumber="1562"><Highlight kind="comment">/// The acyclic critical path is four cycles: a-&gt;b-&gt;c-&gt;d-&gt;exit</Highlight></CodeLine>
<Link id="l01563" /><CodeLine lineNumber="1563"><Highlight kind="comment">/// LiveOutHeight = height(c) = len(c-&gt;d-&gt;exit) = 2</Highlight></CodeLine>
<Link id="l01564" /><CodeLine lineNumber="1564"><Highlight kind="comment">/// LiveOutDepth = depth(c) + 1 = len(a-&gt;b-&gt;c) + 1 = 3</Highlight></CodeLine>
<Link id="l01565" /><CodeLine lineNumber="1565"><Highlight kind="comment">/// LiveInHeight = height(b) + 1 = len(b-&gt;c-&gt;d-&gt;exit) + 1 = 4</Highlight></CodeLine>
<Link id="l01566" /><CodeLine lineNumber="1566"><Highlight kind="comment">/// LiveInDepth = depth(b) = len(a-&gt;b) = 1</Highlight></CodeLine>
<Link id="l01567" /><CodeLine lineNumber="1567"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l01568" /><CodeLine lineNumber="1568"><Highlight kind="comment">/// LiveOutDepth - LiveInDepth = 3 - 1 = 2</Highlight></CodeLine>
<Link id="l01569" /><CodeLine lineNumber="1569"><Highlight kind="comment">/// LiveInHeight - LiveOutHeight = 4 - 2 = 2</Highlight></CodeLine>
<Link id="l01570" /><CodeLine lineNumber="1570"><Highlight kind="comment">/// CyclicCriticalPath = min(2, 2) = 2</Highlight></CodeLine>
<Link id="l01571" /><CodeLine lineNumber="1571"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l01572" /><CodeLine lineNumber="1572"><Highlight kind="comment">/// This could be relevant to PostRA scheduling, but is currently implemented</Highlight></CodeLine>
<Link id="l01573" /><CodeLine lineNumber="1573"><Highlight kind="comment">/// assuming LiveIntervals.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01574" /><CodeLine lineNumber="1574" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a7bb19d3e5b68421bc97c3c4b524e7888"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a7bb19d3e5b68421bc97c3c4b524e7888">ScheduleDAGMILive::computeCyclicCriticalPath</a>() &#123;</Highlight></CodeLine>
<Link id="l01575" /><CodeLine lineNumber="1575"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This only applies to single block loop.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01576" /><CodeLine lineNumber="1576"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;isSuccessor(<a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>))</Highlight></CodeLine>
<Link id="l01577" /><CodeLine lineNumber="1577"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 0;</Highlight></CodeLine>
<Link id="l01578" /><CodeLine lineNumber="1578"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01579" /><CodeLine lineNumber="1579"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> MaxCyclicLatency = 0;</Highlight></CodeLine>
<Link id="l01580" /><CodeLine lineNumber="1580"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Visit each live out vreg def to find def/use pairs that cross iterations.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01581" /><CodeLine lineNumber="1581"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/vregmaskorunit">VRegMaskOrUnit</a> &amp;<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> : <a href="/docs/api/classes/llvm/scheduledagmilive/#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.getPressure().LiveOutRegs) &#123;</Highlight></CodeLine>
<Link id="l01582" /><CodeLine lineNumber="1582"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/register">Register</a> Reg = <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.RegUnit;</Highlight></CodeLine>
<Link id="l01583" /><CodeLine lineNumber="1583"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Reg.isVirtual())</Highlight></CodeLine>
<Link id="l01584" /><CodeLine lineNumber="1584"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01585" /><CodeLine lineNumber="1585"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/liveinterval">LiveInterval</a> &amp;LI = <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getInterval(Reg);</Highlight></CodeLine>
<Link id="l01586" /><CodeLine lineNumber="1586"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/vninfo">VNInfo</a> &#42;DefVNI = LI.<a href="/docs/api/classes/llvm/liverange/#a7e1ec6260b229b2f5913405b758bc146">getVNInfoBefore</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getMBBEndIdx(<a href="/docs/api/classes/llvm/scheduledaginstrs/#a254403f7804208ade3cb68086201cb7a">BB</a>));</Highlight></CodeLine>
<Link id="l01587" /><CodeLine lineNumber="1587"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DefVNI)</Highlight></CodeLine>
<Link id="l01588" /><CodeLine lineNumber="1588"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01589" /><CodeLine lineNumber="1589"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01590" /><CodeLine lineNumber="1590"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#ad3ece0ac2421637044624c9b01c42466">DefMI</a> = <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getInstructionFromIndex(DefVNI-&gt;<a href="/docs/api/classes/llvm/vninfo/#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>);</Highlight></CodeLine>
<Link id="l01591" /><CodeLine lineNumber="1591"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;DefSU = <a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#ad3ece0ac2421637044624c9b01c42466">DefMI</a>);</Highlight></CodeLine>
<Link id="l01592" /><CodeLine lineNumber="1592"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DefSU)</Highlight></CodeLine>
<Link id="l01593" /><CodeLine lineNumber="1593"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01594" /><CodeLine lineNumber="1594"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01595" /><CodeLine lineNumber="1595"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LiveOutHeight = DefSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>();</Highlight></CodeLine>
<Link id="l01596" /><CodeLine lineNumber="1596"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LiveOutDepth = DefSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>() + DefSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a72e0568b7bf0e9a97260c34264a549a0">Latency</a>;</Highlight></CodeLine>
<Link id="l01597" /><CodeLine lineNumber="1597"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Visit all local users of the vreg def.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01598" /><CodeLine lineNumber="1598"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/vreg2sunit">VReg2SUnit</a> &amp;V2SU</Highlight></CodeLine>
<Link id="l01599" /><CodeLine lineNumber="1599"><Highlight kind="normal">         : <a href="/docs/api/namespaces/llvm/#a341215803e83773a3e97860dc291f121">make&#95;range</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.find(Reg), <a href="/docs/api/classes/llvm/scheduledagmilive/#a173db28fde5f079ed3dce74bb078551e">VRegUses</a>.end())) &#123;</Highlight></CodeLine>
<Link id="l01600" /><CodeLine lineNumber="1600"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = V2SU.SU;</Highlight></CodeLine>
<Link id="l01601" /><CodeLine lineNumber="1601"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU == &amp;<a href="/docs/api/classes/llvm/scheduledag/#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>)</Highlight></CodeLine>
<Link id="l01602" /><CodeLine lineNumber="1602"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01603" /><CodeLine lineNumber="1603"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01604" /><CodeLine lineNumber="1604"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Only consider uses of the phi.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01605" /><CodeLine lineNumber="1605"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/livequeryresult">LiveQueryResult</a> LRQ = LI.<a href="/docs/api/classes/llvm/liverange/#a6eb0e49d283729a5f8b99d4efa1be7c1">Query</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getInstructionIndex(&#42;SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>()));</Highlight></CodeLine>
<Link id="l01606" /><CodeLine lineNumber="1606"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!LRQ.<a href="/docs/api/classes/llvm/livequeryresult/#a527e4a21e13a8455c75eb0d811701066">valueIn</a>()-&gt;<a href="/docs/api/classes/llvm/vninfo/#ae72fbcf51be7574c84817cde814df07e">isPHIDef</a>())</Highlight></CodeLine>
<Link id="l01607" /><CodeLine lineNumber="1607"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01608" /><CodeLine lineNumber="1608"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01609" /><CodeLine lineNumber="1609"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Assume that a path spanning two iterations is a cycle, which could</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01610" /><CodeLine lineNumber="1610"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// overestimate in strange cases. This allows cyclic latency to be</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01611" /><CodeLine lineNumber="1611"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// estimated as the minimum slack of the vreg&#39;s depth or height.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01612" /><CodeLine lineNumber="1612"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> CyclicLatency = 0;</Highlight></CodeLine>
<Link id="l01613" /><CodeLine lineNumber="1613"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LiveOutDepth &gt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>())</Highlight></CodeLine>
<Link id="l01614" /><CodeLine lineNumber="1614"><Highlight kind="normal">        CyclicLatency = LiveOutDepth - SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>();</Highlight></CodeLine>
<Link id="l01615" /><CodeLine lineNumber="1615"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01616" /><CodeLine lineNumber="1616"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LiveInHeight = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>() + DefSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a72e0568b7bf0e9a97260c34264a549a0">Latency</a>;</Highlight></CodeLine>
<Link id="l01617" /><CodeLine lineNumber="1617"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LiveInHeight &gt; LiveOutHeight) &#123;</Highlight></CodeLine>
<Link id="l01618" /><CodeLine lineNumber="1618"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LiveInHeight - LiveOutHeight &lt; CyclicLatency)</Highlight></CodeLine>
<Link id="l01619" /><CodeLine lineNumber="1619"><Highlight kind="normal">          CyclicLatency = LiveInHeight - LiveOutHeight;</Highlight></CodeLine>
<Link id="l01620" /><CodeLine lineNumber="1620"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01621" /><CodeLine lineNumber="1621"><Highlight kind="normal">        CyclicLatency = 0;</Highlight></CodeLine>
<Link id="l01622" /><CodeLine lineNumber="1622"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01623" /><CodeLine lineNumber="1623"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Cyclic Path: SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; DefSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) -&gt; SU(&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01624" /><CodeLine lineNumber="1624"><Highlight kind="normal">                        &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) = &quot;</Highlight><Highlight kind="normal"> &lt;&lt; CyclicLatency &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01625" /><CodeLine lineNumber="1625"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CyclicLatency &gt; MaxCyclicLatency)</Highlight></CodeLine>
<Link id="l01626" /><CodeLine lineNumber="1626"><Highlight kind="normal">        MaxCyclicLatency = CyclicLatency;</Highlight></CodeLine>
<Link id="l01627" /><CodeLine lineNumber="1627"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01628" /><CodeLine lineNumber="1628"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01629" /><CodeLine lineNumber="1629"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Cyclic Critical Path: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; MaxCyclicLatency &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01630" /><CodeLine lineNumber="1630"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> MaxCyclicLatency;</Highlight></CodeLine>
<Link id="l01631" /><CodeLine lineNumber="1631"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01632" /><CodeLine lineNumber="1632"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01633" /><CodeLine lineNumber="1633"><Highlight kind="comment">/// Release ExitSU predecessors and setup scheduler queues. Re-position</Highlight></CodeLine>
<Link id="l01634" /><CodeLine lineNumber="1634"><Highlight kind="comment">/// the Top RP tracker in case the region beginning has changed.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01635" /><CodeLine lineNumber="1635" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a3668b7c35103540be55d96cd68948f43"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a3668b7c35103540be55d96cd68948f43">ScheduleDAGMILive::initQueues</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;SUnit&#42;&gt;</a> TopRoots,</Highlight></CodeLine>
<Link id="l01636" /><CodeLine lineNumber="1636"><Highlight kind="normal">                                   <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;SUnit&#42;&gt;</a> BotRoots) &#123;</Highlight></CodeLine>
<Link id="l01637" /><CodeLine lineNumber="1637"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a1f98694f104d052d71ed74ade38d69f0">ScheduleDAGMI::initQueues</a>(TopRoots, BotRoots);</Highlight></CodeLine>
<Link id="l01638" /><CodeLine lineNumber="1638"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#ac46dc81cc2feaf48751834a3dd13e33a">ShouldTrackPressure</a>) &#123;</Highlight></CodeLine>
<Link id="l01639" /><CodeLine lineNumber="1639"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.getPos() == <a href="/docs/api/classes/llvm/scheduledaginstrs/#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;bad initial Top tracker&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01640" /><CodeLine lineNumber="1640"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.setPos(<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>);</Highlight></CodeLine>
<Link id="l01641" /><CodeLine lineNumber="1641"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01642" /><CodeLine lineNumber="1642"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01643" /><CodeLine lineNumber="1643"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01644" /><CodeLine lineNumber="1644"><Highlight kind="comment">/// Move an instruction and update register pressure.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01645" /><CodeLine lineNumber="1645" lineLink="/docs/api/classes/llvm/scheduledagmilive/#a04a2c04f918397dbac27a79e58807136"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive/#a04a2c04f918397dbac27a79e58807136">ScheduleDAGMILive::scheduleMI</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsTopNode) &#123;</Highlight></CodeLine>
<Link id="l01646" /><CodeLine lineNumber="1646"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Move the instruction to its new location in the instruction stream.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01647" /><CodeLine lineNumber="1647"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</Highlight></CodeLine>
<Link id="l01648" /><CodeLine lineNumber="1648"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01649" /><CodeLine lineNumber="1649"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsTopNode) &#123;</Highlight></CodeLine>
<Link id="l01650" /><CodeLine lineNumber="1650"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae0b8da4dfde85d4ddc32359ca52dc493">isTopReady</a>() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;node still has unscheduled dependencies&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01651" /><CodeLine lineNumber="1651"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (&amp;&#42;<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> == <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</Highlight></CodeLine>
<Link id="l01652" /><CodeLine lineNumber="1652"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> = <a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(++<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>);</Highlight></CodeLine>
<Link id="l01653" /><CodeLine lineNumber="1653"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01654" /><CodeLine lineNumber="1654"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmi/#a2209b15a069023499cc665b373e67703">moveInstruction</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>);</Highlight></CodeLine>
<Link id="l01655" /><CodeLine lineNumber="1655"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.setPos(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</Highlight></CodeLine>
<Link id="l01656" /><CodeLine lineNumber="1656"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01657" /><CodeLine lineNumber="1657"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01658" /><CodeLine lineNumber="1658"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#ac46dc81cc2feaf48751834a3dd13e33a">ShouldTrackPressure</a>) &#123;</Highlight></CodeLine>
<Link id="l01659" /><CodeLine lineNumber="1659"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Update top scheduled pressure.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01660" /><CodeLine lineNumber="1660"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/registeroperands">RegisterOperands</a> RegOpers;</Highlight></CodeLine>
<Link id="l01661" /><CodeLine lineNumber="1661"><Highlight kind="normal">      RegOpers.<a href="/docs/api/classes/llvm/registeroperands/#a74e0a918c9705f23a1e5b66f68cc97e9">collect</a>(&#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, &#42;<a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>, <a href="/docs/api/classes/llvm/scheduledag/#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>, <a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>,</Highlight></CodeLine>
<Link id="l01662" /><CodeLine lineNumber="1662"><Highlight kind="normal">                       </Highlight><Highlight kind="comment">/&#42;IgnoreDead=&#42;/</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01663" /><CodeLine lineNumber="1663"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>) &#123;</Highlight></CodeLine>
<Link id="l01664" /><CodeLine lineNumber="1664"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Adjust liveness and add missing dead+read-undef flags.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01665" /><CodeLine lineNumber="1665"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/slotindex">SlotIndex</a> SlotIdx = <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getInstructionIndex(&#42;MI).getRegSlot();</Highlight></CodeLine>
<Link id="l01666" /><CodeLine lineNumber="1666"><Highlight kind="normal">        RegOpers.<a href="/docs/api/classes/llvm/registeroperands/#a8affa4b2a934ff08aa04e63253a00126">adjustLaneLiveness</a>(&#42;<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>, <a href="/docs/api/classes/llvm/scheduledag/#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>, SlotIdx, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</Highlight></CodeLine>
<Link id="l01667" /><CodeLine lineNumber="1667"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01668" /><CodeLine lineNumber="1668"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Adjust for missing dead-def flags.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01669" /><CodeLine lineNumber="1669"><Highlight kind="normal">        RegOpers.<a href="/docs/api/classes/llvm/registeroperands/#acee6dacd4d30da478f3ad67f7fc27142">detectDeadDefs</a>(&#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, &#42;<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>);</Highlight></CodeLine>
<Link id="l01670" /><CodeLine lineNumber="1670"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01671" /><CodeLine lineNumber="1671"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01672" /><CodeLine lineNumber="1672"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.advance(RegOpers);</Highlight></CodeLine>
<Link id="l01673" /><CodeLine lineNumber="1673"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.getPos() == <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;out of sync&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01674" /><CodeLine lineNumber="1674"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Top Pressure:\\n&quot;</Highlight><Highlight kind="normal">; <a href="/docs/api/namespaces/llvm/#adb6fca77863850136760be488d6ea345">dumpRegSetPressure</a>(</Highlight></CodeLine>
<Link id="l01675" /><CodeLine lineNumber="1675"><Highlight kind="normal">                     <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.getRegSetPressureAtPos(), <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>););</Highlight></CodeLine>
<Link id="l01676" /><CodeLine lineNumber="1676"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01677" /><CodeLine lineNumber="1677"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmilive/#a556d08e5789e4c99bb9c24aa4e226f9b">updateScheduledPressure</a>(SU, <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.getPressure().MaxSetPressure);</Highlight></CodeLine>
<Link id="l01678" /><CodeLine lineNumber="1678"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01679" /><CodeLine lineNumber="1679"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01680" /><CodeLine lineNumber="1680"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ac198a5fb130b4c09836ba20e01b4290d">isBottomReady</a>() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;node still has unscheduled dependencies&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01681" /><CodeLine lineNumber="1681"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> priorII =</Highlight></CodeLine>
<Link id="l01682" /><CodeLine lineNumber="1682"><Highlight kind="normal">      <a href="#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(<a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>);</Highlight></CodeLine>
<Link id="l01683" /><CodeLine lineNumber="1683"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (&amp;&#42;priorII == <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</Highlight></CodeLine>
<Link id="l01684" /><CodeLine lineNumber="1684"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a> = priorII;</Highlight></CodeLine>
<Link id="l01685" /><CodeLine lineNumber="1685"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01686" /><CodeLine lineNumber="1686"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (&amp;&#42;<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> == <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) &#123;</Highlight></CodeLine>
<Link id="l01687" /><CodeLine lineNumber="1687"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a> = <a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(++<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>, priorII);</Highlight></CodeLine>
<Link id="l01688" /><CodeLine lineNumber="1688"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/scheduledagmilive/#af7781c87ae9e210811389a826d7d4835">TopRPTracker</a>.setPos(<a href="/docs/api/classes/llvm/scheduledagmi/#ac8abe1b0d869087bd0c14a6637356dc0">CurrentTop</a>);</Highlight></CodeLine>
<Link id="l01689" /><CodeLine lineNumber="1689"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01690" /><CodeLine lineNumber="1690"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmi/#a2209b15a069023499cc665b373e67703">moveInstruction</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>);</Highlight></CodeLine>
<Link id="l01691" /><CodeLine lineNumber="1691"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</Highlight></CodeLine>
<Link id="l01692" /><CodeLine lineNumber="1692"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.setPos(<a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>);</Highlight></CodeLine>
<Link id="l01693" /><CodeLine lineNumber="1693"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01694" /><CodeLine lineNumber="1694"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#ac46dc81cc2feaf48751834a3dd13e33a">ShouldTrackPressure</a>) &#123;</Highlight></CodeLine>
<Link id="l01695" /><CodeLine lineNumber="1695"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/registeroperands">RegisterOperands</a> RegOpers;</Highlight></CodeLine>
<Link id="l01696" /><CodeLine lineNumber="1696"><Highlight kind="normal">      RegOpers.<a href="/docs/api/classes/llvm/registeroperands/#a74e0a918c9705f23a1e5b66f68cc97e9">collect</a>(&#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, &#42;<a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>, <a href="/docs/api/classes/llvm/scheduledag/#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>, <a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>,</Highlight></CodeLine>
<Link id="l01697" /><CodeLine lineNumber="1697"><Highlight kind="normal">                       </Highlight><Highlight kind="comment">/&#42;IgnoreDead=&#42;/</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01698" /><CodeLine lineNumber="1698"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>) &#123;</Highlight></CodeLine>
<Link id="l01699" /><CodeLine lineNumber="1699"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Adjust liveness and add missing dead+read-undef flags.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01700" /><CodeLine lineNumber="1700"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/slotindex">SlotIndex</a> SlotIdx = <a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;getInstructionIndex(&#42;MI).getRegSlot();</Highlight></CodeLine>
<Link id="l01701" /><CodeLine lineNumber="1701"><Highlight kind="normal">        RegOpers.<a href="/docs/api/classes/llvm/registeroperands/#a8affa4b2a934ff08aa04e63253a00126">adjustLaneLiveness</a>(&#42;<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>, <a href="/docs/api/classes/llvm/scheduledag/#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>, SlotIdx, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</Highlight></CodeLine>
<Link id="l01702" /><CodeLine lineNumber="1702"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01703" /><CodeLine lineNumber="1703"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Adjust for missing dead-def flags.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01704" /><CodeLine lineNumber="1704"><Highlight kind="normal">        RegOpers.<a href="/docs/api/classes/llvm/registeroperands/#acee6dacd4d30da478f3ad67f7fc27142">detectDeadDefs</a>(&#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, &#42;<a href="/docs/api/classes/llvm/scheduledagmi/#a9d67b1cafa36e90d7060d1da84907885">LIS</a>);</Highlight></CodeLine>
<Link id="l01705" /><CodeLine lineNumber="1705"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01706" /><CodeLine lineNumber="1706"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01707" /><CodeLine lineNumber="1707"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getPos() != <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a>)</Highlight></CodeLine>
<Link id="l01708" /><CodeLine lineNumber="1708"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.recedeSkipDebugValues();</Highlight></CodeLine>
<Link id="l01709" /><CodeLine lineNumber="1709"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;VRegMaskOrUnit, 8&gt;</a> LiveUses;</Highlight></CodeLine>
<Link id="l01710" /><CodeLine lineNumber="1710"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.recede(RegOpers, &amp;LiveUses);</Highlight></CodeLine>
<Link id="l01711" /><CodeLine lineNumber="1711"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getPos() == <a href="/docs/api/classes/llvm/scheduledagmi/#a7435e842606f5db4bca092e5829befc6">CurrentBottom</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;out of sync&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01712" /><CodeLine lineNumber="1712"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Bottom Pressure:\\n&quot;</Highlight><Highlight kind="normal">; <a href="/docs/api/namespaces/llvm/#adb6fca77863850136760be488d6ea345">dumpRegSetPressure</a>(</Highlight></CodeLine>
<Link id="l01713" /><CodeLine lineNumber="1713"><Highlight kind="normal">                     <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getRegSetPressureAtPos(), <a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>););</Highlight></CodeLine>
<Link id="l01714" /><CodeLine lineNumber="1714"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01715" /><CodeLine lineNumber="1715"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmilive/#a556d08e5789e4c99bb9c24aa4e226f9b">updateScheduledPressure</a>(SU, <a href="/docs/api/classes/llvm/scheduledagmilive/#a461ba62db23baf1682449292b89e4fe1">BotRPTracker</a>.getPressure().MaxSetPressure);</Highlight></CodeLine>
<Link id="l01716" /><CodeLine lineNumber="1716"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/scheduledagmilive/#a91251ec06d557b21578095955b7b7fa7">updatePressureDiffs</a>(LiveUses);</Highlight></CodeLine>
<Link id="l01717" /><CodeLine lineNumber="1717"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01718" /><CodeLine lineNumber="1718"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01719" /><CodeLine lineNumber="1719"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01720" /><CodeLine lineNumber="1720"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01721" /><CodeLine lineNumber="1721"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01722" /><CodeLine lineNumber="1722"><Highlight kind="normal"></Highlight><Highlight kind="comment">// BaseMemOpClusterMutation - DAG post-processing to cluster loads or stores.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01723" /><CodeLine lineNumber="1723"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01724" /><CodeLine lineNumber="1724"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01725" /><CodeLine lineNumber="1725"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l01726" /><CodeLine lineNumber="1726"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01727" /><CodeLine lineNumber="1727"><Highlight kind="comment">/// Post-process the DAG to create cluster edges between neighboring</Highlight></CodeLine>
<Link id="l01728" /><CodeLine lineNumber="1728"><Highlight kind="comment">/// loads or between neighboring stores.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01729" /><CodeLine lineNumber="1729" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation"><Highlight kind="normal"></Highlight><Highlight kind="keyword">class </Highlight><Highlight kind="normal"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a317d063bb2e9dfb39a12091f8a482a3e">BaseMemOpClusterMutation</a> : </Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmutation">ScheduleDAGMutation</a> &#123;</Highlight></CodeLine>
<Link id="l01730" /><CodeLine lineNumber="1730"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal">MemOpInfo &#123;</Highlight></CodeLine>
<Link id="l01731" /><CodeLine lineNumber="1731"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU;</Highlight></CodeLine>
<Link id="l01732" /><CodeLine lineNumber="1732"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;const MachineOperand &#42;, 4&gt;</a> BaseOps;</Highlight></CodeLine>
<Link id="l01733" /><CodeLine lineNumber="1733"><Highlight kind="normal">    int64&#95;t <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</Highlight></CodeLine>
<Link id="l01734" /><CodeLine lineNumber="1734"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/locationsize">LocationSize</a> Width;</Highlight></CodeLine>
<Link id="l01735" /><CodeLine lineNumber="1735"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> OffsetIsScalable;</Highlight></CodeLine>
<Link id="l01736" /><CodeLine lineNumber="1736"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01737" /><CodeLine lineNumber="1737"><Highlight kind="normal">    MemOpInfo(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;const MachineOperand &#42;&gt;</a> BaseOps,</Highlight></CodeLine>
<Link id="l01738" /><CodeLine lineNumber="1738"><Highlight kind="normal">              int64&#95;t <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> OffsetIsScalable, <a href="/docs/api/classes/llvm/locationsize">LocationSize</a> Width)</Highlight></CodeLine>
<Link id="l01739" /><CodeLine lineNumber="1739"><Highlight kind="normal">        : SU(SU), BaseOps(BaseOps), <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>(<a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>), Width(Width),</Highlight></CodeLine>
<Link id="l01740" /><CodeLine lineNumber="1740"><Highlight kind="normal">          OffsetIsScalable(OffsetIsScalable) &#123;&#125;</Highlight></CodeLine>
<Link id="l01741" /><CodeLine lineNumber="1741"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01742" /><CodeLine lineNumber="1742"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Compare(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &#42;</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>,</Highlight></CodeLine>
<Link id="l01743" /><CodeLine lineNumber="1743"><Highlight kind="normal">                        </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &#42;</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</Highlight></CodeLine>
<Link id="l01744" /><CodeLine lineNumber="1744"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType() != <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>-&gt;getType())</Highlight></CodeLine>
<Link id="l01745" /><CodeLine lineNumber="1745"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getType() &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>-&gt;getType();</Highlight></CodeLine>
<Link id="l01746" /><CodeLine lineNumber="1746"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;isReg())</Highlight></CodeLine>
<Link id="l01747" /><CodeLine lineNumber="1747"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getReg() &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>-&gt;getReg();</Highlight></CodeLine>
<Link id="l01748" /><CodeLine lineNumber="1748"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;isFI()) &#123;</Highlight></CodeLine>
<Link id="l01749" /><CodeLine lineNumber="1749"><Highlight kind="normal">        </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getParent()-&gt;getParent()-&gt;getParent();</Highlight></CodeLine>
<Link id="l01750" /><CodeLine lineNumber="1750"><Highlight kind="normal">        </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetframelowering">TargetFrameLowering</a> &amp;TFI = &#42;MF.<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>().<a href="/docs/api/classes/llvm/targetsubtargetinfo/#ac83b44e69c9f9f4f9d60be2d72f4a5df">getFrameLowering</a>();</Highlight></CodeLine>
<Link id="l01751" /><CodeLine lineNumber="1751"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> StackGrowsDown = TFI.<a href="/docs/api/classes/llvm/targetframelowering/#aa76eab97e3072a1ebd4bf1ff00d19423">getStackGrowthDirection</a>() ==</Highlight></CodeLine>
<Link id="l01752" /><CodeLine lineNumber="1752"><Highlight kind="normal">                              <a href="/docs/api/classes/llvm/targetframelowering/#a453c74e2daac0745b53f8b31c11fc50cad1fc7c9d0bae5bf76a67d2d26ce99c1a">TargetFrameLowering::StackGrowsDown</a>;</Highlight></CodeLine>
<Link id="l01753" /><CodeLine lineNumber="1753"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> StackGrowsDown ? <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getIndex() &gt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>-&gt;getIndex()</Highlight></CodeLine>
<Link id="l01754" /><CodeLine lineNumber="1754"><Highlight kind="normal">                              : <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;getIndex() &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>-&gt;getIndex();</Highlight></CodeLine>
<Link id="l01755" /><CodeLine lineNumber="1755"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01756" /><CodeLine lineNumber="1756"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01757" /><CodeLine lineNumber="1757"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;MemOpClusterMutation only supports register or frame &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01758" /><CodeLine lineNumber="1758"><Highlight kind="normal">                       </Highlight><Highlight kind="stringliteral">&quot;index bases.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01759" /><CodeLine lineNumber="1759"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01760" /><CodeLine lineNumber="1760"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01761" /><CodeLine lineNumber="1761"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a061b224a1a3c3486fd854e5009a858c9">operator&lt;</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> MemOpInfo &amp;RHS)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l01762" /><CodeLine lineNumber="1762"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// FIXME: Don&#39;t compare everything twice. Maybe use C++20 three way</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01763" /><CodeLine lineNumber="1763"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// comparison instead when it&#39;s available.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01764" /><CodeLine lineNumber="1764"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::lexicographical&#95;compare(BaseOps.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a8a045d250952c0867382a9840ee18fdf">begin</a>(), BaseOps.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a075e34e98605d0e7c289763a104869ac">end</a>(),</Highlight></CodeLine>
<Link id="l01765" /><CodeLine lineNumber="1765"><Highlight kind="normal">                                       RHS.BaseOps.begin(), RHS.BaseOps.end(),</Highlight></CodeLine>
<Link id="l01766" /><CodeLine lineNumber="1766"><Highlight kind="normal">                                       Compare))</Highlight></CodeLine>
<Link id="l01767" /><CodeLine lineNumber="1767"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01768" /><CodeLine lineNumber="1768"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::lexicographical&#95;compare(RHS.BaseOps.begin(), RHS.BaseOps.end(),</Highlight></CodeLine>
<Link id="l01769" /><CodeLine lineNumber="1769"><Highlight kind="normal">                                       BaseOps.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a8a045d250952c0867382a9840ee18fdf">begin</a>(), BaseOps.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a075e34e98605d0e7c289763a104869ac">end</a>(), Compare))</Highlight></CodeLine>
<Link id="l01770" /><CodeLine lineNumber="1770"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01771" /><CodeLine lineNumber="1771"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> != RHS.Offset)</Highlight></CodeLine>
<Link id="l01772" /><CodeLine lineNumber="1772"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &lt; RHS.Offset;</Highlight></CodeLine>
<Link id="l01773" /><CodeLine lineNumber="1773"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt; RHS.SU-&gt;NodeNum;</Highlight></CodeLine>
<Link id="l01774" /><CodeLine lineNumber="1774"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01775" /><CodeLine lineNumber="1775"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l01776" /><CodeLine lineNumber="1776"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01777" /><CodeLine lineNumber="1777"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;TII;</Highlight></CodeLine>
<Link id="l01778" /><CodeLine lineNumber="1778"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;TRI;</Highlight></CodeLine>
<Link id="l01779" /><CodeLine lineNumber="1779"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsLoad;</Highlight></CodeLine>
<Link id="l01780" /><CodeLine lineNumber="1780"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> ReorderWhileClustering;</Highlight></CodeLine>
<Link id="l01781" /><CodeLine lineNumber="1781"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01782" /><CodeLine lineNumber="1782"><Highlight kind="normal"></Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l01783" /><CodeLine lineNumber="1783" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a317d063bb2e9dfb39a12091f8a482a3e"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a317d063bb2e9dfb39a12091f8a482a3e">BaseMemOpClusterMutation</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;tii,</Highlight></CodeLine>
<Link id="l01784" /><CodeLine lineNumber="1784"><Highlight kind="normal">                           </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;tri, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsLoad,</Highlight></CodeLine>
<Link id="l01785" /><CodeLine lineNumber="1785"><Highlight kind="normal">                           </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> ReorderWhileClustering)</Highlight></CodeLine>
<Link id="l01786" /><CodeLine lineNumber="1786"><Highlight kind="normal">      : TII(tii), TRI(tri), IsLoad(IsLoad),</Highlight></CodeLine>
<Link id="l01787" /><CodeLine lineNumber="1787"><Highlight kind="normal">        ReorderWhileClustering(ReorderWhileClustering) &#123;&#125;</Highlight></CodeLine>
<Link id="l01788" /><CodeLine lineNumber="1788"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01789" /><CodeLine lineNumber="1789"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> apply(<a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;DAGInstrs) </Highlight><Highlight kind="keyword">override</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01790" /><CodeLine lineNumber="1790"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01791" /><CodeLine lineNumber="1791"><Highlight kind="normal"></Highlight><Highlight kind="keyword">protected</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l01792" /><CodeLine lineNumber="1792"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> clusterNeighboringMemOps(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;MemOpInfo&gt;</a> MemOps, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> FastCluster,</Highlight></CodeLine>
<Link id="l01793" /><CodeLine lineNumber="1793"><Highlight kind="normal">                                <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;DAG);</Highlight></CodeLine>
<Link id="l01794" /><CodeLine lineNumber="1794"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> collectMemOpRecords(std::vector&lt;SUnit&gt; &amp;SUnits,</Highlight></CodeLine>
<Link id="l01795" /><CodeLine lineNumber="1795"><Highlight kind="normal">                           <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;MemOpInfo&gt;</a> &amp;MemOpRecords);</Highlight></CodeLine>
<Link id="l01796" /><CodeLine lineNumber="1796"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> groupMemOps(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;MemOpInfo&gt;</a> MemOps, <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;DAG,</Highlight></CodeLine>
<Link id="l01797" /><CodeLine lineNumber="1797"><Highlight kind="normal">                   <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt;</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal">, <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;MemOpInfo, 32&gt;</a>&gt; &amp;<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86instrfma3info-cpp/#ab138684de9096eb96683328900f78e48">Groups</a>);</Highlight></CodeLine>
<Link id="l01798" /><CodeLine lineNumber="1798"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l01799" /><CodeLine lineNumber="1799"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01800" /><CodeLine lineNumber="1800" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/storeclustermutation"><Highlight kind="normal"></Highlight><Highlight kind="keyword">class </Highlight><Highlight kind="normal"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/storeclustermutation/#ad5a89e80fa32ad9d63c7d7ef712745aa">StoreClusterMutation</a> : </Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a317d063bb2e9dfb39a12091f8a482a3e">BaseMemOpClusterMutation</a> &#123;</Highlight></CodeLine>
<Link id="l01801" /><CodeLine lineNumber="1801"><Highlight kind="normal"></Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l01802" /><CodeLine lineNumber="1802" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/storeclustermutation/#ad5a89e80fa32ad9d63c7d7ef712745aa"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/storeclustermutation/#ad5a89e80fa32ad9d63c7d7ef712745aa">StoreClusterMutation</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;tii,</Highlight></CodeLine>
<Link id="l01803" /><CodeLine lineNumber="1803"><Highlight kind="normal">                       </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;tri,</Highlight></CodeLine>
<Link id="l01804" /><CodeLine lineNumber="1804"><Highlight kind="normal">                       </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> ReorderWhileClustering)</Highlight></CodeLine>
<Link id="l01805" /><CodeLine lineNumber="1805"><Highlight kind="normal">      : <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a317d063bb2e9dfb39a12091f8a482a3e">BaseMemOpClusterMutation</a>(tii, tri, <a href="/docs/api/namespaces/false">false</a>, ReorderWhileClustering) &#123;&#125;</Highlight></CodeLine>
<Link id="l01806" /><CodeLine lineNumber="1806"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l01807" /><CodeLine lineNumber="1807"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01808" /><CodeLine lineNumber="1808" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/loadclustermutation"><Highlight kind="normal"></Highlight><Highlight kind="keyword">class </Highlight><Highlight kind="normal"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/loadclustermutation/#a9317a15c0a4f218e7f7ea4fe01f61223">LoadClusterMutation</a> : </Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a317d063bb2e9dfb39a12091f8a482a3e">BaseMemOpClusterMutation</a> &#123;</Highlight></CodeLine>
<Link id="l01809" /><CodeLine lineNumber="1809"><Highlight kind="normal"></Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l01810" /><CodeLine lineNumber="1810" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/loadclustermutation/#a9317a15c0a4f218e7f7ea4fe01f61223"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/loadclustermutation/#a9317a15c0a4f218e7f7ea4fe01f61223">LoadClusterMutation</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;tii, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;tri,</Highlight></CodeLine>
<Link id="l01811" /><CodeLine lineNumber="1811"><Highlight kind="normal">                      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> ReorderWhileClustering)</Highlight></CodeLine>
<Link id="l01812" /><CodeLine lineNumber="1812"><Highlight kind="normal">      : <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a317d063bb2e9dfb39a12091f8a482a3e">BaseMemOpClusterMutation</a>(tii, tri, <a href="/docs/api/files/lib/lib/analysis/basicaliasanalysis-cpp/#af6d5cafbdfc5313e65d990120021a3ec">true</a>, ReorderWhileClustering) &#123;&#125;</Highlight></CodeLine>
<Link id="l01813" /><CodeLine lineNumber="1813"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l01814" /><CodeLine lineNumber="1814"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01815" /><CodeLine lineNumber="1815"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// end anonymous namespace</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01816" /><CodeLine lineNumber="1816"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01817" /><CodeLine lineNumber="1817"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal">llvm &#123;</Highlight></CodeLine>
<Link id="l01818" /><CodeLine lineNumber="1818"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01819" /><CodeLine lineNumber="1819"><Highlight kind="normal">std::unique&#95;ptr&lt;ScheduleDAGMutation&gt;</Highlight></CodeLine>
<Link id="l01820" /><CodeLine lineNumber="1820" lineLink="/docs/api/namespaces/llvm/#ab36ef7fb029dbd7ed2314db341b9f854"><Highlight kind="normal"><a href="/docs/api/namespaces/llvm/#ab36ef7fb029dbd7ed2314db341b9f854">createLoadClusterDAGMutation</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>,</Highlight></CodeLine>
<Link id="l01821" /><CodeLine lineNumber="1821"><Highlight kind="normal">                             </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>,</Highlight></CodeLine>
<Link id="l01822" /><CodeLine lineNumber="1822"><Highlight kind="normal">                             </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> ReorderWhileClustering) &#123;</Highlight></CodeLine>
<Link id="l01823" /><CodeLine lineNumber="1823"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="#a1b85cadc1b5f4497a2ef2371ce3fa3c4">EnableMemOpCluster</a> ? std::make&#95;unique&lt;LoadClusterMutation&gt;(</Highlight></CodeLine>
<Link id="l01824" /><CodeLine lineNumber="1824"><Highlight kind="normal">                                  <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>, <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, ReorderWhileClustering)</Highlight></CodeLine>
<Link id="l01825" /><CodeLine lineNumber="1825"><Highlight kind="normal">                            : </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01826" /><CodeLine lineNumber="1826"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01827" /><CodeLine lineNumber="1827"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01828" /><CodeLine lineNumber="1828"><Highlight kind="normal">std::unique&#95;ptr&lt;ScheduleDAGMutation&gt;</Highlight></CodeLine>
<Link id="l01829" /><CodeLine lineNumber="1829" lineLink="/docs/api/namespaces/llvm/#a7bc2ad470d8a41e9423748814b0e3596"><Highlight kind="normal"><a href="/docs/api/namespaces/llvm/#a7bc2ad470d8a41e9423748814b0e3596">createStoreClusterDAGMutation</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>,</Highlight></CodeLine>
<Link id="l01830" /><CodeLine lineNumber="1830"><Highlight kind="normal">                              </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>,</Highlight></CodeLine>
<Link id="l01831" /><CodeLine lineNumber="1831"><Highlight kind="normal">                              </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> ReorderWhileClustering) &#123;</Highlight></CodeLine>
<Link id="l01832" /><CodeLine lineNumber="1832"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="#a1b85cadc1b5f4497a2ef2371ce3fa3c4">EnableMemOpCluster</a> ? std::make&#95;unique&lt;StoreClusterMutation&gt;(</Highlight></CodeLine>
<Link id="l01833" /><CodeLine lineNumber="1833"><Highlight kind="normal">                                  <a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>, <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, ReorderWhileClustering)</Highlight></CodeLine>
<Link id="l01834" /><CodeLine lineNumber="1834"><Highlight kind="normal">                            : </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01835" /><CodeLine lineNumber="1835"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01836" /><CodeLine lineNumber="1836"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01837" /><CodeLine lineNumber="1837"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// end namespace llvm</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01838" /><CodeLine lineNumber="1838"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01839" /><CodeLine lineNumber="1839"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Sorting all the loads/stores first, then for each load/store, checking the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01840" /><CodeLine lineNumber="1840"><Highlight kind="normal"></Highlight><Highlight kind="comment">// following load/store one by one, until reach the first non-dependent one and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01841" /><CodeLine lineNumber="1841"><Highlight kind="normal"></Highlight><Highlight kind="comment">// call target hook to see if they can cluster.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01842" /><CodeLine lineNumber="1842"><Highlight kind="normal"></Highlight><Highlight kind="comment">// If FastCluster is enabled, we assume that, all the loads/stores have been</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01843" /><CodeLine lineNumber="1843"><Highlight kind="normal"></Highlight><Highlight kind="comment">// preprocessed and now, they didn&#39;t have dependencies on each other.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01844" /><CodeLine lineNumber="1844" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a54fbbf29fc459bb243a1a43fb2ab9c1a"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a54fbbf29fc459bb243a1a43fb2ab9c1a">BaseMemOpClusterMutation::clusterNeighboringMemOps</a>(</Highlight></CodeLine>
<Link id="l01845" /><CodeLine lineNumber="1845"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;MemOpInfo&gt;</a> MemOpRecords, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> FastCluster,</Highlight></CodeLine>
<Link id="l01846" /><CodeLine lineNumber="1846"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;DAG) &#123;</Highlight></CodeLine>
<Link id="l01847" /><CodeLine lineNumber="1847"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Keep track of the current cluster length and bytes for each SUnit.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01848" /><CodeLine lineNumber="1848"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;unsigned, std::pair&lt;unsigned, unsigned&gt;</a>&gt; SUnit2ClusterInfo;</Highlight></CodeLine>
<Link id="l01849" /><CodeLine lineNumber="1849"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01850" /><CodeLine lineNumber="1850"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// At this point, &#96;MemOpRecords&#96; array must hold atleast two mem ops. Try to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01851" /><CodeLine lineNumber="1851"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// cluster mem ops collected within &#96;MemOpRecords&#96; array.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01852" /><CodeLine lineNumber="1852"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Idx = 0, End = MemOpRecords.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(); Idx &lt; (End - 1); ++Idx) &#123;</Highlight></CodeLine>
<Link id="l01853" /><CodeLine lineNumber="1853"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Decision to cluster mem ops is taken based on target dependent logic</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01854" /><CodeLine lineNumber="1854"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> MemOpa = MemOpRecords&#91;Idx&#93;;</Highlight></CodeLine>
<Link id="l01855" /><CodeLine lineNumber="1855"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01856" /><CodeLine lineNumber="1856"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Seek for the next load/store to do the cluster.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01857" /><CodeLine lineNumber="1857"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NextIdx = Idx + 1;</Highlight></CodeLine>
<Link id="l01858" /><CodeLine lineNumber="1858"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (; NextIdx &lt; End; ++NextIdx)</Highlight></CodeLine>
<Link id="l01859" /><CodeLine lineNumber="1859"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Skip if MemOpb has been clustered already or has dependency with</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01860" /><CodeLine lineNumber="1860"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// MemOpa.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01861" /><CodeLine lineNumber="1861"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SUnit2ClusterInfo.<a href="/docs/api/classes/llvm/densemapbase/#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(MemOpRecords&#91;NextIdx&#93;.SU-&gt;NodeNum) &amp;&amp;</Highlight></CodeLine>
<Link id="l01862" /><CodeLine lineNumber="1862"><Highlight kind="normal">          (FastCluster ||</Highlight></CodeLine>
<Link id="l01863" /><CodeLine lineNumber="1863"><Highlight kind="normal">           (!DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#aa79589a56769cd108d08e21544be1420">IsReachable</a>(MemOpRecords&#91;NextIdx&#93;.SU, MemOpa.SU) &amp;&amp;</Highlight></CodeLine>
<Link id="l01864" /><CodeLine lineNumber="1864"><Highlight kind="normal">            !DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#aa79589a56769cd108d08e21544be1420">IsReachable</a>(MemOpa.SU, MemOpRecords&#91;NextIdx&#93;.SU))))</Highlight></CodeLine>
<Link id="l01865" /><CodeLine lineNumber="1865"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01866" /><CodeLine lineNumber="1866"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NextIdx == End)</Highlight></CodeLine>
<Link id="l01867" /><CodeLine lineNumber="1867"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01868" /><CodeLine lineNumber="1868"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01869" /><CodeLine lineNumber="1869"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> MemOpb = MemOpRecords&#91;NextIdx&#93;;</Highlight></CodeLine>
<Link id="l01870" /><CodeLine lineNumber="1870"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ClusterLength = 2;</Highlight></CodeLine>
<Link id="l01871" /><CodeLine lineNumber="1871"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> CurrentClusterBytes = MemOpa.Width.getValue().getKnownMinValue() +</Highlight></CodeLine>
<Link id="l01872" /><CodeLine lineNumber="1872"><Highlight kind="normal">                                   MemOpb.Width.getValue().getKnownMinValue();</Highlight></CodeLine>
<Link id="l01873" /><CodeLine lineNumber="1873"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SUnit2ClusterInfo.<a href="/docs/api/classes/llvm/densemapbase/#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(MemOpa.SU-&gt;NodeNum)) &#123;</Highlight></CodeLine>
<Link id="l01874" /><CodeLine lineNumber="1874"><Highlight kind="normal">      ClusterLength = SUnit2ClusterInfo&#91;MemOpa.SU-&gt;NodeNum&#93;.first + 1;</Highlight></CodeLine>
<Link id="l01875" /><CodeLine lineNumber="1875"><Highlight kind="normal">      CurrentClusterBytes = SUnit2ClusterInfo&#91;MemOpa.SU-&gt;NodeNum&#93;.second +</Highlight></CodeLine>
<Link id="l01876" /><CodeLine lineNumber="1876"><Highlight kind="normal">                            MemOpb.Width.getValue().getKnownMinValue();</Highlight></CodeLine>
<Link id="l01877" /><CodeLine lineNumber="1877"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01878" /><CodeLine lineNumber="1878"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01879" /><CodeLine lineNumber="1879"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!TII-&gt;shouldClusterMemOps(MemOpa.BaseOps, MemOpa.Offset,</Highlight></CodeLine>
<Link id="l01880" /><CodeLine lineNumber="1880"><Highlight kind="normal">                                  MemOpa.OffsetIsScalable, MemOpb.BaseOps,</Highlight></CodeLine>
<Link id="l01881" /><CodeLine lineNumber="1881"><Highlight kind="normal">                                  MemOpb.Offset, MemOpb.OffsetIsScalable,</Highlight></CodeLine>
<Link id="l01882" /><CodeLine lineNumber="1882"><Highlight kind="normal">                                  ClusterLength, CurrentClusterBytes))</Highlight></CodeLine>
<Link id="l01883" /><CodeLine lineNumber="1883"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01884" /><CodeLine lineNumber="1884"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01885" /><CodeLine lineNumber="1885"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SUa = MemOpa.SU;</Highlight></CodeLine>
<Link id="l01886" /><CodeLine lineNumber="1886"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SUb = MemOpb.SU;</Highlight></CodeLine>
<Link id="l01887" /><CodeLine lineNumber="1887"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!ReorderWhileClustering &amp;&amp; SUa-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &gt; SUb-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a>)</Highlight></CodeLine>
<Link id="l01888" /><CodeLine lineNumber="1888"><Highlight kind="normal">      <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(SUa, SUb);</Highlight></CodeLine>
<Link id="l01889" /><CodeLine lineNumber="1889"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01890" /><CodeLine lineNumber="1890"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// FIXME: Is this check really required?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01891" /><CodeLine lineNumber="1891"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a86bfa4838cb7e42648615d27c94c8017">addEdge</a>(SUb, <a href="/docs/api/classes/llvm/sdep">SDep</a>(SUa, <a href="/docs/api/classes/llvm/sdep/#a551060cb0333d9d0cfdacd2576d817b9a04d28e273cd30fa75243240b15d08352">SDep::Cluster</a>)))</Highlight></CodeLine>
<Link id="l01892" /><CodeLine lineNumber="1892"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01893" /><CodeLine lineNumber="1893"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01894" /><CodeLine lineNumber="1894"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Cluster ld/st SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; SUa-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) - SU(&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01895" /><CodeLine lineNumber="1895"><Highlight kind="normal">                      &lt;&lt; SUb-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;)\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01896" /><CodeLine lineNumber="1896"><Highlight kind="normal">    ++NumClustered;</Highlight></CodeLine>
<Link id="l01897" /><CodeLine lineNumber="1897"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01898" /><CodeLine lineNumber="1898"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsLoad) &#123;</Highlight></CodeLine>
<Link id="l01899" /><CodeLine lineNumber="1899"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Copy successor edges from SUa to SUb. Interleaving computation</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01900" /><CodeLine lineNumber="1900"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// dependent on SUa can prevent load combining due to register reuse.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01901" /><CodeLine lineNumber="1901"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Predecessor edges do not need to be copied from SUb to SUa since</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01902" /><CodeLine lineNumber="1902"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// nearby loads should have effectively the same inputs.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01903" /><CodeLine lineNumber="1903"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdep">SDep</a> &amp;Succ : SUa-&gt;<a href="/docs/api/classes/llvm/sunit/#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>) &#123;</Highlight></CodeLine>
<Link id="l01904" /><CodeLine lineNumber="1904"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Succ.<a href="/docs/api/classes/llvm/sdep/#a03a2dc5f9f321a2ce28f5c641dfe5455">getSUnit</a>() == SUb)</Highlight></CodeLine>
<Link id="l01905" /><CodeLine lineNumber="1905"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01906" /><CodeLine lineNumber="1906"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  Copy Succ SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; Succ.<a href="/docs/api/classes/llvm/sdep/#a03a2dc5f9f321a2ce28f5c641dfe5455">getSUnit</a>()-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a></Highlight></CodeLine>
<Link id="l01907" /><CodeLine lineNumber="1907"><Highlight kind="normal">                          &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;)\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01908" /><CodeLine lineNumber="1908"><Highlight kind="normal">        DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a86bfa4838cb7e42648615d27c94c8017">addEdge</a>(Succ.<a href="/docs/api/classes/llvm/sdep/#a03a2dc5f9f321a2ce28f5c641dfe5455">getSUnit</a>(), <a href="/docs/api/classes/llvm/sdep">SDep</a>(SUb, <a href="/docs/api/classes/llvm/sdep/#a551060cb0333d9d0cfdacd2576d817b9a8afafe9e6f4c2fb9744242a6b369a0f1">SDep::Artificial</a>));</Highlight></CodeLine>
<Link id="l01909" /><CodeLine lineNumber="1909"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01910" /><CodeLine lineNumber="1910"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01911" /><CodeLine lineNumber="1911"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Copy predecessor edges from SUb to SUa to avoid the SUnits that</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01912" /><CodeLine lineNumber="1912"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// SUb dependent on scheduled in-between SUb and SUa. Successor edges</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01913" /><CodeLine lineNumber="1913"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// do not need to be copied from SUa to SUb since no one will depend</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01914" /><CodeLine lineNumber="1914"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// on stores.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01915" /><CodeLine lineNumber="1915"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Notice that, we don&#39;t need to care about the memory dependency as</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01916" /><CodeLine lineNumber="1916"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// we won&#39;t try to cluster them if they have any memory dependency.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01917" /><CodeLine lineNumber="1917"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdep">SDep</a> &amp;Pred : SUb-&gt;<a href="/docs/api/classes/llvm/sunit/#ae2b43854b542de66eec6475adc48f56c">Preds</a>) &#123;</Highlight></CodeLine>
<Link id="l01918" /><CodeLine lineNumber="1918"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Pred.getSUnit() == SUa)</Highlight></CodeLine>
<Link id="l01919" /><CodeLine lineNumber="1919"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01920" /><CodeLine lineNumber="1920"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  Copy Pred SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; Pred.getSUnit()-&gt;NodeNum</Highlight></CodeLine>
<Link id="l01921" /><CodeLine lineNumber="1921"><Highlight kind="normal">                          &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;)\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01922" /><CodeLine lineNumber="1922"><Highlight kind="normal">        DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a86bfa4838cb7e42648615d27c94c8017">addEdge</a>(SUa, <a href="/docs/api/classes/llvm/sdep">SDep</a>(Pred.getSUnit(), <a href="/docs/api/classes/llvm/sdep/#a551060cb0333d9d0cfdacd2576d817b9a8afafe9e6f4c2fb9744242a6b369a0f1">SDep::Artificial</a>));</Highlight></CodeLine>
<Link id="l01923" /><CodeLine lineNumber="1923"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01924" /><CodeLine lineNumber="1924"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01925" /><CodeLine lineNumber="1925"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01926" /><CodeLine lineNumber="1926"><Highlight kind="normal">    SUnit2ClusterInfo&#91;MemOpb.SU-&gt;NodeNum&#93; = &#123;ClusterLength,</Highlight></CodeLine>
<Link id="l01927" /><CodeLine lineNumber="1927"><Highlight kind="normal">                                             CurrentClusterBytes&#125;;</Highlight></CodeLine>
<Link id="l01928" /><CodeLine lineNumber="1928"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01929" /><CodeLine lineNumber="1929"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  Curr cluster length: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; ClusterLength</Highlight></CodeLine>
<Link id="l01930" /><CodeLine lineNumber="1930"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;, Curr cluster bytes: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; CurrentClusterBytes</Highlight></CodeLine>
<Link id="l01931" /><CodeLine lineNumber="1931"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01932" /><CodeLine lineNumber="1932"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01933" /><CodeLine lineNumber="1933"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01934" /><CodeLine lineNumber="1934"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01935" /><CodeLine lineNumber="1935" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a97b8f22f6c8ebb59fe454ba80d407baa"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a97b8f22f6c8ebb59fe454ba80d407baa">BaseMemOpClusterMutation::collectMemOpRecords</a>(</Highlight></CodeLine>
<Link id="l01936" /><CodeLine lineNumber="1936"><Highlight kind="normal">    std::vector&lt;SUnit&gt; &amp;SUnits, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;MemOpInfo&gt;</a> &amp;MemOpRecords) &#123;</Highlight></CodeLine>
<Link id="l01937" /><CodeLine lineNumber="1937"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;SU : SUnits) &#123;</Highlight></CodeLine>
<Link id="l01938" /><CodeLine lineNumber="1938"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((IsLoad &amp;&amp; !SU.getInstr()-&gt;mayLoad()) ||</Highlight></CodeLine>
<Link id="l01939" /><CodeLine lineNumber="1939"><Highlight kind="normal">        (!IsLoad &amp;&amp; !SU.getInstr()-&gt;mayStore()))</Highlight></CodeLine>
<Link id="l01940" /><CodeLine lineNumber="1940"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01941" /><CodeLine lineNumber="1941"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01942" /><CodeLine lineNumber="1942"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = &#42;SU.getInstr();</Highlight></CodeLine>
<Link id="l01943" /><CodeLine lineNumber="1943"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;const MachineOperand &#42;, 4&gt;</a> BaseOps;</Highlight></CodeLine>
<Link id="l01944" /><CodeLine lineNumber="1944"><Highlight kind="normal">    int64&#95;t <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</Highlight></CodeLine>
<Link id="l01945" /><CodeLine lineNumber="1945"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> OffsetIsScalable;</Highlight></CodeLine>
<Link id="l01946" /><CodeLine lineNumber="1946"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/locationsize">LocationSize</a> Width = 0;</Highlight></CodeLine>
<Link id="l01947" /><CodeLine lineNumber="1947"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TII-&gt;getMemOperandsWithOffsetWidth(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, BaseOps, <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>,</Highlight></CodeLine>
<Link id="l01948" /><CodeLine lineNumber="1948"><Highlight kind="normal">                                           OffsetIsScalable, Width, TRI)) &#123;</Highlight></CodeLine>
<Link id="l01949" /><CodeLine lineNumber="1949"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Width.<a href="/docs/api/classes/llvm/locationsize/#a0b0401973fc9567440717a5d32a8eb8d">hasValue</a>())</Highlight></CodeLine>
<Link id="l01950" /><CodeLine lineNumber="1950"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01951" /><CodeLine lineNumber="1951"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01952" /><CodeLine lineNumber="1952"><Highlight kind="normal">      MemOpRecords.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(</Highlight></CodeLine>
<Link id="l01953" /><CodeLine lineNumber="1953"><Highlight kind="normal">          MemOpInfo(&amp;SU, BaseOps, <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, OffsetIsScalable, Width));</Highlight></CodeLine>
<Link id="l01954" /><CodeLine lineNumber="1954"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01955" /><CodeLine lineNumber="1955"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Num BaseOps: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; BaseOps.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;, Offset: &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01956" /><CodeLine lineNumber="1956"><Highlight kind="normal">                        &lt;&lt; <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;, OffsetIsScalable: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; OffsetIsScalable</Highlight></CodeLine>
<Link id="l01957" /><CodeLine lineNumber="1957"><Highlight kind="normal">                        &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;, Width: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; Width &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01958" /><CodeLine lineNumber="1958"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01959" /><CodeLine lineNumber="1959"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#ifndef NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01960" /><CodeLine lineNumber="1960"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> : BaseOps)</Highlight></CodeLine>
<Link id="l01961" /><CodeLine lineNumber="1961"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l01962" /><CodeLine lineNumber="1962"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01963" /><CodeLine lineNumber="1963"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01964" /><CodeLine lineNumber="1964"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01965" /><CodeLine lineNumber="1965"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01966" /><CodeLine lineNumber="1966" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a456ce65cd7eb7154bc9a1460dcd3eb4a"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a456ce65cd7eb7154bc9a1460dcd3eb4a">BaseMemOpClusterMutation::groupMemOps</a>(</Highlight></CodeLine>
<Link id="l01967" /><CodeLine lineNumber="1967"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;MemOpInfo&gt;</a> MemOps, <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;DAG,</Highlight></CodeLine>
<Link id="l01968" /><CodeLine lineNumber="1968"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/densemap">DenseMap</a>&lt;</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal">, <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;MemOpInfo, 32&gt;</a>&gt; &amp;<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86instrfma3info-cpp/#ab138684de9096eb96683328900f78e48">Groups</a>) &#123;</Highlight></CodeLine>
<Link id="l01969" /><CodeLine lineNumber="1969"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> FastCluster =</Highlight></CodeLine>
<Link id="l01970" /><CodeLine lineNumber="1970"><Highlight kind="normal">      <a href="#a6d7874db6e333966be014090e66b309b">ForceFastCluster</a> ||</Highlight></CodeLine>
<Link id="l01971" /><CodeLine lineNumber="1971"><Highlight kind="normal">      MemOps.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() &#42; DAG-&gt;<a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>.size() / 1000 &gt; <a href="#a6dac5cd81207b66c491978be7b8fbcde">FastClusterThreshold</a>;</Highlight></CodeLine>
<Link id="l01972" /><CodeLine lineNumber="1972"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01973" /><CodeLine lineNumber="1973"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;<a href="/docs/api/structs/llvm/memop">MemOp</a> : MemOps) &#123;</Highlight></CodeLine>
<Link id="l01974" /><CodeLine lineNumber="1974"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ChainPredID = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>.size();</Highlight></CodeLine>
<Link id="l01975" /><CodeLine lineNumber="1975"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (FastCluster) &#123;</Highlight></CodeLine>
<Link id="l01976" /><CodeLine lineNumber="1976"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdep">SDep</a> &amp;Pred : <a href="/docs/api/structs/llvm/memop">MemOp</a>.SU-&gt;Preds) &#123;</Highlight></CodeLine>
<Link id="l01977" /><CodeLine lineNumber="1977"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// We only want to cluster the mem ops that have the same ctrl(non-data)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01978" /><CodeLine lineNumber="1978"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// pred so that they didn&#39;t have ctrl dependency for each other. But for</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01979" /><CodeLine lineNumber="1979"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// store instrs, we can still cluster them if the pred is load instr.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01980" /><CodeLine lineNumber="1980"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((Pred.isCtrl() &amp;&amp;</Highlight></CodeLine>
<Link id="l01981" /><CodeLine lineNumber="1981"><Highlight kind="normal">             (IsLoad ||</Highlight></CodeLine>
<Link id="l01982" /><CodeLine lineNumber="1982"><Highlight kind="normal">              (Pred.getSUnit() &amp;&amp; Pred.getSUnit()-&gt;getInstr()-&gt;mayStore()))) &amp;&amp;</Highlight></CodeLine>
<Link id="l01983" /><CodeLine lineNumber="1983"><Highlight kind="normal">            !Pred.isArtificial()) &#123;</Highlight></CodeLine>
<Link id="l01984" /><CodeLine lineNumber="1984"><Highlight kind="normal">          ChainPredID = Pred.getSUnit()-&gt;NodeNum;</Highlight></CodeLine>
<Link id="l01985" /><CodeLine lineNumber="1985"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01986" /><CodeLine lineNumber="1986"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01987" /><CodeLine lineNumber="1987"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01988" /><CodeLine lineNumber="1988"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01989" /><CodeLine lineNumber="1989"><Highlight kind="normal">      ChainPredID = 0;</Highlight></CodeLine>
<Link id="l01990" /><CodeLine lineNumber="1990"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01991" /><CodeLine lineNumber="1991"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86instrfma3info-cpp/#ab138684de9096eb96683328900f78e48">Groups</a>&#91;ChainPredID&#93;.push&#95;back(<a href="/docs/api/structs/llvm/memop">MemOp</a>);</Highlight></CodeLine>
<Link id="l01992" /><CodeLine lineNumber="1992"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01993" /><CodeLine lineNumber="1993"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> FastCluster;</Highlight></CodeLine>
<Link id="l01994" /><CodeLine lineNumber="1994"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01995" /><CodeLine lineNumber="1995"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01996" /><CodeLine lineNumber="1996"><Highlight kind="comment">/// Callback from DAG postProcessing to create cluster edges for loads/stores.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01997" /><CodeLine lineNumber="1997" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a0c7442486454c55b94469e8b7c8ab468"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a0c7442486454c55b94469e8b7c8ab468">BaseMemOpClusterMutation::apply</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;DAG) &#123;</Highlight></CodeLine>
<Link id="l01998" /><CodeLine lineNumber="1998"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Collect all the clusterable loads/stores</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01999" /><CodeLine lineNumber="1999"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;MemOpInfo, 32&gt;</a> MemOpRecords;</Highlight></CodeLine>
<Link id="l02000" /><CodeLine lineNumber="2000"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a97b8f22f6c8ebb59fe454ba80d407baa">collectMemOpRecords</a>(DAG-&gt;<a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>, MemOpRecords);</Highlight></CodeLine>
<Link id="l02001" /><CodeLine lineNumber="2001"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02002" /><CodeLine lineNumber="2002"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (MemOpRecords.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() &lt; 2)</Highlight></CodeLine>
<Link id="l02003" /><CodeLine lineNumber="2003"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02004" /><CodeLine lineNumber="2004"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02005" /><CodeLine lineNumber="2005"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Put the loads/stores without dependency into the same group with some</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02006" /><CodeLine lineNumber="2006"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// heuristic if the DAG is too complex to avoid compiling time blow up.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02007" /><CodeLine lineNumber="2007"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Notice that, some fusion pair could be lost with this.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02008" /><CodeLine lineNumber="2008"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;unsigned, SmallVector&lt;MemOpInfo, 32&gt;</a>&gt; <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86instrfma3info-cpp/#ab138684de9096eb96683328900f78e48">Groups</a>;</Highlight></CodeLine>
<Link id="l02009" /><CodeLine lineNumber="2009"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> FastCluster = <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a456ce65cd7eb7154bc9a1460dcd3eb4a">groupMemOps</a>(MemOpRecords, DAG, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86instrfma3info-cpp/#ab138684de9096eb96683328900f78e48">Groups</a>);</Highlight></CodeLine>
<Link id="l02010" /><CodeLine lineNumber="2010"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02011" /><CodeLine lineNumber="2011"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;Group : <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86instrfma3info-cpp/#ab138684de9096eb96683328900f78e48">Groups</a>) &#123;</Highlight></CodeLine>
<Link id="l02012" /><CodeLine lineNumber="2012"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Sorting the loads/stores, so that, we can stop the cluster as early as</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02013" /><CodeLine lineNumber="2013"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// possible.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02014" /><CodeLine lineNumber="2014"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a>(Group.second);</Highlight></CodeLine>
<Link id="l02015" /><CodeLine lineNumber="2015"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02016" /><CodeLine lineNumber="2016"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Trying to cluster all the neighboring loads/stores.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02017" /><CodeLine lineNumber="2017"><Highlight kind="normal">    <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/basememopclustermutation/#a54fbbf29fc459bb243a1a43fb2ab9c1a">clusterNeighboringMemOps</a>(Group.second, FastCluster, DAG);</Highlight></CodeLine>
<Link id="l02018" /><CodeLine lineNumber="2018"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02019" /><CodeLine lineNumber="2019"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02020" /><CodeLine lineNumber="2020"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02021" /><CodeLine lineNumber="2021"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02022" /><CodeLine lineNumber="2022"><Highlight kind="normal"></Highlight><Highlight kind="comment">// CopyConstrain - DAG post-processing to encourage copy elimination.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02023" /><CodeLine lineNumber="2023"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02024" /><CodeLine lineNumber="2024"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02025" /><CodeLine lineNumber="2025"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l02026" /><CodeLine lineNumber="2026"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l02027" /><CodeLine lineNumber="2027"><Highlight kind="comment">/// Post-process the DAG to create weak edges from all uses of a copy to</Highlight></CodeLine>
<Link id="l02028" /><CodeLine lineNumber="2028"><Highlight kind="comment">/// the one use that defines the copy&#39;s source vreg, most likely an induction</Highlight></CodeLine>
<Link id="l02029" /><CodeLine lineNumber="2029"><Highlight kind="comment">/// variable increment.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02030" /><CodeLine lineNumber="2030" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain"><Highlight kind="normal"></Highlight><Highlight kind="keyword">class </Highlight><Highlight kind="normal"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#a42e9bb90b21ba8622406f3337df0c467">CopyConstrain</a> : </Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmutation">ScheduleDAGMutation</a> &#123;</Highlight></CodeLine>
<Link id="l02031" /><CodeLine lineNumber="2031"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Transient state.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02032" /><CodeLine lineNumber="2032"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/slotindex">SlotIndex</a> RegionBeginIdx;</Highlight></CodeLine>
<Link id="l02033" /><CodeLine lineNumber="2033"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02034" /><CodeLine lineNumber="2034"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// RegionEndIdx is the slot index of the last non-debug instruction in the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02035" /><CodeLine lineNumber="2035"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// scheduling region. So we may have RegionBeginIdx == RegionEndIdx.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02036" /><CodeLine lineNumber="2036"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/slotindex">SlotIndex</a> RegionEndIdx;</Highlight></CodeLine>
<Link id="l02037" /><CodeLine lineNumber="2037"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02038" /><CodeLine lineNumber="2038"><Highlight kind="normal"></Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l02039" /><CodeLine lineNumber="2039" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#a42e9bb90b21ba8622406f3337df0c467"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#a42e9bb90b21ba8622406f3337df0c467">CopyConstrain</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;) &#123;&#125;</Highlight></CodeLine>
<Link id="l02040" /><CodeLine lineNumber="2040"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02041" /><CodeLine lineNumber="2041"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> apply(<a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;DAGInstrs) </Highlight><Highlight kind="keyword">override</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02042" /><CodeLine lineNumber="2042"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02043" /><CodeLine lineNumber="2043"><Highlight kind="normal"></Highlight><Highlight kind="keyword">protected</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l02044" /><CodeLine lineNumber="2044"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> constrainLocalCopy(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;CopySU, <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a> &#42;DAG);</Highlight></CodeLine>
<Link id="l02045" /><CodeLine lineNumber="2045"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l02046" /><CodeLine lineNumber="2046"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02047" /><CodeLine lineNumber="2047"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// end anonymous namespace</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02048" /><CodeLine lineNumber="2048"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02049" /><CodeLine lineNumber="2049"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal">llvm &#123;</Highlight></CodeLine>
<Link id="l02050" /><CodeLine lineNumber="2050"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02051" /><CodeLine lineNumber="2051"><Highlight kind="normal">std::unique&#95;ptr&lt;ScheduleDAGMutation&gt;</Highlight></CodeLine>
<Link id="l02052" /><CodeLine lineNumber="2052" lineLink="/docs/api/namespaces/llvm/#ae82d653cf862c571ba16050a19426458"><Highlight kind="normal"><a href="/docs/api/namespaces/llvm/#ae82d653cf862c571ba16050a19426458">createCopyConstrainDAGMutation</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetinstrinfo">TargetInstrInfo</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>,</Highlight></CodeLine>
<Link id="l02053" /><CodeLine lineNumber="2053"><Highlight kind="normal">                               </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>) &#123;</Highlight></CodeLine>
<Link id="l02054" /><CodeLine lineNumber="2054"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::make&#95;unique&lt;CopyConstrain&gt;(<a href="/docs/api/files/lib/lib/target/lib/target/hexagon/hexagoncopytocombine-cpp/#a1d40004718218dbdf06b496766299101">TII</a>, <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>);</Highlight></CodeLine>
<Link id="l02055" /><CodeLine lineNumber="2055"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02056" /><CodeLine lineNumber="2056"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02057" /><CodeLine lineNumber="2057"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// end namespace llvm</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02058" /><CodeLine lineNumber="2058"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l02059" /><CodeLine lineNumber="2059"><Highlight kind="comment">/// constrainLocalCopy handles two possibilities:</Highlight></CodeLine>
<Link id="l02060" /><CodeLine lineNumber="2060"><Highlight kind="comment">/// 1) Local src:</Highlight></CodeLine>
<Link id="l02061" /><CodeLine lineNumber="2061"><Highlight kind="comment">/// I0:     = dst</Highlight></CodeLine>
<Link id="l02062" /><CodeLine lineNumber="2062"><Highlight kind="comment">/// I1: src = ...</Highlight></CodeLine>
<Link id="l02063" /><CodeLine lineNumber="2063"><Highlight kind="comment">/// I2:     = dst</Highlight></CodeLine>
<Link id="l02064" /><CodeLine lineNumber="2064"><Highlight kind="comment">/// I3: dst = src (copy)</Highlight></CodeLine>
<Link id="l02065" /><CodeLine lineNumber="2065"><Highlight kind="comment">/// (create pred-&gt;succ edges I0-&gt;I1, I2-&gt;I1)</Highlight></CodeLine>
<Link id="l02066" /><CodeLine lineNumber="2066"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l02067" /><CodeLine lineNumber="2067"><Highlight kind="comment">/// 2) Local copy:</Highlight></CodeLine>
<Link id="l02068" /><CodeLine lineNumber="2068"><Highlight kind="comment">/// I0: dst = src (copy)</Highlight></CodeLine>
<Link id="l02069" /><CodeLine lineNumber="2069"><Highlight kind="comment">/// I1:     = dst</Highlight></CodeLine>
<Link id="l02070" /><CodeLine lineNumber="2070"><Highlight kind="comment">/// I2: src = ...</Highlight></CodeLine>
<Link id="l02071" /><CodeLine lineNumber="2071"><Highlight kind="comment">/// I3:     = dst</Highlight></CodeLine>
<Link id="l02072" /><CodeLine lineNumber="2072"><Highlight kind="comment">/// (create pred-&gt;succ edges I1-&gt;I2, I3-&gt;I2)</Highlight></CodeLine>
<Link id="l02073" /><CodeLine lineNumber="2073"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l02074" /><CodeLine lineNumber="2074"><Highlight kind="comment">/// Although the MachineScheduler is currently constrained to single blocks,</Highlight></CodeLine>
<Link id="l02075" /><CodeLine lineNumber="2075"><Highlight kind="comment">/// this algorithm should handle extended blocks. An EBB is a set of</Highlight></CodeLine>
<Link id="l02076" /><CodeLine lineNumber="2076"><Highlight kind="comment">/// contiguously numbered blocks such that the previous block in the EBB is</Highlight></CodeLine>
<Link id="l02077" /><CodeLine lineNumber="2077"><Highlight kind="comment">/// always the single predecessor.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02078" /><CodeLine lineNumber="2078" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#aee8fb987217bee89c0f2059168e834ec"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#aee8fb987217bee89c0f2059168e834ec">CopyConstrain::constrainLocalCopy</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;CopySU, <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a> &#42;DAG) &#123;</Highlight></CodeLine>
<Link id="l02079" /><CodeLine lineNumber="2079"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/liveintervals">LiveIntervals</a> &#42;LIS = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a7dcf5173867549aff2a8cdcc70dd2800">getLIS</a>();</Highlight></CodeLine>
<Link id="l02080" /><CodeLine lineNumber="2080"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;Copy = CopySU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</Highlight></CodeLine>
<Link id="l02081" /><CodeLine lineNumber="2081"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02082" /><CodeLine lineNumber="2082"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check for pure vreg copies.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02083" /><CodeLine lineNumber="2083"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;<a href="/docs/api/classes/llvm/srcop">SrcOp</a> = Copy-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l02084" /><CodeLine lineNumber="2084"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/register">Register</a> SrcReg = <a href="/docs/api/classes/llvm/srcop">SrcOp</a>.<a href="/docs/api/classes/llvm/srcop/#ae229785d0c8a8ce25d34be18fe150a54">getReg</a>();</Highlight></CodeLine>
<Link id="l02085" /><CodeLine lineNumber="2085"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SrcReg.<a href="/docs/api/classes/llvm/register/#ab203bbcbc320180b1da9e9a92ee0c784">isVirtual</a>() || !<a href="/docs/api/classes/llvm/srcop">SrcOp</a>.readsReg())</Highlight></CodeLine>
<Link id="l02086" /><CodeLine lineNumber="2086"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02087" /><CodeLine lineNumber="2087"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02088" /><CodeLine lineNumber="2088"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;<a href="/docs/api/classes/llvm/dstop">DstOp</a> = Copy-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l02089" /><CodeLine lineNumber="2089"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/register">Register</a> DstReg = <a href="/docs/api/classes/llvm/dstop">DstOp</a>.<a href="/docs/api/classes/llvm/dstop/#ad5f891a5d9822c7aab1b8bb0190a522f">getReg</a>();</Highlight></CodeLine>
<Link id="l02090" /><CodeLine lineNumber="2090"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DstReg.<a href="/docs/api/classes/llvm/register/#ab203bbcbc320180b1da9e9a92ee0c784">isVirtual</a>() || <a href="/docs/api/classes/llvm/dstop">DstOp</a>.isDead())</Highlight></CodeLine>
<Link id="l02091" /><CodeLine lineNumber="2091"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02092" /><CodeLine lineNumber="2092"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02093" /><CodeLine lineNumber="2093"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check if either the dest or source is local. If it&#39;s live across a back</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02094" /><CodeLine lineNumber="2094"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// edge, it&#39;s not local. Note that if both vregs are live across the back</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02095" /><CodeLine lineNumber="2095"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// edge, we cannot successfully contrain the copy without cyclic scheduling.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02096" /><CodeLine lineNumber="2096"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If both the copy&#39;s source and dest are local live intervals, then we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02097" /><CodeLine lineNumber="2097"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// should treat the dest as the global for the purpose of adding</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02098" /><CodeLine lineNumber="2098"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// constraints. This adds edges from source&#39;s other uses to the copy.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02099" /><CodeLine lineNumber="2099"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LocalReg = SrcReg;</Highlight></CodeLine>
<Link id="l02100" /><CodeLine lineNumber="2100"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> GlobalReg = DstReg;</Highlight></CodeLine>
<Link id="l02101" /><CodeLine lineNumber="2101"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/liveinterval">LiveInterval</a> &#42;LocalLI = &amp;LIS-&gt;<a href="/docs/api/classes/llvm/liveintervals/#a8208eacaf02c9742c8ed7f09ec0837f3">getInterval</a>(LocalReg);</Highlight></CodeLine>
<Link id="l02102" /><CodeLine lineNumber="2102"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!LocalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#ae17e7d305505cddb57d8093ee934c387">isLocal</a>(RegionBeginIdx, RegionEndIdx)) &#123;</Highlight></CodeLine>
<Link id="l02103" /><CodeLine lineNumber="2103"><Highlight kind="normal">    LocalReg = DstReg;</Highlight></CodeLine>
<Link id="l02104" /><CodeLine lineNumber="2104"><Highlight kind="normal">    GlobalReg = SrcReg;</Highlight></CodeLine>
<Link id="l02105" /><CodeLine lineNumber="2105"><Highlight kind="normal">    LocalLI = &amp;LIS-&gt;<a href="/docs/api/classes/llvm/liveintervals/#a8208eacaf02c9742c8ed7f09ec0837f3">getInterval</a>(LocalReg);</Highlight></CodeLine>
<Link id="l02106" /><CodeLine lineNumber="2106"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!LocalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#ae17e7d305505cddb57d8093ee934c387">isLocal</a>(RegionBeginIdx, RegionEndIdx))</Highlight></CodeLine>
<Link id="l02107" /><CodeLine lineNumber="2107"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02108" /><CodeLine lineNumber="2108"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02109" /><CodeLine lineNumber="2109"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/liveinterval">LiveInterval</a> &#42;GlobalLI = &amp;LIS-&gt;<a href="/docs/api/classes/llvm/liveintervals/#a8208eacaf02c9742c8ed7f09ec0837f3">getInterval</a>(GlobalReg);</Highlight></CodeLine>
<Link id="l02110" /><CodeLine lineNumber="2110"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02111" /><CodeLine lineNumber="2111"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Find the global segment after the start of the local LI.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02112" /><CodeLine lineNumber="2112"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/liverange/#a143c1fcb6066cb301f828ec4c18d79f4">LiveInterval::iterator</a> GlobalSegment = GlobalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#afeb00b9049a2391c990df15692caef63">find</a>(LocalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#a9b4b2c1bb443279588bd6582ad6a86b2">beginIndex</a>());</Highlight></CodeLine>
<Link id="l02113" /><CodeLine lineNumber="2113"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If GlobalLI does not overlap LocalLI-&gt;start, then a copy directly feeds a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02114" /><CodeLine lineNumber="2114"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// local live range. We could create edges from other global uses to the local</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02115" /><CodeLine lineNumber="2115"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// start, but the coalescer should have already eliminated these cases, so</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02116" /><CodeLine lineNumber="2116"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// don&#39;t bother dealing with it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02117" /><CodeLine lineNumber="2117"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (GlobalSegment == GlobalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#a757fd6afba0f531db70e78e057d147c6">end</a>())</Highlight></CodeLine>
<Link id="l02118" /><CodeLine lineNumber="2118"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02119" /><CodeLine lineNumber="2119"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02120" /><CodeLine lineNumber="2120"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If GlobalSegment is killed at the LocalLI-&gt;start, the call to find()</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02121" /><CodeLine lineNumber="2121"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// returned the next global segment. But if GlobalSegment overlaps with</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02122" /><CodeLine lineNumber="2122"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// LocalLI-&gt;start, then advance to the next segment. If a hole in GlobalLI</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02123" /><CodeLine lineNumber="2123"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// exists in LocalLI&#39;s vicinity, GlobalSegment will be the end of the hole.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02124" /><CodeLine lineNumber="2124"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (GlobalSegment-&gt;contains(LocalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#a9b4b2c1bb443279588bd6582ad6a86b2">beginIndex</a>()))</Highlight></CodeLine>
<Link id="l02125" /><CodeLine lineNumber="2125"><Highlight kind="normal">    ++GlobalSegment;</Highlight></CodeLine>
<Link id="l02126" /><CodeLine lineNumber="2126"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02127" /><CodeLine lineNumber="2127"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (GlobalSegment == GlobalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#a757fd6afba0f531db70e78e057d147c6">end</a>())</Highlight></CodeLine>
<Link id="l02128" /><CodeLine lineNumber="2128"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02129" /><CodeLine lineNumber="2129"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02130" /><CodeLine lineNumber="2130"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check if GlobalLI contains a hole in the vicinity of LocalLI.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02131" /><CodeLine lineNumber="2131"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (GlobalSegment != GlobalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#a9a5e7c523f12f9f164b786769de1ca47">begin</a>()) &#123;</Highlight></CodeLine>
<Link id="l02132" /><CodeLine lineNumber="2132"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Two address defs have no hole.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02133" /><CodeLine lineNumber="2133"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/slotindex/#a0b73244049319d841fd11a238f35b5d1">SlotIndex::isSameInstr</a>(std::prev(GlobalSegment)-&gt;end,</Highlight></CodeLine>
<Link id="l02134" /><CodeLine lineNumber="2134"><Highlight kind="normal">                               GlobalSegment-&gt;start)) &#123;</Highlight></CodeLine>
<Link id="l02135" /><CodeLine lineNumber="2135"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02136" /><CodeLine lineNumber="2136"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02137" /><CodeLine lineNumber="2137"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the prior global segment may be defined by the same two-address</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02138" /><CodeLine lineNumber="2138"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// instruction that also defines LocalLI, then can&#39;t make a hole here.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02139" /><CodeLine lineNumber="2139"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/slotindex/#a0b73244049319d841fd11a238f35b5d1">SlotIndex::isSameInstr</a>(std::prev(GlobalSegment)-&gt;start,</Highlight></CodeLine>
<Link id="l02140" /><CodeLine lineNumber="2140"><Highlight kind="normal">                               LocalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#a9b4b2c1bb443279588bd6582ad6a86b2">beginIndex</a>())) &#123;</Highlight></CodeLine>
<Link id="l02141" /><CodeLine lineNumber="2141"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02142" /><CodeLine lineNumber="2142"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02143" /><CodeLine lineNumber="2143"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If GlobalLI has a prior segment, it must be live into the EBB. Otherwise</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02144" /><CodeLine lineNumber="2144"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// it would be a disconnected component in the live range.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02145" /><CodeLine lineNumber="2145"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(std::prev(GlobalSegment)-&gt;start &lt; LocalLI-&gt;beginIndex() &amp;&amp;</Highlight></CodeLine>
<Link id="l02146" /><CodeLine lineNumber="2146"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;Disconnected LRG within the scheduling region.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02147" /><CodeLine lineNumber="2147"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02148" /><CodeLine lineNumber="2148"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;GlobalDef = LIS-&gt;<a href="/docs/api/classes/llvm/liveintervals/#a1882fe2a570964e4c6abb0eac322beab">getInstructionFromIndex</a>(GlobalSegment-&gt;start);</Highlight></CodeLine>
<Link id="l02149" /><CodeLine lineNumber="2149"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!GlobalDef)</Highlight></CodeLine>
<Link id="l02150" /><CodeLine lineNumber="2150"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02151" /><CodeLine lineNumber="2151"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02152" /><CodeLine lineNumber="2152"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;GlobalSU = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(GlobalDef);</Highlight></CodeLine>
<Link id="l02153" /><CodeLine lineNumber="2153"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!GlobalSU)</Highlight></CodeLine>
<Link id="l02154" /><CodeLine lineNumber="2154"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02155" /><CodeLine lineNumber="2155"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02156" /><CodeLine lineNumber="2156"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// GlobalDef is the bottom of the GlobalLI hole. Open the hole by</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02157" /><CodeLine lineNumber="2157"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// constraining the uses of the last local def to precede GlobalDef.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02158" /><CodeLine lineNumber="2158"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;SUnit&#42;,8&gt;</a> LocalUses;</Highlight></CodeLine>
<Link id="l02159" /><CodeLine lineNumber="2159"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/vninfo">VNInfo</a> &#42;LastLocalVN = LocalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#a7e1ec6260b229b2f5913405b758bc146">getVNInfoBefore</a>(LocalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#aa1bc5510e870a77ebe055b1524d9fd26">endIndex</a>());</Highlight></CodeLine>
<Link id="l02160" /><CodeLine lineNumber="2160"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;LastLocalDef = LIS-&gt;<a href="/docs/api/classes/llvm/liveintervals/#a1882fe2a570964e4c6abb0eac322beab">getInstructionFromIndex</a>(LastLocalVN-&gt;<a href="/docs/api/classes/llvm/vninfo/#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>);</Highlight></CodeLine>
<Link id="l02161" /><CodeLine lineNumber="2161"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;LastLocalSU = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(LastLocalDef);</Highlight></CodeLine>
<Link id="l02162" /><CodeLine lineNumber="2162"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdep">SDep</a> &amp;Succ : LastLocalSU-&gt;<a href="/docs/api/classes/llvm/sunit/#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>) &#123;</Highlight></CodeLine>
<Link id="l02163" /><CodeLine lineNumber="2163"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Succ.<a href="/docs/api/classes/llvm/sdep/#a055c65558a3e0f7d48f1ed3dde061199">getKind</a>() != <a href="/docs/api/classes/llvm/sdep/#a07333f8ba53e0454b7ec6365860c0732af91df2221290eaa1a368403ffad49a26">SDep::Data</a> || Succ.<a href="/docs/api/classes/llvm/sdep/#a8b51361656ac436c2c02a20e6196cff1">getReg</a>() != LocalReg)</Highlight></CodeLine>
<Link id="l02164" /><CodeLine lineNumber="2164"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02165" /><CodeLine lineNumber="2165"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Succ.<a href="/docs/api/classes/llvm/sdep/#a03a2dc5f9f321a2ce28f5c641dfe5455">getSUnit</a>() == GlobalSU)</Highlight></CodeLine>
<Link id="l02166" /><CodeLine lineNumber="2166"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02167" /><CodeLine lineNumber="2167"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ac384df17605ecce542a6d2567c7f1ee0">canAddEdge</a>(GlobalSU, Succ.<a href="/docs/api/classes/llvm/sdep/#a03a2dc5f9f321a2ce28f5c641dfe5455">getSUnit</a>()))</Highlight></CodeLine>
<Link id="l02168" /><CodeLine lineNumber="2168"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02169" /><CodeLine lineNumber="2169"><Highlight kind="normal">    LocalUses.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Succ.<a href="/docs/api/classes/llvm/sdep/#a03a2dc5f9f321a2ce28f5c641dfe5455">getSUnit</a>());</Highlight></CodeLine>
<Link id="l02170" /><CodeLine lineNumber="2170"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02171" /><CodeLine lineNumber="2171"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Open the top of the GlobalLI hole by constraining any earlier global uses</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02172" /><CodeLine lineNumber="2172"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// to precede the start of LocalLI.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02173" /><CodeLine lineNumber="2173"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;SUnit&#42;,8&gt;</a> GlobalUses;</Highlight></CodeLine>
<Link id="l02174" /><CodeLine lineNumber="2174"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;FirstLocalDef =</Highlight></CodeLine>
<Link id="l02175" /><CodeLine lineNumber="2175"><Highlight kind="normal">    LIS-&gt;<a href="/docs/api/classes/llvm/liveintervals/#a1882fe2a570964e4c6abb0eac322beab">getInstructionFromIndex</a>(LocalLI-&gt;<a href="/docs/api/classes/llvm/liverange/#a9b4b2c1bb443279588bd6582ad6a86b2">beginIndex</a>());</Highlight></CodeLine>
<Link id="l02176" /><CodeLine lineNumber="2176"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;FirstLocalSU = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(FirstLocalDef);</Highlight></CodeLine>
<Link id="l02177" /><CodeLine lineNumber="2177"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdep">SDep</a> &amp;Pred : GlobalSU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae2b43854b542de66eec6475adc48f56c">Preds</a>) &#123;</Highlight></CodeLine>
<Link id="l02178" /><CodeLine lineNumber="2178"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Pred.getKind() != <a href="/docs/api/classes/llvm/sdep/#a07333f8ba53e0454b7ec6365860c0732abe9561936346ab5c5e22fe544994b06e">SDep::Anti</a> || Pred.getReg() != GlobalReg)</Highlight></CodeLine>
<Link id="l02179" /><CodeLine lineNumber="2179"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02180" /><CodeLine lineNumber="2180"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Pred.getSUnit() == FirstLocalSU)</Highlight></CodeLine>
<Link id="l02181" /><CodeLine lineNumber="2181"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02182" /><CodeLine lineNumber="2182"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ac384df17605ecce542a6d2567c7f1ee0">canAddEdge</a>(FirstLocalSU, Pred.getSUnit()))</Highlight></CodeLine>
<Link id="l02183" /><CodeLine lineNumber="2183"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02184" /><CodeLine lineNumber="2184"><Highlight kind="normal">    GlobalUses.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Pred.getSUnit());</Highlight></CodeLine>
<Link id="l02185" /><CodeLine lineNumber="2185"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02186" /><CodeLine lineNumber="2186"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Constraining copy SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; CopySU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;)\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02187" /><CodeLine lineNumber="2187"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Add the weak edges.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02188" /><CodeLine lineNumber="2188"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;LU : LocalUses) &#123;</Highlight></CodeLine>
<Link id="l02189" /><CodeLine lineNumber="2189"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  Local use SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; LU-&gt;NodeNum &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) -&gt; SU(&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02190" /><CodeLine lineNumber="2190"><Highlight kind="normal">                      &lt;&lt; GlobalSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;)\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02191" /><CodeLine lineNumber="2191"><Highlight kind="normal">    DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a86bfa4838cb7e42648615d27c94c8017">addEdge</a>(GlobalSU, <a href="/docs/api/classes/llvm/sdep">SDep</a>(LU, <a href="/docs/api/classes/llvm/sdep/#a551060cb0333d9d0cfdacd2576d817b9ac698747d5c996ab4f760518f55be1346">SDep::Weak</a>));</Highlight></CodeLine>
<Link id="l02192" /><CodeLine lineNumber="2192"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02193" /><CodeLine lineNumber="2193"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;GU : GlobalUses) &#123;</Highlight></CodeLine>
<Link id="l02194" /><CodeLine lineNumber="2194"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  Global use SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; GU-&gt;NodeNum &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) -&gt; SU(&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02195" /><CodeLine lineNumber="2195"><Highlight kind="normal">                      &lt;&lt; FirstLocalSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;)\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02196" /><CodeLine lineNumber="2196"><Highlight kind="normal">    DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a86bfa4838cb7e42648615d27c94c8017">addEdge</a>(FirstLocalSU, <a href="/docs/api/classes/llvm/sdep">SDep</a>(GU, <a href="/docs/api/classes/llvm/sdep/#a551060cb0333d9d0cfdacd2576d817b9ac698747d5c996ab4f760518f55be1346">SDep::Weak</a>));</Highlight></CodeLine>
<Link id="l02197" /><CodeLine lineNumber="2197"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02198" /><CodeLine lineNumber="2198"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02199" /><CodeLine lineNumber="2199"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l02200" /><CodeLine lineNumber="2200"><Highlight kind="comment">/// Callback from DAG postProcessing to create weak edges to encourage</Highlight></CodeLine>
<Link id="l02201" /><CodeLine lineNumber="2201"><Highlight kind="comment">/// copy elimination.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02202" /><CodeLine lineNumber="2202" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#af6b0c8c54226e0aafa107e5e92c813a2"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#af6b0c8c54226e0aafa107e5e92c813a2">CopyConstrain::apply</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;DAGInstrs) &#123;</Highlight></CodeLine>
<Link id="l02203" /><CodeLine lineNumber="2203"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;DAG = </Highlight><Highlight kind="keyword">static&#95;cast&lt;</Highlight><Highlight kind="normal"><a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a>&#42;</Highlight><Highlight kind="keyword">&gt;</Highlight><Highlight kind="normal">(DAGInstrs);</Highlight></CodeLine>
<Link id="l02204" /><CodeLine lineNumber="2204"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a78c0f3feb8a81ca338f843494cff564e">hasVRegLiveness</a>() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Expect VRegs with LiveIntervals&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02205" /><CodeLine lineNumber="2205"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02206" /><CodeLine lineNumber="2206"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> FirstPos = <a href="#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>(), DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a21805259f54dab47c2b3da009216996a">end</a>());</Highlight></CodeLine>
<Link id="l02207" /><CodeLine lineNumber="2207"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (FirstPos == DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a21805259f54dab47c2b3da009216996a">end</a>())</Highlight></CodeLine>
<Link id="l02208" /><CodeLine lineNumber="2208"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02209" /><CodeLine lineNumber="2209"><Highlight kind="normal">  RegionBeginIdx = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a7dcf5173867549aff2a8cdcc70dd2800">getLIS</a>()-&gt;<a href="/docs/api/classes/llvm/liveintervals/#a6f3043b29023d270fc4bc5062dff7cee">getInstructionIndex</a>(&#42;FirstPos);</Highlight></CodeLine>
<Link id="l02210" /><CodeLine lineNumber="2210"><Highlight kind="normal">  RegionEndIdx = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a7dcf5173867549aff2a8cdcc70dd2800">getLIS</a>()-&gt;<a href="/docs/api/classes/llvm/liveintervals/#a6f3043b29023d270fc4bc5062dff7cee">getInstructionIndex</a>(</Highlight></CodeLine>
<Link id="l02211" /><CodeLine lineNumber="2211"><Highlight kind="normal">      &#42;<a href="#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a21805259f54dab47c2b3da009216996a">end</a>(), DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#ab50b64c518a7455daf3e0bc87aee5514">begin</a>()));</Highlight></CodeLine>
<Link id="l02212" /><CodeLine lineNumber="2212"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02213" /><CodeLine lineNumber="2213"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &amp;SU : DAG-&gt;<a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>) &#123;</Highlight></CodeLine>
<Link id="l02214" /><CodeLine lineNumber="2214"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SU.<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>()-&gt;<a href="/docs/api/classes/llvm/machineinstr/#a1912d4fbc40c61a12b1f770ad54dfd74">isCopy</a>())</Highlight></CodeLine>
<Link id="l02215" /><CodeLine lineNumber="2215"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02216" /><CodeLine lineNumber="2216"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02217" /><CodeLine lineNumber="2217"><Highlight kind="normal">    <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/copyconstrain/#aee8fb987217bee89c0f2059168e834ec">constrainLocalCopy</a>(&amp;SU, </Highlight><Highlight kind="keyword">static&#95;cast&lt;</Highlight><Highlight kind="normal"><a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>&#42;</Highlight><Highlight kind="keyword">&gt;</Highlight><Highlight kind="normal">(DAG));</Highlight></CodeLine>
<Link id="l02218" /><CodeLine lineNumber="2218"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02219" /><CodeLine lineNumber="2219"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02220" /><CodeLine lineNumber="2220"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02221" /><CodeLine lineNumber="2221"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02222" /><CodeLine lineNumber="2222"><Highlight kind="normal"></Highlight><Highlight kind="comment">// MachineSchedStrategy helpers used by GenericScheduler, GenericPostScheduler</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02223" /><CodeLine lineNumber="2223"><Highlight kind="normal"></Highlight><Highlight kind="comment">// and possibly other custom schedulers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02224" /><CodeLine lineNumber="2224"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02225" /><CodeLine lineNumber="2225"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02226" /><CodeLine lineNumber="2226" lineLink="#a2876d288bd148637a0e8d79ce3f0f3fb"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="#a2876d288bd148637a0e8d79ce3f0f3fb">InvalidCycle</a> = ~0U;</Highlight></CodeLine>
<Link id="l02227" /><CodeLine lineNumber="2227"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02228" /><CodeLine lineNumber="2228" lineLink="/docs/api/classes/llvm/schedboundary/#a8ec89d1b58602018ae4e1f98f980501e"><Highlight kind="normal"><a href="/docs/api/classes/llvm/schedboundary/#a8ec89d1b58602018ae4e1f98f980501e">SchedBoundary::~SchedBoundary</a>() &#123; </Highlight><Highlight kind="keyword">delete</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>; &#125;</Highlight></CodeLine>
<Link id="l02229" /><CodeLine lineNumber="2229"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l02230" /><CodeLine lineNumber="2230"><Highlight kind="comment">/// Given a Count of resource usage and a Latency value, return true if a</Highlight></CodeLine>
<Link id="l02231" /><CodeLine lineNumber="2231"><Highlight kind="comment">/// SchedBoundary becomes resource limited.</Highlight></CodeLine>
<Link id="l02232" /><CodeLine lineNumber="2232"><Highlight kind="comment">/// If we are checking after scheduling a node, we should return true when</Highlight></CodeLine>
<Link id="l02233" /><CodeLine lineNumber="2233"><Highlight kind="comment">/// we just reach the resource limit.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02234" /><CodeLine lineNumber="2234" lineLink="#a77e51ffc94a77ff8e4778e59a02e7b67"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="#a77e51ffc94a77ff8e4778e59a02e7b67">checkResourceLimit</a>(</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LFactor, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a845e08be4b0320d66901a66b0c0e9509">Count</a>,</Highlight></CodeLine>
<Link id="l02235" /><CodeLine lineNumber="2235"><Highlight kind="normal">                               </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a>, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AfterSchedNode) &#123;</Highlight></CodeLine>
<Link id="l02236" /><CodeLine lineNumber="2236"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> ResCntFactor = (int)(<a href="/docs/api/namespaces/llvm/#a845e08be4b0320d66901a66b0c0e9509">Count</a> - (<a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a> &#42; LFactor));</Highlight></CodeLine>
<Link id="l02237" /><CodeLine lineNumber="2237"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AfterSchedNode)</Highlight></CodeLine>
<Link id="l02238" /><CodeLine lineNumber="2238"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> ResCntFactor &gt;= (int)LFactor;</Highlight></CodeLine>
<Link id="l02239" /><CodeLine lineNumber="2239"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02240" /><CodeLine lineNumber="2240"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> ResCntFactor &gt; (int)LFactor;</Highlight></CodeLine>
<Link id="l02241" /><CodeLine lineNumber="2241"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02242" /><CodeLine lineNumber="2242"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02243" /><CodeLine lineNumber="2243" lineLink="/docs/api/classes/llvm/schedboundary/#ad4863d625621382105fd66cd82810588"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#ad4863d625621382105fd66cd82810588">SchedBoundary::reset</a>() &#123;</Highlight></CodeLine>
<Link id="l02244" /><CodeLine lineNumber="2244"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// A new HazardRec is created for each DAG and owned by SchedBoundary.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02245" /><CodeLine lineNumber="2245"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Destroying and reconstructing it is very expensive though. So keep</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02246" /><CodeLine lineNumber="2246"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// invalid, placeholder HazardRecs.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02247" /><CodeLine lineNumber="2247"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a> &amp;&amp; <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;isEnabled()) &#123;</Highlight></CodeLine>
<Link id="l02248" /><CodeLine lineNumber="2248"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">delete</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>;</Highlight></CodeLine>
<Link id="l02249" /><CodeLine lineNumber="2249"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a> = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02250" /><CodeLine lineNumber="2250"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02251" /><CodeLine lineNumber="2251"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.clear();</Highlight></CodeLine>
<Link id="l02252" /><CodeLine lineNumber="2252"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.clear();</Highlight></CodeLine>
<Link id="l02253" /><CodeLine lineNumber="2253"><Highlight kind="normal">  CheckPending = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02254" /><CodeLine lineNumber="2254"><Highlight kind="normal">  CurrCycle = 0;</Highlight></CodeLine>
<Link id="l02255" /><CodeLine lineNumber="2255"><Highlight kind="normal">  CurrMOps = 0;</Highlight></CodeLine>
<Link id="l02256" /><CodeLine lineNumber="2256"><Highlight kind="normal">  MinReadyCycle = std::numeric&#95;limits&lt;unsigned&gt;::max();</Highlight></CodeLine>
<Link id="l02257" /><CodeLine lineNumber="2257"><Highlight kind="normal">  ExpectedLatency = 0;</Highlight></CodeLine>
<Link id="l02258" /><CodeLine lineNumber="2258"><Highlight kind="normal">  DependentLatency = 0;</Highlight></CodeLine>
<Link id="l02259" /><CodeLine lineNumber="2259"><Highlight kind="normal">  RetiredMOps = 0;</Highlight></CodeLine>
<Link id="l02260" /><CodeLine lineNumber="2260"><Highlight kind="normal">  MaxExecutedResCount = 0;</Highlight></CodeLine>
<Link id="l02261" /><CodeLine lineNumber="2261"><Highlight kind="normal">  ZoneCritResIdx = 0;</Highlight></CodeLine>
<Link id="l02262" /><CodeLine lineNumber="2262"><Highlight kind="normal">  IsResourceLimited = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02263" /><CodeLine lineNumber="2263"><Highlight kind="normal">  ReservedCycles.clear();</Highlight></CodeLine>
<Link id="l02264" /><CodeLine lineNumber="2264"><Highlight kind="normal">  ReservedResourceSegments.clear();</Highlight></CodeLine>
<Link id="l02265" /><CodeLine lineNumber="2265"><Highlight kind="normal">  ReservedCyclesIndex.clear();</Highlight></CodeLine>
<Link id="l02266" /><CodeLine lineNumber="2266"><Highlight kind="normal">  ResourceGroupSubUnitMasks.clear();</Highlight></CodeLine>
<Link id="l02267" /><CodeLine lineNumber="2267"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#if LLVM&#95;ENABLE&#95;ABI&#95;BREAKING&#95;CHECKS</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02268" /><CodeLine lineNumber="2268"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Track the maximum number of stall cycles that could arise either from the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02269" /><CodeLine lineNumber="2269"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// latency of a DAG edge or the number of cycles that a processor resource is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02270" /><CodeLine lineNumber="2270"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// reserved (SchedBoundary::ReservedCycles).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02271" /><CodeLine lineNumber="2271"><Highlight kind="normal">  MaxObservedStall = 0;</Highlight></CodeLine>
<Link id="l02272" /><CodeLine lineNumber="2272"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02273" /><CodeLine lineNumber="2273"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Reserve a zero-count for invalid CritResIdx.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02274" /><CodeLine lineNumber="2274"><Highlight kind="normal">  ExecutedResCounts.resize(1);</Highlight></CodeLine>
<Link id="l02275" /><CodeLine lineNumber="2275"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!ExecutedResCounts&#91;0&#93; &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;nonzero count for bad resource&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02276" /><CodeLine lineNumber="2276"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02277" /><CodeLine lineNumber="2277"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02278" /><CodeLine lineNumber="2278" lineLink="/docs/api/structs/llvm/schedremainder/#a55cad625d59b0f4452d893b4a25c66b6"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/schedremainder/#a55cad625d59b0f4452d893b4a25c66b6">SchedRemainder::</a></Highlight></CodeLine>
<Link id="l02279" /><CodeLine lineNumber="2279"><Highlight kind="normal"><a href="/docs/api/structs/llvm/schedremainder/#a55cad625d59b0f4452d893b4a25c66b6">init</a>(<a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;DAG, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetschedmodel">TargetSchedModel</a> &#42;SchedModel) &#123;</Highlight></CodeLine>
<Link id="l02280" /><CodeLine lineNumber="2280"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/schedremainder/#ad27287120e709785dac7c6e4da555953">reset</a>();</Highlight></CodeLine>
<Link id="l02281" /><CodeLine lineNumber="2281"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SchedModel-&gt;<a href="/docs/api/classes/llvm/targetschedmodel/#a572a0c9d17306d9414106ad1cf4c8052">hasInstrSchedModel</a>())</Highlight></CodeLine>
<Link id="l02282" /><CodeLine lineNumber="2282"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02283" /><CodeLine lineNumber="2283"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/schedremainder/#a7bab07d89945b679f337765882d48362">RemainingCounts</a>.resize(SchedModel-&gt;<a href="/docs/api/classes/llvm/targetschedmodel/#aefe560ffcce905bc34e2d46becb54e84">getNumProcResourceKinds</a>());</Highlight></CodeLine>
<Link id="l02284" /><CodeLine lineNumber="2284"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &amp;SU : DAG-&gt;<a href="/docs/api/classes/llvm/scheduledag/#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>) &#123;</Highlight></CodeLine>
<Link id="l02285" /><CodeLine lineNumber="2285"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a4bf5573660c55924d68b517a0e9b4554">getSchedClass</a>(&amp;SU);</Highlight></CodeLine>
<Link id="l02286" /><CodeLine lineNumber="2286"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/schedremainder/#a69f55541ec46d86d2fdef78b950f4fef">RemIssueCount</a> += SchedModel-&gt;<a href="/docs/api/classes/llvm/targetschedmodel/#adc6870d8a702ca4f480785afd7a1eba7">getNumMicroOps</a>(SU.<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>(), SC)</Highlight></CodeLine>
<Link id="l02287" /><CodeLine lineNumber="2287"><Highlight kind="normal">      &#42; SchedModel-&gt;<a href="/docs/api/classes/llvm/targetschedmodel/#a3803fd752ed113c37d71580a50888f26">getMicroOpFactor</a>();</Highlight></CodeLine>
<Link id="l02288" /><CodeLine lineNumber="2288"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetschedmodel/#a7b653a507e8307775b33e01655d3b8d8">TargetSchedModel::ProcResIter</a></Highlight></CodeLine>
<Link id="l02289" /><CodeLine lineNumber="2289"><Highlight kind="normal">           PI = SchedModel-&gt;<a href="/docs/api/classes/llvm/targetschedmodel/#af7c94f0b04c1a466ee77ca749cd8dc50">getWriteProcResBegin</a>(SC),</Highlight></CodeLine>
<Link id="l02290" /><CodeLine lineNumber="2290"><Highlight kind="normal">           PE = SchedModel-&gt;<a href="/docs/api/classes/llvm/targetschedmodel/#a3e53e3e37d8a810d38ffb83268103b23">getWriteProcResEnd</a>(SC); PI != PE; ++PI) &#123;</Highlight></CodeLine>
<Link id="l02291" /><CodeLine lineNumber="2291"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> PIdx = PI-&gt;ProcResourceIdx;</Highlight></CodeLine>
<Link id="l02292" /><CodeLine lineNumber="2292"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Factor = SchedModel-&gt;<a href="/docs/api/classes/llvm/targetschedmodel/#a9c30a0cd9c2311a92add146b8def5eea">getResourceFactor</a>(PIdx);</Highlight></CodeLine>
<Link id="l02293" /><CodeLine lineNumber="2293"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PI-&gt;ReleaseAtCycle &gt;= PI-&gt;AcquireAtCycle);</Highlight></CodeLine>
<Link id="l02294" /><CodeLine lineNumber="2294"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/schedremainder/#a7bab07d89945b679f337765882d48362">RemainingCounts</a>&#91;PIdx&#93; +=</Highlight></CodeLine>
<Link id="l02295" /><CodeLine lineNumber="2295"><Highlight kind="normal">          (Factor &#42; (PI-&gt;ReleaseAtCycle - PI-&gt;AcquireAtCycle));</Highlight></CodeLine>
<Link id="l02296" /><CodeLine lineNumber="2296"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02297" /><CodeLine lineNumber="2297"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02298" /><CodeLine lineNumber="2298"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02299" /><CodeLine lineNumber="2299"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02300" /><CodeLine lineNumber="2300" lineLink="/docs/api/classes/llvm/schedboundary/#aab0971160b7ebc9ee2581f651a3b7f01"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#aab0971160b7ebc9ee2581f651a3b7f01">SchedBoundary::</a></Highlight></CodeLine>
<Link id="l02301" /><CodeLine lineNumber="2301"><Highlight kind="normal"><a href="/docs/api/classes/llvm/schedboundary/#aab0971160b7ebc9ee2581f651a3b7f01">init</a>(<a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;dag, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetschedmodel">TargetSchedModel</a> &#42;smodel, <a href="/docs/api/structs/llvm/schedremainder">SchedRemainder</a> &#42;<a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#ac7752c64c2d688b882808f06328ad521">rem</a>) &#123;</Highlight></CodeLine>
<Link id="l02302" /><CodeLine lineNumber="2302"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/schedboundary/#ad4863d625621382105fd66cd82810588">reset</a>();</Highlight></CodeLine>
<Link id="l02303" /><CodeLine lineNumber="2303"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/schedboundary/#a4f3e434b23939cec7a3c61b45071a017">DAG</a> = dag;</Highlight></CodeLine>
<Link id="l02304" /><CodeLine lineNumber="2304"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a> = smodel;</Highlight></CodeLine>
<Link id="l02305" /><CodeLine lineNumber="2305"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/schedboundary/#a64b3464e46fb663d1c409fd21a0fa97b">Rem</a> = <a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#ac7752c64c2d688b882808f06328ad521">rem</a>;</Highlight></CodeLine>
<Link id="l02306" /><CodeLine lineNumber="2306"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;hasInstrSchedModel()) &#123;</Highlight></CodeLine>
<Link id="l02307" /><CodeLine lineNumber="2307"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ResourceCount = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getNumProcResourceKinds();</Highlight></CodeLine>
<Link id="l02308" /><CodeLine lineNumber="2308"><Highlight kind="normal">    ReservedCyclesIndex.resize(ResourceCount);</Highlight></CodeLine>
<Link id="l02309" /><CodeLine lineNumber="2309"><Highlight kind="normal">    ExecutedResCounts.resize(ResourceCount);</Highlight></CodeLine>
<Link id="l02310" /><CodeLine lineNumber="2310"><Highlight kind="normal">    ResourceGroupSubUnitMasks.resize(ResourceCount, <a href="/docs/api/classes/llvm/apint">APInt</a>(ResourceCount, 0));</Highlight></CodeLine>
<Link id="l02311" /><CodeLine lineNumber="2311"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumUnits = 0;</Highlight></CodeLine>
<Link id="l02312" /><CodeLine lineNumber="2312"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02313" /><CodeLine lineNumber="2313"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i &lt; ResourceCount; ++i) &#123;</Highlight></CodeLine>
<Link id="l02314" /><CodeLine lineNumber="2314"><Highlight kind="normal">      ReservedCyclesIndex&#91;i&#93; = NumUnits;</Highlight></CodeLine>
<Link id="l02315" /><CodeLine lineNumber="2315"><Highlight kind="normal">      NumUnits += <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getProcResource(i)-&gt;NumUnits;</Highlight></CodeLine>
<Link id="l02316" /><CodeLine lineNumber="2316"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#aa00ca9cf2d191f3ae5e93a8cd3ddeb60">isUnbufferedGroup</a>(i)) &#123;</Highlight></CodeLine>
<Link id="l02317" /><CodeLine lineNumber="2317"><Highlight kind="normal">        </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> SubUnits = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getProcResource(i)-&gt;SubUnitsIdxBegin;</Highlight></CodeLine>
<Link id="l02318" /><CodeLine lineNumber="2318"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> U = 0, UE = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getProcResource(i)-&gt;NumUnits;</Highlight></CodeLine>
<Link id="l02319" /><CodeLine lineNumber="2319"><Highlight kind="normal">             U != UE; ++U)</Highlight></CodeLine>
<Link id="l02320" /><CodeLine lineNumber="2320"><Highlight kind="normal">          ResourceGroupSubUnitMasks&#91;i&#93;.setBit(SubUnits&#91;U&#93;);</Highlight></CodeLine>
<Link id="l02321" /><CodeLine lineNumber="2321"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02322" /><CodeLine lineNumber="2322"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02323" /><CodeLine lineNumber="2323"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02324" /><CodeLine lineNumber="2324"><Highlight kind="normal">    ReservedCycles.resize(NumUnits, <a href="#a2876d288bd148637a0e8d79ce3f0f3fb">InvalidCycle</a>);</Highlight></CodeLine>
<Link id="l02325" /><CodeLine lineNumber="2325"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02326" /><CodeLine lineNumber="2326"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02327" /><CodeLine lineNumber="2327"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l02328" /><CodeLine lineNumber="2328"><Highlight kind="comment">/// Compute the stall cycles based on this SUnit&#39;s ready time. Heuristics treat</Highlight></CodeLine>
<Link id="l02329" /><CodeLine lineNumber="2329"><Highlight kind="comment">/// these &quot;soft stalls&quot; differently than the hard stall cycles based on CPU</Highlight></CodeLine>
<Link id="l02330" /><CodeLine lineNumber="2330"><Highlight kind="comment">/// resources and computed by checkHazard(). A fully in-order model</Highlight></CodeLine>
<Link id="l02331" /><CodeLine lineNumber="2331"><Highlight kind="comment">/// (MicroOpBufferSize==0) will not make use of this since instructions are not</Highlight></CodeLine>
<Link id="l02332" /><CodeLine lineNumber="2332"><Highlight kind="comment">/// available for scheduling until they are ready. However, a weaker in-order</Highlight></CodeLine>
<Link id="l02333" /><CodeLine lineNumber="2333"><Highlight kind="comment">/// model may use this for heuristics. For example, if a processor has in-order</Highlight></CodeLine>
<Link id="l02334" /><CodeLine lineNumber="2334"><Highlight kind="comment">/// behavior when reading certain resources, this may come into play.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02335" /><CodeLine lineNumber="2335" lineLink="/docs/api/classes/llvm/schedboundary/#a4a674627365b72b17a9b2e0a99d40ce1"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#a4a674627365b72b17a9b2e0a99d40ce1">SchedBoundary::getLatencyStallCycles</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU) &#123;</Highlight></CodeLine>
<Link id="l02336" /><CodeLine lineNumber="2336"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a4ac4d36cb59a4bbf5d93513dad0ff0e9">isUnbuffered</a>)</Highlight></CodeLine>
<Link id="l02337" /><CodeLine lineNumber="2337"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 0;</Highlight></CodeLine>
<Link id="l02338" /><CodeLine lineNumber="2338"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02339" /><CodeLine lineNumber="2339"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ReadyCycle = (<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() ? SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> : SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>);</Highlight></CodeLine>
<Link id="l02340" /><CodeLine lineNumber="2340"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ReadyCycle &gt; CurrCycle)</Highlight></CodeLine>
<Link id="l02341" /><CodeLine lineNumber="2341"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> ReadyCycle - CurrCycle;</Highlight></CodeLine>
<Link id="l02342" /><CodeLine lineNumber="2342"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 0;</Highlight></CodeLine>
<Link id="l02343" /><CodeLine lineNumber="2343"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02344" /><CodeLine lineNumber="2344"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l02345" /><CodeLine lineNumber="2345"><Highlight kind="comment">/// Compute the next cycle at which the given processor resource unit</Highlight></CodeLine>
<Link id="l02346" /><CodeLine lineNumber="2346"><Highlight kind="comment">/// can be scheduled.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02347" /><CodeLine lineNumber="2347" lineLink="/docs/api/classes/llvm/schedboundary/#a0b30387e76d2b5a34988ed566a3e5188"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#a0b30387e76d2b5a34988ed566a3e5188">SchedBoundary::getNextResourceCycleByInstance</a>(</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> InstanceIdx,</Highlight></CodeLine>
<Link id="l02348" /><CodeLine lineNumber="2348"><Highlight kind="normal">                                                       </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ReleaseAtCycle,</Highlight></CodeLine>
<Link id="l02349" /><CodeLine lineNumber="2349"><Highlight kind="normal">                                                       </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> AcquireAtCycle) &#123;</Highlight></CodeLine>
<Link id="l02350" /><CodeLine lineNumber="2350"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a> &amp;&amp; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;enableIntervals()) &#123;</Highlight></CodeLine>
<Link id="l02351" /><CodeLine lineNumber="2351"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>())</Highlight></CodeLine>
<Link id="l02352" /><CodeLine lineNumber="2352"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> ReservedResourceSegments&#91;InstanceIdx&#93;.getFirstAvailableAtFromTop(</Highlight></CodeLine>
<Link id="l02353" /><CodeLine lineNumber="2353"><Highlight kind="normal">          CurrCycle, AcquireAtCycle, ReleaseAtCycle);</Highlight></CodeLine>
<Link id="l02354" /><CodeLine lineNumber="2354"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02355" /><CodeLine lineNumber="2355"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> ReservedResourceSegments&#91;InstanceIdx&#93;.getFirstAvailableAtFromBottom(</Highlight></CodeLine>
<Link id="l02356" /><CodeLine lineNumber="2356"><Highlight kind="normal">        CurrCycle, AcquireAtCycle, ReleaseAtCycle);</Highlight></CodeLine>
<Link id="l02357" /><CodeLine lineNumber="2357"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02358" /><CodeLine lineNumber="2358"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02359" /><CodeLine lineNumber="2359"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NextUnreserved = ReservedCycles&#91;InstanceIdx&#93;;</Highlight></CodeLine>
<Link id="l02360" /><CodeLine lineNumber="2360"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If this resource has never been used, always return cycle zero.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02361" /><CodeLine lineNumber="2361"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NextUnreserved == <a href="#a2876d288bd148637a0e8d79ce3f0f3fb">InvalidCycle</a>)</Highlight></CodeLine>
<Link id="l02362" /><CodeLine lineNumber="2362"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> CurrCycle;</Highlight></CodeLine>
<Link id="l02363" /><CodeLine lineNumber="2363"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For bottom-up scheduling add the cycles needed for the current operation.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02364" /><CodeLine lineNumber="2364"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>())</Highlight></CodeLine>
<Link id="l02365" /><CodeLine lineNumber="2365"><Highlight kind="normal">    NextUnreserved = std::max(CurrCycle, NextUnreserved + ReleaseAtCycle);</Highlight></CodeLine>
<Link id="l02366" /><CodeLine lineNumber="2366"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> NextUnreserved;</Highlight></CodeLine>
<Link id="l02367" /><CodeLine lineNumber="2367"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02368" /><CodeLine lineNumber="2368"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l02369" /><CodeLine lineNumber="2369"><Highlight kind="comment">/// Compute the next cycle at which the given processor resource can be</Highlight></CodeLine>
<Link id="l02370" /><CodeLine lineNumber="2370"><Highlight kind="comment">/// scheduled.  Returns the next cycle and the index of the processor resource</Highlight></CodeLine>
<Link id="l02371" /><CodeLine lineNumber="2371"><Highlight kind="comment">/// instance in the reserved cycles vector.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02372" /><CodeLine lineNumber="2372"><Highlight kind="normal">std::pair&lt;unsigned, unsigned&gt;</Highlight></CodeLine>
<Link id="l02373" /><CodeLine lineNumber="2373" lineLink="/docs/api/classes/llvm/schedboundary/#adfca67c9b359b7ad02ab497632bd6b74"><Highlight kind="normal"><a href="/docs/api/classes/llvm/schedboundary/#adfca67c9b359b7ad02ab497632bd6b74">SchedBoundary::getNextResourceCycle</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> PIdx,</Highlight></CodeLine>
<Link id="l02374" /><CodeLine lineNumber="2374"><Highlight kind="normal">                                    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ReleaseAtCycle,</Highlight></CodeLine>
<Link id="l02375" /><CodeLine lineNumber="2375"><Highlight kind="normal">                                    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> AcquireAtCycle) &#123;</Highlight></CodeLine>
<Link id="l02376" /><CodeLine lineNumber="2376"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#afaad94654d336ce094254a1c694ee4e5">MischedDetailResourceBooking</a>) &#123;</Highlight></CodeLine>
<Link id="l02377" /><CodeLine lineNumber="2377"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  Resource booking (@&quot;</Highlight><Highlight kind="normal"> &lt;&lt; CurrCycle &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c): \\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02378" /><CodeLine lineNumber="2378"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/schedboundary/#a53bfc0f964240b77c4569bea523c2b39">dumpReservedCycles</a>());</Highlight></CodeLine>
<Link id="l02379" /><CodeLine lineNumber="2379"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  getNextResourceCycle (@&quot;</Highlight><Highlight kind="normal"> &lt;&lt; CurrCycle &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c): \\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02380" /><CodeLine lineNumber="2380"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02381" /><CodeLine lineNumber="2381"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> MinNextUnreserved = <a href="#a2876d288bd148637a0e8d79ce3f0f3fb">InvalidCycle</a>;</Highlight></CodeLine>
<Link id="l02382" /><CodeLine lineNumber="2382"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> InstanceIdx = 0;</Highlight></CodeLine>
<Link id="l02383" /><CodeLine lineNumber="2383"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> StartIndex = ReservedCyclesIndex&#91;PIdx&#93;;</Highlight></CodeLine>
<Link id="l02384" /><CodeLine lineNumber="2384"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumberOfInstances = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getProcResource(PIdx)-&gt;NumUnits;</Highlight></CodeLine>
<Link id="l02385" /><CodeLine lineNumber="2385"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumberOfInstances &gt; 0 &amp;&amp;</Highlight></CodeLine>
<Link id="l02386" /><CodeLine lineNumber="2386"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Cannot have zero instances of a ProcResource&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02387" /><CodeLine lineNumber="2387"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02388" /><CodeLine lineNumber="2388"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#aa00ca9cf2d191f3ae5e93a8cd3ddeb60">isUnbufferedGroup</a>(PIdx)) &#123;</Highlight></CodeLine>
<Link id="l02389" /><CodeLine lineNumber="2389"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If any subunits are used by the instruction, report that the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02390" /><CodeLine lineNumber="2390"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// subunits of the resource group are available at the first cycle</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02391" /><CodeLine lineNumber="2391"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// in which the unit is available, effectively removing the group</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02392" /><CodeLine lineNumber="2392"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// record from hazarding and basing the hazarding decisions on the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02393" /><CodeLine lineNumber="2393"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// subunit records. Otherwise, choose the first available instance</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02394" /><CodeLine lineNumber="2394"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// from among the subunits.  Specifications which assign cycles to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02395" /><CodeLine lineNumber="2395"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// both the subunits and the group or which use an unbuffered</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02396" /><CodeLine lineNumber="2396"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// group with buffered subunits will appear to schedule</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02397" /><CodeLine lineNumber="2397"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// strangely. In the first case, the additional cycles for the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02398" /><CodeLine lineNumber="2398"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// group will be ignored.  In the second, the group will be</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02399" /><CodeLine lineNumber="2399"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// ignored entirely.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02400" /><CodeLine lineNumber="2400"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcwriteprocresentry">MCWriteProcResEntry</a> &amp;PE :</Highlight></CodeLine>
<Link id="l02401" /><CodeLine lineNumber="2401"><Highlight kind="normal">         <a href="/docs/api/namespaces/llvm/#a341215803e83773a3e97860dc291f121">make&#95;range</a>(<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getWriteProcResBegin(SC),</Highlight></CodeLine>
<Link id="l02402" /><CodeLine lineNumber="2402"><Highlight kind="normal">                    <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getWriteProcResEnd(SC)))</Highlight></CodeLine>
<Link id="l02403" /><CodeLine lineNumber="2403"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ResourceGroupSubUnitMasks&#91;PIdx&#93;&#91;PE.ProcResourceIdx&#93;)</Highlight></CodeLine>
<Link id="l02404" /><CodeLine lineNumber="2404"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::make&#95;pair(<a href="/docs/api/classes/llvm/schedboundary/#a0b30387e76d2b5a34988ed566a3e5188">getNextResourceCycleByInstance</a>(</Highlight></CodeLine>
<Link id="l02405" /><CodeLine lineNumber="2405"><Highlight kind="normal">                                  StartIndex, ReleaseAtCycle, AcquireAtCycle),</Highlight></CodeLine>
<Link id="l02406" /><CodeLine lineNumber="2406"><Highlight kind="normal">                              StartIndex);</Highlight></CodeLine>
<Link id="l02407" /><CodeLine lineNumber="2407"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02408" /><CodeLine lineNumber="2408"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> SubUnits = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getProcResource(PIdx)-&gt;SubUnitsIdxBegin;</Highlight></CodeLine>
<Link id="l02409" /><CodeLine lineNumber="2409"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, End = NumberOfInstances; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; End; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</Highlight></CodeLine>
<Link id="l02410" /><CodeLine lineNumber="2410"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NextUnreserved, NextInstanceIdx;</Highlight></CodeLine>
<Link id="l02411" /><CodeLine lineNumber="2411"><Highlight kind="normal">      std::tie(NextUnreserved, NextInstanceIdx) =</Highlight></CodeLine>
<Link id="l02412" /><CodeLine lineNumber="2412"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/schedboundary/#adfca67c9b359b7ad02ab497632bd6b74">getNextResourceCycle</a>(SC, SubUnits&#91;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>&#93;, ReleaseAtCycle, AcquireAtCycle);</Highlight></CodeLine>
<Link id="l02413" /><CodeLine lineNumber="2413"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (MinNextUnreserved &gt; NextUnreserved) &#123;</Highlight></CodeLine>
<Link id="l02414" /><CodeLine lineNumber="2414"><Highlight kind="normal">        InstanceIdx = NextInstanceIdx;</Highlight></CodeLine>
<Link id="l02415" /><CodeLine lineNumber="2415"><Highlight kind="normal">        MinNextUnreserved = NextUnreserved;</Highlight></CodeLine>
<Link id="l02416" /><CodeLine lineNumber="2416"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02417" /><CodeLine lineNumber="2417"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02418" /><CodeLine lineNumber="2418"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::make&#95;pair(MinNextUnreserved, InstanceIdx);</Highlight></CodeLine>
<Link id="l02419" /><CodeLine lineNumber="2419"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02420" /><CodeLine lineNumber="2420"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02421" /><CodeLine lineNumber="2421"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = StartIndex, End = StartIndex + NumberOfInstances; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; End;</Highlight></CodeLine>
<Link id="l02422" /><CodeLine lineNumber="2422"><Highlight kind="normal">       ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</Highlight></CodeLine>
<Link id="l02423" /><CodeLine lineNumber="2423"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NextUnreserved =</Highlight></CodeLine>
<Link id="l02424" /><CodeLine lineNumber="2424"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/schedboundary/#a0b30387e76d2b5a34988ed566a3e5188">getNextResourceCycleByInstance</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ReleaseAtCycle, AcquireAtCycle);</Highlight></CodeLine>
<Link id="l02425" /><CodeLine lineNumber="2425"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#afaad94654d336ce094254a1c694ee4e5">MischedDetailResourceBooking</a>)</Highlight></CodeLine>
<Link id="l02426" /><CodeLine lineNumber="2426"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;    Instance &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> - StartIndex &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; available @&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02427" /><CodeLine lineNumber="2427"><Highlight kind="normal">                        &lt;&lt; NextUnreserved &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02428" /><CodeLine lineNumber="2428"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (MinNextUnreserved &gt; NextUnreserved) &#123;</Highlight></CodeLine>
<Link id="l02429" /><CodeLine lineNumber="2429"><Highlight kind="normal">      InstanceIdx = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</Highlight></CodeLine>
<Link id="l02430" /><CodeLine lineNumber="2430"><Highlight kind="normal">      MinNextUnreserved = NextUnreserved;</Highlight></CodeLine>
<Link id="l02431" /><CodeLine lineNumber="2431"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02432" /><CodeLine lineNumber="2432"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02433" /><CodeLine lineNumber="2433"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#afaad94654d336ce094254a1c694ee4e5">MischedDetailResourceBooking</a>)</Highlight></CodeLine>
<Link id="l02434" /><CodeLine lineNumber="2434"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;    selecting &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceName(PIdx)</Highlight></CodeLine>
<Link id="l02435" /><CodeLine lineNumber="2435"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;&#91;&quot;</Highlight><Highlight kind="normal"> &lt;&lt; InstanceIdx - StartIndex &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;&#93;&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02436" /><CodeLine lineNumber="2436"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; available @&quot;</Highlight><Highlight kind="normal"> &lt;&lt; MinNextUnreserved &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02437" /><CodeLine lineNumber="2437"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02438" /><CodeLine lineNumber="2438"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::make&#95;pair(MinNextUnreserved, InstanceIdx);</Highlight></CodeLine>
<Link id="l02439" /><CodeLine lineNumber="2439"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02440" /><CodeLine lineNumber="2440"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l02441" /><CodeLine lineNumber="2441"><Highlight kind="comment">/// Does this SU have a hazard within the current instruction group.</Highlight></CodeLine>
<Link id="l02442" /><CodeLine lineNumber="2442"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l02443" /><CodeLine lineNumber="2443"><Highlight kind="comment">/// The scheduler supports two modes of hazard recognition. The first is the</Highlight></CodeLine>
<Link id="l02444" /><CodeLine lineNumber="2444"><Highlight kind="comment">/// ScheduleHazardRecognizer API. It is a fully general hazard recognizer that</Highlight></CodeLine>
<Link id="l02445" /><CodeLine lineNumber="2445"><Highlight kind="comment">/// supports highly complicated in-order reservation tables</Highlight></CodeLine>
<Link id="l02446" /><CodeLine lineNumber="2446"><Highlight kind="comment">/// (ScoreboardHazardRecognizer) and arbitrary target-specific logic.</Highlight></CodeLine>
<Link id="l02447" /><CodeLine lineNumber="2447"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l02448" /><CodeLine lineNumber="2448"><Highlight kind="comment">/// The second is a streamlined mechanism that checks for hazards based on</Highlight></CodeLine>
<Link id="l02449" /><CodeLine lineNumber="2449"><Highlight kind="comment">/// simple counters that the scheduler itself maintains. It explicitly checks</Highlight></CodeLine>
<Link id="l02450" /><CodeLine lineNumber="2450"><Highlight kind="comment">/// for instruction dispatch limitations, including the number of micro-ops that</Highlight></CodeLine>
<Link id="l02451" /><CodeLine lineNumber="2451"><Highlight kind="comment">/// can dispatch per cycle.</Highlight></CodeLine>
<Link id="l02452" /><CodeLine lineNumber="2452"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l02453" /><CodeLine lineNumber="2453"><Highlight kind="comment">/// TODO: Also check whether the SU must start a new group.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02454" /><CodeLine lineNumber="2454" lineLink="/docs/api/classes/llvm/schedboundary/#adb8558f52662b83fe081b34b1f31fb20"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#adb8558f52662b83fe081b34b1f31fb20">SchedBoundary::checkHazard</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU) &#123;</Highlight></CodeLine>
<Link id="l02455" /><CodeLine lineNumber="2455"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;isEnabled()</Highlight></CodeLine>
<Link id="l02456" /><CodeLine lineNumber="2456"><Highlight kind="normal">      &amp;&amp; <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;getHazardType(SU) != <a href="/docs/api/classes/llvm/schedulehazardrecognizer/#a9bec0e329b12bbc503d08db497d43267a4e42ac50bfd060349e49904842121cf1">ScheduleHazardRecognizer::NoHazard</a>) &#123;</Highlight></CodeLine>
<Link id="l02457" /><CodeLine lineNumber="2457"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02458" /><CodeLine lineNumber="2458"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02459" /><CodeLine lineNumber="2459"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02460" /><CodeLine lineNumber="2460"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> uops = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getNumMicroOps(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>());</Highlight></CodeLine>
<Link id="l02461" /><CodeLine lineNumber="2461"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((CurrMOps &gt; 0) &amp;&amp; (CurrMOps + uops &gt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getIssueWidth())) &#123;</Highlight></CodeLine>
<Link id="l02462" /><CodeLine lineNumber="2462"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) uops=&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02463" /><CodeLine lineNumber="2463"><Highlight kind="normal">                      &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getNumMicroOps(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>()) &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02464" /><CodeLine lineNumber="2464"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02465" /><CodeLine lineNumber="2465"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02466" /><CodeLine lineNumber="2466"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02467" /><CodeLine lineNumber="2467"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CurrMOps &gt; 0 &amp;&amp;</Highlight></CodeLine>
<Link id="l02468" /><CodeLine lineNumber="2468"><Highlight kind="normal">      ((<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() &amp;&amp; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;mustBeginGroup(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>())) ||</Highlight></CodeLine>
<Link id="l02469" /><CodeLine lineNumber="2469"><Highlight kind="normal">       (!<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() &amp;&amp; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;mustEndGroup(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>())))) &#123;</Highlight></CodeLine>
<Link id="l02470" /><CodeLine lineNumber="2470"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  hazard: SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) must &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02471" /><CodeLine lineNumber="2471"><Highlight kind="normal">                      &lt;&lt; (<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() ? </Highlight><Highlight kind="stringliteral">&quot;begin&quot;</Highlight><Highlight kind="normal"> : </Highlight><Highlight kind="stringliteral">&quot;end&quot;</Highlight><Highlight kind="normal">) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; group\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02472" /><CodeLine lineNumber="2472"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02473" /><CodeLine lineNumber="2473"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02474" /><CodeLine lineNumber="2474"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02475" /><CodeLine lineNumber="2475"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;hasInstrSchedModel() &amp;&amp; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ab76e4a602699ddc57019efaba62a92b6">hasReservedResource</a>) &#123;</Highlight></CodeLine>
<Link id="l02476" /><CodeLine lineNumber="2476"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC = <a href="/docs/api/classes/llvm/schedboundary/#a4f3e434b23939cec7a3c61b45071a017">DAG</a>-&gt;getSchedClass(SU);</Highlight></CodeLine>
<Link id="l02477" /><CodeLine lineNumber="2477"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcwriteprocresentry">MCWriteProcResEntry</a> &amp;PE :</Highlight></CodeLine>
<Link id="l02478" /><CodeLine lineNumber="2478"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#a341215803e83773a3e97860dc291f121">make&#95;range</a>(<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getWriteProcResBegin(SC),</Highlight></CodeLine>
<Link id="l02479" /><CodeLine lineNumber="2479"><Highlight kind="normal">                     <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getWriteProcResEnd(SC))) &#123;</Highlight></CodeLine>
<Link id="l02480" /><CodeLine lineNumber="2480"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ResIdx = PE.ProcResourceIdx;</Highlight></CodeLine>
<Link id="l02481" /><CodeLine lineNumber="2481"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ReleaseAtCycle = PE.ReleaseAtCycle;</Highlight></CodeLine>
<Link id="l02482" /><CodeLine lineNumber="2482"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> AcquireAtCycle = PE.AcquireAtCycle;</Highlight></CodeLine>
<Link id="l02483" /><CodeLine lineNumber="2483"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NRCycle, InstanceIdx;</Highlight></CodeLine>
<Link id="l02484" /><CodeLine lineNumber="2484"><Highlight kind="normal">      std::tie(NRCycle, InstanceIdx) =</Highlight></CodeLine>
<Link id="l02485" /><CodeLine lineNumber="2485"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/schedboundary/#adfca67c9b359b7ad02ab497632bd6b74">getNextResourceCycle</a>(SC, ResIdx, ReleaseAtCycle, AcquireAtCycle);</Highlight></CodeLine>
<Link id="l02486" /><CodeLine lineNumber="2486"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NRCycle &gt; CurrCycle) &#123;</Highlight></CodeLine>
<Link id="l02487" /><CodeLine lineNumber="2487"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#if LLVM&#95;ENABLE&#95;ABI&#95;BREAKING&#95;CHECKS</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02488" /><CodeLine lineNumber="2488"><Highlight kind="normal">        MaxObservedStall = std::max(ReleaseAtCycle, MaxObservedStall);</Highlight></CodeLine>
<Link id="l02489" /><CodeLine lineNumber="2489"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02490" /><CodeLine lineNumber="2490"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02491" /><CodeLine lineNumber="2491"><Highlight kind="normal">                          &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceName(ResIdx)</Highlight></CodeLine>
<Link id="l02492" /><CodeLine lineNumber="2492"><Highlight kind="normal">                          &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;&#91;&#39;</Highlight><Highlight kind="normal"> &lt;&lt; InstanceIdx - ReservedCyclesIndex&#91;ResIdx&#93;  &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;&#93;&#39;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02493" /><CodeLine lineNumber="2493"><Highlight kind="normal">                          &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;=&quot;</Highlight><Highlight kind="normal"> &lt;&lt; NRCycle &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02494" /><CodeLine lineNumber="2494"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02495" /><CodeLine lineNumber="2495"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02496" /><CodeLine lineNumber="2496"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02497" /><CodeLine lineNumber="2497"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02498" /><CodeLine lineNumber="2498"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02499" /><CodeLine lineNumber="2499"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02500" /><CodeLine lineNumber="2500"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02501" /><CodeLine lineNumber="2501"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Find the unscheduled node in ReadySUs with the highest latency.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02502" /><CodeLine lineNumber="2502" lineLink="/docs/api/classes/llvm/schedboundary/#a4e57bf16f8ed97dbbdc4d48655455b3c"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#a4e57bf16f8ed97dbbdc4d48655455b3c">SchedBoundary::</a></Highlight></CodeLine>
<Link id="l02503" /><CodeLine lineNumber="2503"><Highlight kind="normal"><a href="/docs/api/classes/llvm/schedboundary/#a4e57bf16f8ed97dbbdc4d48655455b3c">findMaxLatency</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;SUnit&#42;&gt;</a> ReadySUs) &#123;</Highlight></CodeLine>
<Link id="l02504" /><CodeLine lineNumber="2504"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;LateSU = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02505" /><CodeLine lineNumber="2505"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> RemLatency = 0;</Highlight></CodeLine>
<Link id="l02506" /><CodeLine lineNumber="2506"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU : ReadySUs) &#123;</Highlight></CodeLine>
<Link id="l02507" /><CodeLine lineNumber="2507"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> L = <a href="/docs/api/classes/llvm/schedboundary/#af7a9c62acba4010b5c47f12f458eaf00">getUnscheduledLatency</a>(SU);</Highlight></CodeLine>
<Link id="l02508" /><CodeLine lineNumber="2508"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (L &gt; RemLatency) &#123;</Highlight></CodeLine>
<Link id="l02509" /><CodeLine lineNumber="2509"><Highlight kind="normal">      RemLatency = L;</Highlight></CodeLine>
<Link id="l02510" /><CodeLine lineNumber="2510"><Highlight kind="normal">      LateSU = SU;</Highlight></CodeLine>
<Link id="l02511" /><CodeLine lineNumber="2511"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02512" /><CodeLine lineNumber="2512"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02513" /><CodeLine lineNumber="2513"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LateSU) &#123;</Highlight></CodeLine>
<Link id="l02514" /><CodeLine lineNumber="2514"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.getName() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; RemLatency SU(&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02515" /><CodeLine lineNumber="2515"><Highlight kind="normal">                      &lt;&lt; LateSU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) &quot;</Highlight><Highlight kind="normal"> &lt;&lt; RemLatency &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02516" /><CodeLine lineNumber="2516"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02517" /><CodeLine lineNumber="2517"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> RemLatency;</Highlight></CodeLine>
<Link id="l02518" /><CodeLine lineNumber="2518"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02519" /><CodeLine lineNumber="2519"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02520" /><CodeLine lineNumber="2520"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Count resources in this zone and the remaining unscheduled</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02521" /><CodeLine lineNumber="2521"><Highlight kind="normal"></Highlight><Highlight kind="comment">// instruction. Return the max count, scaled. Set OtherCritIdx to the critical</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02522" /><CodeLine lineNumber="2522"><Highlight kind="normal"></Highlight><Highlight kind="comment">// resource index, or zero if the zone is issue limited.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02523" /><CodeLine lineNumber="2523" lineLink="/docs/api/classes/llvm/schedboundary/#a5af50e4260bb23b1035c52c186fdcc8b"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#a5af50e4260bb23b1035c52c186fdcc8b">SchedBoundary::</a></Highlight></CodeLine>
<Link id="l02524" /><CodeLine lineNumber="2524"><Highlight kind="normal"><a href="/docs/api/classes/llvm/schedboundary/#a5af50e4260bb23b1035c52c186fdcc8b">getOtherResourceCount</a>(</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> &amp;OtherCritIdx) &#123;</Highlight></CodeLine>
<Link id="l02525" /><CodeLine lineNumber="2525"><Highlight kind="normal">  OtherCritIdx = 0;</Highlight></CodeLine>
<Link id="l02526" /><CodeLine lineNumber="2526"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;hasInstrSchedModel())</Highlight></CodeLine>
<Link id="l02527" /><CodeLine lineNumber="2527"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 0;</Highlight></CodeLine>
<Link id="l02528" /><CodeLine lineNumber="2528"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02529" /><CodeLine lineNumber="2529"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> OtherCritCount = <a href="/docs/api/classes/llvm/schedboundary/#a64b3464e46fb663d1c409fd21a0fa97b">Rem</a>-&gt;RemIssueCount</Highlight></CodeLine>
<Link id="l02530" /><CodeLine lineNumber="2530"><Highlight kind="normal">    + (RetiredMOps &#42; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getMicroOpFactor());</Highlight></CodeLine>
<Link id="l02531" /><CodeLine lineNumber="2531"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.getName() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; + Remain MOps: &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02532" /><CodeLine lineNumber="2532"><Highlight kind="normal">                    &lt;&lt; OtherCritCount / <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getMicroOpFactor() &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02533" /><CodeLine lineNumber="2533"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> PIdx = 1, PEnd = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getNumProcResourceKinds();</Highlight></CodeLine>
<Link id="l02534" /><CodeLine lineNumber="2534"><Highlight kind="normal">       PIdx != PEnd; ++PIdx) &#123;</Highlight></CodeLine>
<Link id="l02535" /><CodeLine lineNumber="2535"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> OtherCount = <a href="/docs/api/classes/llvm/schedboundary/#ab873e76ca432b2280dad3ffc130b6515">getResourceCount</a>(PIdx) + <a href="/docs/api/classes/llvm/schedboundary/#a64b3464e46fb663d1c409fd21a0fa97b">Rem</a>-&gt;RemainingCounts&#91;PIdx&#93;;</Highlight></CodeLine>
<Link id="l02536" /><CodeLine lineNumber="2536"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OtherCount &gt; OtherCritCount) &#123;</Highlight></CodeLine>
<Link id="l02537" /><CodeLine lineNumber="2537"><Highlight kind="normal">      OtherCritCount = OtherCount;</Highlight></CodeLine>
<Link id="l02538" /><CodeLine lineNumber="2538"><Highlight kind="normal">      OtherCritIdx = PIdx;</Highlight></CodeLine>
<Link id="l02539" /><CodeLine lineNumber="2539"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02540" /><CodeLine lineNumber="2540"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02541" /><CodeLine lineNumber="2541"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OtherCritIdx) &#123;</Highlight></CodeLine>
<Link id="l02542" /><CodeLine lineNumber="2542"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</Highlight></CodeLine>
<Link id="l02543" /><CodeLine lineNumber="2543"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.getName() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; + Remain CritRes: &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02544" /><CodeLine lineNumber="2544"><Highlight kind="normal">               &lt;&lt; OtherCritCount / <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceFactor(OtherCritIdx)</Highlight></CodeLine>
<Link id="l02545" /><CodeLine lineNumber="2545"><Highlight kind="normal">               &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceName(OtherCritIdx) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02546" /><CodeLine lineNumber="2546"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02547" /><CodeLine lineNumber="2547"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> OtherCritCount;</Highlight></CodeLine>
<Link id="l02548" /><CodeLine lineNumber="2548"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02549" /><CodeLine lineNumber="2549"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02550" /><CodeLine lineNumber="2550" lineLink="/docs/api/classes/llvm/schedboundary/#a751090565ab555f2738aec07bc1a350c"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#a751090565ab555f2738aec07bc1a350c">SchedBoundary::releaseNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ReadyCycle, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> InPQueue,</Highlight></CodeLine>
<Link id="l02551" /><CodeLine lineNumber="2551"><Highlight kind="normal">                                </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Idx) &#123;</Highlight></CodeLine>
<Link id="l02552" /><CodeLine lineNumber="2552"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Scheduled SUnit must have instr&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02553" /><CodeLine lineNumber="2553"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02554" /><CodeLine lineNumber="2554"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#if LLVM&#95;ENABLE&#95;ABI&#95;BREAKING&#95;CHECKS</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02555" /><CodeLine lineNumber="2555"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ReadyCycle was been bumped up to the CurrCycle when this node was</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02556" /><CodeLine lineNumber="2556"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// scheduled, but CurrCycle may have been eagerly advanced immediately after</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02557" /><CodeLine lineNumber="2557"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// scheduling, so may now be greater than ReadyCycle.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02558" /><CodeLine lineNumber="2558"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ReadyCycle &gt; CurrCycle)</Highlight></CodeLine>
<Link id="l02559" /><CodeLine lineNumber="2559"><Highlight kind="normal">    MaxObservedStall = std::max(ReadyCycle - CurrCycle, MaxObservedStall);</Highlight></CodeLine>
<Link id="l02560" /><CodeLine lineNumber="2560"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02561" /><CodeLine lineNumber="2561"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02562" /><CodeLine lineNumber="2562"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ReadyCycle &lt; MinReadyCycle)</Highlight></CodeLine>
<Link id="l02563" /><CodeLine lineNumber="2563"><Highlight kind="normal">    MinReadyCycle = ReadyCycle;</Highlight></CodeLine>
<Link id="l02564" /><CodeLine lineNumber="2564"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02565" /><CodeLine lineNumber="2565"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check for interlocks first. For the purpose of other heuristics, an</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02566" /><CodeLine lineNumber="2566"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// instruction that cannot issue appears as if it&#39;s not in the ReadyQueue.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02567" /><CodeLine lineNumber="2567"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsBuffered = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getMicroOpBufferSize() != 0;</Highlight></CodeLine>
<Link id="l02568" /><CodeLine lineNumber="2568"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> HazardDetected = (!IsBuffered &amp;&amp; ReadyCycle &gt; CurrCycle) ||</Highlight></CodeLine>
<Link id="l02569" /><CodeLine lineNumber="2569"><Highlight kind="normal">                        <a href="/docs/api/classes/llvm/schedboundary/#adb8558f52662b83fe081b34b1f31fb20">checkHazard</a>(SU) || (<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.size() &gt;= <a href="#af040ecdbfbf801186c7941597cc793a6">ReadyListLimit</a>);</Highlight></CodeLine>
<Link id="l02570" /><CodeLine lineNumber="2570"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02571" /><CodeLine lineNumber="2571"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!HazardDetected) &#123;</Highlight></CodeLine>
<Link id="l02572" /><CodeLine lineNumber="2572"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.push(SU);</Highlight></CodeLine>
<Link id="l02573" /><CodeLine lineNumber="2573"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02574" /><CodeLine lineNumber="2574"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (InPQueue)</Highlight></CodeLine>
<Link id="l02575" /><CodeLine lineNumber="2575"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.remove(<a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.begin() + Idx);</Highlight></CodeLine>
<Link id="l02576" /><CodeLine lineNumber="2576"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02577" /><CodeLine lineNumber="2577"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02578" /><CodeLine lineNumber="2578"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02579" /><CodeLine lineNumber="2579"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!InPQueue)</Highlight></CodeLine>
<Link id="l02580" /><CodeLine lineNumber="2580"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.push(SU);</Highlight></CodeLine>
<Link id="l02581" /><CodeLine lineNumber="2581"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02582" /><CodeLine lineNumber="2582"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l02583" /><CodeLine lineNumber="2583"><Highlight kind="comment">/// Move the boundary of scheduled code by one cycle.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02584" /><CodeLine lineNumber="2584" lineLink="/docs/api/classes/llvm/schedboundary/#abb74f3d3a30e2ae598ec8a782d9031e8"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#abb74f3d3a30e2ae598ec8a782d9031e8">SchedBoundary::bumpCycle</a>(</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NextCycle) &#123;</Highlight></CodeLine>
<Link id="l02585" /><CodeLine lineNumber="2585"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getMicroOpBufferSize() == 0) &#123;</Highlight></CodeLine>
<Link id="l02586" /><CodeLine lineNumber="2586"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MinReadyCycle &lt; std::numeric&#95;limits&lt;unsigned&gt;::max() &amp;&amp;</Highlight></CodeLine>
<Link id="l02587" /><CodeLine lineNumber="2587"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;MinReadyCycle uninitialized&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02588" /><CodeLine lineNumber="2588"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (MinReadyCycle &gt; NextCycle)</Highlight></CodeLine>
<Link id="l02589" /><CodeLine lineNumber="2589"><Highlight kind="normal">      NextCycle = MinReadyCycle;</Highlight></CodeLine>
<Link id="l02590" /><CodeLine lineNumber="2590"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02591" /><CodeLine lineNumber="2591"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Update the current micro-ops, which will issue in the next cycle.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02592" /><CodeLine lineNumber="2592"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> DecMOps = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getIssueWidth() &#42; (NextCycle - CurrCycle);</Highlight></CodeLine>
<Link id="l02593" /><CodeLine lineNumber="2593"><Highlight kind="normal">  CurrMOps = (CurrMOps &lt;= DecMOps) ? 0 : CurrMOps - DecMOps;</Highlight></CodeLine>
<Link id="l02594" /><CodeLine lineNumber="2594"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02595" /><CodeLine lineNumber="2595"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Decrement DependentLatency based on the next cycle.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02596" /><CodeLine lineNumber="2596"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((NextCycle - CurrCycle) &gt; DependentLatency)</Highlight></CodeLine>
<Link id="l02597" /><CodeLine lineNumber="2597"><Highlight kind="normal">    DependentLatency = 0;</Highlight></CodeLine>
<Link id="l02598" /><CodeLine lineNumber="2598"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02599" /><CodeLine lineNumber="2599"><Highlight kind="normal">    DependentLatency -= (NextCycle - CurrCycle);</Highlight></CodeLine>
<Link id="l02600" /><CodeLine lineNumber="2600"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02601" /><CodeLine lineNumber="2601"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;isEnabled()) &#123;</Highlight></CodeLine>
<Link id="l02602" /><CodeLine lineNumber="2602"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Bypass HazardRec virtual calls.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02603" /><CodeLine lineNumber="2603"><Highlight kind="normal">    CurrCycle = NextCycle;</Highlight></CodeLine>
<Link id="l02604" /><CodeLine lineNumber="2604"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02605" /><CodeLine lineNumber="2605"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Bypass getHazardType calls in case of long latency.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02606" /><CodeLine lineNumber="2606"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (; CurrCycle != NextCycle; ++CurrCycle) &#123;</Highlight></CodeLine>
<Link id="l02607" /><CodeLine lineNumber="2607"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>())</Highlight></CodeLine>
<Link id="l02608" /><CodeLine lineNumber="2608"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;AdvanceCycle();</Highlight></CodeLine>
<Link id="l02609" /><CodeLine lineNumber="2609"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02610" /><CodeLine lineNumber="2610"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;RecedeCycle();</Highlight></CodeLine>
<Link id="l02611" /><CodeLine lineNumber="2611"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02612" /><CodeLine lineNumber="2612"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02613" /><CodeLine lineNumber="2613"><Highlight kind="normal">  CheckPending = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02614" /><CodeLine lineNumber="2614"><Highlight kind="normal">  IsResourceLimited =</Highlight></CodeLine>
<Link id="l02615" /><CodeLine lineNumber="2615"><Highlight kind="normal">      <a href="#a77e51ffc94a77ff8e4778e59a02e7b67">checkResourceLimit</a>(<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getLatencyFactor(), <a href="/docs/api/classes/llvm/schedboundary/#a6f3130b70563722e1dc6ddbf616e3e77">getCriticalCount</a>(),</Highlight></CodeLine>
<Link id="l02616" /><CodeLine lineNumber="2616"><Highlight kind="normal">                         <a href="/docs/api/classes/llvm/schedboundary/#a29ef846d6fac7aa275808c8866035968">getScheduledLatency</a>(), </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02617" /><CodeLine lineNumber="2617"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02618" /><CodeLine lineNumber="2618"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Cycle: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; CurrCycle &lt;&lt; </Highlight><Highlight kind="charliteral">&#39; &#39;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.getName()</Highlight></CodeLine>
<Link id="l02619" /><CodeLine lineNumber="2619"><Highlight kind="normal">                    &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02620" /><CodeLine lineNumber="2620"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02621" /><CodeLine lineNumber="2621"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02622" /><CodeLine lineNumber="2622" lineLink="/docs/api/classes/llvm/schedboundary/#a2e4f8d7ebc77cdaa0241f46d01e7375b"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#a2e4f8d7ebc77cdaa0241f46d01e7375b">SchedBoundary::incExecutedResources</a>(</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> PIdx, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a845e08be4b0320d66901a66b0c0e9509">Count</a>) &#123;</Highlight></CodeLine>
<Link id="l02623" /><CodeLine lineNumber="2623"><Highlight kind="normal">  ExecutedResCounts&#91;PIdx&#93; += <a href="/docs/api/namespaces/llvm/#a845e08be4b0320d66901a66b0c0e9509">Count</a>;</Highlight></CodeLine>
<Link id="l02624" /><CodeLine lineNumber="2624"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ExecutedResCounts&#91;PIdx&#93; &gt; MaxExecutedResCount)</Highlight></CodeLine>
<Link id="l02625" /><CodeLine lineNumber="2625"><Highlight kind="normal">    MaxExecutedResCount = ExecutedResCounts&#91;PIdx&#93;;</Highlight></CodeLine>
<Link id="l02626" /><CodeLine lineNumber="2626"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02627" /><CodeLine lineNumber="2627"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l02628" /><CodeLine lineNumber="2628"><Highlight kind="comment">/// Add the given processor resource to this scheduled zone.</Highlight></CodeLine>
<Link id="l02629" /><CodeLine lineNumber="2629"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l02630" /><CodeLine lineNumber="2630"><Highlight kind="comment">/// \\param ReleaseAtCycle indicates the number of consecutive (non-pipelined)</Highlight></CodeLine>
<Link id="l02631" /><CodeLine lineNumber="2631"><Highlight kind="comment">/// cycles during which this resource is released.</Highlight></CodeLine>
<Link id="l02632" /><CodeLine lineNumber="2632"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l02633" /><CodeLine lineNumber="2633"><Highlight kind="comment">/// \\param AcquireAtCycle indicates the number of consecutive (non-pipelined)</Highlight></CodeLine>
<Link id="l02634" /><CodeLine lineNumber="2634"><Highlight kind="comment">/// cycles at which the resource is aquired after issue (assuming no stalls).</Highlight></CodeLine>
<Link id="l02635" /><CodeLine lineNumber="2635"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l02636" /><CodeLine lineNumber="2636"><Highlight kind="comment">/// \\return the next cycle at which the instruction may execute without</Highlight></CodeLine>
<Link id="l02637" /><CodeLine lineNumber="2637"><Highlight kind="comment">/// oversubscribing resources.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02638" /><CodeLine lineNumber="2638" lineLink="/docs/api/classes/llvm/schedboundary/#a7776303c35c1b064126b7b310b546be0"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#a7776303c35c1b064126b7b310b546be0">SchedBoundary::countResource</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> PIdx,</Highlight></CodeLine>
<Link id="l02639" /><CodeLine lineNumber="2639"><Highlight kind="normal">                                      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ReleaseAtCycle,</Highlight></CodeLine>
<Link id="l02640" /><CodeLine lineNumber="2640"><Highlight kind="normal">                                      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NextCycle,</Highlight></CodeLine>
<Link id="l02641" /><CodeLine lineNumber="2641"><Highlight kind="normal">                                      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> AcquireAtCycle) &#123;</Highlight></CodeLine>
<Link id="l02642" /><CodeLine lineNumber="2642"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Factor = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceFactor(PIdx);</Highlight></CodeLine>
<Link id="l02643" /><CodeLine lineNumber="2643"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a845e08be4b0320d66901a66b0c0e9509">Count</a> = Factor &#42; (ReleaseAtCycle- AcquireAtCycle);</Highlight></CodeLine>
<Link id="l02644" /><CodeLine lineNumber="2644"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceName(PIdx) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; +&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02645" /><CodeLine lineNumber="2645"><Highlight kind="normal">                    &lt;&lt; ReleaseAtCycle &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;x&quot;</Highlight><Highlight kind="normal"> &lt;&lt; Factor &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;u\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02646" /><CodeLine lineNumber="2646"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02647" /><CodeLine lineNumber="2647"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Update Executed resources counts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02648" /><CodeLine lineNumber="2648"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/schedboundary/#a2e4f8d7ebc77cdaa0241f46d01e7375b">incExecutedResources</a>(PIdx, <a href="/docs/api/namespaces/llvm/#a845e08be4b0320d66901a66b0c0e9509">Count</a>);</Highlight></CodeLine>
<Link id="l02649" /><CodeLine lineNumber="2649"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/schedboundary/#a64b3464e46fb663d1c409fd21a0fa97b">Rem</a>-&gt;RemainingCounts&#91;PIdx&#93; &gt;= <a href="/docs/api/namespaces/llvm/#a845e08be4b0320d66901a66b0c0e9509">Count</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;resource double counted&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02650" /><CodeLine lineNumber="2650"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/schedboundary/#a64b3464e46fb663d1c409fd21a0fa97b">Rem</a>-&gt;RemainingCounts&#91;PIdx&#93; -= <a href="/docs/api/namespaces/llvm/#a845e08be4b0320d66901a66b0c0e9509">Count</a>;</Highlight></CodeLine>
<Link id="l02651" /><CodeLine lineNumber="2651"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02652" /><CodeLine lineNumber="2652"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check if this resource exceeds the current critical resource. If so, it</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02653" /><CodeLine lineNumber="2653"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// becomes the critical resource.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02654" /><CodeLine lineNumber="2654"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ZoneCritResIdx != PIdx &amp;&amp; (<a href="/docs/api/classes/llvm/schedboundary/#ab873e76ca432b2280dad3ffc130b6515">getResourceCount</a>(PIdx) &gt; <a href="/docs/api/classes/llvm/schedboundary/#a6f3130b70563722e1dc6ddbf616e3e77">getCriticalCount</a>())) &#123;</Highlight></CodeLine>
<Link id="l02655" /><CodeLine lineNumber="2655"><Highlight kind="normal">    ZoneCritResIdx = PIdx;</Highlight></CodeLine>
<Link id="l02656" /><CodeLine lineNumber="2656"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  &#42;&#42;&#42; Critical resource &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02657" /><CodeLine lineNumber="2657"><Highlight kind="normal">                      &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceName(PIdx) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;: &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02658" /><CodeLine lineNumber="2658"><Highlight kind="normal">                      &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#ab873e76ca432b2280dad3ffc130b6515">getResourceCount</a>(PIdx) / <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getLatencyFactor()</Highlight></CodeLine>
<Link id="l02659" /><CodeLine lineNumber="2659"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02660" /><CodeLine lineNumber="2660"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02661" /><CodeLine lineNumber="2661"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For reserved resources, record the highest cycle using the resource.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02662" /><CodeLine lineNumber="2662"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NextAvailable, InstanceIdx;</Highlight></CodeLine>
<Link id="l02663" /><CodeLine lineNumber="2663"><Highlight kind="normal">  std::tie(NextAvailable, InstanceIdx) =</Highlight></CodeLine>
<Link id="l02664" /><CodeLine lineNumber="2664"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/schedboundary/#adfca67c9b359b7ad02ab497632bd6b74">getNextResourceCycle</a>(SC, PIdx, ReleaseAtCycle, AcquireAtCycle);</Highlight></CodeLine>
<Link id="l02665" /><CodeLine lineNumber="2665"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NextAvailable &gt; CurrCycle) &#123;</Highlight></CodeLine>
<Link id="l02666" /><CodeLine lineNumber="2666"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  Resource conflict: &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02667" /><CodeLine lineNumber="2667"><Highlight kind="normal">                      &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceName(PIdx)</Highlight></CodeLine>
<Link id="l02668" /><CodeLine lineNumber="2668"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;&#91;&#39;</Highlight><Highlight kind="normal"> &lt;&lt; InstanceIdx - ReservedCyclesIndex&#91;PIdx&#93;  &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;&#93;&#39;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02669" /><CodeLine lineNumber="2669"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; reserved until @&quot;</Highlight><Highlight kind="normal"> &lt;&lt; NextAvailable &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02670" /><CodeLine lineNumber="2670"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02671" /><CodeLine lineNumber="2671"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> NextAvailable;</Highlight></CodeLine>
<Link id="l02672" /><CodeLine lineNumber="2672"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02673" /><CodeLine lineNumber="2673"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l02674" /><CodeLine lineNumber="2674"><Highlight kind="comment">/// Move the boundary of scheduled code by one SUnit.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02675" /><CodeLine lineNumber="2675" lineLink="/docs/api/classes/llvm/schedboundary/#a6b1771cf492495f8f82727657c68e571"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#a6b1771cf492495f8f82727657c68e571">SchedBoundary::bumpNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU) &#123;</Highlight></CodeLine>
<Link id="l02676" /><CodeLine lineNumber="2676"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Update the reservation table.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02677" /><CodeLine lineNumber="2677"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;isEnabled()) &#123;</Highlight></CodeLine>
<Link id="l02678" /><CodeLine lineNumber="2678"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() &amp;&amp; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a0be1f84d53e90c247d75f2ed63636761">isCall</a>) &#123;</Highlight></CodeLine>
<Link id="l02679" /><CodeLine lineNumber="2679"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Calls are scheduled with their preceding instructions. For bottom-up</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02680" /><CodeLine lineNumber="2680"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// scheduling, clear the pipeline state before emitting.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02681" /><CodeLine lineNumber="2681"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;Reset();</Highlight></CodeLine>
<Link id="l02682" /><CodeLine lineNumber="2682"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02683" /><CodeLine lineNumber="2683"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/schedboundary/#a9b96d44ad4639ec8e5840e97cc4654e5">HazardRec</a>-&gt;EmitInstruction(SU);</Highlight></CodeLine>
<Link id="l02684" /><CodeLine lineNumber="2684"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Scheduling an instruction may have made pending instructions available.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02685" /><CodeLine lineNumber="2685"><Highlight kind="normal">    CheckPending = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02686" /><CodeLine lineNumber="2686"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02687" /><CodeLine lineNumber="2687"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// checkHazard should prevent scheduling multiple instructions per cycle that</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02688" /><CodeLine lineNumber="2688"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// exceed the issue width.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02689" /><CodeLine lineNumber="2689"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC = <a href="/docs/api/classes/llvm/schedboundary/#a4f3e434b23939cec7a3c61b45071a017">DAG</a>-&gt;getSchedClass(SU);</Highlight></CodeLine>
<Link id="l02690" /><CodeLine lineNumber="2690"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> IncMOps = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getNumMicroOps(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>());</Highlight></CodeLine>
<Link id="l02691" /><CodeLine lineNumber="2691"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</Highlight></CodeLine>
<Link id="l02692" /><CodeLine lineNumber="2692"><Highlight kind="normal">      (CurrMOps == 0 || (CurrMOps + IncMOps) &lt;= <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getIssueWidth()) &amp;&amp;</Highlight></CodeLine>
<Link id="l02693" /><CodeLine lineNumber="2693"><Highlight kind="normal">      </Highlight><Highlight kind="stringliteral">&quot;Cannot schedule this instruction&#39;s MicroOps in the current cycle.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02694" /><CodeLine lineNumber="2694"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02695" /><CodeLine lineNumber="2695"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ReadyCycle = (<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() ? SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> : SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>);</Highlight></CodeLine>
<Link id="l02696" /><CodeLine lineNumber="2696"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  Ready @&quot;</Highlight><Highlight kind="normal"> &lt;&lt; ReadyCycle &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02697" /><CodeLine lineNumber="2697"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02698" /><CodeLine lineNumber="2698"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NextCycle = CurrCycle;</Highlight></CodeLine>
<Link id="l02699" /><CodeLine lineNumber="2699"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getMicroOpBufferSize()) &#123;</Highlight></CodeLine>
<Link id="l02700" /><CodeLine lineNumber="2700"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> 0:</Highlight></CodeLine>
<Link id="l02701" /><CodeLine lineNumber="2701"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ReadyCycle &lt;= CurrCycle &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Broken PendingQueue&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02702" /><CodeLine lineNumber="2702"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02703" /><CodeLine lineNumber="2703"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> 1:</Highlight></CodeLine>
<Link id="l02704" /><CodeLine lineNumber="2704"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ReadyCycle &gt; NextCycle) &#123;</Highlight></CodeLine>
<Link id="l02705" /><CodeLine lineNumber="2705"><Highlight kind="normal">      NextCycle = ReadyCycle;</Highlight></CodeLine>
<Link id="l02706" /><CodeLine lineNumber="2706"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  &#42;&#42;&#42; Stall until: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; ReadyCycle &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02707" /><CodeLine lineNumber="2707"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02708" /><CodeLine lineNumber="2708"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02709" /><CodeLine lineNumber="2709"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l02710" /><CodeLine lineNumber="2710"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We don&#39;t currently model the OOO reorder buffer, so consider all</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02711" /><CodeLine lineNumber="2711"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// scheduled MOps to be &quot;retired&quot;. We do loosely model in-order resource</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02712" /><CodeLine lineNumber="2712"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// latency. If this instruction uses an in-order resource, account for any</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02713" /><CodeLine lineNumber="2713"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// likely stall cycles.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02714" /><CodeLine lineNumber="2714"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a4ac4d36cb59a4bbf5d93513dad0ff0e9">isUnbuffered</a> &amp;&amp; ReadyCycle &gt; NextCycle)</Highlight></CodeLine>
<Link id="l02715" /><CodeLine lineNumber="2715"><Highlight kind="normal">      NextCycle = ReadyCycle;</Highlight></CodeLine>
<Link id="l02716" /><CodeLine lineNumber="2716"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02717" /><CodeLine lineNumber="2717"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02718" /><CodeLine lineNumber="2718"><Highlight kind="normal">  RetiredMOps += IncMOps;</Highlight></CodeLine>
<Link id="l02719" /><CodeLine lineNumber="2719"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02720" /><CodeLine lineNumber="2720"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Update resource counts and critical resource.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02721" /><CodeLine lineNumber="2721"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;hasInstrSchedModel()) &#123;</Highlight></CodeLine>
<Link id="l02722" /><CodeLine lineNumber="2722"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> DecRemIssue = IncMOps &#42; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getMicroOpFactor();</Highlight></CodeLine>
<Link id="l02723" /><CodeLine lineNumber="2723"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/schedboundary/#a64b3464e46fb663d1c409fd21a0fa97b">Rem</a>-&gt;RemIssueCount &gt;= DecRemIssue &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;MOps double counted&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02724" /><CodeLine lineNumber="2724"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/schedboundary/#a64b3464e46fb663d1c409fd21a0fa97b">Rem</a>-&gt;RemIssueCount -= DecRemIssue;</Highlight></CodeLine>
<Link id="l02725" /><CodeLine lineNumber="2725"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ZoneCritResIdx) &#123;</Highlight></CodeLine>
<Link id="l02726" /><CodeLine lineNumber="2726"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Scale scheduled micro-ops for comparing with the critical resource.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02727" /><CodeLine lineNumber="2727"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ScaledMOps =</Highlight></CodeLine>
<Link id="l02728" /><CodeLine lineNumber="2728"><Highlight kind="normal">        RetiredMOps &#42; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getMicroOpFactor();</Highlight></CodeLine>
<Link id="l02729" /><CodeLine lineNumber="2729"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02730" /><CodeLine lineNumber="2730"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If scaled micro-ops are now more than the previous critical resource by</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02731" /><CodeLine lineNumber="2731"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// a full cycle, then micro-ops issue becomes critical.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02732" /><CodeLine lineNumber="2732"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal">)(ScaledMOps - <a href="/docs/api/classes/llvm/schedboundary/#ab873e76ca432b2280dad3ffc130b6515">getResourceCount</a>(ZoneCritResIdx))</Highlight></CodeLine>
<Link id="l02733" /><CodeLine lineNumber="2733"><Highlight kind="normal">          &gt;= (</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal">)<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getLatencyFactor()) &#123;</Highlight></CodeLine>
<Link id="l02734" /><CodeLine lineNumber="2734"><Highlight kind="normal">        ZoneCritResIdx = 0;</Highlight></CodeLine>
<Link id="l02735" /><CodeLine lineNumber="2735"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  &#42;&#42;&#42; Critical resource NumMicroOps: &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02736" /><CodeLine lineNumber="2736"><Highlight kind="normal">                          &lt;&lt; ScaledMOps / <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getLatencyFactor()</Highlight></CodeLine>
<Link id="l02737" /><CodeLine lineNumber="2737"><Highlight kind="normal">                          &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02738" /><CodeLine lineNumber="2738"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02739" /><CodeLine lineNumber="2739"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02740" /><CodeLine lineNumber="2740"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetschedmodel/#a7b653a507e8307775b33e01655d3b8d8">TargetSchedModel::ProcResIter</a></Highlight></CodeLine>
<Link id="l02741" /><CodeLine lineNumber="2741"><Highlight kind="normal">           PI = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getWriteProcResBegin(SC),</Highlight></CodeLine>
<Link id="l02742" /><CodeLine lineNumber="2742"><Highlight kind="normal">           PE = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getWriteProcResEnd(SC); PI != PE; ++PI) &#123;</Highlight></CodeLine>
<Link id="l02743" /><CodeLine lineNumber="2743"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> RCycle =</Highlight></CodeLine>
<Link id="l02744" /><CodeLine lineNumber="2744"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/schedboundary/#a7776303c35c1b064126b7b310b546be0">countResource</a>(SC, PI-&gt;ProcResourceIdx, PI-&gt;ReleaseAtCycle, NextCycle,</Highlight></CodeLine>
<Link id="l02745" /><CodeLine lineNumber="2745"><Highlight kind="normal">                        PI-&gt;AcquireAtCycle);</Highlight></CodeLine>
<Link id="l02746" /><CodeLine lineNumber="2746"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (RCycle &gt; NextCycle)</Highlight></CodeLine>
<Link id="l02747" /><CodeLine lineNumber="2747"><Highlight kind="normal">        NextCycle = RCycle;</Highlight></CodeLine>
<Link id="l02748" /><CodeLine lineNumber="2748"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02749" /><CodeLine lineNumber="2749"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ab76e4a602699ddc57019efaba62a92b6">hasReservedResource</a>) &#123;</Highlight></CodeLine>
<Link id="l02750" /><CodeLine lineNumber="2750"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// For reserved resources, record the highest cycle using the resource.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02751" /><CodeLine lineNumber="2751"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// For top-down scheduling, this is the cycle in which we schedule this</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02752" /><CodeLine lineNumber="2752"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// instruction plus the number of cycles the operations reserves the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02753" /><CodeLine lineNumber="2753"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// resource. For bottom-up is it simply the instruction&#39;s cycle.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02754" /><CodeLine lineNumber="2754"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetschedmodel/#a7b653a507e8307775b33e01655d3b8d8">TargetSchedModel::ProcResIter</a></Highlight></CodeLine>
<Link id="l02755" /><CodeLine lineNumber="2755"><Highlight kind="normal">             PI = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getWriteProcResBegin(SC),</Highlight></CodeLine>
<Link id="l02756" /><CodeLine lineNumber="2756"><Highlight kind="normal">             PE = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getWriteProcResEnd(SC); PI != PE; ++PI) &#123;</Highlight></CodeLine>
<Link id="l02757" /><CodeLine lineNumber="2757"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> PIdx = PI-&gt;ProcResourceIdx;</Highlight></CodeLine>
<Link id="l02758" /><CodeLine lineNumber="2758"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getProcResource(PIdx)-&gt;BufferSize == 0) &#123;</Highlight></CodeLine>
<Link id="l02759" /><CodeLine lineNumber="2759"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02760" /><CodeLine lineNumber="2760"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a> &amp;&amp; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;enableIntervals()) &#123;</Highlight></CodeLine>
<Link id="l02761" /><CodeLine lineNumber="2761"><Highlight kind="normal">            </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ReservedUntil, InstanceIdx;</Highlight></CodeLine>
<Link id="l02762" /><CodeLine lineNumber="2762"><Highlight kind="normal">            std::tie(ReservedUntil, InstanceIdx) = <a href="/docs/api/classes/llvm/schedboundary/#adfca67c9b359b7ad02ab497632bd6b74">getNextResourceCycle</a>(</Highlight></CodeLine>
<Link id="l02763" /><CodeLine lineNumber="2763"><Highlight kind="normal">                SC, PIdx, PI-&gt;ReleaseAtCycle, PI-&gt;AcquireAtCycle);</Highlight></CodeLine>
<Link id="l02764" /><CodeLine lineNumber="2764"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>()) &#123;</Highlight></CodeLine>
<Link id="l02765" /><CodeLine lineNumber="2765"><Highlight kind="normal">              ReservedResourceSegments&#91;InstanceIdx&#93;.add(</Highlight></CodeLine>
<Link id="l02766" /><CodeLine lineNumber="2766"><Highlight kind="normal">                  <a href="/docs/api/classes/llvm/resourcesegments/#ad0173019797b2f865e64a85377cb3bd5">ResourceSegments::getResourceIntervalTop</a>(</Highlight></CodeLine>
<Link id="l02767" /><CodeLine lineNumber="2767"><Highlight kind="normal">                      NextCycle, PI-&gt;AcquireAtCycle, PI-&gt;ReleaseAtCycle),</Highlight></CodeLine>
<Link id="l02768" /><CodeLine lineNumber="2768"><Highlight kind="normal">                  <a href="#ae812475cdb74bfae4780368f4ff01ccf">MIResourceCutOff</a>);</Highlight></CodeLine>
<Link id="l02769" /><CodeLine lineNumber="2769"><Highlight kind="normal">            &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02770" /><CodeLine lineNumber="2770"><Highlight kind="normal">              ReservedResourceSegments&#91;InstanceIdx&#93;.add(</Highlight></CodeLine>
<Link id="l02771" /><CodeLine lineNumber="2771"><Highlight kind="normal">                  <a href="/docs/api/classes/llvm/resourcesegments/#a46315c932ddcacb368f78ecc39a96fe3">ResourceSegments::getResourceIntervalBottom</a>(</Highlight></CodeLine>
<Link id="l02772" /><CodeLine lineNumber="2772"><Highlight kind="normal">                      NextCycle, PI-&gt;AcquireAtCycle, PI-&gt;ReleaseAtCycle),</Highlight></CodeLine>
<Link id="l02773" /><CodeLine lineNumber="2773"><Highlight kind="normal">                  <a href="#ae812475cdb74bfae4780368f4ff01ccf">MIResourceCutOff</a>);</Highlight></CodeLine>
<Link id="l02774" /><CodeLine lineNumber="2774"><Highlight kind="normal">            &#125;</Highlight></CodeLine>
<Link id="l02775" /><CodeLine lineNumber="2775"><Highlight kind="normal">          &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02776" /><CodeLine lineNumber="2776"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02777" /><CodeLine lineNumber="2777"><Highlight kind="normal">            </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ReservedUntil, InstanceIdx;</Highlight></CodeLine>
<Link id="l02778" /><CodeLine lineNumber="2778"><Highlight kind="normal">            std::tie(ReservedUntil, InstanceIdx) = <a href="/docs/api/classes/llvm/schedboundary/#adfca67c9b359b7ad02ab497632bd6b74">getNextResourceCycle</a>(</Highlight></CodeLine>
<Link id="l02779" /><CodeLine lineNumber="2779"><Highlight kind="normal">                SC, PIdx, PI-&gt;ReleaseAtCycle, PI-&gt;AcquireAtCycle);</Highlight></CodeLine>
<Link id="l02780" /><CodeLine lineNumber="2780"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>()) &#123;</Highlight></CodeLine>
<Link id="l02781" /><CodeLine lineNumber="2781"><Highlight kind="normal">              ReservedCycles&#91;InstanceIdx&#93; =</Highlight></CodeLine>
<Link id="l02782" /><CodeLine lineNumber="2782"><Highlight kind="normal">                  std::max(ReservedUntil, NextCycle + PI-&gt;ReleaseAtCycle);</Highlight></CodeLine>
<Link id="l02783" /><CodeLine lineNumber="2783"><Highlight kind="normal">            &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02784" /><CodeLine lineNumber="2784"><Highlight kind="normal">              ReservedCycles&#91;InstanceIdx&#93; = NextCycle;</Highlight></CodeLine>
<Link id="l02785" /><CodeLine lineNumber="2785"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l02786" /><CodeLine lineNumber="2786"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l02787" /><CodeLine lineNumber="2787"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02788" /><CodeLine lineNumber="2788"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02789" /><CodeLine lineNumber="2789"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02790" /><CodeLine lineNumber="2790"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Update ExpectedLatency and DependentLatency.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02791" /><CodeLine lineNumber="2791"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> &amp;TopLatency = <a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() ? ExpectedLatency : DependentLatency;</Highlight></CodeLine>
<Link id="l02792" /><CodeLine lineNumber="2792"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> &amp;BotLatency = <a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() ? DependentLatency : ExpectedLatency;</Highlight></CodeLine>
<Link id="l02793" /><CodeLine lineNumber="2793"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>() &gt; TopLatency) &#123;</Highlight></CodeLine>
<Link id="l02794" /><CodeLine lineNumber="2794"><Highlight kind="normal">    TopLatency = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>();</Highlight></CodeLine>
<Link id="l02795" /><CodeLine lineNumber="2795"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.getName() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; TopLatency SU(&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02796" /><CodeLine lineNumber="2796"><Highlight kind="normal">                      &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) &quot;</Highlight><Highlight kind="normal"> &lt;&lt; TopLatency &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02797" /><CodeLine lineNumber="2797"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02798" /><CodeLine lineNumber="2798"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>() &gt; BotLatency) &#123;</Highlight></CodeLine>
<Link id="l02799" /><CodeLine lineNumber="2799"><Highlight kind="normal">    BotLatency = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>();</Highlight></CodeLine>
<Link id="l02800" /><CodeLine lineNumber="2800"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.getName() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; BotLatency SU(&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02801" /><CodeLine lineNumber="2801"><Highlight kind="normal">                      &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) &quot;</Highlight><Highlight kind="normal"> &lt;&lt; BotLatency &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02802" /><CodeLine lineNumber="2802"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02803" /><CodeLine lineNumber="2803"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If we stall for any reason, bump the cycle.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02804" /><CodeLine lineNumber="2804"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NextCycle &gt; CurrCycle)</Highlight></CodeLine>
<Link id="l02805" /><CodeLine lineNumber="2805"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/schedboundary/#abb74f3d3a30e2ae598ec8a782d9031e8">bumpCycle</a>(NextCycle);</Highlight></CodeLine>
<Link id="l02806" /><CodeLine lineNumber="2806"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02807" /><CodeLine lineNumber="2807"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// After updating ZoneCritResIdx and ExpectedLatency, check if we&#39;re</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02808" /><CodeLine lineNumber="2808"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// resource limited. If a stall occurred, bumpCycle does this.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02809" /><CodeLine lineNumber="2809"><Highlight kind="normal">    IsResourceLimited =</Highlight></CodeLine>
<Link id="l02810" /><CodeLine lineNumber="2810"><Highlight kind="normal">        <a href="#a77e51ffc94a77ff8e4778e59a02e7b67">checkResourceLimit</a>(<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getLatencyFactor(), <a href="/docs/api/classes/llvm/schedboundary/#a6f3130b70563722e1dc6ddbf616e3e77">getCriticalCount</a>(),</Highlight></CodeLine>
<Link id="l02811" /><CodeLine lineNumber="2811"><Highlight kind="normal">                           <a href="/docs/api/classes/llvm/schedboundary/#a29ef846d6fac7aa275808c8866035968">getScheduledLatency</a>(), </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02812" /><CodeLine lineNumber="2812"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02813" /><CodeLine lineNumber="2813"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Update CurrMOps after calling bumpCycle to handle stalls, since bumpCycle</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02814" /><CodeLine lineNumber="2814"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// resets CurrMOps. Loop to handle instructions with more MOps than issue in</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02815" /><CodeLine lineNumber="2815"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// one cycle.  Since we commonly reach the max MOps here, opportunistically</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02816" /><CodeLine lineNumber="2816"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// bump the cycle to avoid uselessly checking everything in the readyQ.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02817" /><CodeLine lineNumber="2817"><Highlight kind="normal">  CurrMOps += IncMOps;</Highlight></CodeLine>
<Link id="l02818" /><CodeLine lineNumber="2818"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02819" /><CodeLine lineNumber="2819"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Bump the cycle count for issue group constraints.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02820" /><CodeLine lineNumber="2820"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This must be done after NextCycle has been adjust for all other stalls.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02821" /><CodeLine lineNumber="2821"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Calling bumpCycle(X) will reduce CurrMOps by one issue group and set</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02822" /><CodeLine lineNumber="2822"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// currCycle to X.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02823" /><CodeLine lineNumber="2823"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() &amp;&amp;  <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;mustEndGroup(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>())) ||</Highlight></CodeLine>
<Link id="l02824" /><CodeLine lineNumber="2824"><Highlight kind="normal">      (!<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() &amp;&amp; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;mustBeginGroup(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>()))) &#123;</Highlight></CodeLine>
<Link id="l02825" /><CodeLine lineNumber="2825"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  Bump cycle to &quot;</Highlight><Highlight kind="normal"> &lt;&lt; (<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() ? </Highlight><Highlight kind="stringliteral">&quot;end&quot;</Highlight><Highlight kind="normal"> : </Highlight><Highlight kind="stringliteral">&quot;begin&quot;</Highlight><Highlight kind="normal">)</Highlight></CodeLine>
<Link id="l02826" /><CodeLine lineNumber="2826"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; group\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02827" /><CodeLine lineNumber="2827"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/schedboundary/#abb74f3d3a30e2ae598ec8a782d9031e8">bumpCycle</a>(++NextCycle);</Highlight></CodeLine>
<Link id="l02828" /><CodeLine lineNumber="2828"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02829" /><CodeLine lineNumber="2829"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02830" /><CodeLine lineNumber="2830"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (CurrMOps &gt;= <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getIssueWidth()) &#123;</Highlight></CodeLine>
<Link id="l02831" /><CodeLine lineNumber="2831"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  &#42;&#42;&#42; Max MOps &quot;</Highlight><Highlight kind="normal"> &lt;&lt; CurrMOps &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; at cycle &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02832" /><CodeLine lineNumber="2832"><Highlight kind="normal">                      &lt;&lt; CurrCycle &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02833" /><CodeLine lineNumber="2833"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/schedboundary/#abb74f3d3a30e2ae598ec8a782d9031e8">bumpCycle</a>(++NextCycle);</Highlight></CodeLine>
<Link id="l02834" /><CodeLine lineNumber="2834"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02835" /><CodeLine lineNumber="2835"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/schedboundary/#ae01f950d577dadad26a49baa47d10d66">dumpScheduledState</a>());</Highlight></CodeLine>
<Link id="l02836" /><CodeLine lineNumber="2836"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02837" /><CodeLine lineNumber="2837"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l02838" /><CodeLine lineNumber="2838"><Highlight kind="comment">/// Release pending ready nodes in to the available queue. This makes them</Highlight></CodeLine>
<Link id="l02839" /><CodeLine lineNumber="2839"><Highlight kind="comment">/// visible to heuristics.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02840" /><CodeLine lineNumber="2840" lineLink="/docs/api/classes/llvm/schedboundary/#a155166a788cfe0d992af6f2e21e6118e"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#a155166a788cfe0d992af6f2e21e6118e">SchedBoundary::releasePending</a>() &#123;</Highlight></CodeLine>
<Link id="l02841" /><CodeLine lineNumber="2841"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the available queue is empty, it is safe to reset MinReadyCycle.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02842" /><CodeLine lineNumber="2842"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.empty())</Highlight></CodeLine>
<Link id="l02843" /><CodeLine lineNumber="2843"><Highlight kind="normal">    MinReadyCycle = std::numeric&#95;limits&lt;unsigned&gt;::max();</Highlight></CodeLine>
<Link id="l02844" /><CodeLine lineNumber="2844"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02845" /><CodeLine lineNumber="2845"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check to see if any of the pending instructions are ready to issue.  If</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02846" /><CodeLine lineNumber="2846"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// so, add them to the available queue.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02847" /><CodeLine lineNumber="2847"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = <a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.size(); <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; E; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</Highlight></CodeLine>
<Link id="l02848" /><CodeLine lineNumber="2848"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = &#42;(<a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.begin() + <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</Highlight></CodeLine>
<Link id="l02849" /><CodeLine lineNumber="2849"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ReadyCycle = <a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() ? SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> : SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>;</Highlight></CodeLine>
<Link id="l02850" /><CodeLine lineNumber="2850"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02851" /><CodeLine lineNumber="2851"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ReadyCycle &lt; MinReadyCycle)</Highlight></CodeLine>
<Link id="l02852" /><CodeLine lineNumber="2852"><Highlight kind="normal">      MinReadyCycle = ReadyCycle;</Highlight></CodeLine>
<Link id="l02853" /><CodeLine lineNumber="2853"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02854" /><CodeLine lineNumber="2854"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.size() &gt;= <a href="#af040ecdbfbf801186c7941597cc793a6">ReadyListLimit</a>)</Highlight></CodeLine>
<Link id="l02855" /><CodeLine lineNumber="2855"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02856" /><CodeLine lineNumber="2856"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02857" /><CodeLine lineNumber="2857"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/schedboundary/#a751090565ab555f2738aec07bc1a350c">releaseNode</a>(SU, ReadyCycle, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</Highlight></CodeLine>
<Link id="l02858" /><CodeLine lineNumber="2858"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (E != <a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.size()) &#123;</Highlight></CodeLine>
<Link id="l02859" /><CodeLine lineNumber="2859"><Highlight kind="normal">      --<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</Highlight></CodeLine>
<Link id="l02860" /><CodeLine lineNumber="2860"><Highlight kind="normal">      --E;</Highlight></CodeLine>
<Link id="l02861" /><CodeLine lineNumber="2861"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02862" /><CodeLine lineNumber="2862"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02863" /><CodeLine lineNumber="2863"><Highlight kind="normal">  CheckPending = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02864" /><CodeLine lineNumber="2864"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02865" /><CodeLine lineNumber="2865"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l02866" /><CodeLine lineNumber="2866"><Highlight kind="comment">/// Remove SU from the ready set for this boundary.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02867" /><CodeLine lineNumber="2867" lineLink="/docs/api/classes/llvm/schedboundary/#ae28da0579ee268c38eb2a5ababa222fa"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#ae28da0579ee268c38eb2a5ababa222fa">SchedBoundary::removeReady</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU) &#123;</Highlight></CodeLine>
<Link id="l02868" /><CodeLine lineNumber="2868"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.isInQueue(SU))</Highlight></CodeLine>
<Link id="l02869" /><CodeLine lineNumber="2869"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.remove(<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.find(SU));</Highlight></CodeLine>
<Link id="l02870" /><CodeLine lineNumber="2870"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02871" /><CodeLine lineNumber="2871"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.isInQueue(SU) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;bad ready count&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02872" /><CodeLine lineNumber="2872"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.remove(<a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.find(SU));</Highlight></CodeLine>
<Link id="l02873" /><CodeLine lineNumber="2873"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02874" /><CodeLine lineNumber="2874"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02875" /><CodeLine lineNumber="2875"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l02876" /><CodeLine lineNumber="2876"><Highlight kind="comment">/// If this queue only has one ready candidate, return it. As a side effect,</Highlight></CodeLine>
<Link id="l02877" /><CodeLine lineNumber="2877"><Highlight kind="comment">/// defer any nodes that now hit a hazard, and advance the cycle until at least</Highlight></CodeLine>
<Link id="l02878" /><CodeLine lineNumber="2878"><Highlight kind="comment">/// one node is ready. If multiple instructions are ready, return NULL.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02879" /><CodeLine lineNumber="2879" lineLink="/docs/api/classes/llvm/schedboundary/#a744d69baffaf2903667eb65cf07a6814"><Highlight kind="normal"><a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/llvm/schedboundary/#a744d69baffaf2903667eb65cf07a6814">SchedBoundary::pickOnlyChoice</a>() &#123;</Highlight></CodeLine>
<Link id="l02880" /><CodeLine lineNumber="2880"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CheckPending)</Highlight></CodeLine>
<Link id="l02881" /><CodeLine lineNumber="2881"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/schedboundary/#a155166a788cfe0d992af6f2e21e6118e">releasePending</a>();</Highlight></CodeLine>
<Link id="l02882" /><CodeLine lineNumber="2882"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02883" /><CodeLine lineNumber="2883"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Defer any ready instrs that now have a hazard.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02884" /><CodeLine lineNumber="2884"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/readyqueue/#ac382b8e28fb3d7992c04e6362c3b5295">ReadyQueue::iterator</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.begin(); <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.end();) &#123;</Highlight></CodeLine>
<Link id="l02885" /><CodeLine lineNumber="2885"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#adb8558f52662b83fe081b34b1f31fb20">checkHazard</a>(&#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</Highlight></CodeLine>
<Link id="l02886" /><CodeLine lineNumber="2886"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.push(&#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</Highlight></CodeLine>
<Link id="l02887" /><CodeLine lineNumber="2887"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.remove(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</Highlight></CodeLine>
<Link id="l02888" /><CodeLine lineNumber="2888"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02889" /><CodeLine lineNumber="2889"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02890" /><CodeLine lineNumber="2890"><Highlight kind="normal">    ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</Highlight></CodeLine>
<Link id="l02891" /><CodeLine lineNumber="2891"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02892" /><CodeLine lineNumber="2892"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.empty(); ++i) &#123;</Highlight></CodeLine>
<Link id="l02893" /><CodeLine lineNumber="2893"><Highlight kind="normal"></Highlight><Highlight kind="comment">//  FIXME: Re-enable assert once PR20057 is resolved.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02894" /><CodeLine lineNumber="2894"><Highlight kind="normal"></Highlight><Highlight kind="comment">//    assert(i &lt;= (HazardRec-&gt;getMaxLookAhead() + MaxObservedStall) &amp;&amp;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02895" /><CodeLine lineNumber="2895"><Highlight kind="normal"></Highlight><Highlight kind="comment">//           &quot;permanent hazard&quot;);</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02896" /><CodeLine lineNumber="2896"><Highlight kind="normal">    (void)i;</Highlight></CodeLine>
<Link id="l02897" /><CodeLine lineNumber="2897"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/schedboundary/#abb74f3d3a30e2ae598ec8a782d9031e8">bumpCycle</a>(CurrCycle + 1);</Highlight></CodeLine>
<Link id="l02898" /><CodeLine lineNumber="2898"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/schedboundary/#a155166a788cfe0d992af6f2e21e6118e">releasePending</a>();</Highlight></CodeLine>
<Link id="l02899" /><CodeLine lineNumber="2899"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02900" /><CodeLine lineNumber="2900"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02901" /><CodeLine lineNumber="2901"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.dump());</Highlight></CodeLine>
<Link id="l02902" /><CodeLine lineNumber="2902"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.dump());</Highlight></CodeLine>
<Link id="l02903" /><CodeLine lineNumber="2903"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02904" /><CodeLine lineNumber="2904"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.size() == 1)</Highlight></CodeLine>
<Link id="l02905" /><CodeLine lineNumber="2905"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> &#42;<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.begin();</Highlight></CodeLine>
<Link id="l02906" /><CodeLine lineNumber="2906"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02907" /><CodeLine lineNumber="2907"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02908" /><CodeLine lineNumber="2908"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02909" /><CodeLine lineNumber="2909"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#if !defined(NDEBUG) || defined(LLVM&#95;ENABLE&#95;DUMP)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02910" /><CodeLine lineNumber="2910"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l02911" /><CodeLine lineNumber="2911"><Highlight kind="comment">/// Dump the content of the \\ref ReservedCycles vector for the</Highlight></CodeLine>
<Link id="l02912" /><CodeLine lineNumber="2912"><Highlight kind="comment">/// resources that are used in the basic block.</Highlight></CodeLine>
<Link id="l02913" /><CodeLine lineNumber="2913"><Highlight kind="comment">///</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02914" /><CodeLine lineNumber="2914" lineLink="/docs/api/classes/llvm/schedboundary/#a53bfc0f964240b77c4569bea523c2b39"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/include/llvm/support/compiler-h/#aa863693eef567397d9c292da5bf22d34">LLVM&#95;DUMP&#95;METHOD</a> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#a53bfc0f964240b77c4569bea523c2b39">SchedBoundary::dumpReservedCycles</a>()</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l02915" /><CodeLine lineNumber="2915"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;hasInstrSchedModel())</Highlight></CodeLine>
<Link id="l02916" /><CodeLine lineNumber="2916"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02917" /><CodeLine lineNumber="2917"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02918" /><CodeLine lineNumber="2918"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ResourceCount = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getNumProcResourceKinds();</Highlight></CodeLine>
<Link id="l02919" /><CodeLine lineNumber="2919"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> StartIdx = 0;</Highlight></CodeLine>
<Link id="l02920" /><CodeLine lineNumber="2920"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02921" /><CodeLine lineNumber="2921"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ResIdx = 0; ResIdx &lt; ResourceCount; ++ResIdx) &#123;</Highlight></CodeLine>
<Link id="l02922" /><CodeLine lineNumber="2922"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumUnits = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getProcResource(ResIdx)-&gt;NumUnits;</Highlight></CodeLine>
<Link id="l02923" /><CodeLine lineNumber="2923"><Highlight kind="normal">    std::string ResName = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceName(ResIdx);</Highlight></CodeLine>
<Link id="l02924" /><CodeLine lineNumber="2924"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> UnitIdx = 0; UnitIdx &lt; NumUnits; ++UnitIdx) &#123;</Highlight></CodeLine>
<Link id="l02925" /><CodeLine lineNumber="2925"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; ResName &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; UnitIdx &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) = &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02926" /><CodeLine lineNumber="2926"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a> &amp;&amp; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;enableIntervals()) &#123;</Highlight></CodeLine>
<Link id="l02927" /><CodeLine lineNumber="2927"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ReservedResourceSegments.count(StartIdx + UnitIdx))</Highlight></CodeLine>
<Link id="l02928" /><CodeLine lineNumber="2928"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; ReservedResourceSegments.at(StartIdx + UnitIdx);</Highlight></CodeLine>
<Link id="l02929" /><CodeLine lineNumber="2929"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02930" /><CodeLine lineNumber="2930"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;&#123; &#125;\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02931" /><CodeLine lineNumber="2931"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02932" /><CodeLine lineNumber="2932"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; ReservedCycles&#91;StartIdx + UnitIdx&#93; &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02933" /><CodeLine lineNumber="2933"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02934" /><CodeLine lineNumber="2934"><Highlight kind="normal">    StartIdx += NumUnits;</Highlight></CodeLine>
<Link id="l02935" /><CodeLine lineNumber="2935"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02936" /><CodeLine lineNumber="2936"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02937" /><CodeLine lineNumber="2937"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02938" /><CodeLine lineNumber="2938"><Highlight kind="normal"></Highlight><Highlight kind="comment">// This is useful information to dump after bumpNode.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02939" /><CodeLine lineNumber="2939"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Note that the Queue contents are more useful before pickNodeFromQueue.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02940" /><CodeLine lineNumber="2940" lineLink="/docs/api/classes/llvm/schedboundary/#ae01f950d577dadad26a49baa47d10d66"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/include/llvm/support/compiler-h/#aa863693eef567397d9c292da5bf22d34">LLVM&#95;DUMP&#95;METHOD</a> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/schedboundary/#ae01f950d577dadad26a49baa47d10d66">SchedBoundary::dumpScheduledState</a>()</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l02941" /><CodeLine lineNumber="2941"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ResFactor;</Highlight></CodeLine>
<Link id="l02942" /><CodeLine lineNumber="2942"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ResCount;</Highlight></CodeLine>
<Link id="l02943" /><CodeLine lineNumber="2943"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ZoneCritResIdx) &#123;</Highlight></CodeLine>
<Link id="l02944" /><CodeLine lineNumber="2944"><Highlight kind="normal">    ResFactor = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceFactor(ZoneCritResIdx);</Highlight></CodeLine>
<Link id="l02945" /><CodeLine lineNumber="2945"><Highlight kind="normal">    ResCount = <a href="/docs/api/classes/llvm/schedboundary/#ab873e76ca432b2280dad3ffc130b6515">getResourceCount</a>(ZoneCritResIdx);</Highlight></CodeLine>
<Link id="l02946" /><CodeLine lineNumber="2946"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02947" /><CodeLine lineNumber="2947"><Highlight kind="normal">    ResFactor = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getMicroOpFactor();</Highlight></CodeLine>
<Link id="l02948" /><CodeLine lineNumber="2948"><Highlight kind="normal">    ResCount = RetiredMOps &#42; ResFactor;</Highlight></CodeLine>
<Link id="l02949" /><CodeLine lineNumber="2949"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02950" /><CodeLine lineNumber="2950"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LFactor = <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getLatencyFactor();</Highlight></CodeLine>
<Link id="l02951" /><CodeLine lineNumber="2951"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.getName() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; @&quot;</Highlight><Highlight kind="normal"> &lt;&lt; CurrCycle &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c\\n&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02952" /><CodeLine lineNumber="2952"><Highlight kind="normal">         &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  Retired: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; RetiredMOps;</Highlight></CodeLine>
<Link id="l02953" /><CodeLine lineNumber="2953"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n  Executed: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a42aaa1b48f61e21b104a0aab30142385">getExecutedCount</a>() / LFactor &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02954" /><CodeLine lineNumber="2954"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n  Critical: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; ResCount / LFactor &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c, &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02955" /><CodeLine lineNumber="2955"><Highlight kind="normal">         &lt;&lt; ResCount / ResFactor &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02956" /><CodeLine lineNumber="2956"><Highlight kind="normal">         &lt;&lt; <a href="/docs/api/classes/llvm/schedboundary/#a3e9e2fcb68f7063b63e67dd34b8fa00f">SchedModel</a>-&gt;getResourceName(ZoneCritResIdx)</Highlight></CodeLine>
<Link id="l02957" /><CodeLine lineNumber="2957"><Highlight kind="normal">         &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n  ExpectedLatency: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; ExpectedLatency &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c\\n&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02958" /><CodeLine lineNumber="2958"><Highlight kind="normal">         &lt;&lt; (IsResourceLimited ? </Highlight><Highlight kind="stringliteral">&quot;  - Resource&quot;</Highlight><Highlight kind="normal"> : </Highlight><Highlight kind="stringliteral">&quot;  - Latency&quot;</Highlight><Highlight kind="normal">)</Highlight></CodeLine>
<Link id="l02959" /><CodeLine lineNumber="2959"><Highlight kind="normal">         &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; limited.\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02960" /><CodeLine lineNumber="2960"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a3f253389931150fd73bfae4cd61c3ae6">MISchedDumpReservedCycles</a>)</Highlight></CodeLine>
<Link id="l02961" /><CodeLine lineNumber="2961"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/schedboundary/#a53bfc0f964240b77c4569bea523c2b39">dumpReservedCycles</a>();</Highlight></CodeLine>
<Link id="l02962" /><CodeLine lineNumber="2962"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02963" /><CodeLine lineNumber="2963"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02964" /><CodeLine lineNumber="2964"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02965" /><CodeLine lineNumber="2965"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02966" /><CodeLine lineNumber="2966"><Highlight kind="normal"></Highlight><Highlight kind="comment">// GenericScheduler - Generic implementation of MachineSchedStrategy.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02967" /><CodeLine lineNumber="2967"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02968" /><CodeLine lineNumber="2968"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02969" /><CodeLine lineNumber="2969" lineLink="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a47cc8c89db10ac27483585cd61cf4f91"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a47cc8c89db10ac27483585cd61cf4f91">GenericSchedulerBase::SchedCandidate::</a></Highlight></CodeLine>
<Link id="l02970" /><CodeLine lineNumber="2970"><Highlight kind="normal"><a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a47cc8c89db10ac27483585cd61cf4f91">initResourceDelta</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;DAG,</Highlight></CodeLine>
<Link id="l02971" /><CodeLine lineNumber="2971"><Highlight kind="normal">                  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetschedmodel">TargetSchedModel</a> &#42;<a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>) &#123;</Highlight></CodeLine>
<Link id="l02972" /><CodeLine lineNumber="2972"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>.ReduceResIdx &amp;&amp; !<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>.DemandResIdx)</Highlight></CodeLine>
<Link id="l02973" /><CodeLine lineNumber="2973"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02974" /><CodeLine lineNumber="2974"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02975" /><CodeLine lineNumber="2975"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/mcschedclassdesc">MCSchedClassDesc</a> &#42;SC = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledaginstrs/#a4bf5573660c55924d68b517a0e9b4554">getSchedClass</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>);</Highlight></CodeLine>
<Link id="l02976" /><CodeLine lineNumber="2976"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetschedmodel/#a7b653a507e8307775b33e01655d3b8d8">TargetSchedModel::ProcResIter</a></Highlight></CodeLine>
<Link id="l02977" /><CodeLine lineNumber="2977"><Highlight kind="normal">         PI = <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getWriteProcResBegin(SC),</Highlight></CodeLine>
<Link id="l02978" /><CodeLine lineNumber="2978"><Highlight kind="normal">         PE = <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getWriteProcResEnd(SC); PI != PE; ++PI) &#123;</Highlight></CodeLine>
<Link id="l02979" /><CodeLine lineNumber="2979"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PI-&gt;ProcResourceIdx == <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>.ReduceResIdx)</Highlight></CodeLine>
<Link id="l02980" /><CodeLine lineNumber="2980"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.CritResources += PI-&gt;ReleaseAtCycle;</Highlight></CodeLine>
<Link id="l02981" /><CodeLine lineNumber="2981"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PI-&gt;ProcResourceIdx == <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>.DemandResIdx)</Highlight></CodeLine>
<Link id="l02982" /><CodeLine lineNumber="2982"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.DemandedResources += PI-&gt;ReleaseAtCycle;</Highlight></CodeLine>
<Link id="l02983" /><CodeLine lineNumber="2983"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02984" /><CodeLine lineNumber="2984"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02985" /><CodeLine lineNumber="2985"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l02986" /><CodeLine lineNumber="2986"><Highlight kind="comment">/// Compute remaining latency. We need this both to determine whether the</Highlight></CodeLine>
<Link id="l02987" /><CodeLine lineNumber="2987"><Highlight kind="comment">/// overall schedule has become latency-limited and whether the instructions</Highlight></CodeLine>
<Link id="l02988" /><CodeLine lineNumber="2988"><Highlight kind="comment">/// outside this zone are resource or latency limited.</Highlight></CodeLine>
<Link id="l02989" /><CodeLine lineNumber="2989"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l02990" /><CodeLine lineNumber="2990"><Highlight kind="comment">/// The &quot;dependent&quot; latency is updated incrementally during scheduling as the</Highlight></CodeLine>
<Link id="l02991" /><CodeLine lineNumber="2991"><Highlight kind="comment">/// max height/depth of scheduled nodes minus the cycles since it was</Highlight></CodeLine>
<Link id="l02992" /><CodeLine lineNumber="2992"><Highlight kind="comment">/// scheduled:</Highlight></CodeLine>
<Link id="l02993" /><CodeLine lineNumber="2993"><Highlight kind="comment">///   DLat = max (N.depth - (CurrCycle - N.ReadyCycle) for N in Zone</Highlight></CodeLine>
<Link id="l02994" /><CodeLine lineNumber="2994"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l02995" /><CodeLine lineNumber="2995"><Highlight kind="comment">/// The &quot;independent&quot; latency is the max ready queue depth:</Highlight></CodeLine>
<Link id="l02996" /><CodeLine lineNumber="2996"><Highlight kind="comment">///   ILat = max N.depth for N in Available|Pending</Highlight></CodeLine>
<Link id="l02997" /><CodeLine lineNumber="2997"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l02998" /><CodeLine lineNumber="2998"><Highlight kind="comment">/// RemainingLatency is the greater of independent and dependent latency.</Highlight></CodeLine>
<Link id="l02999" /><CodeLine lineNumber="2999"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l03000" /><CodeLine lineNumber="3000"><Highlight kind="comment">/// These computations are expensive, especially in DAGs with many edges, so</Highlight></CodeLine>
<Link id="l03001" /><CodeLine lineNumber="3001"><Highlight kind="comment">/// only do them if necessary.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03002" /><CodeLine lineNumber="3002" lineLink="#a4d6bf176cc854701f61fba566b9dbf9b"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="#a4d6bf176cc854701f61fba566b9dbf9b">computeRemLatency</a>(<a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &amp;CurrZone) &#123;</Highlight></CodeLine>
<Link id="l03003" /><CodeLine lineNumber="3003"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> RemLatency = CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#a24bc7ce4ae7f1bc672ee20aaefcce30b">getDependentLatency</a>();</Highlight></CodeLine>
<Link id="l03004" /><CodeLine lineNumber="3004"><Highlight kind="normal">  RemLatency = std::max(RemLatency,</Highlight></CodeLine>
<Link id="l03005" /><CodeLine lineNumber="3005"><Highlight kind="normal">                        CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#a4e57bf16f8ed97dbbdc4d48655455b3c">findMaxLatency</a>(CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.<a href="/docs/api/classes/llvm/readyqueue/#a57a4bd7fcd66c8d555fa3b6a7e982002">elements</a>()));</Highlight></CodeLine>
<Link id="l03006" /><CodeLine lineNumber="3006"><Highlight kind="normal">  RemLatency = std::max(RemLatency,</Highlight></CodeLine>
<Link id="l03007" /><CodeLine lineNumber="3007"><Highlight kind="normal">                        CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#a4e57bf16f8ed97dbbdc4d48655455b3c">findMaxLatency</a>(CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#ad3f102348942e4ca3ec057e895138609">Pending</a>.<a href="/docs/api/classes/llvm/readyqueue/#a57a4bd7fcd66c8d555fa3b6a7e982002">elements</a>()));</Highlight></CodeLine>
<Link id="l03008" /><CodeLine lineNumber="3008"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> RemLatency;</Highlight></CodeLine>
<Link id="l03009" /><CodeLine lineNumber="3009"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03010" /><CodeLine lineNumber="3010"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03011" /><CodeLine lineNumber="3011"><Highlight kind="comment">/// Returns true if the current cycle plus remaning latency is greater than</Highlight></CodeLine>
<Link id="l03012" /><CodeLine lineNumber="3012"><Highlight kind="comment">/// the critical path in the scheduling region.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03013" /><CodeLine lineNumber="3013"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> GenericSchedulerBase::shouldReduceLatency(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> &amp;Policy,</Highlight></CodeLine>
<Link id="l03014" /><CodeLine lineNumber="3014"><Highlight kind="normal">                                               SchedBoundary &amp;CurrZone,</Highlight></CodeLine>
<Link id="l03015" /><CodeLine lineNumber="3015"><Highlight kind="normal">                                               </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> ComputeRemLatency,</Highlight></CodeLine>
<Link id="l03016" /><CodeLine lineNumber="3016"><Highlight kind="normal">                                               </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> &amp;RemLatency)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03017" /><CodeLine lineNumber="3017"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// The current cycle is already greater than the critical path, so we are</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03018" /><CodeLine lineNumber="3018"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// already latency limited and don&#39;t need to compute the remaining latency.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03019" /><CodeLine lineNumber="3019"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#acef1c37226a48a752d933063e8ba6f83">getCurrCycle</a>() &gt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath)</Highlight></CodeLine>
<Link id="l03020" /><CodeLine lineNumber="3020"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03021" /><CodeLine lineNumber="3021"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03022" /><CodeLine lineNumber="3022"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If we haven&#39;t scheduled anything yet, then we aren&#39;t latency limited.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03023" /><CodeLine lineNumber="3023"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#acef1c37226a48a752d933063e8ba6f83">getCurrCycle</a>() == 0)</Highlight></CodeLine>
<Link id="l03024" /><CodeLine lineNumber="3024"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03025" /><CodeLine lineNumber="3025"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03026" /><CodeLine lineNumber="3026"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ComputeRemLatency)</Highlight></CodeLine>
<Link id="l03027" /><CodeLine lineNumber="3027"><Highlight kind="normal">    RemLatency = <a href="#a4d6bf176cc854701f61fba566b9dbf9b">computeRemLatency</a>(CurrZone);</Highlight></CodeLine>
<Link id="l03028" /><CodeLine lineNumber="3028"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03029" /><CodeLine lineNumber="3029"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> RemLatency + CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#acef1c37226a48a752d933063e8ba6f83">getCurrCycle</a>() &gt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath;</Highlight></CodeLine>
<Link id="l03030" /><CodeLine lineNumber="3030"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03031" /><CodeLine lineNumber="3031"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03032" /><CodeLine lineNumber="3032"><Highlight kind="comment">/// Set the CandPolicy given a scheduling zone given the current resources and</Highlight></CodeLine>
<Link id="l03033" /><CodeLine lineNumber="3033"><Highlight kind="comment">/// latencies inside and outside the zone.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03034" /><CodeLine lineNumber="3034" lineLink="/docs/api/classes/llvm/genericschedulerbase/#a8668556014566994c07b21391762551b"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#a8668556014566994c07b21391762551b">GenericSchedulerBase::setPolicy</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> &amp;Policy, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsPostRA,</Highlight></CodeLine>
<Link id="l03035" /><CodeLine lineNumber="3035"><Highlight kind="normal">                                     <a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &amp;CurrZone,</Highlight></CodeLine>
<Link id="l03036" /><CodeLine lineNumber="3036"><Highlight kind="normal">                                     <a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &#42;OtherZone) &#123;</Highlight></CodeLine>
<Link id="l03037" /><CodeLine lineNumber="3037"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Apply preemptive heuristics based on the total latency and resources</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03038" /><CodeLine lineNumber="3038"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// inside and outside this zone. Potential stalls should be considered before</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03039" /><CodeLine lineNumber="3039"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// following this policy.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03040" /><CodeLine lineNumber="3040"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03041" /><CodeLine lineNumber="3041"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Compute the critical resource outside the zone.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03042" /><CodeLine lineNumber="3042"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> OtherCritIdx = 0;</Highlight></CodeLine>
<Link id="l03043" /><CodeLine lineNumber="3043"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> OtherCount =</Highlight></CodeLine>
<Link id="l03044" /><CodeLine lineNumber="3044"><Highlight kind="normal">    OtherZone ? OtherZone-&gt;<a href="/docs/api/classes/llvm/schedboundary/#a5af50e4260bb23b1035c52c186fdcc8b">getOtherResourceCount</a>(OtherCritIdx) : 0;</Highlight></CodeLine>
<Link id="l03045" /><CodeLine lineNumber="3045"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03046" /><CodeLine lineNumber="3046"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> OtherResLimited = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03047" /><CodeLine lineNumber="3047"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> RemLatency = 0;</Highlight></CodeLine>
<Link id="l03048" /><CodeLine lineNumber="3048"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> RemLatencyComputed = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03049" /><CodeLine lineNumber="3049"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;hasInstrSchedModel() &amp;&amp; OtherCount != 0) &#123;</Highlight></CodeLine>
<Link id="l03050" /><CodeLine lineNumber="3050"><Highlight kind="normal">    RemLatency = <a href="#a4d6bf176cc854701f61fba566b9dbf9b">computeRemLatency</a>(CurrZone);</Highlight></CodeLine>
<Link id="l03051" /><CodeLine lineNumber="3051"><Highlight kind="normal">    RemLatencyComputed = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03052" /><CodeLine lineNumber="3052"><Highlight kind="normal">    OtherResLimited = <a href="#a77e51ffc94a77ff8e4778e59a02e7b67">checkResourceLimit</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getLatencyFactor(),</Highlight></CodeLine>
<Link id="l03053" /><CodeLine lineNumber="3053"><Highlight kind="normal">                                         OtherCount, RemLatency, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03054" /><CodeLine lineNumber="3054"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03055" /><CodeLine lineNumber="3055"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03056" /><CodeLine lineNumber="3056"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Schedule aggressively for latency in PostRA mode. We don&#39;t check for</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03057" /><CodeLine lineNumber="3057"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// acyclic latency during PostRA, and highly out-of-order processors will</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03058" /><CodeLine lineNumber="3058"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// skip PostRA scheduling.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03059" /><CodeLine lineNumber="3059"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!OtherResLimited &amp;&amp;</Highlight></CodeLine>
<Link id="l03060" /><CodeLine lineNumber="3060"><Highlight kind="normal">      (IsPostRA || shouldReduceLatency(Policy, CurrZone, !RemLatencyComputed,</Highlight></CodeLine>
<Link id="l03061" /><CodeLine lineNumber="3061"><Highlight kind="normal">                                       RemLatency))) &#123;</Highlight></CodeLine>
<Link id="l03062" /><CodeLine lineNumber="3062"><Highlight kind="normal">    Policy.<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy/#acd9f1ecfaa9db2800e6fe15a385b4a6f">ReduceLatency</a> |= </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03063" /><CodeLine lineNumber="3063"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  &quot;</Highlight><Highlight kind="normal"> &lt;&lt; CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.<a href="/docs/api/classes/llvm/readyqueue/#ac90e8349a5117f988bbb4cf8bf8c5f9f">getName</a>()</Highlight></CodeLine>
<Link id="l03064" /><CodeLine lineNumber="3064"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; RemainingLatency &quot;</Highlight><Highlight kind="normal"> &lt;&lt; RemLatency &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; + &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03065" /><CodeLine lineNumber="3065"><Highlight kind="normal">                      &lt;&lt; CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#acef1c37226a48a752d933063e8ba6f83">getCurrCycle</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c &gt; CritPath &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03066" /><CodeLine lineNumber="3066"><Highlight kind="normal">                      &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03067" /><CodeLine lineNumber="3067"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03068" /><CodeLine lineNumber="3068"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the same resource is limiting inside and outside the zone, do nothing.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03069" /><CodeLine lineNumber="3069"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#ae98af615296b8adf67556301343d6ca2">getZoneCritResIdx</a>() == OtherCritIdx)</Highlight></CodeLine>
<Link id="l03070" /><CodeLine lineNumber="3070"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03071" /><CodeLine lineNumber="3071"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03072" /><CodeLine lineNumber="3072"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#a2ec93f0e570be68d89930c8e4032ef83">isResourceLimited</a>()) &#123;</Highlight></CodeLine>
<Link id="l03073" /><CodeLine lineNumber="3073"><Highlight kind="normal">    dbgs() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  &quot;</Highlight><Highlight kind="normal"> &lt;&lt; CurrZone.Available.getName() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; ResourceLimited: &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03074" /><CodeLine lineNumber="3074"><Highlight kind="normal">           &lt;&lt; SchedModel-&gt;getResourceName(CurrZone.getZoneCritResIdx()) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03075" /><CodeLine lineNumber="3075"><Highlight kind="normal">  &#125; <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#acdfbcf188e2d4a80837e89de2ccdffab">if</a> (OtherResLimited) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</Highlight></CodeLine>
<Link id="l03076" /><CodeLine lineNumber="3076"><Highlight kind="normal">                 &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  RemainingLimit: &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03077" /><CodeLine lineNumber="3077"><Highlight kind="normal">                 &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getResourceName(OtherCritIdx) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03078" /><CodeLine lineNumber="3078"><Highlight kind="normal">             <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#acdfbcf188e2d4a80837e89de2ccdffab">if</a> (!CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#a2ec93f0e570be68d89930c8e4032ef83">isResourceLimited</a>() &amp;&amp; !OtherResLimited) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</Highlight></CodeLine>
<Link id="l03079" /><CodeLine lineNumber="3079"><Highlight kind="normal">             &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  Latency limited both directions.\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03080" /><CodeLine lineNumber="3080"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03081" /><CodeLine lineNumber="3081"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#a2ec93f0e570be68d89930c8e4032ef83">isResourceLimited</a>() &amp;&amp; !Policy.<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy/#a413ba6a1fb7916faa6b5d34aa4397d9b">ReduceResIdx</a>)</Highlight></CodeLine>
<Link id="l03082" /><CodeLine lineNumber="3082"><Highlight kind="normal">    Policy.<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy/#a413ba6a1fb7916faa6b5d34aa4397d9b">ReduceResIdx</a> = CurrZone.<a href="/docs/api/classes/llvm/schedboundary/#ae98af615296b8adf67556301343d6ca2">getZoneCritResIdx</a>();</Highlight></CodeLine>
<Link id="l03083" /><CodeLine lineNumber="3083"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03084" /><CodeLine lineNumber="3084"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OtherResLimited)</Highlight></CodeLine>
<Link id="l03085" /><CodeLine lineNumber="3085"><Highlight kind="normal">    Policy.<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy/#a61f080e69dc94a237cc49b7a3ca8c558">DemandResIdx</a> = OtherCritIdx;</Highlight></CodeLine>
<Link id="l03086" /><CodeLine lineNumber="3086"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03087" /><CodeLine lineNumber="3087"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03088" /><CodeLine lineNumber="3088"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#ifndef NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03089" /><CodeLine lineNumber="3089" lineLink="/docs/api/classes/llvm/genericschedulerbase/#a9df77ae80f822b788cb2464992a05bc1"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> &#42;<a href="/docs/api/classes/llvm/genericschedulerbase/#a9df77ae80f822b788cb2464992a05bc1">GenericSchedulerBase::getReasonStr</a>(</Highlight></CodeLine>
<Link id="l03090" /><CodeLine lineNumber="3090"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3">GenericSchedulerBase::CandReason</a> Reason) &#123;</Highlight></CodeLine>
<Link id="l03091" /><CodeLine lineNumber="3091"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (Reason) &#123;</Highlight></CodeLine>
<Link id="l03092" /><CodeLine lineNumber="3092"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>:         </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;NOCAND    &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03093" /><CodeLine lineNumber="3093"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a3e5ec7d7634a70f61fd64c3ef22d02f1">Only1</a>:          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;ONLY1     &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03094" /><CodeLine lineNumber="3094"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3ab58c08e8fa9324ebf332e11601ec6c0d">PhysReg</a>:        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;PHYS-REG  &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03095" /><CodeLine lineNumber="3095"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a01d264553167fb005aba23a6d2a6e9bb">RegExcess</a>:      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;REG-EXCESS&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03096" /><CodeLine lineNumber="3096"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a974161ce84e375b6d40bd8855c29dd7f">RegCritical</a>:    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;REG-CRIT  &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03097" /><CodeLine lineNumber="3097"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3ab6aae8902e724a36ed16d537784777a2">Stall</a>:          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;STALL     &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03098" /><CodeLine lineNumber="3098"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a5a905614458af47ec4a5054a53d23e1b">Cluster</a>:        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;CLUSTER   &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03099" /><CodeLine lineNumber="3099"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3aed8b719fe1a669c2fed4bacc6f46e8df">Weak</a>:           </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;WEAK      &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03100" /><CodeLine lineNumber="3100"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a01ef8d8423fe645e50ad5a179b4f4483">RegMax</a>:         </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;REG-MAX   &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03101" /><CodeLine lineNumber="3101"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a56637d3435d7e1953a615371cfe4d5ec">ResourceReduce</a>: </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;RES-REDUCE&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03102" /><CodeLine lineNumber="3102"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a07409a8a5b9657af23f0a1c962f5c0c1">ResourceDemand</a>: </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;RES-DEMAND&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03103" /><CodeLine lineNumber="3103"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3afb16e35278ff80f34d2ad9889213b406">TopDepthReduce</a>: </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;TOP-DEPTH &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03104" /><CodeLine lineNumber="3104"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a768a7f66e30d6b2d2d81ab1af56bf6c4">TopPathReduce</a>:  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;TOP-PATH  &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03105" /><CodeLine lineNumber="3105"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a8ea4d71243c1b82d5e35065d580c1e49">BotHeightReduce</a>:</Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;BOT-HEIGHT&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03106" /><CodeLine lineNumber="3106"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3ad3c3c8a47c777d0f591ca18eaf7000d4">BotPathReduce</a>:  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;BOT-PATH  &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03107" /><CodeLine lineNumber="3107"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3af9d4eb6d4d0ca011ccbb24f139c9bf73">NextDefUse</a>:     </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;DEF-USE   &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03108" /><CodeLine lineNumber="3108"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3aa00a8e5741a604eb07320e981473b4e7">NodeOrder</a>:      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;ORDER     &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03109" /><CodeLine lineNumber="3109"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l03110" /><CodeLine lineNumber="3110"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;Unknown reason!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03111" /><CodeLine lineNumber="3111"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03112" /><CodeLine lineNumber="3112"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03113" /><CodeLine lineNumber="3113" lineLink="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">GenericSchedulerBase::traceCandidate</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> &amp;Cand) &#123;</Highlight></CodeLine>
<Link id="l03114" /><CodeLine lineNumber="3114"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/pressurechange">PressureChange</a> <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>;</Highlight></CodeLine>
<Link id="l03115" /><CodeLine lineNumber="3115"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ResIdx = 0;</Highlight></CodeLine>
<Link id="l03116" /><CodeLine lineNumber="3116"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a> = 0;</Highlight></CodeLine>
<Link id="l03117" /><CodeLine lineNumber="3117"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a>) &#123;</Highlight></CodeLine>
<Link id="l03118" /><CodeLine lineNumber="3118"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l03119" /><CodeLine lineNumber="3119"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03120" /><CodeLine lineNumber="3120"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a01d264553167fb005aba23a6d2a6e9bb">RegExcess</a>:</Highlight></CodeLine>
<Link id="l03121" /><CodeLine lineNumber="3121"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>;</Highlight></CodeLine>
<Link id="l03122" /><CodeLine lineNumber="3122"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03123" /><CodeLine lineNumber="3123"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a974161ce84e375b6d40bd8855c29dd7f">RegCritical</a>:</Highlight></CodeLine>
<Link id="l03124" /><CodeLine lineNumber="3124"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>;</Highlight></CodeLine>
<Link id="l03125" /><CodeLine lineNumber="3125"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03126" /><CodeLine lineNumber="3126"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a01ef8d8423fe645e50ad5a179b4f4483">RegMax</a>:</Highlight></CodeLine>
<Link id="l03127" /><CodeLine lineNumber="3127"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>;</Highlight></CodeLine>
<Link id="l03128" /><CodeLine lineNumber="3128"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03129" /><CodeLine lineNumber="3129"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a56637d3435d7e1953a615371cfe4d5ec">ResourceReduce</a>:</Highlight></CodeLine>
<Link id="l03130" /><CodeLine lineNumber="3130"><Highlight kind="normal">    ResIdx = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy/#a413ba6a1fb7916faa6b5d34aa4397d9b">ReduceResIdx</a>;</Highlight></CodeLine>
<Link id="l03131" /><CodeLine lineNumber="3131"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03132" /><CodeLine lineNumber="3132"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a07409a8a5b9657af23f0a1c962f5c0c1">ResourceDemand</a>:</Highlight></CodeLine>
<Link id="l03133" /><CodeLine lineNumber="3133"><Highlight kind="normal">    ResIdx = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy/#a61f080e69dc94a237cc49b7a3ca8c558">DemandResIdx</a>;</Highlight></CodeLine>
<Link id="l03134" /><CodeLine lineNumber="3134"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03135" /><CodeLine lineNumber="3135"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3afb16e35278ff80f34d2ad9889213b406">TopDepthReduce</a>:</Highlight></CodeLine>
<Link id="l03136" /><CodeLine lineNumber="3136"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a> = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>();</Highlight></CodeLine>
<Link id="l03137" /><CodeLine lineNumber="3137"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03138" /><CodeLine lineNumber="3138"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a768a7f66e30d6b2d2d81ab1af56bf6c4">TopPathReduce</a>:</Highlight></CodeLine>
<Link id="l03139" /><CodeLine lineNumber="3139"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a> = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>();</Highlight></CodeLine>
<Link id="l03140" /><CodeLine lineNumber="3140"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03141" /><CodeLine lineNumber="3141"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a8ea4d71243c1b82d5e35065d580c1e49">BotHeightReduce</a>:</Highlight></CodeLine>
<Link id="l03142" /><CodeLine lineNumber="3142"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a> = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>();</Highlight></CodeLine>
<Link id="l03143" /><CodeLine lineNumber="3143"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03144" /><CodeLine lineNumber="3144"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3ad3c3c8a47c777d0f591ca18eaf7000d4">BotPathReduce</a>:</Highlight></CodeLine>
<Link id="l03145" /><CodeLine lineNumber="3145"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a> = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>();</Highlight></CodeLine>
<Link id="l03146" /><CodeLine lineNumber="3146"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03147" /><CodeLine lineNumber="3147"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03148" /><CodeLine lineNumber="3148"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  Cand SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9df77ae80f822b788cb2464992a05bc1">getReasonStr</a>(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a>);</Highlight></CodeLine>
<Link id="l03149" /><CodeLine lineNumber="3149"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.isValid())</Highlight></CodeLine>
<Link id="l03150" /><CodeLine lineNumber="3150"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#ae9476ffbc2f3f195a2116b13f3186194">TRI</a>-&gt;getRegPressureSetName(<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.getPSet())</Highlight></CodeLine>
<Link id="l03151" /><CodeLine lineNumber="3151"><Highlight kind="normal">           &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;:&quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.getUnitInc() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03152" /><CodeLine lineNumber="3152"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03153" /><CodeLine lineNumber="3153"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;      &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03154" /><CodeLine lineNumber="3154"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ResIdx)</Highlight></CodeLine>
<Link id="l03155" /><CodeLine lineNumber="3155"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getProcResource(ResIdx)-&gt;Name &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03156" /><CodeLine lineNumber="3156"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03157" /><CodeLine lineNumber="3157"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;         &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03158" /><CodeLine lineNumber="3158"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a>)</Highlight></CodeLine>
<Link id="l03159" /><CodeLine lineNumber="3159"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; cycles &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03160" /><CodeLine lineNumber="3160"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03161" /><CodeLine lineNumber="3161"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;          &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03162" /><CodeLine lineNumber="3162"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03163" /><CodeLine lineNumber="3163"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03164" /><CodeLine lineNumber="3164"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03165" /><CodeLine lineNumber="3165"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03166" /><CodeLine lineNumber="3166"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal"><a href="/docs/api/namespaces/llvm">llvm</a> &#123;</Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03167" /><CodeLine lineNumber="3167"><Highlight kind="comment">/// Return true if this heuristic determines order.</Highlight></CodeLine>
<Link id="l03168" /><CodeLine lineNumber="3168"><Highlight kind="comment">/// TODO: Consider refactor return type of these functions as integer or enum,</Highlight></CodeLine>
<Link id="l03169" /><CodeLine lineNumber="3169"><Highlight kind="comment">/// as we may need to differentiate whether TryCand is better than Cand.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03170" /><CodeLine lineNumber="3170" lineLink="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> TryVal, </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> CandVal,</Highlight></CodeLine>
<Link id="l03171" /><CodeLine lineNumber="3171"><Highlight kind="normal">             <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;TryCand,</Highlight></CodeLine>
<Link id="l03172" /><CodeLine lineNumber="3172"><Highlight kind="normal">             <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;Cand,</Highlight></CodeLine>
<Link id="l03173" /><CodeLine lineNumber="3173"><Highlight kind="normal">             <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3">GenericSchedulerBase::CandReason</a> Reason) &#123;</Highlight></CodeLine>
<Link id="l03174" /><CodeLine lineNumber="3174"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TryVal &lt; CandVal) &#123;</Highlight></CodeLine>
<Link id="l03175" /><CodeLine lineNumber="3175"><Highlight kind="normal">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> = Reason;</Highlight></CodeLine>
<Link id="l03176" /><CodeLine lineNumber="3176"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03177" /><CodeLine lineNumber="3177"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03178" /><CodeLine lineNumber="3178"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TryVal &gt; CandVal) &#123;</Highlight></CodeLine>
<Link id="l03179" /><CodeLine lineNumber="3179"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> &gt; Reason)</Highlight></CodeLine>
<Link id="l03180" /><CodeLine lineNumber="3180"><Highlight kind="normal">      Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> = Reason;</Highlight></CodeLine>
<Link id="l03181" /><CodeLine lineNumber="3181"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03182" /><CodeLine lineNumber="3182"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03183" /><CodeLine lineNumber="3183"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03184" /><CodeLine lineNumber="3184"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03185" /><CodeLine lineNumber="3185"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03186" /><CodeLine lineNumber="3186" lineLink="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> TryVal, </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> CandVal,</Highlight></CodeLine>
<Link id="l03187" /><CodeLine lineNumber="3187"><Highlight kind="normal">                <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;TryCand,</Highlight></CodeLine>
<Link id="l03188" /><CodeLine lineNumber="3188"><Highlight kind="normal">                <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;Cand,</Highlight></CodeLine>
<Link id="l03189" /><CodeLine lineNumber="3189"><Highlight kind="normal">                <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3">GenericSchedulerBase::CandReason</a> Reason) &#123;</Highlight></CodeLine>
<Link id="l03190" /><CodeLine lineNumber="3190"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TryVal &gt; CandVal) &#123;</Highlight></CodeLine>
<Link id="l03191" /><CodeLine lineNumber="3191"><Highlight kind="normal">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> = Reason;</Highlight></CodeLine>
<Link id="l03192" /><CodeLine lineNumber="3192"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03193" /><CodeLine lineNumber="3193"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03194" /><CodeLine lineNumber="3194"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TryVal &lt; CandVal) &#123;</Highlight></CodeLine>
<Link id="l03195" /><CodeLine lineNumber="3195"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> &gt; Reason)</Highlight></CodeLine>
<Link id="l03196" /><CodeLine lineNumber="3196"><Highlight kind="normal">      Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> = Reason;</Highlight></CodeLine>
<Link id="l03197" /><CodeLine lineNumber="3197"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03198" /><CodeLine lineNumber="3198"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03199" /><CodeLine lineNumber="3199"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03200" /><CodeLine lineNumber="3200"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03201" /><CodeLine lineNumber="3201"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03202" /><CodeLine lineNumber="3202" lineLink="/docs/api/namespaces/llvm/#a8c9a83bf7b5f6e85f215ff07a31e0fbe"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a8c9a83bf7b5f6e85f215ff07a31e0fbe">tryLatency</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;TryCand,</Highlight></CodeLine>
<Link id="l03203" /><CodeLine lineNumber="3203"><Highlight kind="normal">                <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;Cand,</Highlight></CodeLine>
<Link id="l03204" /><CodeLine lineNumber="3204"><Highlight kind="normal">                <a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &amp;Zone) &#123;</Highlight></CodeLine>
<Link id="l03205" /><CodeLine lineNumber="3205"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Zone.<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>()) &#123;</Highlight></CodeLine>
<Link id="l03206" /><CodeLine lineNumber="3206"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Prefer the candidate with the lesser depth, but only if one of them has</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03207" /><CodeLine lineNumber="3207"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// depth greater than the total latency scheduled so far, otherwise either</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03208" /><CodeLine lineNumber="3208"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// of them could be scheduled now with no stall.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03209" /><CodeLine lineNumber="3209"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::max(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>(), Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>()) &gt;</Highlight></CodeLine>
<Link id="l03210" /><CodeLine lineNumber="3210"><Highlight kind="normal">        Zone.<a href="/docs/api/classes/llvm/schedboundary/#a29ef846d6fac7aa275808c8866035968">getScheduledLatency</a>()) &#123;</Highlight></CodeLine>
<Link id="l03211" /><CodeLine lineNumber="3211"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>(), Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>(),</Highlight></CodeLine>
<Link id="l03212" /><CodeLine lineNumber="3212"><Highlight kind="normal">                  TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3afb16e35278ff80f34d2ad9889213b406">GenericSchedulerBase::TopDepthReduce</a>))</Highlight></CodeLine>
<Link id="l03213" /><CodeLine lineNumber="3213"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03214" /><CodeLine lineNumber="3214"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03215" /><CodeLine lineNumber="3215"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>(), Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>(),</Highlight></CodeLine>
<Link id="l03216" /><CodeLine lineNumber="3216"><Highlight kind="normal">                   TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a768a7f66e30d6b2d2d81ab1af56bf6c4">GenericSchedulerBase::TopPathReduce</a>))</Highlight></CodeLine>
<Link id="l03217" /><CodeLine lineNumber="3217"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03218" /><CodeLine lineNumber="3218"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03219" /><CodeLine lineNumber="3219"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Prefer the candidate with the lesser height, but only if one of them has</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03220" /><CodeLine lineNumber="3220"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// height greater than the total latency scheduled so far, otherwise either</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03221" /><CodeLine lineNumber="3221"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// of them could be scheduled now with no stall.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03222" /><CodeLine lineNumber="3222"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::max(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>(), Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>()) &gt;</Highlight></CodeLine>
<Link id="l03223" /><CodeLine lineNumber="3223"><Highlight kind="normal">        Zone.<a href="/docs/api/classes/llvm/schedboundary/#a29ef846d6fac7aa275808c8866035968">getScheduledLatency</a>()) &#123;</Highlight></CodeLine>
<Link id="l03224" /><CodeLine lineNumber="3224"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>(), Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a582da862b28b876ef2235781392cffa6">getHeight</a>(),</Highlight></CodeLine>
<Link id="l03225" /><CodeLine lineNumber="3225"><Highlight kind="normal">                  TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a8ea4d71243c1b82d5e35065d580c1e49">GenericSchedulerBase::BotHeightReduce</a>))</Highlight></CodeLine>
<Link id="l03226" /><CodeLine lineNumber="3226"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03227" /><CodeLine lineNumber="3227"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03228" /><CodeLine lineNumber="3228"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>(), Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>(),</Highlight></CodeLine>
<Link id="l03229" /><CodeLine lineNumber="3229"><Highlight kind="normal">                   TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3ad3c3c8a47c777d0f591ca18eaf7000d4">GenericSchedulerBase::BotPathReduce</a>))</Highlight></CodeLine>
<Link id="l03230" /><CodeLine lineNumber="3230"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03231" /><CodeLine lineNumber="3231"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03232" /><CodeLine lineNumber="3232"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03233" /><CodeLine lineNumber="3233"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03234" /><CodeLine lineNumber="3234"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// end namespace llvm</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03235" /><CodeLine lineNumber="3235"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03236" /><CodeLine lineNumber="3236" lineLink="#a14c35b53586841aad69751a52b7d358a"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3">GenericSchedulerBase::CandReason</a> Reason, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsTop) &#123;</Highlight></CodeLine>
<Link id="l03237" /><CodeLine lineNumber="3237"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Pick &quot;</Highlight><Highlight kind="normal"> &lt;&lt; (IsTop ? </Highlight><Highlight kind="stringliteral">&quot;Top &quot;</Highlight><Highlight kind="normal"> : </Highlight><Highlight kind="stringliteral">&quot;Bot &quot;</Highlight><Highlight kind="normal">)</Highlight></CodeLine>
<Link id="l03238" /><CodeLine lineNumber="3238"><Highlight kind="normal">                    &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9df77ae80f822b788cb2464992a05bc1">GenericSchedulerBase::getReasonStr</a>(Reason) &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03239" /><CodeLine lineNumber="3239"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03240" /><CodeLine lineNumber="3240"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03241" /><CodeLine lineNumber="3241" lineLink="#a3352d36ab68528af960439073f22b304"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;Cand) &#123;</Highlight></CodeLine>
<Link id="l03242" /><CodeLine lineNumber="3242"><Highlight kind="normal">  <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a>, Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>);</Highlight></CodeLine>
<Link id="l03243" /><CodeLine lineNumber="3243"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03244" /><CodeLine lineNumber="3244"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03245" /><CodeLine lineNumber="3245" lineLink="/docs/api/classes/llvm/genericscheduler/#aa8cddd2ea015f8177a8395035f87e332"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericscheduler/#aa8cddd2ea015f8177a8395035f87e332">GenericScheduler::initialize</a>(<a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;dag) &#123;</Highlight></CodeLine>
<Link id="l03246" /><CodeLine lineNumber="3246"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(dag-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a78c0f3feb8a81ca338f843494cff564e">hasVRegLiveness</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l03247" /><CodeLine lineNumber="3247"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;(PreRA)GenericScheduler needs vreg liveness&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03248" /><CodeLine lineNumber="3248"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a> = </Highlight><Highlight kind="keyword">static&#95;cast&lt;</Highlight><Highlight kind="normal"><a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>&#42;</Highlight><Highlight kind="keyword">&gt;</Highlight><Highlight kind="normal">(dag);</Highlight></CodeLine>
<Link id="l03249" /><CodeLine lineNumber="3249"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a> = <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getSchedModel();</Highlight></CodeLine>
<Link id="l03250" /><CodeLine lineNumber="3250"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#ae9476ffbc2f3f195a2116b13f3186194">TRI</a> = <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;TRI;</Highlight></CodeLine>
<Link id="l03251" /><CodeLine lineNumber="3251"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03252" /><CodeLine lineNumber="3252"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.ComputeDFSResult)</Highlight></CodeLine>
<Link id="l03253" /><CodeLine lineNumber="3253"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;computeDFSResult();</Highlight></CodeLine>
<Link id="l03254" /><CodeLine lineNumber="3254"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03255" /><CodeLine lineNumber="3255"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.init(<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>);</Highlight></CodeLine>
<Link id="l03256" /><CodeLine lineNumber="3256"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.init(<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>, &amp;<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>);</Highlight></CodeLine>
<Link id="l03257" /><CodeLine lineNumber="3257"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.init(<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>, &amp;<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>);</Highlight></CodeLine>
<Link id="l03258" /><CodeLine lineNumber="3258"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03259" /><CodeLine lineNumber="3259"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Initialize resource counts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03260" /><CodeLine lineNumber="3260"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03261" /><CodeLine lineNumber="3261"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Initialize the HazardRecognizers. If itineraries don&#39;t exist, are empty, or</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03262" /><CodeLine lineNumber="3262"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// are disabled, then these HazardRecs will be disabled.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03263" /><CodeLine lineNumber="3263"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/instritinerarydata">InstrItineraryData</a> &#42;Itin = <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getInstrItineraries();</Highlight></CodeLine>
<Link id="l03264" /><CodeLine lineNumber="3264"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.HazardRec) &#123;</Highlight></CodeLine>
<Link id="l03265" /><CodeLine lineNumber="3265"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.HazardRec = <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;TII-&gt;CreateTargetMIHazardRecognizer(Itin, <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>);</Highlight></CodeLine>
<Link id="l03266" /><CodeLine lineNumber="3266"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03267" /><CodeLine lineNumber="3267"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.HazardRec) &#123;</Highlight></CodeLine>
<Link id="l03268" /><CodeLine lineNumber="3268"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.HazardRec = <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;TII-&gt;CreateTargetMIHazardRecognizer(Itin, <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>);</Highlight></CodeLine>
<Link id="l03269" /><CodeLine lineNumber="3269"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03270" /><CodeLine lineNumber="3270"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.SU = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03271" /><CodeLine lineNumber="3271"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.SU = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03272" /><CodeLine lineNumber="3272"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03273" /><CodeLine lineNumber="3273"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03274" /><CodeLine lineNumber="3274"><Highlight kind="comment">/// Initialize the per-region scheduling policy.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03275" /><CodeLine lineNumber="3275" lineLink="/docs/api/classes/llvm/genericscheduler/#ac8e2225e71c3b7d40575a2ab9bfffc78"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericscheduler/#ac8e2225e71c3b7d40575a2ab9bfffc78">GenericScheduler::initPolicy</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> Begin,</Highlight></CodeLine>
<Link id="l03276" /><CodeLine lineNumber="3276"><Highlight kind="normal">                                  <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> End,</Highlight></CodeLine>
<Link id="l03277" /><CodeLine lineNumber="3277"><Highlight kind="normal">                                  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumRegionInstrs) &#123;</Highlight></CodeLine>
<Link id="l03278" /><CodeLine lineNumber="3278"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = &#42;Begin-&gt;getMF();</Highlight></CodeLine>
<Link id="l03279" /><CodeLine lineNumber="3279"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &#42;TLI = MF.<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>().<a href="/docs/api/classes/llvm/targetsubtargetinfo/#ade3f0d8b35d67c43df9425bb730a9a7c">getTargetLowering</a>();</Highlight></CodeLine>
<Link id="l03280" /><CodeLine lineNumber="3280"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03281" /><CodeLine lineNumber="3281"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Avoid setting up the register pressure tracker for small regions to save</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03282" /><CodeLine lineNumber="3282"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// compile time. As a rough heuristic, only track pressure when the number of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03283" /><CodeLine lineNumber="3283"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// schedulable instructions exceeds half the allocatable integer register file</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03284" /><CodeLine lineNumber="3284"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// that is the largest legal integer regiser type.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03285" /><CodeLine lineNumber="3285"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.ShouldTrackPressure = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03286" /><CodeLine lineNumber="3286"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> VT = MVT::i64; VT &gt; (unsigned)MVT::i1; --VT) &#123;</Highlight></CodeLine>
<Link id="l03287" /><CodeLine lineNumber="3287"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/mvt/#a184043a6ab3a9922618b34117003e64d">MVT::SimpleValueType</a> LegalIntVT = (<a href="/docs/api/classes/llvm/mvt/#a184043a6ab3a9922618b34117003e64d">MVT::SimpleValueType</a>)VT;</Highlight></CodeLine>
<Link id="l03288" /><CodeLine lineNumber="3288"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TLI-&gt;<a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(LegalIntVT)) &#123;</Highlight></CodeLine>
<Link id="l03289" /><CodeLine lineNumber="3289"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NIntRegs = <a href="/docs/api/classes/llvm/genericschedulerbase/#ad0f9f52bf2f7c54d9546cedd1c47ef45">Context</a>-&gt;RegClassInfo-&gt;getNumAllocatableRegs(</Highlight></CodeLine>
<Link id="l03290" /><CodeLine lineNumber="3290"><Highlight kind="normal">        TLI-&gt;<a href="/docs/api/classes/llvm/targetloweringbase/#a1a78b9f867cb5be3a052d6ad972484ca">getRegClassFor</a>(LegalIntVT));</Highlight></CodeLine>
<Link id="l03291" /><CodeLine lineNumber="3291"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.ShouldTrackPressure = NumRegionInstrs &gt; (NIntRegs / 2);</Highlight></CodeLine>
<Link id="l03292" /><CodeLine lineNumber="3292"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03293" /><CodeLine lineNumber="3293"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03294" /><CodeLine lineNumber="3294"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03295" /><CodeLine lineNumber="3295"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03296" /><CodeLine lineNumber="3296"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For generic targets, we default to bottom-up, because it&#39;s simpler and more</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03297" /><CodeLine lineNumber="3297"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// compile-time optimizations have been implemented in that direction.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03298" /><CodeLine lineNumber="3298"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03299" /><CodeLine lineNumber="3299"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03300" /><CodeLine lineNumber="3300"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Allow the subtarget to override default policy.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03301" /><CodeLine lineNumber="3301"><Highlight kind="normal">  MF.<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>().<a href="/docs/api/classes/llvm/targetsubtargetinfo/#a9cd7c54e0bb13cc01c4e2a4133a40ee4">overrideSchedPolicy</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>, NumRegionInstrs);</Highlight></CodeLine>
<Link id="l03302" /><CodeLine lineNumber="3302"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03303" /><CodeLine lineNumber="3303"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// After subtarget overrides, apply command line options.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03304" /><CodeLine lineNumber="3304"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="#a589614403a45de30e887d6401dc1be2a">EnableRegPressure</a>) &#123;</Highlight></CodeLine>
<Link id="l03305" /><CodeLine lineNumber="3305"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.ShouldTrackPressure = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03306" /><CodeLine lineNumber="3306"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.ShouldTrackLaneMasks = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03307" /><CodeLine lineNumber="3307"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03308" /><CodeLine lineNumber="3308"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03309" /><CodeLine lineNumber="3309"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#aa9ff814049edfef549accbca1a8e9eff">PreRADirection</a> == <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3ae89742249a15ad5696e3dcec82f0e76a">MISched::TopDown</a>) &#123;</Highlight></CodeLine>
<Link id="l03310" /><CodeLine lineNumber="3310"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03311" /><CodeLine lineNumber="3311"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03312" /><CodeLine lineNumber="3312"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#aa9ff814049edfef549accbca1a8e9eff">PreRADirection</a> == <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3abd98ce24773c9ca1e3f7ce3c541e43ea">MISched::BottomUp</a>) &#123;</Highlight></CodeLine>
<Link id="l03313" /><CodeLine lineNumber="3313"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03314" /><CodeLine lineNumber="3314"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03315" /><CodeLine lineNumber="3315"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#aa9ff814049edfef549accbca1a8e9eff">PreRADirection</a> == <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3aab012f17d1537ed7a7c6d45b1d2fc0e9">MISched::Bidirectional</a>) &#123;</Highlight></CodeLine>
<Link id="l03316" /><CodeLine lineNumber="3316"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03317" /><CodeLine lineNumber="3317"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03318" /><CodeLine lineNumber="3318"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03319" /><CodeLine lineNumber="3319"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03320" /><CodeLine lineNumber="3320"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03321" /><CodeLine lineNumber="3321" lineLink="/docs/api/classes/llvm/genericscheduler/#a8329c2fe0a6267d1e0f94dc4aecc5892"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericscheduler/#a8329c2fe0a6267d1e0f94dc4aecc5892">GenericScheduler::dumpPolicy</a>()</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03322" /><CodeLine lineNumber="3322"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Cannot completely remove virtual function even in release mode.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03323" /><CodeLine lineNumber="3323"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#if !defined(NDEBUG) || defined(LLVM&#95;ENABLE&#95;DUMP)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03324" /><CodeLine lineNumber="3324"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;GenericScheduler RegionPolicy: &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03325" /><CodeLine lineNumber="3325"><Highlight kind="normal">         &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; ShouldTrackPressure=&quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.ShouldTrackPressure</Highlight></CodeLine>
<Link id="l03326" /><CodeLine lineNumber="3326"><Highlight kind="normal">         &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; OnlyTopDown=&quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown</Highlight></CodeLine>
<Link id="l03327" /><CodeLine lineNumber="3327"><Highlight kind="normal">         &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; OnlyBottomUp=&quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp</Highlight></CodeLine>
<Link id="l03328" /><CodeLine lineNumber="3328"><Highlight kind="normal">         &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03329" /><CodeLine lineNumber="3329"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03330" /><CodeLine lineNumber="3330"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03331" /><CodeLine lineNumber="3331"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03332" /><CodeLine lineNumber="3332"><Highlight kind="comment">/// Set IsAcyclicLatencyLimited if the acyclic path is longer than the cyclic</Highlight></CodeLine>
<Link id="l03333" /><CodeLine lineNumber="3333"><Highlight kind="comment">/// critical path by more cycles than it takes to drain the instruction buffer.</Highlight></CodeLine>
<Link id="l03334" /><CodeLine lineNumber="3334"><Highlight kind="comment">/// We estimate an upper bounds on in-flight instructions as:</Highlight></CodeLine>
<Link id="l03335" /><CodeLine lineNumber="3335"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l03336" /><CodeLine lineNumber="3336"><Highlight kind="comment">/// CyclesPerIteration = max( CyclicPath, Loop-Resource-Height )</Highlight></CodeLine>
<Link id="l03337" /><CodeLine lineNumber="3337"><Highlight kind="comment">/// InFlightIterations = AcyclicPath / CyclesPerIteration</Highlight></CodeLine>
<Link id="l03338" /><CodeLine lineNumber="3338"><Highlight kind="comment">/// InFlightResources = InFlightIterations &#42; LoopResources</Highlight></CodeLine>
<Link id="l03339" /><CodeLine lineNumber="3339"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l03340" /><CodeLine lineNumber="3340"><Highlight kind="comment">/// TODO: Check execution resources in addition to IssueCount.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03341" /><CodeLine lineNumber="3341" lineLink="/docs/api/classes/llvm/genericscheduler/#a0aa33f27fbf7be1e7e53512ceb6de885"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericscheduler/#a0aa33f27fbf7be1e7e53512ceb6de885">GenericScheduler::checkAcyclicLatency</a>() &#123;</Highlight></CodeLine>
<Link id="l03342" /><CodeLine lineNumber="3342"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CyclicCritPath == 0 || <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CyclicCritPath &gt;= <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath)</Highlight></CodeLine>
<Link id="l03343" /><CodeLine lineNumber="3343"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03344" /><CodeLine lineNumber="3344"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03345" /><CodeLine lineNumber="3345"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Scaled number of cycles per loop iteration.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03346" /><CodeLine lineNumber="3346"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> IterCount =</Highlight></CodeLine>
<Link id="l03347" /><CodeLine lineNumber="3347"><Highlight kind="normal">    std::max(<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CyclicCritPath &#42; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getLatencyFactor(),</Highlight></CodeLine>
<Link id="l03348" /><CodeLine lineNumber="3348"><Highlight kind="normal">             <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.RemIssueCount);</Highlight></CodeLine>
<Link id="l03349" /><CodeLine lineNumber="3349"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Scaled acyclic critical path.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03350" /><CodeLine lineNumber="3350"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> AcyclicCount = <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath &#42; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getLatencyFactor();</Highlight></CodeLine>
<Link id="l03351" /><CodeLine lineNumber="3351"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// InFlightCount = (AcyclicPath / IterCycles) &#42; InstrPerLoop</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03352" /><CodeLine lineNumber="3352"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> InFlightCount =</Highlight></CodeLine>
<Link id="l03353" /><CodeLine lineNumber="3353"><Highlight kind="normal">    (AcyclicCount &#42; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.RemIssueCount + IterCount-1) / IterCount;</Highlight></CodeLine>
<Link id="l03354" /><CodeLine lineNumber="3354"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> BufferLimit =</Highlight></CodeLine>
<Link id="l03355" /><CodeLine lineNumber="3355"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getMicroOpBufferSize() &#42; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getMicroOpFactor();</Highlight></CodeLine>
<Link id="l03356" /><CodeLine lineNumber="3356"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03357" /><CodeLine lineNumber="3357"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.IsAcyclicLatencyLimited = InFlightCount &gt; BufferLimit;</Highlight></CodeLine>
<Link id="l03358" /><CodeLine lineNumber="3358"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03359" /><CodeLine lineNumber="3359"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</Highlight></CodeLine>
<Link id="l03360" /><CodeLine lineNumber="3360"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;IssueCycles=&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03361" /><CodeLine lineNumber="3361"><Highlight kind="normal">             &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.RemIssueCount / <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getLatencyFactor() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03362" /><CodeLine lineNumber="3362"><Highlight kind="normal">             &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;IterCycles=&quot;</Highlight><Highlight kind="normal"> &lt;&lt; IterCount / <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getLatencyFactor()</Highlight></CodeLine>
<Link id="l03363" /><CodeLine lineNumber="3363"><Highlight kind="normal">             &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;c NumIters=&quot;</Highlight><Highlight kind="normal"> &lt;&lt; (AcyclicCount + IterCount - 1) / IterCount</Highlight></CodeLine>
<Link id="l03364" /><CodeLine lineNumber="3364"><Highlight kind="normal">             &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; InFlight=&quot;</Highlight><Highlight kind="normal"> &lt;&lt; InFlightCount / <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getMicroOpFactor()</Highlight></CodeLine>
<Link id="l03365" /><CodeLine lineNumber="3365"><Highlight kind="normal">             &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;m BufferLim=&quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getMicroOpBufferSize() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;m\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03366" /><CodeLine lineNumber="3366"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#acdfbcf188e2d4a80837e89de2ccdffab">if</a> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.IsAcyclicLatencyLimited) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  ACYCLIC LATENCY LIMIT\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03367" /><CodeLine lineNumber="3367"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03368" /><CodeLine lineNumber="3368"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03369" /><CodeLine lineNumber="3369" lineLink="/docs/api/classes/llvm/genericscheduler/#ac047246e76df6b86564a6b62c2403aef"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericscheduler/#ac047246e76df6b86564a6b62c2403aef">GenericScheduler::registerRoots</a>() &#123;</Highlight></CodeLine>
<Link id="l03370" /><CodeLine lineNumber="3370"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath = <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;ExitSU.getDepth();</Highlight></CodeLine>
<Link id="l03371" /><CodeLine lineNumber="3371"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03372" /><CodeLine lineNumber="3372"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Some roots may not feed into ExitSU. Check all of them in case.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03373" /><CodeLine lineNumber="3373"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU : <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.Available) &#123;</Highlight></CodeLine>
<Link id="l03374" /><CodeLine lineNumber="3374"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>() &gt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath)</Highlight></CodeLine>
<Link id="l03375" /><CodeLine lineNumber="3375"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>();</Highlight></CodeLine>
<Link id="l03376" /><CodeLine lineNumber="3376"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03377" /><CodeLine lineNumber="3377"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Critical Path(GS-RR ): &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03378" /><CodeLine lineNumber="3378"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a82ab0315644106de03b36f143328179f">DumpCriticalPathLength</a>) &#123;</Highlight></CodeLine>
<Link id="l03379" /><CodeLine lineNumber="3379"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Critical Path(GS-RR ): &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; \\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03380" /><CodeLine lineNumber="3380"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03381" /><CodeLine lineNumber="3381"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03382" /><CodeLine lineNumber="3382"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a2f23c1bd760a7a5a5acc6e4eb40bd9d9">EnableCyclicPath</a> &amp;&amp; <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getMicroOpBufferSize() &gt; 0) &#123;</Highlight></CodeLine>
<Link id="l03383" /><CodeLine lineNumber="3383"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CyclicCritPath = <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;computeCyclicCriticalPath();</Highlight></CodeLine>
<Link id="l03384" /><CodeLine lineNumber="3384"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericscheduler/#a0aa33f27fbf7be1e7e53512ceb6de885">checkAcyclicLatency</a>();</Highlight></CodeLine>
<Link id="l03385" /><CodeLine lineNumber="3385"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03386" /><CodeLine lineNumber="3386"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03387" /><CodeLine lineNumber="3387"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03388" /><CodeLine lineNumber="3388"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal"><a href="/docs/api/namespaces/llvm">llvm</a> &#123;</Highlight></CodeLine>
<Link id="l03389" /><CodeLine lineNumber="3389" lineLink="/docs/api/namespaces/llvm/#a62cf34ac18c5612524978166788b5c80"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a62cf34ac18c5612524978166788b5c80">tryPressure</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/pressurechange">PressureChange</a> &amp;TryP,</Highlight></CodeLine>
<Link id="l03390" /><CodeLine lineNumber="3390"><Highlight kind="normal">                 </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/pressurechange">PressureChange</a> &amp;CandP,</Highlight></CodeLine>
<Link id="l03391" /><CodeLine lineNumber="3391"><Highlight kind="normal">                 <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;TryCand,</Highlight></CodeLine>
<Link id="l03392" /><CodeLine lineNumber="3392"><Highlight kind="normal">                 <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">GenericSchedulerBase::SchedCandidate</a> &amp;Cand,</Highlight></CodeLine>
<Link id="l03393" /><CodeLine lineNumber="3393"><Highlight kind="normal">                 <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3">GenericSchedulerBase::CandReason</a> Reason,</Highlight></CodeLine>
<Link id="l03394" /><CodeLine lineNumber="3394"><Highlight kind="normal">                 </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>,</Highlight></CodeLine>
<Link id="l03395" /><CodeLine lineNumber="3395"><Highlight kind="normal">                 </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF) &#123;</Highlight></CodeLine>
<Link id="l03396" /><CodeLine lineNumber="3396"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If one candidate decreases and the other increases, go with it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03397" /><CodeLine lineNumber="3397"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Invalid candidates have UnitInc==0.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03398" /><CodeLine lineNumber="3398"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryP.<a href="/docs/api/classes/llvm/pressurechange/#a1eef24878593ee0080b20b96ce3eb4c4">getUnitInc</a>() &lt; 0, CandP.<a href="/docs/api/classes/llvm/pressurechange/#a1eef24878593ee0080b20b96ce3eb4c4">getUnitInc</a>() &lt; 0, TryCand, Cand,</Highlight></CodeLine>
<Link id="l03399" /><CodeLine lineNumber="3399"><Highlight kind="normal">                 Reason)) &#123;</Highlight></CodeLine>
<Link id="l03400" /><CodeLine lineNumber="3400"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03401" /><CodeLine lineNumber="3401"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03402" /><CodeLine lineNumber="3402"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Do not compare the magnitude of pressure changes between top and bottom</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03403" /><CodeLine lineNumber="3403"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// boundary.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03404" /><CodeLine lineNumber="3404"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> != TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>)</Highlight></CodeLine>
<Link id="l03405" /><CodeLine lineNumber="3405"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03406" /><CodeLine lineNumber="3406"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03407" /><CodeLine lineNumber="3407"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If both candidates affect the same set in the same boundary, go with the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03408" /><CodeLine lineNumber="3408"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// smallest increase.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03409" /><CodeLine lineNumber="3409"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> TryPSet = TryP.<a href="/docs/api/classes/llvm/pressurechange/#a2914e3c0dd7cb72d6d1eb4343a0bd6c9">getPSetOrMax</a>();</Highlight></CodeLine>
<Link id="l03410" /><CodeLine lineNumber="3410"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> CandPSet = CandP.<a href="/docs/api/classes/llvm/pressurechange/#a2914e3c0dd7cb72d6d1eb4343a0bd6c9">getPSetOrMax</a>();</Highlight></CodeLine>
<Link id="l03411" /><CodeLine lineNumber="3411"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TryPSet == CandPSet) &#123;</Highlight></CodeLine>
<Link id="l03412" /><CodeLine lineNumber="3412"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(TryP.<a href="/docs/api/classes/llvm/pressurechange/#a1eef24878593ee0080b20b96ce3eb4c4">getUnitInc</a>(), CandP.<a href="/docs/api/classes/llvm/pressurechange/#a1eef24878593ee0080b20b96ce3eb4c4">getUnitInc</a>(), TryCand, Cand,</Highlight></CodeLine>
<Link id="l03413" /><CodeLine lineNumber="3413"><Highlight kind="normal">                   Reason);</Highlight></CodeLine>
<Link id="l03414" /><CodeLine lineNumber="3414"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03415" /><CodeLine lineNumber="3415"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03416" /><CodeLine lineNumber="3416"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> TryRank = TryP.<a href="/docs/api/classes/llvm/pressurechange/#a488d33ac015981b0f8e2086fcbd49db2">isValid</a>() ? <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;getRegPressureSetScore(MF, TryPSet) :</Highlight></CodeLine>
<Link id="l03417" /><CodeLine lineNumber="3417"><Highlight kind="normal">                                 std::numeric&#95;limits&lt;int&gt;::max();</Highlight></CodeLine>
<Link id="l03418" /><CodeLine lineNumber="3418"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03419" /><CodeLine lineNumber="3419"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> CandRank = CandP.<a href="/docs/api/classes/llvm/pressurechange/#a488d33ac015981b0f8e2086fcbd49db2">isValid</a>() ? <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;getRegPressureSetScore(MF, CandPSet) :</Highlight></CodeLine>
<Link id="l03420" /><CodeLine lineNumber="3420"><Highlight kind="normal">                                   std::numeric&#95;limits&lt;int&gt;::max();</Highlight></CodeLine>
<Link id="l03421" /><CodeLine lineNumber="3421"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03422" /><CodeLine lineNumber="3422"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the candidates are decreasing pressure, reverse priority.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03423" /><CodeLine lineNumber="3423"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TryP.<a href="/docs/api/classes/llvm/pressurechange/#a1eef24878593ee0080b20b96ce3eb4c4">getUnitInc</a>() &lt; 0)</Highlight></CodeLine>
<Link id="l03424" /><CodeLine lineNumber="3424"><Highlight kind="normal">    <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(TryRank, CandRank);</Highlight></CodeLine>
<Link id="l03425" /><CodeLine lineNumber="3425"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryRank, CandRank, TryCand, Cand, Reason);</Highlight></CodeLine>
<Link id="l03426" /><CodeLine lineNumber="3426"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03427" /><CodeLine lineNumber="3427"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03428" /><CodeLine lineNumber="3428" lineLink="/docs/api/namespaces/llvm/#a13933f8ac2f5e1a34cf53b2c1e1bdc5b"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a13933f8ac2f5e1a34cf53b2c1e1bdc5b">getWeakLeft</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> isTop) &#123;</Highlight></CodeLine>
<Link id="l03429" /><CodeLine lineNumber="3429"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> (isTop) ? SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ab9e02660290b9557b547b57870133467">WeakPredsLeft</a> : SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae75d620ee809eaf50970a833f4a3ace9">WeakSuccsLeft</a>;</Highlight></CodeLine>
<Link id="l03430" /><CodeLine lineNumber="3430"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03431" /><CodeLine lineNumber="3431"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03432" /><CodeLine lineNumber="3432"><Highlight kind="comment">/// Minimize physical register live ranges. Regalloc wants them adjacent to</Highlight></CodeLine>
<Link id="l03433" /><CodeLine lineNumber="3433"><Highlight kind="comment">/// their physreg def/use.</Highlight></CodeLine>
<Link id="l03434" /><CodeLine lineNumber="3434"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l03435" /><CodeLine lineNumber="3435"><Highlight kind="comment">/// FIXME: This is an unnecessary check on the critical path. Most are root/leaf</Highlight></CodeLine>
<Link id="l03436" /><CodeLine lineNumber="3436"><Highlight kind="comment">/// copies which can be prescheduled. The rest (e.g. x86 MUL) could be bundled</Highlight></CodeLine>
<Link id="l03437" /><CodeLine lineNumber="3437"><Highlight kind="comment">/// with the operation that produces or consumes the physreg. We&#39;ll do this when</Highlight></CodeLine>
<Link id="l03438" /><CodeLine lineNumber="3438"><Highlight kind="comment">/// regalloc has support for parallel copies.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03439" /><CodeLine lineNumber="3439" lineLink="/docs/api/namespaces/llvm/#afb4b9423201406d79ba16481c90cb6cb"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#afb4b9423201406d79ba16481c90cb6cb">biasPhysReg</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> isTop) &#123;</Highlight></CodeLine>
<Link id="l03440" /><CodeLine lineNumber="3440"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</Highlight></CodeLine>
<Link id="l03441" /><CodeLine lineNumber="3441"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03442" /><CodeLine lineNumber="3442"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isCopy()) &#123;</Highlight></CodeLine>
<Link id="l03443" /><CodeLine lineNumber="3443"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ScheduledOper = isTop ? 1 : 0;</Highlight></CodeLine>
<Link id="l03444" /><CodeLine lineNumber="3444"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> UnscheduledOper = isTop ? 0 : 1;</Highlight></CodeLine>
<Link id="l03445" /><CodeLine lineNumber="3445"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we have already scheduled the physreg produce/consumer, immediately</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03446" /><CodeLine lineNumber="3446"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// schedule the copy.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03447" /><CodeLine lineNumber="3447"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(ScheduledOper).getReg().isPhysical())</Highlight></CodeLine>
<Link id="l03448" /><CodeLine lineNumber="3448"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 1;</Highlight></CodeLine>
<Link id="l03449" /><CodeLine lineNumber="3449"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the physreg is at the boundary, defer it. Otherwise schedule it</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03450" /><CodeLine lineNumber="3450"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// immediately to free the dependent. We can hoist the copy later.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03451" /><CodeLine lineNumber="3451"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AtBoundary = isTop ? !SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a40c2dfbd170941dd4d20ee9b60c9d49d">NumSuccsLeft</a> : !SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a94f78042fbba3ea4cd1004353daa46aa">NumPredsLeft</a>;</Highlight></CodeLine>
<Link id="l03452" /><CodeLine lineNumber="3452"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(UnscheduledOper).getReg().isPhysical())</Highlight></CodeLine>
<Link id="l03453" /><CodeLine lineNumber="3453"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> AtBoundary ? -1 : 1;</Highlight></CodeLine>
<Link id="l03454" /><CodeLine lineNumber="3454"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03455" /><CodeLine lineNumber="3455"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03456" /><CodeLine lineNumber="3456"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isMoveImmediate()) &#123;</Highlight></CodeLine>
<Link id="l03457" /><CodeLine lineNumber="3457"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we have a move immediate and all successors have been assigned, bias</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03458" /><CodeLine lineNumber="3458"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// towards scheduling this later. Make sure all register defs are to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03459" /><CodeLine lineNumber="3459"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// physical registers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03460" /><CodeLine lineNumber="3460"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> DoBias = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03461" /><CodeLine lineNumber="3461"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> : <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;defs()) &#123;</Highlight></CodeLine>
<Link id="l03462" /><CodeLine lineNumber="3462"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.isReg() &amp;&amp; !<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getReg().isPhysical()) &#123;</Highlight></CodeLine>
<Link id="l03463" /><CodeLine lineNumber="3463"><Highlight kind="normal">        DoBias = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03464" /><CodeLine lineNumber="3464"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03465" /><CodeLine lineNumber="3465"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03466" /><CodeLine lineNumber="3466"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03467" /><CodeLine lineNumber="3467"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03468" /><CodeLine lineNumber="3468"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DoBias)</Highlight></CodeLine>
<Link id="l03469" /><CodeLine lineNumber="3469"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> isTop ? -1 : 1;</Highlight></CodeLine>
<Link id="l03470" /><CodeLine lineNumber="3470"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03471" /><CodeLine lineNumber="3471"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03472" /><CodeLine lineNumber="3472"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 0;</Highlight></CodeLine>
<Link id="l03473" /><CodeLine lineNumber="3473"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03474" /><CodeLine lineNumber="3474"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// end namespace llvm</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03475" /><CodeLine lineNumber="3475"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03476" /><CodeLine lineNumber="3476" lineLink="/docs/api/classes/llvm/genericscheduler/#ab0d12eb20352f092840f7f8df60abe26"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericscheduler/#ab0d12eb20352f092840f7f8df60abe26">GenericScheduler::initCandidate</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> &amp;Cand, <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU,</Highlight></CodeLine>
<Link id="l03477" /><CodeLine lineNumber="3477"><Highlight kind="normal">                                     </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AtTop,</Highlight></CodeLine>
<Link id="l03478" /><CodeLine lineNumber="3478"><Highlight kind="normal">                                     </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/regpressuretracker">RegPressureTracker</a> &amp;RPTracker,</Highlight></CodeLine>
<Link id="l03479" /><CodeLine lineNumber="3479"><Highlight kind="normal">                                     <a href="/docs/api/classes/llvm/regpressuretracker">RegPressureTracker</a> &amp;TempTracker) &#123;</Highlight></CodeLine>
<Link id="l03480" /><CodeLine lineNumber="3480"><Highlight kind="normal">  Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> = SU;</Highlight></CodeLine>
<Link id="l03481" /><CodeLine lineNumber="3481"><Highlight kind="normal">  Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> = AtTop;</Highlight></CodeLine>
<Link id="l03482" /><CodeLine lineNumber="3482"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;isTrackingPressure()) &#123;</Highlight></CodeLine>
<Link id="l03483" /><CodeLine lineNumber="3483"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AtTop) &#123;</Highlight></CodeLine>
<Link id="l03484" /><CodeLine lineNumber="3484"><Highlight kind="normal">      TempTracker.<a href="/docs/api/classes/llvm/regpressuretracker/#a972fa38378a3d49a9bb48ca584621438">getMaxDownwardPressureDelta</a>(</Highlight></CodeLine>
<Link id="l03485" /><CodeLine lineNumber="3485"><Highlight kind="normal">        Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>(),</Highlight></CodeLine>
<Link id="l03486" /><CodeLine lineNumber="3486"><Highlight kind="normal">        Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>,</Highlight></CodeLine>
<Link id="l03487" /><CodeLine lineNumber="3487"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getRegionCriticalPSets(),</Highlight></CodeLine>
<Link id="l03488" /><CodeLine lineNumber="3488"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getRegPressure().MaxSetPressure);</Highlight></CodeLine>
<Link id="l03489" /><CodeLine lineNumber="3489"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03490" /><CodeLine lineNumber="3490"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>) &#123;</Highlight></CodeLine>
<Link id="l03491" /><CodeLine lineNumber="3491"><Highlight kind="normal">        TempTracker.<a href="/docs/api/classes/llvm/regpressuretracker/#a41a3118fb6bd46e397256b3c9794b61c">getMaxUpwardPressureDelta</a>(</Highlight></CodeLine>
<Link id="l03492" /><CodeLine lineNumber="3492"><Highlight kind="normal">          Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>(),</Highlight></CodeLine>
<Link id="l03493" /><CodeLine lineNumber="3493"><Highlight kind="normal">          &amp;<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getPressureDiff(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>),</Highlight></CodeLine>
<Link id="l03494" /><CodeLine lineNumber="3494"><Highlight kind="normal">          Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>,</Highlight></CodeLine>
<Link id="l03495" /><CodeLine lineNumber="3495"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getRegionCriticalPSets(),</Highlight></CodeLine>
<Link id="l03496" /><CodeLine lineNumber="3496"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getRegPressure().MaxSetPressure);</Highlight></CodeLine>
<Link id="l03497" /><CodeLine lineNumber="3497"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03498" /><CodeLine lineNumber="3498"><Highlight kind="normal">        RPTracker.<a href="/docs/api/classes/llvm/regpressuretracker/#af7a0688faef62284ad684e70f342b3da">getUpwardPressureDelta</a>(</Highlight></CodeLine>
<Link id="l03499" /><CodeLine lineNumber="3499"><Highlight kind="normal">          Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>(),</Highlight></CodeLine>
<Link id="l03500" /><CodeLine lineNumber="3500"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getPressureDiff(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>),</Highlight></CodeLine>
<Link id="l03501" /><CodeLine lineNumber="3501"><Highlight kind="normal">          Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>,</Highlight></CodeLine>
<Link id="l03502" /><CodeLine lineNumber="3502"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getRegionCriticalPSets(),</Highlight></CodeLine>
<Link id="l03503" /><CodeLine lineNumber="3503"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getRegPressure().MaxSetPressure);</Highlight></CodeLine>
<Link id="l03504" /><CodeLine lineNumber="3504"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03505" /><CodeLine lineNumber="3505"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03506" /><CodeLine lineNumber="3506"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03507" /><CodeLine lineNumber="3507"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(</Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a href="/docs/api/classes/llvm/pressurechange/#a488d33ac015981b0f8e2086fcbd49db2">isValid</a>()) <a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</Highlight></CodeLine>
<Link id="l03508" /><CodeLine lineNumber="3508"><Highlight kind="normal">             &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  Try  SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03509" /><CodeLine lineNumber="3509"><Highlight kind="normal">             &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#ae9476ffbc2f3f195a2116b13f3186194">TRI</a>-&gt;getRegPressureSetName(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a href="/docs/api/classes/llvm/pressurechange/#ad47247ae6eaa7104e4d4ef6e002840f9">getPSet</a>()) &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;:&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03510" /><CodeLine lineNumber="3510"><Highlight kind="normal">             &lt;&lt; Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a href="/docs/api/classes/llvm/pressurechange/#a1eef24878593ee0080b20b96ce3eb4c4">getUnitInc</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03511" /><CodeLine lineNumber="3511"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03512" /><CodeLine lineNumber="3512"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03513" /><CodeLine lineNumber="3513"><Highlight kind="comment">/// Apply a set of heuristics to a new candidate. Heuristics are currently</Highlight></CodeLine>
<Link id="l03514" /><CodeLine lineNumber="3514"><Highlight kind="comment">/// hierarchical. This may be more efficient than a graduated cost model because</Highlight></CodeLine>
<Link id="l03515" /><CodeLine lineNumber="3515"><Highlight kind="comment">/// we don&#39;t need to evaluate all aspects of the model for each node in the</Highlight></CodeLine>
<Link id="l03516" /><CodeLine lineNumber="3516"><Highlight kind="comment">/// queue. But it&#39;s really done to make the heuristics easier to debug and</Highlight></CodeLine>
<Link id="l03517" /><CodeLine lineNumber="3517"><Highlight kind="comment">/// statistically analyze.</Highlight></CodeLine>
<Link id="l03518" /><CodeLine lineNumber="3518"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l03519" /><CodeLine lineNumber="3519"><Highlight kind="comment">/// \\param Cand provides the policy and current best candidate.</Highlight></CodeLine>
<Link id="l03520" /><CodeLine lineNumber="3520"><Highlight kind="comment">/// \\param TryCand refers to the next SUnit candidate, otherwise uninitialized.</Highlight></CodeLine>
<Link id="l03521" /><CodeLine lineNumber="3521"><Highlight kind="comment">/// \\param Zone describes the scheduled zone that we are extending, or nullptr</Highlight></CodeLine>
<Link id="l03522" /><CodeLine lineNumber="3522"><Highlight kind="comment">///             if Cand is from a different zone than TryCand.</Highlight></CodeLine>
<Link id="l03523" /><CodeLine lineNumber="3523"><Highlight kind="comment">/// \\return \\c true if TryCand is better than Cand (Reason is NOT NoCand)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03524" /><CodeLine lineNumber="3524" lineLink="/docs/api/classes/llvm/genericscheduler/#a6ef23d22af6c895d9c255de3e940b8bf"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericscheduler/#a6ef23d22af6c895d9c255de3e940b8bf">GenericScheduler::tryCandidate</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> &amp;Cand,</Highlight></CodeLine>
<Link id="l03525" /><CodeLine lineNumber="3525"><Highlight kind="normal">                                    <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> &amp;TryCand,</Highlight></CodeLine>
<Link id="l03526" /><CodeLine lineNumber="3526"><Highlight kind="normal">                                    <a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &#42;Zone)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03527" /><CodeLine lineNumber="3527"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Initialize the candidate if needed.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03528" /><CodeLine lineNumber="3528"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#acdc733638a93dca6bb0eb290ec896271">isValid</a>()) &#123;</Highlight></CodeLine>
<Link id="l03529" /><CodeLine lineNumber="3529"><Highlight kind="normal">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> = <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3aa00a8e5741a604eb07320e981473b4e7">NodeOrder</a>;</Highlight></CodeLine>
<Link id="l03530" /><CodeLine lineNumber="3530"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03531" /><CodeLine lineNumber="3531"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03532" /><CodeLine lineNumber="3532"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03533" /><CodeLine lineNumber="3533"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Bias PhysReg Defs and copies to their uses and defined respectively.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03534" /><CodeLine lineNumber="3534"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(<a href="/docs/api/namespaces/llvm/#afb4b9423201406d79ba16481c90cb6cb">biasPhysReg</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>, TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>),</Highlight></CodeLine>
<Link id="l03535" /><CodeLine lineNumber="3535"><Highlight kind="normal">                 <a href="/docs/api/namespaces/llvm/#afb4b9423201406d79ba16481c90cb6cb">biasPhysReg</a>(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>, Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>), TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3ab58c08e8fa9324ebf332e11601ec6c0d">PhysReg</a>))</Highlight></CodeLine>
<Link id="l03536" /><CodeLine lineNumber="3536"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03537" /><CodeLine lineNumber="3537"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03538" /><CodeLine lineNumber="3538"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Avoid exceeding the target&#39;s limit.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03539" /><CodeLine lineNumber="3539"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;isTrackingPressure() &amp;&amp; <a href="/docs/api/namespaces/llvm/#a62cf34ac18c5612524978166788b5c80">tryPressure</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>,</Highlight></CodeLine>
<Link id="l03540" /><CodeLine lineNumber="3540"><Highlight kind="normal">                                               Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>,</Highlight></CodeLine>
<Link id="l03541" /><CodeLine lineNumber="3541"><Highlight kind="normal">                                               TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a01d264553167fb005aba23a6d2a6e9bb">RegExcess</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae9476ffbc2f3f195a2116b13f3186194">TRI</a>,</Highlight></CodeLine>
<Link id="l03542" /><CodeLine lineNumber="3542"><Highlight kind="normal">                                               <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;MF))</Highlight></CodeLine>
<Link id="l03543" /><CodeLine lineNumber="3543"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03544" /><CodeLine lineNumber="3544"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03545" /><CodeLine lineNumber="3545"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Avoid increasing the max critical pressure in the scheduled region.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03546" /><CodeLine lineNumber="3546"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;isTrackingPressure() &amp;&amp; <a href="/docs/api/namespaces/llvm/#a62cf34ac18c5612524978166788b5c80">tryPressure</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>,</Highlight></CodeLine>
<Link id="l03547" /><CodeLine lineNumber="3547"><Highlight kind="normal">                                               Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>,</Highlight></CodeLine>
<Link id="l03548" /><CodeLine lineNumber="3548"><Highlight kind="normal">                                               TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a974161ce84e375b6d40bd8855c29dd7f">RegCritical</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae9476ffbc2f3f195a2116b13f3186194">TRI</a>,</Highlight></CodeLine>
<Link id="l03549" /><CodeLine lineNumber="3549"><Highlight kind="normal">                                               <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;MF))</Highlight></CodeLine>
<Link id="l03550" /><CodeLine lineNumber="3550"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03551" /><CodeLine lineNumber="3551"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03552" /><CodeLine lineNumber="3552"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We only compare a subset of features when comparing nodes between</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03553" /><CodeLine lineNumber="3553"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Top and Bottom boundary. Some properties are simply incomparable, in many</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03554" /><CodeLine lineNumber="3554"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// other instances we should only override the other boundary if something</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03555" /><CodeLine lineNumber="3555"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// is a clear good pick on one boundary. Skip heuristics that are more</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03556" /><CodeLine lineNumber="3556"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// &quot;tie-breaking&quot; in nature.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03557" /><CodeLine lineNumber="3557"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> SameBoundary = Zone != </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03558" /><CodeLine lineNumber="3558"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SameBoundary) &#123;</Highlight></CodeLine>
<Link id="l03559" /><CodeLine lineNumber="3559"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// For loops that are acyclic path limited, aggressively schedule for</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03560" /><CodeLine lineNumber="3560"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// latency. Within an single cycle, whenever CurrMOps &gt; 0, allow normal</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03561" /><CodeLine lineNumber="3561"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// heuristics to take precedence.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03562" /><CodeLine lineNumber="3562"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.IsAcyclicLatencyLimited &amp;&amp; !Zone-&gt;<a href="/docs/api/classes/llvm/schedboundary/#ac984b92ac3a64875c7f2908ef617584d">getCurrMOps</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l03563" /><CodeLine lineNumber="3563"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a8c9a83bf7b5f6e85f215ff07a31e0fbe">tryLatency</a>(TryCand, Cand, &#42;Zone))</Highlight></CodeLine>
<Link id="l03564" /><CodeLine lineNumber="3564"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03565" /><CodeLine lineNumber="3565"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03566" /><CodeLine lineNumber="3566"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Prioritize instructions that read unbuffered resources by stall cycles.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03567" /><CodeLine lineNumber="3567"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(Zone-&gt;<a href="/docs/api/classes/llvm/schedboundary/#a4a674627365b72b17a9b2e0a99d40ce1">getLatencyStallCycles</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>),</Highlight></CodeLine>
<Link id="l03568" /><CodeLine lineNumber="3568"><Highlight kind="normal">                Zone-&gt;<a href="/docs/api/classes/llvm/schedboundary/#a4a674627365b72b17a9b2e0a99d40ce1">getLatencyStallCycles</a>(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>), TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3ab6aae8902e724a36ed16d537784777a2">Stall</a>))</Highlight></CodeLine>
<Link id="l03569" /><CodeLine lineNumber="3569"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03570" /><CodeLine lineNumber="3570"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03571" /><CodeLine lineNumber="3571"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03572" /><CodeLine lineNumber="3572"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Keep clustered nodes together to encourage downstream peephole</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03573" /><CodeLine lineNumber="3573"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// optimizations which may reduce resource requirements.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03574" /><CodeLine lineNumber="3574"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03575" /><CodeLine lineNumber="3575"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This is a best effort to set things up for a post-RA pass. Optimizations</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03576" /><CodeLine lineNumber="3576"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// like generating loads of multiple registers should ideally be done within</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03577" /><CodeLine lineNumber="3577"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the scheduler pass by combining the loads during DAG postprocessing.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03578" /><CodeLine lineNumber="3578"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;CandNextClusterSU =</Highlight></CodeLine>
<Link id="l03579" /><CodeLine lineNumber="3579"><Highlight kind="normal">    Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> ? <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getNextClusterSucc() : <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getNextClusterPred();</Highlight></CodeLine>
<Link id="l03580" /><CodeLine lineNumber="3580"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;TryCandNextClusterSU =</Highlight></CodeLine>
<Link id="l03581" /><CodeLine lineNumber="3581"><Highlight kind="normal">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> ? <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getNextClusterSucc() : <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getNextClusterPred();</Highlight></CodeLine>
<Link id="l03582" /><CodeLine lineNumber="3582"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> == TryCandNextClusterSU,</Highlight></CodeLine>
<Link id="l03583" /><CodeLine lineNumber="3583"><Highlight kind="normal">                 Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> == CandNextClusterSU,</Highlight></CodeLine>
<Link id="l03584" /><CodeLine lineNumber="3584"><Highlight kind="normal">                 TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a5a905614458af47ec4a5054a53d23e1b">Cluster</a>))</Highlight></CodeLine>
<Link id="l03585" /><CodeLine lineNumber="3585"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03586" /><CodeLine lineNumber="3586"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03587" /><CodeLine lineNumber="3587"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SameBoundary) &#123;</Highlight></CodeLine>
<Link id="l03588" /><CodeLine lineNumber="3588"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Weak edges are for clustering and other constraints.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03589" /><CodeLine lineNumber="3589"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(<a href="/docs/api/namespaces/llvm/#a13933f8ac2f5e1a34cf53b2c1e1bdc5b">getWeakLeft</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>, TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>),</Highlight></CodeLine>
<Link id="l03590" /><CodeLine lineNumber="3590"><Highlight kind="normal">                <a href="/docs/api/namespaces/llvm/#a13933f8ac2f5e1a34cf53b2c1e1bdc5b">getWeakLeft</a>(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>, Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>),</Highlight></CodeLine>
<Link id="l03591" /><CodeLine lineNumber="3591"><Highlight kind="normal">                TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3aed8b719fe1a669c2fed4bacc6f46e8df">Weak</a>))</Highlight></CodeLine>
<Link id="l03592" /><CodeLine lineNumber="3592"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03593" /><CodeLine lineNumber="3593"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03594" /><CodeLine lineNumber="3594"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03595" /><CodeLine lineNumber="3595"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Avoid increasing the max pressure of the entire region.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03596" /><CodeLine lineNumber="3596"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;isTrackingPressure() &amp;&amp; <a href="/docs/api/namespaces/llvm/#a62cf34ac18c5612524978166788b5c80">tryPressure</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>,</Highlight></CodeLine>
<Link id="l03597" /><CodeLine lineNumber="3597"><Highlight kind="normal">                                               Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a href="/docs/api/structs/llvm/regpressuredelta/#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>,</Highlight></CodeLine>
<Link id="l03598" /><CodeLine lineNumber="3598"><Highlight kind="normal">                                               TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a01ef8d8423fe645e50ad5a179b4f4483">RegMax</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae9476ffbc2f3f195a2116b13f3186194">TRI</a>,</Highlight></CodeLine>
<Link id="l03599" /><CodeLine lineNumber="3599"><Highlight kind="normal">                                               <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;MF))</Highlight></CodeLine>
<Link id="l03600" /><CodeLine lineNumber="3600"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03601" /><CodeLine lineNumber="3601"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03602" /><CodeLine lineNumber="3602"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SameBoundary) &#123;</Highlight></CodeLine>
<Link id="l03603" /><CodeLine lineNumber="3603"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Avoid critical resource consumption and balance the schedule.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03604" /><CodeLine lineNumber="3604"><Highlight kind="normal">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a47cc8c89db10ac27483585cd61cf4f91">initResourceDelta</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>);</Highlight></CodeLine>
<Link id="l03605" /><CodeLine lineNumber="3605"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta/#a3ffd08e01bba20c9af1ae13630ed7acd">CritResources</a>, Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta/#a3ffd08e01bba20c9af1ae13630ed7acd">CritResources</a>,</Highlight></CodeLine>
<Link id="l03606" /><CodeLine lineNumber="3606"><Highlight kind="normal">                TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a56637d3435d7e1953a615371cfe4d5ec">ResourceReduce</a>))</Highlight></CodeLine>
<Link id="l03607" /><CodeLine lineNumber="3607"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03608" /><CodeLine lineNumber="3608"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta/#ab660550157a92f83f7b4f2db2d2d9304">DemandedResources</a>,</Highlight></CodeLine>
<Link id="l03609" /><CodeLine lineNumber="3609"><Highlight kind="normal">                   Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta/#ab660550157a92f83f7b4f2db2d2d9304">DemandedResources</a>,</Highlight></CodeLine>
<Link id="l03610" /><CodeLine lineNumber="3610"><Highlight kind="normal">                   TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a07409a8a5b9657af23f0a1c962f5c0c1">ResourceDemand</a>))</Highlight></CodeLine>
<Link id="l03611" /><CodeLine lineNumber="3611"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03612" /><CodeLine lineNumber="3612"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03613" /><CodeLine lineNumber="3613"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Avoid serializing long latency dependence chains.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03614" /><CodeLine lineNumber="3614"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// For acyclic path limited loops, latency was already checked above.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03615" /><CodeLine lineNumber="3615"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.DisableLatencyHeuristic &amp;&amp; TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy/#acd9f1ecfaa9db2800e6fe15a385b4a6f">ReduceLatency</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l03616" /><CodeLine lineNumber="3616"><Highlight kind="normal">        !<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.IsAcyclicLatencyLimited &amp;&amp; <a href="/docs/api/namespaces/llvm/#a8c9a83bf7b5f6e85f215ff07a31e0fbe">tryLatency</a>(TryCand, Cand, &#42;Zone))</Highlight></CodeLine>
<Link id="l03617" /><CodeLine lineNumber="3617"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03618" /><CodeLine lineNumber="3618"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03619" /><CodeLine lineNumber="3619"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Fall through to original instruction order.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03620" /><CodeLine lineNumber="3620"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((Zone-&gt;<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() &amp;&amp; TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt; Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a>)</Highlight></CodeLine>
<Link id="l03621" /><CodeLine lineNumber="3621"><Highlight kind="normal">        || (!Zone-&gt;<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() &amp;&amp; TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &gt; Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a>)) &#123;</Highlight></CodeLine>
<Link id="l03622" /><CodeLine lineNumber="3622"><Highlight kind="normal">      TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> = <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3aa00a8e5741a604eb07320e981473b4e7">NodeOrder</a>;</Highlight></CodeLine>
<Link id="l03623" /><CodeLine lineNumber="3623"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03624" /><CodeLine lineNumber="3624"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03625" /><CodeLine lineNumber="3625"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03626" /><CodeLine lineNumber="3626"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03627" /><CodeLine lineNumber="3627"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03628" /><CodeLine lineNumber="3628"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03629" /><CodeLine lineNumber="3629"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03630" /><CodeLine lineNumber="3630"><Highlight kind="comment">/// Pick the best candidate from the queue.</Highlight></CodeLine>
<Link id="l03631" /><CodeLine lineNumber="3631"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l03632" /><CodeLine lineNumber="3632"><Highlight kind="comment">/// TODO: getMaxPressureDelta results can be mostly cached for each SUnit during</Highlight></CodeLine>
<Link id="l03633" /><CodeLine lineNumber="3633"><Highlight kind="comment">/// DAG building. To adjust for the current scheduling location we need to</Highlight></CodeLine>
<Link id="l03634" /><CodeLine lineNumber="3634"><Highlight kind="comment">/// maintain the number of vreg uses remaining to be top-scheduled.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03635" /><CodeLine lineNumber="3635" lineLink="/docs/api/classes/llvm/genericscheduler/#ad9779ec3011b4547f9a509af82d87a6e"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericscheduler/#ad9779ec3011b4547f9a509af82d87a6e">GenericScheduler::pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &amp;Zone,</Highlight></CodeLine>
<Link id="l03636" /><CodeLine lineNumber="3636"><Highlight kind="normal">                                         </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> &amp;ZonePolicy,</Highlight></CodeLine>
<Link id="l03637" /><CodeLine lineNumber="3637"><Highlight kind="normal">                                         </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/regpressuretracker">RegPressureTracker</a> &amp;RPTracker,</Highlight></CodeLine>
<Link id="l03638" /><CodeLine lineNumber="3638"><Highlight kind="normal">                                         <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> &amp;Cand) &#123;</Highlight></CodeLine>
<Link id="l03639" /><CodeLine lineNumber="3639"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// getMaxPressureDelta temporarily modifies the tracker.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03640" /><CodeLine lineNumber="3640"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/regpressuretracker">RegPressureTracker</a> &amp;TempTracker = </Highlight><Highlight kind="keyword">const&#95;cast&lt;</Highlight><Highlight kind="normal"><a href="/docs/api/classes/llvm/regpressuretracker">RegPressureTracker</a>&amp;</Highlight><Highlight kind="keyword">&gt;</Highlight><Highlight kind="normal">(RPTracker);</Highlight></CodeLine>
<Link id="l03641" /><CodeLine lineNumber="3641"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03642" /><CodeLine lineNumber="3642"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/readyqueue">ReadyQueue</a> &amp;Q = Zone.<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>;</Highlight></CodeLine>
<Link id="l03643" /><CodeLine lineNumber="3643"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU : Q) &#123;</Highlight></CodeLine>
<Link id="l03644" /><CodeLine lineNumber="3644"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03645" /><CodeLine lineNumber="3645"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> TryCand(ZonePolicy);</Highlight></CodeLine>
<Link id="l03646" /><CodeLine lineNumber="3646"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericscheduler/#ab0d12eb20352f092840f7f8df60abe26">initCandidate</a>(TryCand, SU, Zone.<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>(), RPTracker, TempTracker);</Highlight></CodeLine>
<Link id="l03647" /><CodeLine lineNumber="3647"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Pass SchedBoundary only when comparing nodes from the same boundary.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03648" /><CodeLine lineNumber="3648"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &#42;ZoneArg = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> == TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> ? &amp;Zone : </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03649" /><CodeLine lineNumber="3649"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/genericscheduler/#a6ef23d22af6c895d9c255de3e940b8bf">tryCandidate</a>(Cand, TryCand, ZoneArg)) &#123;</Highlight></CodeLine>
<Link id="l03650" /><CodeLine lineNumber="3650"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Initialize resource delta if needed in case future heuristics query it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03651" /><CodeLine lineNumber="3651"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a> == <a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta">SchedResourceDelta</a>())</Highlight></CodeLine>
<Link id="l03652" /><CodeLine lineNumber="3652"><Highlight kind="normal">        TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a47cc8c89db10ac27483585cd61cf4f91">initResourceDelta</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>);</Highlight></CodeLine>
<Link id="l03653" /><CodeLine lineNumber="3653"><Highlight kind="normal">      Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a294e77c4f7245940981e5e259045c7c0">setBest</a>(TryCand);</Highlight></CodeLine>
<Link id="l03654" /><CodeLine lineNumber="3654"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(Cand));</Highlight></CodeLine>
<Link id="l03655" /><CodeLine lineNumber="3655"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03656" /><CodeLine lineNumber="3656"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03657" /><CodeLine lineNumber="3657"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03658" /><CodeLine lineNumber="3658"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03659" /><CodeLine lineNumber="3659"><Highlight kind="comment">/// Pick the best candidate node from either the top or bottom queue.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03660" /><CodeLine lineNumber="3660" lineLink="/docs/api/classes/llvm/genericscheduler/#aef82bce77971408815c3b90979188d1e"><Highlight kind="normal"><a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/llvm/genericscheduler/#aef82bce77971408815c3b90979188d1e">GenericScheduler::pickNodeBidirectional</a>(</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> &amp;IsTopNode) &#123;</Highlight></CodeLine>
<Link id="l03661" /><CodeLine lineNumber="3661"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Schedule as far as possible in the direction of no choice. This is most</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03662" /><CodeLine lineNumber="3662"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// efficient, but also provides the best heuristics for CriticalPSets.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03663" /><CodeLine lineNumber="3663"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.pickOnlyChoice()) &#123;</Highlight></CodeLine>
<Link id="l03664" /><CodeLine lineNumber="3664"><Highlight kind="normal">    IsTopNode = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03665" /><CodeLine lineNumber="3665"><Highlight kind="normal">    <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a3e5ec7d7634a70f61fd64c3ef22d02f1">Only1</a>, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03666" /><CodeLine lineNumber="3666"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> SU;</Highlight></CodeLine>
<Link id="l03667" /><CodeLine lineNumber="3667"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03668" /><CodeLine lineNumber="3668"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.pickOnlyChoice()) &#123;</Highlight></CodeLine>
<Link id="l03669" /><CodeLine lineNumber="3669"><Highlight kind="normal">    IsTopNode = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03670" /><CodeLine lineNumber="3670"><Highlight kind="normal">    <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a3e5ec7d7634a70f61fd64c3ef22d02f1">Only1</a>, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03671" /><CodeLine lineNumber="3671"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> SU;</Highlight></CodeLine>
<Link id="l03672" /><CodeLine lineNumber="3672"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03673" /><CodeLine lineNumber="3673"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Set the bottom-up policy based on the state of the current bottom zone and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03674" /><CodeLine lineNumber="3674"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the instructions outside the zone, including the top zone.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03675" /><CodeLine lineNumber="3675"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> BotPolicy;</Highlight></CodeLine>
<Link id="l03676" /><CodeLine lineNumber="3676"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a8668556014566994c07b21391762551b">setPolicy</a>(BotPolicy, </Highlight><Highlight kind="comment">/&#42;IsPostRA=&#42;/</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>, &amp;<a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>);</Highlight></CodeLine>
<Link id="l03677" /><CodeLine lineNumber="3677"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Set the top-down policy based on the state of the current top zone and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03678" /><CodeLine lineNumber="3678"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the instructions outside the zone, including the bottom zone.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03679" /><CodeLine lineNumber="3679"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> TopPolicy;</Highlight></CodeLine>
<Link id="l03680" /><CodeLine lineNumber="3680"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a8668556014566994c07b21391762551b">setPolicy</a>(TopPolicy, </Highlight><Highlight kind="comment">/&#42;IsPostRA=&#42;/</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>, &amp;<a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>);</Highlight></CodeLine>
<Link id="l03681" /><CodeLine lineNumber="3681"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03682" /><CodeLine lineNumber="3682"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// See if BotCand is still valid (because we previously scheduled from Top).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03683" /><CodeLine lineNumber="3683"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Picking from Bot:\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03684" /><CodeLine lineNumber="3684"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.isValid() || <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.SU-&gt;isScheduled ||</Highlight></CodeLine>
<Link id="l03685" /><CodeLine lineNumber="3685"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.Policy != BotPolicy) &#123;</Highlight></CodeLine>
<Link id="l03686" /><CodeLine lineNumber="3686"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.reset(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a>());</Highlight></CodeLine>
<Link id="l03687" /><CodeLine lineNumber="3687"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericscheduler/#ad9779ec3011b4547f9a509af82d87a6e">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>, BotPolicy, <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getBotRPTracker(), <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>);</Highlight></CodeLine>
<Link id="l03688" /><CodeLine lineNumber="3688"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.Reason != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;failed to find the first candidate&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03689" /><CodeLine lineNumber="3689"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03690" /><CodeLine lineNumber="3690"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>));</Highlight></CodeLine>
<Link id="l03691" /><CodeLine lineNumber="3691"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#ifndef NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03692" /><CodeLine lineNumber="3692"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>) &#123;</Highlight></CodeLine>
<Link id="l03693" /><CodeLine lineNumber="3693"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> TCand;</Highlight></CodeLine>
<Link id="l03694" /><CodeLine lineNumber="3694"><Highlight kind="normal">      TCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a361fa10c095c303e093021c6a1d04e75">reset</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a>());</Highlight></CodeLine>
<Link id="l03695" /><CodeLine lineNumber="3695"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/genericscheduler/#ad9779ec3011b4547f9a509af82d87a6e">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>, BotPolicy, <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getBotRPTracker(), TCand);</Highlight></CodeLine>
<Link id="l03696" /><CodeLine lineNumber="3696"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> == <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.SU &amp;&amp;</Highlight></CodeLine>
<Link id="l03697" /><CodeLine lineNumber="3697"><Highlight kind="normal">             </Highlight><Highlight kind="stringliteral">&quot;Last pick result should correspond to re-picking right now&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03698" /><CodeLine lineNumber="3698"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03699" /><CodeLine lineNumber="3699"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03700" /><CodeLine lineNumber="3700"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03701" /><CodeLine lineNumber="3701"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03702" /><CodeLine lineNumber="3702"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check if the top Q has a better candidate.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03703" /><CodeLine lineNumber="3703"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Picking from Top:\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03704" /><CodeLine lineNumber="3704"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.isValid() || <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.SU-&gt;isScheduled ||</Highlight></CodeLine>
<Link id="l03705" /><CodeLine lineNumber="3705"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.Policy != TopPolicy) &#123;</Highlight></CodeLine>
<Link id="l03706" /><CodeLine lineNumber="3706"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.reset(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a>());</Highlight></CodeLine>
<Link id="l03707" /><CodeLine lineNumber="3707"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericscheduler/#ad9779ec3011b4547f9a509af82d87a6e">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>, TopPolicy, <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getTopRPTracker(), <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>);</Highlight></CodeLine>
<Link id="l03708" /><CodeLine lineNumber="3708"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.Reason != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;failed to find the first candidate&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03709" /><CodeLine lineNumber="3709"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03710" /><CodeLine lineNumber="3710"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>));</Highlight></CodeLine>
<Link id="l03711" /><CodeLine lineNumber="3711"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#ifndef NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03712" /><CodeLine lineNumber="3712"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>) &#123;</Highlight></CodeLine>
<Link id="l03713" /><CodeLine lineNumber="3713"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> TCand;</Highlight></CodeLine>
<Link id="l03714" /><CodeLine lineNumber="3714"><Highlight kind="normal">      TCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a361fa10c095c303e093021c6a1d04e75">reset</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a>());</Highlight></CodeLine>
<Link id="l03715" /><CodeLine lineNumber="3715"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/genericscheduler/#ad9779ec3011b4547f9a509af82d87a6e">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>, TopPolicy, <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getTopRPTracker(), TCand);</Highlight></CodeLine>
<Link id="l03716" /><CodeLine lineNumber="3716"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> == <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.SU &amp;&amp;</Highlight></CodeLine>
<Link id="l03717" /><CodeLine lineNumber="3717"><Highlight kind="normal">             </Highlight><Highlight kind="stringliteral">&quot;Last pick result should correspond to re-picking right now&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03718" /><CodeLine lineNumber="3718"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03719" /><CodeLine lineNumber="3719"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03720" /><CodeLine lineNumber="3720"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03721" /><CodeLine lineNumber="3721"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03722" /><CodeLine lineNumber="3722"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Pick best from BotCand and TopCand.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03723" /><CodeLine lineNumber="3723"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.isValid());</Highlight></CodeLine>
<Link id="l03724" /><CodeLine lineNumber="3724"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.isValid());</Highlight></CodeLine>
<Link id="l03725" /><CodeLine lineNumber="3725"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> Cand = <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>;</Highlight></CodeLine>
<Link id="l03726" /><CodeLine lineNumber="3726"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.Reason = <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03727" /><CodeLine lineNumber="3727"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/genericscheduler/#a6ef23d22af6c895d9c255de3e940b8bf">tryCandidate</a>(Cand, <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">)) &#123;</Highlight></CodeLine>
<Link id="l03728" /><CodeLine lineNumber="3728"><Highlight kind="normal">    Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a294e77c4f7245940981e5e259045c7c0">setBest</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>);</Highlight></CodeLine>
<Link id="l03729" /><CodeLine lineNumber="3729"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(Cand));</Highlight></CodeLine>
<Link id="l03730" /><CodeLine lineNumber="3730"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03731" /><CodeLine lineNumber="3731"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03732" /><CodeLine lineNumber="3732"><Highlight kind="normal">  IsTopNode = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>;</Highlight></CodeLine>
<Link id="l03733" /><CodeLine lineNumber="3733"><Highlight kind="normal">  <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(Cand);</Highlight></CodeLine>
<Link id="l03734" /><CodeLine lineNumber="3734"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>;</Highlight></CodeLine>
<Link id="l03735" /><CodeLine lineNumber="3735"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03736" /><CodeLine lineNumber="3736"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03737" /><CodeLine lineNumber="3737"><Highlight kind="comment">/// Pick the best node to balance the schedule. Implements MachineSchedStrategy.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03738" /><CodeLine lineNumber="3738" lineLink="/docs/api/classes/llvm/genericscheduler/#ad4cc558b6cbcc4e9cea5df915c197e14"><Highlight kind="normal"><a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/llvm/genericscheduler/#ad4cc558b6cbcc4e9cea5df915c197e14">GenericScheduler::pickNode</a>(</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> &amp;IsTopNode) &#123;</Highlight></CodeLine>
<Link id="l03739" /><CodeLine lineNumber="3739"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;top() == <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;bottom()) &#123;</Highlight></CodeLine>
<Link id="l03740" /><CodeLine lineNumber="3740"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.Available.empty() &amp;&amp; <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.Pending.empty() &amp;&amp;</Highlight></CodeLine>
<Link id="l03741" /><CodeLine lineNumber="3741"><Highlight kind="normal">           <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.Available.empty() &amp;&amp; <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.Pending.empty() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;ReadyQ garbage&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03742" /><CodeLine lineNumber="3742"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03743" /><CodeLine lineNumber="3743"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03744" /><CodeLine lineNumber="3744"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU;</Highlight></CodeLine>
<Link id="l03745" /><CodeLine lineNumber="3745"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">do</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03746" /><CodeLine lineNumber="3746"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown) &#123;</Highlight></CodeLine>
<Link id="l03747" /><CodeLine lineNumber="3747"><Highlight kind="normal">      SU = <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.pickOnlyChoice();</Highlight></CodeLine>
<Link id="l03748" /><CodeLine lineNumber="3748"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SU) &#123;</Highlight></CodeLine>
<Link id="l03749" /><CodeLine lineNumber="3749"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> NoPolicy;</Highlight></CodeLine>
<Link id="l03750" /><CodeLine lineNumber="3750"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.reset(NoPolicy);</Highlight></CodeLine>
<Link id="l03751" /><CodeLine lineNumber="3751"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/genericscheduler/#ad9779ec3011b4547f9a509af82d87a6e">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>, NoPolicy, <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getTopRPTracker(), <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>);</Highlight></CodeLine>
<Link id="l03752" /><CodeLine lineNumber="3752"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.Reason != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;failed to find a candidate&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03753" /><CodeLine lineNumber="3753"><Highlight kind="normal">        <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>);</Highlight></CodeLine>
<Link id="l03754" /><CodeLine lineNumber="3754"><Highlight kind="normal">        SU = <a href="/docs/api/classes/llvm/genericscheduler/#a33cc1a55125b89319e048d24625a2925">TopCand</a>.SU;</Highlight></CodeLine>
<Link id="l03755" /><CodeLine lineNumber="3755"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03756" /><CodeLine lineNumber="3756"><Highlight kind="normal">      IsTopNode = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03757" /><CodeLine lineNumber="3757"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp) &#123;</Highlight></CodeLine>
<Link id="l03758" /><CodeLine lineNumber="3758"><Highlight kind="normal">      SU = <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.pickOnlyChoice();</Highlight></CodeLine>
<Link id="l03759" /><CodeLine lineNumber="3759"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SU) &#123;</Highlight></CodeLine>
<Link id="l03760" /><CodeLine lineNumber="3760"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> NoPolicy;</Highlight></CodeLine>
<Link id="l03761" /><CodeLine lineNumber="3761"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.reset(NoPolicy);</Highlight></CodeLine>
<Link id="l03762" /><CodeLine lineNumber="3762"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/genericscheduler/#ad9779ec3011b4547f9a509af82d87a6e">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>, NoPolicy, <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;getBotRPTracker(), <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>);</Highlight></CodeLine>
<Link id="l03763" /><CodeLine lineNumber="3763"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.Reason != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;failed to find a candidate&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03764" /><CodeLine lineNumber="3764"><Highlight kind="normal">        <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>);</Highlight></CodeLine>
<Link id="l03765" /><CodeLine lineNumber="3765"><Highlight kind="normal">        SU = <a href="/docs/api/classes/llvm/genericscheduler/#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.SU;</Highlight></CodeLine>
<Link id="l03766" /><CodeLine lineNumber="3766"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03767" /><CodeLine lineNumber="3767"><Highlight kind="normal">      IsTopNode = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03768" /><CodeLine lineNumber="3768"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03769" /><CodeLine lineNumber="3769"><Highlight kind="normal">      SU = <a href="/docs/api/classes/llvm/genericscheduler/#aef82bce77971408815c3b90979188d1e">pickNodeBidirectional</a>(IsTopNode);</Highlight></CodeLine>
<Link id="l03770" /><CodeLine lineNumber="3770"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03771" /><CodeLine lineNumber="3771"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a>);</Highlight></CodeLine>
<Link id="l03772" /><CodeLine lineNumber="3772"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03773" /><CodeLine lineNumber="3773"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If IsTopNode, then SU is in Top.Available and must be removed. Otherwise,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03774" /><CodeLine lineNumber="3774"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// if isTopReady(), then SU is in either Top.Available or Top.Pending.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03775" /><CodeLine lineNumber="3775"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If !IsTopNode, then SU is in Bot.Available and must be removed. Otherwise,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03776" /><CodeLine lineNumber="3776"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// if isBottomReady(), then SU is in either Bot.Available or Bot.Pending.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03777" /><CodeLine lineNumber="3777"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03778" /><CodeLine lineNumber="3778"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// It is coincidental when !IsTopNode &amp;&amp; isTopReady or when IsTopNode &amp;&amp;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03779" /><CodeLine lineNumber="3779"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// isBottomReady. That is, it didn&#39;t factor into the decision to choose SU</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03780" /><CodeLine lineNumber="3780"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// because it isTopReady or isBottomReady, respectively. In fact, if the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03781" /><CodeLine lineNumber="3781"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// RegionPolicy is OnlyTopDown or OnlyBottomUp, then the Bot queues and Top</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03782" /><CodeLine lineNumber="3782"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// queues respectivley contain the original roots and don&#39;t get updated when</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03783" /><CodeLine lineNumber="3783"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// picking a node. So if SU isTopReady on a OnlyBottomUp pick, then it was</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03784" /><CodeLine lineNumber="3784"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// because we schduled everything but the top roots. Conversley, if SU</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03785" /><CodeLine lineNumber="3785"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// isBottomReady on OnlyTopDown, then it was because we scheduled everything</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03786" /><CodeLine lineNumber="3786"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// but the bottom roots. If its in a queue even coincidentally, it should be</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03787" /><CodeLine lineNumber="3787"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// removed so it does not get re-picked in a subsequent pickNode call.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03788" /><CodeLine lineNumber="3788"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae0b8da4dfde85d4ddc32359ca52dc493">isTopReady</a>())</Highlight></CodeLine>
<Link id="l03789" /><CodeLine lineNumber="3789"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.removeReady(SU);</Highlight></CodeLine>
<Link id="l03790" /><CodeLine lineNumber="3790"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ac198a5fb130b4c09836ba20e01b4290d">isBottomReady</a>())</Highlight></CodeLine>
<Link id="l03791" /><CodeLine lineNumber="3791"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.removeReady(SU);</Highlight></CodeLine>
<Link id="l03792" /><CodeLine lineNumber="3792"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03793" /><CodeLine lineNumber="3793"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Scheduling SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03794" /><CodeLine lineNumber="3794"><Highlight kind="normal">                    &lt;&lt; &#42;SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>());</Highlight></CodeLine>
<Link id="l03795" /><CodeLine lineNumber="3795"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> SU;</Highlight></CodeLine>
<Link id="l03796" /><CodeLine lineNumber="3796"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03797" /><CodeLine lineNumber="3797"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03798" /><CodeLine lineNumber="3798" lineLink="/docs/api/classes/llvm/genericscheduler/#ad04f609cdff2331741525e5328836598"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericscheduler/#ad04f609cdff2331741525e5328836598">GenericScheduler::reschedulePhysReg</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> isTop) &#123;</Highlight></CodeLine>
<Link id="l03799" /><CodeLine lineNumber="3799"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> InsertPos = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</Highlight></CodeLine>
<Link id="l03800" /><CodeLine lineNumber="3800"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!isTop)</Highlight></CodeLine>
<Link id="l03801" /><CodeLine lineNumber="3801"><Highlight kind="normal">    ++InsertPos;</Highlight></CodeLine>
<Link id="l03802" /><CodeLine lineNumber="3802"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;SDep&gt;</a> &amp;Deps = isTop ? SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae2b43854b542de66eec6475adc48f56c">Preds</a> : SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>;</Highlight></CodeLine>
<Link id="l03803" /><CodeLine lineNumber="3803"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03804" /><CodeLine lineNumber="3804"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Find already scheduled copies with a single physreg dependence and move</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03805" /><CodeLine lineNumber="3805"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// them just above the scheduled instruction.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03806" /><CodeLine lineNumber="3806"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sdep">SDep</a> &amp;Dep : Deps) &#123;</Highlight></CodeLine>
<Link id="l03807" /><CodeLine lineNumber="3807"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Dep.getKind() != <a href="/docs/api/classes/llvm/sdep/#a07333f8ba53e0454b7ec6365860c0732af91df2221290eaa1a368403ffad49a26">SDep::Data</a> ||</Highlight></CodeLine>
<Link id="l03808" /><CodeLine lineNumber="3808"><Highlight kind="normal">        !<a href="/docs/api/classes/llvm/register/#afacc26f29d80e10be4785a96ed6444dc">Register::isPhysicalRegister</a>(Dep.getReg()))</Highlight></CodeLine>
<Link id="l03809" /><CodeLine lineNumber="3809"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03810" /><CodeLine lineNumber="3810"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;DepSU = Dep.getSUnit();</Highlight></CodeLine>
<Link id="l03811" /><CodeLine lineNumber="3811"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (isTop ? DepSU-&gt;<a href="/docs/api/classes/llvm/sunit/#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>.size() &gt; 1 : DepSU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae2b43854b542de66eec6475adc48f56c">Preds</a>.size() &gt; 1)</Highlight></CodeLine>
<Link id="l03812" /><CodeLine lineNumber="3812"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03813" /><CodeLine lineNumber="3813"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;Copy = DepSU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>();</Highlight></CodeLine>
<Link id="l03814" /><CodeLine lineNumber="3814"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Copy-&gt;isCopy() &amp;&amp; !Copy-&gt;isMoveImmediate())</Highlight></CodeLine>
<Link id="l03815" /><CodeLine lineNumber="3815"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03816" /><CodeLine lineNumber="3816"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;  Rescheduling physreg copy &quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03817" /><CodeLine lineNumber="3817"><Highlight kind="normal">               <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;dumpNode(&#42;Dep.getSUnit()));</Highlight></CodeLine>
<Link id="l03818" /><CodeLine lineNumber="3818"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericscheduler/#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;moveInstruction(Copy, InsertPos);</Highlight></CodeLine>
<Link id="l03819" /><CodeLine lineNumber="3819"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03820" /><CodeLine lineNumber="3820"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03821" /><CodeLine lineNumber="3821"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03822" /><CodeLine lineNumber="3822"><Highlight kind="comment">/// Update the scheduler&#39;s state after scheduling a node. This is the same node</Highlight></CodeLine>
<Link id="l03823" /><CodeLine lineNumber="3823"><Highlight kind="comment">/// that was just returned by pickNode(). However, ScheduleDAGMILive needs to</Highlight></CodeLine>
<Link id="l03824" /><CodeLine lineNumber="3824"><Highlight kind="comment">/// update it&#39;s state based on the current cycle before MachineSchedStrategy</Highlight></CodeLine>
<Link id="l03825" /><CodeLine lineNumber="3825"><Highlight kind="comment">/// does.</Highlight></CodeLine>
<Link id="l03826" /><CodeLine lineNumber="3826"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l03827" /><CodeLine lineNumber="3827"><Highlight kind="comment">/// FIXME: Eventually, we may bundle physreg copies rather than rescheduling</Highlight></CodeLine>
<Link id="l03828" /><CodeLine lineNumber="3828"><Highlight kind="comment">/// them here. See comments in biasPhysReg.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03829" /><CodeLine lineNumber="3829" lineLink="/docs/api/classes/llvm/genericscheduler/#adf574ab3455d7292bed998d8ba50bfeb"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/genericscheduler/#adf574ab3455d7292bed998d8ba50bfeb">GenericScheduler::schedNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsTopNode) &#123;</Highlight></CodeLine>
<Link id="l03830" /><CodeLine lineNumber="3830"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsTopNode) &#123;</Highlight></CodeLine>
<Link id="l03831" /><CodeLine lineNumber="3831"><Highlight kind="normal">    SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> = std::max(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a>, <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.getCurrCycle());</Highlight></CodeLine>
<Link id="l03832" /><CodeLine lineNumber="3832"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericscheduler/#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.bumpNode(SU);</Highlight></CodeLine>
<Link id="l03833" /><CodeLine lineNumber="3833"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#adc4d8df3725fd70ffbaffeead756025c">hasPhysRegUses</a>)</Highlight></CodeLine>
<Link id="l03834" /><CodeLine lineNumber="3834"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/genericscheduler/#ad04f609cdff2331741525e5328836598">reschedulePhysReg</a>(SU, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03835" /><CodeLine lineNumber="3835"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03836" /><CodeLine lineNumber="3836"><Highlight kind="normal">    SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> = std::max(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>, <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.getCurrCycle());</Highlight></CodeLine>
<Link id="l03837" /><CodeLine lineNumber="3837"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericscheduler/#a3763f96e92009d4dc101837627fff3bd">Bot</a>.bumpNode(SU);</Highlight></CodeLine>
<Link id="l03838" /><CodeLine lineNumber="3838"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a9d9a8b8d5225f85cecbbada4ce4406b0">hasPhysRegDefs</a>)</Highlight></CodeLine>
<Link id="l03839" /><CodeLine lineNumber="3839"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/genericscheduler/#ad04f609cdff2331741525e5328836598">reschedulePhysReg</a>(SU, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03840" /><CodeLine lineNumber="3840"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03841" /><CodeLine lineNumber="3841"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03842" /><CodeLine lineNumber="3842"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03843" /><CodeLine lineNumber="3843"><Highlight kind="comment">/// Create the standard converging machine scheduler. This will be used as the</Highlight></CodeLine>
<Link id="l03844" /><CodeLine lineNumber="3844"><Highlight kind="comment">/// default scheduler if the target does not set a default.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03845" /><CodeLine lineNumber="3845" lineLink="/docs/api/namespaces/llvm/#a5365898dd1deb10d065e288a2babd511"><Highlight kind="normal"><a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a> &#42;<a href="/docs/api/namespaces/llvm/#a5365898dd1deb10d065e288a2babd511">llvm::createGenericSchedLive</a>(<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l03846" /><CodeLine lineNumber="3846"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a> &#42;DAG =</Highlight></CodeLine>
<Link id="l03847" /><CodeLine lineNumber="3847"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, std::make&#95;unique&lt;GenericScheduler&gt;(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>));</Highlight></CodeLine>
<Link id="l03848" /><CodeLine lineNumber="3848"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Register DAG post-processors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03849" /><CodeLine lineNumber="3849"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03850" /><CodeLine lineNumber="3850"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: extend the mutation API to allow earlier mutations to instantiate</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03851" /><CodeLine lineNumber="3851"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// data and pass it to later mutations. Have a single mutation that gathers</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03852" /><CodeLine lineNumber="3852"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the interesting nodes in one pass.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03853" /><CodeLine lineNumber="3853"><Highlight kind="normal">  DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a2002164aea6fabe20598e0526746b1fa">addMutation</a>(<a href="/docs/api/namespaces/llvm/#ae82d653cf862c571ba16050a19426458">createCopyConstrainDAGMutation</a>(DAG-&gt;<a href="/docs/api/classes/llvm/scheduledag/#a348590624c488b04d0f9e227e6c3960e">TII</a>, DAG-&gt;<a href="/docs/api/classes/llvm/scheduledag/#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>));</Highlight></CodeLine>
<Link id="l03854" /><CodeLine lineNumber="3854"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03855" /><CodeLine lineNumber="3855"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetsubtargetinfo">TargetSubtargetInfo</a> &amp;STI = <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;MF-&gt;getSubtarget();</Highlight></CodeLine>
<Link id="l03856" /><CodeLine lineNumber="3856"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Add MacroFusion mutation if fusions are not empty.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03857" /><CodeLine lineNumber="3857"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;MacroFusions = STI.<a href="/docs/api/classes/llvm/targetsubtargetinfo/#a2b74e2ebb235e247397d5d87df776e66">getMacroFusions</a>();</Highlight></CodeLine>
<Link id="l03858" /><CodeLine lineNumber="3858"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!MacroFusions.empty())</Highlight></CodeLine>
<Link id="l03859" /><CodeLine lineNumber="3859"><Highlight kind="normal">    DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a2002164aea6fabe20598e0526746b1fa">addMutation</a>(<a href="/docs/api/namespaces/llvm/#a1b646d2ebeba4a7119c3d4fec4d137dc">createMacroFusionDAGMutation</a>(MacroFusions));</Highlight></CodeLine>
<Link id="l03860" /><CodeLine lineNumber="3860"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG;</Highlight></CodeLine>
<Link id="l03861" /><CodeLine lineNumber="3861"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03862" /><CodeLine lineNumber="3862"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03863" /><CodeLine lineNumber="3863" lineLink="#abd6b45623aab101450023f187488ad88"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="#abd6b45623aab101450023f187488ad88">createConvergingSched</a>(<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l03864" /><CodeLine lineNumber="3864"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a5365898dd1deb10d065e288a2babd511">createGenericSchedLive</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</Highlight></CodeLine>
<Link id="l03865" /><CodeLine lineNumber="3865"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03866" /><CodeLine lineNumber="3866"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03867" /><CodeLine lineNumber="3867"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> MachineSchedRegistry</Highlight></CodeLine>
<Link id="l03868" /><CodeLine lineNumber="3868" lineLink="#a615fca179bf3fe73ce3d5271d1710c7a"><Highlight kind="normal"><a href="#a615fca179bf3fe73ce3d5271d1710c7a">GenericSchedRegistry</a>(</Highlight><Highlight kind="stringliteral">&quot;converge&quot;</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;Standard converging scheduler.&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l03869" /><CodeLine lineNumber="3869"><Highlight kind="normal">                     <a href="#abd6b45623aab101450023f187488ad88">createConvergingSched</a>);</Highlight></CodeLine>
<Link id="l03870" /><CodeLine lineNumber="3870"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03871" /><CodeLine lineNumber="3871"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03872" /><CodeLine lineNumber="3872"><Highlight kind="normal"></Highlight><Highlight kind="comment">// PostGenericScheduler - Generic PostRA implementation of MachineSchedStrategy.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03873" /><CodeLine lineNumber="3873"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03874" /><CodeLine lineNumber="3874"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03875" /><CodeLine lineNumber="3875" lineLink="/docs/api/classes/llvm/postgenericscheduler/#a744ad04adf5ae507a33542ec18b0d97f"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/postgenericscheduler/#a744ad04adf5ae507a33542ec18b0d97f">PostGenericScheduler::initialize</a>(<a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;Dag) &#123;</Highlight></CodeLine>
<Link id="l03876" /><CodeLine lineNumber="3876"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a> = Dag;</Highlight></CodeLine>
<Link id="l03877" /><CodeLine lineNumber="3877"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a> = <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;getSchedModel();</Highlight></CodeLine>
<Link id="l03878" /><CodeLine lineNumber="3878"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#ae9476ffbc2f3f195a2116b13f3186194">TRI</a> = <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;TRI;</Highlight></CodeLine>
<Link id="l03879" /><CodeLine lineNumber="3879"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03880" /><CodeLine lineNumber="3880"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.init(<a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>);</Highlight></CodeLine>
<Link id="l03881" /><CodeLine lineNumber="3881"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.init(<a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>, &amp;<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>);</Highlight></CodeLine>
<Link id="l03882" /><CodeLine lineNumber="3882"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.init(<a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>, &amp;<a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>);</Highlight></CodeLine>
<Link id="l03883" /><CodeLine lineNumber="3883"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03884" /><CodeLine lineNumber="3884"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Initialize the HazardRecognizers. If itineraries don&#39;t exist, are empty,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03885" /><CodeLine lineNumber="3885"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// or are disabled, then these HazardRecs will be disabled.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03886" /><CodeLine lineNumber="3886"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/instritinerarydata">InstrItineraryData</a> &#42;Itin = <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>-&gt;getInstrItineraries();</Highlight></CodeLine>
<Link id="l03887" /><CodeLine lineNumber="3887"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.HazardRec) &#123;</Highlight></CodeLine>
<Link id="l03888" /><CodeLine lineNumber="3888"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.HazardRec = <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;TII-&gt;CreateTargetMIHazardRecognizer(Itin, <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>);</Highlight></CodeLine>
<Link id="l03889" /><CodeLine lineNumber="3889"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03890" /><CodeLine lineNumber="3890"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.HazardRec) &#123;</Highlight></CodeLine>
<Link id="l03891" /><CodeLine lineNumber="3891"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.HazardRec = <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;TII-&gt;CreateTargetMIHazardRecognizer(Itin, <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>);</Highlight></CodeLine>
<Link id="l03892" /><CodeLine lineNumber="3892"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03893" /><CodeLine lineNumber="3893"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03894" /><CodeLine lineNumber="3894"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03895" /><CodeLine lineNumber="3895" lineLink="/docs/api/classes/llvm/postgenericscheduler/#a04711828471ee40bed1b0e0ae8584cf4"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/postgenericscheduler/#a04711828471ee40bed1b0e0ae8584cf4">PostGenericScheduler::initPolicy</a>(<a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> Begin,</Highlight></CodeLine>
<Link id="l03896" /><CodeLine lineNumber="3896"><Highlight kind="normal">                                      <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> End,</Highlight></CodeLine>
<Link id="l03897" /><CodeLine lineNumber="3897"><Highlight kind="normal">                                      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumRegionInstrs) &#123;</Highlight></CodeLine>
<Link id="l03898" /><CodeLine lineNumber="3898"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = &#42;Begin-&gt;getMF();</Highlight></CodeLine>
<Link id="l03899" /><CodeLine lineNumber="3899"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03900" /><CodeLine lineNumber="3900"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Default to top-down because it was implemented first and existing targets</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03901" /><CodeLine lineNumber="3901"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// expect that behavior by default.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03902" /><CodeLine lineNumber="3902"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03903" /><CodeLine lineNumber="3903"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03904" /><CodeLine lineNumber="3904"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03905" /><CodeLine lineNumber="3905"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Allow the subtarget to override default policy.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03906" /><CodeLine lineNumber="3906"><Highlight kind="normal">  MF.<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>().<a href="/docs/api/classes/llvm/targetsubtargetinfo/#a960319789166bad30f214270de5cbadc">overridePostRASchedPolicy</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>, NumRegionInstrs);</Highlight></CodeLine>
<Link id="l03907" /><CodeLine lineNumber="3907"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03908" /><CodeLine lineNumber="3908"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// After subtarget overrides, apply command line options.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03909" /><CodeLine lineNumber="3909"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a1e5fc889b7ee01722dbdfb92df8cb7df">PostRADirection</a> == <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3ae89742249a15ad5696e3dcec82f0e76a">MISched::TopDown</a>) &#123;</Highlight></CodeLine>
<Link id="l03910" /><CodeLine lineNumber="3910"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03911" /><CodeLine lineNumber="3911"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03912" /><CodeLine lineNumber="3912"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a1e5fc889b7ee01722dbdfb92df8cb7df">PostRADirection</a> == <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3abd98ce24773c9ca1e3f7ce3c541e43ea">MISched::BottomUp</a>) &#123;</Highlight></CodeLine>
<Link id="l03913" /><CodeLine lineNumber="3913"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03914" /><CodeLine lineNumber="3914"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03915" /><CodeLine lineNumber="3915"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a1e5fc889b7ee01722dbdfb92df8cb7df">PostRADirection</a> == <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3aab012f17d1537ed7a7c6d45b1d2fc0e9">MISched::Bidirectional</a>) &#123;</Highlight></CodeLine>
<Link id="l03916" /><CodeLine lineNumber="3916"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03917" /><CodeLine lineNumber="3917"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03918" /><CodeLine lineNumber="3918"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03919" /><CodeLine lineNumber="3919"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03920" /><CodeLine lineNumber="3920"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03921" /><CodeLine lineNumber="3921" lineLink="/docs/api/classes/llvm/postgenericscheduler/#aee5ca47cbb46d1237ce496179411b03e"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/postgenericscheduler/#aee5ca47cbb46d1237ce496179411b03e">PostGenericScheduler::registerRoots</a>() &#123;</Highlight></CodeLine>
<Link id="l03922" /><CodeLine lineNumber="3922"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath = <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;ExitSU.getDepth();</Highlight></CodeLine>
<Link id="l03923" /><CodeLine lineNumber="3923"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03924" /><CodeLine lineNumber="3924"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Some roots may not feed into ExitSU. Check all of them in case.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03925" /><CodeLine lineNumber="3925"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU : <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.Available) &#123;</Highlight></CodeLine>
<Link id="l03926" /><CodeLine lineNumber="3926"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>() &gt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath)</Highlight></CodeLine>
<Link id="l03927" /><CodeLine lineNumber="3927"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath = SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8926b25df7254ba2730fa5d7ec139862">getDepth</a>();</Highlight></CodeLine>
<Link id="l03928" /><CodeLine lineNumber="3928"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03929" /><CodeLine lineNumber="3929"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Critical Path: (PGS-RR) &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03930" /><CodeLine lineNumber="3930"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a82ab0315644106de03b36f143328179f">DumpCriticalPathLength</a>) &#123;</Highlight></CodeLine>
<Link id="l03931" /><CodeLine lineNumber="3931"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Critical Path(PGS-RR ): &quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/classes/llvm/genericschedulerbase/#a3cab76d375dbb626e5179b96f84fd3dc">Rem</a>.CriticalPath &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; \\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03932" /><CodeLine lineNumber="3932"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03933" /><CodeLine lineNumber="3933"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03934" /><CodeLine lineNumber="3934"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03935" /><CodeLine lineNumber="3935"><Highlight kind="comment">/// Apply a set of heuristics to a new candidate for PostRA scheduling.</Highlight></CodeLine>
<Link id="l03936" /><CodeLine lineNumber="3936"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l03937" /><CodeLine lineNumber="3937"><Highlight kind="comment">/// \\param Cand provides the policy and current best candidate.</Highlight></CodeLine>
<Link id="l03938" /><CodeLine lineNumber="3938"><Highlight kind="comment">/// \\param TryCand refers to the next SUnit candidate, otherwise uninitialized.</Highlight></CodeLine>
<Link id="l03939" /><CodeLine lineNumber="3939"><Highlight kind="comment">/// \\return \\c true if TryCand is better than Cand (Reason is NOT NoCand)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03940" /><CodeLine lineNumber="3940" lineLink="/docs/api/classes/llvm/postgenericscheduler/#a09835bd12a7088d224f84e7899946040"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/postgenericscheduler/#a09835bd12a7088d224f84e7899946040">PostGenericScheduler::tryCandidate</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> &amp;Cand,</Highlight></CodeLine>
<Link id="l03941" /><CodeLine lineNumber="3941"><Highlight kind="normal">                                        <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> &amp;TryCand) &#123;</Highlight></CodeLine>
<Link id="l03942" /><CodeLine lineNumber="3942"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Initialize the candidate if needed.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03943" /><CodeLine lineNumber="3943"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#acdc733638a93dca6bb0eb290ec896271">isValid</a>()) &#123;</Highlight></CodeLine>
<Link id="l03944" /><CodeLine lineNumber="3944"><Highlight kind="normal">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> = <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3aa00a8e5741a604eb07320e981473b4e7">NodeOrder</a>;</Highlight></CodeLine>
<Link id="l03945" /><CodeLine lineNumber="3945"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03946" /><CodeLine lineNumber="3946"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03947" /><CodeLine lineNumber="3947"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03948" /><CodeLine lineNumber="3948"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Prioritize instructions that read unbuffered resources by stall cycles.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03949" /><CodeLine lineNumber="3949"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.getLatencyStallCycles(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>),</Highlight></CodeLine>
<Link id="l03950" /><CodeLine lineNumber="3950"><Highlight kind="normal">              <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.getLatencyStallCycles(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>), TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3ab6aae8902e724a36ed16d537784777a2">Stall</a>))</Highlight></CodeLine>
<Link id="l03951" /><CodeLine lineNumber="3951"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03952" /><CodeLine lineNumber="3952"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03953" /><CodeLine lineNumber="3953"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Keep clustered nodes together.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03954" /><CodeLine lineNumber="3954"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;CandNextClusterSU =</Highlight></CodeLine>
<Link id="l03955" /><CodeLine lineNumber="3955"><Highlight kind="normal">      Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> ? <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;getNextClusterSucc() : <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;getNextClusterPred();</Highlight></CodeLine>
<Link id="l03956" /><CodeLine lineNumber="3956"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;TryCandNextClusterSU =</Highlight></CodeLine>
<Link id="l03957" /><CodeLine lineNumber="3957"><Highlight kind="normal">      TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> ? <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;getNextClusterSucc() : <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;getNextClusterPred();</Highlight></CodeLine>
<Link id="l03958" /><CodeLine lineNumber="3958"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> == TryCandNextClusterSU,</Highlight></CodeLine>
<Link id="l03959" /><CodeLine lineNumber="3959"><Highlight kind="normal">                 Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> == CandNextClusterSU, TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a5a905614458af47ec4a5054a53d23e1b">Cluster</a>))</Highlight></CodeLine>
<Link id="l03960" /><CodeLine lineNumber="3960"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03961" /><CodeLine lineNumber="3961"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03962" /><CodeLine lineNumber="3962"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Avoid critical resource consumption and balance the schedule.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03963" /><CodeLine lineNumber="3963"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta/#a3ffd08e01bba20c9af1ae13630ed7acd">CritResources</a>, Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta/#a3ffd08e01bba20c9af1ae13630ed7acd">CritResources</a>,</Highlight></CodeLine>
<Link id="l03964" /><CodeLine lineNumber="3964"><Highlight kind="normal">              TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a56637d3435d7e1953a615371cfe4d5ec">ResourceReduce</a>))</Highlight></CodeLine>
<Link id="l03965" /><CodeLine lineNumber="3965"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03966" /><CodeLine lineNumber="3966"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta/#ab660550157a92f83f7b4f2db2d2d9304">DemandedResources</a>,</Highlight></CodeLine>
<Link id="l03967" /><CodeLine lineNumber="3967"><Highlight kind="normal">                 Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/schedresourcedelta/#ab660550157a92f83f7b4f2db2d2d9304">DemandedResources</a>,</Highlight></CodeLine>
<Link id="l03968" /><CodeLine lineNumber="3968"><Highlight kind="normal">                 TryCand, Cand, <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a07409a8a5b9657af23f0a1c962f5c0c1">ResourceDemand</a>))</Highlight></CodeLine>
<Link id="l03969" /><CodeLine lineNumber="3969"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03970" /><CodeLine lineNumber="3970"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03971" /><CodeLine lineNumber="3971"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We only compare a subset of features when comparing nodes between</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03972" /><CodeLine lineNumber="3972"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Top and Bottom boundary.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03973" /><CodeLine lineNumber="3973"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> == TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>) &#123;</Highlight></CodeLine>
<Link id="l03974" /><CodeLine lineNumber="3974"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Avoid serializing long latency dependence chains.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03975" /><CodeLine lineNumber="3975"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>.<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy/#acd9f1ecfaa9db2800e6fe15a385b4a6f">ReduceLatency</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l03976" /><CodeLine lineNumber="3976"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a8c9a83bf7b5f6e85f215ff07a31e0fbe">tryLatency</a>(TryCand, Cand, Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> ? <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a> : <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>))</Highlight></CodeLine>
<Link id="l03977" /><CodeLine lineNumber="3977"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l03978" /><CodeLine lineNumber="3978"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03979" /><CodeLine lineNumber="3979"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03980" /><CodeLine lineNumber="3980"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Fall through to original instruction order.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03981" /><CodeLine lineNumber="3981"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt; Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a>) &#123;</Highlight></CodeLine>
<Link id="l03982" /><CodeLine lineNumber="3982"><Highlight kind="normal">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ad9372964d55580636efe92281b42ad6c">Reason</a> = <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3aa00a8e5741a604eb07320e981473b4e7">NodeOrder</a>;</Highlight></CodeLine>
<Link id="l03983" /><CodeLine lineNumber="3983"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03984" /><CodeLine lineNumber="3984"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03985" /><CodeLine lineNumber="3985"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03986" /><CodeLine lineNumber="3986"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03987" /><CodeLine lineNumber="3987"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03988" /><CodeLine lineNumber="3988"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03989" /><CodeLine lineNumber="3989" lineLink="/docs/api/classes/llvm/postgenericscheduler/#a5db5287f3514fcc23bb3f93d769b3e96"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/postgenericscheduler/#a5db5287f3514fcc23bb3f93d769b3e96">PostGenericScheduler::pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/schedboundary">SchedBoundary</a> &amp;Zone,</Highlight></CodeLine>
<Link id="l03990" /><CodeLine lineNumber="3990"><Highlight kind="normal">                                             <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> &amp;Cand) &#123;</Highlight></CodeLine>
<Link id="l03991" /><CodeLine lineNumber="3991"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/readyqueue">ReadyQueue</a> &amp;Q = Zone.<a href="/docs/api/classes/llvm/schedboundary/#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>;</Highlight></CodeLine>
<Link id="l03992" /><CodeLine lineNumber="3992"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU : Q) &#123;</Highlight></CodeLine>
<Link id="l03993" /><CodeLine lineNumber="3993"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> TryCand(Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#ae861d440b366cf033d7f2764b2b34be0">Policy</a>);</Highlight></CodeLine>
<Link id="l03994" /><CodeLine lineNumber="3994"><Highlight kind="normal">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> = SU;</Highlight></CodeLine>
<Link id="l03995" /><CodeLine lineNumber="3995"><Highlight kind="normal">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> = Zone.<a href="/docs/api/classes/llvm/schedboundary/#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>();</Highlight></CodeLine>
<Link id="l03996" /><CodeLine lineNumber="3996"><Highlight kind="normal">    TryCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a47cc8c89db10ac27483585cd61cf4f91">initResourceDelta</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>, <a href="/docs/api/classes/llvm/genericschedulerbase/#a9730ea0068843718868a8667f52e3680">SchedModel</a>);</Highlight></CodeLine>
<Link id="l03997" /><CodeLine lineNumber="3997"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/postgenericscheduler/#a09835bd12a7088d224f84e7899946040">tryCandidate</a>(Cand, TryCand)) &#123;</Highlight></CodeLine>
<Link id="l03998" /><CodeLine lineNumber="3998"><Highlight kind="normal">      Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a294e77c4f7245940981e5e259045c7c0">setBest</a>(TryCand);</Highlight></CodeLine>
<Link id="l03999" /><CodeLine lineNumber="3999"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(Cand));</Highlight></CodeLine>
<Link id="l04000" /><CodeLine lineNumber="4000"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04001" /><CodeLine lineNumber="4001"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04002" /><CodeLine lineNumber="4002"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04003" /><CodeLine lineNumber="4003"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04004" /><CodeLine lineNumber="4004"><Highlight kind="comment">/// Pick the best candidate node from either the top or bottom queue.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04005" /><CodeLine lineNumber="4005" lineLink="/docs/api/classes/llvm/postgenericscheduler/#ae8950b6343e504e2112df60ee464603d"><Highlight kind="normal"><a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/llvm/postgenericscheduler/#ae8950b6343e504e2112df60ee464603d">PostGenericScheduler::pickNodeBidirectional</a>(</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> &amp;IsTopNode) &#123;</Highlight></CodeLine>
<Link id="l04006" /><CodeLine lineNumber="4006"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: This is similiar to GenericScheduler::pickNodeBidirectional. Factor</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04007" /><CodeLine lineNumber="4007"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// out common parts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04008" /><CodeLine lineNumber="4008"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04009" /><CodeLine lineNumber="4009"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Schedule as far as possible in the direction of no choice. This is most</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04010" /><CodeLine lineNumber="4010"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// efficient, but also provides the best heuristics for CriticalPSets.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04011" /><CodeLine lineNumber="4011"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.pickOnlyChoice()) &#123;</Highlight></CodeLine>
<Link id="l04012" /><CodeLine lineNumber="4012"><Highlight kind="normal">    IsTopNode = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04013" /><CodeLine lineNumber="4013"><Highlight kind="normal">    <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a3e5ec7d7634a70f61fd64c3ef22d02f1">Only1</a>, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04014" /><CodeLine lineNumber="4014"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> SU;</Highlight></CodeLine>
<Link id="l04015" /><CodeLine lineNumber="4015"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04016" /><CodeLine lineNumber="4016"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.pickOnlyChoice()) &#123;</Highlight></CodeLine>
<Link id="l04017" /><CodeLine lineNumber="4017"><Highlight kind="normal">    IsTopNode = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04018" /><CodeLine lineNumber="4018"><Highlight kind="normal">    <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a3e5ec7d7634a70f61fd64c3ef22d02f1">Only1</a>, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04019" /><CodeLine lineNumber="4019"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> SU;</Highlight></CodeLine>
<Link id="l04020" /><CodeLine lineNumber="4020"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04021" /><CodeLine lineNumber="4021"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Set the bottom-up policy based on the state of the current bottom zone and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04022" /><CodeLine lineNumber="4022"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the instructions outside the zone, including the top zone.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04023" /><CodeLine lineNumber="4023"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> BotPolicy;</Highlight></CodeLine>
<Link id="l04024" /><CodeLine lineNumber="4024"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a8668556014566994c07b21391762551b">setPolicy</a>(BotPolicy, </Highlight><Highlight kind="comment">/&#42;IsPostRA=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>, &amp;<a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>);</Highlight></CodeLine>
<Link id="l04025" /><CodeLine lineNumber="4025"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Set the top-down policy based on the state of the current top zone and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04026" /><CodeLine lineNumber="4026"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the instructions outside the zone, including the bottom zone.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04027" /><CodeLine lineNumber="4027"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> TopPolicy;</Highlight></CodeLine>
<Link id="l04028" /><CodeLine lineNumber="4028"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/genericschedulerbase/#a8668556014566994c07b21391762551b">setPolicy</a>(TopPolicy, </Highlight><Highlight kind="comment">/&#42;IsPostRA=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>, &amp;<a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>);</Highlight></CodeLine>
<Link id="l04029" /><CodeLine lineNumber="4029"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04030" /><CodeLine lineNumber="4030"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// See if BotCand is still valid (because we previously scheduled from Top).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04031" /><CodeLine lineNumber="4031"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Picking from Bot:\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04032" /><CodeLine lineNumber="4032"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.isValid() || <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.SU-&gt;isScheduled ||</Highlight></CodeLine>
<Link id="l04033" /><CodeLine lineNumber="4033"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.Policy != BotPolicy) &#123;</Highlight></CodeLine>
<Link id="l04034" /><CodeLine lineNumber="4034"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.reset(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a>());</Highlight></CodeLine>
<Link id="l04035" /><CodeLine lineNumber="4035"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a5db5287f3514fcc23bb3f93d769b3e96">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>, <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>);</Highlight></CodeLine>
<Link id="l04036" /><CodeLine lineNumber="4036"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.Reason != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;failed to find the first candidate&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04037" /><CodeLine lineNumber="4037"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04038" /><CodeLine lineNumber="4038"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>));</Highlight></CodeLine>
<Link id="l04039" /><CodeLine lineNumber="4039"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#ifndef NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04040" /><CodeLine lineNumber="4040"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>) &#123;</Highlight></CodeLine>
<Link id="l04041" /><CodeLine lineNumber="4041"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> TCand;</Highlight></CodeLine>
<Link id="l04042" /><CodeLine lineNumber="4042"><Highlight kind="normal">      TCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a361fa10c095c303e093021c6a1d04e75">reset</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a>());</Highlight></CodeLine>
<Link id="l04043" /><CodeLine lineNumber="4043"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/postgenericscheduler/#a5db5287f3514fcc23bb3f93d769b3e96">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>, <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>);</Highlight></CodeLine>
<Link id="l04044" /><CodeLine lineNumber="4044"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> == <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.SU &amp;&amp;</Highlight></CodeLine>
<Link id="l04045" /><CodeLine lineNumber="4045"><Highlight kind="normal">             </Highlight><Highlight kind="stringliteral">&quot;Last pick result should correspond to re-picking right now&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04046" /><CodeLine lineNumber="4046"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04047" /><CodeLine lineNumber="4047"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04048" /><CodeLine lineNumber="4048"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04049" /><CodeLine lineNumber="4049"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04050" /><CodeLine lineNumber="4050"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check if the top Q has a better candidate.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04051" /><CodeLine lineNumber="4051"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Picking from Top:\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04052" /><CodeLine lineNumber="4052"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.isValid() || <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.SU-&gt;isScheduled ||</Highlight></CodeLine>
<Link id="l04053" /><CodeLine lineNumber="4053"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.Policy != TopPolicy) &#123;</Highlight></CodeLine>
<Link id="l04054" /><CodeLine lineNumber="4054"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.reset(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a>());</Highlight></CodeLine>
<Link id="l04055" /><CodeLine lineNumber="4055"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a5db5287f3514fcc23bb3f93d769b3e96">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>, <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>);</Highlight></CodeLine>
<Link id="l04056" /><CodeLine lineNumber="4056"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.Reason != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;failed to find the first candidate&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04057" /><CodeLine lineNumber="4057"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04058" /><CodeLine lineNumber="4058"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>));</Highlight></CodeLine>
<Link id="l04059" /><CodeLine lineNumber="4059"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#ifndef NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04060" /><CodeLine lineNumber="4060"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a4d101d816188a045c0b595a6a2c5d3a3">VerifyScheduling</a>) &#123;</Highlight></CodeLine>
<Link id="l04061" /><CodeLine lineNumber="4061"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> TCand;</Highlight></CodeLine>
<Link id="l04062" /><CodeLine lineNumber="4062"><Highlight kind="normal">      TCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a361fa10c095c303e093021c6a1d04e75">reset</a>(<a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a>());</Highlight></CodeLine>
<Link id="l04063" /><CodeLine lineNumber="4063"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/postgenericscheduler/#a5db5287f3514fcc23bb3f93d769b3e96">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>, <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>);</Highlight></CodeLine>
<Link id="l04064" /><CodeLine lineNumber="4064"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TCand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a> == <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.SU &amp;&amp;</Highlight></CodeLine>
<Link id="l04065" /><CodeLine lineNumber="4065"><Highlight kind="normal">             </Highlight><Highlight kind="stringliteral">&quot;Last pick result should correspond to re-picking right now&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04066" /><CodeLine lineNumber="4066"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04067" /><CodeLine lineNumber="4067"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04068" /><CodeLine lineNumber="4068"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04069" /><CodeLine lineNumber="4069"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04070" /><CodeLine lineNumber="4070"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Pick best from BotCand and TopCand.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04071" /><CodeLine lineNumber="4071"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.isValid());</Highlight></CodeLine>
<Link id="l04072" /><CodeLine lineNumber="4072"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.isValid());</Highlight></CodeLine>
<Link id="l04073" /><CodeLine lineNumber="4073"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate">SchedCandidate</a> Cand = <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>;</Highlight></CodeLine>
<Link id="l04074" /><CodeLine lineNumber="4074"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.Reason = <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</Highlight></CodeLine>
<Link id="l04075" /><CodeLine lineNumber="4075"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/postgenericscheduler/#a09835bd12a7088d224f84e7899946040">tryCandidate</a>(Cand, <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>)) &#123;</Highlight></CodeLine>
<Link id="l04076" /><CodeLine lineNumber="4076"><Highlight kind="normal">    Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a294e77c4f7245940981e5e259045c7c0">setBest</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>);</Highlight></CodeLine>
<Link id="l04077" /><CodeLine lineNumber="4077"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(Cand));</Highlight></CodeLine>
<Link id="l04078" /><CodeLine lineNumber="4078"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04079" /><CodeLine lineNumber="4079"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04080" /><CodeLine lineNumber="4080"><Highlight kind="normal">  IsTopNode = Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>;</Highlight></CodeLine>
<Link id="l04081" /><CodeLine lineNumber="4081"><Highlight kind="normal">  <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(Cand);</Highlight></CodeLine>
<Link id="l04082" /><CodeLine lineNumber="4082"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Cand.<a href="/docs/api/structs/llvm/genericschedulerbase/schedcandidate/#a310a170b7d2442d12634d53db262fb92">SU</a>;</Highlight></CodeLine>
<Link id="l04083" /><CodeLine lineNumber="4083"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04084" /><CodeLine lineNumber="4084"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04085" /><CodeLine lineNumber="4085"><Highlight kind="comment">/// Pick the next node to schedule.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04086" /><CodeLine lineNumber="4086" lineLink="/docs/api/classes/llvm/postgenericscheduler/#af8a37b0efa51cfd3f6b4729e3298de7f"><Highlight kind="normal"><a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/llvm/postgenericscheduler/#af8a37b0efa51cfd3f6b4729e3298de7f">PostGenericScheduler::pickNode</a>(</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> &amp;IsTopNode) &#123;</Highlight></CodeLine>
<Link id="l04087" /><CodeLine lineNumber="4087"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;top() == <a href="/docs/api/classes/llvm/postgenericscheduler/#a228f5e150e68f65407ed303218827a0a">DAG</a>-&gt;bottom()) &#123;</Highlight></CodeLine>
<Link id="l04088" /><CodeLine lineNumber="4088"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.Available.empty() &amp;&amp; <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.Pending.empty() &amp;&amp;</Highlight></CodeLine>
<Link id="l04089" /><CodeLine lineNumber="4089"><Highlight kind="normal">           <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.Available.empty() &amp;&amp; <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.Pending.empty() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;ReadyQ garbage&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04090" /><CodeLine lineNumber="4090"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04091" /><CodeLine lineNumber="4091"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04092" /><CodeLine lineNumber="4092"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU;</Highlight></CodeLine>
<Link id="l04093" /><CodeLine lineNumber="4093"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">do</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04094" /><CodeLine lineNumber="4094"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyBottomUp) &#123;</Highlight></CodeLine>
<Link id="l04095" /><CodeLine lineNumber="4095"><Highlight kind="normal">      SU = <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.pickOnlyChoice();</Highlight></CodeLine>
<Link id="l04096" /><CodeLine lineNumber="4096"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU) &#123;</Highlight></CodeLine>
<Link id="l04097" /><CodeLine lineNumber="4097"><Highlight kind="normal">        <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a3e5ec7d7634a70f61fd64c3ef22d02f1">Only1</a>, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04098" /><CodeLine lineNumber="4098"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04099" /><CodeLine lineNumber="4099"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> NoPolicy;</Highlight></CodeLine>
<Link id="l04100" /><CodeLine lineNumber="4100"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.reset(NoPolicy);</Highlight></CodeLine>
<Link id="l04101" /><CodeLine lineNumber="4101"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Set the bottom-up policy based on the state of the current bottom</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04102" /><CodeLine lineNumber="4102"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// zone and the instructions outside the zone, including the top zone.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04103" /><CodeLine lineNumber="4103"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/genericschedulerbase/#a8668556014566994c07b21391762551b">setPolicy</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.Policy, </Highlight><Highlight kind="comment">/&#42;IsPostRA=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04104" /><CodeLine lineNumber="4104"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/postgenericscheduler/#a5db5287f3514fcc23bb3f93d769b3e96">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>, <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>);</Highlight></CodeLine>
<Link id="l04105" /><CodeLine lineNumber="4105"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.Reason != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;failed to find a candidate&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04106" /><CodeLine lineNumber="4106"><Highlight kind="normal">        <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>);</Highlight></CodeLine>
<Link id="l04107" /><CodeLine lineNumber="4107"><Highlight kind="normal">        SU = <a href="/docs/api/classes/llvm/postgenericscheduler/#a489c1082c995fab731252fd92020343c">BotCand</a>.SU;</Highlight></CodeLine>
<Link id="l04108" /><CodeLine lineNumber="4108"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l04109" /><CodeLine lineNumber="4109"><Highlight kind="normal">      IsTopNode = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04110" /><CodeLine lineNumber="4110"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/genericschedulerbase/#a8e13153e8ed7676ddbba73dd9318d35e">RegionPolicy</a>.OnlyTopDown) &#123;</Highlight></CodeLine>
<Link id="l04111" /><CodeLine lineNumber="4111"><Highlight kind="normal">      SU = <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.pickOnlyChoice();</Highlight></CodeLine>
<Link id="l04112" /><CodeLine lineNumber="4112"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU) &#123;</Highlight></CodeLine>
<Link id="l04113" /><CodeLine lineNumber="4113"><Highlight kind="normal">        <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a3e5ec7d7634a70f61fd64c3ef22d02f1">Only1</a>, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04114" /><CodeLine lineNumber="4114"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04115" /><CodeLine lineNumber="4115"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/genericschedulerbase/candpolicy">CandPolicy</a> NoPolicy;</Highlight></CodeLine>
<Link id="l04116" /><CodeLine lineNumber="4116"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.reset(NoPolicy);</Highlight></CodeLine>
<Link id="l04117" /><CodeLine lineNumber="4117"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Set the top-down policy based on the state of the current top zone</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04118" /><CodeLine lineNumber="4118"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// and the instructions outside the zone, including the bottom zone.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04119" /><CodeLine lineNumber="4119"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/genericschedulerbase/#a8668556014566994c07b21391762551b">setPolicy</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.Policy, </Highlight><Highlight kind="comment">/&#42;IsPostRA=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04120" /><CodeLine lineNumber="4120"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/postgenericscheduler/#a5db5287f3514fcc23bb3f93d769b3e96">pickNodeFromQueue</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>, <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>);</Highlight></CodeLine>
<Link id="l04121" /><CodeLine lineNumber="4121"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.Reason != <a href="/docs/api/classes/llvm/genericschedulerbase/#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;failed to find a candidate&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04122" /><CodeLine lineNumber="4122"><Highlight kind="normal">        <a href="#a14c35b53586841aad69751a52b7d358a">tracePick</a>(<a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>);</Highlight></CodeLine>
<Link id="l04123" /><CodeLine lineNumber="4123"><Highlight kind="normal">        SU = <a href="/docs/api/classes/llvm/postgenericscheduler/#a79ea7cd8443aa229acb4b411fe0d7ba9">TopCand</a>.SU;</Highlight></CodeLine>
<Link id="l04124" /><CodeLine lineNumber="4124"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l04125" /><CodeLine lineNumber="4125"><Highlight kind="normal">      IsTopNode = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04126" /><CodeLine lineNumber="4126"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04127" /><CodeLine lineNumber="4127"><Highlight kind="normal">      SU = <a href="/docs/api/classes/llvm/postgenericscheduler/#ae8950b6343e504e2112df60ee464603d">pickNodeBidirectional</a>(IsTopNode);</Highlight></CodeLine>
<Link id="l04128" /><CodeLine lineNumber="4128"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04129" /><CodeLine lineNumber="4129"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a>);</Highlight></CodeLine>
<Link id="l04130" /><CodeLine lineNumber="4130"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04131" /><CodeLine lineNumber="4131"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ae0b8da4dfde85d4ddc32359ca52dc493">isTopReady</a>())</Highlight></CodeLine>
<Link id="l04132" /><CodeLine lineNumber="4132"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.removeReady(SU);</Highlight></CodeLine>
<Link id="l04133" /><CodeLine lineNumber="4133"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#ac198a5fb130b4c09836ba20e01b4290d">isBottomReady</a>())</Highlight></CodeLine>
<Link id="l04134" /><CodeLine lineNumber="4134"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.removeReady(SU);</Highlight></CodeLine>
<Link id="l04135" /><CodeLine lineNumber="4135"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04136" /><CodeLine lineNumber="4136"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Scheduling SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04137" /><CodeLine lineNumber="4137"><Highlight kind="normal">                    &lt;&lt; &#42;SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>());</Highlight></CodeLine>
<Link id="l04138" /><CodeLine lineNumber="4138"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> SU;</Highlight></CodeLine>
<Link id="l04139" /><CodeLine lineNumber="4139"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04140" /><CodeLine lineNumber="4140"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04141" /><CodeLine lineNumber="4141"><Highlight kind="comment">/// Called after ScheduleDAGMI has scheduled an instruction and updated</Highlight></CodeLine>
<Link id="l04142" /><CodeLine lineNumber="4142"><Highlight kind="comment">/// scheduled/remaining flags in the DAG nodes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04143" /><CodeLine lineNumber="4143" lineLink="/docs/api/classes/llvm/postgenericscheduler/#a19c13266ab002ad2ce608573c4d2c98e"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/postgenericscheduler/#a19c13266ab002ad2ce608573c4d2c98e">PostGenericScheduler::schedNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsTopNode) &#123;</Highlight></CodeLine>
<Link id="l04144" /><CodeLine lineNumber="4144"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsTopNode) &#123;</Highlight></CodeLine>
<Link id="l04145" /><CodeLine lineNumber="4145"><Highlight kind="normal">    SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> = std::max(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a>, <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.getCurrCycle());</Highlight></CodeLine>
<Link id="l04146" /><CodeLine lineNumber="4146"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a406dc33395b3fd7b56da9a33fbccdc82">Top</a>.bumpNode(SU);</Highlight></CodeLine>
<Link id="l04147" /><CodeLine lineNumber="4147"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04148" /><CodeLine lineNumber="4148"><Highlight kind="normal">    SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> = std::max(SU-&gt;<a href="/docs/api/classes/llvm/sunit/#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>, <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.getCurrCycle());</Highlight></CodeLine>
<Link id="l04149" /><CodeLine lineNumber="4149"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/postgenericscheduler/#a4c76c3d1f5eb7366210f06001f8b9892">Bot</a>.bumpNode(SU);</Highlight></CodeLine>
<Link id="l04150" /><CodeLine lineNumber="4150"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04151" /><CodeLine lineNumber="4151"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04152" /><CodeLine lineNumber="4152"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04153" /><CodeLine lineNumber="4153" lineLink="/docs/api/namespaces/llvm/#aa2f0c2f2a077d67dc0bcb24bc31e3b05"><Highlight kind="normal"><a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;<a href="/docs/api/namespaces/llvm/#aa2f0c2f2a077d67dc0bcb24bc31e3b05">llvm::createGenericSchedPostRA</a>(<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l04154" /><CodeLine lineNumber="4154"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;DAG =</Highlight></CodeLine>
<Link id="l04155" /><CodeLine lineNumber="4155"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, std::make&#95;unique&lt;PostGenericScheduler&gt;(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>),</Highlight></CodeLine>
<Link id="l04156" /><CodeLine lineNumber="4156"><Highlight kind="normal">                        </Highlight><Highlight kind="comment">/&#42;RemoveKillFlags=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04157" /><CodeLine lineNumber="4157"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetsubtargetinfo">TargetSubtargetInfo</a> &amp;STI = <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;MF-&gt;getSubtarget();</Highlight></CodeLine>
<Link id="l04158" /><CodeLine lineNumber="4158"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Add MacroFusion mutation if fusions are not empty.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04159" /><CodeLine lineNumber="4159"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;MacroFusions = STI.<a href="/docs/api/classes/llvm/targetsubtargetinfo/#a2b74e2ebb235e247397d5d87df776e66">getMacroFusions</a>();</Highlight></CodeLine>
<Link id="l04160" /><CodeLine lineNumber="4160"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!MacroFusions.empty())</Highlight></CodeLine>
<Link id="l04161" /><CodeLine lineNumber="4161"><Highlight kind="normal">    DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a2002164aea6fabe20598e0526746b1fa">addMutation</a>(<a href="/docs/api/namespaces/llvm/#a1b646d2ebeba4a7119c3d4fec4d137dc">createMacroFusionDAGMutation</a>(MacroFusions));</Highlight></CodeLine>
<Link id="l04162" /><CodeLine lineNumber="4162"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG;</Highlight></CodeLine>
<Link id="l04163" /><CodeLine lineNumber="4163"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04164" /><CodeLine lineNumber="4164"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04165" /><CodeLine lineNumber="4165"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04166" /><CodeLine lineNumber="4166"><Highlight kind="normal"></Highlight><Highlight kind="comment">// ILP Scheduler. Currently for experimental analysis of heuristics.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04167" /><CodeLine lineNumber="4167"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04168" /><CodeLine lineNumber="4168"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04169" /><CodeLine lineNumber="4169"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04170" /><CodeLine lineNumber="4170"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04171" /><CodeLine lineNumber="4171"><Highlight kind="comment">/// Order nodes by the ILP metric.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04172" /><CodeLine lineNumber="4172" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder"><Highlight kind="normal"></Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal"><a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#abf160a684d52727348fa1a8a64a68799">ILPOrder</a> &#123;</Highlight></CodeLine>
<Link id="l04173" /><CodeLine lineNumber="4173" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheddfsresult">SchedDFSResult</a> &#42;<a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a> = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04174" /><CodeLine lineNumber="4174" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a066bf2acd636df6d9c364efc9020e9b1"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/bitvector">BitVector</a> &#42;<a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a066bf2acd636df6d9c364efc9020e9b1">ScheduledTrees</a> = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04175" /><CodeLine lineNumber="4175" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#ad8a508685c4207a0b1b88ad607d06efd"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#ad8a508685c4207a0b1b88ad607d06efd">MaximizeILP</a>;</Highlight></CodeLine>
<Link id="l04176" /><CodeLine lineNumber="4176"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04177" /><CodeLine lineNumber="4177" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#abf160a684d52727348fa1a8a64a68799"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#abf160a684d52727348fa1a8a64a68799">ILPOrder</a>(</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> MaxILP) : <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#ad8a508685c4207a0b1b88ad607d06efd">MaximizeILP</a>(MaxILP) &#123;&#125;</Highlight></CodeLine>
<Link id="l04178" /><CodeLine lineNumber="4178"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04179" /><CodeLine lineNumber="4179"><Highlight kind="comment">  /// Apply a less-than relation on node priority.</Highlight></CodeLine>
<Link id="l04180" /><CodeLine lineNumber="4180"><Highlight kind="comment">  ///</Highlight></CodeLine>
<Link id="l04181" /><CodeLine lineNumber="4181"><Highlight kind="comment">  /// (Return true if A comes after B in the Q.)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04182" /><CodeLine lineNumber="4182" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a9cef0fc1ea3d0a80f8e881d1a60f0a04"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a9cef0fc1ea3d0a80f8e881d1a60f0a04">operator()</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04183" /><CodeLine lineNumber="4183"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SchedTreeA = <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getSubtreeID(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>);</Highlight></CodeLine>
<Link id="l04184" /><CodeLine lineNumber="4184"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SchedTreeB = <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getSubtreeID(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</Highlight></CodeLine>
<Link id="l04185" /><CodeLine lineNumber="4185"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SchedTreeA != SchedTreeB) &#123;</Highlight></CodeLine>
<Link id="l04186" /><CodeLine lineNumber="4186"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Unscheduled trees have lower priority.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04187" /><CodeLine lineNumber="4187"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a066bf2acd636df6d9c364efc9020e9b1">ScheduledTrees</a>-&gt;test(SchedTreeA) != <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a066bf2acd636df6d9c364efc9020e9b1">ScheduledTrees</a>-&gt;test(SchedTreeB))</Highlight></CodeLine>
<Link id="l04188" /><CodeLine lineNumber="4188"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a066bf2acd636df6d9c364efc9020e9b1">ScheduledTrees</a>-&gt;test(SchedTreeB);</Highlight></CodeLine>
<Link id="l04189" /><CodeLine lineNumber="4189"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04190" /><CodeLine lineNumber="4190"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Trees with shallower connections have lower priority.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04191" /><CodeLine lineNumber="4191"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getSubtreeLevel(SchedTreeA)</Highlight></CodeLine>
<Link id="l04192" /><CodeLine lineNumber="4192"><Highlight kind="normal">          != <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getSubtreeLevel(SchedTreeB)) &#123;</Highlight></CodeLine>
<Link id="l04193" /><CodeLine lineNumber="4193"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getSubtreeLevel(SchedTreeA)</Highlight></CodeLine>
<Link id="l04194" /><CodeLine lineNumber="4194"><Highlight kind="normal">          &lt; <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getSubtreeLevel(SchedTreeB);</Highlight></CodeLine>
<Link id="l04195" /><CodeLine lineNumber="4195"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l04196" /><CodeLine lineNumber="4196"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04197" /><CodeLine lineNumber="4197"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#ad8a508685c4207a0b1b88ad607d06efd">MaximizeILP</a>)</Highlight></CodeLine>
<Link id="l04198" /><CodeLine lineNumber="4198"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getILP(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>) &lt; <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getILP(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</Highlight></CodeLine>
<Link id="l04199" /><CodeLine lineNumber="4199"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04200" /><CodeLine lineNumber="4200"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getILP(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>) &gt; <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder/#a2a0399d3f96b0838922377265fa8626d">DFSResult</a>-&gt;getILP(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</Highlight></CodeLine>
<Link id="l04201" /><CodeLine lineNumber="4201"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04202" /><CodeLine lineNumber="4202"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l04203" /><CodeLine lineNumber="4203"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04204" /><CodeLine lineNumber="4204"><Highlight kind="comment">/// Schedule based on the ILP metric.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04205" /><CodeLine lineNumber="4205" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler"><Highlight kind="normal"></Highlight><Highlight kind="keyword">class </Highlight><Highlight kind="normal"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a64f45a80a15c38a77d27f3264e954fd2">ILPScheduler</a> : </Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineschedstrategy">MachineSchedStrategy</a> &#123;</Highlight></CodeLine>
<Link id="l04206" /><CodeLine lineNumber="4206"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a> &#42;DAG = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04207" /><CodeLine lineNumber="4207"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/ilporder">ILPOrder</a> Cmp;</Highlight></CodeLine>
<Link id="l04208" /><CodeLine lineNumber="4208"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04209" /><CodeLine lineNumber="4209"><Highlight kind="normal">  std::vector&lt;SUnit&#42;&gt; ReadyQ;</Highlight></CodeLine>
<Link id="l04210" /><CodeLine lineNumber="4210"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04211" /><CodeLine lineNumber="4211"><Highlight kind="normal"></Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l04212" /><CodeLine lineNumber="4212" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a64f45a80a15c38a77d27f3264e954fd2"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a64f45a80a15c38a77d27f3264e954fd2">ILPScheduler</a>(</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> MaximizeILP) : Cmp(MaximizeILP) &#123;&#125;</Highlight></CodeLine>
<Link id="l04213" /><CodeLine lineNumber="4213"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04214" /><CodeLine lineNumber="4214" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a6fc742f69804969334c5298829787a0d"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a6fc742f69804969334c5298829787a0d">initialize</a>(<a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;dag)</Highlight><Highlight kind="keyword"> override </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04215" /><CodeLine lineNumber="4215"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(dag-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a78c0f3feb8a81ca338f843494cff564e">hasVRegLiveness</a>() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;ILPScheduler needs vreg liveness&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04216" /><CodeLine lineNumber="4216"><Highlight kind="normal">    DAG = </Highlight><Highlight kind="keyword">static&#95;cast&lt;</Highlight><Highlight kind="normal"><a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>&#42;</Highlight><Highlight kind="keyword">&gt;</Highlight><Highlight kind="normal">(dag);</Highlight></CodeLine>
<Link id="l04217" /><CodeLine lineNumber="4217"><Highlight kind="normal">    DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmilive/#a21c7721fcb12ebb55872b86d33e61e27">computeDFSResult</a>();</Highlight></CodeLine>
<Link id="l04218" /><CodeLine lineNumber="4218"><Highlight kind="normal">    Cmp.DFSResult = DAG-&gt;getDFSResult();</Highlight></CodeLine>
<Link id="l04219" /><CodeLine lineNumber="4219"><Highlight kind="normal">    Cmp.ScheduledTrees = &amp;DAG-&gt;getScheduledTrees();</Highlight></CodeLine>
<Link id="l04220" /><CodeLine lineNumber="4220"><Highlight kind="normal">    ReadyQ.clear();</Highlight></CodeLine>
<Link id="l04221" /><CodeLine lineNumber="4221"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04222" /><CodeLine lineNumber="4222"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04223" /><CodeLine lineNumber="4223" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a14a4581dac109e6b41ed6d99b05e523d"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a14a4581dac109e6b41ed6d99b05e523d">registerRoots</a>()</Highlight><Highlight kind="keyword"> override </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04224" /><CodeLine lineNumber="4224"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Restore the heap in ReadyQ with the updated DFS results.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04225" /><CodeLine lineNumber="4225"><Highlight kind="normal">    std::make&#95;heap(ReadyQ.begin(), ReadyQ.end(), Cmp);</Highlight></CodeLine>
<Link id="l04226" /><CodeLine lineNumber="4226"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04227" /><CodeLine lineNumber="4227"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04228" /><CodeLine lineNumber="4228"><Highlight kind="comment">  /// Implement MachineSchedStrategy interface.</Highlight></CodeLine>
<Link id="l04229" /><CodeLine lineNumber="4229"><Highlight kind="comment">  /// -----------------------------------------</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04230" /><CodeLine lineNumber="4230"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04231" /><CodeLine lineNumber="4231"><Highlight kind="comment">  /// Callback to select the highest priority node from the ready Q.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04232" /><CodeLine lineNumber="4232" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a636abcad4364da7508f5fdce3bbf40e7"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a636abcad4364da7508f5fdce3bbf40e7">pickNode</a>(</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> &amp;IsTopNode)</Highlight><Highlight kind="keyword"> override </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04233" /><CodeLine lineNumber="4233"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ReadyQ.empty()) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04234" /><CodeLine lineNumber="4234"><Highlight kind="normal">    std::pop&#95;heap(ReadyQ.begin(), ReadyQ.end(), Cmp);</Highlight></CodeLine>
<Link id="l04235" /><CodeLine lineNumber="4235"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU = ReadyQ.back();</Highlight></CodeLine>
<Link id="l04236" /><CodeLine lineNumber="4236"><Highlight kind="normal">    ReadyQ.pop&#95;back();</Highlight></CodeLine>
<Link id="l04237" /><CodeLine lineNumber="4237"><Highlight kind="normal">    IsTopNode = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04238" /><CodeLine lineNumber="4238"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Pick node &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04239" /><CodeLine lineNumber="4239"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;SU(&quot;</Highlight><Highlight kind="normal"> &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;) &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04240" /><CodeLine lineNumber="4240"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; ILP: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; DAG-&gt;getDFSResult()-&gt;getILP(SU)</Highlight></CodeLine>
<Link id="l04241" /><CodeLine lineNumber="4241"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; Tree: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; DAG-&gt;getDFSResult()-&gt;getSubtreeID(SU)</Highlight></CodeLine>
<Link id="l04242" /><CodeLine lineNumber="4242"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; @&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04243" /><CodeLine lineNumber="4243"><Highlight kind="normal">                      &lt;&lt; DAG-&gt;getDFSResult()-&gt;getSubtreeLevel(</Highlight></CodeLine>
<Link id="l04244" /><CodeLine lineNumber="4244"><Highlight kind="normal">                             DAG-&gt;getDFSResult()-&gt;getSubtreeID(SU))</Highlight></CodeLine>
<Link id="l04245" /><CodeLine lineNumber="4245"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;\\n&#39;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04246" /><CodeLine lineNumber="4246"><Highlight kind="normal">                      &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Scheduling &quot;</Highlight><Highlight kind="normal"> &lt;&lt; &#42;SU-&gt;<a href="/docs/api/classes/llvm/sunit/#afc98c2c5417cad1a90fc4fe241fe8ba4">getInstr</a>());</Highlight></CodeLine>
<Link id="l04247" /><CodeLine lineNumber="4247"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> SU;</Highlight></CodeLine>
<Link id="l04248" /><CodeLine lineNumber="4248"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04249" /><CodeLine lineNumber="4249"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04250" /><CodeLine lineNumber="4250"><Highlight kind="comment">  /// Scheduler callback to notify that a new subtree is scheduled.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04251" /><CodeLine lineNumber="4251" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a7ea668fb4421816f15292b19b1e20398"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a7ea668fb4421816f15292b19b1e20398">scheduleTree</a>(</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SubtreeID)</Highlight><Highlight kind="keyword"> override </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04252" /><CodeLine lineNumber="4252"><Highlight kind="normal">    std::make&#95;heap(ReadyQ.begin(), ReadyQ.end(), Cmp);</Highlight></CodeLine>
<Link id="l04253" /><CodeLine lineNumber="4253"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04254" /><CodeLine lineNumber="4254"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04255" /><CodeLine lineNumber="4255"><Highlight kind="comment">  /// Callback after a node is scheduled. Mark a newly scheduled tree, notify</Highlight></CodeLine>
<Link id="l04256" /><CodeLine lineNumber="4256"><Highlight kind="comment">  /// DFSResults, and resort the priority Q.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04257" /><CodeLine lineNumber="4257" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a34e4821f128212dcf78f0d39981220a1"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#a34e4821f128212dcf78f0d39981220a1">schedNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsTopNode)</Highlight><Highlight kind="keyword"> override </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04258" /><CodeLine lineNumber="4258"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!IsTopNode &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;SchedDFSResult needs bottom-up&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04259" /><CodeLine lineNumber="4259"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04260" /><CodeLine lineNumber="4260"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04261" /><CodeLine lineNumber="4261" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#aca5d5809b6f8c33edd2000ded2be3911"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#aca5d5809b6f8c33edd2000ded2be3911">releaseTopNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;)</Highlight><Highlight kind="keyword"> override </Highlight><Highlight kind="normal">&#123; </Highlight><Highlight kind="comment">/&#42;only called for top roots&#42;/</Highlight><Highlight kind="normal"> &#125;</Highlight></CodeLine>
<Link id="l04262" /><CodeLine lineNumber="4262"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04263" /><CodeLine lineNumber="4263" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#aa37a1b64ef4694b941ddf3a435999006"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/ilpscheduler/#aa37a1b64ef4694b941ddf3a435999006">releaseBottomNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU)</Highlight><Highlight kind="keyword"> override </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04264" /><CodeLine lineNumber="4264"><Highlight kind="normal">    ReadyQ.push&#95;back(SU);</Highlight></CodeLine>
<Link id="l04265" /><CodeLine lineNumber="4265"><Highlight kind="normal">    std::push&#95;heap(ReadyQ.begin(), ReadyQ.end(), Cmp);</Highlight></CodeLine>
<Link id="l04266" /><CodeLine lineNumber="4266"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04267" /><CodeLine lineNumber="4267"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l04268" /><CodeLine lineNumber="4268"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04269" /><CodeLine lineNumber="4269"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// end anonymous namespace</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04270" /><CodeLine lineNumber="4270"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04271" /><CodeLine lineNumber="4271" lineLink="#aea7e1660e87235378f5cc48ccb4ae84d"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="#aea7e1660e87235378f5cc48ccb4ae84d">createILPMaxScheduler</a>(<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l04272" /><CodeLine lineNumber="4272"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, std::make&#95;unique&lt;ILPScheduler&gt;(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l04273" /><CodeLine lineNumber="4273"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04274" /><CodeLine lineNumber="4274" lineLink="#af4d9ddf767f3d44d93ad376a247dabe4"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="#af4d9ddf767f3d44d93ad376a247dabe4">createILPMinScheduler</a>(<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l04275" /><CodeLine lineNumber="4275"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, std::make&#95;unique&lt;ILPScheduler&gt;(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l04276" /><CodeLine lineNumber="4276"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04277" /><CodeLine lineNumber="4277"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04278" /><CodeLine lineNumber="4278" lineLink="#a0c63cc9aec9e7f21b6c9fc9ad6abf545"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a> <a href="#a0c63cc9aec9e7f21b6c9fc9ad6abf545">ILPMaxRegistry</a>(</Highlight></CodeLine>
<Link id="l04279" /><CodeLine lineNumber="4279"><Highlight kind="normal">  </Highlight><Highlight kind="stringliteral">&quot;ilpmax&quot;</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;Schedule bottom-up for max ILP&quot;</Highlight><Highlight kind="normal">, <a href="#aea7e1660e87235378f5cc48ccb4ae84d">createILPMaxScheduler</a>);</Highlight></CodeLine>
<Link id="l04280" /><CodeLine lineNumber="4280" lineLink="#afcd0814798a2d0868cec352f25fc932c"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a> <a href="#afcd0814798a2d0868cec352f25fc932c">ILPMinRegistry</a>(</Highlight></CodeLine>
<Link id="l04281" /><CodeLine lineNumber="4281"><Highlight kind="normal">  </Highlight><Highlight kind="stringliteral">&quot;ilpmin&quot;</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;Schedule bottom-up for min ILP&quot;</Highlight><Highlight kind="normal">, <a href="#af4d9ddf767f3d44d93ad376a247dabe4">createILPMinScheduler</a>);</Highlight></CodeLine>
<Link id="l04282" /><CodeLine lineNumber="4282"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04283" /><CodeLine lineNumber="4283"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04284" /><CodeLine lineNumber="4284"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Machine Instruction Shuffler for Correctness Testing</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04285" /><CodeLine lineNumber="4285"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04286" /><CodeLine lineNumber="4286"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04287" /><CodeLine lineNumber="4287"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#ifndef NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04288" /><CodeLine lineNumber="4288"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04289" /><CodeLine lineNumber="4289"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04290" /><CodeLine lineNumber="4290"><Highlight kind="comment">/// Apply a less-than relation on the node order, which corresponds to the</Highlight></CodeLine>
<Link id="l04291" /><CodeLine lineNumber="4291"><Highlight kind="comment">/// instruction order prior to scheduling. IsReverse implements greater-than.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04292" /><CodeLine lineNumber="4292"><Highlight kind="normal"></Highlight><Highlight kind="keyword">template</Highlight><Highlight kind="normal">&lt;</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsReverse&gt;</Highlight></CodeLine>
<Link id="l04293" /><CodeLine lineNumber="4293" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/sunitorder"><Highlight kind="normal"></Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal"><a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/sunitorder">SUnitOrder</a> &#123;</Highlight></CodeLine>
<Link id="l04294" /><CodeLine lineNumber="4294" lineLink="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/sunitorder/#a13579df131de5c8add4a77d07a86c11a"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/sunitorder/#a13579df131de5c8add4a77d07a86c11a">operator()</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04295" /><CodeLine lineNumber="4295"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsReverse)</Highlight></CodeLine>
<Link id="l04296" /><CodeLine lineNumber="4296"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;NodeNum &gt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>-&gt;NodeNum;</Highlight></CodeLine>
<Link id="l04297" /><CodeLine lineNumber="4297"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04298" /><CodeLine lineNumber="4298"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>-&gt;NodeNum &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>-&gt;NodeNum;</Highlight></CodeLine>
<Link id="l04299" /><CodeLine lineNumber="4299"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04300" /><CodeLine lineNumber="4300"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l04301" /><CodeLine lineNumber="4301"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04302" /><CodeLine lineNumber="4302"><Highlight kind="comment">/// Reorder instructions as much as possible.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04303" /><CodeLine lineNumber="4303" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler"><Highlight kind="normal"></Highlight><Highlight kind="keyword">class </Highlight><Highlight kind="normal"><a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#a1c4502a5bcd3cf03d4ae0f6f5c1fd833">InstructionShuffler</a> : </Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineschedstrategy">MachineSchedStrategy</a> &#123;</Highlight></CodeLine>
<Link id="l04304" /><CodeLine lineNumber="4304"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsAlternating;</Highlight></CodeLine>
<Link id="l04305" /><CodeLine lineNumber="4305"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsTopDown;</Highlight></CodeLine>
<Link id="l04306" /><CodeLine lineNumber="4306"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04307" /><CodeLine lineNumber="4307"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Using a less-than relation (SUnitOrder&lt;false&gt;) for the TopQ priority</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04308" /><CodeLine lineNumber="4308"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// gives nodes with a higher number higher priority causing the latest</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04309" /><CodeLine lineNumber="4309"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// instructions to be scheduled first.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04310" /><CodeLine lineNumber="4310"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/priorityqueue">PriorityQueue&lt;SUnit&#42;, std::vector&lt;SUnit&#42;&gt;</a>, <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/sunitorder">SUnitOrder&lt;false&gt;</a>&gt;</Highlight></CodeLine>
<Link id="l04311" /><CodeLine lineNumber="4311"><Highlight kind="normal">    TopQ;</Highlight></CodeLine>
<Link id="l04312" /><CodeLine lineNumber="4312"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04313" /><CodeLine lineNumber="4313"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// When scheduling bottom-up, use greater-than as the queue priority.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04314" /><CodeLine lineNumber="4314"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/priorityqueue">PriorityQueue&lt;SUnit&#42;, std::vector&lt;SUnit&#42;&gt;</a>, <a href="/docs/api/structs/anonymous-namespace-machinescheduler-cpp-/sunitorder">SUnitOrder&lt;true&gt;</a>&gt;</Highlight></CodeLine>
<Link id="l04315" /><CodeLine lineNumber="4315"><Highlight kind="normal">    BottomQ;</Highlight></CodeLine>
<Link id="l04316" /><CodeLine lineNumber="4316"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04317" /><CodeLine lineNumber="4317"><Highlight kind="normal"></Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l04318" /><CodeLine lineNumber="4318" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#a1c4502a5bcd3cf03d4ae0f6f5c1fd833"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#a1c4502a5bcd3cf03d4ae0f6f5c1fd833">InstructionShuffler</a>(</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> alternate, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> topdown)</Highlight></CodeLine>
<Link id="l04319" /><CodeLine lineNumber="4319"><Highlight kind="normal">    : IsAlternating(alternate), IsTopDown(topdown) &#123;&#125;</Highlight></CodeLine>
<Link id="l04320" /><CodeLine lineNumber="4320"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04321" /><CodeLine lineNumber="4321" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#a0c0887c26b8a145b851726fb71bc7424"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#a0c0887c26b8a145b851726fb71bc7424">initialize</a>(<a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a>&#42;)</Highlight><Highlight kind="keyword"> override </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04322" /><CodeLine lineNumber="4322"><Highlight kind="normal">    TopQ.clear();</Highlight></CodeLine>
<Link id="l04323" /><CodeLine lineNumber="4323"><Highlight kind="normal">    BottomQ.clear();</Highlight></CodeLine>
<Link id="l04324" /><CodeLine lineNumber="4324"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04325" /><CodeLine lineNumber="4325"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04326" /><CodeLine lineNumber="4326"><Highlight kind="comment">  /// Implement MachineSchedStrategy interface.</Highlight></CodeLine>
<Link id="l04327" /><CodeLine lineNumber="4327"><Highlight kind="comment">  /// -----------------------------------------</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04328" /><CodeLine lineNumber="4328"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04329" /><CodeLine lineNumber="4329" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#ab2f0461b159b9b2dc36f1ce07ef8f360"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#ab2f0461b159b9b2dc36f1ce07ef8f360">pickNode</a>(</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> &amp;IsTopNode)</Highlight><Highlight kind="keyword"> override </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04330" /><CodeLine lineNumber="4330"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU;</Highlight></CodeLine>
<Link id="l04331" /><CodeLine lineNumber="4331"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsTopDown) &#123;</Highlight></CodeLine>
<Link id="l04332" /><CodeLine lineNumber="4332"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">do</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04333" /><CodeLine lineNumber="4333"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TopQ.empty()) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04334" /><CodeLine lineNumber="4334"><Highlight kind="normal">        SU = TopQ.top();</Highlight></CodeLine>
<Link id="l04335" /><CodeLine lineNumber="4335"><Highlight kind="normal">        TopQ.pop();</Highlight></CodeLine>
<Link id="l04336" /><CodeLine lineNumber="4336"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a>);</Highlight></CodeLine>
<Link id="l04337" /><CodeLine lineNumber="4337"><Highlight kind="normal">      IsTopNode = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04338" /><CodeLine lineNumber="4338"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04339" /><CodeLine lineNumber="4339"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">do</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04340" /><CodeLine lineNumber="4340"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (BottomQ.empty()) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04341" /><CodeLine lineNumber="4341"><Highlight kind="normal">        SU = BottomQ.top();</Highlight></CodeLine>
<Link id="l04342" /><CodeLine lineNumber="4342"><Highlight kind="normal">        BottomQ.pop();</Highlight></CodeLine>
<Link id="l04343" /><CodeLine lineNumber="4343"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a>);</Highlight></CodeLine>
<Link id="l04344" /><CodeLine lineNumber="4344"><Highlight kind="normal">      IsTopNode = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04345" /><CodeLine lineNumber="4345"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04346" /><CodeLine lineNumber="4346"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsAlternating)</Highlight></CodeLine>
<Link id="l04347" /><CodeLine lineNumber="4347"><Highlight kind="normal">      IsTopDown = !IsTopDown;</Highlight></CodeLine>
<Link id="l04348" /><CodeLine lineNumber="4348"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> SU;</Highlight></CodeLine>
<Link id="l04349" /><CodeLine lineNumber="4349"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04350" /><CodeLine lineNumber="4350"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04351" /><CodeLine lineNumber="4351" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#a7513d8d3f4078ce1ec2307197dc97bd5"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#a7513d8d3f4078ce1ec2307197dc97bd5">schedNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsTopNode)</Highlight><Highlight kind="keyword"> override </Highlight><Highlight kind="normal">&#123;&#125;</Highlight></CodeLine>
<Link id="l04352" /><CodeLine lineNumber="4352"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04353" /><CodeLine lineNumber="4353" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#ab2e24baa75c09ce5615ff615de882a08"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#ab2e24baa75c09ce5615ff615de882a08">releaseTopNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU)</Highlight><Highlight kind="keyword"> override </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04354" /><CodeLine lineNumber="4354"><Highlight kind="normal">    TopQ.push(SU);</Highlight></CodeLine>
<Link id="l04355" /><CodeLine lineNumber="4355"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04356" /><CodeLine lineNumber="4356" lineLink="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#ac0909ecd8661372e3a566375b5afd181"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-machinescheduler-cpp-/instructionshuffler/#ac0909ecd8661372e3a566375b5afd181">releaseBottomNode</a>(<a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU)</Highlight><Highlight kind="keyword"> override </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04357" /><CodeLine lineNumber="4357"><Highlight kind="normal">    BottomQ.push(SU);</Highlight></CodeLine>
<Link id="l04358" /><CodeLine lineNumber="4358"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04359" /><CodeLine lineNumber="4359"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l04360" /><CodeLine lineNumber="4360"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04361" /><CodeLine lineNumber="4361"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// end anonymous namespace</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04362" /><CodeLine lineNumber="4362"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04363" /><CodeLine lineNumber="4363" lineLink="#a781e910364813dd3c1677ab7852630a6"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledaginstrs">ScheduleDAGInstrs</a> &#42;<a href="#a781e910364813dd3c1677ab7852630a6">createInstructionShuffler</a>(<a href="/docs/api/structs/llvm/machineschedcontext">MachineSchedContext</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l04364" /><CodeLine lineNumber="4364"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Alternate =</Highlight></CodeLine>
<Link id="l04365" /><CodeLine lineNumber="4365"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#aa9ff814049edfef549accbca1a8e9eff">PreRADirection</a> != <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3ae89742249a15ad5696e3dcec82f0e76a">MISched::TopDown</a> &amp;&amp; <a href="/docs/api/namespaces/llvm/#aa9ff814049edfef549accbca1a8e9eff">PreRADirection</a> != <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3abd98ce24773c9ca1e3f7ce3c541e43ea">MISched::BottomUp</a>;</Highlight></CodeLine>
<Link id="l04366" /><CodeLine lineNumber="4366"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> TopDown = <a href="/docs/api/namespaces/llvm/#aa9ff814049edfef549accbca1a8e9eff">PreRADirection</a> != <a href="/docs/api/namespaces/llvm/misched/#a76ffbaf191b81010c8e5da3c4ce028b3abd98ce24773c9ca1e3f7ce3c541e43ea">MISched::BottomUp</a>;</Highlight></CodeLine>
<Link id="l04367" /><CodeLine lineNumber="4367"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>(</Highlight></CodeLine>
<Link id="l04368" /><CodeLine lineNumber="4368"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, std::make&#95;unique&lt;InstructionShuffler&gt;(Alternate, TopDown));</Highlight></CodeLine>
<Link id="l04369" /><CodeLine lineNumber="4369"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04370" /><CodeLine lineNumber="4370"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04371" /><CodeLine lineNumber="4371" lineLink="#ac68c4196407c59fdf134079a44647f81"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineschedregistry">MachineSchedRegistry</a> <a href="#ac68c4196407c59fdf134079a44647f81">ShufflerRegistry</a>(</Highlight></CodeLine>
<Link id="l04372" /><CodeLine lineNumber="4372"><Highlight kind="normal">  </Highlight><Highlight kind="stringliteral">&quot;shuffle&quot;</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;Shuffle machine instructions alternating directions&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l04373" /><CodeLine lineNumber="4373"><Highlight kind="normal">  <a href="#a781e910364813dd3c1677ab7852630a6">createInstructionShuffler</a>);</Highlight></CodeLine>
<Link id="l04374" /><CodeLine lineNumber="4374"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif </Highlight><Highlight kind="comment">// !NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04375" /><CodeLine lineNumber="4375"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04376" /><CodeLine lineNumber="4376"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04377" /><CodeLine lineNumber="4377"><Highlight kind="normal"></Highlight><Highlight kind="comment">// GraphWriter support for ScheduleDAGMILive.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04378" /><CodeLine lineNumber="4378"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04379" /><CodeLine lineNumber="4379"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04380" /><CodeLine lineNumber="4380"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#ifndef NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04381" /><CodeLine lineNumber="4381"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal"><a href="/docs/api/namespaces/llvm">llvm</a> &#123;</Highlight></CodeLine>
<Link id="l04382" /><CodeLine lineNumber="4382"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04383" /><CodeLine lineNumber="4383" lineLink="/docs/api/structs/llvm/graphtraits-3e4d2beef0711eb028dcc7799677e405"><Highlight kind="normal"></Highlight><Highlight kind="keyword">template</Highlight><Highlight kind="normal">&lt;&gt; </Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/graphtraits">GraphTraits</a>&lt;</Highlight></CodeLine>
<Link id="l04384" /><CodeLine lineNumber="4384"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a>&#42;&gt; : </Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/graphtraits">GraphTraits&lt;ScheduleDAG&#42;&gt;</a> &#123;&#125;;</Highlight></CodeLine>
<Link id="l04385" /><CodeLine lineNumber="4385"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04386" /><CodeLine lineNumber="4386"><Highlight kind="normal"></Highlight><Highlight kind="keyword">template</Highlight><Highlight kind="normal">&lt;&gt;</Highlight></CodeLine>
<Link id="l04387" /><CodeLine lineNumber="4387" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405"><Highlight kind="normal"></Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#ae60a7222415878571912427e758f4297">DOTGraphTraits</a>&lt;<a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a>&#42;&gt; : </Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/defaultdotgraphtraits/#a8a0585a182245d87b224f4a26a41cf16">DefaultDOTGraphTraits</a> &#123;</Highlight></CodeLine>
<Link id="l04388" /><CodeLine lineNumber="4388" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#ae60a7222415878571912427e758f4297"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#ae60a7222415878571912427e758f4297">DOTGraphTraits</a>(</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/defaultdotgraphtraits/#ae8629cdc360910256304238ca5db1a45">isSimple</a> = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">) : <a href="/docs/api/structs/llvm/defaultdotgraphtraits/#a8a0585a182245d87b224f4a26a41cf16">DefaultDOTGraphTraits</a>(<a href="/docs/api/structs/llvm/defaultdotgraphtraits/#ae8629cdc360910256304238ca5db1a45">isSimple</a>) &#123;&#125;</Highlight></CodeLine>
<Link id="l04389" /><CodeLine lineNumber="4389"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04390" /><CodeLine lineNumber="4390" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#a9cb35016314cf6da022701d4e0a06fcb"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> std::string <a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#a9cb35016314cf6da022701d4e0a06fcb">getGraphName</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledag">ScheduleDAG</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) &#123;</Highlight></CodeLine>
<Link id="l04391" /><CodeLine lineNumber="4391"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::string(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;MF.getName());</Highlight></CodeLine>
<Link id="l04392" /><CodeLine lineNumber="4392"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04393" /><CodeLine lineNumber="4393"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04394" /><CodeLine lineNumber="4394" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#aff0201d90e079596116145d196d677b2"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#aff0201d90e079596116145d196d677b2">renderGraphFromBottomUp</a>() &#123;</Highlight></CodeLine>
<Link id="l04395" /><CodeLine lineNumber="4395"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04396" /><CodeLine lineNumber="4396"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04397" /><CodeLine lineNumber="4397"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04398" /><CodeLine lineNumber="4398" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#ad5f17f1a4e1d3ba6af4b61d1a268fcc6"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#ad5f17f1a4e1d3ba6af4b61d1a268fcc6">isNodeHidden</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/node">Node</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledag">ScheduleDAG</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) &#123;</Highlight></CodeLine>
<Link id="l04399" /><CodeLine lineNumber="4399"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#ac2b8a3811867143546f43d3adc8cd2f6">ViewMISchedCutoff</a> == 0)</Highlight></CodeLine>
<Link id="l04400" /><CodeLine lineNumber="4400"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04401" /><CodeLine lineNumber="4401"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/node">Node</a>-&gt;Preds.size() &gt; <a href="#ac2b8a3811867143546f43d3adc8cd2f6">ViewMISchedCutoff</a></Highlight></CodeLine>
<Link id="l04402" /><CodeLine lineNumber="4402"><Highlight kind="normal">         || <a href="/docs/api/classes/node">Node</a>-&gt;Succs.size() &gt; <a href="#ac2b8a3811867143546f43d3adc8cd2f6">ViewMISchedCutoff</a>);</Highlight></CodeLine>
<Link id="l04403" /><CodeLine lineNumber="4403"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04404" /><CodeLine lineNumber="4404"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04405" /><CodeLine lineNumber="4405"><Highlight kind="comment">  /// If you want to override the dot attributes printed for a particular</Highlight></CodeLine>
<Link id="l04406" /><CodeLine lineNumber="4406"><Highlight kind="comment">  /// edge, override this method.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04407" /><CodeLine lineNumber="4407" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#a738a1d6d967fd5a8cdf539bced89b0c5"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> std::string <a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#a738a1d6d967fd5a8cdf539bced89b0c5">getEdgeAttributes</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/classes/node">Node</a>,</Highlight></CodeLine>
<Link id="l04408" /><CodeLine lineNumber="4408"><Highlight kind="normal">                                       <a href="/docs/api/classes/llvm/sunititerator">SUnitIterator</a> EI,</Highlight></CodeLine>
<Link id="l04409" /><CodeLine lineNumber="4409"><Highlight kind="normal">                                       </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledag">ScheduleDAG</a> &#42;Graph) &#123;</Highlight></CodeLine>
<Link id="l04410" /><CodeLine lineNumber="4410"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (EI.<a href="/docs/api/classes/llvm/sunititerator/#ad21c405410acc1224a0c595dfee78db3">isArtificialDep</a>())</Highlight></CodeLine>
<Link id="l04411" /><CodeLine lineNumber="4411"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;color=cyan,style=dashed&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04412" /><CodeLine lineNumber="4412"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (EI.<a href="/docs/api/classes/llvm/sunititerator/#ad6eeca3c40d9ebbab3bde59949fc3c13">isCtrlDep</a>())</Highlight></CodeLine>
<Link id="l04413" /><CodeLine lineNumber="4413"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;color=blue,style=dashed&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04414" /><CodeLine lineNumber="4414"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04415" /><CodeLine lineNumber="4415"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04416" /><CodeLine lineNumber="4416"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04417" /><CodeLine lineNumber="4417" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#a9e281d4b0718506e4ec5596a06ae36dd"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> std::string <a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#a9e281d4b0718506e4ec5596a06ae36dd">getNodeLabel</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledag">ScheduleDAG</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) &#123;</Highlight></CodeLine>
<Link id="l04418" /><CodeLine lineNumber="4418"><Highlight kind="normal">    std::string Str;</Highlight></CodeLine>
<Link id="l04419" /><CodeLine lineNumber="4419"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/raw-string-ostream">raw&#95;string&#95;ostream</a> SS(Str);</Highlight></CodeLine>
<Link id="l04420" /><CodeLine lineNumber="4420"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;DAG = </Highlight><Highlight kind="keyword">static&#95;cast&lt;</Highlight><Highlight kind="keyword">const </Highlight><Highlight kind="normal"><a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a>&#42;</Highlight><Highlight kind="keyword">&gt;</Highlight><Highlight kind="normal">(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</Highlight></CodeLine>
<Link id="l04421" /><CodeLine lineNumber="4421"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheddfsresult">SchedDFSResult</a> &#42;DFS = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a78c0f3feb8a81ca338f843494cff564e">hasVRegLiveness</a>() ?</Highlight></CodeLine>
<Link id="l04422" /><CodeLine lineNumber="4422"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">static&#95;cast&lt;</Highlight><Highlight kind="keyword">const </Highlight><Highlight kind="normal"><a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>&#42;</Highlight><Highlight kind="keyword">&gt;</Highlight><Highlight kind="normal">(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>)-&gt;getDFSResult() : </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04423" /><CodeLine lineNumber="4423"><Highlight kind="normal">    SS &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;SU:&quot;</Highlight><Highlight kind="normal"> &lt;&lt; SU-&gt;<a href="/docs/api/classes/llvm/sunit/#a3f708b119627541f144d703a1d183202">NodeNum</a>;</Highlight></CodeLine>
<Link id="l04424" /><CodeLine lineNumber="4424"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DFS)</Highlight></CodeLine>
<Link id="l04425" /><CodeLine lineNumber="4425"><Highlight kind="normal">      SS &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; I:&quot;</Highlight><Highlight kind="normal"> &lt;&lt; DFS-&gt;<a href="/docs/api/classes/llvm/scheddfsresult/#a1bd5822bcf45690f998c2fd86a092ced">getNumInstrs</a>(SU);</Highlight></CodeLine>
<Link id="l04426" /><CodeLine lineNumber="4426"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Str;</Highlight></CodeLine>
<Link id="l04427" /><CodeLine lineNumber="4427"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04428" /><CodeLine lineNumber="4428"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04429" /><CodeLine lineNumber="4429" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#a412a621ecd1fa0c812338cf768411946"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> std::string <a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#a412a621ecd1fa0c812338cf768411946">getNodeDescription</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;SU, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledag">ScheduleDAG</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) &#123;</Highlight></CodeLine>
<Link id="l04430" /><CodeLine lineNumber="4430"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getGraphNodeLabel(SU);</Highlight></CodeLine>
<Link id="l04431" /><CodeLine lineNumber="4431"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04432" /><CodeLine lineNumber="4432"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04433" /><CodeLine lineNumber="4433" lineLink="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#aeec5b7bbdeddc6e81486c44f34c5975a"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> std::string <a href="/docs/api/structs/llvm/dotgraphtraits-3e4d2beef0711eb028dcc7799677e405/#aeec5b7bbdeddc6e81486c44f34c5975a">getNodeAttributes</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sunit">SUnit</a> &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledag">ScheduleDAG</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) &#123;</Highlight></CodeLine>
<Link id="l04434" /><CodeLine lineNumber="4434"><Highlight kind="normal">    std::string Str(</Highlight><Highlight kind="stringliteral">&quot;shape=Mrecord&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04435" /><CodeLine lineNumber="4435"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a> &#42;DAG = </Highlight><Highlight kind="keyword">static&#95;cast&lt;</Highlight><Highlight kind="keyword">const </Highlight><Highlight kind="normal"><a href="/docs/api/classes/llvm/scheduledagmi">ScheduleDAGMI</a>&#42;</Highlight><Highlight kind="keyword">&gt;</Highlight><Highlight kind="normal">(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</Highlight></CodeLine>
<Link id="l04436" /><CodeLine lineNumber="4436"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheddfsresult">SchedDFSResult</a> &#42;DFS = DAG-&gt;<a href="/docs/api/classes/llvm/scheduledagmi/#a78c0f3feb8a81ca338f843494cff564e">hasVRegLiveness</a>() ?</Highlight></CodeLine>
<Link id="l04437" /><CodeLine lineNumber="4437"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">static&#95;cast&lt;</Highlight><Highlight kind="keyword">const </Highlight><Highlight kind="normal"><a href="/docs/api/classes/llvm/scheduledagmilive">ScheduleDAGMILive</a>&#42;</Highlight><Highlight kind="keyword">&gt;</Highlight><Highlight kind="normal">(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>)-&gt;getDFSResult() : </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04438" /><CodeLine lineNumber="4438"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DFS) &#123;</Highlight></CodeLine>
<Link id="l04439" /><CodeLine lineNumber="4439"><Highlight kind="normal">      Str += </Highlight><Highlight kind="stringliteral">&quot;,style=filled,fillcolor=\\&quot;#&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04440" /><CodeLine lineNumber="4440"><Highlight kind="normal">      Str += <a href="/docs/api/namespaces/llvm/dot/#a65ec6bb0b1bfe75533186557a9077d28">DOT::getColorString</a>(DFS-&gt;<a href="/docs/api/classes/llvm/scheddfsresult/#a2b2b597b59be28845565af32824bc8ed">getSubtreeID</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>));</Highlight></CodeLine>
<Link id="l04441" /><CodeLine lineNumber="4441"><Highlight kind="normal">      Str += </Highlight><Highlight kind="charliteral">&#39;&quot;&#39;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04442" /><CodeLine lineNumber="4442"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04443" /><CodeLine lineNumber="4443"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Str;</Highlight></CodeLine>
<Link id="l04444" /><CodeLine lineNumber="4444"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04445" /><CodeLine lineNumber="4445"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l04446" /><CodeLine lineNumber="4446"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04447" /><CodeLine lineNumber="4447"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// end namespace llvm</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04448" /><CodeLine lineNumber="4448"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif </Highlight><Highlight kind="comment">// NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04449" /><CodeLine lineNumber="4449"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04450" /><CodeLine lineNumber="4450"><Highlight kind="comment">/// viewGraph - Pop up a ghostview window with the reachable parts of the DAG</Highlight></CodeLine>
<Link id="l04451" /><CodeLine lineNumber="4451"><Highlight kind="comment">/// rendered using &#39;dot&#39;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04452" /><CodeLine lineNumber="4452" lineLink="/docs/api/classes/llvm/scheduledagmi/#a8181ae26c7912b2ae6214be22c4f6cf5"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a8b7babb023cad0842f5a177e7abe3651">ScheduleDAGMI::viewGraph</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/twine">Twine</a> &amp;Name, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/twine">Twine</a> &amp;Title) &#123;</Highlight></CodeLine>
<Link id="l04453" /><CodeLine lineNumber="4453"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#ifndef NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04454" /><CodeLine lineNumber="4454"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ab8635363d4287c93f64c55ad5567fcf0">ViewGraph</a>(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">, Name, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, Title);</Highlight></CodeLine>
<Link id="l04455" /><CodeLine lineNumber="4455"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04456" /><CodeLine lineNumber="4456"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;ScheduleDAGMI::viewGraph is only available in debug builds on &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04457" /><CodeLine lineNumber="4457"><Highlight kind="normal">         &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;systems with Graphviz or gv!\\n&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04458" /><CodeLine lineNumber="4458"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#endif  </Highlight><Highlight kind="comment">// NDEBUG</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04459" /><CodeLine lineNumber="4459"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04460" /><CodeLine lineNumber="4460"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04461" /><CodeLine lineNumber="4461"><Highlight kind="comment">/// Out-of-line implementation with no arguments is handy for gdb.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04462" /><CodeLine lineNumber="4462" lineLink="/docs/api/classes/llvm/scheduledagmi/#a8b7babb023cad0842f5a177e7abe3651"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/scheduledagmi/#a8b7babb023cad0842f5a177e7abe3651">ScheduleDAGMI::viewGraph</a>() &#123;</Highlight></CodeLine>
<Link id="l04463" /><CodeLine lineNumber="4463"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/scheduledagmi/#a8181ae26c7912b2ae6214be22c4f6cf5">viewGraph</a>(<a href="/docs/api/classes/llvm/scheduledaginstrs/#a23f7a6c4d1be0ca66f44eb4aa499075a">getDAGName</a>(), </Highlight><Highlight kind="stringliteral">&quot;Scheduling-Units Graph for &quot;</Highlight><Highlight kind="normal"> + <a href="/docs/api/classes/llvm/scheduledaginstrs/#a23f7a6c4d1be0ca66f44eb4aa499075a">getDAGName</a>());</Highlight></CodeLine>
<Link id="l04464" /><CodeLine lineNumber="4464"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04465" /><CodeLine lineNumber="4465"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04466" /><CodeLine lineNumber="4466"><Highlight kind="comment">/// Sort predicate for the intervals stored in an instance of</Highlight></CodeLine>
<Link id="l04467" /><CodeLine lineNumber="4467"><Highlight kind="comment">/// ResourceSegments. Intervals are always disjoint (no intersection</Highlight></CodeLine>
<Link id="l04468" /><CodeLine lineNumber="4468"><Highlight kind="comment">/// for any pairs of intervals), therefore we can sort the totality of</Highlight></CodeLine>
<Link id="l04469" /><CodeLine lineNumber="4469"><Highlight kind="comment">/// the intervals by looking only at the left boundary.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04470" /><CodeLine lineNumber="4470" lineLink="#a885c0b81f13eff56642e780a0a7cecff"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="#a885c0b81f13eff56642e780a0a7cecff">sortIntervals</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>,</Highlight></CodeLine>
<Link id="l04471" /><CodeLine lineNumber="4471"><Highlight kind="normal">                          </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</Highlight></CodeLine>
<Link id="l04472" /><CodeLine lineNumber="4472"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.first;</Highlight></CodeLine>
<Link id="l04473" /><CodeLine lineNumber="4473"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04474" /><CodeLine lineNumber="4474"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04475" /><CodeLine lineNumber="4475"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ResourceSegments::getFirstAvailableAt(</Highlight></CodeLine>
<Link id="l04476" /><CodeLine lineNumber="4476"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> CurrCycle, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> AcquireAtCycle, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ReleaseAtCycle,</Highlight></CodeLine>
<Link id="l04477" /><CodeLine lineNumber="4477"><Highlight kind="normal">    std::function&lt;<a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a>(</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal">)&gt;</Highlight></CodeLine>
<Link id="l04478" /><CodeLine lineNumber="4478"><Highlight kind="normal">        IntervalBuilder)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04479" /><CodeLine lineNumber="4479"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(std::is&#95;sorted(std::begin(&#95;Intervals), std::end(&#95;Intervals),</Highlight></CodeLine>
<Link id="l04480" /><CodeLine lineNumber="4480"><Highlight kind="normal">                        <a href="#a885c0b81f13eff56642e780a0a7cecff">sortIntervals</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l04481" /><CodeLine lineNumber="4481"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Cannot execute on an un-sorted set of intervals.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04482" /><CodeLine lineNumber="4482"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04483" /><CodeLine lineNumber="4483"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Zero resource usage is allowed by TargetSchedule.td but we do not construct</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04484" /><CodeLine lineNumber="4484"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// a ResourceSegment interval for that situation.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04485" /><CodeLine lineNumber="4485"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AcquireAtCycle == ReleaseAtCycle)</Highlight></CodeLine>
<Link id="l04486" /><CodeLine lineNumber="4486"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> CurrCycle;</Highlight></CodeLine>
<Link id="l04487" /><CodeLine lineNumber="4487"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04488" /><CodeLine lineNumber="4488"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> RetCycle = CurrCycle;</Highlight></CodeLine>
<Link id="l04489" /><CodeLine lineNumber="4489"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> NewInterval =</Highlight></CodeLine>
<Link id="l04490" /><CodeLine lineNumber="4490"><Highlight kind="normal">      IntervalBuilder(RetCycle, AcquireAtCycle, ReleaseAtCycle);</Highlight></CodeLine>
<Link id="l04491" /><CodeLine lineNumber="4491"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/mappedblockstream-cpp/#a4ab9bd667f674c16b2cee01ab8823644">Interval</a> : &#95;Intervals) &#123;</Highlight></CodeLine>
<Link id="l04492" /><CodeLine lineNumber="4492"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/codegen/lib/codegen/asmprinter/dbgentityhistorycalculator-cpp/#a0250c150e720772b7e0feac3d2f43e82">intersects</a>(NewInterval, <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/mappedblockstream-cpp/#a4ab9bd667f674c16b2cee01ab8823644">Interval</a>))</Highlight></CodeLine>
<Link id="l04493" /><CodeLine lineNumber="4493"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04494" /><CodeLine lineNumber="4494"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04495" /><CodeLine lineNumber="4495"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Move the interval right next to the top of the one it</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04496" /><CodeLine lineNumber="4496"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// intersects.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04497" /><CodeLine lineNumber="4497"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/mappedblockstream-cpp/#a4ab9bd667f674c16b2cee01ab8823644">Interval</a>.second &gt; NewInterval.first &amp;&amp;</Highlight></CodeLine>
<Link id="l04498" /><CodeLine lineNumber="4498"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;Invalid intervals configuration.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04499" /><CodeLine lineNumber="4499"><Highlight kind="normal">    RetCycle += (unsigned)<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/mappedblockstream-cpp/#a4ab9bd667f674c16b2cee01ab8823644">Interval</a>.second - (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal">)NewInterval.first;</Highlight></CodeLine>
<Link id="l04500" /><CodeLine lineNumber="4500"><Highlight kind="normal">    NewInterval = IntervalBuilder(RetCycle, AcquireAtCycle, ReleaseAtCycle);</Highlight></CodeLine>
<Link id="l04501" /><CodeLine lineNumber="4501"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04502" /><CodeLine lineNumber="4502"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> RetCycle;</Highlight></CodeLine>
<Link id="l04503" /><CodeLine lineNumber="4503"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04504" /><CodeLine lineNumber="4504"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04505" /><CodeLine lineNumber="4505" lineLink="/docs/api/classes/llvm/resourcesegments/#a173bcdd8f59b31a810aead1000274448"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/resourcesegments/#a173bcdd8f59b31a810aead1000274448">ResourceSegments::add</a>(<a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>,</Highlight></CodeLine>
<Link id="l04506" /><CodeLine lineNumber="4506"><Highlight kind="normal">                           </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> CutOff) &#123;</Highlight></CodeLine>
<Link id="l04507" /><CodeLine lineNumber="4507"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first &lt;= <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.second &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Cannot add negative resource usage&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04508" /><CodeLine lineNumber="4508"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CutOff &gt; 0 &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;0-size interval history has no use.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04509" /><CodeLine lineNumber="4509"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Zero resource usage is allowed by TargetSchedule.td, in the case that the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04510" /><CodeLine lineNumber="4510"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// instruction needed the resource to be available but does not use it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04511" /><CodeLine lineNumber="4511"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// However, ResourceSegment represents an interval that is closed on the left</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04512" /><CodeLine lineNumber="4512"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// and open on the right. It is impossible to represent an empty interval when</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04513" /><CodeLine lineNumber="4513"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the left is closed. Do not add it to Intervals.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04514" /><CodeLine lineNumber="4514"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first == <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.second)</Highlight></CodeLine>
<Link id="l04515" /><CodeLine lineNumber="4515"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04516" /><CodeLine lineNumber="4516"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04517" /><CodeLine lineNumber="4517"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a0d10fe510ced2849a8074fe81e5d04ce">all&#95;of</a>(&#95;Intervals,</Highlight></CodeLine>
<Link id="l04518" /><CodeLine lineNumber="4518"><Highlight kind="normal">                &#91;&amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>&#93;(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> &amp;<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/mappedblockstream-cpp/#a4ab9bd667f674c16b2cee01ab8823644">Interval</a>) -&gt; </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04519" /><CodeLine lineNumber="4519"><Highlight kind="normal">                  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> !<a href="/docs/api/files/lib/lib/codegen/lib/codegen/asmprinter/dbgentityhistorycalculator-cpp/#a0250c150e720772b7e0feac3d2f43e82">intersects</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/msf/mappedblockstream-cpp/#a4ab9bd667f674c16b2cee01ab8823644">Interval</a>);</Highlight></CodeLine>
<Link id="l04520" /><CodeLine lineNumber="4520"><Highlight kind="normal">                &#125;) &amp;&amp;</Highlight></CodeLine>
<Link id="l04521" /><CodeLine lineNumber="4521"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;A resource is being overwritten&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04522" /><CodeLine lineNumber="4522"><Highlight kind="normal">  &#95;Intervals.push&#95;back(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>);</Highlight></CodeLine>
<Link id="l04523" /><CodeLine lineNumber="4523"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04524" /><CodeLine lineNumber="4524"><Highlight kind="normal">  sortAndMerge();</Highlight></CodeLine>
<Link id="l04525" /><CodeLine lineNumber="4525"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04526" /><CodeLine lineNumber="4526"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Do not keep the full history of the intervals, just the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04527" /><CodeLine lineNumber="4527"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// latest #CutOff.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04528" /><CodeLine lineNumber="4528"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (&#95;Intervals.size() &gt; CutOff)</Highlight></CodeLine>
<Link id="l04529" /><CodeLine lineNumber="4529"><Highlight kind="normal">    &#95;Intervals.pop&#95;front();</Highlight></CodeLine>
<Link id="l04530" /><CodeLine lineNumber="4530"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04531" /><CodeLine lineNumber="4531"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04532" /><CodeLine lineNumber="4532" lineLink="/docs/api/classes/llvm/resourcesegments/#a7fbb23b17b45652a8d28aadabbabf3c9"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/resourcesegments/#a7fbb23b17b45652a8d28aadabbabf3c9">ResourceSegments::intersects</a>(<a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>,</Highlight></CodeLine>
<Link id="l04533" /><CodeLine lineNumber="4533"><Highlight kind="normal">                                  <a href="/docs/api/classes/llvm/resourcesegments/#ac93528094c576c984aed5f8cd6923bc0">ResourceSegments::IntervalTy</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</Highlight></CodeLine>
<Link id="l04534" /><CodeLine lineNumber="4534"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first &lt;= <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.second &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Invalid interval&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04535" /><CodeLine lineNumber="4535"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.first &lt;= <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.second &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Invalid interval&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04536" /><CodeLine lineNumber="4536"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04537" /><CodeLine lineNumber="4537"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Share one boundary.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04538" /><CodeLine lineNumber="4538"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first == <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.first) || (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.second == <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.second))</Highlight></CodeLine>
<Link id="l04539" /><CodeLine lineNumber="4539"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04540" /><CodeLine lineNumber="4540"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04541" /><CodeLine lineNumber="4541"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// full intersersect: &#91;    &#42;&#42;&#42;     )  B</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04542" /><CodeLine lineNumber="4542"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//                        &#91;&#42;&#42;&#42;)       A</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04543" /><CodeLine lineNumber="4543"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first &gt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.first) &amp;&amp; (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.second &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.second))</Highlight></CodeLine>
<Link id="l04544" /><CodeLine lineNumber="4544"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04545" /><CodeLine lineNumber="4545"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04546" /><CodeLine lineNumber="4546"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// right intersect: &#91;     &#42;&#42;&#42;)        B</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04547" /><CodeLine lineNumber="4547"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//                       &#91;&#42;&#42;&#42;      )  A</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04548" /><CodeLine lineNumber="4548"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first &gt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.first) &amp;&amp; (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.second) &amp;&amp; (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.second &gt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.second))</Highlight></CodeLine>
<Link id="l04549" /><CodeLine lineNumber="4549"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04550" /><CodeLine lineNumber="4550"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04551" /><CodeLine lineNumber="4551"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// left intersect:      &#91;&#42;&#42;&#42;      )  B</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04552" /><CodeLine lineNumber="4552"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//                 &#91;     &#42;&#42;&#42;)        A</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04553" /><CodeLine lineNumber="4553"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.first &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.first) &amp;&amp; (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.first &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.second) &amp;&amp; (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.second &gt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.first))</Highlight></CodeLine>
<Link id="l04554" /><CodeLine lineNumber="4554"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04555" /><CodeLine lineNumber="4555"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04556" /><CodeLine lineNumber="4556"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04557" /><CodeLine lineNumber="4557"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04558" /><CodeLine lineNumber="4558"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04559" /><CodeLine lineNumber="4559"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> ResourceSegments::sortAndMerge() &#123;</Highlight></CodeLine>
<Link id="l04560" /><CodeLine lineNumber="4560"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (&#95;Intervals.size() &lt;= 1)</Highlight></CodeLine>
<Link id="l04561" /><CodeLine lineNumber="4561"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04562" /><CodeLine lineNumber="4562"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04563" /><CodeLine lineNumber="4563"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// First sort the collection.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04564" /><CodeLine lineNumber="4564"><Highlight kind="normal">  &#95;Intervals.sort(<a href="#a885c0b81f13eff56642e780a0a7cecff">sortIntervals</a>);</Highlight></CodeLine>
<Link id="l04565" /><CodeLine lineNumber="4565"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04566" /><CodeLine lineNumber="4566"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// can use next because I have at least 2 elements in the list</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04567" /><CodeLine lineNumber="4567"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> next = std::next(std::begin(&#95;Intervals));</Highlight></CodeLine>
<Link id="l04568" /><CodeLine lineNumber="4568"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> E = std::end(&#95;Intervals);</Highlight></CodeLine>
<Link id="l04569" /><CodeLine lineNumber="4569"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (; next != E; ++next) &#123;</Highlight></CodeLine>
<Link id="l04570" /><CodeLine lineNumber="4570"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::prev(next)-&gt;second &gt;= next-&gt;first) &#123;</Highlight></CodeLine>
<Link id="l04571" /><CodeLine lineNumber="4571"><Highlight kind="normal">      next-&gt;first = std::prev(next)-&gt;first;</Highlight></CodeLine>
<Link id="l04572" /><CodeLine lineNumber="4572"><Highlight kind="normal">      &#95;Intervals.erase(std::prev(next));</Highlight></CodeLine>
<Link id="l04573" /><CodeLine lineNumber="4573"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04574" /><CodeLine lineNumber="4574"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04575" /><CodeLine lineNumber="4575"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04576" /><CodeLine lineNumber="4576"><Highlight kind="normal">&#125;</Highlight></CodeLine>

</ProgramListing>


</DoxygenPage>
