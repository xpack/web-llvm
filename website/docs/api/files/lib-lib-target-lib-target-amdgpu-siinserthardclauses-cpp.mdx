---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/files/lib/lib/target/lib/target/amdgpu/siinserthardclauses-cpp
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - file

---

import Link from '@docusaurus/Link'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `SIInsertHardClauses.cpp` File Reference

<DoxygenPage pluginConfig={pluginConfig}>

Insert s&#95;clause instructions to form hard clauses. <a href="#details">More...</a>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="AMDGPU.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpu-h"
  isLocal="true" />
<IncludesListItem
  filePath="GCNSubtarget.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/amdgpu/gcnsubtarget-h"
  isLocal="true" />
<IncludesListItem
  filePath="MCTargetDesc/AMDGPUMCTargetDesc.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/amdgpu/lib/target/amdgpu/mctargetdesc/amdgpumctargetdesc-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/SmallVector.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/smallvector-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineFunctionPass.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinefunctionpass-h"
  isLocal="true" />
</IncludesList>

## Namespaces Index

<MembersIndex>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-">anonymous&#123;SIInsertHardClauses.cpp&#125;</a></>}>
</MembersIndexItem>

</MembersIndex>

## Classes Index

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses">SIInsertHardClauses</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo">ClauseInfo</a></>}>
</MembersIndexItem>

</MembersIndex>

## Defines Index

<MembersIndex>

<MembersIndexItem
  type="#define"
  name={<><a href="#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>&nbsp;&nbsp;&nbsp;&quot;si-insert-hard-clauses&quot;</>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

Insert s&#95;clause instructions to form hard clauses.

Clausing load instructions can give cache coherency benefits. Before gfx10, the hardware automatically detected &quot;soft clauses&quot;, which were sequences of memory instructions of the same type. In gfx10 this detection was removed, and the s&#95;clause instruction was introduced to explicitly mark &quot;hard
clauses&quot;.

It&#39;s the scheduler&#39;s job to form the clauses by putting similar memory instructions next to each other. Our job is just to insert an s&#95;clause instruction to mark the start of each clause.

Note that hard clauses are very similar to, but logically distinct from, the groups of instructions that have to be restartable when XNACK is enabled. The rules are slightly different in each case. For example an s&#95;nop instruction breaks a restartable group, but can appear in the middle of a hard clause. (Before gfx10 there wasn&#39;t a distinction, and both were called &quot;soft clauses&quot; or just &quot;clauses&quot;.)

The SIFormMemoryClauses pass and <a href="/docs/api/classes/llvm/gcnhazardrecognizer">GCNHazardRecognizer</a> deal with restartable groups, not hard clauses.

<SectionDefinition>

## Defines

### DEBUG&#95;TYPE {#ad78e062f62e0d6e453941fb4ca843e4d}

<MemberDefinition
  prototype={<>#define DEBUG&#95;TYPE&nbsp;&nbsp;&nbsp;&quot;si-insert-hard-clauses&quot;</>}>

Definition at line <a href="#l00042">42</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/siinserthardclauses-cpp">SIInsertHardClauses.cpp</a>.
</MemberDefinition>

</SectionDefinition>

## File Listing

The file content with the documentation metadata removed is:

<ProgramListing>

<Link id="l00001" /><CodeLine lineNumber="1"><span class="doxyHighlightComment">//===- SIInsertHardClauses.cpp - Insert Hard Clauses ----------------------===//</span></CodeLine>
<Link id="l00002" /><CodeLine lineNumber="2"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00003" /><CodeLine lineNumber="3"><span class="doxyHighlightComment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></CodeLine>
<Link id="l00004" /><CodeLine lineNumber="4"><span class="doxyHighlightComment">// See https://llvm.org/LICENSE.txt for license information.</span></CodeLine>
<Link id="l00005" /><CodeLine lineNumber="5"><span class="doxyHighlightComment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></CodeLine>
<Link id="l00006" /><CodeLine lineNumber="6"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00007" /><CodeLine lineNumber="7"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00008" /><CodeLine lineNumber="8"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00009" /><CodeLine lineNumber="9"><span class="doxyHighlightComment">/// \\file</span></CodeLine>
<Link id="l00010" /><CodeLine lineNumber="10"><span class="doxyHighlightComment">/// Insert s&#95;clause instructions to form hard clauses.</span></CodeLine>
<Link id="l00011" /><CodeLine lineNumber="11"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00012" /><CodeLine lineNumber="12"><span class="doxyHighlightComment">/// Clausing load instructions can give cache coherency benefits. Before gfx10,</span></CodeLine>
<Link id="l00013" /><CodeLine lineNumber="13"><span class="doxyHighlightComment">/// the hardware automatically detected &quot;soft clauses&quot;, which were sequences of</span></CodeLine>
<Link id="l00014" /><CodeLine lineNumber="14"><span class="doxyHighlightComment">/// memory instructions of the same type. In gfx10 this detection was removed,</span></CodeLine>
<Link id="l00015" /><CodeLine lineNumber="15"><span class="doxyHighlightComment">/// and the s&#95;clause instruction was introduced to explicitly mark &quot;hard</span></CodeLine>
<Link id="l00016" /><CodeLine lineNumber="16"><span class="doxyHighlightComment">/// clauses&quot;.</span></CodeLine>
<Link id="l00017" /><CodeLine lineNumber="17"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00018" /><CodeLine lineNumber="18"><span class="doxyHighlightComment">/// It&#39;s the scheduler&#39;s job to form the clauses by putting similar memory</span></CodeLine>
<Link id="l00019" /><CodeLine lineNumber="19"><span class="doxyHighlightComment">/// instructions next to each other. Our job is just to insert an s&#95;clause</span></CodeLine>
<Link id="l00020" /><CodeLine lineNumber="20"><span class="doxyHighlightComment">/// instruction to mark the start of each clause.</span></CodeLine>
<Link id="l00021" /><CodeLine lineNumber="21"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00022" /><CodeLine lineNumber="22"><span class="doxyHighlightComment">/// Note that hard clauses are very similar to, but logically distinct from, the</span></CodeLine>
<Link id="l00023" /><CodeLine lineNumber="23"><span class="doxyHighlightComment">/// groups of instructions that have to be restartable when XNACK is enabled.</span></CodeLine>
<Link id="l00024" /><CodeLine lineNumber="24"><span class="doxyHighlightComment">/// The rules are slightly different in each case. For example an s&#95;nop</span></CodeLine>
<Link id="l00025" /><CodeLine lineNumber="25"><span class="doxyHighlightComment">/// instruction breaks a restartable group, but can appear in the middle of a</span></CodeLine>
<Link id="l00026" /><CodeLine lineNumber="26"><span class="doxyHighlightComment">/// hard clause. (Before gfx10 there wasn&#39;t a distinction, and both were called</span></CodeLine>
<Link id="l00027" /><CodeLine lineNumber="27"><span class="doxyHighlightComment">/// &quot;soft clauses&quot; or just &quot;clauses&quot;.)</span></CodeLine>
<Link id="l00028" /><CodeLine lineNumber="28"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00029" /><CodeLine lineNumber="29"><span class="doxyHighlightComment">/// The SIFormMemoryClauses pass and GCNHazardRecognizer deal with restartable</span></CodeLine>
<Link id="l00030" /><CodeLine lineNumber="30"><span class="doxyHighlightComment">/// groups, not hard clauses.</span></CodeLine>
<Link id="l00031" /><CodeLine lineNumber="31"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00032" /><CodeLine lineNumber="32"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00033" /><CodeLine lineNumber="33"></CodeLine>
<Link id="l00034" /><CodeLine lineNumber="34"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpu-h">AMDGPU.h</a>&quot;</span></CodeLine>
<Link id="l00035" /><CodeLine lineNumber="35"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/gcnsubtarget-h">GCNSubtarget.h</a>&quot;</span></CodeLine>
<Link id="l00036" /><CodeLine lineNumber="36"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/lib/target/amdgpu/mctargetdesc/amdgpumctargetdesc-h">MCTargetDesc/AMDGPUMCTargetDesc.h</a>&quot;</span></CodeLine>
<Link id="l00037" /><CodeLine lineNumber="37"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/smallvector-h">llvm/ADT/SmallVector.h</a>&quot;</span></CodeLine>
<Link id="l00038" /><CodeLine lineNumber="38"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinefunctionpass-h">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></CodeLine>
<Link id="l00039" /><CodeLine lineNumber="39"></CodeLine>
<Link id="l00040" /><CodeLine lineNumber="40"><span class="doxyHighlightKeyword">using namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm">llvm</a>;</span></CodeLine>
<Link id="l00041" /><CodeLine lineNumber="41"></CodeLine>
<Link id="l00042" /><CodeLine lineNumber="42" lineLink="#ad78e062f62e0d6e453941fb4ca843e4d"><span class="doxyHighlightPreprocessor">#define DEBUG&#95;TYPE &quot;si-insert-hard-clauses&quot;</span></CodeLine>
<Link id="l00043" /><CodeLine lineNumber="43"></CodeLine>
<Link id="l00044" /><CodeLine lineNumber="44" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00045" /><CodeLine lineNumber="45"></CodeLine>
<Link id="l00046" /><CodeLine lineNumber="46" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069"><span class="doxyHighlightKeyword">enum</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069">HardClauseType</a> &#123;</span></CodeLine>
<Link id="l00047" /><CodeLine lineNumber="47"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For GFX10:</span></CodeLine>
<Link id="l00048" /><CodeLine lineNumber="48"></CodeLine>
<Link id="l00049" /><CodeLine lineNumber="49"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Texture, buffer, global or scratch memory instructions.</span></CodeLine>
<Link id="l00050" /><CodeLine lineNumber="50" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a83b1919d3ea219e494e166eed0a62507"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a83b1919d3ea219e494e166eed0a62507">HARDCLAUSE&#95;VMEM</a>,</span></CodeLine>
<Link id="l00051" /><CodeLine lineNumber="51"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Flat (not global or scratch) memory instructions.</span></CodeLine>
<Link id="l00052" /><CodeLine lineNumber="52" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a2048a0d417f5ca118585aa677108a1f6"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a2048a0d417f5ca118585aa677108a1f6">HARDCLAUSE&#95;FLAT</a>,</span></CodeLine>
<Link id="l00053" /><CodeLine lineNumber="53"></CodeLine>
<Link id="l00054" /><CodeLine lineNumber="54"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For GFX11:</span></CodeLine>
<Link id="l00055" /><CodeLine lineNumber="55"></CodeLine>
<Link id="l00056" /><CodeLine lineNumber="56"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Texture memory instructions.</span></CodeLine>
<Link id="l00057" /><CodeLine lineNumber="57" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a87e689d02037e6e22319a88e6cf48630"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a87e689d02037e6e22319a88e6cf48630">HARDCLAUSE&#95;MIMG&#95;LOAD</a>,</span></CodeLine>
<Link id="l00058" /><CodeLine lineNumber="58" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ad64067111248180877730cbba70fb666"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ad64067111248180877730cbba70fb666">HARDCLAUSE&#95;MIMG&#95;STORE</a>,</span></CodeLine>
<Link id="l00059" /><CodeLine lineNumber="59" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ae21a976d427e10ea065829c3f536c159"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ae21a976d427e10ea065829c3f536c159">HARDCLAUSE&#95;MIMG&#95;ATOMIC</a>,</span></CodeLine>
<Link id="l00060" /><CodeLine lineNumber="60" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a9dbe1ee4adb05da41676cbdcb2bd839c"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a9dbe1ee4adb05da41676cbdcb2bd839c">HARDCLAUSE&#95;MIMG&#95;SAMPLE</a>,</span></CodeLine>
<Link id="l00061" /><CodeLine lineNumber="61"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Buffer, global or scratch memory instructions.</span></CodeLine>
<Link id="l00062" /><CodeLine lineNumber="62" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069aba6f61d790b25012f8962eaf02b58828"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069aba6f61d790b25012f8962eaf02b58828">HARDCLAUSE&#95;VMEM&#95;LOAD</a>,</span></CodeLine>
<Link id="l00063" /><CodeLine lineNumber="63" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a640c5815611ac5e01e14c7756e400dc4"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a640c5815611ac5e01e14c7756e400dc4">HARDCLAUSE&#95;VMEM&#95;STORE</a>,</span></CodeLine>
<Link id="l00064" /><CodeLine lineNumber="64" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069acc5b88fae0184e29515afa49857aea0b"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069acc5b88fae0184e29515afa49857aea0b">HARDCLAUSE&#95;VMEM&#95;ATOMIC</a>,</span></CodeLine>
<Link id="l00065" /><CodeLine lineNumber="65"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Flat (not global or scratch) memory instructions.</span></CodeLine>
<Link id="l00066" /><CodeLine lineNumber="66" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ad7f93e83f48b8eff8cc5034211751168"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ad7f93e83f48b8eff8cc5034211751168">HARDCLAUSE&#95;FLAT&#95;LOAD</a>,</span></CodeLine>
<Link id="l00067" /><CodeLine lineNumber="67" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069abbb43b3b8e5e6bb7e44ddf57e1479ee8"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069abbb43b3b8e5e6bb7e44ddf57e1479ee8">HARDCLAUSE&#95;FLAT&#95;STORE</a>,</span></CodeLine>
<Link id="l00068" /><CodeLine lineNumber="68" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a31e12b3d5d143c73c795c28ee862455e"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a31e12b3d5d143c73c795c28ee862455e">HARDCLAUSE&#95;FLAT&#95;ATOMIC</a>,</span></CodeLine>
<Link id="l00069" /><CodeLine lineNumber="69"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// BVH instructions.</span></CodeLine>
<Link id="l00070" /><CodeLine lineNumber="70" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a297f1ff83f801be031a1ae6ed417b24c"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a297f1ff83f801be031a1ae6ed417b24c">HARDCLAUSE&#95;BVH</a>,</span></CodeLine>
<Link id="l00071" /><CodeLine lineNumber="71"></CodeLine>
<Link id="l00072" /><CodeLine lineNumber="72"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Common:</span></CodeLine>
<Link id="l00073" /><CodeLine lineNumber="73"></CodeLine>
<Link id="l00074" /><CodeLine lineNumber="74"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instructions that access LDS.</span></CodeLine>
<Link id="l00075" /><CodeLine lineNumber="75" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069adce9eb878dc1bda8effc496d27b67fba"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069adce9eb878dc1bda8effc496d27b67fba">HARDCLAUSE&#95;LDS</a>,</span></CodeLine>
<Link id="l00076" /><CodeLine lineNumber="76"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Scalar memory instructions.</span></CodeLine>
<Link id="l00077" /><CodeLine lineNumber="77" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069acacf443c4f72d8ee8fdf0b1c52b771f0"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069acacf443c4f72d8ee8fdf0b1c52b771f0">HARDCLAUSE&#95;SMEM</a>,</span></CodeLine>
<Link id="l00078" /><CodeLine lineNumber="78"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// VALU instructions.</span></CodeLine>
<Link id="l00079" /><CodeLine lineNumber="79" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ad6f5686d4a5239d6c0cf49f0a54b4763"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ad6f5686d4a5239d6c0cf49f0a54b4763">HARDCLAUSE&#95;VALU</a>,</span></CodeLine>
<Link id="l00080" /><CodeLine lineNumber="80" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a864a2b458251ad286c4eb3769fe46efa"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a864a2b458251ad286c4eb3769fe46efa">LAST&#95;REAL&#95;HARDCLAUSE&#95;TYPE</a> = <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ad6f5686d4a5239d6c0cf49f0a54b4763">HARDCLAUSE&#95;VALU</a>,</span></CodeLine>
<Link id="l00081" /><CodeLine lineNumber="81"></CodeLine>
<Link id="l00082" /><CodeLine lineNumber="82"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Internal instructions, which are allowed in the middle of a hard clause,</span></CodeLine>
<Link id="l00083" /><CodeLine lineNumber="83"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// except for s&#95;waitcnt.</span></CodeLine>
<Link id="l00084" /><CodeLine lineNumber="84" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ab10feb7cd6ab6000a34957e10296bd8c"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ab10feb7cd6ab6000a34957e10296bd8c">HARDCLAUSE&#95;INTERNAL</a>,</span></CodeLine>
<Link id="l00085" /><CodeLine lineNumber="85"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Meta instructions that do not result in any ISA like KILL.</span></CodeLine>
<Link id="l00086" /><CodeLine lineNumber="86" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a161c9387aef0690f84572531f07239bd"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a161c9387aef0690f84572531f07239bd">HARDCLAUSE&#95;IGNORE</a>,</span></CodeLine>
<Link id="l00087" /><CodeLine lineNumber="87"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Instructions that are not allowed in a hard clause: SALU, export, branch,</span></CodeLine>
<Link id="l00088" /><CodeLine lineNumber="88"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// message, GDS, s&#95;waitcnt and anything else not mentioned above.</span></CodeLine>
<Link id="l00089" /><CodeLine lineNumber="89" lineLink="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069aa5be04416de1c7632343fd7d93b37d4d"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069aa5be04416de1c7632343fd7d93b37d4d">HARDCLAUSE&#95;ILLEGAL</a>,</span></CodeLine>
<Link id="l00090" /><CodeLine lineNumber="90"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00091" /><CodeLine lineNumber="91"></CodeLine>
<Link id="l00092" /><CodeLine lineNumber="92" lineLink="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#adf3ebefc71e2c76b471b71ec7ef5d2e7">SIInsertHardClauses</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinefunctionpass/#a29c81d2386f4a727c6d33413807530c8">MachineFunctionPass</a> &#123;</span></CodeLine>
<Link id="l00093" /><CodeLine lineNumber="93"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00094" /><CodeLine lineNumber="94" lineLink="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#a04b2541bf242d9ab3c96bf2b02544880"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#a04b2541bf242d9ab3c96bf2b02544880">ID</a>;</span></CodeLine>
<Link id="l00095" /><CodeLine lineNumber="95" lineLink="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#afdd1c4e7a7b1c4becde4df5ca8fd424f"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &#42;<a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#afdd1c4e7a7b1c4becde4df5ca8fd424f">ST</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00096" /><CodeLine lineNumber="96"></CodeLine>
<Link id="l00097" /><CodeLine lineNumber="97" lineLink="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#adf3ebefc71e2c76b471b71ec7ef5d2e7"><span class="doxyHighlight">  <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#adf3ebefc71e2c76b471b71ec7ef5d2e7">SIInsertHardClauses</a>() : <a href="/docs/api/classes/llvm/machinefunctionpass/#a29c81d2386f4a727c6d33413807530c8">MachineFunctionPass</a>(<a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#a04b2541bf242d9ab3c96bf2b02544880">ID</a>) &#123;&#125;</span></CodeLine>
<Link id="l00098" /><CodeLine lineNumber="98"></CodeLine>
<Link id="l00099" /><CodeLine lineNumber="99" lineLink="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#a7bb312e7b09ff030930708b97628fa7f"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#a7bb312e7b09ff030930708b97628fa7f">getAnalysisUsage</a>(<a href="/docs/api/classes/llvm/analysisusage">AnalysisUsage</a> &amp;AU)</span><span class="doxyHighlightKeyword"> const override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00100" /><CodeLine lineNumber="100"><span class="doxyHighlight">    AU.<a href="/docs/api/classes/llvm/analysisusage/#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</span></CodeLine>
<Link id="l00101" /><CodeLine lineNumber="101"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinefunctionpass/#a864fd57b4304ef933b3281d0ef85a88e">MachineFunctionPass::getAnalysisUsage</a>(AU);</span></CodeLine>
<Link id="l00102" /><CodeLine lineNumber="102"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00103" /><CodeLine lineNumber="103"></CodeLine>
<Link id="l00104" /><CodeLine lineNumber="104" lineLink="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#a10d3dc29c5b795204cec9fe33433f1cc"><span class="doxyHighlight">  <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069">HardClauseType</a> <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#a10d3dc29c5b795204cec9fe33433f1cc">getHardClauseType</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) &#123;</span></CodeLine>
<Link id="l00105" /><CodeLine lineNumber="105"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.mayLoad() || (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.mayStore() &amp;&amp; <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#afdd1c4e7a7b1c4becde4df5ca8fd424f">ST</a>-&gt;shouldClusterStores())) &#123;</span></CodeLine>
<Link id="l00106" /><CodeLine lineNumber="106"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#afdd1c4e7a7b1c4becde4df5ca8fd424f">ST</a>-&gt;getGeneration() == <a href="/docs/api/classes/llvm/amdgpusubtarget/#a53c0ee4138bfbf9e0410a65e0eaa36e2a0a29519a2da61e1cf78d898e26fef446">AMDGPUSubtarget::GFX10</a>) &#123;</span></CodeLine>
<Link id="l00107" /><CodeLine lineNumber="107"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/siinstrinfo/#a08b830059090a1bb27b14e1e524fdb46">SIInstrInfo::isVMEM</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) || <a href="/docs/api/classes/llvm/siinstrinfo/#a8ed947ddafde5421d3f771f43f9c04d1">SIInstrInfo::isSegmentSpecificFLAT</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) &#123;</span></CodeLine>
<Link id="l00108" /><CodeLine lineNumber="108"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#afdd1c4e7a7b1c4becde4df5ca8fd424f">ST</a>-&gt;hasNSAClauseBug()) &#123;</span></CodeLine>
<Link id="l00109" /><CodeLine lineNumber="109"><span class="doxyHighlight">            </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/amdgpu/mimginfo">AMDGPU::MIMGInfo</a> &#42;Info = <a href="/docs/api/namespaces/llvm/amdgpu/#a0b5b29d1275f84b9e530fd2419cc03ac">AMDGPU::getMIMGInfo</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode());</span></CodeLine>
<Link id="l00110" /><CodeLine lineNumber="110"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Info &amp;&amp; Info-&gt;MIMGEncoding == AMDGPU::MIMGEncGfx10NSA)</span></CodeLine>
<Link id="l00111" /><CodeLine lineNumber="111"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069aa5be04416de1c7632343fd7d93b37d4d">HARDCLAUSE&#95;ILLEGAL</a>;</span></CodeLine>
<Link id="l00112" /><CodeLine lineNumber="112"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l00113" /><CodeLine lineNumber="113"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a83b1919d3ea219e494e166eed0a62507">HARDCLAUSE&#95;VMEM</a>;</span></CodeLine>
<Link id="l00114" /><CodeLine lineNumber="114"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00115" /><CodeLine lineNumber="115"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/siinstrinfo/#adc3333d2d5974f4068df84f8706fc7d2">SIInstrInfo::isFLAT</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</span></CodeLine>
<Link id="l00116" /><CodeLine lineNumber="116"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a2048a0d417f5ca118585aa677108a1f6">HARDCLAUSE&#95;FLAT</a>;</span></CodeLine>
<Link id="l00117" /><CodeLine lineNumber="117"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00118" /><CodeLine lineNumber="118"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#afdd1c4e7a7b1c4becde4df5ca8fd424f">ST</a>-&gt;getGeneration() &gt;= <a href="/docs/api/classes/llvm/amdgpusubtarget/#a53c0ee4138bfbf9e0410a65e0eaa36e2afee0105d2e947dda0884cc47a33c93b7">AMDGPUSubtarget::GFX11</a>);</span></CodeLine>
<Link id="l00119" /><CodeLine lineNumber="119"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/siinstrinfo/#abdcf600002fd489c76924f2ec4f4fc0f">SIInstrInfo::isMIMG</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) &#123;</span></CodeLine>
<Link id="l00120" /><CodeLine lineNumber="120"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/amdgpu/mimginfo">AMDGPU::MIMGInfo</a> &#42;Info = <a href="/docs/api/namespaces/llvm/amdgpu/#a0b5b29d1275f84b9e530fd2419cc03ac">AMDGPU::getMIMGInfo</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode());</span></CodeLine>
<Link id="l00121" /><CodeLine lineNumber="121"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo">AMDGPU::MIMGBaseOpcodeInfo</a> &#42;BaseInfo =</span></CodeLine>
<Link id="l00122" /><CodeLine lineNumber="122"><span class="doxyHighlight">              <a href="/docs/api/namespaces/llvm/amdgpu/#ae1884e3318cb1f8a4465b1b4bd4d9827">AMDGPU::getMIMGBaseOpcodeInfo</a>(Info-&gt;BaseOpcode);</span></CodeLine>
<Link id="l00123" /><CodeLine lineNumber="123"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BaseInfo-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#ae568e3885ff86491cfec37106f83d1c7">BVH</a>)</span></CodeLine>
<Link id="l00124" /><CodeLine lineNumber="124"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a297f1ff83f801be031a1ae6ed417b24c">HARDCLAUSE&#95;BVH</a>;</span></CodeLine>
<Link id="l00125" /><CodeLine lineNumber="125"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BaseInfo-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#a48ae3b8db545c374ea470b0d856e302f">Sampler</a>)</span></CodeLine>
<Link id="l00126" /><CodeLine lineNumber="126"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a9dbe1ee4adb05da41676cbdcb2bd839c">HARDCLAUSE&#95;MIMG&#95;SAMPLE</a>;</span></CodeLine>
<Link id="l00127" /><CodeLine lineNumber="127"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.mayLoad() ? <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.mayStore() ? <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ae21a976d427e10ea065829c3f536c159">HARDCLAUSE&#95;MIMG&#95;ATOMIC</a></span></CodeLine>
<Link id="l00128" /><CodeLine lineNumber="128"><span class="doxyHighlight">                                              : <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a87e689d02037e6e22319a88e6cf48630">HARDCLAUSE&#95;MIMG&#95;LOAD</a></span></CodeLine>
<Link id="l00129" /><CodeLine lineNumber="129"><span class="doxyHighlight">                              : <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ad64067111248180877730cbba70fb666">HARDCLAUSE&#95;MIMG&#95;STORE</a>;</span></CodeLine>
<Link id="l00130" /><CodeLine lineNumber="130"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00131" /><CodeLine lineNumber="131"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/siinstrinfo/#a08b830059090a1bb27b14e1e524fdb46">SIInstrInfo::isVMEM</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) || <a href="/docs/api/classes/llvm/siinstrinfo/#a8ed947ddafde5421d3f771f43f9c04d1">SIInstrInfo::isSegmentSpecificFLAT</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) &#123;</span></CodeLine>
<Link id="l00132" /><CodeLine lineNumber="132"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.mayLoad() ? <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.mayStore() ? <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069acc5b88fae0184e29515afa49857aea0b">HARDCLAUSE&#95;VMEM&#95;ATOMIC</a></span></CodeLine>
<Link id="l00133" /><CodeLine lineNumber="133"><span class="doxyHighlight">                                              : <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069aba6f61d790b25012f8962eaf02b58828">HARDCLAUSE&#95;VMEM&#95;LOAD</a></span></CodeLine>
<Link id="l00134" /><CodeLine lineNumber="134"><span class="doxyHighlight">                              : <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a640c5815611ac5e01e14c7756e400dc4">HARDCLAUSE&#95;VMEM&#95;STORE</a>;</span></CodeLine>
<Link id="l00135" /><CodeLine lineNumber="135"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00136" /><CodeLine lineNumber="136"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/siinstrinfo/#adc3333d2d5974f4068df84f8706fc7d2">SIInstrInfo::isFLAT</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) &#123;</span></CodeLine>
<Link id="l00137" /><CodeLine lineNumber="137"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.mayLoad() ? <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.mayStore() ? <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a31e12b3d5d143c73c795c28ee862455e">HARDCLAUSE&#95;FLAT&#95;ATOMIC</a></span></CodeLine>
<Link id="l00138" /><CodeLine lineNumber="138"><span class="doxyHighlight">                                              : <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ad7f93e83f48b8eff8cc5034211751168">HARDCLAUSE&#95;FLAT&#95;LOAD</a></span></CodeLine>
<Link id="l00139" /><CodeLine lineNumber="139"><span class="doxyHighlight">                              : <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069abbb43b3b8e5e6bb7e44ddf57e1479ee8">HARDCLAUSE&#95;FLAT&#95;STORE</a>;</span></CodeLine>
<Link id="l00140" /><CodeLine lineNumber="140"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00141" /><CodeLine lineNumber="141"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00142" /><CodeLine lineNumber="142"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// TODO: LDS</span></CodeLine>
<Link id="l00143" /><CodeLine lineNumber="143"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/siinstrinfo/#a1c990a34866f377751f50f112cef61bc">SIInstrInfo::isSMRD</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</span></CodeLine>
<Link id="l00144" /><CodeLine lineNumber="144"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069acacf443c4f72d8ee8fdf0b1c52b771f0">HARDCLAUSE&#95;SMEM</a>;</span></CodeLine>
<Link id="l00145" /><CodeLine lineNumber="145"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00146" /><CodeLine lineNumber="146"></CodeLine>
<Link id="l00147" /><CodeLine lineNumber="147"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Don&#39;t form VALU clauses. It&#39;s not clear what benefit they give, if any.</span></CodeLine>
<Link id="l00148" /><CodeLine lineNumber="148"></CodeLine>
<Link id="l00149" /><CodeLine lineNumber="149"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// In practice s&#95;nop is the only internal instruction we&#39;re likely to see.</span></CodeLine>
<Link id="l00150" /><CodeLine lineNumber="150"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// It&#39;s safe to treat the rest as illegal.</span></CodeLine>
<Link id="l00151" /><CodeLine lineNumber="151"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::S&#95;NOP)</span></CodeLine>
<Link id="l00152" /><CodeLine lineNumber="152"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ab10feb7cd6ab6000a34957e10296bd8c">HARDCLAUSE&#95;INTERNAL</a>;</span></CodeLine>
<Link id="l00153" /><CodeLine lineNumber="153"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isMetaInstruction())</span></CodeLine>
<Link id="l00154" /><CodeLine lineNumber="154"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a161c9387aef0690f84572531f07239bd">HARDCLAUSE&#95;IGNORE</a>;</span></CodeLine>
<Link id="l00155" /><CodeLine lineNumber="155"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069aa5be04416de1c7632343fd7d93b37d4d">HARDCLAUSE&#95;ILLEGAL</a>;</span></CodeLine>
<Link id="l00156" /><CodeLine lineNumber="156"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00157" /><CodeLine lineNumber="157"></CodeLine>
<Link id="l00158" /><CodeLine lineNumber="158"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Track information about a clause as we discover it.</span></CodeLine>
<Link id="l00159" /><CodeLine lineNumber="159" lineLink="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">struct </span><span class="doxyHighlight"><a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo">ClauseInfo</a> &#123;</span></CodeLine>
<Link id="l00160" /><CodeLine lineNumber="160"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The type of all (non-internal) instructions in the clause.</span></CodeLine>
<Link id="l00161" /><CodeLine lineNumber="161" lineLink="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8756be0eec6dd68e52f250497ce43aa0"><span class="doxyHighlight">    <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069">HardClauseType</a> <a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8756be0eec6dd68e52f250497ce43aa0">Type</a> = <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069aa5be04416de1c7632343fd7d93b37d4d">HARDCLAUSE&#95;ILLEGAL</a>;</span></CodeLine>
<Link id="l00162" /><CodeLine lineNumber="162"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The first (necessarily non-internal) instruction in the clause.</span></CodeLine>
<Link id="l00163" /><CodeLine lineNumber="163" lineLink="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#aedcb208b69428c3f1d6aeed2150d46bc"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#aedcb208b69428c3f1d6aeed2150d46bc">First</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00164" /><CodeLine lineNumber="164"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The last non-internal instruction in the clause.</span></CodeLine>
<Link id="l00165" /><CodeLine lineNumber="165" lineLink="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8b2c54a90de8f029d4331b5048522bd4"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8b2c54a90de8f029d4331b5048522bd4">Last</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00166" /><CodeLine lineNumber="166"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The length of the clause including any internal instructions in the</span></CodeLine>
<Link id="l00167" /><CodeLine lineNumber="167"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// middle (but not at the end) of the clause.</span></CodeLine>
<Link id="l00168" /><CodeLine lineNumber="168" lineLink="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8a2fbbe5c31e2244394c38df2453fd4b"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8a2fbbe5c31e2244394c38df2453fd4b">Length</a> = 0;</span></CodeLine>
<Link id="l00169" /><CodeLine lineNumber="169"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Internal instructions at the and of a clause should not be included in</span></CodeLine>
<Link id="l00170" /><CodeLine lineNumber="170"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the clause. Count them in TrailingInternalLength until a new memory</span></CodeLine>
<Link id="l00171" /><CodeLine lineNumber="171"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// instruction is added.</span></CodeLine>
<Link id="l00172" /><CodeLine lineNumber="172" lineLink="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a1fdbda7fa9415f7ed59027fc5ed9fb03"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a1fdbda7fa9415f7ed59027fc5ed9fb03">TrailingInternalLength</a> = 0;</span></CodeLine>
<Link id="l00173" /><CodeLine lineNumber="173"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The base operands of &#42;Last.</span></CodeLine>
<Link id="l00174" /><CodeLine lineNumber="174" lineLink="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#ad49bf054ec85b06fe8908221b28ec038"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;const MachineOperand &#42;, 4&gt;</a> <a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#ad49bf054ec85b06fe8908221b28ec038">BaseOps</a>;</span></CodeLine>
<Link id="l00175" /><CodeLine lineNumber="175"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00176" /><CodeLine lineNumber="176"></CodeLine>
<Link id="l00177" /><CodeLine lineNumber="177" lineLink="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#afea2f73a2971b1c2238c0996efdb1201"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#afea2f73a2971b1c2238c0996efdb1201">emitClause</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo">ClauseInfo</a> &amp;CI, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/siinstrinfo">SIInstrInfo</a> &#42;SII) &#123;</span></CodeLine>
<Link id="l00178" /><CodeLine lineNumber="178"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#aedcb208b69428c3f1d6aeed2150d46bc">First</a> == CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8b2c54a90de8f029d4331b5048522bd4">Last</a>)</span></CodeLine>
<Link id="l00179" /><CodeLine lineNumber="179"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00180" /><CodeLine lineNumber="180"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8a2fbbe5c31e2244394c38df2453fd4b">Length</a> &lt;= <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#afdd1c4e7a7b1c4becde4df5ca8fd424f">ST</a>-&gt;maxHardClauseLength() &amp;&amp;</span></CodeLine>
<Link id="l00181" /><CodeLine lineNumber="181"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;Hard clause is too long!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00182" /><CodeLine lineNumber="182"></CodeLine>
<Link id="l00183" /><CodeLine lineNumber="183"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a> = &#42;CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#aedcb208b69428c3f1d6aeed2150d46bc">First</a>-&gt;<a href="/docs/api/classes/llvm/machineinstr/#a1e855100f407ca4be098d0050be403b0">getParent</a>();</span></CodeLine>
<Link id="l00184" /><CodeLine lineNumber="184"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ClauseMI =</span></CodeLine>
<Link id="l00185" /><CodeLine lineNumber="185"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>, &#42;CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#aedcb208b69428c3f1d6aeed2150d46bc">First</a>, <a href="/docs/api/classes/llvm/debugloc">DebugLoc</a>(), SII-&gt;get(AMDGPU::S&#95;CLAUSE))</span></CodeLine>
<Link id="l00186" /><CodeLine lineNumber="186"><span class="doxyHighlight">            .<a href="/docs/api/classes/llvm/machineinstrbuilder/#a6c1f959947905135c7dd215b64957654">addImm</a>(CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8a2fbbe5c31e2244394c38df2453fd4b">Length</a> - 1);</span></CodeLine>
<Link id="l00187" /><CodeLine lineNumber="187"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a077981b5798a5d7a95cec16ece863aeb">finalizeBundle</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>, ClauseMI-&gt;getIterator(),</span></CodeLine>
<Link id="l00188" /><CodeLine lineNumber="188"><span class="doxyHighlight">                   std::next(CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8b2c54a90de8f029d4331b5048522bd4">Last</a>-&gt;<a href="/docs/api/classes/llvm/ilist-node-impl/#af719fc783be6589465137d997701a432">getIterator</a>()));</span></CodeLine>
<Link id="l00189" /><CodeLine lineNumber="189"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00190" /><CodeLine lineNumber="190"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00191" /><CodeLine lineNumber="191"></CodeLine>
<Link id="l00192" /><CodeLine lineNumber="192" lineLink="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#a014ee381e519aa7b2b38d66744faa5bb"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#a014ee381e519aa7b2b38d66744faa5bb">runOnMachineFunction</a>(<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF)</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00193" /><CodeLine lineNumber="193"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/functionpass/#af9f5f511d75e16f09a5520cb9444cfa8">skipFunction</a>(MF.<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>()))</span></CodeLine>
<Link id="l00194" /><CodeLine lineNumber="194"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00195" /><CodeLine lineNumber="195"></CodeLine>
<Link id="l00196" /><CodeLine lineNumber="196"><span class="doxyHighlight">    <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#afdd1c4e7a7b1c4becde4df5ca8fd424f">ST</a> = &amp;MF.<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>&lt;<a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a>&gt;();</span></CodeLine>
<Link id="l00197" /><CodeLine lineNumber="197"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#afdd1c4e7a7b1c4becde4df5ca8fd424f">ST</a>-&gt;hasHardClauses())</span></CodeLine>
<Link id="l00198" /><CodeLine lineNumber="198"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00199" /><CodeLine lineNumber="199"></CodeLine>
<Link id="l00200" /><CodeLine lineNumber="200"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/siinstrinfo">SIInstrInfo</a> &#42;SII = <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#afdd1c4e7a7b1c4becde4df5ca8fd424f">ST</a>-&gt;getInstrInfo();</span></CodeLine>
<Link id="l00201" /><CodeLine lineNumber="201"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#afdd1c4e7a7b1c4becde4df5ca8fd424f">ST</a>-&gt;getRegisterInfo();</span></CodeLine>
<Link id="l00202" /><CodeLine lineNumber="202"></CodeLine>
<Link id="l00203" /><CodeLine lineNumber="203"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/groups/arcopt/#gaa57b1a4e6a1c79233913139635169cf1">Changed</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00204" /><CodeLine lineNumber="204"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a> : MF) &#123;</span></CodeLine>
<Link id="l00205" /><CodeLine lineNumber="205"><span class="doxyHighlight">      <a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo">ClauseInfo</a> CI;</span></CodeLine>
<Link id="l00206" /><CodeLine lineNumber="206"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>) &#123;</span></CodeLine>
<Link id="l00207" /><CodeLine lineNumber="207"><span class="doxyHighlight">        <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069">HardClauseType</a> <a href="/docs/api/classes/llvm/type">Type</a> = <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#a10d3dc29c5b795204cec9fe33433f1cc">getHardClauseType</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l00208" /><CodeLine lineNumber="208"></CodeLine>
<Link id="l00209" /><CodeLine lineNumber="209"><span class="doxyHighlight">        int64&#95;t Dummy1;</span></CodeLine>
<Link id="l00210" /><CodeLine lineNumber="210"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Dummy2;</span></CodeLine>
<Link id="l00211" /><CodeLine lineNumber="211"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/locationsize">LocationSize</a> Dummy3 = 0;</span></CodeLine>
<Link id="l00212" /><CodeLine lineNumber="212"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;const MachineOperand &#42;, 4&gt;</a> BaseOps;</span></CodeLine>
<Link id="l00213" /><CodeLine lineNumber="213"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/type">Type</a> &lt;= <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a864a2b458251ad286c4eb3769fe46efa">LAST&#95;REAL&#95;HARDCLAUSE&#95;TYPE</a>) &#123;</span></CodeLine>
<Link id="l00214" /><CodeLine lineNumber="214"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SII-&gt;<a href="/docs/api/classes/llvm/siinstrinfo/#a0c826f5192676a1dfa8468a38b9ce1c3">getMemOperandsWithOffsetWidth</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, BaseOps, Dummy1, Dummy2,</span></CodeLine>
<Link id="l00215" /><CodeLine lineNumber="215"><span class="doxyHighlight">                                                  Dummy3, <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>)) &#123;</span></CodeLine>
<Link id="l00216" /><CodeLine lineNumber="216"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// We failed to get the base operands, so we&#39;ll never clause this</span></CodeLine>
<Link id="l00217" /><CodeLine lineNumber="217"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// instruction with any other, so pretend it&#39;s illegal.</span></CodeLine>
<Link id="l00218" /><CodeLine lineNumber="218"><span class="doxyHighlight">            <a href="/docs/api/classes/llvm/type">Type</a> = <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069aa5be04416de1c7632343fd7d93b37d4d">HARDCLAUSE&#95;ILLEGAL</a>;</span></CodeLine>
<Link id="l00219" /><CodeLine lineNumber="219"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l00220" /><CodeLine lineNumber="220"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00221" /><CodeLine lineNumber="221"></CodeLine>
<Link id="l00222" /><CodeLine lineNumber="222"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8a2fbbe5c31e2244394c38df2453fd4b">Length</a> == <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#afdd1c4e7a7b1c4becde4df5ca8fd424f">ST</a>-&gt;maxHardClauseLength() ||</span></CodeLine>
<Link id="l00223" /><CodeLine lineNumber="223"><span class="doxyHighlight">            (CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8a2fbbe5c31e2244394c38df2453fd4b">Length</a> &amp;&amp; <a href="/docs/api/classes/llvm/type">Type</a> != <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ab10feb7cd6ab6000a34957e10296bd8c">HARDCLAUSE&#95;INTERNAL</a> &amp;&amp;</span></CodeLine>
<Link id="l00224" /><CodeLine lineNumber="224"><span class="doxyHighlight">             <a href="/docs/api/classes/llvm/type">Type</a> != <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a161c9387aef0690f84572531f07239bd">HARDCLAUSE&#95;IGNORE</a> &amp;&amp;</span></CodeLine>
<Link id="l00225" /><CodeLine lineNumber="225"><span class="doxyHighlight">             (<a href="/docs/api/classes/llvm/type">Type</a> != CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8756be0eec6dd68e52f250497ce43aa0">Type</a> ||</span></CodeLine>
<Link id="l00226" /><CodeLine lineNumber="226"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// Note that we lie to shouldClusterMemOps about the size of the</span></CodeLine>
<Link id="l00227" /><CodeLine lineNumber="227"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// cluster. When shouldClusterMemOps is called from the machine</span></CodeLine>
<Link id="l00228" /><CodeLine lineNumber="228"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// scheduler it limits the size of the cluster to avoid increasing</span></CodeLine>
<Link id="l00229" /><CodeLine lineNumber="229"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// register pressure too much, but this pass runs after register</span></CodeLine>
<Link id="l00230" /><CodeLine lineNumber="230"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// allocation so there is no need for that kind of limit.</span></CodeLine>
<Link id="l00231" /><CodeLine lineNumber="231"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// We also lie about the Offset and OffsetIsScalable parameters,</span></CodeLine>
<Link id="l00232" /><CodeLine lineNumber="232"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// as they aren&#39;t used in the SIInstrInfo implementation.</span></CodeLine>
<Link id="l00233" /><CodeLine lineNumber="233"><span class="doxyHighlight">              !SII-&gt;<a href="/docs/api/classes/llvm/siinstrinfo/#a48560701bbaa0465f8ef8d92874caaf0">shouldClusterMemOps</a>(CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#ad49bf054ec85b06fe8908221b28ec038">BaseOps</a>, 0, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, BaseOps, 0, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00234" /><CodeLine lineNumber="234"><span class="doxyHighlight">                                        2, 2)))) &#123;</span></CodeLine>
<Link id="l00235" /><CodeLine lineNumber="235"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Finish the current clause.</span></CodeLine>
<Link id="l00236" /><CodeLine lineNumber="236"><span class="doxyHighlight">          <a href="/docs/api/groups/arcopt/#gaa57b1a4e6a1c79233913139635169cf1">Changed</a> |= <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#afea2f73a2971b1c2238c0996efdb1201">emitClause</a>(CI, SII);</span></CodeLine>
<Link id="l00237" /><CodeLine lineNumber="237"><span class="doxyHighlight">          CI = <a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo">ClauseInfo</a>();</span></CodeLine>
<Link id="l00238" /><CodeLine lineNumber="238"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00239" /><CodeLine lineNumber="239"></CodeLine>
<Link id="l00240" /><CodeLine lineNumber="240"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8a2fbbe5c31e2244394c38df2453fd4b">Length</a>) &#123;</span></CodeLine>
<Link id="l00241" /><CodeLine lineNumber="241"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Extend the current clause.</span></CodeLine>
<Link id="l00242" /><CodeLine lineNumber="242"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/type">Type</a> != <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a161c9387aef0690f84572531f07239bd">HARDCLAUSE&#95;IGNORE</a>) &#123;</span></CodeLine>
<Link id="l00243" /><CodeLine lineNumber="243"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/type">Type</a> == <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069ab10feb7cd6ab6000a34957e10296bd8c">HARDCLAUSE&#95;INTERNAL</a>) &#123;</span></CodeLine>
<Link id="l00244" /><CodeLine lineNumber="244"><span class="doxyHighlight">              ++CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a1fdbda7fa9415f7ed59027fc5ed9fb03">TrailingInternalLength</a>;</span></CodeLine>
<Link id="l00245" /><CodeLine lineNumber="245"><span class="doxyHighlight">            &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00246" /><CodeLine lineNumber="246"><span class="doxyHighlight">              ++CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8a2fbbe5c31e2244394c38df2453fd4b">Length</a>;</span></CodeLine>
<Link id="l00247" /><CodeLine lineNumber="247"><span class="doxyHighlight">              CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8a2fbbe5c31e2244394c38df2453fd4b">Length</a> += CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a1fdbda7fa9415f7ed59027fc5ed9fb03">TrailingInternalLength</a>;</span></CodeLine>
<Link id="l00248" /><CodeLine lineNumber="248"><span class="doxyHighlight">              CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a1fdbda7fa9415f7ed59027fc5ed9fb03">TrailingInternalLength</a> = 0;</span></CodeLine>
<Link id="l00249" /><CodeLine lineNumber="249"><span class="doxyHighlight">              CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8b2c54a90de8f029d4331b5048522bd4">Last</a> = &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</span></CodeLine>
<Link id="l00250" /><CodeLine lineNumber="250"><span class="doxyHighlight">              CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#ad49bf054ec85b06fe8908221b28ec038">BaseOps</a> = std::move(BaseOps);</span></CodeLine>
<Link id="l00251" /><CodeLine lineNumber="251"><span class="doxyHighlight">            &#125;</span></CodeLine>
<Link id="l00252" /><CodeLine lineNumber="252"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l00253" /><CodeLine lineNumber="253"><span class="doxyHighlight">        &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/type">Type</a> &lt;= <a href="/docs/api/namespaces/anonymous-siinserthardclauses-cpp-/#a05f3bd1f05d10f71d36966379038c069a864a2b458251ad286c4eb3769fe46efa">LAST&#95;REAL&#95;HARDCLAUSE&#95;TYPE</a>) &#123;</span></CodeLine>
<Link id="l00254" /><CodeLine lineNumber="254"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Start a new clause.</span></CodeLine>
<Link id="l00255" /><CodeLine lineNumber="255"><span class="doxyHighlight">          CI = <a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo">ClauseInfo</a>&#123;<a href="/docs/api/classes/llvm/type">Type</a>, &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, 1, 0, std::move(BaseOps)&#125;;</span></CodeLine>
<Link id="l00256" /><CodeLine lineNumber="256"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l00257" /><CodeLine lineNumber="257"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00258" /><CodeLine lineNumber="258"></CodeLine>
<Link id="l00259" /><CodeLine lineNumber="259"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Finish the last clause in the basic block if any.</span></CodeLine>
<Link id="l00260" /><CodeLine lineNumber="260"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CI.<a href="/docs/api/structs/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/clauseinfo/#a8a2fbbe5c31e2244394c38df2453fd4b">Length</a>)</span></CodeLine>
<Link id="l00261" /><CodeLine lineNumber="261"><span class="doxyHighlight">        <a href="/docs/api/groups/arcopt/#gaa57b1a4e6a1c79233913139635169cf1">Changed</a> |= <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#afea2f73a2971b1c2238c0996efdb1201">emitClause</a>(CI, SII);</span></CodeLine>
<Link id="l00262" /><CodeLine lineNumber="262"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00263" /><CodeLine lineNumber="263"></CodeLine>
<Link id="l00264" /><CodeLine lineNumber="264"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/groups/arcopt/#gaa57b1a4e6a1c79233913139635169cf1">Changed</a>;</span></CodeLine>
<Link id="l00265" /><CodeLine lineNumber="265"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00266" /><CodeLine lineNumber="266"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00267" /><CodeLine lineNumber="267"></CodeLine>
<Link id="l00268" /><CodeLine lineNumber="268"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// namespace</span></CodeLine>
<Link id="l00269" /><CodeLine lineNumber="269"></CodeLine>
<Link id="l00270" /><CodeLine lineNumber="270"><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#a04b2541bf242d9ab3c96bf2b02544880">SIInsertHardClauses::ID</a> = 0;</span></CodeLine>
<Link id="l00271" /><CodeLine lineNumber="271"></CodeLine>
<Link id="l00272" /><CodeLine lineNumber="272" lineLink="/docs/api/namespaces/llvm/#abeb21a7da3bb15241e48979f2e90c2a6"><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> &amp;<a href="/docs/api/namespaces/llvm/#abeb21a7da3bb15241e48979f2e90c2a6">llvm::SIInsertHardClausesID</a> = <a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#a04b2541bf242d9ab3c96bf2b02544880">SIInsertHardClauses::ID</a>;</span></CodeLine>
<Link id="l00273" /><CodeLine lineNumber="273"></CodeLine>
<Link id="l00274" /><CodeLine lineNumber="274"><span class="doxyHighlight"><a href="/docs/api/files/include/include/llvm/passsupport-h/#af807c9595d50b45c0008924c4679c85c">INITIALIZE&#95;PASS</a>(<a href="/docs/api/classes/anonymous-namespace-siinserthardclauses-cpp-/siinserthardclauses/#adf3ebefc71e2c76b471b71ec7ef5d2e7">SIInsertHardClauses</a>, <a href="/docs/api/files/include/include/llvm/include/llvm/adt/genericcycleimpl-h/#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>, </span><span class="doxyHighlightStringLiteral">&quot;SI Insert Hard Clauses&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00275" /><CodeLine lineNumber="275"><span class="doxyHighlight">                </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">)</span></CodeLine>

</ProgramListing>


</DoxygenPage>
