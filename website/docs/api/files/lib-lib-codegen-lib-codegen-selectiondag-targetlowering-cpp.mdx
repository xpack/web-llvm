---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/files/lib/lib/codegen/lib/codegen/selectiondag/targetlowering-cpp
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - file

---

import Link from '@docusaurus/Link'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import Highlight from '@xpack/docusaurus-plugin-doxygen/components/Highlight'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `TargetLowering.cpp` File Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/CodeGen/TargetLowering.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetlowering-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/STLExtras.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/stlextras-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/ValueTracking.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/valuetracking-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/VectorUtils.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/vectorutils-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/CallingConvLower.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/callingconvlower-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/CodeGenCommonISel.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/codegencommonisel-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineFrameInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machineframeinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineFunction.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinefunction-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineJumpTableInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinejumptableinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineRegisterInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machineregisterinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/SelectionDAG.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/selectiondag-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetRegisterInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetregisterinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DataLayout.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/datalayout-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DerivedTypes.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/derivedtypes-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/GlobalVariable.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/globalvariable-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/LLVMContext.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/llvmcontext-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/MC/MCAsmInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/mc/mcasminfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/MC/MCExpr.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/mc/mcexpr-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/DivisionByConstantInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/divisionbyconstantinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/ErrorHandling.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/KnownBits.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/knownbits-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/MathExtras.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/mathextras-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Target/TargetMachine.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/target/targetmachine-h"
  isLocal="true" />
<IncludesListItem
  filePath="cctype"
  permalink=""
  isLocal="false" />
</IncludesList>

## Functions Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/sdvalue">SDValue</a></>}
  name={<><a href="#af1364d76011b791bbac39ca8470dd2bf">BuildExactSDIV</a> (const TargetLowering &amp;TLI, SDNode &#42;N, const SDLoc &amp;dl, SelectionDAG &amp;DAG, SmallVectorImpl&lt; SDNode &#42; &gt; &amp;Created)</>}>
Given an exact SDIV by a constant, create a multiplication with the multiplicative inverse of the constant. <a href="#af1364d76011b791bbac39ca8470dd2bf">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/sdvalue">SDValue</a></>}
  name={<><a href="#a1ca08074fa512b26eb7e8e88833892d9">BuildExactUDIV</a> (const TargetLowering &amp;TLI, SDNode &#42;N, const SDLoc &amp;dl, SelectionDAG &amp;DAG, SmallVectorImpl&lt; SDNode &#42; &gt; &amp;Created)</>}>
Given an exact UDIV by a constant, create a multiplication with the multiplicative inverse of the constant. <a href="#a1ca08074fa512b26eb7e8e88833892d9">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ac8600b395666a2e54d6f347b58df6f62">canExpandVectorCTPOP</a> (const TargetLowering &amp;TLI, EVT VT)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/sdvalue">SDValue</a></>}
  name={<><a href="#a508969c8bd53dfda53fb8670e9df1194">clampDynamicVectorIndex</a> (SelectionDAG &amp;DAG, SDValue Idx, EVT VecVT, const SDLoc &amp;dl, ElementCount SubEC)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/sdvalue">SDValue</a></>}
  name={<><a href="#afa64cc7dfc401b9825b62c2b19808ad0">combineShiftToAVG</a> (SDValue Op, TargetLowering::TargetLoweringOpt &amp;TLO, const TargetLowering &amp;TLI, const APInt &amp;DemandedBits, const APInt &amp;DemandedElts, unsigned Depth)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/sdvalue">SDValue</a></>}
  name={<><a href="#a0c43f88b7b733fa84bb93583d9163b54">expandVPFunnelShift</a> (SDNode &#42;Node, SelectionDAG &amp;DAG)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/sdvalue">SDValue</a></>}
  name={<><a href="#a07df6b2f8ad8ae0dd165bdedc3c97da6">foldSetCCWithFunnelShift</a> (EVT VT, SDValue N0, SDValue N1, ISD::CondCode Cond, const SDLoc &amp;dl, SelectionDAG &amp;DAG)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/sdvalue">SDValue</a></>}
  name={<><a href="#ad061307c0dae639c75d944338bd7b15d">foldSetCCWithRotate</a> (EVT VT, SDValue N0, SDValue N1, ISD::CondCode Cond, const SDLoc &amp;dl, SelectionDAG &amp;DAG)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a54b5dd826aa4e28806c5dc986e1cd393">getConstraintPiority</a> (TargetLowering::ConstraintType CT)</>}>
Return a number indicating our preference for chosing a type of constraint over another, for the purpose of sorting them. <a href="#a54b5dd826aa4e28806c5dc986e1cd393">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/apint">APInt</a></>}
  name={<><a href="#a17fca146e0dc0228bae32fe5548ab48a">getKnownUndefForVectorBinop</a> (SDValue BO, SelectionDAG &amp;DAG, const APInt &amp;UndefOp0, const APInt &amp;UndefOp1)</>}>
Given a vector binary operation and known undefined elements for each input operand, compute whether each element of the output is undefined. <a href="#a17fca146e0dc0228bae32fe5548ab48a">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::optional&lt; bool &gt;</>}
  name={<><a href="#a939a9cb864b778eb29af330d62308ba4">isFCmpEqualZero</a> (FPClassTest Test, const fltSemantics &amp;Semantics, const MachineFunction &amp;MF)</>}>
Returns a true value if if this <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1d">FPClassTest</a> can be performed with an ordered fcmp to 0, and a false value if it&#39;s an unordered fcmp to 0. <a href="#a939a9cb864b778eb29af330d62308ba4">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a5bff9344010e6337ebead35d50f3cb28">isNonZeroModBitWidthOrUndef</a> (SDValue Z, unsigned BW)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a090b7c264f35ed6b224b38783e1d46fb">lowerImmediateIfPossible</a> (TargetLowering::ConstraintPair &amp;P, SDValue Op, SelectionDAG &#42;DAG, const TargetLowering &amp;TLI)</>}>
If we have an immediate, see if we can lower it. <a href="#a090b7c264f35ed6b224b38783e1d46fb">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/sdvalue">SDValue</a></>}
  name={<><a href="#af16b5429cba93f00c53d5d4627725516">simplifySetCCWithCTPOP</a> (const TargetLowering &amp;TLI, EVT VT, SDValue N0, const APInt &amp;C1, ISD::CondCode Cond, const SDLoc &amp;dl, SelectionDAG &amp;DAG)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#aae6594d69bd253616ae16674187e6396">turnVectorIntoSplatVector</a> (MutableArrayRef&lt; SDValue &gt; Values, std::function&lt; bool(SDValue)&gt; Predicate, SDValue AlternativeReplacement=SDValue())</>}>
If all values in Values that <em>don&#39;t</em> match the predicate are same &#39;splat&#39; value, then replace all values with that splat value. <a href="#aae6594d69bd253616ae16674187e6396">More...</a>
</MembersIndexItem>

</MembersIndex>


<SectionDefinition>

## Functions

### BuildExactSDIV() {#af1364d76011b791bbac39ca8470dd2bf}

<MemberDefinition
  prototype={<>static SDValue BuildExactSDIV (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &amp; TLI, <a href="/docs/api/classes/llvm/sdnode">SDNode</a> &#42; N, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/sdloc">SDLoc</a> &amp; dl, <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp; DAG, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/sdnode">SDNode</a> &#42; &gt; &amp; Created)</>}
  labels = {["static"]}>
Given an exact SDIV by a constant, create a multiplication with the multiplicative inverse of the constant.

Ref: &quot;Hacker&#39;s Delight&quot; by Henry Warren, 2nd Edition, p. 242

Definition at line <a href="#l06147">6147</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/targetlowering-cpp">TargetLowering.cpp</a>.
</MemberDefinition>

### BuildExactUDIV() {#a1ca08074fa512b26eb7e8e88833892d9}

<MemberDefinition
  prototype={<>static SDValue BuildExactUDIV (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &amp; TLI, <a href="/docs/api/classes/llvm/sdnode">SDNode</a> &#42; N, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/sdloc">SDLoc</a> &amp; dl, <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp; DAG, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/sdnode">SDNode</a> &#42; &gt; &amp; Created)</>}
  labels = {["static"]}>
Given an exact UDIV by a constant, create a multiplication with the multiplicative inverse of the constant.

Ref: &quot;Hacker&#39;s Delight&quot; by Henry Warren, 2nd Edition, p. 242

Definition at line <a href="#l06207">6207</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/targetlowering-cpp">TargetLowering.cpp</a>.
</MemberDefinition>

### canExpandVectorCTPOP() {#ac8600b395666a2e54d6f347b58df6f62}

<MemberDefinition
  prototype={<>static bool canExpandVectorCTPOP (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &amp; TLI, <a href="/docs/api/structs/llvm/evt">EVT</a> VT)</>}
  labels = {["static"]}>

Definition at line <a href="#l09073">9073</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/targetlowering-cpp">TargetLowering.cpp</a>.
</MemberDefinition>

### clampDynamicVectorIndex() {#a508969c8bd53dfda53fb8670e9df1194}

<MemberDefinition
  prototype={<>static SDValue clampDynamicVectorIndex (<a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp; DAG, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Idx, <a href="/docs/api/structs/llvm/evt">EVT</a> VecVT, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/sdloc">SDLoc</a> &amp; dl, <a href="/docs/api/classes/llvm/elementcount">ElementCount</a> SubEC)</>}
  labels = {["static"]}>

Definition at line <a href="#l10449">10449</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/targetlowering-cpp">TargetLowering.cpp</a>.
</MemberDefinition>

### combineShiftToAVG() {#afa64cc7dfc401b9825b62c2b19808ad0}

<MemberDefinition
  prototype={<>static SDValue combineShiftToAVG (<a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Op, TargetLowering::TargetLoweringOpt &amp; TLO, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &amp; TLI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/apint">APInt</a> &amp; DemandedBits, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/apint">APInt</a> &amp; DemandedElts, unsigned Depth)</>}
  labels = {["static"]}>

Definition at line <a href="#l00987">987</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/targetlowering-cpp">TargetLowering.cpp</a>.
</MemberDefinition>

### expandVPFunnelShift() {#a0c43f88b7b733fa84bb93583d9163b54}

<MemberDefinition
  prototype={<>static SDValue expandVPFunnelShift (<a href="/docs/api/classes/llvm/sdnode">SDNode</a> &#42; Node, <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp; DAG)</>}
  labels = {["static"]}>

Definition at line <a href="#l07977">7977</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/targetlowering-cpp">TargetLowering.cpp</a>.
</MemberDefinition>

### foldSetCCWithFunnelShift() {#a07df6b2f8ad8ae0dd165bdedc3c97da6}

<MemberDefinition
  prototype={<>static SDValue foldSetCCWithFunnelShift (<a href="/docs/api/structs/llvm/evt">EVT</a> VT, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> N0, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> N1, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> Cond, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/sdloc">SDLoc</a> &amp; dl, <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp; DAG)</>}
  labels = {["static"]}>

Definition at line <a href="#l04437">4437</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/targetlowering-cpp">TargetLowering.cpp</a>.
</MemberDefinition>

### foldSetCCWithRotate() {#ad061307c0dae639c75d944338bd7b15d}

<MemberDefinition
  prototype={<>static SDValue foldSetCCWithRotate (<a href="/docs/api/structs/llvm/evt">EVT</a> VT, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> N0, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> N1, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> Cond, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/sdloc">SDLoc</a> &amp; dl, <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp; DAG)</>}
  labels = {["static"]}>

Definition at line <a href="#l04394">4394</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/targetlowering-cpp">TargetLowering.cpp</a>.
</MemberDefinition>

### getConstraintPiority() {#a54b5dd826aa4e28806c5dc986e1cd393}

<MemberDefinition
  prototype={<>static unsigned getConstraintPiority (<a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116">TargetLowering::ConstraintType</a> CT)</>}
  labels = {["static"]}>
Return a number indicating our preference for chosing a type of constraint over another, for the purpose of sorting them.

Immediates are almost always preferrable (when they can be emitted). A higher return value means a stronger preference for one constraint type relative to another. FIXME: We should prefer registers over memory but doing so may lead to unrecoverable register exhaustion later. <a href="https://github.com/llvm/llvm-project/issues/20571">https://github.com/llvm/llvm-project/issues/20571</a>

Definition at line <a href="#l05923">5923</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/targetlowering-cpp">TargetLowering.cpp</a>.
</MemberDefinition>

### getKnownUndefForVectorBinop() {#a17fca146e0dc0228bae32fe5548ab48a}

<MemberDefinition
  prototype={<>static APInt getKnownUndefForVectorBinop (<a href="/docs/api/classes/llvm/sdvalue">SDValue</a> BO, <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp; DAG, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/apint">APInt</a> &amp; UndefOp0, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/apint">APInt</a> &amp; UndefOp1)</>}
  labels = {["static"]}>
Given a vector binary operation and known undefined elements for each input operand, compute whether each element of the output is undefined.

Definition at line <a href="#l03031">3031</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/targetlowering-cpp">TargetLowering.cpp</a>.
</MemberDefinition>

### isFCmpEqualZero() {#a939a9cb864b778eb29af330d62308ba4}

<MemberDefinition
  prototype={<>static std::optional&lt; bool &gt; isFCmpEqualZero (<a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1d">FPClassTest</a> Test, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/fltsemantics">fltSemantics</a> &amp; Semantics, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp; MF)</>}
  labels = {["static"]}>
Returns a true value if if this <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1d">FPClassTest</a> can be performed with an ordered fcmp to 0, and a false value if it&#39;s an unordered fcmp to 0.

Returns std::nullopt if it cannot be performed as a compare with 0.

Definition at line <a href="#l08703">8703</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/targetlowering-cpp">TargetLowering.cpp</a>.
</MemberDefinition>

### isNonZeroModBitWidthOrUndef() {#a5bff9344010e6337ebead35d50f3cb28}

<MemberDefinition
  prototype={<>static bool isNonZeroModBitWidthOrUndef (<a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Z, unsigned BW)</>}
  labels = {["static"]}>

Definition at line <a href="#l07970">7970</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/targetlowering-cpp">TargetLowering.cpp</a>.
</MemberDefinition>

### lowerImmediateIfPossible() {#a090b7c264f35ed6b224b38783e1d46fb}

<MemberDefinition
  prototype={<>static bool lowerImmediateIfPossible (TargetLowering::ConstraintPair &amp; P, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Op, <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &#42; DAG, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &amp; TLI)</>}
  labels = {["static"]}>
If we have an immediate, see if we can lower it.

Return true if we can, false otherwise.

Definition at line <a href="#l06070">6070</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/targetlowering-cpp">TargetLowering.cpp</a>.
</MemberDefinition>

### simplifySetCCWithCTPOP() {#af16b5429cba93f00c53d5d4627725516}

<MemberDefinition
  prototype={<>static SDValue simplifySetCCWithCTPOP (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &amp; TLI, <a href="/docs/api/structs/llvm/evt">EVT</a> VT, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> N0, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/apint">APInt</a> &amp; C1, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> Cond, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/sdloc">SDLoc</a> &amp; dl, <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp; DAG)</>}
  labels = {["static"]}>

Definition at line <a href="#l04320">4320</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/targetlowering-cpp">TargetLowering.cpp</a>.
</MemberDefinition>

### turnVectorIntoSplatVector() {#aae6594d69bd253616ae16674187e6396}

<MemberDefinition
  prototype={<>static void turnVectorIntoSplatVector (<a href="/docs/api/classes/llvm/mutablearrayref">MutableArrayRef</a>&lt; <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> &gt; Values, <a href="/docs/api/files/lib/lib/analysis/regionprinter-cpp/#aa37fbbce2360106772fd97ed06455d55">std::function</a>&lt; bool(<a href="/docs/api/classes/llvm/sdvalue">SDValue</a>)&gt; Predicate, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> AlternativeReplacement=<a href="/docs/api/classes/llvm/sdvalue">SDValue</a>())</>}
  labels = {["static"]}>
If all values in Values that <em>don&#39;t</em> match the predicate are same &#39;splat&#39; value, then replace all values with that splat value.

Else, if AlternativeReplacement was provided, then replace all values that do match predicate with AlternativeReplacement value.

Definition at line <a href="#l06700">6700</a> of file <a href="/docs/api/files/lib/lib/codegen/lib/codegen/selectiondag/targetlowering-cpp">TargetLowering.cpp</a>.
</MemberDefinition>

</SectionDefinition>

## File Listing

The file content with the documentation metadata removed is:

<ProgramListing>

<Link id="l00001" /><CodeLine lineNumber="1"><Highlight kind="comment">//===-- TargetLowering.cpp - Implement the TargetLowering class -----------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00002" /><CodeLine lineNumber="2"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00003" /><CodeLine lineNumber="3"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00004" /><CodeLine lineNumber="4"><Highlight kind="normal"></Highlight><Highlight kind="comment">// See https://llvm.org/LICENSE.txt for license information.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00005" /><CodeLine lineNumber="5"><Highlight kind="normal"></Highlight><Highlight kind="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00006" /><CodeLine lineNumber="6"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00007" /><CodeLine lineNumber="7"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00008" /><CodeLine lineNumber="8"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00009" /><CodeLine lineNumber="9"><Highlight kind="normal"></Highlight><Highlight kind="comment">// This implements the TargetLowering class.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00010" /><CodeLine lineNumber="10"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00011" /><CodeLine lineNumber="11"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00012" /><CodeLine lineNumber="12"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00013" /><CodeLine lineNumber="13"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetlowering-h">llvm/CodeGen/TargetLowering.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00014" /><CodeLine lineNumber="14"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/stlextras-h">llvm/ADT/STLExtras.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00015" /><CodeLine lineNumber="15"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/valuetracking-h">llvm/Analysis/ValueTracking.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00016" /><CodeLine lineNumber="16"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/vectorutils-h">llvm/Analysis/VectorUtils.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00017" /><CodeLine lineNumber="17"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/callingconvlower-h">llvm/CodeGen/CallingConvLower.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00018" /><CodeLine lineNumber="18"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/codegencommonisel-h">llvm/CodeGen/CodeGenCommonISel.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00019" /><CodeLine lineNumber="19"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineframeinfo-h">llvm/CodeGen/MachineFrameInfo.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00020" /><CodeLine lineNumber="20"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinefunction-h">llvm/CodeGen/MachineFunction.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00021" /><CodeLine lineNumber="21"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinejumptableinfo-h">llvm/CodeGen/MachineJumpTableInfo.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00022" /><CodeLine lineNumber="22"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineregisterinfo-h">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00023" /><CodeLine lineNumber="23"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/selectiondag-h">llvm/CodeGen/SelectionDAG.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00024" /><CodeLine lineNumber="24"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetregisterinfo-h">llvm/CodeGen/TargetRegisterInfo.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00025" /><CodeLine lineNumber="25"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/datalayout-h">llvm/IR/DataLayout.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00026" /><CodeLine lineNumber="26"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/derivedtypes-h">llvm/IR/DerivedTypes.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00027" /><CodeLine lineNumber="27"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/globalvariable-h">llvm/IR/GlobalVariable.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00028" /><CodeLine lineNumber="28"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/llvmcontext-h">llvm/IR/LLVMContext.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00029" /><CodeLine lineNumber="29"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/mc/mcasminfo-h">llvm/MC/MCAsmInfo.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00030" /><CodeLine lineNumber="30"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/mc/mcexpr-h">llvm/MC/MCExpr.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00031" /><CodeLine lineNumber="31"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/divisionbyconstantinfo-h">llvm/Support/DivisionByConstantInfo.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00032" /><CodeLine lineNumber="32"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h">llvm/Support/ErrorHandling.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00033" /><CodeLine lineNumber="33"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/knownbits-h">llvm/Support/KnownBits.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00034" /><CodeLine lineNumber="34"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/mathextras-h">llvm/Support/MathExtras.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00035" /><CodeLine lineNumber="35"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/target/targetmachine-h">llvm/Target/TargetMachine.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00036" /><CodeLine lineNumber="36"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;cctype&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00037" /><CodeLine lineNumber="37"><Highlight kind="normal"></Highlight><Highlight kind="keyword">using namespace </Highlight><Highlight kind="normal"><a href="/docs/api/namespaces/llvm">llvm</a>;</Highlight></CodeLine>
<Link id="l00038" /><CodeLine lineNumber="38"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00039" /><CodeLine lineNumber="39"><Highlight kind="comment">/// NOTE: The TargetMachine owns TLOF.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00040" /><CodeLine lineNumber="40"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#aaa96f111a59a7a2e7f9c689b344543df">TargetLowering::TargetLowering</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetmachine">TargetMachine</a> &amp;tm)</Highlight></CodeLine>
<Link id="l00041" /><CodeLine lineNumber="41"><Highlight kind="normal">    : <a href="/docs/api/classes/llvm/targetloweringbase">TargetLoweringBase</a>(tm) &#123;&#125;</Highlight></CodeLine>
<Link id="l00042" /><CodeLine lineNumber="42"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00043" /><CodeLine lineNumber="43"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> &#42;<a href="/docs/api/classes/llvm/targetlowering/#aa07a74d942f49b11a81baf6dba21726e">TargetLowering::getTargetNodeName</a>(</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opcode)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00044" /><CodeLine lineNumber="44"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00045" /><CodeLine lineNumber="45"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00046" /><CodeLine lineNumber="46"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00047" /><CodeLine lineNumber="47"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#aa8ab0804ddb40450da6549e1943817a2">TargetLowering::isPositionIndependent</a>()</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00048" /><CodeLine lineNumber="48"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetloweringbase/#a30aa4a06549273240892d58449b8d268">getTargetMachine</a>().<a href="/docs/api/classes/llvm/targetmachine/#a0e5ffac7fd84af772a216629f8bd6da9">isPositionIndependent</a>();</Highlight></CodeLine>
<Link id="l00049" /><CodeLine lineNumber="49"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00050" /><CodeLine lineNumber="50"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00051" /><CodeLine lineNumber="51"><Highlight kind="comment">/// Check whether a given call node is in tail position within its function. If</Highlight></CodeLine>
<Link id="l00052" /><CodeLine lineNumber="52"><Highlight kind="comment">/// so, it sets Chain to the input chain of the tail call.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00053" /><CodeLine lineNumber="53"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a6e6f8d5c56365fe5e9a6e4f9581ddb94">TargetLowering::isInTailCallPosition</a>(<a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp;DAG, <a href="/docs/api/classes/llvm/sdnode">SDNode</a> &#42;Node,</Highlight></CodeLine>
<Link id="l00054" /><CodeLine lineNumber="54"><Highlight kind="normal">                                          <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> &amp;Chain)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00055" /><CodeLine lineNumber="55"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/codeview/#adfebd8c4ae29ccd84c600c1e65d6b807a86408593c34af77fdd90df932f8b5261">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac64ec73b0617befef1fb2eae78d12b5f">getMachineFunction</a>().<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>();</Highlight></CodeLine>
<Link id="l00056" /><CodeLine lineNumber="56"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00057" /><CodeLine lineNumber="57"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// First, check if tail calls have been disabled in this function.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00058" /><CodeLine lineNumber="58"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getFnAttribute(</Highlight><Highlight kind="stringliteral">&quot;disable-tail-calls&quot;</Highlight><Highlight kind="normal">).getValueAsBool())</Highlight></CodeLine>
<Link id="l00059" /><CodeLine lineNumber="59"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00060" /><CodeLine lineNumber="60"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00061" /><CodeLine lineNumber="61"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Conservatively require the attributes of the call to match those of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00062" /><CodeLine lineNumber="62"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the return. Ignore following attributes because they don&#39;t affect the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00063" /><CodeLine lineNumber="63"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// call sequence.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00064" /><CodeLine lineNumber="64"><Highlight kind="normal">  AttrBuilder CallerAttrs(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getContext(), <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getAttributes().getRetAttrs());</Highlight></CodeLine>
<Link id="l00065" /><CodeLine lineNumber="65"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;Attr : &#123;Attribute::Alignment, Attribute::Dereferenceable,</Highlight></CodeLine>
<Link id="l00066" /><CodeLine lineNumber="66"><Highlight kind="normal">                           Attribute::DereferenceableOrNull, Attribute::NoAlias,</Highlight></CodeLine>
<Link id="l00067" /><CodeLine lineNumber="67"><Highlight kind="normal">                           Attribute::NonNull, Attribute::NoUndef,</Highlight></CodeLine>
<Link id="l00068" /><CodeLine lineNumber="68"><Highlight kind="normal">                           Attribute::Range, Attribute::NoFPClass&#125;)</Highlight></CodeLine>
<Link id="l00069" /><CodeLine lineNumber="69"><Highlight kind="normal">    CallerAttrs.removeAttribute(Attr);</Highlight></CodeLine>
<Link id="l00070" /><CodeLine lineNumber="70"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00071" /><CodeLine lineNumber="71"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CallerAttrs.hasAttributes())</Highlight></CodeLine>
<Link id="l00072" /><CodeLine lineNumber="72"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00073" /><CodeLine lineNumber="73"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00074" /><CodeLine lineNumber="74"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// It&#39;s not safe to eliminate the sign / zero extension of the return value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00075" /><CodeLine lineNumber="75"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CallerAttrs.contains(Attribute::ZExt) ||</Highlight></CodeLine>
<Link id="l00076" /><CodeLine lineNumber="76"><Highlight kind="normal">      CallerAttrs.contains(Attribute::SExt))</Highlight></CodeLine>
<Link id="l00077" /><CodeLine lineNumber="77"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00078" /><CodeLine lineNumber="78"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00079" /><CodeLine lineNumber="79"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check if the only use is a function return node.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00080" /><CodeLine lineNumber="80"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a138a6e09184eae2d1d412cd4e8d60e11">isUsedByReturnOnly</a>(Node, Chain);</Highlight></CodeLine>
<Link id="l00081" /><CodeLine lineNumber="81"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00082" /><CodeLine lineNumber="82"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00083" /><CodeLine lineNumber="83"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#ac11ad16fa22b9e7a5a04849e52b34fef">TargetLowering::parametersInCSRMatch</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</Highlight></CodeLine>
<Link id="l00084" /><CodeLine lineNumber="84"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint32&#95;t &#42;CallerPreservedMask,</Highlight></CodeLine>
<Link id="l00085" /><CodeLine lineNumber="85"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;CCValAssign&gt;</a> &amp;ArgLocs,</Highlight></CodeLine>
<Link id="l00086" /><CodeLine lineNumber="86"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;SDValue&gt;</a> &amp;OutVals)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00087" /><CodeLine lineNumber="87"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#abb2b3a60ccc38a28239e19a1646e0c8a">E</a> = ArgLocs.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>(); <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#abb2b3a60ccc38a28239e19a1646e0c8a">E</a>; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</Highlight></CodeLine>
<Link id="l00088" /><CodeLine lineNumber="88"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> CCValAssign &amp;ArgLoc = ArgLocs&#91;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>&#93;;</Highlight></CodeLine>
<Link id="l00089" /><CodeLine lineNumber="89"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!ArgLoc.<a href="/docs/api/classes/llvm/ccvalassign/#a07dddcff2886a2b840f993f7ce17dd28">isRegLoc</a>())</Highlight></CodeLine>
<Link id="l00090" /><CodeLine lineNumber="90"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00091" /><CodeLine lineNumber="91"><Highlight kind="normal">    MCRegister <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a359e1ff26f6d466d927a61aae45b05c3">Reg</a> = ArgLoc.<a href="/docs/api/classes/llvm/ccvalassign/#a17dbc2feaea84ef8d353095d6e618f29">getLocReg</a>();</Highlight></CodeLine>
<Link id="l00092" /><CodeLine lineNumber="92"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Only look at callee saved registers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00093" /><CodeLine lineNumber="93"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/machineoperand/#ae4ecf5483b94e2bb72967b80cc2008d2">MachineOperand::clobbersPhysReg</a>(CallerPreservedMask, <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a359e1ff26f6d466d927a61aae45b05c3">Reg</a>))</Highlight></CodeLine>
<Link id="l00094" /><CodeLine lineNumber="94"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00095" /><CodeLine lineNumber="95"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Check that we pass the value used for the caller.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00096" /><CodeLine lineNumber="96"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// (We look for a CopyFromReg reading a virtual register that is used</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00097" /><CodeLine lineNumber="97"><Highlight kind="normal">    </Highlight><Highlight kind="comment">//  for the function live-in value of register Reg)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00098" /><CodeLine lineNumber="98"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a> = OutVals&#91;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>&#93;;</Highlight></CodeLine>
<Link id="l00099" /><CodeLine lineNumber="99"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af23301e60475124fd80a2cb51f6ba863">ISD::AssertZext</a>)</Highlight></CodeLine>
<Link id="l00100" /><CodeLine lineNumber="100"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a> = <a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l00101" /><CodeLine lineNumber="101"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a>-&gt;getOpcode() != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a84c47705bcf7271413738ae8bf3871e6">ISD::CopyFromReg</a>)</Highlight></CodeLine>
<Link id="l00102" /><CodeLine lineNumber="102"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00103" /><CodeLine lineNumber="103"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> ArgReg = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;RegisterSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a>-&gt;getOperand(1))-&gt;getReg();</Highlight></CodeLine>
<Link id="l00104" /><CodeLine lineNumber="104"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getLiveInPhysReg(ArgReg) != <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a359e1ff26f6d466d927a61aae45b05c3">Reg</a>)</Highlight></CodeLine>
<Link id="l00105" /><CodeLine lineNumber="105"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00106" /><CodeLine lineNumber="106"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00107" /><CodeLine lineNumber="107"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00108" /><CodeLine lineNumber="108"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00109" /><CodeLine lineNumber="109"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00110" /><CodeLine lineNumber="110"><Highlight kind="comment">/// Set CallLoweringInfo attribute flags based on a call instruction</Highlight></CodeLine>
<Link id="l00111" /><CodeLine lineNumber="111"><Highlight kind="comment">/// and called function attributes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00112" /><CodeLine lineNumber="112" lineLink="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a2b5fc958c69057eb6752424f6417ef42"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a2b5fc958c69057eb6752424f6417ef42">TargetLoweringBase::ArgListEntry::setAttributes</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/callbase">CallBase</a> &#42;<a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>,</Highlight></CodeLine>
<Link id="l00113" /><CodeLine lineNumber="113"><Highlight kind="normal">                                                     </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ArgIdx) &#123;</Highlight></CodeLine>
<Link id="l00114" /><CodeLine lineNumber="114"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a5c1b1d84bde13caeff8e555ead3e6d9d">IsSExt</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;paramHasAttr(ArgIdx, Attribute::SExt);</Highlight></CodeLine>
<Link id="l00115" /><CodeLine lineNumber="115"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a85eb2b7ee5e85704da2b36df39830417">IsZExt</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;paramHasAttr(ArgIdx, Attribute::ZExt);</Highlight></CodeLine>
<Link id="l00116" /><CodeLine lineNumber="116"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a1b7b6eedd166d5a9dce023f4caf3744d">IsNoExt</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;paramHasAttr(ArgIdx, Attribute::NoExt);</Highlight></CodeLine>
<Link id="l00117" /><CodeLine lineNumber="117"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#ab3dd98c54113e246837a884db6281c89">IsInReg</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;paramHasAttr(ArgIdx, Attribute::InReg);</Highlight></CodeLine>
<Link id="l00118" /><CodeLine lineNumber="118"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a3a13938353e01eb66fd02918029d7471">IsSRet</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;paramHasAttr(ArgIdx, Attribute::StructRet);</Highlight></CodeLine>
<Link id="l00119" /><CodeLine lineNumber="119"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a502a6587d506fc454cd0dea3493c8233">IsNest</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;paramHasAttr(ArgIdx, Attribute::Nest);</Highlight></CodeLine>
<Link id="l00120" /><CodeLine lineNumber="120"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#af13178a29af7ffd19f78abcdf6f5be50">IsByVal</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;paramHasAttr(ArgIdx, Attribute::ByVal);</Highlight></CodeLine>
<Link id="l00121" /><CodeLine lineNumber="121"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a94c07537049909255aa5481832383ea8">IsPreallocated</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;paramHasAttr(ArgIdx, Attribute::Preallocated);</Highlight></CodeLine>
<Link id="l00122" /><CodeLine lineNumber="122"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a45c4a1254d0282fe537c4c3e3d5c95e7">IsInAlloca</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;paramHasAttr(ArgIdx, Attribute::InAlloca);</Highlight></CodeLine>
<Link id="l00123" /><CodeLine lineNumber="123"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a6211cdb7031b6d72a4f9db2b73d4ff14">IsReturned</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;paramHasAttr(ArgIdx, Attribute::Returned);</Highlight></CodeLine>
<Link id="l00124" /><CodeLine lineNumber="124"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a9c5c55349d97e80ea41acf500118ffc7">IsSwiftSelf</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;paramHasAttr(ArgIdx, Attribute::SwiftSelf);</Highlight></CodeLine>
<Link id="l00125" /><CodeLine lineNumber="125"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a2bbde6375c87630d6da3bc5d8c302d69">IsSwiftAsync</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;paramHasAttr(ArgIdx, Attribute::SwiftAsync);</Highlight></CodeLine>
<Link id="l00126" /><CodeLine lineNumber="126"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#af228c1ab50d777eb5b70bad47c3061af">IsSwiftError</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;paramHasAttr(ArgIdx, Attribute::SwiftError);</Highlight></CodeLine>
<Link id="l00127" /><CodeLine lineNumber="127"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a6057564ee6302f901f383e5811fb0ec0">Alignment</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;getParamStackAlign(ArgIdx);</Highlight></CodeLine>
<Link id="l00128" /><CodeLine lineNumber="128"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a55f8cc1b1837a33a225a76116fae2bf7">IndirectType</a> = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00129" /><CodeLine lineNumber="129"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#af13178a29af7ffd19f78abcdf6f5be50">IsByVal</a> + <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a94c07537049909255aa5481832383ea8">IsPreallocated</a> + <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a45c4a1254d0282fe537c4c3e3d5c95e7">IsInAlloca</a> + <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a3a13938353e01eb66fd02918029d7471">IsSRet</a> &lt;= 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l00130" /><CodeLine lineNumber="130"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;multiple ABI attributes?&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00131" /><CodeLine lineNumber="131"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#af13178a29af7ffd19f78abcdf6f5be50">IsByVal</a>) &#123;</Highlight></CodeLine>
<Link id="l00132" /><CodeLine lineNumber="132"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a55f8cc1b1837a33a225a76116fae2bf7">IndirectType</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;getParamByValType(ArgIdx);</Highlight></CodeLine>
<Link id="l00133" /><CodeLine lineNumber="133"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a6057564ee6302f901f383e5811fb0ec0">Alignment</a>)</Highlight></CodeLine>
<Link id="l00134" /><CodeLine lineNumber="134"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a6057564ee6302f901f383e5811fb0ec0">Alignment</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;getParamAlign(ArgIdx);</Highlight></CodeLine>
<Link id="l00135" /><CodeLine lineNumber="135"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00136" /><CodeLine lineNumber="136"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a94c07537049909255aa5481832383ea8">IsPreallocated</a>)</Highlight></CodeLine>
<Link id="l00137" /><CodeLine lineNumber="137"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a55f8cc1b1837a33a225a76116fae2bf7">IndirectType</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;getParamPreallocatedType(ArgIdx);</Highlight></CodeLine>
<Link id="l00138" /><CodeLine lineNumber="138"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a45c4a1254d0282fe537c4c3e3d5c95e7">IsInAlloca</a>)</Highlight></CodeLine>
<Link id="l00139" /><CodeLine lineNumber="139"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a55f8cc1b1837a33a225a76116fae2bf7">IndirectType</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;getParamInAllocaType(ArgIdx);</Highlight></CodeLine>
<Link id="l00140" /><CodeLine lineNumber="140"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a3a13938353e01eb66fd02918029d7471">IsSRet</a>)</Highlight></CodeLine>
<Link id="l00141" /><CodeLine lineNumber="141"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry/#a55f8cc1b1837a33a225a76116fae2bf7">IndirectType</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;getParamStructRetType(ArgIdx);</Highlight></CodeLine>
<Link id="l00142" /><CodeLine lineNumber="142"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00143" /><CodeLine lineNumber="143"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00144" /><CodeLine lineNumber="144"><Highlight kind="comment">/// Generate a libcall taking the given operands as arguments and returning a</Highlight></CodeLine>
<Link id="l00145" /><CodeLine lineNumber="145"><Highlight kind="comment">/// result of type RetVT.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00146" /><CodeLine lineNumber="146"><Highlight kind="normal">std::pair&lt;SDValue, SDValue&gt;</Highlight></CodeLine>
<Link id="l00147" /><CodeLine lineNumber="147"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#ad4a2abb087afa577d8f4239b01acbea0">TargetLowering::makeLibCall</a>(<a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp;DAG, <a href="/docs/api/namespaces/llvm/rtlib/#a50a0bab21f1d14a86a1483ec283e4447">RTLIB::Libcall</a> LC, <a href="/docs/api/structs/llvm/evt">EVT</a> RetVT,</Highlight></CodeLine>
<Link id="l00148" /><CodeLine lineNumber="148"><Highlight kind="normal">                            <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;SDValue&gt;</a> <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>,</Highlight></CodeLine>
<Link id="l00149" /><CodeLine lineNumber="149"><Highlight kind="normal">                            MakeLibCallOptions CallOptions,</Highlight></CodeLine>
<Link id="l00150" /><CodeLine lineNumber="150"><Highlight kind="normal">                            </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdloc">SDLoc</a> &amp;dl,</Highlight></CodeLine>
<Link id="l00151" /><CodeLine lineNumber="151"><Highlight kind="normal">                            <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> InChain)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00152" /><CodeLine lineNumber="152"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!InChain)</Highlight></CodeLine>
<Link id="l00153" /><CodeLine lineNumber="153"><Highlight kind="normal">    InChain = DAG.<a href="/docs/api/classes/llvm/selectiondag/#af0f68c9c0e4a38aebd5773f80dd5b716">getEntryNode</a>();</Highlight></CodeLine>
<Link id="l00154" /><CodeLine lineNumber="154"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00155" /><CodeLine lineNumber="155"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/#ae4ac6bc14db22dbd7b94a3b1bd276796">TargetLowering::ArgListTy</a> Args;</Highlight></CodeLine>
<Link id="l00156" /><CodeLine lineNumber="156"><Highlight kind="normal">  Args.reserve(<a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.size());</Highlight></CodeLine>
<Link id="l00157" /><CodeLine lineNumber="157"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00158" /><CodeLine lineNumber="158"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry">TargetLowering::ArgListEntry</a> Entry;</Highlight></CodeLine>
<Link id="l00159" /><CodeLine lineNumber="159"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i &lt; <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.size(); ++i) &#123;</Highlight></CodeLine>
<Link id="l00160" /><CodeLine lineNumber="160"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> NewOp = <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>&#91;i&#93;;</Highlight></CodeLine>
<Link id="l00161" /><CodeLine lineNumber="161"><Highlight kind="normal">    Entry.Node = NewOp;</Highlight></CodeLine>
<Link id="l00162" /><CodeLine lineNumber="162"><Highlight kind="normal">    Entry.Ty = Entry.Node.getValueType().getTypeForEVT(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>());</Highlight></CodeLine>
<Link id="l00163" /><CodeLine lineNumber="163"><Highlight kind="normal">    Entry.IsSExt =</Highlight></CodeLine>
<Link id="l00164" /><CodeLine lineNumber="164"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#add1aa3983c29592462326ecce44103e6">shouldSignExtendTypeInLibCall</a>(Entry.Ty, CallOptions.IsSigned);</Highlight></CodeLine>
<Link id="l00165" /><CodeLine lineNumber="165"><Highlight kind="normal">    Entry.IsZExt = !Entry.IsSExt;</Highlight></CodeLine>
<Link id="l00166" /><CodeLine lineNumber="166"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00167" /><CodeLine lineNumber="167"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CallOptions.IsSoften &amp;&amp;</Highlight></CodeLine>
<Link id="l00168" /><CodeLine lineNumber="168"><Highlight kind="normal">        !<a href="/docs/api/classes/llvm/targetloweringbase/#a6b71455962e4ef36ac855018496368c4">shouldExtendTypeInLibCall</a>(CallOptions.OpsVTBeforeSoften&#91;i&#93;)) &#123;</Highlight></CodeLine>
<Link id="l00169" /><CodeLine lineNumber="169"><Highlight kind="normal">      Entry.IsSExt = Entry.IsZExt = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00170" /><CodeLine lineNumber="170"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00171" /><CodeLine lineNumber="171"><Highlight kind="normal">    Args.push&#95;back(Entry);</Highlight></CodeLine>
<Link id="l00172" /><CodeLine lineNumber="172"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00173" /><CodeLine lineNumber="173"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00174" /><CodeLine lineNumber="174"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LC == RTLIB::UNKNOWN&#95;LIBCALL)</Highlight></CodeLine>
<Link id="l00175" /><CodeLine lineNumber="175"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7f2a3d4dcfee70225988aec53ff1e173">report&#95;fatal&#95;error</a>(</Highlight><Highlight kind="stringliteral">&quot;Unsupported library call operation!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00176" /><CodeLine lineNumber="176"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Callee = DAG.<a href="/docs/api/classes/llvm/selectiondag/#aa8f1c26a4e070ead6c67b4e9a5d93124">getExternalSymbol</a>(<a href="/docs/api/classes/llvm/targetloweringbase/#ae365cf8f9a6844685be3fd9f12956c33">getLibcallName</a>(LC),</Highlight></CodeLine>
<Link id="l00177" /><CodeLine lineNumber="177"><Highlight kind="normal">                                         <a href="/docs/api/classes/llvm/targetloweringbase/#a8aabf5d0aa80038973255ff2d1e1a9fc">getPointerTy</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>()));</Highlight></CodeLine>
<Link id="l00178" /><CodeLine lineNumber="178"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00179" /><CodeLine lineNumber="179"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;RetTy = RetVT.<a href="/docs/api/structs/llvm/evt/#ab0cfceeb37508e56f9c127e59766a668">getTypeForEVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>());</Highlight></CodeLine>
<Link id="l00180" /><CodeLine lineNumber="180"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/targetlowering/callloweringinfo">TargetLowering::CallLoweringInfo</a> CLI(DAG);</Highlight></CodeLine>
<Link id="l00181" /><CodeLine lineNumber="181"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> signExtend = <a href="/docs/api/classes/llvm/targetloweringbase/#add1aa3983c29592462326ecce44103e6">shouldSignExtendTypeInLibCall</a>(RetTy, CallOptions.IsSigned);</Highlight></CodeLine>
<Link id="l00182" /><CodeLine lineNumber="182"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> zeroExtend = !signExtend;</Highlight></CodeLine>
<Link id="l00183" /><CodeLine lineNumber="183"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00184" /><CodeLine lineNumber="184"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CallOptions.IsSoften &amp;&amp;</Highlight></CodeLine>
<Link id="l00185" /><CodeLine lineNumber="185"><Highlight kind="normal">      !<a href="/docs/api/classes/llvm/targetloweringbase/#a6b71455962e4ef36ac855018496368c4">shouldExtendTypeInLibCall</a>(CallOptions.RetVTBeforeSoften)) &#123;</Highlight></CodeLine>
<Link id="l00186" /><CodeLine lineNumber="186"><Highlight kind="normal">    signExtend = zeroExtend = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00187" /><CodeLine lineNumber="187"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00188" /><CodeLine lineNumber="188"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00189" /><CodeLine lineNumber="189"><Highlight kind="normal">  CLI.setDebugLoc(dl)</Highlight></CodeLine>
<Link id="l00190" /><CodeLine lineNumber="190"><Highlight kind="normal">      .setChain(InChain)</Highlight></CodeLine>
<Link id="l00191" /><CodeLine lineNumber="191"><Highlight kind="normal">      .setLibCallee(<a href="/docs/api/classes/llvm/targetloweringbase/#a165e3da23cb77e612919b366f1978af2">getLibcallCallingConv</a>(LC), RetTy, Callee, std::move(Args))</Highlight></CodeLine>
<Link id="l00192" /><CodeLine lineNumber="192"><Highlight kind="normal">      .setNoReturn(CallOptions.DoesNotReturn)</Highlight></CodeLine>
<Link id="l00193" /><CodeLine lineNumber="193"><Highlight kind="normal">      .setDiscardResult(!CallOptions.IsReturnValueUsed)</Highlight></CodeLine>
<Link id="l00194" /><CodeLine lineNumber="194"><Highlight kind="normal">      .setIsPostTypeLegalization(CallOptions.IsPostTypeLegalization)</Highlight></CodeLine>
<Link id="l00195" /><CodeLine lineNumber="195"><Highlight kind="normal">      .setSExtResult(signExtend)</Highlight></CodeLine>
<Link id="l00196" /><CodeLine lineNumber="196"><Highlight kind="normal">      .setZExtResult(zeroExtend);</Highlight></CodeLine>
<Link id="l00197" /><CodeLine lineNumber="197"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> LowerCallTo(CLI);</Highlight></CodeLine>
<Link id="l00198" /><CodeLine lineNumber="198"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00199" /><CodeLine lineNumber="199"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00200" /><CodeLine lineNumber="200"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a60e48d09cc181b603b17d4e385cc4bb7">TargetLowering::findOptimalMemOpLowering</a>(</Highlight></CodeLine>
<Link id="l00201" /><CodeLine lineNumber="201"><Highlight kind="normal">    std::vector&lt;EVT&gt; &amp;MemOps, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Limit, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> MemOp &amp;<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> DstAS,</Highlight></CodeLine>
<Link id="l00202" /><CodeLine lineNumber="202"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SrcAS, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> AttributeList &amp;FuncAttributes)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00203" /><CodeLine lineNumber="203"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Limit != ~</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal">(0) &amp;&amp; <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.isMemcpyWithFixedDstAlign() &amp;&amp;</Highlight></CodeLine>
<Link id="l00204" /><CodeLine lineNumber="204"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getSrcAlign() &lt; <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getDstAlign())</Highlight></CodeLine>
<Link id="l00205" /><CodeLine lineNumber="205"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00206" /><CodeLine lineNumber="206"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00207" /><CodeLine lineNumber="207"><Highlight kind="normal">  EVT VT = <a href="/docs/api/classes/llvm/targetloweringbase/#a4263600a293f38086f37d30782c2ddf8">getOptimalMemOpType</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, FuncAttributes);</Highlight></CodeLine>
<Link id="l00208" /><CodeLine lineNumber="208"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00209" /><CodeLine lineNumber="209"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT == MVT::Other) &#123;</Highlight></CodeLine>
<Link id="l00210" /><CodeLine lineNumber="210"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Use the largest integer type whose alignment constraints are satisfied.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00211" /><CodeLine lineNumber="211"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We only need to check DstAlign here as SrcAlign is always greater or</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00212" /><CodeLine lineNumber="212"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// equal to DstAlign (or zero).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00213" /><CodeLine lineNumber="213"><Highlight kind="normal">    VT = MVT::LAST&#95;INTEGER&#95;VALUETYPE;</Highlight></CodeLine>
<Link id="l00214" /><CodeLine lineNumber="214"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.isFixedDstAlign())</Highlight></CodeLine>
<Link id="l00215" /><CodeLine lineNumber="215"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getDstAlign() &lt; (VT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() / 8) &amp;&amp;</Highlight></CodeLine>
<Link id="l00216" /><CodeLine lineNumber="216"><Highlight kind="normal">             !<a href="/docs/api/classes/llvm/targetloweringbase/#a63b5343b9da17f8bcc83ec545022f5c7">allowsMisalignedMemoryAccesses</a>(VT, DstAS, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getDstAlign()))</Highlight></CodeLine>
<Link id="l00217" /><CodeLine lineNumber="217"><Highlight kind="normal">        VT = (<a href="/docs/api/classes/llvm/mvt/#a184043a6ab3a9922618b34117003e64d">MVT::SimpleValueType</a>)(VT.<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>().<a href="/docs/api/classes/llvm/mvt/#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a> - 1);</Highlight></CodeLine>
<Link id="l00218" /><CodeLine lineNumber="218"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VT.<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>());</Highlight></CodeLine>
<Link id="l00219" /><CodeLine lineNumber="219"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00220" /><CodeLine lineNumber="220"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Find the largest legal integer type.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00221" /><CodeLine lineNumber="221"><Highlight kind="normal">    MVT LVT = MVT::LAST&#95;INTEGER&#95;VALUETYPE;</Highlight></CodeLine>
<Link id="l00222" /><CodeLine lineNumber="222"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(LVT))</Highlight></CodeLine>
<Link id="l00223" /><CodeLine lineNumber="223"><Highlight kind="normal">      LVT = (<a href="/docs/api/classes/llvm/mvt/#a184043a6ab3a9922618b34117003e64d">MVT::SimpleValueType</a>)(LVT.<a href="/docs/api/classes/llvm/mvt/#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a> - 1);</Highlight></CodeLine>
<Link id="l00224" /><CodeLine lineNumber="224"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LVT.<a href="/docs/api/classes/llvm/mvt/#a437cf7bc875369cbe0ea62f949626f0b">isInteger</a>());</Highlight></CodeLine>
<Link id="l00225" /><CodeLine lineNumber="225"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00226" /><CodeLine lineNumber="226"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the type we&#39;ve chosen is larger than the largest legal integer type</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00227" /><CodeLine lineNumber="227"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// then use that instead.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00228" /><CodeLine lineNumber="228"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#a3ad406477784397709a339d5a2957b43">bitsGT</a>(LVT))</Highlight></CodeLine>
<Link id="l00229" /><CodeLine lineNumber="229"><Highlight kind="normal">      VT = LVT;</Highlight></CodeLine>
<Link id="l00230" /><CodeLine lineNumber="230"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00231" /><CodeLine lineNumber="231"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00232" /><CodeLine lineNumber="232"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumMemOps = 0;</Highlight></CodeLine>
<Link id="l00233" /><CodeLine lineNumber="233"><Highlight kind="normal">  uint64&#95;t <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.size();</Highlight></CodeLine>
<Link id="l00234" /><CodeLine lineNumber="234"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>) &#123;</Highlight></CodeLine>
<Link id="l00235" /><CodeLine lineNumber="235"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> VTSize = VT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() / 8;</Highlight></CodeLine>
<Link id="l00236" /><CodeLine lineNumber="236"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (VTSize &gt; <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>) &#123;</Highlight></CodeLine>
<Link id="l00237" /><CodeLine lineNumber="237"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// For now, only use non-vector load / store&#39;s for the left-over pieces.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00238" /><CodeLine lineNumber="238"><Highlight kind="normal">      EVT NewVT = VT;</Highlight></CodeLine>
<Link id="l00239" /><CodeLine lineNumber="239"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NewVTSize;</Highlight></CodeLine>
<Link id="l00240" /><CodeLine lineNumber="240"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00241" /><CodeLine lineNumber="241"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Found = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00242" /><CodeLine lineNumber="242"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() || VT.<a href="/docs/api/structs/llvm/evt/#a3cb888a2ce8e95e0d9769687a5e2f7d8">isFloatingPoint</a>()) &#123;</Highlight></CodeLine>
<Link id="l00243" /><CodeLine lineNumber="243"><Highlight kind="normal">        NewVT = (VT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() &gt; 64) ? MVT::i64 : MVT::i32;</Highlight></CodeLine>
<Link id="l00244" /><CodeLine lineNumber="244"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(ISD::STORE, NewVT) &amp;&amp;</Highlight></CodeLine>
<Link id="l00245" /><CodeLine lineNumber="245"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/targetloweringbase/#a2e1a572dcdde338698d9f94f0039f09f">isSafeMemOpType</a>(NewVT.<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>()))</Highlight></CodeLine>
<Link id="l00246" /><CodeLine lineNumber="246"><Highlight kind="normal">          Found = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00247" /><CodeLine lineNumber="247"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NewVT == MVT::i64 &amp;&amp;</Highlight></CodeLine>
<Link id="l00248" /><CodeLine lineNumber="248"><Highlight kind="normal">                 <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(ISD::STORE, MVT::f64) &amp;&amp;</Highlight></CodeLine>
<Link id="l00249" /><CodeLine lineNumber="249"><Highlight kind="normal">                 <a href="/docs/api/classes/llvm/targetloweringbase/#a2e1a572dcdde338698d9f94f0039f09f">isSafeMemOpType</a>(MVT::f64)) &#123;</Highlight></CodeLine>
<Link id="l00250" /><CodeLine lineNumber="250"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// i64 is usually not legal on 32-bit targets, but f64 may be.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00251" /><CodeLine lineNumber="251"><Highlight kind="normal">          NewVT = MVT::f64;</Highlight></CodeLine>
<Link id="l00252" /><CodeLine lineNumber="252"><Highlight kind="normal">          Found = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00253" /><CodeLine lineNumber="253"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l00254" /><CodeLine lineNumber="254"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00255" /><CodeLine lineNumber="255"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00256" /><CodeLine lineNumber="256"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Found) &#123;</Highlight></CodeLine>
<Link id="l00257" /><CodeLine lineNumber="257"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">do</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l00258" /><CodeLine lineNumber="258"><Highlight kind="normal">          NewVT = (<a href="/docs/api/classes/llvm/mvt/#a184043a6ab3a9922618b34117003e64d">MVT::SimpleValueType</a>)(NewVT.<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>().<a href="/docs/api/classes/llvm/mvt/#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a> - 1);</Highlight></CodeLine>
<Link id="l00259" /><CodeLine lineNumber="259"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NewVT == MVT::i8)</Highlight></CodeLine>
<Link id="l00260" /><CodeLine lineNumber="260"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00261" /><CodeLine lineNumber="261"><Highlight kind="normal">        &#125; </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#a2e1a572dcdde338698d9f94f0039f09f">isSafeMemOpType</a>(NewVT.<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>()));</Highlight></CodeLine>
<Link id="l00262" /><CodeLine lineNumber="262"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00263" /><CodeLine lineNumber="263"><Highlight kind="normal">      NewVTSize = NewVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() / 8;</Highlight></CodeLine>
<Link id="l00264" /><CodeLine lineNumber="264"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00265" /><CodeLine lineNumber="265"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If the new VT cannot cover all of the remaining bits, then consider</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00266" /><CodeLine lineNumber="266"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// issuing a (or a pair of) unaligned and overlapping load / store.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00267" /><CodeLine lineNumber="267"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cabc8e2ee40a84687a9e12fd08784b87ba">Fast</a>;</Highlight></CodeLine>
<Link id="l00268" /><CodeLine lineNumber="268"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumMemOps &amp;&amp; <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.allowOverlap() &amp;&amp; NewVTSize &lt; <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l00269" /><CodeLine lineNumber="269"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/targetloweringbase/#a63b5343b9da17f8bcc83ec545022f5c7">allowsMisalignedMemoryAccesses</a>(</Highlight></CodeLine>
<Link id="l00270" /><CodeLine lineNumber="270"><Highlight kind="normal">              VT, DstAS, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.isFixedDstAlign() ? <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getDstAlign() : <a href="/docs/api/namespaces/llvm/amdgpu/hsamd/kernel/arg/key/#a6b334a5f83504ebc99cc59f4f333ff98">Align</a>(1),</Highlight></CodeLine>
<Link id="l00271" /><CodeLine lineNumber="271"><Highlight kind="normal">              <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2ddac2989bebe46c9b9fcb7a92e5ade8dde6">MachineMemOperand::MONone</a>, &amp;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cabc8e2ee40a84687a9e12fd08784b87ba">Fast</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l00272" /><CodeLine lineNumber="272"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cabc8e2ee40a84687a9e12fd08784b87ba">Fast</a>)</Highlight></CodeLine>
<Link id="l00273" /><CodeLine lineNumber="273"><Highlight kind="normal">        VTSize = <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>;</Highlight></CodeLine>
<Link id="l00274" /><CodeLine lineNumber="274"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l00275" /><CodeLine lineNumber="275"><Highlight kind="normal">        VT = NewVT;</Highlight></CodeLine>
<Link id="l00276" /><CodeLine lineNumber="276"><Highlight kind="normal">        VTSize = NewVTSize;</Highlight></CodeLine>
<Link id="l00277" /><CodeLine lineNumber="277"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00278" /><CodeLine lineNumber="278"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00279" /><CodeLine lineNumber="279"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00280" /><CodeLine lineNumber="280"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (++NumMemOps &gt; Limit)</Highlight></CodeLine>
<Link id="l00281" /><CodeLine lineNumber="281"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00282" /><CodeLine lineNumber="282"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00283" /><CodeLine lineNumber="283"><Highlight kind="normal">    MemOps.push&#95;back(VT);</Highlight></CodeLine>
<Link id="l00284" /><CodeLine lineNumber="284"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> -= VTSize;</Highlight></CodeLine>
<Link id="l00285" /><CodeLine lineNumber="285"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00286" /><CodeLine lineNumber="286"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00287" /><CodeLine lineNumber="287"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00288" /><CodeLine lineNumber="288"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00289" /><CodeLine lineNumber="289"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00290" /><CodeLine lineNumber="290"><Highlight kind="comment">/// Soften the operands of a comparison. This code is shared among BR&#95;CC,</Highlight></CodeLine>
<Link id="l00291" /><CodeLine lineNumber="291"><Highlight kind="comment">/// SELECT&#95;CC, and SETCC handlers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00292" /><CodeLine lineNumber="292"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a62f2d0a1eebd818fb037a64c40cf0521">TargetLowering::softenSetCCOperands</a>(SelectionDAG &amp;DAG, EVT VT,</Highlight></CodeLine>
<Link id="l00293" /><CodeLine lineNumber="293"><Highlight kind="normal">                                         <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;NewLHS, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;NewRHS,</Highlight></CodeLine>
<Link id="l00294" /><CodeLine lineNumber="294"><Highlight kind="normal">                                         <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> &amp;CCCode,</Highlight></CodeLine>
<Link id="l00295" /><CodeLine lineNumber="295"><Highlight kind="normal">                                         </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;dl, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> OldLHS,</Highlight></CodeLine>
<Link id="l00296" /><CodeLine lineNumber="296"><Highlight kind="normal">                                         </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> OldRHS)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00297" /><CodeLine lineNumber="297"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a>;</Highlight></CodeLine>
<Link id="l00298" /><CodeLine lineNumber="298"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> softenSetCCOperands(DAG, VT, NewLHS, NewRHS, CCCode, dl, OldLHS,</Highlight></CodeLine>
<Link id="l00299" /><CodeLine lineNumber="299"><Highlight kind="normal">                             OldRHS, Chain);</Highlight></CodeLine>
<Link id="l00300" /><CodeLine lineNumber="300"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00301" /><CodeLine lineNumber="301"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00302" /><CodeLine lineNumber="302"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a62f2d0a1eebd818fb037a64c40cf0521">TargetLowering::softenSetCCOperands</a>(SelectionDAG &amp;DAG, EVT VT,</Highlight></CodeLine>
<Link id="l00303" /><CodeLine lineNumber="303"><Highlight kind="normal">                                         <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;NewLHS, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;NewRHS,</Highlight></CodeLine>
<Link id="l00304" /><CodeLine lineNumber="304"><Highlight kind="normal">                                         <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> &amp;CCCode,</Highlight></CodeLine>
<Link id="l00305" /><CodeLine lineNumber="305"><Highlight kind="normal">                                         </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;dl, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> OldLHS,</Highlight></CodeLine>
<Link id="l00306" /><CodeLine lineNumber="306"><Highlight kind="normal">                                         </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> OldRHS,</Highlight></CodeLine>
<Link id="l00307" /><CodeLine lineNumber="307"><Highlight kind="normal">                                         <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;Chain,</Highlight></CodeLine>
<Link id="l00308" /><CodeLine lineNumber="308"><Highlight kind="normal">                                         </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsSignaling)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00309" /><CodeLine lineNumber="309"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: Currently we cannot really respect all IEEE predicates due to libgcc</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00310" /><CodeLine lineNumber="310"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// not supporting it. We can update this code when libgcc provides such</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00311" /><CodeLine lineNumber="311"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// functions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00312" /><CodeLine lineNumber="312"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00313" /><CodeLine lineNumber="313"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((VT == MVT::f32 || VT == MVT::f64 || VT == MVT::f128 || VT == MVT::ppcf128)</Highlight></CodeLine>
<Link id="l00314" /><CodeLine lineNumber="314"><Highlight kind="normal">         &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Unsupported setcc type!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00315" /><CodeLine lineNumber="315"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00316" /><CodeLine lineNumber="316"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Expand into one or more soft-fp libcall(s).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00317" /><CodeLine lineNumber="317"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/rtlib/#a50a0bab21f1d14a86a1483ec283e4447">RTLIB::Libcall</a> LC1 = RTLIB::UNKNOWN&#95;LIBCALL, LC2 = RTLIB::UNKNOWN&#95;LIBCALL;</Highlight></CodeLine>
<Link id="l00318" /><CodeLine lineNumber="318"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> ShouldInvertCC = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00319" /><CodeLine lineNumber="319"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (CCCode) &#123;</Highlight></CodeLine>
<Link id="l00320" /><CodeLine lineNumber="320"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>:</Highlight></CodeLine>
<Link id="l00321" /><CodeLine lineNumber="321"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a08c31033acfb9d6f0bc4a8a82cc26862">ISD::SETOEQ</a>:</Highlight></CodeLine>
<Link id="l00322" /><CodeLine lineNumber="322"><Highlight kind="normal">    LC1 = (VT == MVT::f32) ? RTLIB::OEQ&#95;F32 :</Highlight></CodeLine>
<Link id="l00323" /><CodeLine lineNumber="323"><Highlight kind="normal">          (VT == MVT::f64) ? RTLIB::OEQ&#95;F64 :</Highlight></CodeLine>
<Link id="l00324" /><CodeLine lineNumber="324"><Highlight kind="normal">          (VT == MVT::f128) ? RTLIB::OEQ&#95;F128 : RTLIB::OEQ&#95;PPCF128;</Highlight></CodeLine>
<Link id="l00325" /><CodeLine lineNumber="325"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00326" /><CodeLine lineNumber="326"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>:</Highlight></CodeLine>
<Link id="l00327" /><CodeLine lineNumber="327"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a0d1546187d4d526fcbdd43183689075e">ISD::SETUNE</a>:</Highlight></CodeLine>
<Link id="l00328" /><CodeLine lineNumber="328"><Highlight kind="normal">    LC1 = (VT == MVT::f32) ? RTLIB::UNE&#95;F32 :</Highlight></CodeLine>
<Link id="l00329" /><CodeLine lineNumber="329"><Highlight kind="normal">          (VT == MVT::f64) ? RTLIB::UNE&#95;F64 :</Highlight></CodeLine>
<Link id="l00330" /><CodeLine lineNumber="330"><Highlight kind="normal">          (VT == MVT::f128) ? RTLIB::UNE&#95;F128 : RTLIB::UNE&#95;PPCF128;</Highlight></CodeLine>
<Link id="l00331" /><CodeLine lineNumber="331"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00332" /><CodeLine lineNumber="332"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a7f47862de23f7210f88ccf98ae1efbe4">ISD::SETGE</a>:</Highlight></CodeLine>
<Link id="l00333" /><CodeLine lineNumber="333"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac7bb30d4918c1ee9dd208083154e109f">ISD::SETOGE</a>:</Highlight></CodeLine>
<Link id="l00334" /><CodeLine lineNumber="334"><Highlight kind="normal">    LC1 = (VT == MVT::f32) ? RTLIB::OGE&#95;F32 :</Highlight></CodeLine>
<Link id="l00335" /><CodeLine lineNumber="335"><Highlight kind="normal">          (VT == MVT::f64) ? RTLIB::OGE&#95;F64 :</Highlight></CodeLine>
<Link id="l00336" /><CodeLine lineNumber="336"><Highlight kind="normal">          (VT == MVT::f128) ? RTLIB::OGE&#95;F128 : RTLIB::OGE&#95;PPCF128;</Highlight></CodeLine>
<Link id="l00337" /><CodeLine lineNumber="337"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00338" /><CodeLine lineNumber="338"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>:</Highlight></CodeLine>
<Link id="l00339" /><CodeLine lineNumber="339"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a20257a4d3833cf88afd42caeaed70dde">ISD::SETOLT</a>:</Highlight></CodeLine>
<Link id="l00340" /><CodeLine lineNumber="340"><Highlight kind="normal">    LC1 = (VT == MVT::f32) ? RTLIB::OLT&#95;F32 :</Highlight></CodeLine>
<Link id="l00341" /><CodeLine lineNumber="341"><Highlight kind="normal">          (VT == MVT::f64) ? RTLIB::OLT&#95;F64 :</Highlight></CodeLine>
<Link id="l00342" /><CodeLine lineNumber="342"><Highlight kind="normal">          (VT == MVT::f128) ? RTLIB::OLT&#95;F128 : RTLIB::OLT&#95;PPCF128;</Highlight></CodeLine>
<Link id="l00343" /><CodeLine lineNumber="343"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00344" /><CodeLine lineNumber="344"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ab49f81c2ecbbff3d0fbe55dd46353774">ISD::SETLE</a>:</Highlight></CodeLine>
<Link id="l00345" /><CodeLine lineNumber="345"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a1febf3bac2f3d7d98ec19f1ff5c385ea">ISD::SETOLE</a>:</Highlight></CodeLine>
<Link id="l00346" /><CodeLine lineNumber="346"><Highlight kind="normal">    LC1 = (VT == MVT::f32) ? RTLIB::OLE&#95;F32 :</Highlight></CodeLine>
<Link id="l00347" /><CodeLine lineNumber="347"><Highlight kind="normal">          (VT == MVT::f64) ? RTLIB::OLE&#95;F64 :</Highlight></CodeLine>
<Link id="l00348" /><CodeLine lineNumber="348"><Highlight kind="normal">          (VT == MVT::f128) ? RTLIB::OLE&#95;F128 : RTLIB::OLE&#95;PPCF128;</Highlight></CodeLine>
<Link id="l00349" /><CodeLine lineNumber="349"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00350" /><CodeLine lineNumber="350"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a>:</Highlight></CodeLine>
<Link id="l00351" /><CodeLine lineNumber="351"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a31d1e24e08b255d6aa290d67d16ce2c9">ISD::SETOGT</a>:</Highlight></CodeLine>
<Link id="l00352" /><CodeLine lineNumber="352"><Highlight kind="normal">    LC1 = (VT == MVT::f32) ? RTLIB::OGT&#95;F32 :</Highlight></CodeLine>
<Link id="l00353" /><CodeLine lineNumber="353"><Highlight kind="normal">          (VT == MVT::f64) ? RTLIB::OGT&#95;F64 :</Highlight></CodeLine>
<Link id="l00354" /><CodeLine lineNumber="354"><Highlight kind="normal">          (VT == MVT::f128) ? RTLIB::OGT&#95;F128 : RTLIB::OGT&#95;PPCF128;</Highlight></CodeLine>
<Link id="l00355" /><CodeLine lineNumber="355"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00356" /><CodeLine lineNumber="356"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a71f916390487bb109d9968c72553eaf4">ISD::SETO</a>:</Highlight></CodeLine>
<Link id="l00357" /><CodeLine lineNumber="357"><Highlight kind="normal">    ShouldInvertCC = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00358" /><CodeLine lineNumber="358"><Highlight kind="normal">    &#91;&#91;fallthrough&#93;&#93;;</Highlight></CodeLine>
<Link id="l00359" /><CodeLine lineNumber="359"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a48a334bbe606d5e82c9cd84eaa127b50">ISD::SETUO</a>:</Highlight></CodeLine>
<Link id="l00360" /><CodeLine lineNumber="360"><Highlight kind="normal">    LC1 = (VT == MVT::f32) ? RTLIB::UO&#95;F32 :</Highlight></CodeLine>
<Link id="l00361" /><CodeLine lineNumber="361"><Highlight kind="normal">          (VT == MVT::f64) ? RTLIB::UO&#95;F64 :</Highlight></CodeLine>
<Link id="l00362" /><CodeLine lineNumber="362"><Highlight kind="normal">          (VT == MVT::f128) ? RTLIB::UO&#95;F128 : RTLIB::UO&#95;PPCF128;</Highlight></CodeLine>
<Link id="l00363" /><CodeLine lineNumber="363"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00364" /><CodeLine lineNumber="364"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a57c68bf7ef20bd558854a24d5b0c1e72">ISD::SETONE</a>:</Highlight></CodeLine>
<Link id="l00365" /><CodeLine lineNumber="365"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// SETONE = O &amp;&amp; UNE</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00366" /><CodeLine lineNumber="366"><Highlight kind="normal">    ShouldInvertCC = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00367" /><CodeLine lineNumber="367"><Highlight kind="normal">    &#91;&#91;fallthrough&#93;&#93;;</Highlight></CodeLine>
<Link id="l00368" /><CodeLine lineNumber="368"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a0deb50cd2f3f8e4a94eef4cdf769b848">ISD::SETUEQ</a>:</Highlight></CodeLine>
<Link id="l00369" /><CodeLine lineNumber="369"><Highlight kind="normal">    LC1 = (VT == MVT::f32) ? RTLIB::UO&#95;F32 :</Highlight></CodeLine>
<Link id="l00370" /><CodeLine lineNumber="370"><Highlight kind="normal">          (VT == MVT::f64) ? RTLIB::UO&#95;F64 :</Highlight></CodeLine>
<Link id="l00371" /><CodeLine lineNumber="371"><Highlight kind="normal">          (VT == MVT::f128) ? RTLIB::UO&#95;F128 : RTLIB::UO&#95;PPCF128;</Highlight></CodeLine>
<Link id="l00372" /><CodeLine lineNumber="372"><Highlight kind="normal">    LC2 = (VT == MVT::f32) ? RTLIB::OEQ&#95;F32 :</Highlight></CodeLine>
<Link id="l00373" /><CodeLine lineNumber="373"><Highlight kind="normal">          (VT == MVT::f64) ? RTLIB::OEQ&#95;F64 :</Highlight></CodeLine>
<Link id="l00374" /><CodeLine lineNumber="374"><Highlight kind="normal">          (VT == MVT::f128) ? RTLIB::OEQ&#95;F128 : RTLIB::OEQ&#95;PPCF128;</Highlight></CodeLine>
<Link id="l00375" /><CodeLine lineNumber="375"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00376" /><CodeLine lineNumber="376"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l00377" /><CodeLine lineNumber="377"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Invert CC for unordered comparisons</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00378" /><CodeLine lineNumber="378"><Highlight kind="normal">    ShouldInvertCC = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00379" /><CodeLine lineNumber="379"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (CCCode) &#123;</Highlight></CodeLine>
<Link id="l00380" /><CodeLine lineNumber="380"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>:</Highlight></CodeLine>
<Link id="l00381" /><CodeLine lineNumber="381"><Highlight kind="normal">      LC1 = (VT == MVT::f32) ? RTLIB::OGE&#95;F32 :</Highlight></CodeLine>
<Link id="l00382" /><CodeLine lineNumber="382"><Highlight kind="normal">            (VT == MVT::f64) ? RTLIB::OGE&#95;F64 :</Highlight></CodeLine>
<Link id="l00383" /><CodeLine lineNumber="383"><Highlight kind="normal">            (VT == MVT::f128) ? RTLIB::OGE&#95;F128 : RTLIB::OGE&#95;PPCF128;</Highlight></CodeLine>
<Link id="l00384" /><CodeLine lineNumber="384"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00385" /><CodeLine lineNumber="385"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a>:</Highlight></CodeLine>
<Link id="l00386" /><CodeLine lineNumber="386"><Highlight kind="normal">      LC1 = (VT == MVT::f32) ? RTLIB::OGT&#95;F32 :</Highlight></CodeLine>
<Link id="l00387" /><CodeLine lineNumber="387"><Highlight kind="normal">            (VT == MVT::f64) ? RTLIB::OGT&#95;F64 :</Highlight></CodeLine>
<Link id="l00388" /><CodeLine lineNumber="388"><Highlight kind="normal">            (VT == MVT::f128) ? RTLIB::OGT&#95;F128 : RTLIB::OGT&#95;PPCF128;</Highlight></CodeLine>
<Link id="l00389" /><CodeLine lineNumber="389"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00390" /><CodeLine lineNumber="390"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a>:</Highlight></CodeLine>
<Link id="l00391" /><CodeLine lineNumber="391"><Highlight kind="normal">      LC1 = (VT == MVT::f32) ? RTLIB::OLE&#95;F32 :</Highlight></CodeLine>
<Link id="l00392" /><CodeLine lineNumber="392"><Highlight kind="normal">            (VT == MVT::f64) ? RTLIB::OLE&#95;F64 :</Highlight></CodeLine>
<Link id="l00393" /><CodeLine lineNumber="393"><Highlight kind="normal">            (VT == MVT::f128) ? RTLIB::OLE&#95;F128 : RTLIB::OLE&#95;PPCF128;</Highlight></CodeLine>
<Link id="l00394" /><CodeLine lineNumber="394"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00395" /><CodeLine lineNumber="395"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">ISD::SETUGE</a>:</Highlight></CodeLine>
<Link id="l00396" /><CodeLine lineNumber="396"><Highlight kind="normal">      LC1 = (VT == MVT::f32) ? RTLIB::OLT&#95;F32 :</Highlight></CodeLine>
<Link id="l00397" /><CodeLine lineNumber="397"><Highlight kind="normal">            (VT == MVT::f64) ? RTLIB::OLT&#95;F64 :</Highlight></CodeLine>
<Link id="l00398" /><CodeLine lineNumber="398"><Highlight kind="normal">            (VT == MVT::f128) ? RTLIB::OLT&#95;F128 : RTLIB::OLT&#95;PPCF128;</Highlight></CodeLine>
<Link id="l00399" /><CodeLine lineNumber="399"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00400" /><CodeLine lineNumber="400"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">: <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;Do not know how to soften this setcc!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00401" /><CodeLine lineNumber="401"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00402" /><CodeLine lineNumber="402"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00403" /><CodeLine lineNumber="403"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00404" /><CodeLine lineNumber="404"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Use the target specific return value for comparison lib calls.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00405" /><CodeLine lineNumber="405"><Highlight kind="normal">  EVT RetVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a525f2430c0744940e57aa0586fbfba8d">getCmpLibcallReturnType</a>();</Highlight></CodeLine>
<Link id="l00406" /><CodeLine lineNumber="406"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>&#91;2&#93; = &#123;NewLHS, NewRHS&#125;;</Highlight></CodeLine>
<Link id="l00407" /><CodeLine lineNumber="407"><Highlight kind="normal">  TargetLowering::MakeLibCallOptions CallOptions;</Highlight></CodeLine>
<Link id="l00408" /><CodeLine lineNumber="408"><Highlight kind="normal">  EVT OpsVT&#91;2&#93; = &#123; OldLHS.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>(),</Highlight></CodeLine>
<Link id="l00409" /><CodeLine lineNumber="409"><Highlight kind="normal">                   OldRHS.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>() &#125;;</Highlight></CodeLine>
<Link id="l00410" /><CodeLine lineNumber="410"><Highlight kind="normal">  CallOptions.<a href="/docs/api/structs/llvm/targetlowering/makelibcalloptions/#a82aba70f7fd14f1d0c6d83caa1e5061e">setTypeListBeforeSoften</a>(OpsVT, RetVT, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00411" /><CodeLine lineNumber="411"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a> = makeLibCall(DAG, LC1, RetVT, <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>, CallOptions, dl, Chain);</Highlight></CodeLine>
<Link id="l00412" /><CodeLine lineNumber="412"><Highlight kind="normal">  NewLHS = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>.first;</Highlight></CodeLine>
<Link id="l00413" /><CodeLine lineNumber="413"><Highlight kind="normal">  NewRHS = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, RetVT);</Highlight></CodeLine>
<Link id="l00414" /><CodeLine lineNumber="414"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00415" /><CodeLine lineNumber="415"><Highlight kind="normal">  CCCode = <a href="/docs/api/classes/llvm/targetloweringbase/#ad85fc60334b97452e632a353e5a4b814">getCmpLibcallCC</a>(LC1);</Highlight></CodeLine>
<Link id="l00416" /><CodeLine lineNumber="416"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ShouldInvertCC) &#123;</Highlight></CodeLine>
<Link id="l00417" /><CodeLine lineNumber="417"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RetVT.<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>());</Highlight></CodeLine>
<Link id="l00418" /><CodeLine lineNumber="418"><Highlight kind="normal">    CCCode = <a href="/docs/api/namespaces/llvm/isd/#a5fbc38db5c4f3ef878ab19245d3f381d">getSetCCInverse</a>(CCCode, RetVT);</Highlight></CodeLine>
<Link id="l00419" /><CodeLine lineNumber="419"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00420" /><CodeLine lineNumber="420"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00421" /><CodeLine lineNumber="421"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LC2 == RTLIB::UNKNOWN&#95;LIBCALL) &#123;</Highlight></CodeLine>
<Link id="l00422" /><CodeLine lineNumber="422"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Update Chain.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00423" /><CodeLine lineNumber="423"><Highlight kind="normal">    <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>.second;</Highlight></CodeLine>
<Link id="l00424" /><CodeLine lineNumber="424"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l00425" /><CodeLine lineNumber="425"><Highlight kind="normal">    EVT SetCCVT =</Highlight></CodeLine>
<Link id="l00426" /><CodeLine lineNumber="426"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), RetVT);</Highlight></CodeLine>
<Link id="l00427" /><CodeLine lineNumber="427"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Tmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCVT, NewLHS, NewRHS, CCCode);</Highlight></CodeLine>
<Link id="l00428" /><CodeLine lineNumber="428"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> Call2 = makeLibCall(DAG, LC2, RetVT, <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>, CallOptions, dl, Chain);</Highlight></CodeLine>
<Link id="l00429" /><CodeLine lineNumber="429"><Highlight kind="normal">    CCCode = <a href="/docs/api/classes/llvm/targetloweringbase/#ad85fc60334b97452e632a353e5a4b814">getCmpLibcallCC</a>(LC2);</Highlight></CodeLine>
<Link id="l00430" /><CodeLine lineNumber="430"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ShouldInvertCC)</Highlight></CodeLine>
<Link id="l00431" /><CodeLine lineNumber="431"><Highlight kind="normal">      CCCode = <a href="/docs/api/namespaces/llvm/isd/#a5fbc38db5c4f3ef878ab19245d3f381d">getSetCCInverse</a>(CCCode, RetVT);</Highlight></CodeLine>
<Link id="l00432" /><CodeLine lineNumber="432"><Highlight kind="normal">    NewLHS = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCVT, Call2.first, NewRHS, CCCode);</Highlight></CodeLine>
<Link id="l00433" /><CodeLine lineNumber="433"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Chain)</Highlight></CodeLine>
<Link id="l00434" /><CodeLine lineNumber="434"><Highlight kind="normal">      <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad469508535ce2082a1ab1f0e429187b8">ISD::TokenFactor</a>, dl, MVT::Other, <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>.second,</Highlight></CodeLine>
<Link id="l00435" /><CodeLine lineNumber="435"><Highlight kind="normal">                          Call2.second);</Highlight></CodeLine>
<Link id="l00436" /><CodeLine lineNumber="436"><Highlight kind="normal">    NewLHS = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ShouldInvertCC ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl,</Highlight></CodeLine>
<Link id="l00437" /><CodeLine lineNumber="437"><Highlight kind="normal">                         Tmp.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>(), Tmp, NewLHS);</Highlight></CodeLine>
<Link id="l00438" /><CodeLine lineNumber="438"><Highlight kind="normal">    NewRHS = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l00439" /><CodeLine lineNumber="439"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00440" /><CodeLine lineNumber="440"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00441" /><CodeLine lineNumber="441"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00442" /><CodeLine lineNumber="442"><Highlight kind="comment">/// Return the entry encoding for a jump table in the current function. The</Highlight></CodeLine>
<Link id="l00443" /><CodeLine lineNumber="443"><Highlight kind="comment">/// returned value is a member of the MachineJumpTableInfo::JTEntryKind enum.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00444" /><CodeLine lineNumber="444"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#aded686370215fda472fa7b38ccbba458">TargetLowering::getJumpTableEncoding</a>()</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00445" /><CodeLine lineNumber="445"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// In non-pic modes, just use the address of a block.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00446" /><CodeLine lineNumber="446"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!isPositionIndependent())</Highlight></CodeLine>
<Link id="l00447" /><CodeLine lineNumber="447"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machinejumptableinfo/#aaa21facdbb167f7c33d21907b8e5b9d3ab0c4687afc1a6858d37711a814f8f5b3">MachineJumpTableInfo::EK&#95;BlockAddress</a>;</Highlight></CodeLine>
<Link id="l00448" /><CodeLine lineNumber="448"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00449" /><CodeLine lineNumber="449"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// In PIC mode, if the target supports a GPRel32 directive, use it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00450" /><CodeLine lineNumber="450"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a30aa4a06549273240892d58449b8d268">getTargetMachine</a>().getMCAsmInfo()-&gt;getGPRel32Directive() != </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">)</Highlight></CodeLine>
<Link id="l00451" /><CodeLine lineNumber="451"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machinejumptableinfo/#aaa21facdbb167f7c33d21907b8e5b9d3a0145ef8496d090993849ec0d7ca947f7">MachineJumpTableInfo::EK&#95;GPRel32BlockAddress</a>;</Highlight></CodeLine>
<Link id="l00452" /><CodeLine lineNumber="452"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00453" /><CodeLine lineNumber="453"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Otherwise, use a label difference.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00454" /><CodeLine lineNumber="454"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machinejumptableinfo/#aaa21facdbb167f7c33d21907b8e5b9d3a6e05991949952d4e85600b0868dcd803">MachineJumpTableInfo::EK&#95;LabelDifference32</a>;</Highlight></CodeLine>
<Link id="l00455" /><CodeLine lineNumber="455"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00456" /><CodeLine lineNumber="456"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00457" /><CodeLine lineNumber="457"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#ab4681990679f127bf757790e59678f80">TargetLowering::getPICJumpTableRelocBase</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Table,</Highlight></CodeLine>
<Link id="l00458" /><CodeLine lineNumber="458"><Highlight kind="normal">                                                 SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00459" /><CodeLine lineNumber="459"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If our PIC model is GP relative, use the global offset table as the base.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00460" /><CodeLine lineNumber="460"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> JTEncoding = getJumpTableEncoding();</Highlight></CodeLine>
<Link id="l00461" /><CodeLine lineNumber="461"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00462" /><CodeLine lineNumber="462"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((JTEncoding == <a href="/docs/api/classes/llvm/machinejumptableinfo/#aaa21facdbb167f7c33d21907b8e5b9d3aba174e822c60ce5af99bdb57ab3ec640">MachineJumpTableInfo::EK&#95;GPRel64BlockAddress</a>) ||</Highlight></CodeLine>
<Link id="l00463" /><CodeLine lineNumber="463"><Highlight kind="normal">      (JTEncoding == <a href="/docs/api/classes/llvm/machinejumptableinfo/#aaa21facdbb167f7c33d21907b8e5b9d3a0145ef8496d090993849ec0d7ca947f7">MachineJumpTableInfo::EK&#95;GPRel32BlockAddress</a>))</Highlight></CodeLine>
<Link id="l00464" /><CodeLine lineNumber="464"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a3e014fd645491da79c3ccabd345c2709">getGLOBAL&#95;OFFSET&#95;TABLE</a>(<a href="/docs/api/classes/llvm/targetloweringbase/#a8aabf5d0aa80038973255ff2d1e1a9fc">getPointerTy</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>()));</Highlight></CodeLine>
<Link id="l00465" /><CodeLine lineNumber="465"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00466" /><CodeLine lineNumber="466"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Table;</Highlight></CodeLine>
<Link id="l00467" /><CodeLine lineNumber="467"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00468" /><CodeLine lineNumber="468"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00469" /><CodeLine lineNumber="469"><Highlight kind="comment">/// This returns the relocation base for the given PIC jumptable, the same as</Highlight></CodeLine>
<Link id="l00470" /><CodeLine lineNumber="470"><Highlight kind="comment">/// getPICJumpTableRelocBase, but as an MCExpr.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00471" /><CodeLine lineNumber="471"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> MCExpr &#42;</Highlight></CodeLine>
<Link id="l00472" /><CodeLine lineNumber="472"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#a993d38cd5b37a6ee0c9c3cb24ada5392">TargetLowering::getPICJumpTableRelocBaseExpr</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> MachineFunction &#42;MF,</Highlight></CodeLine>
<Link id="l00473" /><CodeLine lineNumber="473"><Highlight kind="normal">                                             </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> JTI,MCContext &amp;Ctx)</Highlight><Highlight kind="keyword"> const</Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00474" /><CodeLine lineNumber="474"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// The normal PIC reloc base is the label at the start of the jump table.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00475" /><CodeLine lineNumber="475"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/mcsymbolrefexpr/#a9914b597552aa4b4bcbb8acaa04d632a">MCSymbolRefExpr::create</a>(MF-&gt;<a href="/docs/api/classes/llvm/machinefunction/#a6e9c232101c30e91126209154a047a63">getJTISymbol</a>(JTI, Ctx), Ctx);</Highlight></CodeLine>
<Link id="l00476" /><CodeLine lineNumber="476"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00477" /><CodeLine lineNumber="477"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00478" /><CodeLine lineNumber="478"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#ad19715a9c62a6c91102ac12bbe18b63a">TargetLowering::expandIndirectJTBranch</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;dl, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a>,</Highlight></CodeLine>
<Link id="l00479" /><CodeLine lineNumber="479"><Highlight kind="normal">                                               <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Addr, </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> JTI,</Highlight></CodeLine>
<Link id="l00480" /><CodeLine lineNumber="480"><Highlight kind="normal">                                               SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00481" /><CodeLine lineNumber="481"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = <a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a>;</Highlight></CodeLine>
<Link id="l00482" /><CodeLine lineNumber="482"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Jump table debug info is only needed if CodeView is enabled.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00483" /><CodeLine lineNumber="483"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DAG.<a href="/docs/api/classes/llvm/selectiondag/#aa99670b16fe6d370e306896cd91b6fa6">getTarget</a>().<a href="/docs/api/classes/llvm/targetmachine/#a33fe94054a904130a7c774f78423c8b7">getTargetTriple</a>().<a href="/docs/api/classes/llvm/triple/#a6300d761fd69580d711fad99b934950a">isOSBinFormatCOFF</a>()) &#123;</Highlight></CodeLine>
<Link id="l00484" /><CodeLine lineNumber="484"><Highlight kind="normal">    <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2bc00c7622192e2c657119cf002b0f1d">getJumpTableDebugInfo</a>(JTI, Chain, dl);</Highlight></CodeLine>
<Link id="l00485" /><CodeLine lineNumber="485"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00486" /><CodeLine lineNumber="486"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::BRIND, dl, MVT::Other, Chain, Addr);</Highlight></CodeLine>
<Link id="l00487" /><CodeLine lineNumber="487"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00488" /><CodeLine lineNumber="488"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00489" /><CodeLine lineNumber="489"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00490" /><CodeLine lineNumber="490"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#a74dabfbe18cbb61e4a1935eb1bf4942b">TargetLowering::isOffsetFoldingLegal</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> GlobalAddressSDNode &#42;GA)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00491" /><CodeLine lineNumber="491"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> TargetMachine &amp;TM = <a href="/docs/api/classes/llvm/targetloweringbase/#a30aa4a06549273240892d58449b8d268">getTargetMachine</a>();</Highlight></CodeLine>
<Link id="l00492" /><CodeLine lineNumber="492"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> GlobalValue &#42;GV = GA-&gt;<a href="/docs/api/classes/llvm/globaladdresssdnode/#aac749351927cd1732994a39d40fdd4f2">getGlobal</a>();</Highlight></CodeLine>
<Link id="l00493" /><CodeLine lineNumber="493"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00494" /><CodeLine lineNumber="494"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the address is not even local to this DSO we will have to load it from</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00495" /><CodeLine lineNumber="495"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// a got and then add the offset.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00496" /><CodeLine lineNumber="496"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!TM.shouldAssumeDSOLocal(GV))</Highlight></CodeLine>
<Link id="l00497" /><CodeLine lineNumber="497"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00498" /><CodeLine lineNumber="498"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00499" /><CodeLine lineNumber="499"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the code is position independent we will have to add a base register.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00500" /><CodeLine lineNumber="500"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (isPositionIndependent())</Highlight></CodeLine>
<Link id="l00501" /><CodeLine lineNumber="501"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00502" /><CodeLine lineNumber="502"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00503" /><CodeLine lineNumber="503"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Otherwise we can do it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00504" /><CodeLine lineNumber="504"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00505" /><CodeLine lineNumber="505"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00506" /><CodeLine lineNumber="506"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00507" /><CodeLine lineNumber="507"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00508" /><CodeLine lineNumber="508"><Highlight kind="normal"></Highlight><Highlight kind="comment">//  Optimization Methods</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00509" /><CodeLine lineNumber="509"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00510" /><CodeLine lineNumber="510"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00511" /><CodeLine lineNumber="511"><Highlight kind="comment">/// If the specified instruction has a constant integer operand and there are</Highlight></CodeLine>
<Link id="l00512" /><CodeLine lineNumber="512"><Highlight kind="comment">/// bits set in that constant that are not demanded, then clear those bits and</Highlight></CodeLine>
<Link id="l00513" /><CodeLine lineNumber="513"><Highlight kind="comment">/// return true.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00514" /><CodeLine lineNumber="514"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#ac6a3aaac8faabe7dc09114d716a93eba">TargetLowering::ShrinkDemandedConstant</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l00515" /><CodeLine lineNumber="515"><Highlight kind="normal">                                            </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedBits,</Highlight></CodeLine>
<Link id="l00516" /><CodeLine lineNumber="516"><Highlight kind="normal">                                            </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedElts,</Highlight></CodeLine>
<Link id="l00517" /><CodeLine lineNumber="517"><Highlight kind="normal">                                            TargetLoweringOpt &amp;TLO)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00518" /><CodeLine lineNumber="518"><Highlight kind="normal">  SDLoc <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l00519" /><CodeLine lineNumber="519"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opcode = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode();</Highlight></CodeLine>
<Link id="l00520" /><CodeLine lineNumber="520"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00521" /><CodeLine lineNumber="521"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Early-out if we&#39;ve ended up calling an undemanded node, leave this to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00522" /><CodeLine lineNumber="522"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// constant folding.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00523" /><CodeLine lineNumber="523"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#a49cd5939942c6665aba4cae8c220dff1">isZero</a>() || DemandedElts.<a href="/docs/api/classes/llvm/apint/#a49cd5939942c6665aba4cae8c220dff1">isZero</a>())</Highlight></CodeLine>
<Link id="l00524" /><CodeLine lineNumber="524"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00525" /><CodeLine lineNumber="525"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00526" /><CodeLine lineNumber="526"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Do target-specific constant optimization.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00527" /><CodeLine lineNumber="527"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (targetShrinkDemandedConstant(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedBits, DemandedElts, TLO))</Highlight></CodeLine>
<Link id="l00528" /><CodeLine lineNumber="528"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.New.getNode();</Highlight></CodeLine>
<Link id="l00529" /><CodeLine lineNumber="529"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00530" /><CodeLine lineNumber="530"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: ISD::SELECT, ISD::SELECT&#95;CC</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00531" /><CodeLine lineNumber="531"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (Opcode) &#123;</Highlight></CodeLine>
<Link id="l00532" /><CodeLine lineNumber="532"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l00533" /><CodeLine lineNumber="533"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00534" /><CodeLine lineNumber="534"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>:</Highlight></CodeLine>
<Link id="l00535" /><CodeLine lineNumber="535"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>:</Highlight></CodeLine>
<Link id="l00536" /><CodeLine lineNumber="536"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>: &#123;</Highlight></CodeLine>
<Link id="l00537" /><CodeLine lineNumber="537"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;Op1C = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1));</Highlight></CodeLine>
<Link id="l00538" /><CodeLine lineNumber="538"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Op1C || Op1C-&gt;isOpaque())</Highlight></CodeLine>
<Link id="l00539" /><CodeLine lineNumber="539"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00540" /><CodeLine lineNumber="540"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00541" /><CodeLine lineNumber="541"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If this is a &#39;not&#39; op, don&#39;t touch it because that&#39;s a canonical form.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00542" /><CodeLine lineNumber="542"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = Op1C-&gt;getAPIntValue();</Highlight></CodeLine>
<Link id="l00543" /><CodeLine lineNumber="543"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a> &amp;&amp; DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>))</Highlight></CodeLine>
<Link id="l00544" /><CodeLine lineNumber="544"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00545" /><CodeLine lineNumber="545"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00546" /><CodeLine lineNumber="546"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>.isSubsetOf(DemandedBits)) &#123;</Highlight></CodeLine>
<Link id="l00547" /><CodeLine lineNumber="547"><Highlight kind="normal">      EVT VT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l00548" /><CodeLine lineNumber="548"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewC = TLO.DAG.getConstant(DemandedBits &amp; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT);</Highlight></CodeLine>
<Link id="l00549" /><CodeLine lineNumber="549"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(Opcode, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), NewC,</Highlight></CodeLine>
<Link id="l00550" /><CodeLine lineNumber="550"><Highlight kind="normal">                                      <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;getFlags());</Highlight></CodeLine>
<Link id="l00551" /><CodeLine lineNumber="551"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l00552" /><CodeLine lineNumber="552"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00553" /><CodeLine lineNumber="553"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00554" /><CodeLine lineNumber="554"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00555" /><CodeLine lineNumber="555"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00556" /><CodeLine lineNumber="556"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00557" /><CodeLine lineNumber="557"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00558" /><CodeLine lineNumber="558"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00559" /><CodeLine lineNumber="559"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00560" /><CodeLine lineNumber="560"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00561" /><CodeLine lineNumber="561"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#ac6a3aaac8faabe7dc09114d716a93eba">TargetLowering::ShrinkDemandedConstant</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l00562" /><CodeLine lineNumber="562"><Highlight kind="normal">                                            </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedBits,</Highlight></CodeLine>
<Link id="l00563" /><CodeLine lineNumber="563"><Highlight kind="normal">                                            TargetLoweringOpt &amp;TLO)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00564" /><CodeLine lineNumber="564"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l00565" /><CodeLine lineNumber="565"><Highlight kind="normal">  APInt DemandedElts = VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>()</Highlight></CodeLine>
<Link id="l00566" /><CodeLine lineNumber="566"><Highlight kind="normal">                           ? <a href="/docs/api/classes/llvm/apint/#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(VT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>())</Highlight></CodeLine>
<Link id="l00567" /><CodeLine lineNumber="567"><Highlight kind="normal">                           : APInt(1, 1);</Highlight></CodeLine>
<Link id="l00568" /><CodeLine lineNumber="568"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instcombine/instcombinesimplifydemanded-cpp/#a83ba6ab779541297eb331d3a56aa7cdd">ShrinkDemandedConstant</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedBits, DemandedElts, TLO);</Highlight></CodeLine>
<Link id="l00569" /><CodeLine lineNumber="569"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00570" /><CodeLine lineNumber="570"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00571" /><CodeLine lineNumber="571"><Highlight kind="comment">/// Convert x+y to (VT)((SmallVT)x+(SmallVT)y) if the casts are free.</Highlight></CodeLine>
<Link id="l00572" /><CodeLine lineNumber="572"><Highlight kind="comment">/// This uses isTruncateFree/isZExtFree and ANY&#95;EXTEND for the widening cast,</Highlight></CodeLine>
<Link id="l00573" /><CodeLine lineNumber="573"><Highlight kind="comment">/// but it could be generalized for targets with other types of implicit</Highlight></CodeLine>
<Link id="l00574" /><CodeLine lineNumber="574"><Highlight kind="comment">/// widening casts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00575" /><CodeLine lineNumber="575"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a60c2837ca8052c0432179f52148da7c2">TargetLowering::ShrinkDemandedOp</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>,</Highlight></CodeLine>
<Link id="l00576" /><CodeLine lineNumber="576"><Highlight kind="normal">                                      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedBits,</Highlight></CodeLine>
<Link id="l00577" /><CodeLine lineNumber="577"><Highlight kind="normal">                                      TargetLoweringOpt &amp;TLO)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00578" /><CodeLine lineNumber="578"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.<a href="/docs/api/classes/llvm/dwarfexpression/operation/#a663d5e8085015fda24216c33615fac33">getNumOperands</a>() == 2 &amp;&amp;</Highlight></CodeLine>
<Link id="l00579" /><CodeLine lineNumber="579"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;ShrinkDemandedOp only supports binary operators!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00580" /><CodeLine lineNumber="580"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getNode()-&gt;getNumValues() == 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l00581" /><CodeLine lineNumber="581"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;ShrinkDemandedOp only supports nodes with one result!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00582" /><CodeLine lineNumber="582"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00583" /><CodeLine lineNumber="583"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l00584" /><CodeLine lineNumber="584"><Highlight kind="normal">  SelectionDAG &amp;DAG = TLO.DAG;</Highlight></CodeLine>
<Link id="l00585" /><CodeLine lineNumber="585"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l00586" /><CodeLine lineNumber="586"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00587" /><CodeLine lineNumber="587"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Early return, as this function cannot handle vector types.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00588" /><CodeLine lineNumber="588"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>())</Highlight></CodeLine>
<Link id="l00589" /><CodeLine lineNumber="589"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00590" /><CodeLine lineNumber="590"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00591" /><CodeLine lineNumber="591"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0).getValueType().getScalarSizeInBits() == <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l00592" /><CodeLine lineNumber="592"><Highlight kind="normal">         <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1).getValueType().getScalarSizeInBits() == <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l00593" /><CodeLine lineNumber="593"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;ShrinkDemandedOp only supports operands that have the same size!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00594" /><CodeLine lineNumber="594"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00595" /><CodeLine lineNumber="595"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Don&#39;t do this if the node has another user, which may require the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00596" /><CodeLine lineNumber="596"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// full value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00597" /><CodeLine lineNumber="597"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getNode()-&gt;hasOneUse())</Highlight></CodeLine>
<Link id="l00598" /><CodeLine lineNumber="598"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00599" /><CodeLine lineNumber="599"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00600" /><CodeLine lineNumber="600"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Search for the smallest integer type with free casts to and from</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00601" /><CodeLine lineNumber="601"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Op&#39;s type. For expedience, just check power-of-2 integer types.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00602" /><CodeLine lineNumber="602"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> DemandedSize = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a3015474e70e59c0a3ed4f9f0e8644b75">getActiveBits</a>();</Highlight></CodeLine>
<Link id="l00603" /><CodeLine lineNumber="603"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SmallVTBits = <a href="/docs/api/namespaces/llvm/#a4cc11b26432f9343b3c532f06171ad04">llvm::bit&#95;ceil</a>(DemandedSize);</Highlight></CodeLine>
<Link id="l00604" /><CodeLine lineNumber="604"><Highlight kind="normal">       SmallVTBits &lt; <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>; SmallVTBits = <a href="/docs/api/namespaces/llvm/#afb65eef479f0473d0fe1666b80155237">NextPowerOf2</a>(SmallVTBits)) &#123;</Highlight></CodeLine>
<Link id="l00605" /><CodeLine lineNumber="605"><Highlight kind="normal">    EVT SmallVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), SmallVTBits);</Highlight></CodeLine>
<Link id="l00606" /><CodeLine lineNumber="606"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a6f992bc4ca89f1b5f0b34f5b29978c31">isTruncateFree</a>(VT, SmallVT) &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a342be90695496b88a8854a775dfd030f">isZExtFree</a>(SmallVT, VT)) &#123;</Highlight></CodeLine>
<Link id="l00607" /><CodeLine lineNumber="607"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// We found a type with free casts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00608" /><CodeLine lineNumber="608"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00609" /><CodeLine lineNumber="609"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If the operation has the &#39;disjoint&#39; flag, then the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00610" /><CodeLine lineNumber="610"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// operands on the new node are also disjoint.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00611" /><CodeLine lineNumber="611"><Highlight kind="normal">      SDNodeFlags <a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;getFlags().hasDisjoint() ? <a href="/docs/api/structs/llvm/sdnodeflags/#a19128eb1e6729dd3cf2afce783620adaa27df8f9cd44943383afc77dd0ebd5e74">SDNodeFlags::Disjoint</a></Highlight></CodeLine>
<Link id="l00612" /><CodeLine lineNumber="612"><Highlight kind="normal">                                                     : <a href="/docs/api/structs/llvm/sdnodeflags/#a19128eb1e6729dd3cf2afce783620adaafc862a4330fa376300f133615bf88ed3">SDNodeFlags::None</a>);</Highlight></CodeLine>
<Link id="l00613" /><CodeLine lineNumber="613"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(</Highlight></CodeLine>
<Link id="l00614" /><CodeLine lineNumber="614"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode(), dl, SmallVT,</Highlight></CodeLine>
<Link id="l00615" /><CodeLine lineNumber="615"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, SmallVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0)),</Highlight></CodeLine>
<Link id="l00616" /><CodeLine lineNumber="616"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, SmallVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1)), Flags);</Highlight></CodeLine>
<Link id="l00617" /><CodeLine lineNumber="617"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DemandedSize &lt;= SmallVTBits &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Narrowed below demanded bits?&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00618" /><CodeLine lineNumber="618"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/arccc/#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">ISD::ANY&#95;EXTEND</a>, dl, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>);</Highlight></CodeLine>
<Link id="l00619" /><CodeLine lineNumber="619"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Z);</Highlight></CodeLine>
<Link id="l00620" /><CodeLine lineNumber="620"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00621" /><CodeLine lineNumber="621"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00622" /><CodeLine lineNumber="622"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00623" /><CodeLine lineNumber="623"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00624" /><CodeLine lineNumber="624"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00625" /><CodeLine lineNumber="625"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#ab2fd70d9aeac9343fa8f00ccdeff7f0b">TargetLowering::SimplifyDemandedBits</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedBits,</Highlight></CodeLine>
<Link id="l00626" /><CodeLine lineNumber="626"><Highlight kind="normal">                                          DAGCombinerInfo &amp;DCI)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00627" /><CodeLine lineNumber="627"><Highlight kind="normal">  SelectionDAG &amp;DAG = DCI.DAG;</Highlight></CodeLine>
<Link id="l00628" /><CodeLine lineNumber="628"><Highlight kind="normal">  TargetLoweringOpt TLO(DAG, !DCI.isBeforeLegalize(),</Highlight></CodeLine>
<Link id="l00629" /><CodeLine lineNumber="629"><Highlight kind="normal">                        !DCI.isBeforeLegalizeOps());</Highlight></CodeLine>
<Link id="l00630" /><CodeLine lineNumber="630"><Highlight kind="normal">  KnownBits Known;</Highlight></CodeLine>
<Link id="l00631" /><CodeLine lineNumber="631"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00632" /><CodeLine lineNumber="632"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/jumptable/#ae69658c09df17591f8b1c3e95b879b5ca99c267524f12efe8cf927389e02d506a">Simplified</a> = SimplifyDemandedBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedBits, Known, TLO);</Highlight></CodeLine>
<Link id="l00633" /><CodeLine lineNumber="633"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Simplified) &#123;</Highlight></CodeLine>
<Link id="l00634" /><CodeLine lineNumber="634"><Highlight kind="normal">    DCI.AddToWorklist(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getNode());</Highlight></CodeLine>
<Link id="l00635" /><CodeLine lineNumber="635"><Highlight kind="normal">    DCI.CommitTargetLoweringOpt(TLO);</Highlight></CodeLine>
<Link id="l00636" /><CodeLine lineNumber="636"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00637" /><CodeLine lineNumber="637"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/jumptable/#ae69658c09df17591f8b1c3e95b879b5ca99c267524f12efe8cf927389e02d506a">Simplified</a>;</Highlight></CodeLine>
<Link id="l00638" /><CodeLine lineNumber="638"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00639" /><CodeLine lineNumber="639"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00640" /><CodeLine lineNumber="640"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#ab2fd70d9aeac9343fa8f00ccdeff7f0b">TargetLowering::SimplifyDemandedBits</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedBits,</Highlight></CodeLine>
<Link id="l00641" /><CodeLine lineNumber="641"><Highlight kind="normal">                                          </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedElts,</Highlight></CodeLine>
<Link id="l00642" /><CodeLine lineNumber="642"><Highlight kind="normal">                                          DAGCombinerInfo &amp;DCI)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00643" /><CodeLine lineNumber="643"><Highlight kind="normal">  SelectionDAG &amp;DAG = DCI.DAG;</Highlight></CodeLine>
<Link id="l00644" /><CodeLine lineNumber="644"><Highlight kind="normal">  TargetLoweringOpt TLO(DAG, !DCI.isBeforeLegalize(),</Highlight></CodeLine>
<Link id="l00645" /><CodeLine lineNumber="645"><Highlight kind="normal">                        !DCI.isBeforeLegalizeOps());</Highlight></CodeLine>
<Link id="l00646" /><CodeLine lineNumber="646"><Highlight kind="normal">  KnownBits Known;</Highlight></CodeLine>
<Link id="l00647" /><CodeLine lineNumber="647"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00648" /><CodeLine lineNumber="648"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/jumptable/#ae69658c09df17591f8b1c3e95b879b5ca99c267524f12efe8cf927389e02d506a">Simplified</a> =</Highlight></CodeLine>
<Link id="l00649" /><CodeLine lineNumber="649"><Highlight kind="normal">      SimplifyDemandedBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedBits, DemandedElts, Known, TLO);</Highlight></CodeLine>
<Link id="l00650" /><CodeLine lineNumber="650"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Simplified) &#123;</Highlight></CodeLine>
<Link id="l00651" /><CodeLine lineNumber="651"><Highlight kind="normal">    DCI.AddToWorklist(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getNode());</Highlight></CodeLine>
<Link id="l00652" /><CodeLine lineNumber="652"><Highlight kind="normal">    DCI.CommitTargetLoweringOpt(TLO);</Highlight></CodeLine>
<Link id="l00653" /><CodeLine lineNumber="653"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00654" /><CodeLine lineNumber="654"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/jumptable/#ae69658c09df17591f8b1c3e95b879b5ca99c267524f12efe8cf927389e02d506a">Simplified</a>;</Highlight></CodeLine>
<Link id="l00655" /><CodeLine lineNumber="655"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00656" /><CodeLine lineNumber="656"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00657" /><CodeLine lineNumber="657"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#ab2fd70d9aeac9343fa8f00ccdeff7f0b">TargetLowering::SimplifyDemandedBits</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedBits,</Highlight></CodeLine>
<Link id="l00658" /><CodeLine lineNumber="658"><Highlight kind="normal">                                          KnownBits &amp;Known,</Highlight></CodeLine>
<Link id="l00659" /><CodeLine lineNumber="659"><Highlight kind="normal">                                          TargetLoweringOpt &amp;TLO,</Highlight></CodeLine>
<Link id="l00660" /><CodeLine lineNumber="660"><Highlight kind="normal">                                          </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>,</Highlight></CodeLine>
<Link id="l00661" /><CodeLine lineNumber="661"><Highlight kind="normal">                                          </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AssumeSingleUse)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00662" /><CodeLine lineNumber="662"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l00663" /><CodeLine lineNumber="663"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00664" /><CodeLine lineNumber="664"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Since the number of lanes in a scalable vector is unknown at compile time,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00665" /><CodeLine lineNumber="665"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// we track one bit which is implicitly broadcast to all lanes.  This means</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00666" /><CodeLine lineNumber="666"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// that all lanes in a scalable vector are considered demanded.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00667" /><CodeLine lineNumber="667"><Highlight kind="normal">  APInt DemandedElts = VT.<a href="/docs/api/structs/llvm/evt/#a920f0719057d7352f9da10908859368d">isFixedLengthVector</a>()</Highlight></CodeLine>
<Link id="l00668" /><CodeLine lineNumber="668"><Highlight kind="normal">                           ? <a href="/docs/api/classes/llvm/apint/#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(VT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>())</Highlight></CodeLine>
<Link id="l00669" /><CodeLine lineNumber="669"><Highlight kind="normal">                           : APInt(1, 1);</Highlight></CodeLine>
<Link id="l00670" /><CodeLine lineNumber="670"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> SimplifyDemandedBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedBits, DemandedElts, Known, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>,</Highlight></CodeLine>
<Link id="l00671" /><CodeLine lineNumber="671"><Highlight kind="normal">                              AssumeSingleUse);</Highlight></CodeLine>
<Link id="l00672" /><CodeLine lineNumber="672"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00673" /><CodeLine lineNumber="673"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00674" /><CodeLine lineNumber="674"><Highlight kind="normal"></Highlight><Highlight kind="comment">// TODO: Under what circumstances can we create nodes? Constant folding?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00675" /><CodeLine lineNumber="675"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a0338302ee706a6cd16534e768210b0b2">TargetLowering::SimplifyMultipleUseDemandedBits</a>(</Highlight></CodeLine>
<Link id="l00676" /><CodeLine lineNumber="676"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedBits, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedElts,</Highlight></CodeLine>
<Link id="l00677" /><CodeLine lineNumber="677"><Highlight kind="normal">    SelectionDAG &amp;DAG, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00678" /><CodeLine lineNumber="678"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l00679" /><CodeLine lineNumber="679"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00680" /><CodeLine lineNumber="680"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Limit search depth.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00681" /><CodeLine lineNumber="681"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> &gt;= <a href="/docs/api/classes/llvm/selectiondag/#a4d5e16cbde22f5e6f007940d57a428fd">SelectionDAG::MaxRecursionDepth</a>)</Highlight></CodeLine>
<Link id="l00682" /><CodeLine lineNumber="682"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l00683" /><CodeLine lineNumber="683"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00684" /><CodeLine lineNumber="684"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Ignore UNDEFs.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00685" /><CodeLine lineNumber="685"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.isUndef())</Highlight></CodeLine>
<Link id="l00686" /><CodeLine lineNumber="686"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l00687" /><CodeLine lineNumber="687"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00688" /><CodeLine lineNumber="688"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Not demanding any bits/elts from Op.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00689" /><CodeLine lineNumber="689"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits == 0 || DemandedElts == 0)</Highlight></CodeLine>
<Link id="l00690" /><CodeLine lineNumber="690"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5b0e59823444a55c295af279611a9d24">getUNDEF</a>(VT);</Highlight></CodeLine>
<Link id="l00691" /><CodeLine lineNumber="691"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00692" /><CodeLine lineNumber="692"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsLE = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>().<a href="/docs/api/classes/llvm/datalayout/#a377365b0288a4d06a07e09252d7d583f">isLittleEndian</a>();</Highlight></CodeLine>
<Link id="l00693" /><CodeLine lineNumber="693"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumElts = DemandedElts.<a href="/docs/api/classes/llvm/apint/#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>();</Highlight></CodeLine>
<Link id="l00694" /><CodeLine lineNumber="694"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>();</Highlight></CodeLine>
<Link id="l00695" /><CodeLine lineNumber="695"><Highlight kind="normal">  KnownBits LHSKnown, RHSKnown;</Highlight></CodeLine>
<Link id="l00696" /><CodeLine lineNumber="696"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode()) &#123;</Highlight></CodeLine>
<Link id="l00697" /><CodeLine lineNumber="697"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> ISD::BITCAST: &#123;</Highlight></CodeLine>
<Link id="l00698" /><CodeLine lineNumber="698"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l00699" /><CodeLine lineNumber="699"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l00700" /><CodeLine lineNumber="700"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00701" /><CodeLine lineNumber="701"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#a1f4429b3a6cbf22cea042b77cf055f40">peekThroughBitcasts</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0));</Highlight></CodeLine>
<Link id="l00702" /><CodeLine lineNumber="702"><Highlight kind="normal">    EVT SrcVT = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType();</Highlight></CodeLine>
<Link id="l00703" /><CodeLine lineNumber="703"><Highlight kind="normal">    EVT DstVT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l00704" /><CodeLine lineNumber="704"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcVT == DstVT)</Highlight></CodeLine>
<Link id="l00705" /><CodeLine lineNumber="705"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>;</Highlight></CodeLine>
<Link id="l00706" /><CodeLine lineNumber="706"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00707" /><CodeLine lineNumber="707"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSrcEltBits = SrcVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l00708" /><CodeLine lineNumber="708"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumDstEltBits = DstVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l00709" /><CodeLine lineNumber="709"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumSrcEltBits == NumDstEltBits)</Highlight></CodeLine>
<Link id="l00710" /><CodeLine lineNumber="710"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> V = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l00711" /><CodeLine lineNumber="711"><Highlight kind="normal">              Src, DemandedBits, DemandedElts, DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l00712" /><CodeLine lineNumber="712"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a64f6469ab95c4eec77e4ccf303619a81">getBitcast</a>(DstVT, V);</Highlight></CodeLine>
<Link id="l00713" /><CodeLine lineNumber="713"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00714" /><CodeLine lineNumber="714"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; (NumDstEltBits % NumSrcEltBits) == 0) &#123;</Highlight></CodeLine>
<Link id="l00715" /><CodeLine lineNumber="715"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Scale = NumDstEltBits / NumSrcEltBits;</Highlight></CodeLine>
<Link id="l00716" /><CodeLine lineNumber="716"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSrcElts = SrcVT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>();</Highlight></CodeLine>
<Link id="l00717" /><CodeLine lineNumber="717"><Highlight kind="normal">      APInt DemandedSrcBits = <a href="/docs/api/classes/llvm/apint/#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(NumSrcEltBits);</Highlight></CodeLine>
<Link id="l00718" /><CodeLine lineNumber="718"><Highlight kind="normal">      APInt DemandedSrcElts = <a href="/docs/api/classes/llvm/apint/#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(NumSrcElts);</Highlight></CodeLine>
<Link id="l00719" /><CodeLine lineNumber="719"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != Scale; ++i) &#123;</Highlight></CodeLine>
<Link id="l00720" /><CodeLine lineNumber="720"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> EltOffset = IsLE ? i : (Scale - 1 - i);</Highlight></CodeLine>
<Link id="l00721" /><CodeLine lineNumber="721"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> BitOffset = EltOffset &#42; NumSrcEltBits;</Highlight></CodeLine>
<Link id="l00722" /><CodeLine lineNumber="722"><Highlight kind="normal">        APInt Sub = DemandedBits.<a href="/docs/api/classes/llvm/apint/#adf997f1047734d3b47b8d5a9b2163f11">extractBits</a>(NumSrcEltBits, BitOffset);</Highlight></CodeLine>
<Link id="l00723" /><CodeLine lineNumber="723"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Sub.<a href="/docs/api/classes/llvm/apint/#a49cd5939942c6665aba4cae8c220dff1">isZero</a>()) &#123;</Highlight></CodeLine>
<Link id="l00724" /><CodeLine lineNumber="724"><Highlight kind="normal">          DemandedSrcBits |= Sub;</Highlight></CodeLine>
<Link id="l00725" /><CodeLine lineNumber="725"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> j = 0; <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea363b122c528f54df4a0446b6bab05515">j</a> != NumElts; ++<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea363b122c528f54df4a0446b6bab05515">j</a>)</Highlight></CodeLine>
<Link id="l00726" /><CodeLine lineNumber="726"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedElts&#91;j&#93;)</Highlight></CodeLine>
<Link id="l00727" /><CodeLine lineNumber="727"><Highlight kind="normal">              DemandedSrcElts.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>((j &#42; Scale) + i);</Highlight></CodeLine>
<Link id="l00728" /><CodeLine lineNumber="728"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l00729" /><CodeLine lineNumber="729"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00730" /><CodeLine lineNumber="730"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00731" /><CodeLine lineNumber="731"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> V = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l00732" /><CodeLine lineNumber="732"><Highlight kind="normal">              Src, DemandedSrcBits, DemandedSrcElts, DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l00733" /><CodeLine lineNumber="733"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a64f6469ab95c4eec77e4ccf303619a81">getBitcast</a>(DstVT, V);</Highlight></CodeLine>
<Link id="l00734" /><CodeLine lineNumber="734"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00735" /><CodeLine lineNumber="735"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00736" /><CodeLine lineNumber="736"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO - bigendian once we have test coverage.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00737" /><CodeLine lineNumber="737"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsLE &amp;&amp; (NumSrcEltBits % NumDstEltBits) == 0) &#123;</Highlight></CodeLine>
<Link id="l00738" /><CodeLine lineNumber="738"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Scale = NumSrcEltBits / NumDstEltBits;</Highlight></CodeLine>
<Link id="l00739" /><CodeLine lineNumber="739"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSrcElts = SrcVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() ? SrcVT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>() : 1;</Highlight></CodeLine>
<Link id="l00740" /><CodeLine lineNumber="740"><Highlight kind="normal">      APInt DemandedSrcBits = <a href="/docs/api/classes/llvm/apint/#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(NumSrcEltBits);</Highlight></CodeLine>
<Link id="l00741" /><CodeLine lineNumber="741"><Highlight kind="normal">      APInt DemandedSrcElts = <a href="/docs/api/classes/llvm/apint/#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(NumSrcElts);</Highlight></CodeLine>
<Link id="l00742" /><CodeLine lineNumber="742"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != NumElts; ++i)</Highlight></CodeLine>
<Link id="l00743" /><CodeLine lineNumber="743"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedElts&#91;i&#93;) &#123;</Highlight></CodeLine>
<Link id="l00744" /><CodeLine lineNumber="744"><Highlight kind="normal">          </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = (i % Scale) &#42; NumDstEltBits;</Highlight></CodeLine>
<Link id="l00745" /><CodeLine lineNumber="745"><Highlight kind="normal">          DemandedSrcBits.<a href="/docs/api/classes/llvm/apint/#aabe301a4f18d38478700ad44ba2245bc">insertBits</a>(DemandedBits, <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</Highlight></CodeLine>
<Link id="l00746" /><CodeLine lineNumber="746"><Highlight kind="normal">          DemandedSrcElts.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(i / Scale);</Highlight></CodeLine>
<Link id="l00747" /><CodeLine lineNumber="747"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l00748" /><CodeLine lineNumber="748"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00749" /><CodeLine lineNumber="749"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> V = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l00750" /><CodeLine lineNumber="750"><Highlight kind="normal">              Src, DemandedSrcBits, DemandedSrcElts, DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l00751" /><CodeLine lineNumber="751"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a64f6469ab95c4eec77e4ccf303619a81">getBitcast</a>(DstVT, V);</Highlight></CodeLine>
<Link id="l00752" /><CodeLine lineNumber="752"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00753" /><CodeLine lineNumber="753"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00754" /><CodeLine lineNumber="754"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00755" /><CodeLine lineNumber="755"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00756" /><CodeLine lineNumber="756"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad3b50b6d74957b19afb85ac29f66afef">ISD::FREEZE</a>: &#123;</Highlight></CodeLine>
<Link id="l00757" /><CodeLine lineNumber="757"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l00758" /><CodeLine lineNumber="758"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8947affefbaa5e1099d7ba6bd401f05a">isGuaranteedNotToBeUndefOrPoison</a>(N0, DemandedElts,</Highlight></CodeLine>
<Link id="l00759" /><CodeLine lineNumber="759"><Highlight kind="normal">                                             </Highlight><Highlight kind="comment">/&#42;PoisonOnly=&#42;/</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">))</Highlight></CodeLine>
<Link id="l00760" /><CodeLine lineNumber="760"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> N0;</Highlight></CodeLine>
<Link id="l00761" /><CodeLine lineNumber="761"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00762" /><CodeLine lineNumber="762"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00763" /><CodeLine lineNumber="763"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>: &#123;</Highlight></CodeLine>
<Link id="l00764" /><CodeLine lineNumber="764"><Highlight kind="normal">    LHSKnown = DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l00765" /><CodeLine lineNumber="765"><Highlight kind="normal">    RHSKnown = DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1), DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l00766" /><CodeLine lineNumber="766"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00767" /><CodeLine lineNumber="767"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If all of the demanded bits are known 1 on one side, return the other.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00768" /><CodeLine lineNumber="768"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// These bits cannot contribute to the result of the &#39;and&#39; in this</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00769" /><CodeLine lineNumber="769"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// context.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00770" /><CodeLine lineNumber="770"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(LHSKnown.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> | RHSKnown.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>))</Highlight></CodeLine>
<Link id="l00771" /><CodeLine lineNumber="771"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l00772" /><CodeLine lineNumber="772"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(RHSKnown.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> | LHSKnown.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>))</Highlight></CodeLine>
<Link id="l00773" /><CodeLine lineNumber="773"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l00774" /><CodeLine lineNumber="774"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00775" /><CodeLine lineNumber="775"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00776" /><CodeLine lineNumber="776"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>: &#123;</Highlight></CodeLine>
<Link id="l00777" /><CodeLine lineNumber="777"><Highlight kind="normal">    LHSKnown = DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l00778" /><CodeLine lineNumber="778"><Highlight kind="normal">    RHSKnown = DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1), DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l00779" /><CodeLine lineNumber="779"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00780" /><CodeLine lineNumber="780"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If all of the demanded bits are known zero on one side, return the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00781" /><CodeLine lineNumber="781"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// other.  These bits cannot contribute to the result of the &#39;or&#39; in this</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00782" /><CodeLine lineNumber="782"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// context.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00783" /><CodeLine lineNumber="783"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(LHSKnown.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a> | RHSKnown.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>))</Highlight></CodeLine>
<Link id="l00784" /><CodeLine lineNumber="784"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l00785" /><CodeLine lineNumber="785"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(RHSKnown.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a> | LHSKnown.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>))</Highlight></CodeLine>
<Link id="l00786" /><CodeLine lineNumber="786"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l00787" /><CodeLine lineNumber="787"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00788" /><CodeLine lineNumber="788"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00789" /><CodeLine lineNumber="789"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>: &#123;</Highlight></CodeLine>
<Link id="l00790" /><CodeLine lineNumber="790"><Highlight kind="normal">    LHSKnown = DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l00791" /><CodeLine lineNumber="791"><Highlight kind="normal">    RHSKnown = DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1), DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l00792" /><CodeLine lineNumber="792"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00793" /><CodeLine lineNumber="793"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If all of the demanded bits are known zero on one side, return the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00794" /><CodeLine lineNumber="794"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// other.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00795" /><CodeLine lineNumber="795"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(RHSKnown.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>))</Highlight></CodeLine>
<Link id="l00796" /><CodeLine lineNumber="796"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l00797" /><CodeLine lineNumber="797"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(LHSKnown.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>))</Highlight></CodeLine>
<Link id="l00798" /><CodeLine lineNumber="798"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l00799" /><CodeLine lineNumber="799"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00800" /><CodeLine lineNumber="800"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00801" /><CodeLine lineNumber="801"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>: &#123;</Highlight></CodeLine>
<Link id="l00802" /><CodeLine lineNumber="802"><Highlight kind="normal">    RHSKnown = DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1), DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l00803" /><CodeLine lineNumber="803"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (RHSKnown.<a href="/docs/api/structs/llvm/knownbits/#a1620c017d995c7ccbcb59e0212618017">isZero</a>())</Highlight></CodeLine>
<Link id="l00804" /><CodeLine lineNumber="804"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l00805" /><CodeLine lineNumber="805"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00806" /><CodeLine lineNumber="806"><Highlight kind="normal">    LHSKnown = DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l00807" /><CodeLine lineNumber="807"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LHSKnown.<a href="/docs/api/structs/llvm/knownbits/#a1620c017d995c7ccbcb59e0212618017">isZero</a>())</Highlight></CodeLine>
<Link id="l00808" /><CodeLine lineNumber="808"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l00809" /><CodeLine lineNumber="809"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00810" /><CodeLine lineNumber="810"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00811" /><CodeLine lineNumber="811"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>: &#123;</Highlight></CodeLine>
<Link id="l00812" /><CodeLine lineNumber="812"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we are only demanding sign bits then we can use the shift source</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00813" /><CodeLine lineNumber="813"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// directly.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00814" /><CodeLine lineNumber="814"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;uint64&#95;t&gt; MaxSA =</Highlight></CodeLine>
<Link id="l00815" /><CodeLine lineNumber="815"><Highlight kind="normal">            DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac992313c189b640db41963b7816ad740">getValidMaximumShiftAmount</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1)) &#123;</Highlight></CodeLine>
<Link id="l00816" /><CodeLine lineNumber="816"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l00817" /><CodeLine lineNumber="817"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShAmt = &#42;MaxSA;</Highlight></CodeLine>
<Link id="l00818" /><CodeLine lineNumber="818"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSignBits =</Highlight></CodeLine>
<Link id="l00819" /><CodeLine lineNumber="819"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac01c66c983bfbac05a0cf903f08417df">ComputeNumSignBits</a>(Op0, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l00820" /><CodeLine lineNumber="820"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> UpperDemandedBits = <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - DemandedBits.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>();</Highlight></CodeLine>
<Link id="l00821" /><CodeLine lineNumber="821"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumSignBits &gt; ShAmt &amp;&amp; (NumSignBits - ShAmt) &gt;= (UpperDemandedBits))</Highlight></CodeLine>
<Link id="l00822" /><CodeLine lineNumber="822"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Op0;</Highlight></CodeLine>
<Link id="l00823" /><CodeLine lineNumber="823"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00824" /><CodeLine lineNumber="824"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00825" /><CodeLine lineNumber="825"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00826" /><CodeLine lineNumber="826"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>: &#123;</Highlight></CodeLine>
<Link id="l00827" /><CodeLine lineNumber="827"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we are only demanding sign bits then we can use the shift source</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00828" /><CodeLine lineNumber="828"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// directly.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00829" /><CodeLine lineNumber="829"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;uint64&#95;t&gt; MaxSA =</Highlight></CodeLine>
<Link id="l00830" /><CodeLine lineNumber="830"><Highlight kind="normal">            DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac992313c189b640db41963b7816ad740">getValidMaximumShiftAmount</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1)) &#123;</Highlight></CodeLine>
<Link id="l00831" /><CodeLine lineNumber="831"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l00832" /><CodeLine lineNumber="832"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShAmt = &#42;MaxSA;</Highlight></CodeLine>
<Link id="l00833" /><CodeLine lineNumber="833"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Must already be signbits in DemandedBits bounds, and can&#39;t demand any</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00834" /><CodeLine lineNumber="834"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// shifted in zeroes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00835" /><CodeLine lineNumber="835"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#a8bad27827f46bca6baf814cbd2b64e84">countl&#95;zero</a>() &gt;= ShAmt) &#123;</Highlight></CodeLine>
<Link id="l00836" /><CodeLine lineNumber="836"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSignBits =</Highlight></CodeLine>
<Link id="l00837" /><CodeLine lineNumber="837"><Highlight kind="normal">            DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac01c66c983bfbac05a0cf903f08417df">ComputeNumSignBits</a>(Op0, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l00838" /><CodeLine lineNumber="838"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>() &gt;= (<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - NumSignBits))</Highlight></CodeLine>
<Link id="l00839" /><CodeLine lineNumber="839"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Op0;</Highlight></CodeLine>
<Link id="l00840" /><CodeLine lineNumber="840"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00841" /><CodeLine lineNumber="841"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00842" /><CodeLine lineNumber="842"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00843" /><CodeLine lineNumber="843"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00844" /><CodeLine lineNumber="844"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0158ee47dfa868be5d28e2cbef70d5d0">ISD::SETCC</a>: &#123;</Highlight></CodeLine>
<Link id="l00845" /><CodeLine lineNumber="845"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l00846" /><CodeLine lineNumber="846"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l00847" /><CodeLine lineNumber="847"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;CondCodeSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(2))-&gt;get();</Highlight></CodeLine>
<Link id="l00848" /><CodeLine lineNumber="848"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If (1) we only need the sign-bit, (2) the setcc operands are the same</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00849" /><CodeLine lineNumber="849"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// width as the setcc result, and (3) the result of a setcc conforms to 0 or</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00850" /><CodeLine lineNumber="850"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// -1, we may be able to bypass the setcc.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00851" /><CodeLine lineNumber="851"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#a4aa7e7ca8ab4093fd0dbadb223b998c0">isSignMask</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l00852" /><CodeLine lineNumber="852"><Highlight kind="normal">        Op0.<a href="/docs/api/classes/llvm/sdvalue/#abd46b9ca1d156bc7e3dd9150cc106a28">getScalarValueSizeInBits</a>() == <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l00853" /><CodeLine lineNumber="853"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(Op0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()) ==</Highlight></CodeLine>
<Link id="l00854" /><CodeLine lineNumber="854"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a695a19c9c3ae14638be151add82755cb">BooleanContent::ZeroOrNegativeOneBooleanContent</a>) &#123;</Highlight></CodeLine>
<Link id="l00855" /><CodeLine lineNumber="855"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If we&#39;re testing X &lt; 0, then this compare isn&#39;t needed - just use X!</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00856" /><CodeLine lineNumber="856"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// FIXME: We&#39;re limiting to integer types here, but this should also work</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00857" /><CodeLine lineNumber="857"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// if we don&#39;t care about FP signed-zero. The use of SETLT with FP means</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00858" /><CodeLine lineNumber="858"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// that we don&#39;t care about NaNs.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00859" /><CodeLine lineNumber="859"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a> &amp;&amp; Op1.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>().<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l00860" /><CodeLine lineNumber="860"><Highlight kind="normal">          (<a href="/docs/api/namespaces/llvm/#a1a86775f3d85d98a31b2751e1eb348ea">isNullConstant</a>(Op1) || <a href="/docs/api/namespaces/llvm/isd/#aaac3e239cbdfe15a8e9bad4f8e1e3a95">ISD::isBuildVectorAllZeros</a>(Op1.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>())))</Highlight></CodeLine>
<Link id="l00861" /><CodeLine lineNumber="861"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Op0;</Highlight></CodeLine>
<Link id="l00862" /><CodeLine lineNumber="862"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00863" /><CodeLine lineNumber="863"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00864" /><CodeLine lineNumber="864"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00865" /><CodeLine lineNumber="865"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaa59dd5ec37f21905436b354c0292d9e">ISD::SIGN&#95;EXTEND&#95;INREG</a>: &#123;</Highlight></CodeLine>
<Link id="l00866" /><CodeLine lineNumber="866"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If none of the extended bits are demanded, eliminate the sextinreg.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00867" /><CodeLine lineNumber="867"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l00868" /><CodeLine lineNumber="868"><Highlight kind="normal">    EVT ExVT = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VTSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1))-&gt;getVT();</Highlight></CodeLine>
<Link id="l00869" /><CodeLine lineNumber="869"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ExBits = ExVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l00870" /><CodeLine lineNumber="870"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#a3015474e70e59c0a3ed4f9f0e8644b75">getActiveBits</a>() &lt;= ExBits &amp;&amp;</Highlight></CodeLine>
<Link id="l00871" /><CodeLine lineNumber="871"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#a0f730d733430270bc8d1fb49fa78ea36">shouldRemoveRedundantExtend</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>))</Highlight></CodeLine>
<Link id="l00872" /><CodeLine lineNumber="872"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Op0;</Highlight></CodeLine>
<Link id="l00873" /><CodeLine lineNumber="873"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the input is already sign extended, just drop the extension.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00874" /><CodeLine lineNumber="874"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSignBits = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac01c66c983bfbac05a0cf903f08417df">ComputeNumSignBits</a>(Op0, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l00875" /><CodeLine lineNumber="875"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumSignBits &gt;= (<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - ExBits + 1))</Highlight></CodeLine>
<Link id="l00876" /><CodeLine lineNumber="876"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Op0;</Highlight></CodeLine>
<Link id="l00877" /><CodeLine lineNumber="877"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00878" /><CodeLine lineNumber="878"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00879" /><CodeLine lineNumber="879"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaa275bf149ab5df1067cfb721936ecbc">ISD::ANY&#95;EXTEND&#95;VECTOR&#95;INREG</a>:</Highlight></CodeLine>
<Link id="l00880" /><CodeLine lineNumber="880"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3893859b5caa079593b9bf91b96e05fb">ISD::SIGN&#95;EXTEND&#95;VECTOR&#95;INREG</a>:</Highlight></CodeLine>
<Link id="l00881" /><CodeLine lineNumber="881"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110adf7f4fc30c272a1987e075d7470df84c">ISD::ZERO&#95;EXTEND&#95;VECTOR&#95;INREG</a>: &#123;</Highlight></CodeLine>
<Link id="l00882" /><CodeLine lineNumber="882"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l00883" /><CodeLine lineNumber="883"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l00884" /><CodeLine lineNumber="884"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00885" /><CodeLine lineNumber="885"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we only want the lowest element and none of extended bits, then we can</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00886" /><CodeLine lineNumber="886"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// return the bitcasted source vector.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00887" /><CodeLine lineNumber="887"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l00888" /><CodeLine lineNumber="888"><Highlight kind="normal">    EVT SrcVT = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType();</Highlight></CodeLine>
<Link id="l00889" /><CodeLine lineNumber="889"><Highlight kind="normal">    EVT DstVT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l00890" /><CodeLine lineNumber="890"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsLE &amp;&amp; DemandedElts == 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l00891" /><CodeLine lineNumber="891"><Highlight kind="normal">        DstVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() == SrcVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l00892" /><CodeLine lineNumber="892"><Highlight kind="normal">        DemandedBits.<a href="/docs/api/classes/llvm/apint/#a3015474e70e59c0a3ed4f9f0e8644b75">getActiveBits</a>() &lt;= SrcVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>()) &#123;</Highlight></CodeLine>
<Link id="l00893" /><CodeLine lineNumber="893"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a64f6469ab95c4eec77e4ccf303619a81">getBitcast</a>(DstVT, Src);</Highlight></CodeLine>
<Link id="l00894" /><CodeLine lineNumber="894"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00895" /><CodeLine lineNumber="895"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00896" /><CodeLine lineNumber="896"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00897" /><CodeLine lineNumber="897"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad3bc7c2d379fbfdc2f8eaca038690ec9">ISD::INSERT&#95;VECTOR&#95;ELT</a>: &#123;</Highlight></CodeLine>
<Link id="l00898" /><CodeLine lineNumber="898"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l00899" /><CodeLine lineNumber="899"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l00900" /><CodeLine lineNumber="900"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00901" /><CodeLine lineNumber="901"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we don&#39;t demand the inserted element, return the base vector.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00902" /><CodeLine lineNumber="902"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Vec = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l00903" /><CodeLine lineNumber="903"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;CIdx = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(2));</Highlight></CodeLine>
<Link id="l00904" /><CodeLine lineNumber="904"><Highlight kind="normal">    EVT VecVT = Vec.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l00905" /><CodeLine lineNumber="905"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CIdx &amp;&amp; CIdx-&gt;getAPIntValue().ult(VecVT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>()) &amp;&amp;</Highlight></CodeLine>
<Link id="l00906" /><CodeLine lineNumber="906"><Highlight kind="normal">        !DemandedElts&#91;CIdx-&gt;getZExtValue()&#93;)</Highlight></CodeLine>
<Link id="l00907" /><CodeLine lineNumber="907"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Vec;</Highlight></CodeLine>
<Link id="l00908" /><CodeLine lineNumber="908"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00909" /><CodeLine lineNumber="909"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00910" /><CodeLine lineNumber="910"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1617abaedbb1d902bb3a5b3136684f9c">ISD::INSERT&#95;SUBVECTOR</a>: &#123;</Highlight></CodeLine>
<Link id="l00911" /><CodeLine lineNumber="911"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l00912" /><CodeLine lineNumber="912"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l00913" /><CodeLine lineNumber="913"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00914" /><CodeLine lineNumber="914"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Vec = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l00915" /><CodeLine lineNumber="915"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Sub = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l00916" /><CodeLine lineNumber="916"><Highlight kind="normal">    uint64&#95;t Idx = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getConstantOperandVal(2);</Highlight></CodeLine>
<Link id="l00917" /><CodeLine lineNumber="917"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSubElts = Sub.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>().<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>();</Highlight></CodeLine>
<Link id="l00918" /><CodeLine lineNumber="918"><Highlight kind="normal">    APInt DemandedSubElts = DemandedElts.<a href="/docs/api/classes/llvm/apint/#adf997f1047734d3b47b8d5a9b2163f11">extractBits</a>(NumSubElts, Idx);</Highlight></CodeLine>
<Link id="l00919" /><CodeLine lineNumber="919"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we don&#39;t demand the inserted subvector, return the base vector.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00920" /><CodeLine lineNumber="920"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedSubElts == 0)</Highlight></CodeLine>
<Link id="l00921" /><CodeLine lineNumber="921"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Vec;</Highlight></CodeLine>
<Link id="l00922" /><CodeLine lineNumber="922"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00923" /><CodeLine lineNumber="923"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00924" /><CodeLine lineNumber="924"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8d8773b28111d8898663d4a0f6223d68">ISD::VECTOR&#95;SHUFFLE</a>: &#123;</Highlight></CodeLine>
<Link id="l00925" /><CodeLine lineNumber="925"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>());</Highlight></CodeLine>
<Link id="l00926" /><CodeLine lineNumber="926"><Highlight kind="normal">    ArrayRef&lt;int&gt; ShuffleMask = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ShuffleVectorSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>)-&gt;getMask();</Highlight></CodeLine>
<Link id="l00927" /><CodeLine lineNumber="927"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00928" /><CodeLine lineNumber="928"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If all the demanded elts are from one operand and are inline,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00929" /><CodeLine lineNumber="929"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// then we can use the operand directly.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00930" /><CodeLine lineNumber="930"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AllUndef = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, IdentityLHS = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, IdentityRHS = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00931" /><CodeLine lineNumber="931"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != NumElts; ++i) &#123;</Highlight></CodeLine>
<Link id="l00932" /><CodeLine lineNumber="932"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a> = ShuffleMask&#91;i&#93;;</Highlight></CodeLine>
<Link id="l00933" /><CodeLine lineNumber="933"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (M &lt; 0 || !DemandedElts&#91;i&#93;)</Highlight></CodeLine>
<Link id="l00934" /><CodeLine lineNumber="934"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00935" /><CodeLine lineNumber="935"><Highlight kind="normal">      AllUndef = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00936" /><CodeLine lineNumber="936"><Highlight kind="normal">      IdentityLHS &amp;= (<a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a> == (int)i);</Highlight></CodeLine>
<Link id="l00937" /><CodeLine lineNumber="937"><Highlight kind="normal">      IdentityRHS &amp;= ((<a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a> - NumElts) == i);</Highlight></CodeLine>
<Link id="l00938" /><CodeLine lineNumber="938"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00939" /><CodeLine lineNumber="939"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00940" /><CodeLine lineNumber="940"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AllUndef)</Highlight></CodeLine>
<Link id="l00941" /><CodeLine lineNumber="941"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5b0e59823444a55c295af279611a9d24">getUNDEF</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType());</Highlight></CodeLine>
<Link id="l00942" /><CodeLine lineNumber="942"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IdentityLHS)</Highlight></CodeLine>
<Link id="l00943" /><CodeLine lineNumber="943"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l00944" /><CodeLine lineNumber="944"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IdentityRHS)</Highlight></CodeLine>
<Link id="l00945" /><CodeLine lineNumber="945"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l00946" /><CodeLine lineNumber="946"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00947" /><CodeLine lineNumber="947"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00948" /><CodeLine lineNumber="948"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l00949" /><CodeLine lineNumber="949"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO: Probably okay to remove after audit; here to reduce change size</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00950" /><CodeLine lineNumber="950"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// in initial enablement patch for scalable vectors</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00951" /><CodeLine lineNumber="951"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l00952" /><CodeLine lineNumber="952"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l00953" /><CodeLine lineNumber="953"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00954" /><CodeLine lineNumber="954"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() &gt;= <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a477ef80c70c7359199eace0e5d3133b1">ISD::BUILTIN&#95;OP&#95;END</a>)</Highlight></CodeLine>
<Link id="l00955" /><CodeLine lineNumber="955"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> V = SimplifyMultipleUseDemandedBitsForTargetNode(</Highlight></CodeLine>
<Link id="l00956" /><CodeLine lineNumber="956"><Highlight kind="normal">              <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedBits, DemandedElts, DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>))</Highlight></CodeLine>
<Link id="l00957" /><CodeLine lineNumber="957"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>;</Highlight></CodeLine>
<Link id="l00958" /><CodeLine lineNumber="958"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00959" /><CodeLine lineNumber="959"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00960" /><CodeLine lineNumber="960"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l00961" /><CodeLine lineNumber="961"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00962" /><CodeLine lineNumber="962"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00963" /><CodeLine lineNumber="963"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a0338302ee706a6cd16534e768210b0b2">TargetLowering::SimplifyMultipleUseDemandedBits</a>(</Highlight></CodeLine>
<Link id="l00964" /><CodeLine lineNumber="964"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedBits, SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l00965" /><CodeLine lineNumber="965"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00966" /><CodeLine lineNumber="966"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l00967" /><CodeLine lineNumber="967"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Since the number of lanes in a scalable vector is unknown at compile time,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00968" /><CodeLine lineNumber="968"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// we track one bit which is implicitly broadcast to all lanes.  This means</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00969" /><CodeLine lineNumber="969"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// that all lanes in a scalable vector are considered demanded.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00970" /><CodeLine lineNumber="970"><Highlight kind="normal">  APInt DemandedElts = VT.<a href="/docs/api/structs/llvm/evt/#a920f0719057d7352f9da10908859368d">isFixedLengthVector</a>()</Highlight></CodeLine>
<Link id="l00971" /><CodeLine lineNumber="971"><Highlight kind="normal">                           ? <a href="/docs/api/classes/llvm/apint/#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(VT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>())</Highlight></CodeLine>
<Link id="l00972" /><CodeLine lineNumber="972"><Highlight kind="normal">                           : APInt(1, 1);</Highlight></CodeLine>
<Link id="l00973" /><CodeLine lineNumber="973"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> SimplifyMultipleUseDemandedBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedBits, DemandedElts, DAG,</Highlight></CodeLine>
<Link id="l00974" /><CodeLine lineNumber="974"><Highlight kind="normal">                                         <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l00975" /><CodeLine lineNumber="975"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00976" /><CodeLine lineNumber="976"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00977" /><CodeLine lineNumber="977"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a480a8e3181c852945f597bad4fd0d9c3">TargetLowering::SimplifyMultipleUseDemandedVectorElts</a>(</Highlight></CodeLine>
<Link id="l00978" /><CodeLine lineNumber="978"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedElts, SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l00979" /><CodeLine lineNumber="979"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00980" /><CodeLine lineNumber="980"><Highlight kind="normal">  APInt DemandedBits = <a href="/docs/api/classes/llvm/apint/#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getScalarValueSizeInBits());</Highlight></CodeLine>
<Link id="l00981" /><CodeLine lineNumber="981"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> SimplifyMultipleUseDemandedBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedBits, DemandedElts, DAG,</Highlight></CodeLine>
<Link id="l00982" /><CodeLine lineNumber="982"><Highlight kind="normal">                                         <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l00983" /><CodeLine lineNumber="983"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00984" /><CodeLine lineNumber="984"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00985" /><CodeLine lineNumber="985"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Attempt to form ext(avgfloor(A, B)) from shr(add(ext(A), ext(B)), 1).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00986" /><CodeLine lineNumber="986"><Highlight kind="normal"></Highlight><Highlight kind="comment">//      or to form ext(avgceil(A, B)) from shr(add(ext(A), ext(B), 1), 1).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00987" /><CodeLine lineNumber="987" lineLink="#afa64cc7dfc401b9825b62c2b19808ad0"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="#afa64cc7dfc401b9825b62c2b19808ad0">combineShiftToAVG</a>(<a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l00988" /><CodeLine lineNumber="988"><Highlight kind="normal">                                 <a href="/docs/api/structs/llvm/targetlowering/targetloweringopt">TargetLowering::TargetLoweringOpt</a> &amp;TLO,</Highlight></CodeLine>
<Link id="l00989" /><CodeLine lineNumber="989"><Highlight kind="normal">                                 </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &amp;TLI,</Highlight></CodeLine>
<Link id="l00990" /><CodeLine lineNumber="990"><Highlight kind="normal">                                 </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/apint">APInt</a> &amp;<a href="/docs/api/classes/llvm/demandedbits">DemandedBits</a>,</Highlight></CodeLine>
<Link id="l00991" /><CodeLine lineNumber="991"><Highlight kind="normal">                                 </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/apint">APInt</a> &amp;DemandedElts, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>) &#123;</Highlight></CodeLine>
<Link id="l00992" /><CodeLine lineNumber="992"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a> || <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l00993" /><CodeLine lineNumber="993"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;SRL or SRA node is required here!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00994" /><CodeLine lineNumber="994"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Is the right shift using an immediate value of 1?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00995" /><CodeLine lineNumber="995"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/constantsdnode">ConstantSDNode</a> &#42;N1C = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1), DemandedElts);</Highlight></CodeLine>
<Link id="l00996" /><CodeLine lineNumber="996"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!N1C || !N1C-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#a3309ab99db347b0a0bd63f859bce62a7">isOne</a>())</Highlight></CodeLine>
<Link id="l00997" /><CodeLine lineNumber="997"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l00998" /><CodeLine lineNumber="998"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00999" /><CodeLine lineNumber="999"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We are looking for an avgfloor</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01000" /><CodeLine lineNumber="1000"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// add(ext, ext)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01001" /><CodeLine lineNumber="1001"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// or one of these as a avgceil</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01002" /><CodeLine lineNumber="1002"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// add(add(ext, ext), 1)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01003" /><CodeLine lineNumber="1003"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// add(add(ext, 1), ext)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01004" /><CodeLine lineNumber="1004"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// add(ext, add(ext, 1))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01005" /><CodeLine lineNumber="1005"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l01006" /><CodeLine lineNumber="1006"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a>.getOpcode() != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>)</Highlight></CodeLine>
<Link id="l01007" /><CodeLine lineNumber="1007"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l01008" /><CodeLine lineNumber="1008"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01009" /><CodeLine lineNumber="1009"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> ExtOpA = <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l01010" /><CodeLine lineNumber="1010"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> ExtOpB = <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l01011" /><CodeLine lineNumber="1011"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Add2;</Highlight></CodeLine>
<Link id="l01012" /><CodeLine lineNumber="1012"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> MatchOperands = &#91;&amp;&#93;(<a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Op1, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Op2, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Op3, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>) &#123;</Highlight></CodeLine>
<Link id="l01013" /><CodeLine lineNumber="1013"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/constantsdnode">ConstantSDNode</a> &#42;ConstOp;</Highlight></CodeLine>
<Link id="l01014" /><CodeLine lineNumber="1014"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((ConstOp = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(Op2, DemandedElts)) &amp;&amp;</Highlight></CodeLine>
<Link id="l01015" /><CodeLine lineNumber="1015"><Highlight kind="normal">        ConstOp-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#a3309ab99db347b0a0bd63f859bce62a7">isOne</a>()) &#123;</Highlight></CodeLine>
<Link id="l01016" /><CodeLine lineNumber="1016"><Highlight kind="normal">      ExtOpA = Op1;</Highlight></CodeLine>
<Link id="l01017" /><CodeLine lineNumber="1017"><Highlight kind="normal">      ExtOpB = Op3;</Highlight></CodeLine>
<Link id="l01018" /><CodeLine lineNumber="1018"><Highlight kind="normal">      Add2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>;</Highlight></CodeLine>
<Link id="l01019" /><CodeLine lineNumber="1019"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01020" /><CodeLine lineNumber="1020"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01021" /><CodeLine lineNumber="1021"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((ConstOp = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(Op3, DemandedElts)) &amp;&amp;</Highlight></CodeLine>
<Link id="l01022" /><CodeLine lineNumber="1022"><Highlight kind="normal">        ConstOp-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#a3309ab99db347b0a0bd63f859bce62a7">isOne</a>()) &#123;</Highlight></CodeLine>
<Link id="l01023" /><CodeLine lineNumber="1023"><Highlight kind="normal">      ExtOpA = Op1;</Highlight></CodeLine>
<Link id="l01024" /><CodeLine lineNumber="1024"><Highlight kind="normal">      ExtOpB = Op2;</Highlight></CodeLine>
<Link id="l01025" /><CodeLine lineNumber="1025"><Highlight kind="normal">      Add2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>;</Highlight></CodeLine>
<Link id="l01026" /><CodeLine lineNumber="1026"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01027" /><CodeLine lineNumber="1027"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01028" /><CodeLine lineNumber="1028"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01029" /><CodeLine lineNumber="1029"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l01030" /><CodeLine lineNumber="1030"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsCeil =</Highlight></CodeLine>
<Link id="l01031" /><CodeLine lineNumber="1031"><Highlight kind="normal">      (ExtOpA.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l01032" /><CodeLine lineNumber="1032"><Highlight kind="normal">       MatchOperands(ExtOpA.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), ExtOpA.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1), ExtOpB, ExtOpA)) ||</Highlight></CodeLine>
<Link id="l01033" /><CodeLine lineNumber="1033"><Highlight kind="normal">      (ExtOpB.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l01034" /><CodeLine lineNumber="1034"><Highlight kind="normal">       MatchOperands(ExtOpB.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), ExtOpB.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1), ExtOpA, ExtOpB));</Highlight></CodeLine>
<Link id="l01035" /><CodeLine lineNumber="1035"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01036" /><CodeLine lineNumber="1036"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the shift is signed (sra):</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01037" /><CodeLine lineNumber="1037"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//  - Needs &gt;= 2 sign bit for both operands.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01038" /><CodeLine lineNumber="1038"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//  - Needs &gt;= 2 zero bits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01039" /><CodeLine lineNumber="1039"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the shift is unsigned (srl):</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01040" /><CodeLine lineNumber="1040"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//  - Needs &gt;= 1 zero bit for both operands.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01041" /><CodeLine lineNumber="1041"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//  - Needs 1 demanded bit zero and &gt;= 2 sign bits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01042" /><CodeLine lineNumber="1042"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp;DAG = TLO.<a href="/docs/api/structs/llvm/targetlowering/targetloweringopt/#a15f606b1ca13c24d23039809f667daeb">DAG</a>;</Highlight></CodeLine>
<Link id="l01043" /><CodeLine lineNumber="1043"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShiftOpc = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode();</Highlight></CodeLine>
<Link id="l01044" /><CodeLine lineNumber="1044"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsSigned = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01045" /><CodeLine lineNumber="1045"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/knownbits">KnownBits</a>;</Highlight></CodeLine>
<Link id="l01046" /><CodeLine lineNumber="1046"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSignedA = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac01c66c983bfbac05a0cf903f08417df">ComputeNumSignBits</a>(ExtOpA, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l01047" /><CodeLine lineNumber="1047"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSignedB = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac01c66c983bfbac05a0cf903f08417df">ComputeNumSignBits</a>(ExtOpB, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l01048" /><CodeLine lineNumber="1048"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSigned = std::min(NumSignedA, NumSignedB) - 1;</Highlight></CodeLine>
<Link id="l01049" /><CodeLine lineNumber="1049"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumZeroA =</Highlight></CodeLine>
<Link id="l01050" /><CodeLine lineNumber="1050"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(ExtOpA, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>).<a href="/docs/api/structs/llvm/knownbits/#a7f47812e8e75b0616a97d7004e5fb909">countMinLeadingZeros</a>();</Highlight></CodeLine>
<Link id="l01051" /><CodeLine lineNumber="1051"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumZeroB =</Highlight></CodeLine>
<Link id="l01052" /><CodeLine lineNumber="1052"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(ExtOpB, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>).<a href="/docs/api/structs/llvm/knownbits/#a7f47812e8e75b0616a97d7004e5fb909">countMinLeadingZeros</a>();</Highlight></CodeLine>
<Link id="l01053" /><CodeLine lineNumber="1053"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumZero = std::min(NumZeroA, NumZeroB);</Highlight></CodeLine>
<Link id="l01054" /><CodeLine lineNumber="1054"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01055" /><CodeLine lineNumber="1055"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (ShiftOpc) &#123;</Highlight></CodeLine>
<Link id="l01056" /><CodeLine lineNumber="1056"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l01057" /><CodeLine lineNumber="1057"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;Unexpected ShiftOpc in combineShiftToAVG&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01058" /><CodeLine lineNumber="1058"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>: &#123;</Highlight></CodeLine>
<Link id="l01059" /><CodeLine lineNumber="1059"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumZero &gt;= 2 &amp;&amp; NumSigned &lt; NumZero) &#123;</Highlight></CodeLine>
<Link id="l01060" /><CodeLine lineNumber="1060"><Highlight kind="normal">      IsSigned = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01061" /><CodeLine lineNumber="1061"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/knownbits">KnownBits</a> = NumZero;</Highlight></CodeLine>
<Link id="l01062" /><CodeLine lineNumber="1062"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01063" /><CodeLine lineNumber="1063"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01064" /><CodeLine lineNumber="1064"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumSigned &gt;= 1) &#123;</Highlight></CodeLine>
<Link id="l01065" /><CodeLine lineNumber="1065"><Highlight kind="normal">      IsSigned = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01066" /><CodeLine lineNumber="1066"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/knownbits">KnownBits</a> = NumSigned;</Highlight></CodeLine>
<Link id="l01067" /><CodeLine lineNumber="1067"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01068" /><CodeLine lineNumber="1068"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01069" /><CodeLine lineNumber="1069"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l01070" /><CodeLine lineNumber="1070"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01071" /><CodeLine lineNumber="1071"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>: &#123;</Highlight></CodeLine>
<Link id="l01072" /><CodeLine lineNumber="1072"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumZero &gt;= 1 &amp;&amp; NumSigned &lt; NumZero) &#123;</Highlight></CodeLine>
<Link id="l01073" /><CodeLine lineNumber="1073"><Highlight kind="normal">      IsSigned = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01074" /><CodeLine lineNumber="1074"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/knownbits">KnownBits</a> = NumZero;</Highlight></CodeLine>
<Link id="l01075" /><CodeLine lineNumber="1075"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01076" /><CodeLine lineNumber="1076"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01077" /><CodeLine lineNumber="1077"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumSigned &gt;= 1 &amp;&amp; <a href="/docs/api/classes/llvm/demandedbits">DemandedBits</a>.isSignBitClear()) &#123;</Highlight></CodeLine>
<Link id="l01078" /><CodeLine lineNumber="1078"><Highlight kind="normal">      IsSigned = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01079" /><CodeLine lineNumber="1079"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/knownbits">KnownBits</a> = NumSigned;</Highlight></CodeLine>
<Link id="l01080" /><CodeLine lineNumber="1080"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01081" /><CodeLine lineNumber="1081"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01082" /><CodeLine lineNumber="1082"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l01083" /><CodeLine lineNumber="1083"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01084" /><CodeLine lineNumber="1084"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01085" /><CodeLine lineNumber="1085"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01086" /><CodeLine lineNumber="1086"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> AVGOpc = IsCeil ? (IsSigned ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a55a4b1d94ca6176bcb5449196d67e798">ISD::AVGCEILS</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8489c40b1b3f92b0c4fc98d06099c441">ISD::AVGCEILU</a>)</Highlight></CodeLine>
<Link id="l01087" /><CodeLine lineNumber="1087"><Highlight kind="normal">                           : (IsSigned ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110acc5444f2e2933b551e3afbdd93a9bfc8">ISD::AVGFLOORS</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5096628a43b16ff34ace64193ded1c93">ISD::AVGFLOORU</a>);</Highlight></CodeLine>
<Link id="l01088" /><CodeLine lineNumber="1088"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01089" /><CodeLine lineNumber="1089"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Find the smallest power-2 type that is legal for this vector size and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01090" /><CodeLine lineNumber="1090"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// operation, given the original type size and the number of known sign/zero</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01091" /><CodeLine lineNumber="1091"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// bits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01092" /><CodeLine lineNumber="1092"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> VT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l01093" /><CodeLine lineNumber="1093"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> MinWidth =</Highlight></CodeLine>
<Link id="l01094" /><CodeLine lineNumber="1094"><Highlight kind="normal">      std::max&lt;unsigned&gt;(VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>() - <a href="/docs/api/structs/llvm/knownbits">KnownBits</a>, 8);</Highlight></CodeLine>
<Link id="l01095" /><CodeLine lineNumber="1095"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> NVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), <a href="/docs/api/namespaces/llvm/#a4cc11b26432f9343b3c532f06171ad04">llvm::bit&#95;ceil</a>(MinWidth));</Highlight></CodeLine>
<Link id="l01096" /><CodeLine lineNumber="1096"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>() &gt; VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>())</Highlight></CodeLine>
<Link id="l01097" /><CodeLine lineNumber="1097"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l01098" /><CodeLine lineNumber="1098"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>())</Highlight></CodeLine>
<Link id="l01099" /><CodeLine lineNumber="1099"><Highlight kind="normal">    NVT = <a href="/docs/api/structs/llvm/evt/#a210ba6b43ba451b698857dd9de71bd15">EVT::getVectorVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), NVT, VT.<a href="/docs/api/structs/llvm/evt/#a3d102abca1c9c95f36546dff2f39273b">getVectorElementCount</a>());</Highlight></CodeLine>
<Link id="l01100" /><CodeLine lineNumber="1100"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TLO.<a href="/docs/api/structs/llvm/targetlowering/targetloweringopt/#a7d982597884ec2aa6f04e651bb718e44">LegalTypes</a>() &amp;&amp; !TLI.<a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(AVGOpc, NVT)) &#123;</Highlight></CodeLine>
<Link id="l01101" /><CodeLine lineNumber="1101"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we could not transform, and (both) adds are nuw/nsw, we can use the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01102" /><CodeLine lineNumber="1102"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// larger type size to do the transform.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01103" /><CodeLine lineNumber="1103"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TLO.<a href="/docs/api/structs/llvm/targetlowering/targetloweringopt/#aab1c3b0fca0b73909f226868e3c41df1">LegalOperations</a>() &amp;&amp; !TLI.<a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(AVGOpc, VT))</Highlight></CodeLine>
<Link id="l01104" /><CodeLine lineNumber="1104"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l01105" /><CodeLine lineNumber="1105"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DAG.<a href="/docs/api/classes/llvm/selectiondag/#a0065e43df00a398686dc1122562ad33e">willNotOverflowAdd</a>(IsSigned, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a>.getOperand(0),</Highlight></CodeLine>
<Link id="l01106" /><CodeLine lineNumber="1106"><Highlight kind="normal">                               <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a>.getOperand(1)) &amp;&amp;</Highlight></CodeLine>
<Link id="l01107" /><CodeLine lineNumber="1107"><Highlight kind="normal">        (!Add2 || DAG.<a href="/docs/api/classes/llvm/selectiondag/#a0065e43df00a398686dc1122562ad33e">willNotOverflowAdd</a>(IsSigned, Add2.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0),</Highlight></CodeLine>
<Link id="l01108" /><CodeLine lineNumber="1108"><Highlight kind="normal">                                         Add2.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1))))</Highlight></CodeLine>
<Link id="l01109" /><CodeLine lineNumber="1109"><Highlight kind="normal">      NVT = VT;</Highlight></CodeLine>
<Link id="l01110" /><CodeLine lineNumber="1110"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01111" /><CodeLine lineNumber="1111"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l01112" /><CodeLine lineNumber="1112"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01113" /><CodeLine lineNumber="1113"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01114" /><CodeLine lineNumber="1114"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Don&#39;t create a AVGFLOOR node with a scalar constant unless its legal as</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01115" /><CodeLine lineNumber="1115"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// this is likely to stop other folds (reassociation, value tracking etc.)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01116" /><CodeLine lineNumber="1116"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!IsCeil &amp;&amp; !TLI.<a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(AVGOpc, NVT) &amp;&amp;</Highlight></CodeLine>
<Link id="l01117" /><CodeLine lineNumber="1117"><Highlight kind="normal">      (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantSDNode&gt;</a>(ExtOpA) || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantSDNode&gt;</a>(ExtOpB)))</Highlight></CodeLine>
<Link id="l01118" /><CodeLine lineNumber="1118"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l01119" /><CodeLine lineNumber="1119"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01120" /><CodeLine lineNumber="1120"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdloc">SDLoc</a> <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l01121" /><CodeLine lineNumber="1121"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> ResultAVG =</Highlight></CodeLine>
<Link id="l01122" /><CodeLine lineNumber="1122"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(AVGOpc, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, NVT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a0691b4d847eca2bde325eeb0d5f24e54">getExtOrTrunc</a>(IsSigned, ExtOpA, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, NVT),</Highlight></CodeLine>
<Link id="l01123" /><CodeLine lineNumber="1123"><Highlight kind="normal">                  DAG.<a href="/docs/api/classes/llvm/selectiondag/#a0691b4d847eca2bde325eeb0d5f24e54">getExtOrTrunc</a>(IsSigned, ExtOpB, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, NVT));</Highlight></CodeLine>
<Link id="l01124" /><CodeLine lineNumber="1124"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a0691b4d847eca2bde325eeb0d5f24e54">getExtOrTrunc</a>(IsSigned, ResultAVG, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT);</Highlight></CodeLine>
<Link id="l01125" /><CodeLine lineNumber="1125"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01126" /><CodeLine lineNumber="1126"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01127" /><CodeLine lineNumber="1127"><Highlight kind="comment">/// Look at Op. At this point, we know that only the OriginalDemandedBits of the</Highlight></CodeLine>
<Link id="l01128" /><CodeLine lineNumber="1128"><Highlight kind="comment">/// result of Op are ever used downstream. If we can use this information to</Highlight></CodeLine>
<Link id="l01129" /><CodeLine lineNumber="1129"><Highlight kind="comment">/// simplify Op, create a new simplified DAG node and return true, returning the</Highlight></CodeLine>
<Link id="l01130" /><CodeLine lineNumber="1130"><Highlight kind="comment">/// original and new nodes in Old and New. Otherwise, analyze the expression and</Highlight></CodeLine>
<Link id="l01131" /><CodeLine lineNumber="1131"><Highlight kind="comment">/// return a mask of Known bits for the expression (used to simplify the</Highlight></CodeLine>
<Link id="l01132" /><CodeLine lineNumber="1132"><Highlight kind="comment">/// caller).  The Known bits may only be accurate for those bits in the</Highlight></CodeLine>
<Link id="l01133" /><CodeLine lineNumber="1133"><Highlight kind="comment">/// OriginalDemandedBits and OriginalDemandedElts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01134" /><CodeLine lineNumber="1134"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#ab2fd70d9aeac9343fa8f00ccdeff7f0b">TargetLowering::SimplifyDemandedBits</a>(</Highlight></CodeLine>
<Link id="l01135" /><CodeLine lineNumber="1135"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;OriginalDemandedBits,</Highlight></CodeLine>
<Link id="l01136" /><CodeLine lineNumber="1136"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;OriginalDemandedElts, KnownBits &amp;Known, TargetLoweringOpt &amp;TLO,</Highlight></CodeLine>
<Link id="l01137" /><CodeLine lineNumber="1137"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AssumeSingleUse)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l01138" /><CodeLine lineNumber="1138"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = OriginalDemandedBits.<a href="/docs/api/classes/llvm/apint/#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>();</Highlight></CodeLine>
<Link id="l01139" /><CodeLine lineNumber="1139"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getScalarValueSizeInBits() == <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l01140" /><CodeLine lineNumber="1140"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Mask size mismatches value type size!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01141" /><CodeLine lineNumber="1141"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01142" /><CodeLine lineNumber="1142"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Don&#39;t know anything.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01143" /><CodeLine lineNumber="1143"><Highlight kind="normal">  Known = KnownBits(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l01144" /><CodeLine lineNumber="1144"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01145" /><CodeLine lineNumber="1145"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l01146" /><CodeLine lineNumber="1146"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsLE = TLO.DAG.getDataLayout().isLittleEndian();</Highlight></CodeLine>
<Link id="l01147" /><CodeLine lineNumber="1147"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumElts = OriginalDemandedElts.<a href="/docs/api/classes/llvm/apint/#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>();</Highlight></CodeLine>
<Link id="l01148" /><CodeLine lineNumber="1148"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!VT.<a href="/docs/api/structs/llvm/evt/#a920f0719057d7352f9da10908859368d">isFixedLengthVector</a>() || NumElts == VT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>()) &amp;&amp;</Highlight></CodeLine>
<Link id="l01149" /><CodeLine lineNumber="1149"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Unexpected vector size&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01150" /><CodeLine lineNumber="1150"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01151" /><CodeLine lineNumber="1151"><Highlight kind="normal">  APInt DemandedBits = OriginalDemandedBits;</Highlight></CodeLine>
<Link id="l01152" /><CodeLine lineNumber="1152"><Highlight kind="normal">  APInt DemandedElts = OriginalDemandedElts;</Highlight></CodeLine>
<Link id="l01153" /><CodeLine lineNumber="1153"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l01154" /><CodeLine lineNumber="1154"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01155" /><CodeLine lineNumber="1155"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Undef operand.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01156" /><CodeLine lineNumber="1156"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.isUndef())</Highlight></CodeLine>
<Link id="l01157" /><CodeLine lineNumber="1157"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01158" /><CodeLine lineNumber="1158"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01159" /><CodeLine lineNumber="1159"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We can&#39;t simplify target constants.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01160" /><CodeLine lineNumber="1160"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac479e53ca98903b1028ec80e12fb0af8">ISD::TargetConstant</a>)</Highlight></CodeLine>
<Link id="l01161" /><CodeLine lineNumber="1161"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01162" /><CodeLine lineNumber="1162"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01163" /><CodeLine lineNumber="1163"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aac2f0a84dd2aa5ee4c3f1385e9565f5e">ISD::Constant</a>) &#123;</Highlight></CodeLine>
<Link id="l01164" /><CodeLine lineNumber="1164"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We know all of the bits for a constant!</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01165" /><CodeLine lineNumber="1165"><Highlight kind="normal">    Known = <a href="/docs/api/structs/llvm/knownbits/#a066220c7a472d8793de64a0ad23487d2">KnownBits::makeConstant</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;getAsAPIntVal());</Highlight></CodeLine>
<Link id="l01166" /><CodeLine lineNumber="1166"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01167" /><CodeLine lineNumber="1167"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01168" /><CodeLine lineNumber="1168"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01169" /><CodeLine lineNumber="1169"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1be4c8da7c68a4c683de1a98b5cc5b9d">ISD::ConstantFP</a>) &#123;</Highlight></CodeLine>
<Link id="l01170" /><CodeLine lineNumber="1170"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We know all of the bits for a floating point constant!</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01171" /><CodeLine lineNumber="1171"><Highlight kind="normal">    Known = <a href="/docs/api/structs/llvm/knownbits/#a066220c7a472d8793de64a0ad23487d2">KnownBits::makeConstant</a>(</Highlight></CodeLine>
<Link id="l01172" /><CodeLine lineNumber="1172"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantFPSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>)-&gt;getValueAPF().bitcastToAPInt());</Highlight></CodeLine>
<Link id="l01173" /><CodeLine lineNumber="1173"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01174" /><CodeLine lineNumber="1174"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01175" /><CodeLine lineNumber="1175"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01176" /><CodeLine lineNumber="1176"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Other users may use these bits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01177" /><CodeLine lineNumber="1177"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> HasMultiUse = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01178" /><CodeLine lineNumber="1178"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!AssumeSingleUse &amp;&amp; !<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getNode()-&gt;hasOneUse()) &#123;</Highlight></CodeLine>
<Link id="l01179" /><CodeLine lineNumber="1179"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> &gt;= <a href="/docs/api/classes/llvm/selectiondag/#a4d5e16cbde22f5e6f007940d57a428fd">SelectionDAG::MaxRecursionDepth</a>) &#123;</Highlight></CodeLine>
<Link id="l01180" /><CodeLine lineNumber="1180"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Limit search depth.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01181" /><CodeLine lineNumber="1181"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01182" /><CodeLine lineNumber="1182"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01183" /><CodeLine lineNumber="1183"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Allow multiple uses, just set the DemandedBits/Elts to all bits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01184" /><CodeLine lineNumber="1184"><Highlight kind="normal">    DemandedBits = <a href="/docs/api/classes/llvm/apint/#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l01185" /><CodeLine lineNumber="1185"><Highlight kind="normal">    DemandedElts = <a href="/docs/api/classes/llvm/apint/#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(NumElts);</Highlight></CodeLine>
<Link id="l01186" /><CodeLine lineNumber="1186"><Highlight kind="normal">    HasMultiUse = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01187" /><CodeLine lineNumber="1187"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OriginalDemandedBits == 0 || OriginalDemandedElts == 0) &#123;</Highlight></CodeLine>
<Link id="l01188" /><CodeLine lineNumber="1188"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Not demanding any bits/elts from Op.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01189" /><CodeLine lineNumber="1189"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getUNDEF(VT));</Highlight></CodeLine>
<Link id="l01190" /><CodeLine lineNumber="1190"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> &gt;= <a href="/docs/api/classes/llvm/selectiondag/#a4d5e16cbde22f5e6f007940d57a428fd">SelectionDAG::MaxRecursionDepth</a>) &#123;</Highlight></CodeLine>
<Link id="l01191" /><CodeLine lineNumber="1191"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Limit search depth.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01192" /><CodeLine lineNumber="1192"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01193" /><CodeLine lineNumber="1193"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01194" /><CodeLine lineNumber="1194"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01195" /><CodeLine lineNumber="1195"><Highlight kind="normal">  KnownBits Known2;</Highlight></CodeLine>
<Link id="l01196" /><CodeLine lineNumber="1196"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode()) &#123;</Highlight></CodeLine>
<Link id="l01197" /><CodeLine lineNumber="1197"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a576080a08ef1bbab0308eac9d5838f75">ISD::SCALAR&#95;TO&#95;VECTOR</a>: &#123;</Highlight></CodeLine>
<Link id="l01198" /><CodeLine lineNumber="1198"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l01199" /><CodeLine lineNumber="1199"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01200" /><CodeLine lineNumber="1200"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedElts&#91;0&#93;)</Highlight></CodeLine>
<Link id="l01201" /><CodeLine lineNumber="1201"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getUNDEF(VT));</Highlight></CodeLine>
<Link id="l01202" /><CodeLine lineNumber="1202"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01203" /><CodeLine lineNumber="1203"><Highlight kind="normal">    KnownBits SrcKnown;</Highlight></CodeLine>
<Link id="l01204" /><CodeLine lineNumber="1204"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l01205" /><CodeLine lineNumber="1205"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SrcBitWidth = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getScalarValueSizeInBits();</Highlight></CodeLine>
<Link id="l01206" /><CodeLine lineNumber="1206"><Highlight kind="normal">    APInt SrcDemandedBits = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(SrcBitWidth);</Highlight></CodeLine>
<Link id="l01207" /><CodeLine lineNumber="1207"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Src, SrcDemandedBits, SrcKnown, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01208" /><CodeLine lineNumber="1208"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01209" /><CodeLine lineNumber="1209"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01210" /><CodeLine lineNumber="1210"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Upper elements are undef, so only get the knownbits if we just demand</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01211" /><CodeLine lineNumber="1211"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the bottom element.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01212" /><CodeLine lineNumber="1212"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedElts == 1)</Highlight></CodeLine>
<Link id="l01213" /><CodeLine lineNumber="1213"><Highlight kind="normal">      Known = SrcKnown.<a href="/docs/api/structs/llvm/knownbits/#a0c649ec21217b3feb2f2a28b4736b689">anyextOrTrunc</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l01214" /><CodeLine lineNumber="1214"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01215" /><CodeLine lineNumber="1215"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01216" /><CodeLine lineNumber="1216"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aff6f73b624fecca7dbe94259f9437e32">ISD::BUILD&#95;VECTOR</a>:</Highlight></CodeLine>
<Link id="l01217" /><CodeLine lineNumber="1217"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Collect the known bits that are shared by every demanded element.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01218" /><CodeLine lineNumber="1218"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO: Call SimplifyDemandedBits for non-constant demanded elements.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01219" /><CodeLine lineNumber="1219"><Highlight kind="normal">    Known = TLO.DAG.computeKnownBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l01220" /><CodeLine lineNumber="1220"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">; </Highlight><Highlight kind="comment">// Don&#39;t fall through, will infinitely loop.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01221" /><CodeLine lineNumber="1221"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7f864031b6fb691b1525cbea92542ef1">ISD::SPLAT&#95;VECTOR</a>: &#123;</Highlight></CodeLine>
<Link id="l01222" /><CodeLine lineNumber="1222"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Scl = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l01223" /><CodeLine lineNumber="1223"><Highlight kind="normal">    APInt DemandedSclBits = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a2ed912a28808268e35bd58e8f11251aa">zextOrTrunc</a>(Scl.<a href="/docs/api/classes/llvm/sdvalue/#a8915297f72f1020167562805827f7160">getValueSizeInBits</a>());</Highlight></CodeLine>
<Link id="l01224" /><CodeLine lineNumber="1224"><Highlight kind="normal">    KnownBits KnownScl;</Highlight></CodeLine>
<Link id="l01225" /><CodeLine lineNumber="1225"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Scl, DemandedSclBits, KnownScl, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01226" /><CodeLine lineNumber="1226"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01227" /><CodeLine lineNumber="1227"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01228" /><CodeLine lineNumber="1228"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Implicitly truncate the bits to match the official semantics of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01229" /><CodeLine lineNumber="1229"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// SPLAT&#95;VECTOR.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01230" /><CodeLine lineNumber="1230"><Highlight kind="normal">    Known = KnownScl.<a href="/docs/api/structs/llvm/knownbits/#a40a666d8a3b58f5eca5d7f9f26796bc7">trunc</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l01231" /><CodeLine lineNumber="1231"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01232" /><CodeLine lineNumber="1232"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01233" /><CodeLine lineNumber="1233"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> ISD::LOAD: &#123;</Highlight></CodeLine>
<Link id="l01234" /><CodeLine lineNumber="1234"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a> = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;LoadSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l01235" /><CodeLine lineNumber="1235"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (getTargetConstantFromLoad(LD)) &#123;</Highlight></CodeLine>
<Link id="l01236" /><CodeLine lineNumber="1236"><Highlight kind="normal">      Known = TLO.DAG.computeKnownBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l01237" /><CodeLine lineNumber="1237"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">; </Highlight><Highlight kind="comment">// Don&#39;t fall through, will infinitely loop.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01238" /><CodeLine lineNumber="1238"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01239" /><CodeLine lineNumber="1239"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/isd/#a35edacef22fcaed7a8681fa573476131">ISD::isZEXTLoad</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getNode()) &amp;&amp; <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getResNo() == 0) &#123;</Highlight></CodeLine>
<Link id="l01240" /><CodeLine lineNumber="1240"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If this is a ZEXTLoad and we are looking at the loaded value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01241" /><CodeLine lineNumber="1241"><Highlight kind="normal">      EVT MemVT = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getMemoryVT();</Highlight></CodeLine>
<Link id="l01242" /><CodeLine lineNumber="1242"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> MemBits = MemVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l01243" /><CodeLine lineNumber="1243"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>.<a href="/docs/api/classes/llvm/apint/#a286d4fa2a50c9ac6ac3a8069cccfcd0c">setBitsFrom</a>(MemBits);</Highlight></CodeLine>
<Link id="l01244" /><CodeLine lineNumber="1244"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">; </Highlight><Highlight kind="comment">// Don&#39;t fall through, will infinitely loop.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01245" /><CodeLine lineNumber="1245"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01246" /><CodeLine lineNumber="1246"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01247" /><CodeLine lineNumber="1247"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01248" /><CodeLine lineNumber="1248"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad3bc7c2d379fbfdc2f8eaca038690ec9">ISD::INSERT&#95;VECTOR&#95;ELT</a>: &#123;</Highlight></CodeLine>
<Link id="l01249" /><CodeLine lineNumber="1249"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l01250" /><CodeLine lineNumber="1250"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01251" /><CodeLine lineNumber="1251"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Vec = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l01252" /><CodeLine lineNumber="1252"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Scl = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l01253" /><CodeLine lineNumber="1253"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;CIdx = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(2));</Highlight></CodeLine>
<Link id="l01254" /><CodeLine lineNumber="1254"><Highlight kind="normal">    EVT VecVT = Vec.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l01255" /><CodeLine lineNumber="1255"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01256" /><CodeLine lineNumber="1256"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If index isn&#39;t constant, assume we need all vector elements AND the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01257" /><CodeLine lineNumber="1257"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// inserted element.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01258" /><CodeLine lineNumber="1258"><Highlight kind="normal">    APInt DemandedVecElts(DemandedElts);</Highlight></CodeLine>
<Link id="l01259" /><CodeLine lineNumber="1259"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CIdx &amp;&amp; CIdx-&gt;getAPIntValue().ult(VecVT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>())) &#123;</Highlight></CodeLine>
<Link id="l01260" /><CodeLine lineNumber="1260"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Idx = CIdx-&gt;getZExtValue();</Highlight></CodeLine>
<Link id="l01261" /><CodeLine lineNumber="1261"><Highlight kind="normal">      DemandedVecElts.clearBit(Idx);</Highlight></CodeLine>
<Link id="l01262" /><CodeLine lineNumber="1262"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01263" /><CodeLine lineNumber="1263"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Inserted element is not required.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01264" /><CodeLine lineNumber="1264"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedElts&#91;Idx&#93;)</Highlight></CodeLine>
<Link id="l01265" /><CodeLine lineNumber="1265"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Vec);</Highlight></CodeLine>
<Link id="l01266" /><CodeLine lineNumber="1266"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01267" /><CodeLine lineNumber="1267"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01268" /><CodeLine lineNumber="1268"><Highlight kind="normal">    KnownBits KnownScl;</Highlight></CodeLine>
<Link id="l01269" /><CodeLine lineNumber="1269"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSclBits = Scl.<a href="/docs/api/classes/llvm/sdvalue/#abd46b9ca1d156bc7e3dd9150cc106a28">getScalarValueSizeInBits</a>();</Highlight></CodeLine>
<Link id="l01270" /><CodeLine lineNumber="1270"><Highlight kind="normal">    APInt DemandedSclBits = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a2ed912a28808268e35bd58e8f11251aa">zextOrTrunc</a>(NumSclBits);</Highlight></CodeLine>
<Link id="l01271" /><CodeLine lineNumber="1271"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Scl, DemandedSclBits, KnownScl, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01272" /><CodeLine lineNumber="1272"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01273" /><CodeLine lineNumber="1273"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01274" /><CodeLine lineNumber="1274"><Highlight kind="normal">    Known = KnownScl.<a href="/docs/api/structs/llvm/knownbits/#a0c649ec21217b3feb2f2a28b4736b689">anyextOrTrunc</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l01275" /><CodeLine lineNumber="1275"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01276" /><CodeLine lineNumber="1276"><Highlight kind="normal">    KnownBits KnownVec;</Highlight></CodeLine>
<Link id="l01277" /><CodeLine lineNumber="1277"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Vec, DemandedBits, DemandedVecElts, KnownVec, TLO,</Highlight></CodeLine>
<Link id="l01278" /><CodeLine lineNumber="1278"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01279" /><CodeLine lineNumber="1279"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01280" /><CodeLine lineNumber="1280"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01281" /><CodeLine lineNumber="1281"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!!DemandedVecElts)</Highlight></CodeLine>
<Link id="l01282" /><CodeLine lineNumber="1282"><Highlight kind="normal">      Known = Known.<a href="/docs/api/structs/llvm/knownbits/#a76e45a40f2f0b5b09132d1de119765e8">intersectWith</a>(KnownVec);</Highlight></CodeLine>
<Link id="l01283" /><CodeLine lineNumber="1283"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01284" /><CodeLine lineNumber="1284"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01285" /><CodeLine lineNumber="1285"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01286" /><CodeLine lineNumber="1286"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1617abaedbb1d902bb3a5b3136684f9c">ISD::INSERT&#95;SUBVECTOR</a>: &#123;</Highlight></CodeLine>
<Link id="l01287" /><CodeLine lineNumber="1287"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l01288" /><CodeLine lineNumber="1288"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01289" /><CodeLine lineNumber="1289"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Demand any elements from the subvector and the remainder from the src its</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01290" /><CodeLine lineNumber="1290"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// inserted into.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01291" /><CodeLine lineNumber="1291"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l01292" /><CodeLine lineNumber="1292"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Sub = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l01293" /><CodeLine lineNumber="1293"><Highlight kind="normal">    uint64&#95;t Idx = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getConstantOperandVal(2);</Highlight></CodeLine>
<Link id="l01294" /><CodeLine lineNumber="1294"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSubElts = Sub.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>().<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>();</Highlight></CodeLine>
<Link id="l01295" /><CodeLine lineNumber="1295"><Highlight kind="normal">    APInt DemandedSubElts = DemandedElts.<a href="/docs/api/classes/llvm/apint/#adf997f1047734d3b47b8d5a9b2163f11">extractBits</a>(NumSubElts, Idx);</Highlight></CodeLine>
<Link id="l01296" /><CodeLine lineNumber="1296"><Highlight kind="normal">    APInt DemandedSrcElts = DemandedElts;</Highlight></CodeLine>
<Link id="l01297" /><CodeLine lineNumber="1297"><Highlight kind="normal">    DemandedSrcElts.<a href="/docs/api/classes/llvm/apint/#aabe301a4f18d38478700ad44ba2245bc">insertBits</a>(<a href="/docs/api/classes/llvm/apint/#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(NumSubElts), Idx);</Highlight></CodeLine>
<Link id="l01298" /><CodeLine lineNumber="1298"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01299" /><CodeLine lineNumber="1299"><Highlight kind="normal">    KnownBits KnownSub, KnownSrc;</Highlight></CodeLine>
<Link id="l01300" /><CodeLine lineNumber="1300"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Sub, DemandedBits, DemandedSubElts, KnownSub, TLO,</Highlight></CodeLine>
<Link id="l01301" /><CodeLine lineNumber="1301"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01302" /><CodeLine lineNumber="1302"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01303" /><CodeLine lineNumber="1303"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Src, DemandedBits, DemandedSrcElts, KnownSrc, TLO,</Highlight></CodeLine>
<Link id="l01304" /><CodeLine lineNumber="1304"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01305" /><CodeLine lineNumber="1305"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01306" /><CodeLine lineNumber="1306"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01307" /><CodeLine lineNumber="1307"><Highlight kind="normal">    Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>.<a href="/docs/api/classes/llvm/apint/#ab6fff8a97bcb55e50e9be0ecf0c99b63">setAllBits</a>();</Highlight></CodeLine>
<Link id="l01308" /><CodeLine lineNumber="1308"><Highlight kind="normal">    Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>.<a href="/docs/api/classes/llvm/apint/#ab6fff8a97bcb55e50e9be0ecf0c99b63">setAllBits</a>();</Highlight></CodeLine>
<Link id="l01309" /><CodeLine lineNumber="1309"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!!DemandedSubElts)</Highlight></CodeLine>
<Link id="l01310" /><CodeLine lineNumber="1310"><Highlight kind="normal">      Known = Known.<a href="/docs/api/structs/llvm/knownbits/#a76e45a40f2f0b5b09132d1de119765e8">intersectWith</a>(KnownSub);</Highlight></CodeLine>
<Link id="l01311" /><CodeLine lineNumber="1311"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!!DemandedSrcElts)</Highlight></CodeLine>
<Link id="l01312" /><CodeLine lineNumber="1312"><Highlight kind="normal">      Known = Known.<a href="/docs/api/structs/llvm/knownbits/#a76e45a40f2f0b5b09132d1de119765e8">intersectWith</a>(KnownSrc);</Highlight></CodeLine>
<Link id="l01313" /><CodeLine lineNumber="1313"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01314" /><CodeLine lineNumber="1314"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use src if we don&#39;t need anything from it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01315" /><CodeLine lineNumber="1315"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedBits.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() || !DemandedSubElts.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() ||</Highlight></CodeLine>
<Link id="l01316" /><CodeLine lineNumber="1316"><Highlight kind="normal">        !DemandedSrcElts.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>()) &#123;</Highlight></CodeLine>
<Link id="l01317" /><CodeLine lineNumber="1317"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewSub = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l01318" /><CodeLine lineNumber="1318"><Highlight kind="normal">          Sub, DemandedBits, DemandedSubElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l01319" /><CodeLine lineNumber="1319"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewSrc = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l01320" /><CodeLine lineNumber="1320"><Highlight kind="normal">          Src, DemandedBits, DemandedSrcElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l01321" /><CodeLine lineNumber="1321"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NewSub || NewSrc) &#123;</Highlight></CodeLine>
<Link id="l01322" /><CodeLine lineNumber="1322"><Highlight kind="normal">        NewSub = NewSub ? NewSub : Sub;</Highlight></CodeLine>
<Link id="l01323" /><CodeLine lineNumber="1323"><Highlight kind="normal">        NewSrc = NewSrc ? NewSrc : <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>;</Highlight></CodeLine>
<Link id="l01324" /><CodeLine lineNumber="1324"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode(), dl, VT, NewSrc, NewSub,</Highlight></CodeLine>
<Link id="l01325" /><CodeLine lineNumber="1325"><Highlight kind="normal">                                        <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(2));</Highlight></CodeLine>
<Link id="l01326" /><CodeLine lineNumber="1326"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l01327" /><CodeLine lineNumber="1327"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01328" /><CodeLine lineNumber="1328"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01329" /><CodeLine lineNumber="1329"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01330" /><CodeLine lineNumber="1330"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01331" /><CodeLine lineNumber="1331"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9070de8a5c5b71851732c4c54e2ffedf">ISD::EXTRACT&#95;SUBVECTOR</a>: &#123;</Highlight></CodeLine>
<Link id="l01332" /><CodeLine lineNumber="1332"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l01333" /><CodeLine lineNumber="1333"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01334" /><CodeLine lineNumber="1334"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Offset the demanded elts by the subvector index.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01335" /><CodeLine lineNumber="1335"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l01336" /><CodeLine lineNumber="1336"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType().isScalableVector())</Highlight></CodeLine>
<Link id="l01337" /><CodeLine lineNumber="1337"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01338" /><CodeLine lineNumber="1338"><Highlight kind="normal">    uint64&#95;t Idx = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getConstantOperandVal(1);</Highlight></CodeLine>
<Link id="l01339" /><CodeLine lineNumber="1339"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSrcElts = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType().getVectorNumElements();</Highlight></CodeLine>
<Link id="l01340" /><CodeLine lineNumber="1340"><Highlight kind="normal">    APInt DemandedSrcElts = DemandedElts.<a href="/docs/api/classes/llvm/apint/#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(NumSrcElts).<a href="/docs/api/classes/llvm/apint/#acb9c55b6986369948507ca5241b4e411">shl</a>(Idx);</Highlight></CodeLine>
<Link id="l01341" /><CodeLine lineNumber="1341"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01342" /><CodeLine lineNumber="1342"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Src, DemandedBits, DemandedSrcElts, Known, TLO,</Highlight></CodeLine>
<Link id="l01343" /><CodeLine lineNumber="1343"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01344" /><CodeLine lineNumber="1344"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01345" /><CodeLine lineNumber="1345"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01346" /><CodeLine lineNumber="1346"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use src if we don&#39;t need anything from it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01347" /><CodeLine lineNumber="1347"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedBits.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() || !DemandedSrcElts.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>()) &#123;</Highlight></CodeLine>
<Link id="l01348" /><CodeLine lineNumber="1348"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedSrc = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l01349" /><CodeLine lineNumber="1349"><Highlight kind="normal">          Src, DemandedBits, DemandedSrcElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l01350" /><CodeLine lineNumber="1350"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedSrc) &#123;</Highlight></CodeLine>
<Link id="l01351" /><CodeLine lineNumber="1351"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode(), dl, VT, DemandedSrc,</Highlight></CodeLine>
<Link id="l01352" /><CodeLine lineNumber="1352"><Highlight kind="normal">                                        <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1));</Highlight></CodeLine>
<Link id="l01353" /><CodeLine lineNumber="1353"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l01354" /><CodeLine lineNumber="1354"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01355" /><CodeLine lineNumber="1355"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01356" /><CodeLine lineNumber="1356"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01357" /><CodeLine lineNumber="1357"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01358" /><CodeLine lineNumber="1358"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a320898056eadc3254fc601e1362eb9f5">ISD::CONCAT&#95;VECTORS</a>: &#123;</Highlight></CodeLine>
<Link id="l01359" /><CodeLine lineNumber="1359"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l01360" /><CodeLine lineNumber="1360"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01361" /><CodeLine lineNumber="1361"><Highlight kind="normal">    Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>.<a href="/docs/api/classes/llvm/apint/#ab6fff8a97bcb55e50e9be0ecf0c99b63">setAllBits</a>();</Highlight></CodeLine>
<Link id="l01362" /><CodeLine lineNumber="1362"><Highlight kind="normal">    Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>.<a href="/docs/api/classes/llvm/apint/#ab6fff8a97bcb55e50e9be0ecf0c99b63">setAllBits</a>();</Highlight></CodeLine>
<Link id="l01363" /><CodeLine lineNumber="1363"><Highlight kind="normal">    EVT SubVT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0).getValueType();</Highlight></CodeLine>
<Link id="l01364" /><CodeLine lineNumber="1364"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSubVecs = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.<a href="/docs/api/classes/llvm/dwarfexpression/operation/#a663d5e8085015fda24216c33615fac33">getNumOperands</a>();</Highlight></CodeLine>
<Link id="l01365" /><CodeLine lineNumber="1365"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSubElts = SubVT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>();</Highlight></CodeLine>
<Link id="l01366" /><CodeLine lineNumber="1366"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != NumSubVecs; ++i) &#123;</Highlight></CodeLine>
<Link id="l01367" /><CodeLine lineNumber="1367"><Highlight kind="normal">      APInt DemandedSubElts =</Highlight></CodeLine>
<Link id="l01368" /><CodeLine lineNumber="1368"><Highlight kind="normal">          DemandedElts.<a href="/docs/api/classes/llvm/apint/#adf997f1047734d3b47b8d5a9b2163f11">extractBits</a>(NumSubElts, i &#42; NumSubElts);</Highlight></CodeLine>
<Link id="l01369" /><CodeLine lineNumber="1369"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(i), DemandedBits, DemandedSubElts,</Highlight></CodeLine>
<Link id="l01370" /><CodeLine lineNumber="1370"><Highlight kind="normal">                               Known2, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01371" /><CodeLine lineNumber="1371"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01372" /><CodeLine lineNumber="1372"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Known bits are shared by every demanded subvector element.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01373" /><CodeLine lineNumber="1373"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!!DemandedSubElts)</Highlight></CodeLine>
<Link id="l01374" /><CodeLine lineNumber="1374"><Highlight kind="normal">        Known = Known.<a href="/docs/api/structs/llvm/knownbits/#a76e45a40f2f0b5b09132d1de119765e8">intersectWith</a>(Known2);</Highlight></CodeLine>
<Link id="l01375" /><CodeLine lineNumber="1375"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01376" /><CodeLine lineNumber="1376"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01377" /><CodeLine lineNumber="1377"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01378" /><CodeLine lineNumber="1378"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8d8773b28111d8898663d4a0f6223d68">ISD::VECTOR&#95;SHUFFLE</a>: &#123;</Highlight></CodeLine>
<Link id="l01379" /><CodeLine lineNumber="1379"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>());</Highlight></CodeLine>
<Link id="l01380" /><CodeLine lineNumber="1380"><Highlight kind="normal">    ArrayRef&lt;int&gt; ShuffleMask = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ShuffleVectorSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>)-&gt;getMask();</Highlight></CodeLine>
<Link id="l01381" /><CodeLine lineNumber="1381"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01382" /><CodeLine lineNumber="1382"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Collect demanded elements from shuffle operands..</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01383" /><CodeLine lineNumber="1383"><Highlight kind="normal">    APInt DemandedLHS, DemandedRHS;</Highlight></CodeLine>
<Link id="l01384" /><CodeLine lineNumber="1384"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#a6302b532981eadcac10d0d3ab01e3805">getShuffleDemandedElts</a>(NumElts, ShuffleMask, DemandedElts, DemandedLHS,</Highlight></CodeLine>
<Link id="l01385" /><CodeLine lineNumber="1385"><Highlight kind="normal">                                DemandedRHS))</Highlight></CodeLine>
<Link id="l01386" /><CodeLine lineNumber="1386"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01387" /><CodeLine lineNumber="1387"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01388" /><CodeLine lineNumber="1388"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!!DemandedLHS || !!DemandedRHS) &#123;</Highlight></CodeLine>
<Link id="l01389" /><CodeLine lineNumber="1389"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l01390" /><CodeLine lineNumber="1390"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l01391" /><CodeLine lineNumber="1391"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01392" /><CodeLine lineNumber="1392"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>.<a href="/docs/api/classes/llvm/apint/#ab6fff8a97bcb55e50e9be0ecf0c99b63">setAllBits</a>();</Highlight></CodeLine>
<Link id="l01393" /><CodeLine lineNumber="1393"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>.<a href="/docs/api/classes/llvm/apint/#ab6fff8a97bcb55e50e9be0ecf0c99b63">setAllBits</a>();</Highlight></CodeLine>
<Link id="l01394" /><CodeLine lineNumber="1394"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!!DemandedLHS) &#123;</Highlight></CodeLine>
<Link id="l01395" /><CodeLine lineNumber="1395"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op0, DemandedBits, DemandedLHS, Known2, TLO,</Highlight></CodeLine>
<Link id="l01396" /><CodeLine lineNumber="1396"><Highlight kind="normal">                                 <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01397" /><CodeLine lineNumber="1397"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01398" /><CodeLine lineNumber="1398"><Highlight kind="normal">        Known = Known.<a href="/docs/api/structs/llvm/knownbits/#a76e45a40f2f0b5b09132d1de119765e8">intersectWith</a>(Known2);</Highlight></CodeLine>
<Link id="l01399" /><CodeLine lineNumber="1399"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01400" /><CodeLine lineNumber="1400"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!!DemandedRHS) &#123;</Highlight></CodeLine>
<Link id="l01401" /><CodeLine lineNumber="1401"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op1, DemandedBits, DemandedRHS, Known2, TLO,</Highlight></CodeLine>
<Link id="l01402" /><CodeLine lineNumber="1402"><Highlight kind="normal">                                 <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01403" /><CodeLine lineNumber="1403"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01404" /><CodeLine lineNumber="1404"><Highlight kind="normal">        Known = Known.<a href="/docs/api/structs/llvm/knownbits/#a76e45a40f2f0b5b09132d1de119765e8">intersectWith</a>(Known2);</Highlight></CodeLine>
<Link id="l01405" /><CodeLine lineNumber="1405"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01406" /><CodeLine lineNumber="1406"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01407" /><CodeLine lineNumber="1407"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01408" /><CodeLine lineNumber="1408"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedOp0 = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l01409" /><CodeLine lineNumber="1409"><Highlight kind="normal">          Op0, DemandedBits, DemandedLHS, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l01410" /><CodeLine lineNumber="1410"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedOp1 = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l01411" /><CodeLine lineNumber="1411"><Highlight kind="normal">          Op1, DemandedBits, DemandedRHS, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l01412" /><CodeLine lineNumber="1412"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedOp0 || DemandedOp1) &#123;</Highlight></CodeLine>
<Link id="l01413" /><CodeLine lineNumber="1413"><Highlight kind="normal">        Op0 = DemandedOp0 ? DemandedOp0 : Op0;</Highlight></CodeLine>
<Link id="l01414" /><CodeLine lineNumber="1414"><Highlight kind="normal">        Op1 = DemandedOp1 ? DemandedOp1 : Op1;</Highlight></CodeLine>
<Link id="l01415" /><CodeLine lineNumber="1415"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.getVectorShuffle(VT, dl, Op0, Op1, ShuffleMask);</Highlight></CodeLine>
<Link id="l01416" /><CodeLine lineNumber="1416"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l01417" /><CodeLine lineNumber="1417"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01418" /><CodeLine lineNumber="1418"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01419" /><CodeLine lineNumber="1419"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01420" /><CodeLine lineNumber="1420"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01421" /><CodeLine lineNumber="1421"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>: &#123;</Highlight></CodeLine>
<Link id="l01422" /><CodeLine lineNumber="1422"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l01423" /><CodeLine lineNumber="1423"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l01424" /><CodeLine lineNumber="1424"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01425" /><CodeLine lineNumber="1425"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the RHS is a constant, check to see if the LHS would be zero without</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01426" /><CodeLine lineNumber="1426"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// using the bits from the RHS.  Below, we use knowledge about the RHS to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01427" /><CodeLine lineNumber="1427"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// simplify the LHS, here we&#39;re using information from the LHS to simplify</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01428" /><CodeLine lineNumber="1428"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the RHS.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01429" /><CodeLine lineNumber="1429"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ConstantSDNode &#42;RHSC = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(Op1, DemandedElts)) &#123;</Highlight></CodeLine>
<Link id="l01430" /><CodeLine lineNumber="1430"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Do not increment Depth here; that can cause an infinite loop.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01431" /><CodeLine lineNumber="1431"><Highlight kind="normal">      KnownBits LHSKnown = TLO.DAG.computeKnownBits(Op0, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l01432" /><CodeLine lineNumber="1432"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If the LHS already has zeros where RHSC does, this &#39;and&#39; is dead.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01433" /><CodeLine lineNumber="1433"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((LHSKnown.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> &amp; DemandedBits) ==</Highlight></CodeLine>
<Link id="l01434" /><CodeLine lineNumber="1434"><Highlight kind="normal">          (~RHSC-&gt;getAPIntValue() &amp; DemandedBits))</Highlight></CodeLine>
<Link id="l01435" /><CodeLine lineNumber="1435"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op0);</Highlight></CodeLine>
<Link id="l01436" /><CodeLine lineNumber="1436"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01437" /><CodeLine lineNumber="1437"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If any of the set bits in the RHS are known zero on the LHS, shrink</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01438" /><CodeLine lineNumber="1438"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// the constant.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01439" /><CodeLine lineNumber="1439"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instcombine/instcombinesimplifydemanded-cpp/#a83ba6ab779541297eb331d3a56aa7cdd">ShrinkDemandedConstant</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, ~LHSKnown.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> &amp; DemandedBits,</Highlight></CodeLine>
<Link id="l01440" /><CodeLine lineNumber="1440"><Highlight kind="normal">                                 DemandedElts, TLO))</Highlight></CodeLine>
<Link id="l01441" /><CodeLine lineNumber="1441"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01442" /><CodeLine lineNumber="1442"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01443" /><CodeLine lineNumber="1443"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Bitwise-not (xor X, -1) is a special case: we don&#39;t usually shrink its</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01444" /><CodeLine lineNumber="1444"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// constant, but if this &#39;and&#39; is only clearing bits that were just set by</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01445" /><CodeLine lineNumber="1445"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// the xor, then this &#39;and&#39; can be eliminated by shrinking the mask of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01446" /><CodeLine lineNumber="1446"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// the xor. For example, for a 32-bit X:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01447" /><CodeLine lineNumber="1447"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// and (xor (srl X, 31), -1), 1 --&gt; xor (srl X, 31), 1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01448" /><CodeLine lineNumber="1448"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a673c00ccea29abc2bab001b9c84603d1">isBitwiseNot</a>(Op0) &amp;&amp; Op0.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l01449" /><CodeLine lineNumber="1449"><Highlight kind="normal">          LHSKnown.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a> == ~RHSC-&gt;getAPIntValue()) &#123;</Highlight></CodeLine>
<Link id="l01450" /><CodeLine lineNumber="1450"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, VT, Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), Op1);</Highlight></CodeLine>
<Link id="l01451" /><CodeLine lineNumber="1451"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>);</Highlight></CodeLine>
<Link id="l01452" /><CodeLine lineNumber="1452"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01453" /><CodeLine lineNumber="1453"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01454" /><CodeLine lineNumber="1454"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01455" /><CodeLine lineNumber="1455"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// AND(INSERT&#95;SUBVECTOR(C,X,I),M) -&gt; INSERT&#95;SUBVECTOR(AND(C,M),X,I)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01456" /><CodeLine lineNumber="1456"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// iff &#39;C&#39; is Undef/Constant and AND(X,M) == X (for DemandedBits).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01457" /><CodeLine lineNumber="1457"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1617abaedbb1d902bb3a5b3136684f9c">ISD::INSERT&#95;SUBVECTOR</a> &amp;&amp; !VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l01458" /><CodeLine lineNumber="1458"><Highlight kind="normal">        (Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#a1c861a21f795c3108ab690f3a45c881a">isUndef</a>() ||</Highlight></CodeLine>
<Link id="l01459" /><CodeLine lineNumber="1459"><Highlight kind="normal">         <a href="/docs/api/namespaces/llvm/isd/#a2f37af786c5ba90887c1b4ec137a066c">ISD::isBuildVectorOfConstantSDNodes</a>(Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>())) &amp;&amp;</Highlight></CodeLine>
<Link id="l01460" /><CodeLine lineNumber="1460"><Highlight kind="normal">        Op0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a295d0b84f4e63438c0edb0021c41d47a">hasOneUse</a>()) &#123;</Highlight></CodeLine>
<Link id="l01461" /><CodeLine lineNumber="1461"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSubElts =</Highlight></CodeLine>
<Link id="l01462" /><CodeLine lineNumber="1462"><Highlight kind="normal">          Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1).<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>().<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>();</Highlight></CodeLine>
<Link id="l01463" /><CodeLine lineNumber="1463"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SubIdx = Op0.<a href="/docs/api/classes/llvm/sdvalue/#ac969b6c833cfa44c1b4fcd5790268340">getConstantOperandVal</a>(2);</Highlight></CodeLine>
<Link id="l01464" /><CodeLine lineNumber="1464"><Highlight kind="normal">      APInt DemandedSub =</Highlight></CodeLine>
<Link id="l01465" /><CodeLine lineNumber="1465"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/apint/#a46ceedee591f92727b85641794a96061">APInt::getBitsSet</a>(NumElts, SubIdx, SubIdx + NumSubElts);</Highlight></CodeLine>
<Link id="l01466" /><CodeLine lineNumber="1466"><Highlight kind="normal">      KnownBits KnownSubMask =</Highlight></CodeLine>
<Link id="l01467" /><CodeLine lineNumber="1467"><Highlight kind="normal">          TLO.DAG.computeKnownBits(Op1, DemandedSub &amp; DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l01468" /><CodeLine lineNumber="1468"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(KnownSubMask.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>)) &#123;</Highlight></CodeLine>
<Link id="l01469" /><CodeLine lineNumber="1469"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewAnd =</Highlight></CodeLine>
<Link id="l01470" /><CodeLine lineNumber="1470"><Highlight kind="normal">            TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), Op1);</Highlight></CodeLine>
<Link id="l01471" /><CodeLine lineNumber="1471"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewInsert =</Highlight></CodeLine>
<Link id="l01472" /><CodeLine lineNumber="1472"><Highlight kind="normal">            TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1617abaedbb1d902bb3a5b3136684f9c">ISD::INSERT&#95;SUBVECTOR</a>, dl, VT, NewAnd,</Highlight></CodeLine>
<Link id="l01473" /><CodeLine lineNumber="1473"><Highlight kind="normal">                            Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1), Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(2));</Highlight></CodeLine>
<Link id="l01474" /><CodeLine lineNumber="1474"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewInsert);</Highlight></CodeLine>
<Link id="l01475" /><CodeLine lineNumber="1475"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01476" /><CodeLine lineNumber="1476"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01477" /><CodeLine lineNumber="1477"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01478" /><CodeLine lineNumber="1478"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op1, DemandedBits, DemandedElts, Known, TLO,</Highlight></CodeLine>
<Link id="l01479" /><CodeLine lineNumber="1479"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01480" /><CodeLine lineNumber="1480"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01481" /><CodeLine lineNumber="1481"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op0, ~Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> &amp; DemandedBits, DemandedElts,</Highlight></CodeLine>
<Link id="l01482" /><CodeLine lineNumber="1482"><Highlight kind="normal">                             Known2, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01483" /><CodeLine lineNumber="1483"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01484" /><CodeLine lineNumber="1484"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01485" /><CodeLine lineNumber="1485"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If all of the demanded bits are known one on one side, return the other.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01486" /><CodeLine lineNumber="1486"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// These bits cannot contribute to the result of the &#39;and&#39;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01487" /><CodeLine lineNumber="1487"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(Known2.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> | Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>))</Highlight></CodeLine>
<Link id="l01488" /><CodeLine lineNumber="1488"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op0);</Highlight></CodeLine>
<Link id="l01489" /><CodeLine lineNumber="1489"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> | Known2.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>))</Highlight></CodeLine>
<Link id="l01490" /><CodeLine lineNumber="1490"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op1);</Highlight></CodeLine>
<Link id="l01491" /><CodeLine lineNumber="1491"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If all of the demanded bits in the inputs are known zeros, return zero.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01492" /><CodeLine lineNumber="1492"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> | Known2.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>))</Highlight></CodeLine>
<Link id="l01493" /><CodeLine lineNumber="1493"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getConstant(0, dl, VT));</Highlight></CodeLine>
<Link id="l01494" /><CodeLine lineNumber="1494"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the RHS is a constant, see if we can simplify it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01495" /><CodeLine lineNumber="1495"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instcombine/instcombinesimplifydemanded-cpp/#a83ba6ab779541297eb331d3a56aa7cdd">ShrinkDemandedConstant</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, ~Known2.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> &amp; DemandedBits, DemandedElts,</Highlight></CodeLine>
<Link id="l01496" /><CodeLine lineNumber="1496"><Highlight kind="normal">                               TLO))</Highlight></CodeLine>
<Link id="l01497" /><CodeLine lineNumber="1497"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01498" /><CodeLine lineNumber="1498"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the operation can be done in a smaller type, do so.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01499" /><CodeLine lineNumber="1499"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ShrinkDemandedOp(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, DemandedBits, TLO))</Highlight></CodeLine>
<Link id="l01500" /><CodeLine lineNumber="1500"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01501" /><CodeLine lineNumber="1501"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01502" /><CodeLine lineNumber="1502"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01503" /><CodeLine lineNumber="1503"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedBits.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() || !DemandedElts.isAllOnes()) &#123;</Highlight></CodeLine>
<Link id="l01504" /><CodeLine lineNumber="1504"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedOp0 = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l01505" /><CodeLine lineNumber="1505"><Highlight kind="normal">          Op0, DemandedBits, DemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l01506" /><CodeLine lineNumber="1506"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedOp1 = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l01507" /><CodeLine lineNumber="1507"><Highlight kind="normal">          Op1, DemandedBits, DemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l01508" /><CodeLine lineNumber="1508"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedOp0 || DemandedOp1) &#123;</Highlight></CodeLine>
<Link id="l01509" /><CodeLine lineNumber="1509"><Highlight kind="normal">        Op0 = DemandedOp0 ? DemandedOp0 : Op0;</Highlight></CodeLine>
<Link id="l01510" /><CodeLine lineNumber="1510"><Highlight kind="normal">        Op1 = DemandedOp1 ? DemandedOp1 : Op1;</Highlight></CodeLine>
<Link id="l01511" /><CodeLine lineNumber="1511"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode(), dl, VT, Op0, Op1);</Highlight></CodeLine>
<Link id="l01512" /><CodeLine lineNumber="1512"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l01513" /><CodeLine lineNumber="1513"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01514" /><CodeLine lineNumber="1514"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01515" /><CodeLine lineNumber="1515"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01516" /><CodeLine lineNumber="1516"><Highlight kind="normal">    Known &amp;= Known2;</Highlight></CodeLine>
<Link id="l01517" /><CodeLine lineNumber="1517"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01518" /><CodeLine lineNumber="1518"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01519" /><CodeLine lineNumber="1519"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>: &#123;</Highlight></CodeLine>
<Link id="l01520" /><CodeLine lineNumber="1520"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l01521" /><CodeLine lineNumber="1521"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l01522" /><CodeLine lineNumber="1522"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op1, DemandedBits, DemandedElts, Known, TLO,</Highlight></CodeLine>
<Link id="l01523" /><CodeLine lineNumber="1523"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1)) &#123;</Highlight></CodeLine>
<Link id="l01524" /><CodeLine lineNumber="1524"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;dropFlags(<a href="/docs/api/structs/llvm/sdnodeflags/#a19128eb1e6729dd3cf2afce783620adaa27df8f9cd44943383afc77dd0ebd5e74">SDNodeFlags::Disjoint</a>);</Highlight></CodeLine>
<Link id="l01525" /><CodeLine lineNumber="1525"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01526" /><CodeLine lineNumber="1526"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01527" /><CodeLine lineNumber="1527"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01528" /><CodeLine lineNumber="1528"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op0, ~Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a> &amp; DemandedBits, DemandedElts,</Highlight></CodeLine>
<Link id="l01529" /><CodeLine lineNumber="1529"><Highlight kind="normal">                             Known2, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1)) &#123;</Highlight></CodeLine>
<Link id="l01530" /><CodeLine lineNumber="1530"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;dropFlags(<a href="/docs/api/structs/llvm/sdnodeflags/#a19128eb1e6729dd3cf2afce783620adaa27df8f9cd44943383afc77dd0ebd5e74">SDNodeFlags::Disjoint</a>);</Highlight></CodeLine>
<Link id="l01531" /><CodeLine lineNumber="1531"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01532" /><CodeLine lineNumber="1532"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01533" /><CodeLine lineNumber="1533"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01534" /><CodeLine lineNumber="1534"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If all of the demanded bits are known zero on one side, return the other.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01535" /><CodeLine lineNumber="1535"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// These bits cannot contribute to the result of the &#39;or&#39;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01536" /><CodeLine lineNumber="1536"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(Known2.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a> | Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>))</Highlight></CodeLine>
<Link id="l01537" /><CodeLine lineNumber="1537"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op0);</Highlight></CodeLine>
<Link id="l01538" /><CodeLine lineNumber="1538"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a> | Known2.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>))</Highlight></CodeLine>
<Link id="l01539" /><CodeLine lineNumber="1539"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op1);</Highlight></CodeLine>
<Link id="l01540" /><CodeLine lineNumber="1540"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the RHS is a constant, see if we can simplify it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01541" /><CodeLine lineNumber="1541"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instcombine/instcombinesimplifydemanded-cpp/#a83ba6ab779541297eb331d3a56aa7cdd">ShrinkDemandedConstant</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedBits, DemandedElts, TLO))</Highlight></CodeLine>
<Link id="l01542" /><CodeLine lineNumber="1542"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01543" /><CodeLine lineNumber="1543"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the operation can be done in a smaller type, do so.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01544" /><CodeLine lineNumber="1544"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ShrinkDemandedOp(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, DemandedBits, TLO))</Highlight></CodeLine>
<Link id="l01545" /><CodeLine lineNumber="1545"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01546" /><CodeLine lineNumber="1546"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01547" /><CodeLine lineNumber="1547"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01548" /><CodeLine lineNumber="1548"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedBits.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() || !DemandedElts.isAllOnes()) &#123;</Highlight></CodeLine>
<Link id="l01549" /><CodeLine lineNumber="1549"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedOp0 = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l01550" /><CodeLine lineNumber="1550"><Highlight kind="normal">          Op0, DemandedBits, DemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l01551" /><CodeLine lineNumber="1551"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedOp1 = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l01552" /><CodeLine lineNumber="1552"><Highlight kind="normal">          Op1, DemandedBits, DemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l01553" /><CodeLine lineNumber="1553"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedOp0 || DemandedOp1) &#123;</Highlight></CodeLine>
<Link id="l01554" /><CodeLine lineNumber="1554"><Highlight kind="normal">        Op0 = DemandedOp0 ? DemandedOp0 : Op0;</Highlight></CodeLine>
<Link id="l01555" /><CodeLine lineNumber="1555"><Highlight kind="normal">        Op1 = DemandedOp1 ? DemandedOp1 : Op1;</Highlight></CodeLine>
<Link id="l01556" /><CodeLine lineNumber="1556"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode(), dl, VT, Op0, Op1);</Highlight></CodeLine>
<Link id="l01557" /><CodeLine lineNumber="1557"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l01558" /><CodeLine lineNumber="1558"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01559" /><CodeLine lineNumber="1559"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01560" /><CodeLine lineNumber="1560"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01561" /><CodeLine lineNumber="1561"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// (or (and X, C1), (and (or X, Y), C2)) -&gt; (or (and X, C1|C2), (and Y, C2))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01562" /><CodeLine lineNumber="1562"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO: Use SimplifyMultipleUseDemandedBits to peek through masks.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01563" /><CodeLine lineNumber="1563"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a> &amp;&amp; Op1.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l01564" /><CodeLine lineNumber="1564"><Highlight kind="normal">        Op0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a295d0b84f4e63438c0edb0021c41d47a">hasOneUse</a>() &amp;&amp; Op1-&gt;<a href="/docs/api/classes/llvm/sdnode/#a295d0b84f4e63438c0edb0021c41d47a">hasOneUse</a>()) &#123;</Highlight></CodeLine>
<Link id="l01565" /><CodeLine lineNumber="1565"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Attempt to match all commutations - m&#95;c&#95;Or would&#39;ve been useful!</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01566" /><CodeLine lineNumber="1566"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != 2; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</Highlight></CodeLine>
<Link id="l01567" /><CodeLine lineNumber="1567"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>).getOperand(0);</Highlight></CodeLine>
<Link id="l01568" /><CodeLine lineNumber="1568"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> C1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>).getOperand(1);</Highlight></CodeLine>
<Link id="l01569" /><CodeLine lineNumber="1569"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Alt = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1 - <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>).getOperand(0);</Highlight></CodeLine>
<Link id="l01570" /><CodeLine lineNumber="1570"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> C2 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1 - <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>).getOperand(1);</Highlight></CodeLine>
<Link id="l01571" /><CodeLine lineNumber="1571"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Alt.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>) &#123;</Highlight></CodeLine>
<Link id="l01572" /><CodeLine lineNumber="1572"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> J = 0; J != 2; ++J) &#123;</Highlight></CodeLine>
<Link id="l01573" /><CodeLine lineNumber="1573"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> == Alt.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(J)) &#123;</Highlight></CodeLine>
<Link id="l01574" /><CodeLine lineNumber="1574"><Highlight kind="normal">              <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = Alt.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1 - J);</Highlight></CodeLine>
<Link id="l01575" /><CodeLine lineNumber="1575"><Highlight kind="normal">              </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> C12 = TLO.DAG.FoldConstantArithmetic(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT,</Highlight></CodeLine>
<Link id="l01576" /><CodeLine lineNumber="1576"><Highlight kind="normal">                                                               &#123;C1, C2&#125;)) &#123;</Highlight></CodeLine>
<Link id="l01577" /><CodeLine lineNumber="1577"><Highlight kind="normal">                <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> MaskX = TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, C12);</Highlight></CodeLine>
<Link id="l01578" /><CodeLine lineNumber="1578"><Highlight kind="normal">                <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> MaskY = TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, C2);</Highlight></CodeLine>
<Link id="l01579" /><CodeLine lineNumber="1579"><Highlight kind="normal">                </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(</Highlight></CodeLine>
<Link id="l01580" /><CodeLine lineNumber="1580"><Highlight kind="normal">                    <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, MaskX, MaskY));</Highlight></CodeLine>
<Link id="l01581" /><CodeLine lineNumber="1581"><Highlight kind="normal">              &#125;</Highlight></CodeLine>
<Link id="l01582" /><CodeLine lineNumber="1582"><Highlight kind="normal">            &#125;</Highlight></CodeLine>
<Link id="l01583" /><CodeLine lineNumber="1583"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l01584" /><CodeLine lineNumber="1584"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01585" /><CodeLine lineNumber="1585"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01586" /><CodeLine lineNumber="1586"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01587" /><CodeLine lineNumber="1587"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01588" /><CodeLine lineNumber="1588"><Highlight kind="normal">    Known |= Known2;</Highlight></CodeLine>
<Link id="l01589" /><CodeLine lineNumber="1589"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01590" /><CodeLine lineNumber="1590"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01591" /><CodeLine lineNumber="1591"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>: &#123;</Highlight></CodeLine>
<Link id="l01592" /><CodeLine lineNumber="1592"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l01593" /><CodeLine lineNumber="1593"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l01594" /><CodeLine lineNumber="1594"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01595" /><CodeLine lineNumber="1595"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op1, DemandedBits, DemandedElts, Known, TLO,</Highlight></CodeLine>
<Link id="l01596" /><CodeLine lineNumber="1596"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01597" /><CodeLine lineNumber="1597"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01598" /><CodeLine lineNumber="1598"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op0, DemandedBits, DemandedElts, Known2, TLO,</Highlight></CodeLine>
<Link id="l01599" /><CodeLine lineNumber="1599"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01600" /><CodeLine lineNumber="1600"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01601" /><CodeLine lineNumber="1601"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01602" /><CodeLine lineNumber="1602"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If all of the demanded bits are known zero on one side, return the other.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01603" /><CodeLine lineNumber="1603"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// These bits cannot contribute to the result of the &#39;xor&#39;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01604" /><CodeLine lineNumber="1604"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>))</Highlight></CodeLine>
<Link id="l01605" /><CodeLine lineNumber="1605"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op0);</Highlight></CodeLine>
<Link id="l01606" /><CodeLine lineNumber="1606"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(Known2.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>))</Highlight></CodeLine>
<Link id="l01607" /><CodeLine lineNumber="1607"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op1);</Highlight></CodeLine>
<Link id="l01608" /><CodeLine lineNumber="1608"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the operation can be done in a smaller type, do so.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01609" /><CodeLine lineNumber="1609"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ShrinkDemandedOp(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, DemandedBits, TLO))</Highlight></CodeLine>
<Link id="l01610" /><CodeLine lineNumber="1610"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01611" /><CodeLine lineNumber="1611"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01612" /><CodeLine lineNumber="1612"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If all of the unknown bits are known to be zero on one side or the other</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01613" /><CodeLine lineNumber="1613"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// turn this into an &#42;inclusive&#42; or.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01614" /><CodeLine lineNumber="1614"><Highlight kind="normal">    </Highlight><Highlight kind="comment">//    e.g. (A &amp; C1)^(B &amp; C2) -&gt; (A &amp; C1)|(B &amp; C2) iff C1&amp;C2 == 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01615" /><CodeLine lineNumber="1615"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> | Known2.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>))</Highlight></CodeLine>
<Link id="l01616" /><CodeLine lineNumber="1616"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, Op0, Op1));</Highlight></CodeLine>
<Link id="l01617" /><CodeLine lineNumber="1617"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01618" /><CodeLine lineNumber="1618"><Highlight kind="normal">    ConstantSDNode &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(Op1, DemandedElts);</Highlight></CodeLine>
<Link id="l01619" /><CodeLine lineNumber="1619"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l01620" /><CodeLine lineNumber="1620"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If one side is a constant, and all of the set bits in the constant are</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01621" /><CodeLine lineNumber="1621"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// also known set on the other side, turn this into an AND, as we know</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01622" /><CodeLine lineNumber="1622"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// the bits will be cleared.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01623" /><CodeLine lineNumber="1623"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//    e.g. (X | C1) ^ C2 --&gt; (X | C1) &amp; ~C2 iff (C1&amp;C2) == C2</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01624" /><CodeLine lineNumber="1624"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// NB: it is okay if more bits are known than are requested</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01625" /><CodeLine lineNumber="1625"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getAPIntValue() == Known2.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>) &#123;</Highlight></CodeLine>
<Link id="l01626" /><CodeLine lineNumber="1626"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ANDC =</Highlight></CodeLine>
<Link id="l01627" /><CodeLine lineNumber="1627"><Highlight kind="normal">            TLO.DAG.getConstant(~<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getAPIntValue() &amp; DemandedBits, dl, VT);</Highlight></CodeLine>
<Link id="l01628" /><CodeLine lineNumber="1628"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, Op0, ANDC));</Highlight></CodeLine>
<Link id="l01629" /><CodeLine lineNumber="1629"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01630" /><CodeLine lineNumber="1630"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01631" /><CodeLine lineNumber="1631"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If the RHS is a constant, see if we can change it. Don&#39;t alter a -1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01632" /><CodeLine lineNumber="1632"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// constant because that&#39;s a &#39;not&#39; op, and that is better for combining</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01633" /><CodeLine lineNumber="1633"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// and codegen.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01634" /><CodeLine lineNumber="1634"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;isAllOnes() &amp;&amp; DemandedBits.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getAPIntValue())) &#123;</Highlight></CodeLine>
<Link id="l01635" /><CodeLine lineNumber="1635"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// We&#39;re flipping all demanded bits. Flip the undemanded bits too.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01636" /><CodeLine lineNumber="1636"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/ms-demangle/#a851a17f7dc73f9988807242926dcc645a03c2e7e41ffc181a4e84080b4710e81e">New</a> = TLO.DAG.getNOT(dl, Op0, VT);</Highlight></CodeLine>
<Link id="l01637" /><CodeLine lineNumber="1637"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, New);</Highlight></CodeLine>
<Link id="l01638" /><CodeLine lineNumber="1638"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01639" /><CodeLine lineNumber="1639"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01640" /><CodeLine lineNumber="1640"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Op0Opcode = Op0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>();</Highlight></CodeLine>
<Link id="l01641" /><CodeLine lineNumber="1641"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((Op0Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a> || Op0Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>) &amp;&amp; Op0.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>()) &#123;</Highlight></CodeLine>
<Link id="l01642" /><CodeLine lineNumber="1642"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ConstantSDNode &#42;ShiftC =</Highlight></CodeLine>
<Link id="l01643" /><CodeLine lineNumber="1643"><Highlight kind="normal">                <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1), DemandedElts)) &#123;</Highlight></CodeLine>
<Link id="l01644" /><CodeLine lineNumber="1644"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Don&#39;t crash on an oversized shift. We can not guarantee that a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01645" /><CodeLine lineNumber="1645"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// bogus shift has been simplified to undef.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01646" /><CodeLine lineNumber="1646"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ShiftC-&gt;getAPIntValue().ult(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>)) &#123;</Highlight></CodeLine>
<Link id="l01647" /><CodeLine lineNumber="1647"><Highlight kind="normal">            uint64&#95;t ShiftAmt = ShiftC-&gt;getZExtValue();</Highlight></CodeLine>
<Link id="l01648" /><CodeLine lineNumber="1648"><Highlight kind="normal">            APInt Ones = <a href="/docs/api/classes/llvm/apint/#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l01649" /><CodeLine lineNumber="1649"><Highlight kind="normal">            Ones = Op0Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a> ? Ones.<a href="/docs/api/classes/llvm/apint/#acb9c55b6986369948507ca5241b4e411">shl</a>(ShiftAmt)</Highlight></CodeLine>
<Link id="l01650" /><CodeLine lineNumber="1650"><Highlight kind="normal">                                         : Ones.<a href="/docs/api/classes/llvm/apint/#af34549c39d6f741fbdaf9a795aa306e9">lshr</a>(ShiftAmt);</Highlight></CodeLine>
<Link id="l01651" /><CodeLine lineNumber="1651"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((DemandedBits &amp; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getAPIntValue()) == (DemandedBits &amp; Ones) &amp;&amp;</Highlight></CodeLine>
<Link id="l01652" /><CodeLine lineNumber="1652"><Highlight kind="normal">                isDesirableToCommuteXorWithShift(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getNode())) &#123;</Highlight></CodeLine>
<Link id="l01653" /><CodeLine lineNumber="1653"><Highlight kind="normal">              </Highlight><Highlight kind="comment">// If the xor constant is a demanded mask, do a &#39;not&#39; before the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01654" /><CodeLine lineNumber="1654"><Highlight kind="normal">              </Highlight><Highlight kind="comment">// shift:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01655" /><CodeLine lineNumber="1655"><Highlight kind="normal">              </Highlight><Highlight kind="comment">// xor (X &lt;&lt; ShiftC), XorC --&gt; (not X) &lt;&lt; ShiftC</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01656" /><CodeLine lineNumber="1656"><Highlight kind="normal">              </Highlight><Highlight kind="comment">// xor (X &gt;&gt; ShiftC), XorC --&gt; (not X) &gt;&gt; ShiftC</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01657" /><CodeLine lineNumber="1657"><Highlight kind="normal">              <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/sdpatternmatch/#aee6b56ccafeac80e7ebd6b84ee5048c1">Not</a> = TLO.DAG.getNOT(dl, Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), VT);</Highlight></CodeLine>
<Link id="l01658" /><CodeLine lineNumber="1658"><Highlight kind="normal">              </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(Op0Opcode, dl, VT, Not,</Highlight></CodeLine>
<Link id="l01659" /><CodeLine lineNumber="1659"><Highlight kind="normal">                                                       Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1)));</Highlight></CodeLine>
<Link id="l01660" /><CodeLine lineNumber="1660"><Highlight kind="normal">            &#125;</Highlight></CodeLine>
<Link id="l01661" /><CodeLine lineNumber="1661"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l01662" /><CodeLine lineNumber="1662"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01663" /><CodeLine lineNumber="1663"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01664" /><CodeLine lineNumber="1664"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01665" /><CodeLine lineNumber="1665"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01666" /><CodeLine lineNumber="1666"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we can&#39;t turn this into a &#39;not&#39;, try to shrink the constant.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01667" /><CodeLine lineNumber="1667"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> || !<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;isAllOnes())</Highlight></CodeLine>
<Link id="l01668" /><CodeLine lineNumber="1668"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instcombine/instcombinesimplifydemanded-cpp/#a83ba6ab779541297eb331d3a56aa7cdd">ShrinkDemandedConstant</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedBits, DemandedElts, TLO))</Highlight></CodeLine>
<Link id="l01669" /><CodeLine lineNumber="1669"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01670" /><CodeLine lineNumber="1670"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01671" /><CodeLine lineNumber="1671"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01672" /><CodeLine lineNumber="1672"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedBits.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() || !DemandedElts.isAllOnes()) &#123;</Highlight></CodeLine>
<Link id="l01673" /><CodeLine lineNumber="1673"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedOp0 = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l01674" /><CodeLine lineNumber="1674"><Highlight kind="normal">          Op0, DemandedBits, DemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l01675" /><CodeLine lineNumber="1675"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedOp1 = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l01676" /><CodeLine lineNumber="1676"><Highlight kind="normal">          Op1, DemandedBits, DemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l01677" /><CodeLine lineNumber="1677"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedOp0 || DemandedOp1) &#123;</Highlight></CodeLine>
<Link id="l01678" /><CodeLine lineNumber="1678"><Highlight kind="normal">        Op0 = DemandedOp0 ? DemandedOp0 : Op0;</Highlight></CodeLine>
<Link id="l01679" /><CodeLine lineNumber="1679"><Highlight kind="normal">        Op1 = DemandedOp1 ? DemandedOp1 : Op1;</Highlight></CodeLine>
<Link id="l01680" /><CodeLine lineNumber="1680"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode(), dl, VT, Op0, Op1);</Highlight></CodeLine>
<Link id="l01681" /><CodeLine lineNumber="1681"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l01682" /><CodeLine lineNumber="1682"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01683" /><CodeLine lineNumber="1683"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01684" /><CodeLine lineNumber="1684"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01685" /><CodeLine lineNumber="1685"><Highlight kind="normal">    Known ^= Known2;</Highlight></CodeLine>
<Link id="l01686" /><CodeLine lineNumber="1686"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01687" /><CodeLine lineNumber="1687"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01688" /><CodeLine lineNumber="1688"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a78d0f198115bfe3331ab7cfcf7a40a97">ISD::SELECT</a>:</Highlight></CodeLine>
<Link id="l01689" /><CodeLine lineNumber="1689"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(2), DemandedBits, DemandedElts,</Highlight></CodeLine>
<Link id="l01690" /><CodeLine lineNumber="1690"><Highlight kind="normal">                             Known, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01691" /><CodeLine lineNumber="1691"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01692" /><CodeLine lineNumber="1692"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1), DemandedBits, DemandedElts,</Highlight></CodeLine>
<Link id="l01693" /><CodeLine lineNumber="1693"><Highlight kind="normal">                             Known2, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01694" /><CodeLine lineNumber="1694"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01695" /><CodeLine lineNumber="1695"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01696" /><CodeLine lineNumber="1696"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the operands are constants, see if we can simplify them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01697" /><CodeLine lineNumber="1697"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instcombine/instcombinesimplifydemanded-cpp/#a83ba6ab779541297eb331d3a56aa7cdd">ShrinkDemandedConstant</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedBits, DemandedElts, TLO))</Highlight></CodeLine>
<Link id="l01698" /><CodeLine lineNumber="1698"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01699" /><CodeLine lineNumber="1699"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01700" /><CodeLine lineNumber="1700"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Only known if known in both the LHS and RHS.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01701" /><CodeLine lineNumber="1701"><Highlight kind="normal">    Known = Known.<a href="/docs/api/structs/llvm/knownbits/#a76e45a40f2f0b5b09132d1de119765e8">intersectWith</a>(Known2);</Highlight></CodeLine>
<Link id="l01702" /><CodeLine lineNumber="1702"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01703" /><CodeLine lineNumber="1703"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0b7d2c769fd0fbaab3c4a2fc8e7ea0c">ISD::VSELECT</a>:</Highlight></CodeLine>
<Link id="l01704" /><CodeLine lineNumber="1704"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(2), DemandedBits, DemandedElts,</Highlight></CodeLine>
<Link id="l01705" /><CodeLine lineNumber="1705"><Highlight kind="normal">                             Known, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01706" /><CodeLine lineNumber="1706"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01707" /><CodeLine lineNumber="1707"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1), DemandedBits, DemandedElts,</Highlight></CodeLine>
<Link id="l01708" /><CodeLine lineNumber="1708"><Highlight kind="normal">                             Known2, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01709" /><CodeLine lineNumber="1709"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01710" /><CodeLine lineNumber="1710"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01711" /><CodeLine lineNumber="1711"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Only known if known in both the LHS and RHS.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01712" /><CodeLine lineNumber="1712"><Highlight kind="normal">    Known = Known.<a href="/docs/api/structs/llvm/knownbits/#a76e45a40f2f0b5b09132d1de119765e8">intersectWith</a>(Known2);</Highlight></CodeLine>
<Link id="l01713" /><CodeLine lineNumber="1713"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01714" /><CodeLine lineNumber="1714"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a99ad6b342b7457df56b91d24e66016b3">ISD::SELECT&#95;CC</a>:</Highlight></CodeLine>
<Link id="l01715" /><CodeLine lineNumber="1715"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(3), DemandedBits, DemandedElts,</Highlight></CodeLine>
<Link id="l01716" /><CodeLine lineNumber="1716"><Highlight kind="normal">                             Known, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01717" /><CodeLine lineNumber="1717"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01718" /><CodeLine lineNumber="1718"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(2), DemandedBits, DemandedElts,</Highlight></CodeLine>
<Link id="l01719" /><CodeLine lineNumber="1719"><Highlight kind="normal">                             Known2, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l01720" /><CodeLine lineNumber="1720"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01721" /><CodeLine lineNumber="1721"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01722" /><CodeLine lineNumber="1722"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the operands are constants, see if we can simplify them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01723" /><CodeLine lineNumber="1723"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/transforms/lib/transforms/instcombine/instcombinesimplifydemanded-cpp/#a83ba6ab779541297eb331d3a56aa7cdd">ShrinkDemandedConstant</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedBits, DemandedElts, TLO))</Highlight></CodeLine>
<Link id="l01724" /><CodeLine lineNumber="1724"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01725" /><CodeLine lineNumber="1725"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01726" /><CodeLine lineNumber="1726"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Only known if known in both the LHS and RHS.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01727" /><CodeLine lineNumber="1727"><Highlight kind="normal">    Known = Known.<a href="/docs/api/structs/llvm/knownbits/#a76e45a40f2f0b5b09132d1de119765e8">intersectWith</a>(Known2);</Highlight></CodeLine>
<Link id="l01728" /><CodeLine lineNumber="1728"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01729" /><CodeLine lineNumber="1729"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0158ee47dfa868be5d28e2cbef70d5d0">ISD::SETCC</a>: &#123;</Highlight></CodeLine>
<Link id="l01730" /><CodeLine lineNumber="1730"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l01731" /><CodeLine lineNumber="1731"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l01732" /><CodeLine lineNumber="1732"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;CondCodeSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(2))-&gt;get();</Highlight></CodeLine>
<Link id="l01733" /><CodeLine lineNumber="1733"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If (1) we only need the sign-bit, (2) the setcc operands are the same</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01734" /><CodeLine lineNumber="1734"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// width as the setcc result, and (3) the result of a setcc conforms to 0 or</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01735" /><CodeLine lineNumber="1735"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// -1, we may be able to bypass the setcc.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01736" /><CodeLine lineNumber="1736"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#a4aa7e7ca8ab4093fd0dbadb223b998c0">isSignMask</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l01737" /><CodeLine lineNumber="1737"><Highlight kind="normal">        Op0.<a href="/docs/api/classes/llvm/sdvalue/#abd46b9ca1d156bc7e3dd9150cc106a28">getScalarValueSizeInBits</a>() == <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l01738" /><CodeLine lineNumber="1738"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(Op0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()) ==</Highlight></CodeLine>
<Link id="l01739" /><CodeLine lineNumber="1739"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a695a19c9c3ae14638be151add82755cb">BooleanContent::ZeroOrNegativeOneBooleanContent</a>) &#123;</Highlight></CodeLine>
<Link id="l01740" /><CodeLine lineNumber="1740"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If we&#39;re testing X &lt; 0, then this compare isn&#39;t needed - just use X!</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01741" /><CodeLine lineNumber="1741"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// FIXME: We&#39;re limiting to integer types here, but this should also work</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01742" /><CodeLine lineNumber="1742"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// if we don&#39;t care about FP signed-zero. The use of SETLT with FP means</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01743" /><CodeLine lineNumber="1743"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// that we don&#39;t care about NaNs.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01744" /><CodeLine lineNumber="1744"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a> &amp;&amp; Op1.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>().<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l01745" /><CodeLine lineNumber="1745"><Highlight kind="normal">          (<a href="/docs/api/namespaces/llvm/#a1a86775f3d85d98a31b2751e1eb348ea">isNullConstant</a>(Op1) || <a href="/docs/api/namespaces/llvm/isd/#aaac3e239cbdfe15a8e9bad4f8e1e3a95">ISD::isBuildVectorAllZeros</a>(Op1.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>())))</Highlight></CodeLine>
<Link id="l01746" /><CodeLine lineNumber="1746"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op0);</Highlight></CodeLine>
<Link id="l01747" /><CodeLine lineNumber="1747"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01748" /><CodeLine lineNumber="1748"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// TODO: Should we check for other forms of sign-bit comparisons?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01749" /><CodeLine lineNumber="1749"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Examples: X &lt;= -1, X &gt;= 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01750" /><CodeLine lineNumber="1750"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01751" /><CodeLine lineNumber="1751"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(Op0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()) ==</Highlight></CodeLine>
<Link id="l01752" /><CodeLine lineNumber="1752"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a0e2d72cfdcc49d2d189f440b3cc31dff">TargetLowering::ZeroOrOneBooleanContent</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l01753" /><CodeLine lineNumber="1753"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> &gt; 1)</Highlight></CodeLine>
<Link id="l01754" /><CodeLine lineNumber="1754"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>.<a href="/docs/api/classes/llvm/apint/#a286d4fa2a50c9ac6ac3a8069cccfcd0c">setBitsFrom</a>(1);</Highlight></CodeLine>
<Link id="l01755" /><CodeLine lineNumber="1755"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01756" /><CodeLine lineNumber="1756"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01757" /><CodeLine lineNumber="1757"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>: &#123;</Highlight></CodeLine>
<Link id="l01758" /><CodeLine lineNumber="1758"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l01759" /><CodeLine lineNumber="1759"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l01760" /><CodeLine lineNumber="1760"><Highlight kind="normal">    EVT ShiftVT = Op1.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l01761" /><CodeLine lineNumber="1761"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01762" /><CodeLine lineNumber="1762"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;uint64&#95;t&gt; KnownSA =</Highlight></CodeLine>
<Link id="l01763" /><CodeLine lineNumber="1763"><Highlight kind="normal">            TLO.DAG.getValidShiftAmount(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1)) &#123;</Highlight></CodeLine>
<Link id="l01764" /><CodeLine lineNumber="1764"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShAmt = &#42;KnownSA;</Highlight></CodeLine>
<Link id="l01765" /><CodeLine lineNumber="1765"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ShAmt == 0)</Highlight></CodeLine>
<Link id="l01766" /><CodeLine lineNumber="1766"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op0);</Highlight></CodeLine>
<Link id="l01767" /><CodeLine lineNumber="1767"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01768" /><CodeLine lineNumber="1768"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If this is ((X &gt;&gt;u C1) &lt;&lt; ShAmt), see if we can simplify this into a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01769" /><CodeLine lineNumber="1769"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// single shift.  We can do this if the bottom bits (which are shifted</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01770" /><CodeLine lineNumber="1770"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// out) are never demanded.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01771" /><CodeLine lineNumber="1771"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// TODO - support non-uniform vector amounts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01772" /><CodeLine lineNumber="1772"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>) &#123;</Highlight></CodeLine>
<Link id="l01773" /><CodeLine lineNumber="1773"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedBits.<a href="/docs/api/classes/llvm/apint/#a6da514c588b2668280a861a59bfc9fa5">intersects</a>(<a href="/docs/api/classes/llvm/apint/#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, ShAmt))) &#123;</Highlight></CodeLine>
<Link id="l01774" /><CodeLine lineNumber="1774"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;uint64&#95;t&gt; InnerSA =</Highlight></CodeLine>
<Link id="l01775" /><CodeLine lineNumber="1775"><Highlight kind="normal">                  TLO.DAG.getValidShiftAmount(Op0, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 2)) &#123;</Highlight></CodeLine>
<Link id="l01776" /><CodeLine lineNumber="1776"><Highlight kind="normal">            </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> C1 = &#42;InnerSA;</Highlight></CodeLine>
<Link id="l01777" /><CodeLine lineNumber="1777"><Highlight kind="normal">            </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opc = <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>;</Highlight></CodeLine>
<Link id="l01778" /><CodeLine lineNumber="1778"><Highlight kind="normal">            </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> Diff = ShAmt - C1;</Highlight></CodeLine>
<Link id="l01779" /><CodeLine lineNumber="1779"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Diff &lt; 0) &#123;</Highlight></CodeLine>
<Link id="l01780" /><CodeLine lineNumber="1780"><Highlight kind="normal">              Diff = -Diff;</Highlight></CodeLine>
<Link id="l01781" /><CodeLine lineNumber="1781"><Highlight kind="normal">              Opc = <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>;</Highlight></CodeLine>
<Link id="l01782" /><CodeLine lineNumber="1782"><Highlight kind="normal">            &#125;</Highlight></CodeLine>
<Link id="l01783" /><CodeLine lineNumber="1783"><Highlight kind="normal">            <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewSA = TLO.DAG.getConstant(Diff, dl, ShiftVT);</Highlight></CodeLine>
<Link id="l01784" /><CodeLine lineNumber="1784"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(</Highlight></CodeLine>
<Link id="l01785" /><CodeLine lineNumber="1785"><Highlight kind="normal">                <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(Opc, dl, VT, Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), NewSA));</Highlight></CodeLine>
<Link id="l01786" /><CodeLine lineNumber="1786"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l01787" /><CodeLine lineNumber="1787"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01788" /><CodeLine lineNumber="1788"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01789" /><CodeLine lineNumber="1789"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01790" /><CodeLine lineNumber="1790"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Convert (shl (anyext x, c)) to (anyext (shl x, c)) if the high bits</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01791" /><CodeLine lineNumber="1791"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// are not demanded. This will likely allow the anyext to be folded away.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01792" /><CodeLine lineNumber="1792"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// TODO - support non-uniform vector amounts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01793" /><CodeLine lineNumber="1793"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">ISD::ANY&#95;EXTEND</a>) &#123;</Highlight></CodeLine>
<Link id="l01794" /><CodeLine lineNumber="1794"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> InnerOp = Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l01795" /><CodeLine lineNumber="1795"><Highlight kind="normal">        EVT InnerVT = InnerOp.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l01796" /><CodeLine lineNumber="1796"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> InnerBits = InnerVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l01797" /><CodeLine lineNumber="1797"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ShAmt &lt; InnerBits &amp;&amp; DemandedBits.<a href="/docs/api/classes/llvm/apint/#a3015474e70e59c0a3ed4f9f0e8644b75">getActiveBits</a>() &lt;= InnerBits &amp;&amp;</Highlight></CodeLine>
<Link id="l01798" /><CodeLine lineNumber="1798"><Highlight kind="normal">            isTypeDesirableForOp(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, InnerVT)) &#123;</Highlight></CodeLine>
<Link id="l01799" /><CodeLine lineNumber="1799"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NarrowShl = TLO.DAG.getNode(</Highlight></CodeLine>
<Link id="l01800" /><CodeLine lineNumber="1800"><Highlight kind="normal">              <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, InnerVT, InnerOp,</Highlight></CodeLine>
<Link id="l01801" /><CodeLine lineNumber="1801"><Highlight kind="normal">              TLO.DAG.getShiftAmountConstant(ShAmt, InnerVT, dl));</Highlight></CodeLine>
<Link id="l01802" /><CodeLine lineNumber="1802"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(</Highlight></CodeLine>
<Link id="l01803" /><CodeLine lineNumber="1803"><Highlight kind="normal">              <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">ISD::ANY&#95;EXTEND</a>, dl, VT, NarrowShl));</Highlight></CodeLine>
<Link id="l01804" /><CodeLine lineNumber="1804"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01805" /><CodeLine lineNumber="1805"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01806" /><CodeLine lineNumber="1806"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Repeat the SHL optimization above in cases where an extension</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01807" /><CodeLine lineNumber="1807"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// intervenes: (shl (anyext (shr x, c1)), c2) to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01808" /><CodeLine lineNumber="1808"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// (shl (anyext x), c2-c1).  This requires that the bottom c1 bits</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01809" /><CodeLine lineNumber="1809"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// aren&#39;t demanded (as above) and that the shifted upper c1 bits of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01810" /><CodeLine lineNumber="1810"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// x aren&#39;t demanded.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01811" /><CodeLine lineNumber="1811"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// TODO - support non-uniform vector amounts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01812" /><CodeLine lineNumber="1812"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (InnerOp.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a> &amp;&amp; Op0.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l01813" /><CodeLine lineNumber="1813"><Highlight kind="normal">            InnerOp.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>()) &#123;</Highlight></CodeLine>
<Link id="l01814" /><CodeLine lineNumber="1814"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;uint64&#95;t&gt; SA2 = TLO.DAG.getValidShiftAmount(</Highlight></CodeLine>
<Link id="l01815" /><CodeLine lineNumber="1815"><Highlight kind="normal">                  InnerOp, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 2)) &#123;</Highlight></CodeLine>
<Link id="l01816" /><CodeLine lineNumber="1816"><Highlight kind="normal">            </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> InnerShAmt = &#42;SA2;</Highlight></CodeLine>
<Link id="l01817" /><CodeLine lineNumber="1817"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (InnerShAmt &lt; ShAmt &amp;&amp; InnerShAmt &lt; InnerBits &amp;&amp;</Highlight></CodeLine>
<Link id="l01818" /><CodeLine lineNumber="1818"><Highlight kind="normal">                DemandedBits.<a href="/docs/api/classes/llvm/apint/#a3015474e70e59c0a3ed4f9f0e8644b75">getActiveBits</a>() &lt;=</Highlight></CodeLine>
<Link id="l01819" /><CodeLine lineNumber="1819"><Highlight kind="normal">                    (InnerBits - InnerShAmt + ShAmt) &amp;&amp;</Highlight></CodeLine>
<Link id="l01820" /><CodeLine lineNumber="1820"><Highlight kind="normal">                DemandedBits.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>() &gt;= ShAmt) &#123;</Highlight></CodeLine>
<Link id="l01821" /><CodeLine lineNumber="1821"><Highlight kind="normal">              <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewSA =</Highlight></CodeLine>
<Link id="l01822" /><CodeLine lineNumber="1822"><Highlight kind="normal">                  TLO.DAG.getConstant(ShAmt - InnerShAmt, dl, ShiftVT);</Highlight></CodeLine>
<Link id="l01823" /><CodeLine lineNumber="1823"><Highlight kind="normal">              <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewExt = TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">ISD::ANY&#95;EXTEND</a>, dl, VT,</Highlight></CodeLine>
<Link id="l01824" /><CodeLine lineNumber="1824"><Highlight kind="normal">                                               InnerOp.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0));</Highlight></CodeLine>
<Link id="l01825" /><CodeLine lineNumber="1825"><Highlight kind="normal">              </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(</Highlight></CodeLine>
<Link id="l01826" /><CodeLine lineNumber="1826"><Highlight kind="normal">                  <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, NewExt, NewSA));</Highlight></CodeLine>
<Link id="l01827" /><CodeLine lineNumber="1827"><Highlight kind="normal">            &#125;</Highlight></CodeLine>
<Link id="l01828" /><CodeLine lineNumber="1828"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l01829" /><CodeLine lineNumber="1829"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01830" /><CodeLine lineNumber="1830"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01831" /><CodeLine lineNumber="1831"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01832" /><CodeLine lineNumber="1832"><Highlight kind="normal">      APInt InDemandedMask = DemandedBits.<a href="/docs/api/classes/llvm/apint/#af34549c39d6f741fbdaf9a795aa306e9">lshr</a>(ShAmt);</Highlight></CodeLine>
<Link id="l01833" /><CodeLine lineNumber="1833"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op0, InDemandedMask, DemandedElts, Known, TLO,</Highlight></CodeLine>
<Link id="l01834" /><CodeLine lineNumber="1834"><Highlight kind="normal">                               <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1)) &#123;</Highlight></CodeLine>
<Link id="l01835" /><CodeLine lineNumber="1835"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Disable the nsw and nuw flags. We can no longer guarantee that we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01836" /><CodeLine lineNumber="1836"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// won&#39;t wrap after simplification.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01837" /><CodeLine lineNumber="1837"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;dropFlags(<a href="/docs/api/structs/llvm/sdnodeflags/#a19128eb1e6729dd3cf2afce783620adaa21673a00231c98385c57bd2eb12b94b1">SDNodeFlags::NoWrap</a>);</Highlight></CodeLine>
<Link id="l01838" /><CodeLine lineNumber="1838"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01839" /><CodeLine lineNumber="1839"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01840" /><CodeLine lineNumber="1840"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> &lt;&lt;= ShAmt;</Highlight></CodeLine>
<Link id="l01841" /><CodeLine lineNumber="1841"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a> &lt;&lt;= ShAmt;</Highlight></CodeLine>
<Link id="l01842" /><CodeLine lineNumber="1842"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// low bits known zero.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01843" /><CodeLine lineNumber="1843"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>.<a href="/docs/api/classes/llvm/apint/#ade8e20ecea1091e835395746448e262e">setLowBits</a>(ShAmt);</Highlight></CodeLine>
<Link id="l01844" /><CodeLine lineNumber="1844"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01845" /><CodeLine lineNumber="1845"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01846" /><CodeLine lineNumber="1846"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!InDemandedMask.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() || !DemandedElts.isAllOnes()) &#123;</Highlight></CodeLine>
<Link id="l01847" /><CodeLine lineNumber="1847"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedOp0 = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l01848" /><CodeLine lineNumber="1848"><Highlight kind="normal">            Op0, InDemandedMask, DemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l01849" /><CodeLine lineNumber="1849"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedOp0) &#123;</Highlight></CodeLine>
<Link id="l01850" /><CodeLine lineNumber="1850"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, DemandedOp0, Op1);</Highlight></CodeLine>
<Link id="l01851" /><CodeLine lineNumber="1851"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l01852" /><CodeLine lineNumber="1852"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01853" /><CodeLine lineNumber="1853"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01854" /><CodeLine lineNumber="1854"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01855" /><CodeLine lineNumber="1855"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// TODO: Can we merge this fold with the one below?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01856" /><CodeLine lineNumber="1856"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Try shrinking the operation as long as the shift amount will still be</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01857" /><CodeLine lineNumber="1857"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// in range.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01858" /><CodeLine lineNumber="1858"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ShAmt &lt; DemandedBits.<a href="/docs/api/classes/llvm/apint/#a3015474e70e59c0a3ed4f9f0e8644b75">getActiveBits</a>() &amp;&amp; !VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l01859" /><CodeLine lineNumber="1859"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getNode()-&gt;hasOneUse()) &#123;</Highlight></CodeLine>
<Link id="l01860" /><CodeLine lineNumber="1860"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Search for the smallest integer type with free casts to and from</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01861" /><CodeLine lineNumber="1861"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Op&#39;s type. For expedience, just check power-of-2 integer types.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01862" /><CodeLine lineNumber="1862"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> DemandedSize = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a3015474e70e59c0a3ed4f9f0e8644b75">getActiveBits</a>();</Highlight></CodeLine>
<Link id="l01863" /><CodeLine lineNumber="1863"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SmallVTBits = <a href="/docs/api/namespaces/llvm/#a4cc11b26432f9343b3c532f06171ad04">llvm::bit&#95;ceil</a>(DemandedSize);</Highlight></CodeLine>
<Link id="l01864" /><CodeLine lineNumber="1864"><Highlight kind="normal">             SmallVTBits &lt; <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>; SmallVTBits = <a href="/docs/api/namespaces/llvm/#afb65eef479f0473d0fe1666b80155237">NextPowerOf2</a>(SmallVTBits)) &#123;</Highlight></CodeLine>
<Link id="l01865" /><CodeLine lineNumber="1865"><Highlight kind="normal">          EVT SmallVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;TLO.DAG.getContext(), SmallVTBits);</Highlight></CodeLine>
<Link id="l01866" /><CodeLine lineNumber="1866"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aafb5c7d833aa31d38df4f426bde5c3e7">isNarrowingProfitable</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getNode(), VT, SmallVT) &amp;&amp;</Highlight></CodeLine>
<Link id="l01867" /><CodeLine lineNumber="1867"><Highlight kind="normal">              isTypeDesirableForOp(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, SmallVT) &amp;&amp;</Highlight></CodeLine>
<Link id="l01868" /><CodeLine lineNumber="1868"><Highlight kind="normal">              <a href="/docs/api/classes/llvm/targetloweringbase/#a6f992bc4ca89f1b5f0b34f5b29978c31">isTruncateFree</a>(VT, SmallVT) &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a342be90695496b88a8854a775dfd030f">isZExtFree</a>(SmallVT, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l01869" /><CodeLine lineNumber="1869"><Highlight kind="normal">              (!TLO.LegalOperations() || <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, SmallVT))) &#123;</Highlight></CodeLine>
<Link id="l01870" /><CodeLine lineNumber="1870"><Highlight kind="normal">            <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DemandedSize &lt;= SmallVTBits &amp;&amp;</Highlight></CodeLine>
<Link id="l01871" /><CodeLine lineNumber="1871"><Highlight kind="normal">                   </Highlight><Highlight kind="stringliteral">&quot;Narrowed below demanded bits?&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01872" /><CodeLine lineNumber="1872"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// We found a type with free casts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01873" /><CodeLine lineNumber="1873"><Highlight kind="normal">            <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NarrowShl = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(</Highlight></CodeLine>
<Link id="l01874" /><CodeLine lineNumber="1874"><Highlight kind="normal">                <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, SmallVT,</Highlight></CodeLine>
<Link id="l01875" /><CodeLine lineNumber="1875"><Highlight kind="normal">                TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, SmallVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0)),</Highlight></CodeLine>
<Link id="l01876" /><CodeLine lineNumber="1876"><Highlight kind="normal">                TLO.DAG.getShiftAmountConstant(ShAmt, SmallVT, dl));</Highlight></CodeLine>
<Link id="l01877" /><CodeLine lineNumber="1877"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(</Highlight></CodeLine>
<Link id="l01878" /><CodeLine lineNumber="1878"><Highlight kind="normal">                <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">ISD::ANY&#95;EXTEND</a>, dl, VT, NarrowShl));</Highlight></CodeLine>
<Link id="l01879" /><CodeLine lineNumber="1879"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l01880" /><CodeLine lineNumber="1880"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01881" /><CodeLine lineNumber="1881"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01882" /><CodeLine lineNumber="1882"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01883" /><CodeLine lineNumber="1883"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Narrow shift to lower half - similar to ShrinkDemandedOp.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01884" /><CodeLine lineNumber="1884"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// (shl i64:x, K) -&gt; (i64 zero&#95;extend (shl (i32 (trunc i64:x)), K))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01885" /><CodeLine lineNumber="1885"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Only do this if we demand the upper half so the knownbits are correct.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01886" /><CodeLine lineNumber="1886"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> HalfWidth = <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> / 2;</Highlight></CodeLine>
<Link id="l01887" /><CodeLine lineNumber="1887"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> % 2) == 0 &amp;&amp; !VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; ShAmt &lt; HalfWidth &amp;&amp;</Highlight></CodeLine>
<Link id="l01888" /><CodeLine lineNumber="1888"><Highlight kind="normal">          DemandedBits.<a href="/docs/api/classes/llvm/apint/#a3a2a335dd528474e41dcf609f79b0be2">countLeadingOnes</a>() &gt;= HalfWidth) &#123;</Highlight></CodeLine>
<Link id="l01889" /><CodeLine lineNumber="1889"><Highlight kind="normal">        EVT HalfVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;TLO.DAG.getContext(), HalfWidth);</Highlight></CodeLine>
<Link id="l01890" /><CodeLine lineNumber="1890"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aafb5c7d833aa31d38df4f426bde5c3e7">isNarrowingProfitable</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getNode(), VT, HalfVT) &amp;&amp;</Highlight></CodeLine>
<Link id="l01891" /><CodeLine lineNumber="1891"><Highlight kind="normal">            isTypeDesirableForOp(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, HalfVT) &amp;&amp;</Highlight></CodeLine>
<Link id="l01892" /><CodeLine lineNumber="1892"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/targetloweringbase/#a6f992bc4ca89f1b5f0b34f5b29978c31">isTruncateFree</a>(VT, HalfVT) &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a342be90695496b88a8854a775dfd030f">isZExtFree</a>(HalfVT, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l01893" /><CodeLine lineNumber="1893"><Highlight kind="normal">            (!TLO.LegalOperations() || <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, HalfVT))) &#123;</Highlight></CodeLine>
<Link id="l01894" /><CodeLine lineNumber="1894"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// If we&#39;re demanding the upper bits at all, we must ensure</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01895" /><CodeLine lineNumber="1895"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// that the upper bits of the shift result are known to be zero,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01896" /><CodeLine lineNumber="1896"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// which is equivalent to the narrow shift being NUW.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01897" /><CodeLine lineNumber="1897"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsNUW = (Known.<a href="/docs/api/structs/llvm/knownbits/#a7f47812e8e75b0616a97d7004e5fb909">countMinLeadingZeros</a>() &gt;= HalfWidth)) &#123;</Highlight></CodeLine>
<Link id="l01898" /><CodeLine lineNumber="1898"><Highlight kind="normal">            </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsNSW = Known.<a href="/docs/api/structs/llvm/knownbits/#a10303a2ffd5366402dfdb65bc55fcff1">countMinSignBits</a>() &gt; HalfWidth;</Highlight></CodeLine>
<Link id="l01899" /><CodeLine lineNumber="1899"><Highlight kind="normal">            SDNodeFlags <a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>;</Highlight></CodeLine>
<Link id="l01900" /><CodeLine lineNumber="1900"><Highlight kind="normal">            <a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.setNoSignedWrap(IsNSW);</Highlight></CodeLine>
<Link id="l01901" /><CodeLine lineNumber="1901"><Highlight kind="normal">            <a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.setNoUnsignedWrap(IsNUW);</Highlight></CodeLine>
<Link id="l01902" /><CodeLine lineNumber="1902"><Highlight kind="normal">            <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, HalfVT, Op0);</Highlight></CodeLine>
<Link id="l01903" /><CodeLine lineNumber="1903"><Highlight kind="normal">            <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewShiftAmt =</Highlight></CodeLine>
<Link id="l01904" /><CodeLine lineNumber="1904"><Highlight kind="normal">                TLO.DAG.getShiftAmountConstant(ShAmt, HalfVT, dl);</Highlight></CodeLine>
<Link id="l01905" /><CodeLine lineNumber="1905"><Highlight kind="normal">            <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewShift = TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, HalfVT, NewOp,</Highlight></CodeLine>
<Link id="l01906" /><CodeLine lineNumber="1906"><Highlight kind="normal">                                               NewShiftAmt, Flags);</Highlight></CodeLine>
<Link id="l01907" /><CodeLine lineNumber="1907"><Highlight kind="normal">            <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewExt =</Highlight></CodeLine>
<Link id="l01908" /><CodeLine lineNumber="1908"><Highlight kind="normal">                TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, dl, VT, NewShift);</Highlight></CodeLine>
<Link id="l01909" /><CodeLine lineNumber="1909"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewExt);</Highlight></CodeLine>
<Link id="l01910" /><CodeLine lineNumber="1910"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l01911" /><CodeLine lineNumber="1911"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01912" /><CodeLine lineNumber="1912"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01913" /><CodeLine lineNumber="1913"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01914" /><CodeLine lineNumber="1914"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// This is a variable shift, so we can&#39;t shift the demand mask by a known</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01915" /><CodeLine lineNumber="1915"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// amount. But if we are not demanding high bits, then we are not</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01916" /><CodeLine lineNumber="1916"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// demanding those bits from the pre-shifted operand either.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01917" /><CodeLine lineNumber="1917"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> CTLZ = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a8bad27827f46bca6baf814cbd2b64e84">countl&#95;zero</a>()) &#123;</Highlight></CodeLine>
<Link id="l01918" /><CodeLine lineNumber="1918"><Highlight kind="normal">        APInt DemandedFromOp(<a href="/docs/api/classes/llvm/apint/#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - CTLZ));</Highlight></CodeLine>
<Link id="l01919" /><CodeLine lineNumber="1919"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op0, DemandedFromOp, DemandedElts, Known, TLO,</Highlight></CodeLine>
<Link id="l01920" /><CodeLine lineNumber="1920"><Highlight kind="normal">                                 <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1)) &#123;</Highlight></CodeLine>
<Link id="l01921" /><CodeLine lineNumber="1921"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Disable the nsw and nuw flags. We can no longer guarantee that we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01922" /><CodeLine lineNumber="1922"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// won&#39;t wrap after simplification.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01923" /><CodeLine lineNumber="1923"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;dropFlags(<a href="/docs/api/structs/llvm/sdnodeflags/#a19128eb1e6729dd3cf2afce783620adaa21673a00231c98385c57bd2eb12b94b1">SDNodeFlags::NoWrap</a>);</Highlight></CodeLine>
<Link id="l01924" /><CodeLine lineNumber="1924"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01925" /><CodeLine lineNumber="1925"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01926" /><CodeLine lineNumber="1926"><Highlight kind="normal">        Known.<a href="/docs/api/structs/llvm/knownbits/#a538f22b4ea2ff04a0b41403f26eaeb67">resetAll</a>();</Highlight></CodeLine>
<Link id="l01927" /><CodeLine lineNumber="1927"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01928" /><CodeLine lineNumber="1928"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01929" /><CodeLine lineNumber="1929"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01930" /><CodeLine lineNumber="1930"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we are only demanding sign bits then we can use the shift source</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01931" /><CodeLine lineNumber="1931"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// directly.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01932" /><CodeLine lineNumber="1932"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;uint64&#95;t&gt; MaxSA =</Highlight></CodeLine>
<Link id="l01933" /><CodeLine lineNumber="1933"><Highlight kind="normal">            TLO.DAG.getValidMaximumShiftAmount(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1)) &#123;</Highlight></CodeLine>
<Link id="l01934" /><CodeLine lineNumber="1934"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShAmt = &#42;MaxSA;</Highlight></CodeLine>
<Link id="l01935" /><CodeLine lineNumber="1935"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSignBits =</Highlight></CodeLine>
<Link id="l01936" /><CodeLine lineNumber="1936"><Highlight kind="normal">          TLO.DAG.ComputeNumSignBits(Op0, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l01937" /><CodeLine lineNumber="1937"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> UpperDemandedBits = <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - DemandedBits.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>();</Highlight></CodeLine>
<Link id="l01938" /><CodeLine lineNumber="1938"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumSignBits &gt; ShAmt &amp;&amp; (NumSignBits - ShAmt) &gt;= (UpperDemandedBits))</Highlight></CodeLine>
<Link id="l01939" /><CodeLine lineNumber="1939"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op0);</Highlight></CodeLine>
<Link id="l01940" /><CodeLine lineNumber="1940"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01941" /><CodeLine lineNumber="1941"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01942" /><CodeLine lineNumber="1942"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01943" /><CodeLine lineNumber="1943"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>: &#123;</Highlight></CodeLine>
<Link id="l01944" /><CodeLine lineNumber="1944"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l01945" /><CodeLine lineNumber="1945"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l01946" /><CodeLine lineNumber="1946"><Highlight kind="normal">    EVT ShiftVT = Op1.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l01947" /><CodeLine lineNumber="1947"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01948" /><CodeLine lineNumber="1948"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;uint64&#95;t&gt; KnownSA =</Highlight></CodeLine>
<Link id="l01949" /><CodeLine lineNumber="1949"><Highlight kind="normal">            TLO.DAG.getValidShiftAmount(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1)) &#123;</Highlight></CodeLine>
<Link id="l01950" /><CodeLine lineNumber="1950"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShAmt = &#42;KnownSA;</Highlight></CodeLine>
<Link id="l01951" /><CodeLine lineNumber="1951"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ShAmt == 0)</Highlight></CodeLine>
<Link id="l01952" /><CodeLine lineNumber="1952"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op0);</Highlight></CodeLine>
<Link id="l01953" /><CodeLine lineNumber="1953"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01954" /><CodeLine lineNumber="1954"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If this is ((X &lt;&lt; C1) &gt;&gt;u ShAmt), see if we can simplify this into a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01955" /><CodeLine lineNumber="1955"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// single shift.  We can do this if the top bits (which are shifted out)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01956" /><CodeLine lineNumber="1956"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// are never demanded.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01957" /><CodeLine lineNumber="1957"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// TODO - support non-uniform vector amounts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01958" /><CodeLine lineNumber="1958"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>) &#123;</Highlight></CodeLine>
<Link id="l01959" /><CodeLine lineNumber="1959"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedBits.<a href="/docs/api/classes/llvm/apint/#a6da514c588b2668280a861a59bfc9fa5">intersects</a>(<a href="/docs/api/classes/llvm/apint/#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, ShAmt))) &#123;</Highlight></CodeLine>
<Link id="l01960" /><CodeLine lineNumber="1960"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;uint64&#95;t&gt; InnerSA =</Highlight></CodeLine>
<Link id="l01961" /><CodeLine lineNumber="1961"><Highlight kind="normal">                  TLO.DAG.getValidShiftAmount(Op0, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 2)) &#123;</Highlight></CodeLine>
<Link id="l01962" /><CodeLine lineNumber="1962"><Highlight kind="normal">            </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> C1 = &#42;InnerSA;</Highlight></CodeLine>
<Link id="l01963" /><CodeLine lineNumber="1963"><Highlight kind="normal">            </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opc = <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>;</Highlight></CodeLine>
<Link id="l01964" /><CodeLine lineNumber="1964"><Highlight kind="normal">            </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> Diff = ShAmt - C1;</Highlight></CodeLine>
<Link id="l01965" /><CodeLine lineNumber="1965"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Diff &lt; 0) &#123;</Highlight></CodeLine>
<Link id="l01966" /><CodeLine lineNumber="1966"><Highlight kind="normal">              Diff = -Diff;</Highlight></CodeLine>
<Link id="l01967" /><CodeLine lineNumber="1967"><Highlight kind="normal">              Opc = <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>;</Highlight></CodeLine>
<Link id="l01968" /><CodeLine lineNumber="1968"><Highlight kind="normal">            &#125;</Highlight></CodeLine>
<Link id="l01969" /><CodeLine lineNumber="1969"><Highlight kind="normal">            <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewSA = TLO.DAG.getConstant(Diff, dl, ShiftVT);</Highlight></CodeLine>
<Link id="l01970" /><CodeLine lineNumber="1970"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(</Highlight></CodeLine>
<Link id="l01971" /><CodeLine lineNumber="1971"><Highlight kind="normal">                <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(Opc, dl, VT, Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), NewSA));</Highlight></CodeLine>
<Link id="l01972" /><CodeLine lineNumber="1972"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l01973" /><CodeLine lineNumber="1973"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01974" /><CodeLine lineNumber="1974"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01975" /><CodeLine lineNumber="1975"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01976" /><CodeLine lineNumber="1976"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If this is (srl (sra X, C1), ShAmt), see if we can combine this into a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01977" /><CodeLine lineNumber="1977"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// single sra. We can do this if the top bits are never demanded.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01978" /><CodeLine lineNumber="1978"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a> &amp;&amp; Op0.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>()) &#123;</Highlight></CodeLine>
<Link id="l01979" /><CodeLine lineNumber="1979"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedBits.<a href="/docs/api/classes/llvm/apint/#a6da514c588b2668280a861a59bfc9fa5">intersects</a>(<a href="/docs/api/classes/llvm/apint/#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, ShAmt))) &#123;</Highlight></CodeLine>
<Link id="l01980" /><CodeLine lineNumber="1980"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;uint64&#95;t&gt; InnerSA =</Highlight></CodeLine>
<Link id="l01981" /><CodeLine lineNumber="1981"><Highlight kind="normal">                  TLO.DAG.getValidShiftAmount(Op0, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 2)) &#123;</Highlight></CodeLine>
<Link id="l01982" /><CodeLine lineNumber="1982"><Highlight kind="normal">            </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> C1 = &#42;InnerSA;</Highlight></CodeLine>
<Link id="l01983" /><CodeLine lineNumber="1983"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// Clamp the combined shift amount if it exceeds the bit width.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01984" /><CodeLine lineNumber="1984"><Highlight kind="normal">            </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Combined = std::min(C1 + ShAmt, <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - 1);</Highlight></CodeLine>
<Link id="l01985" /><CodeLine lineNumber="1985"><Highlight kind="normal">            <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewSA = TLO.DAG.getConstant(Combined, dl, ShiftVT);</Highlight></CodeLine>
<Link id="l01986" /><CodeLine lineNumber="1986"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>, dl, VT,</Highlight></CodeLine>
<Link id="l01987" /><CodeLine lineNumber="1987"><Highlight kind="normal">                                                     Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), NewSA));</Highlight></CodeLine>
<Link id="l01988" /><CodeLine lineNumber="1988"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l01989" /><CodeLine lineNumber="1989"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l01990" /><CodeLine lineNumber="1990"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01991" /><CodeLine lineNumber="1991"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01992" /><CodeLine lineNumber="1992"><Highlight kind="normal">      APInt InDemandedMask = (DemandedBits &lt;&lt; ShAmt);</Highlight></CodeLine>
<Link id="l01993" /><CodeLine lineNumber="1993"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01994" /><CodeLine lineNumber="1994"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If the shift is exact, then it does demand the low bits (and knows that</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01995" /><CodeLine lineNumber="1995"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// they are zero).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01996" /><CodeLine lineNumber="1996"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;getFlags().hasExact())</Highlight></CodeLine>
<Link id="l01997" /><CodeLine lineNumber="1997"><Highlight kind="normal">        InDemandedMask.<a href="/docs/api/classes/llvm/apint/#ade8e20ecea1091e835395746448e262e">setLowBits</a>(ShAmt);</Highlight></CodeLine>
<Link id="l01998" /><CodeLine lineNumber="1998"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01999" /><CodeLine lineNumber="1999"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Narrow shift to lower half - similar to ShrinkDemandedOp.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02000" /><CodeLine lineNumber="2000"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// (srl i64:x, K) -&gt; (i64 zero&#95;extend (srl (i32 (trunc i64:x)), K))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02001" /><CodeLine lineNumber="2001"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> % 2) == 0 &amp;&amp; !VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>()) &#123;</Highlight></CodeLine>
<Link id="l02002" /><CodeLine lineNumber="2002"><Highlight kind="normal">        APInt HiBits = <a href="/docs/api/classes/llvm/apint/#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> / 2);</Highlight></CodeLine>
<Link id="l02003" /><CodeLine lineNumber="2003"><Highlight kind="normal">        EVT HalfVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;TLO.DAG.getContext(), <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> / 2);</Highlight></CodeLine>
<Link id="l02004" /><CodeLine lineNumber="2004"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aafb5c7d833aa31d38df4f426bde5c3e7">isNarrowingProfitable</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getNode(), VT, HalfVT) &amp;&amp;</Highlight></CodeLine>
<Link id="l02005" /><CodeLine lineNumber="2005"><Highlight kind="normal">            isTypeDesirableForOp(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, HalfVT) &amp;&amp;</Highlight></CodeLine>
<Link id="l02006" /><CodeLine lineNumber="2006"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/targetloweringbase/#a6f992bc4ca89f1b5f0b34f5b29978c31">isTruncateFree</a>(VT, HalfVT) &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a342be90695496b88a8854a775dfd030f">isZExtFree</a>(HalfVT, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l02007" /><CodeLine lineNumber="2007"><Highlight kind="normal">            (!TLO.LegalOperations() || <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, HalfVT)) &amp;&amp;</Highlight></CodeLine>
<Link id="l02008" /><CodeLine lineNumber="2008"><Highlight kind="normal">            ((InDemandedMask.<a href="/docs/api/classes/llvm/apint/#aa074b9f5a1efaa0fd8aa4522593f299a">countLeadingZeros</a>() &gt;= (<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> / 2)) ||</Highlight></CodeLine>
<Link id="l02009" /><CodeLine lineNumber="2009"><Highlight kind="normal">             TLO.DAG.MaskedValueIsZero(Op0, HiBits))) &#123;</Highlight></CodeLine>
<Link id="l02010" /><CodeLine lineNumber="2010"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, HalfVT, Op0);</Highlight></CodeLine>
<Link id="l02011" /><CodeLine lineNumber="2011"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewShiftAmt =</Highlight></CodeLine>
<Link id="l02012" /><CodeLine lineNumber="2012"><Highlight kind="normal">              TLO.DAG.getShiftAmountConstant(ShAmt, HalfVT, dl);</Highlight></CodeLine>
<Link id="l02013" /><CodeLine lineNumber="2013"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewShift =</Highlight></CodeLine>
<Link id="l02014" /><CodeLine lineNumber="2014"><Highlight kind="normal">              TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, HalfVT, NewOp, NewShiftAmt);</Highlight></CodeLine>
<Link id="l02015" /><CodeLine lineNumber="2015"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(</Highlight></CodeLine>
<Link id="l02016" /><CodeLine lineNumber="2016"><Highlight kind="normal">              <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, dl, VT, NewShift));</Highlight></CodeLine>
<Link id="l02017" /><CodeLine lineNumber="2017"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l02018" /><CodeLine lineNumber="2018"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02019" /><CodeLine lineNumber="2019"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02020" /><CodeLine lineNumber="2020"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Compute the new bits that are at the top now.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02021" /><CodeLine lineNumber="2021"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op0, InDemandedMask, DemandedElts, Known, TLO,</Highlight></CodeLine>
<Link id="l02022" /><CodeLine lineNumber="2022"><Highlight kind="normal">                               <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02023" /><CodeLine lineNumber="2023"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02024" /><CodeLine lineNumber="2024"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>.<a href="/docs/api/classes/llvm/apint/#af338e23a90c301183968435e80cd6a27">lshrInPlace</a>(ShAmt);</Highlight></CodeLine>
<Link id="l02025" /><CodeLine lineNumber="2025"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>.<a href="/docs/api/classes/llvm/apint/#af338e23a90c301183968435e80cd6a27">lshrInPlace</a>(ShAmt);</Highlight></CodeLine>
<Link id="l02026" /><CodeLine lineNumber="2026"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// High bits known zero.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02027" /><CodeLine lineNumber="2027"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>.<a href="/docs/api/classes/llvm/apint/#a2780c5606880394d3f07cd2079a27697">setHighBits</a>(ShAmt);</Highlight></CodeLine>
<Link id="l02028" /><CodeLine lineNumber="2028"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02029" /><CodeLine lineNumber="2029"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02030" /><CodeLine lineNumber="2030"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!InDemandedMask.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() || !DemandedElts.isAllOnes()) &#123;</Highlight></CodeLine>
<Link id="l02031" /><CodeLine lineNumber="2031"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedOp0 = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l02032" /><CodeLine lineNumber="2032"><Highlight kind="normal">            Op0, InDemandedMask, DemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l02033" /><CodeLine lineNumber="2033"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedOp0) &#123;</Highlight></CodeLine>
<Link id="l02034" /><CodeLine lineNumber="2034"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, DemandedOp0, Op1);</Highlight></CodeLine>
<Link id="l02035" /><CodeLine lineNumber="2035"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l02036" /><CodeLine lineNumber="2036"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l02037" /><CodeLine lineNumber="2037"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02038" /><CodeLine lineNumber="2038"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02039" /><CodeLine lineNumber="2039"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Use generic knownbits computation as it has support for non-uniform</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02040" /><CodeLine lineNumber="2040"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// shift amounts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02041" /><CodeLine lineNumber="2041"><Highlight kind="normal">      Known = TLO.DAG.computeKnownBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l02042" /><CodeLine lineNumber="2042"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02043" /><CodeLine lineNumber="2043"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02044" /><CodeLine lineNumber="2044"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we are only demanding sign bits then we can use the shift source</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02045" /><CodeLine lineNumber="2045"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// directly.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02046" /><CodeLine lineNumber="2046"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;uint64&#95;t&gt; MaxSA =</Highlight></CodeLine>
<Link id="l02047" /><CodeLine lineNumber="2047"><Highlight kind="normal">            TLO.DAG.getValidMaximumShiftAmount(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1)) &#123;</Highlight></CodeLine>
<Link id="l02048" /><CodeLine lineNumber="2048"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShAmt = &#42;MaxSA;</Highlight></CodeLine>
<Link id="l02049" /><CodeLine lineNumber="2049"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Must already be signbits in DemandedBits bounds, and can&#39;t demand any</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02050" /><CodeLine lineNumber="2050"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// shifted in zeroes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02051" /><CodeLine lineNumber="2051"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#a8bad27827f46bca6baf814cbd2b64e84">countl&#95;zero</a>() &gt;= ShAmt) &#123;</Highlight></CodeLine>
<Link id="l02052" /><CodeLine lineNumber="2052"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSignBits =</Highlight></CodeLine>
<Link id="l02053" /><CodeLine lineNumber="2053"><Highlight kind="normal">            TLO.DAG.ComputeNumSignBits(Op0, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l02054" /><CodeLine lineNumber="2054"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>() &gt;= (<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - NumSignBits))</Highlight></CodeLine>
<Link id="l02055" /><CodeLine lineNumber="2055"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op0);</Highlight></CodeLine>
<Link id="l02056" /><CodeLine lineNumber="2056"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02057" /><CodeLine lineNumber="2057"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02058" /><CodeLine lineNumber="2058"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02059" /><CodeLine lineNumber="2059"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Try to match AVG patterns (after shift simplification).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02060" /><CodeLine lineNumber="2060"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> AVG = <a href="#afa64cc7dfc401b9825b62c2b19808ad0">combineShiftToAVG</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO, &#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">, DemandedBits,</Highlight></CodeLine>
<Link id="l02061" /><CodeLine lineNumber="2061"><Highlight kind="normal">                                        DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02062" /><CodeLine lineNumber="2062"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, AVG);</Highlight></CodeLine>
<Link id="l02063" /><CodeLine lineNumber="2063"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02064" /><CodeLine lineNumber="2064"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02065" /><CodeLine lineNumber="2065"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02066" /><CodeLine lineNumber="2066"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>: &#123;</Highlight></CodeLine>
<Link id="l02067" /><CodeLine lineNumber="2067"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l02068" /><CodeLine lineNumber="2068"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l02069" /><CodeLine lineNumber="2069"><Highlight kind="normal">    EVT ShiftVT = Op1.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l02070" /><CodeLine lineNumber="2070"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02071" /><CodeLine lineNumber="2071"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we only want bits that already match the signbit then we don&#39;t need</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02072" /><CodeLine lineNumber="2072"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// to shift.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02073" /><CodeLine lineNumber="2073"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumHiDemandedBits = <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - DemandedBits.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>();</Highlight></CodeLine>
<Link id="l02074" /><CodeLine lineNumber="2074"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TLO.DAG.ComputeNumSignBits(Op0, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1) &gt;=</Highlight></CodeLine>
<Link id="l02075" /><CodeLine lineNumber="2075"><Highlight kind="normal">        NumHiDemandedBits)</Highlight></CodeLine>
<Link id="l02076" /><CodeLine lineNumber="2076"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op0);</Highlight></CodeLine>
<Link id="l02077" /><CodeLine lineNumber="2077"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02078" /><CodeLine lineNumber="2078"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If this is an arithmetic shift right and only the low-bit is set, we can</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02079" /><CodeLine lineNumber="2079"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// always convert this into a logical shr, even if the shift amount is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02080" /><CodeLine lineNumber="2080"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// variable.  The low bit of the shift cannot be an input sign bit unless</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02081" /><CodeLine lineNumber="2081"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the shift amount is &gt;= the size of the datatype, which is undefined.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02082" /><CodeLine lineNumber="2082"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#aea5f26deda5ef97e02f6afc57c0c3920">isOne</a>())</Highlight></CodeLine>
<Link id="l02083" /><CodeLine lineNumber="2083"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, Op0, Op1));</Highlight></CodeLine>
<Link id="l02084" /><CodeLine lineNumber="2084"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02085" /><CodeLine lineNumber="2085"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;uint64&#95;t&gt; KnownSA =</Highlight></CodeLine>
<Link id="l02086" /><CodeLine lineNumber="2086"><Highlight kind="normal">            TLO.DAG.getValidShiftAmount(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1)) &#123;</Highlight></CodeLine>
<Link id="l02087" /><CodeLine lineNumber="2087"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShAmt = &#42;KnownSA;</Highlight></CodeLine>
<Link id="l02088" /><CodeLine lineNumber="2088"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ShAmt == 0)</Highlight></CodeLine>
<Link id="l02089" /><CodeLine lineNumber="2089"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op0);</Highlight></CodeLine>
<Link id="l02090" /><CodeLine lineNumber="2090"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02091" /><CodeLine lineNumber="2091"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// fold (sra (shl x, c1), c1) -&gt; sext&#95;inreg for some c1 and target</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02092" /><CodeLine lineNumber="2092"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// supports sext&#95;inreg.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02093" /><CodeLine lineNumber="2093"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>) &#123;</Highlight></CodeLine>
<Link id="l02094" /><CodeLine lineNumber="2094"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;uint64&#95;t&gt; InnerSA =</Highlight></CodeLine>
<Link id="l02095" /><CodeLine lineNumber="2095"><Highlight kind="normal">                TLO.DAG.getValidShiftAmount(Op0, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 2)) &#123;</Highlight></CodeLine>
<Link id="l02096" /><CodeLine lineNumber="2096"><Highlight kind="normal">          </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LowBits = <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - ShAmt;</Highlight></CodeLine>
<Link id="l02097" /><CodeLine lineNumber="2097"><Highlight kind="normal">          EVT ExtVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;TLO.DAG.getContext(), LowBits);</Highlight></CodeLine>
<Link id="l02098" /><CodeLine lineNumber="2098"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>())</Highlight></CodeLine>
<Link id="l02099" /><CodeLine lineNumber="2099"><Highlight kind="normal">            ExtVT = <a href="/docs/api/structs/llvm/evt/#a210ba6b43ba451b698857dd9de71bd15">EVT::getVectorVT</a>(&#42;TLO.DAG.getContext(), ExtVT,</Highlight></CodeLine>
<Link id="l02100" /><CodeLine lineNumber="2100"><Highlight kind="normal">                                     VT.<a href="/docs/api/structs/llvm/evt/#a3d102abca1c9c95f36546dff2f39273b">getVectorElementCount</a>());</Highlight></CodeLine>
<Link id="l02101" /><CodeLine lineNumber="2101"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02102" /><CodeLine lineNumber="2102"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (&#42;InnerSA == ShAmt) &#123;</Highlight></CodeLine>
<Link id="l02103" /><CodeLine lineNumber="2103"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!TLO.LegalOperations() ||</Highlight></CodeLine>
<Link id="l02104" /><CodeLine lineNumber="2104"><Highlight kind="normal">                <a href="/docs/api/classes/llvm/targetloweringbase/#af7966eae031882124c0beee58c4c922e">getOperationAction</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaa59dd5ec37f21905436b354c0292d9e">ISD::SIGN&#95;EXTEND&#95;INREG</a>, ExtVT) == <a href="/docs/api/classes/llvm/targetloweringbase/#a12b8712b6c436a8152a5fa996cd8956aad7ff2d7a7c03a214dda559fac717cd99">Legal</a>)</Highlight></CodeLine>
<Link id="l02105" /><CodeLine lineNumber="2105"><Highlight kind="normal">              </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(</Highlight></CodeLine>
<Link id="l02106" /><CodeLine lineNumber="2106"><Highlight kind="normal">                  <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaa59dd5ec37f21905436b354c0292d9e">ISD::SIGN&#95;EXTEND&#95;INREG</a>, dl, VT,</Highlight></CodeLine>
<Link id="l02107" /><CodeLine lineNumber="2107"><Highlight kind="normal">                                      Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0),</Highlight></CodeLine>
<Link id="l02108" /><CodeLine lineNumber="2108"><Highlight kind="normal">                                      TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>(ExtVT)));</Highlight></CodeLine>
<Link id="l02109" /><CodeLine lineNumber="2109"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02110" /><CodeLine lineNumber="2110"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// Even if we can&#39;t convert to sext&#95;inreg, we might be able to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02111" /><CodeLine lineNumber="2111"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// remove this shift pair if the input is already sign extended.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02112" /><CodeLine lineNumber="2112"><Highlight kind="normal">            </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSignBits =</Highlight></CodeLine>
<Link id="l02113" /><CodeLine lineNumber="2113"><Highlight kind="normal">                TLO.DAG.ComputeNumSignBits(Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), DemandedElts);</Highlight></CodeLine>
<Link id="l02114" /><CodeLine lineNumber="2114"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumSignBits &gt; ShAmt)</Highlight></CodeLine>
<Link id="l02115" /><CodeLine lineNumber="2115"><Highlight kind="normal">              </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0));</Highlight></CodeLine>
<Link id="l02116" /><CodeLine lineNumber="2116"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l02117" /><CodeLine lineNumber="2117"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l02118" /><CodeLine lineNumber="2118"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02119" /><CodeLine lineNumber="2119"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02120" /><CodeLine lineNumber="2120"><Highlight kind="normal">      APInt InDemandedMask = (DemandedBits &lt;&lt; ShAmt);</Highlight></CodeLine>
<Link id="l02121" /><CodeLine lineNumber="2121"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02122" /><CodeLine lineNumber="2122"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If the shift is exact, then it does demand the low bits (and knows that</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02123" /><CodeLine lineNumber="2123"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// they are zero).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02124" /><CodeLine lineNumber="2124"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;getFlags().hasExact())</Highlight></CodeLine>
<Link id="l02125" /><CodeLine lineNumber="2125"><Highlight kind="normal">        InDemandedMask.<a href="/docs/api/classes/llvm/apint/#ade8e20ecea1091e835395746448e262e">setLowBits</a>(ShAmt);</Highlight></CodeLine>
<Link id="l02126" /><CodeLine lineNumber="2126"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02127" /><CodeLine lineNumber="2127"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If any of the demanded bits are produced by the sign extension, we also</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02128" /><CodeLine lineNumber="2128"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// demand the input sign bit.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02129" /><CodeLine lineNumber="2129"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#a8bad27827f46bca6baf814cbd2b64e84">countl&#95;zero</a>() &lt; ShAmt)</Highlight></CodeLine>
<Link id="l02130" /><CodeLine lineNumber="2130"><Highlight kind="normal">        InDemandedMask.<a href="/docs/api/classes/llvm/apint/#a4f1e1a4449b58958c5884c689e7f4861">setSignBit</a>();</Highlight></CodeLine>
<Link id="l02131" /><CodeLine lineNumber="2131"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02132" /><CodeLine lineNumber="2132"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op0, InDemandedMask, DemandedElts, Known, TLO,</Highlight></CodeLine>
<Link id="l02133" /><CodeLine lineNumber="2133"><Highlight kind="normal">                               <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02134" /><CodeLine lineNumber="2134"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02135" /><CodeLine lineNumber="2135"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>.<a href="/docs/api/classes/llvm/apint/#af338e23a90c301183968435e80cd6a27">lshrInPlace</a>(ShAmt);</Highlight></CodeLine>
<Link id="l02136" /><CodeLine lineNumber="2136"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>.<a href="/docs/api/classes/llvm/apint/#af338e23a90c301183968435e80cd6a27">lshrInPlace</a>(ShAmt);</Highlight></CodeLine>
<Link id="l02137" /><CodeLine lineNumber="2137"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02138" /><CodeLine lineNumber="2138"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If the input sign bit is known to be zero, or if none of the top bits</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02139" /><CodeLine lineNumber="2139"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// are demanded, turn this into an unsigned shift right.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02140" /><CodeLine lineNumber="2140"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>&#91;<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - ShAmt - 1&#93; ||</Highlight></CodeLine>
<Link id="l02141" /><CodeLine lineNumber="2141"><Highlight kind="normal">          DemandedBits.<a href="/docs/api/classes/llvm/apint/#a8bad27827f46bca6baf814cbd2b64e84">countl&#95;zero</a>() &gt;= ShAmt) &#123;</Highlight></CodeLine>
<Link id="l02142" /><CodeLine lineNumber="2142"><Highlight kind="normal">        SDNodeFlags <a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>;</Highlight></CodeLine>
<Link id="l02143" /><CodeLine lineNumber="2143"><Highlight kind="normal">        <a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.setExact(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;getFlags().hasExact());</Highlight></CodeLine>
<Link id="l02144" /><CodeLine lineNumber="2144"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(</Highlight></CodeLine>
<Link id="l02145" /><CodeLine lineNumber="2145"><Highlight kind="normal">            <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, Op0, Op1, Flags));</Highlight></CodeLine>
<Link id="l02146" /><CodeLine lineNumber="2146"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02147" /><CodeLine lineNumber="2147"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02148" /><CodeLine lineNumber="2148"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a> = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a6f1d5427c61a0f0159f6e85f41944c5c">exactLogBase2</a>();</Highlight></CodeLine>
<Link id="l02149" /><CodeLine lineNumber="2149"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a> &gt;= 0) &#123;</Highlight></CodeLine>
<Link id="l02150" /><CodeLine lineNumber="2150"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// The bit must come from the sign.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02151" /><CodeLine lineNumber="2151"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewSA = TLO.DAG.getConstant(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - 1 - <a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a>, dl, ShiftVT);</Highlight></CodeLine>
<Link id="l02152" /><CodeLine lineNumber="2152"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, Op0, NewSA));</Highlight></CodeLine>
<Link id="l02153" /><CodeLine lineNumber="2153"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02154" /><CodeLine lineNumber="2154"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02155" /><CodeLine lineNumber="2155"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>&#91;<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - ShAmt - 1&#93;)</Highlight></CodeLine>
<Link id="l02156" /><CodeLine lineNumber="2156"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// New bits are known one.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02157" /><CodeLine lineNumber="2157"><Highlight kind="normal">        Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>.<a href="/docs/api/classes/llvm/apint/#a2780c5606880394d3f07cd2079a27697">setHighBits</a>(ShAmt);</Highlight></CodeLine>
<Link id="l02158" /><CodeLine lineNumber="2158"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02159" /><CodeLine lineNumber="2159"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02160" /><CodeLine lineNumber="2160"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!InDemandedMask.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() || !DemandedElts.isAllOnes()) &#123;</Highlight></CodeLine>
<Link id="l02161" /><CodeLine lineNumber="2161"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedOp0 = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l02162" /><CodeLine lineNumber="2162"><Highlight kind="normal">            Op0, InDemandedMask, DemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l02163" /><CodeLine lineNumber="2163"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedOp0) &#123;</Highlight></CodeLine>
<Link id="l02164" /><CodeLine lineNumber="2164"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>, dl, VT, DemandedOp0, Op1);</Highlight></CodeLine>
<Link id="l02165" /><CodeLine lineNumber="2165"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l02166" /><CodeLine lineNumber="2166"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l02167" /><CodeLine lineNumber="2167"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02168" /><CodeLine lineNumber="2168"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02169" /><CodeLine lineNumber="2169"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02170" /><CodeLine lineNumber="2170"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Try to match AVG patterns (after shift simplification).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02171" /><CodeLine lineNumber="2171"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> AVG = <a href="#afa64cc7dfc401b9825b62c2b19808ad0">combineShiftToAVG</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO, &#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">, DemandedBits,</Highlight></CodeLine>
<Link id="l02172" /><CodeLine lineNumber="2172"><Highlight kind="normal">                                        DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02173" /><CodeLine lineNumber="2173"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, AVG);</Highlight></CodeLine>
<Link id="l02174" /><CodeLine lineNumber="2174"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02175" /><CodeLine lineNumber="2175"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02176" /><CodeLine lineNumber="2176"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02177" /><CodeLine lineNumber="2177"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a822b0d02b601898e2d6db5b39e12cc8a">ISD::FSHL</a>:</Highlight></CodeLine>
<Link id="l02178" /><CodeLine lineNumber="2178"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a874350de5b4f6b8f4db13940e17ed81b">ISD::FSHR</a>: &#123;</Highlight></CodeLine>
<Link id="l02179" /><CodeLine lineNumber="2179"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l02180" /><CodeLine lineNumber="2180"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l02181" /><CodeLine lineNumber="2181"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op2 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(2);</Highlight></CodeLine>
<Link id="l02182" /><CodeLine lineNumber="2182"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsFSHL = (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a822b0d02b601898e2d6db5b39e12cc8a">ISD::FSHL</a>);</Highlight></CodeLine>
<Link id="l02183" /><CodeLine lineNumber="2183"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02184" /><CodeLine lineNumber="2184"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ConstantSDNode &#42;SA = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(Op2, DemandedElts)) &#123;</Highlight></CodeLine>
<Link id="l02185" /><CodeLine lineNumber="2185"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Amt = SA-&gt;getAPIntValue().urem(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l02186" /><CodeLine lineNumber="2186"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02187" /><CodeLine lineNumber="2187"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// For fshl, 0-shift returns the 1st arg.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02188" /><CodeLine lineNumber="2188"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// For fshr, 0-shift returns the 2nd arg.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02189" /><CodeLine lineNumber="2189"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Amt == 0) &#123;</Highlight></CodeLine>
<Link id="l02190" /><CodeLine lineNumber="2190"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(IsFSHL ? Op0 : Op1, DemandedBits, DemandedElts,</Highlight></CodeLine>
<Link id="l02191" /><CodeLine lineNumber="2191"><Highlight kind="normal">                                 Known, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02192" /><CodeLine lineNumber="2192"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02193" /><CodeLine lineNumber="2193"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02194" /><CodeLine lineNumber="2194"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02195" /><CodeLine lineNumber="2195"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02196" /><CodeLine lineNumber="2196"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// fshl: (Op0 &lt;&lt; Amt) | (Op1 &gt;&gt; (BW - Amt))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02197" /><CodeLine lineNumber="2197"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// fshr: (Op0 &lt;&lt; (BW - Amt)) | (Op1 &gt;&gt; Amt)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02198" /><CodeLine lineNumber="2198"><Highlight kind="normal">      APInt Demanded0 = DemandedBits.<a href="/docs/api/classes/llvm/apint/#af34549c39d6f741fbdaf9a795aa306e9">lshr</a>(IsFSHL ? Amt : (<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - Amt));</Highlight></CodeLine>
<Link id="l02199" /><CodeLine lineNumber="2199"><Highlight kind="normal">      APInt Demanded1 = DemandedBits &lt;&lt; (IsFSHL ? (<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - Amt) : Amt);</Highlight></CodeLine>
<Link id="l02200" /><CodeLine lineNumber="2200"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op0, Demanded0, DemandedElts, Known2, TLO,</Highlight></CodeLine>
<Link id="l02201" /><CodeLine lineNumber="2201"><Highlight kind="normal">                               <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02202" /><CodeLine lineNumber="2202"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02203" /><CodeLine lineNumber="2203"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op1, Demanded1, DemandedElts, Known, TLO,</Highlight></CodeLine>
<Link id="l02204" /><CodeLine lineNumber="2204"><Highlight kind="normal">                               <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02205" /><CodeLine lineNumber="2205"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02206" /><CodeLine lineNumber="2206"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02207" /><CodeLine lineNumber="2207"><Highlight kind="normal">      Known2.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a> &lt;&lt;= (IsFSHL ? Amt : (<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - Amt));</Highlight></CodeLine>
<Link id="l02208" /><CodeLine lineNumber="2208"><Highlight kind="normal">      Known2.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> &lt;&lt;= (IsFSHL ? Amt : (<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - Amt));</Highlight></CodeLine>
<Link id="l02209" /><CodeLine lineNumber="2209"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>.<a href="/docs/api/classes/llvm/apint/#af338e23a90c301183968435e80cd6a27">lshrInPlace</a>(IsFSHL ? (<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - Amt) : Amt);</Highlight></CodeLine>
<Link id="l02210" /><CodeLine lineNumber="2210"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>.<a href="/docs/api/classes/llvm/apint/#af338e23a90c301183968435e80cd6a27">lshrInPlace</a>(IsFSHL ? (<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - Amt) : Amt);</Highlight></CodeLine>
<Link id="l02211" /><CodeLine lineNumber="2211"><Highlight kind="normal">      Known = Known.<a href="/docs/api/structs/llvm/knownbits/#a5bb97a9e9a3717af2794011459f03607">unionWith</a>(Known2);</Highlight></CodeLine>
<Link id="l02212" /><CodeLine lineNumber="2212"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02213" /><CodeLine lineNumber="2213"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02214" /><CodeLine lineNumber="2214"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Demanded0.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() || !Demanded1.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() ||</Highlight></CodeLine>
<Link id="l02215" /><CodeLine lineNumber="2215"><Highlight kind="normal">          !DemandedElts.isAllOnes()) &#123;</Highlight></CodeLine>
<Link id="l02216" /><CodeLine lineNumber="2216"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedOp0 = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l02217" /><CodeLine lineNumber="2217"><Highlight kind="normal">            Op0, Demanded0, DemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l02218" /><CodeLine lineNumber="2218"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedOp1 = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l02219" /><CodeLine lineNumber="2219"><Highlight kind="normal">            Op1, Demanded1, DemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l02220" /><CodeLine lineNumber="2220"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedOp0 || DemandedOp1) &#123;</Highlight></CodeLine>
<Link id="l02221" /><CodeLine lineNumber="2221"><Highlight kind="normal">          DemandedOp0 = DemandedOp0 ? DemandedOp0 : Op0;</Highlight></CodeLine>
<Link id="l02222" /><CodeLine lineNumber="2222"><Highlight kind="normal">          DemandedOp1 = DemandedOp1 ? DemandedOp1 : Op1;</Highlight></CodeLine>
<Link id="l02223" /><CodeLine lineNumber="2223"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode(), dl, VT, DemandedOp0,</Highlight></CodeLine>
<Link id="l02224" /><CodeLine lineNumber="2224"><Highlight kind="normal">                                          DemandedOp1, Op2);</Highlight></CodeLine>
<Link id="l02225" /><CodeLine lineNumber="2225"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l02226" /><CodeLine lineNumber="2226"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l02227" /><CodeLine lineNumber="2227"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02228" /><CodeLine lineNumber="2228"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02229" /><CodeLine lineNumber="2229"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02230" /><CodeLine lineNumber="2230"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// For pow-2 bitwidths we only demand the bottom modulo amt bits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02231" /><CodeLine lineNumber="2231"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>)) &#123;</Highlight></CodeLine>
<Link id="l02232" /><CodeLine lineNumber="2232"><Highlight kind="normal">      APInt DemandedAmtBits(Op2.<a href="/docs/api/classes/llvm/sdvalue/#abd46b9ca1d156bc7e3dd9150cc106a28">getScalarValueSizeInBits</a>(), <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - 1);</Highlight></CodeLine>
<Link id="l02233" /><CodeLine lineNumber="2233"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op2, DemandedAmtBits, DemandedElts,</Highlight></CodeLine>
<Link id="l02234" /><CodeLine lineNumber="2234"><Highlight kind="normal">                               Known2, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02235" /><CodeLine lineNumber="2235"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02236" /><CodeLine lineNumber="2236"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02237" /><CodeLine lineNumber="2237"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02238" /><CodeLine lineNumber="2238"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02239" /><CodeLine lineNumber="2239"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae8f8f81d8e8d7a557d67622c05786f1d">ISD::ROTL</a>:</Highlight></CodeLine>
<Link id="l02240" /><CodeLine lineNumber="2240"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a19cd524269b035941434cce28b585715">ISD::ROTR</a>: &#123;</Highlight></CodeLine>
<Link id="l02241" /><CodeLine lineNumber="2241"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l02242" /><CodeLine lineNumber="2242"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l02243" /><CodeLine lineNumber="2243"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsROTL = (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae8f8f81d8e8d7a557d67622c05786f1d">ISD::ROTL</a>);</Highlight></CodeLine>
<Link id="l02244" /><CodeLine lineNumber="2244"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02245" /><CodeLine lineNumber="2245"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we&#39;re rotating an 0/-1 value, then it stays an 0/-1 value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02246" /><CodeLine lineNumber="2246"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> == TLO.DAG.ComputeNumSignBits(Op0, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02247" /><CodeLine lineNumber="2247"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op0);</Highlight></CodeLine>
<Link id="l02248" /><CodeLine lineNumber="2248"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02249" /><CodeLine lineNumber="2249"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ConstantSDNode &#42;SA = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(Op1, DemandedElts)) &#123;</Highlight></CodeLine>
<Link id="l02250" /><CodeLine lineNumber="2250"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Amt = SA-&gt;getAPIntValue().urem(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l02251" /><CodeLine lineNumber="2251"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> RevAmt = <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - Amt;</Highlight></CodeLine>
<Link id="l02252" /><CodeLine lineNumber="2252"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02253" /><CodeLine lineNumber="2253"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// rotl: (Op0 &lt;&lt; Amt) | (Op0 &gt;&gt; (BW - Amt))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02254" /><CodeLine lineNumber="2254"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// rotr: (Op0 &lt;&lt; (BW - Amt)) | (Op0 &gt;&gt; Amt)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02255" /><CodeLine lineNumber="2255"><Highlight kind="normal">      APInt Demanded0 = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a7add4efc2976e2d2b52a1e5d427ce616">rotr</a>(IsROTL ? Amt : RevAmt);</Highlight></CodeLine>
<Link id="l02256" /><CodeLine lineNumber="2256"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op0, Demanded0, DemandedElts, Known2, TLO,</Highlight></CodeLine>
<Link id="l02257" /><CodeLine lineNumber="2257"><Highlight kind="normal">                               <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02258" /><CodeLine lineNumber="2258"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02259" /><CodeLine lineNumber="2259"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02260" /><CodeLine lineNumber="2260"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// rot&#42;(x, 0) --&gt; x</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02261" /><CodeLine lineNumber="2261"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Amt == 0)</Highlight></CodeLine>
<Link id="l02262" /><CodeLine lineNumber="2262"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op0);</Highlight></CodeLine>
<Link id="l02263" /><CodeLine lineNumber="2263"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02264" /><CodeLine lineNumber="2264"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// See if we don&#39;t demand either half of the rotated bits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02265" /><CodeLine lineNumber="2265"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((!TLO.LegalOperations() || <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, VT)) &amp;&amp;</Highlight></CodeLine>
<Link id="l02266" /><CodeLine lineNumber="2266"><Highlight kind="normal">          DemandedBits.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>() &gt;= (IsROTL ? Amt : RevAmt)) &#123;</Highlight></CodeLine>
<Link id="l02267" /><CodeLine lineNumber="2267"><Highlight kind="normal">        Op1 = TLO.DAG.getConstant(IsROTL ? Amt : RevAmt, dl, Op1.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>());</Highlight></CodeLine>
<Link id="l02268" /><CodeLine lineNumber="2268"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, Op0, Op1));</Highlight></CodeLine>
<Link id="l02269" /><CodeLine lineNumber="2269"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02270" /><CodeLine lineNumber="2270"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((!TLO.LegalOperations() || <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, VT)) &amp;&amp;</Highlight></CodeLine>
<Link id="l02271" /><CodeLine lineNumber="2271"><Highlight kind="normal">          DemandedBits.<a href="/docs/api/classes/llvm/apint/#a8bad27827f46bca6baf814cbd2b64e84">countl&#95;zero</a>() &gt;= (IsROTL ? RevAmt : Amt)) &#123;</Highlight></CodeLine>
<Link id="l02272" /><CodeLine lineNumber="2272"><Highlight kind="normal">        Op1 = TLO.DAG.getConstant(IsROTL ? RevAmt : Amt, dl, Op1.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>());</Highlight></CodeLine>
<Link id="l02273" /><CodeLine lineNumber="2273"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, Op0, Op1));</Highlight></CodeLine>
<Link id="l02274" /><CodeLine lineNumber="2274"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02275" /><CodeLine lineNumber="2275"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02276" /><CodeLine lineNumber="2276"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02277" /><CodeLine lineNumber="2277"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// For pow-2 bitwidths we only demand the bottom modulo amt bits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02278" /><CodeLine lineNumber="2278"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>)) &#123;</Highlight></CodeLine>
<Link id="l02279" /><CodeLine lineNumber="2279"><Highlight kind="normal">      APInt DemandedAmtBits(Op1.<a href="/docs/api/classes/llvm/sdvalue/#abd46b9ca1d156bc7e3dd9150cc106a28">getScalarValueSizeInBits</a>(), <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - 1);</Highlight></CodeLine>
<Link id="l02280" /><CodeLine lineNumber="2280"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op1, DemandedAmtBits, DemandedElts, Known2, TLO,</Highlight></CodeLine>
<Link id="l02281" /><CodeLine lineNumber="2281"><Highlight kind="normal">                               <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02282" /><CodeLine lineNumber="2282"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02283" /><CodeLine lineNumber="2283"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02284" /><CodeLine lineNumber="2284"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02285" /><CodeLine lineNumber="2285"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02286" /><CodeLine lineNumber="2286"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaac895215ecbb3c411c957c8beb39b70">ISD::SMIN</a>:</Highlight></CodeLine>
<Link id="l02287" /><CodeLine lineNumber="2287"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af3b59179b6fcbc89463181015ace8e9b">ISD::SMAX</a>:</Highlight></CodeLine>
<Link id="l02288" /><CodeLine lineNumber="2288"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a17126302da6199930e55e841ca1b082d">ISD::UMIN</a>:</Highlight></CodeLine>
<Link id="l02289" /><CodeLine lineNumber="2289"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af675e759c0ffff8d48ea14a60fe3517b">ISD::UMAX</a>: &#123;</Highlight></CodeLine>
<Link id="l02290" /><CodeLine lineNumber="2290"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opc = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode();</Highlight></CodeLine>
<Link id="l02291" /><CodeLine lineNumber="2291"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l02292" /><CodeLine lineNumber="2292"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l02293" /><CodeLine lineNumber="2293"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02294" /><CodeLine lineNumber="2294"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we&#39;re only demanding signbits, then we can simplify to OR/AND node.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02295" /><CodeLine lineNumber="2295"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> BitOp =</Highlight></CodeLine>
<Link id="l02296" /><CodeLine lineNumber="2296"><Highlight kind="normal">        (Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaac895215ecbb3c411c957c8beb39b70">ISD::SMIN</a> || Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af675e759c0ffff8d48ea14a60fe3517b">ISD::UMAX</a>) ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a> : ISD::<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">AND</a>;</Highlight></CodeLine>
<Link id="l02297" /><CodeLine lineNumber="2297"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSignBits =</Highlight></CodeLine>
<Link id="l02298" /><CodeLine lineNumber="2298"><Highlight kind="normal">        std::min(TLO.DAG.ComputeNumSignBits(Op0, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1),</Highlight></CodeLine>
<Link id="l02299" /><CodeLine lineNumber="2299"><Highlight kind="normal">                 TLO.DAG.ComputeNumSignBits(Op1, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1));</Highlight></CodeLine>
<Link id="l02300" /><CodeLine lineNumber="2300"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumDemandedUpperBits = <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - DemandedBits.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>();</Highlight></CodeLine>
<Link id="l02301" /><CodeLine lineNumber="2301"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumSignBits &gt;= NumDemandedUpperBits)</Highlight></CodeLine>
<Link id="l02302" /><CodeLine lineNumber="2302"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(BitOp, SDLoc(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>), VT, Op0, Op1));</Highlight></CodeLine>
<Link id="l02303" /><CodeLine lineNumber="2303"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02304" /><CodeLine lineNumber="2304"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Check if one arg is always less/greater than (or equal) to the other arg.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02305" /><CodeLine lineNumber="2305"><Highlight kind="normal">    KnownBits Known0 = TLO.DAG.computeKnownBits(Op0, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l02306" /><CodeLine lineNumber="2306"><Highlight kind="normal">    KnownBits Known1 = TLO.DAG.computeKnownBits(Op1, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l02307" /><CodeLine lineNumber="2307"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (Opc) &#123;</Highlight></CodeLine>
<Link id="l02308" /><CodeLine lineNumber="2308"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaac895215ecbb3c411c957c8beb39b70">ISD::SMIN</a>:</Highlight></CodeLine>
<Link id="l02309" /><CodeLine lineNumber="2309"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;bool&gt; IsSLE = <a href="/docs/api/structs/llvm/knownbits/#acc61013b6ddecc5b9c8105aa961b71f2">KnownBits::sle</a>(Known0, Known1))</Highlight></CodeLine>
<Link id="l02310" /><CodeLine lineNumber="2310"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, &#42;IsSLE ? Op0 : Op1);</Highlight></CodeLine>
<Link id="l02311" /><CodeLine lineNumber="2311"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;bool&gt; IsSLT = <a href="/docs/api/structs/llvm/knownbits/#a97cc47234699c26a59495f019e3fb1e3">KnownBits::slt</a>(Known0, Known1))</Highlight></CodeLine>
<Link id="l02312" /><CodeLine lineNumber="2312"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, &#42;IsSLT ? Op0 : Op1);</Highlight></CodeLine>
<Link id="l02313" /><CodeLine lineNumber="2313"><Highlight kind="normal">      Known = <a href="/docs/api/structs/llvm/knownbits/#a87b6ba94fe7d3ee69dbeed7350fad096">KnownBits::smin</a>(Known0, Known1);</Highlight></CodeLine>
<Link id="l02314" /><CodeLine lineNumber="2314"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02315" /><CodeLine lineNumber="2315"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af3b59179b6fcbc89463181015ace8e9b">ISD::SMAX</a>:</Highlight></CodeLine>
<Link id="l02316" /><CodeLine lineNumber="2316"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;bool&gt; IsSGE = <a href="/docs/api/structs/llvm/knownbits/#a466e550382eee7535225b95ef91914d1">KnownBits::sge</a>(Known0, Known1))</Highlight></CodeLine>
<Link id="l02317" /><CodeLine lineNumber="2317"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, &#42;IsSGE ? Op0 : Op1);</Highlight></CodeLine>
<Link id="l02318" /><CodeLine lineNumber="2318"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;bool&gt; IsSGT = <a href="/docs/api/structs/llvm/knownbits/#ad20d9f61ec3c5c2a0bd9163cb6c15335">KnownBits::sgt</a>(Known0, Known1))</Highlight></CodeLine>
<Link id="l02319" /><CodeLine lineNumber="2319"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, &#42;IsSGT ? Op0 : Op1);</Highlight></CodeLine>
<Link id="l02320" /><CodeLine lineNumber="2320"><Highlight kind="normal">      Known = <a href="/docs/api/structs/llvm/knownbits/#a137874360a1967ac811fe9e5d7605eee">KnownBits::smax</a>(Known0, Known1);</Highlight></CodeLine>
<Link id="l02321" /><CodeLine lineNumber="2321"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02322" /><CodeLine lineNumber="2322"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a17126302da6199930e55e841ca1b082d">ISD::UMIN</a>:</Highlight></CodeLine>
<Link id="l02323" /><CodeLine lineNumber="2323"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;bool&gt; IsULE = <a href="/docs/api/structs/llvm/knownbits/#aa8a47d48d5537edfc125ee8ed5659955">KnownBits::ule</a>(Known0, Known1))</Highlight></CodeLine>
<Link id="l02324" /><CodeLine lineNumber="2324"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, &#42;IsULE ? Op0 : Op1);</Highlight></CodeLine>
<Link id="l02325" /><CodeLine lineNumber="2325"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;bool&gt; IsULT = <a href="/docs/api/structs/llvm/knownbits/#aa0d9eb764d22c7fabfecf5164123cc18">KnownBits::ult</a>(Known0, Known1))</Highlight></CodeLine>
<Link id="l02326" /><CodeLine lineNumber="2326"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, &#42;IsULT ? Op0 : Op1);</Highlight></CodeLine>
<Link id="l02327" /><CodeLine lineNumber="2327"><Highlight kind="normal">      Known = <a href="/docs/api/structs/llvm/knownbits/#aea97402782d7e8098b6ae00c7a6365dd">KnownBits::umin</a>(Known0, Known1);</Highlight></CodeLine>
<Link id="l02328" /><CodeLine lineNumber="2328"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02329" /><CodeLine lineNumber="2329"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af675e759c0ffff8d48ea14a60fe3517b">ISD::UMAX</a>:</Highlight></CodeLine>
<Link id="l02330" /><CodeLine lineNumber="2330"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;bool&gt; IsUGE = <a href="/docs/api/structs/llvm/knownbits/#ad86f53ca31fd59930678248efbfaf516">KnownBits::uge</a>(Known0, Known1))</Highlight></CodeLine>
<Link id="l02331" /><CodeLine lineNumber="2331"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, &#42;IsUGE ? Op0 : Op1);</Highlight></CodeLine>
<Link id="l02332" /><CodeLine lineNumber="2332"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;bool&gt; IsUGT = <a href="/docs/api/structs/llvm/knownbits/#a92e582ead745c86654cd8d0e1228f0c5">KnownBits::ugt</a>(Known0, Known1))</Highlight></CodeLine>
<Link id="l02333" /><CodeLine lineNumber="2333"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, &#42;IsUGT ? Op0 : Op1);</Highlight></CodeLine>
<Link id="l02334" /><CodeLine lineNumber="2334"><Highlight kind="normal">      Known = <a href="/docs/api/structs/llvm/knownbits/#a5120eaa394627e6c1ec3d66ef77947cd">KnownBits::umax</a>(Known0, Known1);</Highlight></CodeLine>
<Link id="l02335" /><CodeLine lineNumber="2335"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02336" /><CodeLine lineNumber="2336"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02337" /><CodeLine lineNumber="2337"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02338" /><CodeLine lineNumber="2338"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02339" /><CodeLine lineNumber="2339"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aeea401cc0b7fa5aa6f4d3a0612140e1d">ISD::BITREVERSE</a>: &#123;</Highlight></CodeLine>
<Link id="l02340" /><CodeLine lineNumber="2340"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l02341" /><CodeLine lineNumber="2341"><Highlight kind="normal">    APInt DemandedSrcBits = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a7b8b4253b618610eb5cb497b4104ebc3">reverseBits</a>();</Highlight></CodeLine>
<Link id="l02342" /><CodeLine lineNumber="2342"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Src, DemandedSrcBits, DemandedElts, Known2, TLO,</Highlight></CodeLine>
<Link id="l02343" /><CodeLine lineNumber="2343"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02344" /><CodeLine lineNumber="2344"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02345" /><CodeLine lineNumber="2345"><Highlight kind="normal">    Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a> = Known2.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>.<a href="/docs/api/classes/llvm/apint/#a7b8b4253b618610eb5cb497b4104ebc3">reverseBits</a>();</Highlight></CodeLine>
<Link id="l02346" /><CodeLine lineNumber="2346"><Highlight kind="normal">    Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> = Known2.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>.<a href="/docs/api/classes/llvm/apint/#a7b8b4253b618610eb5cb497b4104ebc3">reverseBits</a>();</Highlight></CodeLine>
<Link id="l02347" /><CodeLine lineNumber="2347"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02348" /><CodeLine lineNumber="2348"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02349" /><CodeLine lineNumber="2349"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a19328c462764af5f4699fb1698dad994">ISD::BSWAP</a>: &#123;</Highlight></CodeLine>
<Link id="l02350" /><CodeLine lineNumber="2350"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l02351" /><CodeLine lineNumber="2351"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02352" /><CodeLine lineNumber="2352"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the only bits demanded come from one byte of the bswap result,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02353" /><CodeLine lineNumber="2353"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// just shift the input byte into position to eliminate the bswap.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02354" /><CodeLine lineNumber="2354"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NLZ = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a8bad27827f46bca6baf814cbd2b64e84">countl&#95;zero</a>();</Highlight></CodeLine>
<Link id="l02355" /><CodeLine lineNumber="2355"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NTZ = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>();</Highlight></CodeLine>
<Link id="l02356" /><CodeLine lineNumber="2356"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02357" /><CodeLine lineNumber="2357"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Round NTZ down to the next byte.  If we have 11 trailing zeros, then</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02358" /><CodeLine lineNumber="2358"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// we need all the bits down to bit 8  Likewise, round NLZ.  If we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02359" /><CodeLine lineNumber="2359"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// have 14 leading zeros, round to 8</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02360" /><CodeLine lineNumber="2360"><Highlight kind="normal">    NLZ = <a href="/docs/api/namespaces/llvm/#a41896492f62ee8d25cf8aaad70bd88aa">alignDown</a>(NLZ, 8);</Highlight></CodeLine>
<Link id="l02361" /><CodeLine lineNumber="2361"><Highlight kind="normal">    NTZ = <a href="/docs/api/namespaces/llvm/#a41896492f62ee8d25cf8aaad70bd88aa">alignDown</a>(NTZ, 8);</Highlight></CodeLine>
<Link id="l02362" /><CodeLine lineNumber="2362"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we need exactly one byte, we can do this transformation.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02363" /><CodeLine lineNumber="2363"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - NLZ - NTZ == 8) &#123;</Highlight></CodeLine>
<Link id="l02364" /><CodeLine lineNumber="2364"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Replace this with either a left or right shift to get the byte into</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02365" /><CodeLine lineNumber="2365"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// the right place.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02366" /><CodeLine lineNumber="2366"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShiftOpcode = NLZ &gt; NTZ ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>;</Highlight></CodeLine>
<Link id="l02367" /><CodeLine lineNumber="2367"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!TLO.LegalOperations() || <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(ShiftOpcode, VT)) &#123;</Highlight></CodeLine>
<Link id="l02368" /><CodeLine lineNumber="2368"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShiftAmount = NLZ &gt; NTZ ? NLZ - NTZ : NTZ - NLZ;</Highlight></CodeLine>
<Link id="l02369" /><CodeLine lineNumber="2369"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShAmt = TLO.DAG.getShiftAmountConstant(ShiftAmount, VT, dl);</Highlight></CodeLine>
<Link id="l02370" /><CodeLine lineNumber="2370"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(ShiftOpcode, dl, VT, Src, ShAmt);</Highlight></CodeLine>
<Link id="l02371" /><CodeLine lineNumber="2371"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l02372" /><CodeLine lineNumber="2372"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02373" /><CodeLine lineNumber="2373"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02374" /><CodeLine lineNumber="2374"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02375" /><CodeLine lineNumber="2375"><Highlight kind="normal">    APInt DemandedSrcBits = DemandedBits.<a href="/docs/api/classes/llvm/apint/#ace0bd40e4bee1851ebebb276178d65fc">byteSwap</a>();</Highlight></CodeLine>
<Link id="l02376" /><CodeLine lineNumber="2376"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Src, DemandedSrcBits, DemandedElts, Known2, TLO,</Highlight></CodeLine>
<Link id="l02377" /><CodeLine lineNumber="2377"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02378" /><CodeLine lineNumber="2378"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02379" /><CodeLine lineNumber="2379"><Highlight kind="normal">    Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a> = Known2.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>.<a href="/docs/api/classes/llvm/apint/#ace0bd40e4bee1851ebebb276178d65fc">byteSwap</a>();</Highlight></CodeLine>
<Link id="l02380" /><CodeLine lineNumber="2380"><Highlight kind="normal">    Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> = Known2.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>.<a href="/docs/api/classes/llvm/apint/#ace0bd40e4bee1851ebebb276178d65fc">byteSwap</a>();</Highlight></CodeLine>
<Link id="l02381" /><CodeLine lineNumber="2381"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02382" /><CodeLine lineNumber="2382"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02383" /><CodeLine lineNumber="2383"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a991d07d163bd4d9984cf1ef36e92c214">ISD::CTPOP</a>: &#123;</Highlight></CodeLine>
<Link id="l02384" /><CodeLine lineNumber="2384"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If only 1 bit is demanded, replace with PARITY as long as we&#39;re before</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02385" /><CodeLine lineNumber="2385"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// op legalization.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02386" /><CodeLine lineNumber="2386"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// FIXME: Limit to scalars for now.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02387" /><CodeLine lineNumber="2387"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#aea5f26deda5ef97e02f6afc57c0c3920">isOne</a>() &amp;&amp; !TLO.LegalOps &amp;&amp; !VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>())</Highlight></CodeLine>
<Link id="l02388" /><CodeLine lineNumber="2388"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aa47439d20ce0879ea68ca293e018b4f5">ISD::PARITY</a>, dl, VT,</Highlight></CodeLine>
<Link id="l02389" /><CodeLine lineNumber="2389"><Highlight kind="normal">                                               <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0)));</Highlight></CodeLine>
<Link id="l02390" /><CodeLine lineNumber="2390"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02391" /><CodeLine lineNumber="2391"><Highlight kind="normal">    Known = TLO.DAG.computeKnownBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l02392" /><CodeLine lineNumber="2392"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02393" /><CodeLine lineNumber="2393"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02394" /><CodeLine lineNumber="2394"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaa59dd5ec37f21905436b354c0292d9e">ISD::SIGN&#95;EXTEND&#95;INREG</a>: &#123;</Highlight></CodeLine>
<Link id="l02395" /><CodeLine lineNumber="2395"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l02396" /><CodeLine lineNumber="2396"><Highlight kind="normal">    EVT ExVT = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VTSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1))-&gt;getVT();</Highlight></CodeLine>
<Link id="l02397" /><CodeLine lineNumber="2397"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ExVTBits = ExVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l02398" /><CodeLine lineNumber="2398"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02399" /><CodeLine lineNumber="2399"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we only care about the highest bit, don&#39;t bother shifting right.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02400" /><CodeLine lineNumber="2400"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#a4aa7e7ca8ab4093fd0dbadb223b998c0">isSignMask</a>()) &#123;</Highlight></CodeLine>
<Link id="l02401" /><CodeLine lineNumber="2401"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> MinSignedBits =</Highlight></CodeLine>
<Link id="l02402" /><CodeLine lineNumber="2402"><Highlight kind="normal">          TLO.DAG.ComputeMaxSignificantBits(Op0, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l02403" /><CodeLine lineNumber="2403"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AlreadySignExtended = ExVTBits &gt;= MinSignedBits;</Highlight></CodeLine>
<Link id="l02404" /><CodeLine lineNumber="2404"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// However if the input is already sign extended we expect the sign</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02405" /><CodeLine lineNumber="2405"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// extension to be dropped altogether later and do not simplify.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02406" /><CodeLine lineNumber="2406"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!AlreadySignExtended) &#123;</Highlight></CodeLine>
<Link id="l02407" /><CodeLine lineNumber="2407"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Compute the correct shift amount type, which must be getShiftAmountTy</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02408" /><CodeLine lineNumber="2408"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// for scalar types after legalization.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02409" /><CodeLine lineNumber="2409"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShiftAmt =</Highlight></CodeLine>
<Link id="l02410" /><CodeLine lineNumber="2410"><Highlight kind="normal">            TLO.DAG.getShiftAmountConstant(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - ExVTBits, VT, dl);</Highlight></CodeLine>
<Link id="l02411" /><CodeLine lineNumber="2411"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l02412" /><CodeLine lineNumber="2412"><Highlight kind="normal">                             TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, Op0, ShiftAmt));</Highlight></CodeLine>
<Link id="l02413" /><CodeLine lineNumber="2413"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02414" /><CodeLine lineNumber="2414"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02415" /><CodeLine lineNumber="2415"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02416" /><CodeLine lineNumber="2416"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If none of the extended bits are demanded, eliminate the sextinreg.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02417" /><CodeLine lineNumber="2417"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#a3015474e70e59c0a3ed4f9f0e8644b75">getActiveBits</a>() &lt;= ExVTBits)</Highlight></CodeLine>
<Link id="l02418" /><CodeLine lineNumber="2418"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op0);</Highlight></CodeLine>
<Link id="l02419" /><CodeLine lineNumber="2419"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02420" /><CodeLine lineNumber="2420"><Highlight kind="normal">    APInt InputDemandedBits = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a0fa9845f80fa0642b31c238f4ab0d5ef">getLoBits</a>(ExVTBits);</Highlight></CodeLine>
<Link id="l02421" /><CodeLine lineNumber="2421"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02422" /><CodeLine lineNumber="2422"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Since the sign extended bits are demanded, we know that the sign</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02423" /><CodeLine lineNumber="2423"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// bit is demanded.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02424" /><CodeLine lineNumber="2424"><Highlight kind="normal">    InputDemandedBits.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(ExVTBits - 1);</Highlight></CodeLine>
<Link id="l02425" /><CodeLine lineNumber="2425"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02426" /><CodeLine lineNumber="2426"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op0, InputDemandedBits, DemandedElts, Known, TLO,</Highlight></CodeLine>
<Link id="l02427" /><CodeLine lineNumber="2427"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02428" /><CodeLine lineNumber="2428"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02429" /><CodeLine lineNumber="2429"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02430" /><CodeLine lineNumber="2430"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the sign bit of the input is known set or clear, then we know the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02431" /><CodeLine lineNumber="2431"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// top bits of the result.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02432" /><CodeLine lineNumber="2432"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02433" /><CodeLine lineNumber="2433"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the input sign bit is known zero, convert this into a zero extension.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02434" /><CodeLine lineNumber="2434"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>&#91;ExVTBits - 1&#93;)</Highlight></CodeLine>
<Link id="l02435" /><CodeLine lineNumber="2435"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getZeroExtendInReg(Op0, dl, ExVT));</Highlight></CodeLine>
<Link id="l02436" /><CodeLine lineNumber="2436"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02437" /><CodeLine lineNumber="2437"><Highlight kind="normal">    APInt <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a> = <a href="/docs/api/classes/llvm/apint/#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, ExVTBits);</Highlight></CodeLine>
<Link id="l02438" /><CodeLine lineNumber="2438"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>&#91;ExVTBits - 1&#93;) &#123; </Highlight><Highlight kind="comment">// Input sign bit known set</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02439" /><CodeLine lineNumber="2439"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>.<a href="/docs/api/classes/llvm/apint/#a286d4fa2a50c9ac6ac3a8069cccfcd0c">setBitsFrom</a>(ExVTBits);</Highlight></CodeLine>
<Link id="l02440" /><CodeLine lineNumber="2440"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> &amp;= <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a>;</Highlight></CodeLine>
<Link id="l02441" /><CodeLine lineNumber="2441"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123; </Highlight><Highlight kind="comment">// Input sign bit unknown</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02442" /><CodeLine lineNumber="2442"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> &amp;= <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a>;</Highlight></CodeLine>
<Link id="l02443" /><CodeLine lineNumber="2443"><Highlight kind="normal">      Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a> &amp;= <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a>;</Highlight></CodeLine>
<Link id="l02444" /><CodeLine lineNumber="2444"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02445" /><CodeLine lineNumber="2445"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02446" /><CodeLine lineNumber="2446"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02447" /><CodeLine lineNumber="2447"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a41bd84b853e2c03fb1af1f4ca9ebdcaf">ISD::BUILD&#95;PAIR</a>: &#123;</Highlight></CodeLine>
<Link id="l02448" /><CodeLine lineNumber="2448"><Highlight kind="normal">    EVT HalfVT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0).getValueType();</Highlight></CodeLine>
<Link id="l02449" /><CodeLine lineNumber="2449"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> HalfBitWidth = HalfVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l02450" /><CodeLine lineNumber="2450"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02451" /><CodeLine lineNumber="2451"><Highlight kind="normal">    APInt MaskLo = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a0fa9845f80fa0642b31c238f4ab0d5ef">getLoBits</a>(HalfBitWidth).<a href="/docs/api/classes/llvm/apint/#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(HalfBitWidth);</Highlight></CodeLine>
<Link id="l02452" /><CodeLine lineNumber="2452"><Highlight kind="normal">    APInt MaskHi = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a2d5c4385716b3fa4a96e879987cccedc">getHiBits</a>(HalfBitWidth).<a href="/docs/api/classes/llvm/apint/#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(HalfBitWidth);</Highlight></CodeLine>
<Link id="l02453" /><CodeLine lineNumber="2453"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02454" /><CodeLine lineNumber="2454"><Highlight kind="normal">    KnownBits KnownLo, KnownHi;</Highlight></CodeLine>
<Link id="l02455" /><CodeLine lineNumber="2455"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02456" /><CodeLine lineNumber="2456"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), MaskLo, KnownLo, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02457" /><CodeLine lineNumber="2457"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02458" /><CodeLine lineNumber="2458"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02459" /><CodeLine lineNumber="2459"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1), MaskHi, KnownHi, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02460" /><CodeLine lineNumber="2460"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02461" /><CodeLine lineNumber="2461"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02462" /><CodeLine lineNumber="2462"><Highlight kind="normal">    Known = KnownHi.<a href="/docs/api/structs/llvm/knownbits/#a4d1c9028cc02b58ce040aa83456c9129">concat</a>(KnownLo);</Highlight></CodeLine>
<Link id="l02463" /><CodeLine lineNumber="2463"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02464" /><CodeLine lineNumber="2464"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02465" /><CodeLine lineNumber="2465"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110adf7f4fc30c272a1987e075d7470df84c">ISD::ZERO&#95;EXTEND&#95;VECTOR&#95;INREG</a>:</Highlight></CodeLine>
<Link id="l02466" /><CodeLine lineNumber="2466"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l02467" /><CodeLine lineNumber="2467"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02468" /><CodeLine lineNumber="2468"><Highlight kind="normal">    &#91;&#91;fallthrough&#93;&#93;;</Highlight></CodeLine>
<Link id="l02469" /><CodeLine lineNumber="2469"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>: &#123;</Highlight></CodeLine>
<Link id="l02470" /><CodeLine lineNumber="2470"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l02471" /><CodeLine lineNumber="2471"><Highlight kind="normal">    EVT SrcVT = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType();</Highlight></CodeLine>
<Link id="l02472" /><CodeLine lineNumber="2472"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> InBits = SrcVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l02473" /><CodeLine lineNumber="2473"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> InElts = SrcVT.<a href="/docs/api/structs/llvm/evt/#a920f0719057d7352f9da10908859368d">isFixedLengthVector</a>() ? SrcVT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>() : 1;</Highlight></CodeLine>
<Link id="l02474" /><CodeLine lineNumber="2474"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsVecInReg = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110adf7f4fc30c272a1987e075d7470df84c">ISD::ZERO&#95;EXTEND&#95;VECTOR&#95;INREG</a>;</Highlight></CodeLine>
<Link id="l02475" /><CodeLine lineNumber="2475"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02476" /><CodeLine lineNumber="2476"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If none of the top bits are demanded, convert this into an any&#95;extend.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02477" /><CodeLine lineNumber="2477"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#a3015474e70e59c0a3ed4f9f0e8644b75">getActiveBits</a>() &lt;= InBits) &#123;</Highlight></CodeLine>
<Link id="l02478" /><CodeLine lineNumber="2478"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If we only need the non-extended bits of the bottom element</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02479" /><CodeLine lineNumber="2479"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// then we can just bitcast to the result.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02480" /><CodeLine lineNumber="2480"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsLE &amp;&amp; IsVecInReg &amp;&amp; DemandedElts == 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l02481" /><CodeLine lineNumber="2481"><Highlight kind="normal">          VT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() == SrcVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>())</Highlight></CodeLine>
<Link id="l02482" /><CodeLine lineNumber="2482"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getBitcast(VT, Src));</Highlight></CodeLine>
<Link id="l02483" /><CodeLine lineNumber="2483"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02484" /><CodeLine lineNumber="2484"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opc =</Highlight></CodeLine>
<Link id="l02485" /><CodeLine lineNumber="2485"><Highlight kind="normal">          IsVecInReg ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaa275bf149ab5df1067cfb721936ecbc">ISD::ANY&#95;EXTEND&#95;VECTOR&#95;INREG</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">ISD::ANY&#95;EXTEND</a>;</Highlight></CodeLine>
<Link id="l02486" /><CodeLine lineNumber="2486"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!TLO.LegalOperations() || <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(Opc, VT))</Highlight></CodeLine>
<Link id="l02487" /><CodeLine lineNumber="2487"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(Opc, dl, VT, Src));</Highlight></CodeLine>
<Link id="l02488" /><CodeLine lineNumber="2488"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02489" /><CodeLine lineNumber="2489"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02490" /><CodeLine lineNumber="2490"><Highlight kind="normal">    APInt InDemandedBits = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(InBits);</Highlight></CodeLine>
<Link id="l02491" /><CodeLine lineNumber="2491"><Highlight kind="normal">    APInt InDemandedElts = DemandedElts.<a href="/docs/api/classes/llvm/apint/#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(InElts);</Highlight></CodeLine>
<Link id="l02492" /><CodeLine lineNumber="2492"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Src, InDemandedBits, InDemandedElts, Known, TLO,</Highlight></CodeLine>
<Link id="l02493" /><CodeLine lineNumber="2493"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1)) &#123;</Highlight></CodeLine>
<Link id="l02494" /><CodeLine lineNumber="2494"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;dropFlags(<a href="/docs/api/structs/llvm/sdnodeflags/#a19128eb1e6729dd3cf2afce783620adaade15270b964f4015c2eee3e4825320d6">SDNodeFlags::NonNeg</a>);</Highlight></CodeLine>
<Link id="l02495" /><CodeLine lineNumber="2495"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02496" /><CodeLine lineNumber="2496"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02497" /><CodeLine lineNumber="2497"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Known.<a href="/docs/api/structs/llvm/knownbits/#a4fdc09049a61f952b5d52788dbd2f69b">getBitWidth</a>() == InBits &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Src width has changed?&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02498" /><CodeLine lineNumber="2498"><Highlight kind="normal">    Known = Known.<a href="/docs/api/structs/llvm/knownbits/#a51c3c203b80468b8761416d14e6f5b7f">zext</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l02499" /><CodeLine lineNumber="2499"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02500" /><CodeLine lineNumber="2500"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02501" /><CodeLine lineNumber="2501"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewSrc = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l02502" /><CodeLine lineNumber="2502"><Highlight kind="normal">            Src, InDemandedBits, InDemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02503" /><CodeLine lineNumber="2503"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode(), dl, VT, NewSrc));</Highlight></CodeLine>
<Link id="l02504" /><CodeLine lineNumber="2504"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02505" /><CodeLine lineNumber="2505"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02506" /><CodeLine lineNumber="2506"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3893859b5caa079593b9bf91b96e05fb">ISD::SIGN&#95;EXTEND&#95;VECTOR&#95;INREG</a>:</Highlight></CodeLine>
<Link id="l02507" /><CodeLine lineNumber="2507"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l02508" /><CodeLine lineNumber="2508"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02509" /><CodeLine lineNumber="2509"><Highlight kind="normal">    &#91;&#91;fallthrough&#93;&#93;;</Highlight></CodeLine>
<Link id="l02510" /><CodeLine lineNumber="2510"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5183f3d72924bc7c77ba8d3f5de9f602">ISD::SIGN&#95;EXTEND</a>: &#123;</Highlight></CodeLine>
<Link id="l02511" /><CodeLine lineNumber="2511"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l02512" /><CodeLine lineNumber="2512"><Highlight kind="normal">    EVT SrcVT = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType();</Highlight></CodeLine>
<Link id="l02513" /><CodeLine lineNumber="2513"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> InBits = SrcVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l02514" /><CodeLine lineNumber="2514"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> InElts = SrcVT.<a href="/docs/api/structs/llvm/evt/#a920f0719057d7352f9da10908859368d">isFixedLengthVector</a>() ? SrcVT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>() : 1;</Highlight></CodeLine>
<Link id="l02515" /><CodeLine lineNumber="2515"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsVecInReg = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3893859b5caa079593b9bf91b96e05fb">ISD::SIGN&#95;EXTEND&#95;VECTOR&#95;INREG</a>;</Highlight></CodeLine>
<Link id="l02516" /><CodeLine lineNumber="2516"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02517" /><CodeLine lineNumber="2517"><Highlight kind="normal">    APInt InDemandedElts = DemandedElts.<a href="/docs/api/classes/llvm/apint/#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(InElts);</Highlight></CodeLine>
<Link id="l02518" /><CodeLine lineNumber="2518"><Highlight kind="normal">    APInt InDemandedBits = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(InBits);</Highlight></CodeLine>
<Link id="l02519" /><CodeLine lineNumber="2519"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02520" /><CodeLine lineNumber="2520"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Since some of the sign extended bits are demanded, we know that the sign</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02521" /><CodeLine lineNumber="2521"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// bit is demanded.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02522" /><CodeLine lineNumber="2522"><Highlight kind="normal">    InDemandedBits.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(InBits - 1);</Highlight></CodeLine>
<Link id="l02523" /><CodeLine lineNumber="2523"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02524" /><CodeLine lineNumber="2524"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If none of the top bits are demanded, convert this into an any&#95;extend.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02525" /><CodeLine lineNumber="2525"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.<a href="/docs/api/classes/llvm/apint/#a3015474e70e59c0a3ed4f9f0e8644b75">getActiveBits</a>() &lt;= InBits) &#123;</Highlight></CodeLine>
<Link id="l02526" /><CodeLine lineNumber="2526"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If we only need the non-extended bits of the bottom element</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02527" /><CodeLine lineNumber="2527"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// then we can just bitcast to the result.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02528" /><CodeLine lineNumber="2528"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsLE &amp;&amp; IsVecInReg &amp;&amp; DemandedElts == 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l02529" /><CodeLine lineNumber="2529"><Highlight kind="normal">          VT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() == SrcVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>())</Highlight></CodeLine>
<Link id="l02530" /><CodeLine lineNumber="2530"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getBitcast(VT, Src));</Highlight></CodeLine>
<Link id="l02531" /><CodeLine lineNumber="2531"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02532" /><CodeLine lineNumber="2532"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Don&#39;t lose an all signbits 0/-1 splat on targets with 0/-1 booleans.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02533" /><CodeLine lineNumber="2533"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(VT) != <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a695a19c9c3ae14638be151add82755cb">ZeroOrNegativeOneBooleanContent</a> ||</Highlight></CodeLine>
<Link id="l02534" /><CodeLine lineNumber="2534"><Highlight kind="normal">          TLO.DAG.ComputeNumSignBits(Src, InDemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1) !=</Highlight></CodeLine>
<Link id="l02535" /><CodeLine lineNumber="2535"><Highlight kind="normal">              InBits) &#123;</Highlight></CodeLine>
<Link id="l02536" /><CodeLine lineNumber="2536"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opc =</Highlight></CodeLine>
<Link id="l02537" /><CodeLine lineNumber="2537"><Highlight kind="normal">            IsVecInReg ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaa275bf149ab5df1067cfb721936ecbc">ISD::ANY&#95;EXTEND&#95;VECTOR&#95;INREG</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">ISD::ANY&#95;EXTEND</a>;</Highlight></CodeLine>
<Link id="l02538" /><CodeLine lineNumber="2538"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!TLO.LegalOperations() || <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(Opc, VT))</Highlight></CodeLine>
<Link id="l02539" /><CodeLine lineNumber="2539"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(Opc, dl, VT, Src));</Highlight></CodeLine>
<Link id="l02540" /><CodeLine lineNumber="2540"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02541" /><CodeLine lineNumber="2541"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02542" /><CodeLine lineNumber="2542"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02543" /><CodeLine lineNumber="2543"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Src, InDemandedBits, InDemandedElts, Known, TLO,</Highlight></CodeLine>
<Link id="l02544" /><CodeLine lineNumber="2544"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02545" /><CodeLine lineNumber="2545"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02546" /><CodeLine lineNumber="2546"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Known.<a href="/docs/api/structs/llvm/knownbits/#a4fdc09049a61f952b5d52788dbd2f69b">getBitWidth</a>() == InBits &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Src width has changed?&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02547" /><CodeLine lineNumber="2547"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02548" /><CodeLine lineNumber="2548"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the sign bit is known one, the top bits match.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02549" /><CodeLine lineNumber="2549"><Highlight kind="normal">    Known = Known.<a href="/docs/api/structs/llvm/knownbits/#a781ca23d84995ffb2efaa51267053c19">sext</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l02550" /><CodeLine lineNumber="2550"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02551" /><CodeLine lineNumber="2551"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the sign bit is known zero, convert this to a zero extend.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02552" /><CodeLine lineNumber="2552"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Known.<a href="/docs/api/structs/llvm/knownbits/#a157efd68e8b4b838829cad165b1583f8">isNonNegative</a>()) &#123;</Highlight></CodeLine>
<Link id="l02553" /><CodeLine lineNumber="2553"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opc =</Highlight></CodeLine>
<Link id="l02554" /><CodeLine lineNumber="2554"><Highlight kind="normal">          IsVecInReg ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110adf7f4fc30c272a1987e075d7470df84c">ISD::ZERO&#95;EXTEND&#95;VECTOR&#95;INREG</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>;</Highlight></CodeLine>
<Link id="l02555" /><CodeLine lineNumber="2555"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!TLO.LegalOperations() || <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(Opc, VT)) &#123;</Highlight></CodeLine>
<Link id="l02556" /><CodeLine lineNumber="2556"><Highlight kind="normal">        SDNodeFlags <a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>;</Highlight></CodeLine>
<Link id="l02557" /><CodeLine lineNumber="2557"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!IsVecInReg)</Highlight></CodeLine>
<Link id="l02558" /><CodeLine lineNumber="2558"><Highlight kind="normal">          <a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a> |= <a href="/docs/api/structs/llvm/sdnodeflags/#a19128eb1e6729dd3cf2afce783620adaade15270b964f4015c2eee3e4825320d6">SDNodeFlags::NonNeg</a>;</Highlight></CodeLine>
<Link id="l02559" /><CodeLine lineNumber="2559"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(Opc, dl, VT, Src, Flags));</Highlight></CodeLine>
<Link id="l02560" /><CodeLine lineNumber="2560"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02561" /><CodeLine lineNumber="2561"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02562" /><CodeLine lineNumber="2562"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02563" /><CodeLine lineNumber="2563"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02564" /><CodeLine lineNumber="2564"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewSrc = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l02565" /><CodeLine lineNumber="2565"><Highlight kind="normal">            Src, InDemandedBits, InDemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02566" /><CodeLine lineNumber="2566"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode(), dl, VT, NewSrc));</Highlight></CodeLine>
<Link id="l02567" /><CodeLine lineNumber="2567"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02568" /><CodeLine lineNumber="2568"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02569" /><CodeLine lineNumber="2569"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaa275bf149ab5df1067cfb721936ecbc">ISD::ANY&#95;EXTEND&#95;VECTOR&#95;INREG</a>:</Highlight></CodeLine>
<Link id="l02570" /><CodeLine lineNumber="2570"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l02571" /><CodeLine lineNumber="2571"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02572" /><CodeLine lineNumber="2572"><Highlight kind="normal">    &#91;&#91;fallthrough&#93;&#93;;</Highlight></CodeLine>
<Link id="l02573" /><CodeLine lineNumber="2573"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">ISD::ANY&#95;EXTEND</a>: &#123;</Highlight></CodeLine>
<Link id="l02574" /><CodeLine lineNumber="2574"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l02575" /><CodeLine lineNumber="2575"><Highlight kind="normal">    EVT SrcVT = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType();</Highlight></CodeLine>
<Link id="l02576" /><CodeLine lineNumber="2576"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> InBits = SrcVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l02577" /><CodeLine lineNumber="2577"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> InElts = SrcVT.<a href="/docs/api/structs/llvm/evt/#a920f0719057d7352f9da10908859368d">isFixedLengthVector</a>() ? SrcVT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>() : 1;</Highlight></CodeLine>
<Link id="l02578" /><CodeLine lineNumber="2578"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsVecInReg = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaa275bf149ab5df1067cfb721936ecbc">ISD::ANY&#95;EXTEND&#95;VECTOR&#95;INREG</a>;</Highlight></CodeLine>
<Link id="l02579" /><CodeLine lineNumber="2579"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02580" /><CodeLine lineNumber="2580"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we only need the bottom element then we can just bitcast.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02581" /><CodeLine lineNumber="2581"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO: Handle ANY&#95;EXTEND?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02582" /><CodeLine lineNumber="2582"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsLE &amp;&amp; IsVecInReg &amp;&amp; DemandedElts == 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l02583" /><CodeLine lineNumber="2583"><Highlight kind="normal">        VT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() == SrcVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>())</Highlight></CodeLine>
<Link id="l02584" /><CodeLine lineNumber="2584"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getBitcast(VT, Src));</Highlight></CodeLine>
<Link id="l02585" /><CodeLine lineNumber="2585"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02586" /><CodeLine lineNumber="2586"><Highlight kind="normal">    APInt InDemandedBits = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(InBits);</Highlight></CodeLine>
<Link id="l02587" /><CodeLine lineNumber="2587"><Highlight kind="normal">    APInt InDemandedElts = DemandedElts.<a href="/docs/api/classes/llvm/apint/#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(InElts);</Highlight></CodeLine>
<Link id="l02588" /><CodeLine lineNumber="2588"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Src, InDemandedBits, InDemandedElts, Known, TLO,</Highlight></CodeLine>
<Link id="l02589" /><CodeLine lineNumber="2589"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02590" /><CodeLine lineNumber="2590"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02591" /><CodeLine lineNumber="2591"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Known.<a href="/docs/api/structs/llvm/knownbits/#a4fdc09049a61f952b5d52788dbd2f69b">getBitWidth</a>() == InBits &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Src width has changed?&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02592" /><CodeLine lineNumber="2592"><Highlight kind="normal">    Known = Known.<a href="/docs/api/structs/llvm/knownbits/#ac6661654e5ce1b32651508eec50b6d58">anyext</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l02593" /><CodeLine lineNumber="2593"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02594" /><CodeLine lineNumber="2594"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02595" /><CodeLine lineNumber="2595"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewSrc = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l02596" /><CodeLine lineNumber="2596"><Highlight kind="normal">            Src, InDemandedBits, InDemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02597" /><CodeLine lineNumber="2597"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode(), dl, VT, NewSrc));</Highlight></CodeLine>
<Link id="l02598" /><CodeLine lineNumber="2598"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02599" /><CodeLine lineNumber="2599"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02600" /><CodeLine lineNumber="2600"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>: &#123;</Highlight></CodeLine>
<Link id="l02601" /><CodeLine lineNumber="2601"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l02602" /><CodeLine lineNumber="2602"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02603" /><CodeLine lineNumber="2603"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Simplify the input, using demanded bit information, and compute the known</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02604" /><CodeLine lineNumber="2604"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// zero/one bits live out.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02605" /><CodeLine lineNumber="2605"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> OperandBitWidth = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getScalarValueSizeInBits();</Highlight></CodeLine>
<Link id="l02606" /><CodeLine lineNumber="2606"><Highlight kind="normal">    APInt TruncMask = DemandedBits.<a href="/docs/api/classes/llvm/apint/#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(OperandBitWidth);</Highlight></CodeLine>
<Link id="l02607" /><CodeLine lineNumber="2607"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Src, TruncMask, DemandedElts, Known, TLO,</Highlight></CodeLine>
<Link id="l02608" /><CodeLine lineNumber="2608"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1)) &#123;</Highlight></CodeLine>
<Link id="l02609" /><CodeLine lineNumber="2609"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Disable the nsw and nuw flags. We can no longer guarantee that we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02610" /><CodeLine lineNumber="2610"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// won&#39;t wrap after simplification.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02611" /><CodeLine lineNumber="2611"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;dropFlags(<a href="/docs/api/structs/llvm/sdnodeflags/#a19128eb1e6729dd3cf2afce783620adaa21673a00231c98385c57bd2eb12b94b1">SDNodeFlags::NoWrap</a>);</Highlight></CodeLine>
<Link id="l02612" /><CodeLine lineNumber="2612"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02613" /><CodeLine lineNumber="2613"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02614" /><CodeLine lineNumber="2614"><Highlight kind="normal">    Known = Known.<a href="/docs/api/structs/llvm/knownbits/#a40a666d8a3b58f5eca5d7f9f26796bc7">trunc</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l02615" /><CodeLine lineNumber="2615"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02616" /><CodeLine lineNumber="2616"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02617" /><CodeLine lineNumber="2617"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewSrc = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l02618" /><CodeLine lineNumber="2618"><Highlight kind="normal">            Src, TruncMask, DemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02619" /><CodeLine lineNumber="2619"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, VT, NewSrc));</Highlight></CodeLine>
<Link id="l02620" /><CodeLine lineNumber="2620"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02621" /><CodeLine lineNumber="2621"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the input is only used by this truncate, see if we can shrink it based</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02622" /><CodeLine lineNumber="2622"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// on the known demanded bits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02623" /><CodeLine lineNumber="2623"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getOpcode()) &#123;</Highlight></CodeLine>
<Link id="l02624" /><CodeLine lineNumber="2624"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l02625" /><CodeLine lineNumber="2625"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02626" /><CodeLine lineNumber="2626"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>:</Highlight></CodeLine>
<Link id="l02627" /><CodeLine lineNumber="2627"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Shrink SRL by a constant if none of the high bits shifted in are</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02628" /><CodeLine lineNumber="2628"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// demanded.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02629" /><CodeLine lineNumber="2629"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TLO.LegalTypes() &amp;&amp; !isTypeDesirableForOp(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, VT))</Highlight></CodeLine>
<Link id="l02630" /><CodeLine lineNumber="2630"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Do not turn (vt1 truncate (vt2 srl)) into (vt1 srl) if vt1 is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02631" /><CodeLine lineNumber="2631"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// undesirable.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02632" /><CodeLine lineNumber="2632"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02633" /><CodeLine lineNumber="2633"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02634" /><CodeLine lineNumber="2634"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getNode()-&gt;hasOneUse()) &#123;</Highlight></CodeLine>
<Link id="l02635" /><CodeLine lineNumber="2635"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a6f992bc4ca89f1b5f0b34f5b29978c31">isTruncateFree</a>(Src, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l02636" /><CodeLine lineNumber="2636"><Highlight kind="normal">            !<a href="/docs/api/classes/llvm/targetloweringbase/#a6f992bc4ca89f1b5f0b34f5b29978c31">isTruncateFree</a>(<a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType(), VT)) &#123;</Highlight></CodeLine>
<Link id="l02637" /><CodeLine lineNumber="2637"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// If truncate is only free at trunc(srl), do not turn it into</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02638" /><CodeLine lineNumber="2638"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// srl(trunc). The check is done by first check the truncate is free</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02639" /><CodeLine lineNumber="2639"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// at Src&#39;s opcode(srl), then check the truncate is not done by</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02640" /><CodeLine lineNumber="2640"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// referencing sub-register. In test, if both trunc(srl) and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02641" /><CodeLine lineNumber="2641"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// srl(trunc)&#39;s trunc are free, srl(trunc) performs better. If only</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02642" /><CodeLine lineNumber="2642"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// trunc(srl)&#39;s trunc is free, trunc(srl) is better.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02643" /><CodeLine lineNumber="2643"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02644" /><CodeLine lineNumber="2644"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l02645" /><CodeLine lineNumber="2645"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02646" /><CodeLine lineNumber="2646"><Highlight kind="normal">        std::optional&lt;uint64&#95;t&gt; ShAmtC =</Highlight></CodeLine>
<Link id="l02647" /><CodeLine lineNumber="2647"><Highlight kind="normal">            TLO.DAG.getValidShiftAmount(Src, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 2);</Highlight></CodeLine>
<Link id="l02648" /><CodeLine lineNumber="2648"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!ShAmtC || &#42;ShAmtC &gt;= <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>)</Highlight></CodeLine>
<Link id="l02649" /><CodeLine lineNumber="2649"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02650" /><CodeLine lineNumber="2650"><Highlight kind="normal">        uint64&#95;t ShVal = &#42;ShAmtC;</Highlight></CodeLine>
<Link id="l02651" /><CodeLine lineNumber="2651"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02652" /><CodeLine lineNumber="2652"><Highlight kind="normal">        APInt HighBits =</Highlight></CodeLine>
<Link id="l02653" /><CodeLine lineNumber="2653"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/apint/#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(OperandBitWidth, OperandBitWidth - <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l02654" /><CodeLine lineNumber="2654"><Highlight kind="normal">        HighBits.<a href="/docs/api/classes/llvm/apint/#af338e23a90c301183968435e80cd6a27">lshrInPlace</a>(ShVal);</Highlight></CodeLine>
<Link id="l02655" /><CodeLine lineNumber="2655"><Highlight kind="normal">        HighBits = HighBits.<a href="/docs/api/classes/llvm/apint/#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l02656" /><CodeLine lineNumber="2656"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!(HighBits &amp; DemandedBits)) &#123;</Highlight></CodeLine>
<Link id="l02657" /><CodeLine lineNumber="2657"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// None of the shifted in bits are needed.  Add a truncate of the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02658" /><CodeLine lineNumber="2658"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// shift input, then shift it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02659" /><CodeLine lineNumber="2659"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewShAmt = TLO.DAG.getShiftAmountConstant(ShVal, VT, dl);</Highlight></CodeLine>
<Link id="l02660" /><CodeLine lineNumber="2660"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewTrunc =</Highlight></CodeLine>
<Link id="l02661" /><CodeLine lineNumber="2661"><Highlight kind="normal">              TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, VT, <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getOperand(0));</Highlight></CodeLine>
<Link id="l02662" /><CodeLine lineNumber="2662"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(</Highlight></CodeLine>
<Link id="l02663" /><CodeLine lineNumber="2663"><Highlight kind="normal">              <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, NewTrunc, NewShAmt));</Highlight></CodeLine>
<Link id="l02664" /><CodeLine lineNumber="2664"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l02665" /><CodeLine lineNumber="2665"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02666" /><CodeLine lineNumber="2666"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02667" /><CodeLine lineNumber="2667"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02668" /><CodeLine lineNumber="2668"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02669" /><CodeLine lineNumber="2669"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02670" /><CodeLine lineNumber="2670"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02671" /><CodeLine lineNumber="2671"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af23301e60475124fd80a2cb51f6ba863">ISD::AssertZext</a>: &#123;</Highlight></CodeLine>
<Link id="l02672" /><CodeLine lineNumber="2672"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// AssertZext demands all of the high bits, plus any of the low bits</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02673" /><CodeLine lineNumber="2673"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// demanded by its users.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02674" /><CodeLine lineNumber="2674"><Highlight kind="normal">    EVT ZVT = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VTSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1))-&gt;getVT();</Highlight></CodeLine>
<Link id="l02675" /><CodeLine lineNumber="2675"><Highlight kind="normal">    APInt InMask = <a href="/docs/api/classes/llvm/apint/#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, ZVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>());</Highlight></CodeLine>
<Link id="l02676" /><CodeLine lineNumber="2676"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), ~InMask | DemandedBits, Known,</Highlight></CodeLine>
<Link id="l02677" /><CodeLine lineNumber="2677"><Highlight kind="normal">                             TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02678" /><CodeLine lineNumber="2678"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02679" /><CodeLine lineNumber="2679"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02680" /><CodeLine lineNumber="2680"><Highlight kind="normal">    Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> |= ~InMask;</Highlight></CodeLine>
<Link id="l02681" /><CodeLine lineNumber="2681"><Highlight kind="normal">    Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a> &amp;= (~Known.Zero);</Highlight></CodeLine>
<Link id="l02682" /><CodeLine lineNumber="2682"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02683" /><CodeLine lineNumber="2683"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02684" /><CodeLine lineNumber="2684"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9329e79f62e9ab9b41cfbcafd314bcbd">ISD::EXTRACT&#95;VECTOR&#95;ELT</a>: &#123;</Highlight></CodeLine>
<Link id="l02685" /><CodeLine lineNumber="2685"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l02686" /><CodeLine lineNumber="2686"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Idx = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l02687" /><CodeLine lineNumber="2687"><Highlight kind="normal">    ElementCount SrcEltCnt = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType().getVectorElementCount();</Highlight></CodeLine>
<Link id="l02688" /><CodeLine lineNumber="2688"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> EltBitWidth = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getScalarValueSizeInBits();</Highlight></CodeLine>
<Link id="l02689" /><CodeLine lineNumber="2689"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02690" /><CodeLine lineNumber="2690"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcEltCnt.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>())</Highlight></CodeLine>
<Link id="l02691" /><CodeLine lineNumber="2691"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02692" /><CodeLine lineNumber="2692"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02693" /><CodeLine lineNumber="2693"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Demand the bits from every vector element without a constant index.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02694" /><CodeLine lineNumber="2694"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSrcElts = SrcEltCnt.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>();</Highlight></CodeLine>
<Link id="l02695" /><CodeLine lineNumber="2695"><Highlight kind="normal">    APInt DemandedSrcElts = <a href="/docs/api/classes/llvm/apint/#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(NumSrcElts);</Highlight></CodeLine>
<Link id="l02696" /><CodeLine lineNumber="2696"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;CIdx = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(Idx))</Highlight></CodeLine>
<Link id="l02697" /><CodeLine lineNumber="2697"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CIdx-&gt;getAPIntValue().ult(NumSrcElts))</Highlight></CodeLine>
<Link id="l02698" /><CodeLine lineNumber="2698"><Highlight kind="normal">        DemandedSrcElts = <a href="/docs/api/classes/llvm/apint/#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(NumSrcElts, CIdx-&gt;getZExtValue());</Highlight></CodeLine>
<Link id="l02699" /><CodeLine lineNumber="2699"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02700" /><CodeLine lineNumber="2700"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If BitWidth &gt; EltBitWidth the value is anyext:ed. So we do not know</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02701" /><CodeLine lineNumber="2701"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// anything about the extended bits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02702" /><CodeLine lineNumber="2702"><Highlight kind="normal">    APInt DemandedSrcBits = DemandedBits;</Highlight></CodeLine>
<Link id="l02703" /><CodeLine lineNumber="2703"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> &gt; EltBitWidth)</Highlight></CodeLine>
<Link id="l02704" /><CodeLine lineNumber="2704"><Highlight kind="normal">      DemandedSrcBits = DemandedSrcBits.<a href="/docs/api/classes/llvm/apint/#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(EltBitWidth);</Highlight></CodeLine>
<Link id="l02705" /><CodeLine lineNumber="2705"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02706" /><CodeLine lineNumber="2706"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Src, DemandedSrcBits, DemandedSrcElts, Known2, TLO,</Highlight></CodeLine>
<Link id="l02707" /><CodeLine lineNumber="2707"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02708" /><CodeLine lineNumber="2708"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02709" /><CodeLine lineNumber="2709"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02710" /><CodeLine lineNumber="2710"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02711" /><CodeLine lineNumber="2711"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedSrcBits.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() || !DemandedSrcElts.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>()) &#123;</Highlight></CodeLine>
<Link id="l02712" /><CodeLine lineNumber="2712"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedSrc = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l02713" /><CodeLine lineNumber="2713"><Highlight kind="normal">              Src, DemandedSrcBits, DemandedSrcElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1)) &#123;</Highlight></CodeLine>
<Link id="l02714" /><CodeLine lineNumber="2714"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp =</Highlight></CodeLine>
<Link id="l02715" /><CodeLine lineNumber="2715"><Highlight kind="normal">            TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode(), dl, VT, DemandedSrc, Idx);</Highlight></CodeLine>
<Link id="l02716" /><CodeLine lineNumber="2716"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l02717" /><CodeLine lineNumber="2717"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02718" /><CodeLine lineNumber="2718"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02719" /><CodeLine lineNumber="2719"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02720" /><CodeLine lineNumber="2720"><Highlight kind="normal">    Known = Known2;</Highlight></CodeLine>
<Link id="l02721" /><CodeLine lineNumber="2721"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> &gt; EltBitWidth)</Highlight></CodeLine>
<Link id="l02722" /><CodeLine lineNumber="2722"><Highlight kind="normal">      Known = Known.<a href="/docs/api/structs/llvm/knownbits/#ac6661654e5ce1b32651508eec50b6d58">anyext</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l02723" /><CodeLine lineNumber="2723"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02724" /><CodeLine lineNumber="2724"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02725" /><CodeLine lineNumber="2725"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> ISD::BITCAST: &#123;</Highlight></CodeLine>
<Link id="l02726" /><CodeLine lineNumber="2726"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l02727" /><CodeLine lineNumber="2727"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02728" /><CodeLine lineNumber="2728"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l02729" /><CodeLine lineNumber="2729"><Highlight kind="normal">    EVT SrcVT = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType();</Highlight></CodeLine>
<Link id="l02730" /><CodeLine lineNumber="2730"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSrcEltBits = SrcVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l02731" /><CodeLine lineNumber="2731"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02732" /><CodeLine lineNumber="2732"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If this is an FP-&gt;Int bitcast and if the sign bit is the only</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02733" /><CodeLine lineNumber="2733"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// thing demanded, turn this into a FGETSIGN.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02734" /><CodeLine lineNumber="2734"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!TLO.LegalOperations() &amp;&amp; !VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; !SrcVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l02735" /><CodeLine lineNumber="2735"><Highlight kind="normal">        DemandedBits == <a href="/docs/api/classes/llvm/apint/#a1e6f0d8dfed0ab631b488a3e6317718e">APInt::getSignMask</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueSizeInBits()) &amp;&amp;</Highlight></CodeLine>
<Link id="l02736" /><CodeLine lineNumber="2736"><Highlight kind="normal">        SrcVT.<a href="/docs/api/structs/llvm/evt/#a3cb888a2ce8e95e0d9769687a5e2f7d8">isFloatingPoint</a>()) &#123;</Highlight></CodeLine>
<Link id="l02737" /><CodeLine lineNumber="2737"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> OpVTLegal = <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a130b6a6d409367c8a61dd14dfa39785c">ISD::FGETSIGN</a>, VT);</Highlight></CodeLine>
<Link id="l02738" /><CodeLine lineNumber="2738"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> i32Legal = <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a130b6a6d409367c8a61dd14dfa39785c">ISD::FGETSIGN</a>, MVT::i32);</Highlight></CodeLine>
<Link id="l02739" /><CodeLine lineNumber="2739"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((OpVTLegal || i32Legal) &amp;&amp; VT.<a href="/docs/api/structs/llvm/evt/#a19738f4334d4de357b22349bbb56fb5c">isSimple</a>() &amp;&amp; SrcVT != MVT::f16 &amp;&amp;</Highlight></CodeLine>
<Link id="l02740" /><CodeLine lineNumber="2740"><Highlight kind="normal">          SrcVT != MVT::f128) &#123;</Highlight></CodeLine>
<Link id="l02741" /><CodeLine lineNumber="2741"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Cannot eliminate/lower SHL for f128 yet.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02742" /><CodeLine lineNumber="2742"><Highlight kind="normal">        EVT Ty = OpVTLegal ? VT : MVT::i32;</Highlight></CodeLine>
<Link id="l02743" /><CodeLine lineNumber="2743"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Make a FGETSIGN + SHL to move the sign bit into the appropriate</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02744" /><CodeLine lineNumber="2744"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// place.  We expect the SHL to be eliminated by other optimizations.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02745" /><CodeLine lineNumber="2745"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Sign = TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a130b6a6d409367c8a61dd14dfa39785c">ISD::FGETSIGN</a>, dl, Ty, Src);</Highlight></CodeLine>
<Link id="l02746" /><CodeLine lineNumber="2746"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> OpVTSizeInBits = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueSizeInBits();</Highlight></CodeLine>
<Link id="l02747" /><CodeLine lineNumber="2747"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!OpVTLegal &amp;&amp; OpVTSizeInBits &gt; 32)</Highlight></CodeLine>
<Link id="l02748" /><CodeLine lineNumber="2748"><Highlight kind="normal">          Sign = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, dl, VT, Sign);</Highlight></CodeLine>
<Link id="l02749" /><CodeLine lineNumber="2749"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShVal = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueSizeInBits() - 1;</Highlight></CodeLine>
<Link id="l02750" /><CodeLine lineNumber="2750"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShAmt = TLO.DAG.getConstant(ShVal, dl, VT);</Highlight></CodeLine>
<Link id="l02751" /><CodeLine lineNumber="2751"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l02752" /><CodeLine lineNumber="2752"><Highlight kind="normal">                             TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, Sign, ShAmt));</Highlight></CodeLine>
<Link id="l02753" /><CodeLine lineNumber="2753"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02754" /><CodeLine lineNumber="2754"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02755" /><CodeLine lineNumber="2755"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02756" /><CodeLine lineNumber="2756"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Bitcast from a vector using SimplifyDemanded Bits/VectorElts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02757" /><CodeLine lineNumber="2757"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Demand the elt/bit if any of the original elts/bits are demanded.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02758" /><CodeLine lineNumber="2758"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; (<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> % NumSrcEltBits) == 0) &#123;</Highlight></CodeLine>
<Link id="l02759" /><CodeLine lineNumber="2759"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Scale = <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> / NumSrcEltBits;</Highlight></CodeLine>
<Link id="l02760" /><CodeLine lineNumber="2760"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSrcElts = SrcVT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>();</Highlight></CodeLine>
<Link id="l02761" /><CodeLine lineNumber="2761"><Highlight kind="normal">      APInt DemandedSrcBits = <a href="/docs/api/classes/llvm/apint/#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(NumSrcEltBits);</Highlight></CodeLine>
<Link id="l02762" /><CodeLine lineNumber="2762"><Highlight kind="normal">      APInt DemandedSrcElts = <a href="/docs/api/classes/llvm/apint/#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(NumSrcElts);</Highlight></CodeLine>
<Link id="l02763" /><CodeLine lineNumber="2763"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != Scale; ++i) &#123;</Highlight></CodeLine>
<Link id="l02764" /><CodeLine lineNumber="2764"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> EltOffset = IsLE ? i : (Scale - 1 - i);</Highlight></CodeLine>
<Link id="l02765" /><CodeLine lineNumber="2765"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> BitOffset = EltOffset &#42; NumSrcEltBits;</Highlight></CodeLine>
<Link id="l02766" /><CodeLine lineNumber="2766"><Highlight kind="normal">        APInt Sub = DemandedBits.extractBits(NumSrcEltBits, BitOffset);</Highlight></CodeLine>
<Link id="l02767" /><CodeLine lineNumber="2767"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Sub.<a href="/docs/api/classes/llvm/apint/#a49cd5939942c6665aba4cae8c220dff1">isZero</a>()) &#123;</Highlight></CodeLine>
<Link id="l02768" /><CodeLine lineNumber="2768"><Highlight kind="normal">          DemandedSrcBits |= Sub;</Highlight></CodeLine>
<Link id="l02769" /><CodeLine lineNumber="2769"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> j = 0; <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea363b122c528f54df4a0446b6bab05515">j</a> != NumElts; ++<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea363b122c528f54df4a0446b6bab05515">j</a>)</Highlight></CodeLine>
<Link id="l02770" /><CodeLine lineNumber="2770"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedElts&#91;j&#93;)</Highlight></CodeLine>
<Link id="l02771" /><CodeLine lineNumber="2771"><Highlight kind="normal">              DemandedSrcElts.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>((j &#42; Scale) + i);</Highlight></CodeLine>
<Link id="l02772" /><CodeLine lineNumber="2772"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l02773" /><CodeLine lineNumber="2773"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02774" /><CodeLine lineNumber="2774"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02775" /><CodeLine lineNumber="2775"><Highlight kind="normal">      APInt KnownSrcUndef, KnownSrcZero;</Highlight></CodeLine>
<Link id="l02776" /><CodeLine lineNumber="2776"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Src, DemandedSrcElts, KnownSrcUndef,</Highlight></CodeLine>
<Link id="l02777" /><CodeLine lineNumber="2777"><Highlight kind="normal">                                     KnownSrcZero, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02778" /><CodeLine lineNumber="2778"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02779" /><CodeLine lineNumber="2779"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02780" /><CodeLine lineNumber="2780"><Highlight kind="normal">      KnownBits KnownSrcBits;</Highlight></CodeLine>
<Link id="l02781" /><CodeLine lineNumber="2781"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Src, DemandedSrcBits, DemandedSrcElts,</Highlight></CodeLine>
<Link id="l02782" /><CodeLine lineNumber="2782"><Highlight kind="normal">                               KnownSrcBits, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02783" /><CodeLine lineNumber="2783"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02784" /><CodeLine lineNumber="2784"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsLE &amp;&amp; (NumSrcEltBits % <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>) == 0) &#123;</Highlight></CodeLine>
<Link id="l02785" /><CodeLine lineNumber="2785"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// TODO - bigendian once we have test coverage.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02786" /><CodeLine lineNumber="2786"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Scale = NumSrcEltBits / <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>;</Highlight></CodeLine>
<Link id="l02787" /><CodeLine lineNumber="2787"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSrcElts = SrcVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() ? SrcVT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>() : 1;</Highlight></CodeLine>
<Link id="l02788" /><CodeLine lineNumber="2788"><Highlight kind="normal">      APInt DemandedSrcBits = <a href="/docs/api/classes/llvm/apint/#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(NumSrcEltBits);</Highlight></CodeLine>
<Link id="l02789" /><CodeLine lineNumber="2789"><Highlight kind="normal">      APInt DemandedSrcElts = <a href="/docs/api/classes/llvm/apint/#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(NumSrcElts);</Highlight></CodeLine>
<Link id="l02790" /><CodeLine lineNumber="2790"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != NumElts; ++i)</Highlight></CodeLine>
<Link id="l02791" /><CodeLine lineNumber="2791"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedElts&#91;i&#93;) &#123;</Highlight></CodeLine>
<Link id="l02792" /><CodeLine lineNumber="2792"><Highlight kind="normal">          </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = (i % Scale) &#42; <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>;</Highlight></CodeLine>
<Link id="l02793" /><CodeLine lineNumber="2793"><Highlight kind="normal">          DemandedSrcBits.<a href="/docs/api/classes/llvm/apint/#aabe301a4f18d38478700ad44ba2245bc">insertBits</a>(DemandedBits, <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</Highlight></CodeLine>
<Link id="l02794" /><CodeLine lineNumber="2794"><Highlight kind="normal">          DemandedSrcElts.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(i / Scale);</Highlight></CodeLine>
<Link id="l02795" /><CodeLine lineNumber="2795"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l02796" /><CodeLine lineNumber="2796"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02797" /><CodeLine lineNumber="2797"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>()) &#123;</Highlight></CodeLine>
<Link id="l02798" /><CodeLine lineNumber="2798"><Highlight kind="normal">        APInt KnownSrcUndef, KnownSrcZero;</Highlight></CodeLine>
<Link id="l02799" /><CodeLine lineNumber="2799"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Src, DemandedSrcElts, KnownSrcUndef,</Highlight></CodeLine>
<Link id="l02800" /><CodeLine lineNumber="2800"><Highlight kind="normal">                                       KnownSrcZero, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02801" /><CodeLine lineNumber="2801"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02802" /><CodeLine lineNumber="2802"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02803" /><CodeLine lineNumber="2803"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02804" /><CodeLine lineNumber="2804"><Highlight kind="normal">      KnownBits KnownSrcBits;</Highlight></CodeLine>
<Link id="l02805" /><CodeLine lineNumber="2805"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Src, DemandedSrcBits, DemandedSrcElts,</Highlight></CodeLine>
<Link id="l02806" /><CodeLine lineNumber="2806"><Highlight kind="normal">                               KnownSrcBits, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l02807" /><CodeLine lineNumber="2807"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02808" /><CodeLine lineNumber="2808"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02809" /><CodeLine lineNumber="2809"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02810" /><CodeLine lineNumber="2810"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedSrcBits.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() || !DemandedSrcElts.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>()) &#123;</Highlight></CodeLine>
<Link id="l02811" /><CodeLine lineNumber="2811"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedSrc = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l02812" /><CodeLine lineNumber="2812"><Highlight kind="normal">                Src, DemandedSrcBits, DemandedSrcElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1)) &#123;</Highlight></CodeLine>
<Link id="l02813" /><CodeLine lineNumber="2813"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.getBitcast(VT, DemandedSrc);</Highlight></CodeLine>
<Link id="l02814" /><CodeLine lineNumber="2814"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l02815" /><CodeLine lineNumber="2815"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l02816" /><CodeLine lineNumber="2816"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02817" /><CodeLine lineNumber="2817"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02818" /><CodeLine lineNumber="2818"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02819" /><CodeLine lineNumber="2819"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If this is a bitcast, let computeKnownBits handle it.  Only do this on a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02820" /><CodeLine lineNumber="2820"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// recursive call where Known may be useful to the caller.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02821" /><CodeLine lineNumber="2821"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> &gt; 0) &#123;</Highlight></CodeLine>
<Link id="l02822" /><CodeLine lineNumber="2822"><Highlight kind="normal">      Known = TLO.DAG.computeKnownBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l02823" /><CodeLine lineNumber="2823"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02824" /><CodeLine lineNumber="2824"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02825" /><CodeLine lineNumber="2825"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02826" /><CodeLine lineNumber="2826"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02827" /><CodeLine lineNumber="2827"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>:</Highlight></CodeLine>
<Link id="l02828" /><CodeLine lineNumber="2828"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedBits.isPowerOf2()) &#123;</Highlight></CodeLine>
<Link id="l02829" /><CodeLine lineNumber="2829"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// The LSB of X&#42;Y is set only if (X &amp; 1) == 1 and (Y &amp; 1) == 1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02830" /><CodeLine lineNumber="2830"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If we demand exactly one bit N and we have &quot;X &#42; (C&#39; &lt;&lt; N)&quot; where C&#39; is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02831" /><CodeLine lineNumber="2831"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// odd (has LSB set), then the left-shifted low bit of X is the answer.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02832" /><CodeLine lineNumber="2832"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> CTZ = DemandedBits.countr&#95;zero();</Highlight></CodeLine>
<Link id="l02833" /><CodeLine lineNumber="2833"><Highlight kind="normal">      ConstantSDNode &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1), DemandedElts);</Highlight></CodeLine>
<Link id="l02834" /><CodeLine lineNumber="2834"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> &amp;&amp; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getAPIntValue().countr&#95;zero() == CTZ) &#123;</Highlight></CodeLine>
<Link id="l02835" /><CodeLine lineNumber="2835"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> AmtC = TLO.DAG.getShiftAmountConstant(CTZ, VT, dl);</Highlight></CodeLine>
<Link id="l02836" /><CodeLine lineNumber="2836"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Shl = TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), AmtC);</Highlight></CodeLine>
<Link id="l02837" /><CodeLine lineNumber="2837"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Shl);</Highlight></CodeLine>
<Link id="l02838" /><CodeLine lineNumber="2838"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02839" /><CodeLine lineNumber="2839"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02840" /><CodeLine lineNumber="2840"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// For a squared value &quot;X &#42; X&quot;, the bottom 2 bits are 0 and X&#91;0&#93; because:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02841" /><CodeLine lineNumber="2841"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// X &#42; X is odd iff X is odd.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02842" /><CodeLine lineNumber="2842"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// &#39;Quadratic Reciprocity&#39;: X &#42; X -&gt; 0 for bit&#91;1&#93;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02843" /><CodeLine lineNumber="2843"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0) == <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1) &amp;&amp; DemandedBits.ult(4)) &#123;</Highlight></CodeLine>
<Link id="l02844" /><CodeLine lineNumber="2844"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> One = TLO.DAG.getConstant(1, dl, VT);</Highlight></CodeLine>
<Link id="l02845" /><CodeLine lineNumber="2845"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> And1 = TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), One);</Highlight></CodeLine>
<Link id="l02846" /><CodeLine lineNumber="2846"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, And1);</Highlight></CodeLine>
<Link id="l02847" /><CodeLine lineNumber="2847"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02848" /><CodeLine lineNumber="2848"><Highlight kind="normal">    &#91;&#91;fallthrough&#93;&#93;;</Highlight></CodeLine>
<Link id="l02849" /><CodeLine lineNumber="2849"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>:</Highlight></CodeLine>
<Link id="l02850" /><CodeLine lineNumber="2850"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>: &#123;</Highlight></CodeLine>
<Link id="l02851" /><CodeLine lineNumber="2851"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Add, Sub, and Mul don&#39;t demand any bits in positions beyond that</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02852" /><CodeLine lineNumber="2852"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// of the highest bit demanded of them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02853" /><CodeLine lineNumber="2853"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l02854" /><CodeLine lineNumber="2854"><Highlight kind="normal">    SDNodeFlags <a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getNode()-&gt;getFlags();</Highlight></CodeLine>
<Link id="l02855" /><CodeLine lineNumber="2855"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> DemandedBitsLZ = DemandedBits.countl&#95;zero();</Highlight></CodeLine>
<Link id="l02856" /><CodeLine lineNumber="2856"><Highlight kind="normal">    APInt LoMask = <a href="/docs/api/classes/llvm/apint/#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - DemandedBitsLZ);</Highlight></CodeLine>
<Link id="l02857" /><CodeLine lineNumber="2857"><Highlight kind="normal">    KnownBits KnownOp0, KnownOp1;</Highlight></CodeLine>
<Link id="l02858" /><CodeLine lineNumber="2858"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> GetDemandedBitsLHSMask = &#91;&amp;&#93;(APInt Demanded,</Highlight></CodeLine>
<Link id="l02859" /><CodeLine lineNumber="2859"><Highlight kind="normal">                                      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> KnownBits &amp;KnownRHS) &#123;</Highlight></CodeLine>
<Link id="l02860" /><CodeLine lineNumber="2860"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>)</Highlight></CodeLine>
<Link id="l02861" /><CodeLine lineNumber="2861"><Highlight kind="normal">        Demanded.<a href="/docs/api/classes/llvm/apint/#aef3f66072750c56846c44817e7336a3d">clearHighBits</a>(KnownRHS.countMinTrailingZeros());</Highlight></CodeLine>
<Link id="l02862" /><CodeLine lineNumber="2862"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Demanded;</Highlight></CodeLine>
<Link id="l02863" /><CodeLine lineNumber="2863"><Highlight kind="normal">    &#125;;</Highlight></CodeLine>
<Link id="l02864" /><CodeLine lineNumber="2864"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Op1, LoMask, DemandedElts, KnownOp1, TLO,</Highlight></CodeLine>
<Link id="l02865" /><CodeLine lineNumber="2865"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1) ||</Highlight></CodeLine>
<Link id="l02866" /><CodeLine lineNumber="2866"><Highlight kind="normal">        SimplifyDemandedBits(Op0, GetDemandedBitsLHSMask(LoMask, KnownOp1),</Highlight></CodeLine>
<Link id="l02867" /><CodeLine lineNumber="2867"><Highlight kind="normal">                             DemandedElts, KnownOp0, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1) ||</Highlight></CodeLine>
<Link id="l02868" /><CodeLine lineNumber="2868"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// See if the operation should be performed at a smaller bit width.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02869" /><CodeLine lineNumber="2869"><Highlight kind="normal">        ShrinkDemandedOp(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, DemandedBits, TLO)) &#123;</Highlight></CodeLine>
<Link id="l02870" /><CodeLine lineNumber="2870"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Disable the nsw and nuw flags. We can no longer guarantee that we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02871" /><CodeLine lineNumber="2871"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// won&#39;t wrap after simplification.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02872" /><CodeLine lineNumber="2872"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;dropFlags(<a href="/docs/api/structs/llvm/sdnodeflags/#a19128eb1e6729dd3cf2afce783620adaa21673a00231c98385c57bd2eb12b94b1">SDNodeFlags::NoWrap</a>);</Highlight></CodeLine>
<Link id="l02873" /><CodeLine lineNumber="2873"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02874" /><CodeLine lineNumber="2874"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02875" /><CodeLine lineNumber="2875"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02876" /><CodeLine lineNumber="2876"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// neg x with only low bit demanded is simply x.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02877" /><CodeLine lineNumber="2877"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a> &amp;&amp; DemandedBits.isOne() &amp;&amp;</Highlight></CodeLine>
<Link id="l02878" /><CodeLine lineNumber="2878"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a1a86775f3d85d98a31b2751e1eb348ea">isNullConstant</a>(Op0))</Highlight></CodeLine>
<Link id="l02879" /><CodeLine lineNumber="2879"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Op1);</Highlight></CodeLine>
<Link id="l02880" /><CodeLine lineNumber="2880"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02881" /><CodeLine lineNumber="2881"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02882" /><CodeLine lineNumber="2882"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!LoMask.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() || !DemandedElts.isAllOnes()) &#123;</Highlight></CodeLine>
<Link id="l02883" /><CodeLine lineNumber="2883"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedOp0 = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l02884" /><CodeLine lineNumber="2884"><Highlight kind="normal">          Op0, LoMask, DemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l02885" /><CodeLine lineNumber="2885"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DemandedOp1 = SimplifyMultipleUseDemandedBits(</Highlight></CodeLine>
<Link id="l02886" /><CodeLine lineNumber="2886"><Highlight kind="normal">          Op1, LoMask, DemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l02887" /><CodeLine lineNumber="2887"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedOp0 || DemandedOp1) &#123;</Highlight></CodeLine>
<Link id="l02888" /><CodeLine lineNumber="2888"><Highlight kind="normal">        Op0 = DemandedOp0 ? DemandedOp0 : Op0;</Highlight></CodeLine>
<Link id="l02889" /><CodeLine lineNumber="2889"><Highlight kind="normal">        Op1 = DemandedOp1 ? DemandedOp1 : Op1;</Highlight></CodeLine>
<Link id="l02890" /><CodeLine lineNumber="2890"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode(), dl, VT, Op0, Op1,</Highlight></CodeLine>
<Link id="l02891" /><CodeLine lineNumber="2891"><Highlight kind="normal">                                        Flags &amp; ~<a href="/docs/api/structs/llvm/sdnodeflags/#a19128eb1e6729dd3cf2afce783620adaa21673a00231c98385c57bd2eb12b94b1">SDNodeFlags::NoWrap</a>);</Highlight></CodeLine>
<Link id="l02892" /><CodeLine lineNumber="2892"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l02893" /><CodeLine lineNumber="2893"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02894" /><CodeLine lineNumber="2894"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02895" /><CodeLine lineNumber="2895"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02896" /><CodeLine lineNumber="2896"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we have a constant operand, we may be able to turn it into -1 if we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02897" /><CodeLine lineNumber="2897"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// do not demand the high bits. This can make the constant smaller to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02898" /><CodeLine lineNumber="2898"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// encode, allow more general folding, or match specialized instruction</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02899" /><CodeLine lineNumber="2899"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// patterns (eg, &#39;blsr&#39; on x86). Don&#39;t bother changing 1 to -1 because that</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02900" /><CodeLine lineNumber="2900"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// is probably not useful (and could be detrimental).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02901" /><CodeLine lineNumber="2901"><Highlight kind="normal">    ConstantSDNode &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(Op1);</Highlight></CodeLine>
<Link id="l02902" /><CodeLine lineNumber="2902"><Highlight kind="normal">    APInt HighMask = <a href="/docs/api/classes/llvm/apint/#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, DemandedBitsLZ);</Highlight></CodeLine>
<Link id="l02903" /><CodeLine lineNumber="2903"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> &amp;&amp; !<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;isAllOnes() &amp;&amp; !<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;isOne() &amp;&amp;</Highlight></CodeLine>
<Link id="l02904" /><CodeLine lineNumber="2904"><Highlight kind="normal">        (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getAPIntValue() | HighMask).isAllOnes()) &#123;</Highlight></CodeLine>
<Link id="l02905" /><CodeLine lineNumber="2905"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Neg1 = TLO.DAG.getAllOnesConstant(dl, VT);</Highlight></CodeLine>
<Link id="l02906" /><CodeLine lineNumber="2906"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Disable the nsw and nuw flags. We can no longer guarantee that we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02907" /><CodeLine lineNumber="2907"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// won&#39;t wrap after simplification.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02908" /><CodeLine lineNumber="2908"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode(), dl, VT, Op0, Neg1,</Highlight></CodeLine>
<Link id="l02909" /><CodeLine lineNumber="2909"><Highlight kind="normal">                                      Flags &amp; ~<a href="/docs/api/structs/llvm/sdnodeflags/#a19128eb1e6729dd3cf2afce783620adaa21673a00231c98385c57bd2eb12b94b1">SDNodeFlags::NoWrap</a>);</Highlight></CodeLine>
<Link id="l02910" /><CodeLine lineNumber="2910"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l02911" /><CodeLine lineNumber="2911"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02912" /><CodeLine lineNumber="2912"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02913" /><CodeLine lineNumber="2913"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Match a multiply with a disguised negated-power-of-2 and convert to a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02914" /><CodeLine lineNumber="2914"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// an equivalent shift-left amount.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02915" /><CodeLine lineNumber="2915"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Example: (X &#42; MulC) + Op1 --&gt; Op1 - (X &lt;&lt; log2(-MulC))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02916" /><CodeLine lineNumber="2916"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> getShiftLeftAmt = &#91;&amp;HighMask&#93;(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>) -&gt; </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02917" /><CodeLine lineNumber="2917"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>.getOpcode() != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a> || !<a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>.hasOneUse())</Highlight></CodeLine>
<Link id="l02918" /><CodeLine lineNumber="2918"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 0;</Highlight></CodeLine>
<Link id="l02919" /><CodeLine lineNumber="2919"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02920" /><CodeLine lineNumber="2920"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Don&#39;t touch opaque constants. Also, ignore zero and power-of-2</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02921" /><CodeLine lineNumber="2921"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// multiplies. Those will get folded later.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02922" /><CodeLine lineNumber="2922"><Highlight kind="normal">      ConstantSDNode &#42;MulC = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(<a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>.getOperand(1));</Highlight></CodeLine>
<Link id="l02923" /><CodeLine lineNumber="2923"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (MulC &amp;&amp; !MulC-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#a7fb32f2b4aee1957c1c0ef3bc6589a5a">isOpaque</a>() &amp;&amp; !MulC-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#ae91378660e4c7198b4de645a1d207b91">isZero</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l02924" /><CodeLine lineNumber="2924"><Highlight kind="normal">          !MulC-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#a74b17cf9d0ee8268a5b38bbb896a30ba">getAPIntValue</a>().<a href="/docs/api/classes/llvm/apint/#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>()) &#123;</Highlight></CodeLine>
<Link id="l02925" /><CodeLine lineNumber="2925"><Highlight kind="normal">        APInt UnmaskedC = MulC-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#a74b17cf9d0ee8268a5b38bbb896a30ba">getAPIntValue</a>() | HighMask;</Highlight></CodeLine>
<Link id="l02926" /><CodeLine lineNumber="2926"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UnmaskedC.<a href="/docs/api/classes/llvm/apint/#a1b6b4785fa27be394cf040e543d9fe7c">isNegatedPowerOf2</a>())</Highlight></CodeLine>
<Link id="l02927" /><CodeLine lineNumber="2927"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> (-UnmaskedC).<a href="/docs/api/classes/llvm/apint/#aae3b959a0a2981340fd03c29f528f2f0">logBase2</a>();</Highlight></CodeLine>
<Link id="l02928" /><CodeLine lineNumber="2928"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02929" /><CodeLine lineNumber="2929"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 0;</Highlight></CodeLine>
<Link id="l02930" /><CodeLine lineNumber="2930"><Highlight kind="normal">    &#125;;</Highlight></CodeLine>
<Link id="l02931" /><CodeLine lineNumber="2931"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02932" /><CodeLine lineNumber="2932"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> foldMul = &#91;&amp;&#93;(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110">ISD::NodeType</a> <a href="/docs/api/namespaces/llvm/amdgpu/cpol/#a7d79a4b341da8ac60b91c1f4b1ea42c4a3795a38ac6eb8cb14191aaba99205a87">NT</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>,</Highlight></CodeLine>
<Link id="l02933" /><CodeLine lineNumber="2933"><Highlight kind="normal">                       </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShlAmt) &#123;</Highlight></CodeLine>
<Link id="l02934" /><CodeLine lineNumber="2934"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShlAmtC = TLO.DAG.getShiftAmountConstant(ShlAmt, VT, dl);</Highlight></CodeLine>
<Link id="l02935" /><CodeLine lineNumber="2935"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Shl = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, ShlAmtC);</Highlight></CodeLine>
<Link id="l02936" /><CodeLine lineNumber="2936"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Res = TLO.DAG.getNode(NT, dl, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, Shl);</Highlight></CodeLine>
<Link id="l02937" /><CodeLine lineNumber="2937"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Res);</Highlight></CodeLine>
<Link id="l02938" /><CodeLine lineNumber="2938"><Highlight kind="normal">    &#125;;</Highlight></CodeLine>
<Link id="l02939" /><CodeLine lineNumber="2939"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02940" /><CodeLine lineNumber="2940"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, VT)) &#123;</Highlight></CodeLine>
<Link id="l02941" /><CodeLine lineNumber="2941"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>) &#123;</Highlight></CodeLine>
<Link id="l02942" /><CodeLine lineNumber="2942"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// (X &#42; MulC) + Op1 --&gt; Op1 - (X &lt;&lt; log2(-MulC))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02943" /><CodeLine lineNumber="2943"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShAmt = getShiftLeftAmt(Op0))</Highlight></CodeLine>
<Link id="l02944" /><CodeLine lineNumber="2944"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> foldMul(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), Op1, ShAmt);</Highlight></CodeLine>
<Link id="l02945" /><CodeLine lineNumber="2945"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Op0 + (X &#42; MulC) --&gt; Op0 - (X &lt;&lt; log2(-MulC))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02946" /><CodeLine lineNumber="2946"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShAmt = getShiftLeftAmt(Op1))</Highlight></CodeLine>
<Link id="l02947" /><CodeLine lineNumber="2947"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> foldMul(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, Op1.getOperand(0), Op0, ShAmt);</Highlight></CodeLine>
<Link id="l02948" /><CodeLine lineNumber="2948"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02949" /><CodeLine lineNumber="2949"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>) &#123;</Highlight></CodeLine>
<Link id="l02950" /><CodeLine lineNumber="2950"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Op0 - (X &#42; MulC) --&gt; Op0 + (X &lt;&lt; log2(-MulC))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02951" /><CodeLine lineNumber="2951"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShAmt = getShiftLeftAmt(Op1))</Highlight></CodeLine>
<Link id="l02952" /><CodeLine lineNumber="2952"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> foldMul(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, Op1.getOperand(0), Op0, ShAmt);</Highlight></CodeLine>
<Link id="l02953" /><CodeLine lineNumber="2953"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02954" /><CodeLine lineNumber="2954"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02955" /><CodeLine lineNumber="2955"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02956" /><CodeLine lineNumber="2956"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>) &#123;</Highlight></CodeLine>
<Link id="l02957" /><CodeLine lineNumber="2957"><Highlight kind="normal">      Known = <a href="/docs/api/structs/llvm/knownbits/#abd85d08f35600dd19615a1efe9cacb1d">KnownBits::mul</a>(KnownOp0, KnownOp1);</Highlight></CodeLine>
<Link id="l02958" /><CodeLine lineNumber="2958"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123; </Highlight><Highlight kind="comment">// Op.getOpcode() is either ISD::ADD or ISD::SUB.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02959" /><CodeLine lineNumber="2959"><Highlight kind="normal">      Known = <a href="/docs/api/structs/llvm/knownbits/#a9c1c6dc178ce30e4a6c09f5c08727d65">KnownBits::computeForAddSub</a>(</Highlight></CodeLine>
<Link id="l02960" /><CodeLine lineNumber="2960"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, <a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.hasNoSignedWrap(),</Highlight></CodeLine>
<Link id="l02961" /><CodeLine lineNumber="2961"><Highlight kind="normal">          <a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.hasNoUnsignedWrap(), KnownOp0, KnownOp1);</Highlight></CodeLine>
<Link id="l02962" /><CodeLine lineNumber="2962"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02963" /><CodeLine lineNumber="2963"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02964" /><CodeLine lineNumber="2964"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02965" /><CodeLine lineNumber="2965"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l02966" /><CodeLine lineNumber="2966"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We also ask the target about intrinsics (which could be specific to it).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02967" /><CodeLine lineNumber="2967"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() &gt;= <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a477ef80c70c7359199eace0e5d3133b1">ISD::BUILTIN&#95;OP&#95;END</a> ||</Highlight></CodeLine>
<Link id="l02968" /><CodeLine lineNumber="2968"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac771b9cda3b889242d457cc4d9b2159c">ISD::INTRINSIC&#95;WO&#95;CHAIN</a>) &#123;</Highlight></CodeLine>
<Link id="l02969" /><CodeLine lineNumber="2969"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// TODO: Probably okay to remove after audit; here to reduce change size</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02970" /><CodeLine lineNumber="2970"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// in initial enablement patch for scalable vectors</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02971" /><CodeLine lineNumber="2971"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType().isScalableVector())</Highlight></CodeLine>
<Link id="l02972" /><CodeLine lineNumber="2972"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02973" /><CodeLine lineNumber="2973"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBitsForTargetNode(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedBits, DemandedElts,</Highlight></CodeLine>
<Link id="l02974" /><CodeLine lineNumber="2974"><Highlight kind="normal">                                            Known, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>))</Highlight></CodeLine>
<Link id="l02975" /><CodeLine lineNumber="2975"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02976" /><CodeLine lineNumber="2976"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02977" /><CodeLine lineNumber="2977"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02978" /><CodeLine lineNumber="2978"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02979" /><CodeLine lineNumber="2979"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Just use computeKnownBits to compute output bits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02980" /><CodeLine lineNumber="2980"><Highlight kind="normal">    Known = TLO.DAG.computeKnownBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l02981" /><CodeLine lineNumber="2981"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02982" /><CodeLine lineNumber="2982"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02983" /><CodeLine lineNumber="2983"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02984" /><CodeLine lineNumber="2984"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If we know the value of all of the demanded bits, return this as a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02985" /><CodeLine lineNumber="2985"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// constant.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02986" /><CodeLine lineNumber="2986"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!isTargetCanonicalConstantNode(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l02987" /><CodeLine lineNumber="2987"><Highlight kind="normal">      DemandedBits.isSubsetOf(Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a> | Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>)) &#123;</Highlight></CodeLine>
<Link id="l02988" /><CodeLine lineNumber="2988"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Avoid folding to a constant if any OpaqueConstant is involved.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02989" /><CodeLine lineNumber="2989"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a61d13d6824ec46c31260a4fd0997eda0">llvm::any&#95;of</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;ops(), &#91;&#93;(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> V) &#123;</Highlight></CodeLine>
<Link id="l02990" /><CodeLine lineNumber="2990"><Highlight kind="normal">          auto &#42;C = dyn&#95;cast&lt;ConstantSDNode&gt;(V);</Highlight></CodeLine>
<Link id="l02991" /><CodeLine lineNumber="2991"><Highlight kind="normal">          return C &amp;&amp; C-&gt;isOpaque();</Highlight></CodeLine>
<Link id="l02992" /><CodeLine lineNumber="2992"><Highlight kind="normal">        &#125;))</Highlight></CodeLine>
<Link id="l02993" /><CodeLine lineNumber="2993"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02994" /><CodeLine lineNumber="2994"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>())</Highlight></CodeLine>
<Link id="l02995" /><CodeLine lineNumber="2995"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getConstant(Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>, dl, VT));</Highlight></CodeLine>
<Link id="l02996" /><CodeLine lineNumber="2996"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#a3cb888a2ce8e95e0d9769687a5e2f7d8">isFloatingPoint</a>())</Highlight></CodeLine>
<Link id="l02997" /><CodeLine lineNumber="2997"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(</Highlight></CodeLine>
<Link id="l02998" /><CodeLine lineNumber="2998"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getConstantFP(<a href="/docs/api/namespaces/llvm/lltok/#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">APFloat</a>(VT.<a href="/docs/api/structs/llvm/evt/#adf42d7b6a69dc15a64f841d51a9c93b7">getFltSemantics</a>(), Known.<a href="/docs/api/structs/llvm/knownbits/#aba205f553f24c184ea47fc1a6cb56537">One</a>),</Highlight></CodeLine>
<Link id="l02999" /><CodeLine lineNumber="2999"><Highlight kind="normal">                                    dl, VT));</Highlight></CodeLine>
<Link id="l03000" /><CodeLine lineNumber="3000"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03001" /><CodeLine lineNumber="3001"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03002" /><CodeLine lineNumber="3002"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// A multi use &#39;all demanded elts&#39; simplify failed to find any knownbits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03003" /><CodeLine lineNumber="3003"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Try again just for the original demanded elts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03004" /><CodeLine lineNumber="3004"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Ensure we do this AFTER constant folding above.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03005" /><CodeLine lineNumber="3005"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (HasMultiUse &amp;&amp; Known.<a href="/docs/api/structs/llvm/knownbits/#a28cf355963391ab8781b2347d495553d">isUnknown</a>() &amp;&amp; !OriginalDemandedElts.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>())</Highlight></CodeLine>
<Link id="l03006" /><CodeLine lineNumber="3006"><Highlight kind="normal">    Known = TLO.DAG.computeKnownBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, OriginalDemandedElts, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l03007" /><CodeLine lineNumber="3007"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03008" /><CodeLine lineNumber="3008"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03009" /><CodeLine lineNumber="3009"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03010" /><CodeLine lineNumber="3010"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03011" /><CodeLine lineNumber="3011"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a45a058376b4d2b008f7ea5ca16cecf55">TargetLowering::SimplifyDemandedVectorElts</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l03012" /><CodeLine lineNumber="3012"><Highlight kind="normal">                                                </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedElts,</Highlight></CodeLine>
<Link id="l03013" /><CodeLine lineNumber="3013"><Highlight kind="normal">                                                DAGCombinerInfo &amp;DCI)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03014" /><CodeLine lineNumber="3014"><Highlight kind="normal">  SelectionDAG &amp;DAG = DCI.DAG;</Highlight></CodeLine>
<Link id="l03015" /><CodeLine lineNumber="3015"><Highlight kind="normal">  TargetLoweringOpt TLO(DAG, !DCI.isBeforeLegalize(),</Highlight></CodeLine>
<Link id="l03016" /><CodeLine lineNumber="3016"><Highlight kind="normal">                        !DCI.isBeforeLegalizeOps());</Highlight></CodeLine>
<Link id="l03017" /><CodeLine lineNumber="3017"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03018" /><CodeLine lineNumber="3018"><Highlight kind="normal">  APInt KnownUndef, KnownZero;</Highlight></CodeLine>
<Link id="l03019" /><CodeLine lineNumber="3019"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/jumptable/#ae69658c09df17591f8b1c3e95b879b5ca99c267524f12efe8cf927389e02d506a">Simplified</a> =</Highlight></CodeLine>
<Link id="l03020" /><CodeLine lineNumber="3020"><Highlight kind="normal">      SimplifyDemandedVectorElts(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedElts, KnownUndef, KnownZero, TLO);</Highlight></CodeLine>
<Link id="l03021" /><CodeLine lineNumber="3021"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Simplified) &#123;</Highlight></CodeLine>
<Link id="l03022" /><CodeLine lineNumber="3022"><Highlight kind="normal">    DCI.AddToWorklist(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getNode());</Highlight></CodeLine>
<Link id="l03023" /><CodeLine lineNumber="3023"><Highlight kind="normal">    DCI.CommitTargetLoweringOpt(TLO);</Highlight></CodeLine>
<Link id="l03024" /><CodeLine lineNumber="3024"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03025" /><CodeLine lineNumber="3025"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03026" /><CodeLine lineNumber="3026"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/jumptable/#ae69658c09df17591f8b1c3e95b879b5ca99c267524f12efe8cf927389e02d506a">Simplified</a>;</Highlight></CodeLine>
<Link id="l03027" /><CodeLine lineNumber="3027"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03028" /><CodeLine lineNumber="3028"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03029" /><CodeLine lineNumber="3029"><Highlight kind="comment">/// Given a vector binary operation and known undefined elements for each input</Highlight></CodeLine>
<Link id="l03030" /><CodeLine lineNumber="3030"><Highlight kind="comment">/// operand, compute whether each element of the output is undefined.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03031" /><CodeLine lineNumber="3031" lineLink="#a17fca146e0dc0228bae32fe5548ab48a"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/apint">APInt</a> <a href="#a17fca146e0dc0228bae32fe5548ab48a">getKnownUndefForVectorBinop</a>(<a href="/docs/api/classes/llvm/sdvalue">SDValue</a> BO, <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp;DAG,</Highlight></CodeLine>
<Link id="l03032" /><CodeLine lineNumber="3032"><Highlight kind="normal">                                         </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/apint">APInt</a> &amp;UndefOp0,</Highlight></CodeLine>
<Link id="l03033" /><CodeLine lineNumber="3033"><Highlight kind="normal">                                         </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/apint">APInt</a> &amp;UndefOp1) &#123;</Highlight></CodeLine>
<Link id="l03034" /><CodeLine lineNumber="3034"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> VT = BO.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l03035" /><CodeLine lineNumber="3035"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4c20c587f89ae2926f9e8a99093e8419">getTargetLoweringInfo</a>().<a href="/docs/api/classes/llvm/targetloweringbase/#ab3598cfe4665dac7e694fb4be22158b8">isBinOp</a>(BO.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>()) &amp;&amp; VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l03036" /><CodeLine lineNumber="3036"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Vector binop only&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03037" /><CodeLine lineNumber="3037"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03038" /><CodeLine lineNumber="3038"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> EltVT = VT.<a href="/docs/api/structs/llvm/evt/#abc4c6365ade17ad4443ad0e381e7479d">getVectorElementType</a>();</Highlight></CodeLine>
<Link id="l03039" /><CodeLine lineNumber="3039"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumElts = VT.<a href="/docs/api/structs/llvm/evt/#a920f0719057d7352f9da10908859368d">isFixedLengthVector</a>() ? VT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>() : 1;</Highlight></CodeLine>
<Link id="l03040" /><CodeLine lineNumber="3040"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(UndefOp0.<a href="/docs/api/classes/llvm/apint/#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>() == NumElts &amp;&amp;</Highlight></CodeLine>
<Link id="l03041" /><CodeLine lineNumber="3041"><Highlight kind="normal">         UndefOp1.<a href="/docs/api/classes/llvm/apint/#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>() == NumElts &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Bad type for undef analysis&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03042" /><CodeLine lineNumber="3042"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03043" /><CodeLine lineNumber="3043"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> getUndefOrConstantElt = &#91;&amp;&#93;(<a href="/docs/api/classes/llvm/sdvalue">SDValue</a> V, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Index,</Highlight></CodeLine>
<Link id="l03044" /><CodeLine lineNumber="3044"><Highlight kind="normal">                                   </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/apint">APInt</a> &amp;UndefVals) &#123;</Highlight></CodeLine>
<Link id="l03045" /><CodeLine lineNumber="3045"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UndefVals&#91;Index&#93;)</Highlight></CodeLine>
<Link id="l03046" /><CodeLine lineNumber="3046"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5b0e59823444a55c295af279611a9d24">getUNDEF</a>(EltVT);</Highlight></CodeLine>
<Link id="l03047" /><CodeLine lineNumber="3047"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03048" /><CodeLine lineNumber="3048"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;BV = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;BuildVectorSDNode&gt;</a>(V)) &#123;</Highlight></CodeLine>
<Link id="l03049" /><CodeLine lineNumber="3049"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Try hard to make sure that the getNode() call is not creating temporary</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03050" /><CodeLine lineNumber="3050"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// nodes. Ignore opaque integers because they do not constant fold.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03051" /><CodeLine lineNumber="3051"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Elt = BV-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(Index);</Highlight></CodeLine>
<Link id="l03052" /><CodeLine lineNumber="3052"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(Elt);</Highlight></CodeLine>
<Link id="l03053" /><CodeLine lineNumber="3053"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantFPSDNode&gt;</a>(Elt) || Elt.<a href="/docs/api/classes/llvm/sdvalue/#a1c861a21f795c3108ab690f3a45c881a">isUndef</a>() || (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> &amp;&amp; !<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;isOpaque()))</Highlight></CodeLine>
<Link id="l03054" /><CodeLine lineNumber="3054"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Elt;</Highlight></CodeLine>
<Link id="l03055" /><CodeLine lineNumber="3055"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03056" /><CodeLine lineNumber="3056"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03057" /><CodeLine lineNumber="3057"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l03058" /><CodeLine lineNumber="3058"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l03059" /><CodeLine lineNumber="3059"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03060" /><CodeLine lineNumber="3060"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/apint">APInt</a> KnownUndef = <a href="/docs/api/classes/llvm/apint/#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(NumElts);</Highlight></CodeLine>
<Link id="l03061" /><CodeLine lineNumber="3061"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != NumElts; ++i) &#123;</Highlight></CodeLine>
<Link id="l03062" /><CodeLine lineNumber="3062"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If both inputs for this element are either constant or undef and match</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03063" /><CodeLine lineNumber="3063"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the element type, compute the constant/undef result for this element of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03064" /><CodeLine lineNumber="3064"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the vector.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03065" /><CodeLine lineNumber="3065"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO: Ideally we would use FoldConstantArithmetic() here, but that does</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03066" /><CodeLine lineNumber="3066"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// not handle FP constants. The code within getNode() should be refactored</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03067" /><CodeLine lineNumber="3067"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// to avoid the danger of creating a bogus temporary node here.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03068" /><CodeLine lineNumber="3068"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> C0 = getUndefOrConstantElt(BO.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), i, UndefOp0);</Highlight></CodeLine>
<Link id="l03069" /><CodeLine lineNumber="3069"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> C1 = getUndefOrConstantElt(BO.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1), i, UndefOp1);</Highlight></CodeLine>
<Link id="l03070" /><CodeLine lineNumber="3070"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C0 &amp;&amp; C1 &amp;&amp; C0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>() == EltVT &amp;&amp; C1.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>() == EltVT)</Highlight></CodeLine>
<Link id="l03071" /><CodeLine lineNumber="3071"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(BO.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>(), <a href="/docs/api/classes/llvm/sdloc">SDLoc</a>(BO), EltVT, C0, C1).<a href="/docs/api/files/lib/lib/codegen/machinessacontext-cpp/#a31d3975d3ebe3475aef26122625d5b59">isUndef</a>())</Highlight></CodeLine>
<Link id="l03072" /><CodeLine lineNumber="3072"><Highlight kind="normal">        KnownUndef.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(i);</Highlight></CodeLine>
<Link id="l03073" /><CodeLine lineNumber="3073"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03074" /><CodeLine lineNumber="3074"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> KnownUndef;</Highlight></CodeLine>
<Link id="l03075" /><CodeLine lineNumber="3075"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03076" /><CodeLine lineNumber="3076"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03077" /><CodeLine lineNumber="3077"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a45a058376b4d2b008f7ea5ca16cecf55">TargetLowering::SimplifyDemandedVectorElts</a>(</Highlight></CodeLine>
<Link id="l03078" /><CodeLine lineNumber="3078"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;OriginalDemandedElts, APInt &amp;KnownUndef,</Highlight></CodeLine>
<Link id="l03079" /><CodeLine lineNumber="3079"><Highlight kind="normal">    APInt &amp;KnownZero, TargetLoweringOpt &amp;TLO, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>,</Highlight></CodeLine>
<Link id="l03080" /><CodeLine lineNumber="3080"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AssumeSingleUse)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03081" /><CodeLine lineNumber="3081"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l03082" /><CodeLine lineNumber="3082"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opcode = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode();</Highlight></CodeLine>
<Link id="l03083" /><CodeLine lineNumber="3083"><Highlight kind="normal">  APInt DemandedElts = OriginalDemandedElts;</Highlight></CodeLine>
<Link id="l03084" /><CodeLine lineNumber="3084"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumElts = DemandedElts.<a href="/docs/api/classes/llvm/apint/#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>();</Highlight></CodeLine>
<Link id="l03085" /><CodeLine lineNumber="3085"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Expected vector op&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03086" /><CodeLine lineNumber="3086"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03087" /><CodeLine lineNumber="3087"><Highlight kind="normal">  KnownUndef = KnownZero = <a href="/docs/api/classes/llvm/apint/#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(NumElts);</Highlight></CodeLine>
<Link id="l03088" /><CodeLine lineNumber="3088"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03089" /><CodeLine lineNumber="3089"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!shouldSimplifyDemandedVectorElts(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO))</Highlight></CodeLine>
<Link id="l03090" /><CodeLine lineNumber="3090"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03091" /><CodeLine lineNumber="3091"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03092" /><CodeLine lineNumber="3092"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: For now we assume we know nothing about scalable vectors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03093" /><CodeLine lineNumber="3093"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l03094" /><CodeLine lineNumber="3094"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03095" /><CodeLine lineNumber="3095"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03096" /><CodeLine lineNumber="3096"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>() == NumElts &amp;&amp;</Highlight></CodeLine>
<Link id="l03097" /><CodeLine lineNumber="3097"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Mask size mismatches value type element count!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03098" /><CodeLine lineNumber="3098"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03099" /><CodeLine lineNumber="3099"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Undef operand.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03100" /><CodeLine lineNumber="3100"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.isUndef()) &#123;</Highlight></CodeLine>
<Link id="l03101" /><CodeLine lineNumber="3101"><Highlight kind="normal">    KnownUndef.<a href="/docs/api/classes/llvm/apint/#ab6fff8a97bcb55e50e9be0ecf0c99b63">setAllBits</a>();</Highlight></CodeLine>
<Link id="l03102" /><CodeLine lineNumber="3102"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03103" /><CodeLine lineNumber="3103"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03104" /><CodeLine lineNumber="3104"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03105" /><CodeLine lineNumber="3105"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If Op has other users, assume that all elements are needed.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03106" /><CodeLine lineNumber="3106"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!AssumeSingleUse &amp;&amp; !<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getNode()-&gt;hasOneUse())</Highlight></CodeLine>
<Link id="l03107" /><CodeLine lineNumber="3107"><Highlight kind="normal">    DemandedElts.<a href="/docs/api/classes/llvm/apint/#ab6fff8a97bcb55e50e9be0ecf0c99b63">setAllBits</a>();</Highlight></CodeLine>
<Link id="l03108" /><CodeLine lineNumber="3108"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03109" /><CodeLine lineNumber="3109"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Not demanding any elements from Op.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03110" /><CodeLine lineNumber="3110"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedElts == 0) &#123;</Highlight></CodeLine>
<Link id="l03111" /><CodeLine lineNumber="3111"><Highlight kind="normal">    KnownUndef.<a href="/docs/api/classes/llvm/apint/#ab6fff8a97bcb55e50e9be0ecf0c99b63">setAllBits</a>();</Highlight></CodeLine>
<Link id="l03112" /><CodeLine lineNumber="3112"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getUNDEF(VT));</Highlight></CodeLine>
<Link id="l03113" /><CodeLine lineNumber="3113"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03114" /><CodeLine lineNumber="3114"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03115" /><CodeLine lineNumber="3115"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Limit search depth.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03116" /><CodeLine lineNumber="3116"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> &gt;= <a href="/docs/api/classes/llvm/selectiondag/#a4d5e16cbde22f5e6f007940d57a428fd">SelectionDAG::MaxRecursionDepth</a>)</Highlight></CodeLine>
<Link id="l03117" /><CodeLine lineNumber="3117"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03118" /><CodeLine lineNumber="3118"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03119" /><CodeLine lineNumber="3119"><Highlight kind="normal">  SDLoc <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l03120" /><CodeLine lineNumber="3120"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> EltSizeInBits = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l03121" /><CodeLine lineNumber="3121"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsLE = TLO.DAG.getDataLayout().isLittleEndian();</Highlight></CodeLine>
<Link id="l03122" /><CodeLine lineNumber="3122"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03123" /><CodeLine lineNumber="3123"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Helper for demanding the specified elements and all the bits of both binary</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03124" /><CodeLine lineNumber="3124"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// operands.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03125" /><CodeLine lineNumber="3125"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> SimplifyDemandedVectorEltsBinOp = &#91;&amp;&#93;(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1) &#123;</Highlight></CodeLine>
<Link id="l03126" /><CodeLine lineNumber="3126"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp0 = SimplifyMultipleUseDemandedVectorElts(Op0, DemandedElts,</Highlight></CodeLine>
<Link id="l03127" /><CodeLine lineNumber="3127"><Highlight kind="normal">                                                           TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l03128" /><CodeLine lineNumber="3128"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp1 = SimplifyMultipleUseDemandedVectorElts(Op1, DemandedElts,</Highlight></CodeLine>
<Link id="l03129" /><CodeLine lineNumber="3129"><Highlight kind="normal">                                                           TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l03130" /><CodeLine lineNumber="3130"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NewOp0 || NewOp1) &#123;</Highlight></CodeLine>
<Link id="l03131" /><CodeLine lineNumber="3131"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp =</Highlight></CodeLine>
<Link id="l03132" /><CodeLine lineNumber="3132"><Highlight kind="normal">          TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(Opcode, SDLoc(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>), VT, NewOp0 ? NewOp0 : Op0,</Highlight></CodeLine>
<Link id="l03133" /><CodeLine lineNumber="3133"><Highlight kind="normal">                          NewOp1 ? NewOp1 : Op1, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;getFlags());</Highlight></CodeLine>
<Link id="l03134" /><CodeLine lineNumber="3134"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l03135" /><CodeLine lineNumber="3135"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03136" /><CodeLine lineNumber="3136"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03137" /><CodeLine lineNumber="3137"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l03138" /><CodeLine lineNumber="3138"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03139" /><CodeLine lineNumber="3139"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (Opcode) &#123;</Highlight></CodeLine>
<Link id="l03140" /><CodeLine lineNumber="3140"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a576080a08ef1bbab0308eac9d5838f75">ISD::SCALAR&#95;TO&#95;VECTOR</a>: &#123;</Highlight></CodeLine>
<Link id="l03141" /><CodeLine lineNumber="3141"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedElts&#91;0&#93;) &#123;</Highlight></CodeLine>
<Link id="l03142" /><CodeLine lineNumber="3142"><Highlight kind="normal">      KnownUndef.<a href="/docs/api/classes/llvm/apint/#ab6fff8a97bcb55e50e9be0ecf0c99b63">setAllBits</a>();</Highlight></CodeLine>
<Link id="l03143" /><CodeLine lineNumber="3143"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getUNDEF(VT));</Highlight></CodeLine>
<Link id="l03144" /><CodeLine lineNumber="3144"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03145" /><CodeLine lineNumber="3145"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ScalarSrc = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l03146" /><CodeLine lineNumber="3146"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ScalarSrc.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9329e79f62e9ab9b41cfbcafd314bcbd">ISD::EXTRACT&#95;VECTOR&#95;ELT</a>) &#123;</Highlight></CodeLine>
<Link id="l03147" /><CodeLine lineNumber="3147"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = ScalarSrc.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l03148" /><CodeLine lineNumber="3148"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Idx = ScalarSrc.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1);</Highlight></CodeLine>
<Link id="l03149" /><CodeLine lineNumber="3149"><Highlight kind="normal">      EVT SrcVT = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType();</Highlight></CodeLine>
<Link id="l03150" /><CodeLine lineNumber="3150"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03151" /><CodeLine lineNumber="3151"><Highlight kind="normal">      ElementCount SrcEltCnt = SrcVT.<a href="/docs/api/structs/llvm/evt/#a3d102abca1c9c95f36546dff2f39273b">getVectorElementCount</a>();</Highlight></CodeLine>
<Link id="l03152" /><CodeLine lineNumber="3152"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03153" /><CodeLine lineNumber="3153"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcEltCnt.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>())</Highlight></CodeLine>
<Link id="l03154" /><CodeLine lineNumber="3154"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03155" /><CodeLine lineNumber="3155"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03156" /><CodeLine lineNumber="3156"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSrcElts = SrcEltCnt.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>();</Highlight></CodeLine>
<Link id="l03157" /><CodeLine lineNumber="3157"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a1a86775f3d85d98a31b2751e1eb348ea">isNullConstant</a>(Idx)) &#123;</Highlight></CodeLine>
<Link id="l03158" /><CodeLine lineNumber="3158"><Highlight kind="normal">        APInt SrcDemandedElts = <a href="/docs/api/classes/llvm/apint/#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(NumSrcElts, 0);</Highlight></CodeLine>
<Link id="l03159" /><CodeLine lineNumber="3159"><Highlight kind="normal">        APInt SrcUndef = KnownUndef.<a href="/docs/api/classes/llvm/apint/#a2ed912a28808268e35bd58e8f11251aa">zextOrTrunc</a>(NumSrcElts);</Highlight></CodeLine>
<Link id="l03160" /><CodeLine lineNumber="3160"><Highlight kind="normal">        APInt SrcZero = KnownZero.<a href="/docs/api/classes/llvm/apint/#a2ed912a28808268e35bd58e8f11251aa">zextOrTrunc</a>(NumSrcElts);</Highlight></CodeLine>
<Link id="l03161" /><CodeLine lineNumber="3161"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Src, SrcDemandedElts, SrcUndef, SrcZero,</Highlight></CodeLine>
<Link id="l03162" /><CodeLine lineNumber="3162"><Highlight kind="normal">                                       TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03163" /><CodeLine lineNumber="3163"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03164" /><CodeLine lineNumber="3164"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03165" /><CodeLine lineNumber="3165"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03166" /><CodeLine lineNumber="3166"><Highlight kind="normal">    KnownUndef.<a href="/docs/api/classes/llvm/apint/#a2780c5606880394d3f07cd2079a27697">setHighBits</a>(NumElts - 1);</Highlight></CodeLine>
<Link id="l03167" /><CodeLine lineNumber="3167"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03168" /><CodeLine lineNumber="3168"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03169" /><CodeLine lineNumber="3169"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> ISD::BITCAST: &#123;</Highlight></CodeLine>
<Link id="l03170" /><CodeLine lineNumber="3170"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l03171" /><CodeLine lineNumber="3171"><Highlight kind="normal">    EVT SrcVT = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType();</Highlight></CodeLine>
<Link id="l03172" /><CodeLine lineNumber="3172"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03173" /><CodeLine lineNumber="3173"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We only handle vectors here.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03174" /><CodeLine lineNumber="3174"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO - investigate calling SimplifyDemandedBits/ComputeKnownBits?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03175" /><CodeLine lineNumber="3175"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SrcVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>())</Highlight></CodeLine>
<Link id="l03176" /><CodeLine lineNumber="3176"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03177" /><CodeLine lineNumber="3177"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03178" /><CodeLine lineNumber="3178"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Fast handling of &#39;identity&#39; bitcasts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03179" /><CodeLine lineNumber="3179"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSrcElts = SrcVT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>();</Highlight></CodeLine>
<Link id="l03180" /><CodeLine lineNumber="3180"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumSrcElts == NumElts)</Highlight></CodeLine>
<Link id="l03181" /><CodeLine lineNumber="3181"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> SimplifyDemandedVectorElts(Src, DemandedElts, KnownUndef,</Highlight></CodeLine>
<Link id="l03182" /><CodeLine lineNumber="3182"><Highlight kind="normal">                                        KnownZero, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l03183" /><CodeLine lineNumber="3183"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03184" /><CodeLine lineNumber="3184"><Highlight kind="normal">    APInt SrcDemandedElts, SrcZero, SrcUndef;</Highlight></CodeLine>
<Link id="l03185" /><CodeLine lineNumber="3185"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03186" /><CodeLine lineNumber="3186"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Bitcast from &#39;large element&#39; src vector to &#39;small element&#39; vector, we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03187" /><CodeLine lineNumber="3187"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// must demand a source element if any DemandedElt maps to it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03188" /><CodeLine lineNumber="3188"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((NumElts % NumSrcElts) == 0) &#123;</Highlight></CodeLine>
<Link id="l03189" /><CodeLine lineNumber="3189"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Scale = NumElts / NumSrcElts;</Highlight></CodeLine>
<Link id="l03190" /><CodeLine lineNumber="3190"><Highlight kind="normal">      SrcDemandedElts = <a href="/docs/api/namespaces/llvm/apintops/#ab455b98d2cc1e2a8ff7a9486ec4c2982">APIntOps::ScaleBitMask</a>(DemandedElts, NumSrcElts);</Highlight></CodeLine>
<Link id="l03191" /><CodeLine lineNumber="3191"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Src, SrcDemandedElts, SrcUndef, SrcZero,</Highlight></CodeLine>
<Link id="l03192" /><CodeLine lineNumber="3192"><Highlight kind="normal">                                     TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03193" /><CodeLine lineNumber="3193"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03194" /><CodeLine lineNumber="3194"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03195" /><CodeLine lineNumber="3195"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Try calling SimplifyDemandedBits, converting demanded elts to the bits</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03196" /><CodeLine lineNumber="3196"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// of the large element.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03197" /><CodeLine lineNumber="3197"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// TODO - bigendian once we have test coverage.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03198" /><CodeLine lineNumber="3198"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsLE) &#123;</Highlight></CodeLine>
<Link id="l03199" /><CodeLine lineNumber="3199"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SrcEltSizeInBits = SrcVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l03200" /><CodeLine lineNumber="3200"><Highlight kind="normal">        APInt SrcDemandedBits = <a href="/docs/api/classes/llvm/apint/#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(SrcEltSizeInBits);</Highlight></CodeLine>
<Link id="l03201" /><CodeLine lineNumber="3201"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != NumElts; ++i)</Highlight></CodeLine>
<Link id="l03202" /><CodeLine lineNumber="3202"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedElts&#91;i&#93;) &#123;</Highlight></CodeLine>
<Link id="l03203" /><CodeLine lineNumber="3203"><Highlight kind="normal">            </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Ofs = (i % Scale) &#42; EltSizeInBits;</Highlight></CodeLine>
<Link id="l03204" /><CodeLine lineNumber="3204"><Highlight kind="normal">            SrcDemandedBits.<a href="/docs/api/classes/llvm/apint/#acb95d5d8e87df053e1b53e2ec60de4b6">setBits</a>(Ofs, Ofs + EltSizeInBits);</Highlight></CodeLine>
<Link id="l03205" /><CodeLine lineNumber="3205"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l03206" /><CodeLine lineNumber="3206"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03207" /><CodeLine lineNumber="3207"><Highlight kind="normal">        KnownBits Known;</Highlight></CodeLine>
<Link id="l03208" /><CodeLine lineNumber="3208"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(Src, SrcDemandedBits, SrcDemandedElts, Known,</Highlight></CodeLine>
<Link id="l03209" /><CodeLine lineNumber="3209"><Highlight kind="normal">                                 TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03210" /><CodeLine lineNumber="3210"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03211" /><CodeLine lineNumber="3211"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03212" /><CodeLine lineNumber="3212"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// The bitcast has split each wide element into a number of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03213" /><CodeLine lineNumber="3213"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// narrow subelements. We have just computed the Known bits</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03214" /><CodeLine lineNumber="3214"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// for wide elements. See if element splitting results in</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03215" /><CodeLine lineNumber="3215"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// some subelements being zero. Only for demanded elements!</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03216" /><CodeLine lineNumber="3216"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SubElt = 0; SubElt != Scale; ++SubElt) &#123;</Highlight></CodeLine>
<Link id="l03217" /><CodeLine lineNumber="3217"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>.<a href="/docs/api/classes/llvm/apint/#adf997f1047734d3b47b8d5a9b2163f11">extractBits</a>(EltSizeInBits, SubElt &#42; EltSizeInBits)</Highlight></CodeLine>
<Link id="l03218" /><CodeLine lineNumber="3218"><Highlight kind="normal">                   .<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>())</Highlight></CodeLine>
<Link id="l03219" /><CodeLine lineNumber="3219"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03220" /><CodeLine lineNumber="3220"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SrcElt = 0; SrcElt != NumSrcElts; ++SrcElt) &#123;</Highlight></CodeLine>
<Link id="l03221" /><CodeLine lineNumber="3221"><Highlight kind="normal">            </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Elt = Scale &#42; SrcElt + SubElt;</Highlight></CodeLine>
<Link id="l03222" /><CodeLine lineNumber="3222"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedElts&#91;Elt&#93;)</Highlight></CodeLine>
<Link id="l03223" /><CodeLine lineNumber="3223"><Highlight kind="normal">              KnownZero.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(Elt);</Highlight></CodeLine>
<Link id="l03224" /><CodeLine lineNumber="3224"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l03225" /><CodeLine lineNumber="3225"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l03226" /><CodeLine lineNumber="3226"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03227" /><CodeLine lineNumber="3227"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03228" /><CodeLine lineNumber="3228"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If the src element is zero/undef then all the output elements will be -</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03229" /><CodeLine lineNumber="3229"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// only demanded elements are guaranteed to be correct.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03230" /><CodeLine lineNumber="3230"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != NumSrcElts; ++i) &#123;</Highlight></CodeLine>
<Link id="l03231" /><CodeLine lineNumber="3231"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcDemandedElts&#91;i&#93;) &#123;</Highlight></CodeLine>
<Link id="l03232" /><CodeLine lineNumber="3232"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcZero&#91;i&#93;)</Highlight></CodeLine>
<Link id="l03233" /><CodeLine lineNumber="3233"><Highlight kind="normal">            KnownZero.<a href="/docs/api/classes/llvm/apint/#acb95d5d8e87df053e1b53e2ec60de4b6">setBits</a>(i &#42; Scale, (i + 1) &#42; Scale);</Highlight></CodeLine>
<Link id="l03234" /><CodeLine lineNumber="3234"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcUndef&#91;i&#93;)</Highlight></CodeLine>
<Link id="l03235" /><CodeLine lineNumber="3235"><Highlight kind="normal">            KnownUndef.<a href="/docs/api/classes/llvm/apint/#acb95d5d8e87df053e1b53e2ec60de4b6">setBits</a>(i &#42; Scale, (i + 1) &#42; Scale);</Highlight></CodeLine>
<Link id="l03236" /><CodeLine lineNumber="3236"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l03237" /><CodeLine lineNumber="3237"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03238" /><CodeLine lineNumber="3238"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03239" /><CodeLine lineNumber="3239"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03240" /><CodeLine lineNumber="3240"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Bitcast from &#39;small element&#39; src vector to &#39;large element&#39; vector, we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03241" /><CodeLine lineNumber="3241"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// demand all smaller source elements covered by the larger demanded element</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03242" /><CodeLine lineNumber="3242"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// of this vector.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03243" /><CodeLine lineNumber="3243"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((NumSrcElts % NumElts) == 0) &#123;</Highlight></CodeLine>
<Link id="l03244" /><CodeLine lineNumber="3244"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Scale = NumSrcElts / NumElts;</Highlight></CodeLine>
<Link id="l03245" /><CodeLine lineNumber="3245"><Highlight kind="normal">      SrcDemandedElts = <a href="/docs/api/namespaces/llvm/apintops/#ab455b98d2cc1e2a8ff7a9486ec4c2982">APIntOps::ScaleBitMask</a>(DemandedElts, NumSrcElts);</Highlight></CodeLine>
<Link id="l03246" /><CodeLine lineNumber="3246"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Src, SrcDemandedElts, SrcUndef, SrcZero,</Highlight></CodeLine>
<Link id="l03247" /><CodeLine lineNumber="3247"><Highlight kind="normal">                                     TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03248" /><CodeLine lineNumber="3248"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03249" /><CodeLine lineNumber="3249"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03250" /><CodeLine lineNumber="3250"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If all the src elements covering an output element are zero/undef, then</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03251" /><CodeLine lineNumber="3251"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// the output element will be as well, assuming it was demanded.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03252" /><CodeLine lineNumber="3252"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != NumElts; ++i) &#123;</Highlight></CodeLine>
<Link id="l03253" /><CodeLine lineNumber="3253"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedElts&#91;i&#93;) &#123;</Highlight></CodeLine>
<Link id="l03254" /><CodeLine lineNumber="3254"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcZero.<a href="/docs/api/classes/llvm/apint/#adf997f1047734d3b47b8d5a9b2163f11">extractBits</a>(Scale, i &#42; Scale).<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>())</Highlight></CodeLine>
<Link id="l03255" /><CodeLine lineNumber="3255"><Highlight kind="normal">            KnownZero.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(i);</Highlight></CodeLine>
<Link id="l03256" /><CodeLine lineNumber="3256"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcUndef.<a href="/docs/api/classes/llvm/apint/#adf997f1047734d3b47b8d5a9b2163f11">extractBits</a>(Scale, i &#42; Scale).<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>())</Highlight></CodeLine>
<Link id="l03257" /><CodeLine lineNumber="3257"><Highlight kind="normal">            KnownUndef.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(i);</Highlight></CodeLine>
<Link id="l03258" /><CodeLine lineNumber="3258"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l03259" /><CodeLine lineNumber="3259"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03260" /><CodeLine lineNumber="3260"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03261" /><CodeLine lineNumber="3261"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03262" /><CodeLine lineNumber="3262"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03263" /><CodeLine lineNumber="3263"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad3b50b6d74957b19afb85ac29f66afef">ISD::FREEZE</a>: &#123;</Highlight></CodeLine>
<Link id="l03264" /><CodeLine lineNumber="3264"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l03265" /><CodeLine lineNumber="3265"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TLO.DAG.isGuaranteedNotToBeUndefOrPoison(N0, DemandedElts,</Highlight></CodeLine>
<Link id="l03266" /><CodeLine lineNumber="3266"><Highlight kind="normal">                                                 </Highlight><Highlight kind="comment">/&#42;PoisonOnly=&#42;/</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">))</Highlight></CodeLine>
<Link id="l03267" /><CodeLine lineNumber="3267"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, N0);</Highlight></CodeLine>
<Link id="l03268" /><CodeLine lineNumber="3268"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03269" /><CodeLine lineNumber="3269"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO: Replace this with the general fold from DAGCombiner::visitFREEZE</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03270" /><CodeLine lineNumber="3270"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// freeze(op(x, ...)) -&gt; op(freeze(x), ...).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03271" /><CodeLine lineNumber="3271"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a576080a08ef1bbab0308eac9d5838f75">ISD::SCALAR&#95;TO&#95;VECTOR</a> &amp;&amp; DemandedElts == 1)</Highlight></CodeLine>
<Link id="l03272" /><CodeLine lineNumber="3272"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(</Highlight></CodeLine>
<Link id="l03273" /><CodeLine lineNumber="3273"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a576080a08ef1bbab0308eac9d5838f75">ISD::SCALAR&#95;TO&#95;VECTOR</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT,</Highlight></CodeLine>
<Link id="l03274" /><CodeLine lineNumber="3274"><Highlight kind="normal">                              TLO.DAG.getFreeze(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0))));</Highlight></CodeLine>
<Link id="l03275" /><CodeLine lineNumber="3275"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03276" /><CodeLine lineNumber="3276"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03277" /><CodeLine lineNumber="3277"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aff6f73b624fecca7dbe94259f9437e32">ISD::BUILD&#95;VECTOR</a>: &#123;</Highlight></CodeLine>
<Link id="l03278" /><CodeLine lineNumber="3278"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Check all elements and simplify any unused elements with UNDEF.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03279" /><CodeLine lineNumber="3279"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedElts.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>()) &#123;</Highlight></CodeLine>
<Link id="l03280" /><CodeLine lineNumber="3280"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Don&#39;t simplify BROADCASTS.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03281" /><CodeLine lineNumber="3281"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a61d13d6824ec46c31260a4fd0997eda0">llvm::any&#95;of</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;op&#95;values(),</Highlight></CodeLine>
<Link id="l03282" /><CodeLine lineNumber="3282"><Highlight kind="normal">                       &#91;&amp;&#93;(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Elt) &#123; return Op.getOperand(0) != Elt; &#125;)) &#123;</Highlight></CodeLine>
<Link id="l03283" /><CodeLine lineNumber="3283"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDValue, 32&gt;</a> <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;ops());</Highlight></CodeLine>
<Link id="l03284" /><CodeLine lineNumber="3284"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Updated = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03285" /><CodeLine lineNumber="3285"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != NumElts; ++i) &#123;</Highlight></CodeLine>
<Link id="l03286" /><CodeLine lineNumber="3286"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedElts&#91;i&#93; &amp;&amp; !<a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>&#91;i&#93;.<a href="/docs/api/files/lib/lib/codegen/machinessacontext-cpp/#a31d3975d3ebe3475aef26122625d5b59">isUndef</a>()) &#123;</Highlight></CodeLine>
<Link id="l03287" /><CodeLine lineNumber="3287"><Highlight kind="normal">            <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>&#91;i&#93; = TLO.DAG.getUNDEF(<a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>&#91;0&#93;.<a href="/docs/api/classes/llvm/targetloweringbase/#a126c61d55fb4d2e509537ce68e8b6400">getValueType</a>());</Highlight></CodeLine>
<Link id="l03288" /><CodeLine lineNumber="3288"><Highlight kind="normal">            KnownUndef.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(i);</Highlight></CodeLine>
<Link id="l03289" /><CodeLine lineNumber="3289"><Highlight kind="normal">            Updated = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03290" /><CodeLine lineNumber="3290"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l03291" /><CodeLine lineNumber="3291"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l03292" /><CodeLine lineNumber="3292"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Updated)</Highlight></CodeLine>
<Link id="l03293" /><CodeLine lineNumber="3293"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getBuildVector(VT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>));</Highlight></CodeLine>
<Link id="l03294" /><CodeLine lineNumber="3294"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03295" /><CodeLine lineNumber="3295"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03296" /><CodeLine lineNumber="3296"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != NumElts; ++i) &#123;</Highlight></CodeLine>
<Link id="l03297" /><CodeLine lineNumber="3297"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SrcOp = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(i);</Highlight></CodeLine>
<Link id="l03298" /><CodeLine lineNumber="3298"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcOp.<a href="/docs/api/classes/llvm/sdvalue/#a1c861a21f795c3108ab690f3a45c881a">isUndef</a>()) &#123;</Highlight></CodeLine>
<Link id="l03299" /><CodeLine lineNumber="3299"><Highlight kind="normal">        KnownUndef.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(i);</Highlight></CodeLine>
<Link id="l03300" /><CodeLine lineNumber="3300"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (EltSizeInBits == SrcOp.<a href="/docs/api/classes/llvm/sdvalue/#abd46b9ca1d156bc7e3dd9150cc106a28">getScalarValueSizeInBits</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l03301" /><CodeLine lineNumber="3301"><Highlight kind="normal">                 (<a href="/docs/api/namespaces/llvm/#a1a86775f3d85d98a31b2751e1eb348ea">isNullConstant</a>(SrcOp) || <a href="/docs/api/namespaces/llvm/#acfd2e840c7c480f45753b81b504ff587">isNullFPConstant</a>(SrcOp))) &#123;</Highlight></CodeLine>
<Link id="l03302" /><CodeLine lineNumber="3302"><Highlight kind="normal">        KnownZero.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(i);</Highlight></CodeLine>
<Link id="l03303" /><CodeLine lineNumber="3303"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03304" /><CodeLine lineNumber="3304"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03305" /><CodeLine lineNumber="3305"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03306" /><CodeLine lineNumber="3306"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03307" /><CodeLine lineNumber="3307"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a320898056eadc3254fc601e1362eb9f5">ISD::CONCAT&#95;VECTORS</a>: &#123;</Highlight></CodeLine>
<Link id="l03308" /><CodeLine lineNumber="3308"><Highlight kind="normal">    EVT SubVT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0).getValueType();</Highlight></CodeLine>
<Link id="l03309" /><CodeLine lineNumber="3309"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSubVecs = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.<a href="/docs/api/classes/llvm/dwarfexpression/operation/#a663d5e8085015fda24216c33615fac33">getNumOperands</a>();</Highlight></CodeLine>
<Link id="l03310" /><CodeLine lineNumber="3310"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSubElts = SubVT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>();</Highlight></CodeLine>
<Link id="l03311" /><CodeLine lineNumber="3311"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != NumSubVecs; ++i) &#123;</Highlight></CodeLine>
<Link id="l03312" /><CodeLine lineNumber="3312"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SubOp = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(i);</Highlight></CodeLine>
<Link id="l03313" /><CodeLine lineNumber="3313"><Highlight kind="normal">      APInt SubElts = DemandedElts.<a href="/docs/api/classes/llvm/apint/#adf997f1047734d3b47b8d5a9b2163f11">extractBits</a>(NumSubElts, i &#42; NumSubElts);</Highlight></CodeLine>
<Link id="l03314" /><CodeLine lineNumber="3314"><Highlight kind="normal">      APInt SubUndef, SubZero;</Highlight></CodeLine>
<Link id="l03315" /><CodeLine lineNumber="3315"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(SubOp, SubElts, SubUndef, SubZero, TLO,</Highlight></CodeLine>
<Link id="l03316" /><CodeLine lineNumber="3316"><Highlight kind="normal">                                     <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03317" /><CodeLine lineNumber="3317"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03318" /><CodeLine lineNumber="3318"><Highlight kind="normal">      KnownUndef.<a href="/docs/api/classes/llvm/apint/#aabe301a4f18d38478700ad44ba2245bc">insertBits</a>(SubUndef, i &#42; NumSubElts);</Highlight></CodeLine>
<Link id="l03319" /><CodeLine lineNumber="3319"><Highlight kind="normal">      KnownZero.<a href="/docs/api/classes/llvm/apint/#aabe301a4f18d38478700ad44ba2245bc">insertBits</a>(SubZero, i &#42; NumSubElts);</Highlight></CodeLine>
<Link id="l03320" /><CodeLine lineNumber="3320"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03321" /><CodeLine lineNumber="3321"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03322" /><CodeLine lineNumber="3322"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03323" /><CodeLine lineNumber="3323"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedElts.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>()) &#123;</Highlight></CodeLine>
<Link id="l03324" /><CodeLine lineNumber="3324"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> FoundNewSub = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03325" /><CodeLine lineNumber="3325"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDValue, 2&gt;</a> DemandedSubOps;</Highlight></CodeLine>
<Link id="l03326" /><CodeLine lineNumber="3326"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != NumSubVecs; ++i) &#123;</Highlight></CodeLine>
<Link id="l03327" /><CodeLine lineNumber="3327"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SubOp = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(i);</Highlight></CodeLine>
<Link id="l03328" /><CodeLine lineNumber="3328"><Highlight kind="normal">        APInt SubElts = DemandedElts.<a href="/docs/api/classes/llvm/apint/#adf997f1047734d3b47b8d5a9b2163f11">extractBits</a>(NumSubElts, i &#42; NumSubElts);</Highlight></CodeLine>
<Link id="l03329" /><CodeLine lineNumber="3329"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewSubOp = SimplifyMultipleUseDemandedVectorElts(</Highlight></CodeLine>
<Link id="l03330" /><CodeLine lineNumber="3330"><Highlight kind="normal">            SubOp, SubElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l03331" /><CodeLine lineNumber="3331"><Highlight kind="normal">        DemandedSubOps.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(NewSubOp ? NewSubOp : SubOp);</Highlight></CodeLine>
<Link id="l03332" /><CodeLine lineNumber="3332"><Highlight kind="normal">        FoundNewSub = NewSubOp ? <a href="/docs/api/files/lib/lib/analysis/basicaliasanalysis-cpp/#af6d5cafbdfc5313e65d990120021a3ec">true</a> : FoundNewSub;</Highlight></CodeLine>
<Link id="l03333" /><CodeLine lineNumber="3333"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03334" /><CodeLine lineNumber="3334"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (FoundNewSub) &#123;</Highlight></CodeLine>
<Link id="l03335" /><CodeLine lineNumber="3335"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp =</Highlight></CodeLine>
<Link id="l03336" /><CodeLine lineNumber="3336"><Highlight kind="normal">            TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode(), SDLoc(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>), VT, DemandedSubOps);</Highlight></CodeLine>
<Link id="l03337" /><CodeLine lineNumber="3337"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l03338" /><CodeLine lineNumber="3338"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03339" /><CodeLine lineNumber="3339"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03340" /><CodeLine lineNumber="3340"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03341" /><CodeLine lineNumber="3341"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03342" /><CodeLine lineNumber="3342"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1617abaedbb1d902bb3a5b3136684f9c">ISD::INSERT&#95;SUBVECTOR</a>: &#123;</Highlight></CodeLine>
<Link id="l03343" /><CodeLine lineNumber="3343"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Demand any elements from the subvector and the remainder from the src its</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03344" /><CodeLine lineNumber="3344"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// inserted into.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03345" /><CodeLine lineNumber="3345"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l03346" /><CodeLine lineNumber="3346"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Sub = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l03347" /><CodeLine lineNumber="3347"><Highlight kind="normal">    uint64&#95;t Idx = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getConstantOperandVal(2);</Highlight></CodeLine>
<Link id="l03348" /><CodeLine lineNumber="3348"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSubElts = Sub.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>().<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>();</Highlight></CodeLine>
<Link id="l03349" /><CodeLine lineNumber="3349"><Highlight kind="normal">    APInt DemandedSubElts = DemandedElts.<a href="/docs/api/classes/llvm/apint/#adf997f1047734d3b47b8d5a9b2163f11">extractBits</a>(NumSubElts, Idx);</Highlight></CodeLine>
<Link id="l03350" /><CodeLine lineNumber="3350"><Highlight kind="normal">    APInt DemandedSrcElts = DemandedElts;</Highlight></CodeLine>
<Link id="l03351" /><CodeLine lineNumber="3351"><Highlight kind="normal">    DemandedSrcElts.<a href="/docs/api/classes/llvm/apint/#aabe301a4f18d38478700ad44ba2245bc">insertBits</a>(<a href="/docs/api/classes/llvm/apint/#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(NumSubElts), Idx);</Highlight></CodeLine>
<Link id="l03352" /><CodeLine lineNumber="3352"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03353" /><CodeLine lineNumber="3353"><Highlight kind="normal">    APInt SubUndef, SubZero;</Highlight></CodeLine>
<Link id="l03354" /><CodeLine lineNumber="3354"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Sub, DemandedSubElts, SubUndef, SubZero, TLO,</Highlight></CodeLine>
<Link id="l03355" /><CodeLine lineNumber="3355"><Highlight kind="normal">                                   <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03356" /><CodeLine lineNumber="3356"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03357" /><CodeLine lineNumber="3357"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03358" /><CodeLine lineNumber="3358"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If none of the src operand elements are demanded, replace it with undef.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03359" /><CodeLine lineNumber="3359"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedSrcElts &amp;&amp; !<a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.isUndef())</Highlight></CodeLine>
<Link id="l03360" /><CodeLine lineNumber="3360"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1617abaedbb1d902bb3a5b3136684f9c">ISD::INSERT&#95;SUBVECTOR</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT,</Highlight></CodeLine>
<Link id="l03361" /><CodeLine lineNumber="3361"><Highlight kind="normal">                                               TLO.DAG.getUNDEF(VT), Sub,</Highlight></CodeLine>
<Link id="l03362" /><CodeLine lineNumber="3362"><Highlight kind="normal">                                               <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(2)));</Highlight></CodeLine>
<Link id="l03363" /><CodeLine lineNumber="3363"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03364" /><CodeLine lineNumber="3364"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Src, DemandedSrcElts, KnownUndef, KnownZero,</Highlight></CodeLine>
<Link id="l03365" /><CodeLine lineNumber="3365"><Highlight kind="normal">                                   TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03366" /><CodeLine lineNumber="3366"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03367" /><CodeLine lineNumber="3367"><Highlight kind="normal">    KnownUndef.<a href="/docs/api/classes/llvm/apint/#aabe301a4f18d38478700ad44ba2245bc">insertBits</a>(SubUndef, Idx);</Highlight></CodeLine>
<Link id="l03368" /><CodeLine lineNumber="3368"><Highlight kind="normal">    KnownZero.<a href="/docs/api/classes/llvm/apint/#aabe301a4f18d38478700ad44ba2245bc">insertBits</a>(SubZero, Idx);</Highlight></CodeLine>
<Link id="l03369" /><CodeLine lineNumber="3369"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03370" /><CodeLine lineNumber="3370"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03371" /><CodeLine lineNumber="3371"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedSrcElts.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() || !DemandedSubElts.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>()) &#123;</Highlight></CodeLine>
<Link id="l03372" /><CodeLine lineNumber="3372"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewSrc = SimplifyMultipleUseDemandedVectorElts(</Highlight></CodeLine>
<Link id="l03373" /><CodeLine lineNumber="3373"><Highlight kind="normal">          Src, DemandedSrcElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l03374" /><CodeLine lineNumber="3374"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewSub = SimplifyMultipleUseDemandedVectorElts(</Highlight></CodeLine>
<Link id="l03375" /><CodeLine lineNumber="3375"><Highlight kind="normal">          Sub, DemandedSubElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l03376" /><CodeLine lineNumber="3376"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NewSrc || NewSub) &#123;</Highlight></CodeLine>
<Link id="l03377" /><CodeLine lineNumber="3377"><Highlight kind="normal">        NewSrc = NewSrc ? NewSrc : <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>;</Highlight></CodeLine>
<Link id="l03378" /><CodeLine lineNumber="3378"><Highlight kind="normal">        NewSub = NewSub ? NewSub : Sub;</Highlight></CodeLine>
<Link id="l03379" /><CodeLine lineNumber="3379"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode(), SDLoc(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>), VT, NewSrc,</Highlight></CodeLine>
<Link id="l03380" /><CodeLine lineNumber="3380"><Highlight kind="normal">                                        NewSub, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(2));</Highlight></CodeLine>
<Link id="l03381" /><CodeLine lineNumber="3381"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l03382" /><CodeLine lineNumber="3382"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03383" /><CodeLine lineNumber="3383"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03384" /><CodeLine lineNumber="3384"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03385" /><CodeLine lineNumber="3385"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03386" /><CodeLine lineNumber="3386"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9070de8a5c5b71851732c4c54e2ffedf">ISD::EXTRACT&#95;SUBVECTOR</a>: &#123;</Highlight></CodeLine>
<Link id="l03387" /><CodeLine lineNumber="3387"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Offset the demanded elts by the subvector index.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03388" /><CodeLine lineNumber="3388"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l03389" /><CodeLine lineNumber="3389"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType().isScalableVector())</Highlight></CodeLine>
<Link id="l03390" /><CodeLine lineNumber="3390"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03391" /><CodeLine lineNumber="3391"><Highlight kind="normal">    uint64&#95;t Idx = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getConstantOperandVal(1);</Highlight></CodeLine>
<Link id="l03392" /><CodeLine lineNumber="3392"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSrcElts = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType().getVectorNumElements();</Highlight></CodeLine>
<Link id="l03393" /><CodeLine lineNumber="3393"><Highlight kind="normal">    APInt DemandedSrcElts = DemandedElts.<a href="/docs/api/classes/llvm/apint/#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(NumSrcElts).<a href="/docs/api/classes/llvm/apint/#acb9c55b6986369948507ca5241b4e411">shl</a>(Idx);</Highlight></CodeLine>
<Link id="l03394" /><CodeLine lineNumber="3394"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03395" /><CodeLine lineNumber="3395"><Highlight kind="normal">    APInt SrcUndef, SrcZero;</Highlight></CodeLine>
<Link id="l03396" /><CodeLine lineNumber="3396"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Src, DemandedSrcElts, SrcUndef, SrcZero, TLO,</Highlight></CodeLine>
<Link id="l03397" /><CodeLine lineNumber="3397"><Highlight kind="normal">                                   <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03398" /><CodeLine lineNumber="3398"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03399" /><CodeLine lineNumber="3399"><Highlight kind="normal">    KnownUndef = SrcUndef.<a href="/docs/api/classes/llvm/apint/#adf997f1047734d3b47b8d5a9b2163f11">extractBits</a>(NumElts, Idx);</Highlight></CodeLine>
<Link id="l03400" /><CodeLine lineNumber="3400"><Highlight kind="normal">    KnownZero = SrcZero.<a href="/docs/api/classes/llvm/apint/#adf997f1047734d3b47b8d5a9b2163f11">extractBits</a>(NumElts, Idx);</Highlight></CodeLine>
<Link id="l03401" /><CodeLine lineNumber="3401"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03402" /><CodeLine lineNumber="3402"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03403" /><CodeLine lineNumber="3403"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedElts.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>()) &#123;</Highlight></CodeLine>
<Link id="l03404" /><CodeLine lineNumber="3404"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewSrc = SimplifyMultipleUseDemandedVectorElts(</Highlight></CodeLine>
<Link id="l03405" /><CodeLine lineNumber="3405"><Highlight kind="normal">          Src, DemandedSrcElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1);</Highlight></CodeLine>
<Link id="l03406" /><CodeLine lineNumber="3406"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NewSrc) &#123;</Highlight></CodeLine>
<Link id="l03407" /><CodeLine lineNumber="3407"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = TLO.DAG.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode(), SDLoc(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>), VT, NewSrc,</Highlight></CodeLine>
<Link id="l03408" /><CodeLine lineNumber="3408"><Highlight kind="normal">                                        <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1));</Highlight></CodeLine>
<Link id="l03409" /><CodeLine lineNumber="3409"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NewOp);</Highlight></CodeLine>
<Link id="l03410" /><CodeLine lineNumber="3410"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03411" /><CodeLine lineNumber="3411"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03412" /><CodeLine lineNumber="3412"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03413" /><CodeLine lineNumber="3413"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03414" /><CodeLine lineNumber="3414"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad3bc7c2d379fbfdc2f8eaca038690ec9">ISD::INSERT&#95;VECTOR&#95;ELT</a>: &#123;</Highlight></CodeLine>
<Link id="l03415" /><CodeLine lineNumber="3415"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Vec = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l03416" /><CodeLine lineNumber="3416"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Scl = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l03417" /><CodeLine lineNumber="3417"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;CIdx = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(2));</Highlight></CodeLine>
<Link id="l03418" /><CodeLine lineNumber="3418"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03419" /><CodeLine lineNumber="3419"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// For a legal, constant insertion index, if we don&#39;t need this insertion</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03420" /><CodeLine lineNumber="3420"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// then strip it, else remove it from the demanded elts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03421" /><CodeLine lineNumber="3421"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CIdx &amp;&amp; CIdx-&gt;getAPIntValue().ult(NumElts)) &#123;</Highlight></CodeLine>
<Link id="l03422" /><CodeLine lineNumber="3422"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Idx = CIdx-&gt;getZExtValue();</Highlight></CodeLine>
<Link id="l03423" /><CodeLine lineNumber="3423"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedElts&#91;Idx&#93;)</Highlight></CodeLine>
<Link id="l03424" /><CodeLine lineNumber="3424"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Vec);</Highlight></CodeLine>
<Link id="l03425" /><CodeLine lineNumber="3425"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03426" /><CodeLine lineNumber="3426"><Highlight kind="normal">      APInt DemandedVecElts(DemandedElts);</Highlight></CodeLine>
<Link id="l03427" /><CodeLine lineNumber="3427"><Highlight kind="normal">      DemandedVecElts.clearBit(Idx);</Highlight></CodeLine>
<Link id="l03428" /><CodeLine lineNumber="3428"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Vec, DemandedVecElts, KnownUndef,</Highlight></CodeLine>
<Link id="l03429" /><CodeLine lineNumber="3429"><Highlight kind="normal">                                     KnownZero, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03430" /><CodeLine lineNumber="3430"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03431" /><CodeLine lineNumber="3431"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03432" /><CodeLine lineNumber="3432"><Highlight kind="normal">      KnownUndef.<a href="/docs/api/classes/llvm/apint/#af5f9dd7fb931d5c71749761348534109">setBitVal</a>(Idx, Scl.<a href="/docs/api/classes/llvm/sdvalue/#a1c861a21f795c3108ab690f3a45c881a">isUndef</a>());</Highlight></CodeLine>
<Link id="l03433" /><CodeLine lineNumber="3433"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03434" /><CodeLine lineNumber="3434"><Highlight kind="normal">      KnownZero.<a href="/docs/api/classes/llvm/apint/#af5f9dd7fb931d5c71749761348534109">setBitVal</a>(Idx, <a href="/docs/api/namespaces/llvm/#a1a86775f3d85d98a31b2751e1eb348ea">isNullConstant</a>(Scl) || <a href="/docs/api/namespaces/llvm/#acfd2e840c7c480f45753b81b504ff587">isNullFPConstant</a>(Scl));</Highlight></CodeLine>
<Link id="l03435" /><CodeLine lineNumber="3435"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03436" /><CodeLine lineNumber="3436"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03437" /><CodeLine lineNumber="3437"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03438" /><CodeLine lineNumber="3438"><Highlight kind="normal">    APInt VecUndef, VecZero;</Highlight></CodeLine>
<Link id="l03439" /><CodeLine lineNumber="3439"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Vec, DemandedElts, VecUndef, VecZero, TLO,</Highlight></CodeLine>
<Link id="l03440" /><CodeLine lineNumber="3440"><Highlight kind="normal">                                   <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03441" /><CodeLine lineNumber="3441"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03442" /><CodeLine lineNumber="3442"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Without knowing the insertion index we can&#39;t set KnownUndef/KnownZero.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03443" /><CodeLine lineNumber="3443"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03444" /><CodeLine lineNumber="3444"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03445" /><CodeLine lineNumber="3445"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0b7d2c769fd0fbaab3c4a2fc8e7ea0c">ISD::VSELECT</a>: &#123;</Highlight></CodeLine>
<Link id="l03446" /><CodeLine lineNumber="3446"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Sel = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l03447" /><CodeLine lineNumber="3447"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l03448" /><CodeLine lineNumber="3448"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(2);</Highlight></CodeLine>
<Link id="l03449" /><CodeLine lineNumber="3449"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03450" /><CodeLine lineNumber="3450"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Try to transform the select condition based on the current demanded</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03451" /><CodeLine lineNumber="3451"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// elements.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03452" /><CodeLine lineNumber="3452"><Highlight kind="normal">    APInt UndefSel, ZeroSel;</Highlight></CodeLine>
<Link id="l03453" /><CodeLine lineNumber="3453"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Sel, DemandedElts, UndefSel, ZeroSel, TLO,</Highlight></CodeLine>
<Link id="l03454" /><CodeLine lineNumber="3454"><Highlight kind="normal">                                   <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03455" /><CodeLine lineNumber="3455"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03456" /><CodeLine lineNumber="3456"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03457" /><CodeLine lineNumber="3457"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// See if we can simplify either vselect operand.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03458" /><CodeLine lineNumber="3458"><Highlight kind="normal">    APInt DemandedLHS(DemandedElts);</Highlight></CodeLine>
<Link id="l03459" /><CodeLine lineNumber="3459"><Highlight kind="normal">    APInt DemandedRHS(DemandedElts);</Highlight></CodeLine>
<Link id="l03460" /><CodeLine lineNumber="3460"><Highlight kind="normal">    APInt UndefLHS, ZeroLHS;</Highlight></CodeLine>
<Link id="l03461" /><CodeLine lineNumber="3461"><Highlight kind="normal">    APInt UndefRHS, ZeroRHS;</Highlight></CodeLine>
<Link id="l03462" /><CodeLine lineNumber="3462"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, DemandedLHS, UndefLHS, ZeroLHS, TLO,</Highlight></CodeLine>
<Link id="l03463" /><CodeLine lineNumber="3463"><Highlight kind="normal">                                   <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03464" /><CodeLine lineNumber="3464"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03465" /><CodeLine lineNumber="3465"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, DemandedRHS, UndefRHS, ZeroRHS, TLO,</Highlight></CodeLine>
<Link id="l03466" /><CodeLine lineNumber="3466"><Highlight kind="normal">                                   <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03467" /><CodeLine lineNumber="3467"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03468" /><CodeLine lineNumber="3468"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03469" /><CodeLine lineNumber="3469"><Highlight kind="normal">    KnownUndef = UndefLHS &amp; UndefRHS;</Highlight></CodeLine>
<Link id="l03470" /><CodeLine lineNumber="3470"><Highlight kind="normal">    KnownZero = ZeroLHS &amp; ZeroRHS;</Highlight></CodeLine>
<Link id="l03471" /><CodeLine lineNumber="3471"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03472" /><CodeLine lineNumber="3472"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we know that the selected element is always zero, we don&#39;t need the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03473" /><CodeLine lineNumber="3473"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// select value element.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03474" /><CodeLine lineNumber="3474"><Highlight kind="normal">    APInt DemandedSel = DemandedElts &amp; ~KnownZero;</Highlight></CodeLine>
<Link id="l03475" /><CodeLine lineNumber="3475"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedSel != DemandedElts)</Highlight></CodeLine>
<Link id="l03476" /><CodeLine lineNumber="3476"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Sel, DemandedSel, UndefSel, ZeroSel, TLO,</Highlight></CodeLine>
<Link id="l03477" /><CodeLine lineNumber="3477"><Highlight kind="normal">                                     <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03478" /><CodeLine lineNumber="3478"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03479" /><CodeLine lineNumber="3479"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03480" /><CodeLine lineNumber="3480"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03481" /><CodeLine lineNumber="3481"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03482" /><CodeLine lineNumber="3482"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8d8773b28111d8898663d4a0f6223d68">ISD::VECTOR&#95;SHUFFLE</a>: &#123;</Highlight></CodeLine>
<Link id="l03483" /><CodeLine lineNumber="3483"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l03484" /><CodeLine lineNumber="3484"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l03485" /><CodeLine lineNumber="3485"><Highlight kind="normal">    ArrayRef&lt;int&gt; ShuffleMask = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ShuffleVectorSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>)-&gt;getMask();</Highlight></CodeLine>
<Link id="l03486" /><CodeLine lineNumber="3486"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03487" /><CodeLine lineNumber="3487"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Collect demanded elements from shuffle operands..</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03488" /><CodeLine lineNumber="3488"><Highlight kind="normal">    APInt DemandedLHS(NumElts, 0);</Highlight></CodeLine>
<Link id="l03489" /><CodeLine lineNumber="3489"><Highlight kind="normal">    APInt DemandedRHS(NumElts, 0);</Highlight></CodeLine>
<Link id="l03490" /><CodeLine lineNumber="3490"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != NumElts; ++i) &#123;</Highlight></CodeLine>
<Link id="l03491" /><CodeLine lineNumber="3491"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a> = ShuffleMask&#91;i&#93;;</Highlight></CodeLine>
<Link id="l03492" /><CodeLine lineNumber="3492"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (M &lt; 0 || !DemandedElts&#91;i&#93;)</Highlight></CodeLine>
<Link id="l03493" /><CodeLine lineNumber="3493"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03494" /><CodeLine lineNumber="3494"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(0 &lt;= M &amp;&amp; M &lt; (</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal">)(2 &#42; NumElts) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Shuffle index out of range&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03495" /><CodeLine lineNumber="3495"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (M &lt; (</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal">)NumElts)</Highlight></CodeLine>
<Link id="l03496" /><CodeLine lineNumber="3496"><Highlight kind="normal">        DemandedLHS.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(M);</Highlight></CodeLine>
<Link id="l03497" /><CodeLine lineNumber="3497"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03498" /><CodeLine lineNumber="3498"><Highlight kind="normal">        DemandedRHS.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(M - NumElts);</Highlight></CodeLine>
<Link id="l03499" /><CodeLine lineNumber="3499"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03500" /><CodeLine lineNumber="3500"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03501" /><CodeLine lineNumber="3501"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// See if we can simplify either shuffle operand.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03502" /><CodeLine lineNumber="3502"><Highlight kind="normal">    APInt UndefLHS, ZeroLHS;</Highlight></CodeLine>
<Link id="l03503" /><CodeLine lineNumber="3503"><Highlight kind="normal">    APInt UndefRHS, ZeroRHS;</Highlight></CodeLine>
<Link id="l03504" /><CodeLine lineNumber="3504"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, DemandedLHS, UndefLHS, ZeroLHS, TLO,</Highlight></CodeLine>
<Link id="l03505" /><CodeLine lineNumber="3505"><Highlight kind="normal">                                   <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03506" /><CodeLine lineNumber="3506"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03507" /><CodeLine lineNumber="3507"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, DemandedRHS, UndefRHS, ZeroRHS, TLO,</Highlight></CodeLine>
<Link id="l03508" /><CodeLine lineNumber="3508"><Highlight kind="normal">                                   <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03509" /><CodeLine lineNumber="3509"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03510" /><CodeLine lineNumber="3510"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03511" /><CodeLine lineNumber="3511"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Simplify mask using undef elements from LHS/RHS.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03512" /><CodeLine lineNumber="3512"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Updated = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03513" /><CodeLine lineNumber="3513"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IdentityLHS = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, IdentityRHS = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03514" /><CodeLine lineNumber="3514"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;int, 32&gt;</a> NewMask(ShuffleMask);</Highlight></CodeLine>
<Link id="l03515" /><CodeLine lineNumber="3515"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != NumElts; ++i) &#123;</Highlight></CodeLine>
<Link id="l03516" /><CodeLine lineNumber="3516"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> &amp;<a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a> = NewMask&#91;i&#93;;</Highlight></CodeLine>
<Link id="l03517" /><CodeLine lineNumber="3517"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (M &lt; 0)</Highlight></CodeLine>
<Link id="l03518" /><CodeLine lineNumber="3518"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03519" /><CodeLine lineNumber="3519"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedElts&#91;i&#93; || (M &lt; (</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal">)NumElts &amp;&amp; UndefLHS&#91;M&#93;) ||</Highlight></CodeLine>
<Link id="l03520" /><CodeLine lineNumber="3520"><Highlight kind="normal">          (M &gt;= (</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal">)NumElts &amp;&amp; UndefRHS&#91;M - NumElts&#93;)) &#123;</Highlight></CodeLine>
<Link id="l03521" /><CodeLine lineNumber="3521"><Highlight kind="normal">        Updated = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03522" /><CodeLine lineNumber="3522"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a> = -1;</Highlight></CodeLine>
<Link id="l03523" /><CodeLine lineNumber="3523"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03524" /><CodeLine lineNumber="3524"><Highlight kind="normal">      IdentityLHS &amp;= (<a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a> &lt; 0) || (M == (</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal">)i);</Highlight></CodeLine>
<Link id="l03525" /><CodeLine lineNumber="3525"><Highlight kind="normal">      IdentityRHS &amp;= (<a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a> &lt; 0) || ((M - NumElts) == i);</Highlight></CodeLine>
<Link id="l03526" /><CodeLine lineNumber="3526"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03527" /><CodeLine lineNumber="3527"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03528" /><CodeLine lineNumber="3528"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Update legal shuffle masks based on demanded elements if it won&#39;t reduce</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03529" /><CodeLine lineNumber="3529"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// to Identity which can cause premature removal of the shuffle mask.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03530" /><CodeLine lineNumber="3530"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Updated &amp;&amp; !IdentityLHS &amp;&amp; !IdentityRHS &amp;&amp; !TLO.LegalOps) &#123;</Highlight></CodeLine>
<Link id="l03531" /><CodeLine lineNumber="3531"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LegalShuffle =</Highlight></CodeLine>
<Link id="l03532" /><CodeLine lineNumber="3532"><Highlight kind="normal">          buildLegalVectorShuffle(VT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, NewMask, TLO.DAG);</Highlight></CodeLine>
<Link id="l03533" /><CodeLine lineNumber="3533"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LegalShuffle)</Highlight></CodeLine>
<Link id="l03534" /><CodeLine lineNumber="3534"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, LegalShuffle);</Highlight></CodeLine>
<Link id="l03535" /><CodeLine lineNumber="3535"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03536" /><CodeLine lineNumber="3536"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03537" /><CodeLine lineNumber="3537"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Propagate undef/zero elements from LHS/RHS.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03538" /><CodeLine lineNumber="3538"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i != NumElts; ++i) &#123;</Highlight></CodeLine>
<Link id="l03539" /><CodeLine lineNumber="3539"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a> = ShuffleMask&#91;i&#93;;</Highlight></CodeLine>
<Link id="l03540" /><CodeLine lineNumber="3540"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (M &lt; 0) &#123;</Highlight></CodeLine>
<Link id="l03541" /><CodeLine lineNumber="3541"><Highlight kind="normal">        KnownUndef.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(i);</Highlight></CodeLine>
<Link id="l03542" /><CodeLine lineNumber="3542"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (M &lt; (</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal">)NumElts) &#123;</Highlight></CodeLine>
<Link id="l03543" /><CodeLine lineNumber="3543"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UndefLHS&#91;M&#93;)</Highlight></CodeLine>
<Link id="l03544" /><CodeLine lineNumber="3544"><Highlight kind="normal">          KnownUndef.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(i);</Highlight></CodeLine>
<Link id="l03545" /><CodeLine lineNumber="3545"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ZeroLHS&#91;M&#93;)</Highlight></CodeLine>
<Link id="l03546" /><CodeLine lineNumber="3546"><Highlight kind="normal">          KnownZero.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(i);</Highlight></CodeLine>
<Link id="l03547" /><CodeLine lineNumber="3547"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03548" /><CodeLine lineNumber="3548"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UndefRHS&#91;M - NumElts&#93;)</Highlight></CodeLine>
<Link id="l03549" /><CodeLine lineNumber="3549"><Highlight kind="normal">          KnownUndef.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(i);</Highlight></CodeLine>
<Link id="l03550" /><CodeLine lineNumber="3550"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ZeroRHS&#91;M - NumElts&#93;)</Highlight></CodeLine>
<Link id="l03551" /><CodeLine lineNumber="3551"><Highlight kind="normal">          KnownZero.<a href="/docs/api/classes/llvm/apint/#a33f9f862dca8ee0f23bff5941bf433d8">setBit</a>(i);</Highlight></CodeLine>
<Link id="l03552" /><CodeLine lineNumber="3552"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03553" /><CodeLine lineNumber="3553"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03554" /><CodeLine lineNumber="3554"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03555" /><CodeLine lineNumber="3555"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03556" /><CodeLine lineNumber="3556"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaa275bf149ab5df1067cfb721936ecbc">ISD::ANY&#95;EXTEND&#95;VECTOR&#95;INREG</a>:</Highlight></CodeLine>
<Link id="l03557" /><CodeLine lineNumber="3557"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3893859b5caa079593b9bf91b96e05fb">ISD::SIGN&#95;EXTEND&#95;VECTOR&#95;INREG</a>:</Highlight></CodeLine>
<Link id="l03558" /><CodeLine lineNumber="3558"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110adf7f4fc30c272a1987e075d7470df84c">ISD::ZERO&#95;EXTEND&#95;VECTOR&#95;INREG</a>: &#123;</Highlight></CodeLine>
<Link id="l03559" /><CodeLine lineNumber="3559"><Highlight kind="normal">    APInt SrcUndef, SrcZero;</Highlight></CodeLine>
<Link id="l03560" /><CodeLine lineNumber="3560"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l03561" /><CodeLine lineNumber="3561"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSrcElts = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType().getVectorNumElements();</Highlight></CodeLine>
<Link id="l03562" /><CodeLine lineNumber="3562"><Highlight kind="normal">    APInt DemandedSrcElts = DemandedElts.<a href="/docs/api/classes/llvm/apint/#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(NumSrcElts);</Highlight></CodeLine>
<Link id="l03563" /><CodeLine lineNumber="3563"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Src, DemandedSrcElts, SrcUndef, SrcZero, TLO,</Highlight></CodeLine>
<Link id="l03564" /><CodeLine lineNumber="3564"><Highlight kind="normal">                                   <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03565" /><CodeLine lineNumber="3565"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03566" /><CodeLine lineNumber="3566"><Highlight kind="normal">    KnownZero = SrcZero.<a href="/docs/api/classes/llvm/apint/#a2ed912a28808268e35bd58e8f11251aa">zextOrTrunc</a>(NumElts);</Highlight></CodeLine>
<Link id="l03567" /><CodeLine lineNumber="3567"><Highlight kind="normal">    KnownUndef = SrcUndef.<a href="/docs/api/classes/llvm/apint/#a2ed912a28808268e35bd58e8f11251aa">zextOrTrunc</a>(NumElts);</Highlight></CodeLine>
<Link id="l03568" /><CodeLine lineNumber="3568"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03569" /><CodeLine lineNumber="3569"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsLE &amp;&amp; <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaa275bf149ab5df1067cfb721936ecbc">ISD::ANY&#95;EXTEND&#95;VECTOR&#95;INREG</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l03570" /><CodeLine lineNumber="3570"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueSizeInBits() == <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueSizeInBits() &amp;&amp;</Highlight></CodeLine>
<Link id="l03571" /><CodeLine lineNumber="3571"><Highlight kind="normal">        DemandedSrcElts == 1) &#123;</Highlight></CodeLine>
<Link id="l03572" /><CodeLine lineNumber="3572"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// aext - if we just need the bottom element then we can bitcast.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03573" /><CodeLine lineNumber="3573"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getBitcast(VT, Src));</Highlight></CodeLine>
<Link id="l03574" /><CodeLine lineNumber="3574"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03575" /><CodeLine lineNumber="3575"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03576" /><CodeLine lineNumber="3576"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110adf7f4fc30c272a1987e075d7470df84c">ISD::ZERO&#95;EXTEND&#95;VECTOR&#95;INREG</a>) &#123;</Highlight></CodeLine>
<Link id="l03577" /><CodeLine lineNumber="3577"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// zext(undef) upper bits are guaranteed to be zero.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03578" /><CodeLine lineNumber="3578"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedElts.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(KnownUndef))</Highlight></CodeLine>
<Link id="l03579" /><CodeLine lineNumber="3579"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getConstant(0, SDLoc(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>), VT));</Highlight></CodeLine>
<Link id="l03580" /><CodeLine lineNumber="3580"><Highlight kind="normal">      KnownUndef.<a href="/docs/api/classes/llvm/apint/#a781bd5c20864a9c185018258af774ace">clearAllBits</a>();</Highlight></CodeLine>
<Link id="l03581" /><CodeLine lineNumber="3581"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03582" /><CodeLine lineNumber="3582"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// zext - if we just need the bottom element then we can mask:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03583" /><CodeLine lineNumber="3583"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// zext(and(x,c)) -&gt; and(x,c&#39;) iff the zext is the only user of the and.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03584" /><CodeLine lineNumber="3584"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsLE &amp;&amp; DemandedSrcElts == 1 &amp;&amp; <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l03585" /><CodeLine lineNumber="3585"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;isOnlyUserOf(<a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getNode()) &amp;&amp;</Highlight></CodeLine>
<Link id="l03586" /><CodeLine lineNumber="3586"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueSizeInBits() == <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueSizeInBits()) &#123;</Highlight></CodeLine>
<Link id="l03587" /><CodeLine lineNumber="3587"><Highlight kind="normal">        SDLoc <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l03588" /><CodeLine lineNumber="3588"><Highlight kind="normal">        EVT SrcVT = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType();</Highlight></CodeLine>
<Link id="l03589" /><CodeLine lineNumber="3589"><Highlight kind="normal">        EVT SrcSVT = SrcVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l03590" /><CodeLine lineNumber="3590"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDValue&gt;</a> MaskElts;</Highlight></CodeLine>
<Link id="l03591" /><CodeLine lineNumber="3591"><Highlight kind="normal">        MaskElts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(TLO.DAG.getAllOnesConstant(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SrcSVT));</Highlight></CodeLine>
<Link id="l03592" /><CodeLine lineNumber="3592"><Highlight kind="normal">        MaskElts.<a href="/docs/api/classes/llvm/smallvectorimpl/#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(NumSrcElts - 1, TLO.DAG.getConstant(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SrcSVT));</Highlight></CodeLine>
<Link id="l03593" /><CodeLine lineNumber="3593"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a> = TLO.DAG.getBuildVector(SrcVT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, MaskElts);</Highlight></CodeLine>
<Link id="l03594" /><CodeLine lineNumber="3594"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Fold = TLO.DAG.FoldConstantArithmetic(</Highlight></CodeLine>
<Link id="l03595" /><CodeLine lineNumber="3595"><Highlight kind="normal">                <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SrcVT, &#123;Src.getOperand(1), Mask&#125;)) &#123;</Highlight></CodeLine>
<Link id="l03596" /><CodeLine lineNumber="3596"><Highlight kind="normal">          Fold = TLO.DAG.getNode(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SrcVT, <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getOperand(0), Fold);</Highlight></CodeLine>
<Link id="l03597" /><CodeLine lineNumber="3597"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getBitcast(VT, Fold));</Highlight></CodeLine>
<Link id="l03598" /><CodeLine lineNumber="3598"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l03599" /><CodeLine lineNumber="3599"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03600" /><CodeLine lineNumber="3600"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03601" /><CodeLine lineNumber="3601"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03602" /><CodeLine lineNumber="3602"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03603" /><CodeLine lineNumber="3603"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03604" /><CodeLine lineNumber="3604"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: There are more binop opcodes that could be handled here - MIN,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03605" /><CodeLine lineNumber="3605"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// MAX, saturated math, etc.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03606" /><CodeLine lineNumber="3606"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>: &#123;</Highlight></CodeLine>
<Link id="l03607" /><CodeLine lineNumber="3607"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l03608" /><CodeLine lineNumber="3608"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l03609" /><CodeLine lineNumber="3609"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op0 == Op1 &amp;&amp; <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;isOnlyUserOf(Op0.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>())) &#123;</Highlight></CodeLine>
<Link id="l03610" /><CodeLine lineNumber="3610"><Highlight kind="normal">      APInt UndefLHS, ZeroLHS;</Highlight></CodeLine>
<Link id="l03611" /><CodeLine lineNumber="3611"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Op0, DemandedElts, UndefLHS, ZeroLHS, TLO,</Highlight></CodeLine>
<Link id="l03612" /><CodeLine lineNumber="3612"><Highlight kind="normal">                                     <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1, </Highlight><Highlight kind="comment">/&#42;AssumeSingleUse&#42;/</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">))</Highlight></CodeLine>
<Link id="l03613" /><CodeLine lineNumber="3613"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03614" /><CodeLine lineNumber="3614"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03615" /><CodeLine lineNumber="3615"><Highlight kind="normal">    &#91;&#91;fallthrough&#93;&#93;;</Highlight></CodeLine>
<Link id="l03616" /><CodeLine lineNumber="3616"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03617" /><CodeLine lineNumber="3617"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a55a4b1d94ca6176bcb5449196d67e798">ISD::AVGCEILS</a>:</Highlight></CodeLine>
<Link id="l03618" /><CodeLine lineNumber="3618"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8489c40b1b3f92b0c4fc98d06099c441">ISD::AVGCEILU</a>:</Highlight></CodeLine>
<Link id="l03619" /><CodeLine lineNumber="3619"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110acc5444f2e2933b551e3afbdd93a9bfc8">ISD::AVGFLOORS</a>:</Highlight></CodeLine>
<Link id="l03620" /><CodeLine lineNumber="3620"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5096628a43b16ff34ace64193ded1c93">ISD::AVGFLOORU</a>:</Highlight></CodeLine>
<Link id="l03621" /><CodeLine lineNumber="3621"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>:</Highlight></CodeLine>
<Link id="l03622" /><CodeLine lineNumber="3622"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>:</Highlight></CodeLine>
<Link id="l03623" /><CodeLine lineNumber="3623"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>:</Highlight></CodeLine>
<Link id="l03624" /><CodeLine lineNumber="3624"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a32ec12017722f5b42a295fe5eb0b0bdf">ISD::FADD</a>:</Highlight></CodeLine>
<Link id="l03625" /><CodeLine lineNumber="3625"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2852a5b6baa80b1589a46737210a8cad">ISD::FSUB</a>:</Highlight></CodeLine>
<Link id="l03626" /><CodeLine lineNumber="3626"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9ab5860c97a00c4627a08cab7b0c8178">ISD::FMUL</a>:</Highlight></CodeLine>
<Link id="l03627" /><CodeLine lineNumber="3627"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110abc6c09c7af98236460f0b020eb3be94e">ISD::FDIV</a>:</Highlight></CodeLine>
<Link id="l03628" /><CodeLine lineNumber="3628"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110abdd7bbb76dac7962dda6e116e33699da">ISD::FREM</a>: &#123;</Highlight></CodeLine>
<Link id="l03629" /><CodeLine lineNumber="3629"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l03630" /><CodeLine lineNumber="3630"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l03631" /><CodeLine lineNumber="3631"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03632" /><CodeLine lineNumber="3632"><Highlight kind="normal">    APInt UndefRHS, ZeroRHS;</Highlight></CodeLine>
<Link id="l03633" /><CodeLine lineNumber="3633"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Op1, DemandedElts, UndefRHS, ZeroRHS, TLO,</Highlight></CodeLine>
<Link id="l03634" /><CodeLine lineNumber="3634"><Highlight kind="normal">                                   <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03635" /><CodeLine lineNumber="3635"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03636" /><CodeLine lineNumber="3636"><Highlight kind="normal">    APInt UndefLHS, ZeroLHS;</Highlight></CodeLine>
<Link id="l03637" /><CodeLine lineNumber="3637"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Op0, DemandedElts, UndefLHS, ZeroLHS, TLO,</Highlight></CodeLine>
<Link id="l03638" /><CodeLine lineNumber="3638"><Highlight kind="normal">                                   <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03639" /><CodeLine lineNumber="3639"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03640" /><CodeLine lineNumber="3640"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03641" /><CodeLine lineNumber="3641"><Highlight kind="normal">    KnownZero = ZeroLHS &amp; ZeroRHS;</Highlight></CodeLine>
<Link id="l03642" /><CodeLine lineNumber="3642"><Highlight kind="normal">    KnownUndef = <a href="#a17fca146e0dc0228bae32fe5548ab48a">getKnownUndefForVectorBinop</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG, UndefLHS, UndefRHS);</Highlight></CodeLine>
<Link id="l03643" /><CodeLine lineNumber="3643"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03644" /><CodeLine lineNumber="3644"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03645" /><CodeLine lineNumber="3645"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO - use KnownUndef to relax the demandedelts?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03646" /><CodeLine lineNumber="3646"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedElts.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>())</Highlight></CodeLine>
<Link id="l03647" /><CodeLine lineNumber="3647"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorEltsBinOp(Op0, Op1))</Highlight></CodeLine>
<Link id="l03648" /><CodeLine lineNumber="3648"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03649" /><CodeLine lineNumber="3649"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03650" /><CodeLine lineNumber="3650"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03651" /><CodeLine lineNumber="3651"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>:</Highlight></CodeLine>
<Link id="l03652" /><CodeLine lineNumber="3652"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>:</Highlight></CodeLine>
<Link id="l03653" /><CodeLine lineNumber="3653"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>:</Highlight></CodeLine>
<Link id="l03654" /><CodeLine lineNumber="3654"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae8f8f81d8e8d7a557d67622c05786f1d">ISD::ROTL</a>:</Highlight></CodeLine>
<Link id="l03655" /><CodeLine lineNumber="3655"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a19cd524269b035941434cce28b585715">ISD::ROTR</a>: &#123;</Highlight></CodeLine>
<Link id="l03656" /><CodeLine lineNumber="3656"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l03657" /><CodeLine lineNumber="3657"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l03658" /><CodeLine lineNumber="3658"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03659" /><CodeLine lineNumber="3659"><Highlight kind="normal">    APInt UndefRHS, ZeroRHS;</Highlight></CodeLine>
<Link id="l03660" /><CodeLine lineNumber="3660"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Op1, DemandedElts, UndefRHS, ZeroRHS, TLO,</Highlight></CodeLine>
<Link id="l03661" /><CodeLine lineNumber="3661"><Highlight kind="normal">                                   <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03662" /><CodeLine lineNumber="3662"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03663" /><CodeLine lineNumber="3663"><Highlight kind="normal">    APInt UndefLHS, ZeroLHS;</Highlight></CodeLine>
<Link id="l03664" /><CodeLine lineNumber="3664"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Op0, DemandedElts, UndefLHS, ZeroLHS, TLO,</Highlight></CodeLine>
<Link id="l03665" /><CodeLine lineNumber="3665"><Highlight kind="normal">                                   <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03666" /><CodeLine lineNumber="3666"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03667" /><CodeLine lineNumber="3667"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03668" /><CodeLine lineNumber="3668"><Highlight kind="normal">    KnownZero = ZeroLHS;</Highlight></CodeLine>
<Link id="l03669" /><CodeLine lineNumber="3669"><Highlight kind="normal">    KnownUndef = UndefLHS &amp; UndefRHS; </Highlight><Highlight kind="comment">// TODO: use getKnownUndefForVectorBinop?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03670" /><CodeLine lineNumber="3670"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03671" /><CodeLine lineNumber="3671"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03672" /><CodeLine lineNumber="3672"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO - use KnownUndef to relax the demandedelts?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03673" /><CodeLine lineNumber="3673"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedElts.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>())</Highlight></CodeLine>
<Link id="l03674" /><CodeLine lineNumber="3674"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorEltsBinOp(Op0, Op1))</Highlight></CodeLine>
<Link id="l03675" /><CodeLine lineNumber="3675"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03676" /><CodeLine lineNumber="3676"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03677" /><CodeLine lineNumber="3677"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03678" /><CodeLine lineNumber="3678"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>:</Highlight></CodeLine>
<Link id="l03679" /><CodeLine lineNumber="3679"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8a80d3b085af08f0dce1724207ef99b5">ISD::MULHU</a>:</Highlight></CodeLine>
<Link id="l03680" /><CodeLine lineNumber="3680"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aa2a7c3eccf06b41e4275bbeadb46d22e">ISD::MULHS</a>:</Highlight></CodeLine>
<Link id="l03681" /><CodeLine lineNumber="3681"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>: &#123;</Highlight></CodeLine>
<Link id="l03682" /><CodeLine lineNumber="3682"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l03683" /><CodeLine lineNumber="3683"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l03684" /><CodeLine lineNumber="3684"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03685" /><CodeLine lineNumber="3685"><Highlight kind="normal">    APInt SrcUndef, SrcZero;</Highlight></CodeLine>
<Link id="l03686" /><CodeLine lineNumber="3686"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Op1, DemandedElts, SrcUndef, SrcZero, TLO,</Highlight></CodeLine>
<Link id="l03687" /><CodeLine lineNumber="3687"><Highlight kind="normal">                                   <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03688" /><CodeLine lineNumber="3688"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03689" /><CodeLine lineNumber="3689"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we know that a demanded element was zero in Op1 we don&#39;t need to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03690" /><CodeLine lineNumber="3690"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// demand it in Op0 - its guaranteed to be zero.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03691" /><CodeLine lineNumber="3691"><Highlight kind="normal">    APInt DemandedElts0 = DemandedElts &amp; ~SrcZero;</Highlight></CodeLine>
<Link id="l03692" /><CodeLine lineNumber="3692"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(Op0, DemandedElts0, KnownUndef, KnownZero,</Highlight></CodeLine>
<Link id="l03693" /><CodeLine lineNumber="3693"><Highlight kind="normal">                                   TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03694" /><CodeLine lineNumber="3694"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03695" /><CodeLine lineNumber="3695"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03696" /><CodeLine lineNumber="3696"><Highlight kind="normal">    KnownUndef &amp;= DemandedElts0;</Highlight></CodeLine>
<Link id="l03697" /><CodeLine lineNumber="3697"><Highlight kind="normal">    KnownZero &amp;= DemandedElts0;</Highlight></CodeLine>
<Link id="l03698" /><CodeLine lineNumber="3698"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03699" /><CodeLine lineNumber="3699"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If every element pair has a zero/undef then just fold to zero.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03700" /><CodeLine lineNumber="3700"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fold (and x, undef) -&gt; 0  /  (and x, 0) -&gt; 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03701" /><CodeLine lineNumber="3701"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fold (mul x, undef) -&gt; 0  /  (mul x, 0) -&gt; 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03702" /><CodeLine lineNumber="3702"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedElts.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(SrcZero | KnownZero | SrcUndef | KnownUndef))</Highlight></CodeLine>
<Link id="l03703" /><CodeLine lineNumber="3703"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getConstant(0, SDLoc(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>), VT));</Highlight></CodeLine>
<Link id="l03704" /><CodeLine lineNumber="3704"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03705" /><CodeLine lineNumber="3705"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If either side has a zero element, then the result element is zero, even</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03706" /><CodeLine lineNumber="3706"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// if the other is an UNDEF.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03707" /><CodeLine lineNumber="3707"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO: Extend getKnownUndefForVectorBinop to also deal with known zeros</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03708" /><CodeLine lineNumber="3708"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// and then handle &#39;and&#39; nodes with the rest of the binop opcodes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03709" /><CodeLine lineNumber="3709"><Highlight kind="normal">    KnownZero |= SrcZero;</Highlight></CodeLine>
<Link id="l03710" /><CodeLine lineNumber="3710"><Highlight kind="normal">    KnownUndef &amp;= SrcUndef;</Highlight></CodeLine>
<Link id="l03711" /><CodeLine lineNumber="3711"><Highlight kind="normal">    KnownUndef &amp;= ~KnownZero;</Highlight></CodeLine>
<Link id="l03712" /><CodeLine lineNumber="3712"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03713" /><CodeLine lineNumber="3713"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Attempt to avoid multi-use ops if we don&#39;t need anything from them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03714" /><CodeLine lineNumber="3714"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedElts.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>())</Highlight></CodeLine>
<Link id="l03715" /><CodeLine lineNumber="3715"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorEltsBinOp(Op0, Op1))</Highlight></CodeLine>
<Link id="l03716" /><CodeLine lineNumber="3716"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03717" /><CodeLine lineNumber="3717"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03718" /><CodeLine lineNumber="3718"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03719" /><CodeLine lineNumber="3719"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>:</Highlight></CodeLine>
<Link id="l03720" /><CodeLine lineNumber="3720"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5183f3d72924bc7c77ba8d3f5de9f602">ISD::SIGN&#95;EXTEND</a>:</Highlight></CodeLine>
<Link id="l03721" /><CodeLine lineNumber="3721"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>:</Highlight></CodeLine>
<Link id="l03722" /><CodeLine lineNumber="3722"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), DemandedElts, KnownUndef,</Highlight></CodeLine>
<Link id="l03723" /><CodeLine lineNumber="3723"><Highlight kind="normal">                                   KnownZero, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03724" /><CodeLine lineNumber="3724"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03725" /><CodeLine lineNumber="3725"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03726" /><CodeLine lineNumber="3726"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DemandedElts.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>())</Highlight></CodeLine>
<Link id="l03727" /><CodeLine lineNumber="3727"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewOp = SimplifyMultipleUseDemandedVectorElts(</Highlight></CodeLine>
<Link id="l03728" /><CodeLine lineNumber="3728"><Highlight kind="normal">              <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), DemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03729" /><CodeLine lineNumber="3729"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getNode(Opcode, SDLoc(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>), VT, NewOp));</Highlight></CodeLine>
<Link id="l03730" /><CodeLine lineNumber="3730"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03731" /><CodeLine lineNumber="3731"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>) &#123;</Highlight></CodeLine>
<Link id="l03732" /><CodeLine lineNumber="3732"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// zext(undef) upper bits are guaranteed to be zero.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03733" /><CodeLine lineNumber="3733"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedElts.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(KnownUndef))</Highlight></CodeLine>
<Link id="l03734" /><CodeLine lineNumber="3734"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getConstant(0, SDLoc(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>), VT));</Highlight></CodeLine>
<Link id="l03735" /><CodeLine lineNumber="3735"><Highlight kind="normal">      KnownUndef.<a href="/docs/api/classes/llvm/apint/#a781bd5c20864a9c185018258af774ace">clearAllBits</a>();</Highlight></CodeLine>
<Link id="l03736" /><CodeLine lineNumber="3736"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03737" /><CodeLine lineNumber="3737"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03738" /><CodeLine lineNumber="3738"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a315004656a75a3c3a9d7294f105a8da2">ISD::SINT&#95;TO&#95;FP</a>:</Highlight></CodeLine>
<Link id="l03739" /><CodeLine lineNumber="3739"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a169032eecd015d4eeb869c457202a6c8">ISD::UINT&#95;TO&#95;FP</a>:</Highlight></CodeLine>
<Link id="l03740" /><CodeLine lineNumber="3740"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac3f8f8d8437c64b2e2e9f978e2707210">ISD::FP&#95;TO&#95;SINT</a>:</Highlight></CodeLine>
<Link id="l03741" /><CodeLine lineNumber="3741"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a71640703ec096a8b07111e85cfff6987">ISD::FP&#95;TO&#95;UINT</a>:</Highlight></CodeLine>
<Link id="l03742" /><CodeLine lineNumber="3742"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorElts(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), DemandedElts, KnownUndef,</Highlight></CodeLine>
<Link id="l03743" /><CodeLine lineNumber="3743"><Highlight kind="normal">                                   KnownZero, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> + 1))</Highlight></CodeLine>
<Link id="l03744" /><CodeLine lineNumber="3744"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03745" /><CodeLine lineNumber="3745"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Don&#39;t fall through to generic undef -&gt; undef handling.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03746" /><CodeLine lineNumber="3746"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03747" /><CodeLine lineNumber="3747"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">: &#123;</Highlight></CodeLine>
<Link id="l03748" /><CodeLine lineNumber="3748"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() &gt;= <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a477ef80c70c7359199eace0e5d3133b1">ISD::BUILTIN&#95;OP&#95;END</a>) &#123;</Highlight></CodeLine>
<Link id="l03749" /><CodeLine lineNumber="3749"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedVectorEltsForTargetNode(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedElts, KnownUndef,</Highlight></CodeLine>
<Link id="l03750" /><CodeLine lineNumber="3750"><Highlight kind="normal">                                                  KnownZero, TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>))</Highlight></CodeLine>
<Link id="l03751" /><CodeLine lineNumber="3751"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03752" /><CodeLine lineNumber="3752"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03753" /><CodeLine lineNumber="3753"><Highlight kind="normal">      KnownBits Known;</Highlight></CodeLine>
<Link id="l03754" /><CodeLine lineNumber="3754"><Highlight kind="normal">      APInt DemandedBits = <a href="/docs/api/classes/llvm/apint/#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(EltSizeInBits);</Highlight></CodeLine>
<Link id="l03755" /><CodeLine lineNumber="3755"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SimplifyDemandedBits(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedBits, OriginalDemandedElts, Known,</Highlight></CodeLine>
<Link id="l03756" /><CodeLine lineNumber="3756"><Highlight kind="normal">                               TLO, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>, AssumeSingleUse))</Highlight></CodeLine>
<Link id="l03757" /><CodeLine lineNumber="3757"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03758" /><CodeLine lineNumber="3758"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03759" /><CodeLine lineNumber="3759"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03760" /><CodeLine lineNumber="3760"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03761" /><CodeLine lineNumber="3761"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03762" /><CodeLine lineNumber="3762"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((KnownUndef &amp; KnownZero) == 0 &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Elements flagged as undef AND zero&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03763" /><CodeLine lineNumber="3763"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03764" /><CodeLine lineNumber="3764"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Constant fold all undef cases.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03765" /><CodeLine lineNumber="3765"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: Handle zero cases as well.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03766" /><CodeLine lineNumber="3766"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DemandedElts.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(KnownUndef))</Highlight></CodeLine>
<Link id="l03767" /><CodeLine lineNumber="3767"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLO.CombineTo(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, TLO.DAG.getUNDEF(VT));</Highlight></CodeLine>
<Link id="l03768" /><CodeLine lineNumber="3768"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03769" /><CodeLine lineNumber="3769"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03770" /><CodeLine lineNumber="3770"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03771" /><CodeLine lineNumber="3771"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03772" /><CodeLine lineNumber="3772"><Highlight kind="comment">/// Determine which of the bits specified in Mask are known to be either zero or</Highlight></CodeLine>
<Link id="l03773" /><CodeLine lineNumber="3773"><Highlight kind="comment">/// one and return them in the Known.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03774" /><CodeLine lineNumber="3774"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a8c00d269d51235a7579e37163eeb3edc">TargetLowering::computeKnownBitsForTargetNode</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l03775" /><CodeLine lineNumber="3775"><Highlight kind="normal">                                                   KnownBits &amp;Known,</Highlight></CodeLine>
<Link id="l03776" /><CodeLine lineNumber="3776"><Highlight kind="normal">                                                   </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedElts,</Highlight></CodeLine>
<Link id="l03777" /><CodeLine lineNumber="3777"><Highlight kind="normal">                                                   </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l03778" /><CodeLine lineNumber="3778"><Highlight kind="normal">                                                   </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03779" /><CodeLine lineNumber="3779"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() &gt;= <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a477ef80c70c7359199eace0e5d3133b1">ISD::BUILTIN&#95;OP&#95;END</a> ||</Highlight></CodeLine>
<Link id="l03780" /><CodeLine lineNumber="3780"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac771b9cda3b889242d457cc4d9b2159c">ISD::INTRINSIC&#95;WO&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03781" /><CodeLine lineNumber="3781"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110afc09e0bddd693dcf9923e4df42473bd9">ISD::INTRINSIC&#95;W&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03782" /><CodeLine lineNumber="3782"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2df96794a99f5d3b4415c4a84e616140">ISD::INTRINSIC&#95;VOID</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l03783" /><CodeLine lineNumber="3783"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Should use MaskedValueIsZero if you don&#39;t know whether Op&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03784" /><CodeLine lineNumber="3784"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot; is a target node!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03785" /><CodeLine lineNumber="3785"><Highlight kind="normal">  Known.<a href="/docs/api/structs/llvm/knownbits/#a538f22b4ea2ff04a0b41403f26eaeb67">resetAll</a>();</Highlight></CodeLine>
<Link id="l03786" /><CodeLine lineNumber="3786"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03787" /><CodeLine lineNumber="3787"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03788" /><CodeLine lineNumber="3788"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#af7b6795985b3405f69339661de5d860c">TargetLowering::computeKnownBitsForTargetInstr</a>(</Highlight></CodeLine>
<Link id="l03789" /><CodeLine lineNumber="3789"><Highlight kind="normal">    GISelKnownBits &amp;<a href="/docs/api/files/lib/lib/analysis/blockfrequencyinfo-cpp/#a882e33145fd2a17174b47d3f964a6b2d">Analysis</a>, <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> R, KnownBits &amp;Known,</Highlight></CodeLine>
<Link id="l03790" /><CodeLine lineNumber="3790"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedElts, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> MachineRegisterInfo &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</Highlight></CodeLine>
<Link id="l03791" /><CodeLine lineNumber="3791"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03792" /><CodeLine lineNumber="3792"><Highlight kind="normal">  Known.<a href="/docs/api/structs/llvm/knownbits/#a538f22b4ea2ff04a0b41403f26eaeb67">resetAll</a>();</Highlight></CodeLine>
<Link id="l03793" /><CodeLine lineNumber="3793"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03794" /><CodeLine lineNumber="3794"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03795" /><CodeLine lineNumber="3795"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a89837a1ae285b93a15adff98bbb21efb">TargetLowering::computeKnownBitsForFrameIndex</a>(</Highlight></CodeLine>
<Link id="l03796" /><CodeLine lineNumber="3796"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> FrameIdx, KnownBits &amp;Known, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> MachineFunction &amp;MF)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03797" /><CodeLine lineNumber="3797"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// The low bits are known zero if the pointer is aligned.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03798" /><CodeLine lineNumber="3798"><Highlight kind="normal">  Known.<a href="/docs/api/structs/llvm/knownbits/#ac67bca6c764da76f5e152330d92ed916">Zero</a>.<a href="/docs/api/classes/llvm/apint/#ade8e20ecea1091e835395746448e262e">setLowBits</a>(<a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a>(MF.<a href="/docs/api/classes/llvm/machinefunction/#a54f334a9c8ca6d105eae383ae87e4524">getFrameInfo</a>().<a href="/docs/api/classes/llvm/machineframeinfo/#a8320a54de0a273478de910ac3795058b">getObjectAlign</a>(FrameIdx)));</Highlight></CodeLine>
<Link id="l03799" /><CodeLine lineNumber="3799"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03800" /><CodeLine lineNumber="3800"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03801" /><CodeLine lineNumber="3801"><Highlight kind="normal"><a href="/docs/api/namespaces/llvm/amdgpu/hsamd/kernel/arg/key/#a6b334a5f83504ebc99cc59f4f333ff98">Align</a> <a href="/docs/api/classes/llvm/targetlowering/#ae917d897ff4613b4cfdc9cd4dadade41">TargetLowering::computeKnownAlignForTargetInstr</a>(</Highlight></CodeLine>
<Link id="l03802" /><CodeLine lineNumber="3802"><Highlight kind="normal">  GISelKnownBits &amp;<a href="/docs/api/files/lib/lib/analysis/blockfrequencyinfo-cpp/#a882e33145fd2a17174b47d3f964a6b2d">Analysis</a>, <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> R, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> MachineRegisterInfo &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</Highlight></CodeLine>
<Link id="l03803" /><CodeLine lineNumber="3803"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03804" /><CodeLine lineNumber="3804"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/amdgpu/hsamd/kernel/arg/key/#a6b334a5f83504ebc99cc59f4f333ff98">Align</a>(1);</Highlight></CodeLine>
<Link id="l03805" /><CodeLine lineNumber="3805"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03806" /><CodeLine lineNumber="3806"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03807" /><CodeLine lineNumber="3807"><Highlight kind="comment">/// This method can be implemented by targets that want to expose additional</Highlight></CodeLine>
<Link id="l03808" /><CodeLine lineNumber="3808"><Highlight kind="comment">/// information about sign bits to the DAG Combiner.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03809" /><CodeLine lineNumber="3809"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a6e478aced9c847bcb02f8a94e498c2e7">TargetLowering::ComputeNumSignBitsForTargetNode</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l03810" /><CodeLine lineNumber="3810"><Highlight kind="normal">                                                         </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;,</Highlight></CodeLine>
<Link id="l03811" /><CodeLine lineNumber="3811"><Highlight kind="normal">                                                         </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SelectionDAG &amp;,</Highlight></CodeLine>
<Link id="l03812" /><CodeLine lineNumber="3812"><Highlight kind="normal">                                                         </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03813" /><CodeLine lineNumber="3813"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() &gt;= <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a477ef80c70c7359199eace0e5d3133b1">ISD::BUILTIN&#95;OP&#95;END</a> ||</Highlight></CodeLine>
<Link id="l03814" /><CodeLine lineNumber="3814"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac771b9cda3b889242d457cc4d9b2159c">ISD::INTRINSIC&#95;WO&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03815" /><CodeLine lineNumber="3815"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110afc09e0bddd693dcf9923e4df42473bd9">ISD::INTRINSIC&#95;W&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03816" /><CodeLine lineNumber="3816"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2df96794a99f5d3b4415c4a84e616140">ISD::INTRINSIC&#95;VOID</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l03817" /><CodeLine lineNumber="3817"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Should use ComputeNumSignBits if you don&#39;t know whether Op&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03818" /><CodeLine lineNumber="3818"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot; is a target node!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03819" /><CodeLine lineNumber="3819"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 1;</Highlight></CodeLine>
<Link id="l03820" /><CodeLine lineNumber="3820"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03821" /><CodeLine lineNumber="3821"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03822" /><CodeLine lineNumber="3822"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a9b359fbfa123fbf333095817e902cf0c">TargetLowering::computeNumSignBitsForTargetInstr</a>(</Highlight></CodeLine>
<Link id="l03823" /><CodeLine lineNumber="3823"><Highlight kind="normal">  GISelKnownBits &amp;<a href="/docs/api/files/lib/lib/analysis/blockfrequencyinfo-cpp/#a882e33145fd2a17174b47d3f964a6b2d">Analysis</a>, <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a> R, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedElts,</Highlight></CodeLine>
<Link id="l03824" /><CodeLine lineNumber="3824"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> MachineRegisterInfo &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03825" /><CodeLine lineNumber="3825"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 1;</Highlight></CodeLine>
<Link id="l03826" /><CodeLine lineNumber="3826"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03827" /><CodeLine lineNumber="3827"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03828" /><CodeLine lineNumber="3828"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#af44b4b9c14768bdaaafa69cd6d5c3d46">TargetLowering::SimplifyDemandedVectorEltsForTargetNode</a>(</Highlight></CodeLine>
<Link id="l03829" /><CodeLine lineNumber="3829"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedElts, APInt &amp;KnownUndef, APInt &amp;KnownZero,</Highlight></CodeLine>
<Link id="l03830" /><CodeLine lineNumber="3830"><Highlight kind="normal">    TargetLoweringOpt &amp;TLO, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03831" /><CodeLine lineNumber="3831"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() &gt;= <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a477ef80c70c7359199eace0e5d3133b1">ISD::BUILTIN&#95;OP&#95;END</a> ||</Highlight></CodeLine>
<Link id="l03832" /><CodeLine lineNumber="3832"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac771b9cda3b889242d457cc4d9b2159c">ISD::INTRINSIC&#95;WO&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03833" /><CodeLine lineNumber="3833"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110afc09e0bddd693dcf9923e4df42473bd9">ISD::INTRINSIC&#95;W&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03834" /><CodeLine lineNumber="3834"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2df96794a99f5d3b4415c4a84e616140">ISD::INTRINSIC&#95;VOID</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l03835" /><CodeLine lineNumber="3835"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Should use SimplifyDemandedVectorElts if you don&#39;t know whether Op&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03836" /><CodeLine lineNumber="3836"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot; is a target node!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03837" /><CodeLine lineNumber="3837"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03838" /><CodeLine lineNumber="3838"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03839" /><CodeLine lineNumber="3839"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03840" /><CodeLine lineNumber="3840"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a1bb3f6ea028996773613a5f135b4d083">TargetLowering::SimplifyDemandedBitsForTargetNode</a>(</Highlight></CodeLine>
<Link id="l03841" /><CodeLine lineNumber="3841"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedBits, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedElts,</Highlight></CodeLine>
<Link id="l03842" /><CodeLine lineNumber="3842"><Highlight kind="normal">    KnownBits &amp;Known, TargetLoweringOpt &amp;TLO, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03843" /><CodeLine lineNumber="3843"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() &gt;= <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a477ef80c70c7359199eace0e5d3133b1">ISD::BUILTIN&#95;OP&#95;END</a> ||</Highlight></CodeLine>
<Link id="l03844" /><CodeLine lineNumber="3844"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac771b9cda3b889242d457cc4d9b2159c">ISD::INTRINSIC&#95;WO&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03845" /><CodeLine lineNumber="3845"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110afc09e0bddd693dcf9923e4df42473bd9">ISD::INTRINSIC&#95;W&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03846" /><CodeLine lineNumber="3846"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2df96794a99f5d3b4415c4a84e616140">ISD::INTRINSIC&#95;VOID</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l03847" /><CodeLine lineNumber="3847"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Should use SimplifyDemandedBits if you don&#39;t know whether Op&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03848" /><CodeLine lineNumber="3848"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot; is a target node!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03849" /><CodeLine lineNumber="3849"><Highlight kind="normal">  computeKnownBitsForTargetNode(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Known, DemandedElts, TLO.DAG, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l03850" /><CodeLine lineNumber="3850"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03851" /><CodeLine lineNumber="3851"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03852" /><CodeLine lineNumber="3852"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03853" /><CodeLine lineNumber="3853"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a03f40e066df2407ab1e901ca999d717e">TargetLowering::SimplifyMultipleUseDemandedBitsForTargetNode</a>(</Highlight></CodeLine>
<Link id="l03854" /><CodeLine lineNumber="3854"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedBits, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedElts,</Highlight></CodeLine>
<Link id="l03855" /><CodeLine lineNumber="3855"><Highlight kind="normal">    SelectionDAG &amp;DAG, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03856" /><CodeLine lineNumber="3856"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</Highlight></CodeLine>
<Link id="l03857" /><CodeLine lineNumber="3857"><Highlight kind="normal">      (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() &gt;= <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a477ef80c70c7359199eace0e5d3133b1">ISD::BUILTIN&#95;OP&#95;END</a> ||</Highlight></CodeLine>
<Link id="l03858" /><CodeLine lineNumber="3858"><Highlight kind="normal">       <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac771b9cda3b889242d457cc4d9b2159c">ISD::INTRINSIC&#95;WO&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03859" /><CodeLine lineNumber="3859"><Highlight kind="normal">       <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110afc09e0bddd693dcf9923e4df42473bd9">ISD::INTRINSIC&#95;W&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03860" /><CodeLine lineNumber="3860"><Highlight kind="normal">       <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2df96794a99f5d3b4415c4a84e616140">ISD::INTRINSIC&#95;VOID</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l03861" /><CodeLine lineNumber="3861"><Highlight kind="normal">      </Highlight><Highlight kind="stringliteral">&quot;Should use SimplifyMultipleUseDemandedBits if you don&#39;t know whether Op&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03862" /><CodeLine lineNumber="3862"><Highlight kind="normal">      </Highlight><Highlight kind="stringliteral">&quot; is a target node!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03863" /><CodeLine lineNumber="3863"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l03864" /><CodeLine lineNumber="3864"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03865" /><CodeLine lineNumber="3865"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03866" /><CodeLine lineNumber="3866"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a></Highlight></CodeLine>
<Link id="l03867" /><CodeLine lineNumber="3867"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#a696ff12171c8e0cf9f749fe7365ab40d">TargetLowering::buildLegalVectorShuffle</a>(EVT VT, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N0,</Highlight></CodeLine>
<Link id="l03868" /><CodeLine lineNumber="3868"><Highlight kind="normal">                                        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N1, <a href="/docs/api/namespaces/llvm/#a99416758c13252bef45320a6ba6aa09c">MutableArrayRef&lt;int&gt;</a> Mask,</Highlight></CodeLine>
<Link id="l03869" /><CodeLine lineNumber="3869"><Highlight kind="normal">                                        SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03870" /><CodeLine lineNumber="3870"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> LegalMask = <a href="/docs/api/classes/llvm/targetloweringbase/#a0d6b509080e384efa570bbb54754bbd2">isShuffleMaskLegal</a>(Mask, VT);</Highlight></CodeLine>
<Link id="l03871" /><CodeLine lineNumber="3871"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!LegalMask) &#123;</Highlight></CodeLine>
<Link id="l03872" /><CodeLine lineNumber="3872"><Highlight kind="normal">    <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(N0, N1);</Highlight></CodeLine>
<Link id="l03873" /><CodeLine lineNumber="3873"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/shufflevectorsdnode/#adce8d98c6b50fa65b2a213f40873e919">ShuffleVectorSDNode::commuteMask</a>(Mask);</Highlight></CodeLine>
<Link id="l03874" /><CodeLine lineNumber="3874"><Highlight kind="normal">    LegalMask = <a href="/docs/api/classes/llvm/targetloweringbase/#a0d6b509080e384efa570bbb54754bbd2">isShuffleMaskLegal</a>(Mask, VT);</Highlight></CodeLine>
<Link id="l03875" /><CodeLine lineNumber="3875"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03876" /><CodeLine lineNumber="3876"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03877" /><CodeLine lineNumber="3877"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!LegalMask)</Highlight></CodeLine>
<Link id="l03878" /><CodeLine lineNumber="3878"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l03879" /><CodeLine lineNumber="3879"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03880" /><CodeLine lineNumber="3880"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#afa7e233051b9ed8ebc0191f42698cb14">getVectorShuffle</a>(VT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, N0, N1, Mask);</Highlight></CodeLine>
<Link id="l03881" /><CodeLine lineNumber="3881"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03882" /><CodeLine lineNumber="3882"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03883" /><CodeLine lineNumber="3883"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aac2f0a84dd2aa5ee4c3f1385e9565f5e">Constant</a> &#42;<a href="/docs/api/classes/llvm/targetlowering/#a18b2f46b93af4466b33909730c2b2e6b">TargetLowering::getTargetConstantFromLoad</a>(LoadSDNode&#42;)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03884" /><CodeLine lineNumber="3884"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03885" /><CodeLine lineNumber="3885"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03886" /><CodeLine lineNumber="3886"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03887" /><CodeLine lineNumber="3887"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#abb1ad8b21c9956ffb90121e24f8bc116">TargetLowering::isGuaranteedNotToBeUndefOrPoisonForTargetNode</a>(</Highlight></CodeLine>
<Link id="l03888" /><CodeLine lineNumber="3888"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedElts, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l03889" /><CodeLine lineNumber="3889"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/analysis/valuetracking-cpp/#a4346f62e0e1ee37b8c7877df168057f5aaa2fad9a8387f8d5f005f3e308ae676f">PoisonOnly</a>, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03890" /><CodeLine lineNumber="3890"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</Highlight></CodeLine>
<Link id="l03891" /><CodeLine lineNumber="3891"><Highlight kind="normal">      (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() &gt;= <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a477ef80c70c7359199eace0e5d3133b1">ISD::BUILTIN&#95;OP&#95;END</a> ||</Highlight></CodeLine>
<Link id="l03892" /><CodeLine lineNumber="3892"><Highlight kind="normal">       <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac771b9cda3b889242d457cc4d9b2159c">ISD::INTRINSIC&#95;WO&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03893" /><CodeLine lineNumber="3893"><Highlight kind="normal">       <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110afc09e0bddd693dcf9923e4df42473bd9">ISD::INTRINSIC&#95;W&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03894" /><CodeLine lineNumber="3894"><Highlight kind="normal">       <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2df96794a99f5d3b4415c4a84e616140">ISD::INTRINSIC&#95;VOID</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l03895" /><CodeLine lineNumber="3895"><Highlight kind="normal">      </Highlight><Highlight kind="stringliteral">&quot;Should use isGuaranteedNotToBeUndefOrPoison if you don&#39;t know whether Op&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03896" /><CodeLine lineNumber="3896"><Highlight kind="normal">      </Highlight><Highlight kind="stringliteral">&quot; is a target node!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03897" /><CodeLine lineNumber="3897"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03898" /><CodeLine lineNumber="3898"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If Op can&#39;t create undef/poison and none of its operands are undef/poison</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03899" /><CodeLine lineNumber="3899"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// then Op is never undef/poison.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03900" /><CodeLine lineNumber="3900"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> !canCreateUndefOrPoisonForTargetNode(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DemandedElts, DAG, <a href="/docs/api/files/lib/lib/analysis/valuetracking-cpp/#a4346f62e0e1ee37b8c7877df168057f5aaa2fad9a8387f8d5f005f3e308ae676f">PoisonOnly</a>,</Highlight></CodeLine>
<Link id="l03901" /><CodeLine lineNumber="3901"><Highlight kind="normal">                                              </Highlight><Highlight kind="comment">/&#42;ConsiderFlags&#42;/</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l03902" /><CodeLine lineNumber="3902"><Highlight kind="normal">         <a href="/docs/api/namespaces/llvm/#a0d10fe510ced2849a8074fe81e5d04ce">all&#95;of</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;ops(), &#91;&amp;&#93;(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> V) &#123;</Highlight></CodeLine>
<Link id="l03903" /><CodeLine lineNumber="3903"><Highlight kind="normal">           return DAG.isGuaranteedNotToBeUndefOrPoison(V, PoisonOnly,</Highlight></CodeLine>
<Link id="l03904" /><CodeLine lineNumber="3904"><Highlight kind="normal">                                                       Depth + 1);</Highlight></CodeLine>
<Link id="l03905" /><CodeLine lineNumber="3905"><Highlight kind="normal">         &#125;);</Highlight></CodeLine>
<Link id="l03906" /><CodeLine lineNumber="3906"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03907" /><CodeLine lineNumber="3907"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03908" /><CodeLine lineNumber="3908"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a690ecd418854c4f2bea36d278c8cb7a2">TargetLowering::canCreateUndefOrPoisonForTargetNode</a>(</Highlight></CodeLine>
<Link id="l03909" /><CodeLine lineNumber="3909"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedElts, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l03910" /><CodeLine lineNumber="3910"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/analysis/valuetracking-cpp/#a4346f62e0e1ee37b8c7877df168057f5aaa2fad9a8387f8d5f005f3e308ae676f">PoisonOnly</a>, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> ConsiderFlags, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03911" /><CodeLine lineNumber="3911"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() &gt;= <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a477ef80c70c7359199eace0e5d3133b1">ISD::BUILTIN&#95;OP&#95;END</a> ||</Highlight></CodeLine>
<Link id="l03912" /><CodeLine lineNumber="3912"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac771b9cda3b889242d457cc4d9b2159c">ISD::INTRINSIC&#95;WO&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03913" /><CodeLine lineNumber="3913"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110afc09e0bddd693dcf9923e4df42473bd9">ISD::INTRINSIC&#95;W&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03914" /><CodeLine lineNumber="3914"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2df96794a99f5d3b4415c4a84e616140">ISD::INTRINSIC&#95;VOID</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l03915" /><CodeLine lineNumber="3915"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Should use canCreateUndefOrPoison if you don&#39;t know whether Op&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03916" /><CodeLine lineNumber="3916"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot; is a target node!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03917" /><CodeLine lineNumber="3917"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Be conservative and return true.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03918" /><CodeLine lineNumber="3918"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03919" /><CodeLine lineNumber="3919"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03920" /><CodeLine lineNumber="3920"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03921" /><CodeLine lineNumber="3921"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a3a1d4426a85849e75f56ef9d3b13fecc">TargetLowering::isKnownNeverNaNForTargetNode</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l03922" /><CodeLine lineNumber="3922"><Highlight kind="normal">                                                  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l03923" /><CodeLine lineNumber="3923"><Highlight kind="normal">                                                  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> SNaN,</Highlight></CodeLine>
<Link id="l03924" /><CodeLine lineNumber="3924"><Highlight kind="normal">                                                  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03925" /><CodeLine lineNumber="3925"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() &gt;= <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a477ef80c70c7359199eace0e5d3133b1">ISD::BUILTIN&#95;OP&#95;END</a> ||</Highlight></CodeLine>
<Link id="l03926" /><CodeLine lineNumber="3926"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac771b9cda3b889242d457cc4d9b2159c">ISD::INTRINSIC&#95;WO&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03927" /><CodeLine lineNumber="3927"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110afc09e0bddd693dcf9923e4df42473bd9">ISD::INTRINSIC&#95;W&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03928" /><CodeLine lineNumber="3928"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2df96794a99f5d3b4415c4a84e616140">ISD::INTRINSIC&#95;VOID</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l03929" /><CodeLine lineNumber="3929"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Should use isKnownNeverNaN if you don&#39;t know whether Op&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03930" /><CodeLine lineNumber="3930"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot; is a target node!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03931" /><CodeLine lineNumber="3931"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03932" /><CodeLine lineNumber="3932"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03933" /><CodeLine lineNumber="3933"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03934" /><CodeLine lineNumber="3934"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#aa31fb5c8038b82f00b3a1d19144c0516">TargetLowering::isSplatValueForTargetNode</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l03935" /><CodeLine lineNumber="3935"><Highlight kind="normal">                                               </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;DemandedElts,</Highlight></CodeLine>
<Link id="l03936" /><CodeLine lineNumber="3936"><Highlight kind="normal">                                               APInt &amp;UndefElts,</Highlight></CodeLine>
<Link id="l03937" /><CodeLine lineNumber="3937"><Highlight kind="normal">                                               </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l03938" /><CodeLine lineNumber="3938"><Highlight kind="normal">                                               </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03939" /><CodeLine lineNumber="3939"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() &gt;= <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a477ef80c70c7359199eace0e5d3133b1">ISD::BUILTIN&#95;OP&#95;END</a> ||</Highlight></CodeLine>
<Link id="l03940" /><CodeLine lineNumber="3940"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac771b9cda3b889242d457cc4d9b2159c">ISD::INTRINSIC&#95;WO&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03941" /><CodeLine lineNumber="3941"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110afc09e0bddd693dcf9923e4df42473bd9">ISD::INTRINSIC&#95;W&#95;CHAIN</a> ||</Highlight></CodeLine>
<Link id="l03942" /><CodeLine lineNumber="3942"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2df96794a99f5d3b4415c4a84e616140">ISD::INTRINSIC&#95;VOID</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l03943" /><CodeLine lineNumber="3943"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Should use isSplatValue if you don&#39;t know whether Op&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03944" /><CodeLine lineNumber="3944"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot; is a target node!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03945" /><CodeLine lineNumber="3945"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03946" /><CodeLine lineNumber="3946"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03947" /><CodeLine lineNumber="3947"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03948" /><CodeLine lineNumber="3948"><Highlight kind="normal"></Highlight><Highlight kind="comment">// FIXME: Ideally, this would use ISD::isConstantSplatVector(), but that must</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03949" /><CodeLine lineNumber="3949"><Highlight kind="normal"></Highlight><Highlight kind="comment">// work with truncating build vectors and vectors with elements of less than</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03950" /><CodeLine lineNumber="3950"><Highlight kind="normal"></Highlight><Highlight kind="comment">// 8 bits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03951" /><CodeLine lineNumber="3951"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a49086baced6151325ba4b88ecdd5383f">TargetLowering::isConstTrueVal</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03952" /><CodeLine lineNumber="3952"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)</Highlight></CodeLine>
<Link id="l03953" /><CodeLine lineNumber="3953"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03954" /><CodeLine lineNumber="3954"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03955" /><CodeLine lineNumber="3955"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> EltWidth;</Highlight></CodeLine>
<Link id="l03956" /><CodeLine lineNumber="3956"><Highlight kind="normal">  APInt CVal;</Highlight></CodeLine>
<Link id="l03957" /><CodeLine lineNumber="3957"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ConstantSDNode &#42;CN = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, </Highlight><Highlight kind="comment">/&#42;AllowUndefs=&#42;/</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l03958" /><CodeLine lineNumber="3958"><Highlight kind="normal">                                               </Highlight><Highlight kind="comment">/&#42;AllowTruncation=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">)) &#123;</Highlight></CodeLine>
<Link id="l03959" /><CodeLine lineNumber="3959"><Highlight kind="normal">    CVal = CN-&gt;getAPIntValue();</Highlight></CodeLine>
<Link id="l03960" /><CodeLine lineNumber="3960"><Highlight kind="normal">    EltWidth = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>.getValueType().getScalarSizeInBits();</Highlight></CodeLine>
<Link id="l03961" /><CodeLine lineNumber="3961"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03962" /><CodeLine lineNumber="3962"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03963" /><CodeLine lineNumber="3963"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03964" /><CodeLine lineNumber="3964"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If this is a truncating splat, truncate the splat value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03965" /><CodeLine lineNumber="3965"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Otherwise, we may fail to match the expected values below.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03966" /><CodeLine lineNumber="3966"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (EltWidth &lt; CVal.<a href="/docs/api/classes/llvm/apint/#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>())</Highlight></CodeLine>
<Link id="l03967" /><CodeLine lineNumber="3967"><Highlight kind="normal">    CVal = CVal.<a href="/docs/api/classes/llvm/apint/#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(EltWidth);</Highlight></CodeLine>
<Link id="l03968" /><CodeLine lineNumber="3968"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03969" /><CodeLine lineNumber="3969"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>.getValueType())) &#123;</Highlight></CodeLine>
<Link id="l03970" /><CodeLine lineNumber="3970"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a145391af8fd5e5455ffa3170c2d701ce">UndefinedBooleanContent</a>:</Highlight></CodeLine>
<Link id="l03971" /><CodeLine lineNumber="3971"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> CVal&#91;0&#93;;</Highlight></CodeLine>
<Link id="l03972" /><CodeLine lineNumber="3972"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a0e2d72cfdcc49d2d189f440b3cc31dff">ZeroOrOneBooleanContent</a>:</Highlight></CodeLine>
<Link id="l03973" /><CodeLine lineNumber="3973"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> CVal.<a href="/docs/api/classes/llvm/apint/#aea5f26deda5ef97e02f6afc57c0c3920">isOne</a>();</Highlight></CodeLine>
<Link id="l03974" /><CodeLine lineNumber="3974"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a695a19c9c3ae14638be151add82755cb">ZeroOrNegativeOneBooleanContent</a>:</Highlight></CodeLine>
<Link id="l03975" /><CodeLine lineNumber="3975"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> CVal.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>();</Highlight></CodeLine>
<Link id="l03976" /><CodeLine lineNumber="3976"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03977" /><CodeLine lineNumber="3977"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03978" /><CodeLine lineNumber="3978"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;Invalid boolean contents&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03979" /><CodeLine lineNumber="3979"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03980" /><CodeLine lineNumber="3980"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03981" /><CodeLine lineNumber="3981"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a485c321d878ce722bb8d19a4b9d81657">TargetLowering::isConstFalseVal</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03982" /><CodeLine lineNumber="3982"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)</Highlight></CodeLine>
<Link id="l03983" /><CodeLine lineNumber="3983"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03984" /><CodeLine lineNumber="3984"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03985" /><CodeLine lineNumber="3985"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> ConstantSDNode &#42;CN = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l03986" /><CodeLine lineNumber="3986"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!CN) &#123;</Highlight></CodeLine>
<Link id="l03987" /><CodeLine lineNumber="3987"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> BuildVectorSDNode &#42;BV = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;BuildVectorSDNode&gt;</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l03988" /><CodeLine lineNumber="3988"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!BV)</Highlight></CodeLine>
<Link id="l03989" /><CodeLine lineNumber="3989"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03990" /><CodeLine lineNumber="3990"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03991" /><CodeLine lineNumber="3991"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Only interested in constant splats, we don&#39;t care about undef</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03992" /><CodeLine lineNumber="3992"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// elements in identifying boolean constants and getConstantSplatNode</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03993" /><CodeLine lineNumber="3993"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// returns NULL if all ops are undef;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03994" /><CodeLine lineNumber="3994"><Highlight kind="normal">    CN = BV-&gt;<a href="/docs/api/classes/llvm/buildvectorsdnode/#a72a594eb8072e3372e2e9935ecc21fda">getConstantSplatNode</a>();</Highlight></CodeLine>
<Link id="l03995" /><CodeLine lineNumber="3995"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!CN)</Highlight></CodeLine>
<Link id="l03996" /><CodeLine lineNumber="3996"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03997" /><CodeLine lineNumber="3997"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03998" /><CodeLine lineNumber="3998"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03999" /><CodeLine lineNumber="3999"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0)) == <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a145391af8fd5e5455ffa3170c2d701ce">UndefinedBooleanContent</a>)</Highlight></CodeLine>
<Link id="l04000" /><CodeLine lineNumber="4000"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> !CN-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#a74b17cf9d0ee8268a5b38bbb896a30ba">getAPIntValue</a>()&#91;0&#93;;</Highlight></CodeLine>
<Link id="l04001" /><CodeLine lineNumber="4001"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04002" /><CodeLine lineNumber="4002"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> CN-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#ae91378660e4c7198b4de645a1d207b91">isZero</a>();</Highlight></CodeLine>
<Link id="l04003" /><CodeLine lineNumber="4003"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04004" /><CodeLine lineNumber="4004"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04005" /><CodeLine lineNumber="4005"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a2dc906a01997a28f62fd05f6470d7dd7">TargetLowering::isExtendedTrueVal</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> ConstantSDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, EVT VT,</Highlight></CodeLine>
<Link id="l04006" /><CodeLine lineNumber="4006"><Highlight kind="normal">                                       </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> SExt)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04007" /><CodeLine lineNumber="4007"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT == MVT::i1)</Highlight></CodeLine>
<Link id="l04008" /><CodeLine lineNumber="4008"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;isOne();</Highlight></CodeLine>
<Link id="l04009" /><CodeLine lineNumber="4009"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04010" /><CodeLine lineNumber="4010"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755">TargetLowering::BooleanContent</a> Cnt = <a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(VT);</Highlight></CodeLine>
<Link id="l04011" /><CodeLine lineNumber="4011"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (Cnt) &#123;</Highlight></CodeLine>
<Link id="l04012" /><CodeLine lineNumber="4012"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a0e2d72cfdcc49d2d189f440b3cc31dff">TargetLowering::ZeroOrOneBooleanContent</a>:</Highlight></CodeLine>
<Link id="l04013" /><CodeLine lineNumber="4013"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// An extended value of 1 is always true, unless its original type is i1,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04014" /><CodeLine lineNumber="4014"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// in which case it will be sign extended to -1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04015" /><CodeLine lineNumber="4015"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;isOne() &amp;&amp; !SExt) || (<a href="/docs/api/namespaces/anonymous-riscvisellowering-cpp-/#a0fb45dddfe1615e320ac9ad137d634e7a6d82f5a74a3f08ddcbb81036603b1f7c">SExt</a> &amp;&amp; (<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0) != MVT::i1));</Highlight></CodeLine>
<Link id="l04016" /><CodeLine lineNumber="4016"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a145391af8fd5e5455ffa3170c2d701ce">TargetLowering::UndefinedBooleanContent</a>:</Highlight></CodeLine>
<Link id="l04017" /><CodeLine lineNumber="4017"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a695a19c9c3ae14638be151add82755cb">TargetLowering::ZeroOrNegativeOneBooleanContent</a>:</Highlight></CodeLine>
<Link id="l04018" /><CodeLine lineNumber="4018"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;isAllOnes() &amp;&amp; <a href="/docs/api/namespaces/anonymous-riscvisellowering-cpp-/#a0fb45dddfe1615e320ac9ad137d634e7a6d82f5a74a3f08ddcbb81036603b1f7c">SExt</a>;</Highlight></CodeLine>
<Link id="l04019" /><CodeLine lineNumber="4019"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04020" /><CodeLine lineNumber="4020"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;Unexpected enumeration.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04021" /><CodeLine lineNumber="4021"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04022" /><CodeLine lineNumber="4022"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04023" /><CodeLine lineNumber="4023"><Highlight kind="comment">/// This helper function of SimplifySetCC tries to optimize the comparison when</Highlight></CodeLine>
<Link id="l04024" /><CodeLine lineNumber="4024"><Highlight kind="comment">/// either operand of the SetCC node is a bitwise-and instruction.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04025" /><CodeLine lineNumber="4025"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TargetLowering::foldSetCCWithAnd(EVT VT, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N0, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N1,</Highlight></CodeLine>
<Link id="l04026" /><CodeLine lineNumber="4026"><Highlight kind="normal">                                         <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</Highlight></CodeLine>
<Link id="l04027" /><CodeLine lineNumber="4027"><Highlight kind="normal">                                         DAGCombinerInfo &amp;DCI)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04028" /><CodeLine lineNumber="4028"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N1.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a> &amp;&amp; N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>)</Highlight></CodeLine>
<Link id="l04029" /><CodeLine lineNumber="4029"><Highlight kind="normal">    <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(N0, N1);</Highlight></CodeLine>
<Link id="l04030" /><CodeLine lineNumber="4030"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04031" /><CodeLine lineNumber="4031"><Highlight kind="normal">  SelectionDAG &amp;DAG = DCI.DAG;</Highlight></CodeLine>
<Link id="l04032" /><CodeLine lineNumber="4032"><Highlight kind="normal">  EVT OpVT = N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l04033" /><CodeLine lineNumber="4033"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a> || !OpVT.<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>() ||</Highlight></CodeLine>
<Link id="l04034" /><CodeLine lineNumber="4034"><Highlight kind="normal">      (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> != <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> != <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>))</Highlight></CodeLine>
<Link id="l04035" /><CodeLine lineNumber="4035"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04036" /><CodeLine lineNumber="4036"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04037" /><CodeLine lineNumber="4037"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (X &amp; Y) != 0 --&gt; zextOrTrunc(X &amp; Y)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04038" /><CodeLine lineNumber="4038"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// iff everything but LSB is known zero:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04039" /><CodeLine lineNumber="4039"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a> &amp;&amp; <a href="/docs/api/namespaces/llvm/#a1a86775f3d85d98a31b2751e1eb348ea">isNullConstant</a>(N1) &amp;&amp;</Highlight></CodeLine>
<Link id="l04040" /><CodeLine lineNumber="4040"><Highlight kind="normal">      (<a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(OpVT) == <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a145391af8fd5e5455ffa3170c2d701ce">TargetLowering::UndefinedBooleanContent</a> ||</Highlight></CodeLine>
<Link id="l04041" /><CodeLine lineNumber="4041"><Highlight kind="normal">       <a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(OpVT) == <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a0e2d72cfdcc49d2d189f440b3cc31dff">TargetLowering::ZeroOrOneBooleanContent</a>)) &#123;</Highlight></CodeLine>
<Link id="l04042" /><CodeLine lineNumber="4042"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumEltBits = OpVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l04043" /><CodeLine lineNumber="4043"><Highlight kind="normal">    APInt UpperBits = <a href="/docs/api/classes/llvm/apint/#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(NumEltBits, NumEltBits - 1);</Highlight></CodeLine>
<Link id="l04044" /><CodeLine lineNumber="4044"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad5386f4196a9eab5701c451469f2e20e">MaskedValueIsZero</a>(N0, UpperBits))</Highlight></CodeLine>
<Link id="l04045" /><CodeLine lineNumber="4045"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#aa7e66d5a43444879fa5037f2cfaa4de5">getBoolExtOrTrunc</a>(N0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, OpVT);</Highlight></CodeLine>
<Link id="l04046" /><CodeLine lineNumber="4046"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04047" /><CodeLine lineNumber="4047"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04048" /><CodeLine lineNumber="4048"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Try to eliminate a power-of-2 mask constant by converting to a signbit</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04049" /><CodeLine lineNumber="4049"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// test in a narrow type that we can truncate to with no cost. Examples:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04050" /><CodeLine lineNumber="4050"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (i32 X &amp; 32768) == 0 --&gt; (trunc X to i16) &gt;= 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04051" /><CodeLine lineNumber="4051"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (i32 X &amp; 32768) != 0 --&gt; (trunc X to i16) &lt; 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04052" /><CodeLine lineNumber="4052"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: This conservatively checks for type legality on the source and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04053" /><CodeLine lineNumber="4053"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//       destination types. That may inhibit optimizations, but it also</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04054" /><CodeLine lineNumber="4054"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//       allows setcc-&gt;shift transforms that may be more beneficial.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04055" /><CodeLine lineNumber="4055"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;AndC = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1));</Highlight></CodeLine>
<Link id="l04056" /><CodeLine lineNumber="4056"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AndC &amp;&amp; <a href="/docs/api/namespaces/llvm/#a1a86775f3d85d98a31b2751e1eb348ea">isNullConstant</a>(N1) &amp;&amp; AndC-&gt;getAPIntValue().isPowerOf2() &amp;&amp;</Highlight></CodeLine>
<Link id="l04057" /><CodeLine lineNumber="4057"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(OpVT) &amp;&amp; N0.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>()) &#123;</Highlight></CodeLine>
<Link id="l04058" /><CodeLine lineNumber="4058"><Highlight kind="normal">    EVT NarrowVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(),</Highlight></CodeLine>
<Link id="l04059" /><CodeLine lineNumber="4059"><Highlight kind="normal">                                     AndC-&gt;getAPIntValue().getActiveBits());</Highlight></CodeLine>
<Link id="l04060" /><CodeLine lineNumber="4060"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a6f992bc4ca89f1b5f0b34f5b29978c31">isTruncateFree</a>(OpVT, NarrowVT) &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(NarrowVT)) &#123;</Highlight></CodeLine>
<Link id="l04061" /><CodeLine lineNumber="4061"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Trunc = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad0c6f059b29535f2c790d1c4f92b7a93">getZExtOrTrunc</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, NarrowVT);</Highlight></CodeLine>
<Link id="l04062" /><CodeLine lineNumber="4062"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, NarrowVT);</Highlight></CodeLine>
<Link id="l04063" /><CodeLine lineNumber="4063"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Trunc, Zero,</Highlight></CodeLine>
<Link id="l04064" /><CodeLine lineNumber="4064"><Highlight kind="normal">                          <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a7f47862de23f7210f88ccf98ae1efbe4">ISD::SETGE</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l04065" /><CodeLine lineNumber="4065"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04066" /><CodeLine lineNumber="4066"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04067" /><CodeLine lineNumber="4067"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04068" /><CodeLine lineNumber="4068"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Match these patterns in any of their permutations:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04069" /><CodeLine lineNumber="4069"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (X &amp; Y) == Y</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04070" /><CodeLine lineNumber="4070"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (X &amp; Y) != Y</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04071" /><CodeLine lineNumber="4071"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>;</Highlight></CodeLine>
<Link id="l04072" /><CodeLine lineNumber="4072"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0) == N1) &#123;</Highlight></CodeLine>
<Link id="l04073" /><CodeLine lineNumber="4073"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1);</Highlight></CodeLine>
<Link id="l04074" /><CodeLine lineNumber="4074"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l04075" /><CodeLine lineNumber="4075"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1) == N1) &#123;</Highlight></CodeLine>
<Link id="l04076" /><CodeLine lineNumber="4076"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l04077" /><CodeLine lineNumber="4077"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1);</Highlight></CodeLine>
<Link id="l04078" /><CodeLine lineNumber="4078"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04079" /><CodeLine lineNumber="4079"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04080" /><CodeLine lineNumber="4080"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04081" /><CodeLine lineNumber="4081"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04082" /><CodeLine lineNumber="4082"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: We should invert (X &amp; Y) eq/ne 0 -&gt; (X &amp; Y) ne/eq Y if</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04083" /><CodeLine lineNumber="4083"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// &#96;isXAndYEqZeroPreferableToXAndYEqY&#96; is false. This is a bit difficult as</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04084" /><CodeLine lineNumber="4084"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// its liable to create and infinite loop.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04085" /><CodeLine lineNumber="4085"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, OpVT);</Highlight></CodeLine>
<Link id="l04086" /><CodeLine lineNumber="4086"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (isXAndYEqZeroPreferableToXAndYEqY(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, OpVT) &amp;&amp;</Highlight></CodeLine>
<Link id="l04087" /><CodeLine lineNumber="4087"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a9c9e38be1df7a70627fec8fa8a2eb42b">isKnownToBeAPowerOfTwo</a>(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>)) &#123;</Highlight></CodeLine>
<Link id="l04088" /><CodeLine lineNumber="4088"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Simplify X &amp; Y == Y to X &amp; Y != 0 if Y has exactly one bit set.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04089" /><CodeLine lineNumber="4089"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Note that where Y is variable and is known to have at most one bit set</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04090" /><CodeLine lineNumber="4090"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// (for example, if it is Z &amp; 1) we cannot do this; the expressions are not</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04091" /><CodeLine lineNumber="4091"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// equivalent when Y == 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04092" /><CodeLine lineNumber="4092"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OpVT.<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>());</Highlight></CodeLine>
<Link id="l04093" /><CodeLine lineNumber="4093"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> = <a href="/docs/api/namespaces/llvm/isd/#a5fbc38db5c4f3ef878ab19245d3f381d">ISD::getSetCCInverse</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, OpVT);</Highlight></CodeLine>
<Link id="l04094" /><CodeLine lineNumber="4094"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DCI.isBeforeLegalizeOps() ||</Highlight></CodeLine>
<Link id="l04095" /><CodeLine lineNumber="4095"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, N0.<a href="/docs/api/classes/llvm/sdvalue/#acbcc973a299b6f8733774668210b5227">getSimpleValueType</a>()))</Highlight></CodeLine>
<Link id="l04096" /><CodeLine lineNumber="4096"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, N0, Zero, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04097" /><CodeLine lineNumber="4097"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>() &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#aad4749fd44e2f7c1b8908f6d5e8a9d1f">hasAndNotCompare</a>(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>)) &#123;</Highlight></CodeLine>
<Link id="l04098" /><CodeLine lineNumber="4098"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the target supports an &#39;and-not&#39; or &#39;and-complement&#39; logic operation,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04099" /><CodeLine lineNumber="4099"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// try to use that to make a comparison operation more efficient.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04100" /><CodeLine lineNumber="4100"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// But don&#39;t do this transform if the mask is a single bit because there are</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04101" /><CodeLine lineNumber="4101"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// more efficient ways to deal with that case (for example, &#39;bt&#39; on x86 or</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04102" /><CodeLine lineNumber="4102"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// &#39;rlwinm&#39; on PPC).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04103" /><CodeLine lineNumber="4103"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04104" /><CodeLine lineNumber="4104"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Bail out if the compare operand that we want to turn into a zero is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04105" /><CodeLine lineNumber="4105"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// already a zero (otherwise, infinite loop).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04106" /><CodeLine lineNumber="4106"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a1a86775f3d85d98a31b2751e1eb348ea">isNullConstant</a>(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>))</Highlight></CodeLine>
<Link id="l04107" /><CodeLine lineNumber="4107"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04108" /><CodeLine lineNumber="4108"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04109" /><CodeLine lineNumber="4109"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Transform this into: ~X &amp; Y == 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04110" /><CodeLine lineNumber="4110"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NotX = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(SDLoc(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>), <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, OpVT);</Highlight></CodeLine>
<Link id="l04111" /><CodeLine lineNumber="4111"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewAnd = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, SDLoc(N0), OpVT, NotX, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l04112" /><CodeLine lineNumber="4112"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, NewAnd, Zero, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04113" /><CodeLine lineNumber="4113"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04114" /><CodeLine lineNumber="4114"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04115" /><CodeLine lineNumber="4115"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04116" /><CodeLine lineNumber="4116"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04117" /><CodeLine lineNumber="4117"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04118" /><CodeLine lineNumber="4118"><Highlight kind="comment">/// There are multiple IR patterns that could be checking whether certain</Highlight></CodeLine>
<Link id="l04119" /><CodeLine lineNumber="4119"><Highlight kind="comment">/// truncation of a signed number would be lossy or not. The pattern which is</Highlight></CodeLine>
<Link id="l04120" /><CodeLine lineNumber="4120"><Highlight kind="comment">/// best at IR level, may not lower optimally. Thus, we want to unfold it.</Highlight></CodeLine>
<Link id="l04121" /><CodeLine lineNumber="4121"><Highlight kind="comment">/// We are looking for the following pattern: (KeptBits is a constant)</Highlight></CodeLine>
<Link id="l04122" /><CodeLine lineNumber="4122"><Highlight kind="comment">///   (add %x, (1 &lt;&lt; (KeptBits-1))) srccond (1 &lt;&lt; KeptBits)</Highlight></CodeLine>
<Link id="l04123" /><CodeLine lineNumber="4123"><Highlight kind="comment">/// KeptBits won&#39;t be bitwidth(x), that will be constant-folded to true/false.</Highlight></CodeLine>
<Link id="l04124" /><CodeLine lineNumber="4124"><Highlight kind="comment">/// KeptBits also can&#39;t be 1, that would have been folded to  %x dstcond 0</Highlight></CodeLine>
<Link id="l04125" /><CodeLine lineNumber="4125"><Highlight kind="comment">/// We will unfold it into the natural trunc+sext pattern:</Highlight></CodeLine>
<Link id="l04126" /><CodeLine lineNumber="4126"><Highlight kind="comment">///   ((%x &lt;&lt; C) a&gt;&gt; C) dstcond %x</Highlight></CodeLine>
<Link id="l04127" /><CodeLine lineNumber="4127"><Highlight kind="comment">/// Where  C = bitwidth(x) - KeptBits  and  C u&lt; bitwidth(x)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04128" /><CodeLine lineNumber="4128"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TargetLowering::optimizeSetCCOfSignedTruncationCheck(</Highlight></CodeLine>
<Link id="l04129" /><CodeLine lineNumber="4129"><Highlight kind="normal">    EVT SCCVT, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N0, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N1, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, DAGCombinerInfo &amp;DCI,</Highlight></CodeLine>
<Link id="l04130" /><CodeLine lineNumber="4130"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04131" /><CodeLine lineNumber="4131"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We must be comparing with a constant.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04132" /><CodeLine lineNumber="4132"><Highlight kind="normal">  ConstantSDNode &#42;C1;</Highlight></CodeLine>
<Link id="l04133" /><CodeLine lineNumber="4133"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!(C1 = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(N1)))</Highlight></CodeLine>
<Link id="l04134" /><CodeLine lineNumber="4134"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04135" /><CodeLine lineNumber="4135"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04136" /><CodeLine lineNumber="4136"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// N0 should be:  add %x, (1 &lt;&lt; (KeptBits-1))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04137" /><CodeLine lineNumber="4137"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a23f2f5947fc429aff1270651c6d019ea">getOpcode</a>() != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>)</Highlight></CodeLine>
<Link id="l04138" /><CodeLine lineNumber="4138"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04139" /><CodeLine lineNumber="4139"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04140" /><CodeLine lineNumber="4140"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// And we must be &#39;add&#39;ing a constant.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04141" /><CodeLine lineNumber="4141"><Highlight kind="normal">  ConstantSDNode &#42;C01;</Highlight></CodeLine>
<Link id="l04142" /><CodeLine lineNumber="4142"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!(C01 = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(1))))</Highlight></CodeLine>
<Link id="l04143" /><CodeLine lineNumber="4143"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04144" /><CodeLine lineNumber="4144"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04145" /><CodeLine lineNumber="4145"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l04146" /><CodeLine lineNumber="4146"><Highlight kind="normal">  EVT XVT = <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l04147" /><CodeLine lineNumber="4147"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04148" /><CodeLine lineNumber="4148"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Validate constants ...</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04149" /><CodeLine lineNumber="4149"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04150" /><CodeLine lineNumber="4150"><Highlight kind="normal">  APInt <a href="/docs/api/namespaces/anonymous-dxilopbuilder-cpp-/#a3fe8fcf1f03e5da864eb86be303a3216a0bfbc695c285082c59ed77069aafbfae">I1</a> = C1-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#a74b17cf9d0ee8268a5b38bbb896a30ba">getAPIntValue</a>();</Highlight></CodeLine>
<Link id="l04151" /><CodeLine lineNumber="4151"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04152" /><CodeLine lineNumber="4152"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> NewCond;</Highlight></CodeLine>
<Link id="l04153" /><CodeLine lineNumber="4153"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::CondCode::SETULT</a>) &#123;</Highlight></CodeLine>
<Link id="l04154" /><CodeLine lineNumber="4154"><Highlight kind="normal">    NewCond = <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::CondCode::SETEQ</a>;</Highlight></CodeLine>
<Link id="l04155" /><CodeLine lineNumber="4155"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::CondCode::SETULE</a>) &#123;</Highlight></CodeLine>
<Link id="l04156" /><CodeLine lineNumber="4156"><Highlight kind="normal">    NewCond = <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::CondCode::SETEQ</a>;</Highlight></CodeLine>
<Link id="l04157" /><CodeLine lineNumber="4157"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// But need to &#39;canonicalize&#39; the constant.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04158" /><CodeLine lineNumber="4158"><Highlight kind="normal">    <a href="/docs/api/namespaces/anonymous-dxilopbuilder-cpp-/#a3fe8fcf1f03e5da864eb86be303a3216a0bfbc695c285082c59ed77069aafbfae">I1</a> += 1;</Highlight></CodeLine>
<Link id="l04159" /><CodeLine lineNumber="4159"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::CondCode::SETUGT</a>) &#123;</Highlight></CodeLine>
<Link id="l04160" /><CodeLine lineNumber="4160"><Highlight kind="normal">    NewCond = <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::CondCode::SETNE</a>;</Highlight></CodeLine>
<Link id="l04161" /><CodeLine lineNumber="4161"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// But need to &#39;canonicalize&#39; the constant.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04162" /><CodeLine lineNumber="4162"><Highlight kind="normal">    <a href="/docs/api/namespaces/anonymous-dxilopbuilder-cpp-/#a3fe8fcf1f03e5da864eb86be303a3216a0bfbc695c285082c59ed77069aafbfae">I1</a> += 1;</Highlight></CodeLine>
<Link id="l04163" /><CodeLine lineNumber="4163"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">ISD::CondCode::SETUGE</a>) &#123;</Highlight></CodeLine>
<Link id="l04164" /><CodeLine lineNumber="4164"><Highlight kind="normal">    NewCond = <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::CondCode::SETNE</a>;</Highlight></CodeLine>
<Link id="l04165" /><CodeLine lineNumber="4165"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04166" /><CodeLine lineNumber="4166"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04167" /><CodeLine lineNumber="4167"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04168" /><CodeLine lineNumber="4168"><Highlight kind="normal">  APInt I01 = C01-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#a74b17cf9d0ee8268a5b38bbb896a30ba">getAPIntValue</a>();</Highlight></CodeLine>
<Link id="l04169" /><CodeLine lineNumber="4169"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04170" /><CodeLine lineNumber="4170"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> checkConstants = &#91;&amp;<a href="/docs/api/namespaces/anonymous-dxilopbuilder-cpp-/#a3fe8fcf1f03e5da864eb86be303a3216a0bfbc695c285082c59ed77069aafbfae">I1</a>, &amp;I01&#93;() -&gt; </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04171" /><CodeLine lineNumber="4171"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Both of them must be power-of-two, and the constant from setcc is bigger.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04172" /><CodeLine lineNumber="4172"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/anonymous-dxilopbuilder-cpp-/#a3fe8fcf1f03e5da864eb86be303a3216a0bfbc695c285082c59ed77069aafbfae">I1</a>.ugt(I01) &amp;&amp; <a href="/docs/api/namespaces/anonymous-dxilopbuilder-cpp-/#a3fe8fcf1f03e5da864eb86be303a3216a0bfbc695c285082c59ed77069aafbfae">I1</a>.isPowerOf2() &amp;&amp; I01.<a href="/docs/api/classes/llvm/apint/#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>();</Highlight></CodeLine>
<Link id="l04173" /><CodeLine lineNumber="4173"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l04174" /><CodeLine lineNumber="4174"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04175" /><CodeLine lineNumber="4175"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (checkConstants()) &#123;</Highlight></CodeLine>
<Link id="l04176" /><CodeLine lineNumber="4176"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Great, e.g. got  icmp ult i16 (add i16 %x, 128), 256</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04177" /><CodeLine lineNumber="4177"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04178" /><CodeLine lineNumber="4178"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// What if we invert constants? (and the target predicate)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04179" /><CodeLine lineNumber="4179"><Highlight kind="normal">    <a href="/docs/api/namespaces/anonymous-dxilopbuilder-cpp-/#a3fe8fcf1f03e5da864eb86be303a3216a0bfbc695c285082c59ed77069aafbfae">I1</a>.negate();</Highlight></CodeLine>
<Link id="l04180" /><CodeLine lineNumber="4180"><Highlight kind="normal">    I01.<a href="/docs/api/classes/llvm/apint/#a8376734f311508662dd7e737752e5953">negate</a>();</Highlight></CodeLine>
<Link id="l04181" /><CodeLine lineNumber="4181"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(XVT.<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>());</Highlight></CodeLine>
<Link id="l04182" /><CodeLine lineNumber="4182"><Highlight kind="normal">    NewCond = <a href="/docs/api/namespaces/llvm/isd/#a5fbc38db5c4f3ef878ab19245d3f381d">getSetCCInverse</a>(NewCond, XVT);</Highlight></CodeLine>
<Link id="l04183" /><CodeLine lineNumber="4183"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!checkConstants())</Highlight></CodeLine>
<Link id="l04184" /><CodeLine lineNumber="4184"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04185" /><CodeLine lineNumber="4185"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Great, e.g. got  icmp uge i16 (add i16 %x, -128), -256</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04186" /><CodeLine lineNumber="4186"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04187" /><CodeLine lineNumber="4187"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04188" /><CodeLine lineNumber="4188"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// They are power-of-two, so which bit is set?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04189" /><CodeLine lineNumber="4189"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> KeptBits = <a href="/docs/api/namespaces/anonymous-dxilopbuilder-cpp-/#a3fe8fcf1f03e5da864eb86be303a3216a0bfbc695c285082c59ed77069aafbfae">I1</a>.logBase2();</Highlight></CodeLine>
<Link id="l04190" /><CodeLine lineNumber="4190"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> KeptBitsMinusOne = I01.<a href="/docs/api/classes/llvm/apint/#aae3b959a0a2981340fd03c29f528f2f0">logBase2</a>();</Highlight></CodeLine>
<Link id="l04191" /><CodeLine lineNumber="4191"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04192" /><CodeLine lineNumber="4192"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Magic!</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04193" /><CodeLine lineNumber="4193"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (KeptBits != (KeptBitsMinusOne + 1))</Highlight></CodeLine>
<Link id="l04194" /><CodeLine lineNumber="4194"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04195" /><CodeLine lineNumber="4195"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(KeptBits &gt; 0 &amp;&amp; KeptBits &lt; XVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;unreachable&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04196" /><CodeLine lineNumber="4196"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04197" /><CodeLine lineNumber="4197"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We don&#39;t want to do this in every single case.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04198" /><CodeLine lineNumber="4198"><Highlight kind="normal">  SelectionDAG &amp;DAG = DCI.DAG;</Highlight></CodeLine>
<Link id="l04199" /><CodeLine lineNumber="4199"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#a583ad984c8f06e187574d2c0e6b137d5">shouldTransformSignedTruncationCheck</a>(XVT, KeptBits))</Highlight></CodeLine>
<Link id="l04200" /><CodeLine lineNumber="4200"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04201" /><CodeLine lineNumber="4201"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04202" /><CodeLine lineNumber="4202"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Unfold into:  sext&#95;inreg(%x) cond %x</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04203" /><CodeLine lineNumber="4203"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Where &#39;cond&#39; will be either &#39;eq&#39; or &#39;ne&#39;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04204" /><CodeLine lineNumber="4204"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SExtInReg = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(</Highlight></CodeLine>
<Link id="l04205" /><CodeLine lineNumber="4205"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaa59dd5ec37f21905436b354c0292d9e">ISD::SIGN&#95;EXTEND&#95;INREG</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, XVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>,</Highlight></CodeLine>
<Link id="l04206" /><CodeLine lineNumber="4206"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab8ba6b05ad4fa7517f2e23b26f84ae1b">getValueType</a>(<a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), KeptBits)));</Highlight></CodeLine>
<Link id="l04207" /><CodeLine lineNumber="4207"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SCCVT, SExtInReg, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, NewCond);</Highlight></CodeLine>
<Link id="l04208" /><CodeLine lineNumber="4208"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04209" /><CodeLine lineNumber="4209"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04210" /><CodeLine lineNumber="4210"><Highlight kind="normal"></Highlight><Highlight kind="comment">// (X &amp; (C l&gt;&gt;/&lt;&lt; Y)) ==/!= 0  --&gt;  ((X &lt;&lt;/l&gt;&gt; Y) &amp; C) ==/!= 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04211" /><CodeLine lineNumber="4211"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TargetLowering::optimizeSetCCByHoistingAndByConstFromLogicalShift(</Highlight></CodeLine>
<Link id="l04212" /><CodeLine lineNumber="4212"><Highlight kind="normal">    EVT SCCVT, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N0, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N1C, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>,</Highlight></CodeLine>
<Link id="l04213" /><CodeLine lineNumber="4213"><Highlight kind="normal">    DAGCombinerInfo &amp;DCI, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04214" /><CodeLine lineNumber="4214"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(N1C) &amp;&amp; <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(N1C)-&gt;<a href="/docs/api/files/lib/lib/analysis/lint-cpp/#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l04215" /><CodeLine lineNumber="4215"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Should be a comparison with 0.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04216" /><CodeLine lineNumber="4216"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l04217" /><CodeLine lineNumber="4217"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Valid only for &#91;in&#93;equality comparisons.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04218" /><CodeLine lineNumber="4218"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04219" /><CodeLine lineNumber="4219"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NewShiftOpcode;</Highlight></CodeLine>
<Link id="l04220" /><CodeLine lineNumber="4220"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>;</Highlight></CodeLine>
<Link id="l04221" /><CodeLine lineNumber="4221"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04222" /><CodeLine lineNumber="4222"><Highlight kind="normal">  SelectionDAG &amp;DAG = DCI.DAG;</Highlight></CodeLine>
<Link id="l04223" /><CodeLine lineNumber="4223"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04224" /><CodeLine lineNumber="4224"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Look for &#39;(C l&gt;&gt;/&lt;&lt; Y)&#39;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04225" /><CodeLine lineNumber="4225"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a313a633eb3049b90e931206183e1251ea6da89265a9a8b0b28eb4946bb2ec0c6d">Match</a> = &#91;&amp;NewShiftOpcode, &amp;<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, &amp;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, &amp;<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, &amp;DAG, </Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">&#93;(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>) &#123;</Highlight></CodeLine>
<Link id="l04226" /><CodeLine lineNumber="4226"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The shift should be one-use.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04227" /><CodeLine lineNumber="4227"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>.hasOneUse())</Highlight></CodeLine>
<Link id="l04228" /><CodeLine lineNumber="4228"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04229" /><CodeLine lineNumber="4229"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> OldShiftOpcode = <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>.getOpcode();</Highlight></CodeLine>
<Link id="l04230" /><CodeLine lineNumber="4230"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (OldShiftOpcode) &#123;</Highlight></CodeLine>
<Link id="l04231" /><CodeLine lineNumber="4231"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>:</Highlight></CodeLine>
<Link id="l04232" /><CodeLine lineNumber="4232"><Highlight kind="normal">      NewShiftOpcode = <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>;</Highlight></CodeLine>
<Link id="l04233" /><CodeLine lineNumber="4233"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04234" /><CodeLine lineNumber="4234"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>:</Highlight></CodeLine>
<Link id="l04235" /><CodeLine lineNumber="4235"><Highlight kind="normal">      NewShiftOpcode = <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>;</Highlight></CodeLine>
<Link id="l04236" /><CodeLine lineNumber="4236"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04237" /><CodeLine lineNumber="4237"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l04238" /><CodeLine lineNumber="4238"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">; </Highlight><Highlight kind="comment">// must be a logical shift.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04239" /><CodeLine lineNumber="4239"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04240" /><CodeLine lineNumber="4240"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We should be shifting a constant.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04241" /><CodeLine lineNumber="4241"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// FIXME: best to use isConstantOrConstantVector().</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04242" /><CodeLine lineNumber="4242"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l04243" /><CodeLine lineNumber="4243"><Highlight kind="normal">    ConstantSDNode &#42;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> =</Highlight></CodeLine>
<Link id="l04244" /><CodeLine lineNumber="4244"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, </Highlight><Highlight kind="comment">/&#42;AllowUndefs=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="comment">/&#42;AllowTruncation=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04245" /><CodeLine lineNumber="4245"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>)</Highlight></CodeLine>
<Link id="l04246" /><CodeLine lineNumber="4246"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04247" /><CodeLine lineNumber="4247"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l04248" /><CodeLine lineNumber="4248"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04249" /><CodeLine lineNumber="4249"><Highlight kind="normal">    ConstantSDNode &#42;<a href="/docs/api/namespaces/llvm/systemzisd/#a24fe7decb4ebdd8b4c7a774d65fcaa7ea9cac76531875c59c8d879507bc72e282">XC</a> =</Highlight></CodeLine>
<Link id="l04250" /><CodeLine lineNumber="4250"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, </Highlight><Highlight kind="comment">/&#42;AllowUndefs=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="comment">/&#42;AllowTruncation=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04251" /><CodeLine lineNumber="4251"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetloweringbase/#a9bd4abfb6bf968505c7417e2b2532236">shouldProduceAndByConstByHoistingConstFromShiftsLHSOfAnd</a>(</Highlight></CodeLine>
<Link id="l04252" /><CodeLine lineNumber="4252"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, XC, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, OldShiftOpcode, NewShiftOpcode, DAG);</Highlight></CodeLine>
<Link id="l04253" /><CodeLine lineNumber="4253"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l04254" /><CodeLine lineNumber="4254"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04255" /><CodeLine lineNumber="4255"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// LHS of comparison should be an one-use &#39;and&#39;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04256" /><CodeLine lineNumber="4256"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a> || !N0.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>())</Highlight></CodeLine>
<Link id="l04257" /><CodeLine lineNumber="4257"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04258" /><CodeLine lineNumber="4258"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04259" /><CodeLine lineNumber="4259"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l04260" /><CodeLine lineNumber="4260"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a> = N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1);</Highlight></CodeLine>
<Link id="l04261" /><CodeLine lineNumber="4261"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04262" /><CodeLine lineNumber="4262"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// &#39;and&#39; is commutative!</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04263" /><CodeLine lineNumber="4263"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#a313a633eb3049b90e931206183e1251ea6da89265a9a8b0b28eb4946bb2ec0c6d">Match</a>(Mask)) &#123;</Highlight></CodeLine>
<Link id="l04264" /><CodeLine lineNumber="4264"><Highlight kind="normal">    <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, Mask);</Highlight></CodeLine>
<Link id="l04265" /><CodeLine lineNumber="4265"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#a313a633eb3049b90e931206183e1251ea6da89265a9a8b0b28eb4946bb2ec0c6d">Match</a>(Mask))</Highlight></CodeLine>
<Link id="l04266" /><CodeLine lineNumber="4266"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04267" /><CodeLine lineNumber="4267"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04268" /><CodeLine lineNumber="4268"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04269" /><CodeLine lineNumber="4269"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>.getValueType();</Highlight></CodeLine>
<Link id="l04270" /><CodeLine lineNumber="4270"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04271" /><CodeLine lineNumber="4271"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Produce:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04272" /><CodeLine lineNumber="4272"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ((X &#39;OppositeShiftOpcode&#39; Y) &amp; C) Cond 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04273" /><CodeLine lineNumber="4273"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> T0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(NewShiftOpcode, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l04274" /><CodeLine lineNumber="4274"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/mips/mips16isellowering-cpp/#ac16509a75e3d3fc46b9df1726be486ec">T1</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, T0, <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</Highlight></CodeLine>
<Link id="l04275" /><CodeLine lineNumber="4275"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> T2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SCCVT, <a href="/docs/api/files/lib/lib/target/lib/target/mips/mips16isellowering-cpp/#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, N1C, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04276" /><CodeLine lineNumber="4276"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> T2;</Highlight></CodeLine>
<Link id="l04277" /><CodeLine lineNumber="4277"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04278" /><CodeLine lineNumber="4278"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04279" /><CodeLine lineNumber="4279"><Highlight kind="comment">/// Try to fold an equality comparison with a &#123;add/sub/xor&#125; binary operation as</Highlight></CodeLine>
<Link id="l04280" /><CodeLine lineNumber="4280"><Highlight kind="comment">/// the 1st operand (N0). Callers are expected to swap the N0/N1 parameters to</Highlight></CodeLine>
<Link id="l04281" /><CodeLine lineNumber="4281"><Highlight kind="comment">/// handle the commuted versions of these patterns.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04282" /><CodeLine lineNumber="4282"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TargetLowering::foldSetCCWithBinOp(EVT VT, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N0, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N1,</Highlight></CodeLine>
<Link id="l04283" /><CodeLine lineNumber="4283"><Highlight kind="normal">                                           <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</Highlight></CodeLine>
<Link id="l04284" /><CodeLine lineNumber="4284"><Highlight kind="normal">                                           DAGCombinerInfo &amp;DCI)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04285" /><CodeLine lineNumber="4285"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> BOpcode = N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>();</Highlight></CodeLine>
<Link id="l04286" /><CodeLine lineNumber="4286"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((BOpcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a> || BOpcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a> || BOpcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l04287" /><CodeLine lineNumber="4287"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Unexpected binop&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04288" /><CodeLine lineNumber="4288"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Unexpected condcode&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04289" /><CodeLine lineNumber="4289"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04290" /><CodeLine lineNumber="4290"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (X + Y) == X --&gt; Y == 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04291" /><CodeLine lineNumber="4291"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (X - Y) == X --&gt; Y == 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04292" /><CodeLine lineNumber="4292"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (X ^ Y) == X --&gt; Y == 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04293" /><CodeLine lineNumber="4293"><Highlight kind="normal">  SelectionDAG &amp;DAG = DCI.DAG;</Highlight></CodeLine>
<Link id="l04294" /><CodeLine lineNumber="4294"><Highlight kind="normal">  EVT OpVT = N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l04295" /><CodeLine lineNumber="4295"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l04296" /><CodeLine lineNumber="4296"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1);</Highlight></CodeLine>
<Link id="l04297" /><CodeLine lineNumber="4297"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> == N1)</Highlight></CodeLine>
<Link id="l04298" /><CodeLine lineNumber="4298"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, OpVT), <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04299" /><CodeLine lineNumber="4299"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04300" /><CodeLine lineNumber="4300"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> != N1)</Highlight></CodeLine>
<Link id="l04301" /><CodeLine lineNumber="4301"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04302" /><CodeLine lineNumber="4302"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04303" /><CodeLine lineNumber="4303"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (X + Y) == Y --&gt; X == 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04304" /><CodeLine lineNumber="4304"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (X ^ Y) == Y --&gt; X == 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04305" /><CodeLine lineNumber="4305"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (BOpcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a> || BOpcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>)</Highlight></CodeLine>
<Link id="l04306" /><CodeLine lineNumber="4306"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, OpVT), <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04307" /><CodeLine lineNumber="4307"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04308" /><CodeLine lineNumber="4308"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// The shift would not be valid if the operands are boolean (i1).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04309" /><CodeLine lineNumber="4309"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!N0.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>() || OpVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>() == 1)</Highlight></CodeLine>
<Link id="l04310" /><CodeLine lineNumber="4310"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04311" /><CodeLine lineNumber="4311"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04312" /><CodeLine lineNumber="4312"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (X - Y) == Y --&gt; X == Y &lt;&lt; 1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04313" /><CodeLine lineNumber="4313"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> One = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(1, OpVT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</Highlight></CodeLine>
<Link id="l04314" /><CodeLine lineNumber="4314"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> YShl1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, N1.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>(), <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, One);</Highlight></CodeLine>
<Link id="l04315" /><CodeLine lineNumber="4315"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DCI.isCalledByLegalizer())</Highlight></CodeLine>
<Link id="l04316" /><CodeLine lineNumber="4316"><Highlight kind="normal">    DCI.AddToWorklist(YShl1.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l04317" /><CodeLine lineNumber="4317"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, YShl1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04318" /><CodeLine lineNumber="4318"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04319" /><CodeLine lineNumber="4319"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04320" /><CodeLine lineNumber="4320" lineLink="#af16b5429cba93f00c53d5d4627725516"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="#af16b5429cba93f00c53d5d4627725516">simplifySetCCWithCTPOP</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &amp;TLI, <a href="/docs/api/structs/llvm/evt">EVT</a> VT,</Highlight></CodeLine>
<Link id="l04321" /><CodeLine lineNumber="4321"><Highlight kind="normal">                                      <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> N0, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/apint">APInt</a> &amp;C1,</Highlight></CodeLine>
<Link id="l04322" /><CodeLine lineNumber="4322"><Highlight kind="normal">                                      <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdloc">SDLoc</a> &amp;dl,</Highlight></CodeLine>
<Link id="l04323" /><CodeLine lineNumber="4323"><Highlight kind="normal">                                      <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp;DAG) &#123;</Highlight></CodeLine>
<Link id="l04324" /><CodeLine lineNumber="4324"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Look through truncs that don&#39;t change the value of a ctpop.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04325" /><CodeLine lineNumber="4325"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: Add vector support? Need to be careful with setcc result type below.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04326" /><CodeLine lineNumber="4326"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> CTPOP = N0;</Highlight></CodeLine>
<Link id="l04327" /><CodeLine lineNumber="4327"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a> &amp;&amp; N0.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>() &amp;&amp; !VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l04328" /><CodeLine lineNumber="4328"><Highlight kind="normal">      N0.<a href="/docs/api/classes/llvm/sdvalue/#abd46b9ca1d156bc7e3dd9150cc106a28">getScalarValueSizeInBits</a>() &gt; <a href="/docs/api/namespaces/llvm/#a646986783f35e0fef8988f0f28d2589f">Log2&#95;32</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#abd46b9ca1d156bc7e3dd9150cc106a28">getScalarValueSizeInBits</a>()))</Highlight></CodeLine>
<Link id="l04329" /><CodeLine lineNumber="4329"><Highlight kind="normal">    CTPOP = N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l04330" /><CodeLine lineNumber="4330"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04331" /><CodeLine lineNumber="4331"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CTPOP.getOpcode() != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a991d07d163bd4d9984cf1ef36e92c214">ISD::CTPOP</a> || !CTPOP.hasOneUse())</Highlight></CodeLine>
<Link id="l04332" /><CodeLine lineNumber="4332"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04333" /><CodeLine lineNumber="4333"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04334" /><CodeLine lineNumber="4334"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> CTVT = CTPOP.getValueType();</Highlight></CodeLine>
<Link id="l04335" /><CodeLine lineNumber="4335"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> CTOp = CTPOP.getOperand(0);</Highlight></CodeLine>
<Link id="l04336" /><CodeLine lineNumber="4336"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04337" /><CodeLine lineNumber="4337"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Expand a power-of-2-or-zero comparison based on ctpop:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04338" /><CodeLine lineNumber="4338"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (ctpop x) u&lt; 2 -&gt; (x &amp; x-1) == 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04339" /><CodeLine lineNumber="4339"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (ctpop x) u&gt; 1 -&gt; (x &amp; x-1) != 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04340" /><CodeLine lineNumber="4340"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a>) &#123;</Highlight></CodeLine>
<Link id="l04341" /><CodeLine lineNumber="4341"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Keep the CTPOP if it is a cheap vector op.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04342" /><CodeLine lineNumber="4342"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CTVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; TLI.<a href="/docs/api/classes/llvm/targetloweringbase/#a3171fa04f45c8df5c9769fb35eca910e">isCtpopFast</a>(CTVT))</Highlight></CodeLine>
<Link id="l04343" /><CodeLine lineNumber="4343"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04344" /><CodeLine lineNumber="4344"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04345" /><CodeLine lineNumber="4345"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> CostLimit = TLI.<a href="/docs/api/classes/llvm/targetloweringbase/#a9b569696b9b75b8382ea48c2d196ebf3">getCustomCtpopCost</a>(CTVT, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04346" /><CodeLine lineNumber="4346"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C1.<a href="/docs/api/classes/llvm/apint/#a46a7cbf3724080a5f4f4c7e7a4551e26">ugt</a>(CostLimit + (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>)))</Highlight></CodeLine>
<Link id="l04347" /><CodeLine lineNumber="4347"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04348" /><CodeLine lineNumber="4348"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C1 == 0 &amp;&amp; (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>))</Highlight></CodeLine>
<Link id="l04349" /><CodeLine lineNumber="4349"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(); </Highlight><Highlight kind="comment">// This is handled elsewhere.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04350" /><CodeLine lineNumber="4350"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04351" /><CodeLine lineNumber="4351"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a4a1f52f59d0b4cc188f43fbfdccf6c54">Passes</a> = C1.<a href="/docs/api/classes/llvm/apint/#ab01d8694a759a934e01f1c558c3ce862">getLimitedValue</a>() - (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>);</Highlight></CodeLine>
<Link id="l04352" /><CodeLine lineNumber="4352"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04353" /><CodeLine lineNumber="4353"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> NegOne = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1b134112bb3b8986d8082832a16eab6f">getAllOnesConstant</a>(dl, CTVT);</Highlight></CodeLine>
<Link id="l04354" /><CodeLine lineNumber="4354"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Result = CTOp;</Highlight></CodeLine>
<Link id="l04355" /><CodeLine lineNumber="4355"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i &lt; <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a4a1f52f59d0b4cc188f43fbfdccf6c54">Passes</a>; i++) &#123;</Highlight></CodeLine>
<Link id="l04356" /><CodeLine lineNumber="4356"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, CTVT, Result, NegOne);</Highlight></CodeLine>
<Link id="l04357" /><CodeLine lineNumber="4357"><Highlight kind="normal">      Result = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, CTVT, Result, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a>);</Highlight></CodeLine>
<Link id="l04358" /><CodeLine lineNumber="4358"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04359" /><CodeLine lineNumber="4359"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> = <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a> ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>;</Highlight></CodeLine>
<Link id="l04360" /><CodeLine lineNumber="4360"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, Result, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, CTVT), <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>);</Highlight></CodeLine>
<Link id="l04361" /><CodeLine lineNumber="4361"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04362" /><CodeLine lineNumber="4362"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04363" /><CodeLine lineNumber="4363"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Expand a power-of-2 comparison based on ctpop</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04364" /><CodeLine lineNumber="4364"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>) &amp;&amp; C1 == 1) &#123;</Highlight></CodeLine>
<Link id="l04365" /><CodeLine lineNumber="4365"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Keep the CTPOP if it is cheap.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04366" /><CodeLine lineNumber="4366"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TLI.<a href="/docs/api/classes/llvm/targetloweringbase/#a3171fa04f45c8df5c9769fb35eca910e">isCtpopFast</a>(CTVT))</Highlight></CodeLine>
<Link id="l04367" /><CodeLine lineNumber="4367"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04368" /><CodeLine lineNumber="4368"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04369" /><CodeLine lineNumber="4369"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Zero = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, CTVT);</Highlight></CodeLine>
<Link id="l04370" /><CodeLine lineNumber="4370"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> NegOne = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1b134112bb3b8986d8082832a16eab6f">getAllOnesConstant</a>(dl, CTVT);</Highlight></CodeLine>
<Link id="l04371" /><CodeLine lineNumber="4371"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CTVT.<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>());</Highlight></CodeLine>
<Link id="l04372" /><CodeLine lineNumber="4372"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, CTVT, CTOp, NegOne);</Highlight></CodeLine>
<Link id="l04373" /><CodeLine lineNumber="4373"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04374" /><CodeLine lineNumber="4374"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Its not uncommon for known-never-zero X to exist in (ctpop X) eq/ne 1, so</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04375" /><CodeLine lineNumber="4375"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// check before emitting a potentially unnecessary op.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04376" /><CodeLine lineNumber="4376"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DAG.<a href="/docs/api/classes/llvm/selectiondag/#aa4457fd8fd3e2fda5876b5b359775295">isKnownNeverZero</a>(CTOp)) &#123;</Highlight></CodeLine>
<Link id="l04377" /><CodeLine lineNumber="4377"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// (ctpop x) == 1 --&gt; (x &amp; x-1) == 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04378" /><CodeLine lineNumber="4378"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// (ctpop x) != 1 --&gt; (x &amp; x-1) != 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04379" /><CodeLine lineNumber="4379"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, CTVT, CTOp, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a>);</Highlight></CodeLine>
<Link id="l04380" /><CodeLine lineNumber="4380"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, Zero, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04381" /><CodeLine lineNumber="4381"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</Highlight></CodeLine>
<Link id="l04382" /><CodeLine lineNumber="4382"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04383" /><CodeLine lineNumber="4383"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04384" /><CodeLine lineNumber="4384"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// (ctpop x) == 1 --&gt; (x ^ x-1) &gt;  x-1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04385" /><CodeLine lineNumber="4385"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// (ctpop x) != 1 --&gt; (x ^ x-1) &lt;= x-1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04386" /><CodeLine lineNumber="4386"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, CTVT, CTOp, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a>);</Highlight></CodeLine>
<Link id="l04387" /><CodeLine lineNumber="4387"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> CmpCond = <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a>;</Highlight></CodeLine>
<Link id="l04388" /><CodeLine lineNumber="4388"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a>, CmpCond);</Highlight></CodeLine>
<Link id="l04389" /><CodeLine lineNumber="4389"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04390" /><CodeLine lineNumber="4390"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04391" /><CodeLine lineNumber="4391"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04392" /><CodeLine lineNumber="4392"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04393" /><CodeLine lineNumber="4393"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04394" /><CodeLine lineNumber="4394" lineLink="#ad061307c0dae639c75d944338bd7b15d"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="#ad061307c0dae639c75d944338bd7b15d">foldSetCCWithRotate</a>(<a href="/docs/api/structs/llvm/evt">EVT</a> VT, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> N0, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> N1,</Highlight></CodeLine>
<Link id="l04395" /><CodeLine lineNumber="4395"><Highlight kind="normal">                                   <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdloc">SDLoc</a> &amp;dl,</Highlight></CodeLine>
<Link id="l04396" /><CodeLine lineNumber="4396"><Highlight kind="normal">                                   <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp;DAG) &#123;</Highlight></CodeLine>
<Link id="l04397" /><CodeLine lineNumber="4397"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> != <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> != <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>)</Highlight></CodeLine>
<Link id="l04398" /><CodeLine lineNumber="4398"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04399" /><CodeLine lineNumber="4399"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04400" /><CodeLine lineNumber="4400"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;C1 = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(N1, </Highlight><Highlight kind="comment">/&#42; AllowUndefs &#42;/</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04401" /><CodeLine lineNumber="4401"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!C1 || !(C1-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#ae91378660e4c7198b4de645a1d207b91">isZero</a>() || C1-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#aec7d03d2922c3164d2f9f59466fcf4fe">isAllOnes</a>()))</Highlight></CodeLine>
<Link id="l04402" /><CodeLine lineNumber="4402"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04403" /><CodeLine lineNumber="4403"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04404" /><CodeLine lineNumber="4404"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> getRotateSource = &#91;&#93;(<a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>) &#123;</Highlight></CodeLine>
<Link id="l04405" /><CodeLine lineNumber="4405"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae8f8f81d8e8d7a557d67622c05786f1d">ISD::ROTL</a> || <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a19cd524269b035941434cce28b585715">ISD::ROTR</a>)</Highlight></CodeLine>
<Link id="l04406" /><CodeLine lineNumber="4406"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l04407" /><CodeLine lineNumber="4407"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04408" /><CodeLine lineNumber="4408"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l04409" /><CodeLine lineNumber="4409"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04410" /><CodeLine lineNumber="4410"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Peek through a rotated value compared against 0 or -1:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04411" /><CodeLine lineNumber="4411"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (rot X, Y) == 0/-1 --&gt; X == 0/-1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04412" /><CodeLine lineNumber="4412"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (rot X, Y) != 0/-1 --&gt; X != 0/-1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04413" /><CodeLine lineNumber="4413"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sdvalue">SDValue</a> R = getRotateSource(N0))</Highlight></CodeLine>
<Link id="l04414" /><CodeLine lineNumber="4414"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, R, N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04415" /><CodeLine lineNumber="4415"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04416" /><CodeLine lineNumber="4416"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Peek through an &#39;or&#39; of a rotated value compared against 0:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04417" /><CodeLine lineNumber="4417"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// or (rot X, Y), Z ==/!= 0 --&gt; (or X, Z) ==/!= 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04418" /><CodeLine lineNumber="4418"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// or Z, (rot X, Y) ==/!= 0 --&gt; (or X, Z) ==/!= 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04419" /><CodeLine lineNumber="4419"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04420" /><CodeLine lineNumber="4420"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: Add the &#39;and&#39; with -1 sibling.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04421" /><CodeLine lineNumber="4421"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: Recurse through a series of &#39;or&#39; ops to find the rotate.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04422" /><CodeLine lineNumber="4422"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> OpVT = N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l04423" /><CodeLine lineNumber="4423"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>() &amp;&amp; N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a> &amp;&amp; C1-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#ae91378660e4c7198b4de645a1d207b91">isZero</a>()) &#123;</Highlight></CodeLine>
<Link id="l04424" /><CodeLine lineNumber="4424"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sdvalue">SDValue</a> R = getRotateSource(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0))) &#123;</Highlight></CodeLine>
<Link id="l04425" /><CodeLine lineNumber="4425"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> NewOr = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, OpVT, R, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1));</Highlight></CodeLine>
<Link id="l04426" /><CodeLine lineNumber="4426"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, NewOr, N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04427" /><CodeLine lineNumber="4427"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04428" /><CodeLine lineNumber="4428"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/sdvalue">SDValue</a> R = getRotateSource(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1))) &#123;</Highlight></CodeLine>
<Link id="l04429" /><CodeLine lineNumber="4429"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> NewOr = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, OpVT, R, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0));</Highlight></CodeLine>
<Link id="l04430" /><CodeLine lineNumber="4430"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, NewOr, N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04431" /><CodeLine lineNumber="4431"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04432" /><CodeLine lineNumber="4432"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04433" /><CodeLine lineNumber="4433"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04434" /><CodeLine lineNumber="4434"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04435" /><CodeLine lineNumber="4435"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04436" /><CodeLine lineNumber="4436"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04437" /><CodeLine lineNumber="4437" lineLink="#a07df6b2f8ad8ae0dd165bdedc3c97da6"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="#a07df6b2f8ad8ae0dd165bdedc3c97da6">foldSetCCWithFunnelShift</a>(<a href="/docs/api/structs/llvm/evt">EVT</a> VT, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> N0, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> N1,</Highlight></CodeLine>
<Link id="l04438" /><CodeLine lineNumber="4438"><Highlight kind="normal">                                        <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdloc">SDLoc</a> &amp;dl,</Highlight></CodeLine>
<Link id="l04439" /><CodeLine lineNumber="4439"><Highlight kind="normal">                                        <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp;DAG) &#123;</Highlight></CodeLine>
<Link id="l04440" /><CodeLine lineNumber="4440"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If we are testing for all-bits-clear, we might be able to do that with</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04441" /><CodeLine lineNumber="4441"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// less shifting since bit-order does not matter.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04442" /><CodeLine lineNumber="4442"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> != <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> != <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>)</Highlight></CodeLine>
<Link id="l04443" /><CodeLine lineNumber="4443"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04444" /><CodeLine lineNumber="4444"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04445" /><CodeLine lineNumber="4445"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;C1 = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(N1, </Highlight><Highlight kind="comment">/&#42; AllowUndefs &#42;/</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04446" /><CodeLine lineNumber="4446"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!C1 || !C1-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#ae91378660e4c7198b4de645a1d207b91">isZero</a>())</Highlight></CodeLine>
<Link id="l04447" /><CodeLine lineNumber="4447"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04448" /><CodeLine lineNumber="4448"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04449" /><CodeLine lineNumber="4449"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!N0.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>() ||</Highlight></CodeLine>
<Link id="l04450" /><CodeLine lineNumber="4450"><Highlight kind="normal">      (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a822b0d02b601898e2d6db5b39e12cc8a">ISD::FSHL</a> &amp;&amp; N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a874350de5b4f6b8f4db13940e17ed81b">ISD::FSHR</a>))</Highlight></CodeLine>
<Link id="l04451" /><CodeLine lineNumber="4451"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04452" /><CodeLine lineNumber="4452"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04453" /><CodeLine lineNumber="4453"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = N0.<a href="/docs/api/classes/llvm/sdvalue/#abd46b9ca1d156bc7e3dd9150cc106a28">getScalarValueSizeInBits</a>();</Highlight></CodeLine>
<Link id="l04454" /><CodeLine lineNumber="4454"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;ShAmtC = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(2));</Highlight></CodeLine>
<Link id="l04455" /><CodeLine lineNumber="4455"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!ShAmtC || ShAmtC-&gt;getAPIntValue().uge(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>))</Highlight></CodeLine>
<Link id="l04456" /><CodeLine lineNumber="4456"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04457" /><CodeLine lineNumber="4457"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04458" /><CodeLine lineNumber="4458"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Canonicalize fshr as fshl to reduce pattern-matching.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04459" /><CodeLine lineNumber="4459"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShAmt = ShAmtC-&gt;getZExtValue();</Highlight></CodeLine>
<Link id="l04460" /><CodeLine lineNumber="4460"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a874350de5b4f6b8f4db13940e17ed81b">ISD::FSHR</a>)</Highlight></CodeLine>
<Link id="l04461" /><CodeLine lineNumber="4461"><Highlight kind="normal">    ShAmt = <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - ShAmt;</Highlight></CodeLine>
<Link id="l04462" /><CodeLine lineNumber="4462"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04463" /><CodeLine lineNumber="4463"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Match an &#39;or&#39; with a specific operand &#39;Other&#39; in either commuted variant.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04464" /><CodeLine lineNumber="4464"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>;</Highlight></CodeLine>
<Link id="l04465" /><CodeLine lineNumber="4465"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> matchOr = &#91;&amp;<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, &amp;<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>&#93;(<a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa6311ae17c1ee52b36e68aaf4ad066387">Other</a>) &#123;</Highlight></CodeLine>
<Link id="l04466" /><CodeLine lineNumber="4466"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getOpcode() != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a> || !<a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.hasOneUse())</Highlight></CodeLine>
<Link id="l04467" /><CodeLine lineNumber="4467"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04468" /><CodeLine lineNumber="4468"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getOperand(0) == <a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa6311ae17c1ee52b36e68aaf4ad066387">Other</a>) &#123;</Highlight></CodeLine>
<Link id="l04469" /><CodeLine lineNumber="4469"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l04470" /><CodeLine lineNumber="4470"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l04471" /><CodeLine lineNumber="4471"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04472" /><CodeLine lineNumber="4472"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04473" /><CodeLine lineNumber="4473"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getOperand(1) == <a href="/docs/api/namespaces/llvm/#a9eb4f5b98b70ee4fab9614ed58282c1fa6311ae17c1ee52b36e68aaf4ad066387">Other</a>) &#123;</Highlight></CodeLine>
<Link id="l04474" /><CodeLine lineNumber="4474"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l04475" /><CodeLine lineNumber="4475"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l04476" /><CodeLine lineNumber="4476"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04477" /><CodeLine lineNumber="4477"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04478" /><CodeLine lineNumber="4478"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04479" /><CodeLine lineNumber="4479"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l04480" /><CodeLine lineNumber="4480"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04481" /><CodeLine lineNumber="4481"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> OpVT = N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l04482" /><CodeLine lineNumber="4482"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> ShAmtVT = N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(2).<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l04483" /><CodeLine lineNumber="4483"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> F0 = N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l04484" /><CodeLine lineNumber="4484"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> F1 = N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1);</Highlight></CodeLine>
<Link id="l04485" /><CodeLine lineNumber="4485"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (matchOr(F0, F1)) &#123;</Highlight></CodeLine>
<Link id="l04486" /><CodeLine lineNumber="4486"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fshl (or X, Y), X, C ==/!= 0 --&gt; or (shl Y, C), X ==/!= 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04487" /><CodeLine lineNumber="4487"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> NewShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(ShAmt, dl, ShAmtVT);</Highlight></CodeLine>
<Link id="l04488" /><CodeLine lineNumber="4488"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Shift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, OpVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, NewShAmt);</Highlight></CodeLine>
<Link id="l04489" /><CodeLine lineNumber="4489"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> NewOr = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, OpVT, Shift, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>);</Highlight></CodeLine>
<Link id="l04490" /><CodeLine lineNumber="4490"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, NewOr, N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04491" /><CodeLine lineNumber="4491"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04492" /><CodeLine lineNumber="4492"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (matchOr(F1, F0)) &#123;</Highlight></CodeLine>
<Link id="l04493" /><CodeLine lineNumber="4493"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fshl X, (or X, Y), C ==/!= 0 --&gt; or (srl Y, BW-C), X ==/!= 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04494" /><CodeLine lineNumber="4494"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> NewShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - ShAmt, dl, ShAmtVT);</Highlight></CodeLine>
<Link id="l04495" /><CodeLine lineNumber="4495"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Shift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, OpVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, NewShAmt);</Highlight></CodeLine>
<Link id="l04496" /><CodeLine lineNumber="4496"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> NewOr = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, OpVT, Shift, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>);</Highlight></CodeLine>
<Link id="l04497" /><CodeLine lineNumber="4497"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, NewOr, N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04498" /><CodeLine lineNumber="4498"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04499" /><CodeLine lineNumber="4499"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04500" /><CodeLine lineNumber="4500"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l04501" /><CodeLine lineNumber="4501"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l04502" /><CodeLine lineNumber="4502"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l04503" /><CodeLine lineNumber="4503"><Highlight kind="comment">/// Try to simplify a setcc built with the specified operands and cc. If it is</Highlight></CodeLine>
<Link id="l04504" /><CodeLine lineNumber="4504"><Highlight kind="comment">/// unable to simplify it, return a null SDValue.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04505" /><CodeLine lineNumber="4505"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a32a31ce1e9f6e4b965d11feb2501fc47">TargetLowering::SimplifySetCC</a>(EVT VT, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N0, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N1,</Highlight></CodeLine>
<Link id="l04506" /><CodeLine lineNumber="4506"><Highlight kind="normal">                                      <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> foldBooleans,</Highlight></CodeLine>
<Link id="l04507" /><CodeLine lineNumber="4507"><Highlight kind="normal">                                      DAGCombinerInfo &amp;DCI,</Highlight></CodeLine>
<Link id="l04508" /><CodeLine lineNumber="4508"><Highlight kind="normal">                                      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;dl)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l04509" /><CodeLine lineNumber="4509"><Highlight kind="normal">  SelectionDAG &amp;DAG = DCI.DAG;</Highlight></CodeLine>
<Link id="l04510" /><CodeLine lineNumber="4510"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> DataLayout &amp;Layout = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>();</Highlight></CodeLine>
<Link id="l04511" /><CodeLine lineNumber="4511"><Highlight kind="normal">  EVT OpVT = N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l04512" /><CodeLine lineNumber="4512"><Highlight kind="normal">  AttributeList Attr = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac64ec73b0617befef1fb2eae78d12b5f">getMachineFunction</a>().<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>().<a href="/docs/api/classes/llvm/function/#a7477aafbbe989ad35b96fac186d8e9fd">getAttributes</a>();</Highlight></CodeLine>
<Link id="l04513" /><CodeLine lineNumber="4513"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04514" /><CodeLine lineNumber="4514"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Constant fold or commute setcc.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04515" /><CodeLine lineNumber="4515"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Fold = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1ae915deb8e22ab5d8617a090149d0e6">FoldSetCC</a>(VT, N0, N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, dl))</Highlight></CodeLine>
<Link id="l04516" /><CodeLine lineNumber="4516"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Fold;</Highlight></CodeLine>
<Link id="l04517" /><CodeLine lineNumber="4517"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04518" /><CodeLine lineNumber="4518"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> N0ConstOrSplat =</Highlight></CodeLine>
<Link id="l04519" /><CodeLine lineNumber="4519"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(N0, </Highlight><Highlight kind="comment">/&#42;AllowUndefs&#42;/</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="comment">/&#42;AllowTruncate&#42;/</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04520" /><CodeLine lineNumber="4520"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> N1ConstOrSplat =</Highlight></CodeLine>
<Link id="l04521" /><CodeLine lineNumber="4521"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(N1, </Highlight><Highlight kind="comment">/&#42;AllowUndefs&#42;/</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="comment">/&#42;AllowTruncate&#42;/</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04522" /><CodeLine lineNumber="4522"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04523" /><CodeLine lineNumber="4523"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Canonicalize toward having the constant on the RHS.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04524" /><CodeLine lineNumber="4524"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: Handle non-splat vector constants. All undef causes trouble.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04525" /><CodeLine lineNumber="4525"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: We can&#39;t yet fold constant scalable vector splats, so avoid an</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04526" /><CodeLine lineNumber="4526"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// infinite loop here when we encounter one.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04527" /><CodeLine lineNumber="4527"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> SwappedCC = <a href="/docs/api/namespaces/llvm/isd/#a9cc23aed232ccdeadbd8648c349236a6">ISD::getSetCCSwappedOperands</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04528" /><CodeLine lineNumber="4528"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0ConstOrSplat &amp;&amp; !N1ConstOrSplat &amp;&amp;</Highlight></CodeLine>
<Link id="l04529" /><CodeLine lineNumber="4529"><Highlight kind="normal">      (DCI.isBeforeLegalizeOps() ||</Highlight></CodeLine>
<Link id="l04530" /><CodeLine lineNumber="4530"><Highlight kind="normal">       <a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(SwappedCC, N0.<a href="/docs/api/classes/llvm/sdvalue/#acbcc973a299b6f8733774668210b5227">getSimpleValueType</a>())))</Highlight></CodeLine>
<Link id="l04531" /><CodeLine lineNumber="4531"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N1, N0, SwappedCC);</Highlight></CodeLine>
<Link id="l04532" /><CodeLine lineNumber="4532"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04533" /><CodeLine lineNumber="4533"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If we have a subtract with the same 2 non-constant operands as this setcc</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04534" /><CodeLine lineNumber="4534"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// -- but in reverse order -- then try to commute the operands of this setcc</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04535" /><CodeLine lineNumber="4535"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// to match. A matching pair of setcc (cmp) and sub may be combined into 1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04536" /><CodeLine lineNumber="4536"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// instruction on some targets.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04537" /><CodeLine lineNumber="4537"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!N0ConstOrSplat &amp;&amp; !N1ConstOrSplat &amp;&amp;</Highlight></CodeLine>
<Link id="l04538" /><CodeLine lineNumber="4538"><Highlight kind="normal">      (DCI.isBeforeLegalizeOps() ||</Highlight></CodeLine>
<Link id="l04539" /><CodeLine lineNumber="4539"><Highlight kind="normal">       <a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(SwappedCC, N0.<a href="/docs/api/classes/llvm/sdvalue/#acbcc973a299b6f8733774668210b5227">getSimpleValueType</a>())) &amp;&amp;</Highlight></CodeLine>
<Link id="l04540" /><CodeLine lineNumber="4540"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a74d7d9a331f1d1e05a16d9ae96e3f602">doesNodeExist</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(OpVT), &#123;N1, N0&#125;) &amp;&amp;</Highlight></CodeLine>
<Link id="l04541" /><CodeLine lineNumber="4541"><Highlight kind="normal">      !DAG.<a href="/docs/api/classes/llvm/selectiondag/#a74d7d9a331f1d1e05a16d9ae96e3f602">doesNodeExist</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(OpVT), &#123;N0, N1&#125;))</Highlight></CodeLine>
<Link id="l04542" /><CodeLine lineNumber="4542"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N1, N0, SwappedCC);</Highlight></CodeLine>
<Link id="l04543" /><CodeLine lineNumber="4543"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04544" /><CodeLine lineNumber="4544"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> V = <a href="#ad061307c0dae639c75d944338bd7b15d">foldSetCCWithRotate</a>(VT, N0, N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, dl, DAG))</Highlight></CodeLine>
<Link id="l04545" /><CodeLine lineNumber="4545"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>;</Highlight></CodeLine>
<Link id="l04546" /><CodeLine lineNumber="4546"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04547" /><CodeLine lineNumber="4547"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> V = <a href="#a07df6b2f8ad8ae0dd165bdedc3c97da6">foldSetCCWithFunnelShift</a>(VT, N0, N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, dl, DAG))</Highlight></CodeLine>
<Link id="l04548" /><CodeLine lineNumber="4548"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>;</Highlight></CodeLine>
<Link id="l04549" /><CodeLine lineNumber="4549"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04550" /><CodeLine lineNumber="4550"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;N1C = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(N1)) &#123;</Highlight></CodeLine>
<Link id="l04551" /><CodeLine lineNumber="4551"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;C1 = N1C-&gt;getAPIntValue();</Highlight></CodeLine>
<Link id="l04552" /><CodeLine lineNumber="4552"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04553" /><CodeLine lineNumber="4553"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Optimize some CTPOP cases.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04554" /><CodeLine lineNumber="4554"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> V = <a href="#af16b5429cba93f00c53d5d4627725516">simplifySetCCWithCTPOP</a>(&#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">, VT, N0, C1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, dl, DAG))</Highlight></CodeLine>
<Link id="l04555" /><CodeLine lineNumber="4555"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>;</Highlight></CodeLine>
<Link id="l04556" /><CodeLine lineNumber="4556"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04557" /><CodeLine lineNumber="4557"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// For equality to 0 of a no-wrap multiply, decompose and test each op:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04558" /><CodeLine lineNumber="4558"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// X &#42; Y == 0 --&gt; (X == 0) || (Y == 0)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04559" /><CodeLine lineNumber="4559"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// X &#42; Y != 0 --&gt; (X != 0) &amp;&amp; (Y != 0)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04560" /><CodeLine lineNumber="4560"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO: This bails out if minsize is set, but if the target doesn&#39;t have a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04561" /><CodeLine lineNumber="4561"><Highlight kind="normal">    </Highlight><Highlight kind="comment">//       single instruction multiply for this type, it would likely be</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04562" /><CodeLine lineNumber="4562"><Highlight kind="normal">    </Highlight><Highlight kind="comment">//       smaller to decompose.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04563" /><CodeLine lineNumber="4563"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C1.<a href="/docs/api/classes/llvm/apint/#a49cd5939942c6665aba4cae8c220dff1">isZero</a>() &amp;&amp; (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l04564" /><CodeLine lineNumber="4564"><Highlight kind="normal">        N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a> &amp;&amp; N0.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l04565" /><CodeLine lineNumber="4565"><Highlight kind="normal">        (N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a5023bb0687db0b35d3b2d19327217ce5">getFlags</a>().<a href="/docs/api/structs/llvm/sdnodeflags/#a7952a7f73530f15076b2d88a671ef480">hasNoUnsignedWrap</a>() ||</Highlight></CodeLine>
<Link id="l04566" /><CodeLine lineNumber="4566"><Highlight kind="normal">         N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a5023bb0687db0b35d3b2d19327217ce5">getFlags</a>().<a href="/docs/api/structs/llvm/sdnodeflags/#ad03ee82e34dac079eca6da220393888d">hasNoSignedWrap</a>()) &amp;&amp;</Highlight></CodeLine>
<Link id="l04567" /><CodeLine lineNumber="4567"><Highlight kind="normal">        !Attr.hasFnAttr(Attribute::MinSize)) &#123;</Highlight></CodeLine>
<Link id="l04568" /><CodeLine lineNumber="4568"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IsXZero = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04569" /><CodeLine lineNumber="4569"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IsYZero = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1), N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04570" /><CodeLine lineNumber="4570"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LogicOp = <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>;</Highlight></CodeLine>
<Link id="l04571" /><CodeLine lineNumber="4571"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(LogicOp, dl, VT, IsXZero, IsYZero);</Highlight></CodeLine>
<Link id="l04572" /><CodeLine lineNumber="4572"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04573" /><CodeLine lineNumber="4573"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04574" /><CodeLine lineNumber="4574"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the LHS is &#39;(srl (ctlz x), 5)&#39;, the RHS is 0/1, and this is an</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04575" /><CodeLine lineNumber="4575"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// equality comparison, then we&#39;re just comparing whether X itself is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04576" /><CodeLine lineNumber="4576"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// zero.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04577" /><CodeLine lineNumber="4577"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a> &amp;&amp; (C1.<a href="/docs/api/classes/llvm/apint/#a49cd5939942c6665aba4cae8c220dff1">isZero</a>() || C1.<a href="/docs/api/classes/llvm/apint/#aea5f26deda5ef97e02f6afc57c0c3920">isOne</a>()) &amp;&amp;</Highlight></CodeLine>
<Link id="l04578" /><CodeLine lineNumber="4578"><Highlight kind="normal">        N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110add33c0ae9a63902e573fc1f92fc33f1c">ISD::CTLZ</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l04579" /><CodeLine lineNumber="4579"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a617c1c04cfa1325ad04eb69339d92188">llvm::has&#95;single&#95;bit&lt;uint32&#95;t&gt;</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#abd46b9ca1d156bc7e3dd9150cc106a28">getScalarValueSizeInBits</a>())) &#123;</Highlight></CodeLine>
<Link id="l04580" /><CodeLine lineNumber="4580"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ConstantSDNode &#42;ShAmt = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1))) &#123;</Highlight></CodeLine>
<Link id="l04581" /><CodeLine lineNumber="4581"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l04582" /><CodeLine lineNumber="4582"><Highlight kind="normal">            ShAmt-&gt;getAPIntValue() == <a href="/docs/api/namespaces/llvm/#a646986783f35e0fef8988f0f28d2589f">Log2&#95;32</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#abd46b9ca1d156bc7e3dd9150cc106a28">getScalarValueSizeInBits</a>())) &#123;</Highlight></CodeLine>
<Link id="l04583" /><CodeLine lineNumber="4583"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((C1 == 0) == (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>)) &#123;</Highlight></CodeLine>
<Link id="l04584" /><CodeLine lineNumber="4584"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// (srl (ctlz x), 5) == 0  -&gt; X != 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04585" /><CodeLine lineNumber="4585"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// (srl (ctlz x), 5) != 1  -&gt; X != 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04586" /><CodeLine lineNumber="4586"><Highlight kind="normal">            <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> = <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>;</Highlight></CodeLine>
<Link id="l04587" /><CodeLine lineNumber="4587"><Highlight kind="normal">          &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04588" /><CodeLine lineNumber="4588"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// (srl (ctlz x), 5) != 0  -&gt; X == 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04589" /><CodeLine lineNumber="4589"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// (srl (ctlz x), 5) == 1  -&gt; X == 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04590" /><CodeLine lineNumber="4590"><Highlight kind="normal">            <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> = <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>;</Highlight></CodeLine>
<Link id="l04591" /><CodeLine lineNumber="4591"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l04592" /><CodeLine lineNumber="4592"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>());</Highlight></CodeLine>
<Link id="l04593" /><CodeLine lineNumber="4593"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), Zero,</Highlight></CodeLine>
<Link id="l04594" /><CodeLine lineNumber="4594"><Highlight kind="normal">                              <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04595" /><CodeLine lineNumber="4595"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l04596" /><CodeLine lineNumber="4596"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l04597" /><CodeLine lineNumber="4597"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04598" /><CodeLine lineNumber="4598"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04599" /><CodeLine lineNumber="4599"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04600" /><CodeLine lineNumber="4600"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: Support vectors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04601" /><CodeLine lineNumber="4601"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;N1C = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(N1.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>())) &#123;</Highlight></CodeLine>
<Link id="l04602" /><CodeLine lineNumber="4602"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;C1 = N1C-&gt;getAPIntValue();</Highlight></CodeLine>
<Link id="l04603" /><CodeLine lineNumber="4603"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04604" /><CodeLine lineNumber="4604"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// (zext x) == C --&gt; x == (trunc C)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04605" /><CodeLine lineNumber="4605"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// (sext x) == C --&gt; x == (trunc C)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04606" /><CodeLine lineNumber="4606"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l04607" /><CodeLine lineNumber="4607"><Highlight kind="normal">        DCI.isBeforeLegalize() &amp;&amp; N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a295d0b84f4e63438c0edb0021c41d47a">hasOneUse</a>()) &#123;</Highlight></CodeLine>
<Link id="l04608" /><CodeLine lineNumber="4608"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> MinBits = N0.<a href="/docs/api/classes/llvm/sdvalue/#a8915297f72f1020167562805827f7160">getValueSizeInBits</a>();</Highlight></CodeLine>
<Link id="l04609" /><CodeLine lineNumber="4609"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> PreExt;</Highlight></CodeLine>
<Link id="l04610" /><CodeLine lineNumber="4610"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04611" /><CodeLine lineNumber="4611"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a23f2f5947fc429aff1270651c6d019ea">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>) &#123;</Highlight></CodeLine>
<Link id="l04612" /><CodeLine lineNumber="4612"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// ZExt</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04613" /><CodeLine lineNumber="4613"><Highlight kind="normal">        MinBits = N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#a8915297f72f1020167562805827f7160">getValueSizeInBits</a>();</Highlight></CodeLine>
<Link id="l04614" /><CodeLine lineNumber="4614"><Highlight kind="normal">        PreExt = N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l04615" /><CodeLine lineNumber="4615"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a23f2f5947fc429aff1270651c6d019ea">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>) &#123;</Highlight></CodeLine>
<Link id="l04616" /><CodeLine lineNumber="4616"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// DAGCombine turns costly ZExts into ANDs</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04617" /><CodeLine lineNumber="4617"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(1)))</Highlight></CodeLine>
<Link id="l04618" /><CodeLine lineNumber="4618"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getAPIntValue()+1).isPowerOf2()) &#123;</Highlight></CodeLine>
<Link id="l04619" /><CodeLine lineNumber="4619"><Highlight kind="normal">            MinBits = <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getAPIntValue().countr&#95;one();</Highlight></CodeLine>
<Link id="l04620" /><CodeLine lineNumber="4620"><Highlight kind="normal">            PreExt = N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l04621" /><CodeLine lineNumber="4621"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l04622" /><CodeLine lineNumber="4622"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a23f2f5947fc429aff1270651c6d019ea">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5183f3d72924bc7c77ba8d3f5de9f602">ISD::SIGN&#95;EXTEND</a>) &#123;</Highlight></CodeLine>
<Link id="l04623" /><CodeLine lineNumber="4623"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// SExt</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04624" /><CodeLine lineNumber="4624"><Highlight kind="normal">        MinBits = N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#a8915297f72f1020167562805827f7160">getValueSizeInBits</a>();</Highlight></CodeLine>
<Link id="l04625" /><CodeLine lineNumber="4625"><Highlight kind="normal">        PreExt = N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l04626" /><CodeLine lineNumber="4626"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04627" /><CodeLine lineNumber="4627"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;LN0 = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;LoadSDNode&gt;</a>(N0)) &#123;</Highlight></CodeLine>
<Link id="l04628" /><CodeLine lineNumber="4628"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// ZEXTLOAD / SEXTLOAD</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04629" /><CodeLine lineNumber="4629"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LN0-&gt;getExtensionType() == <a href="/docs/api/namespaces/llvm/isd/#ad4d48171b87ca51ff54c10a436bac4d7a8d89c7da4444d9ec11667aa369abc5f7">ISD::ZEXTLOAD</a>) &#123;</Highlight></CodeLine>
<Link id="l04630" /><CodeLine lineNumber="4630"><Highlight kind="normal">          MinBits = LN0-&gt;getMemoryVT().getSizeInBits();</Highlight></CodeLine>
<Link id="l04631" /><CodeLine lineNumber="4631"><Highlight kind="normal">          PreExt = N0;</Highlight></CodeLine>
<Link id="l04632" /><CodeLine lineNumber="4632"><Highlight kind="normal">        &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LN0-&gt;getExtensionType() == <a href="/docs/api/namespaces/llvm/isd/#ad4d48171b87ca51ff54c10a436bac4d7a6c61b6125c7901c549f90ee0e443a770">ISD::SEXTLOAD</a>) &#123;</Highlight></CodeLine>
<Link id="l04633" /><CodeLine lineNumber="4633"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04634" /><CodeLine lineNumber="4634"><Highlight kind="normal">          MinBits = LN0-&gt;getMemoryVT().getSizeInBits();</Highlight></CodeLine>
<Link id="l04635" /><CodeLine lineNumber="4635"><Highlight kind="normal">          PreExt = N0;</Highlight></CodeLine>
<Link id="l04636" /><CodeLine lineNumber="4636"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l04637" /><CodeLine lineNumber="4637"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l04638" /><CodeLine lineNumber="4638"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04639" /><CodeLine lineNumber="4639"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Figure out how many bits we need to preserve this constant.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04640" /><CodeLine lineNumber="4640"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ReqdBits = <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> ? C1.<a href="/docs/api/classes/llvm/apint/#a9f78d7e839322a6bfc0c665d29052242">getSignificantBits</a>() : C1.<a href="/docs/api/classes/llvm/apint/#a3015474e70e59c0a3ed4f9f0e8644b75">getActiveBits</a>();</Highlight></CodeLine>
<Link id="l04641" /><CodeLine lineNumber="4641"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04642" /><CodeLine lineNumber="4642"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Make sure we&#39;re not losing bits from the constant.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04643" /><CodeLine lineNumber="4643"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (MinBits &gt; 0 &amp;&amp;</Highlight></CodeLine>
<Link id="l04644" /><CodeLine lineNumber="4644"><Highlight kind="normal">          MinBits &lt; C1.<a href="/docs/api/classes/llvm/apint/#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l04645" /><CodeLine lineNumber="4645"><Highlight kind="normal">          MinBits &gt;= ReqdBits) &#123;</Highlight></CodeLine>
<Link id="l04646" /><CodeLine lineNumber="4646"><Highlight kind="normal">        EVT MinVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), MinBits);</Highlight></CodeLine>
<Link id="l04647" /><CodeLine lineNumber="4647"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (isTypeDesirableForOp(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0158ee47dfa868be5d28e2cbef70d5d0">ISD::SETCC</a>, MinVT)) &#123;</Highlight></CodeLine>
<Link id="l04648" /><CodeLine lineNumber="4648"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Will get folded away.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04649" /><CodeLine lineNumber="4649"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Trunc = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, MinVT, PreExt);</Highlight></CodeLine>
<Link id="l04650" /><CodeLine lineNumber="4650"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (MinBits == 1 &amp;&amp; C1 == 1)</Highlight></CodeLine>
<Link id="l04651" /><CodeLine lineNumber="4651"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// Invert the condition.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04652" /><CodeLine lineNumber="4652"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, Trunc, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, MVT::i1),</Highlight></CodeLine>
<Link id="l04653" /><CodeLine lineNumber="4653"><Highlight kind="normal">                                <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l04654" /><CodeLine lineNumber="4654"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(C1.<a href="/docs/api/classes/llvm/apint/#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(MinBits), dl, MinVT);</Highlight></CodeLine>
<Link id="l04655" /><CodeLine lineNumber="4655"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, Trunc, <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04656" /><CodeLine lineNumber="4656"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l04657" /><CodeLine lineNumber="4657"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04658" /><CodeLine lineNumber="4658"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// If truncating the setcc operands is not desirable, we can still</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04659" /><CodeLine lineNumber="4659"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// simplify the expression in some cases:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04660" /><CodeLine lineNumber="4660"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// setcc (&#91;sz&#93;ext (setcc x, y, cc)), 0, setne) -&gt; setcc (x, y, cc)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04661" /><CodeLine lineNumber="4661"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// setcc (&#91;sz&#93;ext (setcc x, y, cc)), 0, seteq) -&gt; setcc (x, y, inv(cc))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04662" /><CodeLine lineNumber="4662"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// setcc (zext (setcc x, y, cc)), 1, setne) -&gt; setcc (x, y, inv(cc))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04663" /><CodeLine lineNumber="4663"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// setcc (zext (setcc x, y, cc)), 1, seteq) -&gt; setcc (x, y, cc)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04664" /><CodeLine lineNumber="4664"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// setcc (sext (setcc x, y, cc)), -1, setne) -&gt; setcc (x, y, inv(cc))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04665" /><CodeLine lineNumber="4665"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// setcc (sext (setcc x, y, cc)), -1, seteq) -&gt; setcc (x, y, cc)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04666" /><CodeLine lineNumber="4666"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TopSetCC = N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l04667" /><CodeLine lineNumber="4667"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> N0Opc = N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#a23f2f5947fc429aff1270651c6d019ea">getOpcode</a>();</Highlight></CodeLine>
<Link id="l04668" /><CodeLine lineNumber="4668"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/anonymous-riscvisellowering-cpp-/#a0fb45dddfe1615e320ac9ad137d634e7a6d82f5a74a3f08ddcbb81036603b1f7c">SExt</a> = (N0Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5183f3d72924bc7c77ba8d3f5de9f602">ISD::SIGN&#95;EXTEND</a>);</Highlight></CodeLine>
<Link id="l04669" /><CodeLine lineNumber="4669"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TopSetCC.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>() == MVT::i1 &amp;&amp; VT == MVT::i1 &amp;&amp;</Highlight></CodeLine>
<Link id="l04670" /><CodeLine lineNumber="4670"><Highlight kind="normal">            TopSetCC.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0158ee47dfa868be5d28e2cbef70d5d0">ISD::SETCC</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l04671" /><CodeLine lineNumber="4671"><Highlight kind="normal">            (N0Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a> || N0Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5183f3d72924bc7c77ba8d3f5de9f602">ISD::SIGN&#95;EXTEND</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l04672" /><CodeLine lineNumber="4672"><Highlight kind="normal">            (<a href="/docs/api/namespaces/llvm/#abc5add4546a05bb6c8749c009524d5ae">isConstFalseVal</a>(N1) ||</Highlight></CodeLine>
<Link id="l04673" /><CodeLine lineNumber="4673"><Highlight kind="normal">             isExtendedTrueVal(N1C, N0-&gt;<a href="/docs/api/classes/llvm/sdnode/#ac0a534d63ac5c5b87f36acdade953fbe">getValueType</a>(0), SExt))) &#123;</Highlight></CodeLine>
<Link id="l04674" /><CodeLine lineNumber="4674"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04675" /><CodeLine lineNumber="4675"><Highlight kind="normal">          </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Inverse = (N1C-&gt;isZero() &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>) ||</Highlight></CodeLine>
<Link id="l04676" /><CodeLine lineNumber="4676"><Highlight kind="normal">                         (!N1C-&gt;isZero() &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>);</Highlight></CodeLine>
<Link id="l04677" /><CodeLine lineNumber="4677"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04678" /><CodeLine lineNumber="4678"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Inverse)</Highlight></CodeLine>
<Link id="l04679" /><CodeLine lineNumber="4679"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TopSetCC;</Highlight></CodeLine>
<Link id="l04680" /><CodeLine lineNumber="4680"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04681" /><CodeLine lineNumber="4681"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> InvCond = <a href="/docs/api/namespaces/llvm/isd/#a5fbc38db5c4f3ef878ab19245d3f381d">ISD::getSetCCInverse</a>(</Highlight></CodeLine>
<Link id="l04682" /><CodeLine lineNumber="4682"><Highlight kind="normal">              <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;CondCodeSDNode&gt;</a>(TopSetCC.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(2))-&gt;get(),</Highlight></CodeLine>
<Link id="l04683" /><CodeLine lineNumber="4683"><Highlight kind="normal">              TopSetCC.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>());</Highlight></CodeLine>
<Link id="l04684" /><CodeLine lineNumber="4684"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, TopSetCC.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0),</Highlight></CodeLine>
<Link id="l04685" /><CodeLine lineNumber="4685"><Highlight kind="normal">                                      TopSetCC.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1),</Highlight></CodeLine>
<Link id="l04686" /><CodeLine lineNumber="4686"><Highlight kind="normal">                                      InvCond);</Highlight></CodeLine>
<Link id="l04687" /><CodeLine lineNumber="4687"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l04688" /><CodeLine lineNumber="4688"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l04689" /><CodeLine lineNumber="4689"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04690" /><CodeLine lineNumber="4690"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04691" /><CodeLine lineNumber="4691"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the LHS is &#39;(and load, const)&#39;, the RHS is 0, the test is for</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04692" /><CodeLine lineNumber="4692"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// equality or unsigned, and all 1 bits of the const are in the same</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04693" /><CodeLine lineNumber="4693"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// partial word, see if we can shorten the load.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04694" /><CodeLine lineNumber="4694"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DCI.isBeforeLegalize() &amp;&amp;</Highlight></CodeLine>
<Link id="l04695" /><CodeLine lineNumber="4695"><Highlight kind="normal">        !<a href="/docs/api/namespaces/llvm/isd/#aae86ddfa346964171caa61f29d46294b">ISD::isSignedIntSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l04696" /><CodeLine lineNumber="4696"><Highlight kind="normal">        N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a> &amp;&amp; C1 == 0 &amp;&amp;</Highlight></CodeLine>
<Link id="l04697" /><CodeLine lineNumber="4697"><Highlight kind="normal">        N0.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>()-&gt;<a href="/docs/api/classes/llvm/sdnode/#a295d0b84f4e63438c0edb0021c41d47a">hasOneUse</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l04698" /><CodeLine lineNumber="4698"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;LoadSDNode&gt;</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0)) &amp;&amp;</Highlight></CodeLine>
<Link id="l04699" /><CodeLine lineNumber="4699"><Highlight kind="normal">        N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>()-&gt;<a href="/docs/api/classes/llvm/sdnode/#a295d0b84f4e63438c0edb0021c41d47a">hasOneUse</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l04700" /><CodeLine lineNumber="4700"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantSDNode&gt;</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1))) &#123;</Highlight></CodeLine>
<Link id="l04701" /><CodeLine lineNumber="4701"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;Lod = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;LoadSDNode&gt;</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0));</Highlight></CodeLine>
<Link id="l04702" /><CodeLine lineNumber="4702"><Highlight kind="normal">      APInt bestMask;</Highlight></CodeLine>
<Link id="l04703" /><CodeLine lineNumber="4703"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> bestWidth = 0, bestOffset = 0;</Highlight></CodeLine>
<Link id="l04704" /><CodeLine lineNumber="4704"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Lod-&gt;isSimple() &amp;&amp; Lod-&gt;isUnindexed() &amp;&amp;</Highlight></CodeLine>
<Link id="l04705" /><CodeLine lineNumber="4705"><Highlight kind="normal">          (Lod-&gt;getMemoryVT().isByteSized() ||</Highlight></CodeLine>
<Link id="l04706" /><CodeLine lineNumber="4706"><Highlight kind="normal">           <a href="/docs/api/classes/llvm/targetloweringbase/#a347cc43c09f54dab457a45b11183461b">isPaddedAtMostSignificantBitsWhenStored</a>(Lod-&gt;getMemoryVT()))) &#123;</Highlight></CodeLine>
<Link id="l04707" /><CodeLine lineNumber="4707"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> memWidth = Lod-&gt;getMemoryVT().getStoreSizeInBits();</Highlight></CodeLine>
<Link id="l04708" /><CodeLine lineNumber="4708"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> origWidth = N0.<a href="/docs/api/classes/llvm/sdvalue/#a8915297f72f1020167562805827f7160">getValueSizeInBits</a>();</Highlight></CodeLine>
<Link id="l04709" /><CodeLine lineNumber="4709"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> maskWidth = origWidth;</Highlight></CodeLine>
<Link id="l04710" /><CodeLine lineNumber="4710"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// We can narrow (e.g.) 16-bit extending loads on 32-bit target to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04711" /><CodeLine lineNumber="4711"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// 8 bits, but have to be careful...</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04712" /><CodeLine lineNumber="4712"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Lod-&gt;getExtensionType() != <a href="/docs/api/namespaces/llvm/isd/#ad4d48171b87ca51ff54c10a436bac4d7a6aacde2c67988b43a261a7f7ceac4be3">ISD::NON&#95;EXTLOAD</a>)</Highlight></CodeLine>
<Link id="l04713" /><CodeLine lineNumber="4713"><Highlight kind="normal">          origWidth = Lod-&gt;getMemoryVT().getSizeInBits();</Highlight></CodeLine>
<Link id="l04714" /><CodeLine lineNumber="4714"><Highlight kind="normal">        </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;<a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a> = N0.<a href="/docs/api/classes/llvm/sdvalue/#abb7cd0abf43d415da943eb8e4fe4f01b">getConstantOperandAPInt</a>(1);</Highlight></CodeLine>
<Link id="l04715" /><CodeLine lineNumber="4715"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Only consider power-of-2 widths (and at least one byte) as candiates</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04716" /><CodeLine lineNumber="4716"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// for the narrowed load.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04717" /><CodeLine lineNumber="4717"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> width = 8; width &lt; origWidth; width &#42;= 2) &#123;</Highlight></CodeLine>
<Link id="l04718" /><CodeLine lineNumber="4718"><Highlight kind="normal">          EVT newVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), width);</Highlight></CodeLine>
<Link id="l04719" /><CodeLine lineNumber="4719"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#a9a0590fb25613550cffc505a2affc293">shouldReduceLoadWidth</a>(Lod, <a href="/docs/api/namespaces/llvm/isd/#ad4d48171b87ca51ff54c10a436bac4d7a6aacde2c67988b43a261a7f7ceac4be3">ISD::NON&#95;EXTLOAD</a>, newVT))</Highlight></CodeLine>
<Link id="l04720" /><CodeLine lineNumber="4720"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04721" /><CodeLine lineNumber="4721"><Highlight kind="normal">          APInt newMask = <a href="/docs/api/classes/llvm/apint/#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(maskWidth, width);</Highlight></CodeLine>
<Link id="l04722" /><CodeLine lineNumber="4722"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Avoid accessing any padding here for now (we could use memWidth</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04723" /><CodeLine lineNumber="4723"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// instead of origWidth here otherwise).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04724" /><CodeLine lineNumber="4724"><Highlight kind="normal">          </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> maxOffset = origWidth - width;</Highlight></CodeLine>
<Link id="l04725" /><CodeLine lineNumber="4725"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> offset = 0; offset &lt;= maxOffset; offset += 8) &#123;</Highlight></CodeLine>
<Link id="l04726" /><CodeLine lineNumber="4726"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a>.isSubsetOf(newMask)) &#123;</Highlight></CodeLine>
<Link id="l04727" /><CodeLine lineNumber="4727"><Highlight kind="normal">              </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ptrOffset =</Highlight></CodeLine>
<Link id="l04728" /><CodeLine lineNumber="4728"><Highlight kind="normal">                  Layout.<a href="/docs/api/classes/llvm/datalayout/#a377365b0288a4d06a07e09252d7d583f">isLittleEndian</a>() ? offset : memWidth - width - offset;</Highlight></CodeLine>
<Link id="l04729" /><CodeLine lineNumber="4729"><Highlight kind="normal">              </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> IsFast = 0;</Highlight></CodeLine>
<Link id="l04730" /><CodeLine lineNumber="4730"><Highlight kind="normal">              <a href="/docs/api/namespaces/llvm/amdgpu/hsamd/kernel/arg/key/#a6b334a5f83504ebc99cc59f4f333ff98">Align</a> NewAlign = <a href="/docs/api/namespaces/llvm/#acd6aa057934751aaac54e5c18bcc18eb">commonAlignment</a>(Lod-&gt;getAlign(), ptrOffset / 8);</Highlight></CodeLine>
<Link id="l04731" /><CodeLine lineNumber="4731"><Highlight kind="normal">              </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aabebd01d497720c5f7f25f1112c14ebf">allowsMemoryAccess</a>(</Highlight></CodeLine>
<Link id="l04732" /><CodeLine lineNumber="4732"><Highlight kind="normal">                      &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), Layout, newVT, Lod-&gt;getAddressSpace(),</Highlight></CodeLine>
<Link id="l04733" /><CodeLine lineNumber="4733"><Highlight kind="normal">                      NewAlign, Lod-&gt;getMemOperand()-&gt;getFlags(), &amp;IsFast) &amp;&amp;</Highlight></CodeLine>
<Link id="l04734" /><CodeLine lineNumber="4734"><Highlight kind="normal">                  IsFast) &#123;</Highlight></CodeLine>
<Link id="l04735" /><CodeLine lineNumber="4735"><Highlight kind="normal">                bestOffset = ptrOffset / 8;</Highlight></CodeLine>
<Link id="l04736" /><CodeLine lineNumber="4736"><Highlight kind="normal">                bestMask = <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a>.lshr(offset);</Highlight></CodeLine>
<Link id="l04737" /><CodeLine lineNumber="4737"><Highlight kind="normal">                bestWidth = width;</Highlight></CodeLine>
<Link id="l04738" /><CodeLine lineNumber="4738"><Highlight kind="normal">                </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04739" /><CodeLine lineNumber="4739"><Highlight kind="normal">              &#125;</Highlight></CodeLine>
<Link id="l04740" /><CodeLine lineNumber="4740"><Highlight kind="normal">            &#125;</Highlight></CodeLine>
<Link id="l04741" /><CodeLine lineNumber="4741"><Highlight kind="normal">            newMask &lt;&lt;= 8;</Highlight></CodeLine>
<Link id="l04742" /><CodeLine lineNumber="4742"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l04743" /><CodeLine lineNumber="4743"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (bestWidth)</Highlight></CodeLine>
<Link id="l04744" /><CodeLine lineNumber="4744"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04745" /><CodeLine lineNumber="4745"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l04746" /><CodeLine lineNumber="4746"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l04747" /><CodeLine lineNumber="4747"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (bestWidth) &#123;</Highlight></CodeLine>
<Link id="l04748" /><CodeLine lineNumber="4748"><Highlight kind="normal">        EVT newVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), bestWidth);</Highlight></CodeLine>
<Link id="l04749" /><CodeLine lineNumber="4749"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = Lod-&gt;getBasePtr();</Highlight></CodeLine>
<Link id="l04750" /><CodeLine lineNumber="4750"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (bestOffset != 0)</Highlight></CodeLine>
<Link id="l04751" /><CodeLine lineNumber="4751"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#adb09f8e31d16bc479475898f3fbdf887">getObjectPtrOffset</a>(dl, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a href="/docs/api/classes/llvm/typesize/#a003b4369b4130e669dc9139798e0193c">TypeSize::getFixed</a>(bestOffset));</Highlight></CodeLine>
<Link id="l04752" /><CodeLine lineNumber="4752"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewLoad =</Highlight></CodeLine>
<Link id="l04753" /><CodeLine lineNumber="4753"><Highlight kind="normal">            DAG.<a href="/docs/api/classes/llvm/selectiondag/#a3c3b16945cf064f59363bdefdfe2b492">getLoad</a>(newVT, dl, Lod-&gt;getChain(), <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>,</Highlight></CodeLine>
<Link id="l04754" /><CodeLine lineNumber="4754"><Highlight kind="normal">                        Lod-&gt;getPointerInfo().getWithOffset(bestOffset),</Highlight></CodeLine>
<Link id="l04755" /><CodeLine lineNumber="4755"><Highlight kind="normal">                        Lod-&gt;getOriginalAlign());</Highlight></CodeLine>
<Link id="l04756" /><CodeLine lineNumber="4756"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> =</Highlight></CodeLine>
<Link id="l04757" /><CodeLine lineNumber="4757"><Highlight kind="normal">            DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, newVT, NewLoad,</Highlight></CodeLine>
<Link id="l04758" /><CodeLine lineNumber="4758"><Highlight kind="normal">                        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(bestMask.<a href="/docs/api/classes/llvm/apint/#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(bestWidth), dl, newVT));</Highlight></CodeLine>
<Link id="l04759" /><CodeLine lineNumber="4759"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0LL, dl, newVT), <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04760" /><CodeLine lineNumber="4760"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l04761" /><CodeLine lineNumber="4761"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04762" /><CodeLine lineNumber="4762"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04763" /><CodeLine lineNumber="4763"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the LHS is a ZERO&#95;EXTEND, perform the comparison on the input.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04764" /><CodeLine lineNumber="4764"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>) &#123;</Highlight></CodeLine>
<Link id="l04765" /><CodeLine lineNumber="4765"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> InSize = N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#a8915297f72f1020167562805827f7160">getValueSizeInBits</a>();</Highlight></CodeLine>
<Link id="l04766" /><CodeLine lineNumber="4766"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04767" /><CodeLine lineNumber="4767"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If the comparison constant has bits in the upper part, the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04768" /><CodeLine lineNumber="4768"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// zero-extended value could never match.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04769" /><CodeLine lineNumber="4769"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C1.<a href="/docs/api/classes/llvm/apint/#a6da514c588b2668280a861a59bfc9fa5">intersects</a>(<a href="/docs/api/classes/llvm/apint/#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(C1.<a href="/docs/api/classes/llvm/apint/#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>(),</Highlight></CodeLine>
<Link id="l04770" /><CodeLine lineNumber="4770"><Highlight kind="normal">                                              C1.<a href="/docs/api/classes/llvm/apint/#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>() - InSize))) &#123;</Highlight></CodeLine>
<Link id="l04771" /><CodeLine lineNumber="4771"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>) &#123;</Highlight></CodeLine>
<Link id="l04772" /><CodeLine lineNumber="4772"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a>:</Highlight></CodeLine>
<Link id="l04773" /><CodeLine lineNumber="4773"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">ISD::SETUGE</a>:</Highlight></CodeLine>
<Link id="l04774" /><CodeLine lineNumber="4774"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>:</Highlight></CodeLine>
<Link id="l04775" /><CodeLine lineNumber="4775"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, VT);</Highlight></CodeLine>
<Link id="l04776" /><CodeLine lineNumber="4776"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>:</Highlight></CodeLine>
<Link id="l04777" /><CodeLine lineNumber="4777"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a>:</Highlight></CodeLine>
<Link id="l04778" /><CodeLine lineNumber="4778"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>:</Highlight></CodeLine>
<Link id="l04779" /><CodeLine lineNumber="4779"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, VT);</Highlight></CodeLine>
<Link id="l04780" /><CodeLine lineNumber="4780"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a>:</Highlight></CodeLine>
<Link id="l04781" /><CodeLine lineNumber="4781"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a7f47862de23f7210f88ccf98ae1efbe4">ISD::SETGE</a>:</Highlight></CodeLine>
<Link id="l04782" /><CodeLine lineNumber="4782"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// True if the sign bit of C1 is set.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04783" /><CodeLine lineNumber="4783"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(C1.<a href="/docs/api/classes/llvm/apint/#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>(), dl, VT);</Highlight></CodeLine>
<Link id="l04784" /><CodeLine lineNumber="4784"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>:</Highlight></CodeLine>
<Link id="l04785" /><CodeLine lineNumber="4785"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ab49f81c2ecbbff3d0fbe55dd46353774">ISD::SETLE</a>:</Highlight></CodeLine>
<Link id="l04786" /><CodeLine lineNumber="4786"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// True if the sign bit of C1 isn&#39;t set.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04787" /><CodeLine lineNumber="4787"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(C1.<a href="/docs/api/classes/llvm/apint/#ac8c0157adbe12649beac0009c2f6ad8d">isNonNegative</a>(), dl, VT);</Highlight></CodeLine>
<Link id="l04788" /><CodeLine lineNumber="4788"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l04789" /><CodeLine lineNumber="4789"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04790" /><CodeLine lineNumber="4790"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l04791" /><CodeLine lineNumber="4791"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l04792" /><CodeLine lineNumber="4792"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04793" /><CodeLine lineNumber="4793"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Otherwise, we can perform the comparison with the low bits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04794" /><CodeLine lineNumber="4794"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>) &#123;</Highlight></CodeLine>
<Link id="l04795" /><CodeLine lineNumber="4795"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>:</Highlight></CodeLine>
<Link id="l04796" /><CodeLine lineNumber="4796"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>:</Highlight></CodeLine>
<Link id="l04797" /><CodeLine lineNumber="4797"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a>:</Highlight></CodeLine>
<Link id="l04798" /><CodeLine lineNumber="4798"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">ISD::SETUGE</a>:</Highlight></CodeLine>
<Link id="l04799" /><CodeLine lineNumber="4799"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>:</Highlight></CodeLine>
<Link id="l04800" /><CodeLine lineNumber="4800"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a>: &#123;</Highlight></CodeLine>
<Link id="l04801" /><CodeLine lineNumber="4801"><Highlight kind="normal">        EVT newVT = N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l04802" /><CodeLine lineNumber="4802"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// FIXME: Should use isNarrowingProfitable.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04803" /><CodeLine lineNumber="4803"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DCI.isBeforeLegalizeOps() ||</Highlight></CodeLine>
<Link id="l04804" /><CodeLine lineNumber="4804"><Highlight kind="normal">            (<a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0158ee47dfa868be5d28e2cbef70d5d0">ISD::SETCC</a>, newVT) &amp;&amp;</Highlight></CodeLine>
<Link id="l04805" /><CodeLine lineNumber="4805"><Highlight kind="normal">             <a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, newVT.<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>()) &amp;&amp;</Highlight></CodeLine>
<Link id="l04806" /><CodeLine lineNumber="4806"><Highlight kind="normal">             isTypeDesirableForOp(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0158ee47dfa868be5d28e2cbef70d5d0">ISD::SETCC</a>, newVT))) &#123;</Highlight></CodeLine>
<Link id="l04807" /><CodeLine lineNumber="4807"><Highlight kind="normal">          EVT NewSetCCVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(Layout, &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), newVT);</Highlight></CodeLine>
<Link id="l04808" /><CodeLine lineNumber="4808"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewConst = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(C1.<a href="/docs/api/classes/llvm/apint/#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(InSize), dl, newVT);</Highlight></CodeLine>
<Link id="l04809" /><CodeLine lineNumber="4809"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04810" /><CodeLine lineNumber="4810"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewSetCC = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, NewSetCCVT, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0),</Highlight></CodeLine>
<Link id="l04811" /><CodeLine lineNumber="4811"><Highlight kind="normal">                                          NewConst, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04812" /><CodeLine lineNumber="4812"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#aa7e66d5a43444879fa5037f2cfaa4de5">getBoolExtOrTrunc</a>(NewSetCC, dl, VT, N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>());</Highlight></CodeLine>
<Link id="l04813" /><CodeLine lineNumber="4813"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l04814" /><CodeLine lineNumber="4814"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l04815" /><CodeLine lineNumber="4815"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l04816" /><CodeLine lineNumber="4816"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l04817" /><CodeLine lineNumber="4817"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">; </Highlight><Highlight kind="comment">// todo, be more careful with signed comparisons</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04818" /><CodeLine lineNumber="4818"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l04819" /><CodeLine lineNumber="4819"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaa59dd5ec37f21905436b354c0292d9e">ISD::SIGN&#95;EXTEND&#95;INREG</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l04820" /><CodeLine lineNumber="4820"><Highlight kind="normal">               (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l04821" /><CodeLine lineNumber="4821"><Highlight kind="normal">               !<a href="/docs/api/classes/llvm/targetloweringbase/#a29366507d51536f380af3c2184bfe374">isSExtCheaperThanZExt</a>(<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VTSDNode&gt;</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1))-&gt;getVT(),</Highlight></CodeLine>
<Link id="l04822" /><CodeLine lineNumber="4822"><Highlight kind="normal">                                      OpVT)) &#123;</Highlight></CodeLine>
<Link id="l04823" /><CodeLine lineNumber="4823"><Highlight kind="normal">      EVT ExtSrcTy = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VTSDNode&gt;</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1))-&gt;getVT();</Highlight></CodeLine>
<Link id="l04824" /><CodeLine lineNumber="4824"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ExtSrcTyBits = ExtSrcTy.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>();</Highlight></CodeLine>
<Link id="l04825" /><CodeLine lineNumber="4825"><Highlight kind="normal">      EVT ExtDstTy = N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l04826" /><CodeLine lineNumber="4826"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ExtDstTyBits = ExtDstTy.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>();</Highlight></CodeLine>
<Link id="l04827" /><CodeLine lineNumber="4827"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04828" /><CodeLine lineNumber="4828"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If the constant doesn&#39;t fit into the number of bits for the source of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04829" /><CodeLine lineNumber="4829"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// the sign extension, it is impossible for both sides to be equal.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04830" /><CodeLine lineNumber="4830"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C1.<a href="/docs/api/classes/llvm/apint/#a9f78d7e839322a6bfc0c665d29052242">getSignificantBits</a>() &gt; ExtSrcTyBits)</Highlight></CodeLine>
<Link id="l04831" /><CodeLine lineNumber="4831"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac2624b648ddca964183d631c8d189595">getBoolConstant</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>, dl, VT, OpVT);</Highlight></CodeLine>
<Link id="l04832" /><CodeLine lineNumber="4832"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04833" /><CodeLine lineNumber="4833"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExtDstTy == N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l04834" /><CodeLine lineNumber="4834"><Highlight kind="normal">             ExtDstTy != ExtSrcTy &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Unexpected types!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l04835" /><CodeLine lineNumber="4835"><Highlight kind="normal">      APInt <a href="/docs/api/namespaces/llvm/amdgpu/#a4554b8c1e903115f6d7c75b0cc8900dcae71a5bce3c21304da97e1e5d3dab0ed3">Imm</a> = <a href="/docs/api/classes/llvm/apint/#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(ExtDstTyBits, ExtSrcTyBits);</Highlight></CodeLine>
<Link id="l04836" /><CodeLine lineNumber="4836"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ZextOp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, ExtDstTy, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0),</Highlight></CodeLine>
<Link id="l04837" /><CodeLine lineNumber="4837"><Highlight kind="normal">                                   DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Imm, dl, ExtDstTy));</Highlight></CodeLine>
<Link id="l04838" /><CodeLine lineNumber="4838"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DCI.isCalledByLegalizer())</Highlight></CodeLine>
<Link id="l04839" /><CodeLine lineNumber="4839"><Highlight kind="normal">        DCI.AddToWorklist(ZextOp.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l04840" /><CodeLine lineNumber="4840"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Otherwise, make this a use of a zext.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04841" /><CodeLine lineNumber="4841"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, ZextOp,</Highlight></CodeLine>
<Link id="l04842" /><CodeLine lineNumber="4842"><Highlight kind="normal">                          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(C1 &amp; Imm, dl, ExtDstTy), <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04843" /><CodeLine lineNumber="4843"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((N1C-&gt;isZero() || N1C-&gt;isOne()) &amp;&amp;</Highlight></CodeLine>
<Link id="l04844" /><CodeLine lineNumber="4844"><Highlight kind="normal">               (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>)) &#123;</Highlight></CodeLine>
<Link id="l04845" /><CodeLine lineNumber="4845"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// SETCC (X), &#91;0|1&#93;, &#91;EQ|NE&#93;  -&gt; X if X is known 0/1. i1 types are</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04846" /><CodeLine lineNumber="4846"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// excluded as they are handled below whilst checking for foldBooleans.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04847" /><CodeLine lineNumber="4847"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0158ee47dfa868be5d28e2cbef70d5d0">ISD::SETCC</a> || VT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>() != MVT::i1) &amp;&amp;</Highlight></CodeLine>
<Link id="l04848" /><CodeLine lineNumber="4848"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(VT) &amp;&amp; VT.<a href="/docs/api/structs/llvm/evt/#ae67a729c436915221367d8e77412dff4">bitsLE</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()) &amp;&amp;</Highlight></CodeLine>
<Link id="l04849" /><CodeLine lineNumber="4849"><Highlight kind="normal">          (N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>() == MVT::i1 ||</Highlight></CodeLine>
<Link id="l04850" /><CodeLine lineNumber="4850"><Highlight kind="normal">           <a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()) == <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a0e2d72cfdcc49d2d189f440b3cc31dff">ZeroOrOneBooleanContent</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l04851" /><CodeLine lineNumber="4851"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad5386f4196a9eab5701c451469f2e20e">MaskedValueIsZero</a>(</Highlight></CodeLine>
<Link id="l04852" /><CodeLine lineNumber="4852"><Highlight kind="normal">              N0, <a href="/docs/api/classes/llvm/apint/#aeaf22e8d92fd978a5eca9ab031994399">APInt::getBitsSetFrom</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a8915297f72f1020167562805827f7160">getValueSizeInBits</a>(), 1))) &#123;</Highlight></CodeLine>
<Link id="l04853" /><CodeLine lineNumber="4853"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> TrueWhenTrue = (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>) ^ (!N1C-&gt;isOne());</Highlight></CodeLine>
<Link id="l04854" /><CodeLine lineNumber="4854"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TrueWhenTrue)</Highlight></CodeLine>
<Link id="l04855" /><CodeLine lineNumber="4855"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, VT, N0);</Highlight></CodeLine>
<Link id="l04856" /><CodeLine lineNumber="4856"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Invert the condition.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04857" /><CodeLine lineNumber="4857"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0158ee47dfa868be5d28e2cbef70d5d0">ISD::SETCC</a>) &#123;</Highlight></CodeLine>
<Link id="l04858" /><CodeLine lineNumber="4858"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;CondCodeSDNode&gt;</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(2))-&gt;get();</Highlight></CodeLine>
<Link id="l04859" /><CodeLine lineNumber="4859"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> = <a href="/docs/api/namespaces/llvm/isd/#a5fbc38db5c4f3ef878ab19245d3f381d">ISD::getSetCCInverse</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>());</Highlight></CodeLine>
<Link id="l04860" /><CodeLine lineNumber="4860"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DCI.isBeforeLegalizeOps() ||</Highlight></CodeLine>
<Link id="l04861" /><CodeLine lineNumber="4861"><Highlight kind="normal">              <a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#acbcc973a299b6f8733774668210b5227">getSimpleValueType</a>()))</Highlight></CodeLine>
<Link id="l04862" /><CodeLine lineNumber="4862"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1), <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>);</Highlight></CodeLine>
<Link id="l04863" /><CodeLine lineNumber="4863"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l04864" /><CodeLine lineNumber="4864"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l04865" /><CodeLine lineNumber="4865"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04866" /><CodeLine lineNumber="4866"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a> ||</Highlight></CodeLine>
<Link id="l04867" /><CodeLine lineNumber="4867"><Highlight kind="normal">           (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l04868" /><CodeLine lineNumber="4868"><Highlight kind="normal">            N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l04869" /><CodeLine lineNumber="4869"><Highlight kind="normal">            N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1) == N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1))) &amp;&amp;</Highlight></CodeLine>
<Link id="l04870" /><CodeLine lineNumber="4870"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ac926ae0b6871c2207db3e787f6dbcb80">isOneConstant</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1))) &#123;</Highlight></CodeLine>
<Link id="l04871" /><CodeLine lineNumber="4871"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// If this is (X^1) == 0/1, swap the RHS and eliminate the xor.  We</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04872" /><CodeLine lineNumber="4872"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// can only do this if the top bits are known zero.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04873" /><CodeLine lineNumber="4873"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = N0.<a href="/docs/api/classes/llvm/sdvalue/#a8915297f72f1020167562805827f7160">getValueSizeInBits</a>();</Highlight></CodeLine>
<Link id="l04874" /><CodeLine lineNumber="4874"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad5386f4196a9eab5701c451469f2e20e">MaskedValueIsZero</a>(N0,</Highlight></CodeLine>
<Link id="l04875" /><CodeLine lineNumber="4875"><Highlight kind="normal">                                  <a href="/docs/api/classes/llvm/apint/#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>,</Highlight></CodeLine>
<Link id="l04876" /><CodeLine lineNumber="4876"><Highlight kind="normal">                                                        <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>-1))) &#123;</Highlight></CodeLine>
<Link id="l04877" /><CodeLine lineNumber="4877"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Okay, get the un-inverted input value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04878" /><CodeLine lineNumber="4878"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Val;</Highlight></CodeLine>
<Link id="l04879" /><CodeLine lineNumber="4879"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>) &#123;</Highlight></CodeLine>
<Link id="l04880" /><CodeLine lineNumber="4880"><Highlight kind="normal">            Val = N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l04881" /><CodeLine lineNumber="4881"><Highlight kind="normal">          &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04882" /><CodeLine lineNumber="4882"><Highlight kind="normal">            <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l04883" /><CodeLine lineNumber="4883"><Highlight kind="normal">                    N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>);</Highlight></CodeLine>
<Link id="l04884" /><CodeLine lineNumber="4884"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// ((X^1)&amp;1)^1 -&gt; X &amp; 1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04885" /><CodeLine lineNumber="4885"><Highlight kind="normal">            Val = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>(),</Highlight></CodeLine>
<Link id="l04886" /><CodeLine lineNumber="4886"><Highlight kind="normal">                              N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0),</Highlight></CodeLine>
<Link id="l04887" /><CodeLine lineNumber="4887"><Highlight kind="normal">                              N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1));</Highlight></CodeLine>
<Link id="l04888" /><CodeLine lineNumber="4888"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l04889" /><CodeLine lineNumber="4889"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04890" /><CodeLine lineNumber="4890"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, Val, N1,</Highlight></CodeLine>
<Link id="l04891" /><CodeLine lineNumber="4891"><Highlight kind="normal">                              <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l04892" /><CodeLine lineNumber="4892"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l04893" /><CodeLine lineNumber="4893"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N1C-&gt;isOne()) &#123;</Highlight></CodeLine>
<Link id="l04894" /><CodeLine lineNumber="4894"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = N0;</Highlight></CodeLine>
<Link id="l04895" /><CodeLine lineNumber="4895"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>)</Highlight></CodeLine>
<Link id="l04896" /><CodeLine lineNumber="4896"><Highlight kind="normal">          Op0 = Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l04897" /><CodeLine lineNumber="4897"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04898" /><CodeLine lineNumber="4898"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((Op0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l04899" /><CodeLine lineNumber="4899"><Highlight kind="normal">            Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0158ee47dfa868be5d28e2cbef70d5d0">ISD::SETCC</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l04900" /><CodeLine lineNumber="4900"><Highlight kind="normal">            Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1).<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0158ee47dfa868be5d28e2cbef70d5d0">ISD::SETCC</a>) &#123;</Highlight></CodeLine>
<Link id="l04901" /><CodeLine lineNumber="4901"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> XorLHS = Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l04902" /><CodeLine lineNumber="4902"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> XorRHS = Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1);</Highlight></CodeLine>
<Link id="l04903" /><CodeLine lineNumber="4903"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Ensure that the input setccs return an i1 type or 0/1 value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04904" /><CodeLine lineNumber="4904"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>() == MVT::i1 ||</Highlight></CodeLine>
<Link id="l04905" /><CodeLine lineNumber="4905"><Highlight kind="normal">              (<a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(XorLHS.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()) ==</Highlight></CodeLine>
<Link id="l04906" /><CodeLine lineNumber="4906"><Highlight kind="normal">                      <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a0e2d72cfdcc49d2d189f440b3cc31dff">ZeroOrOneBooleanContent</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l04907" /><CodeLine lineNumber="4907"><Highlight kind="normal">               <a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(XorRHS.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0).<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()) ==</Highlight></CodeLine>
<Link id="l04908" /><CodeLine lineNumber="4908"><Highlight kind="normal">                        <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a0e2d72cfdcc49d2d189f440b3cc31dff">ZeroOrOneBooleanContent</a>)) &#123;</Highlight></CodeLine>
<Link id="l04909" /><CodeLine lineNumber="4909"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// (xor (setcc), (setcc)) == / != 1 -&gt; (setcc) != / == (setcc)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04910" /><CodeLine lineNumber="4910"><Highlight kind="normal">            <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> = (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>) ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a> : ISD::<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">SETEQ</a>;</Highlight></CodeLine>
<Link id="l04911" /><CodeLine lineNumber="4911"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, XorLHS, XorRHS, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04912" /><CodeLine lineNumber="4912"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l04913" /><CodeLine lineNumber="4913"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l04914" /><CodeLine lineNumber="4914"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a> &amp;&amp; <a href="/docs/api/namespaces/llvm/#ac926ae0b6871c2207db3e787f6dbcb80">isOneConstant</a>(Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1))) &#123;</Highlight></CodeLine>
<Link id="l04915" /><CodeLine lineNumber="4915"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// If this is (X&amp;1) == / != 1, normalize it to (X&amp;1) != / == 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04916" /><CodeLine lineNumber="4916"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>().<a href="/docs/api/structs/llvm/evt/#a3ad406477784397709a339d5a2957b43">bitsGT</a>(VT))</Highlight></CodeLine>
<Link id="l04917" /><CodeLine lineNumber="4917"><Highlight kind="normal">            Op0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT,</Highlight></CodeLine>
<Link id="l04918" /><CodeLine lineNumber="4918"><Highlight kind="normal">                          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, VT, Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0)),</Highlight></CodeLine>
<Link id="l04919" /><CodeLine lineNumber="4919"><Highlight kind="normal">                          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, VT));</Highlight></CodeLine>
<Link id="l04920" /><CodeLine lineNumber="4920"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>().<a href="/docs/api/structs/llvm/evt/#a3bf257bfbd279ecfad670be03b00210e">bitsLT</a>(VT))</Highlight></CodeLine>
<Link id="l04921" /><CodeLine lineNumber="4921"><Highlight kind="normal">            Op0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT,</Highlight></CodeLine>
<Link id="l04922" /><CodeLine lineNumber="4922"><Highlight kind="normal">                        DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">ISD::ANY&#95;EXTEND</a>, dl, VT, Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0)),</Highlight></CodeLine>
<Link id="l04923" /><CodeLine lineNumber="4923"><Highlight kind="normal">                        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, VT));</Highlight></CodeLine>
<Link id="l04924" /><CodeLine lineNumber="4924"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04925" /><CodeLine lineNumber="4925"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, Op0,</Highlight></CodeLine>
<Link id="l04926" /><CodeLine lineNumber="4926"><Highlight kind="normal">                              DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, Op0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()),</Highlight></CodeLine>
<Link id="l04927" /><CodeLine lineNumber="4927"><Highlight kind="normal">                              <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l04928" /><CodeLine lineNumber="4928"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l04929" /><CodeLine lineNumber="4929"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af23301e60475124fd80a2cb51f6ba863">ISD::AssertZext</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l04930" /><CodeLine lineNumber="4930"><Highlight kind="normal">            <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VTSDNode&gt;</a>(Op0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1))-&gt;getVT() == MVT::i1)</Highlight></CodeLine>
<Link id="l04931" /><CodeLine lineNumber="4931"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, Op0,</Highlight></CodeLine>
<Link id="l04932" /><CodeLine lineNumber="4932"><Highlight kind="normal">                              DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, Op0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()),</Highlight></CodeLine>
<Link id="l04933" /><CodeLine lineNumber="4933"><Highlight kind="normal">                              <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l04934" /><CodeLine lineNumber="4934"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l04935" /><CodeLine lineNumber="4935"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04936" /><CodeLine lineNumber="4936"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04937" /><CodeLine lineNumber="4937"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Given:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04938" /><CodeLine lineNumber="4938"><Highlight kind="normal">    </Highlight><Highlight kind="comment">//   icmp eq/ne (urem %x, %y), 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04939" /><CodeLine lineNumber="4939"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Iff %x has 0 or 1 bits set, and %y has at least 2 bits set, omit &#39;urem&#39;:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04940" /><CodeLine lineNumber="4940"><Highlight kind="normal">    </Highlight><Highlight kind="comment">//   icmp eq/ne %x, 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04941" /><CodeLine lineNumber="4941"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad1657dbc1957901a6d9cd224efbc0f28">ISD::UREM</a> &amp;&amp; N1C-&gt;isZero() &amp;&amp;</Highlight></CodeLine>
<Link id="l04942" /><CodeLine lineNumber="4942"><Highlight kind="normal">        (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>)) &#123;</Highlight></CodeLine>
<Link id="l04943" /><CodeLine lineNumber="4943"><Highlight kind="normal">      KnownBits XKnown = DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0));</Highlight></CodeLine>
<Link id="l04944" /><CodeLine lineNumber="4944"><Highlight kind="normal">      KnownBits YKnown = DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1));</Highlight></CodeLine>
<Link id="l04945" /><CodeLine lineNumber="4945"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (XKnown.<a href="/docs/api/structs/llvm/knownbits/#a4676f4bc7da9235ff3b6683dd670d7be">countMaxPopulation</a>() == 1 &amp;&amp; YKnown.<a href="/docs/api/structs/llvm/knownbits/#ad2ecbbccee1ca4e3ddde24cc714ec79e">countMinPopulation</a>() &gt;= 2)</Highlight></CodeLine>
<Link id="l04946" /><CodeLine lineNumber="4946"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l04947" /><CodeLine lineNumber="4947"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04948" /><CodeLine lineNumber="4948"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04949" /><CodeLine lineNumber="4949"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Fold set&#95;cc seteq (ashr X, BW-1), -1 -&gt; set&#95;cc setlt X, 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04950" /><CodeLine lineNumber="4950"><Highlight kind="normal">    </Highlight><Highlight kind="comment">//  and set&#95;cc setne (ashr X, BW-1), -1 -&gt; set&#95;cc setge X, 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04951" /><CodeLine lineNumber="4951"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l04952" /><CodeLine lineNumber="4952"><Highlight kind="normal">        N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a> &amp;&amp; <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantSDNode&gt;</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1)) &amp;&amp;</Highlight></CodeLine>
<Link id="l04953" /><CodeLine lineNumber="4953"><Highlight kind="normal">        N0.<a href="/docs/api/classes/llvm/sdvalue/#abb7cd0abf43d415da943eb8e4fe4f01b">getConstantOperandAPInt</a>(1) == OpVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>() - 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l04954" /><CodeLine lineNumber="4954"><Highlight kind="normal">        N1C-&gt;isAllOnes()) &#123;</Highlight></CodeLine>
<Link id="l04955" /><CodeLine lineNumber="4955"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0),</Highlight></CodeLine>
<Link id="l04956" /><CodeLine lineNumber="4956"><Highlight kind="normal">                          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, OpVT),</Highlight></CodeLine>
<Link id="l04957" /><CodeLine lineNumber="4957"><Highlight kind="normal">                          <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a7f47862de23f7210f88ccf98ae1efbe4">ISD::SETGE</a>);</Highlight></CodeLine>
<Link id="l04958" /><CodeLine lineNumber="4958"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04959" /><CodeLine lineNumber="4959"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04960" /><CodeLine lineNumber="4960"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> V =</Highlight></CodeLine>
<Link id="l04961" /><CodeLine lineNumber="4961"><Highlight kind="normal">            optimizeSetCCOfSignedTruncationCheck(VT, N0, N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, DCI, dl))</Highlight></CodeLine>
<Link id="l04962" /><CodeLine lineNumber="4962"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>;</Highlight></CodeLine>
<Link id="l04963" /><CodeLine lineNumber="4963"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l04964" /><CodeLine lineNumber="4964"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04965" /><CodeLine lineNumber="4965"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// These simplifications apply to splat vectors as well.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04966" /><CodeLine lineNumber="4966"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: Handle more splat vector cases.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04967" /><CodeLine lineNumber="4967"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;N1C = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(N1)) &#123;</Highlight></CodeLine>
<Link id="l04968" /><CodeLine lineNumber="4968"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;C1 = N1C-&gt;getAPIntValue();</Highlight></CodeLine>
<Link id="l04969" /><CodeLine lineNumber="4969"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04970" /><CodeLine lineNumber="4970"><Highlight kind="normal">    APInt MinVal, MaxVal;</Highlight></CodeLine>
<Link id="l04971" /><CodeLine lineNumber="4971"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> OperandBitSize = N1C-&gt;<a href="/docs/api/classes/llvm/sdnode/#ac0a534d63ac5c5b87f36acdade953fbe">getValueType</a>(0).<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l04972" /><CodeLine lineNumber="4972"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/isd/#aae86ddfa346964171caa61f29d46294b">ISD::isSignedIntSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>)) &#123;</Highlight></CodeLine>
<Link id="l04973" /><CodeLine lineNumber="4973"><Highlight kind="normal">      MinVal = <a href="/docs/api/classes/llvm/apint/#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(OperandBitSize);</Highlight></CodeLine>
<Link id="l04974" /><CodeLine lineNumber="4974"><Highlight kind="normal">      MaxVal = <a href="/docs/api/classes/llvm/apint/#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(OperandBitSize);</Highlight></CodeLine>
<Link id="l04975" /><CodeLine lineNumber="4975"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l04976" /><CodeLine lineNumber="4976"><Highlight kind="normal">      MinVal = <a href="/docs/api/classes/llvm/apint/#a65a6479206acd4113b8aa1c0fbc2158c">APInt::getMinValue</a>(OperandBitSize);</Highlight></CodeLine>
<Link id="l04977" /><CodeLine lineNumber="4977"><Highlight kind="normal">      MaxVal = <a href="/docs/api/classes/llvm/apint/#a331d69b5f93e47e7c596062b77dd5913">APInt::getMaxValue</a>(OperandBitSize);</Highlight></CodeLine>
<Link id="l04978" /><CodeLine lineNumber="4978"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l04979" /><CodeLine lineNumber="4979"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04980" /><CodeLine lineNumber="4980"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Canonicalize GE/LE comparisons to use GT/LT comparisons.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04981" /><CodeLine lineNumber="4981"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a7f47862de23f7210f88ccf98ae1efbe4">ISD::SETGE</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">ISD::SETUGE</a>) &#123;</Highlight></CodeLine>
<Link id="l04982" /><CodeLine lineNumber="4982"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// X &gt;= MIN --&gt; true</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04983" /><CodeLine lineNumber="4983"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C1 == MinVal)</Highlight></CodeLine>
<Link id="l04984" /><CodeLine lineNumber="4984"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac2624b648ddca964183d631c8d189595">getBoolConstant</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, dl, VT, OpVT);</Highlight></CodeLine>
<Link id="l04985" /><CodeLine lineNumber="4985"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04986" /><CodeLine lineNumber="4986"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>()) &#123; </Highlight><Highlight kind="comment">// TODO: Support this for vectors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04987" /><CodeLine lineNumber="4987"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// X &gt;= C0 --&gt; X &gt; (C0 - 1)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l04988" /><CodeLine lineNumber="4988"><Highlight kind="normal">        APInt <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = C1 - 1;</Highlight></CodeLine>
<Link id="l04989" /><CodeLine lineNumber="4989"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> NewCC = (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a7f47862de23f7210f88ccf98ae1efbe4">ISD::SETGE</a>) ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a> : ISD::<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">SETUGT</a>;</Highlight></CodeLine>
<Link id="l04990" /><CodeLine lineNumber="4990"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((DCI.isBeforeLegalizeOps() ||</Highlight></CodeLine>
<Link id="l04991" /><CodeLine lineNumber="4991"><Highlight kind="normal">             <a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(NewCC, OpVT.<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>())) &amp;&amp;</Highlight></CodeLine>
<Link id="l04992" /><CodeLine lineNumber="4992"><Highlight kind="normal">            (!N1C-&gt;isOpaque() || (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>.getBitWidth() &lt;= 64 &amp;&amp;</Highlight></CodeLine>
<Link id="l04993" /><CodeLine lineNumber="4993"><Highlight kind="normal">                                  <a href="/docs/api/classes/llvm/targetloweringbase/#a1946f350ff6d981eb8ec0f7f044625fd">isLegalICmpImmediate</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>.getSExtValue())))) &#123;</Highlight></CodeLine>
<Link id="l04994" /><CodeLine lineNumber="4994"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0,</Highlight></CodeLine>
<Link id="l04995" /><CodeLine lineNumber="4995"><Highlight kind="normal">                              DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, dl, N1.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()),</Highlight></CodeLine>
<Link id="l04996" /><CodeLine lineNumber="4996"><Highlight kind="normal">                              NewCC);</Highlight></CodeLine>
<Link id="l04997" /><CodeLine lineNumber="4997"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l04998" /><CodeLine lineNumber="4998"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l04999" /><CodeLine lineNumber="4999"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05000" /><CodeLine lineNumber="5000"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05001" /><CodeLine lineNumber="5001"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ab49f81c2ecbbff3d0fbe55dd46353774">ISD::SETLE</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a>) &#123;</Highlight></CodeLine>
<Link id="l05002" /><CodeLine lineNumber="5002"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// X &lt;= MAX --&gt; true</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05003" /><CodeLine lineNumber="5003"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C1 == MaxVal)</Highlight></CodeLine>
<Link id="l05004" /><CodeLine lineNumber="5004"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac2624b648ddca964183d631c8d189595">getBoolConstant</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, dl, VT, OpVT);</Highlight></CodeLine>
<Link id="l05005" /><CodeLine lineNumber="5005"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05006" /><CodeLine lineNumber="5006"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// X &lt;= C0 --&gt; X &lt; (C0 + 1)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05007" /><CodeLine lineNumber="5007"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>()) &#123; </Highlight><Highlight kind="comment">// TODO: Support this for vectors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05008" /><CodeLine lineNumber="5008"><Highlight kind="normal">        APInt <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = C1 + 1;</Highlight></CodeLine>
<Link id="l05009" /><CodeLine lineNumber="5009"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> NewCC = (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ab49f81c2ecbbff3d0fbe55dd46353774">ISD::SETLE</a>) ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a> : ISD::<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">SETULT</a>;</Highlight></CodeLine>
<Link id="l05010" /><CodeLine lineNumber="5010"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((DCI.isBeforeLegalizeOps() ||</Highlight></CodeLine>
<Link id="l05011" /><CodeLine lineNumber="5011"><Highlight kind="normal">             <a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(NewCC, OpVT.<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>())) &amp;&amp;</Highlight></CodeLine>
<Link id="l05012" /><CodeLine lineNumber="5012"><Highlight kind="normal">            (!N1C-&gt;isOpaque() || (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>.getBitWidth() &lt;= 64 &amp;&amp;</Highlight></CodeLine>
<Link id="l05013" /><CodeLine lineNumber="5013"><Highlight kind="normal">                                  <a href="/docs/api/classes/llvm/targetloweringbase/#a1946f350ff6d981eb8ec0f7f044625fd">isLegalICmpImmediate</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>.getSExtValue())))) &#123;</Highlight></CodeLine>
<Link id="l05014" /><CodeLine lineNumber="5014"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0,</Highlight></CodeLine>
<Link id="l05015" /><CodeLine lineNumber="5015"><Highlight kind="normal">                              DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, dl, N1.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()),</Highlight></CodeLine>
<Link id="l05016" /><CodeLine lineNumber="5016"><Highlight kind="normal">                              NewCC);</Highlight></CodeLine>
<Link id="l05017" /><CodeLine lineNumber="5017"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l05018" /><CodeLine lineNumber="5018"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05019" /><CodeLine lineNumber="5019"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05020" /><CodeLine lineNumber="5020"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05021" /><CodeLine lineNumber="5021"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>) &#123;</Highlight></CodeLine>
<Link id="l05022" /><CodeLine lineNumber="5022"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C1 == MinVal)</Highlight></CodeLine>
<Link id="l05023" /><CodeLine lineNumber="5023"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac2624b648ddca964183d631c8d189595">getBoolConstant</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, dl, VT, OpVT); </Highlight><Highlight kind="comment">// X &lt; MIN --&gt; false</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05024" /><CodeLine lineNumber="5024"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05025" /><CodeLine lineNumber="5025"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// TODO: Support this for vectors after legalize ops.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05026" /><CodeLine lineNumber="5026"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() || DCI.isBeforeLegalizeOps()) &#123;</Highlight></CodeLine>
<Link id="l05027" /><CodeLine lineNumber="5027"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Canonicalize setlt X, Max --&gt; setne X, Max</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05028" /><CodeLine lineNumber="5028"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C1 == MaxVal)</Highlight></CodeLine>
<Link id="l05029" /><CodeLine lineNumber="5029"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0, N1, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>);</Highlight></CodeLine>
<Link id="l05030" /><CodeLine lineNumber="5030"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05031" /><CodeLine lineNumber="5031"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// If we have setult X, 1, turn it into seteq X, 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05032" /><CodeLine lineNumber="5032"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C1 == MinVal+1)</Highlight></CodeLine>
<Link id="l05033" /><CodeLine lineNumber="5033"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0,</Highlight></CodeLine>
<Link id="l05034" /><CodeLine lineNumber="5034"><Highlight kind="normal">                              DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(MinVal, dl, N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()),</Highlight></CodeLine>
<Link id="l05035" /><CodeLine lineNumber="5035"><Highlight kind="normal">                              <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l05036" /><CodeLine lineNumber="5036"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05037" /><CodeLine lineNumber="5037"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05038" /><CodeLine lineNumber="5038"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05039" /><CodeLine lineNumber="5039"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a>) &#123;</Highlight></CodeLine>
<Link id="l05040" /><CodeLine lineNumber="5040"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C1 == MaxVal)</Highlight></CodeLine>
<Link id="l05041" /><CodeLine lineNumber="5041"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac2624b648ddca964183d631c8d189595">getBoolConstant</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, dl, VT, OpVT); </Highlight><Highlight kind="comment">// X &gt; MAX --&gt; false</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05042" /><CodeLine lineNumber="5042"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05043" /><CodeLine lineNumber="5043"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// TODO: Support this for vectors after legalize ops.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05044" /><CodeLine lineNumber="5044"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() || DCI.isBeforeLegalizeOps()) &#123;</Highlight></CodeLine>
<Link id="l05045" /><CodeLine lineNumber="5045"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Canonicalize setgt X, Min --&gt; setne X, Min</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05046" /><CodeLine lineNumber="5046"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C1 == MinVal)</Highlight></CodeLine>
<Link id="l05047" /><CodeLine lineNumber="5047"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0, N1, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>);</Highlight></CodeLine>
<Link id="l05048" /><CodeLine lineNumber="5048"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05049" /><CodeLine lineNumber="5049"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// If we have setugt X, Max-1, turn it into seteq X, Max</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05050" /><CodeLine lineNumber="5050"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C1 == MaxVal-1)</Highlight></CodeLine>
<Link id="l05051" /><CodeLine lineNumber="5051"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0,</Highlight></CodeLine>
<Link id="l05052" /><CodeLine lineNumber="5052"><Highlight kind="normal">                              DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(MaxVal, dl, N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()),</Highlight></CodeLine>
<Link id="l05053" /><CodeLine lineNumber="5053"><Highlight kind="normal">                              <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l05054" /><CodeLine lineNumber="5054"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05055" /><CodeLine lineNumber="5055"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05056" /><CodeLine lineNumber="5056"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05057" /><CodeLine lineNumber="5057"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>) &#123;</Highlight></CodeLine>
<Link id="l05058" /><CodeLine lineNumber="5058"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// (X &amp; (C l&gt;&gt;/&lt;&lt; Y)) ==/!= 0  --&gt;  ((X &lt;&lt;/l&gt;&gt; Y) &amp; C) ==/!= 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05059" /><CodeLine lineNumber="5059"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C1.<a href="/docs/api/classes/llvm/apint/#a49cd5939942c6665aba4cae8c220dff1">isZero</a>())</Highlight></CodeLine>
<Link id="l05060" /><CodeLine lineNumber="5060"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> = optimizeSetCCByHoistingAndByConstFromLogicalShift(</Highlight></CodeLine>
<Link id="l05061" /><CodeLine lineNumber="5061"><Highlight kind="normal">                VT, N0, N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, DCI, dl))</Highlight></CodeLine>
<Link id="l05062" /><CodeLine lineNumber="5062"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>;</Highlight></CodeLine>
<Link id="l05063" /><CodeLine lineNumber="5063"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05064" /><CodeLine lineNumber="5064"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// For all/any comparisons, replace or(x,shl(y,bw/2)) with and/or(x,y).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05065" /><CodeLine lineNumber="5065"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// For example, when high 32-bits of i64 X are known clear:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05066" /><CodeLine lineNumber="5066"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// all bits clear: (X | (Y&lt;&lt;32)) ==  0 --&gt; (X | Y) ==  0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05067" /><CodeLine lineNumber="5067"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// all bits set:   (X | (Y&lt;&lt;32)) == -1 --&gt; (X &amp; Y) == -1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05068" /><CodeLine lineNumber="5068"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> CmpZero = N1C-&gt;isZero();</Highlight></CodeLine>
<Link id="l05069" /><CodeLine lineNumber="5069"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> CmpNegOne = N1C-&gt;isAllOnes();</Highlight></CodeLine>
<Link id="l05070" /><CodeLine lineNumber="5070"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((CmpZero || CmpNegOne) &amp;&amp; N0.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>()) &#123;</Highlight></CodeLine>
<Link id="l05071" /><CodeLine lineNumber="5071"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Match or(lo,shl(hi,bw/2)) pattern.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05072" /><CodeLine lineNumber="5072"><Highlight kind="normal">        </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> IsConcat = &#91;&amp;&#93;(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>) &#123;</Highlight></CodeLine>
<Link id="l05073" /><CodeLine lineNumber="5073"><Highlight kind="normal">          </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> EltBits = <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>.getScalarValueSizeInBits();</Highlight></CodeLine>
<Link id="l05074" /><CodeLine lineNumber="5074"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>.getOpcode() != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a> || (EltBits % 2) != 0)</Highlight></CodeLine>
<Link id="l05075" /><CodeLine lineNumber="5075"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05076" /><CodeLine lineNumber="5076"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l05077" /><CodeLine lineNumber="5077"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l05078" /><CodeLine lineNumber="5078"><Highlight kind="normal">          APInt HiBits = <a href="/docs/api/classes/llvm/apint/#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(EltBits, EltBits / 2);</Highlight></CodeLine>
<Link id="l05079" /><CodeLine lineNumber="5079"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Unshifted element must have zero upperbits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05080" /><CodeLine lineNumber="5080"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l05081" /><CodeLine lineNumber="5081"><Highlight kind="normal">              <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantSDNode&gt;</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.getOperand(1)) &amp;&amp;</Highlight></CodeLine>
<Link id="l05082" /><CodeLine lineNumber="5082"><Highlight kind="normal">              <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.getConstantOperandAPInt(1) == (EltBits / 2) &amp;&amp;</Highlight></CodeLine>
<Link id="l05083" /><CodeLine lineNumber="5083"><Highlight kind="normal">              DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad5386f4196a9eab5701c451469f2e20e">MaskedValueIsZero</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, HiBits)) &#123;</Highlight></CodeLine>
<Link id="l05084" /><CodeLine lineNumber="5084"><Highlight kind="normal">            <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>;</Highlight></CodeLine>
<Link id="l05085" /><CodeLine lineNumber="5085"><Highlight kind="normal">            <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l05086" /><CodeLine lineNumber="5086"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05087" /><CodeLine lineNumber="5087"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l05088" /><CodeLine lineNumber="5088"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l05089" /><CodeLine lineNumber="5089"><Highlight kind="normal">              <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantSDNode&gt;</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getOperand(1)) &amp;&amp;</Highlight></CodeLine>
<Link id="l05090" /><CodeLine lineNumber="5090"><Highlight kind="normal">              <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getConstantOperandAPInt(1) == (EltBits / 2) &amp;&amp;</Highlight></CodeLine>
<Link id="l05091" /><CodeLine lineNumber="5091"><Highlight kind="normal">              DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad5386f4196a9eab5701c451469f2e20e">MaskedValueIsZero</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, HiBits)) &#123;</Highlight></CodeLine>
<Link id="l05092" /><CodeLine lineNumber="5092"><Highlight kind="normal">            <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</Highlight></CodeLine>
<Link id="l05093" /><CodeLine lineNumber="5093"><Highlight kind="normal">            <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l05094" /><CodeLine lineNumber="5094"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05095" /><CodeLine lineNumber="5095"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l05096" /><CodeLine lineNumber="5096"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05097" /><CodeLine lineNumber="5097"><Highlight kind="normal">        &#125;;</Highlight></CodeLine>
<Link id="l05098" /><CodeLine lineNumber="5098"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05099" /><CodeLine lineNumber="5099"><Highlight kind="normal">        </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> MergeConcat = &#91;&amp;&#93;(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>) &#123;</Highlight></CodeLine>
<Link id="l05100" /><CodeLine lineNumber="5100"><Highlight kind="normal">          </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> EltBits = N0.<a href="/docs/api/classes/llvm/sdvalue/#abd46b9ca1d156bc7e3dd9150cc106a28">getScalarValueSizeInBits</a>();</Highlight></CodeLine>
<Link id="l05101" /><CodeLine lineNumber="5101"><Highlight kind="normal">          </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> HalfBits = EltBits / 2;</Highlight></CodeLine>
<Link id="l05102" /><CodeLine lineNumber="5102"><Highlight kind="normal">          APInt HiBits = <a href="/docs/api/classes/llvm/apint/#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(EltBits, HalfBits);</Highlight></CodeLine>
<Link id="l05103" /><CodeLine lineNumber="5103"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LoBits = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(~HiBits, dl, OpVT);</Highlight></CodeLine>
<Link id="l05104" /><CodeLine lineNumber="5104"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> HiMask = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, OpVT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, LoBits);</Highlight></CodeLine>
<Link id="l05105" /><CodeLine lineNumber="5105"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewN0 =</Highlight></CodeLine>
<Link id="l05106" /><CodeLine lineNumber="5106"><Highlight kind="normal">              DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(CmpZero ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, OpVT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, HiMask);</Highlight></CodeLine>
<Link id="l05107" /><CodeLine lineNumber="5107"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewN1 = CmpZero ? DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, OpVT) : LoBits;</Highlight></CodeLine>
<Link id="l05108" /><CodeLine lineNumber="5108"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, NewN0, NewN1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l05109" /><CodeLine lineNumber="5109"><Highlight kind="normal">        &#125;;</Highlight></CodeLine>
<Link id="l05110" /><CodeLine lineNumber="5110"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05111" /><CodeLine lineNumber="5111"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>;</Highlight></CodeLine>
<Link id="l05112" /><CodeLine lineNumber="5112"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsConcat(N0, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>))</Highlight></CodeLine>
<Link id="l05113" /><CodeLine lineNumber="5113"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> MergeConcat(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>);</Highlight></CodeLine>
<Link id="l05114" /><CodeLine lineNumber="5114"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05115" /><CodeLine lineNumber="5115"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a> || N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>) &#123;</Highlight></CodeLine>
<Link id="l05116" /><CodeLine lineNumber="5116"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Lo0, Lo1, Hi0, Hi1;</Highlight></CodeLine>
<Link id="l05117" /><CodeLine lineNumber="5117"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsConcat(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), Lo0, Hi0) &amp;&amp;</Highlight></CodeLine>
<Link id="l05118" /><CodeLine lineNumber="5118"><Highlight kind="normal">              IsConcat(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1), Lo1, Hi1)) &#123;</Highlight></CodeLine>
<Link id="l05119" /><CodeLine lineNumber="5119"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> MergeConcat(DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>(), dl, OpVT, Lo0, Lo1),</Highlight></CodeLine>
<Link id="l05120" /><CodeLine lineNumber="5120"><Highlight kind="normal">                               DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>(), dl, OpVT, Hi0, Hi1));</Highlight></CodeLine>
<Link id="l05121" /><CodeLine lineNumber="5121"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l05122" /><CodeLine lineNumber="5122"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l05123" /><CodeLine lineNumber="5123"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05124" /><CodeLine lineNumber="5124"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05125" /><CodeLine lineNumber="5125"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05126" /><CodeLine lineNumber="5126"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we have &quot;setcc X, C0&quot;, check to see if we can shrink the immediate</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05127" /><CodeLine lineNumber="5127"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// by changing cc.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05128" /><CodeLine lineNumber="5128"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO: Support this for vectors after legalize ops.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05129" /><CodeLine lineNumber="5129"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() || DCI.isBeforeLegalizeOps()) &#123;</Highlight></CodeLine>
<Link id="l05130" /><CodeLine lineNumber="5130"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// SETUGT X, SINTMAX  -&gt; SETLT X, 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05131" /><CodeLine lineNumber="5131"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// SETUGE X, SINTMIN -&gt; SETLT X, 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05132" /><CodeLine lineNumber="5132"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a> &amp;&amp; C1.<a href="/docs/api/classes/llvm/apint/#ac8099bedfdef48644386b16230fef2e5">isMaxSignedValue</a>()) ||</Highlight></CodeLine>
<Link id="l05133" /><CodeLine lineNumber="5133"><Highlight kind="normal">          (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">ISD::SETUGE</a> &amp;&amp; C1.<a href="/docs/api/classes/llvm/apint/#a1f04e382556a817950fd0390aeaf9b0e">isMinSignedValue</a>()))</Highlight></CodeLine>
<Link id="l05134" /><CodeLine lineNumber="5134"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0,</Highlight></CodeLine>
<Link id="l05135" /><CodeLine lineNumber="5135"><Highlight kind="normal">                            DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, N1.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()),</Highlight></CodeLine>
<Link id="l05136" /><CodeLine lineNumber="5136"><Highlight kind="normal">                            <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l05137" /><CodeLine lineNumber="5137"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05138" /><CodeLine lineNumber="5138"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// SETULT X, SINTMIN  -&gt; SETGT X, -1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05139" /><CodeLine lineNumber="5139"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// SETULE X, SINTMAX  -&gt; SETGT X, -1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05140" /><CodeLine lineNumber="5140"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a> &amp;&amp; C1.<a href="/docs/api/classes/llvm/apint/#a1f04e382556a817950fd0390aeaf9b0e">isMinSignedValue</a>()) ||</Highlight></CodeLine>
<Link id="l05141" /><CodeLine lineNumber="5141"><Highlight kind="normal">          (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a> &amp;&amp; C1.<a href="/docs/api/classes/llvm/apint/#ac8099bedfdef48644386b16230fef2e5">isMaxSignedValue</a>()))</Highlight></CodeLine>
<Link id="l05142" /><CodeLine lineNumber="5142"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0,</Highlight></CodeLine>
<Link id="l05143" /><CodeLine lineNumber="5143"><Highlight kind="normal">                            DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1b134112bb3b8986d8082832a16eab6f">getAllOnesConstant</a>(dl, N1.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()),</Highlight></CodeLine>
<Link id="l05144" /><CodeLine lineNumber="5144"><Highlight kind="normal">                            <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a>);</Highlight></CodeLine>
<Link id="l05145" /><CodeLine lineNumber="5145"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05146" /><CodeLine lineNumber="5146"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05147" /><CodeLine lineNumber="5147"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05148" /><CodeLine lineNumber="5148"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Back to non-vector simplifications.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05149" /><CodeLine lineNumber="5149"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: Can we do these for vector splats?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05150" /><CodeLine lineNumber="5150"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;N1C = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(N1.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>())) &#123;</Highlight></CodeLine>
<Link id="l05151" /><CodeLine lineNumber="5151"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;C1 = N1C-&gt;getAPIntValue();</Highlight></CodeLine>
<Link id="l05152" /><CodeLine lineNumber="5152"><Highlight kind="normal">    EVT ShValTy = N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l05153" /><CodeLine lineNumber="5153"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05154" /><CodeLine lineNumber="5154"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Fold bit comparisons when we can. This will result in an</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05155" /><CodeLine lineNumber="5155"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// incorrect value when boolean false is negative one, unless</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05156" /><CodeLine lineNumber="5156"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the bitsize is 1 in which case the false value is the same</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05157" /><CodeLine lineNumber="5157"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// in practice regardless of the representation.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05158" /><CodeLine lineNumber="5158"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((VT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() == 1 ||</Highlight></CodeLine>
<Link id="l05159" /><CodeLine lineNumber="5159"><Highlight kind="normal">         <a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()) == <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a0e2d72cfdcc49d2d189f440b3cc31dff">ZeroOrOneBooleanContent</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l05160" /><CodeLine lineNumber="5160"><Highlight kind="normal">        (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l05161" /><CodeLine lineNumber="5161"><Highlight kind="normal">        (VT == ShValTy || (<a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(VT) &amp;&amp; VT.<a href="/docs/api/structs/llvm/evt/#ae67a729c436915221367d8e77412dff4">bitsLE</a>(ShValTy))) &amp;&amp;</Highlight></CodeLine>
<Link id="l05162" /><CodeLine lineNumber="5162"><Highlight kind="normal">        N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>) &#123;</Highlight></CodeLine>
<Link id="l05163" /><CodeLine lineNumber="5163"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;AndRHS = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1))) &#123;</Highlight></CodeLine>
<Link id="l05164" /><CodeLine lineNumber="5164"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a> &amp;&amp; C1 == 0) &#123;</Highlight><Highlight kind="comment">// (X &amp; 8) != 0  --&gt;  (X &amp; 8) &gt;&gt; 3</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05165" /><CodeLine lineNumber="5165"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Perform the xform if the AND RHS is a single bit.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05166" /><CodeLine lineNumber="5166"><Highlight kind="normal">          </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShCt = AndRHS-&gt;getAPIntValue().logBase2();</Highlight></CodeLine>
<Link id="l05167" /><CodeLine lineNumber="5167"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AndRHS-&gt;getAPIntValue().isPowerOf2() &amp;&amp;</Highlight></CodeLine>
<Link id="l05168" /><CodeLine lineNumber="5168"><Highlight kind="normal">              !<a href="/docs/api/classes/llvm/targetloweringbase/#a73287af67238556f601b5255cd6e6274">shouldAvoidTransformToShift</a>(ShValTy, ShCt)) &#123;</Highlight></CodeLine>
<Link id="l05169" /><CodeLine lineNumber="5169"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(</Highlight></CodeLine>
<Link id="l05170" /><CodeLine lineNumber="5170"><Highlight kind="normal">                <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, VT,</Highlight></CodeLine>
<Link id="l05171" /><CodeLine lineNumber="5171"><Highlight kind="normal">                DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, ShValTy, N0,</Highlight></CodeLine>
<Link id="l05172" /><CodeLine lineNumber="5172"><Highlight kind="normal">                            DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(ShCt, ShValTy, dl)));</Highlight></CodeLine>
<Link id="l05173" /><CodeLine lineNumber="5173"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l05174" /><CodeLine lineNumber="5174"><Highlight kind="normal">        &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> &amp;&amp; C1 == AndRHS-&gt;getAPIntValue()) &#123;</Highlight></CodeLine>
<Link id="l05175" /><CodeLine lineNumber="5175"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// (X &amp; 8) == 8  --&gt;  (X &amp; 8) &gt;&gt; 3</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05176" /><CodeLine lineNumber="5176"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Perform the xform if C1 is a single bit.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05177" /><CodeLine lineNumber="5177"><Highlight kind="normal">          </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShCt = C1.<a href="/docs/api/classes/llvm/apint/#aae3b959a0a2981340fd03c29f528f2f0">logBase2</a>();</Highlight></CodeLine>
<Link id="l05178" /><CodeLine lineNumber="5178"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C1.<a href="/docs/api/classes/llvm/apint/#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>() &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#a73287af67238556f601b5255cd6e6274">shouldAvoidTransformToShift</a>(ShValTy, ShCt)) &#123;</Highlight></CodeLine>
<Link id="l05179" /><CodeLine lineNumber="5179"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(</Highlight></CodeLine>
<Link id="l05180" /><CodeLine lineNumber="5180"><Highlight kind="normal">                <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, VT,</Highlight></CodeLine>
<Link id="l05181" /><CodeLine lineNumber="5181"><Highlight kind="normal">                DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, ShValTy, N0,</Highlight></CodeLine>
<Link id="l05182" /><CodeLine lineNumber="5182"><Highlight kind="normal">                            DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(ShCt, ShValTy, dl)));</Highlight></CodeLine>
<Link id="l05183" /><CodeLine lineNumber="5183"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l05184" /><CodeLine lineNumber="5184"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l05185" /><CodeLine lineNumber="5185"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05186" /><CodeLine lineNumber="5186"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05187" /><CodeLine lineNumber="5187"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05188" /><CodeLine lineNumber="5188"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (C1.<a href="/docs/api/classes/llvm/apint/#a9f78d7e839322a6bfc0c665d29052242">getSignificantBits</a>() &lt;= 64 &amp;&amp;</Highlight></CodeLine>
<Link id="l05189" /><CodeLine lineNumber="5189"><Highlight kind="normal">        !<a href="/docs/api/classes/llvm/targetloweringbase/#a1946f350ff6d981eb8ec0f7f044625fd">isLegalICmpImmediate</a>(C1.<a href="/docs/api/classes/llvm/apint/#af2daa0ee117afefed4c82eee55bf97b7">getSExtValue</a>())) &#123;</Highlight></CodeLine>
<Link id="l05190" /><CodeLine lineNumber="5190"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// (X &amp; -256) == 256 -&gt; (X &gt;&gt; 8) == 1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05191" /><CodeLine lineNumber="5191"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l05192" /><CodeLine lineNumber="5192"><Highlight kind="normal">          N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a> &amp;&amp; N0.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>()) &#123;</Highlight></CodeLine>
<Link id="l05193" /><CodeLine lineNumber="5193"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;AndRHS = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1))) &#123;</Highlight></CodeLine>
<Link id="l05194" /><CodeLine lineNumber="5194"><Highlight kind="normal">          </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;AndRHSC = AndRHS-&gt;getAPIntValue();</Highlight></CodeLine>
<Link id="l05195" /><CodeLine lineNumber="5195"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AndRHSC.<a href="/docs/api/classes/llvm/apint/#a1b6b4785fa27be394cf040e543d9fe7c">isNegatedPowerOf2</a>() &amp;&amp; C1.<a href="/docs/api/classes/llvm/apint/#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(AndRHSC)) &#123;</Highlight></CodeLine>
<Link id="l05196" /><CodeLine lineNumber="5196"><Highlight kind="normal">            </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShiftBits = AndRHSC.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>();</Highlight></CodeLine>
<Link id="l05197" /><CodeLine lineNumber="5197"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#a73287af67238556f601b5255cd6e6274">shouldAvoidTransformToShift</a>(ShValTy, ShiftBits)) &#123;</Highlight></CodeLine>
<Link id="l05198" /><CodeLine lineNumber="5198"><Highlight kind="normal">              <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Shift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(</Highlight></CodeLine>
<Link id="l05199" /><CodeLine lineNumber="5199"><Highlight kind="normal">                  <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, ShValTy, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0),</Highlight></CodeLine>
<Link id="l05200" /><CodeLine lineNumber="5200"><Highlight kind="normal">                  DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(ShiftBits, ShValTy, dl));</Highlight></CodeLine>
<Link id="l05201" /><CodeLine lineNumber="5201"><Highlight kind="normal">              <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> CmpRHS = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(C1.<a href="/docs/api/classes/llvm/apint/#af34549c39d6f741fbdaf9a795aa306e9">lshr</a>(ShiftBits), dl, ShValTy);</Highlight></CodeLine>
<Link id="l05202" /><CodeLine lineNumber="5202"><Highlight kind="normal">              </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, Shift, CmpRHS, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l05203" /><CodeLine lineNumber="5203"><Highlight kind="normal">            &#125;</Highlight></CodeLine>
<Link id="l05204" /><CodeLine lineNumber="5204"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l05205" /><CodeLine lineNumber="5205"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l05206" /><CodeLine lineNumber="5206"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">ISD::SETUGE</a> ||</Highlight></CodeLine>
<Link id="l05207" /><CodeLine lineNumber="5207"><Highlight kind="normal">                 <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a>) &#123;</Highlight></CodeLine>
<Link id="l05208" /><CodeLine lineNumber="5208"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AdjOne = (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a>);</Highlight></CodeLine>
<Link id="l05209" /><CodeLine lineNumber="5209"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// X &lt;  4294967296 -&gt; (X &gt;&gt; 32) &lt;  1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05210" /><CodeLine lineNumber="5210"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// X &gt;= 4294967296 -&gt; (X &gt;&gt; 32) &gt;= 1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05211" /><CodeLine lineNumber="5211"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// X &lt;= 4294967295 -&gt; (X &gt;&gt; 32) &lt;  1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05212" /><CodeLine lineNumber="5212"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// X &gt;  4294967295 -&gt; (X &gt;&gt; 32) &gt;= 1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05213" /><CodeLine lineNumber="5213"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShiftBits;</Highlight></CodeLine>
<Link id="l05214" /><CodeLine lineNumber="5214"><Highlight kind="normal">        APInt NewC = C1;</Highlight></CodeLine>
<Link id="l05215" /><CodeLine lineNumber="5215"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> NewCond = <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>;</Highlight></CodeLine>
<Link id="l05216" /><CodeLine lineNumber="5216"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AdjOne) &#123;</Highlight></CodeLine>
<Link id="l05217" /><CodeLine lineNumber="5217"><Highlight kind="normal">          ShiftBits = C1.<a href="/docs/api/classes/llvm/apint/#af34a543ce8585d04c1ae22c78b3182dd">countr&#95;one</a>();</Highlight></CodeLine>
<Link id="l05218" /><CodeLine lineNumber="5218"><Highlight kind="normal">          NewC = NewC + 1;</Highlight></CodeLine>
<Link id="l05219" /><CodeLine lineNumber="5219"><Highlight kind="normal">          NewCond = (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a>) ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a> : ISD::<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">SETUGE</a>;</Highlight></CodeLine>
<Link id="l05220" /><CodeLine lineNumber="5220"><Highlight kind="normal">        &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l05221" /><CodeLine lineNumber="5221"><Highlight kind="normal">          ShiftBits = C1.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>();</Highlight></CodeLine>
<Link id="l05222" /><CodeLine lineNumber="5222"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l05223" /><CodeLine lineNumber="5223"><Highlight kind="normal">        NewC.<a href="/docs/api/classes/llvm/apint/#af338e23a90c301183968435e80cd6a27">lshrInPlace</a>(ShiftBits);</Highlight></CodeLine>
<Link id="l05224" /><CodeLine lineNumber="5224"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ShiftBits &amp;&amp; NewC.<a href="/docs/api/classes/llvm/apint/#a9f78d7e839322a6bfc0c665d29052242">getSignificantBits</a>() &lt;= 64 &amp;&amp;</Highlight></CodeLine>
<Link id="l05225" /><CodeLine lineNumber="5225"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/targetloweringbase/#a1946f350ff6d981eb8ec0f7f044625fd">isLegalICmpImmediate</a>(NewC.<a href="/docs/api/classes/llvm/apint/#af2daa0ee117afefed4c82eee55bf97b7">getSExtValue</a>()) &amp;&amp;</Highlight></CodeLine>
<Link id="l05226" /><CodeLine lineNumber="5226"><Highlight kind="normal">            !<a href="/docs/api/classes/llvm/targetloweringbase/#a73287af67238556f601b5255cd6e6274">shouldAvoidTransformToShift</a>(ShValTy, ShiftBits)) &#123;</Highlight></CodeLine>
<Link id="l05227" /><CodeLine lineNumber="5227"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Shift =</Highlight></CodeLine>
<Link id="l05228" /><CodeLine lineNumber="5228"><Highlight kind="normal">              DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, ShValTy, N0,</Highlight></CodeLine>
<Link id="l05229" /><CodeLine lineNumber="5229"><Highlight kind="normal">                          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(ShiftBits, ShValTy, dl));</Highlight></CodeLine>
<Link id="l05230" /><CodeLine lineNumber="5230"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> CmpRHS = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(NewC, dl, ShValTy);</Highlight></CodeLine>
<Link id="l05231" /><CodeLine lineNumber="5231"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, Shift, CmpRHS, NewCond);</Highlight></CodeLine>
<Link id="l05232" /><CodeLine lineNumber="5232"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l05233" /><CodeLine lineNumber="5233"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05234" /><CodeLine lineNumber="5234"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05235" /><CodeLine lineNumber="5235"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05236" /><CodeLine lineNumber="5236"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05237" /><CodeLine lineNumber="5237"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantFPSDNode&gt;</a>(N0) &amp;&amp; <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantFPSDNode&gt;</a>(N1)) &#123;</Highlight></CodeLine>
<Link id="l05238" /><CodeLine lineNumber="5238"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;CFP = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantFPSDNode&gt;</a>(N1);</Highlight></CodeLine>
<Link id="l05239" /><CodeLine lineNumber="5239"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!CFP-&gt;getValueAPF().isNaN() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Unexpected NaN value&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l05240" /><CodeLine lineNumber="5240"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05241" /><CodeLine lineNumber="5241"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Otherwise, we know the RHS is not a NaN.  Simplify the node to drop the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05242" /><CodeLine lineNumber="5242"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// constant if knowing that the operand is non-nan is enough.  We prefer to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05243" /><CodeLine lineNumber="5243"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// have SETO(x,x) instead of SETO(x, 0.0) because this avoids having to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05244" /><CodeLine lineNumber="5244"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// materialize 0.0.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05245" /><CodeLine lineNumber="5245"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a71f916390487bb109d9968c72553eaf4">ISD::SETO</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a48a334bbe606d5e82c9cd84eaa127b50">ISD::SETUO</a>)</Highlight></CodeLine>
<Link id="l05246" /><CodeLine lineNumber="5246"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0, N0, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l05247" /><CodeLine lineNumber="5247"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05248" /><CodeLine lineNumber="5248"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// setcc (fneg x), C -&gt; setcc swap(pred) x, -C</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05249" /><CodeLine lineNumber="5249"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == ISD::FNEG) &#123;</Highlight></CodeLine>
<Link id="l05250" /><CodeLine lineNumber="5250"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> SwapCond = <a href="/docs/api/namespaces/llvm/isd/#a9cc23aed232ccdeadbd8648c349236a6">ISD::getSetCCSwappedOperands</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l05251" /><CodeLine lineNumber="5251"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DCI.isBeforeLegalizeOps() ||</Highlight></CodeLine>
<Link id="l05252" /><CodeLine lineNumber="5252"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(SwapCond, N0.<a href="/docs/api/classes/llvm/sdvalue/#acbcc973a299b6f8733774668210b5227">getSimpleValueType</a>())) &#123;</Highlight></CodeLine>
<Link id="l05253" /><CodeLine lineNumber="5253"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NegN1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::FNEG, dl, N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>(), N1);</Highlight></CodeLine>
<Link id="l05254" /><CodeLine lineNumber="5254"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), NegN1, SwapCond);</Highlight></CodeLine>
<Link id="l05255" /><CodeLine lineNumber="5255"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05256" /><CodeLine lineNumber="5256"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05257" /><CodeLine lineNumber="5257"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05258" /><CodeLine lineNumber="5258"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// setueq/setoeq X, (fabs Inf) -&gt; is&#95;fpclass X, fcInf</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05259" /><CodeLine lineNumber="5259"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a76b6d3008e806ea613323ff316ef72c3">ISD::IS&#95;FPCLASS</a>, N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()) &amp;&amp;</Highlight></CodeLine>
<Link id="l05260" /><CodeLine lineNumber="5260"><Highlight kind="normal">        !<a href="/docs/api/classes/llvm/targetloweringbase/#a4e3b2ed6083b7fea6eab416afa82783b">isFPImmLegal</a>(CFP-&gt;getValueAPF(), CFP-&gt;getValueType(0))) &#123;</Highlight></CodeLine>
<Link id="l05261" /><CodeLine lineNumber="5261"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsFabs = N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == ISD::FABS;</Highlight></CodeLine>
<Link id="l05262" /><CodeLine lineNumber="5262"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = IsFabs ? N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0) : N0;</Highlight></CodeLine>
<Link id="l05263" /><CodeLine lineNumber="5263"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a08c31033acfb9d6f0bc4a8a82cc26862">ISD::SETOEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a0deb50cd2f3f8e4a94eef4cdf769b848">ISD::SETUEQ</a>) &amp;&amp; CFP-&gt;isInfinity()) &#123;</Highlight></CodeLine>
<Link id="l05264" /><CodeLine lineNumber="5264"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1d">FPClassTest</a> <a href="/docs/api/namespaces/llvm/mcid/#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a> = CFP-&gt;isNegative() ? (IsFabs ? <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da4759a508982cd525d9f17024f09aea22">fcNone</a> : <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da3ab665df1666568d7eac3b1373106638">fcNegInf</a>)</Highlight></CodeLine>
<Link id="l05265" /><CodeLine lineNumber="5265"><Highlight kind="normal">                                             : (IsFabs ? <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da00a4419741933f5cb7ec001aaa6e6bb5">fcInf</a> : <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dada0d259988860d7a2f882aa40b25fee1">fcPosInf</a>);</Highlight></CodeLine>
<Link id="l05266" /><CodeLine lineNumber="5266"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a0deb50cd2f3f8e4a94eef4cdf769b848">ISD::SETUEQ</a>)</Highlight></CodeLine>
<Link id="l05267" /><CodeLine lineNumber="5267"><Highlight kind="normal">          Flag |= <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dafe1646e5477c571f7791c524b54b11fe">fcNan</a>;</Highlight></CodeLine>
<Link id="l05268" /><CodeLine lineNumber="5268"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a76b6d3008e806ea613323ff316ef72c3">ISD::IS&#95;FPCLASS</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l05269" /><CodeLine lineNumber="5269"><Highlight kind="normal">                           DAG.<a href="/docs/api/classes/llvm/selectiondag/#abf892d1e00a3d79026c5ab518c187c45">getTargetConstant</a>(Flag, dl, MVT::i32));</Highlight></CodeLine>
<Link id="l05270" /><CodeLine lineNumber="5270"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05271" /><CodeLine lineNumber="5271"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05272" /><CodeLine lineNumber="5272"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05273" /><CodeLine lineNumber="5273"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the condition is not legal, see if we can find an equivalent one</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05274" /><CodeLine lineNumber="5274"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// which is legal.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05275" /><CodeLine lineNumber="5275"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, N0.<a href="/docs/api/classes/llvm/sdvalue/#acbcc973a299b6f8733774668210b5227">getSimpleValueType</a>())) &#123;</Highlight></CodeLine>
<Link id="l05276" /><CodeLine lineNumber="5276"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If the comparison was an awkward floating-point == or != and one of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05277" /><CodeLine lineNumber="5277"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// the comparison operands is infinity or negative infinity, convert the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05278" /><CodeLine lineNumber="5278"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// condition to a less-awkward &lt;= or &gt;=.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05279" /><CodeLine lineNumber="5279"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CFP-&gt;getValueAPF().isInfinity()) &#123;</Highlight></CodeLine>
<Link id="l05280" /><CodeLine lineNumber="5280"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsNegInf = CFP-&gt;getValueAPF().isNegative();</Highlight></CodeLine>
<Link id="l05281" /><CodeLine lineNumber="5281"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> NewCond = <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07aeded54fe1be320194e9ff0f5825df0e5">ISD::SETCC&#95;INVALID</a>;</Highlight></CodeLine>
<Link id="l05282" /><CodeLine lineNumber="5282"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>) &#123;</Highlight></CodeLine>
<Link id="l05283" /><CodeLine lineNumber="5283"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a08c31033acfb9d6f0bc4a8a82cc26862">ISD::SETOEQ</a>: NewCond = IsNegInf ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a1febf3bac2f3d7d98ec19f1ff5c385ea">ISD::SETOLE</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac7bb30d4918c1ee9dd208083154e109f">ISD::SETOGE</a>; </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05284" /><CodeLine lineNumber="5284"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a0deb50cd2f3f8e4a94eef4cdf769b848">ISD::SETUEQ</a>: NewCond = IsNegInf ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">ISD::SETUGE</a>; </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05285" /><CodeLine lineNumber="5285"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a0d1546187d4d526fcbdd43183689075e">ISD::SETUNE</a>: NewCond = IsNegInf ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>; </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05286" /><CodeLine lineNumber="5286"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a57c68bf7ef20bd558854a24d5b0c1e72">ISD::SETONE</a>: NewCond = IsNegInf ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a31d1e24e08b255d6aa290d67d16ce2c9">ISD::SETOGT</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a20257a4d3833cf88afd42caeaed70dde">ISD::SETOLT</a>; </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05287" /><CodeLine lineNumber="5287"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05288" /><CodeLine lineNumber="5288"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l05289" /><CodeLine lineNumber="5289"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NewCond != <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07aeded54fe1be320194e9ff0f5825df0e5">ISD::SETCC&#95;INVALID</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l05290" /><CodeLine lineNumber="5290"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(NewCond, N0.<a href="/docs/api/classes/llvm/sdvalue/#acbcc973a299b6f8733774668210b5227">getSimpleValueType</a>()))</Highlight></CodeLine>
<Link id="l05291" /><CodeLine lineNumber="5291"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0, N1, NewCond);</Highlight></CodeLine>
<Link id="l05292" /><CodeLine lineNumber="5292"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05293" /><CodeLine lineNumber="5293"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05294" /><CodeLine lineNumber="5294"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05295" /><CodeLine lineNumber="5295"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05296" /><CodeLine lineNumber="5296"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0 == N1) &#123;</Highlight></CodeLine>
<Link id="l05297" /><CodeLine lineNumber="5297"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The sext(setcc()) =&gt; setcc() optimization relies on the appropriate</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05298" /><CodeLine lineNumber="5298"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// constant being emitted.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05299" /><CodeLine lineNumber="5299"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>().<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l05300" /><CodeLine lineNumber="5300"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;Integer types should be handled by FoldSetCC&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l05301" /><CodeLine lineNumber="5301"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05302" /><CodeLine lineNumber="5302"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> EqTrue = <a href="/docs/api/namespaces/llvm/isd/#a6eaea873272c138c801dae8542b1be46">ISD::isTrueWhenEqual</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l05303" /><CodeLine lineNumber="5303"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> UOF = <a href="/docs/api/namespaces/llvm/isd/#a7cfab76369f71a9f62a02815c5aa0777">ISD::getUnorderedFlavor</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l05304" /><CodeLine lineNumber="5304"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UOF == 2) </Highlight><Highlight kind="comment">// FP operators that are undefined on NaNs.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05305" /><CodeLine lineNumber="5305"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac2624b648ddca964183d631c8d189595">getBoolConstant</a>(EqTrue, dl, VT, OpVT);</Highlight></CodeLine>
<Link id="l05306" /><CodeLine lineNumber="5306"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UOF == </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal">(EqTrue))</Highlight></CodeLine>
<Link id="l05307" /><CodeLine lineNumber="5307"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac2624b648ddca964183d631c8d189595">getBoolConstant</a>(EqTrue, dl, VT, OpVT);</Highlight></CodeLine>
<Link id="l05308" /><CodeLine lineNumber="5308"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Otherwise, we can&#39;t fold it.  However, we can simplify it to SETUO/SETO</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05309" /><CodeLine lineNumber="5309"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// if it is not already.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05310" /><CodeLine lineNumber="5310"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> NewCond = UOF == 0 ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a71f916390487bb109d9968c72553eaf4">ISD::SETO</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a48a334bbe606d5e82c9cd84eaa127b50">ISD::SETUO</a>;</Highlight></CodeLine>
<Link id="l05311" /><CodeLine lineNumber="5311"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NewCond != <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l05312" /><CodeLine lineNumber="5312"><Highlight kind="normal">        (DCI.isBeforeLegalizeOps() ||</Highlight></CodeLine>
<Link id="l05313" /><CodeLine lineNumber="5313"><Highlight kind="normal">                            <a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(NewCond, N0.<a href="/docs/api/classes/llvm/sdvalue/#acbcc973a299b6f8733774668210b5227">getSimpleValueType</a>())))</Highlight></CodeLine>
<Link id="l05314" /><CodeLine lineNumber="5314"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0, N1, NewCond);</Highlight></CodeLine>
<Link id="l05315" /><CodeLine lineNumber="5315"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05316" /><CodeLine lineNumber="5316"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05317" /><CodeLine lineNumber="5317"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ~X &gt; ~Y --&gt; Y &gt; X</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05318" /><CodeLine lineNumber="5318"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ~X &lt; ~Y --&gt; Y &lt; X</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05319" /><CodeLine lineNumber="5319"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ~X &lt; C --&gt; X &gt; ~C</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05320" /><CodeLine lineNumber="5320"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ~X &gt; C --&gt; X &lt; ~C</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05321" /><CodeLine lineNumber="5321"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/namespaces/llvm/isd/#aae86ddfa346964171caa61f29d46294b">isSignedIntSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>) || <a href="/docs/api/namespaces/llvm/isd/#adb237925346ec53b00d3c82a42311318">isUnsignedIntSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>)) &amp;&amp;</Highlight></CodeLine>
<Link id="l05322" /><CodeLine lineNumber="5322"><Highlight kind="normal">      N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>().<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>()) &#123;</Highlight></CodeLine>
<Link id="l05323" /><CodeLine lineNumber="5323"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a673c00ccea29abc2bab001b9c84603d1">isBitwiseNot</a>(N0)) &#123;</Highlight></CodeLine>
<Link id="l05324" /><CodeLine lineNumber="5324"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a673c00ccea29abc2bab001b9c84603d1">isBitwiseNot</a>(N1))</Highlight></CodeLine>
<Link id="l05325" /><CodeLine lineNumber="5325"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N1.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l05326" /><CodeLine lineNumber="5326"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05327" /><CodeLine lineNumber="5327"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DAG.<a href="/docs/api/classes/llvm/selectiondag/#a25f268d098eb2425d10532c2184ee8b6">isConstantIntBuildVectorOrConstantInt</a>(N1) &amp;&amp;</Highlight></CodeLine>
<Link id="l05328" /><CodeLine lineNumber="5328"><Highlight kind="normal">          !DAG.<a href="/docs/api/classes/llvm/selectiondag/#a25f268d098eb2425d10532c2184ee8b6">isConstantIntBuildVectorOrConstantInt</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0))) &#123;</Highlight></CodeLine>
<Link id="l05329" /><CodeLine lineNumber="5329"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/sdpatternmatch/#aee6b56ccafeac80e7ebd6b84ee5048c1">Not</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(dl, N1, OpVT);</Highlight></CodeLine>
<Link id="l05330" /><CodeLine lineNumber="5330"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, Not, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l05331" /><CodeLine lineNumber="5331"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05332" /><CodeLine lineNumber="5332"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05333" /><CodeLine lineNumber="5333"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05334" /><CodeLine lineNumber="5334"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05335" /><CodeLine lineNumber="5335"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l05336" /><CodeLine lineNumber="5336"><Highlight kind="normal">      N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>().<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>()) &#123;</Highlight></CodeLine>
<Link id="l05337" /><CodeLine lineNumber="5337"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a> || N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a> ||</Highlight></CodeLine>
<Link id="l05338" /><CodeLine lineNumber="5338"><Highlight kind="normal">        N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>) &#123;</Highlight></CodeLine>
<Link id="l05339" /><CodeLine lineNumber="5339"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Simplify (X+Y) == (X+Z) --&gt;  Y == Z</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05340" /><CodeLine lineNumber="5340"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == N1.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>()) &#123;</Highlight></CodeLine>
<Link id="l05341" /><CodeLine lineNumber="5341"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0) == N1.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0))</Highlight></CodeLine>
<Link id="l05342" /><CodeLine lineNumber="5342"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1), N1.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1), <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l05343" /><CodeLine lineNumber="5343"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1) == N1.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1))</Highlight></CodeLine>
<Link id="l05344" /><CodeLine lineNumber="5344"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), N1.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l05345" /><CodeLine lineNumber="5345"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a4c3a10f878938b827a268d6ab66dbb77">isCommutativeBinOp</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>())) &#123;</Highlight></CodeLine>
<Link id="l05346" /><CodeLine lineNumber="5346"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// If X op Y == Y op X, try other combinations.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05347" /><CodeLine lineNumber="5347"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0) == N1.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1))</Highlight></CodeLine>
<Link id="l05348" /><CodeLine lineNumber="5348"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1), N1.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0),</Highlight></CodeLine>
<Link id="l05349" /><CodeLine lineNumber="5349"><Highlight kind="normal">                                <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l05350" /><CodeLine lineNumber="5350"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1) == N1.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0))</Highlight></CodeLine>
<Link id="l05351" /><CodeLine lineNumber="5351"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0), N1.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1),</Highlight></CodeLine>
<Link id="l05352" /><CodeLine lineNumber="5352"><Highlight kind="normal">                                <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l05353" /><CodeLine lineNumber="5353"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l05354" /><CodeLine lineNumber="5354"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05355" /><CodeLine lineNumber="5355"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05356" /><CodeLine lineNumber="5356"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If RHS is a legal immediate value for a compare instruction, we need</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05357" /><CodeLine lineNumber="5357"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// to be careful about increasing register pressure needlessly.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05358" /><CodeLine lineNumber="5358"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> LegalRHSImm = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05359" /><CodeLine lineNumber="5359"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05360" /><CodeLine lineNumber="5360"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;RHSC = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(N1)) &#123;</Highlight></CodeLine>
<Link id="l05361" /><CodeLine lineNumber="5361"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;LHSR = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1))) &#123;</Highlight></CodeLine>
<Link id="l05362" /><CodeLine lineNumber="5362"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Turn (X+C1) == C2 --&gt; X == C2-C1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05363" /><CodeLine lineNumber="5363"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a> &amp;&amp; N0.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>()-&gt;<a href="/docs/api/classes/llvm/sdnode/#a295d0b84f4e63438c0edb0021c41d47a">hasOneUse</a>())</Highlight></CodeLine>
<Link id="l05364" /><CodeLine lineNumber="5364"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(</Highlight></CodeLine>
<Link id="l05365" /><CodeLine lineNumber="5365"><Highlight kind="normal">                dl, VT, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0),</Highlight></CodeLine>
<Link id="l05366" /><CodeLine lineNumber="5366"><Highlight kind="normal">                DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(RHSC-&gt;getAPIntValue() - LHSR-&gt;getAPIntValue(),</Highlight></CodeLine>
<Link id="l05367" /><CodeLine lineNumber="5367"><Highlight kind="normal">                                dl, N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()),</Highlight></CodeLine>
<Link id="l05368" /><CodeLine lineNumber="5368"><Highlight kind="normal">                <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l05369" /><CodeLine lineNumber="5369"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05370" /><CodeLine lineNumber="5370"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Turn (X^C1) == C2 --&gt; X == C1^C2</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05371" /><CodeLine lineNumber="5371"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a> &amp;&amp; N0.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>()-&gt;<a href="/docs/api/classes/llvm/sdnode/#a295d0b84f4e63438c0edb0021c41d47a">hasOneUse</a>())</Highlight></CodeLine>
<Link id="l05372" /><CodeLine lineNumber="5372"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(</Highlight></CodeLine>
<Link id="l05373" /><CodeLine lineNumber="5373"><Highlight kind="normal">                dl, VT, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0),</Highlight></CodeLine>
<Link id="l05374" /><CodeLine lineNumber="5374"><Highlight kind="normal">                DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(LHSR-&gt;getAPIntValue() ^ RHSC-&gt;getAPIntValue(),</Highlight></CodeLine>
<Link id="l05375" /><CodeLine lineNumber="5375"><Highlight kind="normal">                                dl, N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()),</Highlight></CodeLine>
<Link id="l05376" /><CodeLine lineNumber="5376"><Highlight kind="normal">                <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l05377" /><CodeLine lineNumber="5377"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l05378" /><CodeLine lineNumber="5378"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05379" /><CodeLine lineNumber="5379"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Turn (C1-X) == C2 --&gt; X == C1-C2</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05380" /><CodeLine lineNumber="5380"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;SUBC = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0)))</Highlight></CodeLine>
<Link id="l05381" /><CodeLine lineNumber="5381"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a> &amp;&amp; N0.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>()-&gt;<a href="/docs/api/classes/llvm/sdnode/#a295d0b84f4e63438c0edb0021c41d47a">hasOneUse</a>())</Highlight></CodeLine>
<Link id="l05382" /><CodeLine lineNumber="5382"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(</Highlight></CodeLine>
<Link id="l05383" /><CodeLine lineNumber="5383"><Highlight kind="normal">                dl, VT, N0.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1),</Highlight></CodeLine>
<Link id="l05384" /><CodeLine lineNumber="5384"><Highlight kind="normal">                DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2ab6db512a611d1ef4ff8069e2bbfd0d">SUBC</a>-&gt;getAPIntValue() - RHSC-&gt;getAPIntValue(),</Highlight></CodeLine>
<Link id="l05385" /><CodeLine lineNumber="5385"><Highlight kind="normal">                                dl, N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()),</Highlight></CodeLine>
<Link id="l05386" /><CodeLine lineNumber="5386"><Highlight kind="normal">                <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l05387" /><CodeLine lineNumber="5387"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05388" /><CodeLine lineNumber="5388"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Could RHSC fold directly into a compare?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05389" /><CodeLine lineNumber="5389"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (RHSC-&gt;getValueType(0).getSizeInBits() &lt;= 64)</Highlight></CodeLine>
<Link id="l05390" /><CodeLine lineNumber="5390"><Highlight kind="normal">          LegalRHSImm = <a href="/docs/api/classes/llvm/targetloweringbase/#a1946f350ff6d981eb8ec0f7f044625fd">isLegalICmpImmediate</a>(RHSC-&gt;getSExtValue());</Highlight></CodeLine>
<Link id="l05391" /><CodeLine lineNumber="5391"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05392" /><CodeLine lineNumber="5392"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05393" /><CodeLine lineNumber="5393"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// (X+Y) == X --&gt; Y == 0 and similar folds.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05394" /><CodeLine lineNumber="5394"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Don&#39;t do this if X is an immediate that can fold into a cmp</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05395" /><CodeLine lineNumber="5395"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// instruction and X+Y has other uses. It could be an induction variable</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05396" /><CodeLine lineNumber="5396"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// chain, and the transform would increase register pressure.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05397" /><CodeLine lineNumber="5397"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!LegalRHSImm || N0.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>())</Highlight></CodeLine>
<Link id="l05398" /><CodeLine lineNumber="5398"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> V = foldSetCCWithBinOp(VT, N0, N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, dl, DCI))</Highlight></CodeLine>
<Link id="l05399" /><CodeLine lineNumber="5399"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>;</Highlight></CodeLine>
<Link id="l05400" /><CodeLine lineNumber="5400"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05401" /><CodeLine lineNumber="5401"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05402" /><CodeLine lineNumber="5402"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N1.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a> || N1.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a> ||</Highlight></CodeLine>
<Link id="l05403" /><CodeLine lineNumber="5403"><Highlight kind="normal">        N1.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>)</Highlight></CodeLine>
<Link id="l05404" /><CodeLine lineNumber="5404"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> V = foldSetCCWithBinOp(VT, N1, N0, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, dl, DCI))</Highlight></CodeLine>
<Link id="l05405" /><CodeLine lineNumber="5405"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>;</Highlight></CodeLine>
<Link id="l05406" /><CodeLine lineNumber="5406"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05407" /><CodeLine lineNumber="5407"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> V = foldSetCCWithAnd(VT, N0, N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, dl, DCI))</Highlight></CodeLine>
<Link id="l05408" /><CodeLine lineNumber="5408"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>;</Highlight></CodeLine>
<Link id="l05409" /><CodeLine lineNumber="5409"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05410" /><CodeLine lineNumber="5410"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05411" /><CodeLine lineNumber="5411"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Fold remainder of division by a constant.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05412" /><CodeLine lineNumber="5412"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad1657dbc1957901a6d9cd224efbc0f28">ISD::UREM</a> || N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a124ba0f5b2887879212c74a68bc230a3">ISD::SREM</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l05413" /><CodeLine lineNumber="5413"><Highlight kind="normal">      N0.<a href="/docs/api/classes/llvm/sdvalue/#a342c0d4e8e59b30daefe9a05bc2098bd">hasOneUse</a>() &amp;&amp; (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>)) &#123;</Highlight></CodeLine>
<Link id="l05414" /><CodeLine lineNumber="5414"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// When division is cheap or optimizing for minimum size,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05415" /><CodeLine lineNumber="5415"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fall through to DIVREM creation by skipping this fold.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05416" /><CodeLine lineNumber="5416"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#aa8253e8cffce52e1615827da53089978">isIntDivCheap</a>(VT, Attr) &amp;&amp; !Attr.hasFnAttr(Attribute::MinSize)) &#123;</Highlight></CodeLine>
<Link id="l05417" /><CodeLine lineNumber="5417"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad1657dbc1957901a6d9cd224efbc0f28">ISD::UREM</a>) &#123;</Highlight></CodeLine>
<Link id="l05418" /><CodeLine lineNumber="5418"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Folded = buildUREMEqFold(VT, N0, N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, DCI, dl))</Highlight></CodeLine>
<Link id="l05419" /><CodeLine lineNumber="5419"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Folded;</Highlight></CodeLine>
<Link id="l05420" /><CodeLine lineNumber="5420"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a124ba0f5b2887879212c74a68bc230a3">ISD::SREM</a>) &#123;</Highlight></CodeLine>
<Link id="l05421" /><CodeLine lineNumber="5421"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Folded = buildSREMEqFold(VT, N0, N1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, DCI, dl))</Highlight></CodeLine>
<Link id="l05422" /><CodeLine lineNumber="5422"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Folded;</Highlight></CodeLine>
<Link id="l05423" /><CodeLine lineNumber="5423"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05424" /><CodeLine lineNumber="5424"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05425" /><CodeLine lineNumber="5425"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05426" /><CodeLine lineNumber="5426"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05427" /><CodeLine lineNumber="5427"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Fold away ALL boolean setcc&#39;s.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05428" /><CodeLine lineNumber="5428"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>().<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>() == MVT::i1 &amp;&amp; foldBooleans) &#123;</Highlight></CodeLine>
<Link id="l05429" /><CodeLine lineNumber="5429"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Temp;</Highlight></CodeLine>
<Link id="l05430" /><CodeLine lineNumber="5430"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>) &#123;</Highlight></CodeLine>
<Link id="l05431" /><CodeLine lineNumber="5431"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">: <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;Unknown integer setcc!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l05432" /><CodeLine lineNumber="5432"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>:  </Highlight><Highlight kind="comment">// X == Y  -&gt; ~(X^Y)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05433" /><CodeLine lineNumber="5433"><Highlight kind="normal">      Temp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, OpVT, N0, N1);</Highlight></CodeLine>
<Link id="l05434" /><CodeLine lineNumber="5434"><Highlight kind="normal">      N0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(dl, Temp, OpVT);</Highlight></CodeLine>
<Link id="l05435" /><CodeLine lineNumber="5435"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DCI.isCalledByLegalizer())</Highlight></CodeLine>
<Link id="l05436" /><CodeLine lineNumber="5436"><Highlight kind="normal">        DCI.AddToWorklist(Temp.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l05437" /><CodeLine lineNumber="5437"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05438" /><CodeLine lineNumber="5438"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>:  </Highlight><Highlight kind="comment">// X != Y   --&gt;  (X^Y)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05439" /><CodeLine lineNumber="5439"><Highlight kind="normal">      N0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, OpVT, N0, N1);</Highlight></CodeLine>
<Link id="l05440" /><CodeLine lineNumber="5440"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05441" /><CodeLine lineNumber="5441"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a>:  </Highlight><Highlight kind="comment">// X &gt;s Y   --&gt;  X == 0 &amp; Y == 1  --&gt;  ~X &amp; Y</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05442" /><CodeLine lineNumber="5442"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>: </Highlight><Highlight kind="comment">// X &lt;u Y   --&gt;  X == 0 &amp; Y == 1  --&gt;  ~X &amp; Y</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05443" /><CodeLine lineNumber="5443"><Highlight kind="normal">      Temp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(dl, N0, OpVT);</Highlight></CodeLine>
<Link id="l05444" /><CodeLine lineNumber="5444"><Highlight kind="normal">      N0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, OpVT, N1, Temp);</Highlight></CodeLine>
<Link id="l05445" /><CodeLine lineNumber="5445"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DCI.isCalledByLegalizer())</Highlight></CodeLine>
<Link id="l05446" /><CodeLine lineNumber="5446"><Highlight kind="normal">        DCI.AddToWorklist(Temp.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l05447" /><CodeLine lineNumber="5447"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05448" /><CodeLine lineNumber="5448"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>:  </Highlight><Highlight kind="comment">// X &lt;s Y   --&gt; X == 1 &amp; Y == 0  --&gt;  ~Y &amp; X</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05449" /><CodeLine lineNumber="5449"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a>: </Highlight><Highlight kind="comment">// X &gt;u Y   --&gt; X == 1 &amp; Y == 0  --&gt;  ~Y &amp; X</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05450" /><CodeLine lineNumber="5450"><Highlight kind="normal">      Temp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(dl, N1, OpVT);</Highlight></CodeLine>
<Link id="l05451" /><CodeLine lineNumber="5451"><Highlight kind="normal">      N0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, OpVT, N0, Temp);</Highlight></CodeLine>
<Link id="l05452" /><CodeLine lineNumber="5452"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DCI.isCalledByLegalizer())</Highlight></CodeLine>
<Link id="l05453" /><CodeLine lineNumber="5453"><Highlight kind="normal">        DCI.AddToWorklist(Temp.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l05454" /><CodeLine lineNumber="5454"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05455" /><CodeLine lineNumber="5455"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a>: </Highlight><Highlight kind="comment">// X &lt;=u Y  --&gt; X == 0 | Y == 1  --&gt;  ~X | Y</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05456" /><CodeLine lineNumber="5456"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a7f47862de23f7210f88ccf98ae1efbe4">ISD::SETGE</a>:  </Highlight><Highlight kind="comment">// X &gt;=s Y  --&gt; X == 0 | Y == 1  --&gt;  ~X | Y</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05457" /><CodeLine lineNumber="5457"><Highlight kind="normal">      Temp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(dl, N0, OpVT);</Highlight></CodeLine>
<Link id="l05458" /><CodeLine lineNumber="5458"><Highlight kind="normal">      N0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, OpVT, N1, Temp);</Highlight></CodeLine>
<Link id="l05459" /><CodeLine lineNumber="5459"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DCI.isCalledByLegalizer())</Highlight></CodeLine>
<Link id="l05460" /><CodeLine lineNumber="5460"><Highlight kind="normal">        DCI.AddToWorklist(Temp.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l05461" /><CodeLine lineNumber="5461"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05462" /><CodeLine lineNumber="5462"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">ISD::SETUGE</a>: </Highlight><Highlight kind="comment">// X &gt;=u Y  --&gt; X == 1 | Y == 0  --&gt;  ~Y | X</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05463" /><CodeLine lineNumber="5463"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ab49f81c2ecbbff3d0fbe55dd46353774">ISD::SETLE</a>:  </Highlight><Highlight kind="comment">// X &lt;=s Y  --&gt; X == 1 | Y == 0  --&gt;  ~Y | X</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05464" /><CodeLine lineNumber="5464"><Highlight kind="normal">      Temp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(dl, N1, OpVT);</Highlight></CodeLine>
<Link id="l05465" /><CodeLine lineNumber="5465"><Highlight kind="normal">      N0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, OpVT, N0, Temp);</Highlight></CodeLine>
<Link id="l05466" /><CodeLine lineNumber="5466"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05467" /><CodeLine lineNumber="5467"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05468" /><CodeLine lineNumber="5468"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>() != MVT::i1) &#123;</Highlight></CodeLine>
<Link id="l05469" /><CodeLine lineNumber="5469"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DCI.isCalledByLegalizer())</Highlight></CodeLine>
<Link id="l05470" /><CodeLine lineNumber="5470"><Highlight kind="normal">        DCI.AddToWorklist(N0.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l05471" /><CodeLine lineNumber="5471"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// FIXME: If running after legalize, we probably can&#39;t do this.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05472" /><CodeLine lineNumber="5472"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110">ISD::NodeType</a> ExtendCode = <a href="/docs/api/classes/llvm/targetloweringbase/#affa111c5fcedf4f9c7eaf11be9977f32">getExtendForContent</a>(<a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(OpVT));</Highlight></CodeLine>
<Link id="l05473" /><CodeLine lineNumber="5473"><Highlight kind="normal">      N0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ExtendCode, dl, VT, N0);</Highlight></CodeLine>
<Link id="l05474" /><CodeLine lineNumber="5474"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05475" /><CodeLine lineNumber="5475"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> N0;</Highlight></CodeLine>
<Link id="l05476" /><CodeLine lineNumber="5476"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05477" /><CodeLine lineNumber="5477"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05478" /><CodeLine lineNumber="5478"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Could not fold it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05479" /><CodeLine lineNumber="5479"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l05480" /><CodeLine lineNumber="5480"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l05481" /><CodeLine lineNumber="5481"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l05482" /><CodeLine lineNumber="5482"><Highlight kind="comment">/// Returns true (and the GlobalValue and the offset) if the node is a</Highlight></CodeLine>
<Link id="l05483" /><CodeLine lineNumber="5483"><Highlight kind="comment">/// GlobalAddress + offset.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05484" /><CodeLine lineNumber="5484"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#abe66a168970ddd74cce6fbc9a40589c7">TargetLowering::isGAPlusOffset</a>(SDNode &#42;WN, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> GlobalValue &#42;&amp;GA,</Highlight></CodeLine>
<Link id="l05485" /><CodeLine lineNumber="5485"><Highlight kind="normal">                                    int64&#95;t &amp;<a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l05486" /><CodeLine lineNumber="5486"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05487" /><CodeLine lineNumber="5487"><Highlight kind="normal">  SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = unwrapAddress(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(WN, 0)).getNode();</Highlight></CodeLine>
<Link id="l05488" /><CodeLine lineNumber="5488"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05489" /><CodeLine lineNumber="5489"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;GASD = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;GlobalAddressSDNode&gt;</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)) &#123;</Highlight></CodeLine>
<Link id="l05490" /><CodeLine lineNumber="5490"><Highlight kind="normal">    GA = GASD-&gt;getGlobal();</Highlight></CodeLine>
<Link id="l05491" /><CodeLine lineNumber="5491"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += GASD-&gt;getOffset();</Highlight></CodeLine>
<Link id="l05492" /><CodeLine lineNumber="5492"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05493" /><CodeLine lineNumber="5493"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05494" /><CodeLine lineNumber="5494"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05495" /><CodeLine lineNumber="5495"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>) &#123;</Highlight></CodeLine>
<Link id="l05496" /><CodeLine lineNumber="5496"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N1 = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l05497" /><CodeLine lineNumber="5497"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N2 = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(1);</Highlight></CodeLine>
<Link id="l05498" /><CodeLine lineNumber="5498"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (isGAPlusOffset(N1.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(), GA, <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>)) &#123;</Highlight></CodeLine>
<Link id="l05499" /><CodeLine lineNumber="5499"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;V = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(N2)) &#123;</Highlight></CodeLine>
<Link id="l05500" /><CodeLine lineNumber="5500"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>-&gt;getSExtValue();</Highlight></CodeLine>
<Link id="l05501" /><CodeLine lineNumber="5501"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05502" /><CodeLine lineNumber="5502"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05503" /><CodeLine lineNumber="5503"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (isGAPlusOffset(N2.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(), GA, <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>)) &#123;</Highlight></CodeLine>
<Link id="l05504" /><CodeLine lineNumber="5504"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;V = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(N1)) &#123;</Highlight></CodeLine>
<Link id="l05505" /><CodeLine lineNumber="5505"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>-&gt;getSExtValue();</Highlight></CodeLine>
<Link id="l05506" /><CodeLine lineNumber="5506"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05507" /><CodeLine lineNumber="5507"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05508" /><CodeLine lineNumber="5508"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05509" /><CodeLine lineNumber="5509"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05510" /><CodeLine lineNumber="5510"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05511" /><CodeLine lineNumber="5511"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05512" /><CodeLine lineNumber="5512"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l05513" /><CodeLine lineNumber="5513"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05514" /><CodeLine lineNumber="5514"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a041dc0924ebd52a3eda7e1a22c00310b">TargetLowering::PerformDAGCombine</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>,</Highlight></CodeLine>
<Link id="l05515" /><CodeLine lineNumber="5515"><Highlight kind="normal">                                          DAGCombinerInfo &amp;DCI)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l05516" /><CodeLine lineNumber="5516"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Default implementation: no optimization.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05517" /><CodeLine lineNumber="5517"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l05518" /><CodeLine lineNumber="5518"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l05519" /><CodeLine lineNumber="5519"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05520" /><CodeLine lineNumber="5520"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05521" /><CodeLine lineNumber="5521"><Highlight kind="normal"></Highlight><Highlight kind="comment">//  Inline Assembler Implementation Methods</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05522" /><CodeLine lineNumber="5522"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05523" /><CodeLine lineNumber="5523"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05524" /><CodeLine lineNumber="5524"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116">TargetLowering::ConstraintType</a></Highlight></CodeLine>
<Link id="l05525" /><CodeLine lineNumber="5525"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#a45b2deb637d370d68d3bd3786c21e415">TargetLowering::getConstraintType</a>(StringRef Constraint)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l05526" /><CodeLine lineNumber="5526"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> S = Constraint.<a href="/docs/api/classes/llvm/stringref/#a5db9240c74644c67759dd0f901fc3c7d">size</a>();</Highlight></CodeLine>
<Link id="l05527" /><CodeLine lineNumber="5527"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05528" /><CodeLine lineNumber="5528"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (S == 1) &#123;</Highlight></CodeLine>
<Link id="l05529" /><CodeLine lineNumber="5529"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (Constraint&#91;0&#93;) &#123;</Highlight></CodeLine>
<Link id="l05530" /><CodeLine lineNumber="5530"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05531" /><CodeLine lineNumber="5531"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;r&#39;</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l05532" /><CodeLine lineNumber="5532"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> C&#95;RegisterClass;</Highlight></CodeLine>
<Link id="l05533" /><CodeLine lineNumber="5533"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;m&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// memory</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05534" /><CodeLine lineNumber="5534"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;o&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// offsetable</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05535" /><CodeLine lineNumber="5535"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;V&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// not offsetable</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05536" /><CodeLine lineNumber="5536"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> C&#95;Memory;</Highlight></CodeLine>
<Link id="l05537" /><CodeLine lineNumber="5537"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;p&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// Address.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05538" /><CodeLine lineNumber="5538"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> C&#95;Address;</Highlight></CodeLine>
<Link id="l05539" /><CodeLine lineNumber="5539"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;n&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// Simple Integer</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05540" /><CodeLine lineNumber="5540"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;E&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// Floating Point Constant</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05541" /><CodeLine lineNumber="5541"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;F&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// Floating Point Constant</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05542" /><CodeLine lineNumber="5542"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> C&#95;Immediate;</Highlight></CodeLine>
<Link id="l05543" /><CodeLine lineNumber="5543"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;i&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// Simple Integer or Relocatable Constant</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05544" /><CodeLine lineNumber="5544"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;s&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// Relocatable Constant</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05545" /><CodeLine lineNumber="5545"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;X&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// Allow ANY value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05546" /><CodeLine lineNumber="5546"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;I&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// Target registers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05547" /><CodeLine lineNumber="5547"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;J&#39;</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l05548" /><CodeLine lineNumber="5548"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;K&#39;</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l05549" /><CodeLine lineNumber="5549"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;L&#39;</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l05550" /><CodeLine lineNumber="5550"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;M&#39;</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l05551" /><CodeLine lineNumber="5551"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;N&#39;</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l05552" /><CodeLine lineNumber="5552"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;O&#39;</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l05553" /><CodeLine lineNumber="5553"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;P&#39;</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l05554" /><CodeLine lineNumber="5554"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;&lt;&#39;</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l05555" /><CodeLine lineNumber="5555"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;&gt;&#39;</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l05556" /><CodeLine lineNumber="5556"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> C&#95;Other;</Highlight></CodeLine>
<Link id="l05557" /><CodeLine lineNumber="5557"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05558" /><CodeLine lineNumber="5558"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05559" /><CodeLine lineNumber="5559"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05560" /><CodeLine lineNumber="5560"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (S &gt; 1 &amp;&amp; Constraint&#91;0&#93; == </Highlight><Highlight kind="charliteral">&#39;&#123;&#39;</Highlight><Highlight kind="normal"> &amp;&amp; Constraint&#91;S - 1&#93; == </Highlight><Highlight kind="charliteral">&#39;&#125;&#39;</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l05561" /><CodeLine lineNumber="5561"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (S == 8 &amp;&amp; Constraint.<a href="/docs/api/classes/llvm/stringref/#a25f1fd81f2132805676c82ab8ae0c109">substr</a>(1, 6) == </Highlight><Highlight kind="stringliteral">&quot;memory&quot;</Highlight><Highlight kind="normal">) </Highlight><Highlight kind="comment">// &quot;&#123;memory&#125;&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05562" /><CodeLine lineNumber="5562"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> C&#95;Memory;</Highlight></CodeLine>
<Link id="l05563" /><CodeLine lineNumber="5563"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> C&#95;Register;</Highlight></CodeLine>
<Link id="l05564" /><CodeLine lineNumber="5564"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05565" /><CodeLine lineNumber="5565"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> C&#95;Unknown;</Highlight></CodeLine>
<Link id="l05566" /><CodeLine lineNumber="5566"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l05567" /><CodeLine lineNumber="5567"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l05568" /><CodeLine lineNumber="5568"><Highlight kind="comment">/// Try to replace an X constraint, which matches anything, with another that</Highlight></CodeLine>
<Link id="l05569" /><CodeLine lineNumber="5569"><Highlight kind="comment">/// has more specific requirements based on the type of the corresponding</Highlight></CodeLine>
<Link id="l05570" /><CodeLine lineNumber="5570"><Highlight kind="comment">/// operand.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05571" /><CodeLine lineNumber="5571"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> &#42;<a href="/docs/api/classes/llvm/targetlowering/#aeca75f6b346035626e8849863671e02d">TargetLowering::LowerXConstraint</a>(EVT ConstraintVT)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l05572" /><CodeLine lineNumber="5572"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ConstraintVT.<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>())</Highlight></CodeLine>
<Link id="l05573" /><CodeLine lineNumber="5573"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;r&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05574" /><CodeLine lineNumber="5574"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ConstraintVT.<a href="/docs/api/structs/llvm/evt/#a3cb888a2ce8e95e0d9769687a5e2f7d8">isFloatingPoint</a>())</Highlight></CodeLine>
<Link id="l05575" /><CodeLine lineNumber="5575"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;f&quot;</Highlight><Highlight kind="normal">; </Highlight><Highlight kind="comment">// works for many targets</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05576" /><CodeLine lineNumber="5576"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05577" /><CodeLine lineNumber="5577"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l05578" /><CodeLine lineNumber="5578"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05579" /><CodeLine lineNumber="5579"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a91072af01cf52109f52a15ea367157bf">TargetLowering::LowerAsmOutputForConstraint</a>(</Highlight></CodeLine>
<Link id="l05580" /><CodeLine lineNumber="5580"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;Chain, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;Glue, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</Highlight></CodeLine>
<Link id="l05581" /><CodeLine lineNumber="5581"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> AsmOperandInfo &amp;OpInfo, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l05582" /><CodeLine lineNumber="5582"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l05583" /><CodeLine lineNumber="5583"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l05584" /><CodeLine lineNumber="5584"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l05585" /><CodeLine lineNumber="5585"><Highlight kind="comment">/// Lower the specified operand into the Ops vector.</Highlight></CodeLine>
<Link id="l05586" /><CodeLine lineNumber="5586"><Highlight kind="comment">/// If it is invalid, don&#39;t add anything to Ops.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05587" /><CodeLine lineNumber="5587"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#ad3f2eb78e627fd0d785fd4119d299558">TargetLowering::LowerAsmOperandForConstraint</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l05588" /><CodeLine lineNumber="5588"><Highlight kind="normal">                                                  StringRef Constraint,</Highlight></CodeLine>
<Link id="l05589" /><CodeLine lineNumber="5589"><Highlight kind="normal">                                                  std::vector&lt;SDValue&gt; &amp;<a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>,</Highlight></CodeLine>
<Link id="l05590" /><CodeLine lineNumber="5590"><Highlight kind="normal">                                                  SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l05591" /><CodeLine lineNumber="5591"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05592" /><CodeLine lineNumber="5592"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Constraint.<a href="/docs/api/classes/llvm/stringref/#a5db9240c74644c67759dd0f901fc3c7d">size</a>() &gt; 1)</Highlight></CodeLine>
<Link id="l05593" /><CodeLine lineNumber="5593"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05594" /><CodeLine lineNumber="5594"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05595" /><CodeLine lineNumber="5595"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> ConstraintLetter = Constraint&#91;0&#93;;</Highlight></CodeLine>
<Link id="l05596" /><CodeLine lineNumber="5596"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (ConstraintLetter) &#123;</Highlight></CodeLine>
<Link id="l05597" /><CodeLine lineNumber="5597"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05598" /><CodeLine lineNumber="5598"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;X&#39;</Highlight><Highlight kind="normal">:    </Highlight><Highlight kind="comment">// Allows any operand</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05599" /><CodeLine lineNumber="5599"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;i&#39;</Highlight><Highlight kind="normal">:    </Highlight><Highlight kind="comment">// Simple Integer or Relocatable Constant</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05600" /><CodeLine lineNumber="5600"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;n&#39;</Highlight><Highlight kind="normal">:    </Highlight><Highlight kind="comment">// Simple Integer</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05601" /><CodeLine lineNumber="5601"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;s&#39;</Highlight><Highlight kind="normal">: &#123;  </Highlight><Highlight kind="comment">// Relocatable Constant</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05602" /><CodeLine lineNumber="5602"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05603" /><CodeLine lineNumber="5603"><Highlight kind="normal">    ConstantSDNode &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>;</Highlight></CodeLine>
<Link id="l05604" /><CodeLine lineNumber="5604"><Highlight kind="normal">    uint64&#95;t <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = 0;</Highlight></CodeLine>
<Link id="l05605" /><CodeLine lineNumber="5605"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05606" /><CodeLine lineNumber="5606"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Match (GA) or (C) or (GA+C) or (GA-C) or ((GA+C)+C) or (((GA+C)+C)+C),</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05607" /><CodeLine lineNumber="5607"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// etc., since getelementpointer is variadic. We can&#39;t use</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05608" /><CodeLine lineNumber="5608"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// SelectionDAG::FoldSymbolOffset because it expects the GA to be accessible</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05609" /><CodeLine lineNumber="5609"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// while in this case the GA may be furthest from the root node which is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05610" /><CodeLine lineNumber="5610"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// likely an ISD::ADD.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05611" /><CodeLine lineNumber="5611"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l05612" /><CodeLine lineNumber="5612"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>)) &amp;&amp; ConstraintLetter != </Highlight><Highlight kind="charliteral">&#39;s&#39;</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l05613" /><CodeLine lineNumber="5613"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// gcc prints these as sign extended.  Sign extend value to 64 bits</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05614" /><CodeLine lineNumber="5614"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// now; without this it would get ZExt&#39;d later in</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05615" /><CodeLine lineNumber="5615"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// ScheduleDAGSDNodes::EmitNode, which is very generic.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05616" /><CodeLine lineNumber="5616"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsBool = <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getConstantIntValue()-&gt;getBitWidth() == 1;</Highlight></CodeLine>
<Link id="l05617" /><CodeLine lineNumber="5617"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755">BooleanContent</a> BCont = <a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(MVT::i64);</Highlight></CodeLine>
<Link id="l05618" /><CodeLine lineNumber="5618"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110">ISD::NodeType</a> ExtOpc =</Highlight></CodeLine>
<Link id="l05619" /><CodeLine lineNumber="5619"><Highlight kind="normal">            IsBool ? <a href="/docs/api/classes/llvm/targetloweringbase/#affa111c5fcedf4f9c7eaf11be9977f32">getExtendForContent</a>(BCont) : ISD::<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5183f3d72924bc7c77ba8d3f5de9f602">SIGN&#95;EXTEND</a>;</Highlight></CodeLine>
<Link id="l05620" /><CodeLine lineNumber="5620"><Highlight kind="normal">        int64&#95;t ExtVal =</Highlight></CodeLine>
<Link id="l05621" /><CodeLine lineNumber="5621"><Highlight kind="normal">            ExtOpc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a> ? <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getZExtValue() : <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getSExtValue();</Highlight></CodeLine>
<Link id="l05622" /><CodeLine lineNumber="5622"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(</Highlight></CodeLine>
<Link id="l05623" /><CodeLine lineNumber="5623"><Highlight kind="normal">            DAG.<a href="/docs/api/classes/llvm/selectiondag/#abf892d1e00a3d79026c5ab518c187c45">getTargetConstant</a>(<a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + ExtVal, SDLoc(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>), MVT::i64));</Highlight></CodeLine>
<Link id="l05624" /><CodeLine lineNumber="5624"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05625" /><CodeLine lineNumber="5625"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05626" /><CodeLine lineNumber="5626"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ConstraintLetter != </Highlight><Highlight kind="charliteral">&#39;n&#39;</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l05627" /><CodeLine lineNumber="5627"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;GA = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;GlobalAddressSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>)) &#123;</Highlight></CodeLine>
<Link id="l05628" /><CodeLine lineNumber="5628"><Highlight kind="normal">          <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a05c0ae3eb411a8c53a6ce48b66c0d3f8">getTargetGlobalAddress</a>(GA-&gt;getGlobal(), SDLoc(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>),</Highlight></CodeLine>
<Link id="l05629" /><CodeLine lineNumber="5629"><Highlight kind="normal">                                                   GA-&gt;<a href="/docs/api/classes/llvm/globalvalue/#af1dd2acfc2950742e41a64a342b15c80">getValueType</a>(0),</Highlight></CodeLine>
<Link id="l05630" /><CodeLine lineNumber="5630"><Highlight kind="normal">                                                   <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + GA-&gt;getOffset()));</Highlight></CodeLine>
<Link id="l05631" /><CodeLine lineNumber="5631"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05632" /><CodeLine lineNumber="5632"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l05633" /><CodeLine lineNumber="5633"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;BA = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;BlockAddressSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>)) &#123;</Highlight></CodeLine>
<Link id="l05634" /><CodeLine lineNumber="5634"><Highlight kind="normal">          <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac28c549afb9f9751d45c37dc9a9b9a7d">getTargetBlockAddress</a>(</Highlight></CodeLine>
<Link id="l05635" /><CodeLine lineNumber="5635"><Highlight kind="normal">              BA-&gt;getBlockAddress(), BA-&gt;getValueType(0),</Highlight></CodeLine>
<Link id="l05636" /><CodeLine lineNumber="5636"><Highlight kind="normal">              <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + BA-&gt;getOffset(), BA-&gt;getTargetFlags()));</Highlight></CodeLine>
<Link id="l05637" /><CodeLine lineNumber="5637"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05638" /><CodeLine lineNumber="5638"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l05639" /><CodeLine lineNumber="5639"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;BasicBlockSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>)) &#123;</Highlight></CodeLine>
<Link id="l05640" /><CodeLine lineNumber="5640"><Highlight kind="normal">          <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l05641" /><CodeLine lineNumber="5641"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05642" /><CodeLine lineNumber="5642"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l05643" /><CodeLine lineNumber="5643"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05644" /><CodeLine lineNumber="5644"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/dxil/#ac64683c1985c78d81b50819a0b733f48">OpCode</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode();</Highlight></CodeLine>
<Link id="l05645" /><CodeLine lineNumber="5645"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OpCode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a> || OpCode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>) &#123;</Highlight></CodeLine>
<Link id="l05646" /><CodeLine lineNumber="5646"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0))))</Highlight></CodeLine>
<Link id="l05647" /><CodeLine lineNumber="5647"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l05648" /><CodeLine lineNumber="5648"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Subtraction is not commutative.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05649" /><CodeLine lineNumber="5649"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OpCode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l05650" /><CodeLine lineNumber="5650"><Highlight kind="normal">                 (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1))))</Highlight></CodeLine>
<Link id="l05651" /><CodeLine lineNumber="5651"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l05652" /><CodeLine lineNumber="5652"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05653" /><CodeLine lineNumber="5653"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05654" /><CodeLine lineNumber="5654"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += (<a href="/docs/api/namespaces/llvm/dxil/#ac64683c1985c78d81b50819a0b733f48">OpCode</a> == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a> ? 1 : -1) &#42; <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getSExtValue();</Highlight></CodeLine>
<Link id="l05655" /><CodeLine lineNumber="5655"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05656" /><CodeLine lineNumber="5656"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05657" /><CodeLine lineNumber="5657"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05658" /><CodeLine lineNumber="5658"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05659" /><CodeLine lineNumber="5659"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05660" /><CodeLine lineNumber="5660"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05661" /><CodeLine lineNumber="5661"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05662" /><CodeLine lineNumber="5662"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l05663" /><CodeLine lineNumber="5663"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05664" /><CodeLine lineNumber="5664"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a79bdddcacb7e2e24a0ba20714b80c18a">TargetLowering::CollectTargetIntrinsicOperands</a>(</Highlight></CodeLine>
<Link id="l05665" /><CodeLine lineNumber="5665"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> CallInst &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, SmallVectorImpl&lt;SDValue&gt; &amp;<a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l05666" /><CodeLine lineNumber="5666"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l05667" /><CodeLine lineNumber="5667"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05668" /><CodeLine lineNumber="5668"><Highlight kind="normal">std::pair&lt;unsigned, const TargetRegisterClass &#42;&gt;</Highlight></CodeLine>
<Link id="l05669" /><CodeLine lineNumber="5669"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#af09507c47dcb4cdb2a13064aaa6d5243">TargetLowering::getRegForInlineAsmConstraint</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> TargetRegisterInfo &#42;RI,</Highlight></CodeLine>
<Link id="l05670" /><CodeLine lineNumber="5670"><Highlight kind="normal">                                             StringRef Constraint,</Highlight></CodeLine>
<Link id="l05671" /><CodeLine lineNumber="5671"><Highlight kind="normal">                                             MVT VT)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l05672" /><CodeLine lineNumber="5672"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Constraint.<a href="/docs/api/classes/llvm/stringref/#a2cd8968ff703aaeb395dcd63f6805ff1">starts&#95;with</a>(</Highlight><Highlight kind="stringliteral">&quot;&#123;&quot;</Highlight><Highlight kind="normal">))</Highlight></CodeLine>
<Link id="l05673" /><CodeLine lineNumber="5673"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::make&#95;pair(0u, </Highlight><Highlight kind="keyword">static&#95;cast&lt;</Highlight><Highlight kind="normal">TargetRegisterClass &#42;</Highlight><Highlight kind="keyword">&gt;</Highlight><Highlight kind="normal">(</Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l05674" /><CodeLine lineNumber="5674"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(&#42;(Constraint.<a href="/docs/api/classes/llvm/stringref/#a996c7ca3dd6843ba5d55a7c217770270">end</a>() - 1) == </Highlight><Highlight kind="charliteral">&#39;&#125;&#39;</Highlight><Highlight kind="normal"> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Not a brace enclosed constraint?&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l05675" /><CodeLine lineNumber="5675"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05676" /><CodeLine lineNumber="5676"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Remove the braces from around the name.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05677" /><CodeLine lineNumber="5677"><Highlight kind="normal">  StringRef <a href="/docs/api/files/lib/lib/target/lib/target/ve/lvlgen-cpp/#a0a198e38a5def54ba58bebc655eda8e7">RegName</a>(Constraint.<a href="/docs/api/classes/llvm/stringref/#a7b0fa1a82461032cdf16b7f6c59f0a6a">data</a>() + 1, Constraint.<a href="/docs/api/classes/llvm/stringref/#a5db9240c74644c67759dd0f901fc3c7d">size</a>() - 2);</Highlight></CodeLine>
<Link id="l05678" /><CodeLine lineNumber="5678"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05679" /><CodeLine lineNumber="5679"><Highlight kind="normal">  std::pair&lt;unsigned, const TargetRegisterClass &#42;&gt; <a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> =</Highlight></CodeLine>
<Link id="l05680" /><CodeLine lineNumber="5680"><Highlight kind="normal">      std::make&#95;pair(0u, </Highlight><Highlight kind="keyword">static&#95;cast&lt;</Highlight><Highlight kind="keyword">const </Highlight><Highlight kind="normal">TargetRegisterClass &#42;</Highlight><Highlight kind="keyword">&gt;</Highlight><Highlight kind="normal">(</Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l05681" /><CodeLine lineNumber="5681"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05682" /><CodeLine lineNumber="5682"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Figure out which register class contains this reg.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05683" /><CodeLine lineNumber="5683"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> TargetRegisterClass &#42;RC : RI-&gt;<a href="/docs/api/classes/llvm/targetregisterinfo/#a1b57440df29489b2a05e7b04bdfc7c96">regclasses</a>()) &#123;</Highlight></CodeLine>
<Link id="l05684" /><CodeLine lineNumber="5684"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If none of the value types for this register class are valid, we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05685" /><CodeLine lineNumber="5685"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// can&#39;t use it.  For example, 64-bit reg classes on 32-bit targets.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05686" /><CodeLine lineNumber="5686"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#a59078941da3e0dedf257050df111a8d1">isLegalRC</a>(&#42;RI, &#42;RC))</Highlight></CodeLine>
<Link id="l05687" /><CodeLine lineNumber="5687"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05688" /><CodeLine lineNumber="5688"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05689" /><CodeLine lineNumber="5689"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#aad72cfbb210808985a9dc19f4e5d8542">MCPhysReg</a> &amp;PR : &#42;RC) &#123;</Highlight></CodeLine>
<Link id="l05690" /><CodeLine lineNumber="5690"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/ve/lvlgen-cpp/#a0a198e38a5def54ba58bebc655eda8e7">RegName</a>.equals&#95;insensitive(RI-&gt;<a href="/docs/api/classes/llvm/targetregisterinfo/#ad4f8f1aca0bb01f65be1d7dee43f7f83">getRegAsmName</a>(PR))) &#123;</Highlight></CodeLine>
<Link id="l05691" /><CodeLine lineNumber="5691"><Highlight kind="normal">        std::pair&lt;unsigned, const TargetRegisterClass &#42;&gt; S =</Highlight></CodeLine>
<Link id="l05692" /><CodeLine lineNumber="5692"><Highlight kind="normal">            std::make&#95;pair(PR, RC);</Highlight></CodeLine>
<Link id="l05693" /><CodeLine lineNumber="5693"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05694" /><CodeLine lineNumber="5694"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// If this register class has the requested value type, return it,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05695" /><CodeLine lineNumber="5695"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// otherwise keep searching and return the first class found</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05696" /><CodeLine lineNumber="5696"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// if no other is found which explicitly has the requested type.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05697" /><CodeLine lineNumber="5697"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (RI-&gt;<a href="/docs/api/classes/llvm/targetregisterinfo/#adaf5c0a9d9f810432a85bd299081e0a7">isTypeLegalForClass</a>(&#42;RC, VT))</Highlight></CodeLine>
<Link id="l05698" /><CodeLine lineNumber="5698"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> S;</Highlight></CodeLine>
<Link id="l05699" /><CodeLine lineNumber="5699"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>.second)</Highlight></CodeLine>
<Link id="l05700" /><CodeLine lineNumber="5700"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = S;</Highlight></CodeLine>
<Link id="l05701" /><CodeLine lineNumber="5701"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05702" /><CodeLine lineNumber="5702"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05703" /><CodeLine lineNumber="5703"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05704" /><CodeLine lineNumber="5704"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05705" /><CodeLine lineNumber="5705"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>;</Highlight></CodeLine>
<Link id="l05706" /><CodeLine lineNumber="5706"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l05707" /><CodeLine lineNumber="5707"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05708" /><CodeLine lineNumber="5708"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05709" /><CodeLine lineNumber="5709"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Constraint Selection.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05710" /><CodeLine lineNumber="5710"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l05711" /><CodeLine lineNumber="5711"><Highlight kind="comment">/// Return true of this is an input operand that is a matching constraint like</Highlight></CodeLine>
<Link id="l05712" /><CodeLine lineNumber="5712"><Highlight kind="comment">/// &quot;4&quot;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05713" /><CodeLine lineNumber="5713" lineLink="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#afd6e275c2987abf718d772b908b06557"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#afd6e275c2987abf718d772b908b06557">TargetLowering::AsmOperandInfo::isMatchingInputConstraint</a>()</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l05714" /><CodeLine lineNumber="5714"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#acaa17aeb01534f4ef06085783d0cd065">ConstraintCode</a>.empty() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;No known constraint!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l05715" /><CodeLine lineNumber="5715"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> isdigit(</Highlight><Highlight kind="keyword">static&#95;cast&lt;</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="keyword">&gt;</Highlight><Highlight kind="normal">(<a href="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#acaa17aeb01534f4ef06085783d0cd065">ConstraintCode</a>&#91;0&#93;));</Highlight></CodeLine>
<Link id="l05716" /><CodeLine lineNumber="5716"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l05717" /><CodeLine lineNumber="5717"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l05718" /><CodeLine lineNumber="5718"><Highlight kind="comment">/// If this is an input matching constraint, this method returns the output</Highlight></CodeLine>
<Link id="l05719" /><CodeLine lineNumber="5719"><Highlight kind="comment">/// operand it matches.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05720" /><CodeLine lineNumber="5720" lineLink="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#af95c6ddf8fb7d70a4d3f25fd996433ec"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#af95c6ddf8fb7d70a4d3f25fd996433ec">TargetLowering::AsmOperandInfo::getMatchedOperand</a>()</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l05721" /><CodeLine lineNumber="5721"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#acaa17aeb01534f4ef06085783d0cd065">ConstraintCode</a>.empty() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;No known constraint!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l05722" /><CodeLine lineNumber="5722"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> atoi(<a href="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#acaa17aeb01534f4ef06085783d0cd065">ConstraintCode</a>.c&#95;str());</Highlight></CodeLine>
<Link id="l05723" /><CodeLine lineNumber="5723"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l05724" /><CodeLine lineNumber="5724"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l05725" /><CodeLine lineNumber="5725"><Highlight kind="comment">/// Split up the constraint string from the inline assembly value into the</Highlight></CodeLine>
<Link id="l05726" /><CodeLine lineNumber="5726"><Highlight kind="comment">/// specific constraints and their prefixes, and also tie in the associated</Highlight></CodeLine>
<Link id="l05727" /><CodeLine lineNumber="5727"><Highlight kind="comment">/// operand values.</Highlight></CodeLine>
<Link id="l05728" /><CodeLine lineNumber="5728"><Highlight kind="comment">/// If this returns an empty vector, and if the constraint string itself</Highlight></CodeLine>
<Link id="l05729" /><CodeLine lineNumber="5729"><Highlight kind="comment">/// isn&#39;t empty, there was an error parsing.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05730" /><CodeLine lineNumber="5730"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#a3db162658a7687e8a5df34f5a6aaa840">TargetLowering::AsmOperandInfoVector</a></Highlight></CodeLine>
<Link id="l05731" /><CodeLine lineNumber="5731"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#a1c5e8b6aef41aead06d61ff0530ed9c2">TargetLowering::ParseConstraints</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</Highlight></CodeLine>
<Link id="l05732" /><CodeLine lineNumber="5732"><Highlight kind="normal">                                 </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>,</Highlight></CodeLine>
<Link id="l05733" /><CodeLine lineNumber="5733"><Highlight kind="normal">                                 </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp;<a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l05734" /><CodeLine lineNumber="5734"><Highlight kind="comment">  /// Information about all of the constraints.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05735" /><CodeLine lineNumber="5735"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetlowering/#a3db162658a7687e8a5df34f5a6aaa840">AsmOperandInfoVector</a> ConstraintOperands;</Highlight></CodeLine>
<Link id="l05736" /><CodeLine lineNumber="5736"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/inlineasm">InlineAsm</a> &#42;IA = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;InlineAsm&gt;</a>(<a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>.getCalledOperand());</Highlight></CodeLine>
<Link id="l05737" /><CodeLine lineNumber="5737"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> maCount = 0; </Highlight><Highlight kind="comment">// Largest number of multiple alternative constraints.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05738" /><CodeLine lineNumber="5738"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05739" /><CodeLine lineNumber="5739"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Do a prepass over the constraints, canonicalizing them, and building up the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05740" /><CodeLine lineNumber="5740"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ConstraintOperands list.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05741" /><CodeLine lineNumber="5741"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ArgNo = 0; </Highlight><Highlight kind="comment">// ArgNo - The argument of the CallInst.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05742" /><CodeLine lineNumber="5742"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ResNo = 0; </Highlight><Highlight kind="comment">// ResNo - The result number of the next output.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05743" /><CodeLine lineNumber="5743"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LabelNo = 0; </Highlight><Highlight kind="comment">// LabelNo - CallBr indirect dest number.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05744" /><CodeLine lineNumber="5744"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05745" /><CodeLine lineNumber="5745"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/llvm/inlineasm/constraintinfo">InlineAsm::ConstraintInfo</a> &amp;CI : IA-&gt;ParseConstraints()) &#123;</Highlight></CodeLine>
<Link id="l05746" /><CodeLine lineNumber="5746"><Highlight kind="normal">    ConstraintOperands.emplace&#95;back(std::move(CI));</Highlight></CodeLine>
<Link id="l05747" /><CodeLine lineNumber="5747"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/targetlowering/asmoperandinfo">AsmOperandInfo</a> &amp;OpInfo = ConstraintOperands.back();</Highlight></CodeLine>
<Link id="l05748" /><CodeLine lineNumber="5748"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05749" /><CodeLine lineNumber="5749"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Update multiple alternative constraint count.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05750" /><CodeLine lineNumber="5750"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OpInfo.<a href="/docs/api/structs/llvm/inlineasm/constraintinfo/#abceda5166e96dabf2ea376669b86699d">multipleAlternatives</a>.size() &gt; maCount)</Highlight></CodeLine>
<Link id="l05751" /><CodeLine lineNumber="5751"><Highlight kind="normal">      maCount = OpInfo.<a href="/docs/api/structs/llvm/inlineasm/constraintinfo/#abceda5166e96dabf2ea376669b86699d">multipleAlternatives</a>.size();</Highlight></CodeLine>
<Link id="l05752" /><CodeLine lineNumber="5752"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05753" /><CodeLine lineNumber="5753"><Highlight kind="normal">    OpInfo.<a href="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#a7cd6f0fbc0aebaac2019af30a06c7b18">ConstraintVT</a> = MVT::Other;</Highlight></CodeLine>
<Link id="l05754" /><CodeLine lineNumber="5754"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05755" /><CodeLine lineNumber="5755"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Compute the value type for each operand.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05756" /><CodeLine lineNumber="5756"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (OpInfo.<a href="/docs/api/structs/llvm/inlineasm/constraintinfo/#a3400e49d5c9d94f96aa1117ecd0b799d">Type</a>) &#123;</Highlight></CodeLine>
<Link id="l05757" /><CodeLine lineNumber="5757"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/inlineasm/#a511f48809ad14f13e50b957a137a9d34aabfa616f81b4833fdf462b07aabfa53f">InlineAsm::isOutput</a>:</Highlight></CodeLine>
<Link id="l05758" /><CodeLine lineNumber="5758"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Indirect outputs just consume an argument.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05759" /><CodeLine lineNumber="5759"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OpInfo.<a href="/docs/api/structs/llvm/inlineasm/constraintinfo/#acbf697bfd59727faf13eeb80fdf90d79">isIndirect</a>) &#123;</Highlight></CodeLine>
<Link id="l05760" /><CodeLine lineNumber="5760"><Highlight kind="normal">        OpInfo.<a href="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#aeea750ec380d5c1514f57df90dbd6c3d">CallOperandVal</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>.getArgOperand(ArgNo);</Highlight></CodeLine>
<Link id="l05761" /><CodeLine lineNumber="5761"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05762" /><CodeLine lineNumber="5762"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05763" /><CodeLine lineNumber="5763"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05764" /><CodeLine lineNumber="5764"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// The return value of the call is this value.  As such, there is no</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05765" /><CodeLine lineNumber="5765"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// corresponding argument.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05766" /><CodeLine lineNumber="5766"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>.getType()-&gt;isVoidTy() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Bad inline asm!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l05767" /><CodeLine lineNumber="5767"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;STy = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;StructType&gt;</a>(<a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>.getType())) &#123;</Highlight></CodeLine>
<Link id="l05768" /><CodeLine lineNumber="5768"><Highlight kind="normal">        OpInfo.<a href="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#a7cd6f0fbc0aebaac2019af30a06c7b18">ConstraintVT</a> =</Highlight></CodeLine>
<Link id="l05769" /><CodeLine lineNumber="5769"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/targetloweringbase/#aee7335adfdf89d9bc00d567a1e53db23">getAsmOperandValueType</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, STy-&gt;getElementType(ResNo))</Highlight></CodeLine>
<Link id="l05770" /><CodeLine lineNumber="5770"><Highlight kind="normal">                .<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>();</Highlight></CodeLine>
<Link id="l05771" /><CodeLine lineNumber="5771"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l05772" /><CodeLine lineNumber="5772"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ResNo == 0 &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Asm only has one result!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l05773" /><CodeLine lineNumber="5773"><Highlight kind="normal">        OpInfo.<a href="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#a7cd6f0fbc0aebaac2019af30a06c7b18">ConstraintVT</a> =</Highlight></CodeLine>
<Link id="l05774" /><CodeLine lineNumber="5774"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/targetloweringbase/#aee7335adfdf89d9bc00d567a1e53db23">getAsmOperandValueType</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>.getType()).<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>();</Highlight></CodeLine>
<Link id="l05775" /><CodeLine lineNumber="5775"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05776" /><CodeLine lineNumber="5776"><Highlight kind="normal">      ++ResNo;</Highlight></CodeLine>
<Link id="l05777" /><CodeLine lineNumber="5777"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05778" /><CodeLine lineNumber="5778"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/inlineasm/#a511f48809ad14f13e50b957a137a9d34a79ca3881430605a6c7da5227cfb115d6">InlineAsm::isInput</a>:</Highlight></CodeLine>
<Link id="l05779" /><CodeLine lineNumber="5779"><Highlight kind="normal">      OpInfo.<a href="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#aeea750ec380d5c1514f57df90dbd6c3d">CallOperandVal</a> = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>.<a href="/docs/api/classes/llvm/callbase/#aabd76e6a8a23a5af1ce4d3c310d88bcd">getArgOperand</a>(ArgNo);</Highlight></CodeLine>
<Link id="l05780" /><CodeLine lineNumber="5780"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05781" /><CodeLine lineNumber="5781"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/inlineasm/#a511f48809ad14f13e50b957a137a9d34a2903cfed1fe44719f76b46abcac40955">InlineAsm::isLabel</a>:</Highlight></CodeLine>
<Link id="l05782" /><CodeLine lineNumber="5782"><Highlight kind="normal">      OpInfo.<a href="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#aeea750ec380d5c1514f57df90dbd6c3d">CallOperandVal</a> = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;CallBrInst&gt;</a>(&amp;<a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>)-&gt;getIndirectDest(LabelNo);</Highlight></CodeLine>
<Link id="l05783" /><CodeLine lineNumber="5783"><Highlight kind="normal">      ++LabelNo;</Highlight></CodeLine>
<Link id="l05784" /><CodeLine lineNumber="5784"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05785" /><CodeLine lineNumber="5785"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/inlineasm/#a511f48809ad14f13e50b957a137a9d34adf39e7f7e158f2ccacae6d4446197322">InlineAsm::isClobber</a>:</Highlight></CodeLine>
<Link id="l05786" /><CodeLine lineNumber="5786"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Nothing to do.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05787" /><CodeLine lineNumber="5787"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05788" /><CodeLine lineNumber="5788"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05789" /><CodeLine lineNumber="5789"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05790" /><CodeLine lineNumber="5790"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OpInfo.<a href="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#aeea750ec380d5c1514f57df90dbd6c3d">CallOperandVal</a>) &#123;</Highlight></CodeLine>
<Link id="l05791" /><CodeLine lineNumber="5791"><Highlight kind="normal">      llvm::Type &#42;OpTy = OpInfo.<a href="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#aeea750ec380d5c1514f57df90dbd6c3d">CallOperandVal</a>-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>();</Highlight></CodeLine>
<Link id="l05792" /><CodeLine lineNumber="5792"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OpInfo.<a href="/docs/api/structs/llvm/inlineasm/constraintinfo/#acbf697bfd59727faf13eeb80fdf90d79">isIndirect</a>) &#123;</Highlight></CodeLine>
<Link id="l05793" /><CodeLine lineNumber="5793"><Highlight kind="normal">        OpTy = <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>.<a href="/docs/api/classes/llvm/callbase/#aa9d39950dcbd9e1e6dac2b66db4324d4">getParamElementType</a>(ArgNo);</Highlight></CodeLine>
<Link id="l05794" /><CodeLine lineNumber="5794"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OpTy &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Indirect operand must have elementtype attribute&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l05795" /><CodeLine lineNumber="5795"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05796" /><CodeLine lineNumber="5796"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05797" /><CodeLine lineNumber="5797"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Look for vector wrapped in a struct. e.g. &#123; &lt;16 x i8&gt; &#125;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05798" /><CodeLine lineNumber="5798"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (StructType &#42;STy = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;StructType&gt;</a>(OpTy))</Highlight></CodeLine>
<Link id="l05799" /><CodeLine lineNumber="5799"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (STy-&gt;getNumElements() == 1)</Highlight></CodeLine>
<Link id="l05800" /><CodeLine lineNumber="5800"><Highlight kind="normal">          OpTy = STy-&gt;getElementType(0);</Highlight></CodeLine>
<Link id="l05801" /><CodeLine lineNumber="5801"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05802" /><CodeLine lineNumber="5802"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If OpTy is not a single value, it may be a struct/union that we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05803" /><CodeLine lineNumber="5803"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// can tile with integers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05804" /><CodeLine lineNumber="5804"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!OpTy-&gt;<a href="/docs/api/classes/llvm/type/#a5f6edc5246188225b3f49bd5c974c759">isSingleValueType</a>() &amp;&amp; OpTy-&gt;<a href="/docs/api/classes/llvm/type/#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>()) &#123;</Highlight></CodeLine>
<Link id="l05805" /><CodeLine lineNumber="5805"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> BitSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(OpTy);</Highlight></CodeLine>
<Link id="l05806" /><CodeLine lineNumber="5806"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (BitSize) &#123;</Highlight></CodeLine>
<Link id="l05807" /><CodeLine lineNumber="5807"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05808" /><CodeLine lineNumber="5808"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> 1:</Highlight></CodeLine>
<Link id="l05809" /><CodeLine lineNumber="5809"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> 8:</Highlight></CodeLine>
<Link id="l05810" /><CodeLine lineNumber="5810"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> 16:</Highlight></CodeLine>
<Link id="l05811" /><CodeLine lineNumber="5811"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> 32:</Highlight></CodeLine>
<Link id="l05812" /><CodeLine lineNumber="5812"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> 64:</Highlight></CodeLine>
<Link id="l05813" /><CodeLine lineNumber="5813"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> 128:</Highlight></CodeLine>
<Link id="l05814" /><CodeLine lineNumber="5814"><Highlight kind="normal">          OpTy = <a href="/docs/api/classes/llvm/integertype/#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(OpTy-&gt;<a href="/docs/api/classes/llvm/type/#a909eca4ba9e5eefc203c8e3770bdab25">getContext</a>(), BitSize);</Highlight></CodeLine>
<Link id="l05815" /><CodeLine lineNumber="5815"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05816" /><CodeLine lineNumber="5816"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l05817" /><CodeLine lineNumber="5817"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05818" /><CodeLine lineNumber="5818"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05819" /><CodeLine lineNumber="5819"><Highlight kind="normal">      EVT VT = <a href="/docs/api/classes/llvm/targetloweringbase/#aee7335adfdf89d9bc00d567a1e53db23">getAsmOperandValueType</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, OpTy, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l05820" /><CodeLine lineNumber="5820"><Highlight kind="normal">      OpInfo.<a href="/docs/api/structs/llvm/targetlowering/asmoperandinfo/#a7cd6f0fbc0aebaac2019af30a06c7b18">ConstraintVT</a> = VT.<a href="/docs/api/structs/llvm/evt/#a19738f4334d4de357b22349bbb56fb5c">isSimple</a>() ? VT.<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>() : MVT::Other;</Highlight></CodeLine>
<Link id="l05821" /><CodeLine lineNumber="5821"><Highlight kind="normal">      ArgNo++;</Highlight></CodeLine>
<Link id="l05822" /><CodeLine lineNumber="5822"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05823" /><CodeLine lineNumber="5823"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05824" /><CodeLine lineNumber="5824"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05825" /><CodeLine lineNumber="5825"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If we have multiple alternative constraints, select the best alternative.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05826" /><CodeLine lineNumber="5826"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!ConstraintOperands.empty()) &#123;</Highlight></CodeLine>
<Link id="l05827" /><CodeLine lineNumber="5827"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (maCount) &#123;</Highlight></CodeLine>
<Link id="l05828" /><CodeLine lineNumber="5828"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> bestMAIndex = 0;</Highlight></CodeLine>
<Link id="l05829" /><CodeLine lineNumber="5829"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> bestWeight = -1;</Highlight></CodeLine>
<Link id="l05830" /><CodeLine lineNumber="5830"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// weight:  -1 = invalid match, and 0 = so-so match to 5 = good match.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05831" /><CodeLine lineNumber="5831"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> weight = -1;</Highlight></CodeLine>
<Link id="l05832" /><CodeLine lineNumber="5832"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> maIndex;</Highlight></CodeLine>
<Link id="l05833" /><CodeLine lineNumber="5833"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Compute the sums of the weights for each alternative, keeping track</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05834" /><CodeLine lineNumber="5834"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// of the best (highest weight) one so far.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05835" /><CodeLine lineNumber="5835"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (maIndex = 0; maIndex &lt; maCount; ++maIndex) &#123;</Highlight></CodeLine>
<Link id="l05836" /><CodeLine lineNumber="5836"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> weightSum = 0;</Highlight></CodeLine>
<Link id="l05837" /><CodeLine lineNumber="5837"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> cIndex = 0, eIndex = ConstraintOperands.size();</Highlight></CodeLine>
<Link id="l05838" /><CodeLine lineNumber="5838"><Highlight kind="normal">             cIndex != eIndex; ++cIndex) &#123;</Highlight></CodeLine>
<Link id="l05839" /><CodeLine lineNumber="5839"><Highlight kind="normal">          AsmOperandInfo &amp;OpInfo = ConstraintOperands&#91;cIndex&#93;;</Highlight></CodeLine>
<Link id="l05840" /><CodeLine lineNumber="5840"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OpInfo.Type == <a href="/docs/api/classes/llvm/inlineasm/#a511f48809ad14f13e50b957a137a9d34adf39e7f7e158f2ccacae6d4446197322">InlineAsm::isClobber</a>)</Highlight></CodeLine>
<Link id="l05841" /><CodeLine lineNumber="5841"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05842" /><CodeLine lineNumber="5842"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05843" /><CodeLine lineNumber="5843"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// If this is an output operand with a matching input operand,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05844" /><CodeLine lineNumber="5844"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// look up the matching input. If their types mismatch, e.g. one</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05845" /><CodeLine lineNumber="5845"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// is an integer, the other is floating point, or their sizes are</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05846" /><CodeLine lineNumber="5846"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// different, flag it as an maCantMatch.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05847" /><CodeLine lineNumber="5847"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OpInfo.hasMatchingInput()) &#123;</Highlight></CodeLine>
<Link id="l05848" /><CodeLine lineNumber="5848"><Highlight kind="normal">            AsmOperandInfo &amp;Input = ConstraintOperands&#91;OpInfo.MatchingInput&#93;;</Highlight></CodeLine>
<Link id="l05849" /><CodeLine lineNumber="5849"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OpInfo.ConstraintVT != Input.ConstraintVT) &#123;</Highlight></CodeLine>
<Link id="l05850" /><CodeLine lineNumber="5850"><Highlight kind="normal">              </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((OpInfo.ConstraintVT.isInteger() !=</Highlight></CodeLine>
<Link id="l05851" /><CodeLine lineNumber="5851"><Highlight kind="normal">                   Input.ConstraintVT.isInteger()) ||</Highlight></CodeLine>
<Link id="l05852" /><CodeLine lineNumber="5852"><Highlight kind="normal">                  (OpInfo.ConstraintVT.getSizeInBits() !=</Highlight></CodeLine>
<Link id="l05853" /><CodeLine lineNumber="5853"><Highlight kind="normal">                   Input.ConstraintVT.getSizeInBits())) &#123;</Highlight></CodeLine>
<Link id="l05854" /><CodeLine lineNumber="5854"><Highlight kind="normal">                weightSum = -1; </Highlight><Highlight kind="comment">// Can&#39;t match.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05855" /><CodeLine lineNumber="5855"><Highlight kind="normal">                </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05856" /><CodeLine lineNumber="5856"><Highlight kind="normal">              &#125;</Highlight></CodeLine>
<Link id="l05857" /><CodeLine lineNumber="5857"><Highlight kind="normal">            &#125;</Highlight></CodeLine>
<Link id="l05858" /><CodeLine lineNumber="5858"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l05859" /><CodeLine lineNumber="5859"><Highlight kind="normal">          weight = getMultipleConstraintMatchWeight(OpInfo, maIndex);</Highlight></CodeLine>
<Link id="l05860" /><CodeLine lineNumber="5860"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (weight == -1) &#123;</Highlight></CodeLine>
<Link id="l05861" /><CodeLine lineNumber="5861"><Highlight kind="normal">            weightSum = -1;</Highlight></CodeLine>
<Link id="l05862" /><CodeLine lineNumber="5862"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05863" /><CodeLine lineNumber="5863"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l05864" /><CodeLine lineNumber="5864"><Highlight kind="normal">          weightSum += weight;</Highlight></CodeLine>
<Link id="l05865" /><CodeLine lineNumber="5865"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l05866" /><CodeLine lineNumber="5866"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Update best.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05867" /><CodeLine lineNumber="5867"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (weightSum &gt; bestWeight) &#123;</Highlight></CodeLine>
<Link id="l05868" /><CodeLine lineNumber="5868"><Highlight kind="normal">          bestWeight = weightSum;</Highlight></CodeLine>
<Link id="l05869" /><CodeLine lineNumber="5869"><Highlight kind="normal">          bestMAIndex = maIndex;</Highlight></CodeLine>
<Link id="l05870" /><CodeLine lineNumber="5870"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l05871" /><CodeLine lineNumber="5871"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05872" /><CodeLine lineNumber="5872"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05873" /><CodeLine lineNumber="5873"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Now select chosen alternative in each constraint.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05874" /><CodeLine lineNumber="5874"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (AsmOperandInfo &amp;cInfo : ConstraintOperands)</Highlight></CodeLine>
<Link id="l05875" /><CodeLine lineNumber="5875"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (cInfo.Type != <a href="/docs/api/classes/llvm/inlineasm/#a511f48809ad14f13e50b957a137a9d34adf39e7f7e158f2ccacae6d4446197322">InlineAsm::isClobber</a>)</Highlight></CodeLine>
<Link id="l05876" /><CodeLine lineNumber="5876"><Highlight kind="normal">          cInfo.selectAlternative(bestMAIndex);</Highlight></CodeLine>
<Link id="l05877" /><CodeLine lineNumber="5877"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05878" /><CodeLine lineNumber="5878"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05879" /><CodeLine lineNumber="5879"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05880" /><CodeLine lineNumber="5880"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check and hook up tied operands, choose constraint code to use.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05881" /><CodeLine lineNumber="5881"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> cIndex = 0, eIndex = ConstraintOperands.size();</Highlight></CodeLine>
<Link id="l05882" /><CodeLine lineNumber="5882"><Highlight kind="normal">       cIndex != eIndex; ++cIndex) &#123;</Highlight></CodeLine>
<Link id="l05883" /><CodeLine lineNumber="5883"><Highlight kind="normal">    AsmOperandInfo &amp;OpInfo = ConstraintOperands&#91;cIndex&#93;;</Highlight></CodeLine>
<Link id="l05884" /><CodeLine lineNumber="5884"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05885" /><CodeLine lineNumber="5885"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If this is an output operand with a matching input operand, look up the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05886" /><CodeLine lineNumber="5886"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// matching input. If their types mismatch, e.g. one is an integer, the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05887" /><CodeLine lineNumber="5887"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// other is floating point, or their sizes are different, flag it as an</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05888" /><CodeLine lineNumber="5888"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// error.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05889" /><CodeLine lineNumber="5889"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OpInfo.hasMatchingInput()) &#123;</Highlight></CodeLine>
<Link id="l05890" /><CodeLine lineNumber="5890"><Highlight kind="normal">      AsmOperandInfo &amp;Input = ConstraintOperands&#91;OpInfo.MatchingInput&#93;;</Highlight></CodeLine>
<Link id="l05891" /><CodeLine lineNumber="5891"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05892" /><CodeLine lineNumber="5892"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OpInfo.ConstraintVT != Input.ConstraintVT) &#123;</Highlight></CodeLine>
<Link id="l05893" /><CodeLine lineNumber="5893"><Highlight kind="normal">        std::pair&lt;unsigned, const TargetRegisterClass &#42;&gt; MatchRC =</Highlight></CodeLine>
<Link id="l05894" /><CodeLine lineNumber="5894"><Highlight kind="normal">            getRegForInlineAsmConstraint(<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, OpInfo.ConstraintCode,</Highlight></CodeLine>
<Link id="l05895" /><CodeLine lineNumber="5895"><Highlight kind="normal">                                         OpInfo.ConstraintVT);</Highlight></CodeLine>
<Link id="l05896" /><CodeLine lineNumber="5896"><Highlight kind="normal">        std::pair&lt;unsigned, const TargetRegisterClass &#42;&gt; InputRC =</Highlight></CodeLine>
<Link id="l05897" /><CodeLine lineNumber="5897"><Highlight kind="normal">            getRegForInlineAsmConstraint(<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, Input.ConstraintCode,</Highlight></CodeLine>
<Link id="l05898" /><CodeLine lineNumber="5898"><Highlight kind="normal">                                         Input.ConstraintVT);</Highlight></CodeLine>
<Link id="l05899" /><CodeLine lineNumber="5899"><Highlight kind="normal">        </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> OutOpIsIntOrFP = OpInfo.ConstraintVT.isInteger() ||</Highlight></CodeLine>
<Link id="l05900" /><CodeLine lineNumber="5900"><Highlight kind="normal">                                    OpInfo.ConstraintVT.isFloatingPoint();</Highlight></CodeLine>
<Link id="l05901" /><CodeLine lineNumber="5901"><Highlight kind="normal">        </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> InOpIsIntOrFP = Input.ConstraintVT.isInteger() ||</Highlight></CodeLine>
<Link id="l05902" /><CodeLine lineNumber="5902"><Highlight kind="normal">                                   Input.ConstraintVT.isFloatingPoint();</Highlight></CodeLine>
<Link id="l05903" /><CodeLine lineNumber="5903"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((OutOpIsIntOrFP != InOpIsIntOrFP) ||</Highlight></CodeLine>
<Link id="l05904" /><CodeLine lineNumber="5904"><Highlight kind="normal">            (MatchRC.second != InputRC.second)) &#123;</Highlight></CodeLine>
<Link id="l05905" /><CodeLine lineNumber="5905"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#a7f2a3d4dcfee70225988aec53ff1e173">report&#95;fatal&#95;error</a>(</Highlight><Highlight kind="stringliteral">&quot;Unsupported asm: input constraint&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05906" /><CodeLine lineNumber="5906"><Highlight kind="normal">                             </Highlight><Highlight kind="stringliteral">&quot; with a matching output constraint of&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05907" /><CodeLine lineNumber="5907"><Highlight kind="normal">                             </Highlight><Highlight kind="stringliteral">&quot; incompatible type!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l05908" /><CodeLine lineNumber="5908"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l05909" /><CodeLine lineNumber="5909"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l05910" /><CodeLine lineNumber="5910"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l05911" /><CodeLine lineNumber="5911"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05912" /><CodeLine lineNumber="5912"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05913" /><CodeLine lineNumber="5913"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> ConstraintOperands;</Highlight></CodeLine>
<Link id="l05914" /><CodeLine lineNumber="5914"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l05915" /><CodeLine lineNumber="5915"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l05916" /><CodeLine lineNumber="5916"><Highlight kind="comment">/// Return a number indicating our preference for chosing a type of constraint</Highlight></CodeLine>
<Link id="l05917" /><CodeLine lineNumber="5917"><Highlight kind="comment">/// over another, for the purpose of sorting them. Immediates are almost always</Highlight></CodeLine>
<Link id="l05918" /><CodeLine lineNumber="5918"><Highlight kind="comment">/// preferrable (when they can be emitted). A higher return value means a</Highlight></CodeLine>
<Link id="l05919" /><CodeLine lineNumber="5919"><Highlight kind="comment">/// stronger preference for one constraint type relative to another.</Highlight></CodeLine>
<Link id="l05920" /><CodeLine lineNumber="5920"><Highlight kind="comment">/// FIXME: We should prefer registers over memory but doing so may lead to</Highlight></CodeLine>
<Link id="l05921" /><CodeLine lineNumber="5921"><Highlight kind="comment">/// unrecoverable register exhaustion later.</Highlight></CodeLine>
<Link id="l05922" /><CodeLine lineNumber="5922"><Highlight kind="comment">/// https://github.com/llvm/llvm-project/issues/20571</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05923" /><CodeLine lineNumber="5923" lineLink="#a54b5dd826aa4e28806c5dc986e1cd393"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="#a54b5dd826aa4e28806c5dc986e1cd393">getConstraintPiority</a>(<a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116">TargetLowering::ConstraintType</a> CT) &#123;</Highlight></CodeLine>
<Link id="l05924" /><CodeLine lineNumber="5924"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (CT) &#123;</Highlight></CodeLine>
<Link id="l05925" /><CodeLine lineNumber="5925"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116a7bc0fe0fa6be5eaabb77e46c8d9ab2c8">TargetLowering::C&#95;Immediate</a>:</Highlight></CodeLine>
<Link id="l05926" /><CodeLine lineNumber="5926"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116abc9c279d343d2f957ab51b37ff39e88e">TargetLowering::C&#95;Other</a>:</Highlight></CodeLine>
<Link id="l05927" /><CodeLine lineNumber="5927"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 4;</Highlight></CodeLine>
<Link id="l05928" /><CodeLine lineNumber="5928"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116a420d729d2e7d056ec884c094ccdc4467">TargetLowering::C&#95;Memory</a>:</Highlight></CodeLine>
<Link id="l05929" /><CodeLine lineNumber="5929"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116abd588753884964e239e61d80ebc2f039">TargetLowering::C&#95;Address</a>:</Highlight></CodeLine>
<Link id="l05930" /><CodeLine lineNumber="5930"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 3;</Highlight></CodeLine>
<Link id="l05931" /><CodeLine lineNumber="5931"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116a1d7718fd43ac0a5c715686a76f9cfd89">TargetLowering::C&#95;RegisterClass</a>:</Highlight></CodeLine>
<Link id="l05932" /><CodeLine lineNumber="5932"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 2;</Highlight></CodeLine>
<Link id="l05933" /><CodeLine lineNumber="5933"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116a85f9b8131f0608c03c58e4e23d875dfc">TargetLowering::C&#95;Register</a>:</Highlight></CodeLine>
<Link id="l05934" /><CodeLine lineNumber="5934"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 1;</Highlight></CodeLine>
<Link id="l05935" /><CodeLine lineNumber="5935"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116ad4cd486b7360ed34c9553b6c9056b764">TargetLowering::C&#95;Unknown</a>:</Highlight></CodeLine>
<Link id="l05936" /><CodeLine lineNumber="5936"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> 0;</Highlight></CodeLine>
<Link id="l05937" /><CodeLine lineNumber="5937"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05938" /><CodeLine lineNumber="5938"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;Invalid constraint type&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l05939" /><CodeLine lineNumber="5939"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l05940" /><CodeLine lineNumber="5940"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l05941" /><CodeLine lineNumber="5941"><Highlight kind="comment">/// Examine constraint type and operand type and determine a weight value.</Highlight></CodeLine>
<Link id="l05942" /><CodeLine lineNumber="5942"><Highlight kind="comment">/// This object must already have been set up with the operand type</Highlight></CodeLine>
<Link id="l05943" /><CodeLine lineNumber="5943"><Highlight kind="comment">/// and the current alternative constraint selected.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05944" /><CodeLine lineNumber="5944"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#a7f5cab5437026605269663cda7389abc">TargetLowering::ConstraintWeight</a></Highlight></CodeLine>
<Link id="l05945" /><CodeLine lineNumber="5945"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetlowering/#a242f3e03f104dc030614c21db016e206">TargetLowering::getMultipleConstraintMatchWeight</a>(</Highlight></CodeLine>
<Link id="l05946" /><CodeLine lineNumber="5946"><Highlight kind="normal">    AsmOperandInfo &amp;<a href="/docs/api/files/lib/lib/analysis/lazyvalueinfo-cpp/#ad7f64bcc544dcefb2e068282af1c549d">info</a>, </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> maIndex)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l05947" /><CodeLine lineNumber="5947"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/inlineasm/#adbd59a81e5e06598a94e8b0e3b216d99">InlineAsm::ConstraintCodeVector</a> &#42;rCodes;</Highlight></CodeLine>
<Link id="l05948" /><CodeLine lineNumber="5948"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (maIndex &gt;= (</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal">)<a href="/docs/api/files/lib/lib/analysis/lazyvalueinfo-cpp/#ad7f64bcc544dcefb2e068282af1c549d">info</a>.multipleAlternatives.size())</Highlight></CodeLine>
<Link id="l05949" /><CodeLine lineNumber="5949"><Highlight kind="normal">    rCodes = &amp;<a href="/docs/api/files/lib/lib/analysis/lazyvalueinfo-cpp/#ad7f64bcc544dcefb2e068282af1c549d">info</a>.Codes;</Highlight></CodeLine>
<Link id="l05950" /><CodeLine lineNumber="5950"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05951" /><CodeLine lineNumber="5951"><Highlight kind="normal">    rCodes = &amp;<a href="/docs/api/files/lib/lib/analysis/lazyvalueinfo-cpp/#ad7f64bcc544dcefb2e068282af1c549d">info</a>.multipleAlternatives&#91;maIndex&#93;.Codes;</Highlight></CodeLine>
<Link id="l05952" /><CodeLine lineNumber="5952"><Highlight kind="normal">  ConstraintWeight BestWeight = CW&#95;Invalid;</Highlight></CodeLine>
<Link id="l05953" /><CodeLine lineNumber="5953"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05954" /><CodeLine lineNumber="5954"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Loop over the options, keeping track of the most general one.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05955" /><CodeLine lineNumber="5955"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> std::string &amp;rCode : &#42;rCodes) &#123;</Highlight></CodeLine>
<Link id="l05956" /><CodeLine lineNumber="5956"><Highlight kind="normal">    ConstraintWeight weight =</Highlight></CodeLine>
<Link id="l05957" /><CodeLine lineNumber="5957"><Highlight kind="normal">        getSingleConstraintMatchWeight(<a href="/docs/api/files/lib/lib/analysis/lazyvalueinfo-cpp/#ad7f64bcc544dcefb2e068282af1c549d">info</a>, rCode.c&#95;str());</Highlight></CodeLine>
<Link id="l05958" /><CodeLine lineNumber="5958"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (weight &gt; BestWeight)</Highlight></CodeLine>
<Link id="l05959" /><CodeLine lineNumber="5959"><Highlight kind="normal">      BestWeight = weight;</Highlight></CodeLine>
<Link id="l05960" /><CodeLine lineNumber="5960"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l05961" /><CodeLine lineNumber="5961"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05962" /><CodeLine lineNumber="5962"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> BestWeight;</Highlight></CodeLine>
<Link id="l05963" /><CodeLine lineNumber="5963"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l05964" /><CodeLine lineNumber="5964"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l05965" /><CodeLine lineNumber="5965"><Highlight kind="comment">/// Examine constraint type and operand type and determine a weight value.</Highlight></CodeLine>
<Link id="l05966" /><CodeLine lineNumber="5966"><Highlight kind="comment">/// This object must already have been set up with the operand type</Highlight></CodeLine>
<Link id="l05967" /><CodeLine lineNumber="5967"><Highlight kind="comment">/// and the current alternative constraint selected.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05968" /><CodeLine lineNumber="5968"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#a7f5cab5437026605269663cda7389abc">TargetLowering::ConstraintWeight</a></Highlight></CodeLine>
<Link id="l05969" /><CodeLine lineNumber="5969"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetlowering/#afaa66a325b7b8c5c79eb2c8e9822ffd2">TargetLowering::getSingleConstraintMatchWeight</a>(</Highlight></CodeLine>
<Link id="l05970" /><CodeLine lineNumber="5970"><Highlight kind="normal">    AsmOperandInfo &amp;<a href="/docs/api/files/lib/lib/analysis/lazyvalueinfo-cpp/#ad7f64bcc544dcefb2e068282af1c549d">info</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> &#42;constraint)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l05971" /><CodeLine lineNumber="5971"><Highlight kind="normal">  ConstraintWeight weight = CW&#95;Invalid;</Highlight></CodeLine>
<Link id="l05972" /><CodeLine lineNumber="5972"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a> &#42;CallOperandVal = <a href="/docs/api/files/lib/lib/analysis/lazyvalueinfo-cpp/#ad7f64bcc544dcefb2e068282af1c549d">info</a>.CallOperandVal;</Highlight></CodeLine>
<Link id="l05973" /><CodeLine lineNumber="5973"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we don&#39;t have a value, we can&#39;t do a match,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05974" /><CodeLine lineNumber="5974"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// but allow it at the lowest weight.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05975" /><CodeLine lineNumber="5975"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!CallOperandVal)</Highlight></CodeLine>
<Link id="l05976" /><CodeLine lineNumber="5976"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> CW&#95;Default;</Highlight></CodeLine>
<Link id="l05977" /><CodeLine lineNumber="5977"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Look at the constraint type.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05978" /><CodeLine lineNumber="5978"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (&#42;constraint) &#123;</Highlight></CodeLine>
<Link id="l05979" /><CodeLine lineNumber="5979"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;i&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// immediate integer.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05980" /><CodeLine lineNumber="5980"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;n&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// immediate integer with a known value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05981" /><CodeLine lineNumber="5981"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantInt&gt;</a>(CallOperandVal))</Highlight></CodeLine>
<Link id="l05982" /><CodeLine lineNumber="5982"><Highlight kind="normal">        weight = CW&#95;Constant;</Highlight></CodeLine>
<Link id="l05983" /><CodeLine lineNumber="5983"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05984" /><CodeLine lineNumber="5984"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;s&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// non-explicit intregal immediate.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05985" /><CodeLine lineNumber="5985"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;GlobalValue&gt;</a>(CallOperandVal))</Highlight></CodeLine>
<Link id="l05986" /><CodeLine lineNumber="5986"><Highlight kind="normal">        weight = CW&#95;Constant;</Highlight></CodeLine>
<Link id="l05987" /><CodeLine lineNumber="5987"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05988" /><CodeLine lineNumber="5988"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;E&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// immediate float if host format.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05989" /><CodeLine lineNumber="5989"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;F&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// immediate float.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05990" /><CodeLine lineNumber="5990"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantFP&gt;</a>(CallOperandVal))</Highlight></CodeLine>
<Link id="l05991" /><CodeLine lineNumber="5991"><Highlight kind="normal">        weight = CW&#95;Constant;</Highlight></CodeLine>
<Link id="l05992" /><CodeLine lineNumber="5992"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l05993" /><CodeLine lineNumber="5993"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;&lt;&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// memory operand with autodecrement.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05994" /><CodeLine lineNumber="5994"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;&gt;&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// memory operand with autoincrement.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05995" /><CodeLine lineNumber="5995"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;m&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// memory operand.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05996" /><CodeLine lineNumber="5996"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;o&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// offsettable memory operand</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05997" /><CodeLine lineNumber="5997"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;V&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// non-offsettable memory operand</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l05998" /><CodeLine lineNumber="5998"><Highlight kind="normal">      weight = CW&#95;Memory;</Highlight></CodeLine>
<Link id="l05999" /><CodeLine lineNumber="5999"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06000" /><CodeLine lineNumber="6000"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;r&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// general register.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06001" /><CodeLine lineNumber="6001"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;g&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// general register, memory operand or immediate integer.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06002" /><CodeLine lineNumber="6002"><Highlight kind="normal">              </Highlight><Highlight kind="comment">// note: Clang converts &quot;g&quot; to &quot;imr&quot;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06003" /><CodeLine lineNumber="6003"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CallOperandVal-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>())</Highlight></CodeLine>
<Link id="l06004" /><CodeLine lineNumber="6004"><Highlight kind="normal">        weight = CW&#95;Register;</Highlight></CodeLine>
<Link id="l06005" /><CodeLine lineNumber="6005"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06006" /><CodeLine lineNumber="6006"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="charliteral">&#39;X&#39;</Highlight><Highlight kind="normal">: </Highlight><Highlight kind="comment">// any operand.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06007" /><CodeLine lineNumber="6007"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l06008" /><CodeLine lineNumber="6008"><Highlight kind="normal">    weight = CW&#95;Default;</Highlight></CodeLine>
<Link id="l06009" /><CodeLine lineNumber="6009"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06010" /><CodeLine lineNumber="6010"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06011" /><CodeLine lineNumber="6011"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> weight;</Highlight></CodeLine>
<Link id="l06012" /><CodeLine lineNumber="6012"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l06013" /><CodeLine lineNumber="6013"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l06014" /><CodeLine lineNumber="6014"><Highlight kind="comment">/// If there are multiple different constraints that we could pick for this</Highlight></CodeLine>
<Link id="l06015" /><CodeLine lineNumber="6015"><Highlight kind="comment">/// operand (e.g. &quot;imr&quot;) try to pick the &#39;best&#39; one.</Highlight></CodeLine>
<Link id="l06016" /><CodeLine lineNumber="6016"><Highlight kind="comment">/// This is somewhat tricky: constraints (TargetLowering::ConstraintType) fall</Highlight></CodeLine>
<Link id="l06017" /><CodeLine lineNumber="6017"><Highlight kind="comment">/// into seven classes:</Highlight></CodeLine>
<Link id="l06018" /><CodeLine lineNumber="6018"><Highlight kind="comment">///    Register      -&gt; one specific register</Highlight></CodeLine>
<Link id="l06019" /><CodeLine lineNumber="6019"><Highlight kind="comment">///    RegisterClass -&gt; a group of regs</Highlight></CodeLine>
<Link id="l06020" /><CodeLine lineNumber="6020"><Highlight kind="comment">///    Memory        -&gt; memory</Highlight></CodeLine>
<Link id="l06021" /><CodeLine lineNumber="6021"><Highlight kind="comment">///    Address       -&gt; a symbolic memory reference</Highlight></CodeLine>
<Link id="l06022" /><CodeLine lineNumber="6022"><Highlight kind="comment">///    Immediate     -&gt; immediate values</Highlight></CodeLine>
<Link id="l06023" /><CodeLine lineNumber="6023"><Highlight kind="comment">///    Other         -&gt; magic values (such as &quot;Flag Output Operands&quot;)</Highlight></CodeLine>
<Link id="l06024" /><CodeLine lineNumber="6024"><Highlight kind="comment">///    Unknown       -&gt; something we don&#39;t recognize yet and can&#39;t handle</Highlight></CodeLine>
<Link id="l06025" /><CodeLine lineNumber="6025"><Highlight kind="comment">/// Ideally, we would pick the most specific constraint possible: if we have</Highlight></CodeLine>
<Link id="l06026" /><CodeLine lineNumber="6026"><Highlight kind="comment">/// something that fits into a register, we would pick it.  The problem here</Highlight></CodeLine>
<Link id="l06027" /><CodeLine lineNumber="6027"><Highlight kind="comment">/// is that if we have something that could either be in a register or in</Highlight></CodeLine>
<Link id="l06028" /><CodeLine lineNumber="6028"><Highlight kind="comment">/// memory that use of the register could cause selection of &#42;other&#42;</Highlight></CodeLine>
<Link id="l06029" /><CodeLine lineNumber="6029"><Highlight kind="comment">/// operands to fail: they might only succeed if we pick memory.  Because of</Highlight></CodeLine>
<Link id="l06030" /><CodeLine lineNumber="6030"><Highlight kind="comment">/// this the heuristic we use is:</Highlight></CodeLine>
<Link id="l06031" /><CodeLine lineNumber="6031"><Highlight kind="comment">///</Highlight></CodeLine>
<Link id="l06032" /><CodeLine lineNumber="6032"><Highlight kind="comment">///  1) If there is an &#39;other&#39; constraint, and if the operand is valid for</Highlight></CodeLine>
<Link id="l06033" /><CodeLine lineNumber="6033"><Highlight kind="comment">///     that constraint, use it.  This makes us take advantage of &#39;i&#39;</Highlight></CodeLine>
<Link id="l06034" /><CodeLine lineNumber="6034"><Highlight kind="comment">///     constraints when available.</Highlight></CodeLine>
<Link id="l06035" /><CodeLine lineNumber="6035"><Highlight kind="comment">///  2) Otherwise, pick the most general constraint present.  This prefers</Highlight></CodeLine>
<Link id="l06036" /><CodeLine lineNumber="6036"><Highlight kind="comment">///     &#39;m&#39; over &#39;r&#39;, for example.</Highlight></CodeLine>
<Link id="l06037" /><CodeLine lineNumber="6037"><Highlight kind="comment">///</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06038" /><CodeLine lineNumber="6038"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#a0c572d6810211a80e26729c2d3cb0a6d">TargetLowering::ConstraintGroup</a> <a href="/docs/api/classes/llvm/targetlowering/#a09429106263aff7968fde2119706fd42">TargetLowering::getConstraintPreferences</a>(</Highlight></CodeLine>
<Link id="l06039" /><CodeLine lineNumber="6039"><Highlight kind="normal">    TargetLowering::AsmOperandInfo &amp;OpInfo)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l06040" /><CodeLine lineNumber="6040"><Highlight kind="normal">  ConstraintGroup <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</Highlight></CodeLine>
<Link id="l06041" /><CodeLine lineNumber="6041"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06042" /><CodeLine lineNumber="6042"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.reserve(OpInfo.Codes.size());</Highlight></CodeLine>
<Link id="l06043" /><CodeLine lineNumber="6043"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (StringRef Code : OpInfo.Codes) &#123;</Highlight></CodeLine>
<Link id="l06044" /><CodeLine lineNumber="6044"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116">TargetLowering::ConstraintType</a> CType = getConstraintType(Code);</Highlight></CodeLine>
<Link id="l06045" /><CodeLine lineNumber="6045"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06046" /><CodeLine lineNumber="6046"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Indirect &#39;other&#39; or &#39;immediate&#39; constraints are not allowed.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06047" /><CodeLine lineNumber="6047"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OpInfo.isIndirect &amp;&amp; !(CType == <a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116a420d729d2e7d056ec884c094ccdc4467">TargetLowering::C&#95;Memory</a> ||</Highlight></CodeLine>
<Link id="l06048" /><CodeLine lineNumber="6048"><Highlight kind="normal">                               CType == <a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116a85f9b8131f0608c03c58e4e23d875dfc">TargetLowering::C&#95;Register</a> ||</Highlight></CodeLine>
<Link id="l06049" /><CodeLine lineNumber="6049"><Highlight kind="normal">                               CType == <a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116a1d7718fd43ac0a5c715686a76f9cfd89">TargetLowering::C&#95;RegisterClass</a>))</Highlight></CodeLine>
<Link id="l06050" /><CodeLine lineNumber="6050"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06051" /><CodeLine lineNumber="6051"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06052" /><CodeLine lineNumber="6052"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Things with matching constraints can only be registers, per gcc</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06053" /><CodeLine lineNumber="6053"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// documentation.  This mainly affects &quot;g&quot; constraints.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06054" /><CodeLine lineNumber="6054"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CType == <a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116a420d729d2e7d056ec884c094ccdc4467">TargetLowering::C&#95;Memory</a> &amp;&amp; OpInfo.hasMatchingInput())</Highlight></CodeLine>
<Link id="l06055" /><CodeLine lineNumber="6055"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06056" /><CodeLine lineNumber="6056"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06057" /><CodeLine lineNumber="6057"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.emplace&#95;back(Code, CType);</Highlight></CodeLine>
<Link id="l06058" /><CodeLine lineNumber="6058"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06059" /><CodeLine lineNumber="6059"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06060" /><CodeLine lineNumber="6060"><Highlight kind="normal">  std::stable&#95;sort(</Highlight></CodeLine>
<Link id="l06061" /><CodeLine lineNumber="6061"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.begin(), <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.end(), &#91;&#93;(ConstraintPair a, ConstraintPair b) &#123;</Highlight></CodeLine>
<Link id="l06062" /><CodeLine lineNumber="6062"><Highlight kind="normal">        return getConstraintPiority(a.second) &gt; getConstraintPiority(b.second);</Highlight></CodeLine>
<Link id="l06063" /><CodeLine lineNumber="6063"><Highlight kind="normal">      &#125;);</Highlight></CodeLine>
<Link id="l06064" /><CodeLine lineNumber="6064"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06065" /><CodeLine lineNumber="6065"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</Highlight></CodeLine>
<Link id="l06066" /><CodeLine lineNumber="6066"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l06067" /><CodeLine lineNumber="6067"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l06068" /><CodeLine lineNumber="6068"><Highlight kind="comment">/// If we have an immediate, see if we can lower it. Return true if we can,</Highlight></CodeLine>
<Link id="l06069" /><CodeLine lineNumber="6069"><Highlight kind="comment">/// false otherwise.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06070" /><CodeLine lineNumber="6070" lineLink="#a090b7c264f35ed6b224b38783e1d46fb"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="#a090b7c264f35ed6b224b38783e1d46fb">lowerImmediateIfPossible</a>(<a href="/docs/api/classes/llvm/targetlowering/#a94865930eb23376a76409e18190f615d">TargetLowering::ConstraintPair</a> &amp;<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>,</Highlight></CodeLine>
<Link id="l06071" /><CodeLine lineNumber="6071"><Highlight kind="normal">                                     <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &#42;DAG,</Highlight></CodeLine>
<Link id="l06072" /><CodeLine lineNumber="6072"><Highlight kind="normal">                                     </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &amp;TLI) &#123;</Highlight></CodeLine>
<Link id="l06073" /><CodeLine lineNumber="6073"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06074" /><CodeLine lineNumber="6074"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.second == <a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116abc9c279d343d2f957ab51b37ff39e88e">TargetLowering::C&#95;Other</a> ||</Highlight></CodeLine>
<Link id="l06075" /><CodeLine lineNumber="6075"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.second == <a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116a7bc0fe0fa6be5eaabb77e46c8d9ab2c8">TargetLowering::C&#95;Immediate</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l06076" /><CodeLine lineNumber="6076"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;need immediate or other&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06077" /><CodeLine lineNumber="6077"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06078" /><CodeLine lineNumber="6078"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getNode())</Highlight></CodeLine>
<Link id="l06079" /><CodeLine lineNumber="6079"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06080" /><CodeLine lineNumber="6080"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06081" /><CodeLine lineNumber="6081"><Highlight kind="normal">  std::vector&lt;SDValue&gt; ResultOps;</Highlight></CodeLine>
<Link id="l06082" /><CodeLine lineNumber="6082"><Highlight kind="normal">  TLI.<a href="/docs/api/classes/llvm/targetlowering/#ad3f2eb78e627fd0d785fd4119d299558">LowerAsmOperandForConstraint</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.first, ResultOps, &#42;DAG);</Highlight></CodeLine>
<Link id="l06083" /><CodeLine lineNumber="6083"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> !ResultOps.empty();</Highlight></CodeLine>
<Link id="l06084" /><CodeLine lineNumber="6084"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l06085" /><CodeLine lineNumber="6085"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l06086" /><CodeLine lineNumber="6086"><Highlight kind="comment">/// Determines the constraint code and constraint type to use for the specific</Highlight></CodeLine>
<Link id="l06087" /><CodeLine lineNumber="6087"><Highlight kind="comment">/// AsmOperandInfo, setting OpInfo.ConstraintCode and OpInfo.ConstraintType.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06088" /><CodeLine lineNumber="6088"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a279a7f92d056886ac713c0f06cc73045">TargetLowering::ComputeConstraintToUse</a>(AsmOperandInfo &amp;OpInfo,</Highlight></CodeLine>
<Link id="l06089" /><CodeLine lineNumber="6089"><Highlight kind="normal">                                            <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l06090" /><CodeLine lineNumber="6090"><Highlight kind="normal">                                            SelectionDAG &#42;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l06091" /><CodeLine lineNumber="6091"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!OpInfo.Codes.empty() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Must have at least one constraint&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06092" /><CodeLine lineNumber="6092"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06093" /><CodeLine lineNumber="6093"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Single-letter constraints (&#39;r&#39;) are very common.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06094" /><CodeLine lineNumber="6094"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OpInfo.Codes.size() == 1) &#123;</Highlight></CodeLine>
<Link id="l06095" /><CodeLine lineNumber="6095"><Highlight kind="normal">    OpInfo.ConstraintCode = OpInfo.Codes&#91;0&#93;;</Highlight></CodeLine>
<Link id="l06096" /><CodeLine lineNumber="6096"><Highlight kind="normal">    OpInfo.ConstraintType = getConstraintType(OpInfo.ConstraintCode);</Highlight></CodeLine>
<Link id="l06097" /><CodeLine lineNumber="6097"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l06098" /><CodeLine lineNumber="6098"><Highlight kind="normal">    ConstraintGroup <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> = getConstraintPreferences(OpInfo);</Highlight></CodeLine>
<Link id="l06099" /><CodeLine lineNumber="6099"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.empty())</Highlight></CodeLine>
<Link id="l06100" /><CodeLine lineNumber="6100"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06101" /><CodeLine lineNumber="6101"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06102" /><CodeLine lineNumber="6102"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> BestIdx = 0;</Highlight></CodeLine>
<Link id="l06103" /><CodeLine lineNumber="6103"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#abb2b3a60ccc38a28239e19a1646e0c8a">E</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>.size();</Highlight></CodeLine>
<Link id="l06104" /><CodeLine lineNumber="6104"><Highlight kind="normal">         BestIdx &lt; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#abb2b3a60ccc38a28239e19a1646e0c8a">E</a> &amp;&amp; (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>&#91;BestIdx&#93;.second == <a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116abc9c279d343d2f957ab51b37ff39e88e">TargetLowering::C&#95;Other</a> ||</Highlight></CodeLine>
<Link id="l06105" /><CodeLine lineNumber="6105"><Highlight kind="normal">                         <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>&#91;BestIdx&#93;.second == <a href="/docs/api/classes/llvm/targetlowering/#a0b0176781cd4fd9f45cc739f1d007116a7bc0fe0fa6be5eaabb77e46c8d9ab2c8">TargetLowering::C&#95;Immediate</a>);</Highlight></CodeLine>
<Link id="l06106" /><CodeLine lineNumber="6106"><Highlight kind="normal">         ++BestIdx) &#123;</Highlight></CodeLine>
<Link id="l06107" /><CodeLine lineNumber="6107"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a090b7c264f35ed6b224b38783e1d46fb">lowerImmediateIfPossible</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>&#91;BestIdx&#93;, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG, &#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">))</Highlight></CodeLine>
<Link id="l06108" /><CodeLine lineNumber="6108"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06109" /><CodeLine lineNumber="6109"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If we&#39;re out of constraints, just pick the first one.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06110" /><CodeLine lineNumber="6110"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (BestIdx + 1 == <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#abb2b3a60ccc38a28239e19a1646e0c8a">E</a>) &#123;</Highlight></CodeLine>
<Link id="l06111" /><CodeLine lineNumber="6111"><Highlight kind="normal">        BestIdx = 0;</Highlight></CodeLine>
<Link id="l06112" /><CodeLine lineNumber="6112"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06113" /><CodeLine lineNumber="6113"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l06114" /><CodeLine lineNumber="6114"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l06115" /><CodeLine lineNumber="6115"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06116" /><CodeLine lineNumber="6116"><Highlight kind="normal">    OpInfo.ConstraintCode = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>&#91;BestIdx&#93;.first;</Highlight></CodeLine>
<Link id="l06117" /><CodeLine lineNumber="6117"><Highlight kind="normal">    OpInfo.ConstraintType = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>&#91;BestIdx&#93;.second;</Highlight></CodeLine>
<Link id="l06118" /><CodeLine lineNumber="6118"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06119" /><CodeLine lineNumber="6119"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06120" /><CodeLine lineNumber="6120"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// &#39;X&#39; matches anything.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06121" /><CodeLine lineNumber="6121"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OpInfo.ConstraintCode == </Highlight><Highlight kind="stringliteral">&quot;X&quot;</Highlight><Highlight kind="normal"> &amp;&amp; OpInfo.CallOperandVal) &#123;</Highlight></CodeLine>
<Link id="l06122" /><CodeLine lineNumber="6122"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Constants are handled elsewhere.  For Functions, the type here is the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06123" /><CodeLine lineNumber="6123"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// type of the result, which is not what we want to look at; leave them</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06124" /><CodeLine lineNumber="6124"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// alone.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06125" /><CodeLine lineNumber="6125"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a> &#42;<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea9e3669d19b675bd57058fd4664205d2a">v</a> = OpInfo.CallOperandVal;</Highlight></CodeLine>
<Link id="l06126" /><CodeLine lineNumber="6126"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantInt&gt;</a>(v) || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;Function&gt;</a>(v)) &#123;</Highlight></CodeLine>
<Link id="l06127" /><CodeLine lineNumber="6127"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06128" /><CodeLine lineNumber="6128"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l06129" /><CodeLine lineNumber="6129"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06130" /><CodeLine lineNumber="6130"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;BasicBlock&gt;</a>(v) || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;BlockAddress&gt;</a>(v)) &#123;</Highlight></CodeLine>
<Link id="l06131" /><CodeLine lineNumber="6131"><Highlight kind="normal">      OpInfo.ConstraintCode = </Highlight><Highlight kind="stringliteral">&quot;i&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06132" /><CodeLine lineNumber="6132"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06133" /><CodeLine lineNumber="6133"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l06134" /><CodeLine lineNumber="6134"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06135" /><CodeLine lineNumber="6135"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Otherwise, try to resolve it to something we know about by looking at</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06136" /><CodeLine lineNumber="6136"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the actual operand type.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06137" /><CodeLine lineNumber="6137"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> &#42;Repl = LowerXConstraint(OpInfo.ConstraintVT)) &#123;</Highlight></CodeLine>
<Link id="l06138" /><CodeLine lineNumber="6138"><Highlight kind="normal">      OpInfo.ConstraintCode = Repl;</Highlight></CodeLine>
<Link id="l06139" /><CodeLine lineNumber="6139"><Highlight kind="normal">      OpInfo.ConstraintType = getConstraintType(OpInfo.ConstraintCode);</Highlight></CodeLine>
<Link id="l06140" /><CodeLine lineNumber="6140"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l06141" /><CodeLine lineNumber="6141"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06142" /><CodeLine lineNumber="6142"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l06143" /><CodeLine lineNumber="6143"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l06144" /><CodeLine lineNumber="6144"><Highlight kind="comment">/// Given an exact SDIV by a constant, create a multiplication</Highlight></CodeLine>
<Link id="l06145" /><CodeLine lineNumber="6145"><Highlight kind="comment">/// with the multiplicative inverse of the constant.</Highlight></CodeLine>
<Link id="l06146" /><CodeLine lineNumber="6146"><Highlight kind="comment">/// Ref: &quot;Hacker&#39;s Delight&quot; by Henry Warren, 2nd Edition, p. 242</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06147" /><CodeLine lineNumber="6147" lineLink="#af1364d76011b791bbac39ca8470dd2bf"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="#af1364d76011b791bbac39ca8470dd2bf">BuildExactSDIV</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &amp;TLI, <a href="/docs/api/classes/llvm/sdnode">SDNode</a> &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>,</Highlight></CodeLine>
<Link id="l06148" /><CodeLine lineNumber="6148"><Highlight kind="normal">                              </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdloc">SDLoc</a> &amp;dl, <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp;DAG,</Highlight></CodeLine>
<Link id="l06149" /><CodeLine lineNumber="6149"><Highlight kind="normal">                              <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;SDNode &#42;&gt;</a> &amp;Created) &#123;</Highlight></CodeLine>
<Link id="l06150" /><CodeLine lineNumber="6150"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Op0 = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l06151" /><CodeLine lineNumber="6151"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Op1 = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l06152" /><CodeLine lineNumber="6152"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> VT = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l06153" /><CodeLine lineNumber="6153"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> SVT = VT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l06154" /><CodeLine lineNumber="6154"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> ShVT = TLI.<a href="/docs/api/classes/llvm/targetloweringbase/#a6a2579bc0354806c6c9708b068777c3a">getShiftAmountTy</a>(VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l06155" /><CodeLine lineNumber="6155"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> ShSVT = ShVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l06156" /><CodeLine lineNumber="6156"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06157" /><CodeLine lineNumber="6157"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseSRA = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06158" /><CodeLine lineNumber="6158"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;SDValue, 16&gt;</a> Shifts, Factors;</Highlight></CodeLine>
<Link id="l06159" /><CodeLine lineNumber="6159"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06160" /><CodeLine lineNumber="6160"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> BuildSDIVPattern = &#91;&amp;&#93;(<a href="/docs/api/classes/llvm/constantsdnode">ConstantSDNode</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l06161" /><CodeLine lineNumber="6161"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;isZero())</Highlight></CodeLine>
<Link id="l06162" /><CodeLine lineNumber="6162"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06163" /><CodeLine lineNumber="6163"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/apint">APInt</a> Divisor = <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getAPIntValue();</Highlight></CodeLine>
<Link id="l06164" /><CodeLine lineNumber="6164"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Shift = Divisor.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>();</Highlight></CodeLine>
<Link id="l06165" /><CodeLine lineNumber="6165"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Shift) &#123;</Highlight></CodeLine>
<Link id="l06166" /><CodeLine lineNumber="6166"><Highlight kind="normal">      Divisor.<a href="/docs/api/classes/llvm/apint/#a7e30b3aa214eba50eed018b5b19fc6aa">ashrInPlace</a>(Shift);</Highlight></CodeLine>
<Link id="l06167" /><CodeLine lineNumber="6167"><Highlight kind="normal">      UseSRA = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06168" /><CodeLine lineNumber="6168"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l06169" /><CodeLine lineNumber="6169"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/apint">APInt</a> Factor = Divisor.<a href="/docs/api/classes/llvm/apint/#aba59baafccd4c4796301b857df3c40c6">multiplicativeInverse</a>();</Highlight></CodeLine>
<Link id="l06170" /><CodeLine lineNumber="6170"><Highlight kind="normal">    Shifts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Shift, dl, ShSVT));</Highlight></CodeLine>
<Link id="l06171" /><CodeLine lineNumber="6171"><Highlight kind="normal">    Factors.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Factor, dl, SVT));</Highlight></CodeLine>
<Link id="l06172" /><CodeLine lineNumber="6172"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06173" /><CodeLine lineNumber="6173"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l06174" /><CodeLine lineNumber="6174"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06175" /><CodeLine lineNumber="6175"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Collect all magic values from the build vector.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06176" /><CodeLine lineNumber="6176"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/isd/#a309c11edf22da984f95cf9ba7a699c11">ISD::matchUnaryPredicate</a>(Op1, BuildSDIVPattern))</Highlight></CodeLine>
<Link id="l06177" /><CodeLine lineNumber="6177"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06178" /><CodeLine lineNumber="6178"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06179" /><CodeLine lineNumber="6179"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Shift, Factor;</Highlight></CodeLine>
<Link id="l06180" /><CodeLine lineNumber="6180"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op1.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aff6f73b624fecca7dbe94259f9437e32">ISD::BUILD&#95;VECTOR</a>) &#123;</Highlight></CodeLine>
<Link id="l06181" /><CodeLine lineNumber="6181"><Highlight kind="normal">    Shift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(ShVT, dl, Shifts);</Highlight></CodeLine>
<Link id="l06182" /><CodeLine lineNumber="6182"><Highlight kind="normal">    Factor = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(VT, dl, Factors);</Highlight></CodeLine>
<Link id="l06183" /><CodeLine lineNumber="6183"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op1.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7f864031b6fb691b1525cbea92542ef1">ISD::SPLAT&#95;VECTOR</a>) &#123;</Highlight></CodeLine>
<Link id="l06184" /><CodeLine lineNumber="6184"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Shifts.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp; Factors.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l06185" /><CodeLine lineNumber="6185"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;Expected matchUnaryPredicate to return one element for scalable &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06186" /><CodeLine lineNumber="6186"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;vectors&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06187" /><CodeLine lineNumber="6187"><Highlight kind="normal">    Shift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(ShVT, dl, Shifts&#91;0&#93;);</Highlight></CodeLine>
<Link id="l06188" /><CodeLine lineNumber="6188"><Highlight kind="normal">    Factor = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(VT, dl, Factors&#91;0&#93;);</Highlight></CodeLine>
<Link id="l06189" /><CodeLine lineNumber="6189"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l06190" /><CodeLine lineNumber="6190"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantSDNode&gt;</a>(Op1) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Expected a constant&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06191" /><CodeLine lineNumber="6191"><Highlight kind="normal">    Shift = Shifts&#91;0&#93;;</Highlight></CodeLine>
<Link id="l06192" /><CodeLine lineNumber="6192"><Highlight kind="normal">    Factor = Factors&#91;0&#93;;</Highlight></CodeLine>
<Link id="l06193" /><CodeLine lineNumber="6193"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06194" /><CodeLine lineNumber="6194"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06195" /><CodeLine lineNumber="6195"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Res = Op0;</Highlight></CodeLine>
<Link id="l06196" /><CodeLine lineNumber="6196"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UseSRA) &#123;</Highlight></CodeLine>
<Link id="l06197" /><CodeLine lineNumber="6197"><Highlight kind="normal">    Res = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>, dl, VT, Res, Shift, <a href="/docs/api/structs/llvm/sdnodeflags/#a19128eb1e6729dd3cf2afce783620adaa5289c91e7aef74edb3c9ee8c64d13c1b">SDNodeFlags::Exact</a>);</Highlight></CodeLine>
<Link id="l06198" /><CodeLine lineNumber="6198"><Highlight kind="normal">    Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Res.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06199" /><CodeLine lineNumber="6199"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06200" /><CodeLine lineNumber="6200"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06201" /><CodeLine lineNumber="6201"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, VT, Res, Factor);</Highlight></CodeLine>
<Link id="l06202" /><CodeLine lineNumber="6202"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l06203" /><CodeLine lineNumber="6203"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l06204" /><CodeLine lineNumber="6204"><Highlight kind="comment">/// Given an exact UDIV by a constant, create a multiplication</Highlight></CodeLine>
<Link id="l06205" /><CodeLine lineNumber="6205"><Highlight kind="comment">/// with the multiplicative inverse of the constant.</Highlight></CodeLine>
<Link id="l06206" /><CodeLine lineNumber="6206"><Highlight kind="comment">/// Ref: &quot;Hacker&#39;s Delight&quot; by Henry Warren, 2nd Edition, p. 242</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06207" /><CodeLine lineNumber="6207" lineLink="#a1ca08074fa512b26eb7e8e88833892d9"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="#a1ca08074fa512b26eb7e8e88833892d9">BuildExactUDIV</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &amp;TLI, <a href="/docs/api/classes/llvm/sdnode">SDNode</a> &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>,</Highlight></CodeLine>
<Link id="l06208" /><CodeLine lineNumber="6208"><Highlight kind="normal">                              </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdloc">SDLoc</a> &amp;dl, <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp;DAG,</Highlight></CodeLine>
<Link id="l06209" /><CodeLine lineNumber="6209"><Highlight kind="normal">                              <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;SDNode &#42;&gt;</a> &amp;Created) &#123;</Highlight></CodeLine>
<Link id="l06210" /><CodeLine lineNumber="6210"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> VT = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l06211" /><CodeLine lineNumber="6211"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> SVT = VT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l06212" /><CodeLine lineNumber="6212"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> ShVT = TLI.<a href="/docs/api/classes/llvm/targetloweringbase/#a6a2579bc0354806c6c9708b068777c3a">getShiftAmountTy</a>(VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l06213" /><CodeLine lineNumber="6213"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> ShSVT = ShVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l06214" /><CodeLine lineNumber="6214"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06215" /><CodeLine lineNumber="6215"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseSRL = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06216" /><CodeLine lineNumber="6216"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;SDValue, 16&gt;</a> Shifts, Factors;</Highlight></CodeLine>
<Link id="l06217" /><CodeLine lineNumber="6217"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06218" /><CodeLine lineNumber="6218"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> BuildUDIVPattern = &#91;&amp;&#93;(<a href="/docs/api/classes/llvm/constantsdnode">ConstantSDNode</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l06219" /><CodeLine lineNumber="6219"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;isZero())</Highlight></CodeLine>
<Link id="l06220" /><CodeLine lineNumber="6220"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06221" /><CodeLine lineNumber="6221"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/apint">APInt</a> Divisor = <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getAPIntValue();</Highlight></CodeLine>
<Link id="l06222" /><CodeLine lineNumber="6222"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Shift = Divisor.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>();</Highlight></CodeLine>
<Link id="l06223" /><CodeLine lineNumber="6223"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Shift) &#123;</Highlight></CodeLine>
<Link id="l06224" /><CodeLine lineNumber="6224"><Highlight kind="normal">      Divisor.<a href="/docs/api/classes/llvm/apint/#af338e23a90c301183968435e80cd6a27">lshrInPlace</a>(Shift);</Highlight></CodeLine>
<Link id="l06225" /><CodeLine lineNumber="6225"><Highlight kind="normal">      UseSRL = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06226" /><CodeLine lineNumber="6226"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l06227" /><CodeLine lineNumber="6227"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Calculate the multiplicative inverse modulo BW.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06228" /><CodeLine lineNumber="6228"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/apint">APInt</a> Factor = Divisor.<a href="/docs/api/classes/llvm/apint/#aba59baafccd4c4796301b857df3c40c6">multiplicativeInverse</a>();</Highlight></CodeLine>
<Link id="l06229" /><CodeLine lineNumber="6229"><Highlight kind="normal">    Shifts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Shift, dl, ShSVT));</Highlight></CodeLine>
<Link id="l06230" /><CodeLine lineNumber="6230"><Highlight kind="normal">    Factors.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Factor, dl, SVT));</Highlight></CodeLine>
<Link id="l06231" /><CodeLine lineNumber="6231"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06232" /><CodeLine lineNumber="6232"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l06233" /><CodeLine lineNumber="6233"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06234" /><CodeLine lineNumber="6234"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Op1 = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l06235" /><CodeLine lineNumber="6235"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06236" /><CodeLine lineNumber="6236"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Collect all magic values from the build vector.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06237" /><CodeLine lineNumber="6237"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/isd/#a309c11edf22da984f95cf9ba7a699c11">ISD::matchUnaryPredicate</a>(Op1, BuildUDIVPattern))</Highlight></CodeLine>
<Link id="l06238" /><CodeLine lineNumber="6238"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06239" /><CodeLine lineNumber="6239"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06240" /><CodeLine lineNumber="6240"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Shift, Factor;</Highlight></CodeLine>
<Link id="l06241" /><CodeLine lineNumber="6241"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op1.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aff6f73b624fecca7dbe94259f9437e32">ISD::BUILD&#95;VECTOR</a>) &#123;</Highlight></CodeLine>
<Link id="l06242" /><CodeLine lineNumber="6242"><Highlight kind="normal">    Shift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(ShVT, dl, Shifts);</Highlight></CodeLine>
<Link id="l06243" /><CodeLine lineNumber="6243"><Highlight kind="normal">    Factor = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(VT, dl, Factors);</Highlight></CodeLine>
<Link id="l06244" /><CodeLine lineNumber="6244"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Op1.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7f864031b6fb691b1525cbea92542ef1">ISD::SPLAT&#95;VECTOR</a>) &#123;</Highlight></CodeLine>
<Link id="l06245" /><CodeLine lineNumber="6245"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Shifts.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp; Factors.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l06246" /><CodeLine lineNumber="6246"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;Expected matchUnaryPredicate to return one element for scalable &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06247" /><CodeLine lineNumber="6247"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;vectors&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06248" /><CodeLine lineNumber="6248"><Highlight kind="normal">    Shift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(ShVT, dl, Shifts&#91;0&#93;);</Highlight></CodeLine>
<Link id="l06249" /><CodeLine lineNumber="6249"><Highlight kind="normal">    Factor = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(VT, dl, Factors&#91;0&#93;);</Highlight></CodeLine>
<Link id="l06250" /><CodeLine lineNumber="6250"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l06251" /><CodeLine lineNumber="6251"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantSDNode&gt;</a>(Op1) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Expected a constant&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06252" /><CodeLine lineNumber="6252"><Highlight kind="normal">    Shift = Shifts&#91;0&#93;;</Highlight></CodeLine>
<Link id="l06253" /><CodeLine lineNumber="6253"><Highlight kind="normal">    Factor = Factors&#91;0&#93;;</Highlight></CodeLine>
<Link id="l06254" /><CodeLine lineNumber="6254"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06255" /><CodeLine lineNumber="6255"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06256" /><CodeLine lineNumber="6256"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Res = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l06257" /><CodeLine lineNumber="6257"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UseSRL) &#123;</Highlight></CodeLine>
<Link id="l06258" /><CodeLine lineNumber="6258"><Highlight kind="normal">    Res = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, Res, Shift, <a href="/docs/api/structs/llvm/sdnodeflags/#a19128eb1e6729dd3cf2afce783620adaa5289c91e7aef74edb3c9ee8c64d13c1b">SDNodeFlags::Exact</a>);</Highlight></CodeLine>
<Link id="l06259" /><CodeLine lineNumber="6259"><Highlight kind="normal">    Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Res.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06260" /><CodeLine lineNumber="6260"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06261" /><CodeLine lineNumber="6261"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06262" /><CodeLine lineNumber="6262"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, VT, Res, Factor);</Highlight></CodeLine>
<Link id="l06263" /><CodeLine lineNumber="6263"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l06264" /><CodeLine lineNumber="6264"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06265" /><CodeLine lineNumber="6265"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a10e676263a198d8cd480918492893dcb">TargetLowering::BuildSDIVPow2</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;Divisor,</Highlight></CodeLine>
<Link id="l06266" /><CodeLine lineNumber="6266"><Highlight kind="normal">                              SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l06267" /><CodeLine lineNumber="6267"><Highlight kind="normal">                              SmallVectorImpl&lt;SDNode &#42;&gt; &amp;Created)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l06268" /><CodeLine lineNumber="6268"><Highlight kind="normal">  AttributeList Attr = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac64ec73b0617befef1fb2eae78d12b5f">getMachineFunction</a>().<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>().<a href="/docs/api/classes/llvm/function/#a7477aafbbe989ad35b96fac186d8e9fd">getAttributes</a>();</Highlight></CodeLine>
<Link id="l06269" /><CodeLine lineNumber="6269"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa8253e8cffce52e1615827da53089978">isIntDivCheap</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0), Attr))</Highlight></CodeLine>
<Link id="l06270" /><CodeLine lineNumber="6270"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, 0); </Highlight><Highlight kind="comment">// Lower SDIV as SDIV</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06271" /><CodeLine lineNumber="6271"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06272" /><CodeLine lineNumber="6272"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l06273" /><CodeLine lineNumber="6273"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06274" /><CodeLine lineNumber="6274"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a></Highlight></CodeLine>
<Link id="l06275" /><CodeLine lineNumber="6275"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#abe774a33e51c905a23e19b7b9803e8eb">TargetLowering::BuildSREMPow2</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;Divisor,</Highlight></CodeLine>
<Link id="l06276" /><CodeLine lineNumber="6276"><Highlight kind="normal">                              SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l06277" /><CodeLine lineNumber="6277"><Highlight kind="normal">                              SmallVectorImpl&lt;SDNode &#42;&gt; &amp;Created)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l06278" /><CodeLine lineNumber="6278"><Highlight kind="normal">  AttributeList Attr = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac64ec73b0617befef1fb2eae78d12b5f">getMachineFunction</a>().<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>().<a href="/docs/api/classes/llvm/function/#a7477aafbbe989ad35b96fac186d8e9fd">getAttributes</a>();</Highlight></CodeLine>
<Link id="l06279" /><CodeLine lineNumber="6279"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa8253e8cffce52e1615827da53089978">isIntDivCheap</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0), Attr))</Highlight></CodeLine>
<Link id="l06280" /><CodeLine lineNumber="6280"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, 0); </Highlight><Highlight kind="comment">// Lower SREM as SREM</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06281" /><CodeLine lineNumber="6281"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06282" /><CodeLine lineNumber="6282"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l06283" /><CodeLine lineNumber="6283"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l06284" /><CodeLine lineNumber="6284"><Highlight kind="comment">/// Build sdiv by power-of-2 with conditional move instructions</Highlight></CodeLine>
<Link id="l06285" /><CodeLine lineNumber="6285"><Highlight kind="comment">/// Ref: &quot;Hacker&#39;s Delight&quot; by Henry Warren 10-1</Highlight></CodeLine>
<Link id="l06286" /><CodeLine lineNumber="6286"><Highlight kind="comment">/// If conditional move/branch is preferred, we lower sdiv x, +/-2&#42;&#42;k into:</Highlight></CodeLine>
<Link id="l06287" /><CodeLine lineNumber="6287"><Highlight kind="comment">///   bgez x, label</Highlight></CodeLine>
<Link id="l06288" /><CodeLine lineNumber="6288"><Highlight kind="comment">///   add x, x, 2&#42;&#42;k-1</Highlight></CodeLine>
<Link id="l06289" /><CodeLine lineNumber="6289"><Highlight kind="comment">/// label:</Highlight></CodeLine>
<Link id="l06290" /><CodeLine lineNumber="6290"><Highlight kind="comment">///   sra res, x, k</Highlight></CodeLine>
<Link id="l06291" /><CodeLine lineNumber="6291"><Highlight kind="comment">///   neg res, res (when the divisor is negative)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06292" /><CodeLine lineNumber="6292"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#ac059b1ca86f2540e9fcfbee0a0da1c7c">TargetLowering::buildSDIVPow2WithCMov</a>(</Highlight></CodeLine>
<Link id="l06293" /><CodeLine lineNumber="6293"><Highlight kind="normal">    SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;Divisor, SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l06294" /><CodeLine lineNumber="6294"><Highlight kind="normal">    SmallVectorImpl&lt;SDNode &#42;&gt; &amp;Created)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l06295" /><CodeLine lineNumber="6295"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Lg2 = Divisor.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>();</Highlight></CodeLine>
<Link id="l06296" /><CodeLine lineNumber="6296"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l06297" /><CodeLine lineNumber="6297"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06298" /><CodeLine lineNumber="6298"><Highlight kind="normal">  SDLoc <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l06299" /><CodeLine lineNumber="6299"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N0 = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l06300" /><CodeLine lineNumber="6300"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT);</Highlight></CodeLine>
<Link id="l06301" /><CodeLine lineNumber="6301"><Highlight kind="normal">  APInt Lg2Mask = <a href="/docs/api/classes/llvm/apint/#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(VT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>(), Lg2);</Highlight></CodeLine>
<Link id="l06302" /><CodeLine lineNumber="6302"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Pow2MinusOne = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Lg2Mask, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT);</Highlight></CodeLine>
<Link id="l06303" /><CodeLine lineNumber="6303"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06304" /><CodeLine lineNumber="6304"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If N0 is negative, we need to add (Pow2 - 1) to it before shifting right.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06305" /><CodeLine lineNumber="6305"><Highlight kind="normal">  EVT CCVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l06306" /><CodeLine lineNumber="6306"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/x86/#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CCVT, N0, Zero, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l06307" /><CodeLine lineNumber="6307"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, N0, Pow2MinusOne);</Highlight></CodeLine>
<Link id="l06308" /><CodeLine lineNumber="6308"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> CMov = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a78d0f198115bfe3331ab7cfcf7a40a97">ISD::SELECT</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Cmp, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a>, N0);</Highlight></CodeLine>
<Link id="l06309" /><CodeLine lineNumber="6309"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06310" /><CodeLine lineNumber="6310"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/namespaces/llvm/x86/#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a>.getNode());</Highlight></CodeLine>
<Link id="l06311" /><CodeLine lineNumber="6311"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a>.getNode());</Highlight></CodeLine>
<Link id="l06312" /><CodeLine lineNumber="6312"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(CMov.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06313" /><CodeLine lineNumber="6313"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06314" /><CodeLine lineNumber="6314"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Divide by pow2.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06315" /><CodeLine lineNumber="6315"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">SRA</a> =</Highlight></CodeLine>
<Link id="l06316" /><CodeLine lineNumber="6316"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, CMov, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Lg2, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT));</Highlight></CodeLine>
<Link id="l06317" /><CodeLine lineNumber="6317"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06318" /><CodeLine lineNumber="6318"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If we&#39;re dividing by a positive value, we&#39;re done.  Otherwise, we must</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06319" /><CodeLine lineNumber="6319"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// negate the result.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06320" /><CodeLine lineNumber="6320"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Divisor.<a href="/docs/api/classes/llvm/apint/#ac8c0157adbe12649beac0009c2f6ad8d">isNonNegative</a>())</Highlight></CodeLine>
<Link id="l06321" /><CodeLine lineNumber="6321"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">SRA</a>;</Highlight></CodeLine>
<Link id="l06322" /><CodeLine lineNumber="6322"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06323" /><CodeLine lineNumber="6323"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">SRA</a>.getNode());</Highlight></CodeLine>
<Link id="l06324" /><CodeLine lineNumber="6324"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Zero, SRA);</Highlight></CodeLine>
<Link id="l06325" /><CodeLine lineNumber="6325"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l06326" /><CodeLine lineNumber="6326"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l06327" /><CodeLine lineNumber="6327"><Highlight kind="comment">/// Given an ISD::SDIV node expressing a divide by constant,</Highlight></CodeLine>
<Link id="l06328" /><CodeLine lineNumber="6328"><Highlight kind="comment">/// return a DAG expression to select that will generate the same value by</Highlight></CodeLine>
<Link id="l06329" /><CodeLine lineNumber="6329"><Highlight kind="comment">/// multiplying by a magic number.</Highlight></CodeLine>
<Link id="l06330" /><CodeLine lineNumber="6330"><Highlight kind="comment">/// Ref: &quot;Hacker&#39;s Delight&quot; or &quot;The PowerPC Compiler Writer&#39;s Guide&quot;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06331" /><CodeLine lineNumber="6331"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a36c8f3817aaf6184163227ef33e08032">TargetLowering::BuildSDIV</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l06332" /><CodeLine lineNumber="6332"><Highlight kind="normal">                                  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsAfterLegalization,</Highlight></CodeLine>
<Link id="l06333" /><CodeLine lineNumber="6333"><Highlight kind="normal">                                  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsAfterLegalTypes,</Highlight></CodeLine>
<Link id="l06334" /><CodeLine lineNumber="6334"><Highlight kind="normal">                                  SmallVectorImpl&lt;SDNode &#42;&gt; &amp;Created)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l06335" /><CodeLine lineNumber="6335"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l06336" /><CodeLine lineNumber="6336"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l06337" /><CodeLine lineNumber="6337"><Highlight kind="normal">  EVT SVT = VT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l06338" /><CodeLine lineNumber="6338"><Highlight kind="normal">  EVT ShVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a6a2579bc0354806c6c9708b068777c3a">getShiftAmountTy</a>(VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l06339" /><CodeLine lineNumber="6339"><Highlight kind="normal">  EVT ShSVT = ShVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l06340" /><CodeLine lineNumber="6340"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> EltBits = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l06341" /><CodeLine lineNumber="6341"><Highlight kind="normal">  EVT MulVT;</Highlight></CodeLine>
<Link id="l06342" /><CodeLine lineNumber="6342"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06343" /><CodeLine lineNumber="6343"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check to see if we can do this.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06344" /><CodeLine lineNumber="6344"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: We should be more aggressive here.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06345" /><CodeLine lineNumber="6345"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(VT)) &#123;</Highlight></CodeLine>
<Link id="l06346" /><CodeLine lineNumber="6346"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Limit this to simple scalars for now.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06347" /><CodeLine lineNumber="6347"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() || !VT.<a href="/docs/api/structs/llvm/evt/#a19738f4334d4de357b22349bbb56fb5c">isSimple</a>())</Highlight></CodeLine>
<Link id="l06348" /><CodeLine lineNumber="6348"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06349" /><CodeLine lineNumber="6349"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06350" /><CodeLine lineNumber="6350"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If this type will be promoted to a large enough type with a legal</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06351" /><CodeLine lineNumber="6351"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// multiply operation, we can go ahead and do this transform.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06352" /><CodeLine lineNumber="6352"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#ad859786d7e54bdc5c568ac20c69816e0">getTypeAction</a>(VT.<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>()) != <a href="/docs/api/classes/llvm/targetloweringbase/#a35dc101b509721ffbfb58aba316de681a26f35604723482a1aee6514940c2987d">TypePromoteInteger</a>)</Highlight></CodeLine>
<Link id="l06353" /><CodeLine lineNumber="6353"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06354" /><CodeLine lineNumber="6354"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06355" /><CodeLine lineNumber="6355"><Highlight kind="normal">    MulVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a77f7add8733417370a56154e8b560617">getTypeToTransformTo</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l06356" /><CodeLine lineNumber="6356"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (MulVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() &lt; (2 &#42; EltBits) ||</Highlight></CodeLine>
<Link id="l06357" /><CodeLine lineNumber="6357"><Highlight kind="normal">        !<a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, MulVT))</Highlight></CodeLine>
<Link id="l06358" /><CodeLine lineNumber="6358"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06359" /><CodeLine lineNumber="6359"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06360" /><CodeLine lineNumber="6360"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06361" /><CodeLine lineNumber="6361"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the sdiv has an &#39;exact&#39; bit we can use a simpler lowering.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06362" /><CodeLine lineNumber="6362"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getFlags().hasExact())</Highlight></CodeLine>
<Link id="l06363" /><CodeLine lineNumber="6363"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="#af1364d76011b791bbac39ca8470dd2bf">BuildExactSDIV</a>(&#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">, <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, dl, DAG, Created);</Highlight></CodeLine>
<Link id="l06364" /><CodeLine lineNumber="6364"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06365" /><CodeLine lineNumber="6365"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDValue, 16&gt;</a> MagicFactors, Factors, Shifts, ShiftMasks;</Highlight></CodeLine>
<Link id="l06366" /><CodeLine lineNumber="6366"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06367" /><CodeLine lineNumber="6367"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> BuildSDIVPattern = &#91;&amp;&#93;(ConstantSDNode &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l06368" /><CodeLine lineNumber="6368"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;isZero())</Highlight></CodeLine>
<Link id="l06369" /><CodeLine lineNumber="6369"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06370" /><CodeLine lineNumber="6370"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06371" /><CodeLine lineNumber="6371"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;Divisor = <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getAPIntValue();</Highlight></CodeLine>
<Link id="l06372" /><CodeLine lineNumber="6372"><Highlight kind="normal">    SignedDivisionByConstantInfo magics = <a href="/docs/api/structs/llvm/signeddivisionbyconstantinfo/#affa10b6ac03585fea6d8f1832071ebd5">SignedDivisionByConstantInfo::get</a>(Divisor);</Highlight></CodeLine>
<Link id="l06373" /><CodeLine lineNumber="6373"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> NumeratorFactor = 0;</Highlight></CodeLine>
<Link id="l06374" /><CodeLine lineNumber="6374"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> ShiftMask = -1;</Highlight></CodeLine>
<Link id="l06375" /><CodeLine lineNumber="6375"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06376" /><CodeLine lineNumber="6376"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Divisor.<a href="/docs/api/classes/llvm/apint/#aea5f26deda5ef97e02f6afc57c0c3920">isOne</a>() || Divisor.<a href="/docs/api/classes/llvm/apint/#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>()) &#123;</Highlight></CodeLine>
<Link id="l06377" /><CodeLine lineNumber="6377"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If d is +1/-1, we just multiply the numerator by +1/-1.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06378" /><CodeLine lineNumber="6378"><Highlight kind="normal">      NumeratorFactor = Divisor.<a href="/docs/api/classes/llvm/apint/#af2daa0ee117afefed4c82eee55bf97b7">getSExtValue</a>();</Highlight></CodeLine>
<Link id="l06379" /><CodeLine lineNumber="6379"><Highlight kind="normal">      magics.<a href="/docs/api/structs/llvm/signeddivisionbyconstantinfo/#aa54b0543973a6ef974f769d0e9383850">Magic</a> = 0;</Highlight></CodeLine>
<Link id="l06380" /><CodeLine lineNumber="6380"><Highlight kind="normal">      magics.<a href="/docs/api/structs/llvm/signeddivisionbyconstantinfo/#a4cfbfc736687e2b99cd2cc6cd2d208c4">ShiftAmount</a> = 0;</Highlight></CodeLine>
<Link id="l06381" /><CodeLine lineNumber="6381"><Highlight kind="normal">      ShiftMask = 0;</Highlight></CodeLine>
<Link id="l06382" /><CodeLine lineNumber="6382"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Divisor.<a href="/docs/api/classes/llvm/apint/#aa17c104fbda554c818cf87e53f32f20a">isStrictlyPositive</a>() &amp;&amp; magics.<a href="/docs/api/structs/llvm/signeddivisionbyconstantinfo/#aa54b0543973a6ef974f769d0e9383850">Magic</a>.<a href="/docs/api/classes/llvm/apint/#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>()) &#123;</Highlight></CodeLine>
<Link id="l06383" /><CodeLine lineNumber="6383"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If d &gt; 0 and m &lt; 0, add the numerator.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06384" /><CodeLine lineNumber="6384"><Highlight kind="normal">      NumeratorFactor = 1;</Highlight></CodeLine>
<Link id="l06385" /><CodeLine lineNumber="6385"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Divisor.<a href="/docs/api/classes/llvm/apint/#a6804d9caf15411f55e7b9e9f397f0422">isNegative</a>() &amp;&amp; magics.<a href="/docs/api/structs/llvm/signeddivisionbyconstantinfo/#aa54b0543973a6ef974f769d0e9383850">Magic</a>.<a href="/docs/api/classes/llvm/apint/#aa17c104fbda554c818cf87e53f32f20a">isStrictlyPositive</a>()) &#123;</Highlight></CodeLine>
<Link id="l06386" /><CodeLine lineNumber="6386"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If d &lt; 0 and m &gt; 0, subtract the numerator.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06387" /><CodeLine lineNumber="6387"><Highlight kind="normal">      NumeratorFactor = -1;</Highlight></CodeLine>
<Link id="l06388" /><CodeLine lineNumber="6388"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l06389" /><CodeLine lineNumber="6389"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06390" /><CodeLine lineNumber="6390"><Highlight kind="normal">    MagicFactors.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(magics.<a href="/docs/api/structs/llvm/signeddivisionbyconstantinfo/#aa54b0543973a6ef974f769d0e9383850">Magic</a>, dl, SVT));</Highlight></CodeLine>
<Link id="l06391" /><CodeLine lineNumber="6391"><Highlight kind="normal">    Factors.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8a2567d305d0f9929660220a4d6f916a">getSignedConstant</a>(NumeratorFactor, dl, SVT));</Highlight></CodeLine>
<Link id="l06392" /><CodeLine lineNumber="6392"><Highlight kind="normal">    Shifts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(magics.<a href="/docs/api/structs/llvm/signeddivisionbyconstantinfo/#a4cfbfc736687e2b99cd2cc6cd2d208c4">ShiftAmount</a>, dl, ShSVT));</Highlight></CodeLine>
<Link id="l06393" /><CodeLine lineNumber="6393"><Highlight kind="normal">    ShiftMasks.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8a2567d305d0f9929660220a4d6f916a">getSignedConstant</a>(ShiftMask, dl, SVT));</Highlight></CodeLine>
<Link id="l06394" /><CodeLine lineNumber="6394"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06395" /><CodeLine lineNumber="6395"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l06396" /><CodeLine lineNumber="6396"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06397" /><CodeLine lineNumber="6397"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N0 = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l06398" /><CodeLine lineNumber="6398"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N1 = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(1);</Highlight></CodeLine>
<Link id="l06399" /><CodeLine lineNumber="6399"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06400" /><CodeLine lineNumber="6400"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Collect the shifts / magic values from each element.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06401" /><CodeLine lineNumber="6401"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/isd/#a309c11edf22da984f95cf9ba7a699c11">ISD::matchUnaryPredicate</a>(N1, BuildSDIVPattern))</Highlight></CodeLine>
<Link id="l06402" /><CodeLine lineNumber="6402"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06403" /><CodeLine lineNumber="6403"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06404" /><CodeLine lineNumber="6404"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> MagicFactor, Factor, Shift, ShiftMask;</Highlight></CodeLine>
<Link id="l06405" /><CodeLine lineNumber="6405"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N1.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aff6f73b624fecca7dbe94259f9437e32">ISD::BUILD&#95;VECTOR</a>) &#123;</Highlight></CodeLine>
<Link id="l06406" /><CodeLine lineNumber="6406"><Highlight kind="normal">    MagicFactor = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(VT, dl, MagicFactors);</Highlight></CodeLine>
<Link id="l06407" /><CodeLine lineNumber="6407"><Highlight kind="normal">    Factor = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(VT, dl, Factors);</Highlight></CodeLine>
<Link id="l06408" /><CodeLine lineNumber="6408"><Highlight kind="normal">    Shift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(ShVT, dl, Shifts);</Highlight></CodeLine>
<Link id="l06409" /><CodeLine lineNumber="6409"><Highlight kind="normal">    ShiftMask = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(VT, dl, ShiftMasks);</Highlight></CodeLine>
<Link id="l06410" /><CodeLine lineNumber="6410"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N1.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7f864031b6fb691b1525cbea92542ef1">ISD::SPLAT&#95;VECTOR</a>) &#123;</Highlight></CodeLine>
<Link id="l06411" /><CodeLine lineNumber="6411"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MagicFactors.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp; Factors.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l06412" /><CodeLine lineNumber="6412"><Highlight kind="normal">           Shifts.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp; ShiftMasks.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l06413" /><CodeLine lineNumber="6413"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;Expected matchUnaryPredicate to return one element for scalable &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06414" /><CodeLine lineNumber="6414"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;vectors&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06415" /><CodeLine lineNumber="6415"><Highlight kind="normal">    MagicFactor = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(VT, dl, MagicFactors&#91;0&#93;);</Highlight></CodeLine>
<Link id="l06416" /><CodeLine lineNumber="6416"><Highlight kind="normal">    Factor = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(VT, dl, Factors&#91;0&#93;);</Highlight></CodeLine>
<Link id="l06417" /><CodeLine lineNumber="6417"><Highlight kind="normal">    Shift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(ShVT, dl, Shifts&#91;0&#93;);</Highlight></CodeLine>
<Link id="l06418" /><CodeLine lineNumber="6418"><Highlight kind="normal">    ShiftMask = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(VT, dl, ShiftMasks&#91;0&#93;);</Highlight></CodeLine>
<Link id="l06419" /><CodeLine lineNumber="6419"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l06420" /><CodeLine lineNumber="6420"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantSDNode&gt;</a>(N1) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Expected a constant&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06421" /><CodeLine lineNumber="6421"><Highlight kind="normal">    MagicFactor = MagicFactors&#91;0&#93;;</Highlight></CodeLine>
<Link id="l06422" /><CodeLine lineNumber="6422"><Highlight kind="normal">    Factor = Factors&#91;0&#93;;</Highlight></CodeLine>
<Link id="l06423" /><CodeLine lineNumber="6423"><Highlight kind="normal">    Shift = Shifts&#91;0&#93;;</Highlight></CodeLine>
<Link id="l06424" /><CodeLine lineNumber="6424"><Highlight kind="normal">    ShiftMask = ShiftMasks&#91;0&#93;;</Highlight></CodeLine>
<Link id="l06425" /><CodeLine lineNumber="6425"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06426" /><CodeLine lineNumber="6426"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06427" /><CodeLine lineNumber="6427"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Multiply the numerator (operand 0) by the magic value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06428" /><CodeLine lineNumber="6428"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: We should support doing a MUL in a wider type.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06429" /><CodeLine lineNumber="6429"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> GetMULHS = &#91;&amp;&#93;(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>) &#123;</Highlight></CodeLine>
<Link id="l06430" /><CodeLine lineNumber="6430"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the type isn&#39;t legal, use a wider mul of the type calculated</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06431" /><CodeLine lineNumber="6431"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// earlier.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06432" /><CodeLine lineNumber="6432"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(VT)) &#123;</Highlight></CodeLine>
<Link id="l06433" /><CodeLine lineNumber="6433"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5183f3d72924bc7c77ba8d3f5de9f602">ISD::SIGN&#95;EXTEND</a>, dl, MulVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>);</Highlight></CodeLine>
<Link id="l06434" /><CodeLine lineNumber="6434"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5183f3d72924bc7c77ba8d3f5de9f602">ISD::SIGN&#95;EXTEND</a>, dl, MulVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l06435" /><CodeLine lineNumber="6435"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, MulVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l06436" /><CodeLine lineNumber="6436"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, MulVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>,</Highlight></CodeLine>
<Link id="l06437" /><CodeLine lineNumber="6437"><Highlight kind="normal">                      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(EltBits, MulVT, dl));</Highlight></CodeLine>
<Link id="l06438" /><CodeLine lineNumber="6438"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l06439" /><CodeLine lineNumber="6439"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l06440" /><CodeLine lineNumber="6440"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06441" /><CodeLine lineNumber="6441"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aa2a7c3eccf06b41e4275bbeadb46d22e">ISD::MULHS</a>, VT, IsAfterLegalization))</Highlight></CodeLine>
<Link id="l06442" /><CodeLine lineNumber="6442"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aa2a7c3eccf06b41e4275bbeadb46d22e">ISD::MULHS</a>, dl, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l06443" /><CodeLine lineNumber="6443"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1354c6f8508d6cd697dc89a5d9a52dfd">ISD::SMUL&#95;LOHI</a>, VT, IsAfterLegalization)) &#123;</Highlight></CodeLine>
<Link id="l06444" /><CodeLine lineNumber="6444"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LoHi =</Highlight></CodeLine>
<Link id="l06445" /><CodeLine lineNumber="6445"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1354c6f8508d6cd697dc89a5d9a52dfd">ISD::SMUL&#95;LOHI</a>, dl, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(VT, VT), <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l06446" /><CodeLine lineNumber="6446"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(LoHi.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(), 1);</Highlight></CodeLine>
<Link id="l06447" /><CodeLine lineNumber="6447"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l06448" /><CodeLine lineNumber="6448"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If type twice as wide legal, widen and use a mul plus a shift.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06449" /><CodeLine lineNumber="6449"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l06450" /><CodeLine lineNumber="6450"><Highlight kind="normal">    EVT WideVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> &#42; 2);</Highlight></CodeLine>
<Link id="l06451" /><CodeLine lineNumber="6451"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>())</Highlight></CodeLine>
<Link id="l06452" /><CodeLine lineNumber="6452"><Highlight kind="normal">      WideVT = <a href="/docs/api/structs/llvm/evt/#a210ba6b43ba451b698857dd9de71bd15">EVT::getVectorVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), WideVT,</Highlight></CodeLine>
<Link id="l06453" /><CodeLine lineNumber="6453"><Highlight kind="normal">                                VT.<a href="/docs/api/structs/llvm/evt/#a3d102abca1c9c95f36546dff2f39273b">getVectorElementCount</a>());</Highlight></CodeLine>
<Link id="l06454" /><CodeLine lineNumber="6454"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Some targets like AMDGPU try to go from SDIV to SDIVREM which is then</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06455" /><CodeLine lineNumber="6455"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// custom lowered. This is very expensive so avoid it at all costs for</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06456" /><CodeLine lineNumber="6456"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// constant divisors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06457" /><CodeLine lineNumber="6457"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((!IsAfterLegalTypes &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a0248ed29f933c5faa55cbdfebf3139bd">isOperationExpand</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1f61c2422057e10403b2f6003543c300">ISD::SDIV</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l06458" /><CodeLine lineNumber="6458"><Highlight kind="normal">         <a href="/docs/api/classes/llvm/targetloweringbase/#a657b27286b37057f0fdf1af3e43bc890">isOperationCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3a874f66e1efe5be79552bbe7ee3121a">ISD::SDIVREM</a>, VT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>())) ||</Highlight></CodeLine>
<Link id="l06459" /><CodeLine lineNumber="6459"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, WideVT)) &#123;</Highlight></CodeLine>
<Link id="l06460" /><CodeLine lineNumber="6460"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5183f3d72924bc7c77ba8d3f5de9f602">ISD::SIGN&#95;EXTEND</a>, dl, WideVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>);</Highlight></CodeLine>
<Link id="l06461" /><CodeLine lineNumber="6461"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5183f3d72924bc7c77ba8d3f5de9f602">ISD::SIGN&#95;EXTEND</a>, dl, WideVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l06462" /><CodeLine lineNumber="6462"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, WideVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l06463" /><CodeLine lineNumber="6463"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, WideVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>,</Highlight></CodeLine>
<Link id="l06464" /><CodeLine lineNumber="6464"><Highlight kind="normal">                      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(EltBits, WideVT, dl));</Highlight></CodeLine>
<Link id="l06465" /><CodeLine lineNumber="6465"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l06466" /><CodeLine lineNumber="6466"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l06467" /><CodeLine lineNumber="6467"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06468" /><CodeLine lineNumber="6468"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l06469" /><CodeLine lineNumber="6469"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06470" /><CodeLine lineNumber="6470"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Q = GetMULHS(N0, MagicFactor);</Highlight></CodeLine>
<Link id="l06471" /><CodeLine lineNumber="6471"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Q)</Highlight></CodeLine>
<Link id="l06472" /><CodeLine lineNumber="6472"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06473" /><CodeLine lineNumber="6473"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06474" /><CodeLine lineNumber="6474"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Q.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06475" /><CodeLine lineNumber="6475"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06476" /><CodeLine lineNumber="6476"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (Optionally) Add/subtract the numerator using Factor.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06477" /><CodeLine lineNumber="6477"><Highlight kind="normal">  Factor = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, VT, N0, Factor);</Highlight></CodeLine>
<Link id="l06478" /><CodeLine lineNumber="6478"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Factor.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06479" /><CodeLine lineNumber="6479"><Highlight kind="normal">  Q = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, Q, Factor);</Highlight></CodeLine>
<Link id="l06480" /><CodeLine lineNumber="6480"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Q.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06481" /><CodeLine lineNumber="6481"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06482" /><CodeLine lineNumber="6482"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Shift right algebraic by shift value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06483" /><CodeLine lineNumber="6483"><Highlight kind="normal">  Q = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>, dl, VT, Q, Shift);</Highlight></CodeLine>
<Link id="l06484" /><CodeLine lineNumber="6484"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Q.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06485" /><CodeLine lineNumber="6485"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06486" /><CodeLine lineNumber="6486"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Extract the sign bit, mask it and add it to the quotient.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06487" /><CodeLine lineNumber="6487"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SignShift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(EltBits - 1, dl, ShVT);</Highlight></CodeLine>
<Link id="l06488" /><CodeLine lineNumber="6488"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/mips/mips16isellowering-cpp/#a0acb682b8260ab1c60b918599864e2e5">T</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, Q, SignShift);</Highlight></CodeLine>
<Link id="l06489" /><CodeLine lineNumber="6489"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/files/lib/lib/target/lib/target/mips/mips16isellowering-cpp/#a0acb682b8260ab1c60b918599864e2e5">T</a>.getNode());</Highlight></CodeLine>
<Link id="l06490" /><CodeLine lineNumber="6490"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/mips/mips16isellowering-cpp/#a0acb682b8260ab1c60b918599864e2e5">T</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/mips/mips16isellowering-cpp/#a0acb682b8260ab1c60b918599864e2e5">T</a>, ShiftMask);</Highlight></CodeLine>
<Link id="l06491" /><CodeLine lineNumber="6491"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/files/lib/lib/target/lib/target/mips/mips16isellowering-cpp/#a0acb682b8260ab1c60b918599864e2e5">T</a>.getNode());</Highlight></CodeLine>
<Link id="l06492" /><CodeLine lineNumber="6492"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, Q, <a href="/docs/api/files/lib/lib/target/lib/target/mips/mips16isellowering-cpp/#a0acb682b8260ab1c60b918599864e2e5">T</a>);</Highlight></CodeLine>
<Link id="l06493" /><CodeLine lineNumber="6493"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l06494" /><CodeLine lineNumber="6494"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l06495" /><CodeLine lineNumber="6495"><Highlight kind="comment">/// Given an ISD::UDIV node expressing a divide by constant,</Highlight></CodeLine>
<Link id="l06496" /><CodeLine lineNumber="6496"><Highlight kind="comment">/// return a DAG expression to select that will generate the same value by</Highlight></CodeLine>
<Link id="l06497" /><CodeLine lineNumber="6497"><Highlight kind="comment">/// multiplying by a magic number.</Highlight></CodeLine>
<Link id="l06498" /><CodeLine lineNumber="6498"><Highlight kind="comment">/// Ref: &quot;Hacker&#39;s Delight&quot; or &quot;The PowerPC Compiler Writer&#39;s Guide&quot;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06499" /><CodeLine lineNumber="6499"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a634e703cb950d5425ce8594ea59ef3bd">TargetLowering::BuildUDIV</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l06500" /><CodeLine lineNumber="6500"><Highlight kind="normal">                                  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsAfterLegalization,</Highlight></CodeLine>
<Link id="l06501" /><CodeLine lineNumber="6501"><Highlight kind="normal">                                  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsAfterLegalTypes,</Highlight></CodeLine>
<Link id="l06502" /><CodeLine lineNumber="6502"><Highlight kind="normal">                                  SmallVectorImpl&lt;SDNode &#42;&gt; &amp;Created)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l06503" /><CodeLine lineNumber="6503"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l06504" /><CodeLine lineNumber="6504"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l06505" /><CodeLine lineNumber="6505"><Highlight kind="normal">  EVT SVT = VT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l06506" /><CodeLine lineNumber="6506"><Highlight kind="normal">  EVT ShVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a6a2579bc0354806c6c9708b068777c3a">getShiftAmountTy</a>(VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l06507" /><CodeLine lineNumber="6507"><Highlight kind="normal">  EVT ShSVT = ShVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l06508" /><CodeLine lineNumber="6508"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> EltBits = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l06509" /><CodeLine lineNumber="6509"><Highlight kind="normal">  EVT MulVT;</Highlight></CodeLine>
<Link id="l06510" /><CodeLine lineNumber="6510"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06511" /><CodeLine lineNumber="6511"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check to see if we can do this.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06512" /><CodeLine lineNumber="6512"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: We should be more aggressive here.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06513" /><CodeLine lineNumber="6513"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(VT)) &#123;</Highlight></CodeLine>
<Link id="l06514" /><CodeLine lineNumber="6514"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Limit this to simple scalars for now.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06515" /><CodeLine lineNumber="6515"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() || !VT.<a href="/docs/api/structs/llvm/evt/#a19738f4334d4de357b22349bbb56fb5c">isSimple</a>())</Highlight></CodeLine>
<Link id="l06516" /><CodeLine lineNumber="6516"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06517" /><CodeLine lineNumber="6517"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06518" /><CodeLine lineNumber="6518"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If this type will be promoted to a large enough type with a legal</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06519" /><CodeLine lineNumber="6519"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// multiply operation, we can go ahead and do this transform.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06520" /><CodeLine lineNumber="6520"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#ad859786d7e54bdc5c568ac20c69816e0">getTypeAction</a>(VT.<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>()) != <a href="/docs/api/classes/llvm/targetloweringbase/#a35dc101b509721ffbfb58aba316de681a26f35604723482a1aee6514940c2987d">TypePromoteInteger</a>)</Highlight></CodeLine>
<Link id="l06521" /><CodeLine lineNumber="6521"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06522" /><CodeLine lineNumber="6522"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06523" /><CodeLine lineNumber="6523"><Highlight kind="normal">    MulVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a77f7add8733417370a56154e8b560617">getTypeToTransformTo</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l06524" /><CodeLine lineNumber="6524"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (MulVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() &lt; (2 &#42; EltBits) ||</Highlight></CodeLine>
<Link id="l06525" /><CodeLine lineNumber="6525"><Highlight kind="normal">        !<a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, MulVT))</Highlight></CodeLine>
<Link id="l06526" /><CodeLine lineNumber="6526"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06527" /><CodeLine lineNumber="6527"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06528" /><CodeLine lineNumber="6528"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06529" /><CodeLine lineNumber="6529"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the udiv has an &#39;exact&#39; bit we can use a simpler lowering.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06530" /><CodeLine lineNumber="6530"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getFlags().hasExact())</Highlight></CodeLine>
<Link id="l06531" /><CodeLine lineNumber="6531"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="#a1ca08074fa512b26eb7e8e88833892d9">BuildExactUDIV</a>(&#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">, <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, dl, DAG, Created);</Highlight></CodeLine>
<Link id="l06532" /><CodeLine lineNumber="6532"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06533" /><CodeLine lineNumber="6533"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N0 = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l06534" /><CodeLine lineNumber="6534"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> N1 = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(1);</Highlight></CodeLine>
<Link id="l06535" /><CodeLine lineNumber="6535"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06536" /><CodeLine lineNumber="6536"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Try to use leading zeros of the dividend to reduce the multiplier and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06537" /><CodeLine lineNumber="6537"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// avoid expensive fixups.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06538" /><CodeLine lineNumber="6538"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> KnownLeadingZeros = DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(N0).<a href="/docs/api/structs/llvm/knownbits/#a7f47812e8e75b0616a97d7004e5fb909">countMinLeadingZeros</a>();</Highlight></CodeLine>
<Link id="l06539" /><CodeLine lineNumber="6539"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06540" /><CodeLine lineNumber="6540"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseNPQ = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, UsePreShift = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, UsePostShift = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06541" /><CodeLine lineNumber="6541"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDValue, 16&gt;</a> PreShifts, PostShifts, MagicFactors, NPQFactors;</Highlight></CodeLine>
<Link id="l06542" /><CodeLine lineNumber="6542"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06543" /><CodeLine lineNumber="6543"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> BuildUDIVPattern = &#91;&amp;&#93;(ConstantSDNode &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l06544" /><CodeLine lineNumber="6544"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;isZero())</Highlight></CodeLine>
<Link id="l06545" /><CodeLine lineNumber="6545"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06546" /><CodeLine lineNumber="6546"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt&amp; Divisor = <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getAPIntValue();</Highlight></CodeLine>
<Link id="l06547" /><CodeLine lineNumber="6547"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06548" /><CodeLine lineNumber="6548"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> PreShift, MagicFactor, NPQFactor, PostShift;</Highlight></CodeLine>
<Link id="l06549" /><CodeLine lineNumber="6549"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06550" /><CodeLine lineNumber="6550"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Magic algorithm doesn&#39;t work for division by 1 We need to emit a select</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06551" /><CodeLine lineNumber="6551"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// at the end.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06552" /><CodeLine lineNumber="6552"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Divisor.<a href="/docs/api/classes/llvm/apint/#aea5f26deda5ef97e02f6afc57c0c3920">isOne</a>()) &#123;</Highlight></CodeLine>
<Link id="l06553" /><CodeLine lineNumber="6553"><Highlight kind="normal">      PreShift = PostShift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5b0e59823444a55c295af279611a9d24">getUNDEF</a>(ShSVT);</Highlight></CodeLine>
<Link id="l06554" /><CodeLine lineNumber="6554"><Highlight kind="normal">      MagicFactor = NPQFactor = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5b0e59823444a55c295af279611a9d24">getUNDEF</a>(SVT);</Highlight></CodeLine>
<Link id="l06555" /><CodeLine lineNumber="6555"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l06556" /><CodeLine lineNumber="6556"><Highlight kind="normal">      UnsignedDivisionByConstantInfo magics =</Highlight></CodeLine>
<Link id="l06557" /><CodeLine lineNumber="6557"><Highlight kind="normal">          <a href="/docs/api/structs/llvm/unsigneddivisionbyconstantinfo/#a6a7ecd0f6bb250280a31e56173931e31">UnsignedDivisionByConstantInfo::get</a>(</Highlight></CodeLine>
<Link id="l06558" /><CodeLine lineNumber="6558"><Highlight kind="normal">              Divisor, std::min(KnownLeadingZeros, Divisor.<a href="/docs/api/classes/llvm/apint/#a8bad27827f46bca6baf814cbd2b64e84">countl&#95;zero</a>()));</Highlight></CodeLine>
<Link id="l06559" /><CodeLine lineNumber="6559"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06560" /><CodeLine lineNumber="6560"><Highlight kind="normal">      MagicFactor = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(magics.<a href="/docs/api/structs/llvm/unsigneddivisionbyconstantinfo/#a890b63a18fc3e328809c691b17c776ed">Magic</a>, dl, SVT);</Highlight></CodeLine>
<Link id="l06561" /><CodeLine lineNumber="6561"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06562" /><CodeLine lineNumber="6562"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(magics.<a href="/docs/api/structs/llvm/unsigneddivisionbyconstantinfo/#a1fe2f52cb1640befcb5c3da7d3e37c6d">PreShift</a> &lt; Divisor.<a href="/docs/api/classes/llvm/apint/#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l06563" /><CodeLine lineNumber="6563"><Highlight kind="normal">             </Highlight><Highlight kind="stringliteral">&quot;We shouldn&#39;t generate an undefined shift!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06564" /><CodeLine lineNumber="6564"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(magics.<a href="/docs/api/structs/llvm/unsigneddivisionbyconstantinfo/#aadab71767738ad10ccb7600fa732fd96">PostShift</a> &lt; Divisor.<a href="/docs/api/classes/llvm/apint/#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l06565" /><CodeLine lineNumber="6565"><Highlight kind="normal">             </Highlight><Highlight kind="stringliteral">&quot;We shouldn&#39;t generate an undefined shift!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06566" /><CodeLine lineNumber="6566"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!magics.<a href="/docs/api/structs/llvm/unsigneddivisionbyconstantinfo/#a1b8b2eee90075caf0407679fb780f5c9">IsAdd</a> || magics.<a href="/docs/api/structs/llvm/unsigneddivisionbyconstantinfo/#a1fe2f52cb1640befcb5c3da7d3e37c6d">PreShift</a> == 0) &amp;&amp;</Highlight></CodeLine>
<Link id="l06567" /><CodeLine lineNumber="6567"><Highlight kind="normal">             </Highlight><Highlight kind="stringliteral">&quot;Unexpected pre-shift&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06568" /><CodeLine lineNumber="6568"><Highlight kind="normal">      PreShift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(magics.<a href="/docs/api/structs/llvm/unsigneddivisionbyconstantinfo/#a1fe2f52cb1640befcb5c3da7d3e37c6d">PreShift</a>, dl, ShSVT);</Highlight></CodeLine>
<Link id="l06569" /><CodeLine lineNumber="6569"><Highlight kind="normal">      PostShift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(magics.<a href="/docs/api/structs/llvm/unsigneddivisionbyconstantinfo/#aadab71767738ad10ccb7600fa732fd96">PostShift</a>, dl, ShSVT);</Highlight></CodeLine>
<Link id="l06570" /><CodeLine lineNumber="6570"><Highlight kind="normal">      NPQFactor = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(</Highlight></CodeLine>
<Link id="l06571" /><CodeLine lineNumber="6571"><Highlight kind="normal">          magics.<a href="/docs/api/structs/llvm/unsigneddivisionbyconstantinfo/#a1b8b2eee90075caf0407679fb780f5c9">IsAdd</a> ? <a href="/docs/api/classes/llvm/apint/#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(EltBits, EltBits - 1)</Highlight></CodeLine>
<Link id="l06572" /><CodeLine lineNumber="6572"><Highlight kind="normal">                       : <a href="/docs/api/classes/llvm/apint/#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(EltBits),</Highlight></CodeLine>
<Link id="l06573" /><CodeLine lineNumber="6573"><Highlight kind="normal">          dl, SVT);</Highlight></CodeLine>
<Link id="l06574" /><CodeLine lineNumber="6574"><Highlight kind="normal">      UseNPQ |= magics.<a href="/docs/api/structs/llvm/unsigneddivisionbyconstantinfo/#a1b8b2eee90075caf0407679fb780f5c9">IsAdd</a>;</Highlight></CodeLine>
<Link id="l06575" /><CodeLine lineNumber="6575"><Highlight kind="normal">      UsePreShift |= magics.<a href="/docs/api/structs/llvm/unsigneddivisionbyconstantinfo/#a1fe2f52cb1640befcb5c3da7d3e37c6d">PreShift</a> != 0;</Highlight></CodeLine>
<Link id="l06576" /><CodeLine lineNumber="6576"><Highlight kind="normal">      UsePostShift |= magics.<a href="/docs/api/structs/llvm/unsigneddivisionbyconstantinfo/#aadab71767738ad10ccb7600fa732fd96">PostShift</a> != 0;</Highlight></CodeLine>
<Link id="l06577" /><CodeLine lineNumber="6577"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l06578" /><CodeLine lineNumber="6578"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06579" /><CodeLine lineNumber="6579"><Highlight kind="normal">    PreShifts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(PreShift);</Highlight></CodeLine>
<Link id="l06580" /><CodeLine lineNumber="6580"><Highlight kind="normal">    MagicFactors.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(MagicFactor);</Highlight></CodeLine>
<Link id="l06581" /><CodeLine lineNumber="6581"><Highlight kind="normal">    NPQFactors.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(NPQFactor);</Highlight></CodeLine>
<Link id="l06582" /><CodeLine lineNumber="6582"><Highlight kind="normal">    PostShifts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(PostShift);</Highlight></CodeLine>
<Link id="l06583" /><CodeLine lineNumber="6583"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06584" /><CodeLine lineNumber="6584"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l06585" /><CodeLine lineNumber="6585"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06586" /><CodeLine lineNumber="6586"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Collect the shifts/magic values from each element.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06587" /><CodeLine lineNumber="6587"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/isd/#a309c11edf22da984f95cf9ba7a699c11">ISD::matchUnaryPredicate</a>(N1, BuildUDIVPattern))</Highlight></CodeLine>
<Link id="l06588" /><CodeLine lineNumber="6588"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06589" /><CodeLine lineNumber="6589"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06590" /><CodeLine lineNumber="6590"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> PreShift, PostShift, MagicFactor, NPQFactor;</Highlight></CodeLine>
<Link id="l06591" /><CodeLine lineNumber="6591"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N1.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aff6f73b624fecca7dbe94259f9437e32">ISD::BUILD&#95;VECTOR</a>) &#123;</Highlight></CodeLine>
<Link id="l06592" /><CodeLine lineNumber="6592"><Highlight kind="normal">    PreShift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(ShVT, dl, PreShifts);</Highlight></CodeLine>
<Link id="l06593" /><CodeLine lineNumber="6593"><Highlight kind="normal">    MagicFactor = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(VT, dl, MagicFactors);</Highlight></CodeLine>
<Link id="l06594" /><CodeLine lineNumber="6594"><Highlight kind="normal">    NPQFactor = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(VT, dl, NPQFactors);</Highlight></CodeLine>
<Link id="l06595" /><CodeLine lineNumber="6595"><Highlight kind="normal">    PostShift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(ShVT, dl, PostShifts);</Highlight></CodeLine>
<Link id="l06596" /><CodeLine lineNumber="6596"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (N1.<a href="/docs/api/classes/llvm/sdvalue/#ae779a9d142e6318d8fb0e4f0da32af0f">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7f864031b6fb691b1525cbea92542ef1">ISD::SPLAT&#95;VECTOR</a>) &#123;</Highlight></CodeLine>
<Link id="l06597" /><CodeLine lineNumber="6597"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PreShifts.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp; MagicFactors.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l06598" /><CodeLine lineNumber="6598"><Highlight kind="normal">           NPQFactors.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp; PostShifts.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l06599" /><CodeLine lineNumber="6599"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;Expected matchUnaryPredicate to return one for scalable vectors&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06600" /><CodeLine lineNumber="6600"><Highlight kind="normal">    PreShift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(ShVT, dl, PreShifts&#91;0&#93;);</Highlight></CodeLine>
<Link id="l06601" /><CodeLine lineNumber="6601"><Highlight kind="normal">    MagicFactor = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(VT, dl, MagicFactors&#91;0&#93;);</Highlight></CodeLine>
<Link id="l06602" /><CodeLine lineNumber="6602"><Highlight kind="normal">    NPQFactor = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(VT, dl, NPQFactors&#91;0&#93;);</Highlight></CodeLine>
<Link id="l06603" /><CodeLine lineNumber="6603"><Highlight kind="normal">    PostShift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(ShVT, dl, PostShifts&#91;0&#93;);</Highlight></CodeLine>
<Link id="l06604" /><CodeLine lineNumber="6604"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l06605" /><CodeLine lineNumber="6605"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantSDNode&gt;</a>(N1) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Expected a constant&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06606" /><CodeLine lineNumber="6606"><Highlight kind="normal">    PreShift = PreShifts&#91;0&#93;;</Highlight></CodeLine>
<Link id="l06607" /><CodeLine lineNumber="6607"><Highlight kind="normal">    MagicFactor = MagicFactors&#91;0&#93;;</Highlight></CodeLine>
<Link id="l06608" /><CodeLine lineNumber="6608"><Highlight kind="normal">    PostShift = PostShifts&#91;0&#93;;</Highlight></CodeLine>
<Link id="l06609" /><CodeLine lineNumber="6609"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06610" /><CodeLine lineNumber="6610"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06611" /><CodeLine lineNumber="6611"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Q = N0;</Highlight></CodeLine>
<Link id="l06612" /><CodeLine lineNumber="6612"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UsePreShift) &#123;</Highlight></CodeLine>
<Link id="l06613" /><CodeLine lineNumber="6613"><Highlight kind="normal">    Q = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, Q, PreShift);</Highlight></CodeLine>
<Link id="l06614" /><CodeLine lineNumber="6614"><Highlight kind="normal">    Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Q.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06615" /><CodeLine lineNumber="6615"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06616" /><CodeLine lineNumber="6616"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06617" /><CodeLine lineNumber="6617"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: We should support doing a MUL in a wider type.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06618" /><CodeLine lineNumber="6618"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> GetMULHU = &#91;&amp;&#93;(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>) &#123;</Highlight></CodeLine>
<Link id="l06619" /><CodeLine lineNumber="6619"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the type isn&#39;t legal, use a wider mul of the type calculated</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06620" /><CodeLine lineNumber="6620"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// earlier.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06621" /><CodeLine lineNumber="6621"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(VT)) &#123;</Highlight></CodeLine>
<Link id="l06622" /><CodeLine lineNumber="6622"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, dl, MulVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>);</Highlight></CodeLine>
<Link id="l06623" /><CodeLine lineNumber="6623"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, dl, MulVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l06624" /><CodeLine lineNumber="6624"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, MulVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l06625" /><CodeLine lineNumber="6625"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, MulVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>,</Highlight></CodeLine>
<Link id="l06626" /><CodeLine lineNumber="6626"><Highlight kind="normal">                      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(EltBits, MulVT, dl));</Highlight></CodeLine>
<Link id="l06627" /><CodeLine lineNumber="6627"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l06628" /><CodeLine lineNumber="6628"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l06629" /><CodeLine lineNumber="6629"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06630" /><CodeLine lineNumber="6630"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8a80d3b085af08f0dce1724207ef99b5">ISD::MULHU</a>, VT, IsAfterLegalization))</Highlight></CodeLine>
<Link id="l06631" /><CodeLine lineNumber="6631"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8a80d3b085af08f0dce1724207ef99b5">ISD::MULHU</a>, dl, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l06632" /><CodeLine lineNumber="6632"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a79c959df09509d7ff66d9b04bc40d18d">ISD::UMUL&#95;LOHI</a>, VT, IsAfterLegalization)) &#123;</Highlight></CodeLine>
<Link id="l06633" /><CodeLine lineNumber="6633"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LoHi =</Highlight></CodeLine>
<Link id="l06634" /><CodeLine lineNumber="6634"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a79c959df09509d7ff66d9b04bc40d18d">ISD::UMUL&#95;LOHI</a>, dl, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(VT, VT), <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l06635" /><CodeLine lineNumber="6635"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(LoHi.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(), 1);</Highlight></CodeLine>
<Link id="l06636" /><CodeLine lineNumber="6636"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l06637" /><CodeLine lineNumber="6637"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If type twice as wide legal, widen and use a mul plus a shift.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06638" /><CodeLine lineNumber="6638"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l06639" /><CodeLine lineNumber="6639"><Highlight kind="normal">    EVT WideVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> &#42; 2);</Highlight></CodeLine>
<Link id="l06640" /><CodeLine lineNumber="6640"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>())</Highlight></CodeLine>
<Link id="l06641" /><CodeLine lineNumber="6641"><Highlight kind="normal">      WideVT = <a href="/docs/api/structs/llvm/evt/#a210ba6b43ba451b698857dd9de71bd15">EVT::getVectorVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), WideVT,</Highlight></CodeLine>
<Link id="l06642" /><CodeLine lineNumber="6642"><Highlight kind="normal">                                VT.<a href="/docs/api/structs/llvm/evt/#a3d102abca1c9c95f36546dff2f39273b">getVectorElementCount</a>());</Highlight></CodeLine>
<Link id="l06643" /><CodeLine lineNumber="6643"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Some targets like AMDGPU try to go from UDIV to UDIVREM which is then</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06644" /><CodeLine lineNumber="6644"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// custom lowered. This is very expensive so avoid it at all costs for</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06645" /><CodeLine lineNumber="6645"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// constant divisors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06646" /><CodeLine lineNumber="6646"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((!IsAfterLegalTypes &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a0248ed29f933c5faa55cbdfebf3139bd">isOperationExpand</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a15637879021fa7d5226045c0668a99a8">ISD::UDIV</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l06647" /><CodeLine lineNumber="6647"><Highlight kind="normal">         <a href="/docs/api/classes/llvm/targetloweringbase/#a657b27286b37057f0fdf1af3e43bc890">isOperationCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3a257ffa49107e2db978e8a6e2688ada">ISD::UDIVREM</a>, VT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>())) ||</Highlight></CodeLine>
<Link id="l06648" /><CodeLine lineNumber="6648"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, WideVT)) &#123;</Highlight></CodeLine>
<Link id="l06649" /><CodeLine lineNumber="6649"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, dl, WideVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>);</Highlight></CodeLine>
<Link id="l06650" /><CodeLine lineNumber="6650"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, dl, WideVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l06651" /><CodeLine lineNumber="6651"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, WideVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l06652" /><CodeLine lineNumber="6652"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, WideVT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>,</Highlight></CodeLine>
<Link id="l06653" /><CodeLine lineNumber="6653"><Highlight kind="normal">                      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(EltBits, WideVT, dl));</Highlight></CodeLine>
<Link id="l06654" /><CodeLine lineNumber="6654"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</Highlight></CodeLine>
<Link id="l06655" /><CodeLine lineNumber="6655"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l06656" /><CodeLine lineNumber="6656"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(); </Highlight><Highlight kind="comment">// No mulhu or equivalent</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06657" /><CodeLine lineNumber="6657"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l06658" /><CodeLine lineNumber="6658"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06659" /><CodeLine lineNumber="6659"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Multiply the numerator (operand 0) by the magic value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06660" /><CodeLine lineNumber="6660"><Highlight kind="normal">  Q = GetMULHU(Q, MagicFactor);</Highlight></CodeLine>
<Link id="l06661" /><CodeLine lineNumber="6661"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Q)</Highlight></CodeLine>
<Link id="l06662" /><CodeLine lineNumber="6662"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06663" /><CodeLine lineNumber="6663"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06664" /><CodeLine lineNumber="6664"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Q.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06665" /><CodeLine lineNumber="6665"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06666" /><CodeLine lineNumber="6666"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UseNPQ) &#123;</Highlight></CodeLine>
<Link id="l06667" /><CodeLine lineNumber="6667"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NPQ = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, N0, Q);</Highlight></CodeLine>
<Link id="l06668" /><CodeLine lineNumber="6668"><Highlight kind="normal">    Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(NPQ.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06669" /><CodeLine lineNumber="6669"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06670" /><CodeLine lineNumber="6670"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// For vectors we might have a mix of non-NPQ/NPQ paths, so use</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06671" /><CodeLine lineNumber="6671"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// MULHU to act as a SRL-by-1 for NPQ, else multiply by zero.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06672" /><CodeLine lineNumber="6672"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>())</Highlight></CodeLine>
<Link id="l06673" /><CodeLine lineNumber="6673"><Highlight kind="normal">      NPQ = GetMULHU(NPQ, NPQFactor);</Highlight></CodeLine>
<Link id="l06674" /><CodeLine lineNumber="6674"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06675" /><CodeLine lineNumber="6675"><Highlight kind="normal">      NPQ = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, NPQ, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, ShVT));</Highlight></CodeLine>
<Link id="l06676" /><CodeLine lineNumber="6676"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06677" /><CodeLine lineNumber="6677"><Highlight kind="normal">    Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(NPQ.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06678" /><CodeLine lineNumber="6678"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06679" /><CodeLine lineNumber="6679"><Highlight kind="normal">    Q = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, NPQ, Q);</Highlight></CodeLine>
<Link id="l06680" /><CodeLine lineNumber="6680"><Highlight kind="normal">    Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Q.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06681" /><CodeLine lineNumber="6681"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06682" /><CodeLine lineNumber="6682"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06683" /><CodeLine lineNumber="6683"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UsePostShift) &#123;</Highlight></CodeLine>
<Link id="l06684" /><CodeLine lineNumber="6684"><Highlight kind="normal">    Q = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, Q, PostShift);</Highlight></CodeLine>
<Link id="l06685" /><CodeLine lineNumber="6685"><Highlight kind="normal">    Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Q.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06686" /><CodeLine lineNumber="6686"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06687" /><CodeLine lineNumber="6687"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06688" /><CodeLine lineNumber="6688"><Highlight kind="normal">  EVT SetCCVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l06689" /><CodeLine lineNumber="6689"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06690" /><CodeLine lineNumber="6690"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> One = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, VT);</Highlight></CodeLine>
<Link id="l06691" /><CodeLine lineNumber="6691"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IsOne = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCVT, N1, One, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l06692" /><CodeLine lineNumber="6692"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, VT, IsOne, N0, Q);</Highlight></CodeLine>
<Link id="l06693" /><CodeLine lineNumber="6693"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l06694" /><CodeLine lineNumber="6694"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l06695" /><CodeLine lineNumber="6695"><Highlight kind="comment">/// If all values in Values that &#42;don&#39;t&#42; match the predicate are same &#39;splat&#39;</Highlight></CodeLine>
<Link id="l06696" /><CodeLine lineNumber="6696"><Highlight kind="comment">/// value, then replace all values with that splat value.</Highlight></CodeLine>
<Link id="l06697" /><CodeLine lineNumber="6697"><Highlight kind="comment">/// Else, if AlternativeReplacement was provided, then replace all values that</Highlight></CodeLine>
<Link id="l06698" /><CodeLine lineNumber="6698"><Highlight kind="comment">/// do match predicate with AlternativeReplacement value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06699" /><CodeLine lineNumber="6699"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06700" /><CodeLine lineNumber="6700" lineLink="#aae6594d69bd253616ae16674187e6396"><Highlight kind="normal"><a href="#aae6594d69bd253616ae16674187e6396">turnVectorIntoSplatVector</a>(<a href="/docs/api/classes/llvm/mutablearrayref">MutableArrayRef&lt;SDValue&gt;</a> Values,</Highlight></CodeLine>
<Link id="l06701" /><CodeLine lineNumber="6701"><Highlight kind="normal">                          std::function&lt;</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal">(<a href="/docs/api/classes/llvm/sdvalue">SDValue</a>)&gt; <a href="/docs/api/classes/predicate">Predicate</a>,</Highlight></CodeLine>
<Link id="l06702" /><CodeLine lineNumber="6702"><Highlight kind="normal">                          <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> AlternativeReplacement = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>()) &#123;</Highlight></CodeLine>
<Link id="l06703" /><CodeLine lineNumber="6703"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Replacement;</Highlight></CodeLine>
<Link id="l06704" /><CodeLine lineNumber="6704"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Is there a value for which the Predicate does &#42;NOT&#42; match? What is it?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06705" /><CodeLine lineNumber="6705"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> SplatValue = <a href="/docs/api/namespaces/llvm/#a7b49849160e7f089916f83c52511da9e">llvm::find&#95;if&#95;not</a>(Values, <a href="/docs/api/classes/predicate">Predicate</a>);</Highlight></CodeLine>
<Link id="l06706" /><CodeLine lineNumber="6706"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SplatValue != Values.<a href="/docs/api/classes/llvm/mutablearrayref/#a9d959094f4544749c129c46034cbed67">end</a>()) &#123;</Highlight></CodeLine>
<Link id="l06707" /><CodeLine lineNumber="6707"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Does Values consist only of SplatValue&#39;s and values matching Predicate?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06708" /><CodeLine lineNumber="6708"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all&#95;of</a>(Values, &#91;<a href="/docs/api/classes/predicate">Predicate</a>, SplatValue&#93;(<a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="/docs/api/classes/llvm/value">Value</a>) &#123;</Highlight></CodeLine>
<Link id="l06709" /><CodeLine lineNumber="6709"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/value">Value</a> == &#42;SplatValue || <a href="/docs/api/classes/predicate">Predicate</a>(<a href="/docs/api/classes/llvm/value">Value</a>);</Highlight></CodeLine>
<Link id="l06710" /><CodeLine lineNumber="6710"><Highlight kind="normal">        &#125;)) </Highlight><Highlight kind="comment">// Then we shall replace values matching predicate with SplatValue.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06711" /><CodeLine lineNumber="6711"><Highlight kind="normal">      Replacement = &#42;SplatValue;</Highlight></CodeLine>
<Link id="l06712" /><CodeLine lineNumber="6712"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06713" /><CodeLine lineNumber="6713"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Replacement) &#123;</Highlight></CodeLine>
<Link id="l06714" /><CodeLine lineNumber="6714"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Oops, we did not find the &quot;baseline&quot; splat value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06715" /><CodeLine lineNumber="6715"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!AlternativeReplacement)</Highlight></CodeLine>
<Link id="l06716" /><CodeLine lineNumber="6716"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">; </Highlight><Highlight kind="comment">// Nothing to do.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06717" /><CodeLine lineNumber="6717"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Let&#39;s replace with provided value then.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06718" /><CodeLine lineNumber="6718"><Highlight kind="normal">    Replacement = AlternativeReplacement;</Highlight></CodeLine>
<Link id="l06719" /><CodeLine lineNumber="6719"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06720" /><CodeLine lineNumber="6720"><Highlight kind="normal">  std::replace&#95;if(Values.<a href="/docs/api/classes/llvm/mutablearrayref/#aae2bf8b46988a2fc0589e95903930c19">begin</a>(), Values.<a href="/docs/api/classes/llvm/mutablearrayref/#a9d959094f4544749c129c46034cbed67">end</a>(), <a href="/docs/api/classes/predicate">Predicate</a>, Replacement);</Highlight></CodeLine>
<Link id="l06721" /><CodeLine lineNumber="6721"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l06722" /><CodeLine lineNumber="6722"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l06723" /><CodeLine lineNumber="6723"><Highlight kind="comment">/// Given an ISD::UREM used only by an ISD::SETEQ or ISD::SETNE</Highlight></CodeLine>
<Link id="l06724" /><CodeLine lineNumber="6724"><Highlight kind="comment">/// where the divisor is constant and the comparison target is zero,</Highlight></CodeLine>
<Link id="l06725" /><CodeLine lineNumber="6725"><Highlight kind="comment">/// return a DAG expression that will generate the same comparison result</Highlight></CodeLine>
<Link id="l06726" /><CodeLine lineNumber="6726"><Highlight kind="comment">/// using only multiplications, additions and shifts/rotations.</Highlight></CodeLine>
<Link id="l06727" /><CodeLine lineNumber="6727"><Highlight kind="comment">/// Ref: &quot;Hacker&#39;s Delight&quot; 10-17.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06728" /><CodeLine lineNumber="6728"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TargetLowering::buildUREMEqFold(EVT SETCCVT, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> REMNode,</Highlight></CodeLine>
<Link id="l06729" /><CodeLine lineNumber="6729"><Highlight kind="normal">                                        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> CompTargetNode,</Highlight></CodeLine>
<Link id="l06730" /><CodeLine lineNumber="6730"><Highlight kind="normal">                                        <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>,</Highlight></CodeLine>
<Link id="l06731" /><CodeLine lineNumber="6731"><Highlight kind="normal">                                        DAGCombinerInfo &amp;DCI,</Highlight></CodeLine>
<Link id="l06732" /><CodeLine lineNumber="6732"><Highlight kind="normal">                                        </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l06733" /><CodeLine lineNumber="6733"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDNode &#42;, 5&gt;</a> Built;</Highlight></CodeLine>
<Link id="l06734" /><CodeLine lineNumber="6734"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Folded = prepareUREMEqFold(SETCCVT, REMNode, CompTargetNode, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>,</Highlight></CodeLine>
<Link id="l06735" /><CodeLine lineNumber="6735"><Highlight kind="normal">                                         DCI, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, Built)) &#123;</Highlight></CodeLine>
<Link id="l06736" /><CodeLine lineNumber="6736"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : Built)</Highlight></CodeLine>
<Link id="l06737" /><CodeLine lineNumber="6737"><Highlight kind="normal">      DCI.AddToWorklist(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l06738" /><CodeLine lineNumber="6738"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Folded;</Highlight></CodeLine>
<Link id="l06739" /><CodeLine lineNumber="6739"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06740" /><CodeLine lineNumber="6740"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06741" /><CodeLine lineNumber="6741"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06742" /><CodeLine lineNumber="6742"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l06743" /><CodeLine lineNumber="6743"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06744" /><CodeLine lineNumber="6744"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a></Highlight></CodeLine>
<Link id="l06745" /><CodeLine lineNumber="6745"><Highlight kind="normal">TargetLowering::prepareUREMEqFold(EVT SETCCVT, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> REMNode,</Highlight></CodeLine>
<Link id="l06746" /><CodeLine lineNumber="6746"><Highlight kind="normal">                                  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> CompTargetNode, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>,</Highlight></CodeLine>
<Link id="l06747" /><CodeLine lineNumber="6747"><Highlight kind="normal">                                  DAGCombinerInfo &amp;DCI, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</Highlight></CodeLine>
<Link id="l06748" /><CodeLine lineNumber="6748"><Highlight kind="normal">                                  SmallVectorImpl&lt;SDNode &#42;&gt; &amp;Created)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l06749" /><CodeLine lineNumber="6749"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// fold (seteq/ne (urem N, D), 0) -&gt; (setule/ugt (rotr (mul N, P), K), Q)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06750" /><CodeLine lineNumber="6750"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// - D must be constant, with D = D0 &#42; 2^K where D0 is odd</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06751" /><CodeLine lineNumber="6751"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// - P is the multiplicative inverse of D0 modulo 2^W</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06752" /><CodeLine lineNumber="6752"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// - Q = floor(((2^W) - 1) / D)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06753" /><CodeLine lineNumber="6753"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// where W is the width of the common type of N and D.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06754" /><CodeLine lineNumber="6754"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l06755" /><CodeLine lineNumber="6755"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Only applicable for (in)equality comparisons.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06756" /><CodeLine lineNumber="6756"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06757" /><CodeLine lineNumber="6757"><Highlight kind="normal">  SelectionDAG &amp;DAG = DCI.DAG;</Highlight></CodeLine>
<Link id="l06758" /><CodeLine lineNumber="6758"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06759" /><CodeLine lineNumber="6759"><Highlight kind="normal">  EVT VT = REMNode.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l06760" /><CodeLine lineNumber="6760"><Highlight kind="normal">  EVT SVT = VT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l06761" /><CodeLine lineNumber="6761"><Highlight kind="normal">  EVT ShVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a6a2579bc0354806c6c9708b068777c3a">getShiftAmountTy</a>(VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l06762" /><CodeLine lineNumber="6762"><Highlight kind="normal">  EVT ShSVT = ShVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l06763" /><CodeLine lineNumber="6763"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06764" /><CodeLine lineNumber="6764"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If MUL is unavailable, we cannot proceed in any case.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06765" /><CodeLine lineNumber="6765"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DCI.isBeforeLegalizeOps() &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, VT))</Highlight></CodeLine>
<Link id="l06766" /><CodeLine lineNumber="6766"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06767" /><CodeLine lineNumber="6767"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06768" /><CodeLine lineNumber="6768"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> ComparingWithAllZeros = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06769" /><CodeLine lineNumber="6769"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AllComparisonsWithNonZerosAreTautological = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06770" /><CodeLine lineNumber="6770"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> HadTautologicalLanes = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06771" /><CodeLine lineNumber="6771"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AllLanesAreTautological = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06772" /><CodeLine lineNumber="6772"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> HadEvenDivisor = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06773" /><CodeLine lineNumber="6773"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AllDivisorsArePowerOfTwo = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06774" /><CodeLine lineNumber="6774"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> HadTautologicalInvertedLanes = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06775" /><CodeLine lineNumber="6775"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDValue, 16&gt;</a> PAmts, KAmts, QAmts, IAmts;</Highlight></CodeLine>
<Link id="l06776" /><CodeLine lineNumber="6776"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06777" /><CodeLine lineNumber="6777"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> BuildUREMPattern = &#91;&amp;&#93;(ConstantSDNode &#42;CDiv, ConstantSDNode &#42;CCmp) &#123;</Highlight></CodeLine>
<Link id="l06778" /><CodeLine lineNumber="6778"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Division by 0 is UB. Leave it to be constant-folded elsewhere.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06779" /><CodeLine lineNumber="6779"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CDiv-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#ae91378660e4c7198b4de645a1d207b91">isZero</a>())</Highlight></CodeLine>
<Link id="l06780" /><CodeLine lineNumber="6780"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06781" /><CodeLine lineNumber="6781"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06782" /><CodeLine lineNumber="6782"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a> = CDiv-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#a74b17cf9d0ee8268a5b38bbb896a30ba">getAPIntValue</a>();</Highlight></CodeLine>
<Link id="l06783" /><CodeLine lineNumber="6783"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;<a href="/docs/api/namespaces/llvm/x86/#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a> = CCmp-&gt;getAPIntValue();</Highlight></CodeLine>
<Link id="l06784" /><CodeLine lineNumber="6784"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06785" /><CodeLine lineNumber="6785"><Highlight kind="normal">    ComparingWithAllZeros &amp;= <a href="/docs/api/namespaces/llvm/x86/#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a>.isZero();</Highlight></CodeLine>
<Link id="l06786" /><CodeLine lineNumber="6786"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06787" /><CodeLine lineNumber="6787"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// x u% C1&#96; is &#42;always&#42; less than C1. So given &#96;x u% C1 == C2&#96;,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06788" /><CodeLine lineNumber="6788"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// if C2 is not less than C1, the comparison is always false.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06789" /><CodeLine lineNumber="6789"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// But we will only be able to produce the comparison that will give the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06790" /><CodeLine lineNumber="6790"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// opposive tautological answer. So this lane would need to be fixed up.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06791" /><CodeLine lineNumber="6791"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> TautologicalInvertedLane = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.ule(Cmp);</Highlight></CodeLine>
<Link id="l06792" /><CodeLine lineNumber="6792"><Highlight kind="normal">    HadTautologicalInvertedLanes |= TautologicalInvertedLane;</Highlight></CodeLine>
<Link id="l06793" /><CodeLine lineNumber="6793"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06794" /><CodeLine lineNumber="6794"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If all lanes are tautological (either all divisors are ones, or divisor</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06795" /><CodeLine lineNumber="6795"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// is not greater than the constant we are comparing with),</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06796" /><CodeLine lineNumber="6796"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// we will prefer to avoid the fold.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06797" /><CodeLine lineNumber="6797"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> TautologicalLane = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.isOne() || TautologicalInvertedLane;</Highlight></CodeLine>
<Link id="l06798" /><CodeLine lineNumber="6798"><Highlight kind="normal">    HadTautologicalLanes |= TautologicalLane;</Highlight></CodeLine>
<Link id="l06799" /><CodeLine lineNumber="6799"><Highlight kind="normal">    AllLanesAreTautological &amp;= TautologicalLane;</Highlight></CodeLine>
<Link id="l06800" /><CodeLine lineNumber="6800"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06801" /><CodeLine lineNumber="6801"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we are comparing with non-zero, we need&#39;ll need  to subtract said</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06802" /><CodeLine lineNumber="6802"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// comparison value from the LHS. But there is no point in doing that if</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06803" /><CodeLine lineNumber="6803"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// every lane where we are comparing with non-zero is tautological..</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06804" /><CodeLine lineNumber="6804"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/x86/#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a>.isZero())</Highlight></CodeLine>
<Link id="l06805" /><CodeLine lineNumber="6805"><Highlight kind="normal">      AllComparisonsWithNonZerosAreTautological &amp;= TautologicalLane;</Highlight></CodeLine>
<Link id="l06806" /><CodeLine lineNumber="6806"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06807" /><CodeLine lineNumber="6807"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Decompose D into D0 &#42; 2^K</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06808" /><CodeLine lineNumber="6808"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38eaa5f3c6a11b03839d46af9fb43c97c188">K</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.countr&#95;zero();</Highlight></CodeLine>
<Link id="l06809" /><CodeLine lineNumber="6809"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.isOne() || (K == 0)) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;For divisor &#39;1&#39; we won&#39;t rotate.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06810" /><CodeLine lineNumber="6810"><Highlight kind="normal">    APInt D0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.lshr(K);</Highlight></CodeLine>
<Link id="l06811" /><CodeLine lineNumber="6811"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06812" /><CodeLine lineNumber="6812"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// D is even if it has trailing zeros.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06813" /><CodeLine lineNumber="6813"><Highlight kind="normal">    HadEvenDivisor |= (<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38eaa5f3c6a11b03839d46af9fb43c97c188">K</a> != 0);</Highlight></CodeLine>
<Link id="l06814" /><CodeLine lineNumber="6814"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// D is a power-of-two if D0 is one.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06815" /><CodeLine lineNumber="6815"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If all divisors are power-of-two, we will prefer to avoid the fold.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06816" /><CodeLine lineNumber="6816"><Highlight kind="normal">    AllDivisorsArePowerOfTwo &amp;= D0.<a href="/docs/api/classes/llvm/apint/#aea5f26deda5ef97e02f6afc57c0c3920">isOne</a>();</Highlight></CodeLine>
<Link id="l06817" /><CodeLine lineNumber="6817"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06818" /><CodeLine lineNumber="6818"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// P = inv(D0, 2^W)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06819" /><CodeLine lineNumber="6819"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// 2^W requires W + 1 bits, so we have to extend and then truncate.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06820" /><CodeLine lineNumber="6820"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.getBitWidth();</Highlight></CodeLine>
<Link id="l06821" /><CodeLine lineNumber="6821"><Highlight kind="normal">    APInt <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = D0.<a href="/docs/api/classes/llvm/apint/#aba59baafccd4c4796301b857df3c40c6">multiplicativeInverse</a>();</Highlight></CodeLine>
<Link id="l06822" /><CodeLine lineNumber="6822"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((D0 &#42; <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>).isOne() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Multiplicative inverse basic check failed.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06823" /><CodeLine lineNumber="6823"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06824" /><CodeLine lineNumber="6824"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Q = floor((2^W - 1) u/ D)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06825" /><CodeLine lineNumber="6825"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// R = ((2^W - 1) u% D)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06826" /><CodeLine lineNumber="6826"><Highlight kind="normal">    APInt Q, <a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>;</Highlight></CodeLine>
<Link id="l06827" /><CodeLine lineNumber="6827"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/apint/#a0f0a665210e453bb16b4bf1861dbdd58">APInt::udivrem</a>(<a href="/docs/api/classes/llvm/apint/#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(W), <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>, Q, R);</Highlight></CodeLine>
<Link id="l06828" /><CodeLine lineNumber="6828"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06829" /><CodeLine lineNumber="6829"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we are comparing with zero, then that comparison constant is okay,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06830" /><CodeLine lineNumber="6830"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// else it may need to be one less than that.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06831" /><CodeLine lineNumber="6831"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/x86/#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a>.ugt(R))</Highlight></CodeLine>
<Link id="l06832" /><CodeLine lineNumber="6832"><Highlight kind="normal">      Q -= 1;</Highlight></CodeLine>
<Link id="l06833" /><CodeLine lineNumber="6833"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06834" /><CodeLine lineNumber="6834"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/apint/#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(ShSVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>()).<a href="/docs/api/classes/llvm/apint/#a46a7cbf3724080a5f4f4c7e7a4551e26">ugt</a>(K) &amp;&amp;</Highlight></CodeLine>
<Link id="l06835" /><CodeLine lineNumber="6835"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;We are expecting that K is always less than all-ones for ShSVT&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06836" /><CodeLine lineNumber="6836"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06837" /><CodeLine lineNumber="6837"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the lane is tautological the result can be constant-folded.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06838" /><CodeLine lineNumber="6838"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TautologicalLane) &#123;</Highlight></CodeLine>
<Link id="l06839" /><CodeLine lineNumber="6839"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Set P and K amount to a bogus values so we can try to splat them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06840" /><CodeLine lineNumber="6840"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = 0;</Highlight></CodeLine>
<Link id="l06841" /><CodeLine lineNumber="6841"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38eaa5f3c6a11b03839d46af9fb43c97c188">K</a> = -1;</Highlight></CodeLine>
<Link id="l06842" /><CodeLine lineNumber="6842"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// And ensure that comparison constant is tautological,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06843" /><CodeLine lineNumber="6843"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// it will always compare true/false.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06844" /><CodeLine lineNumber="6844"><Highlight kind="normal">      Q = -1;</Highlight></CodeLine>
<Link id="l06845" /><CodeLine lineNumber="6845"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l06846" /><CodeLine lineNumber="6846"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06847" /><CodeLine lineNumber="6847"><Highlight kind="normal">    PAmts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SVT));</Highlight></CodeLine>
<Link id="l06848" /><CodeLine lineNumber="6848"><Highlight kind="normal">    KAmts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(</Highlight></CodeLine>
<Link id="l06849" /><CodeLine lineNumber="6849"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(APInt(ShSVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>(), K, </Highlight><Highlight kind="comment">/&#42;isSigned=&#42;/</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l06850" /><CodeLine lineNumber="6850"><Highlight kind="normal">                              </Highlight><Highlight kind="comment">/&#42;implicitTrunc=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l06851" /><CodeLine lineNumber="6851"><Highlight kind="normal">                        <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShSVT));</Highlight></CodeLine>
<Link id="l06852" /><CodeLine lineNumber="6852"><Highlight kind="normal">    QAmts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Q, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SVT));</Highlight></CodeLine>
<Link id="l06853" /><CodeLine lineNumber="6853"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l06854" /><CodeLine lineNumber="6854"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l06855" /><CodeLine lineNumber="6855"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06856" /><CodeLine lineNumber="6856"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = REMNode.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l06857" /><CodeLine lineNumber="6857"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a> = REMNode.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1);</Highlight></CodeLine>
<Link id="l06858" /><CodeLine lineNumber="6858"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06859" /><CodeLine lineNumber="6859"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Collect the values from each element.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06860" /><CodeLine lineNumber="6860"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/isd/#ab283a383171c46fb4445cb64eb6b687a">ISD::matchBinaryPredicate</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>, CompTargetNode, BuildUREMPattern))</Highlight></CodeLine>
<Link id="l06861" /><CodeLine lineNumber="6861"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06862" /><CodeLine lineNumber="6862"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06863" /><CodeLine lineNumber="6863"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If all lanes are tautological, the result can be constant-folded.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06864" /><CodeLine lineNumber="6864"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AllLanesAreTautological)</Highlight></CodeLine>
<Link id="l06865" /><CodeLine lineNumber="6865"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06866" /><CodeLine lineNumber="6866"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06867" /><CodeLine lineNumber="6867"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If this is a urem by a powers-of-two, avoid the fold since it can be</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06868" /><CodeLine lineNumber="6868"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// best implemented as a bit test.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06869" /><CodeLine lineNumber="6869"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AllDivisorsArePowerOfTwo)</Highlight></CodeLine>
<Link id="l06870" /><CodeLine lineNumber="6870"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06871" /><CodeLine lineNumber="6871"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06872" /><CodeLine lineNumber="6872"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> PVal, KVal, QVal;</Highlight></CodeLine>
<Link id="l06873" /><CodeLine lineNumber="6873"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aff6f73b624fecca7dbe94259f9437e32">ISD::BUILD&#95;VECTOR</a>) &#123;</Highlight></CodeLine>
<Link id="l06874" /><CodeLine lineNumber="6874"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (HadTautologicalLanes) &#123;</Highlight></CodeLine>
<Link id="l06875" /><CodeLine lineNumber="6875"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Try to turn PAmts into a splat, since we don&#39;t care about the values</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06876" /><CodeLine lineNumber="6876"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// that are currently &#39;0&#39;. If we can&#39;t, just keep &#39;0&#39;&#96;s.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06877" /><CodeLine lineNumber="6877"><Highlight kind="normal">      <a href="#aae6594d69bd253616ae16674187e6396">turnVectorIntoSplatVector</a>(PAmts, <a href="/docs/api/namespaces/llvm/#a1a86775f3d85d98a31b2751e1eb348ea">isNullConstant</a>);</Highlight></CodeLine>
<Link id="l06878" /><CodeLine lineNumber="6878"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Try to turn KAmts into a splat, since we don&#39;t care about the values</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06879" /><CodeLine lineNumber="6879"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// that are currently &#39;-1&#39;. If we can&#39;t, change them to &#39;0&#39;&#96;s.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06880" /><CodeLine lineNumber="6880"><Highlight kind="normal">      <a href="#aae6594d69bd253616ae16674187e6396">turnVectorIntoSplatVector</a>(KAmts, <a href="/docs/api/namespaces/llvm/#af8b512107b41f4ccaf001e31218135c3">isAllOnesConstant</a>,</Highlight></CodeLine>
<Link id="l06881" /><CodeLine lineNumber="6881"><Highlight kind="normal">                                DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShSVT));</Highlight></CodeLine>
<Link id="l06882" /><CodeLine lineNumber="6882"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l06883" /><CodeLine lineNumber="6883"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06884" /><CodeLine lineNumber="6884"><Highlight kind="normal">    PVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(VT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, PAmts);</Highlight></CodeLine>
<Link id="l06885" /><CodeLine lineNumber="6885"><Highlight kind="normal">    KVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(ShVT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, KAmts);</Highlight></CodeLine>
<Link id="l06886" /><CodeLine lineNumber="6886"><Highlight kind="normal">    QVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(VT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, QAmts);</Highlight></CodeLine>
<Link id="l06887" /><CodeLine lineNumber="6887"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7f864031b6fb691b1525cbea92542ef1">ISD::SPLAT&#95;VECTOR</a>) &#123;</Highlight></CodeLine>
<Link id="l06888" /><CodeLine lineNumber="6888"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PAmts.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp; KAmts.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp; QAmts.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l06889" /><CodeLine lineNumber="6889"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;Expected matchBinaryPredicate to return one element for &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06890" /><CodeLine lineNumber="6890"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;SPLAT&#95;VECTORs&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06891" /><CodeLine lineNumber="6891"><Highlight kind="normal">    PVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(VT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, PAmts&#91;0&#93;);</Highlight></CodeLine>
<Link id="l06892" /><CodeLine lineNumber="6892"><Highlight kind="normal">    KVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(ShVT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, KAmts&#91;0&#93;);</Highlight></CodeLine>
<Link id="l06893" /><CodeLine lineNumber="6893"><Highlight kind="normal">    QVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(VT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, QAmts&#91;0&#93;);</Highlight></CodeLine>
<Link id="l06894" /><CodeLine lineNumber="6894"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l06895" /><CodeLine lineNumber="6895"><Highlight kind="normal">    PVal = PAmts&#91;0&#93;;</Highlight></CodeLine>
<Link id="l06896" /><CodeLine lineNumber="6896"><Highlight kind="normal">    KVal = KAmts&#91;0&#93;;</Highlight></CodeLine>
<Link id="l06897" /><CodeLine lineNumber="6897"><Highlight kind="normal">    QVal = QAmts&#91;0&#93;;</Highlight></CodeLine>
<Link id="l06898" /><CodeLine lineNumber="6898"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06899" /><CodeLine lineNumber="6899"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06900" /><CodeLine lineNumber="6900"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!ComparingWithAllZeros &amp;&amp; !AllComparisonsWithNonZerosAreTautological) &#123;</Highlight></CodeLine>
<Link id="l06901" /><CodeLine lineNumber="6901"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DCI.isBeforeLegalizeOps() &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, VT))</Highlight></CodeLine>
<Link id="l06902" /><CodeLine lineNumber="6902"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(); </Highlight><Highlight kind="comment">// FIXME: Could/should use &#96;ISD::ADD&#96;?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06903" /><CodeLine lineNumber="6903"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CompTargetNode.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>() == <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>.getValueType() &amp;&amp;</Highlight></CodeLine>
<Link id="l06904" /><CodeLine lineNumber="6904"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;Expecting that the types on LHS and RHS of comparisons match.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06905" /><CodeLine lineNumber="6905"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, CompTargetNode);</Highlight></CodeLine>
<Link id="l06906" /><CodeLine lineNumber="6906"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06907" /><CodeLine lineNumber="6907"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06908" /><CodeLine lineNumber="6908"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (mul N, P)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06909" /><CodeLine lineNumber="6909"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, PVal);</Highlight></CodeLine>
<Link id="l06910" /><CodeLine lineNumber="6910"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Op0.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06911" /><CodeLine lineNumber="6911"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06912" /><CodeLine lineNumber="6912"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Rotate right only if any divisor was even. We avoid rotates for all-odd</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06913" /><CodeLine lineNumber="6913"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// divisors as a performance improvement, since rotating by 0 is a no-op.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06914" /><CodeLine lineNumber="6914"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (HadEvenDivisor) &#123;</Highlight></CodeLine>
<Link id="l06915" /><CodeLine lineNumber="6915"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We need ROTR to do this.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06916" /><CodeLine lineNumber="6916"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DCI.isBeforeLegalizeOps() &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a19cd524269b035941434cce28b585715">ISD::ROTR</a>, VT))</Highlight></CodeLine>
<Link id="l06917" /><CodeLine lineNumber="6917"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06918" /><CodeLine lineNumber="6918"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// UREM: (rotr (mul N, P), K)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06919" /><CodeLine lineNumber="6919"><Highlight kind="normal">    Op0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a19cd524269b035941434cce28b585715">ISD::ROTR</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Op0, KVal);</Highlight></CodeLine>
<Link id="l06920" /><CodeLine lineNumber="6920"><Highlight kind="normal">    Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Op0.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06921" /><CodeLine lineNumber="6921"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06922" /><CodeLine lineNumber="6922"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06923" /><CodeLine lineNumber="6923"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// UREM: (setule/setugt (rotr (mul N, P), K), Q)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06924" /><CodeLine lineNumber="6924"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewCC =</Highlight></CodeLine>
<Link id="l06925" /><CodeLine lineNumber="6925"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SETCCVT, Op0, QVal,</Highlight></CodeLine>
<Link id="l06926" /><CodeLine lineNumber="6926"><Highlight kind="normal">                   ((<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>) ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a>));</Highlight></CodeLine>
<Link id="l06927" /><CodeLine lineNumber="6927"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!HadTautologicalInvertedLanes)</Highlight></CodeLine>
<Link id="l06928" /><CodeLine lineNumber="6928"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> NewCC;</Highlight></CodeLine>
<Link id="l06929" /><CodeLine lineNumber="6929"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06930" /><CodeLine lineNumber="6930"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If any lanes previously compared always-false, the NewCC will give</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06931" /><CodeLine lineNumber="6931"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// always-true result for them, so we need to fixup those lanes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06932" /><CodeLine lineNumber="6932"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Or the other way around for inequality predicate.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06933" /><CodeLine lineNumber="6933"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Can/should only get here for vectors.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06934" /><CodeLine lineNumber="6934"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(NewCC.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06935" /><CodeLine lineNumber="6935"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06936" /><CodeLine lineNumber="6936"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// x u% C1&#96; is &#42;always&#42; less than C1. So given &#96;x u% C1 == C2&#96;,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06937" /><CodeLine lineNumber="6937"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// if C2 is not less than C1, the comparison is always false.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06938" /><CodeLine lineNumber="6938"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// But we have produced the comparison that will give the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06939" /><CodeLine lineNumber="6939"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// opposive tautological answer. So these lanes would need to be fixed up.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06940" /><CodeLine lineNumber="6940"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TautologicalInvertedChannels =</Highlight></CodeLine>
<Link id="l06941" /><CodeLine lineNumber="6941"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SETCCVT, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>, CompTargetNode, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a>);</Highlight></CodeLine>
<Link id="l06942" /><CodeLine lineNumber="6942"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(TautologicalInvertedChannels.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l06943" /><CodeLine lineNumber="6943"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06944" /><CodeLine lineNumber="6944"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// NOTE: we avoid letting illegal types through even if we&#39;re before legalize</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06945" /><CodeLine lineNumber="6945"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ops – legalization has a hard time producing good code for this.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06946" /><CodeLine lineNumber="6946"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0b7d2c769fd0fbaab3c4a2fc8e7ea0c">ISD::VSELECT</a>, SETCCVT)) &#123;</Highlight></CodeLine>
<Link id="l06947" /><CodeLine lineNumber="6947"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we have a vector select, let&#39;s replace the comparison results in the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06948" /><CodeLine lineNumber="6948"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// affected lanes with the correct tautological result.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06949" /><CodeLine lineNumber="6949"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Replacement = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac2624b648ddca964183d631c8d189595">getBoolConstant</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> ? </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal"> : </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l06950" /><CodeLine lineNumber="6950"><Highlight kind="normal">                                              <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SETCCVT, SETCCVT);</Highlight></CodeLine>
<Link id="l06951" /><CodeLine lineNumber="6951"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0b7d2c769fd0fbaab3c4a2fc8e7ea0c">ISD::VSELECT</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SETCCVT, TautologicalInvertedChannels,</Highlight></CodeLine>
<Link id="l06952" /><CodeLine lineNumber="6952"><Highlight kind="normal">                       Replacement, NewCC);</Highlight></CodeLine>
<Link id="l06953" /><CodeLine lineNumber="6953"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06954" /><CodeLine lineNumber="6954"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06955" /><CodeLine lineNumber="6955"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Else, we can just invert the comparison result in the appropriate lanes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06956" /><CodeLine lineNumber="6956"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06957" /><CodeLine lineNumber="6957"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// NOTE: see the note above VSELECT above.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06958" /><CodeLine lineNumber="6958"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, SETCCVT))</Highlight></CodeLine>
<Link id="l06959" /><CodeLine lineNumber="6959"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SETCCVT, NewCC,</Highlight></CodeLine>
<Link id="l06960" /><CodeLine lineNumber="6960"><Highlight kind="normal">                       TautologicalInvertedChannels);</Highlight></CodeLine>
<Link id="l06961" /><CodeLine lineNumber="6961"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06962" /><CodeLine lineNumber="6962"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(); </Highlight><Highlight kind="comment">// Don&#39;t know how to lower.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06963" /><CodeLine lineNumber="6963"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l06964" /><CodeLine lineNumber="6964"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l06965" /><CodeLine lineNumber="6965"><Highlight kind="comment">/// Given an ISD::SREM used only by an ISD::SETEQ or ISD::SETNE</Highlight></CodeLine>
<Link id="l06966" /><CodeLine lineNumber="6966"><Highlight kind="comment">/// where the divisor is constant and the comparison target is zero,</Highlight></CodeLine>
<Link id="l06967" /><CodeLine lineNumber="6967"><Highlight kind="comment">/// return a DAG expression that will generate the same comparison result</Highlight></CodeLine>
<Link id="l06968" /><CodeLine lineNumber="6968"><Highlight kind="comment">/// using only multiplications, additions and shifts/rotations.</Highlight></CodeLine>
<Link id="l06969" /><CodeLine lineNumber="6969"><Highlight kind="comment">/// Ref: &quot;Hacker&#39;s Delight&quot; 10-17.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06970" /><CodeLine lineNumber="6970"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TargetLowering::buildSREMEqFold(EVT SETCCVT, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> REMNode,</Highlight></CodeLine>
<Link id="l06971" /><CodeLine lineNumber="6971"><Highlight kind="normal">                                        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> CompTargetNode,</Highlight></CodeLine>
<Link id="l06972" /><CodeLine lineNumber="6972"><Highlight kind="normal">                                        <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>,</Highlight></CodeLine>
<Link id="l06973" /><CodeLine lineNumber="6973"><Highlight kind="normal">                                        DAGCombinerInfo &amp;DCI,</Highlight></CodeLine>
<Link id="l06974" /><CodeLine lineNumber="6974"><Highlight kind="normal">                                        </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l06975" /><CodeLine lineNumber="6975"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDNode &#42;, 7&gt;</a> Built;</Highlight></CodeLine>
<Link id="l06976" /><CodeLine lineNumber="6976"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Folded = prepareSREMEqFold(SETCCVT, REMNode, CompTargetNode, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>,</Highlight></CodeLine>
<Link id="l06977" /><CodeLine lineNumber="6977"><Highlight kind="normal">                                         DCI, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, Built)) &#123;</Highlight></CodeLine>
<Link id="l06978" /><CodeLine lineNumber="6978"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Built.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() &lt;= 7 &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Max size prediction failed.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l06979" /><CodeLine lineNumber="6979"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> : Built)</Highlight></CodeLine>
<Link id="l06980" /><CodeLine lineNumber="6980"><Highlight kind="normal">      DCI.AddToWorklist(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l06981" /><CodeLine lineNumber="6981"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Folded;</Highlight></CodeLine>
<Link id="l06982" /><CodeLine lineNumber="6982"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l06983" /><CodeLine lineNumber="6983"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06984" /><CodeLine lineNumber="6984"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l06985" /><CodeLine lineNumber="6985"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l06986" /><CodeLine lineNumber="6986"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06987" /><CodeLine lineNumber="6987"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a></Highlight></CodeLine>
<Link id="l06988" /><CodeLine lineNumber="6988"><Highlight kind="normal">TargetLowering::prepareSREMEqFold(EVT SETCCVT, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> REMNode,</Highlight></CodeLine>
<Link id="l06989" /><CodeLine lineNumber="6989"><Highlight kind="normal">                                  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> CompTargetNode, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>,</Highlight></CodeLine>
<Link id="l06990" /><CodeLine lineNumber="6990"><Highlight kind="normal">                                  DAGCombinerInfo &amp;DCI, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</Highlight></CodeLine>
<Link id="l06991" /><CodeLine lineNumber="6991"><Highlight kind="normal">                                  SmallVectorImpl&lt;SDNode &#42;&gt; &amp;Created)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l06992" /><CodeLine lineNumber="6992"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Derived from Hacker&#39;s Delight, 2nd Edition, by Hank Warren. Section 10-17.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06993" /><CodeLine lineNumber="6993"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Fold:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06994" /><CodeLine lineNumber="6994"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   (seteq/ne (srem N, D), 0)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06995" /><CodeLine lineNumber="6995"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// To:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06996" /><CodeLine lineNumber="6996"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   (setule/ugt (rotr (add (mul N, P), A), K), Q)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06997" /><CodeLine lineNumber="6997"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06998" /><CodeLine lineNumber="6998"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// - D must be constant, with D = D0 &#42; 2^K where D0 is odd</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l06999" /><CodeLine lineNumber="6999"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// - P is the multiplicative inverse of D0 modulo 2^W</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07000" /><CodeLine lineNumber="7000"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// - A = bitwiseand(floor((2^(W - 1) - 1) / D0), (-(2^k)))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07001" /><CodeLine lineNumber="7001"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// - Q = floor((2 &#42; A) / (2^K))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07002" /><CodeLine lineNumber="7002"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// where W is the width of the common type of N and D.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07003" /><CodeLine lineNumber="7003"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07004" /><CodeLine lineNumber="7004"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// When D is a power of two (and thus D0 is 1), the normal</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07005" /><CodeLine lineNumber="7005"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// formula for A and Q don&#39;t apply, because the derivation</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07006" /><CodeLine lineNumber="7006"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// depends on D not dividing 2^(W-1), and thus theorem ZRS</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07007" /><CodeLine lineNumber="7007"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// does not apply. This specifically fails when N = INT&#95;MIN.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07008" /><CodeLine lineNumber="7008"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07009" /><CodeLine lineNumber="7009"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Instead, for power-of-two D, we use:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07010" /><CodeLine lineNumber="7010"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// - A = 2^(W-1)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07011" /><CodeLine lineNumber="7011"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// |-&gt; Order-preserving map from &#91;-2^(W-1), 2^(W-1) - 1&#93; to &#91;0,2^W - 1&#93;)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07012" /><CodeLine lineNumber="7012"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// - Q = 2^(W-K) - 1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07013" /><CodeLine lineNumber="7013"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// |-&gt; Test that the top K bits are zero after rotation</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07014" /><CodeLine lineNumber="7014"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a> || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l07015" /><CodeLine lineNumber="7015"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Only applicable for (in)equality comparisons.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l07016" /><CodeLine lineNumber="7016"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07017" /><CodeLine lineNumber="7017"><Highlight kind="normal">  SelectionDAG &amp;DAG = DCI.DAG;</Highlight></CodeLine>
<Link id="l07018" /><CodeLine lineNumber="7018"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07019" /><CodeLine lineNumber="7019"><Highlight kind="normal">  EVT VT = REMNode.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l07020" /><CodeLine lineNumber="7020"><Highlight kind="normal">  EVT SVT = VT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l07021" /><CodeLine lineNumber="7021"><Highlight kind="normal">  EVT ShVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a6a2579bc0354806c6c9708b068777c3a">getShiftAmountTy</a>(VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l07022" /><CodeLine lineNumber="7022"><Highlight kind="normal">  EVT ShSVT = ShVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l07023" /><CodeLine lineNumber="7023"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07024" /><CodeLine lineNumber="7024"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If we are after ops legalization, and MUL is unavailable, we can not</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07025" /><CodeLine lineNumber="7025"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// proceed.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07026" /><CodeLine lineNumber="7026"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DCI.isBeforeLegalizeOps() &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, VT))</Highlight></CodeLine>
<Link id="l07027" /><CodeLine lineNumber="7027"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l07028" /><CodeLine lineNumber="7028"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07029" /><CodeLine lineNumber="7029"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: Could support comparing with non-zero too.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07030" /><CodeLine lineNumber="7030"><Highlight kind="normal">  ConstantSDNode &#42;CompTarget = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(CompTargetNode);</Highlight></CodeLine>
<Link id="l07031" /><CodeLine lineNumber="7031"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!CompTarget || !CompTarget-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#ae91378660e4c7198b4de645a1d207b91">isZero</a>())</Highlight></CodeLine>
<Link id="l07032" /><CodeLine lineNumber="7032"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l07033" /><CodeLine lineNumber="7033"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07034" /><CodeLine lineNumber="7034"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> HadIntMinDivisor = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07035" /><CodeLine lineNumber="7035"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> HadOneDivisor = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07036" /><CodeLine lineNumber="7036"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AllDivisorsAreOnes = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07037" /><CodeLine lineNumber="7037"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> HadEvenDivisor = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07038" /><CodeLine lineNumber="7038"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> NeedToApplyOffset = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07039" /><CodeLine lineNumber="7039"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AllDivisorsArePowerOfTwo = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07040" /><CodeLine lineNumber="7040"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDValue, 16&gt;</a> PAmts, AAmts, KAmts, QAmts;</Highlight></CodeLine>
<Link id="l07041" /><CodeLine lineNumber="7041"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07042" /><CodeLine lineNumber="7042"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> BuildSREMPattern = &#91;&amp;&#93;(ConstantSDNode &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l07043" /><CodeLine lineNumber="7043"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Division by 0 is UB. Leave it to be constant-folded elsewhere.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07044" /><CodeLine lineNumber="7044"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;isZero())</Highlight></CodeLine>
<Link id="l07045" /><CodeLine lineNumber="7045"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07046" /><CodeLine lineNumber="7046"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07047" /><CodeLine lineNumber="7047"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// FIXME: we don&#39;t fold &#96;rem %X, -C&#96; to &#96;rem %X, C&#96; in DAGCombine.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07048" /><CodeLine lineNumber="7048"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07049" /><CodeLine lineNumber="7049"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// WARNING: this fold is only valid for positive divisors!</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07050" /><CodeLine lineNumber="7050"><Highlight kind="normal">    APInt <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a> = <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getAPIntValue();</Highlight></CodeLine>
<Link id="l07051" /><CodeLine lineNumber="7051"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.isNegative())</Highlight></CodeLine>
<Link id="l07052" /><CodeLine lineNumber="7052"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.negate(); </Highlight><Highlight kind="comment">//  &#96;rem %X, -C&#96; is equivalent to &#96;rem %X, C&#96;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07053" /><CodeLine lineNumber="7053"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07054" /><CodeLine lineNumber="7054"><Highlight kind="normal">    HadIntMinDivisor |= <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.isMinSignedValue();</Highlight></CodeLine>
<Link id="l07055" /><CodeLine lineNumber="7055"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07056" /><CodeLine lineNumber="7056"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If all divisors are ones, we will prefer to avoid the fold.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07057" /><CodeLine lineNumber="7057"><Highlight kind="normal">    HadOneDivisor |= <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.isOne();</Highlight></CodeLine>
<Link id="l07058" /><CodeLine lineNumber="7058"><Highlight kind="normal">    AllDivisorsAreOnes &amp;= <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.isOne();</Highlight></CodeLine>
<Link id="l07059" /><CodeLine lineNumber="7059"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07060" /><CodeLine lineNumber="7060"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Decompose D into D0 &#42; 2^K</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07061" /><CodeLine lineNumber="7061"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38eaa5f3c6a11b03839d46af9fb43c97c188">K</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.countr&#95;zero();</Highlight></CodeLine>
<Link id="l07062" /><CodeLine lineNumber="7062"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.isOne() || (K == 0)) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;For divisor &#39;1&#39; we won&#39;t rotate.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l07063" /><CodeLine lineNumber="7063"><Highlight kind="normal">    APInt D0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.<a href="/docs/api/classes/llvm/apint/#af34549c39d6f741fbdaf9a795aa306e9">lshr</a>(K);</Highlight></CodeLine>
<Link id="l07064" /><CodeLine lineNumber="7064"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07065" /><CodeLine lineNumber="7065"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.isMinSignedValue()) &#123;</Highlight></CodeLine>
<Link id="l07066" /><CodeLine lineNumber="7066"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// D is even if it has trailing zeros; unless it&#39;s INT&#95;MIN, in which case</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07067" /><CodeLine lineNumber="7067"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// we don&#39;t care about this lane in this fold, we&#39;ll special-handle it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07068" /><CodeLine lineNumber="7068"><Highlight kind="normal">      HadEvenDivisor |= (<a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38eaa5f3c6a11b03839d46af9fb43c97c188">K</a> != 0);</Highlight></CodeLine>
<Link id="l07069" /><CodeLine lineNumber="7069"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07070" /><CodeLine lineNumber="7070"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07071" /><CodeLine lineNumber="7071"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// D is a power-of-two if D0 is one. This includes INT&#95;MIN.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07072" /><CodeLine lineNumber="7072"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If all divisors are power-of-two, we will prefer to avoid the fold.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07073" /><CodeLine lineNumber="7073"><Highlight kind="normal">    AllDivisorsArePowerOfTwo &amp;= D0.<a href="/docs/api/classes/llvm/apint/#aea5f26deda5ef97e02f6afc57c0c3920">isOne</a>();</Highlight></CodeLine>
<Link id="l07074" /><CodeLine lineNumber="7074"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07075" /><CodeLine lineNumber="7075"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// P = inv(D0, 2^W)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07076" /><CodeLine lineNumber="7076"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// 2^W requires W + 1 bits, so we have to extend and then truncate.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07077" /><CodeLine lineNumber="7077"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.getBitWidth();</Highlight></CodeLine>
<Link id="l07078" /><CodeLine lineNumber="7078"><Highlight kind="normal">    APInt <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = D0.<a href="/docs/api/classes/llvm/apint/#aba59baafccd4c4796301b857df3c40c6">multiplicativeInverse</a>();</Highlight></CodeLine>
<Link id="l07079" /><CodeLine lineNumber="7079"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((D0 &#42; <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>).isOne() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Multiplicative inverse basic check failed.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l07080" /><CodeLine lineNumber="7080"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07081" /><CodeLine lineNumber="7081"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// A = floor((2^(W - 1) - 1) / D0) &amp; -2^K</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07082" /><CodeLine lineNumber="7082"><Highlight kind="normal">    APInt <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a> = <a href="/docs/api/classes/llvm/apint/#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(W).<a href="/docs/api/classes/llvm/apint/#a05d674becc60ba4ef8cd4dd4d38ac27a">udiv</a>(D0);</Highlight></CodeLine>
<Link id="l07083" /><CodeLine lineNumber="7083"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.<a href="/docs/api/classes/llvm/apint/#aac76bff09195240a482b319136ab6144">clearLowBits</a>(K);</Highlight></CodeLine>
<Link id="l07084" /><CodeLine lineNumber="7084"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07085" /><CodeLine lineNumber="7085"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.isMinSignedValue()) &#123;</Highlight></CodeLine>
<Link id="l07086" /><CodeLine lineNumber="7086"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If divisor INT&#95;MIN, then we don&#39;t care about this lane in this fold,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07087" /><CodeLine lineNumber="7087"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// we&#39;ll special-handle it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07088" /><CodeLine lineNumber="7088"><Highlight kind="normal">      NeedToApplyOffset |= <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a> != 0;</Highlight></CodeLine>
<Link id="l07089" /><CodeLine lineNumber="7089"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07090" /><CodeLine lineNumber="7090"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07091" /><CodeLine lineNumber="7091"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Q = floor((2 &#42; A) / (2^K))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07092" /><CodeLine lineNumber="7092"><Highlight kind="normal">    APInt Q = (2 &#42; <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>).udiv(<a href="/docs/api/classes/llvm/apint/#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(W, K));</Highlight></CodeLine>
<Link id="l07093" /><CodeLine lineNumber="7093"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07094" /><CodeLine lineNumber="7094"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/apint/#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(SVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>()).<a href="/docs/api/classes/llvm/apint/#a46a7cbf3724080a5f4f4c7e7a4551e26">ugt</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l07095" /><CodeLine lineNumber="7095"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;We are expecting that A is always less than all-ones for SVT&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l07096" /><CodeLine lineNumber="7096"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/apint/#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(ShSVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>()).<a href="/docs/api/classes/llvm/apint/#a46a7cbf3724080a5f4f4c7e7a4551e26">ugt</a>(K) &amp;&amp;</Highlight></CodeLine>
<Link id="l07097" /><CodeLine lineNumber="7097"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;We are expecting that K is always less than all-ones for ShSVT&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l07098" /><CodeLine lineNumber="7098"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07099" /><CodeLine lineNumber="7099"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If D was a power of two, apply the alternate constant derivation.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07100" /><CodeLine lineNumber="7100"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (D0.<a href="/docs/api/classes/llvm/apint/#aea5f26deda5ef97e02f6afc57c0c3920">isOne</a>()) &#123;</Highlight></CodeLine>
<Link id="l07101" /><CodeLine lineNumber="7101"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// A = 2^(W-1)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07102" /><CodeLine lineNumber="7102"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a> = <a href="/docs/api/classes/llvm/apint/#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(W);</Highlight></CodeLine>
<Link id="l07103" /><CodeLine lineNumber="7103"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// - Q = 2^(W-K) - 1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07104" /><CodeLine lineNumber="7104"><Highlight kind="normal">      Q = <a href="/docs/api/classes/llvm/apint/#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(W - K).<a href="/docs/api/classes/llvm/apint/#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(W);</Highlight></CodeLine>
<Link id="l07105" /><CodeLine lineNumber="7105"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07106" /><CodeLine lineNumber="7106"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07107" /><CodeLine lineNumber="7107"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the divisor is 1 the result can be constant-folded. Likewise, we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07108" /><CodeLine lineNumber="7108"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// don&#39;t care about INT&#95;MIN lanes, those can be set to undef if appropriate.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07109" /><CodeLine lineNumber="7109"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.isOne()) &#123;</Highlight></CodeLine>
<Link id="l07110" /><CodeLine lineNumber="7110"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Set P, A and K to a bogus values so we can try to splat them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07111" /><CodeLine lineNumber="7111"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> = 0;</Highlight></CodeLine>
<Link id="l07112" /><CodeLine lineNumber="7112"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a> = -1;</Highlight></CodeLine>
<Link id="l07113" /><CodeLine lineNumber="7113"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38eaa5f3c6a11b03839d46af9fb43c97c188">K</a> = -1;</Highlight></CodeLine>
<Link id="l07114" /><CodeLine lineNumber="7114"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07115" /><CodeLine lineNumber="7115"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// x ?% 1 == 0  &lt;--&gt;  true  &lt;--&gt;  x u&lt;= -1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07116" /><CodeLine lineNumber="7116"><Highlight kind="normal">      Q = -1;</Highlight></CodeLine>
<Link id="l07117" /><CodeLine lineNumber="7117"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07118" /><CodeLine lineNumber="7118"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07119" /><CodeLine lineNumber="7119"><Highlight kind="normal">    PAmts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SVT));</Highlight></CodeLine>
<Link id="l07120" /><CodeLine lineNumber="7120"><Highlight kind="normal">    AAmts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SVT));</Highlight></CodeLine>
<Link id="l07121" /><CodeLine lineNumber="7121"><Highlight kind="normal">    KAmts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(</Highlight></CodeLine>
<Link id="l07122" /><CodeLine lineNumber="7122"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(APInt(ShSVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>(), K, </Highlight><Highlight kind="comment">/&#42;isSigned=&#42;/</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l07123" /><CodeLine lineNumber="7123"><Highlight kind="normal">                              </Highlight><Highlight kind="comment">/&#42;implicitTrunc=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l07124" /><CodeLine lineNumber="7124"><Highlight kind="normal">                        <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShSVT));</Highlight></CodeLine>
<Link id="l07125" /><CodeLine lineNumber="7125"><Highlight kind="normal">    QAmts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Q, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SVT));</Highlight></CodeLine>
<Link id="l07126" /><CodeLine lineNumber="7126"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07127" /><CodeLine lineNumber="7127"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l07128" /><CodeLine lineNumber="7128"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07129" /><CodeLine lineNumber="7129"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = REMNode.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(0);</Highlight></CodeLine>
<Link id="l07130" /><CodeLine lineNumber="7130"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a> = REMNode.<a href="/docs/api/classes/llvm/sdvalue/#a977e54da724d62e7b08e2ad69723731e">getOperand</a>(1);</Highlight></CodeLine>
<Link id="l07131" /><CodeLine lineNumber="7131"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07132" /><CodeLine lineNumber="7132"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Collect the values from each element.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07133" /><CodeLine lineNumber="7133"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/isd/#a309c11edf22da984f95cf9ba7a699c11">ISD::matchUnaryPredicate</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>, BuildSREMPattern))</Highlight></CodeLine>
<Link id="l07134" /><CodeLine lineNumber="7134"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l07135" /><CodeLine lineNumber="7135"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07136" /><CodeLine lineNumber="7136"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If this is a srem by a one, avoid the fold since it can be constant-folded.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07137" /><CodeLine lineNumber="7137"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AllDivisorsAreOnes)</Highlight></CodeLine>
<Link id="l07138" /><CodeLine lineNumber="7138"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l07139" /><CodeLine lineNumber="7139"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07140" /><CodeLine lineNumber="7140"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If this is a srem by a powers-of-two (including INT&#95;MIN), avoid the fold</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07141" /><CodeLine lineNumber="7141"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// since it can be best implemented as a bit test.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07142" /><CodeLine lineNumber="7142"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AllDivisorsArePowerOfTwo)</Highlight></CodeLine>
<Link id="l07143" /><CodeLine lineNumber="7143"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l07144" /><CodeLine lineNumber="7144"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07145" /><CodeLine lineNumber="7145"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> PVal, AVal, KVal, QVal;</Highlight></CodeLine>
<Link id="l07146" /><CodeLine lineNumber="7146"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aff6f73b624fecca7dbe94259f9437e32">ISD::BUILD&#95;VECTOR</a>) &#123;</Highlight></CodeLine>
<Link id="l07147" /><CodeLine lineNumber="7147"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (HadOneDivisor) &#123;</Highlight></CodeLine>
<Link id="l07148" /><CodeLine lineNumber="7148"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Try to turn PAmts into a splat, since we don&#39;t care about the values</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07149" /><CodeLine lineNumber="7149"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// that are currently &#39;0&#39;. If we can&#39;t, just keep &#39;0&#39;&#96;s.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07150" /><CodeLine lineNumber="7150"><Highlight kind="normal">      <a href="#aae6594d69bd253616ae16674187e6396">turnVectorIntoSplatVector</a>(PAmts, <a href="/docs/api/namespaces/llvm/#a1a86775f3d85d98a31b2751e1eb348ea">isNullConstant</a>);</Highlight></CodeLine>
<Link id="l07151" /><CodeLine lineNumber="7151"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Try to turn AAmts into a splat, since we don&#39;t care about the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07152" /><CodeLine lineNumber="7152"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// values that are currently &#39;-1&#39;. If we can&#39;t, change them to &#39;0&#39;&#96;s.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07153" /><CodeLine lineNumber="7153"><Highlight kind="normal">      <a href="#aae6594d69bd253616ae16674187e6396">turnVectorIntoSplatVector</a>(AAmts, <a href="/docs/api/namespaces/llvm/#af8b512107b41f4ccaf001e31218135c3">isAllOnesConstant</a>,</Highlight></CodeLine>
<Link id="l07154" /><CodeLine lineNumber="7154"><Highlight kind="normal">                                DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SVT));</Highlight></CodeLine>
<Link id="l07155" /><CodeLine lineNumber="7155"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Try to turn KAmts into a splat, since we don&#39;t care about the values</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07156" /><CodeLine lineNumber="7156"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// that are currently &#39;-1&#39;. If we can&#39;t, change them to &#39;0&#39;&#96;s.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07157" /><CodeLine lineNumber="7157"><Highlight kind="normal">      <a href="#aae6594d69bd253616ae16674187e6396">turnVectorIntoSplatVector</a>(KAmts, <a href="/docs/api/namespaces/llvm/#af8b512107b41f4ccaf001e31218135c3">isAllOnesConstant</a>,</Highlight></CodeLine>
<Link id="l07158" /><CodeLine lineNumber="7158"><Highlight kind="normal">                                DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShSVT));</Highlight></CodeLine>
<Link id="l07159" /><CodeLine lineNumber="7159"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07160" /><CodeLine lineNumber="7160"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07161" /><CodeLine lineNumber="7161"><Highlight kind="normal">    PVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(VT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, PAmts);</Highlight></CodeLine>
<Link id="l07162" /><CodeLine lineNumber="7162"><Highlight kind="normal">    AVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(VT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AAmts);</Highlight></CodeLine>
<Link id="l07163" /><CodeLine lineNumber="7163"><Highlight kind="normal">    KVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(ShVT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, KAmts);</Highlight></CodeLine>
<Link id="l07164" /><CodeLine lineNumber="7164"><Highlight kind="normal">    QVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(VT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, QAmts);</Highlight></CodeLine>
<Link id="l07165" /><CodeLine lineNumber="7165"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7f864031b6fb691b1525cbea92542ef1">ISD::SPLAT&#95;VECTOR</a>) &#123;</Highlight></CodeLine>
<Link id="l07166" /><CodeLine lineNumber="7166"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PAmts.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp; AAmts.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp; KAmts.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l07167" /><CodeLine lineNumber="7167"><Highlight kind="normal">           QAmts.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l07168" /><CodeLine lineNumber="7168"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;Expected matchUnaryPredicate to return one element for scalable &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07169" /><CodeLine lineNumber="7169"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;vectors&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l07170" /><CodeLine lineNumber="7170"><Highlight kind="normal">    PVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(VT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, PAmts&#91;0&#93;);</Highlight></CodeLine>
<Link id="l07171" /><CodeLine lineNumber="7171"><Highlight kind="normal">    AVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(VT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AAmts&#91;0&#93;);</Highlight></CodeLine>
<Link id="l07172" /><CodeLine lineNumber="7172"><Highlight kind="normal">    KVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(ShVT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, KAmts&#91;0&#93;);</Highlight></CodeLine>
<Link id="l07173" /><CodeLine lineNumber="7173"><Highlight kind="normal">    QVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8ab55d055af84ce8d884844d5171198e">getSplatVector</a>(VT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, QAmts&#91;0&#93;);</Highlight></CodeLine>
<Link id="l07174" /><CodeLine lineNumber="7174"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l07175" /><CodeLine lineNumber="7175"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantSDNode&gt;</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Expected a constant&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l07176" /><CodeLine lineNumber="7176"><Highlight kind="normal">    PVal = PAmts&#91;0&#93;;</Highlight></CodeLine>
<Link id="l07177" /><CodeLine lineNumber="7177"><Highlight kind="normal">    AVal = AAmts&#91;0&#93;;</Highlight></CodeLine>
<Link id="l07178" /><CodeLine lineNumber="7178"><Highlight kind="normal">    KVal = KAmts&#91;0&#93;;</Highlight></CodeLine>
<Link id="l07179" /><CodeLine lineNumber="7179"><Highlight kind="normal">    QVal = QAmts&#91;0&#93;;</Highlight></CodeLine>
<Link id="l07180" /><CodeLine lineNumber="7180"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07181" /><CodeLine lineNumber="7181"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07182" /><CodeLine lineNumber="7182"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (mul N, P)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07183" /><CodeLine lineNumber="7183"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, PVal);</Highlight></CodeLine>
<Link id="l07184" /><CodeLine lineNumber="7184"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Op0.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l07185" /><CodeLine lineNumber="7185"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07186" /><CodeLine lineNumber="7186"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NeedToApplyOffset) &#123;</Highlight></CodeLine>
<Link id="l07187" /><CodeLine lineNumber="7187"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We need ADD to do this.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07188" /><CodeLine lineNumber="7188"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DCI.isBeforeLegalizeOps() &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, VT))</Highlight></CodeLine>
<Link id="l07189" /><CodeLine lineNumber="7189"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l07190" /><CodeLine lineNumber="7190"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07191" /><CodeLine lineNumber="7191"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// (add (mul N, P), A)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07192" /><CodeLine lineNumber="7192"><Highlight kind="normal">    Op0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Op0, AVal);</Highlight></CodeLine>
<Link id="l07193" /><CodeLine lineNumber="7193"><Highlight kind="normal">    Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Op0.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l07194" /><CodeLine lineNumber="7194"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07195" /><CodeLine lineNumber="7195"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07196" /><CodeLine lineNumber="7196"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Rotate right only if any divisor was even. We avoid rotates for all-odd</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07197" /><CodeLine lineNumber="7197"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// divisors as a performance improvement, since rotating by 0 is a no-op.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07198" /><CodeLine lineNumber="7198"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (HadEvenDivisor) &#123;</Highlight></CodeLine>
<Link id="l07199" /><CodeLine lineNumber="7199"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We need ROTR to do this.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07200" /><CodeLine lineNumber="7200"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DCI.isBeforeLegalizeOps() &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a19cd524269b035941434cce28b585715">ISD::ROTR</a>, VT))</Highlight></CodeLine>
<Link id="l07201" /><CodeLine lineNumber="7201"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l07202" /><CodeLine lineNumber="7202"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// SREM: (rotr (add (mul N, P), A), K)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07203" /><CodeLine lineNumber="7203"><Highlight kind="normal">    Op0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a19cd524269b035941434cce28b585715">ISD::ROTR</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Op0, KVal);</Highlight></CodeLine>
<Link id="l07204" /><CodeLine lineNumber="7204"><Highlight kind="normal">    Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Op0.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l07205" /><CodeLine lineNumber="7205"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07206" /><CodeLine lineNumber="7206"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07207" /><CodeLine lineNumber="7207"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// SREM: (setule/setugt (rotr (add (mul N, P), A), K), Q)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07208" /><CodeLine lineNumber="7208"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Fold =</Highlight></CodeLine>
<Link id="l07209" /><CodeLine lineNumber="7209"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SETCCVT, Op0, QVal,</Highlight></CodeLine>
<Link id="l07210" /><CodeLine lineNumber="7210"><Highlight kind="normal">                   ((<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>) ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a>));</Highlight></CodeLine>
<Link id="l07211" /><CodeLine lineNumber="7211"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07212" /><CodeLine lineNumber="7212"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If we didn&#39;t have lanes with INT&#95;MIN divisor, then we&#39;re done.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07213" /><CodeLine lineNumber="7213"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!HadIntMinDivisor)</Highlight></CodeLine>
<Link id="l07214" /><CodeLine lineNumber="7214"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Fold;</Highlight></CodeLine>
<Link id="l07215" /><CodeLine lineNumber="7215"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07216" /><CodeLine lineNumber="7216"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// That fold is only valid for positive divisors. Which effectively means,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07217" /><CodeLine lineNumber="7217"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// it is invalid for INT&#95;MIN divisors. So if we have such a lane,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07218" /><CodeLine lineNumber="7218"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// we must fix-up results for said lanes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07219" /><CodeLine lineNumber="7219"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Can/should only get here for vectors.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l07220" /><CodeLine lineNumber="7220"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07221" /><CodeLine lineNumber="7221"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// NOTE: we avoid letting illegal types through even if we&#39;re before legalize</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07222" /><CodeLine lineNumber="7222"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ops – legalization has a hard time producing good code for the code that</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07223" /><CodeLine lineNumber="7223"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// follows.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07224" /><CodeLine lineNumber="7224"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0158ee47dfa868be5d28e2cbef70d5d0">ISD::SETCC</a>, SETCCVT) ||</Highlight></CodeLine>
<Link id="l07225" /><CodeLine lineNumber="7225"><Highlight kind="normal">      !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, VT) ||</Highlight></CodeLine>
<Link id="l07226" /><CodeLine lineNumber="7226"><Highlight kind="normal">      !<a href="/docs/api/classes/llvm/targetloweringbase/#aefa6619fc003e2d48cf16a23e0c81f8e">isCondCodeLegalOrCustom</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, VT.<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>()) ||</Highlight></CodeLine>
<Link id="l07227" /><CodeLine lineNumber="7227"><Highlight kind="normal">      !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0b7d2c769fd0fbaab3c4a2fc8e7ea0c">ISD::VSELECT</a>, SETCCVT))</Highlight></CodeLine>
<Link id="l07228" /><CodeLine lineNumber="7228"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l07229" /><CodeLine lineNumber="7229"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07230" /><CodeLine lineNumber="7230"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Fold.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l07231" /><CodeLine lineNumber="7231"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07232" /><CodeLine lineNumber="7232"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IntMin = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(</Highlight></CodeLine>
<Link id="l07233" /><CodeLine lineNumber="7233"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/apint/#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(SVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>()), <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT);</Highlight></CodeLine>
<Link id="l07234" /><CodeLine lineNumber="7234"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IntMax = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(</Highlight></CodeLine>
<Link id="l07235" /><CodeLine lineNumber="7235"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/apint/#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(SVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>()), <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT);</Highlight></CodeLine>
<Link id="l07236" /><CodeLine lineNumber="7236"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> =</Highlight></CodeLine>
<Link id="l07237" /><CodeLine lineNumber="7237"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(SVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>()), <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT);</Highlight></CodeLine>
<Link id="l07238" /><CodeLine lineNumber="7238"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07239" /><CodeLine lineNumber="7239"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Which lanes had INT&#95;MIN divisors? Divisor is constant, so const-folded.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07240" /><CodeLine lineNumber="7240"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> DivisorIsIntMin = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SETCCVT, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>, IntMin, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l07241" /><CodeLine lineNumber="7241"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DivisorIsIntMin.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l07242" /><CodeLine lineNumber="7242"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07243" /><CodeLine lineNumber="7243"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (N s% INT&#95;MIN) ==/!= 0  &lt;--&gt;  (N &amp; INT&#95;MAX) ==/!= 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07244" /><CodeLine lineNumber="7244"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a205029ee514828d0fb4988399ef3ece4a6864311f985d160ad4bd46a9fbe4a4d4">Masked</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, IntMax);</Highlight></CodeLine>
<Link id="l07245" /><CodeLine lineNumber="7245"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/namespaces/llvm/#a205029ee514828d0fb4988399ef3ece4a6864311f985d160ad4bd46a9fbe4a4d4">Masked</a>.getNode());</Highlight></CodeLine>
<Link id="l07246" /><CodeLine lineNumber="7246"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> MaskedIsZero = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SETCCVT, <a href="/docs/api/namespaces/llvm/#a205029ee514828d0fb4988399ef3ece4a6864311f985d160ad4bd46a9fbe4a4d4">Masked</a>, Zero, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>);</Highlight></CodeLine>
<Link id="l07247" /><CodeLine lineNumber="7247"><Highlight kind="normal">  Created.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(MaskedIsZero.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>());</Highlight></CodeLine>
<Link id="l07248" /><CodeLine lineNumber="7248"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07249" /><CodeLine lineNumber="7249"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// To produce final result we need to blend 2 vectors: &#39;SetCC&#39; and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07250" /><CodeLine lineNumber="7250"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// &#39;MaskedIsZero&#39;. If the divisor for channel was &#42;NOT&#42; INT&#95;MIN, we pick</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07251" /><CodeLine lineNumber="7251"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// from &#39;Fold&#39;, else pick from &#39;MaskedIsZero&#39;. Since &#39;DivisorIsIntMin&#39; is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07252" /><CodeLine lineNumber="7252"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// constant-folded, select can get lowered to a shuffle with constant mask.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07253" /><CodeLine lineNumber="7253"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Blended = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0b7d2c769fd0fbaab3c4a2fc8e7ea0c">ISD::VSELECT</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SETCCVT, DivisorIsIntMin,</Highlight></CodeLine>
<Link id="l07254" /><CodeLine lineNumber="7254"><Highlight kind="normal">                                MaskedIsZero, Fold);</Highlight></CodeLine>
<Link id="l07255" /><CodeLine lineNumber="7255"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07256" /><CodeLine lineNumber="7256"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Blended;</Highlight></CodeLine>
<Link id="l07257" /><CodeLine lineNumber="7257"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l07258" /><CodeLine lineNumber="7258"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07259" /><CodeLine lineNumber="7259"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a25df8af0900b4a664055a7ccba026531">TargetLowering::</a></Highlight></CodeLine>
<Link id="l07260" /><CodeLine lineNumber="7260"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#a25df8af0900b4a664055a7ccba026531">verifyReturnAddressArgumentIsConstant</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l07261" /><CodeLine lineNumber="7261"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0))) &#123;</Highlight></CodeLine>
<Link id="l07262" /><CodeLine lineNumber="7262"><Highlight kind="normal">    DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>()-&gt;<a href="/docs/api/classes/llvm/llvmcontext/#a4447dfc5ac5a8784a0a933a5be56bbf5">emitError</a>(</Highlight><Highlight kind="stringliteral">&quot;argument to &#39;&#95;&#95;builtin&#95;return&#95;address&#39; must &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07263" /><CodeLine lineNumber="7263"><Highlight kind="normal">                                </Highlight><Highlight kind="stringliteral">&quot;be a constant integer&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l07264" /><CodeLine lineNumber="7264"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07265" /><CodeLine lineNumber="7265"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07266" /><CodeLine lineNumber="7266"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07267" /><CodeLine lineNumber="7267"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07268" /><CodeLine lineNumber="7268"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l07269" /><CodeLine lineNumber="7269"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07270" /><CodeLine lineNumber="7270"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a89e60908750fd1cca69d96e7aa41ba5b">TargetLowering::getSqrtInputTest</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l07271" /><CodeLine lineNumber="7271"><Highlight kind="normal">                                         </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> DenormalMode &amp;<a href="/docs/api/files/lib/lib/codegen/regallocevictionadvisor-cpp/#aef71c4b21823f236e70cc6d62375adcd">Mode</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l07272" /><CodeLine lineNumber="7272"><Highlight kind="normal">  SDLoc <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l07273" /><CodeLine lineNumber="7273"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l07274" /><CodeLine lineNumber="7274"><Highlight kind="normal">  EVT CCVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l07275" /><CodeLine lineNumber="7275"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> FPZero = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(0.0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT);</Highlight></CodeLine>
<Link id="l07276" /><CodeLine lineNumber="7276"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07277" /><CodeLine lineNumber="7277"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This is specifically a check for the handling of denormal inputs, not the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07278" /><CodeLine lineNumber="7278"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// result.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07279" /><CodeLine lineNumber="7279"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/codegen/regallocevictionadvisor-cpp/#aef71c4b21823f236e70cc6d62375adcd">Mode</a>.Input == <a href="/docs/api/structs/llvm/denormalmode/#a29b26e3ae30f3f6ec4106ff181282893a40bc80ae1d362a1461703637e946cbd8">DenormalMode::PreserveSign</a> ||</Highlight></CodeLine>
<Link id="l07280" /><CodeLine lineNumber="7280"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/codegen/regallocevictionadvisor-cpp/#aef71c4b21823f236e70cc6d62375adcd">Mode</a>.Input == <a href="/docs/api/structs/llvm/denormalmode/#a29b26e3ae30f3f6ec4106ff181282893a7de61db082dcdc6e8d34d1c5fd2e9757">DenormalMode::PositiveZero</a>) &#123;</Highlight></CodeLine>
<Link id="l07281" /><CodeLine lineNumber="7281"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Test = X == 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07282" /><CodeLine lineNumber="7282"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CCVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, FPZero, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l07283" /><CodeLine lineNumber="7283"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07284" /><CodeLine lineNumber="7284"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07285" /><CodeLine lineNumber="7285"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Testing it with denormal inputs to avoid wrong estimate.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07286" /><CodeLine lineNumber="7286"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07287" /><CodeLine lineNumber="7287"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Test = fabs(X) &lt; SmallestNormal</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07288" /><CodeLine lineNumber="7288"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> fltSemantics &amp;FltSem = VT.<a href="/docs/api/structs/llvm/evt/#adf42d7b6a69dc15a64f841d51a9c93b7">getFltSemantics</a>();</Highlight></CodeLine>
<Link id="l07289" /><CodeLine lineNumber="7289"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/lltok/#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">APFloat</a> SmallestNorm = <a href="/docs/api/classes/llvm/apfloat/#a9c568ab8748aba5d37006d52618bbcfd">APFloat::getSmallestNormalized</a>(FltSem);</Highlight></CodeLine>
<Link id="l07290" /><CodeLine lineNumber="7290"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NormC = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(SmallestNorm, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT);</Highlight></CodeLine>
<Link id="l07291" /><CodeLine lineNumber="7291"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Fabs = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::FABS, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l07292" /><CodeLine lineNumber="7292"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CCVT, Fabs, NormC, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l07293" /><CodeLine lineNumber="7293"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l07294" /><CodeLine lineNumber="7294"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07295" /><CodeLine lineNumber="7295"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#aea3e575b3cff4eb444567d50959b929c">TargetLowering::getNegatedExpression</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l07296" /><CodeLine lineNumber="7296"><Highlight kind="normal">                                             </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> LegalOps, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> OptForSize,</Highlight></CodeLine>
<Link id="l07297" /><CodeLine lineNumber="7297"><Highlight kind="normal">                                             <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84">NegatibleCost</a> &amp;<a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a>,</Highlight></CodeLine>
<Link id="l07298" /><CodeLine lineNumber="7298"><Highlight kind="normal">                                             </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l07299" /><CodeLine lineNumber="7299"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// fneg is removable even if it has multiple uses.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07300" /><CodeLine lineNumber="7300"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == ISD::FNEG || <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == ISD::VP&#95;FNEG) &#123;</Highlight></CodeLine>
<Link id="l07301" /><CodeLine lineNumber="7301"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a> = <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84a4691542279fb918ac8c43619d77aefdf">NegatibleCost::Cheaper</a>;</Highlight></CodeLine>
<Link id="l07302" /><CodeLine lineNumber="7302"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l07303" /><CodeLine lineNumber="7303"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07304" /><CodeLine lineNumber="7304"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07305" /><CodeLine lineNumber="7305"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Don&#39;t recurse exponentially.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07306" /><CodeLine lineNumber="7306"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a> &gt; <a href="/docs/api/classes/llvm/selectiondag/#a4d5e16cbde22f5e6f007940d57a428fd">SelectionDAG::MaxRecursionDepth</a>)</Highlight></CodeLine>
<Link id="l07307" /><CodeLine lineNumber="7307"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l07308" /><CodeLine lineNumber="7308"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07309" /><CodeLine lineNumber="7309"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Pre-increment recursion depth for use in recursive calls.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07310" /><CodeLine lineNumber="7310"><Highlight kind="normal">  ++<a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>;</Highlight></CodeLine>
<Link id="l07311" /><CodeLine lineNumber="7311"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDNodeFlags <a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;getFlags();</Highlight></CodeLine>
<Link id="l07312" /><CodeLine lineNumber="7312"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> TargetOptions &amp;<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/logicalview/lib/debuginfo/logicalview/core/lvoptions-cpp/#ab4088b7a11f3cbc38ac16a6e9c72494e">Options</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#aa99670b16fe6d370e306896cd91b6fa6">getTarget</a>().<a href="/docs/api/classes/llvm/targetmachine/#ab1fb67187fc37e569cc5171cbebba873">Options</a>;</Highlight></CodeLine>
<Link id="l07313" /><CodeLine lineNumber="7313"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l07314" /><CodeLine lineNumber="7314"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opcode = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode();</Highlight></CodeLine>
<Link id="l07315" /><CodeLine lineNumber="7315"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07316" /><CodeLine lineNumber="7316"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Don&#39;t allow anything with multiple uses unless we know it is free.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07317" /><CodeLine lineNumber="7317"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.hasOneUse() &amp;&amp; Opcode != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1be4c8da7c68a4c683de1a98b5cc5b9d">ISD::ConstantFP</a>) &#123;</Highlight></CodeLine>
<Link id="l07318" /><CodeLine lineNumber="7318"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsFreeExtend = Opcode == ISD::FP&#95;EXTEND &amp;&amp;</Highlight></CodeLine>
<Link id="l07319" /><CodeLine lineNumber="7319"><Highlight kind="normal">                        <a href="/docs/api/classes/llvm/targetloweringbase/#a75b5f43626eca6f155a21f22e4a5acd0">isFPExtFree</a>(VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0).getValueType());</Highlight></CodeLine>
<Link id="l07320" /><CodeLine lineNumber="7320"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!IsFreeExtend)</Highlight></CodeLine>
<Link id="l07321" /><CodeLine lineNumber="7321"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l07322" /><CodeLine lineNumber="7322"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07323" /><CodeLine lineNumber="7323"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07324" /><CodeLine lineNumber="7324"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> RemoveDeadNode = &#91;&amp;&#93;(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &#123;</Highlight></CodeLine>
<Link id="l07325" /><CodeLine lineNumber="7325"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> &amp;&amp; <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>.getNode()-&gt;use&#95;empty())</Highlight></CodeLine>
<Link id="l07326" /><CodeLine lineNumber="7326"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a935ace76cef67c6da10cf0633371efe1">RemoveDeadNode</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>.getNode());</Highlight></CodeLine>
<Link id="l07327" /><CodeLine lineNumber="7327"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l07328" /><CodeLine lineNumber="7328"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07329" /><CodeLine lineNumber="7329"><Highlight kind="normal">  SDLoc <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l07330" /><CodeLine lineNumber="7330"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07331" /><CodeLine lineNumber="7331"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Because getNegatedExpression can delete nodes we need a handle to keep</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07332" /><CodeLine lineNumber="7332"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// temporary nodes alive in case the recursion manages to create an identical</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07333" /><CodeLine lineNumber="7333"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// node.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07334" /><CodeLine lineNumber="7334"><Highlight kind="normal">  std::list&lt;HandleSDNode&gt; Handles;</Highlight></CodeLine>
<Link id="l07335" /><CodeLine lineNumber="7335"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07336" /><CodeLine lineNumber="7336"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (Opcode) &#123;</Highlight></CodeLine>
<Link id="l07337" /><CodeLine lineNumber="7337"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1be4c8da7c68a4c683de1a98b5cc5b9d">ISD::ConstantFP</a>: &#123;</Highlight></CodeLine>
<Link id="l07338" /><CodeLine lineNumber="7338"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Don&#39;t invert constant FP values after legalization unless the target says</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07339" /><CodeLine lineNumber="7339"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the negated constant is legal.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07340" /><CodeLine lineNumber="7340"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsOpLegal =</Highlight></CodeLine>
<Link id="l07341" /><CodeLine lineNumber="7341"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1be4c8da7c68a4c683de1a98b5cc5b9d">ISD::ConstantFP</a>, VT) ||</Highlight></CodeLine>
<Link id="l07342" /><CodeLine lineNumber="7342"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#a4e3b2ed6083b7fea6eab416afa82783b">isFPImmLegal</a>(<a href="/docs/api/namespaces/llvm/#ad137f00752c91478230b01c851768605">neg</a>(<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantFPSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>)-&gt;getValueAPF()), VT,</Highlight></CodeLine>
<Link id="l07343" /><CodeLine lineNumber="7343"><Highlight kind="normal">                     OptForSize);</Highlight></CodeLine>
<Link id="l07344" /><CodeLine lineNumber="7344"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07345" /><CodeLine lineNumber="7345"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LegalOps &amp;&amp; !IsOpLegal)</Highlight></CodeLine>
<Link id="l07346" /><CodeLine lineNumber="7346"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07347" /><CodeLine lineNumber="7347"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07348" /><CodeLine lineNumber="7348"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/lltok/#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">APFloat</a> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a> = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantFPSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>)-&gt;getValueAPF();</Highlight></CodeLine>
<Link id="l07349" /><CodeLine lineNumber="7349"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>.changeSign();</Highlight></CodeLine>
<Link id="l07350" /><CodeLine lineNumber="7350"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> CFP = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(V, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT);</Highlight></CodeLine>
<Link id="l07351" /><CodeLine lineNumber="7351"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07352" /><CodeLine lineNumber="7352"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we already have the use of the negated floating constant, it is free</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07353" /><CodeLine lineNumber="7353"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// to negate it even it has multiple uses.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07354" /><CodeLine lineNumber="7354"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.hasOneUse() &amp;&amp; CFP.<a href="/docs/api/classes/llvm/sdvalue/#aadec518817d351d77d1badd66cf96fc3">use&#95;empty</a>())</Highlight></CodeLine>
<Link id="l07355" /><CodeLine lineNumber="7355"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07356" /><CodeLine lineNumber="7356"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a> = <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84ae9bb5320b3890b6747c91b5a71ae5a01">NegatibleCost::Neutral</a>;</Highlight></CodeLine>
<Link id="l07357" /><CodeLine lineNumber="7357"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> CFP;</Highlight></CodeLine>
<Link id="l07358" /><CodeLine lineNumber="7358"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07359" /><CodeLine lineNumber="7359"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aff6f73b624fecca7dbe94259f9437e32">ISD::BUILD&#95;VECTOR</a>: &#123;</Highlight></CodeLine>
<Link id="l07360" /><CodeLine lineNumber="7360"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Only permit BUILD&#95;VECTOR of constants.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07361" /><CodeLine lineNumber="7361"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a61d13d6824ec46c31260a4fd0997eda0">llvm::any&#95;of</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;op&#95;values(), &#91;&amp;&#93;(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &#123;</Highlight></CodeLine>
<Link id="l07362" /><CodeLine lineNumber="7362"><Highlight kind="normal">          return !N.isUndef() &amp;&amp; !isa&lt;ConstantFPSDNode&gt;(N);</Highlight></CodeLine>
<Link id="l07363" /><CodeLine lineNumber="7363"><Highlight kind="normal">        &#125;))</Highlight></CodeLine>
<Link id="l07364" /><CodeLine lineNumber="7364"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07365" /><CodeLine lineNumber="7365"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07366" /><CodeLine lineNumber="7366"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsOpLegal =</Highlight></CodeLine>
<Link id="l07367" /><CodeLine lineNumber="7367"><Highlight kind="normal">        (<a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1be4c8da7c68a4c683de1a98b5cc5b9d">ISD::ConstantFP</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l07368" /><CodeLine lineNumber="7368"><Highlight kind="normal">         <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aff6f73b624fecca7dbe94259f9437e32">ISD::BUILD&#95;VECTOR</a>, VT)) ||</Highlight></CodeLine>
<Link id="l07369" /><CodeLine lineNumber="7369"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all&#95;of</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;op&#95;values(), &#91;&amp;&#93;(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>) &#123;</Highlight></CodeLine>
<Link id="l07370" /><CodeLine lineNumber="7370"><Highlight kind="normal">          return N.isUndef() ||</Highlight></CodeLine>
<Link id="l07371" /><CodeLine lineNumber="7371"><Highlight kind="normal">                 isFPImmLegal(neg(cast&lt;ConstantFPSDNode&gt;(N)-&gt;getValueAPF()), VT,</Highlight></CodeLine>
<Link id="l07372" /><CodeLine lineNumber="7372"><Highlight kind="normal">                              OptForSize);</Highlight></CodeLine>
<Link id="l07373" /><CodeLine lineNumber="7373"><Highlight kind="normal">        &#125;);</Highlight></CodeLine>
<Link id="l07374" /><CodeLine lineNumber="7374"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07375" /><CodeLine lineNumber="7375"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LegalOps &amp;&amp; !IsOpLegal)</Highlight></CodeLine>
<Link id="l07376" /><CodeLine lineNumber="7376"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07377" /><CodeLine lineNumber="7377"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07378" /><CodeLine lineNumber="7378"><Highlight kind="normal">    SmallVector&lt;SDValue, 4&gt; <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>;</Highlight></CodeLine>
<Link id="l07379" /><CodeLine lineNumber="7379"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> : <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;op&#95;values()) &#123;</Highlight></CodeLine>
<Link id="l07380" /><CodeLine lineNumber="7380"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>.isUndef()) &#123;</Highlight></CodeLine>
<Link id="l07381" /><CodeLine lineNumber="7381"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</Highlight></CodeLine>
<Link id="l07382" /><CodeLine lineNumber="7382"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07383" /><CodeLine lineNumber="7383"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l07384" /><CodeLine lineNumber="7384"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/lltok/#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">APFloat</a> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a> = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantFPSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>)-&gt;getValueAPF();</Highlight></CodeLine>
<Link id="l07385" /><CodeLine lineNumber="7385"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>.changeSign();</Highlight></CodeLine>
<Link id="l07386" /><CodeLine lineNumber="7386"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(V, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>.getValueType()));</Highlight></CodeLine>
<Link id="l07387" /><CodeLine lineNumber="7387"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07388" /><CodeLine lineNumber="7388"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a> = <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84ae9bb5320b3890b6747c91b5a71ae5a01">NegatibleCost::Neutral</a>;</Highlight></CodeLine>
<Link id="l07389" /><CodeLine lineNumber="7389"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(VT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>);</Highlight></CodeLine>
<Link id="l07390" /><CodeLine lineNumber="7390"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07391" /><CodeLine lineNumber="7391"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a32ec12017722f5b42a295fe5eb0b0bdf">ISD::FADD</a>: &#123;</Highlight></CodeLine>
<Link id="l07392" /><CodeLine lineNumber="7392"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/logicalview/lib/debuginfo/logicalview/core/lvoptions-cpp/#ab4088b7a11f3cbc38ac16a6e9c72494e">Options</a>.NoSignedZerosFPMath &amp;&amp; !<a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.hasNoSignedZeros())</Highlight></CodeLine>
<Link id="l07393" /><CodeLine lineNumber="7393"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07394" /><CodeLine lineNumber="7394"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07395" /><CodeLine lineNumber="7395"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// After operation legalization, it might not be legal to create new FSUBs.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07396" /><CodeLine lineNumber="7396"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LegalOps &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2852a5b6baa80b1589a46737210a8cad">ISD::FSUB</a>, VT))</Highlight></CodeLine>
<Link id="l07397" /><CodeLine lineNumber="7397"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07398" /><CodeLine lineNumber="7398"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l07399" /><CodeLine lineNumber="7399"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07400" /><CodeLine lineNumber="7400"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fold (fneg (fadd X, Y)) -&gt; (fsub (fneg X), Y)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07401" /><CodeLine lineNumber="7401"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84">NegatibleCost</a> CostX = <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84a920c5f62b372ce8ed1056422a02c356a">NegatibleCost::Expensive</a>;</Highlight></CodeLine>
<Link id="l07402" /><CodeLine lineNumber="7402"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NegX =</Highlight></CodeLine>
<Link id="l07403" /><CodeLine lineNumber="7403"><Highlight kind="normal">        getNegatedExpression(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, DAG, LegalOps, OptForSize, CostX, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l07404" /><CodeLine lineNumber="7404"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Prevent this node from being deleted by the next call.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07405" /><CodeLine lineNumber="7405"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NegX)</Highlight></CodeLine>
<Link id="l07406" /><CodeLine lineNumber="7406"><Highlight kind="normal">      Handles.emplace&#95;back(NegX);</Highlight></CodeLine>
<Link id="l07407" /><CodeLine lineNumber="7407"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07408" /><CodeLine lineNumber="7408"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fold (fneg (fadd X, Y)) -&gt; (fsub (fneg Y), X)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07409" /><CodeLine lineNumber="7409"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84">NegatibleCost</a> CostY = <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84a920c5f62b372ce8ed1056422a02c356a">NegatibleCost::Expensive</a>;</Highlight></CodeLine>
<Link id="l07410" /><CodeLine lineNumber="7410"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NegY =</Highlight></CodeLine>
<Link id="l07411" /><CodeLine lineNumber="7411"><Highlight kind="normal">        getNegatedExpression(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, DAG, LegalOps, OptForSize, CostY, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l07412" /><CodeLine lineNumber="7412"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07413" /><CodeLine lineNumber="7413"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We&#39;re done with the handles.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07414" /><CodeLine lineNumber="7414"><Highlight kind="normal">    Handles.clear();</Highlight></CodeLine>
<Link id="l07415" /><CodeLine lineNumber="7415"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07416" /><CodeLine lineNumber="7416"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Negate the X if its cost is less or equal than Y.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07417" /><CodeLine lineNumber="7417"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NegX &amp;&amp; (CostX &lt;= CostY)) &#123;</Highlight></CodeLine>
<Link id="l07418" /><CodeLine lineNumber="7418"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a> = CostX;</Highlight></CodeLine>
<Link id="l07419" /><CodeLine lineNumber="7419"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2852a5b6baa80b1589a46737210a8cad">ISD::FSUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, NegX, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, Flags);</Highlight></CodeLine>
<Link id="l07420" /><CodeLine lineNumber="7420"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NegY != <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)</Highlight></CodeLine>
<Link id="l07421" /><CodeLine lineNumber="7421"><Highlight kind="normal">        RemoveDeadNode(NegY);</Highlight></CodeLine>
<Link id="l07422" /><CodeLine lineNumber="7422"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>;</Highlight></CodeLine>
<Link id="l07423" /><CodeLine lineNumber="7423"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07424" /><CodeLine lineNumber="7424"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07425" /><CodeLine lineNumber="7425"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Negate the Y if it is not expensive.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07426" /><CodeLine lineNumber="7426"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NegY) &#123;</Highlight></CodeLine>
<Link id="l07427" /><CodeLine lineNumber="7427"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a> = CostY;</Highlight></CodeLine>
<Link id="l07428" /><CodeLine lineNumber="7428"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2852a5b6baa80b1589a46737210a8cad">ISD::FSUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, NegY, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, Flags);</Highlight></CodeLine>
<Link id="l07429" /><CodeLine lineNumber="7429"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NegX != <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)</Highlight></CodeLine>
<Link id="l07430" /><CodeLine lineNumber="7430"><Highlight kind="normal">        RemoveDeadNode(NegX);</Highlight></CodeLine>
<Link id="l07431" /><CodeLine lineNumber="7431"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>;</Highlight></CodeLine>
<Link id="l07432" /><CodeLine lineNumber="7432"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07433" /><CodeLine lineNumber="7433"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07434" /><CodeLine lineNumber="7434"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07435" /><CodeLine lineNumber="7435"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2852a5b6baa80b1589a46737210a8cad">ISD::FSUB</a>: &#123;</Highlight></CodeLine>
<Link id="l07436" /><CodeLine lineNumber="7436"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We can&#39;t turn -(A-B) into B-A when we honor signed zeros.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07437" /><CodeLine lineNumber="7437"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/logicalview/lib/debuginfo/logicalview/core/lvoptions-cpp/#ab4088b7a11f3cbc38ac16a6e9c72494e">Options</a>.NoSignedZerosFPMath &amp;&amp; !<a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.hasNoSignedZeros())</Highlight></CodeLine>
<Link id="l07438" /><CodeLine lineNumber="7438"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07439" /><CodeLine lineNumber="7439"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07440" /><CodeLine lineNumber="7440"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l07441" /><CodeLine lineNumber="7441"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fold (fneg (fsub 0, Y)) -&gt; Y</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07442" /><CodeLine lineNumber="7442"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ConstantFPSDNode &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/namespaces/llvm/#a516614c2855a763aa9eef67c6da888e0">isConstOrConstSplatFP</a>(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, </Highlight><Highlight kind="comment">/&#42;AllowUndefs&#42;/</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">))</Highlight></CodeLine>
<Link id="l07443" /><CodeLine lineNumber="7443"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;isZero()) &#123;</Highlight></CodeLine>
<Link id="l07444" /><CodeLine lineNumber="7444"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a> = <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84a4691542279fb918ac8c43619d77aefdf">NegatibleCost::Cheaper</a>;</Highlight></CodeLine>
<Link id="l07445" /><CodeLine lineNumber="7445"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>;</Highlight></CodeLine>
<Link id="l07446" /><CodeLine lineNumber="7446"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l07447" /><CodeLine lineNumber="7447"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07448" /><CodeLine lineNumber="7448"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fold (fneg (fsub X, Y)) -&gt; (fsub Y, X)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07449" /><CodeLine lineNumber="7449"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a> = <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84ae9bb5320b3890b6747c91b5a71ae5a01">NegatibleCost::Neutral</a>;</Highlight></CodeLine>
<Link id="l07450" /><CodeLine lineNumber="7450"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2852a5b6baa80b1589a46737210a8cad">ISD::FSUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, Flags);</Highlight></CodeLine>
<Link id="l07451" /><CodeLine lineNumber="7451"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07452" /><CodeLine lineNumber="7452"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9ab5860c97a00c4627a08cab7b0c8178">ISD::FMUL</a>:</Highlight></CodeLine>
<Link id="l07453" /><CodeLine lineNumber="7453"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110abc6c09c7af98236460f0b020eb3be94e">ISD::FDIV</a>: &#123;</Highlight></CodeLine>
<Link id="l07454" /><CodeLine lineNumber="7454"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l07455" /><CodeLine lineNumber="7455"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07456" /><CodeLine lineNumber="7456"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fold (fneg (fmul X, Y)) -&gt; (fmul (fneg X), Y)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07457" /><CodeLine lineNumber="7457"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84">NegatibleCost</a> CostX = <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84a920c5f62b372ce8ed1056422a02c356a">NegatibleCost::Expensive</a>;</Highlight></CodeLine>
<Link id="l07458" /><CodeLine lineNumber="7458"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NegX =</Highlight></CodeLine>
<Link id="l07459" /><CodeLine lineNumber="7459"><Highlight kind="normal">        getNegatedExpression(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, DAG, LegalOps, OptForSize, CostX, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l07460" /><CodeLine lineNumber="7460"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Prevent this node from being deleted by the next call.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07461" /><CodeLine lineNumber="7461"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NegX)</Highlight></CodeLine>
<Link id="l07462" /><CodeLine lineNumber="7462"><Highlight kind="normal">      Handles.emplace&#95;back(NegX);</Highlight></CodeLine>
<Link id="l07463" /><CodeLine lineNumber="7463"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07464" /><CodeLine lineNumber="7464"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fold (fneg (fmul X, Y)) -&gt; (fmul X, (fneg Y))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07465" /><CodeLine lineNumber="7465"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84">NegatibleCost</a> CostY = <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84a920c5f62b372ce8ed1056422a02c356a">NegatibleCost::Expensive</a>;</Highlight></CodeLine>
<Link id="l07466" /><CodeLine lineNumber="7466"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NegY =</Highlight></CodeLine>
<Link id="l07467" /><CodeLine lineNumber="7467"><Highlight kind="normal">        getNegatedExpression(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, DAG, LegalOps, OptForSize, CostY, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l07468" /><CodeLine lineNumber="7468"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07469" /><CodeLine lineNumber="7469"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We&#39;re done with the handles.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07470" /><CodeLine lineNumber="7470"><Highlight kind="normal">    Handles.clear();</Highlight></CodeLine>
<Link id="l07471" /><CodeLine lineNumber="7471"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07472" /><CodeLine lineNumber="7472"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Negate the X if its cost is less or equal than Y.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07473" /><CodeLine lineNumber="7473"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NegX &amp;&amp; (CostX &lt;= CostY)) &#123;</Highlight></CodeLine>
<Link id="l07474" /><CodeLine lineNumber="7474"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a> = CostX;</Highlight></CodeLine>
<Link id="l07475" /><CodeLine lineNumber="7475"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(Opcode, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, NegX, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, Flags);</Highlight></CodeLine>
<Link id="l07476" /><CodeLine lineNumber="7476"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NegY != <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)</Highlight></CodeLine>
<Link id="l07477" /><CodeLine lineNumber="7477"><Highlight kind="normal">        RemoveDeadNode(NegY);</Highlight></CodeLine>
<Link id="l07478" /><CodeLine lineNumber="7478"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>;</Highlight></CodeLine>
<Link id="l07479" /><CodeLine lineNumber="7479"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07480" /><CodeLine lineNumber="7480"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07481" /><CodeLine lineNumber="7481"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Ignore X &#42; 2 because that is expected to be canonicalized to X + X.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07482" /><CodeLine lineNumber="7482"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/namespaces/llvm/#a516614c2855a763aa9eef67c6da888e0">isConstOrConstSplatFP</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1)))</Highlight></CodeLine>
<Link id="l07483" /><CodeLine lineNumber="7483"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;isExactlyValue(2.0) &amp;&amp; <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9ab5860c97a00c4627a08cab7b0c8178">ISD::FMUL</a>)</Highlight></CodeLine>
<Link id="l07484" /><CodeLine lineNumber="7484"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07485" /><CodeLine lineNumber="7485"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07486" /><CodeLine lineNumber="7486"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Negate the Y if it is not expensive.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07487" /><CodeLine lineNumber="7487"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NegY) &#123;</Highlight></CodeLine>
<Link id="l07488" /><CodeLine lineNumber="7488"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a> = CostY;</Highlight></CodeLine>
<Link id="l07489" /><CodeLine lineNumber="7489"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(Opcode, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, NegY, Flags);</Highlight></CodeLine>
<Link id="l07490" /><CodeLine lineNumber="7490"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NegX != <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)</Highlight></CodeLine>
<Link id="l07491" /><CodeLine lineNumber="7491"><Highlight kind="normal">        RemoveDeadNode(NegX);</Highlight></CodeLine>
<Link id="l07492" /><CodeLine lineNumber="7492"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>;</Highlight></CodeLine>
<Link id="l07493" /><CodeLine lineNumber="7493"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07494" /><CodeLine lineNumber="7494"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07495" /><CodeLine lineNumber="7495"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07496" /><CodeLine lineNumber="7496"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a293ca68b3b2ce80eef991de822822254">ISD::FMA</a>:</Highlight></CodeLine>
<Link id="l07497" /><CodeLine lineNumber="7497"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2415bea72c995bb9cf9f85bbbf90bcd7">ISD::FMAD</a>: &#123;</Highlight></CodeLine>
<Link id="l07498" /><CodeLine lineNumber="7498"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/logicalview/lib/debuginfo/logicalview/core/lvoptions-cpp/#ab4088b7a11f3cbc38ac16a6e9c72494e">Options</a>.NoSignedZerosFPMath &amp;&amp; !<a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.hasNoSignedZeros())</Highlight></CodeLine>
<Link id="l07499" /><CodeLine lineNumber="7499"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07500" /><CodeLine lineNumber="7500"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07501" /><CodeLine lineNumber="7501"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1), <a href="/docs/api/namespaces/llvm/arccc/#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(2);</Highlight></CodeLine>
<Link id="l07502" /><CodeLine lineNumber="7502"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84">NegatibleCost</a> CostZ = <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84a920c5f62b372ce8ed1056422a02c356a">NegatibleCost::Expensive</a>;</Highlight></CodeLine>
<Link id="l07503" /><CodeLine lineNumber="7503"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NegZ =</Highlight></CodeLine>
<Link id="l07504" /><CodeLine lineNumber="7504"><Highlight kind="normal">        getNegatedExpression(Z, DAG, LegalOps, OptForSize, CostZ, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l07505" /><CodeLine lineNumber="7505"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Give up if fail to negate the Z.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07506" /><CodeLine lineNumber="7506"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!NegZ)</Highlight></CodeLine>
<Link id="l07507" /><CodeLine lineNumber="7507"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07508" /><CodeLine lineNumber="7508"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07509" /><CodeLine lineNumber="7509"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Prevent this node from being deleted by the next two calls.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07510" /><CodeLine lineNumber="7510"><Highlight kind="normal">    Handles.emplace&#95;back(NegZ);</Highlight></CodeLine>
<Link id="l07511" /><CodeLine lineNumber="7511"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07512" /><CodeLine lineNumber="7512"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fold (fneg (fma X, Y, Z)) -&gt; (fma (fneg X), Y, (fneg Z))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07513" /><CodeLine lineNumber="7513"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84">NegatibleCost</a> CostX = <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84a920c5f62b372ce8ed1056422a02c356a">NegatibleCost::Expensive</a>;</Highlight></CodeLine>
<Link id="l07514" /><CodeLine lineNumber="7514"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NegX =</Highlight></CodeLine>
<Link id="l07515" /><CodeLine lineNumber="7515"><Highlight kind="normal">        getNegatedExpression(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, DAG, LegalOps, OptForSize, CostX, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l07516" /><CodeLine lineNumber="7516"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Prevent this node from being deleted by the next call.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07517" /><CodeLine lineNumber="7517"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NegX)</Highlight></CodeLine>
<Link id="l07518" /><CodeLine lineNumber="7518"><Highlight kind="normal">      Handles.emplace&#95;back(NegX);</Highlight></CodeLine>
<Link id="l07519" /><CodeLine lineNumber="7519"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07520" /><CodeLine lineNumber="7520"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fold (fneg (fma X, Y, Z)) -&gt; (fma X, (fneg Y), (fneg Z))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07521" /><CodeLine lineNumber="7521"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84">NegatibleCost</a> CostY = <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84a920c5f62b372ce8ed1056422a02c356a">NegatibleCost::Expensive</a>;</Highlight></CodeLine>
<Link id="l07522" /><CodeLine lineNumber="7522"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NegY =</Highlight></CodeLine>
<Link id="l07523" /><CodeLine lineNumber="7523"><Highlight kind="normal">        getNegatedExpression(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, DAG, LegalOps, OptForSize, CostY, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l07524" /><CodeLine lineNumber="7524"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07525" /><CodeLine lineNumber="7525"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We&#39;re done with the handles.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07526" /><CodeLine lineNumber="7526"><Highlight kind="normal">    Handles.clear();</Highlight></CodeLine>
<Link id="l07527" /><CodeLine lineNumber="7527"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07528" /><CodeLine lineNumber="7528"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Negate the X if its cost is less or equal than Y.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07529" /><CodeLine lineNumber="7529"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NegX &amp;&amp; (CostX &lt;= CostY)) &#123;</Highlight></CodeLine>
<Link id="l07530" /><CodeLine lineNumber="7530"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a> = std::min(CostX, CostZ);</Highlight></CodeLine>
<Link id="l07531" /><CodeLine lineNumber="7531"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(Opcode, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, NegX, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, NegZ, Flags);</Highlight></CodeLine>
<Link id="l07532" /><CodeLine lineNumber="7532"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NegY != <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)</Highlight></CodeLine>
<Link id="l07533" /><CodeLine lineNumber="7533"><Highlight kind="normal">        RemoveDeadNode(NegY);</Highlight></CodeLine>
<Link id="l07534" /><CodeLine lineNumber="7534"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>;</Highlight></CodeLine>
<Link id="l07535" /><CodeLine lineNumber="7535"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07536" /><CodeLine lineNumber="7536"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07537" /><CodeLine lineNumber="7537"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Negate the Y if it is not expensive.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07538" /><CodeLine lineNumber="7538"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NegY) &#123;</Highlight></CodeLine>
<Link id="l07539" /><CodeLine lineNumber="7539"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a> = std::min(CostY, CostZ);</Highlight></CodeLine>
<Link id="l07540" /><CodeLine lineNumber="7540"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(Opcode, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, NegY, NegZ, Flags);</Highlight></CodeLine>
<Link id="l07541" /><CodeLine lineNumber="7541"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NegX != <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)</Highlight></CodeLine>
<Link id="l07542" /><CodeLine lineNumber="7542"><Highlight kind="normal">        RemoveDeadNode(NegX);</Highlight></CodeLine>
<Link id="l07543" /><CodeLine lineNumber="7543"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>;</Highlight></CodeLine>
<Link id="l07544" /><CodeLine lineNumber="7544"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07545" /><CodeLine lineNumber="7545"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07546" /><CodeLine lineNumber="7546"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07547" /><CodeLine lineNumber="7547"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07548" /><CodeLine lineNumber="7548"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> ISD::FP&#95;EXTEND:</Highlight></CodeLine>
<Link id="l07549" /><CodeLine lineNumber="7549"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> ISD::FSIN:</Highlight></CodeLine>
<Link id="l07550" /><CodeLine lineNumber="7550"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NegV = getNegatedExpression(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), DAG, LegalOps,</Highlight></CodeLine>
<Link id="l07551" /><CodeLine lineNumber="7551"><Highlight kind="normal">                                            OptForSize, <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a>, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>))</Highlight></CodeLine>
<Link id="l07552" /><CodeLine lineNumber="7552"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(Opcode, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, NegV);</Highlight></CodeLine>
<Link id="l07553" /><CodeLine lineNumber="7553"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07554" /><CodeLine lineNumber="7554"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110adaf9a3cb5c2ef5eb713bd6bf4ae23aeb">ISD::FP&#95;ROUND</a>:</Highlight></CodeLine>
<Link id="l07555" /><CodeLine lineNumber="7555"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NegV = getNegatedExpression(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), DAG, LegalOps,</Highlight></CodeLine>
<Link id="l07556" /><CodeLine lineNumber="7556"><Highlight kind="normal">                                            OptForSize, <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a>, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>))</Highlight></CodeLine>
<Link id="l07557" /><CodeLine lineNumber="7557"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110adaf9a3cb5c2ef5eb713bd6bf4ae23aeb">ISD::FP&#95;ROUND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, NegV, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1));</Highlight></CodeLine>
<Link id="l07558" /><CodeLine lineNumber="7558"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07559" /><CodeLine lineNumber="7559"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a78d0f198115bfe3331ab7cfcf7a40a97">ISD::SELECT</a>:</Highlight></CodeLine>
<Link id="l07560" /><CodeLine lineNumber="7560"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0b7d2c769fd0fbaab3c4a2fc8e7ea0c">ISD::VSELECT</a>: &#123;</Highlight></CodeLine>
<Link id="l07561" /><CodeLine lineNumber="7561"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fold (fneg (select C, LHS, RHS)) -&gt; (select C, (fneg LHS), (fneg RHS))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07562" /><CodeLine lineNumber="7562"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// iff at least one cost is cheaper and the other is neutral/cheaper</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07563" /><CodeLine lineNumber="7563"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l07564" /><CodeLine lineNumber="7564"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84">NegatibleCost</a> CostLHS = <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84a920c5f62b372ce8ed1056422a02c356a">NegatibleCost::Expensive</a>;</Highlight></CodeLine>
<Link id="l07565" /><CodeLine lineNumber="7565"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NegLHS =</Highlight></CodeLine>
<Link id="l07566" /><CodeLine lineNumber="7566"><Highlight kind="normal">        getNegatedExpression(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, DAG, LegalOps, OptForSize, CostLHS, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l07567" /><CodeLine lineNumber="7567"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!NegLHS || CostLHS &gt; <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84ae9bb5320b3890b6747c91b5a71ae5a01">NegatibleCost::Neutral</a>) &#123;</Highlight></CodeLine>
<Link id="l07568" /><CodeLine lineNumber="7568"><Highlight kind="normal">      RemoveDeadNode(NegLHS);</Highlight></CodeLine>
<Link id="l07569" /><CodeLine lineNumber="7569"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07570" /><CodeLine lineNumber="7570"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07571" /><CodeLine lineNumber="7571"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07572" /><CodeLine lineNumber="7572"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Prevent this node from being deleted by the next call.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07573" /><CodeLine lineNumber="7573"><Highlight kind="normal">    Handles.emplace&#95;back(NegLHS);</Highlight></CodeLine>
<Link id="l07574" /><CodeLine lineNumber="7574"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07575" /><CodeLine lineNumber="7575"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(2);</Highlight></CodeLine>
<Link id="l07576" /><CodeLine lineNumber="7576"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84">NegatibleCost</a> CostRHS = <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84a920c5f62b372ce8ed1056422a02c356a">NegatibleCost::Expensive</a>;</Highlight></CodeLine>
<Link id="l07577" /><CodeLine lineNumber="7577"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NegRHS =</Highlight></CodeLine>
<Link id="l07578" /><CodeLine lineNumber="7578"><Highlight kind="normal">        getNegatedExpression(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, DAG, LegalOps, OptForSize, CostRHS, <a href="/docs/api/namespaces/llvm/#a1eb5609345b906d024fbf9e4bc1adc06afe578efb7ca235af77fb0eef7edcf639">Depth</a>);</Highlight></CodeLine>
<Link id="l07579" /><CodeLine lineNumber="7579"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07580" /><CodeLine lineNumber="7580"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We&#39;re done with the handles.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07581" /><CodeLine lineNumber="7581"><Highlight kind="normal">    Handles.clear();</Highlight></CodeLine>
<Link id="l07582" /><CodeLine lineNumber="7582"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07583" /><CodeLine lineNumber="7583"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!NegRHS || CostRHS &gt; <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84ae9bb5320b3890b6747c91b5a71ae5a01">NegatibleCost::Neutral</a> ||</Highlight></CodeLine>
<Link id="l07584" /><CodeLine lineNumber="7584"><Highlight kind="normal">        (CostLHS != <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84a4691542279fb918ac8c43619d77aefdf">NegatibleCost::Cheaper</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l07585" /><CodeLine lineNumber="7585"><Highlight kind="normal">         CostRHS != <a href="/docs/api/classes/llvm/targetloweringbase/#ad717707a2df4226d0388460e87c8cd84a4691542279fb918ac8c43619d77aefdf">NegatibleCost::Cheaper</a>)) &#123;</Highlight></CodeLine>
<Link id="l07586" /><CodeLine lineNumber="7586"><Highlight kind="normal">      RemoveDeadNode(NegLHS);</Highlight></CodeLine>
<Link id="l07587" /><CodeLine lineNumber="7587"><Highlight kind="normal">      RemoveDeadNode(NegRHS);</Highlight></CodeLine>
<Link id="l07588" /><CodeLine lineNumber="7588"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07589" /><CodeLine lineNumber="7589"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07590" /><CodeLine lineNumber="7590"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07591" /><CodeLine lineNumber="7591"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a> = std::min(CostLHS, CostRHS);</Highlight></CodeLine>
<Link id="l07592" /><CodeLine lineNumber="7592"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0), NegLHS, NegRHS);</Highlight></CodeLine>
<Link id="l07593" /><CodeLine lineNumber="7593"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07594" /><CodeLine lineNumber="7594"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07595" /><CodeLine lineNumber="7595"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07596" /><CodeLine lineNumber="7596"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l07597" /><CodeLine lineNumber="7597"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l07598" /><CodeLine lineNumber="7598"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07599" /><CodeLine lineNumber="7599"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07600" /><CodeLine lineNumber="7600"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Legalization Utilities</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07601" /><CodeLine lineNumber="7601"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07602" /><CodeLine lineNumber="7602"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07603" /><CodeLine lineNumber="7603"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#ac7581f7a7740ac3c1dc73fd7aeeccc63">TargetLowering::expandMUL&#95;LOHI</a>(</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opcode, EVT VT, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;dl,</Highlight></CodeLine>
<Link id="l07604" /><CodeLine lineNumber="7604"><Highlight kind="normal">                                    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</Highlight></CodeLine>
<Link id="l07605" /><CodeLine lineNumber="7605"><Highlight kind="normal">                                    SmallVectorImpl&lt;SDValue&gt; &amp;Result,</Highlight></CodeLine>
<Link id="l07606" /><CodeLine lineNumber="7606"><Highlight kind="normal">                                    EVT HiLoVT, SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l07607" /><CodeLine lineNumber="7607"><Highlight kind="normal">                                    <a href="/docs/api/classes/llvm/targetloweringbase/#aff813db965c76a7e0f64c426cded6534">MulExpansionKind</a> Kind, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LL,</Highlight></CodeLine>
<Link id="l07608" /><CodeLine lineNumber="7608"><Highlight kind="normal">                                    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LH, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> RL, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> RH)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l07609" /><CodeLine lineNumber="7609"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a> || Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a79c959df09509d7ff66d9b04bc40d18d">ISD::UMUL&#95;LOHI</a> ||</Highlight></CodeLine>
<Link id="l07610" /><CodeLine lineNumber="7610"><Highlight kind="normal">         Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1354c6f8508d6cd697dc89a5d9a52dfd">ISD::SMUL&#95;LOHI</a>);</Highlight></CodeLine>
<Link id="l07611" /><CodeLine lineNumber="7611"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07612" /><CodeLine lineNumber="7612"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> HasMULHS = (<a href="/docs/api/namespaces/llvm/lltok/#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> == <a href="/docs/api/classes/llvm/targetloweringbase/#aff813db965c76a7e0f64c426cded6534a68eec46437c384d8dad18d5464ebc35c">MulExpansionKind::Always</a>) ||</Highlight></CodeLine>
<Link id="l07613" /><CodeLine lineNumber="7613"><Highlight kind="normal">                  <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aa2a7c3eccf06b41e4275bbeadb46d22e">ISD::MULHS</a>, HiLoVT);</Highlight></CodeLine>
<Link id="l07614" /><CodeLine lineNumber="7614"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> HasMULHU = (<a href="/docs/api/namespaces/llvm/lltok/#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> == <a href="/docs/api/classes/llvm/targetloweringbase/#aff813db965c76a7e0f64c426cded6534a68eec46437c384d8dad18d5464ebc35c">MulExpansionKind::Always</a>) ||</Highlight></CodeLine>
<Link id="l07615" /><CodeLine lineNumber="7615"><Highlight kind="normal">                  <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8a80d3b085af08f0dce1724207ef99b5">ISD::MULHU</a>, HiLoVT);</Highlight></CodeLine>
<Link id="l07616" /><CodeLine lineNumber="7616"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> HasSMUL&#95;LOHI = (<a href="/docs/api/namespaces/llvm/lltok/#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> == <a href="/docs/api/classes/llvm/targetloweringbase/#aff813db965c76a7e0f64c426cded6534a68eec46437c384d8dad18d5464ebc35c">MulExpansionKind::Always</a>) ||</Highlight></CodeLine>
<Link id="l07617" /><CodeLine lineNumber="7617"><Highlight kind="normal">                      <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1354c6f8508d6cd697dc89a5d9a52dfd">ISD::SMUL&#95;LOHI</a>, HiLoVT);</Highlight></CodeLine>
<Link id="l07618" /><CodeLine lineNumber="7618"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> HasUMUL&#95;LOHI = (<a href="/docs/api/namespaces/llvm/lltok/#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> == <a href="/docs/api/classes/llvm/targetloweringbase/#aff813db965c76a7e0f64c426cded6534a68eec46437c384d8dad18d5464ebc35c">MulExpansionKind::Always</a>) ||</Highlight></CodeLine>
<Link id="l07619" /><CodeLine lineNumber="7619"><Highlight kind="normal">                      <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a79c959df09509d7ff66d9b04bc40d18d">ISD::UMUL&#95;LOHI</a>, HiLoVT);</Highlight></CodeLine>
<Link id="l07620" /><CodeLine lineNumber="7620"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07621" /><CodeLine lineNumber="7621"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!HasMULHU &amp;&amp; !HasMULHS &amp;&amp; !HasUMUL&#95;LOHI &amp;&amp; !HasSMUL&#95;LOHI)</Highlight></CodeLine>
<Link id="l07622" /><CodeLine lineNumber="7622"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07623" /><CodeLine lineNumber="7623"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07624" /><CodeLine lineNumber="7624"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> OuterBitSize = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l07625" /><CodeLine lineNumber="7625"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> InnerBitSize = HiLoVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l07626" /><CodeLine lineNumber="7626"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07627" /><CodeLine lineNumber="7627"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// LL, LH, RL, and RH must be either all NULL or all set to a value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07628" /><CodeLine lineNumber="7628"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((LL.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>() &amp;&amp; LH.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>() &amp;&amp; RL.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>() &amp;&amp; RH.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>()) ||</Highlight></CodeLine>
<Link id="l07629" /><CodeLine lineNumber="7629"><Highlight kind="normal">         (!LL.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>() &amp;&amp; !LH.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>() &amp;&amp; !RL.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>() &amp;&amp; !RH.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>()));</Highlight></CodeLine>
<Link id="l07630" /><CodeLine lineNumber="7630"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07631" /><CodeLine lineNumber="7631"><Highlight kind="normal">  SDVTList VTs = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(HiLoVT, HiLoVT);</Highlight></CodeLine>
<Link id="l07632" /><CodeLine lineNumber="7632"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> MakeMUL&#95;LOHI = &#91;&amp;&#93;(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ead20caec3b48a1eef164cb4ca81ba2587">L</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>,</Highlight></CodeLine>
<Link id="l07633" /><CodeLine lineNumber="7633"><Highlight kind="normal">                          </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>) -&gt; </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l07634" /><CodeLine lineNumber="7634"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> &amp;&amp; HasSMUL&#95;LOHI) || (!<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> &amp;&amp; HasUMUL&#95;LOHI)) &#123;</Highlight></CodeLine>
<Link id="l07635" /><CodeLine lineNumber="7635"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1354c6f8508d6cd697dc89a5d9a52dfd">ISD::SMUL&#95;LOHI</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a79c959df09509d7ff66d9b04bc40d18d">ISD::UMUL&#95;LOHI</a>, dl, VTs, L, R);</Highlight></CodeLine>
<Link id="l07636" /><CodeLine lineNumber="7636"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>.getNode(), 1);</Highlight></CodeLine>
<Link id="l07637" /><CodeLine lineNumber="7637"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07638" /><CodeLine lineNumber="7638"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07639" /><CodeLine lineNumber="7639"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> &amp;&amp; HasMULHS) || (!<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> &amp;&amp; HasMULHU)) &#123;</Highlight></CodeLine>
<Link id="l07640" /><CodeLine lineNumber="7640"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, HiLoVT, L, R);</Highlight></CodeLine>
<Link id="l07641" /><CodeLine lineNumber="7641"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aa2a7c3eccf06b41e4275bbeadb46d22e">ISD::MULHS</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8a80d3b085af08f0dce1724207ef99b5">ISD::MULHU</a>, dl, HiLoVT, L, R);</Highlight></CodeLine>
<Link id="l07642" /><CodeLine lineNumber="7642"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07643" /><CodeLine lineNumber="7643"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07644" /><CodeLine lineNumber="7644"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07645" /><CodeLine lineNumber="7645"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l07646" /><CodeLine lineNumber="7646"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07647" /><CodeLine lineNumber="7647"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>;</Highlight></CodeLine>
<Link id="l07648" /><CodeLine lineNumber="7648"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07649" /><CodeLine lineNumber="7649"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!LL.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>() &amp;&amp; !RL.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l07650" /><CodeLine lineNumber="7650"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, HiLoVT)) &#123;</Highlight></CodeLine>
<Link id="l07651" /><CodeLine lineNumber="7651"><Highlight kind="normal">    LL = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, HiLoVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</Highlight></CodeLine>
<Link id="l07652" /><CodeLine lineNumber="7652"><Highlight kind="normal">    RL = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, HiLoVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l07653" /><CodeLine lineNumber="7653"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07654" /><CodeLine lineNumber="7654"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07655" /><CodeLine lineNumber="7655"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!LL.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>())</Highlight></CodeLine>
<Link id="l07656" /><CodeLine lineNumber="7656"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07657" /><CodeLine lineNumber="7657"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07658" /><CodeLine lineNumber="7658"><Highlight kind="normal">  APInt HighMask = <a href="/docs/api/classes/llvm/apint/#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(OuterBitSize, InnerBitSize);</Highlight></CodeLine>
<Link id="l07659" /><CodeLine lineNumber="7659"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad5386f4196a9eab5701c451469f2e20e">MaskedValueIsZero</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, HighMask) &amp;&amp;</Highlight></CodeLine>
<Link id="l07660" /><CodeLine lineNumber="7660"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad5386f4196a9eab5701c451469f2e20e">MaskedValueIsZero</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, HighMask)) &#123;</Highlight></CodeLine>
<Link id="l07661" /><CodeLine lineNumber="7661"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The inputs are both zero-extended.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07662" /><CodeLine lineNumber="7662"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (MakeMUL&#95;LOHI(LL, RL, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">)) &#123;</Highlight></CodeLine>
<Link id="l07663" /><CodeLine lineNumber="7663"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.push&#95;back(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>);</Highlight></CodeLine>
<Link id="l07664" /><CodeLine lineNumber="7664"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.push&#95;back(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>);</Highlight></CodeLine>
<Link id="l07665" /><CodeLine lineNumber="7665"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opcode != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>) &#123;</Highlight></CodeLine>
<Link id="l07666" /><CodeLine lineNumber="7666"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, HiLoVT);</Highlight></CodeLine>
<Link id="l07667" /><CodeLine lineNumber="7667"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.push&#95;back(Zero);</Highlight></CodeLine>
<Link id="l07668" /><CodeLine lineNumber="7668"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.push&#95;back(Zero);</Highlight></CodeLine>
<Link id="l07669" /><CodeLine lineNumber="7669"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l07670" /><CodeLine lineNumber="7670"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07671" /><CodeLine lineNumber="7671"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07672" /><CodeLine lineNumber="7672"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07673" /><CodeLine lineNumber="7673"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07674" /><CodeLine lineNumber="7674"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l07675" /><CodeLine lineNumber="7675"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a0a2081911053ceb07370842200df3e7c">ComputeMaxSignificantBits</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) &lt;= InnerBitSize &amp;&amp;</Highlight></CodeLine>
<Link id="l07676" /><CodeLine lineNumber="7676"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a0a2081911053ceb07370842200df3e7c">ComputeMaxSignificantBits</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) &lt;= InnerBitSize) &#123;</Highlight></CodeLine>
<Link id="l07677" /><CodeLine lineNumber="7677"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The input values are both sign-extended.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07678" /><CodeLine lineNumber="7678"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO non-MUL case?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07679" /><CodeLine lineNumber="7679"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (MakeMUL&#95;LOHI(LL, RL, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">)) &#123;</Highlight></CodeLine>
<Link id="l07680" /><CodeLine lineNumber="7680"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.push&#95;back(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>);</Highlight></CodeLine>
<Link id="l07681" /><CodeLine lineNumber="7681"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.push&#95;back(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>);</Highlight></CodeLine>
<Link id="l07682" /><CodeLine lineNumber="7682"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07683" /><CodeLine lineNumber="7683"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07684" /><CodeLine lineNumber="7684"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07685" /><CodeLine lineNumber="7685"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07686" /><CodeLine lineNumber="7686"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShiftAmount = OuterBitSize - InnerBitSize;</Highlight></CodeLine>
<Link id="l07687" /><CodeLine lineNumber="7687"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Shift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(ShiftAmount, VT, dl);</Highlight></CodeLine>
<Link id="l07688" /><CodeLine lineNumber="7688"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07689" /><CodeLine lineNumber="7689"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!LH.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>() &amp;&amp; !RH.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l07690" /><CodeLine lineNumber="7690"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l07691" /><CodeLine lineNumber="7691"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, HiLoVT)) &#123;</Highlight></CodeLine>
<Link id="l07692" /><CodeLine lineNumber="7692"><Highlight kind="normal">    LH = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Shift);</Highlight></CodeLine>
<Link id="l07693" /><CodeLine lineNumber="7693"><Highlight kind="normal">    LH = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, HiLoVT, LH);</Highlight></CodeLine>
<Link id="l07694" /><CodeLine lineNumber="7694"><Highlight kind="normal">    RH = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Shift);</Highlight></CodeLine>
<Link id="l07695" /><CodeLine lineNumber="7695"><Highlight kind="normal">    RH = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, HiLoVT, RH);</Highlight></CodeLine>
<Link id="l07696" /><CodeLine lineNumber="7696"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07697" /><CodeLine lineNumber="7697"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07698" /><CodeLine lineNumber="7698"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!LH.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>())</Highlight></CodeLine>
<Link id="l07699" /><CodeLine lineNumber="7699"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07700" /><CodeLine lineNumber="7700"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07701" /><CodeLine lineNumber="7701"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!MakeMUL&#95;LOHI(LL, RL, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">))</Highlight></CodeLine>
<Link id="l07702" /><CodeLine lineNumber="7702"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07703" /><CodeLine lineNumber="7703"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07704" /><CodeLine lineNumber="7704"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.push&#95;back(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>);</Highlight></CodeLine>
<Link id="l07705" /><CodeLine lineNumber="7705"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07706" /><CodeLine lineNumber="7706"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>) &#123;</Highlight></CodeLine>
<Link id="l07707" /><CodeLine lineNumber="7707"><Highlight kind="normal">    RH = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, HiLoVT, LL, RH);</Highlight></CodeLine>
<Link id="l07708" /><CodeLine lineNumber="7708"><Highlight kind="normal">    LH = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, HiLoVT, LH, RL);</Highlight></CodeLine>
<Link id="l07709" /><CodeLine lineNumber="7709"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, HiLoVT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, RH);</Highlight></CodeLine>
<Link id="l07710" /><CodeLine lineNumber="7710"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, HiLoVT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, LH);</Highlight></CodeLine>
<Link id="l07711" /><CodeLine lineNumber="7711"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.push&#95;back(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>);</Highlight></CodeLine>
<Link id="l07712" /><CodeLine lineNumber="7712"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07713" /><CodeLine lineNumber="7713"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07714" /><CodeLine lineNumber="7714"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07715" /><CodeLine lineNumber="7715"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Compute the full width result.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07716" /><CodeLine lineNumber="7716"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/r600clausemergepass-cpp/#aba99928790de45fa7aa12b47fbd828ff">Merge</a> = &#91;&amp;&#93;(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>) -&gt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &#123;</Highlight></CodeLine>
<Link id="l07717" /><CodeLine lineNumber="7717"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>);</Highlight></CodeLine>
<Link id="l07718" /><CodeLine lineNumber="7718"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>);</Highlight></CodeLine>
<Link id="l07719" /><CodeLine lineNumber="7719"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, Shift);</Highlight></CodeLine>
<Link id="l07720" /><CodeLine lineNumber="7720"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>);</Highlight></CodeLine>
<Link id="l07721" /><CodeLine lineNumber="7721"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l07722" /><CodeLine lineNumber="7722"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07723" /><CodeLine lineNumber="7723"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>);</Highlight></CodeLine>
<Link id="l07724" /><CodeLine lineNumber="7724"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!MakeMUL&#95;LOHI(LL, RH, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">))</Highlight></CodeLine>
<Link id="l07725" /><CodeLine lineNumber="7725"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07726" /><CodeLine lineNumber="7726"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07727" /><CodeLine lineNumber="7727"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This is effectively the add part of a multiply-add of half-sized operands,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07728" /><CodeLine lineNumber="7728"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// so it cannot overflow.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07729" /><CodeLine lineNumber="7729"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>, <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/r600clausemergepass-cpp/#aba99928790de45fa7aa12b47fbd828ff">Merge</a>(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>));</Highlight></CodeLine>
<Link id="l07730" /><CodeLine lineNumber="7730"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07731" /><CodeLine lineNumber="7731"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!MakeMUL&#95;LOHI(LH, RL, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">))</Highlight></CodeLine>
<Link id="l07732" /><CodeLine lineNumber="7732"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07733" /><CodeLine lineNumber="7733"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07734" /><CodeLine lineNumber="7734"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, HiLoVT);</Highlight></CodeLine>
<Link id="l07735" /><CodeLine lineNumber="7735"><Highlight kind="normal">  EVT BoolType = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l07736" /><CodeLine lineNumber="7736"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07737" /><CodeLine lineNumber="7737"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseGlue = (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a20084f62caecb0db80ad71bdabda73c2">ISD::ADDC</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l07738" /><CodeLine lineNumber="7738"><Highlight kind="normal">                  <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad116e32876f2275acf60ffb1651c9256">ISD::ADDE</a>, VT));</Highlight></CodeLine>
<Link id="l07739" /><CodeLine lineNumber="7739"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UseGlue)</Highlight></CodeLine>
<Link id="l07740" /><CodeLine lineNumber="7740"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a20084f62caecb0db80ad71bdabda73c2">ISD::ADDC</a>, dl, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(VT, MVT::Glue), <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>,</Highlight></CodeLine>
<Link id="l07741" /><CodeLine lineNumber="7741"><Highlight kind="normal">                       <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/r600clausemergepass-cpp/#aba99928790de45fa7aa12b47fbd828ff">Merge</a>(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>));</Highlight></CodeLine>
<Link id="l07742" /><CodeLine lineNumber="7742"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07743" /><CodeLine lineNumber="7743"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0f1e3ed26108fec69eb97209c0e39bf">ISD::UADDO&#95;CARRY</a>, dl, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(VT, BoolType), <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>,</Highlight></CodeLine>
<Link id="l07744" /><CodeLine lineNumber="7744"><Highlight kind="normal">                       <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/r600clausemergepass-cpp/#aba99928790de45fa7aa12b47fbd828ff">Merge</a>(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>), DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, BoolType));</Highlight></CodeLine>
<Link id="l07745" /><CodeLine lineNumber="7745"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07746" /><CodeLine lineNumber="7746"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Carry = <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>.getValue(1);</Highlight></CodeLine>
<Link id="l07747" /><CodeLine lineNumber="7747"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.push&#95;back(DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, HiLoVT, <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>));</Highlight></CodeLine>
<Link id="l07748" /><CodeLine lineNumber="7748"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>, Shift);</Highlight></CodeLine>
<Link id="l07749" /><CodeLine lineNumber="7749"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07750" /><CodeLine lineNumber="7750"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!MakeMUL&#95;LOHI(LH, RH, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1354c6f8508d6cd697dc89a5d9a52dfd">ISD::SMUL&#95;LOHI</a>))</Highlight></CodeLine>
<Link id="l07751" /><CodeLine lineNumber="7751"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07752" /><CodeLine lineNumber="7752"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07753" /><CodeLine lineNumber="7753"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UseGlue)</Highlight></CodeLine>
<Link id="l07754" /><CodeLine lineNumber="7754"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad116e32876f2275acf60ffb1651c9256">ISD::ADDE</a>, dl, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(HiLoVT, MVT::Glue), <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, Zero,</Highlight></CodeLine>
<Link id="l07755" /><CodeLine lineNumber="7755"><Highlight kind="normal">                     Carry);</Highlight></CodeLine>
<Link id="l07756" /><CodeLine lineNumber="7756"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07757" /><CodeLine lineNumber="7757"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0f1e3ed26108fec69eb97209c0e39bf">ISD::UADDO&#95;CARRY</a>, dl, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(HiLoVT, BoolType), <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>,</Highlight></CodeLine>
<Link id="l07758" /><CodeLine lineNumber="7758"><Highlight kind="normal">                     Zero, Carry);</Highlight></CodeLine>
<Link id="l07759" /><CodeLine lineNumber="7759"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07760" /><CodeLine lineNumber="7760"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>, <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/r600clausemergepass-cpp/#aba99928790de45fa7aa12b47fbd828ff">Merge</a>(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>));</Highlight></CodeLine>
<Link id="l07761" /><CodeLine lineNumber="7761"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07762" /><CodeLine lineNumber="7762"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1354c6f8508d6cd697dc89a5d9a52dfd">ISD::SMUL&#95;LOHI</a>) &#123;</Highlight></CodeLine>
<Link id="l07763" /><CodeLine lineNumber="7763"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NextSub = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>,</Highlight></CodeLine>
<Link id="l07764" /><CodeLine lineNumber="7764"><Highlight kind="normal">                                  DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, dl, VT, RL));</Highlight></CodeLine>
<Link id="l07765" /><CodeLine lineNumber="7765"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab30ac12d744d55e5d9d8795b1ce53433">getSelectCC</a>(dl, LH, Zero, NextSub, <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l07766" /><CodeLine lineNumber="7766"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07767" /><CodeLine lineNumber="7767"><Highlight kind="normal">    NextSub = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>,</Highlight></CodeLine>
<Link id="l07768" /><CodeLine lineNumber="7768"><Highlight kind="normal">                          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, dl, VT, LL));</Highlight></CodeLine>
<Link id="l07769" /><CodeLine lineNumber="7769"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab30ac12d744d55e5d9d8795b1ce53433">getSelectCC</a>(dl, RH, Zero, NextSub, <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l07770" /><CodeLine lineNumber="7770"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07771" /><CodeLine lineNumber="7771"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07772" /><CodeLine lineNumber="7772"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.push&#95;back(DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, HiLoVT, <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>));</Highlight></CodeLine>
<Link id="l07773" /><CodeLine lineNumber="7773"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>, Shift);</Highlight></CodeLine>
<Link id="l07774" /><CodeLine lineNumber="7774"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.push&#95;back(DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, HiLoVT, <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>));</Highlight></CodeLine>
<Link id="l07775" /><CodeLine lineNumber="7775"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07776" /><CodeLine lineNumber="7776"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l07777" /><CodeLine lineNumber="7777"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07778" /><CodeLine lineNumber="7778"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#ab707d083b764fa474237a76bc4b05694">TargetLowering::expandMUL</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, EVT HiLoVT,</Highlight></CodeLine>
<Link id="l07779" /><CodeLine lineNumber="7779"><Highlight kind="normal">                               SelectionDAG &amp;DAG, <a href="/docs/api/classes/llvm/targetloweringbase/#aff813db965c76a7e0f64c426cded6534">MulExpansionKind</a> Kind,</Highlight></CodeLine>
<Link id="l07780" /><CodeLine lineNumber="7780"><Highlight kind="normal">                               <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LL, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LH, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> RL,</Highlight></CodeLine>
<Link id="l07781" /><CodeLine lineNumber="7781"><Highlight kind="normal">                               <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> RH)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l07782" /><CodeLine lineNumber="7782"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDValue, 2&gt;</a> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</Highlight></CodeLine>
<Link id="l07783" /><CodeLine lineNumber="7783"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Ok = expandMUL&#95;LOHI(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOpcode(), <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0), SDLoc(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>),</Highlight></CodeLine>
<Link id="l07784" /><CodeLine lineNumber="7784"><Highlight kind="normal">                           <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0), <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(1), Result, HiLoVT,</Highlight></CodeLine>
<Link id="l07785" /><CodeLine lineNumber="7785"><Highlight kind="normal">                           DAG, Kind, LL, LH, RL, RH);</Highlight></CodeLine>
<Link id="l07786" /><CodeLine lineNumber="7786"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Ok) &#123;</Highlight></CodeLine>
<Link id="l07787" /><CodeLine lineNumber="7787"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.size() == 2);</Highlight></CodeLine>
<Link id="l07788" /><CodeLine lineNumber="7788"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>&#91;0&#93;;</Highlight></CodeLine>
<Link id="l07789" /><CodeLine lineNumber="7789"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>&#91;1&#93;;</Highlight></CodeLine>
<Link id="l07790" /><CodeLine lineNumber="7790"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07791" /><CodeLine lineNumber="7791"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Ok;</Highlight></CodeLine>
<Link id="l07792" /><CodeLine lineNumber="7792"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l07793" /><CodeLine lineNumber="7793"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07794" /><CodeLine lineNumber="7794"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Optimize unsigned division or remainder by constants for types twice as large</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07795" /><CodeLine lineNumber="7795"><Highlight kind="normal"></Highlight><Highlight kind="comment">// as a legal VT.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07796" /><CodeLine lineNumber="7796"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07797" /><CodeLine lineNumber="7797"><Highlight kind="normal"></Highlight><Highlight kind="comment">// If (1 &lt;&lt; (BitWidth / 2)) % Constant == 1, then the remainder</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07798" /><CodeLine lineNumber="7798"><Highlight kind="normal"></Highlight><Highlight kind="comment">// can be computed</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07799" /><CodeLine lineNumber="7799"><Highlight kind="normal"></Highlight><Highlight kind="comment">// as:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07800" /><CodeLine lineNumber="7800"><Highlight kind="normal"></Highlight><Highlight kind="comment">//   Sum += &#95;&#95;builtin&#95;uadd&#95;overflow(Lo, High, &amp;Sum);</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07801" /><CodeLine lineNumber="7801"><Highlight kind="normal"></Highlight><Highlight kind="comment">//   Remainder = Sum % Constant</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07802" /><CodeLine lineNumber="7802"><Highlight kind="normal"></Highlight><Highlight kind="comment">// This is based on &quot;Remainder by Summing Digits&quot; from Hacker&#39;s Delight.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07803" /><CodeLine lineNumber="7803"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07804" /><CodeLine lineNumber="7804"><Highlight kind="normal"></Highlight><Highlight kind="comment">// For division, we can compute the remainder using the algorithm described</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07805" /><CodeLine lineNumber="7805"><Highlight kind="normal"></Highlight><Highlight kind="comment">// above, subtract it from the dividend to get an exact multiple of Constant.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07806" /><CodeLine lineNumber="7806"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Then multiply that exact multiply by the multiplicative inverse modulo</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07807" /><CodeLine lineNumber="7807"><Highlight kind="normal"></Highlight><Highlight kind="comment">// (1 &lt;&lt; (BitWidth / 2)) to get the quotient.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07808" /><CodeLine lineNumber="7808"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07809" /><CodeLine lineNumber="7809"><Highlight kind="normal"></Highlight><Highlight kind="comment">// If Constant is even, we can shift right the dividend and the divisor by the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07810" /><CodeLine lineNumber="7810"><Highlight kind="normal"></Highlight><Highlight kind="comment">// number of trailing zeros in Constant before applying the remainder algorithm.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07811" /><CodeLine lineNumber="7811"><Highlight kind="normal"></Highlight><Highlight kind="comment">// If we&#39;re after the quotient, we can subtract this value from the shifted</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07812" /><CodeLine lineNumber="7812"><Highlight kind="normal"></Highlight><Highlight kind="comment">// dividend and multiply by the multiplicative inverse of the shifted divisor.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07813" /><CodeLine lineNumber="7813"><Highlight kind="normal"></Highlight><Highlight kind="comment">// If we want the remainder, we shift the value left by the number of trailing</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07814" /><CodeLine lineNumber="7814"><Highlight kind="normal"></Highlight><Highlight kind="comment">// zeros and add the bits that were shifted out of the dividend.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07815" /><CodeLine lineNumber="7815"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#abddef937939ecbe4cff930c60b055176">TargetLowering::expandDIVREMByConstant</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>,</Highlight></CodeLine>
<Link id="l07816" /><CodeLine lineNumber="7816"><Highlight kind="normal">                                            SmallVectorImpl&lt;SDValue&gt; &amp;Result,</Highlight></CodeLine>
<Link id="l07817" /><CodeLine lineNumber="7817"><Highlight kind="normal">                                            EVT HiLoVT, SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l07818" /><CodeLine lineNumber="7818"><Highlight kind="normal">                                            <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LL, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LH)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l07819" /><CodeLine lineNumber="7819"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opcode = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOpcode();</Highlight></CodeLine>
<Link id="l07820" /><CodeLine lineNumber="7820"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l07821" /><CodeLine lineNumber="7821"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07822" /><CodeLine lineNumber="7822"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: Support signed division/remainder.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07823" /><CodeLine lineNumber="7823"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a124ba0f5b2887879212c74a68bc230a3">ISD::SREM</a> || Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1f61c2422057e10403b2f6003543c300">ISD::SDIV</a> || Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3a874f66e1efe5be79552bbe7ee3121a">ISD::SDIVREM</a>)</Highlight></CodeLine>
<Link id="l07824" /><CodeLine lineNumber="7824"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07825" /><CodeLine lineNumber="7825"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</Highlight></CodeLine>
<Link id="l07826" /><CodeLine lineNumber="7826"><Highlight kind="normal">      (Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad1657dbc1957901a6d9cd224efbc0f28">ISD::UREM</a> || Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a15637879021fa7d5226045c0668a99a8">ISD::UDIV</a> || Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3a257ffa49107e2db978e8a6e2688ada">ISD::UDIVREM</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l07827" /><CodeLine lineNumber="7827"><Highlight kind="normal">      </Highlight><Highlight kind="stringliteral">&quot;Unexpected opcode&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l07828" /><CodeLine lineNumber="7828"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07829" /><CodeLine lineNumber="7829"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;CN = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(1));</Highlight></CodeLine>
<Link id="l07830" /><CodeLine lineNumber="7830"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!CN)</Highlight></CodeLine>
<Link id="l07831" /><CodeLine lineNumber="7831"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07832" /><CodeLine lineNumber="7832"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07833" /><CodeLine lineNumber="7833"><Highlight kind="normal">  APInt Divisor = CN-&gt;<a href="/docs/api/classes/llvm/constantsdnode/#a74b17cf9d0ee8268a5b38bbb896a30ba">getAPIntValue</a>();</Highlight></CodeLine>
<Link id="l07834" /><CodeLine lineNumber="7834"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = Divisor.<a href="/docs/api/classes/llvm/apint/#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>();</Highlight></CodeLine>
<Link id="l07835" /><CodeLine lineNumber="7835"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> HBitWidth = <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> / 2;</Highlight></CodeLine>
<Link id="l07836" /><CodeLine lineNumber="7836"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>() == <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l07837" /><CodeLine lineNumber="7837"><Highlight kind="normal">         HiLoVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>() == HBitWidth &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Unexpected VTs&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l07838" /><CodeLine lineNumber="7838"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07839" /><CodeLine lineNumber="7839"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Divisor needs to less than (1 &lt;&lt; HBitWidth).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07840" /><CodeLine lineNumber="7840"><Highlight kind="normal">  APInt HalfMaxPlus1 = <a href="/docs/api/classes/llvm/apint/#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, HBitWidth);</Highlight></CodeLine>
<Link id="l07841" /><CodeLine lineNumber="7841"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Divisor.<a href="/docs/api/classes/llvm/apint/#af4b1ccc0b78f9da9f3f3944e06007f1d">uge</a>(HalfMaxPlus1))</Highlight></CodeLine>
<Link id="l07842" /><CodeLine lineNumber="7842"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07843" /><CodeLine lineNumber="7843"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07844" /><CodeLine lineNumber="7844"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We depend on the UREM by constant optimization in DAGCombiner that requires</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07845" /><CodeLine lineNumber="7845"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// high multiply.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07846" /><CodeLine lineNumber="7846"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8a80d3b085af08f0dce1724207ef99b5">ISD::MULHU</a>, HiLoVT) &amp;&amp;</Highlight></CodeLine>
<Link id="l07847" /><CodeLine lineNumber="7847"><Highlight kind="normal">      !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a79c959df09509d7ff66d9b04bc40d18d">ISD::UMUL&#95;LOHI</a>, HiLoVT))</Highlight></CodeLine>
<Link id="l07848" /><CodeLine lineNumber="7848"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07849" /><CodeLine lineNumber="7849"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07850" /><CodeLine lineNumber="7850"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Don&#39;t expand if optimizing for size.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07851" /><CodeLine lineNumber="7851"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DAG.<a href="/docs/api/classes/llvm/selectiondag/#a47baccab6f8c3355a61bb4f70b2fc352">shouldOptForSize</a>())</Highlight></CodeLine>
<Link id="l07852" /><CodeLine lineNumber="7852"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07853" /><CodeLine lineNumber="7853"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07854" /><CodeLine lineNumber="7854"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Early out for 0 or 1 divisors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07855" /><CodeLine lineNumber="7855"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Divisor.<a href="/docs/api/classes/llvm/apint/#aca14d9ec64ba4ab7fb2cef37c57d9ce4">ule</a>(1))</Highlight></CodeLine>
<Link id="l07856" /><CodeLine lineNumber="7856"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07857" /><CodeLine lineNumber="7857"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07858" /><CodeLine lineNumber="7858"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the divisor is even, shift it until it becomes odd.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07859" /><CodeLine lineNumber="7859"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> TrailingZeros = 0;</Highlight></CodeLine>
<Link id="l07860" /><CodeLine lineNumber="7860"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Divisor&#91;0&#93;) &#123;</Highlight></CodeLine>
<Link id="l07861" /><CodeLine lineNumber="7861"><Highlight kind="normal">    TrailingZeros = Divisor.<a href="/docs/api/classes/llvm/apint/#a83c7c9008ba213687483b60a658b4a13">countr&#95;zero</a>();</Highlight></CodeLine>
<Link id="l07862" /><CodeLine lineNumber="7862"><Highlight kind="normal">    Divisor.<a href="/docs/api/classes/llvm/apint/#af338e23a90c301183968435e80cd6a27">lshrInPlace</a>(TrailingZeros);</Highlight></CodeLine>
<Link id="l07863" /><CodeLine lineNumber="7863"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07864" /><CodeLine lineNumber="7864"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07865" /><CodeLine lineNumber="7865"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l07866" /><CodeLine lineNumber="7866"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Sum;</Highlight></CodeLine>
<Link id="l07867" /><CodeLine lineNumber="7867"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> PartialRem;</Highlight></CodeLine>
<Link id="l07868" /><CodeLine lineNumber="7868"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07869" /><CodeLine lineNumber="7869"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If (1 &lt;&lt; HBitWidth) % divisor == 1, we can add the two halves together and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07870" /><CodeLine lineNumber="7870"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// then add in the carry.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07871" /><CodeLine lineNumber="7871"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: If we can&#39;t split it in half, we might be able to split into 3 or</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07872" /><CodeLine lineNumber="7872"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// more pieces using a smaller bit width.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07873" /><CodeLine lineNumber="7873"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (HalfMaxPlus1.<a href="/docs/api/classes/llvm/apint/#a4e3a2187cacdec76028617a403c47d89">urem</a>(Divisor).<a href="/docs/api/classes/llvm/apint/#aea5f26deda5ef97e02f6afc57c0c3920">isOne</a>()) &#123;</Highlight></CodeLine>
<Link id="l07874" /><CodeLine lineNumber="7874"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!LL == !LH &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Expected both input halves or no input halves!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l07875" /><CodeLine lineNumber="7875"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!LL)</Highlight></CodeLine>
<Link id="l07876" /><CodeLine lineNumber="7876"><Highlight kind="normal">      std::tie(LL, LH) = DAG.<a href="/docs/api/classes/llvm/selectiondag/#af587fdddecfd87186f09f4b1e9b4bc0a">SplitScalar</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0), dl, HiLoVT, HiLoVT);</Highlight></CodeLine>
<Link id="l07877" /><CodeLine lineNumber="7877"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07878" /><CodeLine lineNumber="7878"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Shift the input by the number of TrailingZeros in the divisor. The</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07879" /><CodeLine lineNumber="7879"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// shifted out bits will be added to the remainder later.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07880" /><CodeLine lineNumber="7880"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TrailingZeros) &#123;</Highlight></CodeLine>
<Link id="l07881" /><CodeLine lineNumber="7881"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Save the shifted off bits if we need the remainder.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07882" /><CodeLine lineNumber="7882"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opcode != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a15637879021fa7d5226045c0668a99a8">ISD::UDIV</a>) &#123;</Highlight></CodeLine>
<Link id="l07883" /><CodeLine lineNumber="7883"><Highlight kind="normal">        APInt <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a> = <a href="/docs/api/classes/llvm/apint/#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(HBitWidth, TrailingZeros);</Highlight></CodeLine>
<Link id="l07884" /><CodeLine lineNumber="7884"><Highlight kind="normal">        PartialRem = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, HiLoVT, LL,</Highlight></CodeLine>
<Link id="l07885" /><CodeLine lineNumber="7885"><Highlight kind="normal">                                 DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Mask, dl, HiLoVT));</Highlight></CodeLine>
<Link id="l07886" /><CodeLine lineNumber="7886"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l07887" /><CodeLine lineNumber="7887"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07888" /><CodeLine lineNumber="7888"><Highlight kind="normal">      LL = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(</Highlight></CodeLine>
<Link id="l07889" /><CodeLine lineNumber="7889"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, HiLoVT,</Highlight></CodeLine>
<Link id="l07890" /><CodeLine lineNumber="7890"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, HiLoVT, LL,</Highlight></CodeLine>
<Link id="l07891" /><CodeLine lineNumber="7891"><Highlight kind="normal">                      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(TrailingZeros, HiLoVT, dl)),</Highlight></CodeLine>
<Link id="l07892" /><CodeLine lineNumber="7892"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, HiLoVT, LH,</Highlight></CodeLine>
<Link id="l07893" /><CodeLine lineNumber="7893"><Highlight kind="normal">                      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(HBitWidth - TrailingZeros,</Highlight></CodeLine>
<Link id="l07894" /><CodeLine lineNumber="7894"><Highlight kind="normal">                                                 HiLoVT, dl)));</Highlight></CodeLine>
<Link id="l07895" /><CodeLine lineNumber="7895"><Highlight kind="normal">      LH = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, HiLoVT, LH,</Highlight></CodeLine>
<Link id="l07896" /><CodeLine lineNumber="7896"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(TrailingZeros, HiLoVT, dl));</Highlight></CodeLine>
<Link id="l07897" /><CodeLine lineNumber="7897"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07898" /><CodeLine lineNumber="7898"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07899" /><CodeLine lineNumber="7899"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Use uaddo&#95;carry if we can, otherwise use a compare to detect overflow.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07900" /><CodeLine lineNumber="7900"><Highlight kind="normal">    EVT SetCCType =</Highlight></CodeLine>
<Link id="l07901" /><CodeLine lineNumber="7901"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), HiLoVT);</Highlight></CodeLine>
<Link id="l07902" /><CodeLine lineNumber="7902"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0f1e3ed26108fec69eb97209c0e39bf">ISD::UADDO&#95;CARRY</a>, HiLoVT)) &#123;</Highlight></CodeLine>
<Link id="l07903" /><CodeLine lineNumber="7903"><Highlight kind="normal">      SDVTList VTList = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(HiLoVT, SetCCType);</Highlight></CodeLine>
<Link id="l07904" /><CodeLine lineNumber="7904"><Highlight kind="normal">      Sum = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1ddf36330110b4abea43fe390bea9ef9">ISD::UADDO</a>, dl, VTList, LL, LH);</Highlight></CodeLine>
<Link id="l07905" /><CodeLine lineNumber="7905"><Highlight kind="normal">      Sum = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0f1e3ed26108fec69eb97209c0e39bf">ISD::UADDO&#95;CARRY</a>, dl, VTList, Sum,</Highlight></CodeLine>
<Link id="l07906" /><CodeLine lineNumber="7906"><Highlight kind="normal">                        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, HiLoVT), Sum.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(1));</Highlight></CodeLine>
<Link id="l07907" /><CodeLine lineNumber="7907"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l07908" /><CodeLine lineNumber="7908"><Highlight kind="normal">      Sum = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, HiLoVT, LL, LH);</Highlight></CodeLine>
<Link id="l07909" /><CodeLine lineNumber="7909"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Carry = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCType, Sum, LL, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>);</Highlight></CodeLine>
<Link id="l07910" /><CodeLine lineNumber="7910"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If the boolean for the target is 0 or 1, we can add the setcc result</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07911" /><CodeLine lineNumber="7911"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// directly.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07912" /><CodeLine lineNumber="7912"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(HiLoVT) ==</Highlight></CodeLine>
<Link id="l07913" /><CodeLine lineNumber="7913"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a0e2d72cfdcc49d2d189f440b3cc31dff">TargetLoweringBase::ZeroOrOneBooleanContent</a>)</Highlight></CodeLine>
<Link id="l07914" /><CodeLine lineNumber="7914"><Highlight kind="normal">        Carry = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad0c6f059b29535f2c790d1c4f92b7a93">getZExtOrTrunc</a>(Carry, dl, HiLoVT);</Highlight></CodeLine>
<Link id="l07915" /><CodeLine lineNumber="7915"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07916" /><CodeLine lineNumber="7916"><Highlight kind="normal">        Carry = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, HiLoVT, Carry, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, HiLoVT),</Highlight></CodeLine>
<Link id="l07917" /><CodeLine lineNumber="7917"><Highlight kind="normal">                              DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, HiLoVT));</Highlight></CodeLine>
<Link id="l07918" /><CodeLine lineNumber="7918"><Highlight kind="normal">      Sum = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, HiLoVT, Sum, Carry);</Highlight></CodeLine>
<Link id="l07919" /><CodeLine lineNumber="7919"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07920" /><CodeLine lineNumber="7920"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07921" /><CodeLine lineNumber="7921"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07922" /><CodeLine lineNumber="7922"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If we didn&#39;t find a sum, we can&#39;t do the expansion.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07923" /><CodeLine lineNumber="7923"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Sum)</Highlight></CodeLine>
<Link id="l07924" /><CodeLine lineNumber="7924"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07925" /><CodeLine lineNumber="7925"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07926" /><CodeLine lineNumber="7926"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Perform a HiLoVT urem on the Sum using truncated divisor.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07927" /><CodeLine lineNumber="7927"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> RemL =</Highlight></CodeLine>
<Link id="l07928" /><CodeLine lineNumber="7928"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad1657dbc1957901a6d9cd224efbc0f28">ISD::UREM</a>, dl, HiLoVT, Sum,</Highlight></CodeLine>
<Link id="l07929" /><CodeLine lineNumber="7929"><Highlight kind="normal">                  DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Divisor.<a href="/docs/api/classes/llvm/apint/#a317c64fd4cfebc88e79387b3821a629d">trunc</a>(HBitWidth), dl, HiLoVT));</Highlight></CodeLine>
<Link id="l07930" /><CodeLine lineNumber="7930"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> RemH = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, HiLoVT);</Highlight></CodeLine>
<Link id="l07931" /><CodeLine lineNumber="7931"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07932" /><CodeLine lineNumber="7932"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opcode != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad1657dbc1957901a6d9cd224efbc0f28">ISD::UREM</a>) &#123;</Highlight></CodeLine>
<Link id="l07933" /><CodeLine lineNumber="7933"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Subtract the remainder from the shifted dividend.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07934" /><CodeLine lineNumber="7934"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Dividend = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a41bd84b853e2c03fb1af1f4ca9ebdcaf">ISD::BUILD&#95;PAIR</a>, dl, VT, LL, LH);</Highlight></CodeLine>
<Link id="l07935" /><CodeLine lineNumber="7935"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Rem = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a41bd84b853e2c03fb1af1f4ca9ebdcaf">ISD::BUILD&#95;PAIR</a>, dl, VT, RemL, RemH);</Highlight></CodeLine>
<Link id="l07936" /><CodeLine lineNumber="7936"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07937" /><CodeLine lineNumber="7937"><Highlight kind="normal">    Dividend = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, Dividend, Rem);</Highlight></CodeLine>
<Link id="l07938" /><CodeLine lineNumber="7938"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07939" /><CodeLine lineNumber="7939"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Multiply by the multiplicative inverse of the divisor modulo</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07940" /><CodeLine lineNumber="7940"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// (1 &lt;&lt; BitWidth).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07941" /><CodeLine lineNumber="7941"><Highlight kind="normal">    APInt MulFactor = Divisor.<a href="/docs/api/classes/llvm/apint/#aba59baafccd4c4796301b857df3c40c6">multiplicativeInverse</a>();</Highlight></CodeLine>
<Link id="l07942" /><CodeLine lineNumber="7942"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07943" /><CodeLine lineNumber="7943"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Quotient = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, VT, Dividend,</Highlight></CodeLine>
<Link id="l07944" /><CodeLine lineNumber="7944"><Highlight kind="normal">                                   DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(MulFactor, dl, VT));</Highlight></CodeLine>
<Link id="l07945" /><CodeLine lineNumber="7945"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07946" /><CodeLine lineNumber="7946"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Split the quotient into low and high parts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07947" /><CodeLine lineNumber="7947"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> QuotL, QuotH;</Highlight></CodeLine>
<Link id="l07948" /><CodeLine lineNumber="7948"><Highlight kind="normal">    std::tie(QuotL, QuotH) = DAG.<a href="/docs/api/classes/llvm/selectiondag/#af587fdddecfd87186f09f4b1e9b4bc0a">SplitScalar</a>(Quotient, dl, HiLoVT, HiLoVT);</Highlight></CodeLine>
<Link id="l07949" /><CodeLine lineNumber="7949"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.push&#95;back(QuotL);</Highlight></CodeLine>
<Link id="l07950" /><CodeLine lineNumber="7950"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.push&#95;back(QuotH);</Highlight></CodeLine>
<Link id="l07951" /><CodeLine lineNumber="7951"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07952" /><CodeLine lineNumber="7952"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07953" /><CodeLine lineNumber="7953"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opcode != <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a15637879021fa7d5226045c0668a99a8">ISD::UDIV</a>) &#123;</Highlight></CodeLine>
<Link id="l07954" /><CodeLine lineNumber="7954"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If we shifted the input, shift the remainder left and add the bits we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07955" /><CodeLine lineNumber="7955"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// shifted off the input.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07956" /><CodeLine lineNumber="7956"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TrailingZeros) &#123;</Highlight></CodeLine>
<Link id="l07957" /><CodeLine lineNumber="7957"><Highlight kind="normal">      APInt <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a> = <a href="/docs/api/classes/llvm/apint/#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(HBitWidth, TrailingZeros);</Highlight></CodeLine>
<Link id="l07958" /><CodeLine lineNumber="7958"><Highlight kind="normal">      RemL = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, HiLoVT, RemL,</Highlight></CodeLine>
<Link id="l07959" /><CodeLine lineNumber="7959"><Highlight kind="normal">                         DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(TrailingZeros, HiLoVT, dl));</Highlight></CodeLine>
<Link id="l07960" /><CodeLine lineNumber="7960"><Highlight kind="normal">      RemL = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, HiLoVT, RemL, PartialRem);</Highlight></CodeLine>
<Link id="l07961" /><CodeLine lineNumber="7961"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l07962" /><CodeLine lineNumber="7962"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.push&#95;back(RemL);</Highlight></CodeLine>
<Link id="l07963" /><CodeLine lineNumber="7963"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.push&#95;back(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, HiLoVT));</Highlight></CodeLine>
<Link id="l07964" /><CodeLine lineNumber="7964"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l07965" /><CodeLine lineNumber="7965"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07966" /><CodeLine lineNumber="7966"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l07967" /><CodeLine lineNumber="7967"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l07968" /><CodeLine lineNumber="7968"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07969" /><CodeLine lineNumber="7969"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Check that (every element of) Z is undef or not an exact multiple of BW.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07970" /><CodeLine lineNumber="7970" lineLink="#a5bff9344010e6337ebead35d50f3cb28"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/legalizerhelper-cpp/#aced5d43b6a199d148e877d5536e95739">isNonZeroModBitWidthOrUndef</a>(<a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Z, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> BW) &#123;</Highlight></CodeLine>
<Link id="l07971" /><CodeLine lineNumber="7971"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a309c11edf22da984f95cf9ba7a699c11">ISD::matchUnaryPredicate</a>(</Highlight></CodeLine>
<Link id="l07972" /><CodeLine lineNumber="7972"><Highlight kind="normal">      Z,</Highlight></CodeLine>
<Link id="l07973" /><CodeLine lineNumber="7973"><Highlight kind="normal">      &#91;=&#93;(<a href="/docs/api/classes/llvm/constantsdnode">ConstantSDNode</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123; </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> !<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> || <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getAPIntValue().urem(BW) != 0; &#125;,</Highlight></CodeLine>
<Link id="l07974" /><CodeLine lineNumber="7974"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l07975" /><CodeLine lineNumber="7975"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l07976" /><CodeLine lineNumber="7976"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07977" /><CodeLine lineNumber="7977" lineLink="#a0c43f88b7b733fa84bb93583d9163b54"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="#a0c43f88b7b733fa84bb93583d9163b54">expandVPFunnelShift</a>(<a href="/docs/api/classes/llvm/sdnode">SDNode</a> &#42;<a href="/docs/api/classes/node">Node</a>, <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp;DAG) &#123;</Highlight></CodeLine>
<Link id="l07978" /><CodeLine lineNumber="7978"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> VT = <a href="/docs/api/classes/node">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l07979" /><CodeLine lineNumber="7979"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> ShX, ShY;</Highlight></CodeLine>
<Link id="l07980" /><CodeLine lineNumber="7980"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> ShAmt, InvShAmt;</Highlight></CodeLine>
<Link id="l07981" /><CodeLine lineNumber="7981"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = <a href="/docs/api/classes/node">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l07982" /><CodeLine lineNumber="7982"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = <a href="/docs/api/classes/node">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l07983" /><CodeLine lineNumber="7983"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Z = <a href="/docs/api/classes/node">Node</a>-&gt;getOperand(2);</Highlight></CodeLine>
<Link id="l07984" /><CodeLine lineNumber="7984"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Mask = <a href="/docs/api/classes/node">Node</a>-&gt;getOperand(3);</Highlight></CodeLine>
<Link id="l07985" /><CodeLine lineNumber="7985"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> VL = <a href="/docs/api/classes/node">Node</a>-&gt;getOperand(4);</Highlight></CodeLine>
<Link id="l07986" /><CodeLine lineNumber="7986"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07987" /><CodeLine lineNumber="7987"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> BW = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l07988" /><CodeLine lineNumber="7988"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsFSHL = <a href="/docs/api/classes/node">Node</a>-&gt;getOpcode() == ISD::VP&#95;FSHL;</Highlight></CodeLine>
<Link id="l07989" /><CodeLine lineNumber="7989"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/sdloc">SDLoc</a> <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(<a href="/docs/api/classes/node">Node</a>, 0));</Highlight></CodeLine>
<Link id="l07990" /><CodeLine lineNumber="7990"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07991" /><CodeLine lineNumber="7991"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> ShVT = Z.getValueType();</Highlight></CodeLine>
<Link id="l07992" /><CodeLine lineNumber="7992"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/legalizerhelper-cpp/#aced5d43b6a199d148e877d5536e95739">isNonZeroModBitWidthOrUndef</a>(Z, BW)) &#123;</Highlight></CodeLine>
<Link id="l07993" /><CodeLine lineNumber="7993"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fshl: X &lt;&lt; C | Y &gt;&gt; (BW - C)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07994" /><CodeLine lineNumber="7994"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fshr: X &lt;&lt; (BW - C) | Y &gt;&gt; C</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07995" /><CodeLine lineNumber="7995"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// where C = Z % BW is not zero</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l07996" /><CodeLine lineNumber="7996"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> BitWidthC = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(BW, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT);</Highlight></CodeLine>
<Link id="l07997" /><CodeLine lineNumber="7997"><Highlight kind="normal">    ShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;UREM, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, Z, BitWidthC, Mask, VL);</Highlight></CodeLine>
<Link id="l07998" /><CodeLine lineNumber="7998"><Highlight kind="normal">    InvShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SUB, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, BitWidthC, ShAmt, Mask, VL);</Highlight></CodeLine>
<Link id="l07999" /><CodeLine lineNumber="7999"><Highlight kind="normal">    ShX = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SHL, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, IsFSHL ? ShAmt : InvShAmt, Mask,</Highlight></CodeLine>
<Link id="l08000" /><CodeLine lineNumber="8000"><Highlight kind="normal">                      VL);</Highlight></CodeLine>
<Link id="l08001" /><CodeLine lineNumber="8001"><Highlight kind="normal">    ShY = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, IsFSHL ? InvShAmt : ShAmt, Mask,</Highlight></CodeLine>
<Link id="l08002" /><CodeLine lineNumber="8002"><Highlight kind="normal">                      VL);</Highlight></CodeLine>
<Link id="l08003" /><CodeLine lineNumber="8003"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l08004" /><CodeLine lineNumber="8004"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fshl: X &lt;&lt; (Z % BW) | Y &gt;&gt; 1 &gt;&gt; (BW - 1 - (Z % BW))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08005" /><CodeLine lineNumber="8005"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fshr: X &lt;&lt; 1 &lt;&lt; (BW - 1 - (Z % BW)) | Y &gt;&gt; (Z % BW)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08006" /><CodeLine lineNumber="8006"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> BitMask = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(BW - 1, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT);</Highlight></CodeLine>
<Link id="l08007" /><CodeLine lineNumber="8007"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(BW)) &#123;</Highlight></CodeLine>
<Link id="l08008" /><CodeLine lineNumber="8008"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Z % BW -&gt; Z &amp; (BW - 1)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08009" /><CodeLine lineNumber="8009"><Highlight kind="normal">      ShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, Z, BitMask, Mask, VL);</Highlight></CodeLine>
<Link id="l08010" /><CodeLine lineNumber="8010"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// (BW - 1) - (Z % BW) -&gt; ~Z &amp; (BW - 1)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08011" /><CodeLine lineNumber="8011"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> NotZ = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;XOR, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, Z,</Highlight></CodeLine>
<Link id="l08012" /><CodeLine lineNumber="8012"><Highlight kind="normal">                                 DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1b134112bb3b8986d8082832a16eab6f">getAllOnesConstant</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT), Mask, VL);</Highlight></CodeLine>
<Link id="l08013" /><CodeLine lineNumber="8013"><Highlight kind="normal">      InvShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, NotZ, BitMask, Mask, VL);</Highlight></CodeLine>
<Link id="l08014" /><CodeLine lineNumber="8014"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l08015" /><CodeLine lineNumber="8015"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> BitWidthC = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(BW, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT);</Highlight></CodeLine>
<Link id="l08016" /><CodeLine lineNumber="8016"><Highlight kind="normal">      ShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;UREM, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, Z, BitWidthC, Mask, VL);</Highlight></CodeLine>
<Link id="l08017" /><CodeLine lineNumber="8017"><Highlight kind="normal">      InvShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SUB, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, BitMask, ShAmt, Mask, VL);</Highlight></CodeLine>
<Link id="l08018" /><CodeLine lineNumber="8018"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08019" /><CodeLine lineNumber="8019"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08020" /><CodeLine lineNumber="8020"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> One = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT);</Highlight></CodeLine>
<Link id="l08021" /><CodeLine lineNumber="8021"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsFSHL) &#123;</Highlight></CodeLine>
<Link id="l08022" /><CodeLine lineNumber="8022"><Highlight kind="normal">      ShX = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SHL, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, ShAmt, Mask, VL);</Highlight></CodeLine>
<Link id="l08023" /><CodeLine lineNumber="8023"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> ShY1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, One, Mask, VL);</Highlight></CodeLine>
<Link id="l08024" /><CodeLine lineNumber="8024"><Highlight kind="normal">      ShY = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, ShY1, InvShAmt, Mask, VL);</Highlight></CodeLine>
<Link id="l08025" /><CodeLine lineNumber="8025"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l08026" /><CodeLine lineNumber="8026"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> ShX1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SHL, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, One, Mask, VL);</Highlight></CodeLine>
<Link id="l08027" /><CodeLine lineNumber="8027"><Highlight kind="normal">      ShX = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SHL, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, ShX1, InvShAmt, Mask, VL);</Highlight></CodeLine>
<Link id="l08028" /><CodeLine lineNumber="8028"><Highlight kind="normal">      ShY = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, ShAmt, Mask, VL);</Highlight></CodeLine>
<Link id="l08029" /><CodeLine lineNumber="8029"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08030" /><CodeLine lineNumber="8030"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08031" /><CodeLine lineNumber="8031"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;OR, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, ShX, ShY, Mask, VL);</Highlight></CodeLine>
<Link id="l08032" /><CodeLine lineNumber="8032"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l08033" /><CodeLine lineNumber="8033"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08034" /><CodeLine lineNumber="8034"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a6277730d715a362deb5bd89ed0e17f53">TargetLowering::expandFunnelShift</a>(SDNode &#42;Node,</Highlight></CodeLine>
<Link id="l08035" /><CodeLine lineNumber="8035"><Highlight kind="normal">                                          SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l08036" /><CodeLine lineNumber="8036"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;isVPOpcode())</Highlight></CodeLine>
<Link id="l08037" /><CodeLine lineNumber="8037"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="#a0c43f88b7b733fa84bb93583d9163b54">expandVPFunnelShift</a>(Node, DAG);</Highlight></CodeLine>
<Link id="l08038" /><CodeLine lineNumber="8038"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08039" /><CodeLine lineNumber="8039"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l08040" /><CodeLine lineNumber="8040"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08041" /><CodeLine lineNumber="8041"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; (!<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, VT) ||</Highlight></CodeLine>
<Link id="l08042" /><CodeLine lineNumber="8042"><Highlight kind="normal">                        !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, VT) ||</Highlight></CodeLine>
<Link id="l08043" /><CodeLine lineNumber="8043"><Highlight kind="normal">                        !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, VT) ||</Highlight></CodeLine>
<Link id="l08044" /><CodeLine lineNumber="8044"><Highlight kind="normal">                        !<a href="/docs/api/classes/llvm/targetloweringbase/#afd2a90bd679de6f5964ce9b6f9931541">isOperationLegalOrCustomOrPromote</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, VT)))</Highlight></CodeLine>
<Link id="l08045" /><CodeLine lineNumber="8045"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l08046" /><CodeLine lineNumber="8046"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08047" /><CodeLine lineNumber="8047"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l08048" /><CodeLine lineNumber="8048"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l08049" /><CodeLine lineNumber="8049"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/arccc/#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(2);</Highlight></CodeLine>
<Link id="l08050" /><CodeLine lineNumber="8050"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08051" /><CodeLine lineNumber="8051"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> BW = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l08052" /><CodeLine lineNumber="8052"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsFSHL = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a822b0d02b601898e2d6db5b39e12cc8a">ISD::FSHL</a>;</Highlight></CodeLine>
<Link id="l08053" /><CodeLine lineNumber="8053"><Highlight kind="normal">  SDLoc <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(Node, 0));</Highlight></CodeLine>
<Link id="l08054" /><CodeLine lineNumber="8054"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08055" /><CodeLine lineNumber="8055"><Highlight kind="normal">  EVT ShVT = <a href="/docs/api/namespaces/llvm/arccc/#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>.getValueType();</Highlight></CodeLine>
<Link id="l08056" /><CodeLine lineNumber="8056"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08057" /><CodeLine lineNumber="8057"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If a funnel shift in the other direction is more supported, use it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08058" /><CodeLine lineNumber="8058"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> RevOpcode = IsFSHL ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a874350de5b4f6b8f4db13940e17ed81b">ISD::FSHR</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a822b0d02b601898e2d6db5b39e12cc8a">ISD::FSHL</a>;</Highlight></CodeLine>
<Link id="l08059" /><CodeLine lineNumber="8059"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode(), VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l08060" /><CodeLine lineNumber="8060"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(RevOpcode, VT) &amp;&amp; <a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(BW)) &#123;</Highlight></CodeLine>
<Link id="l08061" /><CodeLine lineNumber="8061"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/legalizerhelper-cpp/#aced5d43b6a199d148e877d5536e95739">isNonZeroModBitWidthOrUndef</a>(Z, BW)) &#123;</Highlight></CodeLine>
<Link id="l08062" /><CodeLine lineNumber="8062"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// fshl X, Y, Z -&gt; fshr X, Y, -Z</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08063" /><CodeLine lineNumber="8063"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// fshr X, Y, Z -&gt; fshl X, Y, -Z</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08064" /><CodeLine lineNumber="8064"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT);</Highlight></CodeLine>
<Link id="l08065" /><CodeLine lineNumber="8065"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/arccc/#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Zero, Z);</Highlight></CodeLine>
<Link id="l08066" /><CodeLine lineNumber="8066"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l08067" /><CodeLine lineNumber="8067"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// fshl X, Y, Z -&gt; fshr (srl X, 1), (fshr X, Y, 1), ~Z</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08068" /><CodeLine lineNumber="8068"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// fshr X, Y, Z -&gt; fshl (fshl X, Y, 1), (shl Y, 1), ~Z</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08069" /><CodeLine lineNumber="8069"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> One = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT);</Highlight></CodeLine>
<Link id="l08070" /><CodeLine lineNumber="8070"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsFSHL) &#123;</Highlight></CodeLine>
<Link id="l08071" /><CodeLine lineNumber="8071"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(RevOpcode, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, One);</Highlight></CodeLine>
<Link id="l08072" /><CodeLine lineNumber="8072"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, One);</Highlight></CodeLine>
<Link id="l08073" /><CodeLine lineNumber="8073"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l08074" /><CodeLine lineNumber="8074"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(RevOpcode, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, One);</Highlight></CodeLine>
<Link id="l08075" /><CodeLine lineNumber="8075"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, One);</Highlight></CodeLine>
<Link id="l08076" /><CodeLine lineNumber="8076"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l08077" /><CodeLine lineNumber="8077"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/arccc/#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, Z, ShVT);</Highlight></CodeLine>
<Link id="l08078" /><CodeLine lineNumber="8078"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08079" /><CodeLine lineNumber="8079"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(RevOpcode, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, Z);</Highlight></CodeLine>
<Link id="l08080" /><CodeLine lineNumber="8080"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08081" /><CodeLine lineNumber="8081"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08082" /><CodeLine lineNumber="8082"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShX, ShY;</Highlight></CodeLine>
<Link id="l08083" /><CodeLine lineNumber="8083"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShAmt, InvShAmt;</Highlight></CodeLine>
<Link id="l08084" /><CodeLine lineNumber="8084"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/legalizerhelper-cpp/#aced5d43b6a199d148e877d5536e95739">isNonZeroModBitWidthOrUndef</a>(Z, BW)) &#123;</Highlight></CodeLine>
<Link id="l08085" /><CodeLine lineNumber="8085"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fshl: X &lt;&lt; C | Y &gt;&gt; (BW - C)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08086" /><CodeLine lineNumber="8086"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fshr: X &lt;&lt; (BW - C) | Y &gt;&gt; C</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08087" /><CodeLine lineNumber="8087"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// where C = Z % BW is not zero</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08088" /><CodeLine lineNumber="8088"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> BitWidthC = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(BW, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT);</Highlight></CodeLine>
<Link id="l08089" /><CodeLine lineNumber="8089"><Highlight kind="normal">    ShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad1657dbc1957901a6d9cd224efbc0f28">ISD::UREM</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, Z, BitWidthC);</Highlight></CodeLine>
<Link id="l08090" /><CodeLine lineNumber="8090"><Highlight kind="normal">    InvShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, BitWidthC, ShAmt);</Highlight></CodeLine>
<Link id="l08091" /><CodeLine lineNumber="8091"><Highlight kind="normal">    ShX = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, IsFSHL ? ShAmt : InvShAmt);</Highlight></CodeLine>
<Link id="l08092" /><CodeLine lineNumber="8092"><Highlight kind="normal">    ShY = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, IsFSHL ? InvShAmt : ShAmt);</Highlight></CodeLine>
<Link id="l08093" /><CodeLine lineNumber="8093"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l08094" /><CodeLine lineNumber="8094"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fshl: X &lt;&lt; (Z % BW) | Y &gt;&gt; 1 &gt;&gt; (BW - 1 - (Z % BW))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08095" /><CodeLine lineNumber="8095"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fshr: X &lt;&lt; 1 &lt;&lt; (BW - 1 - (Z % BW)) | Y &gt;&gt; (Z % BW)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08096" /><CodeLine lineNumber="8096"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(BW - 1, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT);</Highlight></CodeLine>
<Link id="l08097" /><CodeLine lineNumber="8097"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(BW)) &#123;</Highlight></CodeLine>
<Link id="l08098" /><CodeLine lineNumber="8098"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Z % BW -&gt; Z &amp; (BW - 1)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08099" /><CodeLine lineNumber="8099"><Highlight kind="normal">      ShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, Z, Mask);</Highlight></CodeLine>
<Link id="l08100" /><CodeLine lineNumber="8100"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// (BW - 1) - (Z % BW) -&gt; ~Z &amp; (BW - 1)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08101" /><CodeLine lineNumber="8101"><Highlight kind="normal">      InvShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, Z, ShVT), Mask);</Highlight></CodeLine>
<Link id="l08102" /><CodeLine lineNumber="8102"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l08103" /><CodeLine lineNumber="8103"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> BitWidthC = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(BW, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT);</Highlight></CodeLine>
<Link id="l08104" /><CodeLine lineNumber="8104"><Highlight kind="normal">      ShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad1657dbc1957901a6d9cd224efbc0f28">ISD::UREM</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, Z, BitWidthC);</Highlight></CodeLine>
<Link id="l08105" /><CodeLine lineNumber="8105"><Highlight kind="normal">      InvShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, Mask, ShAmt);</Highlight></CodeLine>
<Link id="l08106" /><CodeLine lineNumber="8106"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08107" /><CodeLine lineNumber="8107"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08108" /><CodeLine lineNumber="8108"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> One = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT);</Highlight></CodeLine>
<Link id="l08109" /><CodeLine lineNumber="8109"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsFSHL) &#123;</Highlight></CodeLine>
<Link id="l08110" /><CodeLine lineNumber="8110"><Highlight kind="normal">      ShX = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, ShAmt);</Highlight></CodeLine>
<Link id="l08111" /><CodeLine lineNumber="8111"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShY1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, One);</Highlight></CodeLine>
<Link id="l08112" /><CodeLine lineNumber="8112"><Highlight kind="normal">      ShY = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, ShY1, InvShAmt);</Highlight></CodeLine>
<Link id="l08113" /><CodeLine lineNumber="8113"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l08114" /><CodeLine lineNumber="8114"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShX1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, One);</Highlight></CodeLine>
<Link id="l08115" /><CodeLine lineNumber="8115"><Highlight kind="normal">      ShX = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, ShX1, InvShAmt);</Highlight></CodeLine>
<Link id="l08116" /><CodeLine lineNumber="8116"><Highlight kind="normal">      ShY = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, ShAmt);</Highlight></CodeLine>
<Link id="l08117" /><CodeLine lineNumber="8117"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08118" /><CodeLine lineNumber="8118"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08119" /><CodeLine lineNumber="8119"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, ShX, ShY);</Highlight></CodeLine>
<Link id="l08120" /><CodeLine lineNumber="8120"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l08121" /><CodeLine lineNumber="8121"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08122" /><CodeLine lineNumber="8122"><Highlight kind="normal"></Highlight><Highlight kind="comment">// TODO: Merge with expandFunnelShift.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08123" /><CodeLine lineNumber="8123"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#afdf8e533128a4e28f6720f70ab726376">TargetLowering::expandROT</a>(SDNode &#42;Node, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AllowVectorOps,</Highlight></CodeLine>
<Link id="l08124" /><CodeLine lineNumber="8124"><Highlight kind="normal">                                  SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l08125" /><CodeLine lineNumber="8125"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l08126" /><CodeLine lineNumber="8126"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> EltSizeInBits = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l08127" /><CodeLine lineNumber="8127"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsLeft = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae8f8f81d8e8d7a557d67622c05786f1d">ISD::ROTL</a>;</Highlight></CodeLine>
<Link id="l08128" /><CodeLine lineNumber="8128"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l08129" /><CodeLine lineNumber="8129"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l08130" /><CodeLine lineNumber="8130"><Highlight kind="normal">  SDLoc <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(Node, 0));</Highlight></CodeLine>
<Link id="l08131" /><CodeLine lineNumber="8131"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08132" /><CodeLine lineNumber="8132"><Highlight kind="normal">  EVT ShVT = Op1.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l08133" /><CodeLine lineNumber="8133"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT);</Highlight></CodeLine>
<Link id="l08134" /><CodeLine lineNumber="8134"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08135" /><CodeLine lineNumber="8135"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If a rotate in the other direction is more supported, use it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08136" /><CodeLine lineNumber="8136"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> RevRot = IsLeft ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a19cd524269b035941434cce28b585715">ISD::ROTR</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae8f8f81d8e8d7a557d67622c05786f1d">ISD::ROTL</a>;</Highlight></CodeLine>
<Link id="l08137" /><CodeLine lineNumber="8137"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode(), VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l08138" /><CodeLine lineNumber="8138"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(RevRot, VT) &amp;&amp; <a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(EltSizeInBits)) &#123;</Highlight></CodeLine>
<Link id="l08139" /><CodeLine lineNumber="8139"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Sub = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, Zero, Op1);</Highlight></CodeLine>
<Link id="l08140" /><CodeLine lineNumber="8140"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(RevRot, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Op0, Sub);</Highlight></CodeLine>
<Link id="l08141" /><CodeLine lineNumber="8141"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08142" /><CodeLine lineNumber="8142"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08143" /><CodeLine lineNumber="8143"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!AllowVectorOps &amp;&amp; VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l08144" /><CodeLine lineNumber="8144"><Highlight kind="normal">      (!<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, VT) ||</Highlight></CodeLine>
<Link id="l08145" /><CodeLine lineNumber="8145"><Highlight kind="normal">       !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, VT) ||</Highlight></CodeLine>
<Link id="l08146" /><CodeLine lineNumber="8146"><Highlight kind="normal">       !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, VT) ||</Highlight></CodeLine>
<Link id="l08147" /><CodeLine lineNumber="8147"><Highlight kind="normal">       !<a href="/docs/api/classes/llvm/targetloweringbase/#afd2a90bd679de6f5964ce9b6f9931541">isOperationLegalOrCustomOrPromote</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, VT) ||</Highlight></CodeLine>
<Link id="l08148" /><CodeLine lineNumber="8148"><Highlight kind="normal">       !<a href="/docs/api/classes/llvm/targetloweringbase/#afd2a90bd679de6f5964ce9b6f9931541">isOperationLegalOrCustomOrPromote</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, VT)))</Highlight></CodeLine>
<Link id="l08149" /><CodeLine lineNumber="8149"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l08150" /><CodeLine lineNumber="8150"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08151" /><CodeLine lineNumber="8151"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShOpc = IsLeft ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>;</Highlight></CodeLine>
<Link id="l08152" /><CodeLine lineNumber="8152"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> HsOpc = IsLeft ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>;</Highlight></CodeLine>
<Link id="l08153" /><CodeLine lineNumber="8153"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> BitWidthMinusOneC = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(EltSizeInBits - 1, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT);</Highlight></CodeLine>
<Link id="l08154" /><CodeLine lineNumber="8154"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShVal;</Highlight></CodeLine>
<Link id="l08155" /><CodeLine lineNumber="8155"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> HsVal;</Highlight></CodeLine>
<Link id="l08156" /><CodeLine lineNumber="8156"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(EltSizeInBits)) &#123;</Highlight></CodeLine>
<Link id="l08157" /><CodeLine lineNumber="8157"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// (rotl x, c) -&gt; x &lt;&lt; (c &amp; (w - 1)) | x &gt;&gt; (-c &amp; (w - 1))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08158" /><CodeLine lineNumber="8158"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// (rotr x, c) -&gt; x &gt;&gt; (c &amp; (w - 1)) | x &lt;&lt; (-c &amp; (w - 1))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08159" /><CodeLine lineNumber="8159"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NegOp1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, Zero, Op1);</Highlight></CodeLine>
<Link id="l08160" /><CodeLine lineNumber="8160"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, Op1, BitWidthMinusOneC);</Highlight></CodeLine>
<Link id="l08161" /><CodeLine lineNumber="8161"><Highlight kind="normal">    ShVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ShOpc, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Op0, ShAmt);</Highlight></CodeLine>
<Link id="l08162" /><CodeLine lineNumber="8162"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> HsAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, NegOp1, BitWidthMinusOneC);</Highlight></CodeLine>
<Link id="l08163" /><CodeLine lineNumber="8163"><Highlight kind="normal">    HsVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(HsOpc, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Op0, HsAmt);</Highlight></CodeLine>
<Link id="l08164" /><CodeLine lineNumber="8164"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l08165" /><CodeLine lineNumber="8165"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// (rotl x, c) -&gt; x &lt;&lt; (c % w) | x &gt;&gt; 1 &gt;&gt; (w - 1 - (c % w))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08166" /><CodeLine lineNumber="8166"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// (rotr x, c) -&gt; x &gt;&gt; (c % w) | x &lt;&lt; 1 &lt;&lt; (w - 1 - (c % w))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08167" /><CodeLine lineNumber="8167"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> BitWidthC = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(EltSizeInBits, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT);</Highlight></CodeLine>
<Link id="l08168" /><CodeLine lineNumber="8168"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad1657dbc1957901a6d9cd224efbc0f28">ISD::UREM</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, Op1, BitWidthC);</Highlight></CodeLine>
<Link id="l08169" /><CodeLine lineNumber="8169"><Highlight kind="normal">    ShVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ShOpc, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Op0, ShAmt);</Highlight></CodeLine>
<Link id="l08170" /><CodeLine lineNumber="8170"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> HsAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT, BitWidthMinusOneC, ShAmt);</Highlight></CodeLine>
<Link id="l08171" /><CodeLine lineNumber="8171"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> One = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ShVT);</Highlight></CodeLine>
<Link id="l08172" /><CodeLine lineNumber="8172"><Highlight kind="normal">    HsVal =</Highlight></CodeLine>
<Link id="l08173" /><CodeLine lineNumber="8173"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(HsOpc, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(HsOpc, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Op0, One), HsAmt);</Highlight></CodeLine>
<Link id="l08174" /><CodeLine lineNumber="8174"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08175" /><CodeLine lineNumber="8175"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, ShVal, HsVal);</Highlight></CodeLine>
<Link id="l08176" /><CodeLine lineNumber="8176"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l08177" /><CodeLine lineNumber="8177"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08178" /><CodeLine lineNumber="8178"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#ad7c6044f8250efb3a9da26bcb6b1db62">TargetLowering::expandShiftParts</a>(SDNode &#42;Node, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>,</Highlight></CodeLine>
<Link id="l08179" /><CodeLine lineNumber="8179"><Highlight kind="normal">                                      SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l08180" /><CodeLine lineNumber="8180"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getNumOperands() == 3 &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Not a double-shift!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l08181" /><CodeLine lineNumber="8181"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l08182" /><CodeLine lineNumber="8182"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> VTBits = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l08183" /><CodeLine lineNumber="8183"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(VTBits) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Power-of-two integer type expected&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l08184" /><CodeLine lineNumber="8184"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08185" /><CodeLine lineNumber="8185"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsSHL = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aeb80f9832dad739ee9c6deaa3110d98f">ISD::SHL&#95;PARTS</a>;</Highlight></CodeLine>
<Link id="l08186" /><CodeLine lineNumber="8186"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsSRA = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a78139be59781ad05e1698eb95c58e0b1">ISD::SRA&#95;PARTS</a>;</Highlight></CodeLine>
<Link id="l08187" /><CodeLine lineNumber="8187"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShOpLo = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l08188" /><CodeLine lineNumber="8188"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShOpHi = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l08189" /><CodeLine lineNumber="8189"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShAmt = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(2);</Highlight></CodeLine>
<Link id="l08190" /><CodeLine lineNumber="8190"><Highlight kind="normal">  EVT ShAmtVT = ShAmt.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l08191" /><CodeLine lineNumber="8191"><Highlight kind="normal">  EVT ShAmtCCVT =</Highlight></CodeLine>
<Link id="l08192" /><CodeLine lineNumber="8192"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), ShAmtVT);</Highlight></CodeLine>
<Link id="l08193" /><CodeLine lineNumber="8193"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l08194" /><CodeLine lineNumber="8194"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08195" /><CodeLine lineNumber="8195"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ISD::FSHL and ISD::FSHR have defined overflow behavior but ISD::SHL and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08196" /><CodeLine lineNumber="8196"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ISD::SRA/L nodes haven&#39;t. Insert an AND to be safe, it&#39;s usually optimized</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08197" /><CodeLine lineNumber="8197"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// away during isel.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08198" /><CodeLine lineNumber="8198"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SafeShAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, ShAmtVT, ShAmt,</Highlight></CodeLine>
<Link id="l08199" /><CodeLine lineNumber="8199"><Highlight kind="normal">                                  DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(VTBits - 1, dl, ShAmtVT));</Highlight></CodeLine>
<Link id="l08200" /><CodeLine lineNumber="8200"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Tmp1 = IsSRA ? DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>, dl, VT, ShOpHi,</Highlight></CodeLine>
<Link id="l08201" /><CodeLine lineNumber="8201"><Highlight kind="normal">                                     DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(VTBits - 1, dl, ShAmtVT))</Highlight></CodeLine>
<Link id="l08202" /><CodeLine lineNumber="8202"><Highlight kind="normal">                       : DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, VT);</Highlight></CodeLine>
<Link id="l08203" /><CodeLine lineNumber="8203"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08204" /><CodeLine lineNumber="8204"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Tmp2, Tmp3;</Highlight></CodeLine>
<Link id="l08205" /><CodeLine lineNumber="8205"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsSHL) &#123;</Highlight></CodeLine>
<Link id="l08206" /><CodeLine lineNumber="8206"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a822b0d02b601898e2d6db5b39e12cc8a">ISD::FSHL</a>, dl, VT, ShOpHi, ShOpLo, ShAmt);</Highlight></CodeLine>
<Link id="l08207" /><CodeLine lineNumber="8207"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, ShOpLo, SafeShAmt);</Highlight></CodeLine>
<Link id="l08208" /><CodeLine lineNumber="8208"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l08209" /><CodeLine lineNumber="8209"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a874350de5b4f6b8f4db13940e17ed81b">ISD::FSHR</a>, dl, VT, ShOpHi, ShOpLo, ShAmt);</Highlight></CodeLine>
<Link id="l08210" /><CodeLine lineNumber="8210"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(IsSRA ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, ShOpHi, SafeShAmt);</Highlight></CodeLine>
<Link id="l08211" /><CodeLine lineNumber="8211"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08212" /><CodeLine lineNumber="8212"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08213" /><CodeLine lineNumber="8213"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the shift amount is larger or equal than the width of a part we don&#39;t</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08214" /><CodeLine lineNumber="8214"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// use the result from the FSHL/FSHR. Insert a test and select the appropriate</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08215" /><CodeLine lineNumber="8215"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// values for large shift amounts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08216" /><CodeLine lineNumber="8216"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> AndNode = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, ShAmtVT, ShAmt,</Highlight></CodeLine>
<Link id="l08217" /><CodeLine lineNumber="8217"><Highlight kind="normal">                                DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(VTBits, dl, ShAmtVT));</Highlight></CodeLine>
<Link id="l08218" /><CodeLine lineNumber="8218"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, ShAmtCCVT, AndNode,</Highlight></CodeLine>
<Link id="l08219" /><CodeLine lineNumber="8219"><Highlight kind="normal">                              DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, ShAmtVT), <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>);</Highlight></CodeLine>
<Link id="l08220" /><CodeLine lineNumber="8220"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08221" /><CodeLine lineNumber="8221"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsSHL) &#123;</Highlight></CodeLine>
<Link id="l08222" /><CodeLine lineNumber="8222"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a78d0f198115bfe3331ab7cfcf7a40a97">ISD::SELECT</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, Tmp3, Tmp2);</Highlight></CodeLine>
<Link id="l08223" /><CodeLine lineNumber="8223"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a78d0f198115bfe3331ab7cfcf7a40a97">ISD::SELECT</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, Tmp1, Tmp3);</Highlight></CodeLine>
<Link id="l08224" /><CodeLine lineNumber="8224"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l08225" /><CodeLine lineNumber="8225"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a78d0f198115bfe3331ab7cfcf7a40a97">ISD::SELECT</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, Tmp3, Tmp2);</Highlight></CodeLine>
<Link id="l08226" /><CodeLine lineNumber="8226"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a78d0f198115bfe3331ab7cfcf7a40a97">ISD::SELECT</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, Tmp1, Tmp3);</Highlight></CodeLine>
<Link id="l08227" /><CodeLine lineNumber="8227"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08228" /><CodeLine lineNumber="8228"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l08229" /><CodeLine lineNumber="8229"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08230" /><CodeLine lineNumber="8230"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#ae88a98f9b6ef7661ed256aaaaea7455c">TargetLowering::expandFP&#95;TO&#95;SINT</a>(SDNode &#42;Node, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;Result,</Highlight></CodeLine>
<Link id="l08231" /><CodeLine lineNumber="8231"><Highlight kind="normal">                                      SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l08232" /><CodeLine lineNumber="8232"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> OpNo = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;isStrictFPOpcode() ? 1 : 0;</Highlight></CodeLine>
<Link id="l08233" /><CodeLine lineNumber="8233"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(OpNo);</Highlight></CodeLine>
<Link id="l08234" /><CodeLine lineNumber="8234"><Highlight kind="normal">  EVT SrcVT = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType();</Highlight></CodeLine>
<Link id="l08235" /><CodeLine lineNumber="8235"><Highlight kind="normal">  EVT DstVT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l08236" /><CodeLine lineNumber="8236"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(Node, 0));</Highlight></CodeLine>
<Link id="l08237" /><CodeLine lineNumber="8237"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08238" /><CodeLine lineNumber="8238"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: Only f32 to i64 conversions are supported.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08239" /><CodeLine lineNumber="8239"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcVT != MVT::f32 || DstVT != MVT::i64)</Highlight></CodeLine>
<Link id="l08240" /><CodeLine lineNumber="8240"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08241" /><CodeLine lineNumber="8241"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08242" /><CodeLine lineNumber="8242"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;isStrictFPOpcode())</Highlight></CodeLine>
<Link id="l08243" /><CodeLine lineNumber="8243"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// When a NaN is converted to an integer a trap is allowed. We can&#39;t</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08244" /><CodeLine lineNumber="8244"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// use this expansion here because it would eliminate that trap. Other</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08245" /><CodeLine lineNumber="8245"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// traps are also allowed and cannot be eliminated. See</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08246" /><CodeLine lineNumber="8246"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// IEEE 754-2008 sec 5.8.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08247" /><CodeLine lineNumber="8247"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08248" /><CodeLine lineNumber="8248"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08249" /><CodeLine lineNumber="8249"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Expand f32 -&gt; i64 conversion</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08250" /><CodeLine lineNumber="8250"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This algorithm comes from compiler-rt&#39;s implementation of fixsfdi:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08251" /><CodeLine lineNumber="8251"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// https://github.com/llvm/llvm-project/blob/main/compiler-rt/lib/builtins/fixsfdi.c</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08252" /><CodeLine lineNumber="8252"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SrcEltBits = SrcVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l08253" /><CodeLine lineNumber="8253"><Highlight kind="normal">  EVT IntVT = SrcVT.<a href="/docs/api/structs/llvm/evt/#a25eda78153285bc3bc4708e149b7e9e8">changeTypeToInteger</a>();</Highlight></CodeLine>
<Link id="l08254" /><CodeLine lineNumber="8254"><Highlight kind="normal">  EVT IntShVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a6a2579bc0354806c6c9708b068777c3a">getShiftAmountTy</a>(IntVT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l08255" /><CodeLine lineNumber="8255"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08256" /><CodeLine lineNumber="8256"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ExponentMask = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0x7F800000, dl, IntVT);</Highlight></CodeLine>
<Link id="l08257" /><CodeLine lineNumber="8257"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ExponentLoBit = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(23, dl, IntVT);</Highlight></CodeLine>
<Link id="l08258" /><CodeLine lineNumber="8258"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Bias = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(127, dl, IntVT);</Highlight></CodeLine>
<Link id="l08259" /><CodeLine lineNumber="8259"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SignMask = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#a1e6f0d8dfed0ab631b488a3e6317718e">APInt::getSignMask</a>(SrcEltBits), dl, IntVT);</Highlight></CodeLine>
<Link id="l08260" /><CodeLine lineNumber="8260"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SignLowBit = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(SrcEltBits - 1, dl, IntVT);</Highlight></CodeLine>
<Link id="l08261" /><CodeLine lineNumber="8261"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> MantissaMask = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0x007FFFFF, dl, IntVT);</Highlight></CodeLine>
<Link id="l08262" /><CodeLine lineNumber="8262"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08263" /><CodeLine lineNumber="8263"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/tgtok/#abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95">Bits</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::BITCAST, dl, IntVT, Src);</Highlight></CodeLine>
<Link id="l08264" /><CodeLine lineNumber="8264"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08265" /><CodeLine lineNumber="8265"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ExponentBits = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(</Highlight></CodeLine>
<Link id="l08266" /><CodeLine lineNumber="8266"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, IntVT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, IntVT, Bits, ExponentMask),</Highlight></CodeLine>
<Link id="l08267" /><CodeLine lineNumber="8267"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad0c6f059b29535f2c790d1c4f92b7a93">getZExtOrTrunc</a>(ExponentLoBit, dl, IntShVT));</Highlight></CodeLine>
<Link id="l08268" /><CodeLine lineNumber="8268"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a403260df3a211e47e65f35fbfd9bee8faf5ccb8d51ca38e2f3329955fc0149cd4">Exponent</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, IntVT, ExponentBits, Bias);</Highlight></CodeLine>
<Link id="l08269" /><CodeLine lineNumber="8269"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08270" /><CodeLine lineNumber="8270"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Sign = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>, dl, IntVT,</Highlight></CodeLine>
<Link id="l08271" /><CodeLine lineNumber="8271"><Highlight kind="normal">                             DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, IntVT, Bits, SignMask),</Highlight></CodeLine>
<Link id="l08272" /><CodeLine lineNumber="8272"><Highlight kind="normal">                             DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad0c6f059b29535f2c790d1c4f92b7a93">getZExtOrTrunc</a>(SignLowBit, dl, IntShVT));</Highlight></CodeLine>
<Link id="l08273" /><CodeLine lineNumber="8273"><Highlight kind="normal">  Sign = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a9c2450d7d33fb2ecb9b645f1ca6a9a64">getSExtOrTrunc</a>(Sign, dl, DstVT);</Highlight></CodeLine>
<Link id="l08274" /><CodeLine lineNumber="8274"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08275" /><CodeLine lineNumber="8275"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, IntVT,</Highlight></CodeLine>
<Link id="l08276" /><CodeLine lineNumber="8276"><Highlight kind="normal">                          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, IntVT, Bits, MantissaMask),</Highlight></CodeLine>
<Link id="l08277" /><CodeLine lineNumber="8277"><Highlight kind="normal">                          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0x00800000, dl, IntVT));</Highlight></CodeLine>
<Link id="l08278" /><CodeLine lineNumber="8278"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08279" /><CodeLine lineNumber="8279"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad0c6f059b29535f2c790d1c4f92b7a93">getZExtOrTrunc</a>(R, dl, DstVT);</Highlight></CodeLine>
<Link id="l08280" /><CodeLine lineNumber="8280"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08281" /><CodeLine lineNumber="8281"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/riscvfencefield/#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab30ac12d744d55e5d9d8795b1ce53433">getSelectCC</a>(</Highlight></CodeLine>
<Link id="l08282" /><CodeLine lineNumber="8282"><Highlight kind="normal">      dl, <a href="/docs/api/namespaces/llvm/#a403260df3a211e47e65f35fbfd9bee8faf5ccb8d51ca38e2f3329955fc0149cd4">Exponent</a>, ExponentLoBit,</Highlight></CodeLine>
<Link id="l08283" /><CodeLine lineNumber="8283"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, DstVT, R,</Highlight></CodeLine>
<Link id="l08284" /><CodeLine lineNumber="8284"><Highlight kind="normal">                  DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad0c6f059b29535f2c790d1c4f92b7a93">getZExtOrTrunc</a>(</Highlight></CodeLine>
<Link id="l08285" /><CodeLine lineNumber="8285"><Highlight kind="normal">                      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, IntVT, <a href="/docs/api/namespaces/llvm/#a403260df3a211e47e65f35fbfd9bee8faf5ccb8d51ca38e2f3329955fc0149cd4">Exponent</a>, ExponentLoBit),</Highlight></CodeLine>
<Link id="l08286" /><CodeLine lineNumber="8286"><Highlight kind="normal">                      dl, IntShVT)),</Highlight></CodeLine>
<Link id="l08287" /><CodeLine lineNumber="8287"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, DstVT, R,</Highlight></CodeLine>
<Link id="l08288" /><CodeLine lineNumber="8288"><Highlight kind="normal">                  DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad0c6f059b29535f2c790d1c4f92b7a93">getZExtOrTrunc</a>(</Highlight></CodeLine>
<Link id="l08289" /><CodeLine lineNumber="8289"><Highlight kind="normal">                      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, IntVT, ExponentLoBit, <a href="/docs/api/namespaces/llvm/#a403260df3a211e47e65f35fbfd9bee8faf5ccb8d51ca38e2f3329955fc0149cd4">Exponent</a>),</Highlight></CodeLine>
<Link id="l08290" /><CodeLine lineNumber="8290"><Highlight kind="normal">                      dl, IntShVT)),</Highlight></CodeLine>
<Link id="l08291" /><CodeLine lineNumber="8291"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a>);</Highlight></CodeLine>
<Link id="l08292" /><CodeLine lineNumber="8292"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08293" /><CodeLine lineNumber="8293"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, DstVT,</Highlight></CodeLine>
<Link id="l08294" /><CodeLine lineNumber="8294"><Highlight kind="normal">                            DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, DstVT, R, Sign), Sign);</Highlight></CodeLine>
<Link id="l08295" /><CodeLine lineNumber="8295"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08296" /><CodeLine lineNumber="8296"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab30ac12d744d55e5d9d8795b1ce53433">getSelectCC</a>(dl, <a href="/docs/api/namespaces/llvm/#a403260df3a211e47e65f35fbfd9bee8faf5ccb8d51ca38e2f3329955fc0149cd4">Exponent</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, IntVT),</Highlight></CodeLine>
<Link id="l08297" /><CodeLine lineNumber="8297"><Highlight kind="normal">                           DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, DstVT), Ret, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l08298" /><CodeLine lineNumber="8298"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08299" /><CodeLine lineNumber="8299"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l08300" /><CodeLine lineNumber="8300"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08301" /><CodeLine lineNumber="8301"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#ac3bdbef1c14de11ac53ef2736000e900">TargetLowering::expandFP&#95;TO&#95;UINT</a>(SDNode &#42;Node, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;Result,</Highlight></CodeLine>
<Link id="l08302" /><CodeLine lineNumber="8302"><Highlight kind="normal">                                      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;Chain,</Highlight></CodeLine>
<Link id="l08303" /><CodeLine lineNumber="8303"><Highlight kind="normal">                                      SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l08304" /><CodeLine lineNumber="8304"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(Node, 0));</Highlight></CodeLine>
<Link id="l08305" /><CodeLine lineNumber="8305"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> OpNo = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;isStrictFPOpcode() ? 1 : 0;</Highlight></CodeLine>
<Link id="l08306" /><CodeLine lineNumber="8306"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(OpNo);</Highlight></CodeLine>
<Link id="l08307" /><CodeLine lineNumber="8307"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08308" /><CodeLine lineNumber="8308"><Highlight kind="normal">  EVT SrcVT = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType();</Highlight></CodeLine>
<Link id="l08309" /><CodeLine lineNumber="8309"><Highlight kind="normal">  EVT DstVT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l08310" /><CodeLine lineNumber="8310"><Highlight kind="normal">  EVT SetCCVT =</Highlight></CodeLine>
<Link id="l08311" /><CodeLine lineNumber="8311"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), SrcVT);</Highlight></CodeLine>
<Link id="l08312" /><CodeLine lineNumber="8312"><Highlight kind="normal">  EVT DstSetCCVT =</Highlight></CodeLine>
<Link id="l08313" /><CodeLine lineNumber="8313"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), DstVT);</Highlight></CodeLine>
<Link id="l08314" /><CodeLine lineNumber="8314"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08315" /><CodeLine lineNumber="8315"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Only expand vector types if we have the appropriate vector bit operations.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08316" /><CodeLine lineNumber="8316"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SIntOpcode = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;isStrictFPOpcode() ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac2618c1a69fa9d62427a5a6dc43e24ed">ISD::STRICT&#95;FP&#95;TO&#95;SINT</a> :</Highlight></CodeLine>
<Link id="l08317" /><CodeLine lineNumber="8317"><Highlight kind="normal">                                                   <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac3f8f8d8437c64b2e2e9f978e2707210">ISD::FP&#95;TO&#95;SINT</a>;</Highlight></CodeLine>
<Link id="l08318" /><CodeLine lineNumber="8318"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DstVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; (!<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(SIntOpcode, DstVT) ||</Highlight></CodeLine>
<Link id="l08319" /><CodeLine lineNumber="8319"><Highlight kind="normal">                           !<a href="/docs/api/classes/llvm/targetloweringbase/#afd2a90bd679de6f5964ce9b6f9931541">isOperationLegalOrCustomOrPromote</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, SrcVT)))</Highlight></CodeLine>
<Link id="l08320" /><CodeLine lineNumber="8320"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08321" /><CodeLine lineNumber="8321"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08322" /><CodeLine lineNumber="8322"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the maximum float value is smaller then the signed integer range,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08323" /><CodeLine lineNumber="8323"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the destination signmask can&#39;t be represented by the float, so we can</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08324" /><CodeLine lineNumber="8324"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// just use FP&#95;TO&#95;SINT directly.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08325" /><CodeLine lineNumber="8325"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> fltSemantics &amp;APFSem = SrcVT.<a href="/docs/api/structs/llvm/evt/#adf42d7b6a69dc15a64f841d51a9c93b7">getFltSemantics</a>();</Highlight></CodeLine>
<Link id="l08326" /><CodeLine lineNumber="8326"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/lltok/#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">APFloat</a> APF(APFSem, <a href="/docs/api/classes/llvm/apint/#add4e37b60ea64faafbc9a5bf3e27280f">APInt::getZero</a>(SrcVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>()));</Highlight></CodeLine>
<Link id="l08327" /><CodeLine lineNumber="8327"><Highlight kind="normal">  APInt SignMask = <a href="/docs/api/classes/llvm/apint/#a1e6f0d8dfed0ab631b488a3e6317718e">APInt::getSignMask</a>(DstVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>());</Highlight></CodeLine>
<Link id="l08328" /><CodeLine lineNumber="8328"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/llvm/apfloatbase/#aee544c332088dbef348a0c1c97e21a6aa054516d40647594fd6e9e436a9aa308f">APFloat::opOverflow</a> &amp;</Highlight></CodeLine>
<Link id="l08329" /><CodeLine lineNumber="8329"><Highlight kind="normal">      APF.convertFromAPInt(SignMask, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, <a href="/docs/api/structs/llvm/apfloatbase/#a22ed74f1ed33c4d33f524a650ea536a6">APFloat::rmNearestTiesToEven</a>)) &#123;</Highlight></CodeLine>
<Link id="l08330" /><CodeLine lineNumber="8330"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;isStrictFPOpcode()) &#123;</Highlight></CodeLine>
<Link id="l08331" /><CodeLine lineNumber="8331"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac2618c1a69fa9d62427a5a6dc43e24ed">ISD::STRICT&#95;FP&#95;TO&#95;SINT</a>, dl, &#123; DstVT, MVT::Other &#125;,</Highlight></CodeLine>
<Link id="l08332" /><CodeLine lineNumber="8332"><Highlight kind="normal">                           &#123; <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0), <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> &#125;);</Highlight></CodeLine>
<Link id="l08333" /><CodeLine lineNumber="8333"><Highlight kind="normal">      <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getValue(1);</Highlight></CodeLine>
<Link id="l08334" /><CodeLine lineNumber="8334"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08335" /><CodeLine lineNumber="8335"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac3f8f8d8437c64b2e2e9f978e2707210">ISD::FP&#95;TO&#95;SINT</a>, dl, DstVT, Src);</Highlight></CodeLine>
<Link id="l08336" /><CodeLine lineNumber="8336"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08337" /><CodeLine lineNumber="8337"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08338" /><CodeLine lineNumber="8338"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08339" /><CodeLine lineNumber="8339"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Don&#39;t expand it if there isn&#39;t cheap fsub instruction.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08340" /><CodeLine lineNumber="8340"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(</Highlight></CodeLine>
<Link id="l08341" /><CodeLine lineNumber="8341"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;isStrictFPOpcode() ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad6192a54cb1dfeca8173749cc735269a">ISD::STRICT&#95;FSUB</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2852a5b6baa80b1589a46737210a8cad">ISD::FSUB</a>, SrcVT))</Highlight></CodeLine>
<Link id="l08342" /><CodeLine lineNumber="8342"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08343" /><CodeLine lineNumber="8343"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08344" /><CodeLine lineNumber="8344"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Cst = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(APF, dl, SrcVT);</Highlight></CodeLine>
<Link id="l08345" /><CodeLine lineNumber="8345"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Sel;</Highlight></CodeLine>
<Link id="l08346" /><CodeLine lineNumber="8346"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08347" /><CodeLine lineNumber="8347"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;isStrictFPOpcode()) &#123;</Highlight></CodeLine>
<Link id="l08348" /><CodeLine lineNumber="8348"><Highlight kind="normal">    Sel = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCVT, Src, Cst, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>,</Highlight></CodeLine>
<Link id="l08349" /><CodeLine lineNumber="8349"><Highlight kind="normal">                       <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0), </Highlight><Highlight kind="comment">/&#42;IsSignaling&#42;/</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l08350" /><CodeLine lineNumber="8350"><Highlight kind="normal">    <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = Sel.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(1);</Highlight></CodeLine>
<Link id="l08351" /><CodeLine lineNumber="8351"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l08352" /><CodeLine lineNumber="8352"><Highlight kind="normal">    Sel = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCVT, Src, Cst, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l08353" /><CodeLine lineNumber="8353"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08354" /><CodeLine lineNumber="8354"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08355" /><CodeLine lineNumber="8355"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/fpopfusion/#a9c71bae9f02af273833fde586d529fc5a451b4af21652249f72a40a7f9b88ca4f">Strict</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;isStrictFPOpcode() ||</Highlight></CodeLine>
<Link id="l08356" /><CodeLine lineNumber="8356"><Highlight kind="normal">                <a href="/docs/api/classes/llvm/targetloweringbase/#acfb6d055ff40649191068eae2f52a67b">shouldUseStrictFP&#95;TO&#95;INT</a>(SrcVT, DstVT, </Highlight><Highlight kind="comment">/&#42;IsSigned&#42;/</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l08357" /><CodeLine lineNumber="8357"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08358" /><CodeLine lineNumber="8358"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Strict) &#123;</Highlight></CodeLine>
<Link id="l08359" /><CodeLine lineNumber="8359"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Expand based on maximum range of FP&#95;TO&#95;SINT, if the value exceeds the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08360" /><CodeLine lineNumber="8360"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// signmask then offset (the result of which should be fully representable).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08361" /><CodeLine lineNumber="8361"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Sel = Src &lt; 9223372036854776000</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08362" /><CodeLine lineNumber="8362"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// FltOfs = select Sel, 0, 9223372036854776000</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08363" /><CodeLine lineNumber="8363"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// IntOfs = select Sel, 0, 9223372036854776000</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08364" /><CodeLine lineNumber="8364"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Result = fp&#95;to&#95;sint(Src - FltOfs) ^ IntOfs</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08365" /><CodeLine lineNumber="8365"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08366" /><CodeLine lineNumber="8366"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO: Should any fast-math-flags be set for the FSUB?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08367" /><CodeLine lineNumber="8367"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> FltOfs = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, SrcVT, Sel,</Highlight></CodeLine>
<Link id="l08368" /><CodeLine lineNumber="8368"><Highlight kind="normal">                                   DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(0.0, dl, SrcVT), Cst);</Highlight></CodeLine>
<Link id="l08369" /><CodeLine lineNumber="8369"><Highlight kind="normal">    Sel = DAG.<a href="/docs/api/classes/llvm/selectiondag/#aa7e66d5a43444879fa5037f2cfaa4de5">getBoolExtOrTrunc</a>(Sel, dl, DstSetCCVT, DstVT);</Highlight></CodeLine>
<Link id="l08370" /><CodeLine lineNumber="8370"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IntOfs = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, DstVT, Sel,</Highlight></CodeLine>
<Link id="l08371" /><CodeLine lineNumber="8371"><Highlight kind="normal">                                   DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, DstVT),</Highlight></CodeLine>
<Link id="l08372" /><CodeLine lineNumber="8372"><Highlight kind="normal">                                   DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(SignMask, dl, DstVT));</Highlight></CodeLine>
<Link id="l08373" /><CodeLine lineNumber="8373"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SInt;</Highlight></CodeLine>
<Link id="l08374" /><CodeLine lineNumber="8374"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;isStrictFPOpcode()) &#123;</Highlight></CodeLine>
<Link id="l08375" /><CodeLine lineNumber="8375"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Val = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad6192a54cb1dfeca8173749cc735269a">ISD::STRICT&#95;FSUB</a>, dl, &#123; SrcVT, MVT::Other &#125;,</Highlight></CodeLine>
<Link id="l08376" /><CodeLine lineNumber="8376"><Highlight kind="normal">                                &#123; <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a>, <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>, FltOfs &#125;);</Highlight></CodeLine>
<Link id="l08377" /><CodeLine lineNumber="8377"><Highlight kind="normal">      SInt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac2618c1a69fa9d62427a5a6dc43e24ed">ISD::STRICT&#95;FP&#95;TO&#95;SINT</a>, dl, &#123; DstVT, MVT::Other &#125;,</Highlight></CodeLine>
<Link id="l08378" /><CodeLine lineNumber="8378"><Highlight kind="normal">                         &#123; Val.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(1), Val &#125;);</Highlight></CodeLine>
<Link id="l08379" /><CodeLine lineNumber="8379"><Highlight kind="normal">      <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = SInt.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(1);</Highlight></CodeLine>
<Link id="l08380" /><CodeLine lineNumber="8380"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l08381" /><CodeLine lineNumber="8381"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Val = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2852a5b6baa80b1589a46737210a8cad">ISD::FSUB</a>, dl, SrcVT, Src, FltOfs);</Highlight></CodeLine>
<Link id="l08382" /><CodeLine lineNumber="8382"><Highlight kind="normal">      SInt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac3f8f8d8437c64b2e2e9f978e2707210">ISD::FP&#95;TO&#95;SINT</a>, dl, DstVT, Val);</Highlight></CodeLine>
<Link id="l08383" /><CodeLine lineNumber="8383"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08384" /><CodeLine lineNumber="8384"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, DstVT, SInt, IntOfs);</Highlight></CodeLine>
<Link id="l08385" /><CodeLine lineNumber="8385"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l08386" /><CodeLine lineNumber="8386"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Expand based on maximum range of FP&#95;TO&#95;SINT:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08387" /><CodeLine lineNumber="8387"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// True = fp&#95;to&#95;sint(Src)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08388" /><CodeLine lineNumber="8388"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// False = 9223372036854776000 + fp&#95;to&#95;sint(Src - 0x8000000000000000)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08389" /><CodeLine lineNumber="8389"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Result = select (Src &lt; 0x8000000000000000), True, False</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08390" /><CodeLine lineNumber="8390"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08391" /><CodeLine lineNumber="8391"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> True = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac3f8f8d8437c64b2e2e9f978e2707210">ISD::FP&#95;TO&#95;SINT</a>, dl, DstVT, Src);</Highlight></CodeLine>
<Link id="l08392" /><CodeLine lineNumber="8392"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO: Should any fast-math-flags be set for the FSUB?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08393" /><CodeLine lineNumber="8393"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> False = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac3f8f8d8437c64b2e2e9f978e2707210">ISD::FP&#95;TO&#95;SINT</a>, dl, DstVT,</Highlight></CodeLine>
<Link id="l08394" /><CodeLine lineNumber="8394"><Highlight kind="normal">                                DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2852a5b6baa80b1589a46737210a8cad">ISD::FSUB</a>, dl, SrcVT, Src, Cst));</Highlight></CodeLine>
<Link id="l08395" /><CodeLine lineNumber="8395"><Highlight kind="normal">    False = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, DstVT, False,</Highlight></CodeLine>
<Link id="l08396" /><CodeLine lineNumber="8396"><Highlight kind="normal">                        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(SignMask, dl, DstVT));</Highlight></CodeLine>
<Link id="l08397" /><CodeLine lineNumber="8397"><Highlight kind="normal">    Sel = DAG.<a href="/docs/api/classes/llvm/selectiondag/#aa7e66d5a43444879fa5037f2cfaa4de5">getBoolExtOrTrunc</a>(Sel, dl, DstSetCCVT, DstVT);</Highlight></CodeLine>
<Link id="l08398" /><CodeLine lineNumber="8398"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, DstVT, Sel, True, False);</Highlight></CodeLine>
<Link id="l08399" /><CodeLine lineNumber="8399"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08400" /><CodeLine lineNumber="8400"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08401" /><CodeLine lineNumber="8401"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l08402" /><CodeLine lineNumber="8402"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08403" /><CodeLine lineNumber="8403"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a1d9e993d1512edc0f76c3545a7730444">TargetLowering::expandUINT&#95;TO&#95;FP</a>(SDNode &#42;Node, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;Result,</Highlight></CodeLine>
<Link id="l08404" /><CodeLine lineNumber="8404"><Highlight kind="normal">                                      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;Chain, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l08405" /><CodeLine lineNumber="8405"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This transform is not correct for converting 0 when rounding mode is set</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08406" /><CodeLine lineNumber="8406"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// to round toward negative infinity which will produce -0.0. So disable</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08407" /><CodeLine lineNumber="8407"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// under strictfp.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08408" /><CodeLine lineNumber="8408"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;isStrictFPOpcode())</Highlight></CodeLine>
<Link id="l08409" /><CodeLine lineNumber="8409"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08410" /><CodeLine lineNumber="8410"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08411" /><CodeLine lineNumber="8411"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l08412" /><CodeLine lineNumber="8412"><Highlight kind="normal">  EVT SrcVT = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType();</Highlight></CodeLine>
<Link id="l08413" /><CodeLine lineNumber="8413"><Highlight kind="normal">  EVT DstVT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l08414" /><CodeLine lineNumber="8414"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08415" /><CodeLine lineNumber="8415"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the input is known to be non-negative and SINT&#95;TO&#95;FP is legal then use</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08416" /><CodeLine lineNumber="8416"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08417" /><CodeLine lineNumber="8417"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getFlags().hasNonNeg() &amp;&amp;</Highlight></CodeLine>
<Link id="l08418" /><CodeLine lineNumber="8418"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a315004656a75a3c3a9d7294f105a8da2">ISD::SINT&#95;TO&#95;FP</a>, SrcVT)) &#123;</Highlight></CodeLine>
<Link id="l08419" /><CodeLine lineNumber="8419"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> =</Highlight></CodeLine>
<Link id="l08420" /><CodeLine lineNumber="8420"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a315004656a75a3c3a9d7294f105a8da2">ISD::SINT&#95;TO&#95;FP</a>, SDLoc(Node), DstVT, <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0));</Highlight></CodeLine>
<Link id="l08421" /><CodeLine lineNumber="8421"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08422" /><CodeLine lineNumber="8422"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08423" /><CodeLine lineNumber="8423"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08424" /><CodeLine lineNumber="8424"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>() != MVT::i64 || DstVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>() != MVT::f64)</Highlight></CodeLine>
<Link id="l08425" /><CodeLine lineNumber="8425"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08426" /><CodeLine lineNumber="8426"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08427" /><CodeLine lineNumber="8427"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Only expand vector types if we have the appropriate vector bit</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08428" /><CodeLine lineNumber="8428"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// operations.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08429" /><CodeLine lineNumber="8429"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; (!<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, SrcVT) ||</Highlight></CodeLine>
<Link id="l08430" /><CodeLine lineNumber="8430"><Highlight kind="normal">                           !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a32ec12017722f5b42a295fe5eb0b0bdf">ISD::FADD</a>, DstVT) ||</Highlight></CodeLine>
<Link id="l08431" /><CodeLine lineNumber="8431"><Highlight kind="normal">                           !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2852a5b6baa80b1589a46737210a8cad">ISD::FSUB</a>, DstVT) ||</Highlight></CodeLine>
<Link id="l08432" /><CodeLine lineNumber="8432"><Highlight kind="normal">                           !<a href="/docs/api/classes/llvm/targetloweringbase/#afd2a90bd679de6f5964ce9b6f9931541">isOperationLegalOrCustomOrPromote</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, SrcVT) ||</Highlight></CodeLine>
<Link id="l08433" /><CodeLine lineNumber="8433"><Highlight kind="normal">                           !<a href="/docs/api/classes/llvm/targetloweringbase/#afd2a90bd679de6f5964ce9b6f9931541">isOperationLegalOrCustomOrPromote</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, SrcVT)))</Highlight></CodeLine>
<Link id="l08434" /><CodeLine lineNumber="8434"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08435" /><CodeLine lineNumber="8435"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08436" /><CodeLine lineNumber="8436"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(Node, 0));</Highlight></CodeLine>
<Link id="l08437" /><CodeLine lineNumber="8437"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08438" /><CodeLine lineNumber="8438"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Implementation of unsigned i64 to f64 following the algorithm in</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08439" /><CodeLine lineNumber="8439"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// &#95;&#95;floatundidf in compiler&#95;rt.  This implementation performs rounding</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08440" /><CodeLine lineNumber="8440"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// correctly in all rounding modes with the exception of converting 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08441" /><CodeLine lineNumber="8441"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// when rounding toward negative infinity. In that case the fsub will</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08442" /><CodeLine lineNumber="8442"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// produce -0.0. This will be added to 0 and produce 0 which is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08443" /><CodeLine lineNumber="8443"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// incorrect.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08444" /><CodeLine lineNumber="8444"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TwoP52 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(UINT64&#95;C(0x4330000000000000), dl, SrcVT);</Highlight></CodeLine>
<Link id="l08445" /><CodeLine lineNumber="8445"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TwoP84PlusTwoP52 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(</Highlight></CodeLine>
<Link id="l08446" /><CodeLine lineNumber="8446"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#aab3863f16cb0767af49f0dd63bc5aa90">llvm::bit&#95;cast&lt;double&gt;</a>(UINT64&#95;C(0x4530000000100000)), dl, DstVT);</Highlight></CodeLine>
<Link id="l08447" /><CodeLine lineNumber="8447"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TwoP84 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(UINT64&#95;C(0x4530000000000000), dl, SrcVT);</Highlight></CodeLine>
<Link id="l08448" /><CodeLine lineNumber="8448"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LoMask = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(UINT64&#95;C(0x00000000FFFFFFFF), dl, SrcVT);</Highlight></CodeLine>
<Link id="l08449" /><CodeLine lineNumber="8449"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> HiShift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(32, SrcVT, dl);</Highlight></CodeLine>
<Link id="l08450" /><CodeLine lineNumber="8450"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08451" /><CodeLine lineNumber="8451"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, SrcVT, Src, LoMask);</Highlight></CodeLine>
<Link id="l08452" /><CodeLine lineNumber="8452"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, SrcVT, Src, HiShift);</Highlight></CodeLine>
<Link id="l08453" /><CodeLine lineNumber="8453"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LoOr = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, SrcVT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, TwoP52);</Highlight></CodeLine>
<Link id="l08454" /><CodeLine lineNumber="8454"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> HiOr = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, SrcVT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, TwoP84);</Highlight></CodeLine>
<Link id="l08455" /><CodeLine lineNumber="8455"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LoFlt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a64f6469ab95c4eec77e4ccf303619a81">getBitcast</a>(DstVT, LoOr);</Highlight></CodeLine>
<Link id="l08456" /><CodeLine lineNumber="8456"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> HiFlt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a64f6469ab95c4eec77e4ccf303619a81">getBitcast</a>(DstVT, HiOr);</Highlight></CodeLine>
<Link id="l08457" /><CodeLine lineNumber="8457"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> HiSub = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a2852a5b6baa80b1589a46737210a8cad">ISD::FSUB</a>, dl, DstVT, HiFlt, TwoP84PlusTwoP52);</Highlight></CodeLine>
<Link id="l08458" /><CodeLine lineNumber="8458"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a32ec12017722f5b42a295fe5eb0b0bdf">ISD::FADD</a>, dl, DstVT, LoFlt, HiSub);</Highlight></CodeLine>
<Link id="l08459" /><CodeLine lineNumber="8459"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08460" /><CodeLine lineNumber="8460"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l08461" /><CodeLine lineNumber="8461"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08462" /><CodeLine lineNumber="8462"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a></Highlight></CodeLine>
<Link id="l08463" /><CodeLine lineNumber="8463"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#afb677d589b9b39e03a0f38a86411ad3b">TargetLowering::createSelectForFMINNUM&#95;FMAXNUM</a>(SDNode &#42;Node,</Highlight></CodeLine>
<Link id="l08464" /><CodeLine lineNumber="8464"><Highlight kind="normal">                                               SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l08465" /><CodeLine lineNumber="8465"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opcode = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode();</Highlight></CodeLine>
<Link id="l08466" /><CodeLine lineNumber="8466"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Opcode == ISD::FMINNUM || Opcode == ISD::FMAXNUM ||</Highlight></CodeLine>
<Link id="l08467" /><CodeLine lineNumber="8467"><Highlight kind="normal">          Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a98f18e85e4e6421f5c859680602a4c1f">ISD::STRICT&#95;FMINNUM</a> || Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92f7a0e4dfe860ff938d463d84270ba3">ISD::STRICT&#95;FMAXNUM</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l08468" /><CodeLine lineNumber="8468"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Wrong opcode&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l08469" /><CodeLine lineNumber="8469"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08470" /><CodeLine lineNumber="8470"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getFlags().hasNoNaNs()) &#123;</Highlight></CodeLine>
<Link id="l08471" /><CodeLine lineNumber="8471"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> Pred = Opcode == ISD::FMINNUM ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a>;</Highlight></CodeLine>
<Link id="l08472" /><CodeLine lineNumber="8472"><Highlight kind="normal">    EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l08473" /><CodeLine lineNumber="8473"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((!<a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(Pred, VT.<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>()) ||</Highlight></CodeLine>
<Link id="l08474" /><CodeLine lineNumber="8474"><Highlight kind="normal">         !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0b7d2c769fd0fbaab3c4a2fc8e7ea0c">ISD::VSELECT</a>, VT)) &amp;&amp;</Highlight></CodeLine>
<Link id="l08475" /><CodeLine lineNumber="8475"><Highlight kind="normal">        VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>())</Highlight></CodeLine>
<Link id="l08476" /><CodeLine lineNumber="8476"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l08477" /><CodeLine lineNumber="8477"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l08478" /><CodeLine lineNumber="8478"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op2 = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l08479" /><CodeLine lineNumber="8479"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SelCC = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab30ac12d744d55e5d9d8795b1ce53433">getSelectCC</a>(SDLoc(Node), Op1, Op2, Op1, Op2, Pred);</Highlight></CodeLine>
<Link id="l08480" /><CodeLine lineNumber="8480"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Copy FMF flags, but always set the no-signed-zeros flag</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08481" /><CodeLine lineNumber="8481"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// as this is implied by the FMINNUM/FMAXNUM semantics.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08482" /><CodeLine lineNumber="8482"><Highlight kind="normal">    SelCC-&gt;<a href="/docs/api/classes/llvm/sdnode/#add49be7f78dace3e4363786d14d30899">setFlags</a>(<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getFlags() | <a href="/docs/api/structs/llvm/sdnodeflags/#a19128eb1e6729dd3cf2afce783620adaae86a58596335f8284ff29cbd35cbe192">SDNodeFlags::NoSignedZeros</a>);</Highlight></CodeLine>
<Link id="l08483" /><CodeLine lineNumber="8483"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> SelCC;</Highlight></CodeLine>
<Link id="l08484" /><CodeLine lineNumber="8484"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08485" /><CodeLine lineNumber="8485"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08486" /><CodeLine lineNumber="8486"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l08487" /><CodeLine lineNumber="8487"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l08488" /><CodeLine lineNumber="8488"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08489" /><CodeLine lineNumber="8489"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a2615b4208115a17e0cc88dc5e7142ee9">TargetLowering::expandFMINNUM&#95;FMAXNUM</a>(SDNode &#42;Node,</Highlight></CodeLine>
<Link id="l08490" /><CodeLine lineNumber="8490"><Highlight kind="normal">                                              SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l08491" /><CodeLine lineNumber="8491"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Expanded = expandVectorNaryOpBySplitting(Node, DAG))</Highlight></CodeLine>
<Link id="l08492" /><CodeLine lineNumber="8492"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Expanded;</Highlight></CodeLine>
<Link id="l08493" /><CodeLine lineNumber="8493"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08494" /><CodeLine lineNumber="8494"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l08495" /><CodeLine lineNumber="8495"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l08496" /><CodeLine lineNumber="8496"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7f2a3d4dcfee70225988aec53ff1e173">report&#95;fatal&#95;error</a>(</Highlight></CodeLine>
<Link id="l08497" /><CodeLine lineNumber="8497"><Highlight kind="normal">        </Highlight><Highlight kind="stringliteral">&quot;Expanding fminnum/fmaxnum for scalable vectors is undefined.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l08498" /><CodeLine lineNumber="8498"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08499" /><CodeLine lineNumber="8499"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l08500" /><CodeLine lineNumber="8500"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NewOp =</Highlight></CodeLine>
<Link id="l08501" /><CodeLine lineNumber="8501"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == ISD::FMINNUM ? ISD::FMINNUM&#95;IEEE : ISD::FMAXNUM&#95;IEEE;</Highlight></CodeLine>
<Link id="l08502" /><CodeLine lineNumber="8502"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08503" /><CodeLine lineNumber="8503"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(NewOp, VT)) &#123;</Highlight></CodeLine>
<Link id="l08504" /><CodeLine lineNumber="8504"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Quiet0 = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l08505" /><CodeLine lineNumber="8505"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Quiet1 = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l08506" /><CodeLine lineNumber="8506"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08507" /><CodeLine lineNumber="8507"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getFlags().hasNoNaNs()) &#123;</Highlight></CodeLine>
<Link id="l08508" /><CodeLine lineNumber="8508"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Insert canonicalizes if it&#39;s possible we need to quiet to get correct</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08509" /><CodeLine lineNumber="8509"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// sNaN behavior.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08510" /><CodeLine lineNumber="8510"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DAG.<a href="/docs/api/classes/llvm/selectiondag/#a0da57507f04fced034b498faff01f90b">isKnownNeverSNaN</a>(Quiet0)) &#123;</Highlight></CodeLine>
<Link id="l08511" /><CodeLine lineNumber="8511"><Highlight kind="normal">        Quiet0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a74a787311d3ab9a17ee0acde7b6a6b14">ISD::FCANONICALIZE</a>, dl, VT, Quiet0,</Highlight></CodeLine>
<Link id="l08512" /><CodeLine lineNumber="8512"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getFlags());</Highlight></CodeLine>
<Link id="l08513" /><CodeLine lineNumber="8513"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l08514" /><CodeLine lineNumber="8514"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DAG.<a href="/docs/api/classes/llvm/selectiondag/#a0da57507f04fced034b498faff01f90b">isKnownNeverSNaN</a>(Quiet1)) &#123;</Highlight></CodeLine>
<Link id="l08515" /><CodeLine lineNumber="8515"><Highlight kind="normal">        Quiet1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a74a787311d3ab9a17ee0acde7b6a6b14">ISD::FCANONICALIZE</a>, dl, VT, Quiet1,</Highlight></CodeLine>
<Link id="l08516" /><CodeLine lineNumber="8516"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getFlags());</Highlight></CodeLine>
<Link id="l08517" /><CodeLine lineNumber="8517"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l08518" /><CodeLine lineNumber="8518"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08519" /><CodeLine lineNumber="8519"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08520" /><CodeLine lineNumber="8520"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(NewOp, dl, VT, Quiet0, Quiet1, <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getFlags());</Highlight></CodeLine>
<Link id="l08521" /><CodeLine lineNumber="8521"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08522" /><CodeLine lineNumber="8522"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08523" /><CodeLine lineNumber="8523"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the target has FMINIMUM/FMAXIMUM but not FMINNUM/FMAXNUM use that</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08524" /><CodeLine lineNumber="8524"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// instead if there are no NaNs and there can&#39;t be an incompatible zero</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08525" /><CodeLine lineNumber="8525"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// compare: at least one operand isn&#39;t +/-0, or there are no signed-zeros.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08526" /><CodeLine lineNumber="8526"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getFlags().hasNoNaNs() ||</Highlight></CodeLine>
<Link id="l08527" /><CodeLine lineNumber="8527"><Highlight kind="normal">       (DAG.<a href="/docs/api/classes/llvm/selectiondag/#abe962d3ec6cf36e8bf3c051fd2754a33">isKnownNeverNaN</a>(<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0)) &amp;&amp;</Highlight></CodeLine>
<Link id="l08528" /><CodeLine lineNumber="8528"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#abe962d3ec6cf36e8bf3c051fd2754a33">isKnownNeverNaN</a>(<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1)))) &amp;&amp;</Highlight></CodeLine>
<Link id="l08529" /><CodeLine lineNumber="8529"><Highlight kind="normal">      (<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getFlags().hasNoSignedZeros() ||</Highlight></CodeLine>
<Link id="l08530" /><CodeLine lineNumber="8530"><Highlight kind="normal">       DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab5835737100eb8c242fbafada69bc19c">isKnownNeverZeroFloat</a>(<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0)) ||</Highlight></CodeLine>
<Link id="l08531" /><CodeLine lineNumber="8531"><Highlight kind="normal">       DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab5835737100eb8c242fbafada69bc19c">isKnownNeverZeroFloat</a>(<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1)))) &#123;</Highlight></CodeLine>
<Link id="l08532" /><CodeLine lineNumber="8532"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> IEEE2018Op =</Highlight></CodeLine>
<Link id="l08533" /><CodeLine lineNumber="8533"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == ISD::FMINNUM ? ISD::FMINIMUM : ISD::FMAXIMUM;</Highlight></CodeLine>
<Link id="l08534" /><CodeLine lineNumber="8534"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(IEEE2018Op, VT))</Highlight></CodeLine>
<Link id="l08535" /><CodeLine lineNumber="8535"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(IEEE2018Op, dl, VT, <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0),</Highlight></CodeLine>
<Link id="l08536" /><CodeLine lineNumber="8536"><Highlight kind="normal">                         <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1), <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getFlags());</Highlight></CodeLine>
<Link id="l08537" /><CodeLine lineNumber="8537"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08538" /><CodeLine lineNumber="8538"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08539" /><CodeLine lineNumber="8539"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SelCC = createSelectForFMINNUM&#95;FMAXNUM(Node, DAG))</Highlight></CodeLine>
<Link id="l08540" /><CodeLine lineNumber="8540"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> SelCC;</Highlight></CodeLine>
<Link id="l08541" /><CodeLine lineNumber="8541"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08542" /><CodeLine lineNumber="8542"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l08543" /><CodeLine lineNumber="8543"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l08544" /><CodeLine lineNumber="8544"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08545" /><CodeLine lineNumber="8545"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a942902db44f41703d4055454e2b39332">TargetLowering::expandFMINIMUM&#95;FMAXIMUM</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>,</Highlight></CodeLine>
<Link id="l08546" /><CodeLine lineNumber="8546"><Highlight kind="normal">                                                SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l08547" /><CodeLine lineNumber="8547"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Expanded = expandVectorNaryOpBySplitting(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, DAG))</Highlight></CodeLine>
<Link id="l08548" /><CodeLine lineNumber="8548"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Expanded;</Highlight></CodeLine>
<Link id="l08549" /><CodeLine lineNumber="8549"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08550" /><CodeLine lineNumber="8550"><Highlight kind="normal">  SDLoc <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l08551" /><CodeLine lineNumber="8551"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l08552" /><CodeLine lineNumber="8552"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l08553" /><CodeLine lineNumber="8553"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opc = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOpcode();</Highlight></CodeLine>
<Link id="l08554" /><CodeLine lineNumber="8554"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l08555" /><CodeLine lineNumber="8555"><Highlight kind="normal">  EVT CCVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l08556" /><CodeLine lineNumber="8556"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsMax = Opc == ISD::FMAXIMUM;</Highlight></CodeLine>
<Link id="l08557" /><CodeLine lineNumber="8557"><Highlight kind="normal">  SDNodeFlags <a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a> = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getFlags();</Highlight></CodeLine>
<Link id="l08558" /><CodeLine lineNumber="8558"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08559" /><CodeLine lineNumber="8559"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// First, implement comparison not propagating NaN. If no native fmin or fmax</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08560" /><CodeLine lineNumber="8560"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// available, use plain select with setcc instead.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08561" /><CodeLine lineNumber="8561"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> MinMax;</Highlight></CodeLine>
<Link id="l08562" /><CodeLine lineNumber="8562"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> CompOpcIeee = IsMax ? ISD::FMAXNUM&#95;IEEE : ISD::FMINNUM&#95;IEEE;</Highlight></CodeLine>
<Link id="l08563" /><CodeLine lineNumber="8563"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> CompOpc = IsMax ? ISD::FMAXNUM : ISD::FMINNUM;</Highlight></CodeLine>
<Link id="l08564" /><CodeLine lineNumber="8564"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08565" /><CodeLine lineNumber="8565"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: We should probably define fminnum/fmaxnum variants with correct</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08566" /><CodeLine lineNumber="8566"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// signed zero behavior.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08567" /><CodeLine lineNumber="8567"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> MinMaxMustRespectOrderedZero = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08568" /><CodeLine lineNumber="8568"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08569" /><CodeLine lineNumber="8569"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(CompOpcIeee, VT)) &#123;</Highlight></CodeLine>
<Link id="l08570" /><CodeLine lineNumber="8570"><Highlight kind="normal">    MinMax = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(CompOpcIeee, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Flags);</Highlight></CodeLine>
<Link id="l08571" /><CodeLine lineNumber="8571"><Highlight kind="normal">    MinMaxMustRespectOrderedZero = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08572" /><CodeLine lineNumber="8572"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(CompOpc, VT)) &#123;</Highlight></CodeLine>
<Link id="l08573" /><CodeLine lineNumber="8573"><Highlight kind="normal">    MinMax = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(CompOpc, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Flags);</Highlight></CodeLine>
<Link id="l08574" /><CodeLine lineNumber="8574"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l08575" /><CodeLine lineNumber="8575"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0b7d2c769fd0fbaab3c4a2fc8e7ea0c">ISD::VSELECT</a>, VT))</Highlight></CodeLine>
<Link id="l08576" /><CodeLine lineNumber="8576"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a305a3a4874c597243cd5ba04af01339e">UnrollVectorOp</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l08577" /><CodeLine lineNumber="8577"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08578" /><CodeLine lineNumber="8578"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// NaN (if exists) will be propagated later, so orderness doesn&#39;t matter.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08579" /><CodeLine lineNumber="8579"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/mcid/#ab357441fcd1ea1f9b0d27c12700f6023a1328ed43be8173506f59f88c9bfd8b8c">Compare</a> =</Highlight></CodeLine>
<Link id="l08580" /><CodeLine lineNumber="8580"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CCVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, IsMax ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a31d1e24e08b255d6aa290d67d16ce2c9">ISD::SETOGT</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a20257a4d3833cf88afd42caeaed70dde">ISD::SETOLT</a>);</Highlight></CodeLine>
<Link id="l08581" /><CodeLine lineNumber="8581"><Highlight kind="normal">    MinMax = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Compare, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Flags);</Highlight></CodeLine>
<Link id="l08582" /><CodeLine lineNumber="8582"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08583" /><CodeLine lineNumber="8583"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08584" /><CodeLine lineNumber="8584"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Propagate any NaN of both operands</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08585" /><CodeLine lineNumber="8585"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getFlags().hasNoNaNs() &amp;&amp;</Highlight></CodeLine>
<Link id="l08586" /><CodeLine lineNumber="8586"><Highlight kind="normal">      (!DAG.<a href="/docs/api/classes/llvm/selectiondag/#abe962d3ec6cf36e8bf3c051fd2754a33">isKnownNeverNaN</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) || !DAG.<a href="/docs/api/classes/llvm/selectiondag/#abe962d3ec6cf36e8bf3c051fd2754a33">isKnownNeverNaN</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>))) &#123;</Highlight></CodeLine>
<Link id="l08587" /><CodeLine lineNumber="8587"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1be4c8da7c68a4c683de1a98b5cc5b9d">ConstantFP</a> &#42;FPNaN = ConstantFP::get(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(),</Highlight></CodeLine>
<Link id="l08588" /><CodeLine lineNumber="8588"><Highlight kind="normal">                                        <a href="/docs/api/classes/llvm/apfloat/#aeecd5fa66870de83d235933a683b5952">APFloat::getNaN</a>(VT.<a href="/docs/api/structs/llvm/evt/#adf42d7b6a69dc15a64f841d51a9c93b7">getFltSemantics</a>()));</Highlight></CodeLine>
<Link id="l08589" /><CodeLine lineNumber="8589"><Highlight kind="normal">    MinMax = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CCVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a48a334bbe606d5e82c9cd84eaa127b50">ISD::SETUO</a>),</Highlight></CodeLine>
<Link id="l08590" /><CodeLine lineNumber="8590"><Highlight kind="normal">                           DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(&#42;FPNaN, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT), MinMax, Flags);</Highlight></CodeLine>
<Link id="l08591" /><CodeLine lineNumber="8591"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08592" /><CodeLine lineNumber="8592"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08593" /><CodeLine lineNumber="8593"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// fminimum/fmaximum requires 0 less than 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08594" /><CodeLine lineNumber="8594"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!MinMaxMustRespectOrderedZero &amp;&amp; !<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getFlags().hasNoSignedZeros() &amp;&amp;</Highlight></CodeLine>
<Link id="l08595" /><CodeLine lineNumber="8595"><Highlight kind="normal">      !DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab5835737100eb8c242fbafada69bc19c">isKnownNeverZeroFloat</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) &amp;&amp; !DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab5835737100eb8c242fbafada69bc19c">isKnownNeverZeroFloat</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)) &#123;</Highlight></CodeLine>
<Link id="l08596" /><CodeLine lineNumber="8596"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IsZero = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CCVT, MinMax,</Highlight></CodeLine>
<Link id="l08597" /><CodeLine lineNumber="8597"><Highlight kind="normal">                                  DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(0.0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT), <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a08c31033acfb9d6f0bc4a8a82cc26862">ISD::SETOEQ</a>);</Highlight></CodeLine>
<Link id="l08598" /><CodeLine lineNumber="8598"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TestZero =</Highlight></CodeLine>
<Link id="l08599" /><CodeLine lineNumber="8599"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#abf892d1e00a3d79026c5ab518c187c45">getTargetConstant</a>(IsMax ? <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da7ace586671df3e62fa392d5144a8b3da">fcPosZero</a> : <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da1e8072411cd3959aa091c3cae8006dc0">fcNegZero</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, MVT::i32);</Highlight></CodeLine>
<Link id="l08600" /><CodeLine lineNumber="8600"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LCmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(</Highlight></CodeLine>
<Link id="l08601" /><CodeLine lineNumber="8601"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a76b6d3008e806ea613323ff316ef72c3">ISD::IS&#95;FPCLASS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CCVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, TestZero), <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</Highlight></CodeLine>
<Link id="l08602" /><CodeLine lineNumber="8602"><Highlight kind="normal">        MinMax, Flags);</Highlight></CodeLine>
<Link id="l08603" /><CodeLine lineNumber="8603"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> RCmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(</Highlight></CodeLine>
<Link id="l08604" /><CodeLine lineNumber="8604"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a76b6d3008e806ea613323ff316ef72c3">ISD::IS&#95;FPCLASS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CCVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, TestZero), <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</Highlight></CodeLine>
<Link id="l08605" /><CodeLine lineNumber="8605"><Highlight kind="normal">        LCmp, Flags);</Highlight></CodeLine>
<Link id="l08606" /><CodeLine lineNumber="8606"><Highlight kind="normal">    MinMax = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, IsZero, RCmp, MinMax, Flags);</Highlight></CodeLine>
<Link id="l08607" /><CodeLine lineNumber="8607"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08608" /><CodeLine lineNumber="8608"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08609" /><CodeLine lineNumber="8609"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> MinMax;</Highlight></CodeLine>
<Link id="l08610" /><CodeLine lineNumber="8610"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l08611" /><CodeLine lineNumber="8611"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08612" /><CodeLine lineNumber="8612"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#ab4b58e5ebed5507d40b5e4c0e5e5d19a">TargetLowering::expandFMINIMUMNUM&#95;FMAXIMUMNUM</a>(SDNode &#42;Node,</Highlight></CodeLine>
<Link id="l08613" /><CodeLine lineNumber="8613"><Highlight kind="normal">                                                      SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l08614" /><CodeLine lineNumber="8614"><Highlight kind="normal">  SDLoc <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(Node);</Highlight></CodeLine>
<Link id="l08615" /><CodeLine lineNumber="8615"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l08616" /><CodeLine lineNumber="8616"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l08617" /><CodeLine lineNumber="8617"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opc = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode();</Highlight></CodeLine>
<Link id="l08618" /><CodeLine lineNumber="8618"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l08619" /><CodeLine lineNumber="8619"><Highlight kind="normal">  EVT CCVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l08620" /><CodeLine lineNumber="8620"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsMax = Opc == ISD::FMAXIMUMNUM;</Highlight></CodeLine>
<Link id="l08621" /><CodeLine lineNumber="8621"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> TargetOptions &amp;<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/logicalview/lib/debuginfo/logicalview/core/lvoptions-cpp/#ab4088b7a11f3cbc38ac16a6e9c72494e">Options</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#aa99670b16fe6d370e306896cd91b6fa6">getTarget</a>().<a href="/docs/api/classes/llvm/targetmachine/#ab1fb67187fc37e569cc5171cbebba873">Options</a>;</Highlight></CodeLine>
<Link id="l08622" /><CodeLine lineNumber="8622"><Highlight kind="normal">  SDNodeFlags <a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getFlags();</Highlight></CodeLine>
<Link id="l08623" /><CodeLine lineNumber="8623"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08624" /><CodeLine lineNumber="8624"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NewOp =</Highlight></CodeLine>
<Link id="l08625" /><CodeLine lineNumber="8625"><Highlight kind="normal">      Opc == ISD::FMINIMUMNUM ? ISD::FMINNUM&#95;IEEE : ISD::FMAXNUM&#95;IEEE;</Highlight></CodeLine>
<Link id="l08626" /><CodeLine lineNumber="8626"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08627" /><CodeLine lineNumber="8627"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(NewOp, VT)) &#123;</Highlight></CodeLine>
<Link id="l08628" /><CodeLine lineNumber="8628"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.hasNoNaNs()) &#123;</Highlight></CodeLine>
<Link id="l08629" /><CodeLine lineNumber="8629"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Insert canonicalizes if it&#39;s possible we need to quiet to get correct</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08630" /><CodeLine lineNumber="8630"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// sNaN behavior.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08631" /><CodeLine lineNumber="8631"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DAG.<a href="/docs/api/classes/llvm/selectiondag/#a0da57507f04fced034b498faff01f90b">isKnownNeverSNaN</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)) &#123;</Highlight></CodeLine>
<Link id="l08632" /><CodeLine lineNumber="8632"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a74a787311d3ab9a17ee0acde7b6a6b14">ISD::FCANONICALIZE</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Flags);</Highlight></CodeLine>
<Link id="l08633" /><CodeLine lineNumber="8633"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l08634" /><CodeLine lineNumber="8634"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!DAG.<a href="/docs/api/classes/llvm/selectiondag/#a0da57507f04fced034b498faff01f90b">isKnownNeverSNaN</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)) &#123;</Highlight></CodeLine>
<Link id="l08635" /><CodeLine lineNumber="8635"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a74a787311d3ab9a17ee0acde7b6a6b14">ISD::FCANONICALIZE</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Flags);</Highlight></CodeLine>
<Link id="l08636" /><CodeLine lineNumber="8636"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l08637" /><CodeLine lineNumber="8637"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08638" /><CodeLine lineNumber="8638"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08639" /><CodeLine lineNumber="8639"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(NewOp, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Flags);</Highlight></CodeLine>
<Link id="l08640" /><CodeLine lineNumber="8640"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08641" /><CodeLine lineNumber="8641"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08642" /><CodeLine lineNumber="8642"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We can use FMINIMUM/FMAXIMUM if there is no NaN, since it has</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08643" /><CodeLine lineNumber="8643"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// same behaviors for all of other cases: 0 vs 0 included.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08644" /><CodeLine lineNumber="8644"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.hasNoNaNs() ||</Highlight></CodeLine>
<Link id="l08645" /><CodeLine lineNumber="8645"><Highlight kind="normal">      (DAG.<a href="/docs/api/classes/llvm/selectiondag/#abe962d3ec6cf36e8bf3c051fd2754a33">isKnownNeverNaN</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) &amp;&amp; DAG.<a href="/docs/api/classes/llvm/selectiondag/#abe962d3ec6cf36e8bf3c051fd2754a33">isKnownNeverNaN</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))) &#123;</Highlight></CodeLine>
<Link id="l08646" /><CodeLine lineNumber="8646"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> IEEE2019Op =</Highlight></CodeLine>
<Link id="l08647" /><CodeLine lineNumber="8647"><Highlight kind="normal">        Opc == ISD::FMINIMUMNUM ? ISD::FMINIMUM : ISD::FMAXIMUM;</Highlight></CodeLine>
<Link id="l08648" /><CodeLine lineNumber="8648"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(IEEE2019Op, VT))</Highlight></CodeLine>
<Link id="l08649" /><CodeLine lineNumber="8649"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(IEEE2019Op, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Flags);</Highlight></CodeLine>
<Link id="l08650" /><CodeLine lineNumber="8650"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08651" /><CodeLine lineNumber="8651"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08652" /><CodeLine lineNumber="8652"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FMINNUM/FMAXMUM returns qNaN if either operand is sNaN, and it may return</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08653" /><CodeLine lineNumber="8653"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// either one for 0 vs -0.0.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08654" /><CodeLine lineNumber="8654"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.hasNoNaNs() ||</Highlight></CodeLine>
<Link id="l08655" /><CodeLine lineNumber="8655"><Highlight kind="normal">       (DAG.<a href="/docs/api/classes/llvm/selectiondag/#a0da57507f04fced034b498faff01f90b">isKnownNeverSNaN</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) &amp;&amp; DAG.<a href="/docs/api/classes/llvm/selectiondag/#a0da57507f04fced034b498faff01f90b">isKnownNeverSNaN</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))) &amp;&amp;</Highlight></CodeLine>
<Link id="l08656" /><CodeLine lineNumber="8656"><Highlight kind="normal">      (<a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.hasNoSignedZeros() || DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab5835737100eb8c242fbafada69bc19c">isKnownNeverZeroFloat</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) ||</Highlight></CodeLine>
<Link id="l08657" /><CodeLine lineNumber="8657"><Highlight kind="normal">       DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab5835737100eb8c242fbafada69bc19c">isKnownNeverZeroFloat</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))) &#123;</Highlight></CodeLine>
<Link id="l08658" /><CodeLine lineNumber="8658"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> IEEE2008Op = Opc == ISD::FMINIMUMNUM ? ISD::FMINNUM : ISD::FMAXNUM;</Highlight></CodeLine>
<Link id="l08659" /><CodeLine lineNumber="8659"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(IEEE2008Op, VT))</Highlight></CodeLine>
<Link id="l08660" /><CodeLine lineNumber="8660"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(IEEE2008Op, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Flags);</Highlight></CodeLine>
<Link id="l08661" /><CodeLine lineNumber="8661"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08662" /><CodeLine lineNumber="8662"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08663" /><CodeLine lineNumber="8663"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0b7d2c769fd0fbaab3c4a2fc8e7ea0c">ISD::VSELECT</a>, VT))</Highlight></CodeLine>
<Link id="l08664" /><CodeLine lineNumber="8664"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a305a3a4874c597243cd5ba04af01339e">UnrollVectorOp</a>(Node);</Highlight></CodeLine>
<Link id="l08665" /><CodeLine lineNumber="8665"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08666" /><CodeLine lineNumber="8666"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If only one operand is NaN, override it with another operand.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08667" /><CodeLine lineNumber="8667"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.hasNoNaNs() &amp;&amp; !DAG.<a href="/docs/api/classes/llvm/selectiondag/#abe962d3ec6cf36e8bf3c051fd2754a33">isKnownNeverNaN</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)) &#123;</Highlight></CodeLine>
<Link id="l08668" /><CodeLine lineNumber="8668"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab30ac12d744d55e5d9d8795b1ce53433">getSelectCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a48a334bbe606d5e82c9cd84eaa127b50">ISD::SETUO</a>);</Highlight></CodeLine>
<Link id="l08669" /><CodeLine lineNumber="8669"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08670" /><CodeLine lineNumber="8670"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.hasNoNaNs() &amp;&amp; !DAG.<a href="/docs/api/classes/llvm/selectiondag/#abe962d3ec6cf36e8bf3c051fd2754a33">isKnownNeverNaN</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)) &#123;</Highlight></CodeLine>
<Link id="l08671" /><CodeLine lineNumber="8671"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab30ac12d744d55e5d9d8795b1ce53433">getSelectCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a48a334bbe606d5e82c9cd84eaa127b50">ISD::SETUO</a>);</Highlight></CodeLine>
<Link id="l08672" /><CodeLine lineNumber="8672"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08673" /><CodeLine lineNumber="8673"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08674" /><CodeLine lineNumber="8674"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> MinMax =</Highlight></CodeLine>
<Link id="l08675" /><CodeLine lineNumber="8675"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab30ac12d744d55e5d9d8795b1ce53433">getSelectCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, IsMax ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l08676" /><CodeLine lineNumber="8676"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If MinMax is NaN, let&#39;s quiet it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08677" /><CodeLine lineNumber="8677"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.hasNoNaNs() &amp;&amp; !DAG.<a href="/docs/api/classes/llvm/selectiondag/#abe962d3ec6cf36e8bf3c051fd2754a33">isKnownNeverNaN</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l08678" /><CodeLine lineNumber="8678"><Highlight kind="normal">      !DAG.<a href="/docs/api/classes/llvm/selectiondag/#abe962d3ec6cf36e8bf3c051fd2754a33">isKnownNeverNaN</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)) &#123;</Highlight></CodeLine>
<Link id="l08679" /><CodeLine lineNumber="8679"><Highlight kind="normal">    MinMax = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a74a787311d3ab9a17ee0acde7b6a6b14">ISD::FCANONICALIZE</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, MinMax, Flags);</Highlight></CodeLine>
<Link id="l08680" /><CodeLine lineNumber="8680"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08681" /><CodeLine lineNumber="8681"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08682" /><CodeLine lineNumber="8682"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Fixup signed zero behavior.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08683" /><CodeLine lineNumber="8683"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/logicalview/lib/debuginfo/logicalview/core/lvoptions-cpp/#ab4088b7a11f3cbc38ac16a6e9c72494e">Options</a>.NoSignedZerosFPMath || <a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.hasNoSignedZeros() ||</Highlight></CodeLine>
<Link id="l08684" /><CodeLine lineNumber="8684"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab5835737100eb8c242fbafada69bc19c">isKnownNeverZeroFloat</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) || DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab5835737100eb8c242fbafada69bc19c">isKnownNeverZeroFloat</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)) &#123;</Highlight></CodeLine>
<Link id="l08685" /><CodeLine lineNumber="8685"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> MinMax;</Highlight></CodeLine>
<Link id="l08686" /><CodeLine lineNumber="8686"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08687" /><CodeLine lineNumber="8687"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TestZero =</Highlight></CodeLine>
<Link id="l08688" /><CodeLine lineNumber="8688"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abf892d1e00a3d79026c5ab518c187c45">getTargetConstant</a>(IsMax ? <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da7ace586671df3e62fa392d5144a8b3da">fcPosZero</a> : <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da1e8072411cd3959aa091c3cae8006dc0">fcNegZero</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, MVT::i32);</Highlight></CodeLine>
<Link id="l08689" /><CodeLine lineNumber="8689"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IsZero = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CCVT, MinMax,</Highlight></CodeLine>
<Link id="l08690" /><CodeLine lineNumber="8690"><Highlight kind="normal">                                DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(0.0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT), <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l08691" /><CodeLine lineNumber="8691"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LCmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(</Highlight></CodeLine>
<Link id="l08692" /><CodeLine lineNumber="8692"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a76b6d3008e806ea613323ff316ef72c3">ISD::IS&#95;FPCLASS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CCVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, TestZero), <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</Highlight></CodeLine>
<Link id="l08693" /><CodeLine lineNumber="8693"><Highlight kind="normal">      MinMax, Flags);</Highlight></CodeLine>
<Link id="l08694" /><CodeLine lineNumber="8694"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> RCmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(</Highlight></CodeLine>
<Link id="l08695" /><CodeLine lineNumber="8695"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a76b6d3008e806ea613323ff316ef72c3">ISD::IS&#95;FPCLASS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CCVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, TestZero), <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, LCmp,</Highlight></CodeLine>
<Link id="l08696" /><CodeLine lineNumber="8696"><Highlight kind="normal">      Flags);</Highlight></CodeLine>
<Link id="l08697" /><CodeLine lineNumber="8697"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, IsZero, RCmp, MinMax, Flags);</Highlight></CodeLine>
<Link id="l08698" /><CodeLine lineNumber="8698"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l08699" /><CodeLine lineNumber="8699"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l08700" /><CodeLine lineNumber="8700"><Highlight kind="comment">/// Returns a true value if if this FPClassTest can be performed with an ordered</Highlight></CodeLine>
<Link id="l08701" /><CodeLine lineNumber="8701"><Highlight kind="comment">/// fcmp to 0, and a false value if it&#39;s an unordered fcmp to 0 Returns</Highlight></CodeLine>
<Link id="l08702" /><CodeLine lineNumber="8702"><Highlight kind="comment">/// std::nullopt if it cannot be performed as a compare with 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08703" /><CodeLine lineNumber="8703" lineLink="#a939a9cb864b778eb29af330d62308ba4"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> std::optional&lt;bool&gt; <a href="#a939a9cb864b778eb29af330d62308ba4">isFCmpEqualZero</a>(<a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1d">FPClassTest</a> <a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a>,</Highlight></CodeLine>
<Link id="l08704" /><CodeLine lineNumber="8704"><Highlight kind="normal">                                           </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/fltsemantics">fltSemantics</a> &amp;Semantics,</Highlight></CodeLine>
<Link id="l08705" /><CodeLine lineNumber="8705"><Highlight kind="normal">                                           </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF) &#123;</Highlight></CodeLine>
<Link id="l08706" /><CodeLine lineNumber="8706"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1d">FPClassTest</a> OrderedMask = <a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> &amp; <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dafe1646e5477c571f7791c524b54b11fe">~fcNan</a>;</Highlight></CodeLine>
<Link id="l08707" /><CodeLine lineNumber="8707"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1d">FPClassTest</a> NanTest = <a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> &amp; <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dafe1646e5477c571f7791c524b54b11fe">fcNan</a>;</Highlight></CodeLine>
<Link id="l08708" /><CodeLine lineNumber="8708"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsOrdered = NanTest == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da4759a508982cd525d9f17024f09aea22">fcNone</a>;</Highlight></CodeLine>
<Link id="l08709" /><CodeLine lineNumber="8709"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsUnordered = NanTest == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dafe1646e5477c571f7791c524b54b11fe">fcNan</a>;</Highlight></CodeLine>
<Link id="l08710" /><CodeLine lineNumber="8710"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08711" /><CodeLine lineNumber="8711"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Skip cases that are testing for only a qnan or snan.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08712" /><CodeLine lineNumber="8712"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!IsOrdered &amp;&amp; !IsUnordered)</Highlight></CodeLine>
<Link id="l08713" /><CodeLine lineNumber="8713"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::nullopt;</Highlight></CodeLine>
<Link id="l08714" /><CodeLine lineNumber="8714"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08715" /><CodeLine lineNumber="8715"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OrderedMask == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dab6ede72b2b2219068b9bb89732d24e2f">fcZero</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l08716" /><CodeLine lineNumber="8716"><Highlight kind="normal">      MF.<a href="/docs/api/classes/llvm/machinefunction/#a5f3f664c3c8fef0ffd2833ae21254117">getDenormalMode</a>(Semantics).<a href="/docs/api/structs/llvm/denormalmode/#a1b79f1995991b0a757a4d04969c3717f">Input</a> == <a href="/docs/api/structs/llvm/denormalmode/#a29b26e3ae30f3f6ec4106ff181282893ad6fd23eb0b98a2d4551582753191b6da">DenormalMode::IEEE</a>)</Highlight></CodeLine>
<Link id="l08717" /><CodeLine lineNumber="8717"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> IsOrdered;</Highlight></CodeLine>
<Link id="l08718" /><CodeLine lineNumber="8718"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OrderedMask == (<a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dab6ede72b2b2219068b9bb89732d24e2f">fcZero</a> | <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da449c8fca7f540cc314102a67944fcd6e">fcSubnormal</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l08719" /><CodeLine lineNumber="8719"><Highlight kind="normal">      MF.<a href="/docs/api/classes/llvm/machinefunction/#a5f3f664c3c8fef0ffd2833ae21254117">getDenormalMode</a>(Semantics).<a href="/docs/api/structs/llvm/denormalmode/#a898bc0d2b24c32a5d732ae7a225c337c">inputsAreZero</a>())</Highlight></CodeLine>
<Link id="l08720" /><CodeLine lineNumber="8720"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> IsOrdered;</Highlight></CodeLine>
<Link id="l08721" /><CodeLine lineNumber="8721"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::nullopt;</Highlight></CodeLine>
<Link id="l08722" /><CodeLine lineNumber="8722"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l08723" /><CodeLine lineNumber="8723"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08724" /><CodeLine lineNumber="8724"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#ada1945ca82da7a7861f21485db1994c9">TargetLowering::expandIS&#95;FPCLASS</a>(EVT ResultVT, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l08725" /><CodeLine lineNumber="8725"><Highlight kind="normal">                                         </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1d">FPClassTest</a> OrigTestMask,</Highlight></CodeLine>
<Link id="l08726" /><CodeLine lineNumber="8726"><Highlight kind="normal">                                         SDNodeFlags Flags, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</Highlight></CodeLine>
<Link id="l08727" /><CodeLine lineNumber="8727"><Highlight kind="normal">                                         SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l08728" /><CodeLine lineNumber="8728"><Highlight kind="normal">  EVT OperandVT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l08729" /><CodeLine lineNumber="8729"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OperandVT.<a href="/docs/api/structs/llvm/evt/#a3cb888a2ce8e95e0d9769687a5e2f7d8">isFloatingPoint</a>());</Highlight></CodeLine>
<Link id="l08730" /><CodeLine lineNumber="8730"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1d">FPClassTest</a> <a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> = OrigTestMask;</Highlight></CodeLine>
<Link id="l08731" /><CodeLine lineNumber="8731"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08732" /><CodeLine lineNumber="8732"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Degenerated cases.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08733" /><CodeLine lineNumber="8733"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da4759a508982cd525d9f17024f09aea22">fcNone</a>)</Highlight></CodeLine>
<Link id="l08734" /><CodeLine lineNumber="8734"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac2624b648ddca964183d631c8d189595">getBoolConstant</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, OperandVT);</Highlight></CodeLine>
<Link id="l08735" /><CodeLine lineNumber="8735"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dabf7829a22591343ad790b1357955a7df">fcAllFlags</a>)</Highlight></CodeLine>
<Link id="l08736" /><CodeLine lineNumber="8736"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac2624b648ddca964183d631c8d189595">getBoolConstant</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, OperandVT);</Highlight></CodeLine>
<Link id="l08737" /><CodeLine lineNumber="8737"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08738" /><CodeLine lineNumber="8738"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// PPC double double is a pair of doubles, of which the higher part determines</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08739" /><CodeLine lineNumber="8739"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the value class.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08740" /><CodeLine lineNumber="8740"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OperandVT == MVT::ppcf128) &#123;</Highlight></CodeLine>
<Link id="l08741" /><CodeLine lineNumber="8741"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7e6dca8262a3de788d1bab4ba184d675">ISD::EXTRACT&#95;ELEMENT</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, MVT::f64, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l08742" /><CodeLine lineNumber="8742"><Highlight kind="normal">                     DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, MVT::i32));</Highlight></CodeLine>
<Link id="l08743" /><CodeLine lineNumber="8743"><Highlight kind="normal">    OperandVT = MVT::f64;</Highlight></CodeLine>
<Link id="l08744" /><CodeLine lineNumber="8744"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08745" /><CodeLine lineNumber="8745"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08746" /><CodeLine lineNumber="8746"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Floating-point type properties.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08747" /><CodeLine lineNumber="8747"><Highlight kind="normal">  EVT ScalarFloatVT = OperandVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l08748" /><CodeLine lineNumber="8748"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a88ee8e4eea43084bd8964682683da88caa1fa27779242b4902f7ae3bdd5c6d508">Type</a> &#42;FloatTy = ScalarFloatVT.<a href="/docs/api/structs/llvm/evt/#ab0cfceeb37508e56f9c127e59766a668">getTypeForEVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>());</Highlight></CodeLine>
<Link id="l08749" /><CodeLine lineNumber="8749"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> llvm::fltSemantics &amp;Semantics = FloatTy-&gt;<a href="/docs/api/classes/llvm/type/#adc21598ac33ea9d50f3a939f26a28940">getFltSemantics</a>();</Highlight></CodeLine>
<Link id="l08750" /><CodeLine lineNumber="8750"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsF80 = (ScalarFloatVT == MVT::f80);</Highlight></CodeLine>
<Link id="l08751" /><CodeLine lineNumber="8751"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08752" /><CodeLine lineNumber="8752"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Some checks can be implemented using float comparisons, if floating point</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08753" /><CodeLine lineNumber="8753"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// exceptions are ignored.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08754" /><CodeLine lineNumber="8754"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a>.hasNoFPExcept() &amp;&amp;</Highlight></CodeLine>
<Link id="l08755" /><CodeLine lineNumber="8755"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0158ee47dfa868be5d28e2cbef70d5d0">ISD::SETCC</a>, OperandVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>())) &#123;</Highlight></CodeLine>
<Link id="l08756" /><CodeLine lineNumber="8756"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1d">FPClassTest</a> FPTestMask = <a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a>;</Highlight></CodeLine>
<Link id="l08757" /><CodeLine lineNumber="8757"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsInvertedFP = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08758" /><CodeLine lineNumber="8758"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08759" /><CodeLine lineNumber="8759"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1d">FPClassTest</a> InvertedFPCheck =</Highlight></CodeLine>
<Link id="l08760" /><CodeLine lineNumber="8760"><Highlight kind="normal">            <a href="/docs/api/namespaces/llvm/#a233d70e8c37d8bb9dfae64e055c67c29">invertFPClassTestIfSimpler</a>(FPTestMask, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">)) &#123;</Highlight></CodeLine>
<Link id="l08761" /><CodeLine lineNumber="8761"><Highlight kind="normal">      FPTestMask = InvertedFPCheck;</Highlight></CodeLine>
<Link id="l08762" /><CodeLine lineNumber="8762"><Highlight kind="normal">      IsInvertedFP = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08763" /><CodeLine lineNumber="8763"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08764" /><CodeLine lineNumber="8764"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08765" /><CodeLine lineNumber="8765"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> OrderedCmpOpcode = IsInvertedFP ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a0d1546187d4d526fcbdd43183689075e">ISD::SETUNE</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a08c31033acfb9d6f0bc4a8a82cc26862">ISD::SETOEQ</a>;</Highlight></CodeLine>
<Link id="l08766" /><CodeLine lineNumber="8766"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> UnorderedCmpOpcode = IsInvertedFP ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a57c68bf7ef20bd558854a24d5b0c1e72">ISD::SETONE</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a0deb50cd2f3f8e4a94eef4cdf769b848">ISD::SETUEQ</a>;</Highlight></CodeLine>
<Link id="l08767" /><CodeLine lineNumber="8767"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08768" /><CodeLine lineNumber="8768"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// See if we can fold an | fcNan into an unordered compare.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08769" /><CodeLine lineNumber="8769"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1d">FPClassTest</a> OrderedFPTestMask = FPTestMask &amp; ~fcNan;</Highlight></CodeLine>
<Link id="l08770" /><CodeLine lineNumber="8770"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08771" /><CodeLine lineNumber="8771"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Can&#39;t fold the ordered check if we&#39;re only testing for snan or qnan</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08772" /><CodeLine lineNumber="8772"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// individually.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08773" /><CodeLine lineNumber="8773"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((FPTestMask &amp; <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dafe1646e5477c571f7791c524b54b11fe">fcNan</a>) != <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dafe1646e5477c571f7791c524b54b11fe">fcNan</a>)</Highlight></CodeLine>
<Link id="l08774" /><CodeLine lineNumber="8774"><Highlight kind="normal">      OrderedFPTestMask = FPTestMask;</Highlight></CodeLine>
<Link id="l08775" /><CodeLine lineNumber="8775"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08776" /><CodeLine lineNumber="8776"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsOrdered = FPTestMask == OrderedFPTestMask;</Highlight></CodeLine>
<Link id="l08777" /><CodeLine lineNumber="8777"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08778" /><CodeLine lineNumber="8778"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (std::optional&lt;bool&gt; IsCmp0 =</Highlight></CodeLine>
<Link id="l08779" /><CodeLine lineNumber="8779"><Highlight kind="normal">            <a href="#a939a9cb864b778eb29af330d62308ba4">isFCmpEqualZero</a>(FPTestMask, Semantics, DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac64ec73b0617befef1fb2eae78d12b5f">getMachineFunction</a>());</Highlight></CodeLine>
<Link id="l08780" /><CodeLine lineNumber="8780"><Highlight kind="normal">        IsCmp0 &amp;&amp; (<a href="/docs/api/classes/llvm/targetloweringbase/#aefa6619fc003e2d48cf16a23e0c81f8e">isCondCodeLegalOrCustom</a>(</Highlight></CodeLine>
<Link id="l08781" /><CodeLine lineNumber="8781"><Highlight kind="normal">                      &#42;IsCmp0 ? OrderedCmpOpcode : UnorderedCmpOpcode,</Highlight></CodeLine>
<Link id="l08782" /><CodeLine lineNumber="8782"><Highlight kind="normal">                      OperandVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>().<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>()))) &#123;</Highlight></CodeLine>
<Link id="l08783" /><CodeLine lineNumber="8783"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08784" /><CodeLine lineNumber="8784"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If denormals could be implicitly treated as 0, this is not equivalent</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08785" /><CodeLine lineNumber="8785"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// to a compare with 0 since it will also be true for denormals.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08786" /><CodeLine lineNumber="8786"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l08787" /><CodeLine lineNumber="8787"><Highlight kind="normal">                          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(0.0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, OperandVT),</Highlight></CodeLine>
<Link id="l08788" /><CodeLine lineNumber="8788"><Highlight kind="normal">                          &#42;IsCmp0 ? OrderedCmpOpcode : UnorderedCmpOpcode);</Highlight></CodeLine>
<Link id="l08789" /><CodeLine lineNumber="8789"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08790" /><CodeLine lineNumber="8790"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08791" /><CodeLine lineNumber="8791"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (FPTestMask == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dafe1646e5477c571f7791c524b54b11fe">fcNan</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l08792" /><CodeLine lineNumber="8792"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#aefa6619fc003e2d48cf16a23e0c81f8e">isCondCodeLegalOrCustom</a>(IsInvertedFP ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a71f916390487bb109d9968c72553eaf4">ISD::SETO</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a48a334bbe606d5e82c9cd84eaa127b50">ISD::SETUO</a>,</Highlight></CodeLine>
<Link id="l08793" /><CodeLine lineNumber="8793"><Highlight kind="normal">                                OperandVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>().<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>()))</Highlight></CodeLine>
<Link id="l08794" /><CodeLine lineNumber="8794"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l08795" /><CodeLine lineNumber="8795"><Highlight kind="normal">                          IsInvertedFP ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a71f916390487bb109d9968c72553eaf4">ISD::SETO</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a48a334bbe606d5e82c9cd84eaa127b50">ISD::SETUO</a>);</Highlight></CodeLine>
<Link id="l08796" /><CodeLine lineNumber="8796"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08797" /><CodeLine lineNumber="8797"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsOrderedInf = FPTestMask == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da00a4419741933f5cb7ec001aaa6e6bb5">fcInf</a>;</Highlight></CodeLine>
<Link id="l08798" /><CodeLine lineNumber="8798"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((FPTestMask == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da00a4419741933f5cb7ec001aaa6e6bb5">fcInf</a> || FPTestMask == (<a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da00a4419741933f5cb7ec001aaa6e6bb5">fcInf</a> | <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dafe1646e5477c571f7791c524b54b11fe">fcNan</a>)) &amp;&amp;</Highlight></CodeLine>
<Link id="l08799" /><CodeLine lineNumber="8799"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#aefa6619fc003e2d48cf16a23e0c81f8e">isCondCodeLegalOrCustom</a>(IsOrderedInf ? OrderedCmpOpcode</Highlight></CodeLine>
<Link id="l08800" /><CodeLine lineNumber="8800"><Highlight kind="normal">                                             : UnorderedCmpOpcode,</Highlight></CodeLine>
<Link id="l08801" /><CodeLine lineNumber="8801"><Highlight kind="normal">                                OperandVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>().<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>()) &amp;&amp;</Highlight></CodeLine>
<Link id="l08802" /><CodeLine lineNumber="8802"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(ISD::FABS, OperandVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>()) &amp;&amp;</Highlight></CodeLine>
<Link id="l08803" /><CodeLine lineNumber="8803"><Highlight kind="normal">        (<a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1be4c8da7c68a4c683de1a98b5cc5b9d">ISD::ConstantFP</a>, OperandVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>()) ||</Highlight></CodeLine>
<Link id="l08804" /><CodeLine lineNumber="8804"><Highlight kind="normal">         (OperandVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l08805" /><CodeLine lineNumber="8805"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aff6f73b624fecca7dbe94259f9437e32">ISD::BUILD&#95;VECTOR</a>, OperandVT)))) &#123;</Highlight></CodeLine>
<Link id="l08806" /><CodeLine lineNumber="8806"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// isinf(x) --&gt; fabs(x) == inf</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08807" /><CodeLine lineNumber="8807"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Abs = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::FABS, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, OperandVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l08808" /><CodeLine lineNumber="8808"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Inf =</Highlight></CodeLine>
<Link id="l08809" /><CodeLine lineNumber="8809"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(<a href="/docs/api/classes/llvm/apfloat/#ab35b08ed1345493af2c69fbb71e4d0c3">APFloat::getInf</a>(Semantics), <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, OperandVT);</Highlight></CodeLine>
<Link id="l08810" /><CodeLine lineNumber="8810"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, Abs, Inf,</Highlight></CodeLine>
<Link id="l08811" /><CodeLine lineNumber="8811"><Highlight kind="normal">                          IsOrderedInf ? OrderedCmpOpcode : UnorderedCmpOpcode);</Highlight></CodeLine>
<Link id="l08812" /><CodeLine lineNumber="8812"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08813" /><CodeLine lineNumber="8813"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08814" /><CodeLine lineNumber="8814"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((OrderedFPTestMask == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dada0d259988860d7a2f882aa40b25fee1">fcPosInf</a> || OrderedFPTestMask == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da3ab665df1666568d7eac3b1373106638">fcNegInf</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l08815" /><CodeLine lineNumber="8815"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#aefa6619fc003e2d48cf16a23e0c81f8e">isCondCodeLegalOrCustom</a>(IsOrdered ? OrderedCmpOpcode</Highlight></CodeLine>
<Link id="l08816" /><CodeLine lineNumber="8816"><Highlight kind="normal">                                          : UnorderedCmpOpcode,</Highlight></CodeLine>
<Link id="l08817" /><CodeLine lineNumber="8817"><Highlight kind="normal">                                OperandVT.<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>())) &#123;</Highlight></CodeLine>
<Link id="l08818" /><CodeLine lineNumber="8818"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// isposinf(x) --&gt; x == inf</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08819" /><CodeLine lineNumber="8819"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// isneginf(x) --&gt; x == -inf</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08820" /><CodeLine lineNumber="8820"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// isposinf(x) || nan --&gt; x u== inf</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08821" /><CodeLine lineNumber="8821"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// isneginf(x) || nan --&gt; x u== -inf</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08822" /><CodeLine lineNumber="8822"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08823" /><CodeLine lineNumber="8823"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Inf = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(</Highlight></CodeLine>
<Link id="l08824" /><CodeLine lineNumber="8824"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/apfloat/#ab35b08ed1345493af2c69fbb71e4d0c3">APFloat::getInf</a>(Semantics, OrderedFPTestMask == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da3ab665df1666568d7eac3b1373106638">fcNegInf</a>), <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</Highlight></CodeLine>
<Link id="l08825" /><CodeLine lineNumber="8825"><Highlight kind="normal">          OperandVT);</Highlight></CodeLine>
<Link id="l08826" /><CodeLine lineNumber="8826"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Inf,</Highlight></CodeLine>
<Link id="l08827" /><CodeLine lineNumber="8827"><Highlight kind="normal">                          IsOrdered ? OrderedCmpOpcode : UnorderedCmpOpcode);</Highlight></CodeLine>
<Link id="l08828" /><CodeLine lineNumber="8828"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08829" /><CodeLine lineNumber="8829"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08830" /><CodeLine lineNumber="8830"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OrderedFPTestMask == (<a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da449c8fca7f540cc314102a67944fcd6e">fcSubnormal</a> | <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dab6ede72b2b2219068b9bb89732d24e2f">fcZero</a>) &amp;&amp; !IsOrdered) &#123;</Highlight></CodeLine>
<Link id="l08831" /><CodeLine lineNumber="8831"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// TODO: Could handle ordered case, but it produces worse code for</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08832" /><CodeLine lineNumber="8832"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// x86. Maybe handle ordered if fabs is free?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08833" /><CodeLine lineNumber="8833"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08834" /><CodeLine lineNumber="8834"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> OrderedOp = IsInvertedFP ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">ISD::SETUGE</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a20257a4d3833cf88afd42caeaed70dde">ISD::SETOLT</a>;</Highlight></CodeLine>
<Link id="l08835" /><CodeLine lineNumber="8835"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> UnorderedOp = IsInvertedFP ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac7bb30d4918c1ee9dd208083154e109f">ISD::SETOGE</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>;</Highlight></CodeLine>
<Link id="l08836" /><CodeLine lineNumber="8836"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08837" /><CodeLine lineNumber="8837"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aefa6619fc003e2d48cf16a23e0c81f8e">isCondCodeLegalOrCustom</a>(IsOrdered ? OrderedOp : UnorderedOp,</Highlight></CodeLine>
<Link id="l08838" /><CodeLine lineNumber="8838"><Highlight kind="normal">                                  OperandVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>().<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>())) &#123;</Highlight></CodeLine>
<Link id="l08839" /><CodeLine lineNumber="8839"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// (issubnormal(x) || iszero(x)) --&gt; fabs(x) &lt; smallest&#95;normal</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08840" /><CodeLine lineNumber="8840"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08841" /><CodeLine lineNumber="8841"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// TODO: Maybe only makes sense if fabs is free. Integer test of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08842" /><CodeLine lineNumber="8842"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// exponent bits seems better for x86.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08843" /><CodeLine lineNumber="8843"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Abs = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::FABS, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, OperandVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l08844" /><CodeLine lineNumber="8844"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SmallestNormal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(</Highlight></CodeLine>
<Link id="l08845" /><CodeLine lineNumber="8845"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/apfloat/#a9c568ab8748aba5d37006d52618bbcfd">APFloat::getSmallestNormalized</a>(Semantics), <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, OperandVT);</Highlight></CodeLine>
<Link id="l08846" /><CodeLine lineNumber="8846"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, Abs, SmallestNormal,</Highlight></CodeLine>
<Link id="l08847" /><CodeLine lineNumber="8847"><Highlight kind="normal">                            IsOrdered ? OrderedOp : UnorderedOp);</Highlight></CodeLine>
<Link id="l08848" /><CodeLine lineNumber="8848"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l08849" /><CodeLine lineNumber="8849"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08850" /><CodeLine lineNumber="8850"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08851" /><CodeLine lineNumber="8851"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (FPTestMask == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dadb8c9ce3197adf47c7f889bab120b77c">fcNormal</a>) &#123;</Highlight></CodeLine>
<Link id="l08852" /><CodeLine lineNumber="8852"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// TODO: Handle unordered</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08853" /><CodeLine lineNumber="8853"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> IsFiniteOp = IsInvertedFP ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">ISD::SETUGE</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a20257a4d3833cf88afd42caeaed70dde">ISD::SETOLT</a>;</Highlight></CodeLine>
<Link id="l08854" /><CodeLine lineNumber="8854"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> IsNormalOp = IsInvertedFP ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a20257a4d3833cf88afd42caeaed70dde">ISD::SETOLT</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">ISD::SETUGE</a>;</Highlight></CodeLine>
<Link id="l08855" /><CodeLine lineNumber="8855"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08856" /><CodeLine lineNumber="8856"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aefa6619fc003e2d48cf16a23e0c81f8e">isCondCodeLegalOrCustom</a>(IsFiniteOp,</Highlight></CodeLine>
<Link id="l08857" /><CodeLine lineNumber="8857"><Highlight kind="normal">                                  OperandVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>().<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>()) &amp;&amp;</Highlight></CodeLine>
<Link id="l08858" /><CodeLine lineNumber="8858"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/targetloweringbase/#aefa6619fc003e2d48cf16a23e0c81f8e">isCondCodeLegalOrCustom</a>(IsNormalOp,</Highlight></CodeLine>
<Link id="l08859" /><CodeLine lineNumber="8859"><Highlight kind="normal">                                  OperandVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>().<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>()) &amp;&amp;</Highlight></CodeLine>
<Link id="l08860" /><CodeLine lineNumber="8860"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/targetloweringbase/#af4dac2cd51ca7d7082cabfba3f81dd27">isFAbsFree</a>(OperandVT)) &#123;</Highlight></CodeLine>
<Link id="l08861" /><CodeLine lineNumber="8861"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// isnormal(x) --&gt; fabs(x) &lt; infinity &amp;&amp; !(fabs(x) &lt; smallest&#95;normal)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08862" /><CodeLine lineNumber="8862"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Inf =</Highlight></CodeLine>
<Link id="l08863" /><CodeLine lineNumber="8863"><Highlight kind="normal">            DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(<a href="/docs/api/classes/llvm/apfloat/#ab35b08ed1345493af2c69fbb71e4d0c3">APFloat::getInf</a>(Semantics), <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, OperandVT);</Highlight></CodeLine>
<Link id="l08864" /><CodeLine lineNumber="8864"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SmallestNormal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(</Highlight></CodeLine>
<Link id="l08865" /><CodeLine lineNumber="8865"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/apfloat/#a9c568ab8748aba5d37006d52618bbcfd">APFloat::getSmallestNormalized</a>(Semantics), <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, OperandVT);</Highlight></CodeLine>
<Link id="l08866" /><CodeLine lineNumber="8866"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08867" /><CodeLine lineNumber="8867"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Abs = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::FABS, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, OperandVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l08868" /><CodeLine lineNumber="8868"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IsFinite = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, Abs, Inf, IsFiniteOp);</Highlight></CodeLine>
<Link id="l08869" /><CodeLine lineNumber="8869"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IsNormal =</Highlight></CodeLine>
<Link id="l08870" /><CodeLine lineNumber="8870"><Highlight kind="normal">            DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, Abs, SmallestNormal, IsNormalOp);</Highlight></CodeLine>
<Link id="l08871" /><CodeLine lineNumber="8871"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LogicOp = IsInvertedFP ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>;</Highlight></CodeLine>
<Link id="l08872" /><CodeLine lineNumber="8872"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(LogicOp, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, IsFinite, IsNormal);</Highlight></CodeLine>
<Link id="l08873" /><CodeLine lineNumber="8873"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l08874" /><CodeLine lineNumber="8874"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08875" /><CodeLine lineNumber="8875"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08876" /><CodeLine lineNumber="8876"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08877" /><CodeLine lineNumber="8877"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Some checks may be represented as inversion of simpler check, for example</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08878" /><CodeLine lineNumber="8878"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// &quot;inf|normal|subnormal|zero&quot; =&gt; !&quot;nan&quot;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08879" /><CodeLine lineNumber="8879"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsInverted = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08880" /><CodeLine lineNumber="8880"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08881" /><CodeLine lineNumber="8881"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1d">FPClassTest</a> InvertedCheck = <a href="/docs/api/namespaces/llvm/#a233d70e8c37d8bb9dfae64e055c67c29">invertFPClassTestIfSimpler</a>(<a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a>, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">)) &#123;</Highlight></CodeLine>
<Link id="l08882" /><CodeLine lineNumber="8882"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> = InvertedCheck;</Highlight></CodeLine>
<Link id="l08883" /><CodeLine lineNumber="8883"><Highlight kind="normal">    IsInverted = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l08884" /><CodeLine lineNumber="8884"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08885" /><CodeLine lineNumber="8885"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08886" /><CodeLine lineNumber="8886"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// In the general case use integer operations.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08887" /><CodeLine lineNumber="8887"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> BitSize = OperandVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l08888" /><CodeLine lineNumber="8888"><Highlight kind="normal">  EVT IntVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), BitSize);</Highlight></CodeLine>
<Link id="l08889" /><CodeLine lineNumber="8889"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OperandVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>())</Highlight></CodeLine>
<Link id="l08890" /><CodeLine lineNumber="8890"><Highlight kind="normal">    IntVT = <a href="/docs/api/structs/llvm/evt/#a210ba6b43ba451b698857dd9de71bd15">EVT::getVectorVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), IntVT,</Highlight></CodeLine>
<Link id="l08891" /><CodeLine lineNumber="8891"><Highlight kind="normal">                             OperandVT.<a href="/docs/api/structs/llvm/evt/#a3d102abca1c9c95f36546dff2f39273b">getVectorElementCount</a>());</Highlight></CodeLine>
<Link id="l08892" /><CodeLine lineNumber="8892"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> OpAsInt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a64f6469ab95c4eec77e4ccf303619a81">getBitcast</a>(IntVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l08893" /><CodeLine lineNumber="8893"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08894" /><CodeLine lineNumber="8894"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Various masks.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08895" /><CodeLine lineNumber="8895"><Highlight kind="normal">  APInt SignBit = <a href="/docs/api/classes/llvm/apint/#a1e6f0d8dfed0ab631b488a3e6317718e">APInt::getSignMask</a>(BitSize);</Highlight></CodeLine>
<Link id="l08896" /><CodeLine lineNumber="8896"><Highlight kind="normal">  APInt ValueMask = <a href="/docs/api/classes/llvm/apint/#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(BitSize);     </Highlight><Highlight kind="comment">// All bits but sign.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08897" /><CodeLine lineNumber="8897"><Highlight kind="normal">  APInt Inf = <a href="/docs/api/classes/llvm/apfloat/#ab35b08ed1345493af2c69fbb71e4d0c3">APFloat::getInf</a>(Semantics).<a href="/docs/api/classes/llvm/apfloat/#a9c5a2112c559ffbe2c7bbf5698b6482f">bitcastToAPInt</a>(); </Highlight><Highlight kind="comment">// Exp and int bit.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08898" /><CodeLine lineNumber="8898"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ExplicitIntBitInF80 = 63;</Highlight></CodeLine>
<Link id="l08899" /><CodeLine lineNumber="8899"><Highlight kind="normal">  APInt ExpMask = Inf;</Highlight></CodeLine>
<Link id="l08900" /><CodeLine lineNumber="8900"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsF80)</Highlight></CodeLine>
<Link id="l08901" /><CodeLine lineNumber="8901"><Highlight kind="normal">    ExpMask.<a href="/docs/api/classes/llvm/apint/#a155466c9ea0a2bd00e09c62fdce2c052">clearBit</a>(ExplicitIntBitInF80);</Highlight></CodeLine>
<Link id="l08902" /><CodeLine lineNumber="8902"><Highlight kind="normal">  APInt AllOneMantissa = <a href="/docs/api/classes/llvm/apfloat/#aaa67fe0741c2b3712630ae636f8c2c20">APFloat::getLargest</a>(Semantics).<a href="/docs/api/classes/llvm/apfloat/#a9c5a2112c559ffbe2c7bbf5698b6482f">bitcastToAPInt</a>() &amp; ~Inf;</Highlight></CodeLine>
<Link id="l08903" /><CodeLine lineNumber="8903"><Highlight kind="normal">  APInt QNaNBitMask =</Highlight></CodeLine>
<Link id="l08904" /><CodeLine lineNumber="8904"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/apint/#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(BitSize, AllOneMantissa.<a href="/docs/api/classes/llvm/apint/#a3015474e70e59c0a3ed4f9f0e8644b75">getActiveBits</a>() - 1);</Highlight></CodeLine>
<Link id="l08905" /><CodeLine lineNumber="8905"><Highlight kind="normal">  APInt InvertionMask = <a href="/docs/api/classes/llvm/apint/#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(ResultVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>());</Highlight></CodeLine>
<Link id="l08906" /><CodeLine lineNumber="8906"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08907" /><CodeLine lineNumber="8907"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ValueMaskV = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(ValueMask, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT);</Highlight></CodeLine>
<Link id="l08908" /><CodeLine lineNumber="8908"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SignBitV = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(SignBit, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT);</Highlight></CodeLine>
<Link id="l08909" /><CodeLine lineNumber="8909"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ExpMaskV = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(ExpMask, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT);</Highlight></CodeLine>
<Link id="l08910" /><CodeLine lineNumber="8910"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ZeroV = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT);</Highlight></CodeLine>
<Link id="l08911" /><CodeLine lineNumber="8911"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> InfV = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Inf, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT);</Highlight></CodeLine>
<Link id="l08912" /><CodeLine lineNumber="8912"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ResultInvertionMask = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(InvertionMask, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT);</Highlight></CodeLine>
<Link id="l08913" /><CodeLine lineNumber="8913"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08914" /><CodeLine lineNumber="8914"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Res;</Highlight></CodeLine>
<Link id="l08915" /><CodeLine lineNumber="8915"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> appendResult = &#91;&amp;&#93;(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> PartialRes) &#123;</Highlight></CodeLine>
<Link id="l08916" /><CodeLine lineNumber="8916"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PartialRes) &#123;</Highlight></CodeLine>
<Link id="l08917" /><CodeLine lineNumber="8917"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Res)</Highlight></CodeLine>
<Link id="l08918" /><CodeLine lineNumber="8918"><Highlight kind="normal">        Res = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, Res, PartialRes);</Highlight></CodeLine>
<Link id="l08919" /><CodeLine lineNumber="8919"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08920" /><CodeLine lineNumber="8920"><Highlight kind="normal">        Res = PartialRes;</Highlight></CodeLine>
<Link id="l08921" /><CodeLine lineNumber="8921"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08922" /><CodeLine lineNumber="8922"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l08923" /><CodeLine lineNumber="8923"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08924" /><CodeLine lineNumber="8924"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IntBitIsSetV; </Highlight><Highlight kind="comment">// Explicit integer bit in f80 mantissa is set.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08925" /><CodeLine lineNumber="8925"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> getIntBitIsSet = &#91;&amp;&#93;() -&gt; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &#123;</Highlight></CodeLine>
<Link id="l08926" /><CodeLine lineNumber="8926"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!IntBitIsSetV) &#123;</Highlight></CodeLine>
<Link id="l08927" /><CodeLine lineNumber="8927"><Highlight kind="normal">      APInt IntBitMask(BitSize, 0);</Highlight></CodeLine>
<Link id="l08928" /><CodeLine lineNumber="8928"><Highlight kind="normal">      IntBitMask.setBit(ExplicitIntBitInF80);</Highlight></CodeLine>
<Link id="l08929" /><CodeLine lineNumber="8929"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IntBitMaskV = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(IntBitMask, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT);</Highlight></CodeLine>
<Link id="l08930" /><CodeLine lineNumber="8930"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IntBitV = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT, OpAsInt, IntBitMaskV);</Highlight></CodeLine>
<Link id="l08931" /><CodeLine lineNumber="8931"><Highlight kind="normal">      IntBitIsSetV = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, IntBitV, ZeroV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>);</Highlight></CodeLine>
<Link id="l08932" /><CodeLine lineNumber="8932"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08933" /><CodeLine lineNumber="8933"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> IntBitIsSetV;</Highlight></CodeLine>
<Link id="l08934" /><CodeLine lineNumber="8934"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l08935" /><CodeLine lineNumber="8935"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08936" /><CodeLine lineNumber="8936"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Split the value into sign bit and absolute value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08937" /><CodeLine lineNumber="8937"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> AbsV = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT, OpAsInt, ValueMaskV);</Highlight></CodeLine>
<Link id="l08938" /><CodeLine lineNumber="8938"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SignV = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, OpAsInt,</Highlight></CodeLine>
<Link id="l08939" /><CodeLine lineNumber="8939"><Highlight kind="normal">                               DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT), <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l08940" /><CodeLine lineNumber="8940"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08941" /><CodeLine lineNumber="8941"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Tests that involve more than one class should be processed first.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08942" /><CodeLine lineNumber="8942"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> PartialRes;</Highlight></CodeLine>
<Link id="l08943" /><CodeLine lineNumber="8943"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08944" /><CodeLine lineNumber="8944"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsF80)</Highlight></CodeLine>
<Link id="l08945" /><CodeLine lineNumber="8945"><Highlight kind="normal">    ; </Highlight><Highlight kind="comment">// Detect finite numbers of f80 by checking individual classes because</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08946" /><CodeLine lineNumber="8946"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// they have different settings of the explicit integer bit.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08947" /><CodeLine lineNumber="8947"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> &amp; <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da3cf35410333eec89d6a707787b5f9d97">fcFinite</a>) == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da3cf35410333eec89d6a707787b5f9d97">fcFinite</a>) &#123;</Highlight></CodeLine>
<Link id="l08948" /><CodeLine lineNumber="8948"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// finite(V) ==&gt; abs(V) &lt; exp&#95;mask</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08949" /><CodeLine lineNumber="8949"><Highlight kind="normal">    PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, AbsV, ExpMaskV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l08950" /><CodeLine lineNumber="8950"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> &amp;= ~fcFinite;</Highlight></CodeLine>
<Link id="l08951" /><CodeLine lineNumber="8951"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> &amp; <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da3cf35410333eec89d6a707787b5f9d97">fcFinite</a>) == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1daade2c185d2f6d759a0f2c1a2b7d956ba">fcPosFinite</a>) &#123;</Highlight></CodeLine>
<Link id="l08952" /><CodeLine lineNumber="8952"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// finite(V) &amp;&amp; V &gt; 0 ==&gt; V &lt; exp&#95;mask</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08953" /><CodeLine lineNumber="8953"><Highlight kind="normal">    PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, OpAsInt, ExpMaskV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>);</Highlight></CodeLine>
<Link id="l08954" /><CodeLine lineNumber="8954"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> &amp;= ~fcPosFinite;</Highlight></CodeLine>
<Link id="l08955" /><CodeLine lineNumber="8955"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> ((<a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> &amp; <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da3cf35410333eec89d6a707787b5f9d97">fcFinite</a>) == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da75a5f5e11ee279c94146d767d3b0a631">fcNegFinite</a>) &#123;</Highlight></CodeLine>
<Link id="l08956" /><CodeLine lineNumber="8956"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// finite(V) &amp;&amp; V &lt; 0 ==&gt; abs(V) &lt; exp&#95;mask &amp;&amp; signbit == 1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08957" /><CodeLine lineNumber="8957"><Highlight kind="normal">    PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, AbsV, ExpMaskV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l08958" /><CodeLine lineNumber="8958"><Highlight kind="normal">    PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, PartialRes, SignV);</Highlight></CodeLine>
<Link id="l08959" /><CodeLine lineNumber="8959"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> &amp;= ~fcNegFinite;</Highlight></CodeLine>
<Link id="l08960" /><CodeLine lineNumber="8960"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08961" /><CodeLine lineNumber="8961"><Highlight kind="normal">  appendResult(PartialRes);</Highlight></CodeLine>
<Link id="l08962" /><CodeLine lineNumber="8962"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08963" /><CodeLine lineNumber="8963"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1d">FPClassTest</a> PartialCheck = <a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> &amp; (<a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dab6ede72b2b2219068b9bb89732d24e2f">fcZero</a> | <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da449c8fca7f540cc314102a67944fcd6e">fcSubnormal</a>)) &#123;</Highlight></CodeLine>
<Link id="l08964" /><CodeLine lineNumber="8964"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// fcZero | fcSubnormal =&gt; test all exponent bits are 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08965" /><CodeLine lineNumber="8965"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO: Handle sign bit specific cases</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08966" /><CodeLine lineNumber="8966"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PartialCheck == (<a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dab6ede72b2b2219068b9bb89732d24e2f">fcZero</a> | <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da449c8fca7f540cc314102a67944fcd6e">fcSubnormal</a>)) &#123;</Highlight></CodeLine>
<Link id="l08967" /><CodeLine lineNumber="8967"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ExpBits = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT, OpAsInt, ExpMaskV);</Highlight></CodeLine>
<Link id="l08968" /><CodeLine lineNumber="8968"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ExpIsZero =</Highlight></CodeLine>
<Link id="l08969" /><CodeLine lineNumber="8969"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, ExpBits, ZeroV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l08970" /><CodeLine lineNumber="8970"><Highlight kind="normal">      appendResult(ExpIsZero);</Highlight></CodeLine>
<Link id="l08971" /><CodeLine lineNumber="8971"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> &amp;= ~PartialCheck &amp; <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dabf7829a22591343ad790b1357955a7df">fcAllFlags</a>;</Highlight></CodeLine>
<Link id="l08972" /><CodeLine lineNumber="8972"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l08973" /><CodeLine lineNumber="8973"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08974" /><CodeLine lineNumber="8974"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08975" /><CodeLine lineNumber="8975"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Check for individual classes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08976" /><CodeLine lineNumber="8976"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08977" /><CodeLine lineNumber="8977"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> PartialCheck = <a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> &amp; <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dab6ede72b2b2219068b9bb89732d24e2f">fcZero</a>) &#123;</Highlight></CodeLine>
<Link id="l08978" /><CodeLine lineNumber="8978"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PartialCheck == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da7ace586671df3e62fa392d5144a8b3da">fcPosZero</a>)</Highlight></CodeLine>
<Link id="l08979" /><CodeLine lineNumber="8979"><Highlight kind="normal">      PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, OpAsInt, ZeroV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l08980" /><CodeLine lineNumber="8980"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PartialCheck == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dab6ede72b2b2219068b9bb89732d24e2f">fcZero</a>)</Highlight></CodeLine>
<Link id="l08981" /><CodeLine lineNumber="8981"><Highlight kind="normal">      PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, AbsV, ZeroV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l08982" /><CodeLine lineNumber="8982"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="comment">// ISD::fcNegZero</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08983" /><CodeLine lineNumber="8983"><Highlight kind="normal">      PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, OpAsInt, SignBitV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l08984" /><CodeLine lineNumber="8984"><Highlight kind="normal">    appendResult(PartialRes);</Highlight></CodeLine>
<Link id="l08985" /><CodeLine lineNumber="8985"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08986" /><CodeLine lineNumber="8986"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08987" /><CodeLine lineNumber="8987"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> PartialCheck = <a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> &amp; <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da449c8fca7f540cc314102a67944fcd6e">fcSubnormal</a>) &#123;</Highlight></CodeLine>
<Link id="l08988" /><CodeLine lineNumber="8988"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// issubnormal(V) ==&gt; unsigned(abs(V) - 1) &lt; (all mantissa bits set)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08989" /><CodeLine lineNumber="8989"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// issubnormal(V) &amp;&amp; V&gt;0 ==&gt; unsigned(V - 1) &lt; (all mantissa bits set)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l08990" /><CodeLine lineNumber="8990"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a> = (PartialCheck == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dad0940edb5f5bf512669b72928b527d0c">fcPosSubnormal</a>) ? OpAsInt : AbsV;</Highlight></CodeLine>
<Link id="l08991" /><CodeLine lineNumber="8991"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> MantissaV = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(AllOneMantissa, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT);</Highlight></CodeLine>
<Link id="l08992" /><CodeLine lineNumber="8992"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> VMinusOneV =</Highlight></CodeLine>
<Link id="l08993" /><CodeLine lineNumber="8993"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT, V, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT));</Highlight></CodeLine>
<Link id="l08994" /><CodeLine lineNumber="8994"><Highlight kind="normal">    PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, VMinusOneV, MantissaV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>);</Highlight></CodeLine>
<Link id="l08995" /><CodeLine lineNumber="8995"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PartialCheck == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da023ad3d9b33a1af5eb90b8b543fb3ccb">fcNegSubnormal</a>)</Highlight></CodeLine>
<Link id="l08996" /><CodeLine lineNumber="8996"><Highlight kind="normal">      PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, PartialRes, SignV);</Highlight></CodeLine>
<Link id="l08997" /><CodeLine lineNumber="8997"><Highlight kind="normal">    appendResult(PartialRes);</Highlight></CodeLine>
<Link id="l08998" /><CodeLine lineNumber="8998"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l08999" /><CodeLine lineNumber="8999"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09000" /><CodeLine lineNumber="9000"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> PartialCheck = <a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> &amp; <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da00a4419741933f5cb7ec001aaa6e6bb5">fcInf</a>) &#123;</Highlight></CodeLine>
<Link id="l09001" /><CodeLine lineNumber="9001"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PartialCheck == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dada0d259988860d7a2f882aa40b25fee1">fcPosInf</a>)</Highlight></CodeLine>
<Link id="l09002" /><CodeLine lineNumber="9002"><Highlight kind="normal">      PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, OpAsInt, InfV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l09003" /><CodeLine lineNumber="9003"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PartialCheck == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da00a4419741933f5cb7ec001aaa6e6bb5">fcInf</a>)</Highlight></CodeLine>
<Link id="l09004" /><CodeLine lineNumber="9004"><Highlight kind="normal">      PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, AbsV, InfV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l09005" /><CodeLine lineNumber="9005"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123; </Highlight><Highlight kind="comment">// ISD::fcNegInf</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09006" /><CodeLine lineNumber="9006"><Highlight kind="normal">      APInt NegInf = <a href="/docs/api/classes/llvm/apfloat/#ab35b08ed1345493af2c69fbb71e4d0c3">APFloat::getInf</a>(Semantics, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">).<a href="/docs/api/classes/llvm/apfloat/#a9c5a2112c559ffbe2c7bbf5698b6482f">bitcastToAPInt</a>();</Highlight></CodeLine>
<Link id="l09007" /><CodeLine lineNumber="9007"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NegInfV = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(NegInf, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT);</Highlight></CodeLine>
<Link id="l09008" /><CodeLine lineNumber="9008"><Highlight kind="normal">      PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, OpAsInt, NegInfV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l09009" /><CodeLine lineNumber="9009"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l09010" /><CodeLine lineNumber="9010"><Highlight kind="normal">    appendResult(PartialRes);</Highlight></CodeLine>
<Link id="l09011" /><CodeLine lineNumber="9011"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09012" /><CodeLine lineNumber="9012"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09013" /><CodeLine lineNumber="9013"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> PartialCheck = <a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> &amp; <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dafe1646e5477c571f7791c524b54b11fe">fcNan</a>) &#123;</Highlight></CodeLine>
<Link id="l09014" /><CodeLine lineNumber="9014"><Highlight kind="normal">    APInt InfWithQnanBit = Inf | QNaNBitMask;</Highlight></CodeLine>
<Link id="l09015" /><CodeLine lineNumber="9015"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> InfWithQnanBitV = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(InfWithQnanBit, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT);</Highlight></CodeLine>
<Link id="l09016" /><CodeLine lineNumber="9016"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PartialCheck == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dafe1646e5477c571f7791c524b54b11fe">fcNan</a>) &#123;</Highlight></CodeLine>
<Link id="l09017" /><CodeLine lineNumber="9017"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// isnan(V) ==&gt; abs(V) &gt; int(inf)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09018" /><CodeLine lineNumber="9018"><Highlight kind="normal">      PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, AbsV, InfV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a>);</Highlight></CodeLine>
<Link id="l09019" /><CodeLine lineNumber="9019"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsF80) &#123;</Highlight></CodeLine>
<Link id="l09020" /><CodeLine lineNumber="9020"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Recognize unsupported values as NaNs for compatibility with glibc.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09021" /><CodeLine lineNumber="9021"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// In them (exp(V)==0) == int&#95;bit.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09022" /><CodeLine lineNumber="9022"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ExpBits = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT, AbsV, ExpMaskV);</Highlight></CodeLine>
<Link id="l09023" /><CodeLine lineNumber="9023"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ExpIsZero =</Highlight></CodeLine>
<Link id="l09024" /><CodeLine lineNumber="9024"><Highlight kind="normal">            DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, ExpBits, ZeroV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l09025" /><CodeLine lineNumber="9025"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IsPseudo =</Highlight></CodeLine>
<Link id="l09026" /><CodeLine lineNumber="9026"><Highlight kind="normal">            DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, getIntBitIsSet(), ExpIsZero, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l09027" /><CodeLine lineNumber="9027"><Highlight kind="normal">        PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, PartialRes, IsPseudo);</Highlight></CodeLine>
<Link id="l09028" /><CodeLine lineNumber="9028"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l09029" /><CodeLine lineNumber="9029"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PartialCheck == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da05bb099c0a65e5b835ed8cd0b326df7c">fcQNan</a>) &#123;</Highlight></CodeLine>
<Link id="l09030" /><CodeLine lineNumber="9030"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// isquiet(V) ==&gt; abs(V) &gt;= (unsigned(Inf) | quiet&#95;bit)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09031" /><CodeLine lineNumber="9031"><Highlight kind="normal">      PartialRes =</Highlight></CodeLine>
<Link id="l09032" /><CodeLine lineNumber="9032"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, AbsV, InfWithQnanBitV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a7f47862de23f7210f88ccf98ae1efbe4">ISD::SETGE</a>);</Highlight></CodeLine>
<Link id="l09033" /><CodeLine lineNumber="9033"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123; </Highlight><Highlight kind="comment">// ISD::fcSNan</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09034" /><CodeLine lineNumber="9034"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// issignaling(V) ==&gt; abs(V) &gt; unsigned(Inf) &amp;&amp;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09035" /><CodeLine lineNumber="9035"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//                    abs(V) &lt; (unsigned(Inf) | quiet&#95;bit)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09036" /><CodeLine lineNumber="9036"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IsNan = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, AbsV, InfV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a>);</Highlight></CodeLine>
<Link id="l09037" /><CodeLine lineNumber="9037"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IsNotQnan =</Highlight></CodeLine>
<Link id="l09038" /><CodeLine lineNumber="9038"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, AbsV, InfWithQnanBitV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l09039" /><CodeLine lineNumber="9039"><Highlight kind="normal">      PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, IsNan, IsNotQnan);</Highlight></CodeLine>
<Link id="l09040" /><CodeLine lineNumber="9040"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l09041" /><CodeLine lineNumber="9041"><Highlight kind="normal">    appendResult(PartialRes);</Highlight></CodeLine>
<Link id="l09042" /><CodeLine lineNumber="9042"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09043" /><CodeLine lineNumber="9043"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09044" /><CodeLine lineNumber="9044"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> PartialCheck = <a href="/docs/api/namespaces/llvm/#aec7c967a5416fa6e154433965357a50ea0cbc6611f5540bd0809a388dc95a615b">Test</a> &amp; <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dadb8c9ce3197adf47c7f889bab120b77c">fcNormal</a>) &#123;</Highlight></CodeLine>
<Link id="l09045" /><CodeLine lineNumber="9045"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// isnormal(V) ==&gt; (0 &lt; exp &lt; max&#95;exp) ==&gt; (unsigned(exp-1) &lt; (max&#95;exp-1))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09046" /><CodeLine lineNumber="9046"><Highlight kind="normal">    APInt ExpLSB = ExpMask &amp; ~(ExpMask.<a href="/docs/api/classes/llvm/apint/#acb9c55b6986369948507ca5241b4e411">shl</a>(1));</Highlight></CodeLine>
<Link id="l09047" /><CodeLine lineNumber="9047"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ExpLSBV = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(ExpLSB, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT);</Highlight></CodeLine>
<Link id="l09048" /><CodeLine lineNumber="9048"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ExpMinus1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT, AbsV, ExpLSBV);</Highlight></CodeLine>
<Link id="l09049" /><CodeLine lineNumber="9049"><Highlight kind="normal">    APInt ExpLimit = ExpMask - ExpLSB;</Highlight></CodeLine>
<Link id="l09050" /><CodeLine lineNumber="9050"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ExpLimitV = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(ExpLimit, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IntVT);</Highlight></CodeLine>
<Link id="l09051" /><CodeLine lineNumber="9051"><Highlight kind="normal">    PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, ExpMinus1, ExpLimitV, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>);</Highlight></CodeLine>
<Link id="l09052" /><CodeLine lineNumber="9052"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PartialCheck == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dab003a118cd0b76a814ba4dfc7077034a">fcNegNormal</a>)</Highlight></CodeLine>
<Link id="l09053" /><CodeLine lineNumber="9053"><Highlight kind="normal">      PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, PartialRes, SignV);</Highlight></CodeLine>
<Link id="l09054" /><CodeLine lineNumber="9054"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PartialCheck == <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1da052ace75708c251359ff22dd036417a6">fcPosNormal</a>) &#123;</Highlight></CodeLine>
<Link id="l09055" /><CodeLine lineNumber="9055"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> PosSignV =</Highlight></CodeLine>
<Link id="l09056" /><CodeLine lineNumber="9056"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, SignV, ResultInvertionMask);</Highlight></CodeLine>
<Link id="l09057" /><CodeLine lineNumber="9057"><Highlight kind="normal">      PartialRes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, PartialRes, PosSignV);</Highlight></CodeLine>
<Link id="l09058" /><CodeLine lineNumber="9058"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l09059" /><CodeLine lineNumber="9059"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsF80)</Highlight></CodeLine>
<Link id="l09060" /><CodeLine lineNumber="9060"><Highlight kind="normal">      PartialRes =</Highlight></CodeLine>
<Link id="l09061" /><CodeLine lineNumber="9061"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, PartialRes, getIntBitIsSet());</Highlight></CodeLine>
<Link id="l09062" /><CodeLine lineNumber="9062"><Highlight kind="normal">    appendResult(PartialRes);</Highlight></CodeLine>
<Link id="l09063" /><CodeLine lineNumber="9063"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09064" /><CodeLine lineNumber="9064"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09065" /><CodeLine lineNumber="9065"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Res)</Highlight></CodeLine>
<Link id="l09066" /><CodeLine lineNumber="9066"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(IsInverted, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT);</Highlight></CodeLine>
<Link id="l09067" /><CodeLine lineNumber="9067"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsInverted)</Highlight></CodeLine>
<Link id="l09068" /><CodeLine lineNumber="9068"><Highlight kind="normal">    Res = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResultVT, Res, ResultInvertionMask);</Highlight></CodeLine>
<Link id="l09069" /><CodeLine lineNumber="9069"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Res;</Highlight></CodeLine>
<Link id="l09070" /><CodeLine lineNumber="9070"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09071" /><CodeLine lineNumber="9071"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09072" /><CodeLine lineNumber="9072"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Only expand vector types if we have the appropriate vector bit operations.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09073" /><CodeLine lineNumber="9073" lineLink="#ac8600b395666a2e54d6f347b58df6f62"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="#ac8600b395666a2e54d6f347b58df6f62">canExpandVectorCTPOP</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering">TargetLowering</a> &amp;TLI, <a href="/docs/api/structs/llvm/evt">EVT</a> VT) &#123;</Highlight></CodeLine>
<Link id="l09074" /><CodeLine lineNumber="9074"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Expected vector type&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l09075" /><CodeLine lineNumber="9075"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Len = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l09076" /><CodeLine lineNumber="9076"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> TLI.<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l09077" /><CodeLine lineNumber="9077"><Highlight kind="normal">         TLI.<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l09078" /><CodeLine lineNumber="9078"><Highlight kind="normal">         TLI.<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l09079" /><CodeLine lineNumber="9079"><Highlight kind="normal">         (Len == 8 || TLI.<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, VT)) &amp;&amp;</Highlight></CodeLine>
<Link id="l09080" /><CodeLine lineNumber="9080"><Highlight kind="normal">         TLI.<a href="/docs/api/classes/llvm/targetloweringbase/#afd2a90bd679de6f5964ce9b6f9931541">isOperationLegalOrCustomOrPromote</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, VT);</Highlight></CodeLine>
<Link id="l09081" /><CodeLine lineNumber="9081"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09082" /><CodeLine lineNumber="9082"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09083" /><CodeLine lineNumber="9083"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a4fc0254299bd69d2edbd4bf7949292dc">TargetLowering::expandCTPOP</a>(SDNode &#42;Node, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09084" /><CodeLine lineNumber="9084"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l09085" /><CodeLine lineNumber="9085"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l09086" /><CodeLine lineNumber="9086"><Highlight kind="normal">  EVT ShVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a6a2579bc0354806c6c9708b068777c3a">getShiftAmountTy</a>(VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l09087" /><CodeLine lineNumber="9087"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l09088" /><CodeLine lineNumber="9088"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/omp/#a16d7c5f77008a84ae20bf4a5c41e51f0ae88b4464fe326a51e6e6dfae28dd536d">Len</a> = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l09089" /><CodeLine lineNumber="9089"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VT.<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;CTPOP not implemented for this type.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l09090" /><CodeLine lineNumber="9090"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09091" /><CodeLine lineNumber="9091"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: Add support for irregular type lengths.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09092" /><CodeLine lineNumber="9092"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!(Len &lt;= 128 &amp;&amp; Len % 8 == 0))</Highlight></CodeLine>
<Link id="l09093" /><CodeLine lineNumber="9093"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l09094" /><CodeLine lineNumber="9094"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09095" /><CodeLine lineNumber="9095"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Only expand vector types if we have the appropriate vector bit operations.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09096" /><CodeLine lineNumber="9096"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; !<a href="#ac8600b395666a2e54d6f347b58df6f62">canExpandVectorCTPOP</a>(&#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">, VT))</Highlight></CodeLine>
<Link id="l09097" /><CodeLine lineNumber="9097"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l09098" /><CodeLine lineNumber="9098"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09099" /><CodeLine lineNumber="9099"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This is the &quot;best&quot; algorithm from</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09100" /><CodeLine lineNumber="9100"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetParallel</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09101" /><CodeLine lineNumber="9101"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Mask55 =</Highlight></CodeLine>
<Link id="l09102" /><CodeLine lineNumber="9102"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Len, APInt(8, 0x55)), dl, VT);</Highlight></CodeLine>
<Link id="l09103" /><CodeLine lineNumber="9103"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Mask33 =</Highlight></CodeLine>
<Link id="l09104" /><CodeLine lineNumber="9104"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Len, APInt(8, 0x33)), dl, VT);</Highlight></CodeLine>
<Link id="l09105" /><CodeLine lineNumber="9105"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Mask0F =</Highlight></CodeLine>
<Link id="l09106" /><CodeLine lineNumber="9106"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Len, APInt(8, 0x0F)), dl, VT);</Highlight></CodeLine>
<Link id="l09107" /><CodeLine lineNumber="9107"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09108" /><CodeLine lineNumber="9108"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// v = v - ((v &gt;&gt; 1) &amp; 0x55555555...)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09109" /><CodeLine lineNumber="9109"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09110" /><CodeLine lineNumber="9110"><Highlight kind="normal">                   DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT,</Highlight></CodeLine>
<Link id="l09111" /><CodeLine lineNumber="9111"><Highlight kind="normal">                               DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09112" /><CodeLine lineNumber="9112"><Highlight kind="normal">                                           DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, ShVT)),</Highlight></CodeLine>
<Link id="l09113" /><CodeLine lineNumber="9113"><Highlight kind="normal">                               Mask55));</Highlight></CodeLine>
<Link id="l09114" /><CodeLine lineNumber="9114"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// v = (v &amp; 0x33333333...) + ((v &gt;&gt; 2) &amp; 0x33333333...)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09115" /><CodeLine lineNumber="9115"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Mask33),</Highlight></CodeLine>
<Link id="l09116" /><CodeLine lineNumber="9116"><Highlight kind="normal">                   DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT,</Highlight></CodeLine>
<Link id="l09117" /><CodeLine lineNumber="9117"><Highlight kind="normal">                               DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09118" /><CodeLine lineNumber="9118"><Highlight kind="normal">                                           DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(2, dl, ShVT)),</Highlight></CodeLine>
<Link id="l09119" /><CodeLine lineNumber="9119"><Highlight kind="normal">                               Mask33));</Highlight></CodeLine>
<Link id="l09120" /><CodeLine lineNumber="9120"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// v = (v + (v &gt;&gt; 4)) &amp; 0x0F0F0F0F...</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09121" /><CodeLine lineNumber="9121"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT,</Highlight></CodeLine>
<Link id="l09122" /><CodeLine lineNumber="9122"><Highlight kind="normal">                   DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09123" /><CodeLine lineNumber="9123"><Highlight kind="normal">                               DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09124" /><CodeLine lineNumber="9124"><Highlight kind="normal">                                           DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(4, dl, ShVT))),</Highlight></CodeLine>
<Link id="l09125" /><CodeLine lineNumber="9125"><Highlight kind="normal">                   Mask0F);</Highlight></CodeLine>
<Link id="l09126" /><CodeLine lineNumber="9126"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09127" /><CodeLine lineNumber="9127"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Len &lt;= 8)</Highlight></CodeLine>
<Link id="l09128" /><CodeLine lineNumber="9128"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>;</Highlight></CodeLine>
<Link id="l09129" /><CodeLine lineNumber="9129"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09130" /><CodeLine lineNumber="9130"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Avoid the multiply if we only have 2 bytes to add.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09131" /><CodeLine lineNumber="9131"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: Only doing this for scalars because vectors weren&#39;t as obviously</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09132" /><CodeLine lineNumber="9132"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// improved.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09133" /><CodeLine lineNumber="9133"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Len == 16 &amp;&amp; !VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>()) &#123;</Highlight></CodeLine>
<Link id="l09134" /><CodeLine lineNumber="9134"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// v = (v + (v &gt;&gt; 8)) &amp; 0x00FF;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09135" /><CodeLine lineNumber="9135"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT,</Highlight></CodeLine>
<Link id="l09136" /><CodeLine lineNumber="9136"><Highlight kind="normal">                     DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09137" /><CodeLine lineNumber="9137"><Highlight kind="normal">                                 DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09138" /><CodeLine lineNumber="9138"><Highlight kind="normal">                                             DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(8, dl, ShVT))),</Highlight></CodeLine>
<Link id="l09139" /><CodeLine lineNumber="9139"><Highlight kind="normal">                     DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0xFF, dl, VT));</Highlight></CodeLine>
<Link id="l09140" /><CodeLine lineNumber="9140"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09141" /><CodeLine lineNumber="9141"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09142" /><CodeLine lineNumber="9142"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// v = (v &#42; 0x01010101...) &gt;&gt; (Len - 8)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09143" /><CodeLine lineNumber="9143"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>;</Highlight></CodeLine>
<Link id="l09144" /><CodeLine lineNumber="9144"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#afd2a90bd679de6f5964ce9b6f9931541">isOperationLegalOrCustomOrPromote</a>(</Highlight></CodeLine>
<Link id="l09145" /><CodeLine lineNumber="9145"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, <a href="/docs/api/classes/llvm/targetloweringbase/#a77f7add8733417370a56154e8b560617">getTypeToTransformTo</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT))) &#123;</Highlight></CodeLine>
<Link id="l09146" /><CodeLine lineNumber="9146"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Mask01 =</Highlight></CodeLine>
<Link id="l09147" /><CodeLine lineNumber="9147"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Len, APInt(8, 0x01)), dl, VT);</Highlight></CodeLine>
<Link id="l09148" /><CodeLine lineNumber="9148"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Mask01);</Highlight></CodeLine>
<Link id="l09149" /><CodeLine lineNumber="9149"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l09150" /><CodeLine lineNumber="9150"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>;</Highlight></CodeLine>
<Link id="l09151" /><CodeLine lineNumber="9151"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Shift = 8; Shift &lt; <a href="/docs/api/namespaces/llvm/omp/#a16d7c5f77008a84ae20bf4a5c41e51f0ae88b4464fe326a51e6e6dfae28dd536d">Len</a>; Shift &#42;= 2) &#123;</Highlight></CodeLine>
<Link id="l09152" /><CodeLine lineNumber="9152"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShiftC = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(Shift, VT, dl);</Highlight></CodeLine>
<Link id="l09153" /><CodeLine lineNumber="9153"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, V,</Highlight></CodeLine>
<Link id="l09154" /><CodeLine lineNumber="9154"><Highlight kind="normal">                      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, V, ShiftC));</Highlight></CodeLine>
<Link id="l09155" /><CodeLine lineNumber="9155"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l09156" /><CodeLine lineNumber="9156"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09157" /><CodeLine lineNumber="9157"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, V, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Len - 8, dl, ShVT));</Highlight></CodeLine>
<Link id="l09158" /><CodeLine lineNumber="9158"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09159" /><CodeLine lineNumber="9159"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09160" /><CodeLine lineNumber="9160"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a63399fefaac1b73b4c1a56c0c941004d">TargetLowering::expandVPCTPOP</a>(SDNode &#42;Node, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09161" /><CodeLine lineNumber="9161"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l09162" /><CodeLine lineNumber="9162"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l09163" /><CodeLine lineNumber="9163"><Highlight kind="normal">  EVT ShVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a6a2579bc0354806c6c9708b068777c3a">getShiftAmountTy</a>(VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l09164" /><CodeLine lineNumber="9164"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l09165" /><CodeLine lineNumber="9165"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l09166" /><CodeLine lineNumber="9166"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> VL = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(2);</Highlight></CodeLine>
<Link id="l09167" /><CodeLine lineNumber="9167"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/omp/#a16d7c5f77008a84ae20bf4a5c41e51f0ae88b4464fe326a51e6e6dfae28dd536d">Len</a> = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l09168" /><CodeLine lineNumber="9168"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VT.<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;VP&#95;CTPOP not implemented for this type.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l09169" /><CodeLine lineNumber="9169"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09170" /><CodeLine lineNumber="9170"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: Add support for irregular type lengths.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09171" /><CodeLine lineNumber="9171"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!(Len &lt;= 128 &amp;&amp; Len % 8 == 0))</Highlight></CodeLine>
<Link id="l09172" /><CodeLine lineNumber="9172"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l09173" /><CodeLine lineNumber="9173"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09174" /><CodeLine lineNumber="9174"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This is same algorithm of expandCTPOP from</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09175" /><CodeLine lineNumber="9175"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetParallel</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09176" /><CodeLine lineNumber="9176"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Mask55 =</Highlight></CodeLine>
<Link id="l09177" /><CodeLine lineNumber="9177"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Len, APInt(8, 0x55)), dl, VT);</Highlight></CodeLine>
<Link id="l09178" /><CodeLine lineNumber="9178"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Mask33 =</Highlight></CodeLine>
<Link id="l09179" /><CodeLine lineNumber="9179"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Len, APInt(8, 0x33)), dl, VT);</Highlight></CodeLine>
<Link id="l09180" /><CodeLine lineNumber="9180"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Mask0F =</Highlight></CodeLine>
<Link id="l09181" /><CodeLine lineNumber="9181"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Len, APInt(8, 0x0F)), dl, VT);</Highlight></CodeLine>
<Link id="l09182" /><CodeLine lineNumber="9182"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09183" /><CodeLine lineNumber="9183"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Tmp1, Tmp2, Tmp3, Tmp4, Tmp5;</Highlight></CodeLine>
<Link id="l09184" /><CodeLine lineNumber="9184"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09185" /><CodeLine lineNumber="9185"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// v = v - ((v &gt;&gt; 1) &amp; 0x55555555...)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09186" /><CodeLine lineNumber="9186"><Highlight kind="normal">  Tmp1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT,</Highlight></CodeLine>
<Link id="l09187" /><CodeLine lineNumber="9187"><Highlight kind="normal">                     DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09188" /><CodeLine lineNumber="9188"><Highlight kind="normal">                                 DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, ShVT), Mask, VL),</Highlight></CodeLine>
<Link id="l09189" /><CodeLine lineNumber="9189"><Highlight kind="normal">                     Mask55, Mask, VL);</Highlight></CodeLine>
<Link id="l09190" /><CodeLine lineNumber="9190"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SUB, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Tmp1, Mask, VL);</Highlight></CodeLine>
<Link id="l09191" /><CodeLine lineNumber="9191"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09192" /><CodeLine lineNumber="9192"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// v = (v &amp; 0x33333333...) + ((v &gt;&gt; 2) &amp; 0x33333333...)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09193" /><CodeLine lineNumber="9193"><Highlight kind="normal">  Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Mask33, Mask, VL);</Highlight></CodeLine>
<Link id="l09194" /><CodeLine lineNumber="9194"><Highlight kind="normal">  Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT,</Highlight></CodeLine>
<Link id="l09195" /><CodeLine lineNumber="9195"><Highlight kind="normal">                     DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09196" /><CodeLine lineNumber="9196"><Highlight kind="normal">                                 DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(2, dl, ShVT), Mask, VL),</Highlight></CodeLine>
<Link id="l09197" /><CodeLine lineNumber="9197"><Highlight kind="normal">                     Mask33, Mask, VL);</Highlight></CodeLine>
<Link id="l09198" /><CodeLine lineNumber="9198"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;ADD, dl, VT, Tmp2, Tmp3, Mask, VL);</Highlight></CodeLine>
<Link id="l09199" /><CodeLine lineNumber="9199"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09200" /><CodeLine lineNumber="9200"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// v = (v + (v &gt;&gt; 4)) &amp; 0x0F0F0F0F...</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09201" /><CodeLine lineNumber="9201"><Highlight kind="normal">  Tmp4 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(4, dl, ShVT),</Highlight></CodeLine>
<Link id="l09202" /><CodeLine lineNumber="9202"><Highlight kind="normal">                     Mask, VL),</Highlight></CodeLine>
<Link id="l09203" /><CodeLine lineNumber="9203"><Highlight kind="normal">  Tmp5 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;ADD, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Tmp4, Mask, VL);</Highlight></CodeLine>
<Link id="l09204" /><CodeLine lineNumber="9204"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, Tmp5, Mask0F, Mask, VL);</Highlight></CodeLine>
<Link id="l09205" /><CodeLine lineNumber="9205"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09206" /><CodeLine lineNumber="9206"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Len &lt;= 8)</Highlight></CodeLine>
<Link id="l09207" /><CodeLine lineNumber="9207"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>;</Highlight></CodeLine>
<Link id="l09208" /><CodeLine lineNumber="9208"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09209" /><CodeLine lineNumber="9209"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// v = (v &#42; 0x01010101...) &gt;&gt; (Len - 8)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09210" /><CodeLine lineNumber="9210"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>;</Highlight></CodeLine>
<Link id="l09211" /><CodeLine lineNumber="9211"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#afd2a90bd679de6f5964ce9b6f9931541">isOperationLegalOrCustomOrPromote</a>(</Highlight></CodeLine>
<Link id="l09212" /><CodeLine lineNumber="9212"><Highlight kind="normal">          ISD::VP&#95;MUL, <a href="/docs/api/classes/llvm/targetloweringbase/#a77f7add8733417370a56154e8b560617">getTypeToTransformTo</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT))) &#123;</Highlight></CodeLine>
<Link id="l09213" /><CodeLine lineNumber="9213"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Mask01 =</Highlight></CodeLine>
<Link id="l09214" /><CodeLine lineNumber="9214"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Len, APInt(8, 0x01)), dl, VT);</Highlight></CodeLine>
<Link id="l09215" /><CodeLine lineNumber="9215"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;MUL, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Mask01, Mask, VL);</Highlight></CodeLine>
<Link id="l09216" /><CodeLine lineNumber="9216"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l09217" /><CodeLine lineNumber="9217"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a> = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>;</Highlight></CodeLine>
<Link id="l09218" /><CodeLine lineNumber="9218"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Shift = 8; Shift &lt; <a href="/docs/api/namespaces/llvm/omp/#a16d7c5f77008a84ae20bf4a5c41e51f0ae88b4464fe326a51e6e6dfae28dd536d">Len</a>; Shift &#42;= 2) &#123;</Highlight></CodeLine>
<Link id="l09219" /><CodeLine lineNumber="9219"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShiftC = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(Shift, VT, dl);</Highlight></CodeLine>
<Link id="l09220" /><CodeLine lineNumber="9220"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;ADD, dl, VT, V,</Highlight></CodeLine>
<Link id="l09221" /><CodeLine lineNumber="9221"><Highlight kind="normal">                      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SHL, dl, VT, V, ShiftC, Mask, VL),</Highlight></CodeLine>
<Link id="l09222" /><CodeLine lineNumber="9222"><Highlight kind="normal">                      Mask, VL);</Highlight></CodeLine>
<Link id="l09223" /><CodeLine lineNumber="9223"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l09224" /><CodeLine lineNumber="9224"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09225" /><CodeLine lineNumber="9225"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, dl, VT, V, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Len - 8, dl, ShVT),</Highlight></CodeLine>
<Link id="l09226" /><CodeLine lineNumber="9226"><Highlight kind="normal">                     Mask, VL);</Highlight></CodeLine>
<Link id="l09227" /><CodeLine lineNumber="9227"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09228" /><CodeLine lineNumber="9228"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09229" /><CodeLine lineNumber="9229"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#aa7fb5a0db40a7dbc4a0ac57bda71b893">TargetLowering::expandCTLZ</a>(SDNode &#42;Node, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09230" /><CodeLine lineNumber="9230"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l09231" /><CodeLine lineNumber="9231"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l09232" /><CodeLine lineNumber="9232"><Highlight kind="normal">  EVT ShVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a6a2579bc0354806c6c9708b068777c3a">getShiftAmountTy</a>(VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l09233" /><CodeLine lineNumber="9233"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l09234" /><CodeLine lineNumber="9234"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumBitsPerElt = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l09235" /><CodeLine lineNumber="9235"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09236" /><CodeLine lineNumber="9236"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the non-ZERO&#95;UNDEF version is supported we can use that instead.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09237" /><CodeLine lineNumber="9237"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0340c8d57d1dcebc43a00412989583d3">ISD::CTLZ&#95;ZERO&#95;UNDEF</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l09238" /><CodeLine lineNumber="9238"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110add33c0ae9a63902e573fc1f92fc33f1c">ISD::CTLZ</a>, VT))</Highlight></CodeLine>
<Link id="l09239" /><CodeLine lineNumber="9239"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110add33c0ae9a63902e573fc1f92fc33f1c">ISD::CTLZ</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l09240" /><CodeLine lineNumber="9240"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09241" /><CodeLine lineNumber="9241"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the ZERO&#95;UNDEF version is supported use that and handle the zero case.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09242" /><CodeLine lineNumber="9242"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0340c8d57d1dcebc43a00412989583d3">ISD::CTLZ&#95;ZERO&#95;UNDEF</a>, VT)) &#123;</Highlight></CodeLine>
<Link id="l09243" /><CodeLine lineNumber="9243"><Highlight kind="normal">    EVT SetCCVT =</Highlight></CodeLine>
<Link id="l09244" /><CodeLine lineNumber="9244"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l09245" /><CodeLine lineNumber="9245"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110add33c0ae9a63902e573fc1f92fc33f1c">CTLZ</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0340c8d57d1dcebc43a00412989583d3">ISD::CTLZ&#95;ZERO&#95;UNDEF</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l09246" /><CodeLine lineNumber="9246"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, VT);</Highlight></CodeLine>
<Link id="l09247" /><CodeLine lineNumber="9247"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SrcIsZero = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Zero, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l09248" /><CodeLine lineNumber="9248"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, VT, SrcIsZero,</Highlight></CodeLine>
<Link id="l09249" /><CodeLine lineNumber="9249"><Highlight kind="normal">                         DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(NumBitsPerElt, dl, VT), CTLZ);</Highlight></CodeLine>
<Link id="l09250" /><CodeLine lineNumber="9250"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09251" /><CodeLine lineNumber="9251"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09252" /><CodeLine lineNumber="9252"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Only expand vector types if we have the appropriate vector bit operations.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09253" /><CodeLine lineNumber="9253"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This includes the operations needed to expand CTPOP if it isn&#39;t supported.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09254" /><CodeLine lineNumber="9254"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; (!<a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(NumBitsPerElt) ||</Highlight></CodeLine>
<Link id="l09255" /><CodeLine lineNumber="9255"><Highlight kind="normal">                        (!<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a991d07d163bd4d9984cf1ef36e92c214">ISD::CTPOP</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l09256" /><CodeLine lineNumber="9256"><Highlight kind="normal">                         !<a href="#ac8600b395666a2e54d6f347b58df6f62">canExpandVectorCTPOP</a>(&#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">, VT)) ||</Highlight></CodeLine>
<Link id="l09257" /><CodeLine lineNumber="9257"><Highlight kind="normal">                        !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, VT) ||</Highlight></CodeLine>
<Link id="l09258" /><CodeLine lineNumber="9258"><Highlight kind="normal">                        !<a href="/docs/api/classes/llvm/targetloweringbase/#afd2a90bd679de6f5964ce9b6f9931541">isOperationLegalOrCustomOrPromote</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, VT)))</Highlight></CodeLine>
<Link id="l09259" /><CodeLine lineNumber="9259"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l09260" /><CodeLine lineNumber="9260"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09261" /><CodeLine lineNumber="9261"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// for now, we do this:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09262" /><CodeLine lineNumber="9262"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// x = x | (x &gt;&gt; 1);</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09263" /><CodeLine lineNumber="9263"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// x = x | (x &gt;&gt; 2);</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09264" /><CodeLine lineNumber="9264"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ...</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09265" /><CodeLine lineNumber="9265"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// x = x | (x &gt;&gt;16);</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09266" /><CodeLine lineNumber="9266"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// x = x | (x &gt;&gt;32); // for 64-bit input</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09267" /><CodeLine lineNumber="9267"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// return popcount(~x);</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09268" /><CodeLine lineNumber="9268"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09269" /><CodeLine lineNumber="9269"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Ref: &quot;Hacker&#39;s Delight&quot; by Henry Warren</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09270" /><CodeLine lineNumber="9270"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; (1U &lt;&lt; i) &lt; NumBitsPerElt; ++i) &#123;</Highlight></CodeLine>
<Link id="l09271" /><CodeLine lineNumber="9271"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Tmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1ULL &lt;&lt; i, dl, ShVT);</Highlight></CodeLine>
<Link id="l09272" /><CodeLine lineNumber="9272"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09273" /><CodeLine lineNumber="9273"><Highlight kind="normal">                     DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Tmp));</Highlight></CodeLine>
<Link id="l09274" /><CodeLine lineNumber="9274"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09275" /><CodeLine lineNumber="9275"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(dl, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, VT);</Highlight></CodeLine>
<Link id="l09276" /><CodeLine lineNumber="9276"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a991d07d163bd4d9984cf1ef36e92c214">ISD::CTPOP</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l09277" /><CodeLine lineNumber="9277"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09278" /><CodeLine lineNumber="9278"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09279" /><CodeLine lineNumber="9279"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a3d7ed5e11454a58e268bc32c6794a26f">TargetLowering::expandVPCTLZ</a>(SDNode &#42;Node, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09280" /><CodeLine lineNumber="9280"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l09281" /><CodeLine lineNumber="9281"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l09282" /><CodeLine lineNumber="9282"><Highlight kind="normal">  EVT ShVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a6a2579bc0354806c6c9708b068777c3a">getShiftAmountTy</a>(VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l09283" /><CodeLine lineNumber="9283"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l09284" /><CodeLine lineNumber="9284"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l09285" /><CodeLine lineNumber="9285"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> VL = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(2);</Highlight></CodeLine>
<Link id="l09286" /><CodeLine lineNumber="9286"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumBitsPerElt = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l09287" /><CodeLine lineNumber="9287"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09288" /><CodeLine lineNumber="9288"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// do this:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09289" /><CodeLine lineNumber="9289"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// x = x | (x &gt;&gt; 1);</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09290" /><CodeLine lineNumber="9290"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// x = x | (x &gt;&gt; 2);</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09291" /><CodeLine lineNumber="9291"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ...</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09292" /><CodeLine lineNumber="9292"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// x = x | (x &gt;&gt;16);</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09293" /><CodeLine lineNumber="9293"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// x = x | (x &gt;&gt;32); // for 64-bit input</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09294" /><CodeLine lineNumber="9294"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// return popcount(~x);</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09295" /><CodeLine lineNumber="9295"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; (1U &lt;&lt; i) &lt; NumBitsPerElt; ++i) &#123;</Highlight></CodeLine>
<Link id="l09296" /><CodeLine lineNumber="9296"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Tmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1ULL &lt;&lt; i, dl, ShVT);</Highlight></CodeLine>
<Link id="l09297" /><CodeLine lineNumber="9297"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;OR, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09298" /><CodeLine lineNumber="9298"><Highlight kind="normal">                     DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Tmp, Mask, VL), Mask,</Highlight></CodeLine>
<Link id="l09299" /><CodeLine lineNumber="9299"><Highlight kind="normal">                     VL);</Highlight></CodeLine>
<Link id="l09300" /><CodeLine lineNumber="9300"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09301" /><CodeLine lineNumber="9301"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;XOR, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1b134112bb3b8986d8082832a16eab6f">getAllOnesConstant</a>(dl, VT),</Highlight></CodeLine>
<Link id="l09302" /><CodeLine lineNumber="9302"><Highlight kind="normal">                   Mask, VL);</Highlight></CodeLine>
<Link id="l09303" /><CodeLine lineNumber="9303"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;CTPOP, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Mask, VL);</Highlight></CodeLine>
<Link id="l09304" /><CodeLine lineNumber="9304"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09305" /><CodeLine lineNumber="9305"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09306" /><CodeLine lineNumber="9306"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#ae4ab2e1ac81721435d73f03617e59fc7">TargetLowering::CTTZTableLookup</a>(SDNode &#42;Node, SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l09307" /><CodeLine lineNumber="9307"><Highlight kind="normal">                                        </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, EVT VT, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09308" /><CodeLine lineNumber="9308"><Highlight kind="normal">                                        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09309" /><CodeLine lineNumber="9309"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> != 32 &amp;&amp; <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> != 64)</Highlight></CodeLine>
<Link id="l09310" /><CodeLine lineNumber="9310"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l09311" /><CodeLine lineNumber="9311"><Highlight kind="normal">  APInt DeBruijn = <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> == 32 ? APInt(32, 0x077CB531U)</Highlight></CodeLine>
<Link id="l09312" /><CodeLine lineNumber="9312"><Highlight kind="normal">                                  : APInt(64, 0x0218A392CD3D5DBFULL);</Highlight></CodeLine>
<Link id="l09313" /><CodeLine lineNumber="9313"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> DataLayout &amp;TD = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>();</Highlight></CodeLine>
<Link id="l09314" /><CodeLine lineNumber="9314"><Highlight kind="normal">  MachinePointerInfo PtrInfo =</Highlight></CodeLine>
<Link id="l09315" /><CodeLine lineNumber="9315"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/machinepointerinfo/#a8b1a64bd0c1be7a99998055c78d1312b">MachinePointerInfo::getConstantPool</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac64ec73b0617befef1fb2eae78d12b5f">getMachineFunction</a>());</Highlight></CodeLine>
<Link id="l09316" /><CodeLine lineNumber="9316"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShiftAmt = <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - <a href="/docs/api/namespaces/llvm/#a646986783f35e0fef8988f0f28d2589f">Log2&#95;32</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l09317" /><CodeLine lineNumber="9317"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Neg = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT), <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l09318" /><CodeLine lineNumber="9318"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86floatingpoint-cpp/#ac28513e2e067144d291d2d8f0301b61a">Lookup</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(</Highlight></CodeLine>
<Link id="l09319" /><CodeLine lineNumber="9319"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT,</Highlight></CodeLine>
<Link id="l09320" /><CodeLine lineNumber="9320"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Neg),</Highlight></CodeLine>
<Link id="l09321" /><CodeLine lineNumber="9321"><Highlight kind="normal">                  DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(DeBruijn, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT)),</Highlight></CodeLine>
<Link id="l09322" /><CodeLine lineNumber="9322"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(ShiftAmt, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT));</Highlight></CodeLine>
<Link id="l09323" /><CodeLine lineNumber="9323"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86floatingpoint-cpp/#ac28513e2e067144d291d2d8f0301b61a">Lookup</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a9c2450d7d33fb2ecb9b645f1ca6a9a64">getSExtOrTrunc</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86floatingpoint-cpp/#ac28513e2e067144d291d2d8f0301b61a">Lookup</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/classes/llvm/targetloweringbase/#a8aabf5d0aa80038973255ff2d1e1a9fc">getPointerTy</a>(TD));</Highlight></CodeLine>
<Link id="l09324" /><CodeLine lineNumber="9324"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09325" /><CodeLine lineNumber="9325"><Highlight kind="normal">  SmallVector&lt;uint8&#95;t&gt; Table(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, 0);</Highlight></CodeLine>
<Link id="l09326" /><CodeLine lineNumber="9326"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i &lt; <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>; i++) &#123;</Highlight></CodeLine>
<Link id="l09327" /><CodeLine lineNumber="9327"><Highlight kind="normal">    APInt Shl = DeBruijn.<a href="/docs/api/classes/llvm/apint/#acb9c55b6986369948507ca5241b4e411">shl</a>(i);</Highlight></CodeLine>
<Link id="l09328" /><CodeLine lineNumber="9328"><Highlight kind="normal">    APInt Lshr = Shl.<a href="/docs/api/classes/llvm/apint/#af34549c39d6f741fbdaf9a795aa306e9">lshr</a>(ShiftAmt);</Highlight></CodeLine>
<Link id="l09329" /><CodeLine lineNumber="9329"><Highlight kind="normal">    Table&#91;Lshr.<a href="/docs/api/classes/llvm/apint/#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>()&#93; = i;</Highlight></CodeLine>
<Link id="l09330" /><CodeLine lineNumber="9330"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09331" /><CodeLine lineNumber="9331"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09332" /><CodeLine lineNumber="9332"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Create a ConstantArray in Constant Pool</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09333" /><CodeLine lineNumber="9333"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;CA = <a href="/docs/api/classes/llvm/constantdataarray/#a4a1000e5803e731e9dcc572042a98a0b">ConstantDataArray::get</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), Table);</Highlight></CodeLine>
<Link id="l09334" /><CodeLine lineNumber="9334"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> CPIdx = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a22c327ddfcb98f911f3197180981f41e">getConstantPool</a>(CA, <a href="/docs/api/classes/llvm/targetloweringbase/#a8aabf5d0aa80038973255ff2d1e1a9fc">getPointerTy</a>(TD),</Highlight></CodeLine>
<Link id="l09335" /><CodeLine lineNumber="9335"><Highlight kind="normal">                                      TD.<a href="/docs/api/classes/llvm/datalayout/#af9185c7e96873c6d2c13e1f1b6322cf6">getPrefTypeAlign</a>(CA-&gt;getType()));</Highlight></CodeLine>
<Link id="l09336" /><CodeLine lineNumber="9336"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ExtLoad = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a03140e92d989c9a96312035efb8f67fc">getExtLoad</a>(<a href="/docs/api/namespaces/llvm/isd/#ad4d48171b87ca51ff54c10a436bac4d7a8d89c7da4444d9ec11667aa369abc5f7">ISD::ZEXTLOAD</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#af0f68c9c0e4a38aebd5773f80dd5b716">getEntryNode</a>(),</Highlight></CodeLine>
<Link id="l09337" /><CodeLine lineNumber="9337"><Highlight kind="normal">                                   DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7ec0665296f2e3099a8f4d083e77f425">getMemBasePlusOffset</a>(CPIdx, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86floatingpoint-cpp/#ac28513e2e067144d291d2d8f0301b61a">Lookup</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>),</Highlight></CodeLine>
<Link id="l09338" /><CodeLine lineNumber="9338"><Highlight kind="normal">                                   PtrInfo, MVT::i8);</Highlight></CodeLine>
<Link id="l09339" /><CodeLine lineNumber="9339"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a601e66a26efd05520f7cb26aef3af340">ISD::CTTZ&#95;ZERO&#95;UNDEF</a>)</Highlight></CodeLine>
<Link id="l09340" /><CodeLine lineNumber="9340"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> ExtLoad;</Highlight></CodeLine>
<Link id="l09341" /><CodeLine lineNumber="9341"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09342" /><CodeLine lineNumber="9342"><Highlight kind="normal">  EVT SetCCVT =</Highlight></CodeLine>
<Link id="l09343" /><CodeLine lineNumber="9343"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l09344" /><CodeLine lineNumber="9344"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT);</Highlight></CodeLine>
<Link id="l09345" /><CodeLine lineNumber="9345"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SrcIsZero = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SetCCVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Zero, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l09346" /><CodeLine lineNumber="9346"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, SrcIsZero,</Highlight></CodeLine>
<Link id="l09347" /><CodeLine lineNumber="9347"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT), ExtLoad);</Highlight></CodeLine>
<Link id="l09348" /><CodeLine lineNumber="9348"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09349" /><CodeLine lineNumber="9349"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09350" /><CodeLine lineNumber="9350"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a3060b73c758e36617520472f85e8a66d">TargetLowering::expandCTTZ</a>(SDNode &#42;Node, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09351" /><CodeLine lineNumber="9351"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l09352" /><CodeLine lineNumber="9352"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l09353" /><CodeLine lineNumber="9353"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l09354" /><CodeLine lineNumber="9354"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumBitsPerElt = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l09355" /><CodeLine lineNumber="9355"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09356" /><CodeLine lineNumber="9356"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the non-ZERO&#95;UNDEF version is supported we can use that instead.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09357" /><CodeLine lineNumber="9357"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a601e66a26efd05520f7cb26aef3af340">ISD::CTTZ&#95;ZERO&#95;UNDEF</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l09358" /><CodeLine lineNumber="9358"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a6da41a113af0909470baea7486b3386b">ISD::CTTZ</a>, VT))</Highlight></CodeLine>
<Link id="l09359" /><CodeLine lineNumber="9359"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a6da41a113af0909470baea7486b3386b">ISD::CTTZ</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l09360" /><CodeLine lineNumber="9360"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09361" /><CodeLine lineNumber="9361"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the ZERO&#95;UNDEF version is supported use that and handle the zero case.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09362" /><CodeLine lineNumber="9362"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a601e66a26efd05520f7cb26aef3af340">ISD::CTTZ&#95;ZERO&#95;UNDEF</a>, VT)) &#123;</Highlight></CodeLine>
<Link id="l09363" /><CodeLine lineNumber="9363"><Highlight kind="normal">    EVT SetCCVT =</Highlight></CodeLine>
<Link id="l09364" /><CodeLine lineNumber="9364"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l09365" /><CodeLine lineNumber="9365"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a6da41a113af0909470baea7486b3386b">CTTZ</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a601e66a26efd05520f7cb26aef3af340">ISD::CTTZ&#95;ZERO&#95;UNDEF</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l09366" /><CodeLine lineNumber="9366"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, VT);</Highlight></CodeLine>
<Link id="l09367" /><CodeLine lineNumber="9367"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SrcIsZero = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Zero, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l09368" /><CodeLine lineNumber="9368"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, VT, SrcIsZero,</Highlight></CodeLine>
<Link id="l09369" /><CodeLine lineNumber="9369"><Highlight kind="normal">                         DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(NumBitsPerElt, dl, VT), CTTZ);</Highlight></CodeLine>
<Link id="l09370" /><CodeLine lineNumber="9370"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09371" /><CodeLine lineNumber="9371"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09372" /><CodeLine lineNumber="9372"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Only expand vector types if we have the appropriate vector bit operations.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09373" /><CodeLine lineNumber="9373"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This includes the operations needed to expand CTPOP if it isn&#39;t supported.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09374" /><CodeLine lineNumber="9374"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; (!<a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(NumBitsPerElt) ||</Highlight></CodeLine>
<Link id="l09375" /><CodeLine lineNumber="9375"><Highlight kind="normal">                        (!<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a991d07d163bd4d9984cf1ef36e92c214">ISD::CTPOP</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l09376" /><CodeLine lineNumber="9376"><Highlight kind="normal">                         !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110add33c0ae9a63902e573fc1f92fc33f1c">ISD::CTLZ</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l09377" /><CodeLine lineNumber="9377"><Highlight kind="normal">                         !<a href="#ac8600b395666a2e54d6f347b58df6f62">canExpandVectorCTPOP</a>(&#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">, VT)) ||</Highlight></CodeLine>
<Link id="l09378" /><CodeLine lineNumber="9378"><Highlight kind="normal">                        !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, VT) ||</Highlight></CodeLine>
<Link id="l09379" /><CodeLine lineNumber="9379"><Highlight kind="normal">                        !<a href="/docs/api/classes/llvm/targetloweringbase/#afd2a90bd679de6f5964ce9b6f9931541">isOperationLegalOrCustomOrPromote</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, VT) ||</Highlight></CodeLine>
<Link id="l09380" /><CodeLine lineNumber="9380"><Highlight kind="normal">                        !<a href="/docs/api/classes/llvm/targetloweringbase/#afd2a90bd679de6f5964ce9b6f9931541">isOperationLegalOrCustomOrPromote</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, VT)))</Highlight></CodeLine>
<Link id="l09381" /><CodeLine lineNumber="9381"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l09382" /><CodeLine lineNumber="9382"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09383" /><CodeLine lineNumber="9383"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Emit Table Lookup if ISD::CTLZ and ISD::CTPOP are not legal.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09384" /><CodeLine lineNumber="9384"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a0248ed29f933c5faa55cbdfebf3139bd">isOperationExpand</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a991d07d163bd4d9984cf1ef36e92c214">ISD::CTPOP</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l09385" /><CodeLine lineNumber="9385"><Highlight kind="normal">      !<a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110add33c0ae9a63902e573fc1f92fc33f1c">ISD::CTLZ</a>, VT))</Highlight></CodeLine>
<Link id="l09386" /><CodeLine lineNumber="9386"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> V = CTTZTableLookup(Node, DAG, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, NumBitsPerElt))</Highlight></CodeLine>
<Link id="l09387" /><CodeLine lineNumber="9387"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a>;</Highlight></CodeLine>
<Link id="l09388" /><CodeLine lineNumber="9388"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09389" /><CodeLine lineNumber="9389"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// for now, we use: &#123; return popcount(~x &amp; (x - 1)); &#125;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09390" /><CodeLine lineNumber="9390"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// unless the target has ctlz but not ctpop, in which case we use:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09391" /><CodeLine lineNumber="9391"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// &#123; return 32 - nlz(~x &amp; (x-1)); &#125;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09392" /><CodeLine lineNumber="9392"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Ref: &quot;Hacker&#39;s Delight&quot; by Henry Warren</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09393" /><CodeLine lineNumber="9393"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Tmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(</Highlight></CodeLine>
<Link id="l09394" /><CodeLine lineNumber="9394"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(dl, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, VT),</Highlight></CodeLine>
<Link id="l09395" /><CodeLine lineNumber="9395"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, VT)));</Highlight></CodeLine>
<Link id="l09396" /><CodeLine lineNumber="9396"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09397" /><CodeLine lineNumber="9397"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If ISD::CTLZ is legal and CTPOP isn&#39;t, then do that instead.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09398" /><CodeLine lineNumber="9398"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110add33c0ae9a63902e573fc1f92fc33f1c">ISD::CTLZ</a>, VT) &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a991d07d163bd4d9984cf1ef36e92c214">ISD::CTPOP</a>, VT)) &#123;</Highlight></CodeLine>
<Link id="l09399" /><CodeLine lineNumber="9399"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(NumBitsPerElt, dl, VT),</Highlight></CodeLine>
<Link id="l09400" /><CodeLine lineNumber="9400"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110add33c0ae9a63902e573fc1f92fc33f1c">ISD::CTLZ</a>, dl, VT, Tmp));</Highlight></CodeLine>
<Link id="l09401" /><CodeLine lineNumber="9401"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09402" /><CodeLine lineNumber="9402"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09403" /><CodeLine lineNumber="9403"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a991d07d163bd4d9984cf1ef36e92c214">ISD::CTPOP</a>, dl, VT, Tmp);</Highlight></CodeLine>
<Link id="l09404" /><CodeLine lineNumber="9404"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09405" /><CodeLine lineNumber="9405"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09406" /><CodeLine lineNumber="9406"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#ab7abea2a5b5251eb10473c9c610d6490">TargetLowering::expandVPCTTZ</a>(SDNode &#42;Node, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09407" /><CodeLine lineNumber="9407"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l09408" /><CodeLine lineNumber="9408"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l09409" /><CodeLine lineNumber="9409"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> VL = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(2);</Highlight></CodeLine>
<Link id="l09410" /><CodeLine lineNumber="9410"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l09411" /><CodeLine lineNumber="9411"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l09412" /><CodeLine lineNumber="9412"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09413" /><CodeLine lineNumber="9413"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Same as the vector part of expandCTTZ, use: popcount(~x &amp; (x - 1))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09414" /><CodeLine lineNumber="9414"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/sdpatternmatch/#aee6b56ccafeac80e7ebd6b84ee5048c1">Not</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;XOR, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09415" /><CodeLine lineNumber="9415"><Highlight kind="normal">                            DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1b134112bb3b8986d8082832a16eab6f">getAllOnesConstant</a>(dl, VT), Mask, VL);</Highlight></CodeLine>
<Link id="l09416" /><CodeLine lineNumber="9416"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> MinusOne = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SUB, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09417" /><CodeLine lineNumber="9417"><Highlight kind="normal">                                 DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, VT), Mask, VL);</Highlight></CodeLine>
<Link id="l09418" /><CodeLine lineNumber="9418"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Tmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, Not, MinusOne, Mask, VL);</Highlight></CodeLine>
<Link id="l09419" /><CodeLine lineNumber="9419"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;CTPOP, dl, VT, Tmp, Mask, VL);</Highlight></CodeLine>
<Link id="l09420" /><CodeLine lineNumber="9420"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09421" /><CodeLine lineNumber="9421"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09422" /><CodeLine lineNumber="9422"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a6f29c194ef5edad7c896b8b1ea1b3637">TargetLowering::expandVPCTTZElements</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>,</Highlight></CodeLine>
<Link id="l09423" /><CodeLine lineNumber="9423"><Highlight kind="normal">                                             SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09424" /><CodeLine lineNumber="9424"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// %cond = to&#95;bool&#95;vec %source</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09425" /><CodeLine lineNumber="9425"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// %splat = splat /&#42;val=&#42;/VL</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09426" /><CodeLine lineNumber="9426"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// %tz = step&#95;vector</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09427" /><CodeLine lineNumber="9427"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// %v = vp.select %cond, /&#42;true=&#42;/tz, /&#42;false=&#42;/%splat</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09428" /><CodeLine lineNumber="9428"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// %r = vp.reduce.umin %v</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09429" /><CodeLine lineNumber="9429"><Highlight kind="normal">  SDLoc <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l09430" /><CodeLine lineNumber="9430"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/sched/#ab8d854a5ce2331586bcc6830cca52f0fac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a> = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l09431" /><CodeLine lineNumber="9431"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a> = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l09432" /><CodeLine lineNumber="9432"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> EVL = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(2);</Highlight></CodeLine>
<Link id="l09433" /><CodeLine lineNumber="9433"><Highlight kind="normal">  EVT SrcVT = <a href="/docs/api/namespaces/llvm/sched/#ab8d854a5ce2331586bcc6830cca52f0fac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>.getValueType();</Highlight></CodeLine>
<Link id="l09434" /><CodeLine lineNumber="9434"><Highlight kind="normal">  EVT ResVT = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l09435" /><CodeLine lineNumber="9435"><Highlight kind="normal">  EVT ResVecVT =</Highlight></CodeLine>
<Link id="l09436" /><CodeLine lineNumber="9436"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/evt/#a210ba6b43ba451b698857dd9de71bd15">EVT::getVectorVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), ResVT, SrcVT.<a href="/docs/api/structs/llvm/evt/#a3d102abca1c9c95f36546dff2f39273b">getVectorElementCount</a>());</Highlight></CodeLine>
<Link id="l09437" /><CodeLine lineNumber="9437"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09438" /><CodeLine lineNumber="9438"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Convert to boolean vector.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09439" /><CodeLine lineNumber="9439"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>() != MVT::i1) &#123;</Highlight></CodeLine>
<Link id="l09440" /><CodeLine lineNumber="9440"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> AllZero = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SrcVT);</Highlight></CodeLine>
<Link id="l09441" /><CodeLine lineNumber="9441"><Highlight kind="normal">    SrcVT = <a href="/docs/api/structs/llvm/evt/#a210ba6b43ba451b698857dd9de71bd15">EVT::getVectorVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), MVT::i1,</Highlight></CodeLine>
<Link id="l09442" /><CodeLine lineNumber="9442"><Highlight kind="normal">                             SrcVT.<a href="/docs/api/structs/llvm/evt/#a3d102abca1c9c95f36546dff2f39273b">getVectorElementCount</a>());</Highlight></CodeLine>
<Link id="l09443" /><CodeLine lineNumber="9443"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/sched/#ab8d854a5ce2331586bcc6830cca52f0fac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SETCC, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SrcVT, Source, AllZero,</Highlight></CodeLine>
<Link id="l09444" /><CodeLine lineNumber="9444"><Highlight kind="normal">                         DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad3db19b21e25af9ac5a1e514443b3d60">getCondCode</a>(<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>), Mask, EVL);</Highlight></CodeLine>
<Link id="l09445" /><CodeLine lineNumber="9445"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09446" /><CodeLine lineNumber="9446"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09447" /><CodeLine lineNumber="9447"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ExtEVL = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad0c6f059b29535f2c790d1c4f92b7a93">getZExtOrTrunc</a>(EVL, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResVT);</Highlight></CodeLine>
<Link id="l09448" /><CodeLine lineNumber="9448"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a766456df1dd21e804cd4596304e10764a5b9bf50c6579a978e5c1104bf8787651">Splat</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#af3da6f92909b5cf14f30953a302edd34">getSplat</a>(ResVecVT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ExtEVL);</Highlight></CodeLine>
<Link id="l09449" /><CodeLine lineNumber="9449"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> StepVec = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a444be9352256919a844309a35dffa0f8">getStepVector</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResVecVT);</Highlight></CodeLine>
<Link id="l09450" /><CodeLine lineNumber="9450"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuregbankselect-cpp/#a09bc27545df3b02401428427d0b5ce6f">Select</a> =</Highlight></CodeLine>
<Link id="l09451" /><CodeLine lineNumber="9451"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SELECT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResVecVT, Source, StepVec, <a href="/docs/api/namespaces/llvm/#a766456df1dd21e804cd4596304e10764a5b9bf50c6579a978e5c1104bf8787651">Splat</a>, EVL);</Highlight></CodeLine>
<Link id="l09452" /><CodeLine lineNumber="9452"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;REDUCE&#95;UMIN, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ResVT, ExtEVL, <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuregbankselect-cpp/#a09bc27545df3b02401428427d0b5ce6f">Select</a>, Mask, EVL);</Highlight></CodeLine>
<Link id="l09453" /><CodeLine lineNumber="9453"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09454" /><CodeLine lineNumber="9454"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09455" /><CodeLine lineNumber="9455"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a5dfdb0c505a77dd707e9e9d4a439d656">TargetLowering::expandVectorFindLastActive</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>,</Highlight></CodeLine>
<Link id="l09456" /><CodeLine lineNumber="9456"><Highlight kind="normal">                                                   SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09457" /><CodeLine lineNumber="9457"><Highlight kind="normal">  SDLoc <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l09458" /><CodeLine lineNumber="9458"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a> = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l09459" /><CodeLine lineNumber="9459"><Highlight kind="normal">  EVT MaskVT = <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a>.getValueType();</Highlight></CodeLine>
<Link id="l09460" /><CodeLine lineNumber="9460"><Highlight kind="normal">  EVT BoolVT = MaskVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l09461" /><CodeLine lineNumber="9461"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09462" /><CodeLine lineNumber="9462"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Find a suitable type for a stepvector.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09463" /><CodeLine lineNumber="9463"><Highlight kind="normal">  ConstantRange VScaleRange(1, </Highlight><Highlight kind="comment">/&#42;isFullSet=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">); </Highlight><Highlight kind="comment">// Fixed length default.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09464" /><CodeLine lineNumber="9464"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (MaskVT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l09465" /><CodeLine lineNumber="9465"><Highlight kind="normal">    VScaleRange = <a href="/docs/api/namespaces/llvm/#a880ecb27263b592a9c72b96378c10088">getVScaleRange</a>(&amp;DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac64ec73b0617befef1fb2eae78d12b5f">getMachineFunction</a>().<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>(), 64);</Highlight></CodeLine>
<Link id="l09466" /><CodeLine lineNumber="9466"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> TargetLowering &amp;TLI = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4c20c587f89ae2926f9e8a99093e8419">getTargetLoweringInfo</a>();</Highlight></CodeLine>
<Link id="l09467" /><CodeLine lineNumber="9467"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> EltWidth = TLI.<a href="/docs/api/classes/llvm/targetloweringbase/#a54ea77d9e8070a1a18b224d984b12c1b">getBitWidthForCttzElements</a>(</Highlight></CodeLine>
<Link id="l09468" /><CodeLine lineNumber="9468"><Highlight kind="normal">      BoolVT.<a href="/docs/api/structs/llvm/evt/#ab0cfceeb37508e56f9c127e59766a668">getTypeForEVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>()), MaskVT.<a href="/docs/api/structs/llvm/evt/#a3d102abca1c9c95f36546dff2f39273b">getVectorElementCount</a>(),</Highlight></CodeLine>
<Link id="l09469" /><CodeLine lineNumber="9469"><Highlight kind="normal">      </Highlight><Highlight kind="comment">/&#42;ZeroIsPoison=&#42;/</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, &amp;VScaleRange);</Highlight></CodeLine>
<Link id="l09470" /><CodeLine lineNumber="9470"><Highlight kind="normal">  EVT StepVT = <a href="/docs/api/classes/llvm/mvt/#aded931e298cfa08b5038ca2b63c06bb8">MVT::getIntegerVT</a>(EltWidth);</Highlight></CodeLine>
<Link id="l09471" /><CodeLine lineNumber="9471"><Highlight kind="normal">  EVT StepVecVT = MaskVT.<a href="/docs/api/structs/llvm/evt/#ad9d00ad929ec93255787f7f80c4659d9">changeVectorElementType</a>(StepVT);</Highlight></CodeLine>
<Link id="l09472" /><CodeLine lineNumber="9472"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09473" /><CodeLine lineNumber="9473"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If promotion is required to make the type legal, do it here; promotion</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09474" /><CodeLine lineNumber="9474"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// of integers within LegalizeVectorOps is looking for types of the same</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09475" /><CodeLine lineNumber="9475"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// size but with a smaller number of larger elements, not the usual larger</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09476" /><CodeLine lineNumber="9476"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// size with the same number of larger elements.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09477" /><CodeLine lineNumber="9477"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TLI.<a href="/docs/api/classes/llvm/targetloweringbase/#ad859786d7e54bdc5c568ac20c69816e0">getTypeAction</a>(StepVecVT.<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>()) ==</Highlight></CodeLine>
<Link id="l09478" /><CodeLine lineNumber="9478"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#a35dc101b509721ffbfb58aba316de681a26f35604723482a1aee6514940c2987d">TargetLowering::TypePromoteInteger</a>) &#123;</Highlight></CodeLine>
<Link id="l09479" /><CodeLine lineNumber="9479"><Highlight kind="normal">    StepVecVT = TLI.<a href="/docs/api/classes/llvm/targetloweringbase/#a77f7add8733417370a56154e8b560617">getTypeToTransformTo</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), StepVecVT);</Highlight></CodeLine>
<Link id="l09480" /><CodeLine lineNumber="9480"><Highlight kind="normal">    StepVT = StepVecVT.<a href="/docs/api/structs/llvm/evt/#abc4c6365ade17ad4443ad0e381e7479d">getVectorElementType</a>();</Highlight></CodeLine>
<Link id="l09481" /><CodeLine lineNumber="9481"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09482" /><CodeLine lineNumber="9482"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09483" /><CodeLine lineNumber="9483"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Zero out lanes with inactive elements, then find the highest remaining</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09484" /><CodeLine lineNumber="9484"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// value from the stepvector.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09485" /><CodeLine lineNumber="9485"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Zeroes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, StepVecVT);</Highlight></CodeLine>
<Link id="l09486" /><CodeLine lineNumber="9486"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> StepVec = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a444be9352256919a844309a35dffa0f8">getStepVector</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, StepVecVT);</Highlight></CodeLine>
<Link id="l09487" /><CodeLine lineNumber="9487"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ActiveElts = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, StepVecVT, Mask, StepVec, Zeroes);</Highlight></CodeLine>
<Link id="l09488" /><CodeLine lineNumber="9488"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> HighestIdx = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VECREDUCE&#95;UMAX, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, StepVT, ActiveElts);</Highlight></CodeLine>
<Link id="l09489" /><CodeLine lineNumber="9489"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad0c6f059b29535f2c790d1c4f92b7a93">getZExtOrTrunc</a>(HighestIdx, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0));</Highlight></CodeLine>
<Link id="l09490" /><CodeLine lineNumber="9490"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09491" /><CodeLine lineNumber="9491"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09492" /><CodeLine lineNumber="9492"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a52e90a14f4d03b8959c096086b1bca73">TargetLowering::expandABS</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l09493" /><CodeLine lineNumber="9493"><Highlight kind="normal">                                  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsNegative)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09494" /><CodeLine lineNumber="9494"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l09495" /><CodeLine lineNumber="9495"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l09496" /><CodeLine lineNumber="9496"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l09497" /><CodeLine lineNumber="9497"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09498" /><CodeLine lineNumber="9498"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// abs(x) -&gt; smax(x,sub(0,x))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09499" /><CodeLine lineNumber="9499"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!IsNegative &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l09500" /><CodeLine lineNumber="9500"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af3b59179b6fcbc89463181015ace8e9b">ISD::SMAX</a>, VT)) &#123;</Highlight></CodeLine>
<Link id="l09501" /><CodeLine lineNumber="9501"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, VT);</Highlight></CodeLine>
<Link id="l09502" /><CodeLine lineNumber="9502"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1ea72c31350e168516e6ee8417f2aed9">getFreeze</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l09503" /><CodeLine lineNumber="9503"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af3b59179b6fcbc89463181015ace8e9b">ISD::SMAX</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09504" /><CodeLine lineNumber="9504"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, Zero, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>));</Highlight></CodeLine>
<Link id="l09505" /><CodeLine lineNumber="9505"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09506" /><CodeLine lineNumber="9506"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09507" /><CodeLine lineNumber="9507"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// abs(x) -&gt; umin(x,sub(0,x))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09508" /><CodeLine lineNumber="9508"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!IsNegative &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l09509" /><CodeLine lineNumber="9509"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a17126302da6199930e55e841ca1b082d">ISD::UMIN</a>, VT)) &#123;</Highlight></CodeLine>
<Link id="l09510" /><CodeLine lineNumber="9510"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, VT);</Highlight></CodeLine>
<Link id="l09511" /><CodeLine lineNumber="9511"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1ea72c31350e168516e6ee8417f2aed9">getFreeze</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l09512" /><CodeLine lineNumber="9512"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a17126302da6199930e55e841ca1b082d">ISD::UMIN</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09513" /><CodeLine lineNumber="9513"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, Zero, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>));</Highlight></CodeLine>
<Link id="l09514" /><CodeLine lineNumber="9514"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09515" /><CodeLine lineNumber="9515"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09516" /><CodeLine lineNumber="9516"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// 0 - abs(x) -&gt; smin(x, sub(0,x))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09517" /><CodeLine lineNumber="9517"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsNegative &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l09518" /><CodeLine lineNumber="9518"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaac895215ecbb3c411c957c8beb39b70">ISD::SMIN</a>, VT)) &#123;</Highlight></CodeLine>
<Link id="l09519" /><CodeLine lineNumber="9519"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, VT);</Highlight></CodeLine>
<Link id="l09520" /><CodeLine lineNumber="9520"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1ea72c31350e168516e6ee8417f2aed9">getFreeze</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l09521" /><CodeLine lineNumber="9521"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaac895215ecbb3c411c957c8beb39b70">ISD::SMIN</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09522" /><CodeLine lineNumber="9522"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, Zero, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>));</Highlight></CodeLine>
<Link id="l09523" /><CodeLine lineNumber="9523"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09524" /><CodeLine lineNumber="9524"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09525" /><CodeLine lineNumber="9525"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Only expand vector types if we have the appropriate vector operations.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09526" /><CodeLine lineNumber="9526"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l09527" /><CodeLine lineNumber="9527"><Highlight kind="normal">      (!<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>, VT) ||</Highlight></CodeLine>
<Link id="l09528" /><CodeLine lineNumber="9528"><Highlight kind="normal">       (!IsNegative &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, VT)) ||</Highlight></CodeLine>
<Link id="l09529" /><CodeLine lineNumber="9529"><Highlight kind="normal">       (IsNegative &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, VT)) ||</Highlight></CodeLine>
<Link id="l09530" /><CodeLine lineNumber="9530"><Highlight kind="normal">       !<a href="/docs/api/classes/llvm/targetloweringbase/#afd2a90bd679de6f5964ce9b6f9931541">isOperationLegalOrCustomOrPromote</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, VT)))</Highlight></CodeLine>
<Link id="l09531" /><CodeLine lineNumber="9531"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l09532" /><CodeLine lineNumber="9532"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09533" /><CodeLine lineNumber="9533"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1ea72c31350e168516e6ee8417f2aed9">getFreeze</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l09534" /><CodeLine lineNumber="9534"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Shift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(</Highlight></CodeLine>
<Link id="l09535" /><CodeLine lineNumber="9535"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09536" /><CodeLine lineNumber="9536"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>() - 1, VT, dl));</Highlight></CodeLine>
<Link id="l09537" /><CodeLine lineNumber="9537"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Shift);</Highlight></CodeLine>
<Link id="l09538" /><CodeLine lineNumber="9538"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09539" /><CodeLine lineNumber="9539"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// abs(x) -&gt; Y = sra (X, size(X)-1); sub (xor (X, Y), Y)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09540" /><CodeLine lineNumber="9540"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!IsNegative)</Highlight></CodeLine>
<Link id="l09541" /><CodeLine lineNumber="9541"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>, Shift);</Highlight></CodeLine>
<Link id="l09542" /><CodeLine lineNumber="9542"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09543" /><CodeLine lineNumber="9543"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// 0 - abs(x) -&gt; Y = sra (X, size(X)-1); sub (Y, xor (X, Y))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09544" /><CodeLine lineNumber="9544"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, Shift, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>);</Highlight></CodeLine>
<Link id="l09545" /><CodeLine lineNumber="9545"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09546" /><CodeLine lineNumber="9546"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09547" /><CodeLine lineNumber="9547"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a010da65f0320c4a35d573ae07071b786">TargetLowering::expandABD</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09548" /><CodeLine lineNumber="9548"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l09549" /><CodeLine lineNumber="9549"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l09550" /><CodeLine lineNumber="9550"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1ea72c31350e168516e6ee8417f2aed9">getFreeze</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0));</Highlight></CodeLine>
<Link id="l09551" /><CodeLine lineNumber="9551"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1ea72c31350e168516e6ee8417f2aed9">getFreeze</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(1));</Highlight></CodeLine>
<Link id="l09552" /><CodeLine lineNumber="9552"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsSigned = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;<a href="/docs/api/classes/llvm/sdnode/#a23f2f5947fc429aff1270651c6d019ea">getOpcode</a>() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af798622367e75c5536666dbfec5d5ea3">ISD::ABDS</a>;</Highlight></CodeLine>
<Link id="l09553" /><CodeLine lineNumber="9553"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09554" /><CodeLine lineNumber="9554"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// abds(lhs, rhs) -&gt; sub(smax(lhs,rhs), smin(lhs,rhs))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09555" /><CodeLine lineNumber="9555"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// abdu(lhs, rhs) -&gt; sub(umax(lhs,rhs), umin(lhs,rhs))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09556" /><CodeLine lineNumber="9556"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> MaxOpc = IsSigned ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af3b59179b6fcbc89463181015ace8e9b">ISD::SMAX</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af675e759c0ffff8d48ea14a60fe3517b">ISD::UMAX</a>;</Highlight></CodeLine>
<Link id="l09557" /><CodeLine lineNumber="9557"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> MinOpc = IsSigned ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaac895215ecbb3c411c957c8beb39b70">ISD::SMIN</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a17126302da6199930e55e841ca1b082d">ISD::UMIN</a>;</Highlight></CodeLine>
<Link id="l09558" /><CodeLine lineNumber="9558"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(MaxOpc, VT) &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(MinOpc, VT)) &#123;</Highlight></CodeLine>
<Link id="l09559" /><CodeLine lineNumber="9559"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/pdb/#a81a0fae24e6bdfe240da4249a8da5978a6a061313d22e51e0f25b7cd4dc065233">Max</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(MaxOpc, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l09560" /><CodeLine lineNumber="9560"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Min = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(MinOpc, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l09561" /><CodeLine lineNumber="9561"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, Max, Min);</Highlight></CodeLine>
<Link id="l09562" /><CodeLine lineNumber="9562"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09563" /><CodeLine lineNumber="9563"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09564" /><CodeLine lineNumber="9564"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// abdu(lhs, rhs) -&gt; or(usubsat(lhs,rhs), usubsat(rhs,lhs))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09565" /><CodeLine lineNumber="9565"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!IsSigned &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a89166b38f12c0bd3e8a61d8f1a5a8bc8">ISD::USUBSAT</a>, VT))</Highlight></CodeLine>
<Link id="l09566" /><CodeLine lineNumber="9566"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT,</Highlight></CodeLine>
<Link id="l09567" /><CodeLine lineNumber="9567"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a89166b38f12c0bd3e8a61d8f1a5a8bc8">ISD::USUBSAT</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>),</Highlight></CodeLine>
<Link id="l09568" /><CodeLine lineNumber="9568"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a89166b38f12c0bd3e8a61d8f1a5a8bc8">ISD::USUBSAT</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>));</Highlight></CodeLine>
<Link id="l09569" /><CodeLine lineNumber="9569"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09570" /><CodeLine lineNumber="9570"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the subtract doesn&#39;t overflow then just use abs(sub())</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09571" /><CodeLine lineNumber="9571"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// NOTE: don&#39;t use frozen operands for value tracking.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09572" /><CodeLine lineNumber="9572"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsNonNegative = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a923b1af8c1e485549410eda36702a5ac">SignBitIsZero</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(1)) &amp;&amp;</Highlight></CodeLine>
<Link id="l09573" /><CodeLine lineNumber="9573"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a923b1af8c1e485549410eda36702a5ac">SignBitIsZero</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0));</Highlight></CodeLine>
<Link id="l09574" /><CodeLine lineNumber="9574"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09575" /><CodeLine lineNumber="9575"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DAG.<a href="/docs/api/classes/llvm/selectiondag/#a453787339d4a0e3ad31f81159d9f14ae">willNotOverflowSub</a>(IsSigned || IsNonNegative, <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0),</Highlight></CodeLine>
<Link id="l09576" /><CodeLine lineNumber="9576"><Highlight kind="normal">                             <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(1)))</Highlight></CodeLine>
<Link id="l09577" /><CodeLine lineNumber="9577"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a35c1cf0dd553444732dba8e8b9be0f6b">ISD::ABS</a>, dl, VT,</Highlight></CodeLine>
<Link id="l09578" /><CodeLine lineNumber="9578"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>));</Highlight></CodeLine>
<Link id="l09579" /><CodeLine lineNumber="9579"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09580" /><CodeLine lineNumber="9580"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DAG.<a href="/docs/api/classes/llvm/selectiondag/#a453787339d4a0e3ad31f81159d9f14ae">willNotOverflowSub</a>(IsSigned || IsNonNegative, <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(1),</Highlight></CodeLine>
<Link id="l09581" /><CodeLine lineNumber="9581"><Highlight kind="normal">                             <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0)))</Highlight></CodeLine>
<Link id="l09582" /><CodeLine lineNumber="9582"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a35c1cf0dd553444732dba8e8b9be0f6b">ISD::ABS</a>, dl, VT,</Highlight></CodeLine>
<Link id="l09583" /><CodeLine lineNumber="9583"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>));</Highlight></CodeLine>
<Link id="l09584" /><CodeLine lineNumber="9584"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09585" /><CodeLine lineNumber="9585"><Highlight kind="normal">  EVT CCVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l09586" /><CodeLine lineNumber="9586"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> = IsSigned ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::CondCode::SETGT</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::CondCode::SETUGT</a>;</Highlight></CodeLine>
<Link id="l09587" /><CodeLine lineNumber="9587"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/x86/#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, CCVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>);</Highlight></CodeLine>
<Link id="l09588" /><CodeLine lineNumber="9588"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09589" /><CodeLine lineNumber="9589"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Branchless expansion iff cmp result is allbits:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09590" /><CodeLine lineNumber="9590"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// abds(lhs, rhs) -&gt; sub(sgt(lhs, rhs), xor(sgt(lhs, rhs), sub(lhs, rhs)))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09591" /><CodeLine lineNumber="9591"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// abdu(lhs, rhs) -&gt; sub(ugt(lhs, rhs), xor(ugt(lhs, rhs), sub(lhs, rhs)))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09592" /><CodeLine lineNumber="9592"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CCVT == VT &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(VT) == <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a695a19c9c3ae14638be151add82755cb">ZeroOrNegativeOneBooleanContent</a>) &#123;</Highlight></CodeLine>
<Link id="l09593" /><CodeLine lineNumber="9593"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Diff = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l09594" /><CodeLine lineNumber="9594"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, VT, Diff, Cmp);</Highlight></CodeLine>
<Link id="l09595" /><CodeLine lineNumber="9595"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, Cmp, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>);</Highlight></CodeLine>
<Link id="l09596" /><CodeLine lineNumber="9596"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09597" /><CodeLine lineNumber="9597"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09598" /><CodeLine lineNumber="9598"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Similar to the branchless expansion, use the (sign-extended) usubo overflow</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09599" /><CodeLine lineNumber="9599"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// flag if the (scalar) type is illegal as this is more likely to legalize</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09600" /><CodeLine lineNumber="9600"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// cleanly:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09601" /><CodeLine lineNumber="9601"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// abdu(lhs, rhs) -&gt; sub(xor(sub(lhs, rhs), uof(lhs, rhs)), uof(lhs, rhs))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09602" /><CodeLine lineNumber="9602"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!IsSigned &amp;&amp; VT.<a href="/docs/api/structs/llvm/evt/#ad958859a7af278dd5ea2b593c2b25050">isScalarInteger</a>() &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(VT)) &#123;</Highlight></CodeLine>
<Link id="l09603" /><CodeLine lineNumber="9603"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> USubO =</Highlight></CodeLine>
<Link id="l09604" /><CodeLine lineNumber="9604"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4ffc75d65231b55461c0ba4f36a3e500">ISD::USUBO</a>, dl, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(VT, MVT::i1), &#123;LHS, RHS&#125;);</Highlight></CodeLine>
<Link id="l09605" /><CodeLine lineNumber="9605"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/x86/#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5183f3d72924bc7c77ba8d3f5de9f602">ISD::SIGN&#95;EXTEND</a>, dl, VT, USubO.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(1));</Highlight></CodeLine>
<Link id="l09606" /><CodeLine lineNumber="9606"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, VT, USubO.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(0), Cmp);</Highlight></CodeLine>
<Link id="l09607" /><CodeLine lineNumber="9607"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>, Cmp);</Highlight></CodeLine>
<Link id="l09608" /><CodeLine lineNumber="9608"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09609" /><CodeLine lineNumber="9609"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09610" /><CodeLine lineNumber="9610"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: Should really try to split the vector in case it&#39;s legal on a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09611" /><CodeLine lineNumber="9611"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// subvector.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09612" /><CodeLine lineNumber="9612"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0b7d2c769fd0fbaab3c4a2fc8e7ea0c">ISD::VSELECT</a>, VT))</Highlight></CodeLine>
<Link id="l09613" /><CodeLine lineNumber="9613"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a305a3a4874c597243cd5ba04af01339e">UnrollVectorOp</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l09614" /><CodeLine lineNumber="9614"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09615" /><CodeLine lineNumber="9615"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// abds(lhs, rhs) -&gt; select(sgt(lhs,rhs), sub(lhs,rhs), sub(rhs,lhs))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09616" /><CodeLine lineNumber="9616"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// abdu(lhs, rhs) -&gt; select(ugt(lhs,rhs), sub(lhs,rhs), sub(rhs,lhs))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09617" /><CodeLine lineNumber="9617"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, VT, Cmp, DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>),</Highlight></CodeLine>
<Link id="l09618" /><CodeLine lineNumber="9618"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>));</Highlight></CodeLine>
<Link id="l09619" /><CodeLine lineNumber="9619"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09620" /><CodeLine lineNumber="9620"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09621" /><CodeLine lineNumber="9621"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a39e0c74abf7ed800cb60f1bf840efe42">TargetLowering::expandAVG</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09622" /><CodeLine lineNumber="9622"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l09623" /><CodeLine lineNumber="9623"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l09624" /><CodeLine lineNumber="9624"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l09625" /><CodeLine lineNumber="9625"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l09626" /><CodeLine lineNumber="9626"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09627" /><CodeLine lineNumber="9627"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opc = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOpcode();</Highlight></CodeLine>
<Link id="l09628" /><CodeLine lineNumber="9628"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsFloor = Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110acc5444f2e2933b551e3afbdd93a9bfc8">ISD::AVGFLOORS</a> || Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5096628a43b16ff34ace64193ded1c93">ISD::AVGFLOORU</a>;</Highlight></CodeLine>
<Link id="l09629" /><CodeLine lineNumber="9629"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsSigned = Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a55a4b1d94ca6176bcb5449196d67e798">ISD::AVGCEILS</a> || Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110acc5444f2e2933b551e3afbdd93a9bfc8">ISD::AVGFLOORS</a>;</Highlight></CodeLine>
<Link id="l09630" /><CodeLine lineNumber="9630"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SumOpc = IsFloor ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>;</Highlight></CodeLine>
<Link id="l09631" /><CodeLine lineNumber="9631"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SignOpc = IsFloor ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>;</Highlight></CodeLine>
<Link id="l09632" /><CodeLine lineNumber="9632"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/arm-am/#a76f5f9f36bbd9f03c844c5b565f239ef">ShiftOpc</a> = IsSigned ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>;</Highlight></CodeLine>
<Link id="l09633" /><CodeLine lineNumber="9633"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ExtOpc = IsSigned ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5183f3d72924bc7c77ba8d3f5de9f602">ISD::SIGN&#95;EXTEND</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>;</Highlight></CodeLine>
<Link id="l09634" /><CodeLine lineNumber="9634"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110acc5444f2e2933b551e3afbdd93a9bfc8">ISD::AVGFLOORS</a> || Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a55a4b1d94ca6176bcb5449196d67e798">ISD::AVGCEILS</a> ||</Highlight></CodeLine>
<Link id="l09635" /><CodeLine lineNumber="9635"><Highlight kind="normal">          Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5096628a43b16ff34ace64193ded1c93">ISD::AVGFLOORU</a> || Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8489c40b1b3f92b0c4fc98d06099c441">ISD::AVGCEILU</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l09636" /><CodeLine lineNumber="9636"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Unknown AVG node&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l09637" /><CodeLine lineNumber="9637"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09638" /><CodeLine lineNumber="9638"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the operands are already extended, we can add+shift.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09639" /><CodeLine lineNumber="9639"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsExt =</Highlight></CodeLine>
<Link id="l09640" /><CodeLine lineNumber="9640"><Highlight kind="normal">      (IsSigned &amp;&amp; DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac01c66c983bfbac05a0cf903f08417df">ComputeNumSignBits</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) &gt;= 2 &amp;&amp;</Highlight></CodeLine>
<Link id="l09641" /><CodeLine lineNumber="9641"><Highlight kind="normal">       DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac01c66c983bfbac05a0cf903f08417df">ComputeNumSignBits</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) &gt;= 2) ||</Highlight></CodeLine>
<Link id="l09642" /><CodeLine lineNumber="9642"><Highlight kind="normal">      (!IsSigned &amp;&amp; DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>).countMinLeadingZeros() &gt;= 1 &amp;&amp;</Highlight></CodeLine>
<Link id="l09643" /><CodeLine lineNumber="9643"><Highlight kind="normal">       DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>).<a href="/docs/api/structs/llvm/knownbits/#a7f47812e8e75b0616a97d7004e5fb909">countMinLeadingZeros</a>() &gt;= 1);</Highlight></CodeLine>
<Link id="l09644" /><CodeLine lineNumber="9644"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsExt) &#123;</Highlight></CodeLine>
<Link id="l09645" /><CodeLine lineNumber="9645"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Sum = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l09646" /><CodeLine lineNumber="9646"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!IsFloor)</Highlight></CodeLine>
<Link id="l09647" /><CodeLine lineNumber="9647"><Highlight kind="normal">      Sum = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, Sum, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, VT));</Highlight></CodeLine>
<Link id="l09648" /><CodeLine lineNumber="9648"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ShiftOpc, dl, VT, Sum,</Highlight></CodeLine>
<Link id="l09649" /><CodeLine lineNumber="9649"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(1, VT, dl));</Highlight></CodeLine>
<Link id="l09650" /><CodeLine lineNumber="9650"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09651" /><CodeLine lineNumber="9651"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09652" /><CodeLine lineNumber="9652"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For scalars, see if we can efficiently extend/truncate to use add+shift.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09653" /><CodeLine lineNumber="9653"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ad958859a7af278dd5ea2b593c2b25050">isScalarInteger</a>()) &#123;</Highlight></CodeLine>
<Link id="l09654" /><CodeLine lineNumber="9654"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> BW = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l09655" /><CodeLine lineNumber="9655"><Highlight kind="normal">    EVT ExtVT = VT.<a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), 2 &#42; BW);</Highlight></CodeLine>
<Link id="l09656" /><CodeLine lineNumber="9656"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(ExtVT) &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a6f992bc4ca89f1b5f0b34f5b29978c31">isTruncateFree</a>(ExtVT, VT)) &#123;</Highlight></CodeLine>
<Link id="l09657" /><CodeLine lineNumber="9657"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ExtOpc, dl, ExtVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</Highlight></CodeLine>
<Link id="l09658" /><CodeLine lineNumber="9658"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ExtOpc, dl, ExtVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l09659" /><CodeLine lineNumber="9659"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Avg = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, ExtVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l09660" /><CodeLine lineNumber="9660"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!IsFloor)</Highlight></CodeLine>
<Link id="l09661" /><CodeLine lineNumber="9661"><Highlight kind="normal">        Avg = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, ExtVT, Avg,</Highlight></CodeLine>
<Link id="l09662" /><CodeLine lineNumber="9662"><Highlight kind="normal">                          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, ExtVT));</Highlight></CodeLine>
<Link id="l09663" /><CodeLine lineNumber="9663"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Just use SRL as we will be truncating away the extended sign bits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09664" /><CodeLine lineNumber="9664"><Highlight kind="normal">      Avg = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, ExtVT, Avg,</Highlight></CodeLine>
<Link id="l09665" /><CodeLine lineNumber="9665"><Highlight kind="normal">                        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(1, ExtVT, dl));</Highlight></CodeLine>
<Link id="l09666" /><CodeLine lineNumber="9666"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, VT, Avg);</Highlight></CodeLine>
<Link id="l09667" /><CodeLine lineNumber="9667"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l09668" /><CodeLine lineNumber="9668"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09669" /><CodeLine lineNumber="9669"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09670" /><CodeLine lineNumber="9670"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// avgflooru(lhs, rhs) -&gt; or(lshr(add(lhs, rhs),1),shl(overflow, typesize-1))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09671" /><CodeLine lineNumber="9671"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5096628a43b16ff34ace64193ded1c93">ISD::AVGFLOORU</a> &amp;&amp; VT.<a href="/docs/api/structs/llvm/evt/#ad958859a7af278dd5ea2b593c2b25050">isScalarInteger</a>() &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(VT)) &#123;</Highlight></CodeLine>
<Link id="l09672" /><CodeLine lineNumber="9672"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> UAddWithOverflow =</Highlight></CodeLine>
<Link id="l09673" /><CodeLine lineNumber="9673"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1ddf36330110b4abea43fe390bea9ef9">ISD::UADDO</a>, dl, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(VT, MVT::i1), &#123;RHS, LHS&#125;);</Highlight></CodeLine>
<Link id="l09674" /><CodeLine lineNumber="9674"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09675" /><CodeLine lineNumber="9675"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Sum = UAddWithOverflow.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(0);</Highlight></CodeLine>
<Link id="l09676" /><CodeLine lineNumber="9676"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Overflow = UAddWithOverflow.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(1);</Highlight></CodeLine>
<Link id="l09677" /><CodeLine lineNumber="9677"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09678" /><CodeLine lineNumber="9678"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Right shift the sum by 1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09679" /><CodeLine lineNumber="9679"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LShrVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, Sum,</Highlight></CodeLine>
<Link id="l09680" /><CodeLine lineNumber="9680"><Highlight kind="normal">                                  DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(1, VT, dl));</Highlight></CodeLine>
<Link id="l09681" /><CodeLine lineNumber="9681"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09682" /><CodeLine lineNumber="9682"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ZeroExtOverflow = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">ISD::ANY&#95;EXTEND</a>, dl, VT, Overflow);</Highlight></CodeLine>
<Link id="l09683" /><CodeLine lineNumber="9683"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> OverflowShl = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(</Highlight></CodeLine>
<Link id="l09684" /><CodeLine lineNumber="9684"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, ZeroExtOverflow,</Highlight></CodeLine>
<Link id="l09685" /><CodeLine lineNumber="9685"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>() - 1, VT, dl));</Highlight></CodeLine>
<Link id="l09686" /><CodeLine lineNumber="9686"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09687" /><CodeLine lineNumber="9687"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, LShrVal, OverflowShl);</Highlight></CodeLine>
<Link id="l09688" /><CodeLine lineNumber="9688"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09689" /><CodeLine lineNumber="9689"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09690" /><CodeLine lineNumber="9690"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// avgceils(lhs, rhs) -&gt; sub(or(lhs,rhs),ashr(xor(lhs,rhs),1))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09691" /><CodeLine lineNumber="9691"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// avgceilu(lhs, rhs) -&gt; sub(or(lhs,rhs),lshr(xor(lhs,rhs),1))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09692" /><CodeLine lineNumber="9692"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// avgfloors(lhs, rhs) -&gt; add(and(lhs,rhs),ashr(xor(lhs,rhs),1))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09693" /><CodeLine lineNumber="9693"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// avgflooru(lhs, rhs) -&gt; add(and(lhs,rhs),lshr(xor(lhs,rhs),1))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09694" /><CodeLine lineNumber="9694"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1ea72c31350e168516e6ee8417f2aed9">getFreeze</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</Highlight></CodeLine>
<Link id="l09695" /><CodeLine lineNumber="9695"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1ea72c31350e168516e6ee8417f2aed9">getFreeze</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l09696" /><CodeLine lineNumber="9696"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Sign = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(SignOpc, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l09697" /><CodeLine lineNumber="9697"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l09698" /><CodeLine lineNumber="9698"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Shift =</Highlight></CodeLine>
<Link id="l09699" /><CodeLine lineNumber="9699"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ShiftOpc, dl, VT, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(1, VT, dl));</Highlight></CodeLine>
<Link id="l09700" /><CodeLine lineNumber="9700"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(SumOpc, dl, VT, Sign, Shift);</Highlight></CodeLine>
<Link id="l09701" /><CodeLine lineNumber="9701"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09702" /><CodeLine lineNumber="9702"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09703" /><CodeLine lineNumber="9703"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#afdc2ae0ea51276d42cf58621158bb7b6">TargetLowering::expandBSWAP</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09704" /><CodeLine lineNumber="9704"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l09705" /><CodeLine lineNumber="9705"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l09706" /><CodeLine lineNumber="9706"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l09707" /><CodeLine lineNumber="9707"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09708" /><CodeLine lineNumber="9708"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!VT.<a href="/docs/api/structs/llvm/evt/#a19738f4334d4de357b22349bbb56fb5c">isSimple</a>())</Highlight></CodeLine>
<Link id="l09709" /><CodeLine lineNumber="9709"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l09710" /><CodeLine lineNumber="9710"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09711" /><CodeLine lineNumber="9711"><Highlight kind="normal">  EVT SHVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a6a2579bc0354806c6c9708b068777c3a">getShiftAmountTy</a>(VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l09712" /><CodeLine lineNumber="9712"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Tmp1, Tmp2, Tmp3, Tmp4, Tmp5, Tmp6, Tmp7, Tmp8;</Highlight></CodeLine>
<Link id="l09713" /><CodeLine lineNumber="9713"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>().<a href="/docs/api/classes/llvm/mvt/#aea8bc2b59cb3fa833eb7895a3a216abd">getScalarType</a>().<a href="/docs/api/classes/llvm/mvt/#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a>) &#123;</Highlight></CodeLine>
<Link id="l09714" /><CodeLine lineNumber="9714"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l09715" /><CodeLine lineNumber="9715"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l09716" /><CodeLine lineNumber="9716"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> MVT::i16:</Highlight></CodeLine>
<Link id="l09717" /><CodeLine lineNumber="9717"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Use a rotate by 8 This can be further expanded if necessary.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09718" /><CodeLine lineNumber="9718"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae8f8f81d8e8d7a557d67622c05786f1d">ISD::ROTL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(8, dl, SHVT));</Highlight></CodeLine>
<Link id="l09719" /><CodeLine lineNumber="9719"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> MVT::i32:</Highlight></CodeLine>
<Link id="l09720" /><CodeLine lineNumber="9720"><Highlight kind="normal">    Tmp4 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(24, dl, SHVT));</Highlight></CodeLine>
<Link id="l09721" /><CodeLine lineNumber="9721"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09722" /><CodeLine lineNumber="9722"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0xFF00, dl, VT));</Highlight></CodeLine>
<Link id="l09723" /><CodeLine lineNumber="9723"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, Tmp3, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(8, dl, SHVT));</Highlight></CodeLine>
<Link id="l09724" /><CodeLine lineNumber="9724"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(8, dl, SHVT));</Highlight></CodeLine>
<Link id="l09725" /><CodeLine lineNumber="9725"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, Tmp2, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0xFF00, dl, VT));</Highlight></CodeLine>
<Link id="l09726" /><CodeLine lineNumber="9726"><Highlight kind="normal">    Tmp1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(24, dl, SHVT));</Highlight></CodeLine>
<Link id="l09727" /><CodeLine lineNumber="9727"><Highlight kind="normal">    Tmp4 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, Tmp4, Tmp3);</Highlight></CodeLine>
<Link id="l09728" /><CodeLine lineNumber="9728"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, Tmp2, Tmp1);</Highlight></CodeLine>
<Link id="l09729" /><CodeLine lineNumber="9729"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, Tmp4, Tmp2);</Highlight></CodeLine>
<Link id="l09730" /><CodeLine lineNumber="9730"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> MVT::i64:</Highlight></CodeLine>
<Link id="l09731" /><CodeLine lineNumber="9731"><Highlight kind="normal">    Tmp8 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(56, dl, SHVT));</Highlight></CodeLine>
<Link id="l09732" /><CodeLine lineNumber="9732"><Highlight kind="normal">    Tmp7 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09733" /><CodeLine lineNumber="9733"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(255ULL&lt;&lt;8, dl, VT));</Highlight></CodeLine>
<Link id="l09734" /><CodeLine lineNumber="9734"><Highlight kind="normal">    Tmp7 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, Tmp7, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(40, dl, SHVT));</Highlight></CodeLine>
<Link id="l09735" /><CodeLine lineNumber="9735"><Highlight kind="normal">    Tmp6 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09736" /><CodeLine lineNumber="9736"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(255ULL&lt;&lt;16, dl, VT));</Highlight></CodeLine>
<Link id="l09737" /><CodeLine lineNumber="9737"><Highlight kind="normal">    Tmp6 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, Tmp6, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(24, dl, SHVT));</Highlight></CodeLine>
<Link id="l09738" /><CodeLine lineNumber="9738"><Highlight kind="normal">    Tmp5 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09739" /><CodeLine lineNumber="9739"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(255ULL&lt;&lt;24, dl, VT));</Highlight></CodeLine>
<Link id="l09740" /><CodeLine lineNumber="9740"><Highlight kind="normal">    Tmp5 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, Tmp5, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(8, dl, SHVT));</Highlight></CodeLine>
<Link id="l09741" /><CodeLine lineNumber="9741"><Highlight kind="normal">    Tmp4 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(8, dl, SHVT));</Highlight></CodeLine>
<Link id="l09742" /><CodeLine lineNumber="9742"><Highlight kind="normal">    Tmp4 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, Tmp4,</Highlight></CodeLine>
<Link id="l09743" /><CodeLine lineNumber="9743"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(255ULL&lt;&lt;24, dl, VT));</Highlight></CodeLine>
<Link id="l09744" /><CodeLine lineNumber="9744"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(24, dl, SHVT));</Highlight></CodeLine>
<Link id="l09745" /><CodeLine lineNumber="9745"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, Tmp3,</Highlight></CodeLine>
<Link id="l09746" /><CodeLine lineNumber="9746"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(255ULL&lt;&lt;16, dl, VT));</Highlight></CodeLine>
<Link id="l09747" /><CodeLine lineNumber="9747"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(40, dl, SHVT));</Highlight></CodeLine>
<Link id="l09748" /><CodeLine lineNumber="9748"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, Tmp2,</Highlight></CodeLine>
<Link id="l09749" /><CodeLine lineNumber="9749"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(255ULL&lt;&lt;8, dl, VT));</Highlight></CodeLine>
<Link id="l09750" /><CodeLine lineNumber="9750"><Highlight kind="normal">    Tmp1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(56, dl, SHVT));</Highlight></CodeLine>
<Link id="l09751" /><CodeLine lineNumber="9751"><Highlight kind="normal">    Tmp8 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, Tmp8, Tmp7);</Highlight></CodeLine>
<Link id="l09752" /><CodeLine lineNumber="9752"><Highlight kind="normal">    Tmp6 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, Tmp6, Tmp5);</Highlight></CodeLine>
<Link id="l09753" /><CodeLine lineNumber="9753"><Highlight kind="normal">    Tmp4 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, Tmp4, Tmp3);</Highlight></CodeLine>
<Link id="l09754" /><CodeLine lineNumber="9754"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, Tmp2, Tmp1);</Highlight></CodeLine>
<Link id="l09755" /><CodeLine lineNumber="9755"><Highlight kind="normal">    Tmp8 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, Tmp8, Tmp6);</Highlight></CodeLine>
<Link id="l09756" /><CodeLine lineNumber="9756"><Highlight kind="normal">    Tmp4 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, Tmp4, Tmp2);</Highlight></CodeLine>
<Link id="l09757" /><CodeLine lineNumber="9757"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, Tmp8, Tmp4);</Highlight></CodeLine>
<Link id="l09758" /><CodeLine lineNumber="9758"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09759" /><CodeLine lineNumber="9759"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09760" /><CodeLine lineNumber="9760"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09761" /><CodeLine lineNumber="9761"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a249598a307c825ac80d22a45d863d3e4">TargetLowering::expandVPBSWAP</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09762" /><CodeLine lineNumber="9762"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l09763" /><CodeLine lineNumber="9763"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l09764" /><CodeLine lineNumber="9764"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l09765" /><CodeLine lineNumber="9765"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a> = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l09766" /><CodeLine lineNumber="9766"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> EVL = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(2);</Highlight></CodeLine>
<Link id="l09767" /><CodeLine lineNumber="9767"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09768" /><CodeLine lineNumber="9768"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!VT.<a href="/docs/api/structs/llvm/evt/#a19738f4334d4de357b22349bbb56fb5c">isSimple</a>())</Highlight></CodeLine>
<Link id="l09769" /><CodeLine lineNumber="9769"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l09770" /><CodeLine lineNumber="9770"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09771" /><CodeLine lineNumber="9771"><Highlight kind="normal">  EVT SHVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a6a2579bc0354806c6c9708b068777c3a">getShiftAmountTy</a>(VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l09772" /><CodeLine lineNumber="9772"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Tmp1, Tmp2, Tmp3, Tmp4, Tmp5, Tmp6, Tmp7, Tmp8;</Highlight></CodeLine>
<Link id="l09773" /><CodeLine lineNumber="9773"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#a6a81c1cc06a00a0096d839032b5984e9">getSimpleVT</a>().<a href="/docs/api/classes/llvm/mvt/#aea8bc2b59cb3fa833eb7895a3a216abd">getScalarType</a>().<a href="/docs/api/classes/llvm/mvt/#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a>) &#123;</Highlight></CodeLine>
<Link id="l09774" /><CodeLine lineNumber="9774"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l09775" /><CodeLine lineNumber="9775"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l09776" /><CodeLine lineNumber="9776"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> MVT::i16:</Highlight></CodeLine>
<Link id="l09777" /><CodeLine lineNumber="9777"><Highlight kind="normal">    Tmp1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SHL, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(8, dl, SHVT),</Highlight></CodeLine>
<Link id="l09778" /><CodeLine lineNumber="9778"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09779" /><CodeLine lineNumber="9779"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(8, dl, SHVT),</Highlight></CodeLine>
<Link id="l09780" /><CodeLine lineNumber="9780"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09781" /><CodeLine lineNumber="9781"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;OR, dl, VT, Tmp1, Tmp2, Mask, EVL);</Highlight></CodeLine>
<Link id="l09782" /><CodeLine lineNumber="9782"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> MVT::i32:</Highlight></CodeLine>
<Link id="l09783" /><CodeLine lineNumber="9783"><Highlight kind="normal">    Tmp4 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SHL, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(24, dl, SHVT),</Highlight></CodeLine>
<Link id="l09784" /><CodeLine lineNumber="9784"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09785" /><CodeLine lineNumber="9785"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0xFF00, dl, VT),</Highlight></CodeLine>
<Link id="l09786" /><CodeLine lineNumber="9786"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09787" /><CodeLine lineNumber="9787"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SHL, dl, VT, Tmp3, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(8, dl, SHVT),</Highlight></CodeLine>
<Link id="l09788" /><CodeLine lineNumber="9788"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09789" /><CodeLine lineNumber="9789"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(8, dl, SHVT),</Highlight></CodeLine>
<Link id="l09790" /><CodeLine lineNumber="9790"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09791" /><CodeLine lineNumber="9791"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, Tmp2,</Highlight></CodeLine>
<Link id="l09792" /><CodeLine lineNumber="9792"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0xFF00, dl, VT), Mask, EVL);</Highlight></CodeLine>
<Link id="l09793" /><CodeLine lineNumber="9793"><Highlight kind="normal">    Tmp1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(24, dl, SHVT),</Highlight></CodeLine>
<Link id="l09794" /><CodeLine lineNumber="9794"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09795" /><CodeLine lineNumber="9795"><Highlight kind="normal">    Tmp4 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;OR, dl, VT, Tmp4, Tmp3, Mask, EVL);</Highlight></CodeLine>
<Link id="l09796" /><CodeLine lineNumber="9796"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;OR, dl, VT, Tmp2, Tmp1, Mask, EVL);</Highlight></CodeLine>
<Link id="l09797" /><CodeLine lineNumber="9797"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;OR, dl, VT, Tmp4, Tmp2, Mask, EVL);</Highlight></CodeLine>
<Link id="l09798" /><CodeLine lineNumber="9798"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> MVT::i64:</Highlight></CodeLine>
<Link id="l09799" /><CodeLine lineNumber="9799"><Highlight kind="normal">    Tmp8 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SHL, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(56, dl, SHVT),</Highlight></CodeLine>
<Link id="l09800" /><CodeLine lineNumber="9800"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09801" /><CodeLine lineNumber="9801"><Highlight kind="normal">    Tmp7 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09802" /><CodeLine lineNumber="9802"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(255ULL &lt;&lt; 8, dl, VT), Mask, EVL);</Highlight></CodeLine>
<Link id="l09803" /><CodeLine lineNumber="9803"><Highlight kind="normal">    Tmp7 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SHL, dl, VT, Tmp7, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(40, dl, SHVT),</Highlight></CodeLine>
<Link id="l09804" /><CodeLine lineNumber="9804"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09805" /><CodeLine lineNumber="9805"><Highlight kind="normal">    Tmp6 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09806" /><CodeLine lineNumber="9806"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(255ULL &lt;&lt; 16, dl, VT), Mask, EVL);</Highlight></CodeLine>
<Link id="l09807" /><CodeLine lineNumber="9807"><Highlight kind="normal">    Tmp6 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SHL, dl, VT, Tmp6, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(24, dl, SHVT),</Highlight></CodeLine>
<Link id="l09808" /><CodeLine lineNumber="9808"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09809" /><CodeLine lineNumber="9809"><Highlight kind="normal">    Tmp5 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l09810" /><CodeLine lineNumber="9810"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(255ULL &lt;&lt; 24, dl, VT), Mask, EVL);</Highlight></CodeLine>
<Link id="l09811" /><CodeLine lineNumber="9811"><Highlight kind="normal">    Tmp5 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SHL, dl, VT, Tmp5, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(8, dl, SHVT),</Highlight></CodeLine>
<Link id="l09812" /><CodeLine lineNumber="9812"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09813" /><CodeLine lineNumber="9813"><Highlight kind="normal">    Tmp4 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(8, dl, SHVT),</Highlight></CodeLine>
<Link id="l09814" /><CodeLine lineNumber="9814"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09815" /><CodeLine lineNumber="9815"><Highlight kind="normal">    Tmp4 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, Tmp4,</Highlight></CodeLine>
<Link id="l09816" /><CodeLine lineNumber="9816"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(255ULL &lt;&lt; 24, dl, VT), Mask, EVL);</Highlight></CodeLine>
<Link id="l09817" /><CodeLine lineNumber="9817"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(24, dl, SHVT),</Highlight></CodeLine>
<Link id="l09818" /><CodeLine lineNumber="9818"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09819" /><CodeLine lineNumber="9819"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, Tmp3,</Highlight></CodeLine>
<Link id="l09820" /><CodeLine lineNumber="9820"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(255ULL &lt;&lt; 16, dl, VT), Mask, EVL);</Highlight></CodeLine>
<Link id="l09821" /><CodeLine lineNumber="9821"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(40, dl, SHVT),</Highlight></CodeLine>
<Link id="l09822" /><CodeLine lineNumber="9822"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09823" /><CodeLine lineNumber="9823"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, Tmp2,</Highlight></CodeLine>
<Link id="l09824" /><CodeLine lineNumber="9824"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(255ULL &lt;&lt; 8, dl, VT), Mask, EVL);</Highlight></CodeLine>
<Link id="l09825" /><CodeLine lineNumber="9825"><Highlight kind="normal">    Tmp1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(56, dl, SHVT),</Highlight></CodeLine>
<Link id="l09826" /><CodeLine lineNumber="9826"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09827" /><CodeLine lineNumber="9827"><Highlight kind="normal">    Tmp8 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;OR, dl, VT, Tmp8, Tmp7, Mask, EVL);</Highlight></CodeLine>
<Link id="l09828" /><CodeLine lineNumber="9828"><Highlight kind="normal">    Tmp6 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;OR, dl, VT, Tmp6, Tmp5, Mask, EVL);</Highlight></CodeLine>
<Link id="l09829" /><CodeLine lineNumber="9829"><Highlight kind="normal">    Tmp4 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;OR, dl, VT, Tmp4, Tmp3, Mask, EVL);</Highlight></CodeLine>
<Link id="l09830" /><CodeLine lineNumber="9830"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;OR, dl, VT, Tmp2, Tmp1, Mask, EVL);</Highlight></CodeLine>
<Link id="l09831" /><CodeLine lineNumber="9831"><Highlight kind="normal">    Tmp8 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;OR, dl, VT, Tmp8, Tmp6, Mask, EVL);</Highlight></CodeLine>
<Link id="l09832" /><CodeLine lineNumber="9832"><Highlight kind="normal">    Tmp4 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;OR, dl, VT, Tmp4, Tmp2, Mask, EVL);</Highlight></CodeLine>
<Link id="l09833" /><CodeLine lineNumber="9833"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;OR, dl, VT, Tmp8, Tmp4, Mask, EVL);</Highlight></CodeLine>
<Link id="l09834" /><CodeLine lineNumber="9834"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09835" /><CodeLine lineNumber="9835"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09836" /><CodeLine lineNumber="9836"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09837" /><CodeLine lineNumber="9837"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#ad103ae2c1e3a3e2451ea8ab5febf7075">TargetLowering::expandBITREVERSE</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09838" /><CodeLine lineNumber="9838"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l09839" /><CodeLine lineNumber="9839"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l09840" /><CodeLine lineNumber="9840"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l09841" /><CodeLine lineNumber="9841"><Highlight kind="normal">  EVT SHVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a6a2579bc0354806c6c9708b068777c3a">getShiftAmountTy</a>(VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l09842" /><CodeLine lineNumber="9842"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Sz = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l09843" /><CodeLine lineNumber="9843"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09844" /><CodeLine lineNumber="9844"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Tmp, Tmp2, Tmp3;</Highlight></CodeLine>
<Link id="l09845" /><CodeLine lineNumber="9845"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09846" /><CodeLine lineNumber="9846"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If we can, perform BSWAP first and then the mask+swap the i4, then i2</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09847" /><CodeLine lineNumber="9847"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// and finally the i1 pairs.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09848" /><CodeLine lineNumber="9848"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: We can easily support i4/i2 legal types if any target ever does.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09849" /><CodeLine lineNumber="9849"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Sz &gt;= 8 &amp;&amp; <a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(Sz)) &#123;</Highlight></CodeLine>
<Link id="l09850" /><CodeLine lineNumber="9850"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Create the masks - repeating the pattern every byte.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09851" /><CodeLine lineNumber="9851"><Highlight kind="normal">    APInt Mask4 = <a href="/docs/api/classes/llvm/apint/#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Sz, APInt(8, 0x0F));</Highlight></CodeLine>
<Link id="l09852" /><CodeLine lineNumber="9852"><Highlight kind="normal">    APInt Mask2 = <a href="/docs/api/classes/llvm/apint/#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Sz, APInt(8, 0x33));</Highlight></CodeLine>
<Link id="l09853" /><CodeLine lineNumber="9853"><Highlight kind="normal">    APInt Mask1 = <a href="/docs/api/classes/llvm/apint/#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Sz, APInt(8, 0x55));</Highlight></CodeLine>
<Link id="l09854" /><CodeLine lineNumber="9854"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09855" /><CodeLine lineNumber="9855"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// BSWAP if the type is wider than a single byte.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09856" /><CodeLine lineNumber="9856"><Highlight kind="normal">    Tmp = (Sz &gt; 8 ? DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a19328c462764af5f4699fb1698dad994">ISD::BSWAP</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>) : <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l09857" /><CodeLine lineNumber="9857"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09858" /><CodeLine lineNumber="9858"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// swap i4: ((V &gt;&gt; 4) &amp; 0x0F) | ((V &amp; 0x0F) &lt;&lt; 4)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09859" /><CodeLine lineNumber="9859"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, Tmp, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(4, dl, SHVT));</Highlight></CodeLine>
<Link id="l09860" /><CodeLine lineNumber="9860"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, Tmp2, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Mask4, dl, VT));</Highlight></CodeLine>
<Link id="l09861" /><CodeLine lineNumber="9861"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, Tmp, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Mask4, dl, VT));</Highlight></CodeLine>
<Link id="l09862" /><CodeLine lineNumber="9862"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, Tmp3, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(4, dl, SHVT));</Highlight></CodeLine>
<Link id="l09863" /><CodeLine lineNumber="9863"><Highlight kind="normal">    Tmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, Tmp2, Tmp3);</Highlight></CodeLine>
<Link id="l09864" /><CodeLine lineNumber="9864"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09865" /><CodeLine lineNumber="9865"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// swap i2: ((V &gt;&gt; 2) &amp; 0x33) | ((V &amp; 0x33) &lt;&lt; 2)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09866" /><CodeLine lineNumber="9866"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, Tmp, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(2, dl, SHVT));</Highlight></CodeLine>
<Link id="l09867" /><CodeLine lineNumber="9867"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, Tmp2, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Mask2, dl, VT));</Highlight></CodeLine>
<Link id="l09868" /><CodeLine lineNumber="9868"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, Tmp, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Mask2, dl, VT));</Highlight></CodeLine>
<Link id="l09869" /><CodeLine lineNumber="9869"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, Tmp3, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(2, dl, SHVT));</Highlight></CodeLine>
<Link id="l09870" /><CodeLine lineNumber="9870"><Highlight kind="normal">    Tmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, Tmp2, Tmp3);</Highlight></CodeLine>
<Link id="l09871" /><CodeLine lineNumber="9871"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09872" /><CodeLine lineNumber="9872"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// swap i1: ((V &gt;&gt; 1) &amp; 0x55) | ((V &amp; 0x55) &lt;&lt; 1)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09873" /><CodeLine lineNumber="9873"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, Tmp, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, SHVT));</Highlight></CodeLine>
<Link id="l09874" /><CodeLine lineNumber="9874"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, Tmp2, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Mask1, dl, VT));</Highlight></CodeLine>
<Link id="l09875" /><CodeLine lineNumber="9875"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, Tmp, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Mask1, dl, VT));</Highlight></CodeLine>
<Link id="l09876" /><CodeLine lineNumber="9876"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, Tmp3, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, SHVT));</Highlight></CodeLine>
<Link id="l09877" /><CodeLine lineNumber="9877"><Highlight kind="normal">    Tmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, Tmp2, Tmp3);</Highlight></CodeLine>
<Link id="l09878" /><CodeLine lineNumber="9878"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Tmp;</Highlight></CodeLine>
<Link id="l09879" /><CodeLine lineNumber="9879"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09880" /><CodeLine lineNumber="9880"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09881" /><CodeLine lineNumber="9881"><Highlight kind="normal">  Tmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, VT);</Highlight></CodeLine>
<Link id="l09882" /><CodeLine lineNumber="9882"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, J = Sz-1; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; Sz; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, --J) &#123;</Highlight></CodeLine>
<Link id="l09883" /><CodeLine lineNumber="9883"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; J)</Highlight></CodeLine>
<Link id="l09884" /><CodeLine lineNumber="9884"><Highlight kind="normal">      Tmp2 =</Highlight></CodeLine>
<Link id="l09885" /><CodeLine lineNumber="9885"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(J - <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, dl, SHVT));</Highlight></CodeLine>
<Link id="l09886" /><CodeLine lineNumber="9886"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09887" /><CodeLine lineNumber="9887"><Highlight kind="normal">      Tmp2 =</Highlight></CodeLine>
<Link id="l09888" /><CodeLine lineNumber="9888"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> - J, dl, SHVT));</Highlight></CodeLine>
<Link id="l09889" /><CodeLine lineNumber="9889"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09890" /><CodeLine lineNumber="9890"><Highlight kind="normal">    APInt Shift = <a href="/docs/api/classes/llvm/apint/#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(Sz, J);</Highlight></CodeLine>
<Link id="l09891" /><CodeLine lineNumber="9891"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, Tmp2, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Shift, dl, VT));</Highlight></CodeLine>
<Link id="l09892" /><CodeLine lineNumber="9892"><Highlight kind="normal">    Tmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, Tmp, Tmp2);</Highlight></CodeLine>
<Link id="l09893" /><CodeLine lineNumber="9893"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09894" /><CodeLine lineNumber="9894"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09895" /><CodeLine lineNumber="9895"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Tmp;</Highlight></CodeLine>
<Link id="l09896" /><CodeLine lineNumber="9896"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09897" /><CodeLine lineNumber="9897"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09898" /><CodeLine lineNumber="9898"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#afa6a46c05752cd363e5c254403d30965">TargetLowering::expandVPBITREVERSE</a>(SDNode &#42;<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09899" /><CodeLine lineNumber="9899"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOpcode() == ISD::VP&#95;BITREVERSE);</Highlight></CodeLine>
<Link id="l09900" /><CodeLine lineNumber="9900"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09901" /><CodeLine lineNumber="9901"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l09902" /><CodeLine lineNumber="9902"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l09903" /><CodeLine lineNumber="9903"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l09904" /><CodeLine lineNumber="9904"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a> = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l09905" /><CodeLine lineNumber="9905"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> EVL = <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;<a href="/docs/api/classes/llvm/sdnode/#a8388f666d6e735f35837ad03ed1f7a7a">getOperand</a>(2);</Highlight></CodeLine>
<Link id="l09906" /><CodeLine lineNumber="9906"><Highlight kind="normal">  EVT SHVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a6a2579bc0354806c6c9708b068777c3a">getShiftAmountTy</a>(VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l09907" /><CodeLine lineNumber="9907"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Sz = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l09908" /><CodeLine lineNumber="9908"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09909" /><CodeLine lineNumber="9909"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Tmp, Tmp2, Tmp3;</Highlight></CodeLine>
<Link id="l09910" /><CodeLine lineNumber="9910"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09911" /><CodeLine lineNumber="9911"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If we can, perform BSWAP first and then the mask+swap the i4, then i2</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09912" /><CodeLine lineNumber="9912"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// and finally the i1 pairs.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09913" /><CodeLine lineNumber="9913"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: We can easily support i4/i2 legal types if any target ever does.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09914" /><CodeLine lineNumber="9914"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Sz &gt;= 8 &amp;&amp; <a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(Sz)) &#123;</Highlight></CodeLine>
<Link id="l09915" /><CodeLine lineNumber="9915"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Create the masks - repeating the pattern every byte.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09916" /><CodeLine lineNumber="9916"><Highlight kind="normal">    APInt Mask4 = <a href="/docs/api/classes/llvm/apint/#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Sz, APInt(8, 0x0F));</Highlight></CodeLine>
<Link id="l09917" /><CodeLine lineNumber="9917"><Highlight kind="normal">    APInt Mask2 = <a href="/docs/api/classes/llvm/apint/#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Sz, APInt(8, 0x33));</Highlight></CodeLine>
<Link id="l09918" /><CodeLine lineNumber="9918"><Highlight kind="normal">    APInt Mask1 = <a href="/docs/api/classes/llvm/apint/#a8c55d8510ad4b7cb957d8f5a7cd6944e">APInt::getSplat</a>(Sz, APInt(8, 0x55));</Highlight></CodeLine>
<Link id="l09919" /><CodeLine lineNumber="9919"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09920" /><CodeLine lineNumber="9920"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// BSWAP if the type is wider than a single byte.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09921" /><CodeLine lineNumber="9921"><Highlight kind="normal">    Tmp = (Sz &gt; 8 ? DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;BSWAP, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, Mask, EVL) : <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l09922" /><CodeLine lineNumber="9922"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09923" /><CodeLine lineNumber="9923"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// swap i4: ((V &gt;&gt; 4) &amp; 0x0F) | ((V &amp; 0x0F) &lt;&lt; 4)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09924" /><CodeLine lineNumber="9924"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, dl, VT, Tmp, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(4, dl, SHVT),</Highlight></CodeLine>
<Link id="l09925" /><CodeLine lineNumber="9925"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09926" /><CodeLine lineNumber="9926"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, Tmp2,</Highlight></CodeLine>
<Link id="l09927" /><CodeLine lineNumber="9927"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Mask4, dl, VT), Mask, EVL);</Highlight></CodeLine>
<Link id="l09928" /><CodeLine lineNumber="9928"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, Tmp, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Mask4, dl, VT),</Highlight></CodeLine>
<Link id="l09929" /><CodeLine lineNumber="9929"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09930" /><CodeLine lineNumber="9930"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SHL, dl, VT, Tmp3, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(4, dl, SHVT),</Highlight></CodeLine>
<Link id="l09931" /><CodeLine lineNumber="9931"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09932" /><CodeLine lineNumber="9932"><Highlight kind="normal">    Tmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;OR, dl, VT, Tmp2, Tmp3, Mask, EVL);</Highlight></CodeLine>
<Link id="l09933" /><CodeLine lineNumber="9933"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09934" /><CodeLine lineNumber="9934"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// swap i2: ((V &gt;&gt; 2) &amp; 0x33) | ((V &amp; 0x33) &lt;&lt; 2)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09935" /><CodeLine lineNumber="9935"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, dl, VT, Tmp, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(2, dl, SHVT),</Highlight></CodeLine>
<Link id="l09936" /><CodeLine lineNumber="9936"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09937" /><CodeLine lineNumber="9937"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, Tmp2,</Highlight></CodeLine>
<Link id="l09938" /><CodeLine lineNumber="9938"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Mask2, dl, VT), Mask, EVL);</Highlight></CodeLine>
<Link id="l09939" /><CodeLine lineNumber="9939"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, Tmp, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Mask2, dl, VT),</Highlight></CodeLine>
<Link id="l09940" /><CodeLine lineNumber="9940"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09941" /><CodeLine lineNumber="9941"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SHL, dl, VT, Tmp3, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(2, dl, SHVT),</Highlight></CodeLine>
<Link id="l09942" /><CodeLine lineNumber="9942"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09943" /><CodeLine lineNumber="9943"><Highlight kind="normal">    Tmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;OR, dl, VT, Tmp2, Tmp3, Mask, EVL);</Highlight></CodeLine>
<Link id="l09944" /><CodeLine lineNumber="9944"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09945" /><CodeLine lineNumber="9945"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// swap i1: ((V &gt;&gt; 1) &amp; 0x55) | ((V &amp; 0x55) &lt;&lt; 1)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09946" /><CodeLine lineNumber="9946"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SRL, dl, VT, Tmp, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, SHVT),</Highlight></CodeLine>
<Link id="l09947" /><CodeLine lineNumber="9947"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09948" /><CodeLine lineNumber="9948"><Highlight kind="normal">    Tmp2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, Tmp2,</Highlight></CodeLine>
<Link id="l09949" /><CodeLine lineNumber="9949"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Mask1, dl, VT), Mask, EVL);</Highlight></CodeLine>
<Link id="l09950" /><CodeLine lineNumber="9950"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;AND, dl, VT, Tmp, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Mask1, dl, VT),</Highlight></CodeLine>
<Link id="l09951" /><CodeLine lineNumber="9951"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09952" /><CodeLine lineNumber="9952"><Highlight kind="normal">    Tmp3 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;SHL, dl, VT, Tmp3, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, SHVT),</Highlight></CodeLine>
<Link id="l09953" /><CodeLine lineNumber="9953"><Highlight kind="normal">                       Mask, EVL);</Highlight></CodeLine>
<Link id="l09954" /><CodeLine lineNumber="9954"><Highlight kind="normal">    Tmp = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VP&#95;OR, dl, VT, Tmp2, Tmp3, Mask, EVL);</Highlight></CodeLine>
<Link id="l09955" /><CodeLine lineNumber="9955"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Tmp;</Highlight></CodeLine>
<Link id="l09956" /><CodeLine lineNumber="9956"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l09957" /><CodeLine lineNumber="9957"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l09958" /><CodeLine lineNumber="9958"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l09959" /><CodeLine lineNumber="9959"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09960" /><CodeLine lineNumber="9960"><Highlight kind="normal">std::pair&lt;SDValue, SDValue&gt;</Highlight></CodeLine>
<Link id="l09961" /><CodeLine lineNumber="9961"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#a9335df3ffa4731120eb2ddc78c2b2eaa">TargetLowering::scalarizeVectorLoad</a>(LoadSDNode &#42;LD,</Highlight></CodeLine>
<Link id="l09962" /><CodeLine lineNumber="9962"><Highlight kind="normal">                                    SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l09963" /><CodeLine lineNumber="9963"><Highlight kind="normal">  SDLoc SL(LD);</Highlight></CodeLine>
<Link id="l09964" /><CodeLine lineNumber="9964"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getChain();</Highlight></CodeLine>
<Link id="l09965" /><CodeLine lineNumber="9965"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> BasePTR = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getBasePtr();</Highlight></CodeLine>
<Link id="l09966" /><CodeLine lineNumber="9966"><Highlight kind="normal">  EVT SrcVT = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getMemoryVT();</Highlight></CodeLine>
<Link id="l09967" /><CodeLine lineNumber="9967"><Highlight kind="normal">  EVT DstVT = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l09968" /><CodeLine lineNumber="9968"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/isd/#ad4d48171b87ca51ff54c10a436bac4d7">ISD::LoadExtType</a> <a href="/docs/api/namespaces/anonymous-codegenprepare-cpp-/#a3c5dbbe247f7b8e61085e6ad1682164f">ExtType</a> = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getExtensionType();</Highlight></CodeLine>
<Link id="l09969" /><CodeLine lineNumber="9969"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09970" /><CodeLine lineNumber="9970"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcVT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l09971" /><CodeLine lineNumber="9971"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7f2a3d4dcfee70225988aec53ff1e173">report&#95;fatal&#95;error</a>(</Highlight><Highlight kind="stringliteral">&quot;Cannot scalarize scalable vector loads&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l09972" /><CodeLine lineNumber="9972"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09973" /><CodeLine lineNumber="9973"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumElem = SrcVT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>();</Highlight></CodeLine>
<Link id="l09974" /><CodeLine lineNumber="9974"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09975" /><CodeLine lineNumber="9975"><Highlight kind="normal">  EVT SrcEltVT = SrcVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l09976" /><CodeLine lineNumber="9976"><Highlight kind="normal">  EVT DstEltVT = DstVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l09977" /><CodeLine lineNumber="9977"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09978" /><CodeLine lineNumber="9978"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// A vector must always be stored in memory as-is, i.e. without any padding</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09979" /><CodeLine lineNumber="9979"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// between the elements, since various code depend on it, e.g. in the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09980" /><CodeLine lineNumber="9980"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// handling of a bitcast of a vector type to int, which may be done with a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09981" /><CodeLine lineNumber="9981"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// vector store followed by an integer load. A vector that does not have</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09982" /><CodeLine lineNumber="9982"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// elements that are byte-sized must therefore be stored as an integer</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09983" /><CodeLine lineNumber="9983"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// built out of the extracted vector elements.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09984" /><CodeLine lineNumber="9984"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SrcEltVT.<a href="/docs/api/structs/llvm/evt/#a470621733f1ffb597e6f502040216da4">isByteSized</a>()) &#123;</Highlight></CodeLine>
<Link id="l09985" /><CodeLine lineNumber="9985"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumLoadBits = SrcVT.<a href="/docs/api/structs/llvm/evt/#a5f64c589a5312630fe76a37f62a39707">getStoreSizeInBits</a>();</Highlight></CodeLine>
<Link id="l09986" /><CodeLine lineNumber="9986"><Highlight kind="normal">    EVT LoadVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), NumLoadBits);</Highlight></CodeLine>
<Link id="l09987" /><CodeLine lineNumber="9987"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09988" /><CodeLine lineNumber="9988"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSrcBits = SrcVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>();</Highlight></CodeLine>
<Link id="l09989" /><CodeLine lineNumber="9989"><Highlight kind="normal">    EVT SrcIntVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), NumSrcBits);</Highlight></CodeLine>
<Link id="l09990" /><CodeLine lineNumber="9990"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09991" /><CodeLine lineNumber="9991"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SrcEltBits = SrcEltVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>();</Highlight></CodeLine>
<Link id="l09992" /><CodeLine lineNumber="9992"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SrcEltBitMask = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(</Highlight></CodeLine>
<Link id="l09993" /><CodeLine lineNumber="9993"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/apint/#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(NumLoadBits, SrcEltBits), SL, LoadVT);</Highlight></CodeLine>
<Link id="l09994" /><CodeLine lineNumber="9994"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09995" /><CodeLine lineNumber="9995"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Load the whole vector and avoid masking off the top bits as it makes</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09996" /><CodeLine lineNumber="9996"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the codegen worse.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l09997" /><CodeLine lineNumber="9997"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/spii/#ad2b7483c625986ac800ae1c31ae4cce7a5069619ca8fdce305534f3fe85091a0f">Load</a> =</Highlight></CodeLine>
<Link id="l09998" /><CodeLine lineNumber="9998"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a03140e92d989c9a96312035efb8f67fc">getExtLoad</a>(<a href="/docs/api/namespaces/llvm/isd/#ad4d48171b87ca51ff54c10a436bac4d7afab3fffd153f7d7770fed81272e4b78f">ISD::EXTLOAD</a>, SL, LoadVT, Chain, BasePTR,</Highlight></CodeLine>
<Link id="l09999" /><CodeLine lineNumber="9999"><Highlight kind="normal">                       <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getPointerInfo(), SrcIntVT, <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getOriginalAlign(),</Highlight></CodeLine>
<Link id="l10000" /><CodeLine lineNumber="10000"><Highlight kind="normal">                       <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getMemOperand()-&gt;getFlags(), <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getAAInfo());</Highlight></CodeLine>
<Link id="l10001" /><CodeLine lineNumber="10001"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10002" /><CodeLine lineNumber="10002"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDValue, 8&gt;</a> Vals;</Highlight></CodeLine>
<Link id="l10003" /><CodeLine lineNumber="10003"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Idx = 0; Idx &lt; NumElem; ++Idx) &#123;</Highlight></CodeLine>
<Link id="l10004" /><CodeLine lineNumber="10004"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShiftIntoIdx =</Highlight></CodeLine>
<Link id="l10005" /><CodeLine lineNumber="10005"><Highlight kind="normal">          (DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>().<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/combinerhelper-cpp/#aad6842fbf58844d974611a4915a00aae">isBigEndian</a>() ? (NumElem - 1) - Idx : Idx);</Highlight></CodeLine>
<Link id="l10006" /><CodeLine lineNumber="10006"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShiftAmount = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(</Highlight></CodeLine>
<Link id="l10007" /><CodeLine lineNumber="10007"><Highlight kind="normal">          ShiftIntoIdx &#42; SrcEltVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>(), LoadVT, SL);</Highlight></CodeLine>
<Link id="l10008" /><CodeLine lineNumber="10008"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShiftedElt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, SL, LoadVT, Load, ShiftAmount);</Highlight></CodeLine>
<Link id="l10009" /><CodeLine lineNumber="10009"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Elt =</Highlight></CodeLine>
<Link id="l10010" /><CodeLine lineNumber="10010"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, SL, LoadVT, ShiftedElt, SrcEltBitMask);</Highlight></CodeLine>
<Link id="l10011" /><CodeLine lineNumber="10011"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/nvptx/ptxldstinstcode/#a91119cbee2be000c528a690252aee07ca09c68d67f7dbfa6cc77eaf73aa535217">Scalar</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, SL, SrcEltVT, Elt);</Highlight></CodeLine>
<Link id="l10012" /><CodeLine lineNumber="10012"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10013" /><CodeLine lineNumber="10013"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ExtType != <a href="/docs/api/namespaces/llvm/isd/#ad4d48171b87ca51ff54c10a436bac4d7a6aacde2c67988b43a261a7f7ceac4be3">ISD::NON&#95;EXTLOAD</a>) &#123;</Highlight></CodeLine>
<Link id="l10014" /><CodeLine lineNumber="10014"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ExtendOp = <a href="/docs/api/namespaces/llvm/isd/#a2fdb5c9abf8403d4dbf0d8ae59d89916">ISD::getExtForLoadExtType</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, ExtType);</Highlight></CodeLine>
<Link id="l10015" /><CodeLine lineNumber="10015"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/nvptx/ptxldstinstcode/#a91119cbee2be000c528a690252aee07ca09c68d67f7dbfa6cc77eaf73aa535217">Scalar</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ExtendOp, SL, DstEltVT, Scalar);</Highlight></CodeLine>
<Link id="l10016" /><CodeLine lineNumber="10016"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l10017" /><CodeLine lineNumber="10017"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10018" /><CodeLine lineNumber="10018"><Highlight kind="normal">      Vals.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Scalar);</Highlight></CodeLine>
<Link id="l10019" /><CodeLine lineNumber="10019"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l10020" /><CodeLine lineNumber="10020"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10021" /><CodeLine lineNumber="10021"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(DstVT, SL, Vals);</Highlight></CodeLine>
<Link id="l10022" /><CodeLine lineNumber="10022"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::make&#95;pair(<a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a>, <a href="/docs/api/namespaces/llvm/spii/#ad2b7483c625986ac800ae1c31ae4cce7a5069619ca8fdce305534f3fe85091a0f">Load</a>.getValue(1));</Highlight></CodeLine>
<Link id="l10023" /><CodeLine lineNumber="10023"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10024" /><CodeLine lineNumber="10024"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10025" /><CodeLine lineNumber="10025"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Stride = SrcEltVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() / 8;</Highlight></CodeLine>
<Link id="l10026" /><CodeLine lineNumber="10026"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SrcEltVT.<a href="/docs/api/structs/llvm/evt/#a470621733f1ffb597e6f502040216da4">isByteSized</a>());</Highlight></CodeLine>
<Link id="l10027" /><CodeLine lineNumber="10027"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10028" /><CodeLine lineNumber="10028"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDValue, 8&gt;</a> Vals;</Highlight></CodeLine>
<Link id="l10029" /><CodeLine lineNumber="10029"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDValue, 8&gt;</a> LoadChains;</Highlight></CodeLine>
<Link id="l10030" /><CodeLine lineNumber="10030"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10031" /><CodeLine lineNumber="10031"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Idx = 0; Idx &lt; NumElem; ++Idx) &#123;</Highlight></CodeLine>
<Link id="l10032" /><CodeLine lineNumber="10032"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ScalarLoad =</Highlight></CodeLine>
<Link id="l10033" /><CodeLine lineNumber="10033"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a03140e92d989c9a96312035efb8f67fc">getExtLoad</a>(ExtType, SL, DstEltVT, Chain, BasePTR,</Highlight></CodeLine>
<Link id="l10034" /><CodeLine lineNumber="10034"><Highlight kind="normal">                       <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getPointerInfo().getWithOffset(Idx &#42; Stride),</Highlight></CodeLine>
<Link id="l10035" /><CodeLine lineNumber="10035"><Highlight kind="normal">                       SrcEltVT, <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getOriginalAlign(),</Highlight></CodeLine>
<Link id="l10036" /><CodeLine lineNumber="10036"><Highlight kind="normal">                       <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getMemOperand()-&gt;getFlags(), <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getAAInfo());</Highlight></CodeLine>
<Link id="l10037" /><CodeLine lineNumber="10037"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10038" /><CodeLine lineNumber="10038"><Highlight kind="normal">    BasePTR = DAG.<a href="/docs/api/classes/llvm/selectiondag/#adb09f8e31d16bc479475898f3fbdf887">getObjectPtrOffset</a>(SL, BasePTR, <a href="/docs/api/classes/llvm/typesize/#a003b4369b4130e669dc9139798e0193c">TypeSize::getFixed</a>(Stride));</Highlight></CodeLine>
<Link id="l10039" /><CodeLine lineNumber="10039"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10040" /><CodeLine lineNumber="10040"><Highlight kind="normal">    Vals.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(ScalarLoad.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(0));</Highlight></CodeLine>
<Link id="l10041" /><CodeLine lineNumber="10041"><Highlight kind="normal">    LoadChains.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(ScalarLoad.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(1));</Highlight></CodeLine>
<Link id="l10042" /><CodeLine lineNumber="10042"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10043" /><CodeLine lineNumber="10043"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10044" /><CodeLine lineNumber="10044"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NewChain = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad469508535ce2082a1ab1f0e429187b8">ISD::TokenFactor</a>, SL, MVT::Other, LoadChains);</Highlight></CodeLine>
<Link id="l10045" /><CodeLine lineNumber="10045"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a5d154312bef0ed1a6bacfcb52b7cf8eb">getBuildVector</a>(DstVT, SL, Vals);</Highlight></CodeLine>
<Link id="l10046" /><CodeLine lineNumber="10046"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10047" /><CodeLine lineNumber="10047"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::make&#95;pair(<a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a>, NewChain);</Highlight></CodeLine>
<Link id="l10048" /><CodeLine lineNumber="10048"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l10049" /><CodeLine lineNumber="10049"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10050" /><CodeLine lineNumber="10050"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#aa226678963cfca06221c67886a7354f9">TargetLowering::scalarizeVectorStore</a>(StoreSDNode &#42;ST,</Highlight></CodeLine>
<Link id="l10051" /><CodeLine lineNumber="10051"><Highlight kind="normal">                                             SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l10052" /><CodeLine lineNumber="10052"><Highlight kind="normal">  SDLoc SL(ST);</Highlight></CodeLine>
<Link id="l10053" /><CodeLine lineNumber="10053"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10054" /><CodeLine lineNumber="10054"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getChain();</Highlight></CodeLine>
<Link id="l10055" /><CodeLine lineNumber="10055"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/codeview/#aa8c11d016a2dd473a4cf0ed1da777f5ea67f23a49a4828b272554feea07834f7d">BasePtr</a> = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getBasePtr();</Highlight></CodeLine>
<Link id="l10056" /><CodeLine lineNumber="10056"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a> = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getValue();</Highlight></CodeLine>
<Link id="l10057" /><CodeLine lineNumber="10057"><Highlight kind="normal">  EVT StVT = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getMemoryVT();</Highlight></CodeLine>
<Link id="l10058" /><CodeLine lineNumber="10058"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10059" /><CodeLine lineNumber="10059"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (StVT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l10060" /><CodeLine lineNumber="10060"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7f2a3d4dcfee70225988aec53ff1e173">report&#95;fatal&#95;error</a>(</Highlight><Highlight kind="stringliteral">&quot;Cannot scalarize scalable vector stores&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10061" /><CodeLine lineNumber="10061"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10062" /><CodeLine lineNumber="10062"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// The type of the data we want to save</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10063" /><CodeLine lineNumber="10063"><Highlight kind="normal">  EVT RegVT = <a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a>.getValueType();</Highlight></CodeLine>
<Link id="l10064" /><CodeLine lineNumber="10064"><Highlight kind="normal">  EVT RegSclVT = RegVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l10065" /><CodeLine lineNumber="10065"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10066" /><CodeLine lineNumber="10066"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// The type of data as saved in memory.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10067" /><CodeLine lineNumber="10067"><Highlight kind="normal">  EVT MemSclVT = StVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l10068" /><CodeLine lineNumber="10068"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10069" /><CodeLine lineNumber="10069"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumElem = StVT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>();</Highlight></CodeLine>
<Link id="l10070" /><CodeLine lineNumber="10070"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10071" /><CodeLine lineNumber="10071"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// A vector must always be stored in memory as-is, i.e. without any padding</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10072" /><CodeLine lineNumber="10072"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// between the elements, since various code depend on it, e.g. in the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10073" /><CodeLine lineNumber="10073"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// handling of a bitcast of a vector type to int, which may be done with a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10074" /><CodeLine lineNumber="10074"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// vector store followed by an integer load. A vector that does not have</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10075" /><CodeLine lineNumber="10075"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// elements that are byte-sized must therefore be stored as an integer</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10076" /><CodeLine lineNumber="10076"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// built out of the extracted vector elements.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10077" /><CodeLine lineNumber="10077"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!MemSclVT.<a href="/docs/api/structs/llvm/evt/#a470621733f1ffb597e6f502040216da4">isByteSized</a>()) &#123;</Highlight></CodeLine>
<Link id="l10078" /><CodeLine lineNumber="10078"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumBits = StVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>();</Highlight></CodeLine>
<Link id="l10079" /><CodeLine lineNumber="10079"><Highlight kind="normal">    EVT IntVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), NumBits);</Highlight></CodeLine>
<Link id="l10080" /><CodeLine lineNumber="10080"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10081" /><CodeLine lineNumber="10081"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> CurrVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, SL, IntVT);</Highlight></CodeLine>
<Link id="l10082" /><CodeLine lineNumber="10082"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10083" /><CodeLine lineNumber="10083"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Idx = 0; Idx &lt; NumElem; ++Idx) &#123;</Highlight></CodeLine>
<Link id="l10084" /><CodeLine lineNumber="10084"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Elt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9329e79f62e9ab9b41cfbcafd314bcbd">ISD::EXTRACT&#95;VECTOR&#95;ELT</a>, SL, RegSclVT, <a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a>,</Highlight></CodeLine>
<Link id="l10085" /><CodeLine lineNumber="10085"><Highlight kind="normal">                                DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac597f2b1601a3acbac07347251e588f8">getVectorIdxConstant</a>(Idx, SL));</Highlight></CodeLine>
<Link id="l10086" /><CodeLine lineNumber="10086"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Trunc = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, SL, MemSclVT, Elt);</Highlight></CodeLine>
<Link id="l10087" /><CodeLine lineNumber="10087"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ExtElt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, SL, IntVT, Trunc);</Highlight></CodeLine>
<Link id="l10088" /><CodeLine lineNumber="10088"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ShiftIntoIdx =</Highlight></CodeLine>
<Link id="l10089" /><CodeLine lineNumber="10089"><Highlight kind="normal">          (DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>().<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/combinerhelper-cpp/#aad6842fbf58844d974611a4915a00aae">isBigEndian</a>() ? (NumElem - 1) - Idx : Idx);</Highlight></CodeLine>
<Link id="l10090" /><CodeLine lineNumber="10090"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShiftAmount =</Highlight></CodeLine>
<Link id="l10091" /><CodeLine lineNumber="10091"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(ShiftIntoIdx &#42; MemSclVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>(), SL, IntVT);</Highlight></CodeLine>
<Link id="l10092" /><CodeLine lineNumber="10092"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShiftedElt =</Highlight></CodeLine>
<Link id="l10093" /><CodeLine lineNumber="10093"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, SL, IntVT, ExtElt, ShiftAmount);</Highlight></CodeLine>
<Link id="l10094" /><CodeLine lineNumber="10094"><Highlight kind="normal">      CurrVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, SL, IntVT, CurrVal, ShiftedElt);</Highlight></CodeLine>
<Link id="l10095" /><CodeLine lineNumber="10095"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l10096" /><CodeLine lineNumber="10096"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10097" /><CodeLine lineNumber="10097"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a89ed6b26ee4f62aec32468329f828a2f">getStore</a>(Chain, SL, CurrVal, BasePtr, <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getPointerInfo(),</Highlight></CodeLine>
<Link id="l10098" /><CodeLine lineNumber="10098"><Highlight kind="normal">                        <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getOriginalAlign(), <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getMemOperand()-&gt;getFlags(),</Highlight></CodeLine>
<Link id="l10099" /><CodeLine lineNumber="10099"><Highlight kind="normal">                        <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getAAInfo());</Highlight></CodeLine>
<Link id="l10100" /><CodeLine lineNumber="10100"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10101" /><CodeLine lineNumber="10101"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10102" /><CodeLine lineNumber="10102"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Store Stride in bytes</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10103" /><CodeLine lineNumber="10103"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Stride = MemSclVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() / 8;</Highlight></CodeLine>
<Link id="l10104" /><CodeLine lineNumber="10104"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Stride &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Zero stride!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10105" /><CodeLine lineNumber="10105"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Extract each of the elements from the original vector and save them into</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10106" /><CodeLine lineNumber="10106"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// memory individually.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10107" /><CodeLine lineNumber="10107"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDValue, 8&gt;</a> Stores;</Highlight></CodeLine>
<Link id="l10108" /><CodeLine lineNumber="10108"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Idx = 0; Idx &lt; NumElem; ++Idx) &#123;</Highlight></CodeLine>
<Link id="l10109" /><CodeLine lineNumber="10109"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Elt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9329e79f62e9ab9b41cfbcafd314bcbd">ISD::EXTRACT&#95;VECTOR&#95;ELT</a>, SL, RegSclVT, <a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a>,</Highlight></CodeLine>
<Link id="l10110" /><CodeLine lineNumber="10110"><Highlight kind="normal">                              DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac597f2b1601a3acbac07347251e588f8">getVectorIdxConstant</a>(Idx, SL));</Highlight></CodeLine>
<Link id="l10111" /><CodeLine lineNumber="10111"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10112" /><CodeLine lineNumber="10112"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> =</Highlight></CodeLine>
<Link id="l10113" /><CodeLine lineNumber="10113"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#adb09f8e31d16bc479475898f3fbdf887">getObjectPtrOffset</a>(SL, BasePtr, <a href="/docs/api/classes/llvm/typesize/#a003b4369b4130e669dc9139798e0193c">TypeSize::getFixed</a>(Idx &#42; Stride));</Highlight></CodeLine>
<Link id="l10114" /><CodeLine lineNumber="10114"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10115" /><CodeLine lineNumber="10115"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// This scalar TruncStore may be illegal, but we legalize it later.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10116" /><CodeLine lineNumber="10116"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/spii/#ad2b7483c625986ac800ae1c31ae4cce7a36b3dd3b84fde3f8494a9b18af131856">Store</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8063c77c39146c0790e66f5e0679475c">getTruncStore</a>(</Highlight></CodeLine>
<Link id="l10117" /><CodeLine lineNumber="10117"><Highlight kind="normal">        Chain, SL, Elt, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getPointerInfo().getWithOffset(Idx &#42; Stride),</Highlight></CodeLine>
<Link id="l10118" /><CodeLine lineNumber="10118"><Highlight kind="normal">        MemSclVT, <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getOriginalAlign(), <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getMemOperand()-&gt;getFlags(),</Highlight></CodeLine>
<Link id="l10119" /><CodeLine lineNumber="10119"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getAAInfo());</Highlight></CodeLine>
<Link id="l10120" /><CodeLine lineNumber="10120"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10121" /><CodeLine lineNumber="10121"><Highlight kind="normal">    Stores.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Store);</Highlight></CodeLine>
<Link id="l10122" /><CodeLine lineNumber="10122"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10123" /><CodeLine lineNumber="10123"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10124" /><CodeLine lineNumber="10124"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad469508535ce2082a1ab1f0e429187b8">ISD::TokenFactor</a>, SL, MVT::Other, Stores);</Highlight></CodeLine>
<Link id="l10125" /><CodeLine lineNumber="10125"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l10126" /><CodeLine lineNumber="10126"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10127" /><CodeLine lineNumber="10127"><Highlight kind="normal">std::pair&lt;SDValue, SDValue&gt;</Highlight></CodeLine>
<Link id="l10128" /><CodeLine lineNumber="10128"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#a48eecfa931988559b1d70ad5b60b4511">TargetLowering::expandUnalignedLoad</a>(LoadSDNode &#42;LD, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l10129" /><CodeLine lineNumber="10129"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getAddressingMode() == <a href="/docs/api/namespaces/llvm/isd/#abee7ecb577fcade34eb16ccb7f503e31ade1c53e7b8a373e22ec53ff7bcbace9f">ISD::UNINDEXED</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l10130" /><CodeLine lineNumber="10130"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;unaligned indexed loads not implemented!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10131" /><CodeLine lineNumber="10131"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getChain();</Highlight></CodeLine>
<Link id="l10132" /><CodeLine lineNumber="10132"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getBasePtr();</Highlight></CodeLine>
<Link id="l10133" /><CodeLine lineNumber="10133"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l10134" /><CodeLine lineNumber="10134"><Highlight kind="normal">  EVT LoadedVT = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getMemoryVT();</Highlight></CodeLine>
<Link id="l10135" /><CodeLine lineNumber="10135"><Highlight kind="normal">  SDLoc dl(LD);</Highlight></CodeLine>
<Link id="l10136" /><CodeLine lineNumber="10136"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;MF = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac64ec73b0617befef1fb2eae78d12b5f">getMachineFunction</a>();</Highlight></CodeLine>
<Link id="l10137" /><CodeLine lineNumber="10137"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10138" /><CodeLine lineNumber="10138"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#a3cb888a2ce8e95e0d9769687a5e2f7d8">isFloatingPoint</a>() || VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>()) &#123;</Highlight></CodeLine>
<Link id="l10139" /><CodeLine lineNumber="10139"><Highlight kind="normal">    EVT intVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), LoadedVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>());</Highlight></CodeLine>
<Link id="l10140" /><CodeLine lineNumber="10140"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(intVT) &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(LoadedVT)) &#123;</Highlight></CodeLine>
<Link id="l10141" /><CodeLine lineNumber="10141"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(ISD::LOAD, intVT) &amp;&amp;</Highlight></CodeLine>
<Link id="l10142" /><CodeLine lineNumber="10142"><Highlight kind="normal">          LoadedVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>()) &#123;</Highlight></CodeLine>
<Link id="l10143" /><CodeLine lineNumber="10143"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Scalarize the load and let the individual components be handled.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10144" /><CodeLine lineNumber="10144"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> scalarizeVectorLoad(LD, DAG);</Highlight></CodeLine>
<Link id="l10145" /><CodeLine lineNumber="10145"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l10146" /><CodeLine lineNumber="10146"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10147" /><CodeLine lineNumber="10147"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Expand to a (misaligned) integer load of the same size,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10148" /><CodeLine lineNumber="10148"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// then bitconvert to floating point or vector.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10149" /><CodeLine lineNumber="10149"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> newLoad = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a3c3b16945cf064f59363bdefdfe2b492">getLoad</a>(intVT, dl, Chain, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>,</Highlight></CodeLine>
<Link id="l10150" /><CodeLine lineNumber="10150"><Highlight kind="normal">                                    <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getMemOperand());</Highlight></CodeLine>
<Link id="l10151" /><CodeLine lineNumber="10151"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::BITCAST, dl, LoadedVT, newLoad);</Highlight></CodeLine>
<Link id="l10152" /><CodeLine lineNumber="10152"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LoadedVT != VT)</Highlight></CodeLine>
<Link id="l10153" /><CodeLine lineNumber="10153"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(VT.<a href="/docs/api/structs/llvm/evt/#a3cb888a2ce8e95e0d9769687a5e2f7d8">isFloatingPoint</a>() ? ISD::FP&#95;EXTEND :</Highlight></CodeLine>
<Link id="l10154" /><CodeLine lineNumber="10154"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">ISD::ANY&#95;EXTEND</a>, dl, VT, Result);</Highlight></CodeLine>
<Link id="l10155" /><CodeLine lineNumber="10155"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10156" /><CodeLine lineNumber="10156"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::make&#95;pair(Result, newLoad.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(1));</Highlight></CodeLine>
<Link id="l10157" /><CodeLine lineNumber="10157"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l10158" /><CodeLine lineNumber="10158"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10159" /><CodeLine lineNumber="10159"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Copy the value to a (aligned) stack slot using (unaligned) integer</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10160" /><CodeLine lineNumber="10160"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// loads and stores, then do a (aligned) load from the stack slot.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10161" /><CodeLine lineNumber="10161"><Highlight kind="normal">    MVT RegVT = <a href="/docs/api/classes/llvm/targetloweringbase/#af344c6bd2d070c999525df85be7688cf">getRegisterType</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), intVT);</Highlight></CodeLine>
<Link id="l10162" /><CodeLine lineNumber="10162"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LoadedBytes = LoadedVT.<a href="/docs/api/structs/llvm/evt/#a1572b31fadbd0d758314b8d35a050410">getStoreSize</a>();</Highlight></CodeLine>
<Link id="l10163" /><CodeLine lineNumber="10163"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> RegBytes = RegVT.<a href="/docs/api/classes/llvm/mvt/#a7be7c6dd92efc0d6f866d4a3b433eed0">getSizeInBits</a>() / 8;</Highlight></CodeLine>
<Link id="l10164" /><CodeLine lineNumber="10164"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumRegs = (LoadedBytes + RegBytes - 1) / RegBytes;</Highlight></CodeLine>
<Link id="l10165" /><CodeLine lineNumber="10165"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10166" /><CodeLine lineNumber="10166"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Make sure the stack slot is also aligned for the register type.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10167" /><CodeLine lineNumber="10167"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> StackBase = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ae83b3d8e9a944b5d818e80524a5003e2">CreateStackTemporary</a>(LoadedVT, RegVT);</Highlight></CodeLine>
<Link id="l10168" /><CodeLine lineNumber="10168"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">FrameIndex</a> = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;FrameIndexSDNode&gt;</a>(StackBase.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>())-&gt;getIndex();</Highlight></CodeLine>
<Link id="l10169" /><CodeLine lineNumber="10169"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDValue, 8&gt;</a> Stores;</Highlight></CodeLine>
<Link id="l10170" /><CodeLine lineNumber="10170"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/codeview/#aa8c11d016a2dd473a4cf0ed1da777f5eaf80f5476044d70697d689c8f32415ce9">StackPtr</a> = StackBase;</Highlight></CodeLine>
<Link id="l10171" /><CodeLine lineNumber="10171"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = 0;</Highlight></CodeLine>
<Link id="l10172" /><CodeLine lineNumber="10172"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10173" /><CodeLine lineNumber="10173"><Highlight kind="normal">    EVT PtrVT = <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l10174" /><CodeLine lineNumber="10174"><Highlight kind="normal">    EVT StackPtrVT = <a href="/docs/api/namespaces/llvm/codeview/#aa8c11d016a2dd473a4cf0ed1da777f5eaf80f5476044d70697d689c8f32415ce9">StackPtr</a>.getValueType();</Highlight></CodeLine>
<Link id="l10175" /><CodeLine lineNumber="10175"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10176" /><CodeLine lineNumber="10176"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> PtrIncrement = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(RegBytes, dl, PtrVT);</Highlight></CodeLine>
<Link id="l10177" /><CodeLine lineNumber="10177"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> StackPtrIncrement = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(RegBytes, dl, StackPtrVT);</Highlight></CodeLine>
<Link id="l10178" /><CodeLine lineNumber="10178"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10179" /><CodeLine lineNumber="10179"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Do all but one copies using the full register width.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10180" /><CodeLine lineNumber="10180"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 1; i &lt; NumRegs; i++) &#123;</Highlight></CodeLine>
<Link id="l10181" /><CodeLine lineNumber="10181"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Load one integer register&#39;s worth from the original location.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10182" /><CodeLine lineNumber="10182"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/spii/#ad2b7483c625986ac800ae1c31ae4cce7a5069619ca8fdce305534f3fe85091a0f">Load</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a3c3b16945cf064f59363bdefdfe2b492">getLoad</a>(</Highlight></CodeLine>
<Link id="l10183" /><CodeLine lineNumber="10183"><Highlight kind="normal">          RegVT, dl, Chain, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getPointerInfo().getWithOffset(<a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>),</Highlight></CodeLine>
<Link id="l10184" /><CodeLine lineNumber="10184"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getOriginalAlign(), <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getMemOperand()-&gt;getFlags(),</Highlight></CodeLine>
<Link id="l10185" /><CodeLine lineNumber="10185"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getAAInfo());</Highlight></CodeLine>
<Link id="l10186" /><CodeLine lineNumber="10186"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Follow the load with a store to the stack slot.  Remember the store.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10187" /><CodeLine lineNumber="10187"><Highlight kind="normal">      Stores.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a89ed6b26ee4f62aec32468329f828a2f">getStore</a>(</Highlight></CodeLine>
<Link id="l10188" /><CodeLine lineNumber="10188"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/spii/#ad2b7483c625986ac800ae1c31ae4cce7a5069619ca8fdce305534f3fe85091a0f">Load</a>.getValue(1), dl, Load, StackPtr,</Highlight></CodeLine>
<Link id="l10189" /><CodeLine lineNumber="10189"><Highlight kind="normal">          <a href="/docs/api/structs/llvm/machinepointerinfo/#ad8ce1aee13dbdcc05d20284a30e83170">MachinePointerInfo::getFixedStack</a>(MF, FrameIndex, <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>)));</Highlight></CodeLine>
<Link id="l10190" /><CodeLine lineNumber="10190"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Increment the pointers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10191" /><CodeLine lineNumber="10191"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += RegBytes;</Highlight></CodeLine>
<Link id="l10192" /><CodeLine lineNumber="10192"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10193" /><CodeLine lineNumber="10193"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#adb09f8e31d16bc479475898f3fbdf887">getObjectPtrOffset</a>(dl, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, PtrIncrement);</Highlight></CodeLine>
<Link id="l10194" /><CodeLine lineNumber="10194"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/codeview/#aa8c11d016a2dd473a4cf0ed1da777f5eaf80f5476044d70697d689c8f32415ce9">StackPtr</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#adb09f8e31d16bc479475898f3fbdf887">getObjectPtrOffset</a>(dl, StackPtr, StackPtrIncrement);</Highlight></CodeLine>
<Link id="l10195" /><CodeLine lineNumber="10195"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l10196" /><CodeLine lineNumber="10196"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10197" /><CodeLine lineNumber="10197"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The last copy may be partial.  Do an extending load.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10198" /><CodeLine lineNumber="10198"><Highlight kind="normal">    EVT MemVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(),</Highlight></CodeLine>
<Link id="l10199" /><CodeLine lineNumber="10199"><Highlight kind="normal">                                  8 &#42; (LoadedBytes - <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>));</Highlight></CodeLine>
<Link id="l10200" /><CodeLine lineNumber="10200"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/spii/#ad2b7483c625986ac800ae1c31ae4cce7a5069619ca8fdce305534f3fe85091a0f">Load</a> =</Highlight></CodeLine>
<Link id="l10201" /><CodeLine lineNumber="10201"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a03140e92d989c9a96312035efb8f67fc">getExtLoad</a>(<a href="/docs/api/namespaces/llvm/isd/#ad4d48171b87ca51ff54c10a436bac4d7afab3fffd153f7d7770fed81272e4b78f">ISD::EXTLOAD</a>, dl, RegVT, Chain, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>,</Highlight></CodeLine>
<Link id="l10202" /><CodeLine lineNumber="10202"><Highlight kind="normal">                       <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getPointerInfo().getWithOffset(<a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>), MemVT,</Highlight></CodeLine>
<Link id="l10203" /><CodeLine lineNumber="10203"><Highlight kind="normal">                       <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getOriginalAlign(), <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getMemOperand()-&gt;getFlags(),</Highlight></CodeLine>
<Link id="l10204" /><CodeLine lineNumber="10204"><Highlight kind="normal">                       <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getAAInfo());</Highlight></CodeLine>
<Link id="l10205" /><CodeLine lineNumber="10205"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Follow the load with a store to the stack slot.  Remember the store.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10206" /><CodeLine lineNumber="10206"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// On big-endian machines this requires a truncating store to ensure</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10207" /><CodeLine lineNumber="10207"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// that the bits end up in the right place.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10208" /><CodeLine lineNumber="10208"><Highlight kind="normal">    Stores.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8063c77c39146c0790e66f5e0679475c">getTruncStore</a>(</Highlight></CodeLine>
<Link id="l10209" /><CodeLine lineNumber="10209"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/spii/#ad2b7483c625986ac800ae1c31ae4cce7a5069619ca8fdce305534f3fe85091a0f">Load</a>.getValue(1), dl, Load, StackPtr,</Highlight></CodeLine>
<Link id="l10210" /><CodeLine lineNumber="10210"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/machinepointerinfo/#ad8ce1aee13dbdcc05d20284a30e83170">MachinePointerInfo::getFixedStack</a>(MF, FrameIndex, <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>), MemVT));</Highlight></CodeLine>
<Link id="l10211" /><CodeLine lineNumber="10211"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10212" /><CodeLine lineNumber="10212"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The order of the stores doesn&#39;t matter - say it with a TokenFactor.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10213" /><CodeLine lineNumber="10213"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TF = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad469508535ce2082a1ab1f0e429187b8">ISD::TokenFactor</a>, dl, MVT::Other, Stores);</Highlight></CodeLine>
<Link id="l10214" /><CodeLine lineNumber="10214"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10215" /><CodeLine lineNumber="10215"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Finally, perform the original load only redirected to the stack slot.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10216" /><CodeLine lineNumber="10216"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/spii/#ad2b7483c625986ac800ae1c31ae4cce7a5069619ca8fdce305534f3fe85091a0f">Load</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a03140e92d989c9a96312035efb8f67fc">getExtLoad</a>(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getExtensionType(), dl, VT, TF, StackBase,</Highlight></CodeLine>
<Link id="l10217" /><CodeLine lineNumber="10217"><Highlight kind="normal">                          <a href="/docs/api/structs/llvm/machinepointerinfo/#ad8ce1aee13dbdcc05d20284a30e83170">MachinePointerInfo::getFixedStack</a>(MF, FrameIndex, 0),</Highlight></CodeLine>
<Link id="l10218" /><CodeLine lineNumber="10218"><Highlight kind="normal">                          LoadedVT);</Highlight></CodeLine>
<Link id="l10219" /><CodeLine lineNumber="10219"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10220" /><CodeLine lineNumber="10220"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Callers expect a MERGE&#95;VALUES node.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10221" /><CodeLine lineNumber="10221"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::make&#95;pair(Load, TF);</Highlight></CodeLine>
<Link id="l10222" /><CodeLine lineNumber="10222"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10223" /><CodeLine lineNumber="10223"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10224" /><CodeLine lineNumber="10224"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LoadedVT.<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>() &amp;&amp; !LoadedVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l10225" /><CodeLine lineNumber="10225"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Unaligned load of unsupported type.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10226" /><CodeLine lineNumber="10226"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10227" /><CodeLine lineNumber="10227"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Compute the new VT that is half the size of the old one.  This is an</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10228" /><CodeLine lineNumber="10228"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// integer MVT.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10229" /><CodeLine lineNumber="10229"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumBits = LoadedVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>();</Highlight></CodeLine>
<Link id="l10230" /><CodeLine lineNumber="10230"><Highlight kind="normal">  EVT NewLoadedVT;</Highlight></CodeLine>
<Link id="l10231" /><CodeLine lineNumber="10231"><Highlight kind="normal">  NewLoadedVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), NumBits/2);</Highlight></CodeLine>
<Link id="l10232" /><CodeLine lineNumber="10232"><Highlight kind="normal">  NumBits &gt;&gt;= 1;</Highlight></CodeLine>
<Link id="l10233" /><CodeLine lineNumber="10233"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10234" /><CodeLine lineNumber="10234"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/amdgpu/hsamd/kernel/arg/key/#a6b334a5f83504ebc99cc59f4f333ff98">Align</a> Alignment = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getOriginalAlign();</Highlight></CodeLine>
<Link id="l10235" /><CodeLine lineNumber="10235"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> IncrementSize = NumBits / 8;</Highlight></CodeLine>
<Link id="l10236" /><CodeLine lineNumber="10236"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/isd/#ad4d48171b87ca51ff54c10a436bac4d7">ISD::LoadExtType</a> HiExtType = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getExtensionType();</Highlight></CodeLine>
<Link id="l10237" /><CodeLine lineNumber="10237"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10238" /><CodeLine lineNumber="10238"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the original load is NON&#95;EXTLOAD, the hi part load must be ZEXTLOAD.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10239" /><CodeLine lineNumber="10239"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (HiExtType == <a href="/docs/api/namespaces/llvm/isd/#ad4d48171b87ca51ff54c10a436bac4d7a6aacde2c67988b43a261a7f7ceac4be3">ISD::NON&#95;EXTLOAD</a>)</Highlight></CodeLine>
<Link id="l10240" /><CodeLine lineNumber="10240"><Highlight kind="normal">    HiExtType = <a href="/docs/api/namespaces/llvm/isd/#ad4d48171b87ca51ff54c10a436bac4d7a8d89c7da4444d9ec11667aa369abc5f7">ISD::ZEXTLOAD</a>;</Highlight></CodeLine>
<Link id="l10241" /><CodeLine lineNumber="10241"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10242" /><CodeLine lineNumber="10242"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Load the value in two parts</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10243" /><CodeLine lineNumber="10243"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>;</Highlight></CodeLine>
<Link id="l10244" /><CodeLine lineNumber="10244"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>().<a href="/docs/api/classes/llvm/datalayout/#a377365b0288a4d06a07e09252d7d583f">isLittleEndian</a>()) &#123;</Highlight></CodeLine>
<Link id="l10245" /><CodeLine lineNumber="10245"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a03140e92d989c9a96312035efb8f67fc">getExtLoad</a>(<a href="/docs/api/namespaces/llvm/isd/#ad4d48171b87ca51ff54c10a436bac4d7a8d89c7da4444d9ec11667aa369abc5f7">ISD::ZEXTLOAD</a>, dl, VT, Chain, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getPointerInfo(),</Highlight></CodeLine>
<Link id="l10246" /><CodeLine lineNumber="10246"><Highlight kind="normal">                        NewLoadedVT, Alignment, <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getMemOperand()-&gt;getFlags(),</Highlight></CodeLine>
<Link id="l10247" /><CodeLine lineNumber="10247"><Highlight kind="normal">                        <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getAAInfo());</Highlight></CodeLine>
<Link id="l10248" /><CodeLine lineNumber="10248"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10249" /><CodeLine lineNumber="10249"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#adb09f8e31d16bc479475898f3fbdf887">getObjectPtrOffset</a>(dl, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a href="/docs/api/classes/llvm/typesize/#a003b4369b4130e669dc9139798e0193c">TypeSize::getFixed</a>(IncrementSize));</Highlight></CodeLine>
<Link id="l10250" /><CodeLine lineNumber="10250"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a03140e92d989c9a96312035efb8f67fc">getExtLoad</a>(HiExtType, dl, VT, Chain, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>,</Highlight></CodeLine>
<Link id="l10251" /><CodeLine lineNumber="10251"><Highlight kind="normal">                        <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getPointerInfo().getWithOffset(IncrementSize),</Highlight></CodeLine>
<Link id="l10252" /><CodeLine lineNumber="10252"><Highlight kind="normal">                        NewLoadedVT, Alignment, <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getMemOperand()-&gt;getFlags(),</Highlight></CodeLine>
<Link id="l10253" /><CodeLine lineNumber="10253"><Highlight kind="normal">                        <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getAAInfo());</Highlight></CodeLine>
<Link id="l10254" /><CodeLine lineNumber="10254"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l10255" /><CodeLine lineNumber="10255"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a03140e92d989c9a96312035efb8f67fc">getExtLoad</a>(HiExtType, dl, VT, Chain, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getPointerInfo(),</Highlight></CodeLine>
<Link id="l10256" /><CodeLine lineNumber="10256"><Highlight kind="normal">                        NewLoadedVT, Alignment, <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getMemOperand()-&gt;getFlags(),</Highlight></CodeLine>
<Link id="l10257" /><CodeLine lineNumber="10257"><Highlight kind="normal">                        <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getAAInfo());</Highlight></CodeLine>
<Link id="l10258" /><CodeLine lineNumber="10258"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10259" /><CodeLine lineNumber="10259"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#adb09f8e31d16bc479475898f3fbdf887">getObjectPtrOffset</a>(dl, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a href="/docs/api/classes/llvm/typesize/#a003b4369b4130e669dc9139798e0193c">TypeSize::getFixed</a>(IncrementSize));</Highlight></CodeLine>
<Link id="l10260" /><CodeLine lineNumber="10260"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a03140e92d989c9a96312035efb8f67fc">getExtLoad</a>(<a href="/docs/api/namespaces/llvm/isd/#ad4d48171b87ca51ff54c10a436bac4d7a8d89c7da4444d9ec11667aa369abc5f7">ISD::ZEXTLOAD</a>, dl, VT, Chain, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>,</Highlight></CodeLine>
<Link id="l10261" /><CodeLine lineNumber="10261"><Highlight kind="normal">                        <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getPointerInfo().getWithOffset(IncrementSize),</Highlight></CodeLine>
<Link id="l10262" /><CodeLine lineNumber="10262"><Highlight kind="normal">                        NewLoadedVT, Alignment, <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getMemOperand()-&gt;getFlags(),</Highlight></CodeLine>
<Link id="l10263" /><CodeLine lineNumber="10263"><Highlight kind="normal">                        <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85a7289f7156c17c31399fe5226bf556781">LD</a>-&gt;getAAInfo());</Highlight></CodeLine>
<Link id="l10264" /><CodeLine lineNumber="10264"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10265" /><CodeLine lineNumber="10265"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10266" /><CodeLine lineNumber="10266"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// aggregate the two parts</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10267" /><CodeLine lineNumber="10267"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShiftAmount = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(NumBits, VT, dl);</Highlight></CodeLine>
<Link id="l10268" /><CodeLine lineNumber="10268"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, ShiftAmount);</Highlight></CodeLine>
<Link id="l10269" /><CodeLine lineNumber="10269"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, Result, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>);</Highlight></CodeLine>
<Link id="l10270" /><CodeLine lineNumber="10270"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10271" /><CodeLine lineNumber="10271"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TF = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad469508535ce2082a1ab1f0e429187b8">ISD::TokenFactor</a>, dl, MVT::Other, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>.getValue(1),</Highlight></CodeLine>
<Link id="l10272" /><CodeLine lineNumber="10272"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>.getValue(1));</Highlight></CodeLine>
<Link id="l10273" /><CodeLine lineNumber="10273"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10274" /><CodeLine lineNumber="10274"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::make&#95;pair(Result, TF);</Highlight></CodeLine>
<Link id="l10275" /><CodeLine lineNumber="10275"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l10276" /><CodeLine lineNumber="10276"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10277" /><CodeLine lineNumber="10277"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#aac0c36cc1d8c43244b007e09b5a221ae">TargetLowering::expandUnalignedStore</a>(StoreSDNode &#42;ST,</Highlight></CodeLine>
<Link id="l10278" /><CodeLine lineNumber="10278"><Highlight kind="normal">                                             SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l10279" /><CodeLine lineNumber="10279"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getAddressingMode() == <a href="/docs/api/namespaces/llvm/isd/#abee7ecb577fcade34eb16ccb7f503e31ade1c53e7b8a373e22ec53ff7bcbace9f">ISD::UNINDEXED</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l10280" /><CodeLine lineNumber="10280"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;unaligned indexed stores not implemented!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10281" /><CodeLine lineNumber="10281"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getChain();</Highlight></CodeLine>
<Link id="l10282" /><CodeLine lineNumber="10282"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getBasePtr();</Highlight></CodeLine>
<Link id="l10283" /><CodeLine lineNumber="10283"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Val = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getValue();</Highlight></CodeLine>
<Link id="l10284" /><CodeLine lineNumber="10284"><Highlight kind="normal">  EVT VT = Val.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l10285" /><CodeLine lineNumber="10285"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/amdgpu/hsamd/kernel/arg/key/#a6b334a5f83504ebc99cc59f4f333ff98">Align</a> Alignment = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getOriginalAlign();</Highlight></CodeLine>
<Link id="l10286" /><CodeLine lineNumber="10286"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;MF = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac64ec73b0617befef1fb2eae78d12b5f">getMachineFunction</a>();</Highlight></CodeLine>
<Link id="l10287" /><CodeLine lineNumber="10287"><Highlight kind="normal">  EVT StoreMemVT = <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getMemoryVT();</Highlight></CodeLine>
<Link id="l10288" /><CodeLine lineNumber="10288"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10289" /><CodeLine lineNumber="10289"><Highlight kind="normal">  SDLoc dl(ST);</Highlight></CodeLine>
<Link id="l10290" /><CodeLine lineNumber="10290"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (StoreMemVT.<a href="/docs/api/structs/llvm/evt/#a3cb888a2ce8e95e0d9769687a5e2f7d8">isFloatingPoint</a>() || StoreMemVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>()) &#123;</Highlight></CodeLine>
<Link id="l10291" /><CodeLine lineNumber="10291"><Highlight kind="normal">    EVT intVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>());</Highlight></CodeLine>
<Link id="l10292" /><CodeLine lineNumber="10292"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(intVT)) &#123;</Highlight></CodeLine>
<Link id="l10293" /><CodeLine lineNumber="10293"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(ISD::STORE, intVT) &amp;&amp;</Highlight></CodeLine>
<Link id="l10294" /><CodeLine lineNumber="10294"><Highlight kind="normal">          StoreMemVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>()) &#123;</Highlight></CodeLine>
<Link id="l10295" /><CodeLine lineNumber="10295"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Scalarize the store and let the individual components be handled.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10296" /><CodeLine lineNumber="10296"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86isellowering-cpp/#aeda6315d246cafab6d912b425d4e7218">scalarizeVectorStore</a>(ST, DAG);</Highlight></CodeLine>
<Link id="l10297" /><CodeLine lineNumber="10297"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</Highlight></CodeLine>
<Link id="l10298" /><CodeLine lineNumber="10298"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l10299" /><CodeLine lineNumber="10299"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Expand to a bitconvert of the value to the integer type of the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10300" /><CodeLine lineNumber="10300"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// same size, then a (misaligned) int store.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10301" /><CodeLine lineNumber="10301"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// FIXME: Does not handle truncating floating point stores!</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10302" /><CodeLine lineNumber="10302"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::BITCAST, dl, intVT, Val);</Highlight></CodeLine>
<Link id="l10303" /><CodeLine lineNumber="10303"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a89ed6b26ee4f62aec32468329f828a2f">getStore</a>(Chain, dl, Result, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getPointerInfo(),</Highlight></CodeLine>
<Link id="l10304" /><CodeLine lineNumber="10304"><Highlight kind="normal">                            Alignment, <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getMemOperand()-&gt;getFlags());</Highlight></CodeLine>
<Link id="l10305" /><CodeLine lineNumber="10305"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</Highlight></CodeLine>
<Link id="l10306" /><CodeLine lineNumber="10306"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l10307" /><CodeLine lineNumber="10307"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Do a (aligned) store to a stack slot, then copy from the stack slot</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10308" /><CodeLine lineNumber="10308"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// to the final destination using (unaligned) integer loads and stores.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10309" /><CodeLine lineNumber="10309"><Highlight kind="normal">    MVT RegVT = <a href="/docs/api/classes/llvm/targetloweringbase/#af344c6bd2d070c999525df85be7688cf">getRegisterType</a>(</Highlight></CodeLine>
<Link id="l10310" /><CodeLine lineNumber="10310"><Highlight kind="normal">        &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(),</Highlight></CodeLine>
<Link id="l10311" /><CodeLine lineNumber="10311"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), StoreMemVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>()));</Highlight></CodeLine>
<Link id="l10312" /><CodeLine lineNumber="10312"><Highlight kind="normal">    EVT PtrVT = <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>.getValueType();</Highlight></CodeLine>
<Link id="l10313" /><CodeLine lineNumber="10313"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> StoredBytes = StoreMemVT.<a href="/docs/api/structs/llvm/evt/#a1572b31fadbd0d758314b8d35a050410">getStoreSize</a>();</Highlight></CodeLine>
<Link id="l10314" /><CodeLine lineNumber="10314"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> RegBytes = RegVT.<a href="/docs/api/classes/llvm/mvt/#a7be7c6dd92efc0d6f866d4a3b433eed0">getSizeInBits</a>() / 8;</Highlight></CodeLine>
<Link id="l10315" /><CodeLine lineNumber="10315"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumRegs = (StoredBytes + RegBytes - 1) / RegBytes;</Highlight></CodeLine>
<Link id="l10316" /><CodeLine lineNumber="10316"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10317" /><CodeLine lineNumber="10317"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Make sure the stack slot is also aligned for the register type.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10318" /><CodeLine lineNumber="10318"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/codeview/#aa8c11d016a2dd473a4cf0ed1da777f5eaf80f5476044d70697d689c8f32415ce9">StackPtr</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ae83b3d8e9a944b5d818e80524a5003e2">CreateStackTemporary</a>(StoreMemVT, RegVT);</Highlight></CodeLine>
<Link id="l10319" /><CodeLine lineNumber="10319"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">FrameIndex</a> = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;FrameIndexSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/codeview/#aa8c11d016a2dd473a4cf0ed1da777f5eaf80f5476044d70697d689c8f32415ce9">StackPtr</a>.getNode())-&gt;getIndex();</Highlight></CodeLine>
<Link id="l10320" /><CodeLine lineNumber="10320"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10321" /><CodeLine lineNumber="10321"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Perform the original store, only redirected to the stack slot.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10322" /><CodeLine lineNumber="10322"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/spii/#ad2b7483c625986ac800ae1c31ae4cce7a36b3dd3b84fde3f8494a9b18af131856">Store</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8063c77c39146c0790e66f5e0679475c">getTruncStore</a>(</Highlight></CodeLine>
<Link id="l10323" /><CodeLine lineNumber="10323"><Highlight kind="normal">        Chain, dl, Val, StackPtr,</Highlight></CodeLine>
<Link id="l10324" /><CodeLine lineNumber="10324"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/machinepointerinfo/#ad8ce1aee13dbdcc05d20284a30e83170">MachinePointerInfo::getFixedStack</a>(MF, FrameIndex, 0), StoreMemVT);</Highlight></CodeLine>
<Link id="l10325" /><CodeLine lineNumber="10325"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10326" /><CodeLine lineNumber="10326"><Highlight kind="normal">    EVT StackPtrVT = <a href="/docs/api/namespaces/llvm/codeview/#aa8c11d016a2dd473a4cf0ed1da777f5eaf80f5476044d70697d689c8f32415ce9">StackPtr</a>.getValueType();</Highlight></CodeLine>
<Link id="l10327" /><CodeLine lineNumber="10327"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10328" /><CodeLine lineNumber="10328"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> PtrIncrement = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(RegBytes, dl, PtrVT);</Highlight></CodeLine>
<Link id="l10329" /><CodeLine lineNumber="10329"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> StackPtrIncrement = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(RegBytes, dl, StackPtrVT);</Highlight></CodeLine>
<Link id="l10330" /><CodeLine lineNumber="10330"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDValue, 8&gt;</a> Stores;</Highlight></CodeLine>
<Link id="l10331" /><CodeLine lineNumber="10331"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = 0;</Highlight></CodeLine>
<Link id="l10332" /><CodeLine lineNumber="10332"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10333" /><CodeLine lineNumber="10333"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Do all but one copies using the full register width.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10334" /><CodeLine lineNumber="10334"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 1; i &lt; NumRegs; i++) &#123;</Highlight></CodeLine>
<Link id="l10335" /><CodeLine lineNumber="10335"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Load one integer register&#39;s worth from the stack slot.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10336" /><CodeLine lineNumber="10336"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/spii/#ad2b7483c625986ac800ae1c31ae4cce7a5069619ca8fdce305534f3fe85091a0f">Load</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a3c3b16945cf064f59363bdefdfe2b492">getLoad</a>(</Highlight></CodeLine>
<Link id="l10337" /><CodeLine lineNumber="10337"><Highlight kind="normal">          RegVT, dl, Store, StackPtr,</Highlight></CodeLine>
<Link id="l10338" /><CodeLine lineNumber="10338"><Highlight kind="normal">          <a href="/docs/api/structs/llvm/machinepointerinfo/#ad8ce1aee13dbdcc05d20284a30e83170">MachinePointerInfo::getFixedStack</a>(MF, FrameIndex, <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>));</Highlight></CodeLine>
<Link id="l10339" /><CodeLine lineNumber="10339"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Store it to the final location.  Remember the store.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10340" /><CodeLine lineNumber="10340"><Highlight kind="normal">      Stores.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a89ed6b26ee4f62aec32468329f828a2f">getStore</a>(<a href="/docs/api/namespaces/llvm/spii/#ad2b7483c625986ac800ae1c31ae4cce7a5069619ca8fdce305534f3fe85091a0f">Load</a>.getValue(1), dl, Load, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>,</Highlight></CodeLine>
<Link id="l10341" /><CodeLine lineNumber="10341"><Highlight kind="normal">                                    <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getPointerInfo().getWithOffset(<a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>),</Highlight></CodeLine>
<Link id="l10342" /><CodeLine lineNumber="10342"><Highlight kind="normal">                                    <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getOriginalAlign(),</Highlight></CodeLine>
<Link id="l10343" /><CodeLine lineNumber="10343"><Highlight kind="normal">                                    <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getMemOperand()-&gt;getFlags()));</Highlight></CodeLine>
<Link id="l10344" /><CodeLine lineNumber="10344"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Increment the pointers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10345" /><CodeLine lineNumber="10345"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += RegBytes;</Highlight></CodeLine>
<Link id="l10346" /><CodeLine lineNumber="10346"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/codeview/#aa8c11d016a2dd473a4cf0ed1da777f5eaf80f5476044d70697d689c8f32415ce9">StackPtr</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#adb09f8e31d16bc479475898f3fbdf887">getObjectPtrOffset</a>(dl, StackPtr, StackPtrIncrement);</Highlight></CodeLine>
<Link id="l10347" /><CodeLine lineNumber="10347"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#adb09f8e31d16bc479475898f3fbdf887">getObjectPtrOffset</a>(dl, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, PtrIncrement);</Highlight></CodeLine>
<Link id="l10348" /><CodeLine lineNumber="10348"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l10349" /><CodeLine lineNumber="10349"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10350" /><CodeLine lineNumber="10350"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The last store may be partial.  Do a truncating store.  On big-endian</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10351" /><CodeLine lineNumber="10351"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// machines this requires an extending load from the stack slot to ensure</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10352" /><CodeLine lineNumber="10352"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// that the bits are in the right place.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10353" /><CodeLine lineNumber="10353"><Highlight kind="normal">    EVT LoadMemVT =</Highlight></CodeLine>
<Link id="l10354" /><CodeLine lineNumber="10354"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), 8 &#42; (StoredBytes - <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>));</Highlight></CodeLine>
<Link id="l10355" /><CodeLine lineNumber="10355"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10356" /><CodeLine lineNumber="10356"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Load from the stack slot.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10357" /><CodeLine lineNumber="10357"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/spii/#ad2b7483c625986ac800ae1c31ae4cce7a5069619ca8fdce305534f3fe85091a0f">Load</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a03140e92d989c9a96312035efb8f67fc">getExtLoad</a>(</Highlight></CodeLine>
<Link id="l10358" /><CodeLine lineNumber="10358"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/isd/#ad4d48171b87ca51ff54c10a436bac4d7afab3fffd153f7d7770fed81272e4b78f">ISD::EXTLOAD</a>, dl, RegVT, Store, StackPtr,</Highlight></CodeLine>
<Link id="l10359" /><CodeLine lineNumber="10359"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/machinepointerinfo/#ad8ce1aee13dbdcc05d20284a30e83170">MachinePointerInfo::getFixedStack</a>(MF, FrameIndex, <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>), LoadMemVT);</Highlight></CodeLine>
<Link id="l10360" /><CodeLine lineNumber="10360"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10361" /><CodeLine lineNumber="10361"><Highlight kind="normal">    Stores.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(</Highlight></CodeLine>
<Link id="l10362" /><CodeLine lineNumber="10362"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8063c77c39146c0790e66f5e0679475c">getTruncStore</a>(<a href="/docs/api/namespaces/llvm/spii/#ad2b7483c625986ac800ae1c31ae4cce7a5069619ca8fdce305534f3fe85091a0f">Load</a>.getValue(1), dl, Load, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>,</Highlight></CodeLine>
<Link id="l10363" /><CodeLine lineNumber="10363"><Highlight kind="normal">                          <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getPointerInfo().getWithOffset(<a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>), LoadMemVT,</Highlight></CodeLine>
<Link id="l10364" /><CodeLine lineNumber="10364"><Highlight kind="normal">                          <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getOriginalAlign(),</Highlight></CodeLine>
<Link id="l10365" /><CodeLine lineNumber="10365"><Highlight kind="normal">                          <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getMemOperand()-&gt;getFlags(), <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getAAInfo()));</Highlight></CodeLine>
<Link id="l10366" /><CodeLine lineNumber="10366"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The order of the stores doesn&#39;t matter - say it with a TokenFactor.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10367" /><CodeLine lineNumber="10367"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad469508535ce2082a1ab1f0e429187b8">ISD::TokenFactor</a>, dl, MVT::Other, Stores);</Highlight></CodeLine>
<Link id="l10368" /><CodeLine lineNumber="10368"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</Highlight></CodeLine>
<Link id="l10369" /><CodeLine lineNumber="10369"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10370" /><CodeLine lineNumber="10370"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10371" /><CodeLine lineNumber="10371"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(StoreMemVT.<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>() &amp;&amp; !StoreMemVT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l10372" /><CodeLine lineNumber="10372"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Unaligned store of unknown type.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10373" /><CodeLine lineNumber="10373"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Get the half-size VT</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10374" /><CodeLine lineNumber="10374"><Highlight kind="normal">  EVT NewStoredVT = StoreMemVT.<a href="/docs/api/structs/llvm/evt/#a587873e0de35da196d3f5fa6d60f738c">getHalfSizedIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>());</Highlight></CodeLine>
<Link id="l10375" /><CodeLine lineNumber="10375"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumBits = NewStoredVT.<a href="/docs/api/structs/llvm/evt/#a7712dd4392b7eb944b709ac8442634d9">getFixedSizeInBits</a>();</Highlight></CodeLine>
<Link id="l10376" /><CodeLine lineNumber="10376"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> IncrementSize = NumBits / 8;</Highlight></CodeLine>
<Link id="l10377" /><CodeLine lineNumber="10377"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10378" /><CodeLine lineNumber="10378"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Divide the stored value in two parts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10379" /><CodeLine lineNumber="10379"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShiftAmount =</Highlight></CodeLine>
<Link id="l10380" /><CodeLine lineNumber="10380"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(NumBits, Val.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>(), dl);</Highlight></CodeLine>
<Link id="l10381" /><CodeLine lineNumber="10381"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = Val;</Highlight></CodeLine>
<Link id="l10382" /><CodeLine lineNumber="10382"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If Val is a constant, replace the upper bits with 0 The SRL will constant</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10383" /><CodeLine lineNumber="10383"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// fold and not use the upper bits. A smaller constant may be easier to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10384" /><CodeLine lineNumber="10384"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// materialize.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10385" /><CodeLine lineNumber="10385"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>); <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> &amp;&amp; !<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;isOpaque())</Highlight></CodeLine>
<Link id="l10386" /><CodeLine lineNumber="10386"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(</Highlight></CodeLine>
<Link id="l10387" /><CodeLine lineNumber="10387"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>,</Highlight></CodeLine>
<Link id="l10388" /><CodeLine lineNumber="10388"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(VT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>(), NumBits), dl,</Highlight></CodeLine>
<Link id="l10389" /><CodeLine lineNumber="10389"><Highlight kind="normal">                        VT));</Highlight></CodeLine>
<Link id="l10390" /><CodeLine lineNumber="10390"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, Val, ShiftAmount);</Highlight></CodeLine>
<Link id="l10391" /><CodeLine lineNumber="10391"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10392" /><CodeLine lineNumber="10392"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Store the two parts</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10393" /><CodeLine lineNumber="10393"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Store1, Store2;</Highlight></CodeLine>
<Link id="l10394" /><CodeLine lineNumber="10394"><Highlight kind="normal">  Store1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8063c77c39146c0790e66f5e0679475c">getTruncStore</a>(Chain, dl,</Highlight></CodeLine>
<Link id="l10395" /><CodeLine lineNumber="10395"><Highlight kind="normal">                             DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>().<a href="/docs/api/classes/llvm/datalayout/#a377365b0288a4d06a07e09252d7d583f">isLittleEndian</a>() ? <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> : <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>,</Highlight></CodeLine>
<Link id="l10396" /><CodeLine lineNumber="10396"><Highlight kind="normal">                             <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getPointerInfo(), NewStoredVT, Alignment,</Highlight></CodeLine>
<Link id="l10397" /><CodeLine lineNumber="10397"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getMemOperand()-&gt;getFlags());</Highlight></CodeLine>
<Link id="l10398" /><CodeLine lineNumber="10398"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10399" /><CodeLine lineNumber="10399"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#adb09f8e31d16bc479475898f3fbdf887">getObjectPtrOffset</a>(dl, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a href="/docs/api/classes/llvm/typesize/#a003b4369b4130e669dc9139798e0193c">TypeSize::getFixed</a>(IncrementSize));</Highlight></CodeLine>
<Link id="l10400" /><CodeLine lineNumber="10400"><Highlight kind="normal">  Store2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8063c77c39146c0790e66f5e0679475c">getTruncStore</a>(</Highlight></CodeLine>
<Link id="l10401" /><CodeLine lineNumber="10401"><Highlight kind="normal">      Chain, dl, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>().<a href="/docs/api/classes/llvm/datalayout/#a377365b0288a4d06a07e09252d7d583f">isLittleEndian</a>() ? <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> : <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>,</Highlight></CodeLine>
<Link id="l10402" /><CodeLine lineNumber="10402"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getPointerInfo().getWithOffset(IncrementSize), NewStoredVT, Alignment,</Highlight></CodeLine>
<Link id="l10403" /><CodeLine lineNumber="10403"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getMemOperand()-&gt;getFlags(), <a href="/docs/api/namespaces/llvm/arm-mb/#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>-&gt;getAAInfo());</Highlight></CodeLine>
<Link id="l10404" /><CodeLine lineNumber="10404"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10405" /><CodeLine lineNumber="10405"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> =</Highlight></CodeLine>
<Link id="l10406" /><CodeLine lineNumber="10406"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad469508535ce2082a1ab1f0e429187b8">ISD::TokenFactor</a>, dl, MVT::Other, Store1, Store2);</Highlight></CodeLine>
<Link id="l10407" /><CodeLine lineNumber="10407"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</Highlight></CodeLine>
<Link id="l10408" /><CodeLine lineNumber="10408"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l10409" /><CodeLine lineNumber="10409"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10410" /><CodeLine lineNumber="10410"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a></Highlight></CodeLine>
<Link id="l10411" /><CodeLine lineNumber="10411"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#a25b0bbe65dfcc05e091da9a4eec90d95">TargetLowering::IncrementMemoryAddress</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Addr, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Mask,</Highlight></CodeLine>
<Link id="l10412" /><CodeLine lineNumber="10412"><Highlight kind="normal">                                       </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, EVT DataVT,</Highlight></CodeLine>
<Link id="l10413" /><CodeLine lineNumber="10413"><Highlight kind="normal">                                       SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l10414" /><CodeLine lineNumber="10414"><Highlight kind="normal">                                       </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsCompressedMemory)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l10415" /><CodeLine lineNumber="10415"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/ms-demangle/#a851a17f7dc73f9988807242926dcc645a6f15bdfa71aa83b0d197cad75757d580">Increment</a>;</Highlight></CodeLine>
<Link id="l10416" /><CodeLine lineNumber="10416"><Highlight kind="normal">  EVT AddrVT = Addr.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l10417" /><CodeLine lineNumber="10417"><Highlight kind="normal">  EVT MaskVT = <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a>.getValueType();</Highlight></CodeLine>
<Link id="l10418" /><CodeLine lineNumber="10418"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DataVT.<a href="/docs/api/structs/llvm/evt/#a3d102abca1c9c95f36546dff2f39273b">getVectorElementCount</a>() == MaskVT.<a href="/docs/api/structs/llvm/evt/#a3d102abca1c9c95f36546dff2f39273b">getVectorElementCount</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l10419" /><CodeLine lineNumber="10419"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Incompatible types of Data and Mask&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10420" /><CodeLine lineNumber="10420"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsCompressedMemory) &#123;</Highlight></CodeLine>
<Link id="l10421" /><CodeLine lineNumber="10421"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DataVT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l10422" /><CodeLine lineNumber="10422"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a7f2a3d4dcfee70225988aec53ff1e173">report&#95;fatal&#95;error</a>(</Highlight></CodeLine>
<Link id="l10423" /><CodeLine lineNumber="10423"><Highlight kind="normal">          </Highlight><Highlight kind="stringliteral">&quot;Cannot currently handle compressed memory with scalable vectors&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10424" /><CodeLine lineNumber="10424"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Incrementing the pointer according to number of &#39;1&#39;s in the mask.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10425" /><CodeLine lineNumber="10425"><Highlight kind="normal">    EVT MaskIntVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), MaskVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>());</Highlight></CodeLine>
<Link id="l10426" /><CodeLine lineNumber="10426"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> MaskInIntReg = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a64f6469ab95c4eec77e4ccf303619a81">getBitcast</a>(MaskIntVT, Mask);</Highlight></CodeLine>
<Link id="l10427" /><CodeLine lineNumber="10427"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (MaskIntVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() &lt; 32) &#123;</Highlight></CodeLine>
<Link id="l10428" /><CodeLine lineNumber="10428"><Highlight kind="normal">      MaskInIntReg = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, MVT::i32, MaskInIntReg);</Highlight></CodeLine>
<Link id="l10429" /><CodeLine lineNumber="10429"><Highlight kind="normal">      MaskIntVT = MVT::i32;</Highlight></CodeLine>
<Link id="l10430" /><CodeLine lineNumber="10430"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l10431" /><CodeLine lineNumber="10431"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10432" /><CodeLine lineNumber="10432"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Count &#39;1&#39;s with POPCNT.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10433" /><CodeLine lineNumber="10433"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#a851a17f7dc73f9988807242926dcc645a6f15bdfa71aa83b0d197cad75757d580">Increment</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a991d07d163bd4d9984cf1ef36e92c214">ISD::CTPOP</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, MaskIntVT, MaskInIntReg);</Highlight></CodeLine>
<Link id="l10434" /><CodeLine lineNumber="10434"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#a851a17f7dc73f9988807242926dcc645a6f15bdfa71aa83b0d197cad75757d580">Increment</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad0c6f059b29535f2c790d1c4f92b7a93">getZExtOrTrunc</a>(Increment, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AddrVT);</Highlight></CodeLine>
<Link id="l10435" /><CodeLine lineNumber="10435"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Scale is an element size in bytes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10436" /><CodeLine lineNumber="10436"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Scale = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(DataVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>() / 8, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</Highlight></CodeLine>
<Link id="l10437" /><CodeLine lineNumber="10437"><Highlight kind="normal">                                    AddrVT);</Highlight></CodeLine>
<Link id="l10438" /><CodeLine lineNumber="10438"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#a851a17f7dc73f9988807242926dcc645a6f15bdfa71aa83b0d197cad75757d580">Increment</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AddrVT, Increment, Scale);</Highlight></CodeLine>
<Link id="l10439" /><CodeLine lineNumber="10439"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DataVT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>()) &#123;</Highlight></CodeLine>
<Link id="l10440" /><CodeLine lineNumber="10440"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#a851a17f7dc73f9988807242926dcc645a6f15bdfa71aa83b0d197cad75757d580">Increment</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1e362f3699fd2c3f46c7a3690031dda3">getVScale</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AddrVT,</Highlight></CodeLine>
<Link id="l10441" /><CodeLine lineNumber="10441"><Highlight kind="normal">                              APInt(AddrVT.<a href="/docs/api/structs/llvm/evt/#a7712dd4392b7eb944b709ac8442634d9">getFixedSizeInBits</a>(),</Highlight></CodeLine>
<Link id="l10442" /><CodeLine lineNumber="10442"><Highlight kind="normal">                                    DataVT.<a href="/docs/api/structs/llvm/evt/#a1572b31fadbd0d758314b8d35a050410">getStoreSize</a>().<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>()));</Highlight></CodeLine>
<Link id="l10443" /><CodeLine lineNumber="10443"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10444" /><CodeLine lineNumber="10444"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#a851a17f7dc73f9988807242926dcc645a6f15bdfa71aa83b0d197cad75757d580">Increment</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(DataVT.<a href="/docs/api/structs/llvm/evt/#a1572b31fadbd0d758314b8d35a050410">getStoreSize</a>(), <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AddrVT);</Highlight></CodeLine>
<Link id="l10445" /><CodeLine lineNumber="10445"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10446" /><CodeLine lineNumber="10446"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, AddrVT, Addr, Increment);</Highlight></CodeLine>
<Link id="l10447" /><CodeLine lineNumber="10447"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l10448" /><CodeLine lineNumber="10448"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10449" /><CodeLine lineNumber="10449" lineLink="#a508969c8bd53dfda53fb8670e9df1194"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> <a href="#a508969c8bd53dfda53fb8670e9df1194">clampDynamicVectorIndex</a>(<a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a> &amp;DAG, <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Idx,</Highlight></CodeLine>
<Link id="l10450" /><CodeLine lineNumber="10450"><Highlight kind="normal">                                       <a href="/docs/api/structs/llvm/evt">EVT</a> VecVT, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/sdloc">SDLoc</a> &amp;dl,</Highlight></CodeLine>
<Link id="l10451" /><CodeLine lineNumber="10451"><Highlight kind="normal">                                       <a href="/docs/api/classes/llvm/elementcount">ElementCount</a> SubEC) &#123;</Highlight></CodeLine>
<Link id="l10452" /><CodeLine lineNumber="10452"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!(SubEC.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>() &amp;&amp; VecVT.<a href="/docs/api/structs/llvm/evt/#a920f0719057d7352f9da10908859368d">isFixedLengthVector</a>()) &amp;&amp;</Highlight></CodeLine>
<Link id="l10453" /><CodeLine lineNumber="10453"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Cannot index a scalable vector within a fixed-width vector&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10454" /><CodeLine lineNumber="10454"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10455" /><CodeLine lineNumber="10455"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NElts = VecVT.<a href="/docs/api/structs/llvm/evt/#a53fb11c0140efce7e25ca9ff5ccbac96">getVectorMinNumElements</a>();</Highlight></CodeLine>
<Link id="l10456" /><CodeLine lineNumber="10456"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumSubElts = SubEC.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>();</Highlight></CodeLine>
<Link id="l10457" /><CodeLine lineNumber="10457"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/evt">EVT</a> IdxVT = Idx.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l10458" /><CodeLine lineNumber="10458"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10459" /><CodeLine lineNumber="10459"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VecVT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>() &amp;&amp; !SubEC.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>()) &#123;</Highlight></CodeLine>
<Link id="l10460" /><CodeLine lineNumber="10460"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If this is a constant index and we know the value plus the number of the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10461" /><CodeLine lineNumber="10461"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// elements in the subvector minus one is less than the minimum number of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10462" /><CodeLine lineNumber="10462"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// elements then it&#39;s safe to return Idx.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10463" /><CodeLine lineNumber="10463"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;IdxCst = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantSDNode&gt;</a>(Idx))</Highlight></CodeLine>
<Link id="l10464" /><CodeLine lineNumber="10464"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IdxCst-&gt;getZExtValue() + (NumSubElts - 1) &lt; NElts)</Highlight></CodeLine>
<Link id="l10465" /><CodeLine lineNumber="10465"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Idx;</Highlight></CodeLine>
<Link id="l10466" /><CodeLine lineNumber="10466"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> VS =</Highlight></CodeLine>
<Link id="l10467" /><CodeLine lineNumber="10467"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1e362f3699fd2c3f46c7a3690031dda3">getVScale</a>(dl, IdxVT, <a href="/docs/api/classes/llvm/apint">APInt</a>(IdxVT.<a href="/docs/api/structs/llvm/evt/#a7712dd4392b7eb944b709ac8442634d9">getFixedSizeInBits</a>(), NElts));</Highlight></CodeLine>
<Link id="l10468" /><CodeLine lineNumber="10468"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SubOpcode = NumSubElts &lt;= NElts ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a89166b38f12c0bd3e8a61d8f1a5a8bc8">ISD::USUBSAT</a>;</Highlight></CodeLine>
<Link id="l10469" /><CodeLine lineNumber="10469"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/sdvalue">SDValue</a> Sub = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(SubOpcode, dl, IdxVT, VS,</Highlight></CodeLine>
<Link id="l10470" /><CodeLine lineNumber="10470"><Highlight kind="normal">                              DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(NumSubElts, dl, IdxVT));</Highlight></CodeLine>
<Link id="l10471" /><CodeLine lineNumber="10471"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a17126302da6199930e55e841ca1b082d">ISD::UMIN</a>, dl, IdxVT, Idx, Sub);</Highlight></CodeLine>
<Link id="l10472" /><CodeLine lineNumber="10472"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10473" /><CodeLine lineNumber="10473"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(NElts) &amp;&amp; NumSubElts == 1) &#123;</Highlight></CodeLine>
<Link id="l10474" /><CodeLine lineNumber="10474"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/apint">APInt</a> Imm = <a href="/docs/api/classes/llvm/apint/#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(IdxVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>(), <a href="/docs/api/namespaces/llvm/#a646986783f35e0fef8988f0f28d2589f">Log2&#95;32</a>(NElts));</Highlight></CodeLine>
<Link id="l10475" /><CodeLine lineNumber="10475"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, IdxVT, Idx,</Highlight></CodeLine>
<Link id="l10476" /><CodeLine lineNumber="10476"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Imm, dl, IdxVT));</Highlight></CodeLine>
<Link id="l10477" /><CodeLine lineNumber="10477"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10478" /><CodeLine lineNumber="10478"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> MaxIndex = NumSubElts &lt; NElts ? NElts - NumSubElts : 0;</Highlight></CodeLine>
<Link id="l10479" /><CodeLine lineNumber="10479"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a17126302da6199930e55e841ca1b082d">ISD::UMIN</a>, dl, IdxVT, Idx,</Highlight></CodeLine>
<Link id="l10480" /><CodeLine lineNumber="10480"><Highlight kind="normal">                     DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(MaxIndex, dl, IdxVT));</Highlight></CodeLine>
<Link id="l10481" /><CodeLine lineNumber="10481"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l10482" /><CodeLine lineNumber="10482"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10483" /><CodeLine lineNumber="10483"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a7600a96e79f99a6787e181c6168acbdc">TargetLowering::getVectorElementPointer</a>(SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l10484" /><CodeLine lineNumber="10484"><Highlight kind="normal">                                                <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> VecPtr, EVT VecVT,</Highlight></CodeLine>
<Link id="l10485" /><CodeLine lineNumber="10485"><Highlight kind="normal">                                                <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Index)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l10486" /><CodeLine lineNumber="10486"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> getVectorSubVecPointer(</Highlight></CodeLine>
<Link id="l10487" /><CodeLine lineNumber="10487"><Highlight kind="normal">      DAG, VecPtr, VecVT,</Highlight></CodeLine>
<Link id="l10488" /><CodeLine lineNumber="10488"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/evt/#a210ba6b43ba451b698857dd9de71bd15">EVT::getVectorVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VecVT.<a href="/docs/api/structs/llvm/evt/#abc4c6365ade17ad4443ad0e381e7479d">getVectorElementType</a>(), 1),</Highlight></CodeLine>
<Link id="l10489" /><CodeLine lineNumber="10489"><Highlight kind="normal">      Index);</Highlight></CodeLine>
<Link id="l10490" /><CodeLine lineNumber="10490"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l10491" /><CodeLine lineNumber="10491"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10492" /><CodeLine lineNumber="10492"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a52585a36dd68f2eb54f278948b8013c5">TargetLowering::getVectorSubVecPointer</a>(SelectionDAG &amp;DAG,</Highlight></CodeLine>
<Link id="l10493" /><CodeLine lineNumber="10493"><Highlight kind="normal">                                               <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> VecPtr, EVT VecVT,</Highlight></CodeLine>
<Link id="l10494" /><CodeLine lineNumber="10494"><Highlight kind="normal">                                               EVT SubVecVT,</Highlight></CodeLine>
<Link id="l10495" /><CodeLine lineNumber="10495"><Highlight kind="normal">                                               <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Index)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l10496" /><CodeLine lineNumber="10496"><Highlight kind="normal">  SDLoc dl(Index);</Highlight></CodeLine>
<Link id="l10497" /><CodeLine lineNumber="10497"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Make sure the index type is big enough to compute in.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10498" /><CodeLine lineNumber="10498"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/dwarf/#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad0c6f059b29535f2c790d1c4f92b7a93">getZExtOrTrunc</a>(Index, dl, VecPtr.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>());</Highlight></CodeLine>
<Link id="l10499" /><CodeLine lineNumber="10499"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10500" /><CodeLine lineNumber="10500"><Highlight kind="normal">  EVT EltVT = VecVT.<a href="/docs/api/structs/llvm/evt/#abc4c6365ade17ad4443ad0e381e7479d">getVectorElementType</a>();</Highlight></CodeLine>
<Link id="l10501" /><CodeLine lineNumber="10501"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10502" /><CodeLine lineNumber="10502"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Calculate the element offset and add it to the pointer.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10503" /><CodeLine lineNumber="10503"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> EltSize = EltVT.<a href="/docs/api/structs/llvm/evt/#a7712dd4392b7eb944b709ac8442634d9">getFixedSizeInBits</a>() / 8; </Highlight><Highlight kind="comment">// FIXME: should be ABI size.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10504" /><CodeLine lineNumber="10504"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EltSize &#42; 8 == EltVT.<a href="/docs/api/structs/llvm/evt/#a7712dd4392b7eb944b709ac8442634d9">getFixedSizeInBits</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l10505" /><CodeLine lineNumber="10505"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Converting bits to bytes lost precision&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10506" /><CodeLine lineNumber="10506"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SubVecVT.<a href="/docs/api/structs/llvm/evt/#abc4c6365ade17ad4443ad0e381e7479d">getVectorElementType</a>() == EltVT &amp;&amp;</Highlight></CodeLine>
<Link id="l10507" /><CodeLine lineNumber="10507"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Sub-vector must be a vector with matching element type&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10508" /><CodeLine lineNumber="10508"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/dwarf/#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = <a href="#a508969c8bd53dfda53fb8670e9df1194">clampDynamicVectorIndex</a>(DAG, Index, VecVT, dl,</Highlight></CodeLine>
<Link id="l10509" /><CodeLine lineNumber="10509"><Highlight kind="normal">                                  SubVecVT.<a href="/docs/api/structs/llvm/evt/#a3d102abca1c9c95f36546dff2f39273b">getVectorElementCount</a>());</Highlight></CodeLine>
<Link id="l10510" /><CodeLine lineNumber="10510"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10511" /><CodeLine lineNumber="10511"><Highlight kind="normal">  EVT IdxVT = <a href="/docs/api/namespaces/llvm/dwarf/#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.getValueType();</Highlight></CodeLine>
<Link id="l10512" /><CodeLine lineNumber="10512"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SubVecVT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l10513" /><CodeLine lineNumber="10513"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/dwarf/#a5d3c920b66ea797d6adb243862fdf47a">Index</a> =</Highlight></CodeLine>
<Link id="l10514" /><CodeLine lineNumber="10514"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, IdxVT, Index,</Highlight></CodeLine>
<Link id="l10515" /><CodeLine lineNumber="10515"><Highlight kind="normal">                    DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1e362f3699fd2c3f46c7a3690031dda3">getVScale</a>(dl, IdxVT, APInt(IdxVT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>(), 1)));</Highlight></CodeLine>
<Link id="l10516" /><CodeLine lineNumber="10516"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10517" /><CodeLine lineNumber="10517"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/dwarf/#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, IdxVT, Index,</Highlight></CodeLine>
<Link id="l10518" /><CodeLine lineNumber="10518"><Highlight kind="normal">                      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(EltSize, dl, IdxVT));</Highlight></CodeLine>
<Link id="l10519" /><CodeLine lineNumber="10519"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7ec0665296f2e3099a8f4d083e77f425">getMemBasePlusOffset</a>(VecPtr, Index, dl);</Highlight></CodeLine>
<Link id="l10520" /><CodeLine lineNumber="10520"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l10521" /><CodeLine lineNumber="10521"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10522" /><CodeLine lineNumber="10522"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10523" /><CodeLine lineNumber="10523"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Implementation of Emulated TLS Model</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10524" /><CodeLine lineNumber="10524"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10525" /><CodeLine lineNumber="10525"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10526" /><CodeLine lineNumber="10526"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#afdea2f06c6c1098b324fa2e2a1b9b2f4">TargetLowering::LowerToTLSEmulatedModel</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> GlobalAddressSDNode &#42;GA,</Highlight></CodeLine>
<Link id="l10527" /><CodeLine lineNumber="10527"><Highlight kind="normal">                                                SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l10528" /><CodeLine lineNumber="10528"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Access to address of TLS varialbe xyz is lowered to a function call:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10529" /><CodeLine lineNumber="10529"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   &#95;&#95;emutls&#95;get&#95;address( address of global variable named &quot;&#95;&#95;emutls&#95;v.xyz&quot; )</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10530" /><CodeLine lineNumber="10530"><Highlight kind="normal">  EVT PtrVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a8aabf5d0aa80038973255ff2d1e1a9fc">getPointerTy</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l10531" /><CodeLine lineNumber="10531"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/pdb/#a33e853ec74d48b1340d1d4bae772d30bae385c38bb67ea909198e13ee23c21028">PointerType</a> &#42;VoidPtrType = <a href="/docs/api/classes/llvm/pointertype/#a8d7f800be5fd53dcfcdcbdc6fd9ccfe3">PointerType::get</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), 0);</Highlight></CodeLine>
<Link id="l10532" /><CodeLine lineNumber="10532"><Highlight kind="normal">  SDLoc dl(GA);</Highlight></CodeLine>
<Link id="l10533" /><CodeLine lineNumber="10533"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10534" /><CodeLine lineNumber="10534"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/#ae4ac6bc14db22dbd7b94a3b1bd276796">ArgListTy</a> <a href="/docs/api/namespaces/llvm/amdgpu/hsamd/kernel/key/#a1958a762261549463a280bac3274d6d5">Args</a>;</Highlight></CodeLine>
<Link id="l10535" /><CodeLine lineNumber="10535"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/targetloweringbase/arglistentry">ArgListEntry</a> <a href="/docs/api/namespaces/llvm/coff/#ae7629a0652411dc2be61aea4fee2b39caadd024eaaab0666500593f30456bbc43">Entry</a>;</Highlight></CodeLine>
<Link id="l10536" /><CodeLine lineNumber="10536"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> GlobalValue &#42;GV =</Highlight></CodeLine>
<Link id="l10537" /><CodeLine lineNumber="10537"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;GlobalValue&gt;</a>(GA-&gt;<a href="/docs/api/classes/llvm/globaladdresssdnode/#aac749351927cd1732994a39d40fdd4f2">getGlobal</a>()-&gt;<a href="/docs/api/classes/llvm/value/#a3111ed9ce005478f88fbf8d102a89fe9">stripPointerCastsAndAliases</a>());</Highlight></CodeLine>
<Link id="l10538" /><CodeLine lineNumber="10538"><Highlight kind="normal">  SmallString&lt;32&gt; NameString(</Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;emutls&#95;v.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10539" /><CodeLine lineNumber="10539"><Highlight kind="normal">  NameString += GV-&gt;<a href="/docs/api/classes/llvm/value/#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>();</Highlight></CodeLine>
<Link id="l10540" /><CodeLine lineNumber="10540"><Highlight kind="normal">  StringRef EmuTlsVarName(NameString);</Highlight></CodeLine>
<Link id="l10541" /><CodeLine lineNumber="10541"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> GlobalVariable &#42;EmuTlsVar =</Highlight></CodeLine>
<Link id="l10542" /><CodeLine lineNumber="10542"><Highlight kind="normal">      GV-&gt;<a href="/docs/api/classes/llvm/globalvalue/#a739b30c811f1eece61b05320ddf44e5b">getParent</a>()-&gt;<a href="/docs/api/classes/llvm/module/#ab7b871f94b33c166ef30575a247cf9c2">getNamedGlobal</a>(EmuTlsVarName);</Highlight></CodeLine>
<Link id="l10543" /><CodeLine lineNumber="10543"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EmuTlsVar &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Cannot find EmuTlsVar &quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10544" /><CodeLine lineNumber="10544"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/coff/#ae7629a0652411dc2be61aea4fee2b39caadd024eaaab0666500593f30456bbc43">Entry</a>.Node = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7ee632093c5fc25ca22faa353105aa74">getGlobalAddress</a>(EmuTlsVar, dl, PtrVT);</Highlight></CodeLine>
<Link id="l10545" /><CodeLine lineNumber="10545"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/coff/#ae7629a0652411dc2be61aea4fee2b39caadd024eaaab0666500593f30456bbc43">Entry</a>.Ty = VoidPtrType;</Highlight></CodeLine>
<Link id="l10546" /><CodeLine lineNumber="10546"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/amdgpu/hsamd/kernel/key/#a1958a762261549463a280bac3274d6d5">Args</a>.push&#95;back(Entry);</Highlight></CodeLine>
<Link id="l10547" /><CodeLine lineNumber="10547"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10548" /><CodeLine lineNumber="10548"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> EmuTlsGetAddr = DAG.<a href="/docs/api/classes/llvm/selectiondag/#aa8f1c26a4e070ead6c67b4e9a5d93124">getExternalSymbol</a>(</Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;emutls&#95;get&#95;address&quot;</Highlight><Highlight kind="normal">, PtrVT);</Highlight></CodeLine>
<Link id="l10549" /><CodeLine lineNumber="10549"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10550" /><CodeLine lineNumber="10550"><Highlight kind="normal">  TargetLowering::CallLoweringInfo CLI(DAG);</Highlight></CodeLine>
<Link id="l10551" /><CodeLine lineNumber="10551"><Highlight kind="normal">  CLI.setDebugLoc(dl).setChain(DAG.<a href="/docs/api/classes/llvm/selectiondag/#af0f68c9c0e4a38aebd5773f80dd5b716">getEntryNode</a>());</Highlight></CodeLine>
<Link id="l10552" /><CodeLine lineNumber="10552"><Highlight kind="normal">  CLI.setLibCallee(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">CallingConv::C</a>, VoidPtrType, EmuTlsGetAddr, std::move(Args));</Highlight></CodeLine>
<Link id="l10553" /><CodeLine lineNumber="10553"><Highlight kind="normal">  std::pair&lt;SDValue, SDValue&gt; CallResult = LowerCallTo(CLI);</Highlight></CodeLine>
<Link id="l10554" /><CodeLine lineNumber="10554"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10555" /><CodeLine lineNumber="10555"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TLSADDR will be codegen&#39;ed as call. Inform MFI that function has calls.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10556" /><CodeLine lineNumber="10556"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// At last for X86 targets, maybe good for other targets too?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10557" /><CodeLine lineNumber="10557"><Highlight kind="normal">  MachineFrameInfo &amp;MFI = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac64ec73b0617befef1fb2eae78d12b5f">getMachineFunction</a>().<a href="/docs/api/classes/llvm/machinefunction/#a54f334a9c8ca6d105eae383ae87e4524">getFrameInfo</a>();</Highlight></CodeLine>
<Link id="l10558" /><CodeLine lineNumber="10558"><Highlight kind="normal">  MFI.<a href="/docs/api/classes/llvm/machineframeinfo/#a14ca8f1aa1c62b860504b766ad3b15f9">setAdjustsStack</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">); </Highlight><Highlight kind="comment">// Is this only for X86 target?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10559" /><CodeLine lineNumber="10559"><Highlight kind="normal">  MFI.<a href="/docs/api/classes/llvm/machineframeinfo/#a5bb88f5f9d77d753e87c256950f16955">setHasCalls</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10560" /><CodeLine lineNumber="10560"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10561" /><CodeLine lineNumber="10561"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((GA-&gt;<a href="/docs/api/classes/llvm/globaladdresssdnode/#a28a0dd6ccd1cfe2a3d171685b02adab2">getOffset</a>() == 0) &amp;&amp;</Highlight></CodeLine>
<Link id="l10562" /><CodeLine lineNumber="10562"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Emulated TLS must have zero offset in GlobalAddressSDNode&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10563" /><CodeLine lineNumber="10563"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> CallResult.first;</Highlight></CodeLine>
<Link id="l10564" /><CodeLine lineNumber="10564"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l10565" /><CodeLine lineNumber="10565"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10566" /><CodeLine lineNumber="10566"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a16ad899ace945b24e3ef91384f4faeba">TargetLowering::lowerCmpEqZeroToCtlzSrl</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l10567" /><CodeLine lineNumber="10567"><Highlight kind="normal">                                                SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l10568" /><CodeLine lineNumber="10568"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0158ee47dfa868be5d28e2cbef70d5d0">ISD::SETCC</a>) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Input has to be a SETCC node.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10569" /><CodeLine lineNumber="10569"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#aca3a64890b27cc4b760a7ff278306959">isCtlzFast</a>())</Highlight></CodeLine>
<Link id="l10570" /><CodeLine lineNumber="10570"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l10571" /><CodeLine lineNumber="10571"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;CondCodeSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(2))-&gt;get();</Highlight></CodeLine>
<Link id="l10572" /><CodeLine lineNumber="10572"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l10573" /><CodeLine lineNumber="10573"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a1a86775f3d85d98a31b2751e1eb348ea">isNullConstant</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(1)) &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> == <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>) &#123;</Highlight></CodeLine>
<Link id="l10574" /><CodeLine lineNumber="10574"><Highlight kind="normal">    EVT VT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0).getValueType();</Highlight></CodeLine>
<Link id="l10575" /><CodeLine lineNumber="10575"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Zext = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l10576" /><CodeLine lineNumber="10576"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#a3bf257bfbd279ecfad670be03b00210e">bitsLT</a>(MVT::i32)) &#123;</Highlight></CodeLine>
<Link id="l10577" /><CodeLine lineNumber="10577"><Highlight kind="normal">      VT = MVT::i32;</Highlight></CodeLine>
<Link id="l10578" /><CodeLine lineNumber="10578"><Highlight kind="normal">      Zext = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getOperand(0));</Highlight></CodeLine>
<Link id="l10579" /><CodeLine lineNumber="10579"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l10580" /><CodeLine lineNumber="10580"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Log2b = <a href="/docs/api/namespaces/llvm/#a646986783f35e0fef8988f0f28d2589f">Log2&#95;32</a>(VT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>());</Highlight></CodeLine>
<Link id="l10581" /><CodeLine lineNumber="10581"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Clz = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110add33c0ae9a63902e573fc1f92fc33f1c">ISD::CTLZ</a>, dl, VT, Zext);</Highlight></CodeLine>
<Link id="l10582" /><CodeLine lineNumber="10582"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Scc = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, Clz,</Highlight></CodeLine>
<Link id="l10583" /><CodeLine lineNumber="10583"><Highlight kind="normal">                              DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(Log2b, dl, MVT::i32));</Highlight></CodeLine>
<Link id="l10584" /><CodeLine lineNumber="10584"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, MVT::i32, Scc);</Highlight></CodeLine>
<Link id="l10585" /><CodeLine lineNumber="10585"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10586" /><CodeLine lineNumber="10586"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l10587" /><CodeLine lineNumber="10587"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l10588" /><CodeLine lineNumber="10588"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10589" /><CodeLine lineNumber="10589"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a6940d92310c4c204d393e4049e6b4173">TargetLowering::expandIntMINMAX</a>(SDNode &#42;Node, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l10590" /><CodeLine lineNumber="10590"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op0 = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l10591" /><CodeLine lineNumber="10591"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Op1 = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l10592" /><CodeLine lineNumber="10592"><Highlight kind="normal">  EVT VT = Op0.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l10593" /><CodeLine lineNumber="10593"><Highlight kind="normal">  EVT BoolVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l10594" /><CodeLine lineNumber="10594"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opcode = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode();</Highlight></CodeLine>
<Link id="l10595" /><CodeLine lineNumber="10595"><Highlight kind="normal">  SDLoc <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(Node);</Highlight></CodeLine>
<Link id="l10596" /><CodeLine lineNumber="10596"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10597" /><CodeLine lineNumber="10597"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// umax(x,1) --&gt; sub(x,cmpeq(x,0)) iff cmp result is allbits</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10598" /><CodeLine lineNumber="10598"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af675e759c0ffff8d48ea14a60fe3517b">ISD::UMAX</a> &amp;&amp; <a href="/docs/api/namespaces/llvm/#a9a194bbc0c2fac222eeb34d5c3ca97d6">llvm::isOneOrOneSplat</a>(Op1, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">) &amp;&amp; BoolVT == VT &amp;&amp;</Highlight></CodeLine>
<Link id="l10599" /><CodeLine lineNumber="10599"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(VT) == <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a695a19c9c3ae14638be151add82755cb">ZeroOrNegativeOneBooleanContent</a>) &#123;</Highlight></CodeLine>
<Link id="l10600" /><CodeLine lineNumber="10600"><Highlight kind="normal">    Op0 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1ea72c31350e168516e6ee8417f2aed9">getFreeze</a>(Op0);</Highlight></CodeLine>
<Link id="l10601" /><CodeLine lineNumber="10601"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT);</Highlight></CodeLine>
<Link id="l10602" /><CodeLine lineNumber="10602"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Op0,</Highlight></CodeLine>
<Link id="l10603" /><CodeLine lineNumber="10603"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Op0, Zero, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>));</Highlight></CodeLine>
<Link id="l10604" /><CodeLine lineNumber="10604"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10605" /><CodeLine lineNumber="10605"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10606" /><CodeLine lineNumber="10606"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// umin(x,y) -&gt; sub(x,usubsat(x,y))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10607" /><CodeLine lineNumber="10607"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: Missing freeze(Op0)?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10608" /><CodeLine lineNumber="10608"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a17126302da6199930e55e841ca1b082d">ISD::UMIN</a> &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l10609" /><CodeLine lineNumber="10609"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a89166b38f12c0bd3e8a61d8f1a5a8bc8">ISD::USUBSAT</a>, VT)) &#123;</Highlight></CodeLine>
<Link id="l10610" /><CodeLine lineNumber="10610"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Op0,</Highlight></CodeLine>
<Link id="l10611" /><CodeLine lineNumber="10611"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a89166b38f12c0bd3e8a61d8f1a5a8bc8">ISD::USUBSAT</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Op0, Op1));</Highlight></CodeLine>
<Link id="l10612" /><CodeLine lineNumber="10612"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10613" /><CodeLine lineNumber="10613"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10614" /><CodeLine lineNumber="10614"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// umax(x,y) -&gt; add(x,usubsat(y,x))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10615" /><CodeLine lineNumber="10615"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: Missing freeze(Op0)?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10616" /><CodeLine lineNumber="10616"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af675e759c0ffff8d48ea14a60fe3517b">ISD::UMAX</a> &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l10617" /><CodeLine lineNumber="10617"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a89166b38f12c0bd3e8a61d8f1a5a8bc8">ISD::USUBSAT</a>, VT)) &#123;</Highlight></CodeLine>
<Link id="l10618" /><CodeLine lineNumber="10618"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Op0,</Highlight></CodeLine>
<Link id="l10619" /><CodeLine lineNumber="10619"><Highlight kind="normal">                       DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a89166b38f12c0bd3e8a61d8f1a5a8bc8">ISD::USUBSAT</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, Op1, Op0));</Highlight></CodeLine>
<Link id="l10620" /><CodeLine lineNumber="10620"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10621" /><CodeLine lineNumber="10621"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10622" /><CodeLine lineNumber="10622"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: Should really try to split the vector in case it&#39;s legal on a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10623" /><CodeLine lineNumber="10623"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// subvector.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10624" /><CodeLine lineNumber="10624"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0b7d2c769fd0fbaab3c4a2fc8e7ea0c">ISD::VSELECT</a>, VT))</Highlight></CodeLine>
<Link id="l10625" /><CodeLine lineNumber="10625"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a305a3a4874c597243cd5ba04af01339e">UnrollVectorOp</a>(Node);</Highlight></CodeLine>
<Link id="l10626" /><CodeLine lineNumber="10626"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10627" /><CodeLine lineNumber="10627"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Attempt to find an existing SETCC node that we can reuse.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10628" /><CodeLine lineNumber="10628"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: Do we need a generic doesSETCCNodeExist?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10629" /><CodeLine lineNumber="10629"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TODO: Missing freeze(Op0)/freeze(Op1)?</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10630" /><CodeLine lineNumber="10630"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> buildMinMax = &#91;&amp;&#93;(<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> PrefCC, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> AltCC,</Highlight></CodeLine>
<Link id="l10631" /><CodeLine lineNumber="10631"><Highlight kind="normal">                         <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> PrefCommuteCC,</Highlight></CodeLine>
<Link id="l10632" /><CodeLine lineNumber="10632"><Highlight kind="normal">                         <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> AltCommuteCC) &#123;</Highlight></CodeLine>
<Link id="l10633" /><CodeLine lineNumber="10633"><Highlight kind="normal">    SDVTList BoolVTList = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(BoolVT);</Highlight></CodeLine>
<Link id="l10634" /><CodeLine lineNumber="10634"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> : &#123;PrefCC, AltCC&#125;) &#123;</Highlight></CodeLine>
<Link id="l10635" /><CodeLine lineNumber="10635"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DAG.<a href="/docs/api/classes/llvm/selectiondag/#a74d7d9a331f1d1e05a16d9ae96e3f602">doesNodeExist</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0158ee47dfa868be5d28e2cbef70d5d0">ISD::SETCC</a>, BoolVTList,</Highlight></CodeLine>
<Link id="l10636" /><CodeLine lineNumber="10636"><Highlight kind="normal">                            &#123;Op0, Op1, DAG.getCondCode(CC)&#125;)) &#123;</Highlight></CodeLine>
<Link id="l10637" /><CodeLine lineNumber="10637"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, BoolVT, Op0, Op1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>);</Highlight></CodeLine>
<Link id="l10638" /><CodeLine lineNumber="10638"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, Op0, Op1);</Highlight></CodeLine>
<Link id="l10639" /><CodeLine lineNumber="10639"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l10640" /><CodeLine lineNumber="10640"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l10641" /><CodeLine lineNumber="10641"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> : &#123;PrefCommuteCC, AltCommuteCC&#125;) &#123;</Highlight></CodeLine>
<Link id="l10642" /><CodeLine lineNumber="10642"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DAG.<a href="/docs/api/classes/llvm/selectiondag/#a74d7d9a331f1d1e05a16d9ae96e3f602">doesNodeExist</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a0158ee47dfa868be5d28e2cbef70d5d0">ISD::SETCC</a>, BoolVTList,</Highlight></CodeLine>
<Link id="l10643" /><CodeLine lineNumber="10643"><Highlight kind="normal">                            &#123;Op0, Op1, DAG.getCondCode(CC)&#125;)) &#123;</Highlight></CodeLine>
<Link id="l10644" /><CodeLine lineNumber="10644"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, BoolVT, Op0, Op1, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>);</Highlight></CodeLine>
<Link id="l10645" /><CodeLine lineNumber="10645"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, Op1, Op0);</Highlight></CodeLine>
<Link id="l10646" /><CodeLine lineNumber="10646"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l10647" /><CodeLine lineNumber="10647"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l10648" /><CodeLine lineNumber="10648"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, BoolVT, Op0, Op1, PrefCC);</Highlight></CodeLine>
<Link id="l10649" /><CodeLine lineNumber="10649"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, Op0, Op1);</Highlight></CodeLine>
<Link id="l10650" /><CodeLine lineNumber="10650"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l10651" /><CodeLine lineNumber="10651"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10652" /><CodeLine lineNumber="10652"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Expand Y = MAX(A, B) -&gt; Y = (A &gt; B) ? A : B</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10653" /><CodeLine lineNumber="10653"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//                      -&gt; Y = (A &lt; B) ? B : A</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10654" /><CodeLine lineNumber="10654"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//                      -&gt; Y = (A &gt;= B) ? A : B</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10655" /><CodeLine lineNumber="10655"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//                      -&gt; Y = (A &lt;= B) ? B : A</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10656" /><CodeLine lineNumber="10656"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (Opcode) &#123;</Highlight></CodeLine>
<Link id="l10657" /><CodeLine lineNumber="10657"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af3b59179b6fcbc89463181015ace8e9b">ISD::SMAX</a>:</Highlight></CodeLine>
<Link id="l10658" /><CodeLine lineNumber="10658"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> buildMinMax(<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a7f47862de23f7210f88ccf98ae1efbe4">ISD::SETGE</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ab49f81c2ecbbff3d0fbe55dd46353774">ISD::SETLE</a>);</Highlight></CodeLine>
<Link id="l10659" /><CodeLine lineNumber="10659"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaac895215ecbb3c411c957c8beb39b70">ISD::SMIN</a>:</Highlight></CodeLine>
<Link id="l10660" /><CodeLine lineNumber="10660"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> buildMinMax(<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ab49f81c2ecbbff3d0fbe55dd46353774">ISD::SETLE</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a7f47862de23f7210f88ccf98ae1efbe4">ISD::SETGE</a>);</Highlight></CodeLine>
<Link id="l10661" /><CodeLine lineNumber="10661"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af675e759c0ffff8d48ea14a60fe3517b">ISD::UMAX</a>:</Highlight></CodeLine>
<Link id="l10662" /><CodeLine lineNumber="10662"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> buildMinMax(<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">ISD::SETUGE</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a>);</Highlight></CodeLine>
<Link id="l10663" /><CodeLine lineNumber="10663"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a17126302da6199930e55e841ca1b082d">ISD::UMIN</a>:</Highlight></CodeLine>
<Link id="l10664" /><CodeLine lineNumber="10664"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> buildMinMax(<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">ISD::SETUGE</a>);</Highlight></CodeLine>
<Link id="l10665" /><CodeLine lineNumber="10665"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10666" /><CodeLine lineNumber="10666"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10667" /><CodeLine lineNumber="10667"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;How did we get here?&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10668" /><CodeLine lineNumber="10668"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l10669" /><CodeLine lineNumber="10669"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10670" /><CodeLine lineNumber="10670"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#afcc11ebf4e4f4b44bd9bfb47b73ecaf5">TargetLowering::expandAddSubSat</a>(SDNode &#42;Node, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l10671" /><CodeLine lineNumber="10671"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opcode = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode();</Highlight></CodeLine>
<Link id="l10672" /><CodeLine lineNumber="10672"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l10673" /><CodeLine lineNumber="10673"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l10674" /><CodeLine lineNumber="10674"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getValueType();</Highlight></CodeLine>
<Link id="l10675" /><CodeLine lineNumber="10675"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l10676" /><CodeLine lineNumber="10676"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10677" /><CodeLine lineNumber="10677"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VT == <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.getValueType() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Expected operands to be the same type&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10678" /><CodeLine lineNumber="10678"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VT.<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Expected operands to be integers&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10679" /><CodeLine lineNumber="10679"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10680" /><CodeLine lineNumber="10680"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// usub.sat(a, b) -&gt; umax(a, b) - b</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10681" /><CodeLine lineNumber="10681"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a89166b38f12c0bd3e8a61d8f1a5a8bc8">ISD::USUBSAT</a> &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af675e759c0ffff8d48ea14a60fe3517b">ISD::UMAX</a>, VT)) &#123;</Highlight></CodeLine>
<Link id="l10682" /><CodeLine lineNumber="10682"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/pdb/#a81a0fae24e6bdfe240da4249a8da5978a6a061313d22e51e0f25b7cd4dc065233">Max</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af675e759c0ffff8d48ea14a60fe3517b">ISD::UMAX</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l10683" /><CodeLine lineNumber="10683"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, Max, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l10684" /><CodeLine lineNumber="10684"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10685" /><CodeLine lineNumber="10685"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10686" /><CodeLine lineNumber="10686"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// uadd.sat(a, b) -&gt; umin(a, ~b) + b</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10687" /><CodeLine lineNumber="10687"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5e433873c201ad85c30e42da1ae05977">ISD::UADDSAT</a> &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a17126302da6199930e55e841ca1b082d">ISD::UMIN</a>, VT)) &#123;</Highlight></CodeLine>
<Link id="l10688" /><CodeLine lineNumber="10688"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> InvRHS = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(dl, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, VT);</Highlight></CodeLine>
<Link id="l10689" /><CodeLine lineNumber="10689"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Min = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a17126302da6199930e55e841ca1b082d">ISD::UMIN</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, InvRHS);</Highlight></CodeLine>
<Link id="l10690" /><CodeLine lineNumber="10690"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, Min, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l10691" /><CodeLine lineNumber="10691"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10692" /><CodeLine lineNumber="10692"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10693" /><CodeLine lineNumber="10693"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> OverflowOp;</Highlight></CodeLine>
<Link id="l10694" /><CodeLine lineNumber="10694"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (Opcode) &#123;</Highlight></CodeLine>
<Link id="l10695" /><CodeLine lineNumber="10695"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af1b946afff631cee7aa6de570bef7785">ISD::SADDSAT</a>:</Highlight></CodeLine>
<Link id="l10696" /><CodeLine lineNumber="10696"><Highlight kind="normal">    OverflowOp = <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a863ec6ebb75bf89cfea14da646d77e92">ISD::SADDO</a>;</Highlight></CodeLine>
<Link id="l10697" /><CodeLine lineNumber="10697"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l10698" /><CodeLine lineNumber="10698"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5e433873c201ad85c30e42da1ae05977">ISD::UADDSAT</a>:</Highlight></CodeLine>
<Link id="l10699" /><CodeLine lineNumber="10699"><Highlight kind="normal">    OverflowOp = <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1ddf36330110b4abea43fe390bea9ef9">ISD::UADDO</a>;</Highlight></CodeLine>
<Link id="l10700" /><CodeLine lineNumber="10700"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l10701" /><CodeLine lineNumber="10701"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a77984d86d70df1f3229da7a5119652a9">ISD::SSUBSAT</a>:</Highlight></CodeLine>
<Link id="l10702" /><CodeLine lineNumber="10702"><Highlight kind="normal">    OverflowOp = <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a6efe16ea597cfd8eeac26516fc992ee7">ISD::SSUBO</a>;</Highlight></CodeLine>
<Link id="l10703" /><CodeLine lineNumber="10703"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l10704" /><CodeLine lineNumber="10704"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a89166b38f12c0bd3e8a61d8f1a5a8bc8">ISD::USUBSAT</a>:</Highlight></CodeLine>
<Link id="l10705" /><CodeLine lineNumber="10705"><Highlight kind="normal">    OverflowOp = <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4ffc75d65231b55461c0ba4f36a3e500">ISD::USUBO</a>;</Highlight></CodeLine>
<Link id="l10706" /><CodeLine lineNumber="10706"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l10707" /><CodeLine lineNumber="10707"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l10708" /><CodeLine lineNumber="10708"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;Expected method to receive signed or unsigned saturation &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10709" /><CodeLine lineNumber="10709"><Highlight kind="normal">                     </Highlight><Highlight kind="stringliteral">&quot;addition or subtraction node.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10710" /><CodeLine lineNumber="10710"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10711" /><CodeLine lineNumber="10711"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10712" /><CodeLine lineNumber="10712"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: Should really try to split the vector in case it&#39;s legal on a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10713" /><CodeLine lineNumber="10713"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// subvector.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10714" /><CodeLine lineNumber="10714"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0b7d2c769fd0fbaab3c4a2fc8e7ea0c">ISD::VSELECT</a>, VT))</Highlight></CodeLine>
<Link id="l10715" /><CodeLine lineNumber="10715"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a305a3a4874c597243cd5ba04af01339e">UnrollVectorOp</a>(Node);</Highlight></CodeLine>
<Link id="l10716" /><CodeLine lineNumber="10716"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10717" /><CodeLine lineNumber="10717"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getScalarValueSizeInBits();</Highlight></CodeLine>
<Link id="l10718" /><CodeLine lineNumber="10718"><Highlight kind="normal">  EVT BoolVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l10719" /><CodeLine lineNumber="10719"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(OverflowOp, dl, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(VT, BoolVT), <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l10720" /><CodeLine lineNumber="10720"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SumDiff = <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getValue(0);</Highlight></CodeLine>
<Link id="l10721" /><CodeLine lineNumber="10721"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Overflow = <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getValue(1);</Highlight></CodeLine>
<Link id="l10722" /><CodeLine lineNumber="10722"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, VT);</Highlight></CodeLine>
<Link id="l10723" /><CodeLine lineNumber="10723"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9">AllOnes</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1b134112bb3b8986d8082832a16eab6f">getAllOnesConstant</a>(dl, VT);</Highlight></CodeLine>
<Link id="l10724" /><CodeLine lineNumber="10724"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10725" /><CodeLine lineNumber="10725"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5e433873c201ad85c30e42da1ae05977">ISD::UADDSAT</a>) &#123;</Highlight></CodeLine>
<Link id="l10726" /><CodeLine lineNumber="10726"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(VT) == <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a695a19c9c3ae14638be151add82755cb">ZeroOrNegativeOneBooleanContent</a>) &#123;</Highlight></CodeLine>
<Link id="l10727" /><CodeLine lineNumber="10727"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// (LHS + RHS) | OverflowMask</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10728" /><CodeLine lineNumber="10728"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> OverflowMask = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a9c2450d7d33fb2ecb9b645f1ca6a9a64">getSExtOrTrunc</a>(Overflow, dl, VT);</Highlight></CodeLine>
<Link id="l10729" /><CodeLine lineNumber="10729"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, VT, SumDiff, OverflowMask);</Highlight></CodeLine>
<Link id="l10730" /><CodeLine lineNumber="10730"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l10731" /><CodeLine lineNumber="10731"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Overflow ? 0xffff.... : (LHS + RHS)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10732" /><CodeLine lineNumber="10732"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, VT, Overflow, <a href="/docs/api/namespaces/llvm/#af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9">AllOnes</a>, SumDiff);</Highlight></CodeLine>
<Link id="l10733" /><CodeLine lineNumber="10733"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10734" /><CodeLine lineNumber="10734"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10735" /><CodeLine lineNumber="10735"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a89166b38f12c0bd3e8a61d8f1a5a8bc8">ISD::USUBSAT</a>) &#123;</Highlight></CodeLine>
<Link id="l10736" /><CodeLine lineNumber="10736"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(VT) == <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a695a19c9c3ae14638be151add82755cb">ZeroOrNegativeOneBooleanContent</a>) &#123;</Highlight></CodeLine>
<Link id="l10737" /><CodeLine lineNumber="10737"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// (LHS - RHS) &amp; ~OverflowMask</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10738" /><CodeLine lineNumber="10738"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> OverflowMask = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a9c2450d7d33fb2ecb9b645f1ca6a9a64">getSExtOrTrunc</a>(Overflow, dl, VT);</Highlight></CodeLine>
<Link id="l10739" /><CodeLine lineNumber="10739"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/sdpatternmatch/#aee6b56ccafeac80e7ebd6b84ee5048c1">Not</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(dl, OverflowMask, VT);</Highlight></CodeLine>
<Link id="l10740" /><CodeLine lineNumber="10740"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, SumDiff, Not);</Highlight></CodeLine>
<Link id="l10741" /><CodeLine lineNumber="10741"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l10742" /><CodeLine lineNumber="10742"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Overflow ? 0 : (LHS - RHS)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10743" /><CodeLine lineNumber="10743"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, VT, Overflow, Zero, SumDiff);</Highlight></CodeLine>
<Link id="l10744" /><CodeLine lineNumber="10744"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10745" /><CodeLine lineNumber="10745"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10746" /><CodeLine lineNumber="10746"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af1b946afff631cee7aa6de570bef7785">ISD::SADDSAT</a> || Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a77984d86d70df1f3229da7a5119652a9">ISD::SSUBSAT</a>) &#123;</Highlight></CodeLine>
<Link id="l10747" /><CodeLine lineNumber="10747"><Highlight kind="normal">    APInt MinVal = <a href="/docs/api/classes/llvm/apint/#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l10748" /><CodeLine lineNumber="10748"><Highlight kind="normal">    APInt MaxVal = <a href="/docs/api/classes/llvm/apint/#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l10749" /><CodeLine lineNumber="10749"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10750" /><CodeLine lineNumber="10750"><Highlight kind="normal">    KnownBits KnownLHS = DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</Highlight></CodeLine>
<Link id="l10751" /><CodeLine lineNumber="10751"><Highlight kind="normal">    KnownBits KnownRHS = DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l10752" /><CodeLine lineNumber="10752"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10753" /><CodeLine lineNumber="10753"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If either of the operand signs are known, then they are guaranteed to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10754" /><CodeLine lineNumber="10754"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// only saturate in one direction. If non-negative they will saturate</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10755" /><CodeLine lineNumber="10755"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// towards SIGNED&#95;MAX, if negative they will saturate towards SIGNED&#95;MIN.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10756" /><CodeLine lineNumber="10756"><Highlight kind="normal">    </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10757" /><CodeLine lineNumber="10757"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// In the case of ISD::SSUBSAT, &#39;x - y&#39; is equivalent to &#39;x + (-y)&#39;, so the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10758" /><CodeLine lineNumber="10758"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// sign of &#39;y&#39; has to be flipped.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10759" /><CodeLine lineNumber="10759"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10760" /><CodeLine lineNumber="10760"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> LHSIsNonNegative = KnownLHS.<a href="/docs/api/structs/llvm/knownbits/#a157efd68e8b4b838829cad165b1583f8">isNonNegative</a>();</Highlight></CodeLine>
<Link id="l10761" /><CodeLine lineNumber="10761"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> RHSIsNonNegative = Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af1b946afff631cee7aa6de570bef7785">ISD::SADDSAT</a> ? KnownRHS.<a href="/docs/api/structs/llvm/knownbits/#a157efd68e8b4b838829cad165b1583f8">isNonNegative</a>()</Highlight></CodeLine>
<Link id="l10762" /><CodeLine lineNumber="10762"><Highlight kind="normal">                                                   : KnownRHS.<a href="/docs/api/structs/llvm/knownbits/#aabc0af41b4437080b27002ed7a1ed656">isNegative</a>();</Highlight></CodeLine>
<Link id="l10763" /><CodeLine lineNumber="10763"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LHSIsNonNegative || RHSIsNonNegative) &#123;</Highlight></CodeLine>
<Link id="l10764" /><CodeLine lineNumber="10764"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SatMax = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(MaxVal, dl, VT);</Highlight></CodeLine>
<Link id="l10765" /><CodeLine lineNumber="10765"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, VT, Overflow, SatMax, SumDiff);</Highlight></CodeLine>
<Link id="l10766" /><CodeLine lineNumber="10766"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l10767" /><CodeLine lineNumber="10767"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10768" /><CodeLine lineNumber="10768"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> LHSIsNegative = KnownLHS.<a href="/docs/api/structs/llvm/knownbits/#aabc0af41b4437080b27002ed7a1ed656">isNegative</a>();</Highlight></CodeLine>
<Link id="l10769" /><CodeLine lineNumber="10769"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> RHSIsNegative = Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af1b946afff631cee7aa6de570bef7785">ISD::SADDSAT</a> ? KnownRHS.<a href="/docs/api/structs/llvm/knownbits/#aabc0af41b4437080b27002ed7a1ed656">isNegative</a>()</Highlight></CodeLine>
<Link id="l10770" /><CodeLine lineNumber="10770"><Highlight kind="normal">                                                : KnownRHS.<a href="/docs/api/structs/llvm/knownbits/#a157efd68e8b4b838829cad165b1583f8">isNonNegative</a>();</Highlight></CodeLine>
<Link id="l10771" /><CodeLine lineNumber="10771"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LHSIsNegative || RHSIsNegative) &#123;</Highlight></CodeLine>
<Link id="l10772" /><CodeLine lineNumber="10772"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SatMin = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(MinVal, dl, VT);</Highlight></CodeLine>
<Link id="l10773" /><CodeLine lineNumber="10773"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, VT, Overflow, SatMin, SumDiff);</Highlight></CodeLine>
<Link id="l10774" /><CodeLine lineNumber="10774"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l10775" /><CodeLine lineNumber="10775"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10776" /><CodeLine lineNumber="10776"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10777" /><CodeLine lineNumber="10777"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Overflow ? (SumDiff &gt;&gt; BW) ^ MinVal : SumDiff</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10778" /><CodeLine lineNumber="10778"><Highlight kind="normal">  APInt MinVal = <a href="/docs/api/classes/llvm/apint/#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</Highlight></CodeLine>
<Link id="l10779" /><CodeLine lineNumber="10779"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SatMin = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(MinVal, dl, VT);</Highlight></CodeLine>
<Link id="l10780" /><CodeLine lineNumber="10780"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Shift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>, dl, VT, SumDiff,</Highlight></CodeLine>
<Link id="l10781" /><CodeLine lineNumber="10781"><Highlight kind="normal">                              DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/namespaces/llvm/#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - 1, dl, VT));</Highlight></CodeLine>
<Link id="l10782" /><CodeLine lineNumber="10782"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, VT, Shift, SatMin);</Highlight></CodeLine>
<Link id="l10783" /><CodeLine lineNumber="10783"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, VT, Overflow, Result, SumDiff);</Highlight></CodeLine>
<Link id="l10784" /><CodeLine lineNumber="10784"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l10785" /><CodeLine lineNumber="10785"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10786" /><CodeLine lineNumber="10786"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a80a2ce744686eaa8a78e89a0274802f0">TargetLowering::expandCMP</a>(SDNode &#42;Node, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l10787" /><CodeLine lineNumber="10787"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opcode = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode();</Highlight></CodeLine>
<Link id="l10788" /><CodeLine lineNumber="10788"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l10789" /><CodeLine lineNumber="10789"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l10790" /><CodeLine lineNumber="10790"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getValueType();</Highlight></CodeLine>
<Link id="l10791" /><CodeLine lineNumber="10791"><Highlight kind="normal">  EVT ResVT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l10792" /><CodeLine lineNumber="10792"><Highlight kind="normal">  EVT BoolVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l10793" /><CodeLine lineNumber="10793"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l10794" /><CodeLine lineNumber="10794"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10795" /><CodeLine lineNumber="10795"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> LTPredicate = (Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a482ae65625bd4d6059f7259b88ac4dbc">ISD::UCMP</a> ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l10796" /><CodeLine lineNumber="10796"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> GTPredicate = (Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a482ae65625bd4d6059f7259b88ac4dbc">ISD::UCMP</a> ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a>);</Highlight></CodeLine>
<Link id="l10797" /><CodeLine lineNumber="10797"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IsLT = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, BoolVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, LTPredicate);</Highlight></CodeLine>
<Link id="l10798" /><CodeLine lineNumber="10798"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IsGT = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, BoolVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, GTPredicate);</Highlight></CodeLine>
<Link id="l10799" /><CodeLine lineNumber="10799"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10800" /><CodeLine lineNumber="10800"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We can&#39;t perform arithmetic on i1 values. Extending them would</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10801" /><CodeLine lineNumber="10801"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// probably result in worse codegen, so let&#39;s just use two selects instead.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10802" /><CodeLine lineNumber="10802"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Some targets are also just better off using selects rather than subtraction</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10803" /><CodeLine lineNumber="10803"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// because one of the conditions can be merged with one of the selects.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10804" /><CodeLine lineNumber="10804"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// And finally, if we don&#39;t know the contents of high bits of a boolean value</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10805" /><CodeLine lineNumber="10805"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// we can&#39;t perform any arithmetic either.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10806" /><CodeLine lineNumber="10806"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a62fedb26dfce74fc1cbd526e6f9db64c">shouldExpandCmpUsingSelects</a>(VT) || BoolVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>() == 1 ||</Highlight></CodeLine>
<Link id="l10807" /><CodeLine lineNumber="10807"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(BoolVT) == <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a145391af8fd5e5455ffa3170c2d701ce">UndefinedBooleanContent</a>) &#123;</Highlight></CodeLine>
<Link id="l10808" /><CodeLine lineNumber="10808"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SelectZeroOrOne =</Highlight></CodeLine>
<Link id="l10809" /><CodeLine lineNumber="10809"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, ResVT, IsGT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, ResVT),</Highlight></CodeLine>
<Link id="l10810" /><CodeLine lineNumber="10810"><Highlight kind="normal">                      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, ResVT));</Highlight></CodeLine>
<Link id="l10811" /><CodeLine lineNumber="10811"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, ResVT, IsLT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1b134112bb3b8986d8082832a16eab6f">getAllOnesConstant</a>(dl, ResVT),</Highlight></CodeLine>
<Link id="l10812" /><CodeLine lineNumber="10812"><Highlight kind="normal">                         SelectZeroOrOne);</Highlight></CodeLine>
<Link id="l10813" /><CodeLine lineNumber="10813"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10814" /><CodeLine lineNumber="10814"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10815" /><CodeLine lineNumber="10815"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a79adbcc34e24b86ef8a216a34ccf5af8">getBooleanContents</a>(BoolVT) == <a href="/docs/api/classes/llvm/targetloweringbase/#aa61af767c51a95e2dd0dff2001168755a695a19c9c3ae14638be151add82755cb">ZeroOrNegativeOneBooleanContent</a>)</Highlight></CodeLine>
<Link id="l10816" /><CodeLine lineNumber="10816"><Highlight kind="normal">    <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(IsGT, IsLT);</Highlight></CodeLine>
<Link id="l10817" /><CodeLine lineNumber="10817"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a9c2450d7d33fb2ecb9b645f1ca6a9a64">getSExtOrTrunc</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, BoolVT, IsGT, IsLT), dl,</Highlight></CodeLine>
<Link id="l10818" /><CodeLine lineNumber="10818"><Highlight kind="normal">                            ResVT);</Highlight></CodeLine>
<Link id="l10819" /><CodeLine lineNumber="10819"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l10820" /><CodeLine lineNumber="10820"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10821" /><CodeLine lineNumber="10821"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a25374963a6923b45451d8fae2fd7a841">TargetLowering::expandShlSat</a>(SDNode &#42;Node, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l10822" /><CodeLine lineNumber="10822"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opcode = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode();</Highlight></CodeLine>
<Link id="l10823" /><CodeLine lineNumber="10823"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsSigned = Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aa30a145a99902daca036d039378abca2">ISD::SSHLSAT</a>;</Highlight></CodeLine>
<Link id="l10824" /><CodeLine lineNumber="10824"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l10825" /><CodeLine lineNumber="10825"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l10826" /><CodeLine lineNumber="10826"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getValueType();</Highlight></CodeLine>
<Link id="l10827" /><CodeLine lineNumber="10827"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l10828" /><CodeLine lineNumber="10828"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10829" /><CodeLine lineNumber="10829"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aa30a145a99902daca036d039378abca2">ISD::SSHLSAT</a> ||</Highlight></CodeLine>
<Link id="l10830" /><CodeLine lineNumber="10830"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5ae4b108d3f627b66f3b1e5da51f4587">ISD::USHLSAT</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l10831" /><CodeLine lineNumber="10831"><Highlight kind="normal">          </Highlight><Highlight kind="stringliteral">&quot;Expected a SHLSAT opcode&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10832" /><CodeLine lineNumber="10832"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VT == <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.getValueType() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Expected operands to be the same type&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10833" /><CodeLine lineNumber="10833"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VT.<a href="/docs/api/structs/llvm/evt/#af975bf04c49cc895cfe38e7dc126a2f1">isInteger</a>() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Expected operands to be integers&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10834" /><CodeLine lineNumber="10834"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10835" /><CodeLine lineNumber="10835"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() &amp;&amp; !<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0b7d2c769fd0fbaab3c4a2fc8e7ea0c">ISD::VSELECT</a>, VT))</Highlight></CodeLine>
<Link id="l10836" /><CodeLine lineNumber="10836"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a305a3a4874c597243cd5ba04af01339e">UnrollVectorOp</a>(Node);</Highlight></CodeLine>
<Link id="l10837" /><CodeLine lineNumber="10837"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10838" /><CodeLine lineNumber="10838"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If LHS != (LHS &lt;&lt; RHS) &gt;&gt; RHS, we have overflow and must saturate.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10839" /><CodeLine lineNumber="10839"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10840" /><CodeLine lineNumber="10840"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> BW = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l10841" /><CodeLine lineNumber="10841"><Highlight kind="normal">  EVT BoolVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l10842" /><CodeLine lineNumber="10842"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l10843" /><CodeLine lineNumber="10843"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Orig =</Highlight></CodeLine>
<Link id="l10844" /><CodeLine lineNumber="10844"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(IsSigned ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, Result, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l10845" /><CodeLine lineNumber="10845"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10846" /><CodeLine lineNumber="10846"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SatVal;</Highlight></CodeLine>
<Link id="l10847" /><CodeLine lineNumber="10847"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsSigned) &#123;</Highlight></CodeLine>
<Link id="l10848" /><CodeLine lineNumber="10848"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SatMin = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(BW), dl, VT);</Highlight></CodeLine>
<Link id="l10849" /><CodeLine lineNumber="10849"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SatMax = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(BW), dl, VT);</Highlight></CodeLine>
<Link id="l10850" /><CodeLine lineNumber="10850"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> =</Highlight></CodeLine>
<Link id="l10851" /><CodeLine lineNumber="10851"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, BoolVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, VT), <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l10852" /><CodeLine lineNumber="10852"><Highlight kind="normal">    SatVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, SatMin, SatMax);</Highlight></CodeLine>
<Link id="l10853" /><CodeLine lineNumber="10853"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l10854" /><CodeLine lineNumber="10854"><Highlight kind="normal">    SatVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#a331d69b5f93e47e7c596062b77dd5913">APInt::getMaxValue</a>(BW), dl, VT);</Highlight></CodeLine>
<Link id="l10855" /><CodeLine lineNumber="10855"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10856" /><CodeLine lineNumber="10856"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, BoolVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Orig, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>);</Highlight></CodeLine>
<Link id="l10857" /><CodeLine lineNumber="10857"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, SatVal, Result);</Highlight></CodeLine>
<Link id="l10858" /><CodeLine lineNumber="10858"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l10859" /><CodeLine lineNumber="10859"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10860" /><CodeLine lineNumber="10860"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a7fc58a8c37cc23c116a72bc282fe9972">TargetLowering::forceExpandMultiply</a>(SelectionDAG &amp;DAG, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;dl,</Highlight></CodeLine>
<Link id="l10861" /><CodeLine lineNumber="10861"><Highlight kind="normal">                                         </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>,</Highlight></CodeLine>
<Link id="l10862" /><CodeLine lineNumber="10862"><Highlight kind="normal">                                         <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</Highlight></CodeLine>
<Link id="l10863" /><CodeLine lineNumber="10863"><Highlight kind="normal">                                         <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> HiLHS, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> HiRHS)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l10864" /><CodeLine lineNumber="10864"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getValueType();</Highlight></CodeLine>
<Link id="l10865" /><CodeLine lineNumber="10865"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.getValueType() == VT &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Mismatching operand types&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10866" /><CodeLine lineNumber="10866"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10867" /><CodeLine lineNumber="10867"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((HiLHS &amp;&amp; HiRHS) || (!HiLHS &amp;&amp; !HiRHS));</Highlight></CodeLine>
<Link id="l10868" /><CodeLine lineNumber="10868"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> || !HiLHS) &amp;&amp;</Highlight></CodeLine>
<Link id="l10869" /><CodeLine lineNumber="10869"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Signed flag should only be set when HiLHS and RiRHS are null&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10870" /><CodeLine lineNumber="10870"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10871" /><CodeLine lineNumber="10871"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We&#39;ll expand the multiplication by brute force because we have no other</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10872" /><CodeLine lineNumber="10872"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// options. This is a trivially-generalized version of the code from</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10873" /><CodeLine lineNumber="10873"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Hacker&#39;s Delight (itself derived from Knuth&#39;s Algorithm M from section</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10874" /><CodeLine lineNumber="10874"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// 4.3.1). If Signed is set, we can use arithmetic right shifts to propagate</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10875" /><CodeLine lineNumber="10875"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// sign bits while calculating the Hi half.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10876" /><CodeLine lineNumber="10876"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/tgtok/#abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95">Bits</a> = VT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>();</Highlight></CodeLine>
<Link id="l10877" /><CodeLine lineNumber="10877"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> HalfBits = <a href="/docs/api/namespaces/llvm/tgtok/#abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95">Bits</a> / 2;</Highlight></CodeLine>
<Link id="l10878" /><CodeLine lineNumber="10878"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(Bits, HalfBits), dl, VT);</Highlight></CodeLine>
<Link id="l10879" /><CodeLine lineNumber="10879"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LL = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Mask);</Highlight></CodeLine>
<Link id="l10880" /><CodeLine lineNumber="10880"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> RL = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Mask);</Highlight></CodeLine>
<Link id="l10881" /><CodeLine lineNumber="10881"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10882" /><CodeLine lineNumber="10882"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/mips/mips16isellowering-cpp/#a0acb682b8260ab1c60b918599864e2e5">T</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, VT, LL, RL);</Highlight></CodeLine>
<Link id="l10883" /><CodeLine lineNumber="10883"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TL = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/mips/mips16isellowering-cpp/#a0acb682b8260ab1c60b918599864e2e5">T</a>, Mask);</Highlight></CodeLine>
<Link id="l10884" /><CodeLine lineNumber="10884"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10885" /><CodeLine lineNumber="10885"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Shift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(HalfBits, VT, dl);</Highlight></CodeLine>
<Link id="l10886" /><CodeLine lineNumber="10886"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This is always an unsigned shift.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10887" /><CodeLine lineNumber="10887"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/amdgpu/cpol/#a7d79a4b341da8ac60b91c1f4b1ea42c4ada8257c4b012c0b7ec22b9b95d8ce960">TH</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/mips/mips16isellowering-cpp/#a0acb682b8260ab1c60b918599864e2e5">T</a>, Shift);</Highlight></CodeLine>
<Link id="l10888" /><CodeLine lineNumber="10888"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10889" /><CodeLine lineNumber="10889"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/arm-am/#a76f5f9f36bbd9f03c844c5b565f239ef">ShiftOpc</a> = <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>;</Highlight></CodeLine>
<Link id="l10890" /><CodeLine lineNumber="10890"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LH = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ShiftOpc, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Shift);</Highlight></CodeLine>
<Link id="l10891" /><CodeLine lineNumber="10891"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> RH = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ShiftOpc, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Shift);</Highlight></CodeLine>
<Link id="l10892" /><CodeLine lineNumber="10892"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10893" /><CodeLine lineNumber="10893"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea4c614360da93c0a041b22e537de151eb">U</a> =</Highlight></CodeLine>
<Link id="l10894" /><CodeLine lineNumber="10894"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, VT, LH, RL), TH);</Highlight></CodeLine>
<Link id="l10895" /><CodeLine lineNumber="10895"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> UL = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, VT, U, Mask);</Highlight></CodeLine>
<Link id="l10896" /><CodeLine lineNumber="10896"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> UH = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ShiftOpc, dl, VT, U, Shift);</Highlight></CodeLine>
<Link id="l10897" /><CodeLine lineNumber="10897"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10898" /><CodeLine lineNumber="10898"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/m68k/#ab3a288f2953d8eca3e363959fc2cf38ea5206560a306a2e085a437fd258eb57ce">V</a> =</Highlight></CodeLine>
<Link id="l10899" /><CodeLine lineNumber="10899"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, VT, LL, RH), UL);</Highlight></CodeLine>
<Link id="l10900" /><CodeLine lineNumber="10900"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> VH = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ShiftOpc, dl, VT, V, Shift);</Highlight></CodeLine>
<Link id="l10901" /><CodeLine lineNumber="10901"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10902" /><CodeLine lineNumber="10902"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, TL,</Highlight></CodeLine>
<Link id="l10903" /><CodeLine lineNumber="10903"><Highlight kind="normal">                   DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, V, Shift));</Highlight></CodeLine>
<Link id="l10904" /><CodeLine lineNumber="10904"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10905" /><CodeLine lineNumber="10905"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, VT, LH, RH),</Highlight></CodeLine>
<Link id="l10906" /><CodeLine lineNumber="10906"><Highlight kind="normal">                   DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, UH, VH));</Highlight></CodeLine>
<Link id="l10907" /><CodeLine lineNumber="10907"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10908" /><CodeLine lineNumber="10908"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If HiLHS and HiRHS are set, multiply them by the opposite low part and add</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10909" /><CodeLine lineNumber="10909"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the products to Hi.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10910" /><CodeLine lineNumber="10910"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (HiLHS) &#123;</Highlight></CodeLine>
<Link id="l10911" /><CodeLine lineNumber="10911"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>,</Highlight></CodeLine>
<Link id="l10912" /><CodeLine lineNumber="10912"><Highlight kind="normal">                     DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, VT,</Highlight></CodeLine>
<Link id="l10913" /><CodeLine lineNumber="10913"><Highlight kind="normal">                                 DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, VT, HiRHS, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>),</Highlight></CodeLine>
<Link id="l10914" /><CodeLine lineNumber="10914"><Highlight kind="normal">                                 DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, HiLHS)));</Highlight></CodeLine>
<Link id="l10915" /><CodeLine lineNumber="10915"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10916" /><CodeLine lineNumber="10916"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l10917" /><CodeLine lineNumber="10917"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10918" /><CodeLine lineNumber="10918"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a5693e1f9607ffe47618c90830bb5d919">TargetLowering::forceExpandWideMUL</a>(SelectionDAG &amp;DAG, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;dl,</Highlight></CodeLine>
<Link id="l10919" /><CodeLine lineNumber="10919"><Highlight kind="normal">                                        </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</Highlight></CodeLine>
<Link id="l10920" /><CodeLine lineNumber="10920"><Highlight kind="normal">                                        </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>,</Highlight></CodeLine>
<Link id="l10921" /><CodeLine lineNumber="10921"><Highlight kind="normal">                                        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l10922" /><CodeLine lineNumber="10922"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getValueType();</Highlight></CodeLine>
<Link id="l10923" /><CodeLine lineNumber="10923"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.getValueType() == VT &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Mismatching operand types&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10924" /><CodeLine lineNumber="10924"><Highlight kind="normal">  EVT WideVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() &#42; 2);</Highlight></CodeLine>
<Link id="l10925" /><CodeLine lineNumber="10925"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We can fall back to a libcall with an illegal type for the MUL if we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10926" /><CodeLine lineNumber="10926"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// have a libcall big enough.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10927" /><CodeLine lineNumber="10927"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/rtlib/#a50a0bab21f1d14a86a1483ec283e4447">RTLIB::Libcall</a> LC = RTLIB::UNKNOWN&#95;LIBCALL;</Highlight></CodeLine>
<Link id="l10928" /><CodeLine lineNumber="10928"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (WideVT == MVT::i16)</Highlight></CodeLine>
<Link id="l10929" /><CodeLine lineNumber="10929"><Highlight kind="normal">    LC = RTLIB::MUL&#95;I16;</Highlight></CodeLine>
<Link id="l10930" /><CodeLine lineNumber="10930"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (WideVT == MVT::i32)</Highlight></CodeLine>
<Link id="l10931" /><CodeLine lineNumber="10931"><Highlight kind="normal">    LC = RTLIB::MUL&#95;I32;</Highlight></CodeLine>
<Link id="l10932" /><CodeLine lineNumber="10932"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (WideVT == MVT::i64)</Highlight></CodeLine>
<Link id="l10933" /><CodeLine lineNumber="10933"><Highlight kind="normal">    LC = RTLIB::MUL&#95;I64;</Highlight></CodeLine>
<Link id="l10934" /><CodeLine lineNumber="10934"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (WideVT == MVT::i128)</Highlight></CodeLine>
<Link id="l10935" /><CodeLine lineNumber="10935"><Highlight kind="normal">    LC = RTLIB::MUL&#95;I128;</Highlight></CodeLine>
<Link id="l10936" /><CodeLine lineNumber="10936"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10937" /><CodeLine lineNumber="10937"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LC == RTLIB::UNKNOWN&#95;LIBCALL || !<a href="/docs/api/classes/llvm/targetloweringbase/#ae365cf8f9a6844685be3fd9f12956c33">getLibcallName</a>(LC)) &#123;</Highlight></CodeLine>
<Link id="l10938" /><CodeLine lineNumber="10938"><Highlight kind="normal">    forceExpandMultiply(DAG, dl, <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l10939" /><CodeLine lineNumber="10939"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l10940" /><CodeLine lineNumber="10940"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10941" /><CodeLine lineNumber="10941"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10942" /><CodeLine lineNumber="10942"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> HiLHS, HiRHS;</Highlight></CodeLine>
<Link id="l10943" /><CodeLine lineNumber="10943"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>) &#123;</Highlight></CodeLine>
<Link id="l10944" /><CodeLine lineNumber="10944"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The high part is obtained by SRA&#39;ing all but one of the bits of low</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10945" /><CodeLine lineNumber="10945"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// part.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10946" /><CodeLine lineNumber="10946"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LoSize = VT.<a href="/docs/api/structs/llvm/evt/#a7712dd4392b7eb944b709ac8442634d9">getFixedSizeInBits</a>();</Highlight></CodeLine>
<Link id="l10947" /><CodeLine lineNumber="10947"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Shift = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(LoSize - 1, VT, dl);</Highlight></CodeLine>
<Link id="l10948" /><CodeLine lineNumber="10948"><Highlight kind="normal">    HiLHS = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Shift);</Highlight></CodeLine>
<Link id="l10949" /><CodeLine lineNumber="10949"><Highlight kind="normal">    HiRHS = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Shift);</Highlight></CodeLine>
<Link id="l10950" /><CodeLine lineNumber="10950"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l10951" /><CodeLine lineNumber="10951"><Highlight kind="normal">    HiLHS = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, VT);</Highlight></CodeLine>
<Link id="l10952" /><CodeLine lineNumber="10952"><Highlight kind="normal">    HiRHS = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, VT);</Highlight></CodeLine>
<Link id="l10953" /><CodeLine lineNumber="10953"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10954" /><CodeLine lineNumber="10954"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10955" /><CodeLine lineNumber="10955"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Attempt a libcall.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10956" /><CodeLine lineNumber="10956"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</Highlight></CodeLine>
<Link id="l10957" /><CodeLine lineNumber="10957"><Highlight kind="normal">  TargetLowering::MakeLibCallOptions CallOptions;</Highlight></CodeLine>
<Link id="l10958" /><CodeLine lineNumber="10958"><Highlight kind="normal">  CallOptions.<a href="/docs/api/structs/llvm/targetlowering/makelibcalloptions/#a610098a9bceabef8349fa1c9c936b305">setIsSigned</a>(<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>);</Highlight></CodeLine>
<Link id="l10959" /><CodeLine lineNumber="10959"><Highlight kind="normal">  CallOptions.<a href="/docs/api/structs/llvm/targetlowering/makelibcalloptions/#a18dc59bf0c115284fa1dc5449c6ad2b0">setIsPostTypeLegalization</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10960" /><CodeLine lineNumber="10960"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (shouldSplitFunctionArgumentsAsLittleEndian(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>())) &#123;</Highlight></CodeLine>
<Link id="l10961" /><CodeLine lineNumber="10961"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Halves of WideVT are packed into registers in different order</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10962" /><CodeLine lineNumber="10962"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// depending on platform endianness. This is usually handled by</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10963" /><CodeLine lineNumber="10963"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the C calling convention, but we can&#39;t defer to it in</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10964" /><CodeLine lineNumber="10964"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the legalizer.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10965" /><CodeLine lineNumber="10965"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/amdgpu/hsamd/kernel/key/#a1958a762261549463a280bac3274d6d5">Args</a>&#91;&#93; = &#123;<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, HiLHS, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, HiRHS&#125;;</Highlight></CodeLine>
<Link id="l10966" /><CodeLine lineNumber="10966"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = makeLibCall(DAG, LC, WideVT, Args, CallOptions, dl).first;</Highlight></CodeLine>
<Link id="l10967" /><CodeLine lineNumber="10967"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l10968" /><CodeLine lineNumber="10968"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/amdgpu/hsamd/kernel/key/#a1958a762261549463a280bac3274d6d5">Args</a>&#91;&#93; = &#123;HiLHS, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, HiRHS, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>&#125;;</Highlight></CodeLine>
<Link id="l10969" /><CodeLine lineNumber="10969"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = makeLibCall(DAG, LC, WideVT, Args, CallOptions, dl).first;</Highlight></CodeLine>
<Link id="l10970" /><CodeLine lineNumber="10970"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10971" /><CodeLine lineNumber="10971"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a01c94937492f3ac3fb1e0be8eb0b9ef1">ISD::MERGE&#95;VALUES</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l10972" /><CodeLine lineNumber="10972"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Ret value is a collection of constituent nodes holding result.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10973" /><CodeLine lineNumber="10973"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>().<a href="/docs/api/classes/llvm/datalayout/#a377365b0288a4d06a07e09252d7d583f">isLittleEndian</a>()) &#123;</Highlight></CodeLine>
<Link id="l10974" /><CodeLine lineNumber="10974"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Same as above.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10975" /><CodeLine lineNumber="10975"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l10976" /><CodeLine lineNumber="10976"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l10977" /><CodeLine lineNumber="10977"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l10978" /><CodeLine lineNumber="10978"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.getOperand(1);</Highlight></CodeLine>
<Link id="l10979" /><CodeLine lineNumber="10979"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.getOperand(0);</Highlight></CodeLine>
<Link id="l10980" /><CodeLine lineNumber="10980"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l10981" /><CodeLine lineNumber="10981"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l10982" /><CodeLine lineNumber="10982"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10983" /><CodeLine lineNumber="10983"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a></Highlight></CodeLine>
<Link id="l10984" /><CodeLine lineNumber="10984"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#a1a8a58df56ed203d8d45b4c79ea6baa2">TargetLowering::expandFixedPointMul</a>(SDNode &#42;Node, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l10985" /><CodeLine lineNumber="10985"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1a7f3f523e22ac3df6332e625289a7e6">ISD::SMULFIX</a> ||</Highlight></CodeLine>
<Link id="l10986" /><CodeLine lineNumber="10986"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a293cdca810c396f99a2bd63b017dd943">ISD::UMULFIX</a> ||</Highlight></CodeLine>
<Link id="l10987" /><CodeLine lineNumber="10987"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a26a7dd56cd899cec0a1f6d2443f91db4">ISD::SMULFIXSAT</a> ||</Highlight></CodeLine>
<Link id="l10988" /><CodeLine lineNumber="10988"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaab3219acc86e3b3a199effbb69aa07a">ISD::UMULFIXSAT</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l10989" /><CodeLine lineNumber="10989"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Expected a fixed point multiplication opcode&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l10990" /><CodeLine lineNumber="10990"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l10991" /><CodeLine lineNumber="10991"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l10992" /><CodeLine lineNumber="10992"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l10993" /><CodeLine lineNumber="10993"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l10994" /><CodeLine lineNumber="10994"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getValueType();</Highlight></CodeLine>
<Link id="l10995" /><CodeLine lineNumber="10995"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Scale = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getConstantOperandVal(2);</Highlight></CodeLine>
<Link id="l10996" /><CodeLine lineNumber="10996"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Saturating = (<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a26a7dd56cd899cec0a1f6d2443f91db4">ISD::SMULFIXSAT</a> ||</Highlight></CodeLine>
<Link id="l10997" /><CodeLine lineNumber="10997"><Highlight kind="normal">                     <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaab3219acc86e3b3a199effbb69aa07a">ISD::UMULFIXSAT</a>);</Highlight></CodeLine>
<Link id="l10998" /><CodeLine lineNumber="10998"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> = (<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1a7f3f523e22ac3df6332e625289a7e6">ISD::SMULFIX</a> ||</Highlight></CodeLine>
<Link id="l10999" /><CodeLine lineNumber="10999"><Highlight kind="normal">                 <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a26a7dd56cd899cec0a1f6d2443f91db4">ISD::SMULFIXSAT</a>);</Highlight></CodeLine>
<Link id="l11000" /><CodeLine lineNumber="11000"><Highlight kind="normal">  EVT BoolVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l11001" /><CodeLine lineNumber="11001"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> VTSize = VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l11002" /><CodeLine lineNumber="11002"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11003" /><CodeLine lineNumber="11003"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Scale) &#123;</Highlight></CodeLine>
<Link id="l11004" /><CodeLine lineNumber="11004"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// &#91;us&#93;mul.fix(a, b, 0) -&gt; mul(a, b)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11005" /><CodeLine lineNumber="11005"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Saturating) &#123;</Highlight></CodeLine>
<Link id="l11006" /><CodeLine lineNumber="11006"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, VT))</Highlight></CodeLine>
<Link id="l11007" /><CodeLine lineNumber="11007"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11008" /><CodeLine lineNumber="11008"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aa35d0a58fdded3d225d512a60aea0951">ISD::SMULO</a>, VT)) &#123;</Highlight></CodeLine>
<Link id="l11009" /><CodeLine lineNumber="11009"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> =</Highlight></CodeLine>
<Link id="l11010" /><CodeLine lineNumber="11010"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aa35d0a58fdded3d225d512a60aea0951">ISD::SMULO</a>, dl, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(VT, BoolVT), <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11011" /><CodeLine lineNumber="11011"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Product = <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getValue(0);</Highlight></CodeLine>
<Link id="l11012" /><CodeLine lineNumber="11012"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Overflow = <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getValue(1);</Highlight></CodeLine>
<Link id="l11013" /><CodeLine lineNumber="11013"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, VT);</Highlight></CodeLine>
<Link id="l11014" /><CodeLine lineNumber="11014"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11015" /><CodeLine lineNumber="11015"><Highlight kind="normal">      APInt MinVal = <a href="/docs/api/classes/llvm/apint/#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(VTSize);</Highlight></CodeLine>
<Link id="l11016" /><CodeLine lineNumber="11016"><Highlight kind="normal">      APInt MaxVal = <a href="/docs/api/classes/llvm/apint/#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(VTSize);</Highlight></CodeLine>
<Link id="l11017" /><CodeLine lineNumber="11017"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SatMin = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(MinVal, dl, VT);</Highlight></CodeLine>
<Link id="l11018" /><CodeLine lineNumber="11018"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SatMax = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(MaxVal, dl, VT);</Highlight></CodeLine>
<Link id="l11019" /><CodeLine lineNumber="11019"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Xor the inputs, if resulting sign bit is 0 the product will be</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11020" /><CodeLine lineNumber="11020"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// positive, else negative.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11021" /><CodeLine lineNumber="11021"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11022" /><CodeLine lineNumber="11022"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ProdNeg = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, BoolVT, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>, Zero, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l11023" /><CodeLine lineNumber="11023"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, VT, ProdNeg, SatMin, SatMax);</Highlight></CodeLine>
<Link id="l11024" /><CodeLine lineNumber="11024"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, VT, Overflow, Result, Product);</Highlight></CodeLine>
<Link id="l11025" /><CodeLine lineNumber="11025"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> &amp;&amp; <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7800622851751b8ae318b41f4096830e">ISD::UMULO</a>, VT)) &#123;</Highlight></CodeLine>
<Link id="l11026" /><CodeLine lineNumber="11026"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> =</Highlight></CodeLine>
<Link id="l11027" /><CodeLine lineNumber="11027"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7800622851751b8ae318b41f4096830e">ISD::UMULO</a>, dl, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(VT, BoolVT), <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11028" /><CodeLine lineNumber="11028"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Product = <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getValue(0);</Highlight></CodeLine>
<Link id="l11029" /><CodeLine lineNumber="11029"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Overflow = <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getValue(1);</Highlight></CodeLine>
<Link id="l11030" /><CodeLine lineNumber="11030"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11031" /><CodeLine lineNumber="11031"><Highlight kind="normal">      APInt MaxVal = <a href="/docs/api/classes/llvm/apint/#a331d69b5f93e47e7c596062b77dd5913">APInt::getMaxValue</a>(VTSize);</Highlight></CodeLine>
<Link id="l11032" /><CodeLine lineNumber="11032"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SatMax = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(MaxVal, dl, VT);</Highlight></CodeLine>
<Link id="l11033" /><CodeLine lineNumber="11033"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, VT, Overflow, SatMax, Product);</Highlight></CodeLine>
<Link id="l11034" /><CodeLine lineNumber="11034"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l11035" /><CodeLine lineNumber="11035"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11036" /><CodeLine lineNumber="11036"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11037" /><CodeLine lineNumber="11037"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(((<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> &amp;&amp; Scale &lt; VTSize) || (!<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> &amp;&amp; Scale &lt;= VTSize)) &amp;&amp;</Highlight></CodeLine>
<Link id="l11038" /><CodeLine lineNumber="11038"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Expected scale to be less than the number of bits if signed or at &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11039" /><CodeLine lineNumber="11039"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;most the number of bits if unsigned.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11040" /><CodeLine lineNumber="11040"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getValueType() == <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>.getValueType() &amp;&amp;</Highlight></CodeLine>
<Link id="l11041" /><CodeLine lineNumber="11041"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Expected both operands to be the same type&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11042" /><CodeLine lineNumber="11042"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11043" /><CodeLine lineNumber="11043"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Get the upper and lower bits of the result.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11044" /><CodeLine lineNumber="11044"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>;</Highlight></CodeLine>
<Link id="l11045" /><CodeLine lineNumber="11045"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LoHiOp = <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1354c6f8508d6cd697dc89a5d9a52dfd">ISD::SMUL&#95;LOHI</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a79c959df09509d7ff66d9b04bc40d18d">ISD::UMUL&#95;LOHI</a>;</Highlight></CodeLine>
<Link id="l11046" /><CodeLine lineNumber="11046"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> HiOp = <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aa2a7c3eccf06b41e4275bbeadb46d22e">ISD::MULHS</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8a80d3b085af08f0dce1724207ef99b5">ISD::MULHU</a>;</Highlight></CodeLine>
<Link id="l11047" /><CodeLine lineNumber="11047"><Highlight kind="normal">  EVT WideVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VTSize &#42; 2);</Highlight></CodeLine>
<Link id="l11048" /><CodeLine lineNumber="11048"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>())</Highlight></CodeLine>
<Link id="l11049" /><CodeLine lineNumber="11049"><Highlight kind="normal">    WideVT =</Highlight></CodeLine>
<Link id="l11050" /><CodeLine lineNumber="11050"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/evt/#a210ba6b43ba451b698857dd9de71bd15">EVT::getVectorVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), WideVT, VT.<a href="/docs/api/structs/llvm/evt/#a3d102abca1c9c95f36546dff2f39273b">getVectorElementCount</a>());</Highlight></CodeLine>
<Link id="l11051" /><CodeLine lineNumber="11051"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(LoHiOp, VT)) &#123;</Highlight></CodeLine>
<Link id="l11052" /><CodeLine lineNumber="11052"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(LoHiOp, dl, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(VT, VT), <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11053" /><CodeLine lineNumber="11053"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getValue(0);</Highlight></CodeLine>
<Link id="l11054" /><CodeLine lineNumber="11054"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>.getValue(1);</Highlight></CodeLine>
<Link id="l11055" /><CodeLine lineNumber="11055"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(HiOp, VT)) &#123;</Highlight></CodeLine>
<Link id="l11056" /><CodeLine lineNumber="11056"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11057" /><CodeLine lineNumber="11057"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(HiOp, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11058" /><CodeLine lineNumber="11058"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, WideVT)) &#123;</Highlight></CodeLine>
<Link id="l11059" /><CodeLine lineNumber="11059"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Try for a multiplication using a wider type.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11060" /><CodeLine lineNumber="11060"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba88a797f57846adb2c382b3732b471913">Ext</a> = <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5183f3d72924bc7c77ba8d3f5de9f602">ISD::SIGN&#95;EXTEND</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>;</Highlight></CodeLine>
<Link id="l11061" /><CodeLine lineNumber="11061"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LHSExt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(Ext, dl, WideVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</Highlight></CodeLine>
<Link id="l11062" /><CodeLine lineNumber="11062"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> RHSExt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(Ext, dl, WideVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11063" /><CodeLine lineNumber="11063"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Res = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, WideVT, LHSExt, RHSExt);</Highlight></CodeLine>
<Link id="l11064" /><CodeLine lineNumber="11064"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, VT, Res);</Highlight></CodeLine>
<Link id="l11065" /><CodeLine lineNumber="11065"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Shifted =</Highlight></CodeLine>
<Link id="l11066" /><CodeLine lineNumber="11066"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>, dl, WideVT, Res,</Highlight></CodeLine>
<Link id="l11067" /><CodeLine lineNumber="11067"><Highlight kind="normal">                    DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(VTSize, WideVT, dl));</Highlight></CodeLine>
<Link id="l11068" /><CodeLine lineNumber="11068"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, VT, Shifted);</Highlight></CodeLine>
<Link id="l11069" /><CodeLine lineNumber="11069"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>()) &#123;</Highlight></CodeLine>
<Link id="l11070" /><CodeLine lineNumber="11070"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l11071" /><CodeLine lineNumber="11071"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l11072" /><CodeLine lineNumber="11072"><Highlight kind="normal">    forceExpandWideMUL(DAG, dl, <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>);</Highlight></CodeLine>
<Link id="l11073" /><CodeLine lineNumber="11073"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11074" /><CodeLine lineNumber="11074"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11075" /><CodeLine lineNumber="11075"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Scale == VTSize)</Highlight></CodeLine>
<Link id="l11076" /><CodeLine lineNumber="11076"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Result is just the top half since we&#39;d be shifting by the width of the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11077" /><CodeLine lineNumber="11077"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// operand. Overflow impossible so this works for both UMULFIX and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11078" /><CodeLine lineNumber="11078"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// UMULFIXSAT.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11079" /><CodeLine lineNumber="11079"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>;</Highlight></CodeLine>
<Link id="l11080" /><CodeLine lineNumber="11080"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11081" /><CodeLine lineNumber="11081"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// The result will need to be shifted right by the scale since both operands</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11082" /><CodeLine lineNumber="11082"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// are scaled. The result is given to us in 2 halves, so we only want part of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11083" /><CodeLine lineNumber="11083"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// both in the result.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11084" /><CodeLine lineNumber="11084"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a874350de5b4f6b8f4db13940e17ed81b">ISD::FSHR</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>,</Highlight></CodeLine>
<Link id="l11085" /><CodeLine lineNumber="11085"><Highlight kind="normal">                               DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(Scale, VT, dl));</Highlight></CodeLine>
<Link id="l11086" /><CodeLine lineNumber="11086"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Saturating)</Highlight></CodeLine>
<Link id="l11087" /><CodeLine lineNumber="11087"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</Highlight></CodeLine>
<Link id="l11088" /><CodeLine lineNumber="11088"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11089" /><CodeLine lineNumber="11089"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>) &#123;</Highlight></CodeLine>
<Link id="l11090" /><CodeLine lineNumber="11090"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Unsigned overflow happened if the upper (VTSize - Scale) bits (of the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11091" /><CodeLine lineNumber="11091"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// widened multiplication) aren&#39;t all zeroes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11092" /><CodeLine lineNumber="11092"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11093" /><CodeLine lineNumber="11093"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Saturate to max if ((Hi &gt;&gt; Scale) != 0),</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11094" /><CodeLine lineNumber="11094"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// which is the same as if (Hi &gt; ((1 &lt;&lt; Scale) - 1))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11095" /><CodeLine lineNumber="11095"><Highlight kind="normal">    APInt MaxVal = <a href="/docs/api/classes/llvm/apint/#a331d69b5f93e47e7c596062b77dd5913">APInt::getMaxValue</a>(VTSize);</Highlight></CodeLine>
<Link id="l11096" /><CodeLine lineNumber="11096"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LowMask = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(VTSize, Scale),</Highlight></CodeLine>
<Link id="l11097" /><CodeLine lineNumber="11097"><Highlight kind="normal">                                      dl, VT);</Highlight></CodeLine>
<Link id="l11098" /><CodeLine lineNumber="11098"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab30ac12d744d55e5d9d8795b1ce53433">getSelectCC</a>(dl, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, LowMask,</Highlight></CodeLine>
<Link id="l11099" /><CodeLine lineNumber="11099"><Highlight kind="normal">                             DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(MaxVal, dl, VT), Result,</Highlight></CodeLine>
<Link id="l11100" /><CodeLine lineNumber="11100"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a>);</Highlight></CodeLine>
<Link id="l11101" /><CodeLine lineNumber="11101"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11102" /><CodeLine lineNumber="11102"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</Highlight></CodeLine>
<Link id="l11103" /><CodeLine lineNumber="11103"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11104" /><CodeLine lineNumber="11104"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11105" /><CodeLine lineNumber="11105"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Signed overflow happened if the upper (VTSize - Scale + 1) bits (of the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11106" /><CodeLine lineNumber="11106"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// widened multiplication) aren&#39;t all ones or all zeroes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11107" /><CodeLine lineNumber="11107"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11108" /><CodeLine lineNumber="11108"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SatMin = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(VTSize), dl, VT);</Highlight></CodeLine>
<Link id="l11109" /><CodeLine lineNumber="11109"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SatMax = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(VTSize), dl, VT);</Highlight></CodeLine>
<Link id="l11110" /><CodeLine lineNumber="11110"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11111" /><CodeLine lineNumber="11111"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Scale == 0) &#123;</Highlight></CodeLine>
<Link id="l11112" /><CodeLine lineNumber="11112"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Sign = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>,</Highlight></CodeLine>
<Link id="l11113" /><CodeLine lineNumber="11113"><Highlight kind="normal">                               DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(VTSize - 1, VT, dl));</Highlight></CodeLine>
<Link id="l11114" /><CodeLine lineNumber="11114"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Overflow = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, BoolVT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, Sign, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>);</Highlight></CodeLine>
<Link id="l11115" /><CodeLine lineNumber="11115"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Saturated to SatMin if wide product is negative, and SatMax if wide</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11116" /><CodeLine lineNumber="11116"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// product is positive ...</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11117" /><CodeLine lineNumber="11117"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, VT);</Highlight></CodeLine>
<Link id="l11118" /><CodeLine lineNumber="11118"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ResultIfOverflow = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab30ac12d744d55e5d9d8795b1ce53433">getSelectCC</a>(dl, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, Zero, SatMin, SatMax,</Highlight></CodeLine>
<Link id="l11119" /><CodeLine lineNumber="11119"><Highlight kind="normal">                                               <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l11120" /><CodeLine lineNumber="11120"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// ... but only if we overflowed.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11121" /><CodeLine lineNumber="11121"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, VT, Overflow, ResultIfOverflow, Result);</Highlight></CodeLine>
<Link id="l11122" /><CodeLine lineNumber="11122"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11123" /><CodeLine lineNumber="11123"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11124" /><CodeLine lineNumber="11124"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//  We handled Scale==0 above so all the bits to examine is in Hi.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11125" /><CodeLine lineNumber="11125"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11126" /><CodeLine lineNumber="11126"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Saturate to max if ((Hi &gt;&gt; (Scale - 1)) &gt; 0),</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11127" /><CodeLine lineNumber="11127"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// which is the same as if (Hi &gt; (1 &lt;&lt; (Scale - 1)) - 1)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11128" /><CodeLine lineNumber="11128"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LowMask = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(VTSize, Scale - 1),</Highlight></CodeLine>
<Link id="l11129" /><CodeLine lineNumber="11129"><Highlight kind="normal">                                    dl, VT);</Highlight></CodeLine>
<Link id="l11130" /><CodeLine lineNumber="11130"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab30ac12d744d55e5d9d8795b1ce53433">getSelectCC</a>(dl, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, LowMask, SatMax, Result, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a>);</Highlight></CodeLine>
<Link id="l11131" /><CodeLine lineNumber="11131"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Saturate to min if (Hi &gt;&gt; (Scale - 1)) &lt; -1),</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11132" /><CodeLine lineNumber="11132"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// which is the same as if (HI &lt; (-1 &lt;&lt; (Scale - 1))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11133" /><CodeLine lineNumber="11133"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> HighMask =</Highlight></CodeLine>
<Link id="l11134" /><CodeLine lineNumber="11134"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(VTSize, VTSize - Scale + 1),</Highlight></CodeLine>
<Link id="l11135" /><CodeLine lineNumber="11135"><Highlight kind="normal">                      dl, VT);</Highlight></CodeLine>
<Link id="l11136" /><CodeLine lineNumber="11136"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ab30ac12d744d55e5d9d8795b1ce53433">getSelectCC</a>(dl, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, HighMask, SatMin, Result, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l11137" /><CodeLine lineNumber="11137"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</Highlight></CodeLine>
<Link id="l11138" /><CodeLine lineNumber="11138"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l11139" /><CodeLine lineNumber="11139"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11140" /><CodeLine lineNumber="11140"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a></Highlight></CodeLine>
<Link id="l11141" /><CodeLine lineNumber="11141"><Highlight kind="normal"><a href="/docs/api/classes/llvm/targetlowering/#a0ec038c8a7d2972492d874496d2a02ad">TargetLowering::expandFixedPointDiv</a>(</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opcode, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;dl,</Highlight></CodeLine>
<Link id="l11142" /><CodeLine lineNumber="11142"><Highlight kind="normal">                                    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</Highlight></CodeLine>
<Link id="l11143" /><CodeLine lineNumber="11143"><Highlight kind="normal">                                    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Scale, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l11144" /><CodeLine lineNumber="11144"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a470242ff0d0c1f979101aa369a3a410e">ISD::SDIVFIX</a> || Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aadc85d973be8149bbaa5f372aa1faf3e">ISD::SDIVFIXSAT</a> ||</Highlight></CodeLine>
<Link id="l11145" /><CodeLine lineNumber="11145"><Highlight kind="normal">          Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aaa5af2aa3cc2e31b44b69d43e13235be">ISD::UDIVFIX</a> || Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5c5ebc516cae422508ee0c062ef6b593">ISD::UDIVFIXSAT</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l11146" /><CodeLine lineNumber="11146"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Expected a fixed point division opcode&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11147" /><CodeLine lineNumber="11147"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11148" /><CodeLine lineNumber="11148"><Highlight kind="normal">  EVT VT = <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getValueType();</Highlight></CodeLine>
<Link id="l11149" /><CodeLine lineNumber="11149"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> = Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a470242ff0d0c1f979101aa369a3a410e">ISD::SDIVFIX</a> || Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aadc85d973be8149bbaa5f372aa1faf3e">ISD::SDIVFIXSAT</a>;</Highlight></CodeLine>
<Link id="l11150" /><CodeLine lineNumber="11150"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Saturating = Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aadc85d973be8149bbaa5f372aa1faf3e">ISD::SDIVFIXSAT</a> || Opcode == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5c5ebc516cae422508ee0c062ef6b593">ISD::UDIVFIXSAT</a>;</Highlight></CodeLine>
<Link id="l11151" /><CodeLine lineNumber="11151"><Highlight kind="normal">  EVT BoolVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l11152" /><CodeLine lineNumber="11152"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11153" /><CodeLine lineNumber="11153"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If there is enough room in the type to upscale the LHS or downscale the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11154" /><CodeLine lineNumber="11154"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// RHS before the division, we can perform it in this type without having to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11155" /><CodeLine lineNumber="11155"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// resize. For signed operations, the LHS headroom is the number of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11156" /><CodeLine lineNumber="11156"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// redundant sign bits, and for unsigned ones it is the number of zeroes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11157" /><CodeLine lineNumber="11157"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// The headroom for the RHS is the number of trailing zeroes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11158" /><CodeLine lineNumber="11158"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LHSLead = <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> ? DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac01c66c983bfbac05a0cf903f08417df">ComputeNumSignBits</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) - 1</Highlight></CodeLine>
<Link id="l11159" /><CodeLine lineNumber="11159"><Highlight kind="normal">                            : DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>).<a href="/docs/api/structs/llvm/knownbits/#a7f47812e8e75b0616a97d7004e5fb909">countMinLeadingZeros</a>();</Highlight></CodeLine>
<Link id="l11160" /><CodeLine lineNumber="11160"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> RHSTrail = DAG.<a href="/docs/api/classes/llvm/selectiondag/#acf82847f1e6fae251ba4183cffd4a3d5">computeKnownBits</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>).<a href="/docs/api/structs/llvm/knownbits/#a1eeff70353694cb360b2893553c18e7d">countMinTrailingZeros</a>();</Highlight></CodeLine>
<Link id="l11161" /><CodeLine lineNumber="11161"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11162" /><CodeLine lineNumber="11162"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For signed saturating operations, we need to be able to detect true integer</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11163" /><CodeLine lineNumber="11163"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// division overflow; that is, when you have MIN / -EPS. However, this</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11164" /><CodeLine lineNumber="11164"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// is undefined behavior and if we emit divisions that could take such</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11165" /><CodeLine lineNumber="11165"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// values it may cause undesired behavior (arithmetic exceptions on x86, for</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11166" /><CodeLine lineNumber="11166"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// example).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11167" /><CodeLine lineNumber="11167"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Avoid this by requiring an extra bit so that we never get this case.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11168" /><CodeLine lineNumber="11168"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: This is a bit unfortunate as it means that for an 8-bit 7-scale</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11169" /><CodeLine lineNumber="11169"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// signed saturating division, we need to emit a whopping 32-bit division.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11170" /><CodeLine lineNumber="11170"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LHSLead + RHSTrail &lt; Scale + (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal">)(Saturating &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>))</Highlight></CodeLine>
<Link id="l11171" /><CodeLine lineNumber="11171"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l11172" /><CodeLine lineNumber="11172"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11173" /><CodeLine lineNumber="11173"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> LHSShift = std::min(LHSLead, Scale);</Highlight></CodeLine>
<Link id="l11174" /><CodeLine lineNumber="11174"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> RHSShift = Scale - LHSShift;</Highlight></CodeLine>
<Link id="l11175" /><CodeLine lineNumber="11175"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11176" /><CodeLine lineNumber="11176"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// At this point, we know that if we shift the LHS up by LHSShift and the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11177" /><CodeLine lineNumber="11177"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// RHS down by RHSShift, we can emit a regular division with a final scaling</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11178" /><CodeLine lineNumber="11178"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// factor of Scale.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11179" /><CodeLine lineNumber="11179"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11180" /><CodeLine lineNumber="11180"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LHSShift)</Highlight></CodeLine>
<Link id="l11181" /><CodeLine lineNumber="11181"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</Highlight></CodeLine>
<Link id="l11182" /><CodeLine lineNumber="11182"><Highlight kind="normal">                      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(LHSShift, VT, dl));</Highlight></CodeLine>
<Link id="l11183" /><CodeLine lineNumber="11183"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (RHSShift)</Highlight></CodeLine>
<Link id="l11184" /><CodeLine lineNumber="11184"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</Highlight></CodeLine>
<Link id="l11185" /><CodeLine lineNumber="11185"><Highlight kind="normal">                      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(RHSShift, VT, dl));</Highlight></CodeLine>
<Link id="l11186" /><CodeLine lineNumber="11186"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11187" /><CodeLine lineNumber="11187"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Quot;</Highlight></CodeLine>
<Link id="l11188" /><CodeLine lineNumber="11188"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>) &#123;</Highlight></CodeLine>
<Link id="l11189" /><CodeLine lineNumber="11189"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// For signed operations, if the resulting quotient is negative and the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11190" /><CodeLine lineNumber="11190"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// remainder is nonzero, subtract 1 from the quotient to round towards</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11191" /><CodeLine lineNumber="11191"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// negative infinity.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11192" /><CodeLine lineNumber="11192"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Rem;</Highlight></CodeLine>
<Link id="l11193" /><CodeLine lineNumber="11193"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// FIXME: Ideally we would always produce an SDIVREM here, but if the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11194" /><CodeLine lineNumber="11194"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// type isn&#39;t legal, SDIVREM cannot be expanded. There is no reason why</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11195" /><CodeLine lineNumber="11195"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// we couldn&#39;t just form a libcall, but the type legalizer doesn&#39;t do it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11196" /><CodeLine lineNumber="11196"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(VT) &amp;&amp;</Highlight></CodeLine>
<Link id="l11197" /><CodeLine lineNumber="11197"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3a874f66e1efe5be79552bbe7ee3121a">ISD::SDIVREM</a>, VT)) &#123;</Highlight></CodeLine>
<Link id="l11198" /><CodeLine lineNumber="11198"><Highlight kind="normal">      Quot = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3a874f66e1efe5be79552bbe7ee3121a">ISD::SDIVREM</a>, dl,</Highlight></CodeLine>
<Link id="l11199" /><CodeLine lineNumber="11199"><Highlight kind="normal">                         DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(VT, VT),</Highlight></CodeLine>
<Link id="l11200" /><CodeLine lineNumber="11200"><Highlight kind="normal">                         <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11201" /><CodeLine lineNumber="11201"><Highlight kind="normal">      Rem = Quot.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(1);</Highlight></CodeLine>
<Link id="l11202" /><CodeLine lineNumber="11202"><Highlight kind="normal">      Quot = Quot.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(0);</Highlight></CodeLine>
<Link id="l11203" /><CodeLine lineNumber="11203"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l11204" /><CodeLine lineNumber="11204"><Highlight kind="normal">      Quot = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1f61c2422057e10403b2f6003543c300">ISD::SDIV</a>, dl, VT,</Highlight></CodeLine>
<Link id="l11205" /><CodeLine lineNumber="11205"><Highlight kind="normal">                         <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11206" /><CodeLine lineNumber="11206"><Highlight kind="normal">      Rem = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a124ba0f5b2887879212c74a68bc230a3">ISD::SREM</a>, dl, VT,</Highlight></CodeLine>
<Link id="l11207" /><CodeLine lineNumber="11207"><Highlight kind="normal">                        <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11208" /><CodeLine lineNumber="11208"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l11209" /><CodeLine lineNumber="11209"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, VT);</Highlight></CodeLine>
<Link id="l11210" /><CodeLine lineNumber="11210"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> RemNonZero = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, BoolVT, Rem, Zero, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>);</Highlight></CodeLine>
<Link id="l11211" /><CodeLine lineNumber="11211"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LHSNeg = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, BoolVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Zero, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l11212" /><CodeLine lineNumber="11212"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> RHSNeg = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, BoolVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Zero, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l11213" /><CodeLine lineNumber="11213"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> QuotNeg = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, BoolVT, LHSNeg, RHSNeg);</Highlight></CodeLine>
<Link id="l11214" /><CodeLine lineNumber="11214"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Sub1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, Quot,</Highlight></CodeLine>
<Link id="l11215" /><CodeLine lineNumber="11215"><Highlight kind="normal">                               DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, VT));</Highlight></CodeLine>
<Link id="l11216" /><CodeLine lineNumber="11216"><Highlight kind="normal">    Quot = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, VT,</Highlight></CodeLine>
<Link id="l11217" /><CodeLine lineNumber="11217"><Highlight kind="normal">                         DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, BoolVT, RemNonZero, QuotNeg),</Highlight></CodeLine>
<Link id="l11218" /><CodeLine lineNumber="11218"><Highlight kind="normal">                         Sub1, Quot);</Highlight></CodeLine>
<Link id="l11219" /><CodeLine lineNumber="11219"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11220" /><CodeLine lineNumber="11220"><Highlight kind="normal">    Quot = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a15637879021fa7d5226045c0668a99a8">ISD::UDIV</a>, dl, VT,</Highlight></CodeLine>
<Link id="l11221" /><CodeLine lineNumber="11221"><Highlight kind="normal">                       <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11222" /><CodeLine lineNumber="11222"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11223" /><CodeLine lineNumber="11223"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Quot;</Highlight></CodeLine>
<Link id="l11224" /><CodeLine lineNumber="11224"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l11225" /><CodeLine lineNumber="11225"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11226" /><CodeLine lineNumber="11226"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a97d69e6a9860a2705c6d47e94028fbe1">TargetLowering::expandUADDSUBO</a>(</Highlight></CodeLine>
<Link id="l11227" /><CodeLine lineNumber="11227"><Highlight kind="normal">    SDNode &#42;Node, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;Result, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;Overflow, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l11228" /><CodeLine lineNumber="11228"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l11229" /><CodeLine lineNumber="11229"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l11230" /><CodeLine lineNumber="11230"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l11231" /><CodeLine lineNumber="11231"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsAdd = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1ddf36330110b4abea43fe390bea9ef9">ISD::UADDO</a>;</Highlight></CodeLine>
<Link id="l11232" /><CodeLine lineNumber="11232"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11233" /><CodeLine lineNumber="11233"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If UADDO&#95;CARRY/SUBO&#95;CARRY is legal, use that instead.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11234" /><CodeLine lineNumber="11234"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> OpcCarry = IsAdd ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ab0f1e3ed26108fec69eb97209c0e39bf">ISD::UADDO&#95;CARRY</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac81ebcd59d629d8680e50ffba9855255">ISD::USUBO&#95;CARRY</a>;</Highlight></CodeLine>
<Link id="l11235" /><CodeLine lineNumber="11235"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(OpcCarry, <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0))) &#123;</Highlight></CodeLine>
<Link id="l11236" /><CodeLine lineNumber="11236"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> CarryIn = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(1));</Highlight></CodeLine>
<Link id="l11237" /><CodeLine lineNumber="11237"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NodeCarry = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(OpcCarry, dl, <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getVTList(),</Highlight></CodeLine>
<Link id="l11238" /><CodeLine lineNumber="11238"><Highlight kind="normal">                                    &#123; LHS, RHS, CarryIn &#125;);</Highlight></CodeLine>
<Link id="l11239" /><CodeLine lineNumber="11239"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(NodeCarry.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(), 0);</Highlight></CodeLine>
<Link id="l11240" /><CodeLine lineNumber="11240"><Highlight kind="normal">    Overflow = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(NodeCarry.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(), 1);</Highlight></CodeLine>
<Link id="l11241" /><CodeLine lineNumber="11241"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11242" /><CodeLine lineNumber="11242"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11243" /><CodeLine lineNumber="11243"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11244" /><CodeLine lineNumber="11244"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(IsAdd ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl,</Highlight></CodeLine>
<Link id="l11245" /><CodeLine lineNumber="11245"><Highlight kind="normal">                            <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getValueType(), <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11246" /><CodeLine lineNumber="11246"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11247" /><CodeLine lineNumber="11247"><Highlight kind="normal">  EVT ResultType = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(1);</Highlight></CodeLine>
<Link id="l11248" /><CodeLine lineNumber="11248"><Highlight kind="normal">  EVT SetCCType = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(</Highlight></CodeLine>
<Link id="l11249" /><CodeLine lineNumber="11249"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0));</Highlight></CodeLine>
<Link id="l11250" /><CodeLine lineNumber="11250"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SetCC;</Highlight></CodeLine>
<Link id="l11251" /><CodeLine lineNumber="11251"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsAdd &amp;&amp; <a href="/docs/api/namespaces/llvm/#ac926ae0b6871c2207db3e787f6dbcb80">isOneConstant</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)) &#123;</Highlight></CodeLine>
<Link id="l11252" /><CodeLine lineNumber="11252"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Special case: uaddo X, 1 overflowed if X+1 is 0 This potential reduces</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11253" /><CodeLine lineNumber="11253"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the live range of X. We assume comparing with 0 is cheap.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11254" /><CodeLine lineNumber="11254"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The general case (X + C) &lt; C is not necessarily beneficial. Although we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11255" /><CodeLine lineNumber="11255"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// reduce the live range of X, we may introduce the materialization of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11256" /><CodeLine lineNumber="11256"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// constant C.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11257" /><CodeLine lineNumber="11257"><Highlight kind="normal">    SetCC =</Highlight></CodeLine>
<Link id="l11258" /><CodeLine lineNumber="11258"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCType, Result,</Highlight></CodeLine>
<Link id="l11259" /><CodeLine lineNumber="11259"><Highlight kind="normal">                     DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0)), <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>);</Highlight></CodeLine>
<Link id="l11260" /><CodeLine lineNumber="11260"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsAdd &amp;&amp; <a href="/docs/api/namespaces/llvm/#af8b512107b41f4ccaf001e31218135c3">isAllOnesConstant</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)) &#123;</Highlight></CodeLine>
<Link id="l11261" /><CodeLine lineNumber="11261"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Special case: uaddo X, -1 overflows if X != 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11262" /><CodeLine lineNumber="11262"><Highlight kind="normal">    SetCC =</Highlight></CodeLine>
<Link id="l11263" /><CodeLine lineNumber="11263"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCType, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</Highlight></CodeLine>
<Link id="l11264" /><CodeLine lineNumber="11264"><Highlight kind="normal">                     DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0)), <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>);</Highlight></CodeLine>
<Link id="l11265" /><CodeLine lineNumber="11265"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l11266" /><CodeLine lineNumber="11266"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> = IsAdd ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a>;</Highlight></CodeLine>
<Link id="l11267" /><CodeLine lineNumber="11267"><Highlight kind="normal">    SetCC = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCType, Result, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>);</Highlight></CodeLine>
<Link id="l11268" /><CodeLine lineNumber="11268"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11269" /><CodeLine lineNumber="11269"><Highlight kind="normal">  Overflow = DAG.<a href="/docs/api/classes/llvm/selectiondag/#aa7e66d5a43444879fa5037f2cfaa4de5">getBoolExtOrTrunc</a>(SetCC, dl, ResultType, ResultType);</Highlight></CodeLine>
<Link id="l11270" /><CodeLine lineNumber="11270"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l11271" /><CodeLine lineNumber="11271"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11272" /><CodeLine lineNumber="11272"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a0936c394ae9dcff8bf79032da7eb9472">TargetLowering::expandSADDSUBO</a>(</Highlight></CodeLine>
<Link id="l11273" /><CodeLine lineNumber="11273"><Highlight kind="normal">    SDNode &#42;Node, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;Result, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;Overflow, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l11274" /><CodeLine lineNumber="11274"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l11275" /><CodeLine lineNumber="11275"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l11276" /><CodeLine lineNumber="11276"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l11277" /><CodeLine lineNumber="11277"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsAdd = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a863ec6ebb75bf89cfea14da646d77e92">ISD::SADDO</a>;</Highlight></CodeLine>
<Link id="l11278" /><CodeLine lineNumber="11278"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11279" /><CodeLine lineNumber="11279"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(IsAdd ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl,</Highlight></CodeLine>
<Link id="l11280" /><CodeLine lineNumber="11280"><Highlight kind="normal">                            <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getValueType(), <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11281" /><CodeLine lineNumber="11281"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11282" /><CodeLine lineNumber="11282"><Highlight kind="normal">  EVT ResultType = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(1);</Highlight></CodeLine>
<Link id="l11283" /><CodeLine lineNumber="11283"><Highlight kind="normal">  EVT OType = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(</Highlight></CodeLine>
<Link id="l11284" /><CodeLine lineNumber="11284"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0));</Highlight></CodeLine>
<Link id="l11285" /><CodeLine lineNumber="11285"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11286" /><CodeLine lineNumber="11286"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If SADDSAT/SSUBSAT is legal, compare results to detect overflow.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11287" /><CodeLine lineNumber="11287"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> OpcSat = IsAdd ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110af1b946afff631cee7aa6de570bef7785">ISD::SADDSAT</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a77984d86d70df1f3229da7a5119652a9">ISD::SSUBSAT</a>;</Highlight></CodeLine>
<Link id="l11288" /><CodeLine lineNumber="11288"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(OpcSat, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getValueType())) &#123;</Highlight></CodeLine>
<Link id="l11289" /><CodeLine lineNumber="11289"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Sat = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(OpcSat, dl, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getValueType(), <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11290" /><CodeLine lineNumber="11290"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SetCC = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, OType, Result, Sat, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>);</Highlight></CodeLine>
<Link id="l11291" /><CodeLine lineNumber="11291"><Highlight kind="normal">    Overflow = DAG.<a href="/docs/api/classes/llvm/selectiondag/#aa7e66d5a43444879fa5037f2cfaa4de5">getBoolExtOrTrunc</a>(SetCC, dl, ResultType, ResultType);</Highlight></CodeLine>
<Link id="l11292" /><CodeLine lineNumber="11292"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11293" /><CodeLine lineNumber="11293"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11294" /><CodeLine lineNumber="11294"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11295" /><CodeLine lineNumber="11295"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getValueType());</Highlight></CodeLine>
<Link id="l11296" /><CodeLine lineNumber="11296"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11297" /><CodeLine lineNumber="11297"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For an addition, the result should be less than one of the operands (LHS)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11298" /><CodeLine lineNumber="11298"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// if and only if the other operand (RHS) is negative, otherwise there will</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11299" /><CodeLine lineNumber="11299"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// be overflow.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11300" /><CodeLine lineNumber="11300"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For a subtraction, the result should be less than one of the operands</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11301" /><CodeLine lineNumber="11301"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (LHS) if and only if the other operand (RHS) is (non-zero) positive,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11302" /><CodeLine lineNumber="11302"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// otherwise there will be overflow.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11303" /><CodeLine lineNumber="11303"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ResultLowerThanLHS = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, OType, Result, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>);</Highlight></CodeLine>
<Link id="l11304" /><CodeLine lineNumber="11304"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ConditionRHS =</Highlight></CodeLine>
<Link id="l11305" /><CodeLine lineNumber="11305"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, OType, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Zero, IsAdd ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a> : <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a>);</Highlight></CodeLine>
<Link id="l11306" /><CodeLine lineNumber="11306"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11307" /><CodeLine lineNumber="11307"><Highlight kind="normal">  Overflow = DAG.<a href="/docs/api/classes/llvm/selectiondag/#aa7e66d5a43444879fa5037f2cfaa4de5">getBoolExtOrTrunc</a>(</Highlight></CodeLine>
<Link id="l11308" /><CodeLine lineNumber="11308"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, OType, ConditionRHS, ResultLowerThanLHS), dl,</Highlight></CodeLine>
<Link id="l11309" /><CodeLine lineNumber="11309"><Highlight kind="normal">      ResultType, ResultType);</Highlight></CodeLine>
<Link id="l11310" /><CodeLine lineNumber="11310"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l11311" /><CodeLine lineNumber="11311"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11312" /><CodeLine lineNumber="11312"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a79f607ce587b5b9f4ea493d88ba54845">TargetLowering::expandMULO</a>(SDNode &#42;Node, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;Result,</Highlight></CodeLine>
<Link id="l11313" /><CodeLine lineNumber="11313"><Highlight kind="normal">                                <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;Overflow, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l11314" /><CodeLine lineNumber="11314"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l11315" /><CodeLine lineNumber="11315"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l11316" /><CodeLine lineNumber="11316"><Highlight kind="normal">  EVT SetCCVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT);</Highlight></CodeLine>
<Link id="l11317" /><CodeLine lineNumber="11317"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l11318" /><CodeLine lineNumber="11318"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l11319" /><CodeLine lineNumber="11319"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aa35d0a58fdded3d225d512a60aea0951">ISD::SMULO</a>;</Highlight></CodeLine>
<Link id="l11320" /><CodeLine lineNumber="11320"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11321" /><CodeLine lineNumber="11321"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For power-of-two multiplications we can use a simpler shift expansion.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11322" /><CodeLine lineNumber="11322"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ConstantSDNode &#42;RHSC = <a href="/docs/api/namespaces/llvm/#abb4484ddcdad2576d97870230db05ed8">isConstOrConstSplat</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)) &#123;</Highlight></CodeLine>
<Link id="l11323" /><CodeLine lineNumber="11323"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> APInt &amp;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = RHSC-&gt;getAPIntValue();</Highlight></CodeLine>
<Link id="l11324" /><CodeLine lineNumber="11324"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// mulo(X, 1 &lt;&lt; S) -&gt; &#123; X &lt;&lt; S, (X &lt;&lt; S) &gt;&gt; S != X &#125;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11325" /><CodeLine lineNumber="11325"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>.isPowerOf2()) &#123;</Highlight></CodeLine>
<Link id="l11326" /><CodeLine lineNumber="11326"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// smulo(x, signed&#95;min) is same as umulo(x, signed&#95;min).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11327" /><CodeLine lineNumber="11327"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseArithShift = <a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a> &amp;&amp; !<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>.isMinSignedValue();</Highlight></CodeLine>
<Link id="l11328" /><CodeLine lineNumber="11328"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShiftAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>.logBase2(), VT, dl);</Highlight></CodeLine>
<Link id="l11329" /><CodeLine lineNumber="11329"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, ShiftAmt);</Highlight></CodeLine>
<Link id="l11330" /><CodeLine lineNumber="11330"><Highlight kind="normal">      Overflow = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCVT,</Highlight></CodeLine>
<Link id="l11331" /><CodeLine lineNumber="11331"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(UseArithShift ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>,</Highlight></CodeLine>
<Link id="l11332" /><CodeLine lineNumber="11332"><Highlight kind="normal">                      dl, VT, Result, ShiftAmt),</Highlight></CodeLine>
<Link id="l11333" /><CodeLine lineNumber="11333"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>);</Highlight></CodeLine>
<Link id="l11334" /><CodeLine lineNumber="11334"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11335" /><CodeLine lineNumber="11335"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l11336" /><CodeLine lineNumber="11336"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11337" /><CodeLine lineNumber="11337"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11338" /><CodeLine lineNumber="11338"><Highlight kind="normal">  EVT WideVT = <a href="/docs/api/structs/llvm/evt/#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>() &#42; 2);</Highlight></CodeLine>
<Link id="l11339" /><CodeLine lineNumber="11339"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>())</Highlight></CodeLine>
<Link id="l11340" /><CodeLine lineNumber="11340"><Highlight kind="normal">    WideVT =</Highlight></CodeLine>
<Link id="l11341" /><CodeLine lineNumber="11341"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/evt/#a210ba6b43ba451b698857dd9de71bd15">EVT::getVectorVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), WideVT, VT.<a href="/docs/api/structs/llvm/evt/#a3d102abca1c9c95f36546dff2f39273b">getVectorElementCount</a>());</Highlight></CodeLine>
<Link id="l11342" /><CodeLine lineNumber="11342"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11343" /><CodeLine lineNumber="11343"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> BottomHalf;</Highlight></CodeLine>
<Link id="l11344" /><CodeLine lineNumber="11344"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TopHalf;</Highlight></CodeLine>
<Link id="l11345" /><CodeLine lineNumber="11345"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>&#91;2&#93;&#91;3&#93; =</Highlight></CodeLine>
<Link id="l11346" /><CodeLine lineNumber="11346"><Highlight kind="normal">      &#123; &#123; <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a8a80d3b085af08f0dce1724207ef99b5">ISD::MULHU</a>, <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a79c959df09509d7ff66d9b04bc40d18d">ISD::UMUL&#95;LOHI</a>, <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a> &#125;,</Highlight></CodeLine>
<Link id="l11347" /><CodeLine lineNumber="11347"><Highlight kind="normal">        &#123; <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aa2a7c3eccf06b41e4275bbeadb46d22e">ISD::MULHS</a>, <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1354c6f8508d6cd697dc89a5d9a52dfd">ISD::SMUL&#95;LOHI</a>, <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a5183f3d72924bc7c77ba8d3f5de9f602">ISD::SIGN&#95;EXTEND</a> &#125;&#125;;</Highlight></CodeLine>
<Link id="l11348" /><CodeLine lineNumber="11348"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>&#91;<a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a>&#93;&#91;0&#93;, VT)) &#123;</Highlight></CodeLine>
<Link id="l11349" /><CodeLine lineNumber="11349"><Highlight kind="normal">    BottomHalf = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11350" /><CodeLine lineNumber="11350"><Highlight kind="normal">    TopHalf = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>&#91;<a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a>&#93;&#91;0&#93;, dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11351" /><CodeLine lineNumber="11351"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(<a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>&#91;<a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a>&#93;&#91;1&#93;, VT)) &#123;</Highlight></CodeLine>
<Link id="l11352" /><CodeLine lineNumber="11352"><Highlight kind="normal">    BottomHalf = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>&#91;<a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a>&#93;&#91;1&#93;, dl, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(VT, VT), <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</Highlight></CodeLine>
<Link id="l11353" /><CodeLine lineNumber="11353"><Highlight kind="normal">                             <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11354" /><CodeLine lineNumber="11354"><Highlight kind="normal">    TopHalf = BottomHalf.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(1);</Highlight></CodeLine>
<Link id="l11355" /><CodeLine lineNumber="11355"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(WideVT)) &#123;</Highlight></CodeLine>
<Link id="l11356" /><CodeLine lineNumber="11356"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>&#91;<a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a>&#93;&#91;2&#93;, dl, WideVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</Highlight></CodeLine>
<Link id="l11357" /><CodeLine lineNumber="11357"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>&#91;<a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a>&#93;&#91;2&#93;, dl, WideVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11358" /><CodeLine lineNumber="11358"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, WideVT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11359" /><CodeLine lineNumber="11359"><Highlight kind="normal">    BottomHalf = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, VT, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>);</Highlight></CodeLine>
<Link id="l11360" /><CodeLine lineNumber="11360"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShiftAmt =</Highlight></CodeLine>
<Link id="l11361" /><CodeLine lineNumber="11361"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>(), WideVT, dl);</Highlight></CodeLine>
<Link id="l11362" /><CodeLine lineNumber="11362"><Highlight kind="normal">    TopHalf = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, VT,</Highlight></CodeLine>
<Link id="l11363" /><CodeLine lineNumber="11363"><Highlight kind="normal">                          DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, WideVT, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>, ShiftAmt));</Highlight></CodeLine>
<Link id="l11364" /><CodeLine lineNumber="11364"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l11365" /><CodeLine lineNumber="11365"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>())</Highlight></CodeLine>
<Link id="l11366" /><CodeLine lineNumber="11366"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11367" /><CodeLine lineNumber="11367"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11368" /><CodeLine lineNumber="11368"><Highlight kind="normal">    forceExpandWideMUL(DAG, dl, <a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, BottomHalf, TopHalf);</Highlight></CodeLine>
<Link id="l11369" /><CodeLine lineNumber="11369"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11370" /><CodeLine lineNumber="11370"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11371" /><CodeLine lineNumber="11371"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = BottomHalf;</Highlight></CodeLine>
<Link id="l11372" /><CodeLine lineNumber="11372"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a>) &#123;</Highlight></CodeLine>
<Link id="l11373" /><CodeLine lineNumber="11373"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShiftAmt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(</Highlight></CodeLine>
<Link id="l11374" /><CodeLine lineNumber="11374"><Highlight kind="normal">        VT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>() - 1, BottomHalf.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>(), dl);</Highlight></CodeLine>
<Link id="l11375" /><CodeLine lineNumber="11375"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Sign = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4a055321c361a0f6ee77ed764730ffc1">ISD::SRA</a>, dl, VT, BottomHalf, ShiftAmt);</Highlight></CodeLine>
<Link id="l11376" /><CodeLine lineNumber="11376"><Highlight kind="normal">    Overflow = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCVT, TopHalf, Sign, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>);</Highlight></CodeLine>
<Link id="l11377" /><CodeLine lineNumber="11377"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l11378" /><CodeLine lineNumber="11378"><Highlight kind="normal">    Overflow = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCVT, TopHalf,</Highlight></CodeLine>
<Link id="l11379" /><CodeLine lineNumber="11379"><Highlight kind="normal">                            DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, VT), <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>);</Highlight></CodeLine>
<Link id="l11380" /><CodeLine lineNumber="11380"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11381" /><CodeLine lineNumber="11381"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11382" /><CodeLine lineNumber="11382"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Truncate the result if SetCC returns a larger type than needed.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11383" /><CodeLine lineNumber="11383"><Highlight kind="normal">  EVT RType = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(1);</Highlight></CodeLine>
<Link id="l11384" /><CodeLine lineNumber="11384"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (RType.<a href="/docs/api/structs/llvm/evt/#a3bf257bfbd279ecfad670be03b00210e">bitsLT</a>(Overflow.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>()))</Highlight></CodeLine>
<Link id="l11385" /><CodeLine lineNumber="11385"><Highlight kind="normal">    Overflow = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, RType, Overflow);</Highlight></CodeLine>
<Link id="l11386" /><CodeLine lineNumber="11386"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11387" /><CodeLine lineNumber="11387"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RType.<a href="/docs/api/structs/llvm/evt/#a45e76d44a189e456d52e37ba3dda0fce">getSizeInBits</a>() == Overflow.<a href="/docs/api/classes/llvm/sdvalue/#a8915297f72f1020167562805827f7160">getValueSizeInBits</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l11388" /><CodeLine lineNumber="11388"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Unexpected result type for S/UMULO legalization&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11389" /><CodeLine lineNumber="11389"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11390" /><CodeLine lineNumber="11390"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l11391" /><CodeLine lineNumber="11391"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11392" /><CodeLine lineNumber="11392"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#ad70774809672f50432f4caba1d7c4018">TargetLowering::expandVecReduce</a>(SDNode &#42;Node, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l11393" /><CodeLine lineNumber="11393"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l11394" /><CodeLine lineNumber="11394"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> BaseOpcode = <a href="/docs/api/namespaces/llvm/isd/#ace75a0fc6736a8bf8b8187083078354d">ISD::getVecReduceBaseOpcode</a>(<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode());</Highlight></CodeLine>
<Link id="l11395" /><CodeLine lineNumber="11395"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l11396" /><CodeLine lineNumber="11396"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l11397" /><CodeLine lineNumber="11397"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11398" /><CodeLine lineNumber="11398"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l11399" /><CodeLine lineNumber="11399"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7f2a3d4dcfee70225988aec53ff1e173">report&#95;fatal&#95;error</a>(</Highlight></CodeLine>
<Link id="l11400" /><CodeLine lineNumber="11400"><Highlight kind="normal">        </Highlight><Highlight kind="stringliteral">&quot;Expanding reductions for scalable vectors is undefined.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11401" /><CodeLine lineNumber="11401"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11402" /><CodeLine lineNumber="11402"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Try to use a shuffle reduction for power of two vectors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11403" /><CodeLine lineNumber="11403"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#a59eee3929b9155fd268e3e3f6c0efde9">isPow2VectorType</a>()) &#123;</Highlight></CodeLine>
<Link id="l11404" /><CodeLine lineNumber="11404"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>() &gt; 1) &#123;</Highlight></CodeLine>
<Link id="l11405" /><CodeLine lineNumber="11405"><Highlight kind="normal">      EVT HalfVT = VT.<a href="/docs/api/structs/llvm/evt/#aee35a362966ced72913881d8a2dc3be8">getHalfNumVectorElementsVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>());</Highlight></CodeLine>
<Link id="l11406" /><CodeLine lineNumber="11406"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(BaseOpcode, HalfVT))</Highlight></CodeLine>
<Link id="l11407" /><CodeLine lineNumber="11407"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11408" /><CodeLine lineNumber="11408"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11409" /><CodeLine lineNumber="11409"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>;</Highlight></CodeLine>
<Link id="l11410" /><CodeLine lineNumber="11410"><Highlight kind="normal">      std::tie(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>) = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8695950995820e5f6c0407c68f91f44f">SplitVector</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, dl);</Highlight></CodeLine>
<Link id="l11411" /><CodeLine lineNumber="11411"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(BaseOpcode, dl, HalfVT, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getFlags());</Highlight></CodeLine>
<Link id="l11412" /><CodeLine lineNumber="11412"><Highlight kind="normal">      VT = HalfVT;</Highlight></CodeLine>
<Link id="l11413" /><CodeLine lineNumber="11413"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l11414" /><CodeLine lineNumber="11414"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11415" /><CodeLine lineNumber="11415"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11416" /><CodeLine lineNumber="11416"><Highlight kind="normal">  EVT EltVT = VT.<a href="/docs/api/structs/llvm/evt/#abc4c6365ade17ad4443ad0e381e7479d">getVectorElementType</a>();</Highlight></CodeLine>
<Link id="l11417" /><CodeLine lineNumber="11417"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumElts = VT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>();</Highlight></CodeLine>
<Link id="l11418" /><CodeLine lineNumber="11418"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11419" /><CodeLine lineNumber="11419"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDValue, 8&gt;</a> <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>;</Highlight></CodeLine>
<Link id="l11420" /><CodeLine lineNumber="11420"><Highlight kind="normal">  DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1c383bff50576c84343b3b8ea609f3e1">ExtractVectorElements</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>, 0, NumElts);</Highlight></CodeLine>
<Link id="l11421" /><CodeLine lineNumber="11421"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11422" /><CodeLine lineNumber="11422"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Res = <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>&#91;0&#93;;</Highlight></CodeLine>
<Link id="l11423" /><CodeLine lineNumber="11423"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 1; i &lt; NumElts; i++)</Highlight></CodeLine>
<Link id="l11424" /><CodeLine lineNumber="11424"><Highlight kind="normal">    Res = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(BaseOpcode, dl, EltVT, Res, <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>&#91;i&#93;, <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getFlags());</Highlight></CodeLine>
<Link id="l11425" /><CodeLine lineNumber="11425"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11426" /><CodeLine lineNumber="11426"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Result type may be wider than element type.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11427" /><CodeLine lineNumber="11427"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (EltVT != <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0))</Highlight></CodeLine>
<Link id="l11428" /><CodeLine lineNumber="11428"><Highlight kind="normal">    Res = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">ISD::ANY&#95;EXTEND</a>, dl, <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0), Res);</Highlight></CodeLine>
<Link id="l11429" /><CodeLine lineNumber="11429"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Res;</Highlight></CodeLine>
<Link id="l11430" /><CodeLine lineNumber="11430"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l11431" /><CodeLine lineNumber="11431"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11432" /><CodeLine lineNumber="11432"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a26774cf193c8fc0a6f65a22f1481c6cd">TargetLowering::expandVecReduceSeq</a>(SDNode &#42;Node, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l11433" /><CodeLine lineNumber="11433"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l11434" /><CodeLine lineNumber="11434"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> AccOp = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l11435" /><CodeLine lineNumber="11435"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> VecOp = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l11436" /><CodeLine lineNumber="11436"><Highlight kind="normal">  SDNodeFlags <a href="/docs/api/namespaces/anonymous-textstubv5-cpp-/#ad2f3f81faa370c8bf9a1f81612c90adfab74797a67aabe2a47afe04d0a92997a0">Flags</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getFlags();</Highlight></CodeLine>
<Link id="l11437" /><CodeLine lineNumber="11437"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11438" /><CodeLine lineNumber="11438"><Highlight kind="normal">  EVT VT = VecOp.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l11439" /><CodeLine lineNumber="11439"><Highlight kind="normal">  EVT EltVT = VT.<a href="/docs/api/structs/llvm/evt/#abc4c6365ade17ad4443ad0e381e7479d">getVectorElementType</a>();</Highlight></CodeLine>
<Link id="l11440" /><CodeLine lineNumber="11440"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11441" /><CodeLine lineNumber="11441"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l11442" /><CodeLine lineNumber="11442"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7f2a3d4dcfee70225988aec53ff1e173">report&#95;fatal&#95;error</a>(</Highlight></CodeLine>
<Link id="l11443" /><CodeLine lineNumber="11443"><Highlight kind="normal">        </Highlight><Highlight kind="stringliteral">&quot;Expanding reductions for scalable vectors is undefined.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11444" /><CodeLine lineNumber="11444"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11445" /><CodeLine lineNumber="11445"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumElts = VT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>();</Highlight></CodeLine>
<Link id="l11446" /><CodeLine lineNumber="11446"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11447" /><CodeLine lineNumber="11447"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a8fc529c79977cdd01e187986f960a07f">SmallVector&lt;SDValue, 8&gt;</a> <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>;</Highlight></CodeLine>
<Link id="l11448" /><CodeLine lineNumber="11448"><Highlight kind="normal">  DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1c383bff50576c84343b3b8ea609f3e1">ExtractVectorElements</a>(VecOp, <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>, 0, NumElts);</Highlight></CodeLine>
<Link id="l11449" /><CodeLine lineNumber="11449"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11450" /><CodeLine lineNumber="11450"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> BaseOpcode = <a href="/docs/api/namespaces/llvm/isd/#ace75a0fc6736a8bf8b8187083078354d">ISD::getVecReduceBaseOpcode</a>(<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode());</Highlight></CodeLine>
<Link id="l11451" /><CodeLine lineNumber="11451"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11452" /><CodeLine lineNumber="11452"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Res = AccOp;</Highlight></CodeLine>
<Link id="l11453" /><CodeLine lineNumber="11453"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> i = 0; i &lt; NumElts; i++)</Highlight></CodeLine>
<Link id="l11454" /><CodeLine lineNumber="11454"><Highlight kind="normal">    Res = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(BaseOpcode, dl, EltVT, Res, <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>&#91;i&#93;, Flags);</Highlight></CodeLine>
<Link id="l11455" /><CodeLine lineNumber="11455"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11456" /><CodeLine lineNumber="11456"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Res;</Highlight></CodeLine>
<Link id="l11457" /><CodeLine lineNumber="11457"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l11458" /><CodeLine lineNumber="11458"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11459" /><CodeLine lineNumber="11459"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a83103b2084518ce8c8eaff7fa20c89e4">TargetLowering::expandREM</a>(SDNode &#42;Node, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;Result,</Highlight></CodeLine>
<Link id="l11460" /><CodeLine lineNumber="11460"><Highlight kind="normal">                               SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l11461" /><CodeLine lineNumber="11461"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l11462" /><CodeLine lineNumber="11462"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l11463" /><CodeLine lineNumber="11463"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a124ba0f5b2887879212c74a68bc230a3">ISD::SREM</a>;</Highlight></CodeLine>
<Link id="l11464" /><CodeLine lineNumber="11464"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> DivOpc = <a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a> ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a1f61c2422057e10403b2f6003543c300">ISD::SDIV</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a15637879021fa7d5226045c0668a99a8">ISD::UDIV</a>;</Highlight></CodeLine>
<Link id="l11465" /><CodeLine lineNumber="11465"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> DivRemOpc = <a href="/docs/api/files/lib/lib/codegen/expandlargedivrem-cpp/#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a> ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3a874f66e1efe5be79552bbe7ee3121a">ISD::SDIVREM</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3a257ffa49107e2db978e8a6e2688ada">ISD::UDIVREM</a>;</Highlight></CodeLine>
<Link id="l11466" /><CodeLine lineNumber="11466"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Dividend = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l11467" /><CodeLine lineNumber="11467"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Divisor = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l11468" /><CodeLine lineNumber="11468"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(DivRemOpc, VT)) &#123;</Highlight></CodeLine>
<Link id="l11469" /><CodeLine lineNumber="11469"><Highlight kind="normal">    SDVTList VTs = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a>(VT, VT);</Highlight></CodeLine>
<Link id="l11470" /><CodeLine lineNumber="11470"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(DivRemOpc, dl, VTs, Dividend, Divisor).<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(1);</Highlight></CodeLine>
<Link id="l11471" /><CodeLine lineNumber="11471"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11472" /><CodeLine lineNumber="11472"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11473" /><CodeLine lineNumber="11473"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(DivOpc, VT)) &#123;</Highlight></CodeLine>
<Link id="l11474" /><CodeLine lineNumber="11474"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// X % Y -&gt; X-X/Y&#42;Y</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11475" /><CodeLine lineNumber="11475"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/ms-demangle/#a851a17f7dc73f9988807242926dcc645a0b914e196182d02615487e9793ecff3d">Divide</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(DivOpc, dl, VT, Dividend, Divisor);</Highlight></CodeLine>
<Link id="l11476" /><CodeLine lineNumber="11476"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, VT, Divide, Divisor);</Highlight></CodeLine>
<Link id="l11477" /><CodeLine lineNumber="11477"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/ms-demangle/#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, VT, Dividend, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>);</Highlight></CodeLine>
<Link id="l11478" /><CodeLine lineNumber="11478"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11479" /><CodeLine lineNumber="11479"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11480" /><CodeLine lineNumber="11480"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11481" /><CodeLine lineNumber="11481"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l11482" /><CodeLine lineNumber="11482"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11483" /><CodeLine lineNumber="11483"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a606e204a6a530a50176f469e79f23832">TargetLowering::expandFP&#95;TO&#95;INT&#95;SAT</a>(SDNode &#42;Node,</Highlight></CodeLine>
<Link id="l11484" /><CodeLine lineNumber="11484"><Highlight kind="normal">                                            SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l11485" /><CodeLine lineNumber="11485"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsSigned = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae4a4e2126c6db34e2dfd71b6bd0408ee">ISD::FP&#95;TO&#95;SINT&#95;SAT</a>;</Highlight></CodeLine>
<Link id="l11486" /><CodeLine lineNumber="11486"><Highlight kind="normal">  SDLoc dl(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>(Node, 0));</Highlight></CodeLine>
<Link id="l11487" /><CodeLine lineNumber="11487"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l11488" /><CodeLine lineNumber="11488"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11489" /><CodeLine lineNumber="11489"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// DstVT is the result type, while SatVT is the size to which we saturate</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11490" /><CodeLine lineNumber="11490"><Highlight kind="normal">  EVT SrcVT = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType();</Highlight></CodeLine>
<Link id="l11491" /><CodeLine lineNumber="11491"><Highlight kind="normal">  EVT DstVT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l11492" /><CodeLine lineNumber="11492"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11493" /><CodeLine lineNumber="11493"><Highlight kind="normal">  EVT SatVT = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VTSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1))-&gt;getVT();</Highlight></CodeLine>
<Link id="l11494" /><CodeLine lineNumber="11494"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SatWidth = SatVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l11495" /><CodeLine lineNumber="11495"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> DstWidth = DstVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l11496" /><CodeLine lineNumber="11496"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SatWidth &lt;= DstWidth &amp;&amp;</Highlight></CodeLine>
<Link id="l11497" /><CodeLine lineNumber="11497"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Expected saturation width smaller than result width&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11498" /><CodeLine lineNumber="11498"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11499" /><CodeLine lineNumber="11499"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Determine minimum and maximum integer values and their corresponding</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11500" /><CodeLine lineNumber="11500"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// floating-point values.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11501" /><CodeLine lineNumber="11501"><Highlight kind="normal">  APInt MinInt, MaxInt;</Highlight></CodeLine>
<Link id="l11502" /><CodeLine lineNumber="11502"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsSigned) &#123;</Highlight></CodeLine>
<Link id="l11503" /><CodeLine lineNumber="11503"><Highlight kind="normal">    MinInt = <a href="/docs/api/classes/llvm/apint/#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(SatWidth).<a href="/docs/api/classes/llvm/apint/#aca8fce65eb69a82aa10a635e2e79877a">sext</a>(DstWidth);</Highlight></CodeLine>
<Link id="l11504" /><CodeLine lineNumber="11504"><Highlight kind="normal">    MaxInt = <a href="/docs/api/classes/llvm/apint/#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(SatWidth).<a href="/docs/api/classes/llvm/apint/#aca8fce65eb69a82aa10a635e2e79877a">sext</a>(DstWidth);</Highlight></CodeLine>
<Link id="l11505" /><CodeLine lineNumber="11505"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l11506" /><CodeLine lineNumber="11506"><Highlight kind="normal">    MinInt = <a href="/docs/api/classes/llvm/apint/#a65a6479206acd4113b8aa1c0fbc2158c">APInt::getMinValue</a>(SatWidth).<a href="/docs/api/classes/llvm/apint/#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(DstWidth);</Highlight></CodeLine>
<Link id="l11507" /><CodeLine lineNumber="11507"><Highlight kind="normal">    MaxInt = <a href="/docs/api/classes/llvm/apint/#a331d69b5f93e47e7c596062b77dd5913">APInt::getMaxValue</a>(SatWidth).<a href="/docs/api/classes/llvm/apint/#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(DstWidth);</Highlight></CodeLine>
<Link id="l11508" /><CodeLine lineNumber="11508"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11509" /><CodeLine lineNumber="11509"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11510" /><CodeLine lineNumber="11510"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We cannot risk emitting FP&#95;TO&#95;XINT nodes with a source VT of &#91;b&#93;f16, as</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11511" /><CodeLine lineNumber="11511"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// libcall emission cannot handle this. Large result types will fail.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11512" /><CodeLine lineNumber="11512"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SrcVT == MVT::f16 || SrcVT == MVT::bf16) &#123;</Highlight></CodeLine>
<Link id="l11513" /><CodeLine lineNumber="11513"><Highlight kind="normal">    <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::FP&#95;EXTEND, dl, MVT::f32, Src);</Highlight></CodeLine>
<Link id="l11514" /><CodeLine lineNumber="11514"><Highlight kind="normal">    SrcVT = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>.getValueType();</Highlight></CodeLine>
<Link id="l11515" /><CodeLine lineNumber="11515"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11516" /><CodeLine lineNumber="11516"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11517" /><CodeLine lineNumber="11517"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> fltSemantics &amp;Sem = SrcVT.<a href="/docs/api/structs/llvm/evt/#adf42d7b6a69dc15a64f841d51a9c93b7">getFltSemantics</a>();</Highlight></CodeLine>
<Link id="l11518" /><CodeLine lineNumber="11518"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/lltok/#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">APFloat</a> MinFloat(Sem);</Highlight></CodeLine>
<Link id="l11519" /><CodeLine lineNumber="11519"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/lltok/#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">APFloat</a> MaxFloat(Sem);</Highlight></CodeLine>
<Link id="l11520" /><CodeLine lineNumber="11520"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11521" /><CodeLine lineNumber="11521"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/apfloatbase/#aee544c332088dbef348a0c1c97e21a6a">APFloat::opStatus</a> MinStatus =</Highlight></CodeLine>
<Link id="l11522" /><CodeLine lineNumber="11522"><Highlight kind="normal">      MinFloat.convertFromAPInt(MinInt, IsSigned, <a href="/docs/api/structs/llvm/apfloatbase/#a482d9cf95b588eb05cefeaa5c05be9a3">APFloat::rmTowardZero</a>);</Highlight></CodeLine>
<Link id="l11523" /><CodeLine lineNumber="11523"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/apfloatbase/#aee544c332088dbef348a0c1c97e21a6a">APFloat::opStatus</a> MaxStatus =</Highlight></CodeLine>
<Link id="l11524" /><CodeLine lineNumber="11524"><Highlight kind="normal">      MaxFloat.convertFromAPInt(MaxInt, IsSigned, <a href="/docs/api/structs/llvm/apfloatbase/#a482d9cf95b588eb05cefeaa5c05be9a3">APFloat::rmTowardZero</a>);</Highlight></CodeLine>
<Link id="l11525" /><CodeLine lineNumber="11525"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AreExactFloatBounds = !(MinStatus &amp; <a href="/docs/api/structs/llvm/apfloatbase/#aee544c332088dbef348a0c1c97e21a6aaba98149aef517089f9868bde5b8c41bc">APFloat::opStatus::opInexact</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l11526" /><CodeLine lineNumber="11526"><Highlight kind="normal">                             !(MaxStatus &amp; <a href="/docs/api/structs/llvm/apfloatbase/#aee544c332088dbef348a0c1c97e21a6aaba98149aef517089f9868bde5b8c41bc">APFloat::opStatus::opInexact</a>);</Highlight></CodeLine>
<Link id="l11527" /><CodeLine lineNumber="11527"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11528" /><CodeLine lineNumber="11528"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> MinFloatNode = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(MinFloat, dl, SrcVT);</Highlight></CodeLine>
<Link id="l11529" /><CodeLine lineNumber="11529"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> MaxFloatNode = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a354aae224911d4dab66e34bfa10cf5d6">getConstantFP</a>(MaxFloat, dl, SrcVT);</Highlight></CodeLine>
<Link id="l11530" /><CodeLine lineNumber="11530"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11531" /><CodeLine lineNumber="11531"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the integer bounds are exactly representable as floats and min/max are</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11532" /><CodeLine lineNumber="11532"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// legal, emit a min+max+fptoi sequence. Otherwise we have to use a sequence</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11533" /><CodeLine lineNumber="11533"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// of comparisons and selects.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11534" /><CodeLine lineNumber="11534"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> MinMaxLegal = <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(ISD::FMINNUM, SrcVT) &amp;&amp;</Highlight></CodeLine>
<Link id="l11535" /><CodeLine lineNumber="11535"><Highlight kind="normal">                     <a href="/docs/api/classes/llvm/targetloweringbase/#a9245ed740fe76aaad3e5b0650da21c98">isOperationLegal</a>(ISD::FMAXNUM, SrcVT);</Highlight></CodeLine>
<Link id="l11536" /><CodeLine lineNumber="11536"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AreExactFloatBounds &amp;&amp; MinMaxLegal) &#123;</Highlight></CodeLine>
<Link id="l11537" /><CodeLine lineNumber="11537"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Clamped = <a href="/docs/api/namespaces/anonymous-linkmodules-cpp-/#ab56eb2027bc9c069aa696e54de8b4298a276e79316561733d64abdf00f8e8ae48">Src</a>;</Highlight></CodeLine>
<Link id="l11538" /><CodeLine lineNumber="11538"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11539" /><CodeLine lineNumber="11539"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Clamp Src by MinFloat from below. If Src is NaN the result is MinFloat.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11540" /><CodeLine lineNumber="11540"><Highlight kind="normal">    Clamped = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::FMAXNUM, dl, SrcVT, Clamped, MinFloatNode);</Highlight></CodeLine>
<Link id="l11541" /><CodeLine lineNumber="11541"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Clamp by MaxFloat from above. NaN cannot occur.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11542" /><CodeLine lineNumber="11542"><Highlight kind="normal">    Clamped = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::FMINNUM, dl, SrcVT, Clamped, MaxFloatNode);</Highlight></CodeLine>
<Link id="l11543" /><CodeLine lineNumber="11543"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Convert clamped value to integer.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11544" /><CodeLine lineNumber="11544"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> FpToInt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(IsSigned ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac3f8f8d8437c64b2e2e9f978e2707210">ISD::FP&#95;TO&#95;SINT</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a71640703ec096a8b07111e85cfff6987">ISD::FP&#95;TO&#95;UINT</a>,</Highlight></CodeLine>
<Link id="l11545" /><CodeLine lineNumber="11545"><Highlight kind="normal">                                  dl, DstVT, Clamped);</Highlight></CodeLine>
<Link id="l11546" /><CodeLine lineNumber="11546"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11547" /><CodeLine lineNumber="11547"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// In the unsigned case we&#39;re done, because we mapped NaN to MinFloat,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11548" /><CodeLine lineNumber="11548"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// which will cast to zero.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11549" /><CodeLine lineNumber="11549"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!IsSigned)</Highlight></CodeLine>
<Link id="l11550" /><CodeLine lineNumber="11550"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> FpToInt;</Highlight></CodeLine>
<Link id="l11551" /><CodeLine lineNumber="11551"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11552" /><CodeLine lineNumber="11552"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Otherwise, select 0 if Src is NaN.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11553" /><CodeLine lineNumber="11553"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ZeroInt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, DstVT);</Highlight></CodeLine>
<Link id="l11554" /><CodeLine lineNumber="11554"><Highlight kind="normal">    EVT SetCCVT =</Highlight></CodeLine>
<Link id="l11555" /><CodeLine lineNumber="11555"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), SrcVT);</Highlight></CodeLine>
<Link id="l11556" /><CodeLine lineNumber="11556"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IsNan = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCVT, Src, Src, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a48a334bbe606d5e82c9cd84eaa127b50">ISD::CondCode::SETUO</a>);</Highlight></CodeLine>
<Link id="l11557" /><CodeLine lineNumber="11557"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, DstVT, IsNan, ZeroInt, FpToInt);</Highlight></CodeLine>
<Link id="l11558" /><CodeLine lineNumber="11558"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11559" /><CodeLine lineNumber="11559"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11560" /><CodeLine lineNumber="11560"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> MinIntNode = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(MinInt, dl, DstVT);</Highlight></CodeLine>
<Link id="l11561" /><CodeLine lineNumber="11561"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> MaxIntNode = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(MaxInt, dl, DstVT);</Highlight></CodeLine>
<Link id="l11562" /><CodeLine lineNumber="11562"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11563" /><CodeLine lineNumber="11563"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Result of direct conversion. The assumption here is that the operation is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11564" /><CodeLine lineNumber="11564"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// non-trapping and it&#39;s fine to apply it to an out-of-range value if we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11565" /><CodeLine lineNumber="11565"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// select it away later.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11566" /><CodeLine lineNumber="11566"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> FpToInt =</Highlight></CodeLine>
<Link id="l11567" /><CodeLine lineNumber="11567"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(IsSigned ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac3f8f8d8437c64b2e2e9f978e2707210">ISD::FP&#95;TO&#95;SINT</a> : <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a71640703ec096a8b07111e85cfff6987">ISD::FP&#95;TO&#95;UINT</a>, dl, DstVT, Src);</Highlight></CodeLine>
<Link id="l11568" /><CodeLine lineNumber="11568"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11569" /><CodeLine lineNumber="11569"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuregbankselect-cpp/#a09bc27545df3b02401428427d0b5ce6f">Select</a> = FpToInt;</Highlight></CodeLine>
<Link id="l11570" /><CodeLine lineNumber="11570"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11571" /><CodeLine lineNumber="11571"><Highlight kind="normal">  EVT SetCCVT =</Highlight></CodeLine>
<Link id="l11572" /><CodeLine lineNumber="11572"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), SrcVT);</Highlight></CodeLine>
<Link id="l11573" /><CodeLine lineNumber="11573"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11574" /><CodeLine lineNumber="11574"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If Src ULT MinFloat, select MinInt. In particular, this also selects</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11575" /><CodeLine lineNumber="11575"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// MinInt if Src is NaN.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11576" /><CodeLine lineNumber="11576"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ULT = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCVT, Src, MinFloatNode, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>);</Highlight></CodeLine>
<Link id="l11577" /><CodeLine lineNumber="11577"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuregbankselect-cpp/#a09bc27545df3b02401428427d0b5ce6f">Select</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, DstVT, ULT, MinIntNode, <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuregbankselect-cpp/#a09bc27545df3b02401428427d0b5ce6f">Select</a>);</Highlight></CodeLine>
<Link id="l11578" /><CodeLine lineNumber="11578"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If Src OGT MaxFloat, select MaxInt.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11579" /><CodeLine lineNumber="11579"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> OGT = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCVT, Src, MaxFloatNode, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a31d1e24e08b255d6aa290d67d16ce2c9">ISD::SETOGT</a>);</Highlight></CodeLine>
<Link id="l11580" /><CodeLine lineNumber="11580"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuregbankselect-cpp/#a09bc27545df3b02401428427d0b5ce6f">Select</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, DstVT, OGT, MaxIntNode, <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuregbankselect-cpp/#a09bc27545df3b02401428427d0b5ce6f">Select</a>);</Highlight></CodeLine>
<Link id="l11581" /><CodeLine lineNumber="11581"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11582" /><CodeLine lineNumber="11582"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// In the unsigned case we are done, because we mapped NaN to MinInt, which</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11583" /><CodeLine lineNumber="11583"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// is already zero.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11584" /><CodeLine lineNumber="11584"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!IsSigned)</Highlight></CodeLine>
<Link id="l11585" /><CodeLine lineNumber="11585"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuregbankselect-cpp/#a09bc27545df3b02401428427d0b5ce6f">Select</a>;</Highlight></CodeLine>
<Link id="l11586" /><CodeLine lineNumber="11586"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11587" /><CodeLine lineNumber="11587"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Otherwise, select 0 if Src is NaN.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11588" /><CodeLine lineNumber="11588"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ZeroInt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, DstVT);</Highlight></CodeLine>
<Link id="l11589" /><CodeLine lineNumber="11589"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IsNan = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, SetCCVT, Src, Src, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a48a334bbe606d5e82c9cd84eaa127b50">ISD::CondCode::SETUO</a>);</Highlight></CodeLine>
<Link id="l11590" /><CodeLine lineNumber="11590"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, DstVT, IsNan, ZeroInt, <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuregbankselect-cpp/#a09bc27545df3b02401428427d0b5ce6f">Select</a>);</Highlight></CodeLine>
<Link id="l11591" /><CodeLine lineNumber="11591"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l11592" /><CodeLine lineNumber="11592"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11593" /><CodeLine lineNumber="11593"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a107eaea57b1ba73458df31dcd0d41c01">TargetLowering::expandRoundInexactToOdd</a>(EVT ResultVT, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l11594" /><CodeLine lineNumber="11594"><Highlight kind="normal">                                                </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;dl,</Highlight></CodeLine>
<Link id="l11595" /><CodeLine lineNumber="11595"><Highlight kind="normal">                                                SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l11596" /><CodeLine lineNumber="11596"><Highlight kind="normal">  EVT OperandVT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l11597" /><CodeLine lineNumber="11597"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OperandVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>() == ResultVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>())</Highlight></CodeLine>
<Link id="l11598" /><CodeLine lineNumber="11598"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>;</Highlight></CodeLine>
<Link id="l11599" /><CodeLine lineNumber="11599"><Highlight kind="normal">  EVT ResultIntVT = ResultVT.<a href="/docs/api/structs/llvm/evt/#a25eda78153285bc3bc4708e149b7e9e8">changeTypeToInteger</a>();</Highlight></CodeLine>
<Link id="l11600" /><CodeLine lineNumber="11600"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We are rounding binary64/binary128 -&gt; binary32 -&gt; bfloat16. This</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11601" /><CodeLine lineNumber="11601"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// can induce double-rounding which may alter the results. We can</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11602" /><CodeLine lineNumber="11602"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// correct for this using a trick explained in: Boldo, Sylvie, and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11603" /><CodeLine lineNumber="11603"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Guillaume Melquiond. &quot;When double rounding is odd.&quot; 17th IMACS</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11604" /><CodeLine lineNumber="11604"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// World Congress. 2005</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11605" /><CodeLine lineNumber="11605"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> BitSize = OperandVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l11606" /><CodeLine lineNumber="11606"><Highlight kind="normal">  EVT WideIntVT = OperandVT.<a href="/docs/api/structs/llvm/evt/#a25eda78153285bc3bc4708e149b7e9e8">changeTypeToInteger</a>();</Highlight></CodeLine>
<Link id="l11607" /><CodeLine lineNumber="11607"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> OpAsInt = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a64f6469ab95c4eec77e4ccf303619a81">getBitcast</a>(WideIntVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l11608" /><CodeLine lineNumber="11608"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SignBit =</Highlight></CodeLine>
<Link id="l11609" /><CodeLine lineNumber="11609"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, WideIntVT, OpAsInt,</Highlight></CodeLine>
<Link id="l11610" /><CodeLine lineNumber="11610"><Highlight kind="normal">                  DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#a1e6f0d8dfed0ab631b488a3e6317718e">APInt::getSignMask</a>(BitSize), dl, WideIntVT));</Highlight></CodeLine>
<Link id="l11611" /><CodeLine lineNumber="11611"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> AbsWide;</Highlight></CodeLine>
<Link id="l11612" /><CodeLine lineNumber="11612"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aa93fbbc66d52a51d178af8ac4398ec05">isOperationLegalOrCustom</a>(ISD::FABS, OperandVT)) &#123;</Highlight></CodeLine>
<Link id="l11613" /><CodeLine lineNumber="11613"><Highlight kind="normal">    AbsWide = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::FABS, dl, OperandVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l11614" /><CodeLine lineNumber="11614"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l11615" /><CodeLine lineNumber="11615"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ClearedSign = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(</Highlight></CodeLine>
<Link id="l11616" /><CodeLine lineNumber="11616"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, WideIntVT, OpAsInt,</Highlight></CodeLine>
<Link id="l11617" /><CodeLine lineNumber="11617"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(<a href="/docs/api/classes/llvm/apint/#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(BitSize), dl, WideIntVT));</Highlight></CodeLine>
<Link id="l11618" /><CodeLine lineNumber="11618"><Highlight kind="normal">    AbsWide = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a64f6469ab95c4eec77e4ccf303619a81">getBitcast</a>(OperandVT, ClearedSign);</Highlight></CodeLine>
<Link id="l11619" /><CodeLine lineNumber="11619"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11620" /><CodeLine lineNumber="11620"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> AbsNarrow = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abb12b9027c14ccb724eb3c506a7f8745">getFPExtendOrRound</a>(AbsWide, dl, ResultVT);</Highlight></CodeLine>
<Link id="l11621" /><CodeLine lineNumber="11621"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> AbsNarrowAsWide = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abb12b9027c14ccb724eb3c506a7f8745">getFPExtendOrRound</a>(AbsNarrow, dl, OperandVT);</Highlight></CodeLine>
<Link id="l11622" /><CodeLine lineNumber="11622"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11623" /><CodeLine lineNumber="11623"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We can keep the narrow value as-is if narrowing was exact (no</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11624" /><CodeLine lineNumber="11624"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// rounding error), the wide value was NaN (the narrow value is also</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11625" /><CodeLine lineNumber="11625"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// NaN and should be preserved) or if we rounded to the odd value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11626" /><CodeLine lineNumber="11626"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NarrowBits = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::BITCAST, dl, ResultIntVT, AbsNarrow);</Highlight></CodeLine>
<Link id="l11627" /><CodeLine lineNumber="11627"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> One = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, ResultIntVT);</Highlight></CodeLine>
<Link id="l11628" /><CodeLine lineNumber="11628"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NegativeOne = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1b134112bb3b8986d8082832a16eab6f">getAllOnesConstant</a>(dl, ResultIntVT);</Highlight></CodeLine>
<Link id="l11629" /><CodeLine lineNumber="11629"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, ResultIntVT, NarrowBits, One);</Highlight></CodeLine>
<Link id="l11630" /><CodeLine lineNumber="11630"><Highlight kind="normal">  EVT ResultIntVTCCVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(</Highlight></CodeLine>
<Link id="l11631" /><CodeLine lineNumber="11631"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>.getValueType());</Highlight></CodeLine>
<Link id="l11632" /><CodeLine lineNumber="11632"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/logicalview/#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, dl, ResultIntVT);</Highlight></CodeLine>
<Link id="l11633" /><CodeLine lineNumber="11633"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// The result is already odd so we don&#39;t need to do anything.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11634" /><CodeLine lineNumber="11634"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> AlreadyOdd = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, ResultIntVTCCVT, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, Zero, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>);</Highlight></CodeLine>
<Link id="l11635" /><CodeLine lineNumber="11635"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11636" /><CodeLine lineNumber="11636"><Highlight kind="normal">  EVT WideSetCCVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(),</Highlight></CodeLine>
<Link id="l11637" /><CodeLine lineNumber="11637"><Highlight kind="normal">                                       AbsWide.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>());</Highlight></CodeLine>
<Link id="l11638" /><CodeLine lineNumber="11638"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We keep results which are exact, odd or NaN.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11639" /><CodeLine lineNumber="11639"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> KeepNarrow =</Highlight></CodeLine>
<Link id="l11640" /><CodeLine lineNumber="11640"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, WideSetCCVT, AbsWide, AbsNarrowAsWide, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a0deb50cd2f3f8e4a94eef4cdf769b848">ISD::SETUEQ</a>);</Highlight></CodeLine>
<Link id="l11641" /><CodeLine lineNumber="11641"><Highlight kind="normal">  KeepNarrow = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, WideSetCCVT, KeepNarrow, AlreadyOdd);</Highlight></CodeLine>
<Link id="l11642" /><CodeLine lineNumber="11642"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We morally performed a round-down if AbsNarrow is smaller than</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11643" /><CodeLine lineNumber="11643"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// AbsWide.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11644" /><CodeLine lineNumber="11644"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NarrowIsRd =</Highlight></CodeLine>
<Link id="l11645" /><CodeLine lineNumber="11645"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, WideSetCCVT, AbsWide, AbsNarrowAsWide, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a31d1e24e08b255d6aa290d67d16ce2c9">ISD::SETOGT</a>);</Highlight></CodeLine>
<Link id="l11646" /><CodeLine lineNumber="11646"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If the narrow value is odd or exact, pick it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11647" /><CodeLine lineNumber="11647"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Otherwise, narrow is even and corresponds to either the rounded-up</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11648" /><CodeLine lineNumber="11648"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// or rounded-down value. If narrow is the rounded-down value, we want</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11649" /><CodeLine lineNumber="11649"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the rounded-up value as it will be odd.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11650" /><CodeLine lineNumber="11650"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Adjust = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, ResultIntVT, NarrowIsRd, One, NegativeOne);</Highlight></CodeLine>
<Link id="l11651" /><CodeLine lineNumber="11651"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Adjusted = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, ResultIntVT, NarrowBits, Adjust);</Highlight></CodeLine>
<Link id="l11652" /><CodeLine lineNumber="11652"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, ResultIntVT, KeepNarrow, NarrowBits, Adjusted);</Highlight></CodeLine>
<Link id="l11653" /><CodeLine lineNumber="11653"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> ShiftAmount = BitSize - ResultVT.<a href="/docs/api/structs/llvm/evt/#a547a88964f1673c84410baa7a2a83f4d">getScalarSizeInBits</a>();</Highlight></CodeLine>
<Link id="l11654" /><CodeLine lineNumber="11654"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ShiftCnst = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(ShiftAmount, WideIntVT, dl);</Highlight></CodeLine>
<Link id="l11655" /><CodeLine lineNumber="11655"><Highlight kind="normal">  SignBit = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, WideIntVT, SignBit, ShiftCnst);</Highlight></CodeLine>
<Link id="l11656" /><CodeLine lineNumber="11656"><Highlight kind="normal">  SignBit = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, ResultIntVT, SignBit);</Highlight></CodeLine>
<Link id="l11657" /><CodeLine lineNumber="11657"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, ResultIntVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, SignBit);</Highlight></CodeLine>
<Link id="l11658" /><CodeLine lineNumber="11658"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::BITCAST, dl, ResultVT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l11659" /><CodeLine lineNumber="11659"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l11660" /><CodeLine lineNumber="11660"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11661" /><CodeLine lineNumber="11661"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a077a3e5315f5c8e800b858c179a73f86">TargetLowering::expandFP&#95;ROUND</a>(SDNode &#42;Node, SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l11662" /><CodeLine lineNumber="11662"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110adaf9a3cb5c2ef5eb713bd6bf4ae23aeb">ISD::FP&#95;ROUND</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Unexpected opcode!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11663" /><CodeLine lineNumber="11663"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l11664" /><CodeLine lineNumber="11664"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l11665" /><CodeLine lineNumber="11665"><Highlight kind="normal">  SDLoc dl(Node);</Highlight></CodeLine>
<Link id="l11666" /><CodeLine lineNumber="11666"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>() == MVT::bf16) &#123;</Highlight></CodeLine>
<Link id="l11667" /><CodeLine lineNumber="11667"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getConstantOperandVal(1) == 1) &#123;</Highlight></CodeLine>
<Link id="l11668" /><CodeLine lineNumber="11668"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::FP&#95;TO&#95;BF16, dl, VT, <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0));</Highlight></CodeLine>
<Link id="l11669" /><CodeLine lineNumber="11669"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l11670" /><CodeLine lineNumber="11670"><Highlight kind="normal">    EVT OperandVT = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>.getValueType();</Highlight></CodeLine>
<Link id="l11671" /><CodeLine lineNumber="11671"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> IsNaN = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(</Highlight></CodeLine>
<Link id="l11672" /><CodeLine lineNumber="11672"><Highlight kind="normal">        dl,</Highlight></CodeLine>
<Link id="l11673" /><CodeLine lineNumber="11673"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/targetloweringbase/#a76483b2b4498079d3778c57326c39e99">getSetCCResultType</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>(), &#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), OperandVT),</Highlight></CodeLine>
<Link id="l11674" /><CodeLine lineNumber="11674"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a48a334bbe606d5e82c9cd84eaa127b50">ISD::SETUO</a>);</Highlight></CodeLine>
<Link id="l11675" /><CodeLine lineNumber="11675"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11676" /><CodeLine lineNumber="11676"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We are rounding binary64/binary128 -&gt; binary32 -&gt; bfloat16. This</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11677" /><CodeLine lineNumber="11677"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// can induce double-rounding which may alter the results. We can</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11678" /><CodeLine lineNumber="11678"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// correct for this using a trick explained in: Boldo, Sylvie, and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11679" /><CodeLine lineNumber="11679"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Guillaume Melquiond. &quot;When double rounding is odd.&quot; 17th IMACS</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11680" /><CodeLine lineNumber="11680"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// World Congress. 2005</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11681" /><CodeLine lineNumber="11681"><Highlight kind="normal">    EVT <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#affe0a8af32c1d4e53b07959b240641b4">F32</a> = VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() ? VT.<a href="/docs/api/structs/llvm/evt/#ad9d00ad929ec93255787f7f80c4659d9">changeVectorElementType</a>(MVT::f32) : MVT::f32;</Highlight></CodeLine>
<Link id="l11682" /><CodeLine lineNumber="11682"><Highlight kind="normal">    EVT <a href="/docs/api/namespaces/anonymous-dxilopbuilder-cpp-/#a3fe8fcf1f03e5da864eb86be303a3216a1f0bcb70cad1532c77dd33155ac68acc">I32</a> = <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#affe0a8af32c1d4e53b07959b240641b4">F32</a>.changeTypeToInteger();</Highlight></CodeLine>
<Link id="l11683" /><CodeLine lineNumber="11683"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = expandRoundInexactToOdd(<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp/#affe0a8af32c1d4e53b07959b240641b4">F32</a>, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, dl, DAG);</Highlight></CodeLine>
<Link id="l11684" /><CodeLine lineNumber="11684"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::BITCAST, dl, I32, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l11685" /><CodeLine lineNumber="11685"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11686" /><CodeLine lineNumber="11686"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Conversions should set NaN&#39;s quiet bit. This also prevents NaNs from</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11687" /><CodeLine lineNumber="11687"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// turning into infinities.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11688" /><CodeLine lineNumber="11688"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> NaN =</Highlight></CodeLine>
<Link id="l11689" /><CodeLine lineNumber="11689"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, I32, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0x400000, dl, I32));</Highlight></CodeLine>
<Link id="l11690" /><CodeLine lineNumber="11690"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11691" /><CodeLine lineNumber="11691"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Factor in the contribution of the low 16 bits.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11692" /><CodeLine lineNumber="11692"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> One = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(1, dl, I32);</Highlight></CodeLine>
<Link id="l11693" /><CodeLine lineNumber="11693"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Lsb = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, I32, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l11694" /><CodeLine lineNumber="11694"><Highlight kind="normal">                              DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(16, I32, dl));</Highlight></CodeLine>
<Link id="l11695" /><CodeLine lineNumber="11695"><Highlight kind="normal">    Lsb = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, I32, Lsb, One);</Highlight></CodeLine>
<Link id="l11696" /><CodeLine lineNumber="11696"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> RoundingBias =</Highlight></CodeLine>
<Link id="l11697" /><CodeLine lineNumber="11697"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, I32, DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0x7fff, dl, I32), Lsb);</Highlight></CodeLine>
<Link id="l11698" /><CodeLine lineNumber="11698"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, I32, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>, RoundingBias);</Highlight></CodeLine>
<Link id="l11699" /><CodeLine lineNumber="11699"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11700" /><CodeLine lineNumber="11700"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Don&#39;t round if we had a NaN, we don&#39;t want to turn 2147483647 into</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11701" /><CodeLine lineNumber="11701"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// 0x80000000.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11702" /><CodeLine lineNumber="11702"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(dl, I32, IsNaN, NaN, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a>);</Highlight></CodeLine>
<Link id="l11703" /><CodeLine lineNumber="11703"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11704" /><CodeLine lineNumber="11704"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Now that we have rounded, shift the bits into position.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11705" /><CodeLine lineNumber="11705"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, I32, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>,</Highlight></CodeLine>
<Link id="l11706" /><CodeLine lineNumber="11706"><Highlight kind="normal">                     DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1a45c74ebe73ebaf0bd8463164e0b764">getShiftAmountConstant</a>(16, I32, dl));</Highlight></CodeLine>
<Link id="l11707" /><CodeLine lineNumber="11707"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::BITCAST, dl, I32, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l11708" /><CodeLine lineNumber="11708"><Highlight kind="normal">    EVT <a href="/docs/api/namespaces/anonymous-dxilopbuilder-cpp-/#a3fe8fcf1f03e5da864eb86be303a3216a5526adc82ddfe412c99755949207ecf0">I16</a> = <a href="/docs/api/namespaces/anonymous-dxilopbuilder-cpp-/#a3fe8fcf1f03e5da864eb86be303a3216a1f0bcb70cad1532c77dd33155ac68acc">I32</a>.isVector() ? <a href="/docs/api/namespaces/anonymous-dxilopbuilder-cpp-/#a3fe8fcf1f03e5da864eb86be303a3216a1f0bcb70cad1532c77dd33155ac68acc">I32</a>.changeVectorElementType(MVT::i16) : MVT::i16;</Highlight></CodeLine>
<Link id="l11709" /><CodeLine lineNumber="11709"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, I16, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l11710" /><CodeLine lineNumber="11710"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::BITCAST, dl, VT, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</Highlight></CodeLine>
<Link id="l11711" /><CodeLine lineNumber="11711"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11712" /><CodeLine lineNumber="11712"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l11713" /><CodeLine lineNumber="11713"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l11714" /><CodeLine lineNumber="11714"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11715" /><CodeLine lineNumber="11715"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#af0d282b6f6a3825d043eb576c1ab5553">TargetLowering::expandVectorSplice</a>(SDNode &#42;Node,</Highlight></CodeLine>
<Link id="l11716" /><CodeLine lineNumber="11716"><Highlight kind="normal">                                           SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l11717" /><CodeLine lineNumber="11717"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode() == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad55a17543ef86f6d46aebb45028a9067">ISD::VECTOR&#95;SPLICE</a> &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Unexpected opcode!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11718" /><CodeLine lineNumber="11718"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0).isScalableVector() &amp;&amp;</Highlight></CodeLine>
<Link id="l11719" /><CodeLine lineNumber="11719"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Fixed length vector types expected to use SHUFFLE&#95;VECTOR!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11720" /><CodeLine lineNumber="11720"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11721" /><CodeLine lineNumber="11721"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l11722" /><CodeLine lineNumber="11722"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> V1 = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l11723" /><CodeLine lineNumber="11723"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/nvptx/ptxldstinstcode/#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l11724" /><CodeLine lineNumber="11724"><Highlight kind="normal">  int64&#95;t <a href="/docs/api/namespaces/llvm/amdgpu/#a4554b8c1e903115f6d7c75b0cc8900dcae71a5bce3c21304da97e1e5d3dab0ed3">Imm</a> = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(2))-&gt;getSExtValue();</Highlight></CodeLine>
<Link id="l11725" /><CodeLine lineNumber="11725"><Highlight kind="normal">  SDLoc <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(Node);</Highlight></CodeLine>
<Link id="l11726" /><CodeLine lineNumber="11726"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11727" /><CodeLine lineNumber="11727"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Expand through memory thusly:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11728" /><CodeLine lineNumber="11728"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//  Alloca CONCAT&#95;VECTORS&#95;TYPES(V1, V2) Ptr</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11729" /><CodeLine lineNumber="11729"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//  Store V1, Ptr</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11730" /><CodeLine lineNumber="11730"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//  Store V2, Ptr + sizeof(V1)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11731" /><CodeLine lineNumber="11731"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//  If (Imm &lt; 0)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11732" /><CodeLine lineNumber="11732"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//    TrailingElts = -Imm</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11733" /><CodeLine lineNumber="11733"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//    Ptr = Ptr + sizeof(V1) - (TrailingElts &#42; sizeof(VT.Elt))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11734" /><CodeLine lineNumber="11734"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//  else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11735" /><CodeLine lineNumber="11735"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//    Ptr = Ptr + (Imm &#42; sizeof(VT.Elt))</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11736" /><CodeLine lineNumber="11736"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//  Res = Load Ptr</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11737" /><CodeLine lineNumber="11737"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11738" /><CodeLine lineNumber="11738"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/amdgpu/hsamd/kernel/arg/key/#a6b334a5f83504ebc99cc59f4f333ff98">Align</a> Alignment = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a017a91fde9e329082de784114d8f137c">getReducedAlign</a>(VT, </Highlight><Highlight kind="comment">/&#42;UseABI=&#42;/</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11739" /><CodeLine lineNumber="11739"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11740" /><CodeLine lineNumber="11740"><Highlight kind="normal">  EVT MemVT = <a href="/docs/api/structs/llvm/evt/#a210ba6b43ba451b698857dd9de71bd15">EVT::getVectorVT</a>(&#42;DAG.<a href="/docs/api/classes/llvm/selectiondag/#adecf615928faed0c8a082ffdb65dfea0">getContext</a>(), VT.<a href="/docs/api/structs/llvm/evt/#abc4c6365ade17ad4443ad0e381e7479d">getVectorElementType</a>(),</Highlight></CodeLine>
<Link id="l11741" /><CodeLine lineNumber="11741"><Highlight kind="normal">                               VT.<a href="/docs/api/structs/llvm/evt/#a3d102abca1c9c95f36546dff2f39273b">getVectorElementCount</a>() &#42; 2);</Highlight></CodeLine>
<Link id="l11742" /><CodeLine lineNumber="11742"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/codeview/#aa8c11d016a2dd473a4cf0ed1da777f5eaf80f5476044d70697d689c8f32415ce9">StackPtr</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ae83b3d8e9a944b5d818e80524a5003e2">CreateStackTemporary</a>(MemVT.<a href="/docs/api/structs/llvm/evt/#a1572b31fadbd0d758314b8d35a050410">getStoreSize</a>(), Alignment);</Highlight></CodeLine>
<Link id="l11743" /><CodeLine lineNumber="11743"><Highlight kind="normal">  EVT PtrVT = <a href="/docs/api/namespaces/llvm/codeview/#aa8c11d016a2dd473a4cf0ed1da777f5eaf80f5476044d70697d689c8f32415ce9">StackPtr</a>.getValueType();</Highlight></CodeLine>
<Link id="l11744" /><CodeLine lineNumber="11744"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;MF = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac64ec73b0617befef1fb2eae78d12b5f">getMachineFunction</a>();</Highlight></CodeLine>
<Link id="l11745" /><CodeLine lineNumber="11745"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">FrameIndex</a> = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;FrameIndexSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/codeview/#aa8c11d016a2dd473a4cf0ed1da777f5eaf80f5476044d70697d689c8f32415ce9">StackPtr</a>.getNode())-&gt;getIndex();</Highlight></CodeLine>
<Link id="l11746" /><CodeLine lineNumber="11746"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> PtrInfo = <a href="/docs/api/structs/llvm/machinepointerinfo/#ad8ce1aee13dbdcc05d20284a30e83170">MachinePointerInfo::getFixedStack</a>(MF, FrameIndex);</Highlight></CodeLine>
<Link id="l11747" /><CodeLine lineNumber="11747"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11748" /><CodeLine lineNumber="11748"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Store the lo part of CONCAT&#95;VECTORS(V1, V2)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11749" /><CodeLine lineNumber="11749"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> StoreV1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a89ed6b26ee4f62aec32468329f828a2f">getStore</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#af0f68c9c0e4a38aebd5773f80dd5b716">getEntryNode</a>(), <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, V1, StackPtr, PtrInfo);</Highlight></CodeLine>
<Link id="l11750" /><CodeLine lineNumber="11750"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Store the hi part of CONCAT&#95;VECTORS(V1, V2)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11751" /><CodeLine lineNumber="11751"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> OffsetToV2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1e362f3699fd2c3f46c7a3690031dda3">getVScale</a>(</Highlight></CodeLine>
<Link id="l11752" /><CodeLine lineNumber="11752"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, PtrVT,</Highlight></CodeLine>
<Link id="l11753" /><CodeLine lineNumber="11753"><Highlight kind="normal">      APInt(PtrVT.<a href="/docs/api/structs/llvm/evt/#a7712dd4392b7eb944b709ac8442634d9">getFixedSizeInBits</a>(), VT.<a href="/docs/api/structs/llvm/evt/#a1572b31fadbd0d758314b8d35a050410">getStoreSize</a>().<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>()));</Highlight></CodeLine>
<Link id="l11754" /><CodeLine lineNumber="11754"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> StackPtr2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, PtrVT, StackPtr, OffsetToV2);</Highlight></CodeLine>
<Link id="l11755" /><CodeLine lineNumber="11755"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/nvptxisd/#ab995b6d422b079c863075e073b2eb96ba4ddaa3d7050b68b3c9eb50ff10f038b3">StoreV2</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a89ed6b26ee4f62aec32468329f828a2f">getStore</a>(StoreV1, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, V2, StackPtr2, PtrInfo);</Highlight></CodeLine>
<Link id="l11756" /><CodeLine lineNumber="11756"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11757" /><CodeLine lineNumber="11757"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Imm &gt;= 0) &#123;</Highlight></CodeLine>
<Link id="l11758" /><CodeLine lineNumber="11758"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Load back the required element. getVectorElementPointer takes care of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11759" /><CodeLine lineNumber="11759"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// clamping the index if it&#39;s out-of-bounds.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11760" /><CodeLine lineNumber="11760"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/codeview/#aa8c11d016a2dd473a4cf0ed1da777f5eaf80f5476044d70697d689c8f32415ce9">StackPtr</a> = getVectorElementPointer(DAG, StackPtr, VT, <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(2));</Highlight></CodeLine>
<Link id="l11761" /><CodeLine lineNumber="11761"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Load the spliced result</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11762" /><CodeLine lineNumber="11762"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a3c3b16945cf064f59363bdefdfe2b492">getLoad</a>(VT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, StoreV2, StackPtr,</Highlight></CodeLine>
<Link id="l11763" /><CodeLine lineNumber="11763"><Highlight kind="normal">                       <a href="/docs/api/structs/llvm/machinepointerinfo/#aa5f0f4a7de5def1c9d9f6a750a9b1aa1">MachinePointerInfo::getUnknownStack</a>(MF));</Highlight></CodeLine>
<Link id="l11764" /><CodeLine lineNumber="11764"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11765" /><CodeLine lineNumber="11765"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11766" /><CodeLine lineNumber="11766"><Highlight kind="normal">  uint64&#95;t TrailingElts = -<a href="/docs/api/namespaces/llvm/amdgpu/#a4554b8c1e903115f6d7c75b0cc8900dcae71a5bce3c21304da97e1e5d3dab0ed3">Imm</a>;</Highlight></CodeLine>
<Link id="l11767" /><CodeLine lineNumber="11767"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11768" /><CodeLine lineNumber="11768"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// NOTE: TrailingElts must be clamped so as not to read outside of V1:V2.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11769" /><CodeLine lineNumber="11769"><Highlight kind="normal">  TypeSize EltByteSize = VT.<a href="/docs/api/structs/llvm/evt/#abc4c6365ade17ad4443ad0e381e7479d">getVectorElementType</a>().<a href="/docs/api/structs/llvm/evt/#a1572b31fadbd0d758314b8d35a050410">getStoreSize</a>();</Highlight></CodeLine>
<Link id="l11770" /><CodeLine lineNumber="11770"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> TrailingBytes =</Highlight></CodeLine>
<Link id="l11771" /><CodeLine lineNumber="11771"><Highlight kind="normal">      DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(TrailingElts &#42; EltByteSize, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, PtrVT);</Highlight></CodeLine>
<Link id="l11772" /><CodeLine lineNumber="11772"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11773" /><CodeLine lineNumber="11773"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TrailingElts &gt; VT.<a href="/docs/api/structs/llvm/evt/#a53fb11c0140efce7e25ca9ff5ccbac96">getVectorMinNumElements</a>()) &#123;</Highlight></CodeLine>
<Link id="l11774" /><CodeLine lineNumber="11774"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> VLBytes =</Highlight></CodeLine>
<Link id="l11775" /><CodeLine lineNumber="11775"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1e362f3699fd2c3f46c7a3690031dda3">getVScale</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, PtrVT,</Highlight></CodeLine>
<Link id="l11776" /><CodeLine lineNumber="11776"><Highlight kind="normal">                      APInt(PtrVT.<a href="/docs/api/structs/llvm/evt/#a7712dd4392b7eb944b709ac8442634d9">getFixedSizeInBits</a>(),</Highlight></CodeLine>
<Link id="l11777" /><CodeLine lineNumber="11777"><Highlight kind="normal">                            VT.<a href="/docs/api/structs/llvm/evt/#a1572b31fadbd0d758314b8d35a050410">getStoreSize</a>().<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>()));</Highlight></CodeLine>
<Link id="l11778" /><CodeLine lineNumber="11778"><Highlight kind="normal">    TrailingBytes = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a17126302da6199930e55e841ca1b082d">ISD::UMIN</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, PtrVT, TrailingBytes, VLBytes);</Highlight></CodeLine>
<Link id="l11779" /><CodeLine lineNumber="11779"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11780" /><CodeLine lineNumber="11780"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11781" /><CodeLine lineNumber="11781"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Calculate the start address of the spliced result.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11782" /><CodeLine lineNumber="11782"><Highlight kind="normal">  StackPtr2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, PtrVT, StackPtr2, TrailingBytes);</Highlight></CodeLine>
<Link id="l11783" /><CodeLine lineNumber="11783"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11784" /><CodeLine lineNumber="11784"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Load the spliced result</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11785" /><CodeLine lineNumber="11785"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a3c3b16945cf064f59363bdefdfe2b492">getLoad</a>(VT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, StoreV2, StackPtr2,</Highlight></CodeLine>
<Link id="l11786" /><CodeLine lineNumber="11786"><Highlight kind="normal">                     <a href="/docs/api/structs/llvm/machinepointerinfo/#aa5f0f4a7de5def1c9d9f6a750a9b1aa1">MachinePointerInfo::getUnknownStack</a>(MF));</Highlight></CodeLine>
<Link id="l11787" /><CodeLine lineNumber="11787"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l11788" /><CodeLine lineNumber="11788"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11789" /><CodeLine lineNumber="11789"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#a367e029393fe61621674a8d22eddfbd9">TargetLowering::expandVECTOR&#95;COMPRESS</a>(SDNode &#42;Node,</Highlight></CodeLine>
<Link id="l11790" /><CodeLine lineNumber="11790"><Highlight kind="normal">                                              SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l11791" /><CodeLine lineNumber="11791"><Highlight kind="normal">  SDLoc <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(Node);</Highlight></CodeLine>
<Link id="l11792" /><CodeLine lineNumber="11792"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Vec = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(0);</Highlight></CodeLine>
<Link id="l11793" /><CodeLine lineNumber="11793"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a> = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(1);</Highlight></CodeLine>
<Link id="l11794" /><CodeLine lineNumber="11794"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Passthru = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOperand(2);</Highlight></CodeLine>
<Link id="l11795" /><CodeLine lineNumber="11795"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11796" /><CodeLine lineNumber="11796"><Highlight kind="normal">  EVT VecVT = Vec.<a href="/docs/api/classes/llvm/sdvalue/#a6b2b8ca5b0fdf6484247d5ae74deb9ff">getValueType</a>();</Highlight></CodeLine>
<Link id="l11797" /><CodeLine lineNumber="11797"><Highlight kind="normal">  EVT ScalarVT = VecVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l11798" /><CodeLine lineNumber="11798"><Highlight kind="normal">  EVT MaskVT = <a href="/docs/api/namespaces/llvm/bitmaskenumdetail/#a4562904154aff9698a612bc7f6086a4c">Mask</a>.getValueType();</Highlight></CodeLine>
<Link id="l11799" /><CodeLine lineNumber="11799"><Highlight kind="normal">  EVT MaskScalarVT = MaskVT.<a href="/docs/api/structs/llvm/evt/#aa85c75e8eb097f02caeb5b9119eebfef">getScalarType</a>();</Highlight></CodeLine>
<Link id="l11800" /><CodeLine lineNumber="11800"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11801" /><CodeLine lineNumber="11801"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Needs to be handled by targets that have scalable vector types.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11802" /><CodeLine lineNumber="11802"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (VecVT.<a href="/docs/api/structs/llvm/evt/#ab8967b7214f38cdea9c0158dbe2ffa31">isScalableVector</a>())</Highlight></CodeLine>
<Link id="l11803" /><CodeLine lineNumber="11803"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7f2a3d4dcfee70225988aec53ff1e173">report&#95;fatal&#95;error</a>(</Highlight><Highlight kind="stringliteral">&quot;Cannot expand masked&#95;compress for scalable vectors.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11804" /><CodeLine lineNumber="11804"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11805" /><CodeLine lineNumber="11805"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/codeview/#aa8c11d016a2dd473a4cf0ed1da777f5eaf80f5476044d70697d689c8f32415ce9">StackPtr</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ae83b3d8e9a944b5d818e80524a5003e2">CreateStackTemporary</a>(</Highlight></CodeLine>
<Link id="l11806" /><CodeLine lineNumber="11806"><Highlight kind="normal">      VecVT.<a href="/docs/api/structs/llvm/evt/#a1572b31fadbd0d758314b8d35a050410">getStoreSize</a>(), DAG.<a href="/docs/api/classes/llvm/selectiondag/#a017a91fde9e329082de784114d8f137c">getReducedAlign</a>(VecVT, </Highlight><Highlight kind="comment">/&#42;UseABI=&#42;/</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l11807" /><CodeLine lineNumber="11807"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> FI = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;FrameIndexSDNode&gt;</a>(<a href="/docs/api/namespaces/llvm/codeview/#aa8c11d016a2dd473a4cf0ed1da777f5eaf80f5476044d70697d689c8f32415ce9">StackPtr</a>.getNode())-&gt;getIndex();</Highlight></CodeLine>
<Link id="l11808" /><CodeLine lineNumber="11808"><Highlight kind="normal">  MachinePointerInfo PtrInfo =</Highlight></CodeLine>
<Link id="l11809" /><CodeLine lineNumber="11809"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/machinepointerinfo/#ad8ce1aee13dbdcc05d20284a30e83170">MachinePointerInfo::getFixedStack</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac64ec73b0617befef1fb2eae78d12b5f">getMachineFunction</a>(), FI);</Highlight></CodeLine>
<Link id="l11810" /><CodeLine lineNumber="11810"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11811" /><CodeLine lineNumber="11811"><Highlight kind="normal">  MVT PositionVT = <a href="/docs/api/classes/llvm/targetloweringbase/#a2dd702dca28f51ec1137faed5d0e5837">getVectorIdxTy</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#a6b442ac8a9fc6147b95ccfb2c3322121">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l11812" /><CodeLine lineNumber="11812"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#af0f68c9c0e4a38aebd5773f80dd5b716">getEntryNode</a>();</Highlight></CodeLine>
<Link id="l11813" /><CodeLine lineNumber="11813"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> OutPos = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(0, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, PositionVT);</Highlight></CodeLine>
<Link id="l11814" /><CodeLine lineNumber="11814"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11815" /><CodeLine lineNumber="11815"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> HasPassthru = !Passthru.<a href="/docs/api/classes/llvm/sdvalue/#a1c861a21f795c3108ab690f3a45c881a">isUndef</a>();</Highlight></CodeLine>
<Link id="l11816" /><CodeLine lineNumber="11816"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11817" /><CodeLine lineNumber="11817"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If we have a passthru vector, store it on the stack, overwrite the matching</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11818" /><CodeLine lineNumber="11818"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// positions and then re-write the last element that was potentially</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11819" /><CodeLine lineNumber="11819"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// overwritten even though mask&#91;i&#93; = false.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11820" /><CodeLine lineNumber="11820"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (HasPassthru)</Highlight></CodeLine>
<Link id="l11821" /><CodeLine lineNumber="11821"><Highlight kind="normal">    <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a89ed6b26ee4f62aec32468329f828a2f">getStore</a>(Chain, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, Passthru, StackPtr, PtrInfo);</Highlight></CodeLine>
<Link id="l11822" /><CodeLine lineNumber="11822"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11823" /><CodeLine lineNumber="11823"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LastWriteVal;</Highlight></CodeLine>
<Link id="l11824" /><CodeLine lineNumber="11824"><Highlight kind="normal">  APInt PassthruSplatVal;</Highlight></CodeLine>
<Link id="l11825" /><CodeLine lineNumber="11825"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsSplatPassthru =</Highlight></CodeLine>
<Link id="l11826" /><CodeLine lineNumber="11826"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/isd/#aafb64237a88493be2c913b0a51630a0f">ISD::isConstantSplatVector</a>(Passthru.<a href="/docs/api/classes/llvm/sdvalue/#a2b08aa629a6326d1a0444ee6d477c39d">getNode</a>(), PassthruSplatVal);</Highlight></CodeLine>
<Link id="l11827" /><CodeLine lineNumber="11827"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11828" /><CodeLine lineNumber="11828"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsSplatPassthru) &#123;</Highlight></CodeLine>
<Link id="l11829" /><CodeLine lineNumber="11829"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// As we do not know which position we wrote to last, we cannot simply</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11830" /><CodeLine lineNumber="11830"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// access that index from the passthru vector. So we first check if passthru</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11831" /><CodeLine lineNumber="11831"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// is a splat vector, to use any element ...</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11832" /><CodeLine lineNumber="11832"><Highlight kind="normal">    LastWriteVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(PassthruSplatVal, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ScalarVT);</Highlight></CodeLine>
<Link id="l11833" /><CodeLine lineNumber="11833"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (HasPassthru) &#123;</Highlight></CodeLine>
<Link id="l11834" /><CodeLine lineNumber="11834"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// ... if it is not a splat vector, we need to get the passthru value at</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11835" /><CodeLine lineNumber="11835"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// position = popcount(mask) and re-load it from the stack before it is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11836" /><CodeLine lineNumber="11836"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// overwritten in the loop below.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11837" /><CodeLine lineNumber="11837"><Highlight kind="normal">    EVT PopcountVT = ScalarVT.<a href="/docs/api/structs/llvm/evt/#a25eda78153285bc3bc4708e149b7e9e8">changeTypeToInteger</a>();</Highlight></CodeLine>
<Link id="l11838" /><CodeLine lineNumber="11838"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Popcount = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(</Highlight></CodeLine>
<Link id="l11839" /><CodeLine lineNumber="11839"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, MaskVT.<a href="/docs/api/structs/llvm/evt/#ad9d00ad929ec93255787f7f80c4659d9">changeVectorElementType</a>(MVT::i1), Mask);</Highlight></CodeLine>
<Link id="l11840" /><CodeLine lineNumber="11840"><Highlight kind="normal">    Popcount =</Highlight></CodeLine>
<Link id="l11841" /><CodeLine lineNumber="11841"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</Highlight></CodeLine>
<Link id="l11842" /><CodeLine lineNumber="11842"><Highlight kind="normal">                    MaskVT.<a href="/docs/api/structs/llvm/evt/#ad9d00ad929ec93255787f7f80c4659d9">changeVectorElementType</a>(PopcountVT), Popcount);</Highlight></CodeLine>
<Link id="l11843" /><CodeLine lineNumber="11843"><Highlight kind="normal">    Popcount = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(ISD::VECREDUCE&#95;ADD, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, PopcountVT, Popcount);</Highlight></CodeLine>
<Link id="l11844" /><CodeLine lineNumber="11844"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> LastElmtPtr =</Highlight></CodeLine>
<Link id="l11845" /><CodeLine lineNumber="11845"><Highlight kind="normal">        getVectorElementPointer(DAG, StackPtr, VecVT, Popcount);</Highlight></CodeLine>
<Link id="l11846" /><CodeLine lineNumber="11846"><Highlight kind="normal">    LastWriteVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a3c3b16945cf064f59363bdefdfe2b492">getLoad</a>(</Highlight></CodeLine>
<Link id="l11847" /><CodeLine lineNumber="11847"><Highlight kind="normal">        ScalarVT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, Chain, LastElmtPtr,</Highlight></CodeLine>
<Link id="l11848" /><CodeLine lineNumber="11848"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/machinepointerinfo/#aa5f0f4a7de5def1c9d9f6a750a9b1aa1">MachinePointerInfo::getUnknownStack</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac64ec73b0617befef1fb2eae78d12b5f">getMachineFunction</a>()));</Highlight></CodeLine>
<Link id="l11849" /><CodeLine lineNumber="11849"><Highlight kind="normal">    <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = LastWriteVal.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(1);</Highlight></CodeLine>
<Link id="l11850" /><CodeLine lineNumber="11850"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11851" /><CodeLine lineNumber="11851"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11852" /><CodeLine lineNumber="11852"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> NumElms = VecVT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>();</Highlight></CodeLine>
<Link id="l11853" /><CodeLine lineNumber="11853"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; NumElms; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) &#123;</Highlight></CodeLine>
<Link id="l11854" /><CodeLine lineNumber="11854"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Idx = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac597f2b1601a3acbac07347251e588f8">getVectorIdxConstant</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</Highlight></CodeLine>
<Link id="l11855" /><CodeLine lineNumber="11855"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11856" /><CodeLine lineNumber="11856"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> ValI = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9329e79f62e9ab9b41cfbcafd314bcbd">ISD::EXTRACT&#95;VECTOR&#95;ELT</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ScalarVT, Vec, Idx);</Highlight></CodeLine>
<Link id="l11857" /><CodeLine lineNumber="11857"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> OutPtr = getVectorElementPointer(DAG, StackPtr, VecVT, OutPos);</Highlight></CodeLine>
<Link id="l11858" /><CodeLine lineNumber="11858"><Highlight kind="normal">    <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a89ed6b26ee4f62aec32468329f828a2f">getStore</a>(</Highlight></CodeLine>
<Link id="l11859" /><CodeLine lineNumber="11859"><Highlight kind="normal">        Chain, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ValI, OutPtr,</Highlight></CodeLine>
<Link id="l11860" /><CodeLine lineNumber="11860"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/machinepointerinfo/#aa5f0f4a7de5def1c9d9f6a750a9b1aa1">MachinePointerInfo::getUnknownStack</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac64ec73b0617befef1fb2eae78d12b5f">getMachineFunction</a>()));</Highlight></CodeLine>
<Link id="l11861" /><CodeLine lineNumber="11861"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11862" /><CodeLine lineNumber="11862"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Get the mask value and add it to the current output position. This</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11863" /><CodeLine lineNumber="11863"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// either increments by 1 if MaskI is true or adds 0 otherwise.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11864" /><CodeLine lineNumber="11864"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Freeze in case we have poison/undef mask entries.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11865" /><CodeLine lineNumber="11865"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> MaskI = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1ea72c31350e168516e6ee8417f2aed9">getFreeze</a>(</Highlight></CodeLine>
<Link id="l11866" /><CodeLine lineNumber="11866"><Highlight kind="normal">        DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a9329e79f62e9ab9b41cfbcafd314bcbd">ISD::EXTRACT&#95;VECTOR&#95;ELT</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, MaskScalarVT, Mask, Idx));</Highlight></CodeLine>
<Link id="l11867" /><CodeLine lineNumber="11867"><Highlight kind="normal">    MaskI = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a1ea72c31350e168516e6ee8417f2aed9">getFreeze</a>(MaskI);</Highlight></CodeLine>
<Link id="l11868" /><CodeLine lineNumber="11868"><Highlight kind="normal">    MaskI = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, MVT::i1, MaskI);</Highlight></CodeLine>
<Link id="l11869" /><CodeLine lineNumber="11869"><Highlight kind="normal">    MaskI = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO&#95;EXTEND</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, PositionVT, MaskI);</Highlight></CodeLine>
<Link id="l11870" /><CodeLine lineNumber="11870"><Highlight kind="normal">    OutPos = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, PositionVT, OutPos, MaskI);</Highlight></CodeLine>
<Link id="l11871" /><CodeLine lineNumber="11871"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11872" /><CodeLine lineNumber="11872"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (HasPassthru &amp;&amp; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> == NumElms - 1) &#123;</Highlight></CodeLine>
<Link id="l11873" /><CodeLine lineNumber="11873"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> EndOfVector =</Highlight></CodeLine>
<Link id="l11874" /><CodeLine lineNumber="11874"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a7d26e2f2179b5a8a53381f8046e9d117">getConstant</a>(VecVT.<a href="/docs/api/structs/llvm/evt/#ae245d70802e4ebe1cae2b6122c62a22a">getVectorNumElements</a>() - 1, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, PositionVT);</Highlight></CodeLine>
<Link id="l11875" /><CodeLine lineNumber="11875"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> AllLanesSelected =</Highlight></CodeLine>
<Link id="l11876" /><CodeLine lineNumber="11876"><Highlight kind="normal">          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, MVT::i1, OutPos, EndOfVector, <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::CondCode::SETUGT</a>);</Highlight></CodeLine>
<Link id="l11877" /><CodeLine lineNumber="11877"><Highlight kind="normal">      OutPos = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a17126302da6199930e55e841ca1b082d">ISD::UMIN</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, PositionVT, OutPos, EndOfVector);</Highlight></CodeLine>
<Link id="l11878" /><CodeLine lineNumber="11878"><Highlight kind="normal">      OutPtr = getVectorElementPointer(DAG, StackPtr, VecVT, OutPos);</Highlight></CodeLine>
<Link id="l11879" /><CodeLine lineNumber="11879"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11880" /><CodeLine lineNumber="11880"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Re-write the last ValI if all lanes were selected. Otherwise,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11881" /><CodeLine lineNumber="11881"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// overwrite the last write it with the passthru value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11882" /><CodeLine lineNumber="11882"><Highlight kind="normal">      LastWriteVal = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a65bbaa0a9f04a6e217da15b3e8402c14">getSelect</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, ScalarVT, AllLanesSelected, ValI,</Highlight></CodeLine>
<Link id="l11883" /><CodeLine lineNumber="11883"><Highlight kind="normal">                                   LastWriteVal, <a href="/docs/api/structs/llvm/sdnodeflags/#a19128eb1e6729dd3cf2afce783620adaaf1d06017221861937c4510348039e0a9">SDNodeFlags::Unpredictable</a>);</Highlight></CodeLine>
<Link id="l11884" /><CodeLine lineNumber="11884"><Highlight kind="normal">      <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a89ed6b26ee4f62aec32468329f828a2f">getStore</a>(</Highlight></CodeLine>
<Link id="l11885" /><CodeLine lineNumber="11885"><Highlight kind="normal">          Chain, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, LastWriteVal, OutPtr,</Highlight></CodeLine>
<Link id="l11886" /><CodeLine lineNumber="11886"><Highlight kind="normal">          <a href="/docs/api/structs/llvm/machinepointerinfo/#aa5f0f4a7de5def1c9d9f6a750a9b1aa1">MachinePointerInfo::getUnknownStack</a>(DAG.<a href="/docs/api/classes/llvm/selectiondag/#ac64ec73b0617befef1fb2eae78d12b5f">getMachineFunction</a>()));</Highlight></CodeLine>
<Link id="l11887" /><CodeLine lineNumber="11887"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l11888" /><CodeLine lineNumber="11888"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l11889" /><CodeLine lineNumber="11889"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11890" /><CodeLine lineNumber="11890"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#a3c3b16945cf064f59363bdefdfe2b492">getLoad</a>(VecVT, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, Chain, StackPtr, PtrInfo);</Highlight></CodeLine>
<Link id="l11891" /><CodeLine lineNumber="11891"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l11892" /><CodeLine lineNumber="11892"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11893" /><CodeLine lineNumber="11893"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlowering/#a28d371ce48274d70bac961a1000c6a9a">TargetLowering::LegalizeSetCCCondCode</a>(SelectionDAG &amp;DAG, EVT VT,</Highlight></CodeLine>
<Link id="l11894" /><CodeLine lineNumber="11894"><Highlight kind="normal">                                           <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</Highlight></CodeLine>
<Link id="l11895" /><CodeLine lineNumber="11895"><Highlight kind="normal">                                           <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> Mask,</Highlight></CodeLine>
<Link id="l11896" /><CodeLine lineNumber="11896"><Highlight kind="normal">                                           <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> EVL, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> &amp;NeedInvert,</Highlight></CodeLine>
<Link id="l11897" /><CodeLine lineNumber="11897"><Highlight kind="normal">                                           </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SDLoc &amp;dl, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;Chain,</Highlight></CodeLine>
<Link id="l11898" /><CodeLine lineNumber="11898"><Highlight kind="normal">                                           </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsSignaling)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l11899" /><CodeLine lineNumber="11899"><Highlight kind="normal">  MVT OpVT = <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>.getSimpleValueType();</Highlight></CodeLine>
<Link id="l11900" /><CodeLine lineNumber="11900"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> CCCode = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;CondCodeSDNode&gt;</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>)-&gt;get();</Highlight></CodeLine>
<Link id="l11901" /><CodeLine lineNumber="11901"><Highlight kind="normal">  NeedInvert = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11902" /><CodeLine lineNumber="11902"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!EVL == !Mask &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;VP Mask and EVL must either both be set or unset&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11903" /><CodeLine lineNumber="11903"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsNonVP = !EVL;</Highlight></CodeLine>
<Link id="l11904" /><CodeLine lineNumber="11904"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a44d2b45590a05798a4aa2d63cba23e55">getCondCodeAction</a>(CCCode, OpVT)) &#123;</Highlight></CodeLine>
<Link id="l11905" /><CodeLine lineNumber="11905"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l11906" /><CodeLine lineNumber="11906"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;Unknown condition code action!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11907" /><CodeLine lineNumber="11907"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetloweringbase/#a12b8712b6c436a8152a5fa996cd8956aad7ff2d7a7c03a214dda559fac717cd99">TargetLowering::Legal</a>:</Highlight></CodeLine>
<Link id="l11908" /><CodeLine lineNumber="11908"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Nothing to do.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11909" /><CodeLine lineNumber="11909"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11910" /><CodeLine lineNumber="11910"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetloweringbase/#a12b8712b6c436a8152a5fa996cd8956aa4b85349547c5b6126817e10152007931">TargetLowering::Expand</a>: &#123;</Highlight></CodeLine>
<Link id="l11911" /><CodeLine lineNumber="11911"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> InvCC = <a href="/docs/api/namespaces/llvm/isd/#a9cc23aed232ccdeadbd8648c349236a6">ISD::getSetCCSwappedOperands</a>(CCCode);</Highlight></CodeLine>
<Link id="l11912" /><CodeLine lineNumber="11912"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aefa6619fc003e2d48cf16a23e0c81f8e">isCondCodeLegalOrCustom</a>(InvCC, OpVT)) &#123;</Highlight></CodeLine>
<Link id="l11913" /><CodeLine lineNumber="11913"><Highlight kind="normal">      <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11914" /><CodeLine lineNumber="11914"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad3db19b21e25af9ac5a1e514443b3d60">getCondCode</a>(InvCC);</Highlight></CodeLine>
<Link id="l11915" /><CodeLine lineNumber="11915"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11916" /><CodeLine lineNumber="11916"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l11917" /><CodeLine lineNumber="11917"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Swapping operands didn&#39;t work. Try inverting the condition.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11918" /><CodeLine lineNumber="11918"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> NeedSwap = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11919" /><CodeLine lineNumber="11919"><Highlight kind="normal">    InvCC = <a href="/docs/api/namespaces/llvm/isd/#a5fbc38db5c4f3ef878ab19245d3f381d">getSetCCInverse</a>(CCCode, OpVT);</Highlight></CodeLine>
<Link id="l11920" /><CodeLine lineNumber="11920"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#aefa6619fc003e2d48cf16a23e0c81f8e">isCondCodeLegalOrCustom</a>(InvCC, OpVT)) &#123;</Highlight></CodeLine>
<Link id="l11921" /><CodeLine lineNumber="11921"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If inverting the condition is not enough, try swapping operands</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11922" /><CodeLine lineNumber="11922"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// on top of it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11923" /><CodeLine lineNumber="11923"><Highlight kind="normal">      InvCC = <a href="/docs/api/namespaces/llvm/isd/#a9cc23aed232ccdeadbd8648c349236a6">ISD::getSetCCSwappedOperands</a>(InvCC);</Highlight></CodeLine>
<Link id="l11924" /><CodeLine lineNumber="11924"><Highlight kind="normal">      NeedSwap = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11925" /><CodeLine lineNumber="11925"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l11926" /><CodeLine lineNumber="11926"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#aefa6619fc003e2d48cf16a23e0c81f8e">isCondCodeLegalOrCustom</a>(InvCC, OpVT)) &#123;</Highlight></CodeLine>
<Link id="l11927" /><CodeLine lineNumber="11927"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad3db19b21e25af9ac5a1e514443b3d60">getCondCode</a>(InvCC);</Highlight></CodeLine>
<Link id="l11928" /><CodeLine lineNumber="11928"><Highlight kind="normal">      NeedInvert = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11929" /><CodeLine lineNumber="11929"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NeedSwap)</Highlight></CodeLine>
<Link id="l11930" /><CodeLine lineNumber="11930"><Highlight kind="normal">        <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11931" /><CodeLine lineNumber="11931"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11932" /><CodeLine lineNumber="11932"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l11933" /><CodeLine lineNumber="11933"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11934" /><CodeLine lineNumber="11934"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Special case: expand i1 comparisons using logical operations.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11935" /><CodeLine lineNumber="11935"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OpVT == MVT::i1) &#123;</Highlight></CodeLine>
<Link id="l11936" /><CodeLine lineNumber="11936"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</Highlight></CodeLine>
<Link id="l11937" /><CodeLine lineNumber="11937"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (CCCode) &#123;</Highlight></CodeLine>
<Link id="l11938" /><CodeLine lineNumber="11938"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l11939" /><CodeLine lineNumber="11939"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;Unknown integer setcc!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11940" /><CodeLine lineNumber="11940"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>: </Highlight><Highlight kind="comment">// X == Y  --&gt;  ~(X ^ Y)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11941" /><CodeLine lineNumber="11941"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(dl, DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, MVT::i1, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>),</Highlight></CodeLine>
<Link id="l11942" /><CodeLine lineNumber="11942"><Highlight kind="normal">                         MVT::i1);</Highlight></CodeLine>
<Link id="l11943" /><CodeLine lineNumber="11943"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11944" /><CodeLine lineNumber="11944"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>: </Highlight><Highlight kind="comment">// X != Y  --&gt;  (X ^ Y)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11945" /><CodeLine lineNumber="11945"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>, dl, MVT::i1, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</Highlight></CodeLine>
<Link id="l11946" /><CodeLine lineNumber="11946"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11947" /><CodeLine lineNumber="11947"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a>:  </Highlight><Highlight kind="comment">// X &gt;s Y  --&gt;  X == 0 &amp; Y == 1  --&gt;  ~X &amp; Y</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11948" /><CodeLine lineNumber="11948"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>: </Highlight><Highlight kind="comment">// X &lt;u Y  --&gt;  X == 0 &amp; Y == 1  --&gt;  ~X &amp; Y</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11949" /><CodeLine lineNumber="11949"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, MVT::i1, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</Highlight></CodeLine>
<Link id="l11950" /><CodeLine lineNumber="11950"><Highlight kind="normal">                          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(dl, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, MVT::i1));</Highlight></CodeLine>
<Link id="l11951" /><CodeLine lineNumber="11951"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11952" /><CodeLine lineNumber="11952"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>:  </Highlight><Highlight kind="comment">// X &lt;s Y  --&gt;  X == 1 &amp; Y == 0  --&gt;  ~Y &amp; X</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11953" /><CodeLine lineNumber="11953"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a>: </Highlight><Highlight kind="comment">// X &gt;u Y  --&gt;  X == 1 &amp; Y == 0  --&gt;  ~Y &amp; X</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11954" /><CodeLine lineNumber="11954"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, dl, MVT::i1, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</Highlight></CodeLine>
<Link id="l11955" /><CodeLine lineNumber="11955"><Highlight kind="normal">                          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(dl, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, MVT::i1));</Highlight></CodeLine>
<Link id="l11956" /><CodeLine lineNumber="11956"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11957" /><CodeLine lineNumber="11957"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a>: </Highlight><Highlight kind="comment">// X &lt;=u Y  --&gt;  X == 0 | Y == 1  --&gt;  ~X | Y</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11958" /><CodeLine lineNumber="11958"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a7f47862de23f7210f88ccf98ae1efbe4">ISD::SETGE</a>:  </Highlight><Highlight kind="comment">// X &gt;=s Y  --&gt;  X == 0 | Y == 1  --&gt;  ~X | Y</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11959" /><CodeLine lineNumber="11959"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, MVT::i1, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</Highlight></CodeLine>
<Link id="l11960" /><CodeLine lineNumber="11960"><Highlight kind="normal">                          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(dl, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, MVT::i1));</Highlight></CodeLine>
<Link id="l11961" /><CodeLine lineNumber="11961"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11962" /><CodeLine lineNumber="11962"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">ISD::SETUGE</a>: </Highlight><Highlight kind="comment">// X &gt;=u Y  --&gt;  X == 1 | Y == 0  --&gt;  ~Y | X</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11963" /><CodeLine lineNumber="11963"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ab49f81c2ecbbff3d0fbe55dd46353774">ISD::SETLE</a>:  </Highlight><Highlight kind="comment">// X &lt;=s Y  --&gt;  X == 1 | Y == 0  --&gt;  ~Y | X</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11964" /><CodeLine lineNumber="11964"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/mipsisd/#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dl, MVT::i1, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</Highlight></CodeLine>
<Link id="l11965" /><CodeLine lineNumber="11965"><Highlight kind="normal">                          DAG.<a href="/docs/api/classes/llvm/selectiondag/#a4adb0d9a6a73d75706dca1960dd7ec32">getNOT</a>(dl, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, MVT::i1));</Highlight></CodeLine>
<Link id="l11966" /><CodeLine lineNumber="11966"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11967" /><CodeLine lineNumber="11967"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l11968" /><CodeLine lineNumber="11968"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11969" /><CodeLine lineNumber="11969"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ad0c6f059b29535f2c790d1c4f92b7a93">getZExtOrTrunc</a>(Ret, dl, VT);</Highlight></CodeLine>
<Link id="l11970" /><CodeLine lineNumber="11970"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l11971" /><CodeLine lineNumber="11971"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l11972" /><CodeLine lineNumber="11972"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11973" /><CodeLine lineNumber="11973"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l11974" /><CodeLine lineNumber="11974"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l11975" /><CodeLine lineNumber="11975"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a> CC1 = <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07aeded54fe1be320194e9ff0f5825df0e5">ISD::SETCC&#95;INVALID</a>, CC2 = <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07aeded54fe1be320194e9ff0f5825df0e5">ISD::SETCC&#95;INVALID</a>;</Highlight></CodeLine>
<Link id="l11976" /><CodeLine lineNumber="11976"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opc = 0;</Highlight></CodeLine>
<Link id="l11977" /><CodeLine lineNumber="11977"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (CCCode) &#123;</Highlight></CodeLine>
<Link id="l11978" /><CodeLine lineNumber="11978"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l11979" /><CodeLine lineNumber="11979"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;Don&#39;t know how to expand this condition!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11980" /><CodeLine lineNumber="11980"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a48a334bbe606d5e82c9cd84eaa127b50">ISD::SETUO</a>:</Highlight></CodeLine>
<Link id="l11981" /><CodeLine lineNumber="11981"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a0d1546187d4d526fcbdd43183689075e">ISD::SETUNE</a>, OpVT)) &#123;</Highlight></CodeLine>
<Link id="l11982" /><CodeLine lineNumber="11982"><Highlight kind="normal">        CC1 = <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a0d1546187d4d526fcbdd43183689075e">ISD::SETUNE</a>;</Highlight></CodeLine>
<Link id="l11983" /><CodeLine lineNumber="11983"><Highlight kind="normal">        CC2 = <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a0d1546187d4d526fcbdd43183689075e">ISD::SETUNE</a>;</Highlight></CodeLine>
<Link id="l11984" /><CodeLine lineNumber="11984"><Highlight kind="normal">        Opc = <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>;</Highlight></CodeLine>
<Link id="l11985" /><CodeLine lineNumber="11985"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11986" /><CodeLine lineNumber="11986"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l11987" /><CodeLine lineNumber="11987"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a08c31033acfb9d6f0bc4a8a82cc26862">ISD::SETOEQ</a>, OpVT) &amp;&amp;</Highlight></CodeLine>
<Link id="l11988" /><CodeLine lineNumber="11988"><Highlight kind="normal">             </Highlight><Highlight kind="stringliteral">&quot;If SETUE is expanded, SETOEQ or SETUNE must be legal!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11989" /><CodeLine lineNumber="11989"><Highlight kind="normal">      NeedInvert = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11990" /><CodeLine lineNumber="11990"><Highlight kind="normal">      &#91;&#91;fallthrough&#93;&#93;;</Highlight></CodeLine>
<Link id="l11991" /><CodeLine lineNumber="11991"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a71f916390487bb109d9968c72553eaf4">ISD::SETO</a>:</Highlight></CodeLine>
<Link id="l11992" /><CodeLine lineNumber="11992"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a08c31033acfb9d6f0bc4a8a82cc26862">ISD::SETOEQ</a>, OpVT) &amp;&amp;</Highlight></CodeLine>
<Link id="l11993" /><CodeLine lineNumber="11993"><Highlight kind="normal">             </Highlight><Highlight kind="stringliteral">&quot;If SETO is expanded, SETOEQ must be legal!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l11994" /><CodeLine lineNumber="11994"><Highlight kind="normal">      CC1 = <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a08c31033acfb9d6f0bc4a8a82cc26862">ISD::SETOEQ</a>;</Highlight></CodeLine>
<Link id="l11995" /><CodeLine lineNumber="11995"><Highlight kind="normal">      CC2 = <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a08c31033acfb9d6f0bc4a8a82cc26862">ISD::SETOEQ</a>;</Highlight></CodeLine>
<Link id="l11996" /><CodeLine lineNumber="11996"><Highlight kind="normal">      Opc = <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>;</Highlight></CodeLine>
<Link id="l11997" /><CodeLine lineNumber="11997"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l11998" /><CodeLine lineNumber="11998"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a57c68bf7ef20bd558854a24d5b0c1e72">ISD::SETONE</a>:</Highlight></CodeLine>
<Link id="l11999" /><CodeLine lineNumber="11999"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a0deb50cd2f3f8e4a94eef4cdf769b848">ISD::SETUEQ</a>:</Highlight></CodeLine>
<Link id="l12000" /><CodeLine lineNumber="12000"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If the SETUO or SETO CC isn&#39;t legal, we might be able to use</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12001" /><CodeLine lineNumber="12001"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// SETOGT || SETOLT, inverting the result for SETUEQ. We only need one</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12002" /><CodeLine lineNumber="12002"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// of SETOGT/SETOLT to be legal, the other can be emulated by swapping</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12003" /><CodeLine lineNumber="12003"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// the operands.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12004" /><CodeLine lineNumber="12004"><Highlight kind="normal">      CC2 = ((unsigned)CCCode &amp; 0x8U) ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a48a334bbe606d5e82c9cd84eaa127b50">ISD::SETUO</a> : ISD::<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a71f916390487bb109d9968c72553eaf4">SETO</a>;</Highlight></CodeLine>
<Link id="l12005" /><CodeLine lineNumber="12005"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(CC2, OpVT) &amp;&amp; (<a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a31d1e24e08b255d6aa290d67d16ce2c9">ISD::SETOGT</a>, OpVT) ||</Highlight></CodeLine>
<Link id="l12006" /><CodeLine lineNumber="12006"><Highlight kind="normal">                                          <a href="/docs/api/classes/llvm/targetloweringbase/#a7ddfa7ca92088dcd1b6c8936bca6917a">isCondCodeLegal</a>(<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a20257a4d3833cf88afd42caeaed70dde">ISD::SETOLT</a>, OpVT))) &#123;</Highlight></CodeLine>
<Link id="l12007" /><CodeLine lineNumber="12007"><Highlight kind="normal">        CC1 = <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a31d1e24e08b255d6aa290d67d16ce2c9">ISD::SETOGT</a>;</Highlight></CodeLine>
<Link id="l12008" /><CodeLine lineNumber="12008"><Highlight kind="normal">        CC2 = <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a20257a4d3833cf88afd42caeaed70dde">ISD::SETOLT</a>;</Highlight></CodeLine>
<Link id="l12009" /><CodeLine lineNumber="12009"><Highlight kind="normal">        Opc = <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>;</Highlight></CodeLine>
<Link id="l12010" /><CodeLine lineNumber="12010"><Highlight kind="normal">        NeedInvert = ((unsigned)CCCode &amp; 0x8U);</Highlight></CodeLine>
<Link id="l12011" /><CodeLine lineNumber="12011"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l12012" /><CodeLine lineNumber="12012"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l12013" /><CodeLine lineNumber="12013"><Highlight kind="normal">      &#91;&#91;fallthrough&#93;&#93;;</Highlight></CodeLine>
<Link id="l12014" /><CodeLine lineNumber="12014"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a08c31033acfb9d6f0bc4a8a82cc26862">ISD::SETOEQ</a>:</Highlight></CodeLine>
<Link id="l12015" /><CodeLine lineNumber="12015"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a31d1e24e08b255d6aa290d67d16ce2c9">ISD::SETOGT</a>:</Highlight></CodeLine>
<Link id="l12016" /><CodeLine lineNumber="12016"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac7bb30d4918c1ee9dd208083154e109f">ISD::SETOGE</a>:</Highlight></CodeLine>
<Link id="l12017" /><CodeLine lineNumber="12017"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a20257a4d3833cf88afd42caeaed70dde">ISD::SETOLT</a>:</Highlight></CodeLine>
<Link id="l12018" /><CodeLine lineNumber="12018"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a1febf3bac2f3d7d98ec19f1ff5c385ea">ISD::SETOLE</a>:</Highlight></CodeLine>
<Link id="l12019" /><CodeLine lineNumber="12019"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a0d1546187d4d526fcbdd43183689075e">ISD::SETUNE</a>:</Highlight></CodeLine>
<Link id="l12020" /><CodeLine lineNumber="12020"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a292be4a9782030bfad637581d25a5897">ISD::SETUGT</a>:</Highlight></CodeLine>
<Link id="l12021" /><CodeLine lineNumber="12021"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a9dff1dcbac65852b71473818c11869b1">ISD::SETUGE</a>:</Highlight></CodeLine>
<Link id="l12022" /><CodeLine lineNumber="12022"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a473200f06bdd611fdbed43d908b84305">ISD::SETULT</a>:</Highlight></CodeLine>
<Link id="l12023" /><CodeLine lineNumber="12023"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ac538f0b432df970cbaaf6b81d777c6a7">ISD::SETULE</a>:</Highlight></CodeLine>
<Link id="l12024" /><CodeLine lineNumber="12024"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If we are floating point, assign and break, otherwise fall through.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12025" /><CodeLine lineNumber="12025"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!OpVT.<a href="/docs/api/classes/llvm/mvt/#a437cf7bc875369cbe0ea62f949626f0b">isInteger</a>()) &#123;</Highlight></CodeLine>
<Link id="l12026" /><CodeLine lineNumber="12026"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// We can use the 4th bit to tell if we are the unordered</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12027" /><CodeLine lineNumber="12027"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// or ordered version of the opcode.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12028" /><CodeLine lineNumber="12028"><Highlight kind="normal">        CC2 = ((unsigned)CCCode &amp; 0x8U) ? <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a48a334bbe606d5e82c9cd84eaa127b50">ISD::SETUO</a> : ISD::<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a71f916390487bb109d9968c72553eaf4">SETO</a>;</Highlight></CodeLine>
<Link id="l12029" /><CodeLine lineNumber="12029"><Highlight kind="normal">        Opc = ((unsigned)CCCode &amp; 0x8U) ? <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a> : ISD::<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">AND</a>;</Highlight></CodeLine>
<Link id="l12030" /><CodeLine lineNumber="12030"><Highlight kind="normal">        CC1 = (<a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a>)(((</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal">)CCCode &amp; 0x7) | 0x10);</Highlight></CodeLine>
<Link id="l12031" /><CodeLine lineNumber="12031"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l12032" /><CodeLine lineNumber="12032"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l12033" /><CodeLine lineNumber="12033"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Fallthrough if we are unsigned integer.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12034" /><CodeLine lineNumber="12034"><Highlight kind="normal">      &#91;&#91;fallthrough&#93;&#93;;</Highlight></CodeLine>
<Link id="l12035" /><CodeLine lineNumber="12035"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ab49f81c2ecbbff3d0fbe55dd46353774">ISD::SETLE</a>:</Highlight></CodeLine>
<Link id="l12036" /><CodeLine lineNumber="12036"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a5ad12b466e3a5900d0c307b301465d25">ISD::SETGT</a>:</Highlight></CodeLine>
<Link id="l12037" /><CodeLine lineNumber="12037"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a7f47862de23f7210f88ccf98ae1efbe4">ISD::SETGE</a>:</Highlight></CodeLine>
<Link id="l12038" /><CodeLine lineNumber="12038"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a6f05a09edb671910f85f8665981cbde9">ISD::SETLT</a>:</Highlight></CodeLine>
<Link id="l12039" /><CodeLine lineNumber="12039"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a2887cc8b39915a25180f4bca0026a15e">ISD::SETNE</a>:</Highlight></CodeLine>
<Link id="l12040" /><CodeLine lineNumber="12040"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07ae2e6a5e32087b9f65bd51585a6a5afb4">ISD::SETEQ</a>:</Highlight></CodeLine>
<Link id="l12041" /><CodeLine lineNumber="12041"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If all combinations of inverting the condition and swapping operands</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12042" /><CodeLine lineNumber="12042"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// didn&#39;t work then we have no means to expand the condition.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12043" /><CodeLine lineNumber="12043"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;Don&#39;t know how to expand this condition!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l12044" /><CodeLine lineNumber="12044"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l12045" /><CodeLine lineNumber="12045"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12046" /><CodeLine lineNumber="12046"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SetCC1, SetCC2;</Highlight></CodeLine>
<Link id="l12047" /><CodeLine lineNumber="12047"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CCCode != <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a71f916390487bb109d9968c72553eaf4">ISD::SETO</a> &amp;&amp; CCCode != <a href="/docs/api/namespaces/llvm/isd/#ac3c3cf58d6d631af6a172457304d3d07a48a334bbe606d5e82c9cd84eaa127b50">ISD::SETUO</a>) &#123;</Highlight></CodeLine>
<Link id="l12048" /><CodeLine lineNumber="12048"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If we aren&#39;t the ordered or unorder operation,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12049" /><CodeLine lineNumber="12049"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// then the pattern is (LHS CC1 RHS) Opc (LHS CC2 RHS).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12050" /><CodeLine lineNumber="12050"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsNonVP) &#123;</Highlight></CodeLine>
<Link id="l12051" /><CodeLine lineNumber="12051"><Highlight kind="normal">        SetCC1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, CC1, Chain, IsSignaling);</Highlight></CodeLine>
<Link id="l12052" /><CodeLine lineNumber="12052"><Highlight kind="normal">        SetCC2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, CC2, Chain, IsSignaling);</Highlight></CodeLine>
<Link id="l12053" /><CodeLine lineNumber="12053"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l12054" /><CodeLine lineNumber="12054"><Highlight kind="normal">        SetCC1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ae7fae5bf8527120e641b45702df06d45">getSetCCVP</a>(dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, CC1, Mask, EVL);</Highlight></CodeLine>
<Link id="l12055" /><CodeLine lineNumber="12055"><Highlight kind="normal">        SetCC2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ae7fae5bf8527120e641b45702df06d45">getSetCCVP</a>(dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, CC2, Mask, EVL);</Highlight></CodeLine>
<Link id="l12056" /><CodeLine lineNumber="12056"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l12057" /><CodeLine lineNumber="12057"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l12058" /><CodeLine lineNumber="12058"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Otherwise, the pattern is (LHS CC1 LHS) Opc (RHS CC2 RHS)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12059" /><CodeLine lineNumber="12059"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsNonVP) &#123;</Highlight></CodeLine>
<Link id="l12060" /><CodeLine lineNumber="12060"><Highlight kind="normal">        SetCC1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, CC1, Chain, IsSignaling);</Highlight></CodeLine>
<Link id="l12061" /><CodeLine lineNumber="12061"><Highlight kind="normal">        SetCC2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a2c237b0f007548cb6bc021d00ffee87f">getSetCC</a>(dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, CC2, Chain, IsSignaling);</Highlight></CodeLine>
<Link id="l12062" /><CodeLine lineNumber="12062"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l12063" /><CodeLine lineNumber="12063"><Highlight kind="normal">        SetCC1 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ae7fae5bf8527120e641b45702df06d45">getSetCCVP</a>(dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, CC1, Mask, EVL);</Highlight></CodeLine>
<Link id="l12064" /><CodeLine lineNumber="12064"><Highlight kind="normal">        SetCC2 = DAG.<a href="/docs/api/classes/llvm/selectiondag/#ae7fae5bf8527120e641b45702df06d45">getSetCCVP</a>(dl, VT, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, CC2, Mask, EVL);</Highlight></CodeLine>
<Link id="l12065" /><CodeLine lineNumber="12065"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l12066" /><CodeLine lineNumber="12066"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l12067" /><CodeLine lineNumber="12067"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Chain)</Highlight></CodeLine>
<Link id="l12068" /><CodeLine lineNumber="12068"><Highlight kind="normal">      <a href="/docs/api/namespaces/anonymous-loadstorevectorizer-cpp-/#afd1adfcbfce320e6265935ce4d6299a3">Chain</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ad469508535ce2082a1ab1f0e429187b8">ISD::TokenFactor</a>, dl, MVT::Other, SetCC1.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(1),</Highlight></CodeLine>
<Link id="l12069" /><CodeLine lineNumber="12069"><Highlight kind="normal">                          SetCC2.<a href="/docs/api/classes/llvm/sdvalue/#a64932427432abeb61241e98bea167580">getValue</a>(1));</Highlight></CodeLine>
<Link id="l12070" /><CodeLine lineNumber="12070"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsNonVP)</Highlight></CodeLine>
<Link id="l12071" /><CodeLine lineNumber="12071"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(Opc, dl, VT, SetCC1, SetCC2);</Highlight></CodeLine>
<Link id="l12072" /><CodeLine lineNumber="12072"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l12073" /><CodeLine lineNumber="12073"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Transform the binary opcode to the VP equivalent.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12074" /><CodeLine lineNumber="12074"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a> || Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>) &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Unexpected opcode&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l12075" /><CodeLine lineNumber="12075"><Highlight kind="normal">      Opc = Opc == <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a> ? ISD::VP&#95;OR : ISD::VP&#95;AND;</Highlight></CodeLine>
<Link id="l12076" /><CodeLine lineNumber="12076"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(Opc, dl, VT, SetCC1, SetCC2, Mask, EVL);</Highlight></CodeLine>
<Link id="l12077" /><CodeLine lineNumber="12077"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l12078" /><CodeLine lineNumber="12078"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86partialreduction-cpp/#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l12079" /><CodeLine lineNumber="12079"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l12080" /><CodeLine lineNumber="12080"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l12081" /><CodeLine lineNumber="12081"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l12082" /><CodeLine lineNumber="12082"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l12083" /><CodeLine lineNumber="12083"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l12084" /><CodeLine lineNumber="12084"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l12085" /><CodeLine lineNumber="12085"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12086" /><CodeLine lineNumber="12086"><Highlight kind="normal"><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> <a href="/docs/api/classes/llvm/targetlowering/#ab7cedb434f2206acccff18f3b653999b">TargetLowering::expandVectorNaryOpBySplitting</a>(SDNode &#42;Node,</Highlight></CodeLine>
<Link id="l12087" /><CodeLine lineNumber="12087"><Highlight kind="normal">                                                      SelectionDAG &amp;DAG)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l12088" /><CodeLine lineNumber="12088"><Highlight kind="normal">  EVT VT = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getValueType(0);</Highlight></CodeLine>
<Link id="l12089" /><CodeLine lineNumber="12089"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Despite its documentation, GetSplitDestVTs will assert if VT cannot be</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12090" /><CodeLine lineNumber="12090"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// split into two equal parts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12091" /><CodeLine lineNumber="12091"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!VT.<a href="/docs/api/structs/llvm/evt/#aa54976197fff266f4143beb44fc9764c">isVector</a>() || !VT.<a href="/docs/api/structs/llvm/evt/#a3d102abca1c9c95f36546dff2f39273b">getVectorElementCount</a>().<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a1618ca92d9fa0b2b577698fb006b84cc">isKnownMultipleOf</a>(2))</Highlight></CodeLine>
<Link id="l12092" /><CodeLine lineNumber="12092"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l12093" /><CodeLine lineNumber="12093"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12094" /><CodeLine lineNumber="12094"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Restrict expansion to cases where both parts can be concatenated.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12095" /><CodeLine lineNumber="12095"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#91;LoVT, HiVT&#93; = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a576060235339ed4cc1615a55ed869bf0">GetSplitDestVTs</a>(VT);</Highlight></CodeLine>
<Link id="l12096" /><CodeLine lineNumber="12096"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LoVT != HiVT || !<a href="/docs/api/classes/llvm/targetloweringbase/#a80b305b278aa0e04f80312e15b2b6d54">isTypeLegal</a>(LoVT))</Highlight></CodeLine>
<Link id="l12097" /><CodeLine lineNumber="12097"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l12098" /><CodeLine lineNumber="12098"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12099" /><CodeLine lineNumber="12099"><Highlight kind="normal">  SDLoc <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>(Node);</Highlight></CodeLine>
<Link id="l12100" /><CodeLine lineNumber="12100"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Opcode = <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;getOpcode();</Highlight></CodeLine>
<Link id="l12101" /><CodeLine lineNumber="12101"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12102" /><CodeLine lineNumber="12102"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Don&#39;t expand if the result is likely to be unrolled anyway.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12103" /><CodeLine lineNumber="12103"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/classes/llvm/targetloweringbase/#afd2a90bd679de6f5964ce9b6f9931541">isOperationLegalOrCustomOrPromote</a>(Opcode, LoVT))</Highlight></CodeLine>
<Link id="l12104" /><CodeLine lineNumber="12104"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a>();</Highlight></CodeLine>
<Link id="l12105" /><CodeLine lineNumber="12105"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12106" /><CodeLine lineNumber="12106"><Highlight kind="normal">  SmallVector&lt;SDValue, 4&gt; LoOps, HiOps;</Highlight></CodeLine>
<Link id="l12107" /><CodeLine lineNumber="12107"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> &amp;V : <a href="/docs/api/namespaces/llvm/rdf/#ac54dd04d6e441d1b72195477e5bc1909">Node</a>-&gt;op&#95;values()) &#123;</Highlight></CodeLine>
<Link id="l12108" /><CodeLine lineNumber="12108"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#91;<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>&#93; = DAG.<a href="/docs/api/classes/llvm/selectiondag/#a8695950995820e5f6c0407c68f91f44f">SplitVector</a>(V, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, LoVT, HiVT);</Highlight></CodeLine>
<Link id="l12109" /><CodeLine lineNumber="12109"><Highlight kind="normal">    LoOps.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>);</Highlight></CodeLine>
<Link id="l12110" /><CodeLine lineNumber="12110"><Highlight kind="normal">    HiOps.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>);</Highlight></CodeLine>
<Link id="l12111" /><CodeLine lineNumber="12111"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l12112" /><CodeLine lineNumber="12112"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l12113" /><CodeLine lineNumber="12113"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SplitOpLo = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(Opcode, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, LoVT, LoOps);</Highlight></CodeLine>
<Link id="l12114" /><CodeLine lineNumber="12114"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a51cb24bd3e700fcf2f93d1afbb555a16">SDValue</a> SplitOpHi = DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(Opcode, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, HiVT, HiOps);</Highlight></CodeLine>
<Link id="l12115" /><CodeLine lineNumber="12115"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> DAG.<a href="/docs/api/classes/llvm/selectiondag/#abad5b17501ce8972fb04a149611e7177">getNode</a>(<a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110a320898056eadc3254fc601e1362eb9f5">ISD::CONCAT&#95;VECTORS</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, VT, SplitOpLo, SplitOpHi);</Highlight></CodeLine>
<Link id="l12116" /><CodeLine lineNumber="12116"><Highlight kind="normal">&#125;</Highlight></CodeLine>

</ProgramListing>

</DoxygenPage>
