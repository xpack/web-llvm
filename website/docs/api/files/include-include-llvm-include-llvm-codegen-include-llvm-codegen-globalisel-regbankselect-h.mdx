---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/regbankselect-h
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - file

---

import Link from '@docusaurus/Link'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `RegBankSelect.h` File Reference

<DoxygenPage pluginConfig={pluginConfig}>

This file describes the interface of the MachineFunctionPass responsible for assigning the generic virtual registers to register bank. <a href="#details">More...</a>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/ADT/SmallVector.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/smallvector-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/GlobalISel/MachineIRBuilder.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/machineirbuilder-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineBasicBlock.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinebasicblock-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineFunctionPass.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machinefunctionpass-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/MachineOptimizationRemarkEmitter.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/RegisterBankInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/registerbankinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="cassert"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="cstdint"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="memory"
  permalink=""
  isLocal="false" />
</IncludesList>

## Namespaces Index

<MembersIndex>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/llvm">llvm</a></>}>
This is an optimization pass for GlobalISel generic memory operations. <a href="/docs/api/namespaces/llvm/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Classes Index

<MembersIndex>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/regbankselect">RegBankSelect</a></>}>
This pass implements the reg bank selector pass used in the GlobalISel pipeline. <a href="/docs/api/classes/llvm/regbankselect/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/regbankselect/insertpoint">InsertPoint</a></>}>
Abstract class used to represent an insertion point in a CFG. <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/regbankselect/instrinsertpoint">InstrInsertPoint</a></>}>
Insertion point before or after an instruction. <a href="/docs/api/classes/llvm/regbankselect/instrinsertpoint/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/regbankselect/mbbinsertpoint">MBBInsertPoint</a></>}>
Insertion point at the beginning or end of a basic block. <a href="/docs/api/classes/llvm/regbankselect/mbbinsertpoint/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/regbankselect/edgeinsertpoint">EdgeInsertPoint</a></>}>
Insertion point on an edge. <a href="/docs/api/classes/llvm/regbankselect/edgeinsertpoint/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/regbankselect/repairingplacement">RepairingPlacement</a></>}>
Struct used to represent the placement of a repairing point for a given operand. <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/llvm/regbankselect/mappingcost">MappingCost</a></>}>
Helper class used to represent the cost for mapping an instruction. <a href="/docs/api/classes/llvm/regbankselect/mappingcost/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

This file describes the interface of the MachineFunctionPass responsible for assigning the generic virtual registers to register bank.

By default, the reg bank selector relies on local decisions to assign the register bank. In other words, it looks at one instruction at a time to decide where the operand of that instruction should live.

At higher optimization level, we could imagine that the reg bank selector would use more global analysis and do crazier thing like duplicating instructions and so on. This is future work.

For now, the pass uses a greedy algorithm to decide where the operand of an instruction should live. It asks the target which banks may be used for each operand of the instruction and what is the cost. Then, it chooses the solution which minimize the cost of the instruction plus the cost of any move that may be needed to the values into the right register bank. In other words, the cost for an instruction on a register bank RegBank is: Cost of I on RegBank plus the sum of the cost for bringing the input operands from their current register bank to RegBank. Thus, the following formula: cost(I, RegBank) = cost(I.Opcode, RegBank) + sum(for each arg in I.arguments: costCrossCopy(arg.RegBank, RegBank))

E.g., Let say we are assigning the register bank for the instruction defining v2. v0(A&#95;REGBANK) = ... v1(A&#95;REGBANK) = ... v2 = G&#95;ADD i32 v0, v1 &lt;â€“ MI

The target may say it can generate G&#95;ADD i32 on register bank A and B with a cost of respectively 5 and 1. Then, let say the cost of a cross register bank copies from A to B is 1. The reg bank selector would compare the following two costs: cost(MI, A&#95;REGBANK) = cost(G&#95;ADD, A&#95;REGBANK) + cost(v0.RegBank, A&#95;REGBANK) + cost(v1.RegBank, A&#95;REGBANK) = 5 + cost(A&#95;REGBANK, A&#95;REGBANK) + cost(A&#95;REGBANK,
                                                            A&#95;REGBANK) = 5 + 0 + 0 = 5 cost(MI, B&#95;REGBANK) = cost(G&#95;ADD, B&#95;REGBANK) + cost(v0.RegBank, B&#95;REGBANK) + cost(v1.RegBank, B&#95;REGBANK) = 1 + cost(A&#95;REGBANK, B&#95;REGBANK) + cost(A&#95;REGBANK,
                                                            B&#95;REGBANK) = 1 + 1 + 1 = 3 Therefore, in this specific example, the reg bank selector would choose bank B for MI. v0(A&#95;REGBANK) = ... v1(A&#95;REGBANK) = ... tmp0(B&#95;REGBANK) = COPY v0 tmp1(B&#95;REGBANK) = COPY v1 v2(B&#95;REGBANK) = G&#95;ADD i32 tmp0, tmp1

## File Listing

The file content with the documentation metadata removed is:

<ProgramListing>

<Link id="l00001" /><CodeLine lineNumber="1"><span class="doxyHighlightComment">//=- llvm/CodeGen/GlobalISel/RegBankSelect.h - Reg Bank Selector --&#42;- C++ -&#42;-=//</span></CodeLine>
<Link id="l00002" /><CodeLine lineNumber="2"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00003" /><CodeLine lineNumber="3"><span class="doxyHighlightComment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></CodeLine>
<Link id="l00004" /><CodeLine lineNumber="4"><span class="doxyHighlightComment">// See https://llvm.org/LICENSE.txt for license information.</span></CodeLine>
<Link id="l00005" /><CodeLine lineNumber="5"><span class="doxyHighlightComment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></CodeLine>
<Link id="l00006" /><CodeLine lineNumber="6"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00007" /><CodeLine lineNumber="7"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00008" /><CodeLine lineNumber="8"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00009" /><CodeLine lineNumber="9"><span class="doxyHighlightComment">/// \\file</span></CodeLine>
<Link id="l00010" /><CodeLine lineNumber="10"><span class="doxyHighlightComment">/// This file describes the interface of the MachineFunctionPass</span></CodeLine>
<Link id="l00011" /><CodeLine lineNumber="11"><span class="doxyHighlightComment">/// responsible for assigning the generic virtual registers to register bank.</span></CodeLine>
<Link id="l00012" /><CodeLine lineNumber="12"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00013" /><CodeLine lineNumber="13"><span class="doxyHighlightComment">/// By default, the reg bank selector relies on local decisions to</span></CodeLine>
<Link id="l00014" /><CodeLine lineNumber="14"><span class="doxyHighlightComment">/// assign the register bank. In other words, it looks at one instruction</span></CodeLine>
<Link id="l00015" /><CodeLine lineNumber="15"><span class="doxyHighlightComment">/// at a time to decide where the operand of that instruction should live.</span></CodeLine>
<Link id="l00016" /><CodeLine lineNumber="16"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00017" /><CodeLine lineNumber="17"><span class="doxyHighlightComment">/// At higher optimization level, we could imagine that the reg bank selector</span></CodeLine>
<Link id="l00018" /><CodeLine lineNumber="18"><span class="doxyHighlightComment">/// would use more global analysis and do crazier thing like duplicating</span></CodeLine>
<Link id="l00019" /><CodeLine lineNumber="19"><span class="doxyHighlightComment">/// instructions and so on. This is future work.</span></CodeLine>
<Link id="l00020" /><CodeLine lineNumber="20"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00021" /><CodeLine lineNumber="21"><span class="doxyHighlightComment">/// For now, the pass uses a greedy algorithm to decide where the operand</span></CodeLine>
<Link id="l00022" /><CodeLine lineNumber="22"><span class="doxyHighlightComment">/// of an instruction should live. It asks the target which banks may be</span></CodeLine>
<Link id="l00023" /><CodeLine lineNumber="23"><span class="doxyHighlightComment">/// used for each operand of the instruction and what is the cost. Then,</span></CodeLine>
<Link id="l00024" /><CodeLine lineNumber="24"><span class="doxyHighlightComment">/// it chooses the solution which minimize the cost of the instruction plus</span></CodeLine>
<Link id="l00025" /><CodeLine lineNumber="25"><span class="doxyHighlightComment">/// the cost of any move that may be needed to the values into the right</span></CodeLine>
<Link id="l00026" /><CodeLine lineNumber="26"><span class="doxyHighlightComment">/// register bank.</span></CodeLine>
<Link id="l00027" /><CodeLine lineNumber="27"><span class="doxyHighlightComment">/// In other words, the cost for an instruction on a register bank RegBank</span></CodeLine>
<Link id="l00028" /><CodeLine lineNumber="28"><span class="doxyHighlightComment">/// is: Cost of I on RegBank plus the sum of the cost for bringing the</span></CodeLine>
<Link id="l00029" /><CodeLine lineNumber="29"><span class="doxyHighlightComment">/// input operands from their current register bank to RegBank.</span></CodeLine>
<Link id="l00030" /><CodeLine lineNumber="30"><span class="doxyHighlightComment">/// Thus, the following formula:</span></CodeLine>
<Link id="l00031" /><CodeLine lineNumber="31"><span class="doxyHighlightComment">/// cost(I, RegBank) = cost(I.Opcode, RegBank) +</span></CodeLine>
<Link id="l00032" /><CodeLine lineNumber="32"><span class="doxyHighlightComment">///    sum(for each arg in I.arguments: costCrossCopy(arg.RegBank, RegBank))</span></CodeLine>
<Link id="l00033" /><CodeLine lineNumber="33"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00034" /><CodeLine lineNumber="34"><span class="doxyHighlightComment">/// E.g., Let say we are assigning the register bank for the instruction</span></CodeLine>
<Link id="l00035" /><CodeLine lineNumber="35"><span class="doxyHighlightComment">/// defining v2.</span></CodeLine>
<Link id="l00036" /><CodeLine lineNumber="36"><span class="doxyHighlightComment">/// v0(A&#95;REGBANK) = ...</span></CodeLine>
<Link id="l00037" /><CodeLine lineNumber="37"><span class="doxyHighlightComment">/// v1(A&#95;REGBANK) = ...</span></CodeLine>
<Link id="l00038" /><CodeLine lineNumber="38"><span class="doxyHighlightComment">/// v2 = G&#95;ADD i32 v0, v1 &lt;-- MI</span></CodeLine>
<Link id="l00039" /><CodeLine lineNumber="39"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l00040" /><CodeLine lineNumber="40"><span class="doxyHighlightComment">/// The target may say it can generate G&#95;ADD i32 on register bank A and B</span></CodeLine>
<Link id="l00041" /><CodeLine lineNumber="41"><span class="doxyHighlightComment">/// with a cost of respectively 5 and 1</span></CodeLine>
<Link id="l00042" /><CodeLine lineNumber="42"><span class="doxyHighlightComment">/// Then, let say the cost of a cross register bank copies from A to B is 1</span></CodeLine>
<Link id="l00043" /><CodeLine lineNumber="43"><span class="doxyHighlightComment">/// The reg bank selector would compare the following two costs:</span></CodeLine>
<Link id="l00044" /><CodeLine lineNumber="44"><span class="doxyHighlightComment">/// cost(MI, A&#95;REGBANK) = cost(G&#95;ADD, A&#95;REGBANK) + cost(v0.RegBank, A&#95;REGBANK) +</span></CodeLine>
<Link id="l00045" /><CodeLine lineNumber="45"><span class="doxyHighlightComment">///    cost(v1.RegBank, A&#95;REGBANK)</span></CodeLine>
<Link id="l00046" /><CodeLine lineNumber="46"><span class="doxyHighlightComment">///                     = 5 + cost(A&#95;REGBANK, A&#95;REGBANK) + cost(A&#95;REGBANK,</span></CodeLine>
<Link id="l00047" /><CodeLine lineNumber="47"><span class="doxyHighlightComment">///                                                             A&#95;REGBANK)</span></CodeLine>
<Link id="l00048" /><CodeLine lineNumber="48"><span class="doxyHighlightComment">///                     = 5 + 0 + 0 = 5</span></CodeLine>
<Link id="l00049" /><CodeLine lineNumber="49"><span class="doxyHighlightComment">/// cost(MI, B&#95;REGBANK) = cost(G&#95;ADD, B&#95;REGBANK) + cost(v0.RegBank, B&#95;REGBANK) +</span></CodeLine>
<Link id="l00050" /><CodeLine lineNumber="50"><span class="doxyHighlightComment">///    cost(v1.RegBank, B&#95;REGBANK)</span></CodeLine>
<Link id="l00051" /><CodeLine lineNumber="51"><span class="doxyHighlightComment">///                     = 1 + cost(A&#95;REGBANK, B&#95;REGBANK) + cost(A&#95;REGBANK,</span></CodeLine>
<Link id="l00052" /><CodeLine lineNumber="52"><span class="doxyHighlightComment">///                                                             B&#95;REGBANK)</span></CodeLine>
<Link id="l00053" /><CodeLine lineNumber="53"><span class="doxyHighlightComment">///                     = 1 + 1 + 1 = 3</span></CodeLine>
<Link id="l00054" /><CodeLine lineNumber="54"><span class="doxyHighlightComment">/// Therefore, in this specific example, the reg bank selector would choose</span></CodeLine>
<Link id="l00055" /><CodeLine lineNumber="55"><span class="doxyHighlightComment">/// bank B for MI.</span></CodeLine>
<Link id="l00056" /><CodeLine lineNumber="56"><span class="doxyHighlightComment">/// v0(A&#95;REGBANK) = ...</span></CodeLine>
<Link id="l00057" /><CodeLine lineNumber="57"><span class="doxyHighlightComment">/// v1(A&#95;REGBANK) = ...</span></CodeLine>
<Link id="l00058" /><CodeLine lineNumber="58"><span class="doxyHighlightComment">/// tmp0(B&#95;REGBANK) = COPY v0</span></CodeLine>
<Link id="l00059" /><CodeLine lineNumber="59"><span class="doxyHighlightComment">/// tmp1(B&#95;REGBANK) = COPY v1</span></CodeLine>
<Link id="l00060" /><CodeLine lineNumber="60"><span class="doxyHighlightComment">/// v2(B&#95;REGBANK) = G&#95;ADD i32 tmp0, tmp1</span></CodeLine>
<Link id="l00061" /><CodeLine lineNumber="61"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00062" /><CodeLine lineNumber="62"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00063" /><CodeLine lineNumber="63"></CodeLine>
<Link id="l00064" /><CodeLine lineNumber="64"><span class="doxyHighlightPreprocessor">#ifndef LLVM&#95;CODEGEN&#95;GLOBALISEL&#95;REGBANKSELECT&#95;H</span></CodeLine>
<Link id="l00065" /><CodeLine lineNumber="65"><span class="doxyHighlightPreprocessor">#define LLVM&#95;CODEGEN&#95;GLOBALISEL&#95;REGBANKSELECT&#95;H</span></CodeLine>
<Link id="l00066" /><CodeLine lineNumber="66"></CodeLine>
<Link id="l00067" /><CodeLine lineNumber="67"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/smallvector-h">llvm/ADT/SmallVector.h</a>&quot;</span></CodeLine>
<Link id="l00068" /><CodeLine lineNumber="68"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/machineirbuilder-h">llvm/CodeGen/GlobalISel/MachineIRBuilder.h</a>&quot;</span></CodeLine>
<Link id="l00069" /><CodeLine lineNumber="69"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinebasicblock-h">llvm/CodeGen/MachineBasicBlock.h</a>&quot;</span></CodeLine>
<Link id="l00070" /><CodeLine lineNumber="70"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machinefunctionpass-h">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></CodeLine>
<Link id="l00071" /><CodeLine lineNumber="71"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/machineoptimizationremarkemitter-h">llvm/CodeGen/MachineOptimizationRemarkEmitter.h</a>&quot;</span></CodeLine>
<Link id="l00072" /><CodeLine lineNumber="72"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/registerbankinfo-h">llvm/CodeGen/RegisterBankInfo.h</a>&quot;</span></CodeLine>
<Link id="l00073" /><CodeLine lineNumber="73"><span class="doxyHighlightPreprocessor">#include &lt;cassert&gt;</span></CodeLine>
<Link id="l00074" /><CodeLine lineNumber="74"><span class="doxyHighlightPreprocessor">#include &lt;cstdint&gt;</span></CodeLine>
<Link id="l00075" /><CodeLine lineNumber="75"><span class="doxyHighlightPreprocessor">#include &lt;memory&gt;</span></CodeLine>
<Link id="l00076" /><CodeLine lineNumber="76"></CodeLine>
<Link id="l00077" /><CodeLine lineNumber="77"><span class="doxyHighlightKeyword">namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm">llvm</a> &#123;</span></CodeLine>
<Link id="l00078" /><CodeLine lineNumber="78"></CodeLine>
<Link id="l00079" /><CodeLine lineNumber="79"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a>;</span></CodeLine>
<Link id="l00080" /><CodeLine lineNumber="80"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/machineblockfrequencyinfo">MachineBlockFrequencyInfo</a>;</span></CodeLine>
<Link id="l00081" /><CodeLine lineNumber="81"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/machinebranchprobabilityinfo">MachineBranchProbabilityInfo</a>;</span></CodeLine>
<Link id="l00082" /><CodeLine lineNumber="82"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a>;</span></CodeLine>
<Link id="l00083" /><CodeLine lineNumber="83"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a>;</span></CodeLine>
<Link id="l00084" /><CodeLine lineNumber="84"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/pass">Pass</a>;</span></CodeLine>
<Link id="l00085" /><CodeLine lineNumber="85"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a>;</span></CodeLine>
<Link id="l00086" /><CodeLine lineNumber="86"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/targetpassconfig">TargetPassConfig</a>;</span></CodeLine>
<Link id="l00087" /><CodeLine lineNumber="87"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a>;</span></CodeLine>
<Link id="l00088" /><CodeLine lineNumber="88"></CodeLine>
<Link id="l00089" /><CodeLine lineNumber="89"><span class="doxyHighlightComment">/// This pass implements the reg bank selector pass used in the GlobalISel</span></CodeLine>
<Link id="l00090" /><CodeLine lineNumber="90"><span class="doxyHighlightComment">/// pipeline. At the end of this pass, all register operands have been assigned</span></CodeLine>
<Link id="l00091" /><CodeLine lineNumber="91" lineLink="/docs/api/classes/llvm/regbankselect"><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/regbankselect/#a550b3f084bfcea7b97658b4584ac4809">RegBankSelect</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinefunctionpass/#a29c81d2386f4a727c6d33413807530c8">MachineFunctionPass</a> &#123;</span></CodeLine>
<Link id="l00092" /><CodeLine lineNumber="92"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00093" /><CodeLine lineNumber="93" lineLink="/docs/api/classes/llvm/regbankselect/#a18a280ae37dbd3b58a04012da318b687"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">char</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/#a18a280ae37dbd3b58a04012da318b687">ID</a>;</span></CodeLine>
<Link id="l00094" /><CodeLine lineNumber="94"></CodeLine>
<Link id="l00095" /><CodeLine lineNumber="95"><span class="doxyHighlightComment">  /// List of the modes supported by the RegBankSelect pass.</span></CodeLine>
<Link id="l00096" /><CodeLine lineNumber="96" lineLink="/docs/api/classes/llvm/regbankselect/#a033277264e702883c8bbf13871247a84"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">enum</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/#a033277264e702883c8bbf13871247a84">Mode</a> &#123;</span></CodeLine>
<Link id="l00097" /><CodeLine lineNumber="97"><span class="doxyHighlightComment">    /// Assign the register banks as fast as possible (default).</span></CodeLine>
<Link id="l00098" /><CodeLine lineNumber="98" lineLink="/docs/api/classes/llvm/regbankselect/#a033277264e702883c8bbf13871247a84a764570eb91457744372935b426a1a397"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/regbankselect/#a033277264e702883c8bbf13871247a84a764570eb91457744372935b426a1a397">Fast</a>,</span></CodeLine>
<Link id="l00099" /><CodeLine lineNumber="99"><span class="doxyHighlightComment">    /// Greedily minimize the cost of assigning register banks.</span></CodeLine>
<Link id="l00100" /><CodeLine lineNumber="100"><span class="doxyHighlightComment">    /// This should produce code of greater quality, but will</span></CodeLine>
<Link id="l00101" /><CodeLine lineNumber="101"><span class="doxyHighlightComment">    /// require more compile time.</span></CodeLine>
<Link id="l00102" /><CodeLine lineNumber="102" lineLink="/docs/api/classes/llvm/regbankselect/#a033277264e702883c8bbf13871247a84a9c9b16f1f748485bf3383411cca0bfa3"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/regbankselect/#a033277264e702883c8bbf13871247a84a9c9b16f1f748485bf3383411cca0bfa3">Greedy</a></span></CodeLine>
<Link id="l00103" /><CodeLine lineNumber="103"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00104" /><CodeLine lineNumber="104"></CodeLine>
<Link id="l00105" /><CodeLine lineNumber="105"><span class="doxyHighlightComment">  /// Abstract class used to represent an insertion point in a CFG.</span></CodeLine>
<Link id="l00106" /><CodeLine lineNumber="106"><span class="doxyHighlightComment">  /// This class records an insertion point and materializes it on</span></CodeLine>
<Link id="l00107" /><CodeLine lineNumber="107"><span class="doxyHighlightComment">  /// demand.</span></CodeLine>
<Link id="l00108" /><CodeLine lineNumber="108"><span class="doxyHighlightComment">  /// It allows to reason about the frequency of this insertion point,</span></CodeLine>
<Link id="l00109" /><CodeLine lineNumber="109"><span class="doxyHighlightComment">  /// without having to logically materialize it (e.g., on an edge),</span></CodeLine>
<Link id="l00110" /><CodeLine lineNumber="110"><span class="doxyHighlightComment">  /// before we actually need to insert something.</span></CodeLine>
<Link id="l00111" /><CodeLine lineNumber="111" lineLink="/docs/api/classes/llvm/regbankselect/insertpoint"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/regbankselect/insertpoint">InsertPoint</a> &#123;</span></CodeLine>
<Link id="l00112" /><CodeLine lineNumber="112"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">protected</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00113" /><CodeLine lineNumber="113"><span class="doxyHighlightComment">    /// Tell if the insert point has already been materialized.</span></CodeLine>
<Link id="l00114" /><CodeLine lineNumber="114" lineLink="/docs/api/classes/llvm/regbankselect/insertpoint/#a8ba1c76e0f667d713ceb4ef26be8aed3"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#a8ba1c76e0f667d713ceb4ef26be8aed3">WasMaterialized</a> = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00115" /><CodeLine lineNumber="115"></CodeLine>
<Link id="l00116" /><CodeLine lineNumber="116"><span class="doxyHighlightComment">    /// Materialize the insertion point.</span></CodeLine>
<Link id="l00117" /><CodeLine lineNumber="117"><span class="doxyHighlightComment">    ///</span></CodeLine>
<Link id="l00118" /><CodeLine lineNumber="118"><span class="doxyHighlightComment">    /// If isSplit() is true, this involves actually splitting</span></CodeLine>
<Link id="l00119" /><CodeLine lineNumber="119"><span class="doxyHighlightComment">    /// the block or edge.</span></CodeLine>
<Link id="l00120" /><CodeLine lineNumber="120"><span class="doxyHighlightComment">    ///</span></CodeLine>
<Link id="l00121" /><CodeLine lineNumber="121"><span class="doxyHighlightComment">    /// \\post getPointImpl() returns a valid iterator.</span></CodeLine>
<Link id="l00122" /><CodeLine lineNumber="122"><span class="doxyHighlightComment">    /// \\post getInsertMBBImpl() returns a valid basic block.</span></CodeLine>
<Link id="l00123" /><CodeLine lineNumber="123"><span class="doxyHighlightComment">    /// \\post isSplit() == false ; no more splitting should be required.</span></CodeLine>
<Link id="l00124" /><CodeLine lineNumber="124" lineLink="/docs/api/classes/llvm/regbankselect/insertpoint/#ad8275ad73d60d460541c51e9c11ddf7d"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">virtual</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#ad8275ad73d60d460541c51e9c11ddf7d">materialize</a>() = 0;</span></CodeLine>
<Link id="l00125" /><CodeLine lineNumber="125"></CodeLine>
<Link id="l00126" /><CodeLine lineNumber="126"><span class="doxyHighlightComment">    /// Return the materialized insertion basic block.</span></CodeLine>
<Link id="l00127" /><CodeLine lineNumber="127"><span class="doxyHighlightComment">    /// Code will be inserted into that basic block.</span></CodeLine>
<Link id="l00128" /><CodeLine lineNumber="128"><span class="doxyHighlightComment">    ///</span></CodeLine>
<Link id="l00129" /><CodeLine lineNumber="129"><span class="doxyHighlightComment">    /// \\pre ::materialize has been called.</span></CodeLine>
<Link id="l00130" /><CodeLine lineNumber="130" lineLink="/docs/api/classes/llvm/regbankselect/insertpoint/#a4acd081c2e07b76bc2d5a5b5144ea937"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">virtual</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp;<a href="/docs/api/classes/llvm/regbankselect/insertpoint/#a4acd081c2e07b76bc2d5a5b5144ea937">getInsertMBBImpl</a>() = 0;</span></CodeLine>
<Link id="l00131" /><CodeLine lineNumber="131"></CodeLine>
<Link id="l00132" /><CodeLine lineNumber="132"><span class="doxyHighlightComment">    /// Return the materialized insertion point.</span></CodeLine>
<Link id="l00133" /><CodeLine lineNumber="133"><span class="doxyHighlightComment">    /// Code will be inserted before that point.</span></CodeLine>
<Link id="l00134" /><CodeLine lineNumber="134"><span class="doxyHighlightComment">    ///</span></CodeLine>
<Link id="l00135" /><CodeLine lineNumber="135"><span class="doxyHighlightComment">    /// \\pre ::materialize has been called.</span></CodeLine>
<Link id="l00136" /><CodeLine lineNumber="136" lineLink="/docs/api/classes/llvm/regbankselect/insertpoint/#af81657c35d5dd8aea4fc76cf2566d6a0"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">virtual</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#af81657c35d5dd8aea4fc76cf2566d6a0">getPointImpl</a>() = 0;</span></CodeLine>
<Link id="l00137" /><CodeLine lineNumber="137"></CodeLine>
<Link id="l00138" /><CodeLine lineNumber="138"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00139" /><CodeLine lineNumber="139" lineLink="/docs/api/classes/llvm/regbankselect/insertpoint/#ab6175d66449695916d9006d558879995"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">virtual</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#ab6175d66449695916d9006d558879995">~InsertPoint</a>() = </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00140" /><CodeLine lineNumber="140"></CodeLine>
<Link id="l00141" /><CodeLine lineNumber="141"><span class="doxyHighlightComment">    /// The first call to this method will cause the splitting to</span></CodeLine>
<Link id="l00142" /><CodeLine lineNumber="142"><span class="doxyHighlightComment">    /// happen if need be, then sub sequent calls just return</span></CodeLine>
<Link id="l00143" /><CodeLine lineNumber="143"><span class="doxyHighlightComment">    /// the iterator to that point. I.e., no more splitting will</span></CodeLine>
<Link id="l00144" /><CodeLine lineNumber="144"><span class="doxyHighlightComment">    /// occur.</span></CodeLine>
<Link id="l00145" /><CodeLine lineNumber="145"><span class="doxyHighlightComment">    ///</span></CodeLine>
<Link id="l00146" /><CodeLine lineNumber="146"><span class="doxyHighlightComment">    /// \\return The iterator that should be used with</span></CodeLine>
<Link id="l00147" /><CodeLine lineNumber="147"><span class="doxyHighlightComment">    /// MachineBasicBlock::insert. I.e., additional code happens</span></CodeLine>
<Link id="l00148" /><CodeLine lineNumber="148"><span class="doxyHighlightComment">    /// before that point.</span></CodeLine>
<Link id="l00149" /><CodeLine lineNumber="149" lineLink="/docs/api/classes/llvm/regbankselect/insertpoint/#a7a0275cf0b23f61fed8b27a60dd950a5"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#a7a0275cf0b23f61fed8b27a60dd950a5">getPoint</a>() &#123;</span></CodeLine>
<Link id="l00150" /><CodeLine lineNumber="150"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/regbankselect/insertpoint/#a8ba1c76e0f667d713ceb4ef26be8aed3">WasMaterialized</a>) &#123;</span></CodeLine>
<Link id="l00151" /><CodeLine lineNumber="151"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#a8ba1c76e0f667d713ceb4ef26be8aed3">WasMaterialized</a> = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00152" /><CodeLine lineNumber="152"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/regbankselect/insertpoint/#ae449014b2e72fef6f2f952ea5e44e0f1">canMaterialize</a>() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Impossible to materialize this point&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00153" /><CodeLine lineNumber="153"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#ad8275ad73d60d460541c51e9c11ddf7d">materialize</a>();</span></CodeLine>
<Link id="l00154" /><CodeLine lineNumber="154"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00155" /><CodeLine lineNumber="155"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// When we materialized the point we should have done the splitting.</span></CodeLine>
<Link id="l00156" /><CodeLine lineNumber="156"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/classes/llvm/regbankselect/insertpoint/#aed32195671c69b83c41212d5e67d5b62">isSplit</a>() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Wrong pre-condition&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00157" /><CodeLine lineNumber="157"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#af81657c35d5dd8aea4fc76cf2566d6a0">getPointImpl</a>();</span></CodeLine>
<Link id="l00158" /><CodeLine lineNumber="158"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00159" /><CodeLine lineNumber="159"></CodeLine>
<Link id="l00160" /><CodeLine lineNumber="160"><span class="doxyHighlightComment">    /// The first call to this method will cause the splitting to</span></CodeLine>
<Link id="l00161" /><CodeLine lineNumber="161"><span class="doxyHighlightComment">    /// happen if need be, then sub sequent calls just return</span></CodeLine>
<Link id="l00162" /><CodeLine lineNumber="162"><span class="doxyHighlightComment">    /// the basic block that contains the insertion point.</span></CodeLine>
<Link id="l00163" /><CodeLine lineNumber="163"><span class="doxyHighlightComment">    /// I.e., no more splitting will occur.</span></CodeLine>
<Link id="l00164" /><CodeLine lineNumber="164"><span class="doxyHighlightComment">    ///</span></CodeLine>
<Link id="l00165" /><CodeLine lineNumber="165"><span class="doxyHighlightComment">    /// \\return The basic block should be used with</span></CodeLine>
<Link id="l00166" /><CodeLine lineNumber="166"><span class="doxyHighlightComment">    /// MachineBasicBlock::insert and ::getPoint. The new code should</span></CodeLine>
<Link id="l00167" /><CodeLine lineNumber="167"><span class="doxyHighlightComment">    /// happen before that point.</span></CodeLine>
<Link id="l00168" /><CodeLine lineNumber="168" lineLink="/docs/api/classes/llvm/regbankselect/insertpoint/#a461885c579b71413b87ee1e0eb5bc294"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp;<a href="/docs/api/classes/llvm/regbankselect/insertpoint/#a461885c579b71413b87ee1e0eb5bc294">getInsertMBB</a>() &#123;</span></CodeLine>
<Link id="l00169" /><CodeLine lineNumber="169"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/regbankselect/insertpoint/#a8ba1c76e0f667d713ceb4ef26be8aed3">WasMaterialized</a>) &#123;</span></CodeLine>
<Link id="l00170" /><CodeLine lineNumber="170"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#a8ba1c76e0f667d713ceb4ef26be8aed3">WasMaterialized</a> = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00171" /><CodeLine lineNumber="171"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/regbankselect/insertpoint/#ae449014b2e72fef6f2f952ea5e44e0f1">canMaterialize</a>() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Impossible to materialize this point&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00172" /><CodeLine lineNumber="172"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#ad8275ad73d60d460541c51e9c11ddf7d">materialize</a>();</span></CodeLine>
<Link id="l00173" /><CodeLine lineNumber="173"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l00174" /><CodeLine lineNumber="174"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// When we materialized the point we should have done the splitting.</span></CodeLine>
<Link id="l00175" /><CodeLine lineNumber="175"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/classes/llvm/regbankselect/insertpoint/#aed32195671c69b83c41212d5e67d5b62">isSplit</a>() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Wrong pre-condition&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00176" /><CodeLine lineNumber="176"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#a4acd081c2e07b76bc2d5a5b5144ea937">getInsertMBBImpl</a>();</span></CodeLine>
<Link id="l00177" /><CodeLine lineNumber="177"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00178" /><CodeLine lineNumber="178"></CodeLine>
<Link id="l00179" /><CodeLine lineNumber="179"><span class="doxyHighlightComment">    /// Insert \\p MI in the just before ::getPoint()</span></CodeLine>
<Link id="l00180" /><CodeLine lineNumber="180" lineLink="/docs/api/classes/llvm/regbankselect/insertpoint/#ac54a5d84d40b30695f8229f023d7ee69"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#ac54a5d84d40b30695f8229f023d7ee69">insert</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) &#123;</span></CodeLine>
<Link id="l00181" /><CodeLine lineNumber="181"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#a461885c579b71413b87ee1e0eb5bc294">getInsertMBB</a>().<a href="/docs/api/classes/llvm/machinebasicblock/#a3435a2381e60e842e915f85c931b7dde">insert</a>(<a href="/docs/api/classes/llvm/regbankselect/insertpoint/#a7a0275cf0b23f61fed8b27a60dd950a5">getPoint</a>(), &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l00182" /><CodeLine lineNumber="182"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00183" /><CodeLine lineNumber="183"></CodeLine>
<Link id="l00184" /><CodeLine lineNumber="184"><span class="doxyHighlightComment">    /// Does this point involve splitting an edge or block?</span></CodeLine>
<Link id="l00185" /><CodeLine lineNumber="185"><span class="doxyHighlightComment">    /// As soon as ::getPoint is called and thus, the point</span></CodeLine>
<Link id="l00186" /><CodeLine lineNumber="186"><span class="doxyHighlightComment">    /// materialized, the point will not require splitting anymore,</span></CodeLine>
<Link id="l00187" /><CodeLine lineNumber="187"><span class="doxyHighlightComment">    /// i.e., this will return false.</span></CodeLine>
<Link id="l00188" /><CodeLine lineNumber="188" lineLink="/docs/api/classes/llvm/regbankselect/insertpoint/#aed32195671c69b83c41212d5e67d5b62"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">virtual</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#aed32195671c69b83c41212d5e67d5b62">isSplit</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">; &#125;</span></CodeLine>
<Link id="l00189" /><CodeLine lineNumber="189"></CodeLine>
<Link id="l00190" /><CodeLine lineNumber="190"><span class="doxyHighlightComment">    /// Frequency of the insertion point.</span></CodeLine>
<Link id="l00191" /><CodeLine lineNumber="191"><span class="doxyHighlightComment">    /// \\p P is used to access the various analysis that will help to</span></CodeLine>
<Link id="l00192" /><CodeLine lineNumber="192"><span class="doxyHighlightComment">    /// get that information, like MachineBlockFrequencyInfo.  If \\p P</span></CodeLine>
<Link id="l00193" /><CodeLine lineNumber="193"><span class="doxyHighlightComment">    /// does not contain enough to return the actual frequency,</span></CodeLine>
<Link id="l00194" /><CodeLine lineNumber="194"><span class="doxyHighlightComment">    /// this returns 1</span></CodeLine>
<Link id="l00195" /><CodeLine lineNumber="195" lineLink="/docs/api/classes/llvm/regbankselect/insertpoint/#a1a042440b348ec5add8a7acf6231d32b"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">virtual</span><span class="doxyHighlight"> uint64&#95;t <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#a1a042440b348ec5add8a7acf6231d32b">frequency</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/pass">Pass</a> &amp;<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> 1; &#125;</span></CodeLine>
<Link id="l00196" /><CodeLine lineNumber="196"></CodeLine>
<Link id="l00197" /><CodeLine lineNumber="197"><span class="doxyHighlightComment">    /// Check whether this insertion point can be materialized.</span></CodeLine>
<Link id="l00198" /><CodeLine lineNumber="198"><span class="doxyHighlightComment">    /// As soon as ::getPoint is called and thus, the point materialized</span></CodeLine>
<Link id="l00199" /><CodeLine lineNumber="199"><span class="doxyHighlightComment">    /// calling this method does not make sense.</span></CodeLine>
<Link id="l00200" /><CodeLine lineNumber="200" lineLink="/docs/api/classes/llvm/regbankselect/insertpoint/#ae449014b2e72fef6f2f952ea5e44e0f1"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">virtual</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#ae449014b2e72fef6f2f952ea5e44e0f1">canMaterialize</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">; &#125;</span></CodeLine>
<Link id="l00201" /><CodeLine lineNumber="201"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00202" /><CodeLine lineNumber="202"></CodeLine>
<Link id="l00203" /><CodeLine lineNumber="203"><span class="doxyHighlightComment">  /// Insertion point before or after an instruction.</span></CodeLine>
<Link id="l00204" /><CodeLine lineNumber="204" lineLink="/docs/api/classes/llvm/regbankselect/instrinsertpoint"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/regbankselect/instrinsertpoint/#a6cc84b9482ccab01341e9694c14933d7">InstrInsertPoint</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/insertpoint">InsertPoint</a> &#123;</span></CodeLine>
<Link id="l00205" /><CodeLine lineNumber="205"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">private</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00206" /><CodeLine lineNumber="206"><span class="doxyHighlightComment">    /// Insertion point.</span></CodeLine>
<Link id="l00207" /><CodeLine lineNumber="207"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;Instr;</span></CodeLine>
<Link id="l00208" /><CodeLine lineNumber="208"></CodeLine>
<Link id="l00209" /><CodeLine lineNumber="209"><span class="doxyHighlightComment">    /// Does the insertion point is before or after Instr.</span></CodeLine>
<Link id="l00210" /><CodeLine lineNumber="210"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>;</span></CodeLine>
<Link id="l00211" /><CodeLine lineNumber="211"></CodeLine>
<Link id="l00212" /><CodeLine lineNumber="212"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#ad8275ad73d60d460541c51e9c11ddf7d">materialize</a>() </span><span class="doxyHighlightKeyword">override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00213" /><CodeLine lineNumber="213"></CodeLine>
<Link id="l00214" /><CodeLine lineNumber="214"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#af81657c35d5dd8aea4fc76cf2566d6a0">getPointImpl</a>()</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00215" /><CodeLine lineNumber="215"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>)</span></CodeLine>
<Link id="l00216" /><CodeLine lineNumber="216"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Instr;</span></CodeLine>
<Link id="l00217" /><CodeLine lineNumber="217"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Instr.getNextNode() ? &#42;Instr.getNextNode()</span></CodeLine>
<Link id="l00218" /><CodeLine lineNumber="218"><span class="doxyHighlight">                                 : Instr.getParent()-&gt;end();</span></CodeLine>
<Link id="l00219" /><CodeLine lineNumber="219"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00220" /><CodeLine lineNumber="220"></CodeLine>
<Link id="l00221" /><CodeLine lineNumber="221"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp;<a href="/docs/api/classes/llvm/regbankselect/insertpoint/#a4acd081c2e07b76bc2d5a5b5144ea937">getInsertMBBImpl</a>()</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00222" /><CodeLine lineNumber="222"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#42;Instr.getParent();</span></CodeLine>
<Link id="l00223" /><CodeLine lineNumber="223"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00224" /><CodeLine lineNumber="224"></CodeLine>
<Link id="l00225" /><CodeLine lineNumber="225"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00226" /><CodeLine lineNumber="226"><span class="doxyHighlightComment">    /// Create an insertion point before (\\p Before=true) or after \\p Instr.</span></CodeLine>
<Link id="l00227" /><CodeLine lineNumber="227"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/regbankselect/instrinsertpoint/#a6cc84b9482ccab01341e9694c14933d7">InstrInsertPoint</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;Instr, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a> = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00228" /><CodeLine lineNumber="228"></CodeLine>
<Link id="l00229" /><CodeLine lineNumber="229"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/instrinsertpoint/#a8bf99289cea710aff85335a6cc7aefb6">isSplit</a>() </span><span class="doxyHighlightKeyword">const override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00230" /><CodeLine lineNumber="230"><span class="doxyHighlight">    uint64&#95;t <a href="/docs/api/classes/llvm/regbankselect/instrinsertpoint/#acfe02f412f4221fbb6a31ca758ac297e">frequency</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/pass">Pass</a> &amp;<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>) </span><span class="doxyHighlightKeyword">const override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00231" /><CodeLine lineNumber="231"></CodeLine>
<Link id="l00232" /><CodeLine lineNumber="232"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Worst case, we need to slice the basic block, but that is still doable.</span></CodeLine>
<Link id="l00233" /><CodeLine lineNumber="233" lineLink="/docs/api/classes/llvm/regbankselect/instrinsertpoint/#a62245784637a216888785f1517944d0e"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/instrinsertpoint/#a62245784637a216888785f1517944d0e">canMaterialize</a>()</span><span class="doxyHighlightKeyword"> const override </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">; &#125;</span></CodeLine>
<Link id="l00234" /><CodeLine lineNumber="234"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00235" /><CodeLine lineNumber="235"></CodeLine>
<Link id="l00236" /><CodeLine lineNumber="236"><span class="doxyHighlightComment">  /// Insertion point at the beginning or end of a basic block.</span></CodeLine>
<Link id="l00237" /><CodeLine lineNumber="237" lineLink="/docs/api/classes/llvm/regbankselect/mbbinsertpoint"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/regbankselect/mbbinsertpoint/#a38ae3bdf7801320fa563014b49b529aa">MBBInsertPoint</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/insertpoint">InsertPoint</a> &#123;</span></CodeLine>
<Link id="l00238" /><CodeLine lineNumber="238"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">private</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00239" /><CodeLine lineNumber="239"><span class="doxyHighlightComment">    /// Insertion point.</span></CodeLine>
<Link id="l00240" /><CodeLine lineNumber="240"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>;</span></CodeLine>
<Link id="l00241" /><CodeLine lineNumber="241"></CodeLine>
<Link id="l00242" /><CodeLine lineNumber="242"><span class="doxyHighlightComment">    /// Does the insertion point is at the beginning or end of MBB.</span></CodeLine>
<Link id="l00243" /><CodeLine lineNumber="243"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Beginning;</span></CodeLine>
<Link id="l00244" /><CodeLine lineNumber="244"></CodeLine>
<Link id="l00245" /><CodeLine lineNumber="245"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#ad8275ad73d60d460541c51e9c11ddf7d">materialize</a>()</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightComment">/&#42;Nothing to do to materialize&#42;/</span></CodeLine>
<Link id="l00246" /><CodeLine lineNumber="246"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00247" /><CodeLine lineNumber="247"></CodeLine>
<Link id="l00248" /><CodeLine lineNumber="248"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#af81657c35d5dd8aea4fc76cf2566d6a0">getPointImpl</a>()</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00249" /><CodeLine lineNumber="249"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Beginning ? <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>.begin() : <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>.end();</span></CodeLine>
<Link id="l00250" /><CodeLine lineNumber="250"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00251" /><CodeLine lineNumber="251"></CodeLine>
<Link id="l00252" /><CodeLine lineNumber="252"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp;<a href="/docs/api/classes/llvm/regbankselect/insertpoint/#a4acd081c2e07b76bc2d5a5b5144ea937">getInsertMBBImpl</a>()</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>; &#125;</span></CodeLine>
<Link id="l00253" /><CodeLine lineNumber="253"></CodeLine>
<Link id="l00254" /><CodeLine lineNumber="254"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00255" /><CodeLine lineNumber="255" lineLink="/docs/api/classes/llvm/regbankselect/mbbinsertpoint/#a38ae3bdf7801320fa563014b49b529aa"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/regbankselect/mbbinsertpoint/#a38ae3bdf7801320fa563014b49b529aa">MBBInsertPoint</a>(<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Beginning = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l00256" /><CodeLine lineNumber="256"><span class="doxyHighlight">        : <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>(<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>), Beginning(Beginning) &#123;</span></CodeLine>
<Link id="l00257" /><CodeLine lineNumber="257"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If we try to insert before phis, we should use the insertion</span></CodeLine>
<Link id="l00258" /><CodeLine lineNumber="258"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// points on the incoming edges.</span></CodeLine>
<Link id="l00259" /><CodeLine lineNumber="259"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!Beginning || <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>.getFirstNonPHI() == <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>.begin()) &amp;&amp;</span></CodeLine>
<Link id="l00260" /><CodeLine lineNumber="260"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;Invalid beginning point&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00261" /><CodeLine lineNumber="261"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If we try to insert after the terminators, we should use the</span></CodeLine>
<Link id="l00262" /><CodeLine lineNumber="262"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// points on the outcoming edges.</span></CodeLine>
<Link id="l00263" /><CodeLine lineNumber="263"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Beginning || <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>.getFirstTerminator() == <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>.end()) &amp;&amp;</span></CodeLine>
<Link id="l00264" /><CodeLine lineNumber="264"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;Invalid end point&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00265" /><CodeLine lineNumber="265"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00266" /><CodeLine lineNumber="266"></CodeLine>
<Link id="l00267" /><CodeLine lineNumber="267" lineLink="/docs/api/classes/llvm/regbankselect/mbbinsertpoint/#a92927da3f58398d381d045874df2966f"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/mbbinsertpoint/#a92927da3f58398d381d045874df2966f">isSplit</a>()</span><span class="doxyHighlightKeyword"> const override </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">; &#125;</span></CodeLine>
<Link id="l00268" /><CodeLine lineNumber="268"><span class="doxyHighlight">    uint64&#95;t <a href="/docs/api/classes/llvm/regbankselect/mbbinsertpoint/#a93a33c37cd1f7261b08ca7a90062c3fd">frequency</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/pass">Pass</a> &amp;<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>) </span><span class="doxyHighlightKeyword">const override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00269" /><CodeLine lineNumber="269" lineLink="/docs/api/classes/llvm/regbankselect/mbbinsertpoint/#a142db82d52e5b02d2f7f96e5cd44b6b2"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/mbbinsertpoint/#a142db82d52e5b02d2f7f96e5cd44b6b2">canMaterialize</a>()</span><span class="doxyHighlightKeyword"> const override </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">; &#125;;</span></CodeLine>
<Link id="l00270" /><CodeLine lineNumber="270"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00271" /><CodeLine lineNumber="271"></CodeLine>
<Link id="l00272" /><CodeLine lineNumber="272"><span class="doxyHighlightComment">  /// Insertion point on an edge.</span></CodeLine>
<Link id="l00273" /><CodeLine lineNumber="273" lineLink="/docs/api/classes/llvm/regbankselect/edgeinsertpoint"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/regbankselect/edgeinsertpoint/#a3b793a2abcf1dc64250a34e2bcfd897e">EdgeInsertPoint</a> : </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/insertpoint">InsertPoint</a> &#123;</span></CodeLine>
<Link id="l00274" /><CodeLine lineNumber="274"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">private</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00275" /><CodeLine lineNumber="275"><span class="doxyHighlightComment">    /// Source of the edge.</span></CodeLine>
<Link id="l00276" /><CodeLine lineNumber="276"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp;Src;</span></CodeLine>
<Link id="l00277" /><CodeLine lineNumber="277"></CodeLine>
<Link id="l00278" /><CodeLine lineNumber="278"><span class="doxyHighlightComment">    /// Destination of the edge.</span></CodeLine>
<Link id="l00279" /><CodeLine lineNumber="279"><span class="doxyHighlightComment">    /// After the materialization is done, this hold the basic block</span></CodeLine>
<Link id="l00280" /><CodeLine lineNumber="280"><span class="doxyHighlightComment">    /// that resulted from the splitting.</span></CodeLine>
<Link id="l00281" /><CodeLine lineNumber="281"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;DstOrSplit;</span></CodeLine>
<Link id="l00282" /><CodeLine lineNumber="282"></CodeLine>
<Link id="l00283" /><CodeLine lineNumber="283"><span class="doxyHighlightComment">    /// P is used to update the analysis passes as applicable.</span></CodeLine>
<Link id="l00284" /><CodeLine lineNumber="284"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/pass">Pass</a> &amp;<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>;</span></CodeLine>
<Link id="l00285" /><CodeLine lineNumber="285"></CodeLine>
<Link id="l00286" /><CodeLine lineNumber="286"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#ad8275ad73d60d460541c51e9c11ddf7d">materialize</a>() </span><span class="doxyHighlightKeyword">override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00287" /><CodeLine lineNumber="287"></CodeLine>
<Link id="l00288" /><CodeLine lineNumber="288"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/classes/llvm/regbankselect/insertpoint/#af81657c35d5dd8aea4fc76cf2566d6a0">getPointImpl</a>()</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00289" /><CodeLine lineNumber="289"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// DstOrSplit should be the Split block at this point.</span></CodeLine>
<Link id="l00290" /><CodeLine lineNumber="290"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// I.e., it should have one predecessor, Src, and one successor,</span></CodeLine>
<Link id="l00291" /><CodeLine lineNumber="291"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// the original Dst.</span></CodeLine>
<Link id="l00292" /><CodeLine lineNumber="292"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DstOrSplit &amp;&amp; DstOrSplit-&gt;isPredecessor(&amp;Src) &amp;&amp;</span></CodeLine>
<Link id="l00293" /><CodeLine lineNumber="293"><span class="doxyHighlight">             DstOrSplit-&gt;pred&#95;size() == 1 &amp;&amp; DstOrSplit-&gt;succ&#95;size() == 1 &amp;&amp;</span></CodeLine>
<Link id="l00294" /><CodeLine lineNumber="294"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;Did not split?!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00295" /><CodeLine lineNumber="295"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> DstOrSplit-&gt;begin();</span></CodeLine>
<Link id="l00296" /><CodeLine lineNumber="296"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00297" /><CodeLine lineNumber="297"></CodeLine>
<Link id="l00298" /><CodeLine lineNumber="298"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp;<a href="/docs/api/classes/llvm/regbankselect/insertpoint/#a4acd081c2e07b76bc2d5a5b5144ea937">getInsertMBBImpl</a>()</span><span class="doxyHighlightKeyword"> override </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#42;DstOrSplit; &#125;</span></CodeLine>
<Link id="l00299" /><CodeLine lineNumber="299"></CodeLine>
<Link id="l00300" /><CodeLine lineNumber="300"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00301" /><CodeLine lineNumber="301" lineLink="/docs/api/classes/llvm/regbankselect/edgeinsertpoint/#a3b793a2abcf1dc64250a34e2bcfd897e"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/regbankselect/edgeinsertpoint/#a3b793a2abcf1dc64250a34e2bcfd897e">EdgeInsertPoint</a>(<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp;Src, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp;Dst, <a href="/docs/api/classes/llvm/pass">Pass</a> &amp;<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>)</span></CodeLine>
<Link id="l00302" /><CodeLine lineNumber="302"><span class="doxyHighlight">        : Src(Src), DstOrSplit(&amp;Dst), <a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>(<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>) &#123;&#125;</span></CodeLine>
<Link id="l00303" /><CodeLine lineNumber="303"></CodeLine>
<Link id="l00304" /><CodeLine lineNumber="304" lineLink="/docs/api/classes/llvm/regbankselect/edgeinsertpoint/#a8b302cda9a867539728750096e0b1e1e"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/edgeinsertpoint/#a8b302cda9a867539728750096e0b1e1e">isSplit</a>()</span><span class="doxyHighlightKeyword"> const override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00305" /><CodeLine lineNumber="305"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Src.succ&#95;size() &gt; 1 &amp;&amp; DstOrSplit-&gt;pred&#95;size() &gt; 1;</span></CodeLine>
<Link id="l00306" /><CodeLine lineNumber="306"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00307" /><CodeLine lineNumber="307"></CodeLine>
<Link id="l00308" /><CodeLine lineNumber="308"><span class="doxyHighlight">    uint64&#95;t <a href="/docs/api/classes/llvm/regbankselect/edgeinsertpoint/#a2128bef8edaf9b2e731de12723929db8">frequency</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/pass">Pass</a> &amp;<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>) </span><span class="doxyHighlightKeyword">const override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00309" /><CodeLine lineNumber="309"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/edgeinsertpoint/#ab7c9a6cfa5fb504c692e5e3a9abb2698">canMaterialize</a>() </span><span class="doxyHighlightKeyword">const override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00310" /><CodeLine lineNumber="310"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00311" /><CodeLine lineNumber="311"></CodeLine>
<Link id="l00312" /><CodeLine lineNumber="312"><span class="doxyHighlightComment">  /// Struct used to represent the placement of a repairing point for</span></CodeLine>
<Link id="l00313" /><CodeLine lineNumber="313"><span class="doxyHighlightComment">  /// a given operand.</span></CodeLine>
<Link id="l00314" /><CodeLine lineNumber="314" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a40139f3ca5fa604f87136efa9ca611ca">RepairingPlacement</a> &#123;</span></CodeLine>
<Link id="l00315" /><CodeLine lineNumber="315"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00316" /><CodeLine lineNumber="316"><span class="doxyHighlightComment">    /// Define the kind of action this repairing needs.</span></CodeLine>
<Link id="l00317" /><CodeLine lineNumber="317" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">enum</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6">RepairingKind</a> &#123;</span></CodeLine>
<Link id="l00318" /><CodeLine lineNumber="318"><span class="doxyHighlightComment">      /// Nothing to repair, just drop this action.</span></CodeLine>
<Link id="l00319" /><CodeLine lineNumber="319" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6a1b5edfd2f0ed3f87981ab15c425b0165"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6a1b5edfd2f0ed3f87981ab15c425b0165">None</a>,</span></CodeLine>
<Link id="l00320" /><CodeLine lineNumber="320"><span class="doxyHighlightComment">      /// Reparing code needs to happen before InsertPoints.</span></CodeLine>
<Link id="l00321" /><CodeLine lineNumber="321" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6a07b4fac858ad8fc2c4d9bdc7acd6e195"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6a07b4fac858ad8fc2c4d9bdc7acd6e195">Insert</a>,</span></CodeLine>
<Link id="l00322" /><CodeLine lineNumber="322"><span class="doxyHighlightComment">      /// (Re)assign the register bank of the operand.</span></CodeLine>
<Link id="l00323" /><CodeLine lineNumber="323" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6a756e97b1942ca89260909cfdfb64b957"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6a756e97b1942ca89260909cfdfb64b957">Reassign</a>,</span></CodeLine>
<Link id="l00324" /><CodeLine lineNumber="324"><span class="doxyHighlightComment">      /// Mark this repairing placement as impossible.</span></CodeLine>
<Link id="l00325" /><CodeLine lineNumber="325" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6a98e66b30e93d741af07a3fefeb66ab1b"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6a98e66b30e93d741af07a3fefeb66ab1b">Impossible</a></span></CodeLine>
<Link id="l00326" /><CodeLine lineNumber="326"><span class="doxyHighlight">    &#125;;</span></CodeLine>
<Link id="l00327" /><CodeLine lineNumber="327"></CodeLine>
<Link id="l00328" /><CodeLine lineNumber="328"><span class="doxyHighlightComment">    /// \\name Convenient types for a list of insertion points.</span></CodeLine>
<Link id="l00329" /><CodeLine lineNumber="329"><span class="doxyHighlightComment">    /// @&#123;</span></CodeLine>
<Link id="l00330" /><CodeLine lineNumber="330" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#aadf6a4c523811c7749ecaced8e449854"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#aadf6a4c523811c7749ecaced8e449854">InsertionPoints</a> = <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;std::unique&#95;ptr&lt;InsertPoint&gt;</a>, 2&gt;;</span></CodeLine>
<Link id="l00331" /><CodeLine lineNumber="331" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#ac084e5dcf8b5623c02615b39fb15346e"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#ac084e5dcf8b5623c02615b39fb15346e">insertpt&#95;iterator</a> = <a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a9eae7ba1448d9866beca95a042de2e11">InsertionPoints::iterator</a>;</span></CodeLine>
<Link id="l00332" /><CodeLine lineNumber="332" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#a3bb3abc567d90e2e308cde17b004366a"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a3bb3abc567d90e2e308cde17b004366a">const&#95;insertpt&#95;iterator</a> = <a href="/docs/api/classes/llvm/smallvectortemplatecommon/#aa11b903431c1931920939bac6b5293a2">InsertionPoints::const&#95;iterator</a>;</span></CodeLine>
<Link id="l00333" /><CodeLine lineNumber="333"><span class="doxyHighlightComment">    /// @&#125;</span></CodeLine>
<Link id="l00334" /><CodeLine lineNumber="334"></CodeLine>
<Link id="l00335" /><CodeLine lineNumber="335"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">private</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00336" /><CodeLine lineNumber="336"><span class="doxyHighlightComment">    /// Kind of repairing.</span></CodeLine>
<Link id="l00337" /><CodeLine lineNumber="337"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6">RepairingKind</a> Kind;</span></CodeLine>
<Link id="l00338" /><CodeLine lineNumber="338"><span class="doxyHighlightComment">    /// Index of the operand that will be repaired.</span></CodeLine>
<Link id="l00339" /><CodeLine lineNumber="339"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> OpIdx;</span></CodeLine>
<Link id="l00340" /><CodeLine lineNumber="340"><span class="doxyHighlightComment">    /// Are all the insert points materializeable?</span></CodeLine>
<Link id="l00341" /><CodeLine lineNumber="341"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> CanMaterialize;</span></CodeLine>
<Link id="l00342" /><CodeLine lineNumber="342"><span class="doxyHighlightComment">    /// Is there any of the insert points needing splitting?</span></CodeLine>
<Link id="l00343" /><CodeLine lineNumber="343"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> HasSplit = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00344" /><CodeLine lineNumber="344"><span class="doxyHighlightComment">    /// Insertion point for the repair code.</span></CodeLine>
<Link id="l00345" /><CodeLine lineNumber="345"><span class="doxyHighlightComment">    /// The repairing code needs to happen just before these points.</span></CodeLine>
<Link id="l00346" /><CodeLine lineNumber="346"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#aadf6a4c523811c7749ecaced8e449854">InsertionPoints</a> InsertPoints;</span></CodeLine>
<Link id="l00347" /><CodeLine lineNumber="347"><span class="doxyHighlightComment">    /// Some insertion points may need to update the liveness and such.</span></CodeLine>
<Link id="l00348" /><CodeLine lineNumber="348"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/pass">Pass</a> &amp;<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>;</span></CodeLine>
<Link id="l00349" /><CodeLine lineNumber="349"></CodeLine>
<Link id="l00350" /><CodeLine lineNumber="350"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00351" /><CodeLine lineNumber="351"><span class="doxyHighlightComment">    /// Create a repairing placement for the \\p OpIdx-th operand of</span></CodeLine>
<Link id="l00352" /><CodeLine lineNumber="352"><span class="doxyHighlightComment">    /// \\p MI. \\p TRI is used to make some checks on the register aliases</span></CodeLine>
<Link id="l00353" /><CodeLine lineNumber="353"><span class="doxyHighlightComment">    /// if the machine operand is a physical register. \\p P is used to</span></CodeLine>
<Link id="l00354" /><CodeLine lineNumber="354"><span class="doxyHighlightComment">    /// to update liveness information and such when materializing the</span></CodeLine>
<Link id="l00355" /><CodeLine lineNumber="355"><span class="doxyHighlightComment">    /// points.</span></CodeLine>
<Link id="l00356" /><CodeLine lineNumber="356"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a40139f3ca5fa604f87136efa9ca611ca">RepairingPlacement</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> OpIdx,</span></CodeLine>
<Link id="l00357" /><CodeLine lineNumber="357"><span class="doxyHighlight">                       </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &amp;<a href="/docs/api/classes/llvm/regbankselect/#a98f7afadeec4309cbce64ca040635c04">TRI</a>, <a href="/docs/api/classes/llvm/pass">Pass</a> &amp;<a href="/docs/api/files/lib/lib/option/option-cpp/#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>,</span></CodeLine>
<Link id="l00358" /><CodeLine lineNumber="358"><span class="doxyHighlight">                       <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6">RepairingKind</a> Kind = <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6a07b4fac858ad8fc2c4d9bdc7acd6e195">RepairingKind::Insert</a>);</span></CodeLine>
<Link id="l00359" /><CodeLine lineNumber="359"></CodeLine>
<Link id="l00360" /><CodeLine lineNumber="360"><span class="doxyHighlightComment">    /// \\name Getters.</span></CodeLine>
<Link id="l00361" /><CodeLine lineNumber="361"><span class="doxyHighlightComment">    /// @&#123;</span></CodeLine>
<Link id="l00362" /><CodeLine lineNumber="362" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#aa7cdfa61d3992d77bec94e1eda33bbc9"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6">RepairingKind</a> <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#aa7cdfa61d3992d77bec94e1eda33bbc9">getKind</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Kind; &#125;</span></CodeLine>
<Link id="l00363" /><CodeLine lineNumber="363" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#a54f51880f9bdd786f0d0983c4f15122b"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a54f51880f9bdd786f0d0983c4f15122b">getOpIdx</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> OpIdx; &#125;</span></CodeLine>
<Link id="l00364" /><CodeLine lineNumber="364" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#a39535988981c86b512949745cbfab81c"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a39535988981c86b512949745cbfab81c">canMaterialize</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> CanMaterialize; &#125;</span></CodeLine>
<Link id="l00365" /><CodeLine lineNumber="365" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#a05dcab804adfa11b36715dddba6c52db"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a05dcab804adfa11b36715dddba6c52db">hasSplit</a>() &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> HasSplit; &#125;</span></CodeLine>
<Link id="l00366" /><CodeLine lineNumber="366"><span class="doxyHighlightComment">    /// @&#125;</span></CodeLine>
<Link id="l00367" /><CodeLine lineNumber="367"></CodeLine>
<Link id="l00368" /><CodeLine lineNumber="368"><span class="doxyHighlightComment">    /// \\name Overloaded methods to add an insertion point.</span></CodeLine>
<Link id="l00369" /><CodeLine lineNumber="369"><span class="doxyHighlightComment">    /// @&#123;</span></CodeLine>
<Link id="l00370" /><CodeLine lineNumber="370"><span class="doxyHighlightComment">    /// Add a MBBInsertionPoint to the list of InsertPoints.</span></CodeLine>
<Link id="l00371" /><CodeLine lineNumber="371"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#afc878eab773e206b796e5b9790343a8e">addInsertPoint</a>(<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#a5958512eae2979bd2eb383977996a600">MBB</a>, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Beginning);</span></CodeLine>
<Link id="l00372" /><CodeLine lineNumber="372"><span class="doxyHighlightComment">    /// Add a InstrInsertionPoint to the list of InsertPoints.</span></CodeLine>
<Link id="l00373" /><CodeLine lineNumber="373"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#afc878eab773e206b796e5b9790343a8e">addInsertPoint</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/passes/standardinstrumentations-cpp/#a6f1bbcae7288f05872dcfe811d0388baa9060587edeb01a63e3d3edc959678d1e">Before</a>);</span></CodeLine>
<Link id="l00374" /><CodeLine lineNumber="374"><span class="doxyHighlightComment">    /// Add an EdgeInsertionPoint (\\p Src, \\p Dst) to the list of InsertPoints.</span></CodeLine>
<Link id="l00375" /><CodeLine lineNumber="375"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#afc878eab773e206b796e5b9790343a8e">addInsertPoint</a>(<a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp;Src, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp;Dst);</span></CodeLine>
<Link id="l00376" /><CodeLine lineNumber="376"><span class="doxyHighlightComment">    /// Add an InsertPoint to the list of insert points.</span></CodeLine>
<Link id="l00377" /><CodeLine lineNumber="377"><span class="doxyHighlightComment">    /// This method takes the ownership of &amp;\\p Point.</span></CodeLine>
<Link id="l00378" /><CodeLine lineNumber="378"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#afc878eab773e206b796e5b9790343a8e">addInsertPoint</a>(<a href="/docs/api/classes/llvm/regbankselect/insertpoint">InsertPoint</a> &amp;Point);</span></CodeLine>
<Link id="l00379" /><CodeLine lineNumber="379"><span class="doxyHighlightComment">    /// @&#125;</span></CodeLine>
<Link id="l00380" /><CodeLine lineNumber="380"></CodeLine>
<Link id="l00381" /><CodeLine lineNumber="381"><span class="doxyHighlightComment">    /// \\name Accessors related to the insertion points.</span></CodeLine>
<Link id="l00382" /><CodeLine lineNumber="382"><span class="doxyHighlightComment">    /// @&#123;</span></CodeLine>
<Link id="l00383" /><CodeLine lineNumber="383" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#a79339174ad58248f97f5f008a433f6f7"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#ac084e5dcf8b5623c02615b39fb15346e">insertpt&#95;iterator</a> <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a79339174ad58248f97f5f008a433f6f7">begin</a>() &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> InsertPoints.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a8a045d250952c0867382a9840ee18fdf">begin</a>(); &#125;</span></CodeLine>
<Link id="l00384" /><CodeLine lineNumber="384" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#a2cc2edf955a201c02efec132befd5c67"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#ac084e5dcf8b5623c02615b39fb15346e">insertpt&#95;iterator</a> <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a2cc2edf955a201c02efec132befd5c67">end</a>() &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> InsertPoints.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a075e34e98605d0e7c289763a104869ac">end</a>(); &#125;</span></CodeLine>
<Link id="l00385" /><CodeLine lineNumber="385"></CodeLine>
<Link id="l00386" /><CodeLine lineNumber="386" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#a68a0b239822776d782569d9f2f175c83"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a3bb3abc567d90e2e308cde17b004366a">const&#95;insertpt&#95;iterator</a> <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a68a0b239822776d782569d9f2f175c83">begin</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> InsertPoints.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a8a045d250952c0867382a9840ee18fdf">begin</a>(); &#125;</span></CodeLine>
<Link id="l00387" /><CodeLine lineNumber="387" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#aa70f18ca7fb9f39bddb22fe25e93ae63"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a3bb3abc567d90e2e308cde17b004366a">const&#95;insertpt&#95;iterator</a> <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#aa70f18ca7fb9f39bddb22fe25e93ae63">end</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> InsertPoints.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a075e34e98605d0e7c289763a104869ac">end</a>(); &#125;</span></CodeLine>
<Link id="l00388" /><CodeLine lineNumber="388"></CodeLine>
<Link id="l00389" /><CodeLine lineNumber="389" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#a14dead5300c592bf7b44fadc46d5d1f3"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a14dead5300c592bf7b44fadc46d5d1f3">getNumInsertPoints</a>()</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> InsertPoints.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>(); &#125;</span></CodeLine>
<Link id="l00390" /><CodeLine lineNumber="390"><span class="doxyHighlightComment">    /// @&#125;</span></CodeLine>
<Link id="l00391" /><CodeLine lineNumber="391"></CodeLine>
<Link id="l00392" /><CodeLine lineNumber="392"><span class="doxyHighlightComment">    /// Change the type of this repairing placement to \\p NewKind.</span></CodeLine>
<Link id="l00393" /><CodeLine lineNumber="393"><span class="doxyHighlightComment">    /// It is not possible to switch a repairing placement to the</span></CodeLine>
<Link id="l00394" /><CodeLine lineNumber="394"><span class="doxyHighlightComment">    /// RepairingKind::Insert. There is no fundamental problem with</span></CodeLine>
<Link id="l00395" /><CodeLine lineNumber="395"><span class="doxyHighlightComment">    /// that, but no uses as well, so do not support it for now.</span></CodeLine>
<Link id="l00396" /><CodeLine lineNumber="396"><span class="doxyHighlightComment">    ///</span></CodeLine>
<Link id="l00397" /><CodeLine lineNumber="397"><span class="doxyHighlightComment">    /// \\pre NewKind != RepairingKind::Insert</span></CodeLine>
<Link id="l00398" /><CodeLine lineNumber="398"><span class="doxyHighlightComment">    /// \\post getKind() == NewKind</span></CodeLine>
<Link id="l00399" /><CodeLine lineNumber="399" lineLink="/docs/api/classes/llvm/regbankselect/repairingplacement/#adb2d45f98e7457256296b0943ddd4a6c"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#adb2d45f98e7457256296b0943ddd4a6c">switchTo</a>(<a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6">RepairingKind</a> NewKind) &#123;</span></CodeLine>
<Link id="l00400" /><CodeLine lineNumber="400"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewKind != Kind &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Already of the right Kind&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00401" /><CodeLine lineNumber="401"><span class="doxyHighlight">      Kind = NewKind;</span></CodeLine>
<Link id="l00402" /><CodeLine lineNumber="402"><span class="doxyHighlight">      InsertPoints.<a href="/docs/api/classes/llvm/smallvectorimpl/#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</span></CodeLine>
<Link id="l00403" /><CodeLine lineNumber="403"><span class="doxyHighlight">      CanMaterialize = NewKind != <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6a98e66b30e93d741af07a3fefeb66ab1b">RepairingKind::Impossible</a>;</span></CodeLine>
<Link id="l00404" /><CodeLine lineNumber="404"><span class="doxyHighlight">      HasSplit = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00405" /><CodeLine lineNumber="405"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewKind != <a href="/docs/api/classes/llvm/regbankselect/repairingplacement/#a66bdd17ee82024ea0ccbb0288b379dd6a07b4fac858ad8fc2c4d9bdc7acd6e195">RepairingKind::Insert</a> &amp;&amp;</span></CodeLine>
<Link id="l00406" /><CodeLine lineNumber="406"><span class="doxyHighlight">             </span><span class="doxyHighlightStringLiteral">&quot;We would need more MI to switch to Insert&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00407" /><CodeLine lineNumber="407"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00408" /><CodeLine lineNumber="408"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00409" /><CodeLine lineNumber="409"></CodeLine>
<Link id="l00410" /><CodeLine lineNumber="410"><span class="doxyHighlightKeyword">protected</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00411" /><CodeLine lineNumber="411"><span class="doxyHighlightComment">  /// Helper class used to represent the cost for mapping an instruction.</span></CodeLine>
<Link id="l00412" /><CodeLine lineNumber="412"><span class="doxyHighlightComment">  /// When mapping an instruction, we may introduce some repairing code.</span></CodeLine>
<Link id="l00413" /><CodeLine lineNumber="413"><span class="doxyHighlightComment">  /// In most cases, the repairing code is local to the instruction,</span></CodeLine>
<Link id="l00414" /><CodeLine lineNumber="414"><span class="doxyHighlightComment">  /// thus, we can omit the basic block frequency from the cost.</span></CodeLine>
<Link id="l00415" /><CodeLine lineNumber="415"><span class="doxyHighlightComment">  /// However, some alternatives may produce non-local cost, e.g., when</span></CodeLine>
<Link id="l00416" /><CodeLine lineNumber="416"><span class="doxyHighlightComment">  /// repairing a phi, and thus we then need to scale the local cost</span></CodeLine>
<Link id="l00417" /><CodeLine lineNumber="417"><span class="doxyHighlightComment">  /// to the non-local cost. This class does this for us.</span></CodeLine>
<Link id="l00418" /><CodeLine lineNumber="418"><span class="doxyHighlightComment">  /// \\note: We could simply always scale the cost. The problem is that</span></CodeLine>
<Link id="l00419" /><CodeLine lineNumber="419"><span class="doxyHighlightComment">  /// there are higher chances that we saturate the cost easier and end</span></CodeLine>
<Link id="l00420" /><CodeLine lineNumber="420"><span class="doxyHighlightComment">  /// up having the same cost for actually different alternatives.</span></CodeLine>
<Link id="l00421" /><CodeLine lineNumber="421"><span class="doxyHighlightComment">  /// Another option would be to use APInt everywhere.</span></CodeLine>
<Link id="l00422" /><CodeLine lineNumber="422" lineLink="/docs/api/classes/llvm/regbankselect/mappingcost"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">class </span><span class="doxyHighlight">MappingCost &#123;</span></CodeLine>
<Link id="l00423" /><CodeLine lineNumber="423"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">private</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00424" /><CodeLine lineNumber="424"><span class="doxyHighlightComment">    /// Cost of the local instructions.</span></CodeLine>
<Link id="l00425" /><CodeLine lineNumber="425"><span class="doxyHighlightComment">    /// This cost is free of basic block frequency.</span></CodeLine>
<Link id="l00426" /><CodeLine lineNumber="426"><span class="doxyHighlight">    uint64&#95;t LocalCost = 0;</span></CodeLine>
<Link id="l00427" /><CodeLine lineNumber="427"><span class="doxyHighlightComment">    /// Cost of the non-local instructions.</span></CodeLine>
<Link id="l00428" /><CodeLine lineNumber="428"><span class="doxyHighlightComment">    /// This cost should include the frequency of the related blocks.</span></CodeLine>
<Link id="l00429" /><CodeLine lineNumber="429"><span class="doxyHighlight">    uint64&#95;t NonLocalCost = 0;</span></CodeLine>
<Link id="l00430" /><CodeLine lineNumber="430"><span class="doxyHighlightComment">    /// Frequency of the block where the local instructions live.</span></CodeLine>
<Link id="l00431" /><CodeLine lineNumber="431"><span class="doxyHighlight">    uint64&#95;t LocalFreq;</span></CodeLine>
<Link id="l00432" /><CodeLine lineNumber="432"></CodeLine>
<Link id="l00433" /><CodeLine lineNumber="433"><span class="doxyHighlight">    MappingCost(uint64&#95;t LocalCost, uint64&#95;t NonLocalCost, uint64&#95;t LocalFreq)</span></CodeLine>
<Link id="l00434" /><CodeLine lineNumber="434"><span class="doxyHighlight">        : LocalCost(LocalCost), NonLocalCost(NonLocalCost),</span></CodeLine>
<Link id="l00435" /><CodeLine lineNumber="435"><span class="doxyHighlight">          LocalFreq(LocalFreq) &#123;&#125;</span></CodeLine>
<Link id="l00436" /><CodeLine lineNumber="436"></CodeLine>
<Link id="l00437" /><CodeLine lineNumber="437"><span class="doxyHighlightComment">    /// Check if this cost is saturated.</span></CodeLine>
<Link id="l00438" /><CodeLine lineNumber="438"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> isSaturated() </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00439" /><CodeLine lineNumber="439"></CodeLine>
<Link id="l00440" /><CodeLine lineNumber="440"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00441" /><CodeLine lineNumber="441"><span class="doxyHighlightComment">    /// Create a MappingCost assuming that most of the instructions</span></CodeLine>
<Link id="l00442" /><CodeLine lineNumber="442"><span class="doxyHighlightComment">    /// will occur in a basic block with \\p LocalFreq frequency.</span></CodeLine>
<Link id="l00443" /><CodeLine lineNumber="443"><span class="doxyHighlight">    MappingCost(<a href="/docs/api/classes/llvm/blockfrequency">BlockFrequency</a> LocalFreq);</span></CodeLine>
<Link id="l00444" /><CodeLine lineNumber="444"></CodeLine>
<Link id="l00445" /><CodeLine lineNumber="445"><span class="doxyHighlightComment">    /// Add \\p Cost to the local cost.</span></CodeLine>
<Link id="l00446" /><CodeLine lineNumber="446"><span class="doxyHighlightComment">    /// \\return true if this cost is saturated, false otherwise.</span></CodeLine>
<Link id="l00447" /><CodeLine lineNumber="447"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/mappingcost/#a71e543f0b1123c8f580ef5451e500b55">addLocalCost</a>(uint64&#95;t <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a>);</span></CodeLine>
<Link id="l00448" /><CodeLine lineNumber="448"></CodeLine>
<Link id="l00449" /><CodeLine lineNumber="449"><span class="doxyHighlightComment">    /// Add \\p Cost to the non-local cost.</span></CodeLine>
<Link id="l00450" /><CodeLine lineNumber="450"><span class="doxyHighlightComment">    /// Non-local cost should reflect the frequency of their placement.</span></CodeLine>
<Link id="l00451" /><CodeLine lineNumber="451"><span class="doxyHighlightComment">    /// \\return true if this cost is saturated, false otherwise.</span></CodeLine>
<Link id="l00452" /><CodeLine lineNumber="452"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/mappingcost/#a9d17352b9fccfdf80448e9d0d15eebb6">addNonLocalCost</a>(uint64&#95;t <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a>);</span></CodeLine>
<Link id="l00453" /><CodeLine lineNumber="453"></CodeLine>
<Link id="l00454" /><CodeLine lineNumber="454"><span class="doxyHighlightComment">    /// Saturate the cost to the maximal representable value.</span></CodeLine>
<Link id="l00455" /><CodeLine lineNumber="455"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/mappingcost/#a2b676e3c4e68d0e102c861e6fc2233c2">saturate</a>();</span></CodeLine>
<Link id="l00456" /><CodeLine lineNumber="456"></CodeLine>
<Link id="l00457" /><CodeLine lineNumber="457"><span class="doxyHighlightComment">    /// Return an instance of MappingCost that represents an</span></CodeLine>
<Link id="l00458" /><CodeLine lineNumber="458"><span class="doxyHighlightComment">    /// impossible mapping.</span></CodeLine>
<Link id="l00459" /><CodeLine lineNumber="459"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> MappingCost <a href="/docs/api/classes/llvm/regbankselect/mappingcost/#a7e2284f2c68e1187be7ed8c89a0d6f88">ImpossibleCost</a>();</span></CodeLine>
<Link id="l00460" /><CodeLine lineNumber="460"></CodeLine>
<Link id="l00461" /><CodeLine lineNumber="461"><span class="doxyHighlightComment">    /// Check if this is less than \\p Cost.</span></CodeLine>
<Link id="l00462" /><CodeLine lineNumber="462"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/mappingcost/#aa0252d6f02b3a363b68e4438db3f82a7">operator&lt;</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MappingCost &amp;<a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a>) </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00463" /><CodeLine lineNumber="463"><span class="doxyHighlightComment">    /// Check if this is equal to \\p Cost.</span></CodeLine>
<Link id="l00464" /><CodeLine lineNumber="464"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/mappingcost/#a4ff1832629e69da1b5cf274d68a578c3">operator==</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MappingCost &amp;<a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a>) </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00465" /><CodeLine lineNumber="465"><span class="doxyHighlightComment">    /// Check if this is not equal to \\p Cost.</span></CodeLine>
<Link id="l00466" /><CodeLine lineNumber="466" lineLink="/docs/api/classes/llvm/regbankselect/mappingcost/#a0b1800df6c7d522d4e212b98b244f599"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/mappingcost/#a0b1800df6c7d522d4e212b98b244f599">operator!=</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MappingCost &amp;<a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> !(&#42;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight"> == <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a>); &#125;</span></CodeLine>
<Link id="l00467" /><CodeLine lineNumber="467"><span class="doxyHighlightComment">    /// Check if this is greater than \\p Cost.</span></CodeLine>
<Link id="l00468" /><CodeLine lineNumber="468" lineLink="/docs/api/classes/llvm/regbankselect/mappingcost/#af7a7bcefcda015e6ded1b99c7ffb25ef"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/mappingcost/#af7a7bcefcda015e6ded1b99c7ffb25ef">operator&gt;</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MappingCost &amp;<a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00469" /><CodeLine lineNumber="469"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#42;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight"> != <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a> &amp;&amp; <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a> &lt; &#42;</span><span class="doxyHighlightKeyword">this</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00470" /><CodeLine lineNumber="470"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00471" /><CodeLine lineNumber="471"></CodeLine>
<Link id="l00472" /><CodeLine lineNumber="472"><span class="doxyHighlightComment">    /// Print this on dbgs() stream.</span></CodeLine>
<Link id="l00473" /><CodeLine lineNumber="473"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/mappingcost/#a7560fb1f9f314cb11cdc7761f21ad3d8">dump</a>() </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00474" /><CodeLine lineNumber="474"></CodeLine>
<Link id="l00475" /><CodeLine lineNumber="475"><span class="doxyHighlightComment">    /// Print this on \\p OS;</span></CodeLine>
<Link id="l00476" /><CodeLine lineNumber="476"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/mappingcost/#acfb4953eaf1304ed97bc52250a3196da">print</a>(<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;OS) </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00477" /><CodeLine lineNumber="477"></CodeLine>
<Link id="l00478" /><CodeLine lineNumber="478"><span class="doxyHighlightComment">    /// Overload the stream operator for easy debug printing.</span></CodeLine>
<Link id="l00479" /><CodeLine lineNumber="479" lineLink="/docs/api/classes/llvm/regbankselect/mappingcost/#ab47d557d0331a36575cc142c581b23bd"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">friend</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;<a href="/docs/api/classes/llvm/regbankselect/mappingcost/#ab47d557d0331a36575cc142c581b23bd">operator&lt;&lt;</a>(<a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;OS, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> MappingCost &amp;<a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a>) &#123;</span></CodeLine>
<Link id="l00480" /><CodeLine lineNumber="480"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a19921a3ceb99548f498d3df118eda9ed">Cost</a>.print(OS);</span></CodeLine>
<Link id="l00481" /><CodeLine lineNumber="481"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> OS;</span></CodeLine>
<Link id="l00482" /><CodeLine lineNumber="482"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00483" /><CodeLine lineNumber="483"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00484" /><CodeLine lineNumber="484"></CodeLine>
<Link id="l00485" /><CodeLine lineNumber="485"><span class="doxyHighlightComment">  /// Interface to the target lowering info related</span></CodeLine>
<Link id="l00486" /><CodeLine lineNumber="486"><span class="doxyHighlightComment">  /// to register banks.</span></CodeLine>
<Link id="l00487" /><CodeLine lineNumber="487" lineLink="/docs/api/classes/llvm/regbankselect/#afa42d1c7970f30d2fa388d5399348001"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/registerbankinfo">RegisterBankInfo</a> &#42;<a href="/docs/api/classes/llvm/regbankselect/#afa42d1c7970f30d2fa388d5399348001">RBI</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00488" /><CodeLine lineNumber="488"></CodeLine>
<Link id="l00489" /><CodeLine lineNumber="489"><span class="doxyHighlightComment">  /// MRI contains all the register class/bank information that this</span></CodeLine>
<Link id="l00490" /><CodeLine lineNumber="490"><span class="doxyHighlightComment">  /// pass uses and updates.</span></CodeLine>
<Link id="l00491" /><CodeLine lineNumber="491" lineLink="/docs/api/classes/llvm/regbankselect/#ad8501c8e8cf2d5ffaa86880f57cd4569"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &#42;<a href="/docs/api/classes/llvm/regbankselect/#ad8501c8e8cf2d5ffaa86880f57cd4569">MRI</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00492" /><CodeLine lineNumber="492"></CodeLine>
<Link id="l00493" /><CodeLine lineNumber="493"><span class="doxyHighlightComment">  /// Information on the register classes for the current function.</span></CodeLine>
<Link id="l00494" /><CodeLine lineNumber="494" lineLink="/docs/api/classes/llvm/regbankselect/#a98f7afadeec4309cbce64ca040635c04"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetregisterinfo">TargetRegisterInfo</a> &#42;<a href="/docs/api/classes/llvm/regbankselect/#a98f7afadeec4309cbce64ca040635c04">TRI</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00495" /><CodeLine lineNumber="495"></CodeLine>
<Link id="l00496" /><CodeLine lineNumber="496"><span class="doxyHighlightComment">  /// Get the frequency of blocks.</span></CodeLine>
<Link id="l00497" /><CodeLine lineNumber="497"><span class="doxyHighlightComment">  /// This is required for non-fast mode.</span></CodeLine>
<Link id="l00498" /><CodeLine lineNumber="498" lineLink="/docs/api/classes/llvm/regbankselect/#a229ce6916aecf746e69143476a1e5686"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineblockfrequencyinfo">MachineBlockFrequencyInfo</a> &#42;<a href="/docs/api/classes/llvm/regbankselect/#a229ce6916aecf746e69143476a1e5686">MBFI</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00499" /><CodeLine lineNumber="499"></CodeLine>
<Link id="l00500" /><CodeLine lineNumber="500"><span class="doxyHighlightComment">  /// Get the frequency of the edges.</span></CodeLine>
<Link id="l00501" /><CodeLine lineNumber="501"><span class="doxyHighlightComment">  /// This is required for non-fast mode.</span></CodeLine>
<Link id="l00502" /><CodeLine lineNumber="502" lineLink="/docs/api/classes/llvm/regbankselect/#ab5b60d048f9e03018f15f3730cb24921"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinebranchprobabilityinfo">MachineBranchProbabilityInfo</a> &#42;<a href="/docs/api/classes/llvm/regbankselect/#ab5b60d048f9e03018f15f3730cb24921">MBPI</a> = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00503" /><CodeLine lineNumber="503"></CodeLine>
<Link id="l00504" /><CodeLine lineNumber="504"><span class="doxyHighlightComment">  /// Current optimization remark emitter. Used to report failures.</span></CodeLine>
<Link id="l00505" /><CodeLine lineNumber="505" lineLink="/docs/api/classes/llvm/regbankselect/#afc036a279f48923ec0077a63d975e158"><span class="doxyHighlight">  std::unique&#95;ptr&lt;MachineOptimizationRemarkEmitter&gt; <a href="/docs/api/classes/llvm/regbankselect/#afc036a279f48923ec0077a63d975e158">MORE</a>;</span></CodeLine>
<Link id="l00506" /><CodeLine lineNumber="506"></CodeLine>
<Link id="l00507" /><CodeLine lineNumber="507"><span class="doxyHighlightComment">  /// Helper class used for every code morphing.</span></CodeLine>
<Link id="l00508" /><CodeLine lineNumber="508" lineLink="/docs/api/classes/llvm/regbankselect/#a1a75a71e05fa8fbc53f9c4437dafef20"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> <a href="/docs/api/classes/llvm/regbankselect/#a1a75a71e05fa8fbc53f9c4437dafef20">MIRBuilder</a>;</span></CodeLine>
<Link id="l00509" /><CodeLine lineNumber="509"></CodeLine>
<Link id="l00510" /><CodeLine lineNumber="510"><span class="doxyHighlightComment">  /// Optimization mode of the pass.</span></CodeLine>
<Link id="l00511" /><CodeLine lineNumber="511" lineLink="/docs/api/classes/llvm/regbankselect/#a32ef3eb67c8ddb568ebc316b4e56bd27"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/regbankselect/#a033277264e702883c8bbf13871247a84">Mode</a> <a href="/docs/api/classes/llvm/regbankselect/#a32ef3eb67c8ddb568ebc316b4e56bd27">OptMode</a>;</span></CodeLine>
<Link id="l00512" /><CodeLine lineNumber="512"></CodeLine>
<Link id="l00513" /><CodeLine lineNumber="513"><span class="doxyHighlightComment">  /// Current target configuration. Controls how the pass handles errors.</span></CodeLine>
<Link id="l00514" /><CodeLine lineNumber="514" lineLink="/docs/api/classes/llvm/regbankselect/#ae2b9166b734338bf10060074564467a0"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetpassconfig">TargetPassConfig</a> &#42;<a href="/docs/api/classes/llvm/regbankselect/#ae2b9166b734338bf10060074564467a0">TPC</a>;</span></CodeLine>
<Link id="l00515" /><CodeLine lineNumber="515"></CodeLine>
<Link id="l00516" /><CodeLine lineNumber="516"><span class="doxyHighlightComment">  /// Assign the register bank of each operand of \\p MI.</span></CodeLine>
<Link id="l00517" /><CodeLine lineNumber="517"><span class="doxyHighlightComment">  /// \\return True on success, false otherwise.</span></CodeLine>
<Link id="l00518" /><CodeLine lineNumber="518"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/#a6553ca5670588f279c72f84d46b05033">assignInstr</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l00519" /><CodeLine lineNumber="519"></CodeLine>
<Link id="l00520" /><CodeLine lineNumber="520"><span class="doxyHighlightComment">  /// Initialize the field members using \\p MF.</span></CodeLine>
<Link id="l00521" /><CodeLine lineNumber="521"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/#a6f7e57c8c003253b7da93520af8ef8c2">init</a>(<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF);</span></CodeLine>
<Link id="l00522" /><CodeLine lineNumber="522"></CodeLine>
<Link id="l00523" /><CodeLine lineNumber="523"><span class="doxyHighlightComment">  /// Check if \\p Reg is already assigned what is described by \\p ValMapping.</span></CodeLine>
<Link id="l00524" /><CodeLine lineNumber="524"><span class="doxyHighlightComment">  /// \\p OnlyAssign == true means that \\p Reg just needs to be assigned a</span></CodeLine>
<Link id="l00525" /><CodeLine lineNumber="525"><span class="doxyHighlightComment">  /// register bank.  I.e., no repairing is necessary to have the</span></CodeLine>
<Link id="l00526" /><CodeLine lineNumber="526"><span class="doxyHighlightComment">  /// assignment match.</span></CodeLine>
<Link id="l00527" /><CodeLine lineNumber="527"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/#ac00dc73d1e42ba9d0e4f906e8b4edfd8">assignmentMatch</a>(<a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a359e1ff26f6d466d927a61aae45b05c3">Reg</a>,</span></CodeLine>
<Link id="l00528" /><CodeLine lineNumber="528"><span class="doxyHighlight">                       </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/registerbankinfo/valuemapping">RegisterBankInfo::ValueMapping</a> &amp;ValMapping,</span></CodeLine>
<Link id="l00529" /><CodeLine lineNumber="529"><span class="doxyHighlight">                       </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &amp;OnlyAssign) </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00530" /><CodeLine lineNumber="530"></CodeLine>
<Link id="l00531" /><CodeLine lineNumber="531"><span class="doxyHighlightComment">  /// Insert repairing code for \\p Reg as specified by \\p ValMapping.</span></CodeLine>
<Link id="l00532" /><CodeLine lineNumber="532"><span class="doxyHighlightComment">  /// The repairing placement is specified by \\p RepairPt.</span></CodeLine>
<Link id="l00533" /><CodeLine lineNumber="533"><span class="doxyHighlightComment">  /// \\p NewVRegs contains all the registers required to remap \\p Reg.</span></CodeLine>
<Link id="l00534" /><CodeLine lineNumber="534"><span class="doxyHighlightComment">  /// In other words, the number of registers in NewVRegs must be equal</span></CodeLine>
<Link id="l00535" /><CodeLine lineNumber="535"><span class="doxyHighlightComment">  /// to ValMapping.BreakDown.size().</span></CodeLine>
<Link id="l00536" /><CodeLine lineNumber="536"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l00537" /><CodeLine lineNumber="537"><span class="doxyHighlightComment">  /// The transformation could be sketched as:</span></CodeLine>
<Link id="l00538" /><CodeLine lineNumber="538"><span class="doxyHighlightComment">  /// \\code</span></CodeLine>
<Link id="l00539" /><CodeLine lineNumber="539"><span class="doxyHighlightComment">  /// ... = op Reg</span></CodeLine>
<Link id="l00540" /><CodeLine lineNumber="540"><span class="doxyHighlightComment">  /// \\endcode</span></CodeLine>
<Link id="l00541" /><CodeLine lineNumber="541"><span class="doxyHighlightComment">  /// Becomes</span></CodeLine>
<Link id="l00542" /><CodeLine lineNumber="542"><span class="doxyHighlightComment">  /// \\code</span></CodeLine>
<Link id="l00543" /><CodeLine lineNumber="543"><span class="doxyHighlightComment">  /// &lt;NewRegs&gt; = COPY or extract Reg</span></CodeLine>
<Link id="l00544" /><CodeLine lineNumber="544"><span class="doxyHighlightComment">  /// ... = op Reg</span></CodeLine>
<Link id="l00545" /><CodeLine lineNumber="545"><span class="doxyHighlightComment">  /// \\endcode</span></CodeLine>
<Link id="l00546" /><CodeLine lineNumber="546"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l00547" /><CodeLine lineNumber="547"><span class="doxyHighlightComment">  /// and</span></CodeLine>
<Link id="l00548" /><CodeLine lineNumber="548"><span class="doxyHighlightComment">  /// \\code</span></CodeLine>
<Link id="l00549" /><CodeLine lineNumber="549"><span class="doxyHighlightComment">  /// Reg = op ...</span></CodeLine>
<Link id="l00550" /><CodeLine lineNumber="550"><span class="doxyHighlightComment">  /// \\endcode</span></CodeLine>
<Link id="l00551" /><CodeLine lineNumber="551"><span class="doxyHighlightComment">  /// Becomes</span></CodeLine>
<Link id="l00552" /><CodeLine lineNumber="552"><span class="doxyHighlightComment">  /// \\code</span></CodeLine>
<Link id="l00553" /><CodeLine lineNumber="553"><span class="doxyHighlightComment">  /// Reg = op ...</span></CodeLine>
<Link id="l00554" /><CodeLine lineNumber="554"><span class="doxyHighlightComment">  /// Reg = COPY or build&#95;sequence &lt;NewRegs&gt;</span></CodeLine>
<Link id="l00555" /><CodeLine lineNumber="555"><span class="doxyHighlightComment">  /// \\endcode</span></CodeLine>
<Link id="l00556" /><CodeLine lineNumber="556"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l00557" /><CodeLine lineNumber="557"><span class="doxyHighlightComment">  /// \\pre NewVRegs.size() == ValMapping.BreakDown.size()</span></CodeLine>
<Link id="l00558" /><CodeLine lineNumber="558"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l00559" /><CodeLine lineNumber="559"><span class="doxyHighlightComment">  /// \\note The caller is supposed to do the rewriting of op if need be.</span></CodeLine>
<Link id="l00560" /><CodeLine lineNumber="560"><span class="doxyHighlightComment">  /// I.e., Reg = op ... =&gt; &lt;NewRegs&gt; = NewOp ...</span></CodeLine>
<Link id="l00561" /><CodeLine lineNumber="561"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l00562" /><CodeLine lineNumber="562"><span class="doxyHighlightComment">  /// \\return True if the repairing worked, false otherwise.</span></CodeLine>
<Link id="l00563" /><CodeLine lineNumber="563"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/#ac8d8bb4999d968e0efc9555c2b178a83">repairReg</a>(<a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;MO,</span></CodeLine>
<Link id="l00564" /><CodeLine lineNumber="564"><span class="doxyHighlight">                 </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/registerbankinfo/valuemapping">RegisterBankInfo::ValueMapping</a> &amp;ValMapping,</span></CodeLine>
<Link id="l00565" /><CodeLine lineNumber="565"><span class="doxyHighlight">                 <a href="/docs/api/classes/llvm/regbankselect/repairingplacement">RegBankSelect::RepairingPlacement</a> &amp;RepairPt,</span></CodeLine>
<Link id="l00566" /><CodeLine lineNumber="566"><span class="doxyHighlight">                 </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/iterator-range">iterator&#95;range</a>&lt;<a href="/docs/api/classes/llvm/smallvectorimpl/#a641b0782e0cc309372855bfc19fdfd97">SmallVectorImpl&lt;Register&gt;::const&#95;iterator</a>&gt;</span></CodeLine>
<Link id="l00567" /><CodeLine lineNumber="567"><span class="doxyHighlight">                     &amp;NewVRegs);</span></CodeLine>
<Link id="l00568" /><CodeLine lineNumber="568"></CodeLine>
<Link id="l00569" /><CodeLine lineNumber="569"><span class="doxyHighlightComment">  /// Return the cost of the instruction needed to map \\p MO to \\p ValMapping.</span></CodeLine>
<Link id="l00570" /><CodeLine lineNumber="570"><span class="doxyHighlightComment">  /// The cost is free of basic block frequencies.</span></CodeLine>
<Link id="l00571" /><CodeLine lineNumber="571"><span class="doxyHighlightComment">  /// \\pre MO.isReg()</span></CodeLine>
<Link id="l00572" /><CodeLine lineNumber="572"><span class="doxyHighlightComment">  /// \\pre MO is assigned to a register bank.</span></CodeLine>
<Link id="l00573" /><CodeLine lineNumber="573"><span class="doxyHighlightComment">  /// \\pre ValMapping is a valid mapping for MO.</span></CodeLine>
<Link id="l00574" /><CodeLine lineNumber="574"><span class="doxyHighlight">  uint64&#95;t</span></CodeLine>
<Link id="l00575" /><CodeLine lineNumber="575"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/regbankselect/#ac3cfa17f907e7258d898433ddfeb3fbf">getRepairCost</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;MO,</span></CodeLine>
<Link id="l00576" /><CodeLine lineNumber="576"><span class="doxyHighlight">                </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/registerbankinfo/valuemapping">RegisterBankInfo::ValueMapping</a> &amp;ValMapping) </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00577" /><CodeLine lineNumber="577"></CodeLine>
<Link id="l00578" /><CodeLine lineNumber="578"><span class="doxyHighlightComment">  /// Find the best mapping for \\p MI from \\p PossibleMappings.</span></CodeLine>
<Link id="l00579" /><CodeLine lineNumber="579"><span class="doxyHighlightComment">  /// \\return a reference on the best mapping in \\p PossibleMappings.</span></CodeLine>
<Link id="l00580" /><CodeLine lineNumber="580"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/registerbankinfo/instructionmapping">RegisterBankInfo::InstructionMapping</a> &amp;</span></CodeLine>
<Link id="l00581" /><CodeLine lineNumber="581"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/regbankselect/#a4dd660f230b1343ae79f15573d7da3d4">findBestMapping</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l00582" /><CodeLine lineNumber="582"><span class="doxyHighlight">                  <a href="/docs/api/classes/llvm/registerbankinfo/#ac89dbbb6460391f27fb352c20c600769">RegisterBankInfo::InstructionMappings</a> &amp;PossibleMappings,</span></CodeLine>
<Link id="l00583" /><CodeLine lineNumber="583"><span class="doxyHighlight">                  <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;RepairingPlacement&gt;</a> &amp;RepairPts);</span></CodeLine>
<Link id="l00584" /><CodeLine lineNumber="584"></CodeLine>
<Link id="l00585" /><CodeLine lineNumber="585"><span class="doxyHighlightComment">  /// Compute the cost of mapping \\p MI with \\p InstrMapping and</span></CodeLine>
<Link id="l00586" /><CodeLine lineNumber="586"><span class="doxyHighlightComment">  /// compute the repairing placement for such mapping in \\p</span></CodeLine>
<Link id="l00587" /><CodeLine lineNumber="587"><span class="doxyHighlightComment">  /// RepairPts.</span></CodeLine>
<Link id="l00588" /><CodeLine lineNumber="588"><span class="doxyHighlightComment">  /// \\p BestCost is used to specify when the cost becomes too high</span></CodeLine>
<Link id="l00589" /><CodeLine lineNumber="589"><span class="doxyHighlightComment">  /// and thus it is not worth computing the RepairPts.  Moreover if</span></CodeLine>
<Link id="l00590" /><CodeLine lineNumber="590"><span class="doxyHighlightComment">  /// \\p BestCost == nullptr, the mapping cost is actually not</span></CodeLine>
<Link id="l00591" /><CodeLine lineNumber="591"><span class="doxyHighlightComment">  /// computed.</span></CodeLine>
<Link id="l00592" /><CodeLine lineNumber="592"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/regbankselect/mappingcost">MappingCost</a></span></CodeLine>
<Link id="l00593" /><CodeLine lineNumber="593"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/regbankselect/#ac7d08af4bb81846173b6186f568fcc8b">computeMapping</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l00594" /><CodeLine lineNumber="594"><span class="doxyHighlight">                 </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/registerbankinfo/instructionmapping">RegisterBankInfo::InstructionMapping</a> &amp;InstrMapping,</span></CodeLine>
<Link id="l00595" /><CodeLine lineNumber="595"><span class="doxyHighlight">                 <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;RepairingPlacement&gt;</a> &amp;RepairPts,</span></CodeLine>
<Link id="l00596" /><CodeLine lineNumber="596"><span class="doxyHighlight">                 </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/mappingcost">MappingCost</a> &#42;BestCost = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l00597" /><CodeLine lineNumber="597"></CodeLine>
<Link id="l00598" /><CodeLine lineNumber="598"><span class="doxyHighlightComment">  /// When \\p RepairPt involves splitting to repair \\p MO for the</span></CodeLine>
<Link id="l00599" /><CodeLine lineNumber="599"><span class="doxyHighlightComment">  /// given \\p ValMapping, try to change the way we repair such that</span></CodeLine>
<Link id="l00600" /><CodeLine lineNumber="600"><span class="doxyHighlightComment">  /// the splitting is not required anymore.</span></CodeLine>
<Link id="l00601" /><CodeLine lineNumber="601"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l00602" /><CodeLine lineNumber="602"><span class="doxyHighlightComment">  /// \\pre \\p RepairPt.hasSplit()</span></CodeLine>
<Link id="l00603" /><CodeLine lineNumber="603"><span class="doxyHighlightComment">  /// \\pre \\p MO == MO.getParent()-&gt;getOperand(\\p RepairPt.getOpIdx())</span></CodeLine>
<Link id="l00604" /><CodeLine lineNumber="604"><span class="doxyHighlightComment">  /// \\pre \\p ValMapping is the mapping of \\p MO for MO.getParent()</span></CodeLine>
<Link id="l00605" /><CodeLine lineNumber="605"><span class="doxyHighlightComment">  ///      that implied \\p RepairPt.</span></CodeLine>
<Link id="l00606" /><CodeLine lineNumber="606"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/#a781bc33cca080506ba19a20d66c1c255">tryAvoidingSplit</a>(<a href="/docs/api/classes/llvm/regbankselect/repairingplacement">RegBankSelect::RepairingPlacement</a> &amp;RepairPt,</span></CodeLine>
<Link id="l00607" /><CodeLine lineNumber="607"><span class="doxyHighlight">                        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;MO,</span></CodeLine>
<Link id="l00608" /><CodeLine lineNumber="608"><span class="doxyHighlight">                        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/registerbankinfo/valuemapping">RegisterBankInfo::ValueMapping</a> &amp;ValMapping) </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00609" /><CodeLine lineNumber="609"></CodeLine>
<Link id="l00610" /><CodeLine lineNumber="610"><span class="doxyHighlightComment">  /// Apply \\p Mapping to \\p MI. \\p RepairPts represents the different</span></CodeLine>
<Link id="l00611" /><CodeLine lineNumber="611"><span class="doxyHighlightComment">  /// mapping action that need to happen for the mapping to be</span></CodeLine>
<Link id="l00612" /><CodeLine lineNumber="612"><span class="doxyHighlightComment">  /// applied.</span></CodeLine>
<Link id="l00613" /><CodeLine lineNumber="613"><span class="doxyHighlightComment">  /// \\return True if the mapping was applied sucessfully, false otherwise.</span></CodeLine>
<Link id="l00614" /><CodeLine lineNumber="614"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/#afc5c7be6a4fbeb70b07dde19d8ebc2fd">applyMapping</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l00615" /><CodeLine lineNumber="615"><span class="doxyHighlight">                    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/registerbankinfo/instructionmapping">RegisterBankInfo::InstructionMapping</a> &amp;InstrMapping,</span></CodeLine>
<Link id="l00616" /><CodeLine lineNumber="616"><span class="doxyHighlight">                    <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;RepairingPlacement&gt;</a> &amp;RepairPts);</span></CodeLine>
<Link id="l00617" /><CodeLine lineNumber="617"></CodeLine>
<Link id="l00618" /><CodeLine lineNumber="618"><span class="doxyHighlightKeyword">public</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00619" /><CodeLine lineNumber="619"><span class="doxyHighlightComment">  /// Create a RegBankSelect pass with the specified \\p RunningMode.</span></CodeLine>
<Link id="l00620" /><CodeLine lineNumber="620" lineLink="/docs/api/classes/llvm/regbankselect/#a550b3f084bfcea7b97658b4584ac4809"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/regbankselect/#a550b3f084bfcea7b97658b4584ac4809">RegBankSelect</a>(<a href="/docs/api/classes/llvm/regbankselect/#a033277264e702883c8bbf13871247a84">Mode</a> RunningMode = <a href="/docs/api/classes/llvm/regbankselect/#a033277264e702883c8bbf13871247a84a764570eb91457744372935b426a1a397">Fast</a>);</span></CodeLine>
<Link id="l00621" /><CodeLine lineNumber="621"></CodeLine>
<Link id="l00622" /><CodeLine lineNumber="622" lineLink="/docs/api/classes/llvm/regbankselect/#ad5ce8fb12329f8cc296656bbe1c979e4"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/stringref">StringRef</a> <a href="/docs/api/classes/llvm/regbankselect/#ad5ce8fb12329f8cc296656bbe1c979e4">getPassName</a>()</span><span class="doxyHighlightKeyword"> const override </span><span class="doxyHighlight">&#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightStringLiteral">&quot;RegBankSelect&quot;</span><span class="doxyHighlight">; &#125;</span></CodeLine>
<Link id="l00623" /><CodeLine lineNumber="623"></CodeLine>
<Link id="l00624" /><CodeLine lineNumber="624"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/#a9a6d36010e8ada5ee58eeda765414a89">getAnalysisUsage</a>(<a href="/docs/api/classes/llvm/analysisusage">AnalysisUsage</a> &amp;AU) </span><span class="doxyHighlightKeyword">const override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00625" /><CodeLine lineNumber="625"></CodeLine>
<Link id="l00626" /><CodeLine lineNumber="626" lineLink="/docs/api/classes/llvm/regbankselect/#a4f33cb36edf1eebe70860431e8ce5cf9"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunctionproperties">MachineFunctionProperties</a> <a href="/docs/api/classes/llvm/regbankselect/#a4f33cb36edf1eebe70860431e8ce5cf9">getRequiredProperties</a>()</span><span class="doxyHighlightKeyword"> const override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00627" /><CodeLine lineNumber="627"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinefunctionproperties">MachineFunctionProperties</a>()</span></CodeLine>
<Link id="l00628" /><CodeLine lineNumber="628"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/machinefunctionproperties/#aa7780563d7ca260d0ae67d957b56427f">set</a>(<a href="/docs/api/classes/llvm/machinefunctionproperties/#ad85237c6c667e4713efe8921e9c32ac1a4fc3b812627e58da17a703f73013db96">MachineFunctionProperties::Property::IsSSA</a>)</span></CodeLine>
<Link id="l00629" /><CodeLine lineNumber="629"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/machinefunctionproperties/#aa7780563d7ca260d0ae67d957b56427f">set</a>(<a href="/docs/api/classes/llvm/machinefunctionproperties/#ad85237c6c667e4713efe8921e9c32ac1aefa6e814420e5fc1dfad353869159a37">MachineFunctionProperties::Property::Legalized</a>);</span></CodeLine>
<Link id="l00630" /><CodeLine lineNumber="630"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00631" /><CodeLine lineNumber="631"></CodeLine>
<Link id="l00632" /><CodeLine lineNumber="632" lineLink="/docs/api/classes/llvm/regbankselect/#a32e55cc7580b5fb9e05ff84001d5fd1a"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunctionproperties">MachineFunctionProperties</a> <a href="/docs/api/classes/llvm/regbankselect/#a32e55cc7580b5fb9e05ff84001d5fd1a">getSetProperties</a>()</span><span class="doxyHighlightKeyword"> const override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00633" /><CodeLine lineNumber="633"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinefunctionproperties">MachineFunctionProperties</a>().<a href="/docs/api/classes/llvm/machinefunctionproperties/#aa7780563d7ca260d0ae67d957b56427f">set</a>(</span></CodeLine>
<Link id="l00634" /><CodeLine lineNumber="634"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/machinefunctionproperties/#ad85237c6c667e4713efe8921e9c32ac1a062927be2f9d18d9995e64b0779c3dcf">MachineFunctionProperties::Property::RegBankSelected</a>);</span></CodeLine>
<Link id="l00635" /><CodeLine lineNumber="635"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00636" /><CodeLine lineNumber="636"></CodeLine>
<Link id="l00637" /><CodeLine lineNumber="637" lineLink="/docs/api/classes/llvm/regbankselect/#a2c817913c3f5dbcf0c09a97e0bbedcbb"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunctionproperties">MachineFunctionProperties</a> <a href="/docs/api/classes/llvm/regbankselect/#a2c817913c3f5dbcf0c09a97e0bbedcbb">getClearedProperties</a>()</span><span class="doxyHighlightKeyword"> const override </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l00638" /><CodeLine lineNumber="638"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinefunctionproperties">MachineFunctionProperties</a>()</span></CodeLine>
<Link id="l00639" /><CodeLine lineNumber="639"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/machinefunctionproperties/#aa7780563d7ca260d0ae67d957b56427f">set</a>(<a href="/docs/api/classes/llvm/machinefunctionproperties/#ad85237c6c667e4713efe8921e9c32ac1a76eece0bfd57256980609b66faaef22c">MachineFunctionProperties::Property::NoPHIs</a>);</span></CodeLine>
<Link id="l00640" /><CodeLine lineNumber="640"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00641" /><CodeLine lineNumber="641"></CodeLine>
<Link id="l00642" /><CodeLine lineNumber="642"><span class="doxyHighlightComment">  /// Check that our input is fully legal: we require the function to have the</span></CodeLine>
<Link id="l00643" /><CodeLine lineNumber="643"><span class="doxyHighlightComment">  /// Legalized property, so it should be.</span></CodeLine>
<Link id="l00644" /><CodeLine lineNumber="644"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l00645" /><CodeLine lineNumber="645"><span class="doxyHighlightComment">  /// FIXME: This should be in the MachineVerifier.</span></CodeLine>
<Link id="l00646" /><CodeLine lineNumber="646"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/#a04620d87783d98e60cdfcaf04f783f47">checkFunctionIsLegal</a>(<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF) </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00647" /><CodeLine lineNumber="647"></CodeLine>
<Link id="l00648" /><CodeLine lineNumber="648"><span class="doxyHighlightComment">  /// Walk through \\p MF and assign a register bank to every virtual register</span></CodeLine>
<Link id="l00649" /><CodeLine lineNumber="649"><span class="doxyHighlightComment">  /// that are still mapped to nothing.</span></CodeLine>
<Link id="l00650" /><CodeLine lineNumber="650"><span class="doxyHighlightComment">  /// The target needs to provide a RegisterBankInfo and in particular</span></CodeLine>
<Link id="l00651" /><CodeLine lineNumber="651"><span class="doxyHighlightComment">  /// override RegisterBankInfo::getInstrMapping.</span></CodeLine>
<Link id="l00652" /><CodeLine lineNumber="652"><span class="doxyHighlightComment">  ///</span></CodeLine>
<Link id="l00653" /><CodeLine lineNumber="653"><span class="doxyHighlightComment">  /// Simplified algo:</span></CodeLine>
<Link id="l00654" /><CodeLine lineNumber="654"><span class="doxyHighlightComment">  /// \\code</span></CodeLine>
<Link id="l00655" /><CodeLine lineNumber="655"><span class="doxyHighlightComment">  ///   RBI = MF.subtarget.getRegBankInfo()</span></CodeLine>
<Link id="l00656" /><CodeLine lineNumber="656"><span class="doxyHighlightComment">  ///   MIRBuilder.setMF(MF)</span></CodeLine>
<Link id="l00657" /><CodeLine lineNumber="657"><span class="doxyHighlightComment">  ///   for each bb in MF</span></CodeLine>
<Link id="l00658" /><CodeLine lineNumber="658"><span class="doxyHighlightComment">  ///     for each inst in bb</span></CodeLine>
<Link id="l00659" /><CodeLine lineNumber="659"><span class="doxyHighlightComment">  ///       MIRBuilder.setInstr(inst)</span></CodeLine>
<Link id="l00660" /><CodeLine lineNumber="660"><span class="doxyHighlightComment">  ///       MappingCosts = RBI.getMapping(inst);</span></CodeLine>
<Link id="l00661" /><CodeLine lineNumber="661"><span class="doxyHighlightComment">  ///       Idx = findIdxOfMinCost(MappingCosts)</span></CodeLine>
<Link id="l00662" /><CodeLine lineNumber="662"><span class="doxyHighlightComment">  ///       CurRegBank = MappingCosts&#91;Idx&#93;.RegBank</span></CodeLine>
<Link id="l00663" /><CodeLine lineNumber="663"><span class="doxyHighlightComment">  ///       MRI.setRegBank(inst.getOperand(0).getReg(), CurRegBank)</span></CodeLine>
<Link id="l00664" /><CodeLine lineNumber="664"><span class="doxyHighlightComment">  ///       for each argument in inst</span></CodeLine>
<Link id="l00665" /><CodeLine lineNumber="665"><span class="doxyHighlightComment">  ///         if (CurRegBank != argument.RegBank)</span></CodeLine>
<Link id="l00666" /><CodeLine lineNumber="666"><span class="doxyHighlightComment">  ///           ArgReg = argument.getReg()</span></CodeLine>
<Link id="l00667" /><CodeLine lineNumber="667"><span class="doxyHighlightComment">  ///           Tmp = MRI.createNewVirtual(MRI.getSize(ArgReg), CurRegBank)</span></CodeLine>
<Link id="l00668" /><CodeLine lineNumber="668"><span class="doxyHighlightComment">  ///           MIRBuilder.buildInstr(COPY, Tmp, ArgReg)</span></CodeLine>
<Link id="l00669" /><CodeLine lineNumber="669"><span class="doxyHighlightComment">  ///           inst.getOperand(argument.getOperandNo()).setReg(Tmp)</span></CodeLine>
<Link id="l00670" /><CodeLine lineNumber="670"><span class="doxyHighlightComment">  /// \\endcode</span></CodeLine>
<Link id="l00671" /><CodeLine lineNumber="671"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/#a6b0bf1d2a5eba4af2825113954bb846f">assignRegisterBanks</a>(<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF);</span></CodeLine>
<Link id="l00672" /><CodeLine lineNumber="672"></CodeLine>
<Link id="l00673" /><CodeLine lineNumber="673"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/regbankselect/#ae245b9ebf2973a3e982ccd16c9bf93f1">runOnMachineFunction</a>(<a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF) </span><span class="doxyHighlightKeyword">override</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00674" /><CodeLine lineNumber="674"><span class="doxyHighlight">&#125;;</span></CodeLine>
<Link id="l00675" /><CodeLine lineNumber="675"></CodeLine>
<Link id="l00676" /><CodeLine lineNumber="676"><span class="doxyHighlight">&#125; </span><span class="doxyHighlightComment">// end namespace llvm</span></CodeLine>
<Link id="l00677" /><CodeLine lineNumber="677"></CodeLine>
<Link id="l00678" /><CodeLine lineNumber="678"><span class="doxyHighlightPreprocessor">#endif </span><span class="doxyHighlightComment">// LLVM&#95;CODEGEN&#95;GLOBALISEL&#95;REGBANKSELECT&#95;H</span></CodeLine>

</ProgramListing>


</DoxygenPage>
