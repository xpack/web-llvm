---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - file

---

import Link from '@docusaurus/Link'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'
import SectionUser from '@xpack/docusaurus-plugin-doxygen/components/SectionUser'
import XrefSect from '@xpack/docusaurus-plugin-doxygen/components/XrefSect'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `AMDGPULegalizerInfo.cpp` File Reference

<DoxygenPage pluginConfig={pluginConfig}>

This file implements the targeting of the Machinelegalizer class for <a href="/docs/api/namespaces/llvm/amdgpu">AMDGPU</a>. <a href="#details">More...</a>

## Included Headers

<IncludesList>
<IncludesListItem
  filePath="AMDGPULegalizerInfo.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="AMDGPU.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpu-h"
  isLocal="true" />
<IncludesListItem
  filePath="AMDGPUGlobalISelUtils.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuglobaliselutils-h"
  isLocal="true" />
<IncludesListItem
  filePath="AMDGPUInstrInfo.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuinstrinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="AMDGPUMemoryUtils.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpumemoryutils-h"
  isLocal="true" />
<IncludesListItem
  filePath="AMDGPUTargetMachine.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgputargetmachine-h"
  isLocal="true" />
<IncludesListItem
  filePath="MCTargetDesc/AMDGPUMCTargetDesc.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/amdgpu/lib/target/amdgpu/mctargetdesc/amdgpumctargetdesc-h"
  isLocal="true" />
<IncludesListItem
  filePath="SIInstrInfo.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/amdgpu/siinstrinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="SIMachineFunctionInfo.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/amdgpu/simachinefunctioninfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="SIRegisterInfo.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/amdgpu/siregisterinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="Utils/AMDGPUBaseInfo.h"
  permalink="/docs/api/files/lib/lib/target/lib/target/amdgpu/lib/target/amdgpu/utils/amdgpubaseinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/ScopeExit.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/scopeexit-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/GlobalISel/GenericMachineInstrs.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/genericmachineinstrs-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/GlobalISel/LegalizerHelper.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/legalizerhelper-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/GlobalISel/MIPatternMatch.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/mipatternmatch-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/GlobalISel/MachineIRBuilder.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/machineirbuilder-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/GlobalISel/Utils.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/utils-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/CodeGen/TargetOpcodes.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/codegen/targetopcodes-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DiagnosticInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/diagnosticinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/IntrinsicsAMDGPU.h"
  permalink=""
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/IntrinsicsR600.h"
  permalink=""
  isLocal="true" />
</IncludesList>

## Functions Index

<MembersIndex>

<MembersIndexItem
  type="bool"
  name={<><a href="#a16c22435b21cfe335c972d971e29b0d7">allowApproxFunc</a> (const MachineFunction &amp;MF, unsigned Flags)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a31da885e5f80ee375b306057d2a852ab">LegalizeMutation</a></>}
  name={<><a href="#a6eb46b558dd23ba908853adcc6ba76b7">bitcastToRegisterType</a> (unsigned TypeIdx)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a31da885e5f80ee375b306057d2a852ab">LegalizeMutation</a></>}
  name={<><a href="#a0aab1c76215e1773caa058744d6ae6af">bitcastToVectorElement32</a> (unsigned TypeIdx)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ae6e9dca782411211a3526572f6ebeb33">buildBufferLoad</a> (unsigned Opc, Register LoadDstReg, Register RSrc, Register VIndex, Register VOffset, Register SOffset, unsigned ImmOffset, unsigned Format, unsigned AuxiliaryData, MachineMemOperand &#42;MMO, bool IsTyped, bool HasVIndex, MachineIRBuilder &amp;B)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a9d84441ae7638d9c27873f5a3810cb88">castBufferRsrcArgToV4I32</a> (MachineInstr &amp;MI, MachineIRBuilder &amp;B, unsigned Idx)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a78249707a06ea5161d8c6bbb442ea46c">castBufferRsrcFromV4I32</a> (MachineInstr &amp;MI, MachineIRBuilder &amp;B, MachineRegisterInfo &amp;MRI, unsigned Idx)</>}>
Mutates IR (typicaly a load instruction) to use a &lt;4 x s32&gt; as the initial type of the operand <code>idx</code> and then to transform it to a <code>p8</code> via bitcasts and inttoptr. <a href="#a78249707a06ea5161d8c6bbb442ea46c">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/register">Register</a></>}
  name={<><a href="#a5a32fa3ab512ce8c3afa4e68c2b56765">castBufferRsrcToV4I32</a> (Register Pointer, MachineIRBuilder &amp;B)</>}>
Cast a buffer resource (an address space 8 pointer) into a 4xi32, which is the form in which the value must be in order to be passed to the low-level representations used for MUBUF/MTBUF intrinsics. <a href="#a5a32fa3ab512ce8c3afa4e68c2b56765">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#ad049a79d46df2c25561d90e9d80fb5e3">convertImageAddrToPacked</a> (MachineIRBuilder &amp;B, MachineInstr &amp;MI, int DimIdx, int NumVAddrs)</>}>
Convert from separate vaddr components to a single vector address register, and replace the remaining operands with $noreg. <a href="#ad049a79d46df2c25561d90e9d80fb5e3">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a></>}
  name={<><a href="#aed4feaa9baf8df7fe949b9a5ce246646">elementTypeIsLegal</a> (unsigned TypeIdx)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::pair&lt; <a href="/docs/api/classes/llvm/register">Register</a>, <a href="/docs/api/classes/llvm/register">Register</a> &gt;</>}
  name={<><a href="#a62e3406e85438cd0a8d5e3de179ef6eb">emitReciprocalU64</a> (MachineIRBuilder &amp;B, Register Val)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a></>}
  name={<><a href="#a47ea7f32b98178dbcb9bf3d1ff00daa1">extractF64Exponent</a> (Register Hi, MachineIRBuilder &amp;B)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a31da885e5f80ee375b306057d2a852ab">LegalizeMutation</a></>}
  name={<><a href="#a3b5805e73f162bbb84584fbc2091806e">fewerEltsToSize64Vector</a> (unsigned TypeIdx)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a639711ef50cb300db9e9ade1445ccf07">getBitcastRegisterType</a> (const LLT Ty)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a0356a7c051be3c82d2c7da7e0bdb229c">getBufferAtomicPseudo</a> (Intrinsic::ID IntrID)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a64443e60c47deb77ad3bb491d2da3c5f">getBufferRsrcRegisterType</a> (const LLT Ty)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a0440dee786271aa77b3f640b1c63363c">getBufferRsrcScalarType</a> (const LLT Ty)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/register">Register</a></>}
  name={<><a href="#a879e21eca00dd442c2623c505ca81b6e">getMad</a> (MachineIRBuilder &amp;B, LLT Ty, Register X, Register Y, Register Z, unsigned Flags)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#ae9bc1717e31ed947b2eae89a230c744b">getPow2ScalarType</a> (LLT Ty)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#ae6dc00935578ac3d7b43326b5f02b2bc">getPow2VectorType</a> (LLT Ty)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#abb71b9eb64250d4491336cf106be74eb">hasBufferRsrcWorkaround</a> (const LLT Ty)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a></>}
  name={<><a href="#aa5fe965eac66ae9ebc69835fe44c679d">isIllegalRegisterType</a> (unsigned TypeIdx)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#aff707b57a26889c4290a79001f12fd20">isKnownNonNull</a> (Register Val, MachineRegisterInfo &amp;MRI, const AMDGPUTargetMachine &amp;TM, unsigned AddrSpace)</>}>
Return true if the value is a known valid address, such that a null check is not necessary. <a href="#aff707b57a26889c4290a79001f12fd20">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ad2c8a875d4d2a4e73f7a48e64226b265">isLoadStoreLegal</a> (const GCNSubtarget &amp;ST, const LegalityQuery &amp;Query)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a812ebabddd1ad2d8f8bbc6194346e2ed">isLoadStoreSizeLegal</a> (const GCNSubtarget &amp;ST, const LegalityQuery &amp;Query)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#accff22ec9fbd872b5976a4a2dc20ef56">isNot</a> (const MachineRegisterInfo &amp;MRI, const MachineInstr &amp;MI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a8ac13bffc4ec5811abc67aaa4166e9a8">isRegisterClassType</a> (LLT Ty)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a></>}
  name={<><a href="#a6f96e69af9b47cc95fd19cc091b0aea1">isRegisterClassType</a> (unsigned TypeIdx)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a3986167503ccf79606f2249e660c9961">isRegisterSize</a> (unsigned Size)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a> (LLT Ty)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a></>}
  name={<><a href="#a6828238e57f3a265b56fb009a227af4e">isRegisterType</a> (unsigned TypeIdx)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a31648fb7411d04ec274b46d8dd635564">isRegisterVectorElementType</a> (LLT EltTy)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#af6ee8616537a0f758b8962b4e5076b35">isRegisterVectorType</a> (LLT Ty)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a></>}
  name={<><a href="#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a> (unsigned TypeIdx)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a></>}
  name={<><a href="#ab92c68720091c48aa146f82db0f9ce88">isWideScalarExtLoadTruncStore</a> (unsigned TypeIdx)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a></>}
  name={<><a href="#a3d552c29a563f3462800870d14e72b0f">isWideVec16</a> (unsigned TypeIdx)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#ac6f0c363a0260f50a2e3dae5b8c00d21">loadStoreBitcastWorkaround</a> (const LLT Ty)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a807f9ab682878abe0a704736d1f9f298">maxSizeForAddrSpace</a> (const GCNSubtarget &amp;ST, unsigned AS, bool IsLoad, bool IsAtomic)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a31da885e5f80ee375b306057d2a852ab">LegalizeMutation</a></>}
  name={<><a href="#a4b2db808be70ea68e0f121c1942982a9">moreElementsToNextExistingRegClass</a> (unsigned TypeIdx)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a31da885e5f80ee375b306057d2a852ab">LegalizeMutation</a></>}
  name={<><a href="#ad64f039266036a2ac4d704000928d65b">moreEltsToNext32Bit</a> (unsigned TypeIdx)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a092571cd6865fc5f86e2a594265ff717">needsDenormHandlingF32</a> (const MachineFunction &amp;MF, Register Src, unsigned Flags)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a></>}
  name={<><a href="#a8e4a67e6620c2b437e4b7a7707ac0914">numElementsNotEven</a> (unsigned TypeIdx)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a31da885e5f80ee375b306057d2a852ab">LegalizeMutation</a></>}
  name={<><a href="#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a> (unsigned TypeIdx)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a0022aa73e6337684561159d1f7929966">packImage16bitOpsToDwords</a> (MachineIRBuilder &amp;B, MachineInstr &amp;MI, SmallVectorImpl&lt; Register &gt; &amp;PackedAddrs, unsigned ArgOffset, const AMDGPU::ImageDimIntrinsicInfo &#42;Intr, bool IsA16, bool IsG16)</>}>
Turn a set of s16 typed registers in <code>AddrRegs</code> into a dword sized vector with s16 typed elements. <a href="#a0022aa73e6337684561159d1f7929966">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a79158bc80349e2c5ecd857cb098db65e">replaceWithConstant</a> (MachineIRBuilder &amp;B, MachineInstr &amp;MI, int64&#95;t C)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a1c42298ffb49a95c87577d3e5de46aea">shouldBitcastLoadStoreType</a> (const GCNSubtarget &amp;ST, const LLT Ty, const LLT MemTy)</>}>
Return true if a load or store of the type should be lowered with a bitcast to a different type. <a href="#a1c42298ffb49a95c87577d3e5de46aea">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a2d595a51e66614b8adb83efbc8114401">shouldWidenLoad</a> (const GCNSubtarget &amp;ST, LLT MemoryTy, uint64&#95;t AlignInBits, unsigned AddrSpace, unsigned Opcode)</>}>
Return true if we should legalize a load by widening an odd sized memory access up to the alignment. <a href="#a2d595a51e66614b8adb83efbc8114401">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a9ae9993cc0e622c6d10e6e9a2aad0a05">shouldWidenLoad</a> (const GCNSubtarget &amp;ST, const LegalityQuery &amp;Query, unsigned Opcode)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a></>}
  name={<><a href="#afa3cedfbe23049312e516145f0e46cbb">sizeIsMultipleOf32</a> (unsigned TypeIdx)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/register">Register</a></>}
  name={<><a href="#a716801caf6a489a6af735be940932003">stripAnySourceMods</a> (Register OrigSrc, MachineRegisterInfo &amp;MRI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#abceca15aff80aa1ea3b5e7603981f878">toggleSPDenormMode</a> (bool Enable, MachineIRBuilder &amp;B, const GCNSubtarget &amp;ST, SIModeRegisterDefaults Mode)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a344a4fa1e7c1a3a6f6ede4213058ad12">valueIsKnownNeverF32Denorm</a> (const MachineRegisterInfo &amp;MRI, Register Src)</>}>
Return true if it&#39;s known that <code>Src</code> can never be an f32 denormal value. <a href="#a344a4fa1e7c1a3a6f6ede4213058ad12">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a></>}
  name={<><a href="#a144b2ed41ce4f22842225b0b1b117a58">vectorSmallerThan</a> (unsigned TypeIdx, unsigned Size)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a></>}
  name={<><a href="#a2d0beabfcf00e6fd23c97eff8ee516a6">vectorWiderThan</a> (unsigned TypeIdx, unsigned Size)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;</>}
  name={<><a href="#a87e58e9d24983c7890c502fbe731f950">verifyCFIntrinsic</a> (MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineInstr &#42;&amp;Br, MachineBasicBlock &#42;&amp;UncondBrTarget, bool &amp;Negated)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#acbd3ab3957032feb181df036bb6a8d27">widenToNextPowerOf2</a> (LLT Ty)</>}>
</MembersIndexItem>

</MembersIndex>

## Variables Index

<MembersIndex>

<MembersIndexItem
  type={<>std::initializer&#95;list&lt; <a href="/docs/api/classes/llvm/llt">LLT</a> &gt;</>}
  name={<><a href="#a60fec3ee73a795e286972083bf85a68e">AllS16Vectors</a> &#123;
    <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, <a href="#a52e4f67b333637f707e6fe59057c7348">V4S16</a>, <a href="#af54c894f1513d925a199547dec0ef2b2">V6S16</a>, <a href="#af904a5a62bedccf8107722036a8df0ce">V8S16</a>, <a href="#ace4e8d195c9498b419467f234000a72e">V10S16</a>, <a href="#a7a3fa97d0457d84638593bf3da5e21f6">V12S16</a>, <a href="#a09d7d8b975bcef9c12bd114d3b593b00">V16S16</a>, <a href="#ad61c521a33598d8ca5b07dd4e0f03087">V2S128</a>, <a href="#a9e404048aa9a1687a9ec6f9d9420bf39">V4S128</a>&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::initializer&#95;list&lt; <a href="/docs/api/classes/llvm/llt">LLT</a> &gt;</>}
  name={<><a href="#a4b69b2b66bc8186c8b21b62fe41d444d">AllS32Vectors</a> = &#123;
    <a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a>, <a href="#a257279ea49c58180217364b89917c6c3">V3S32</a>,  <a href="#a0af4f63c268470ef2eac6477d33fdce4">V4S32</a>,  <a href="#a4d742b8db1d6a22581da42b9b758e2be">V5S32</a>,  <a href="#a495ae51584ec946579f24bda39b4fa84">V6S32</a>,  <a href="#a4c29a6c597e1cb2db05e41d65f76d338">V7S32</a>, <a href="#a1348f6cfe026c7a1dca9a61c8713ab07">V8S32</a>,
    <a href="#a7261ab9abe3b6583e7e094677e84b50d">V9S32</a>, <a href="#a73e961aa3509555c9944d502a52d1303">V10S32</a>, <a href="#a53954ac3898aff9426fc131d14a84f11">V11S32</a>, <a href="#a11d102c56b1f897e6886c283d8f16ce4">V12S32</a>, <a href="#a83756b36d1fca7fb0054ab52622cda67">V16S32</a>, <a href="#a61cf1ca010a7d653f1cf0ddefa7a8e6d">V32S32</a>&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::initializer&#95;list&lt; <a href="/docs/api/classes/llvm/llt">LLT</a> &gt;</>}
  name={<><a href="#abf8037dd8ffb10bb4c5fe61c6d0c5c6c">AllS64Vectors</a> = &#123;<a href="#acb4ecd614e176840d5b2360a176f1333">V2S64</a>, <a href="#a0900073ce203e689dc42c702ba6a5c98">V3S64</a>, <a href="#a214d79cea6eb493a2f95b0170886311a">V4S64</a>, <a href="#a8c4f0c5559c18078956303fa71b2a027">V5S64</a>,
                                                   <a href="#aa95cd588b298b4861271199e3afe971f">V6S64</a>, <a href="#a839fd594af5fb0c910f8c3fa13e154a9">V7S64</a>, <a href="#a0c9c5c4bf19122ed92afa6fe3e70b158">V8S64</a>, <a href="#a7af378812d0f59470e1ad5ff1ac40679">V16S64</a>&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>std::initializer&#95;list&lt; <a href="/docs/api/classes/llvm/llt">LLT</a> &gt;</>}
  name={<><a href="#ada70cb9213ffddaebab099c55f886d19">AllScalarTypes</a> = &#123;
    <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#ac721ed1f1b2048a37c89fa31e662cd3a">S96</a>, <a href="#a0a82f21bb2863eb65c5f28fb9d34a954">S128</a>, <a href="#a8d3731c41acd28da69f691b8ce22edd4">S160</a>, <a href="#a7654aba611cb44b8c9d4a43398099bf6">S192</a>, <a href="#af775f87ae257bdc6f0b5e5eac41ad51a">S224</a>, <a href="#ae61a7658a9585eba0ff27a47e0c8aea1">S256</a>, <a href="#a7fcbdd8fbd887c5c2c68588ab6179c64">S512</a>, <a href="#a482bcb2c405924538af22abc4c9e85fc">S1024</a>&#125;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a051bcca9a10dfdb5c382173aa0d5a860">EnableNewLegality</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a> = LLT::float32()</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a563bbae35885ba289017e47ec57235fa">F64</a> = LLT::float64()</>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a1fff431f58bc2af2caae5f611ba0791f">FPEnvModeBitField</a> =
    AMDGPU::Hwreg::HwregEncoding::encode(AMDGPU::Hwreg::ID&#95;MODE, 0, 23)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#aa0516ba249c5d556a3ee34bfd27737f3">FPEnvTrapBitField</a> =
    AMDGPU::Hwreg::HwregEncoding::encode(AMDGPU::Hwreg::ID&#95;TRAPSTS, 0, 5)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#aabec8e9bc89e3e905a71769f8be922c1">MaxRegisterSize</a> = 1024</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#abb0782aaccc0907cc36fe566a642c71b">MaxScalar</a> = LLT::scalar(<a href="#aabec8e9bc89e3e905a71769f8be922c1">MaxRegisterSize</a>)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = LLT::scalar(1)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a482bcb2c405924538af22abc4c9e85fc">S1024</a> = LLT::scalar(1024)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a0a82f21bb2863eb65c5f28fb9d34a954">S128</a> = LLT::scalar(128)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a> = LLT::scalar(16)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a8d3731c41acd28da69f691b8ce22edd4">S160</a> = LLT::scalar(160)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a7654aba611cb44b8c9d4a43398099bf6">S192</a> = LLT::scalar(192)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#af775f87ae257bdc6f0b5e5eac41ad51a">S224</a> = LLT::scalar(224)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#ae61a7658a9585eba0ff27a47e0c8aea1">S256</a> = LLT::scalar(256)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = LLT::scalar(32)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a7fcbdd8fbd887c5c2c68588ab6179c64">S512</a> = LLT::scalar(512)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a> = LLT::scalar(64)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#af00ba7c018760702ba16a5009cec810c">S8</a> = LLT::scalar(8)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#ac721ed1f1b2048a37c89fa31e662cd3a">S96</a> = LLT::scalar(96)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="unsigned"
  name={<><a href="#a795662e773d2eda28caf873fa6eb70c4">SPDenormModeBitField</a> =
    AMDGPU::Hwreg::HwregEncoding::encode(AMDGPU::Hwreg::ID&#95;MODE, 4, 2)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#ace4e8d195c9498b419467f234000a72e">V10S16</a> = LLT::fixed&#95;vector(10, 16)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a73e961aa3509555c9944d502a52d1303">V10S32</a> = LLT::fixed&#95;vector(10, 32)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a53954ac3898aff9426fc131d14a84f11">V11S32</a> = LLT::fixed&#95;vector(11, 32)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a7a3fa97d0457d84638593bf3da5e21f6">V12S16</a> = LLT::fixed&#95;vector(12, 16)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a11d102c56b1f897e6886c283d8f16ce4">V12S32</a> = LLT::fixed&#95;vector(12, 32)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a09d7d8b975bcef9c12bd114d3b593b00">V16S16</a> = LLT::fixed&#95;vector(16, 16)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a83756b36d1fca7fb0054ab52622cda67">V16S32</a> = LLT::fixed&#95;vector(16, 32)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a7af378812d0f59470e1ad5ff1ac40679">V16S64</a> = LLT::fixed&#95;vector(16, 64)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#aa6c31d3f7f1803b32735d9b3568e7f12">V2BF16</a> = <a href="#ade55769087ba2b628fd60dc76161764f">V2F16</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#ade55769087ba2b628fd60dc76161764f">V2F16</a> = LLT::fixed&#95;vector(2, LLT::float16())</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#ad61c521a33598d8ca5b07dd4e0f03087">V2S128</a> = LLT::fixed&#95;vector(2, 128)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a> = LLT::fixed&#95;vector(2, 16)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a> = LLT::fixed&#95;vector(2, 32)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#acb4ecd614e176840d5b2360a176f1333">V2S64</a> = LLT::fixed&#95;vector(2, 64)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#ab8e5c09740bb85eb6c2d25b534f91570">V2S8</a> = LLT::fixed&#95;vector(2, 8)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a61cf1ca010a7d653f1cf0ddefa7a8e6d">V32S32</a> = LLT::fixed&#95;vector(32, 32)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a257279ea49c58180217364b89917c6c3">V3S32</a> = LLT::fixed&#95;vector(3, 32)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a0900073ce203e689dc42c702ba6a5c98">V3S64</a> = LLT::fixed&#95;vector(3, 64)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a9e404048aa9a1687a9ec6f9d9420bf39">V4S128</a> = LLT::fixed&#95;vector(4, 128)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a52e4f67b333637f707e6fe59057c7348">V4S16</a> = LLT::fixed&#95;vector(4, 16)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a0af4f63c268470ef2eac6477d33fdce4">V4S32</a> = LLT::fixed&#95;vector(4, 32)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a214d79cea6eb493a2f95b0170886311a">V4S64</a> = LLT::fixed&#95;vector(4, 64)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a4d742b8db1d6a22581da42b9b758e2be">V5S32</a> = LLT::fixed&#95;vector(5, 32)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a8c4f0c5559c18078956303fa71b2a027">V5S64</a> = LLT::fixed&#95;vector(5, 64)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#af54c894f1513d925a199547dec0ef2b2">V6S16</a> = LLT::fixed&#95;vector(6, 16)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a495ae51584ec946579f24bda39b4fa84">V6S32</a> = LLT::fixed&#95;vector(6, 32)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#aa95cd588b298b4861271199e3afe971f">V6S64</a> = LLT::fixed&#95;vector(6, 64)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a4c29a6c597e1cb2db05e41d65f76d338">V7S32</a> = LLT::fixed&#95;vector(7, 32)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a839fd594af5fb0c910f8c3fa13e154a9">V7S64</a> = LLT::fixed&#95;vector(7, 64)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#af904a5a62bedccf8107722036a8df0ce">V8S16</a> = LLT::fixed&#95;vector(8, 16)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a1348f6cfe026c7a1dca9a61c8713ab07">V8S32</a> = LLT::fixed&#95;vector(8, 32)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a0c9c5c4bf19122ed92afa6fe3e70b158">V8S64</a> = LLT::fixed&#95;vector(8, 64)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a></>}
  name={<><a href="#a7261ab9abe3b6583e7e094677e84b50d">V9S32</a> = LLT::fixed&#95;vector(9, 32)</>}>
</MembersIndexItem>

</MembersIndex>

## Defines Index

<MembersIndex>

<MembersIndexItem
  type="#define"
  name={<><a href="#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>&nbsp;&nbsp;&nbsp;&quot;amdgpu-legalinfo&quot;</>}>
</MembersIndexItem>

</MembersIndex>

## Description {#details}

This file implements the targeting of the Machinelegalizer class for <a href="/docs/api/namespaces/llvm/amdgpu">AMDGPU</a>.

<XrefSect
  title="Todo"
  permalink="/docs/api/pages/todo/#_todo000011">
This should be generated by <a href="/docs/api/namespaces/llvm/tablegen">TableGen</a>.
</XrefSect>

<SectionDefinition>

## Functions

### allowApproxFunc() {#a16c22435b21cfe335c972d971e29b0d7}

<MemberDefinition
  prototype={<>static bool allowApproxFunc (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp; MF, unsigned Flags)</>}
  labels = {["static"]}>

Definition at line <a href="#l03266">3266</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### bitcastToRegisterType() {#a6eb46b558dd23ba908853adcc6ba76b7}

<MemberDefinition
  prototype="static LegalizeMutation bitcastToRegisterType (unsigned TypeIdx)"
  labels = {["static"]}>

Definition at line <a href="#l00188">188</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### bitcastToVectorElement32() {#a0aab1c76215e1773caa058744d6ae6af}

<MemberDefinition
  prototype="static LegalizeMutation bitcastToVectorElement32 (unsigned TypeIdx)"
  labels = {["static"]}>

Definition at line <a href="#l00195">195</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### buildBufferLoad() {#ae6e9dca782411211a3526572f6ebeb33}

<MemberDefinition
  prototype={<>static void buildBufferLoad (unsigned Opc, <a href="/docs/api/classes/llvm/register">Register</a> LoadDstReg, <a href="/docs/api/classes/llvm/register">Register</a> RSrc, <a href="/docs/api/classes/llvm/register">Register</a> VIndex, <a href="/docs/api/classes/llvm/register">Register</a> VOffset, <a href="/docs/api/classes/llvm/register">Register</a> SOffset, unsigned ImmOffset, unsigned Format, unsigned AuxiliaryData, <a href="/docs/api/classes/llvm/machinememoperand">MachineMemOperand</a> &#42; MMO, bool IsTyped, bool HasVIndex, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp; B)</>}
  labels = {["static"]}>

Definition at line <a href="#l05956">5956</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### castBufferRsrcArgToV4I32() {#a9d84441ae7638d9c27873f5a3810cb88}

<MemberDefinition
  prototype={<>static void castBufferRsrcArgToV4I32 (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp; MI, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp; B, unsigned Idx)</>}
  labels = {["static"]}>

Definition at line <a href="#l00645">645</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### castBufferRsrcFromV4I32() {#a78249707a06ea5161d8c6bbb442ea46c}

<MemberDefinition
  prototype={<>static LLT castBufferRsrcFromV4I32 (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp; MI, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp; B, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp; MRI, unsigned Idx)</>}
  labels = {["static"]}>
Mutates IR (typicaly a load instruction) to use a &lt;4 x s32&gt; as the initial type of the operand <code>idx</code> and then to transform it to a <code>p8</code> via bitcasts and inttoptr.

In addition, handle vectors of p8. Returns the new type.

Definition at line <a href="#l00585">585</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### castBufferRsrcToV4I32() {#a5a32fa3ab512ce8c3afa4e68c2b56765}

<MemberDefinition
  prototype={<>static Register castBufferRsrcToV4I32 (<a href="/docs/api/classes/llvm/register">Register</a> Pointer, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp; B)</>}
  labels = {["static"]}>
Cast a buffer resource (an address space 8 pointer) into a 4xi32, which is the form in which the value must be in order to be passed to the low-level representations used for MUBUF/MTBUF intrinsics.

This is a hack, which is needed in order to account for the fact that we can&#39;t define a register class for s128 without breaking <a href="/docs/api/classes/llvm/selectiondag">SelectionDAG</a>.

Definition at line <a href="#l00626">626</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### convertImageAddrToPacked() {#ad049a79d46df2c25561d90e9d80fb5e3}

<MemberDefinition
  prototype={<>static void convertImageAddrToPacked (<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp; B, <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp; MI, int DimIdx, int NumVAddrs)</>}
  labels = {["static"]}>
Convert from separate vaddr components to a single vector address register, and replace the remaining operands with $noreg.

Definition at line <a href="#l06356">6356</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### elementTypeIsLegal() {#aed4feaa9baf8df7fe949b9a5ce246646}

<MemberDefinition
  prototype="static LegalityPredicate elementTypeIsLegal (unsigned TypeIdx)"
  labels = {["static"]}>

Definition at line <a href="#l00272">272</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### emitReciprocalU64() {#a62e3406e85438cd0a8d5e3de179ef6eb}

<MemberDefinition
  prototype={<>static std::pair&lt; Register, Register &gt; emitReciprocalU64 (<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp; B, <a href="/docs/api/classes/llvm/register">Register</a> Val)</>}
  labels = {["static"]}>

Definition at line <a href="#l04540">4540</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### extractF64Exponent() {#a47ea7f32b98178dbcb9bf3d1ff00daa1}

<MemberDefinition
  prototype={<>static MachineInstrBuilder extractF64Exponent (<a href="/docs/api/classes/llvm/register">Register</a> Hi, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp; B)</>}
  labels = {["static"]}>

Definition at line <a href="#l02508">2508</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### fewerEltsToSize64Vector() {#a3b5805e73f162bbb84584fbc2091806e}

<MemberDefinition
  prototype="static LegalizeMutation fewerEltsToSize64Vector (unsigned TypeIdx)"
  labels = {["static"]}>

Definition at line <a href="#l00110">110</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### getBitcastRegisterType() {#a639711ef50cb300db9e9ade1445ccf07}

<MemberDefinition
  prototype={<>static LLT getBitcastRegisterType (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty)</>}
  labels = {["static"]}>

Definition at line <a href="#l00176">176</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### getBufferAtomicPseudo() {#a0356a7c051be3c82d2c7da7e0bdb229c}

<MemberDefinition
  prototype={<>static unsigned getBufferAtomicPseudo (<a href="/docs/api/namespaces/llvm/intrinsic/#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IntrID)</>}
  labels = {["static"]}>

Definition at line <a href="#l06138">6138</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### getBufferRsrcRegisterType() {#a64443e60c47deb77ad3bb491d2da3c5f}

<MemberDefinition
  prototype={<>static LLT getBufferRsrcRegisterType (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty)</>}
  labels = {["static"]}>

Definition at line <a href="#l00169">169</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### getBufferRsrcScalarType() {#a0440dee786271aa77b3f640b1c63363c}

<MemberDefinition
  prototype={<>static LLT getBufferRsrcScalarType (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty)</>}
  labels = {["static"]}>

Definition at line <a href="#l00162">162</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### getMad() {#a879e21eca00dd442c2623c505ca81b6e}

<MemberDefinition
  prototype={<>static Register getMad (<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp; B, <a href="/docs/api/classes/llvm/llt">LLT</a> Ty, <a href="/docs/api/classes/llvm/register">Register</a> X, <a href="/docs/api/classes/llvm/register">Register</a> Y, <a href="/docs/api/classes/llvm/register">Register</a> Z, unsigned Flags)</>}
  labels = {["static"]}>

Definition at line <a href="#l03351">3351</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### getPow2ScalarType() {#ae9bc1717e31ed947b2eae89a230c744b}

<MemberDefinition
  prototype={<>static LLT getPow2ScalarType (<a href="/docs/api/classes/llvm/llt">LLT</a> Ty)</>}
  labels = {["static"]}>

Definition at line <a href="#l00063">63</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### getPow2VectorType() {#ae6dc00935578ac3d7b43326b5f02b2bc}

<MemberDefinition
  prototype={<>static LLT getPow2VectorType (<a href="/docs/api/classes/llvm/llt">LLT</a> Ty)</>}
  labels = {["static"]}>

Definition at line <a href="#l00056">56</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### hasBufferRsrcWorkaround() {#abb71b9eb64250d4491336cf106be74eb}

<MemberDefinition
  prototype={<>static bool hasBufferRsrcWorkaround (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty)</>}
  labels = {["static"]}>

Definition at line <a href="#l00478">478</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### isIllegalRegisterType() {#aa5fe965eac66ae9ebc69835fe44c679d}

<MemberDefinition
  prototype="static LegalityPredicate isIllegalRegisterType (unsigned TypeIdx)"
  labels = {["static"]}>

Definition at line <a href="#l00264">264</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### isKnownNonNull() {#aff707b57a26889c4290a79001f12fd20}

<MemberDefinition
  prototype={<>static bool isKnownNonNull (<a href="/docs/api/classes/llvm/register">Register</a> Val, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp; MRI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/amdgputargetmachine">AMDGPUTargetMachine</a> &amp; TM, unsigned AddrSpace)</>}
  labels = {["static"]}>
Return true if the value is a known valid address, such that a null check is not necessary.

Definition at line <a href="#l02292">2292</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### isLoadStoreLegal() {#ad2c8a875d4d2a4e73f7a48e64226b265}

<MemberDefinition
  prototype={<>static bool isLoadStoreLegal (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp; ST, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp; Query)</>}
  labels = {["static"]}>

Definition at line <a href="#l00511">511</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### isLoadStoreSizeLegal() {#a812ebabddd1ad2d8f8bbc6194346e2ed}

<MemberDefinition
  prototype={<>static bool isLoadStoreSizeLegal (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp; ST, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp; Query)</>}
  labels = {["static"]}>

Definition at line <a href="#l00405">405</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### isNot() {#accff22ec9fbd872b5976a4a2dc20ef56}

<MemberDefinition
  prototype={<>static bool isNot (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp; MRI, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp; MI)</>}
  labels = {["static"]}>

Definition at line <a href="#l04225">4225</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### isRegisterClassType() {#a8ac13bffc4ec5811abc67aaa4166e9a8}

<MemberDefinition
  prototype={<>static bool isRegisterClassType (<a href="/docs/api/classes/llvm/llt">LLT</a> Ty)</>}
  labels = {["static"]}>

Definition at line <a href="#l00351">351</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### isRegisterClassType() {#a6f96e69af9b47cc95fd19cc091b0aea1}

<MemberDefinition
  prototype="static LegalityPredicate isRegisterClassType (unsigned TypeIdx)"
  labels = {["static"]}>

Definition at line <a href="#l00359">359</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### isRegisterSize() {#a3986167503ccf79606f2249e660c9961}

<MemberDefinition
  prototype="static bool isRegisterSize (unsigned Size)"
  labels = {["static"]}>

Definition at line <a href="#l00226">226</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### isRegisterType() {#a2ea867ab6af309ac37d89c0ac9242600}

<MemberDefinition
  prototype={<>static bool isRegisterType (<a href="/docs/api/classes/llvm/llt">LLT</a> Ty)</>}
  labels = {["static"]}>

Definition at line <a href="#l00243">243</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### isRegisterType() {#a6828238e57f3a265b56fb009a227af4e}

<MemberDefinition
  prototype="static LegalityPredicate isRegisterType (unsigned TypeIdx)"
  labels = {["static"]}>

Definition at line <a href="#l00255">255</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### isRegisterVectorElementType() {#a31648fb7411d04ec274b46d8dd635564}

<MemberDefinition
  prototype={<>static bool isRegisterVectorElementType (<a href="/docs/api/classes/llvm/llt">LLT</a> EltTy)</>}
  labels = {["static"]}>

Definition at line <a href="#l00230">230</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### isRegisterVectorType() {#af6ee8616537a0f758b8962b4e5076b35}

<MemberDefinition
  prototype={<>static bool isRegisterVectorType (<a href="/docs/api/classes/llvm/llt">LLT</a> Ty)</>}
  labels = {["static"]}>

Definition at line <a href="#l00235">235</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### isSmallOddVector() {#a0dbe048033c8b5adaf283b8fe7de3ba1}

<MemberDefinition
  prototype="static LegalityPredicate isSmallOddVector (unsigned TypeIdx)"
  labels = {["static"]}>

<SectionUser title="Returns">
true if this is an odd sized vector which should widen by adding an additional element. This is mostly to handle &lt;3 x s16&gt; -&gt; &lt;4 x s16&gt;. This excludes s1 vectors, which should always be scalarized.
</SectionUser>

Definition at line <a href="#l00072">72</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### isWideScalarExtLoadTruncStore() {#ab92c68720091c48aa146f82db0f9ce88}

<MemberDefinition
  prototype="static LegalityPredicate isWideScalarExtLoadTruncStore (unsigned TypeIdx)"
  labels = {["static"]}>

Definition at line <a href="#l00367">367</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### isWideVec16() {#a3d552c29a563f3462800870d14e72b0f}

<MemberDefinition
  prototype="static LegalityPredicate isWideVec16 (unsigned TypeIdx)"
  labels = {["static"]}>

Definition at line <a href="#l00093">93</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### loadStoreBitcastWorkaround() {#ac6f0c363a0260f50a2e3dae5b8c00d21}

<MemberDefinition
  prototype={<>static bool loadStoreBitcastWorkaround (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty)</>}
  labels = {["static"]}>

Definition at line <a href="#l00492">492</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### maxSizeForAddrSpace() {#a807f9ab682878abe0a704736d1f9f298}

<MemberDefinition
  prototype={<>static unsigned maxSizeForAddrSpace (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp; ST, unsigned AS, bool IsLoad, bool IsAtomic)</>}
  labels = {["static"]}>

Definition at line <a href="#l00378">378</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### moreElementsToNextExistingRegClass() {#a4b2db808be70ea68e0f121c1942982a9}

<MemberDefinition
  prototype="static LegalizeMutation moreElementsToNextExistingRegClass (unsigned TypeIdx)"
  labels = {["static"]}>

Definition at line <a href="#l00141">141</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### moreEltsToNext32Bit() {#ad64f039266036a2ac4d704000928d65b}

<MemberDefinition
  prototype="static LegalizeMutation moreEltsToNext32Bit (unsigned TypeIdx)"
  labels = {["static"]}>

Definition at line <a href="#l00124">124</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### needsDenormHandlingF32() {#a092571cd6865fc5f86e2a594265ff717}

<MemberDefinition
  prototype={<>static bool needsDenormHandlingF32 (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp; MF, <a href="/docs/api/classes/llvm/register">Register</a> Src, unsigned Flags)</>}
  labels = {["static"]}>

Definition at line <a href="#l03273">3273</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### numElementsNotEven() {#a8e4a67e6620c2b437e4b7a7707ac0914}

<MemberDefinition
  prototype="static LegalityPredicate numElementsNotEven (unsigned TypeIdx)"
  labels = {["static"]}>

Definition at line <a href="#l00219">219</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### oneMoreElement() {#a0e3fd79bb281f248eefd08814023d8c8}

<MemberDefinition
  prototype="static LegalizeMutation oneMoreElement (unsigned TypeIdx)"
  labels = {["static"]}>

Definition at line <a href="#l00101">101</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### packImage16bitOpsToDwords() {#a0022aa73e6337684561159d1f7929966}

<MemberDefinition
  prototype={<>static void packImage16bitOpsToDwords (<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp; B, <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp; MI, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/register">Register</a> &gt; &amp; PackedAddrs, unsigned ArgOffset, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo">AMDGPU::ImageDimIntrinsicInfo</a> &#42; Intr, bool IsA16, bool IsG16)</>}
  labels = {["static"]}>
Turn a set of s16 typed registers in <code>AddrRegs</code> into a dword sized vector with s16 typed elements.

Definition at line <a href="#l06295">6295</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### replaceWithConstant() {#a79158bc80349e2c5ecd857cb098db65e}

<MemberDefinition
  prototype={<>static bool replaceWithConstant (<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp; B, <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp; MI, int64&#95;t C)</>}
  labels = {["static"]}>

Definition at line <a href="#l04382">4382</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### shouldBitcastLoadStoreType() {#a1c42298ffb49a95c87577d3e5de46aea}

<MemberDefinition
  prototype={<>static bool shouldBitcastLoadStoreType (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp; ST, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/llt">LLT</a> MemTy)</>}
  labels = {["static"]}>
Return true if a load or store of the type should be lowered with a bitcast to a different type.

Definition at line <a href="#l00519">519</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### shouldWidenLoad() {#a2d595a51e66614b8adb83efbc8114401}

<MemberDefinition
  prototype={<>static bool shouldWidenLoad (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp; ST, <a href="/docs/api/classes/llvm/llt">LLT</a> MemoryTy, uint64&#95;t AlignInBits, unsigned AddrSpace, unsigned Opcode)</>}
  labels = {["static"]}>
Return true if we should legalize a load by widening an odd sized memory access up to the alignment.

Note this case when the memory access itself changes, not the size of the result register.

Definition at line <a href="#l00538">538</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### shouldWidenLoad() {#a9ae9993cc0e622c6d10e6e9a2aad0a05}

<MemberDefinition
  prototype={<>static bool shouldWidenLoad (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp; ST, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp; Query, unsigned Opcode)</>}
  labels = {["static"]}>

Definition at line <a href="#l00572">572</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### sizeIsMultipleOf32() {#afa3cedfbe23049312e516145f0e46cbb}

<MemberDefinition
  prototype="static LegalityPredicate sizeIsMultipleOf32 (unsigned TypeIdx)"
  labels = {["static"]}>

Definition at line <a href="#l00086">86</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### stripAnySourceMods() {#a716801caf6a489a6af735be940932003}

<MemberDefinition
  prototype={<>static Register stripAnySourceMods (<a href="/docs/api/classes/llvm/register">Register</a> OrigSrc, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp; MRI)</>}
  labels = {["static"]}>

Definition at line <a href="#l03781">3781</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### toggleSPDenormMode() {#abceca15aff80aa1ea3b5e7603981f878}

<MemberDefinition
  prototype={<>static void toggleSPDenormMode (bool Enable, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp; B, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp; ST, <a href="/docs/api/structs/llvm/simoderegisterdefaults">SIModeRegisterDefaults</a> Mode)</>}
  labels = {["static"]}>

Definition at line <a href="#l04955">4955</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### valueIsKnownNeverF32Denorm() {#a344a4fa1e7c1a3a6f6ede4213058ad12}

<MemberDefinition
  prototype={<>static bool valueIsKnownNeverF32Denorm (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp; MRI, <a href="/docs/api/classes/llvm/register">Register</a> Src)</>}
  labels = {["static"]}>
Return true if it&#39;s known that <code>Src</code> can never be an f32 denormal value.

Definition at line <a href="#l03237">3237</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### vectorSmallerThan() {#a144b2ed41ce4f22842225b0b1b117a58}

<MemberDefinition
  prototype="static LegalityPredicate vectorSmallerThan (unsigned TypeIdx, unsigned Size)"
  labels = {["static"]}>

Definition at line <a href="#l00205">205</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### vectorWiderThan() {#a2d0beabfcf00e6fd23c97eff8ee516a6}

<MemberDefinition
  prototype="static LegalityPredicate vectorWiderThan (unsigned TypeIdx, unsigned Size)"
  labels = {["static"]}>

Definition at line <a href="#l00212">212</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### verifyCFIntrinsic() {#a87e58e9d24983c7890c502fbe731f950}

<MemberDefinition
  prototype={<>static MachineInstr &#42; verifyCFIntrinsic (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp; MI, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp; MRI, <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;&amp; Br, <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;&amp; UncondBrTarget, bool &amp; Negated)</>}
  labels = {["static"]}>

Definition at line <a href="#l04234">4234</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### widenToNextPowerOf2() {#acbd3ab3957032feb181df036bb6a8d27}

<MemberDefinition
  prototype={<>static LLT widenToNextPowerOf2 (<a href="/docs/api/classes/llvm/llt">LLT</a> Ty)</>}
  labels = {["static"]}>

Definition at line <a href="#l03073">3073</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Variables

### AllS16Vectors {#a60fec3ee73a795e286972083bf85a68e}

<MemberDefinition
  prototype={<>std::initializer&#95;list&lt;LLT&gt; AllS16Vectors &#123;
    <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, <a href="#a52e4f67b333637f707e6fe59057c7348">V4S16</a>, <a href="#af54c894f1513d925a199547dec0ef2b2">V6S16</a>, <a href="#af904a5a62bedccf8107722036a8df0ce">V8S16</a>, <a href="#ace4e8d195c9498b419467f234000a72e">V10S16</a>, <a href="#a7a3fa97d0457d84638593bf3da5e21f6">V12S16</a>, <a href="#a09d7d8b975bcef9c12bd114d3b593b00">V16S16</a>, <a href="#ad61c521a33598d8ca5b07dd4e0f03087">V2S128</a>, <a href="#a9e404048aa9a1687a9ec6f9d9420bf39">V4S128</a>&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00340">340</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### AllS32Vectors {#a4b69b2b66bc8186c8b21b62fe41d444d}

<MemberDefinition
  prototype={<>std::initializer&#95;list&lt;LLT&gt; AllS32Vectors = &#123;
    <a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a>, <a href="#a257279ea49c58180217364b89917c6c3">V3S32</a>,  <a href="#a0af4f63c268470ef2eac6477d33fdce4">V4S32</a>,  <a href="#a4d742b8db1d6a22581da42b9b758e2be">V5S32</a>,  <a href="#a495ae51584ec946579f24bda39b4fa84">V6S32</a>,  <a href="#a4c29a6c597e1cb2db05e41d65f76d338">V7S32</a>, <a href="#a1348f6cfe026c7a1dca9a61c8713ab07">V8S32</a>,
    <a href="#a7261ab9abe3b6583e7e094677e84b50d">V9S32</a>, <a href="#a73e961aa3509555c9944d502a52d1303">V10S32</a>, <a href="#a53954ac3898aff9426fc131d14a84f11">V11S32</a>, <a href="#a11d102c56b1f897e6886c283d8f16ce4">V12S32</a>, <a href="#a83756b36d1fca7fb0054ab52622cda67">V16S32</a>, <a href="#a61cf1ca010a7d653f1cf0ddefa7a8e6d">V32S32</a>&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00343">343</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### AllS64Vectors {#abf8037dd8ffb10bb4c5fe61c6d0c5c6c}

<MemberDefinition
  prototype={<>std::initializer&#95;list&lt;LLT&gt; AllS64Vectors = &#123;<a href="#acb4ecd614e176840d5b2360a176f1333">V2S64</a>, <a href="#a0900073ce203e689dc42c702ba6a5c98">V3S64</a>, <a href="#a214d79cea6eb493a2f95b0170886311a">V4S64</a>, <a href="#a8c4f0c5559c18078956303fa71b2a027">V5S64</a>,
                                                   <a href="#aa95cd588b298b4861271199e3afe971f">V6S64</a>, <a href="#a839fd594af5fb0c910f8c3fa13e154a9">V7S64</a>, <a href="#a0c9c5c4bf19122ed92afa6fe3e70b158">V8S64</a>, <a href="#a7af378812d0f59470e1ad5ff1ac40679">V16S64</a>&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00347">347</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### AllScalarTypes {#ada70cb9213ffddaebab099c55f886d19}

<MemberDefinition
  prototype={<>std::initializer&#95;list&lt;LLT&gt; AllScalarTypes = &#123;
    <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#ac721ed1f1b2048a37c89fa31e662cd3a">S96</a>, <a href="#a0a82f21bb2863eb65c5f28fb9d34a954">S128</a>, <a href="#a8d3731c41acd28da69f691b8ce22edd4">S160</a>, <a href="#a7654aba611cb44b8c9d4a43398099bf6">S192</a>, <a href="#af775f87ae257bdc6f0b5e5eac41ad51a">S224</a>, <a href="#ae61a7658a9585eba0ff27a47e0c8aea1">S256</a>, <a href="#a7fcbdd8fbd887c5c2c68588ab6179c64">S512</a>, <a href="#a482bcb2c405924538af22abc4c9e85fc">S1024</a>&#125;</>}
  labels = {["static"]}>

Definition at line <a href="#l00337">337</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### EnableNewLegality {#a051bcca9a10dfdb5c382173aa0d5a860}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; EnableNewLegality(&quot;amdgpu-global-isel-new-legality&quot;, cl::desc(&quot;Use GlobalISel desired legality, rather than try to use&quot; &quot;rules compatible with selection patterns&quot;), cl::init(false), cl::ReallyHidden)</>}
  labels = {["static"]}>

Definition at line <a href="#l00046">46</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### F32 {#affe0a8af32c1d4e53b07959b240641b4}

<MemberDefinition
  prototype="const LLT F32 = LLT::float32()"
  labels = {["static"]}>

Definition at line <a href="#l00286">286</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### F64 {#a563bbae35885ba289017e47ec57235fa}

<MemberDefinition
  prototype="const LLT F64 = LLT::float64()"
  labels = {["static"]}>

Definition at line <a href="#l00288">288</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### FPEnvModeBitField {#a1fff431f58bc2af2caae5f611ba0791f}

<MemberDefinition
  prototype={<>unsigned FPEnvModeBitField =
    AMDGPU::Hwreg::HwregEncoding::encode(AMDGPU::Hwreg::ID&#95;MODE, 0, 23)</>}
  labels = {["constexpr", "static"]}>

Definition at line <a href="#l07198">7198</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### FPEnvTrapBitField {#aa0516ba249c5d556a3ee34bfd27737f3}

<MemberDefinition
  prototype={<>unsigned FPEnvTrapBitField =
    AMDGPU::Hwreg::HwregEncoding::encode(AMDGPU::Hwreg::ID&#95;TRAPSTS, 0, 5)</>}
  labels = {["constexpr", "static"]}>

Definition at line <a href="#l07201">7201</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### MaxRegisterSize {#aabec8e9bc89e3e905a71769f8be922c1}

<MemberDefinition
  prototype="unsigned MaxRegisterSize = 1024"
  labels = {["constexpr", "static"]}>

Definition at line <a href="#l00053">53</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### MaxScalar {#abb0782aaccc0907cc36fe566a642c71b}

<MemberDefinition
  prototype={<>const LLT MaxScalar = LLT::scalar(<a href="#aabec8e9bc89e3e905a71769f8be922c1">MaxRegisterSize</a>)</>}
  labels = {["static"]}>

Definition at line <a href="#l00297">297</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### S1 {#a22eabd3566ae5f32cb6f594f4f343399}

<MemberDefinition
  prototype="const LLT S1 = LLT::scalar(1)"
  labels = {["static"]}>

Definition at line <a href="#l00282">282</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### S1024 {#a482bcb2c405924538af22abc4c9e85fc}

<MemberDefinition
  prototype="const LLT S1024 = LLT::scalar(1024)"
  labels = {["static"]}>

Definition at line <a href="#l00296">296</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### S128 {#a0a82f21bb2863eb65c5f28fb9d34a954}

<MemberDefinition
  prototype="const LLT S128 = LLT::scalar(128)"
  labels = {["static"]}>

Definition at line <a href="#l00290">290</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### S16 {#acd57bd926bf1c8815e21e1291a54d151}

<MemberDefinition
  prototype="const LLT S16 = LLT::scalar(16)"
  labels = {["static"]}>

Definition at line <a href="#l00284">284</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### S160 {#a8d3731c41acd28da69f691b8ce22edd4}

<MemberDefinition
  prototype="const LLT S160 = LLT::scalar(160)"
  labels = {["static"]}>

Definition at line <a href="#l00291">291</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### S192 {#a7654aba611cb44b8c9d4a43398099bf6}

<MemberDefinition
  prototype="const LLT S192 = LLT::scalar(192)"
  labels = {["static"]}>

Definition at line <a href="#l00292">292</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### S224 {#af775f87ae257bdc6f0b5e5eac41ad51a}

<MemberDefinition
  prototype="const LLT S224 = LLT::scalar(224)"
  labels = {["static"]}>

Definition at line <a href="#l00293">293</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### S256 {#ae61a7658a9585eba0ff27a47e0c8aea1}

<MemberDefinition
  prototype="const LLT S256 = LLT::scalar(256)"
  labels = {["static"]}>

Definition at line <a href="#l00294">294</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### S32 {#a33c95d7d51d4b0b421aaf3d40796b859}

<MemberDefinition
  prototype="const LLT S32 = LLT::scalar(32)"
  labels = {["static"]}>

Definition at line <a href="#l00285">285</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### S512 {#a7fcbdd8fbd887c5c2c68588ab6179c64}

<MemberDefinition
  prototype="const LLT S512 = LLT::scalar(512)"
  labels = {["static"]}>

Definition at line <a href="#l00295">295</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### S64 {#a2b96ee4926f7c19420d19ecaf7adc1a8}

<MemberDefinition
  prototype="const LLT S64 = LLT::scalar(64)"
  labels = {["static"]}>

Definition at line <a href="#l00287">287</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### S8 {#af00ba7c018760702ba16a5009cec810c}

<MemberDefinition
  prototype="const LLT S8 = LLT::scalar(8)"
  labels = {["static"]}>

Definition at line <a href="#l00283">283</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### S96 {#ac721ed1f1b2048a37c89fa31e662cd3a}

<MemberDefinition
  prototype="const LLT S96 = LLT::scalar(96)"
  labels = {["static"]}>

Definition at line <a href="#l00289">289</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### SPDenormModeBitField {#a795662e773d2eda28caf873fa6eb70c4}

<MemberDefinition
  prototype={<>unsigned SPDenormModeBitField =
    AMDGPU::Hwreg::HwregEncoding::encode(AMDGPU::Hwreg::ID&#95;MODE, 4, 2)</>}
  labels = {["constexpr", "static"]}>

Definition at line <a href="#l04950">4950</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V10S16 {#ace4e8d195c9498b419467f234000a72e}

<MemberDefinition
  prototype={<>const LLT V10S16 = LLT::fixed&#95;vector(10, 16)</>}
  labels = {["static"]}>

Definition at line <a href="#l00304">304</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V10S32 {#a73e961aa3509555c9944d502a52d1303}

<MemberDefinition
  prototype={<>const LLT V10S32 = LLT::fixed&#95;vector(10, 32)</>}
  labels = {["static"]}>

Definition at line <a href="#l00319">319</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V11S32 {#a53954ac3898aff9426fc131d14a84f11}

<MemberDefinition
  prototype={<>const LLT V11S32 = LLT::fixed&#95;vector(11, 32)</>}
  labels = {["static"]}>

Definition at line <a href="#l00320">320</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V12S16 {#a7a3fa97d0457d84638593bf3da5e21f6}

<MemberDefinition
  prototype={<>const LLT V12S16 = LLT::fixed&#95;vector(12, 16)</>}
  labels = {["static"]}>

Definition at line <a href="#l00305">305</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V12S32 {#a11d102c56b1f897e6886c283d8f16ce4}

<MemberDefinition
  prototype={<>const LLT V12S32 = LLT::fixed&#95;vector(12, 32)</>}
  labels = {["static"]}>

Definition at line <a href="#l00321">321</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V16S16 {#a09d7d8b975bcef9c12bd114d3b593b00}

<MemberDefinition
  prototype={<>const LLT V16S16 = LLT::fixed&#95;vector(16, 16)</>}
  labels = {["static"]}>

Definition at line <a href="#l00306">306</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V16S32 {#a83756b36d1fca7fb0054ab52622cda67}

<MemberDefinition
  prototype={<>const LLT V16S32 = LLT::fixed&#95;vector(16, 32)</>}
  labels = {["static"]}>

Definition at line <a href="#l00322">322</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V16S64 {#a7af378812d0f59470e1ad5ff1ac40679}

<MemberDefinition
  prototype={<>const LLT V16S64 = LLT::fixed&#95;vector(16, 64)</>}
  labels = {["static"]}>

Definition at line <a href="#l00332">332</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V2BF16 {#aa6c31d3f7f1803b32735d9b3568e7f12}

<MemberDefinition
  prototype={<>const LLT V2BF16 = <a href="#ade55769087ba2b628fd60dc76161764f">V2F16</a></>}
  labels = {["static"]}>

Definition at line <a href="#l00309">309</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V2F16 {#ade55769087ba2b628fd60dc76161764f}

<MemberDefinition
  prototype={<>const LLT V2F16 = LLT::fixed&#95;vector(2, LLT::float16())</>}
  labels = {["static"]}>

Definition at line <a href="#l00308">308</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V2S128 {#ad61c521a33598d8ca5b07dd4e0f03087}

<MemberDefinition
  prototype={<>const LLT V2S128 = LLT::fixed&#95;vector(2, 128)</>}
  labels = {["static"]}>

Definition at line <a href="#l00334">334</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V2S16 {#a1a23ce3b10dc058d258a405a87e06a1a}

<MemberDefinition
  prototype={<>const LLT V2S16 = LLT::fixed&#95;vector(2, 16)</>}
  labels = {["static"]}>

Definition at line <a href="#l00300">300</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V2S32 {#a0b000f228cb40bf4aee0a19815ce4d99}

<MemberDefinition
  prototype={<>const LLT V2S32 = LLT::fixed&#95;vector(2, 32)</>}
  labels = {["static"]}>

Definition at line <a href="#l00311">311</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V2S64 {#acb4ecd614e176840d5b2360a176f1333}

<MemberDefinition
  prototype={<>const LLT V2S64 = LLT::fixed&#95;vector(2, 64)</>}
  labels = {["static"]}>

Definition at line <a href="#l00325">325</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V2S8 {#ab8e5c09740bb85eb6c2d25b534f91570}

<MemberDefinition
  prototype={<>const LLT V2S8 = LLT::fixed&#95;vector(2, 8)</>}
  labels = {["static"]}>

Definition at line <a href="#l00299">299</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V32S32 {#a61cf1ca010a7d653f1cf0ddefa7a8e6d}

<MemberDefinition
  prototype={<>const LLT V32S32 = LLT::fixed&#95;vector(32, 32)</>}
  labels = {["static"]}>

Definition at line <a href="#l00323">323</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V3S32 {#a257279ea49c58180217364b89917c6c3}

<MemberDefinition
  prototype={<>const LLT V3S32 = LLT::fixed&#95;vector(3, 32)</>}
  labels = {["static"]}>

Definition at line <a href="#l00312">312</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V3S64 {#a0900073ce203e689dc42c702ba6a5c98}

<MemberDefinition
  prototype={<>const LLT V3S64 = LLT::fixed&#95;vector(3, 64)</>}
  labels = {["static"]}>

Definition at line <a href="#l00326">326</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V4S128 {#a9e404048aa9a1687a9ec6f9d9420bf39}

<MemberDefinition
  prototype={<>const LLT V4S128 = LLT::fixed&#95;vector(4, 128)</>}
  labels = {["static"]}>

Definition at line <a href="#l00335">335</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V4S16 {#a52e4f67b333637f707e6fe59057c7348}

<MemberDefinition
  prototype={<>const LLT V4S16 = LLT::fixed&#95;vector(4, 16)</>}
  labels = {["static"]}>

Definition at line <a href="#l00301">301</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V4S32 {#a0af4f63c268470ef2eac6477d33fdce4}

<MemberDefinition
  prototype={<>const LLT V4S32 = LLT::fixed&#95;vector(4, 32)</>}
  labels = {["static"]}>

Definition at line <a href="#l00313">313</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V4S64 {#a214d79cea6eb493a2f95b0170886311a}

<MemberDefinition
  prototype={<>const LLT V4S64 = LLT::fixed&#95;vector(4, 64)</>}
  labels = {["static"]}>

Definition at line <a href="#l00327">327</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V5S32 {#a4d742b8db1d6a22581da42b9b758e2be}

<MemberDefinition
  prototype={<>const LLT V5S32 = LLT::fixed&#95;vector(5, 32)</>}
  labels = {["static"]}>

Definition at line <a href="#l00314">314</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V5S64 {#a8c4f0c5559c18078956303fa71b2a027}

<MemberDefinition
  prototype={<>const LLT V5S64 = LLT::fixed&#95;vector(5, 64)</>}
  labels = {["static"]}>

Definition at line <a href="#l00328">328</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V6S16 {#af54c894f1513d925a199547dec0ef2b2}

<MemberDefinition
  prototype={<>const LLT V6S16 = LLT::fixed&#95;vector(6, 16)</>}
  labels = {["static"]}>

Definition at line <a href="#l00302">302</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V6S32 {#a495ae51584ec946579f24bda39b4fa84}

<MemberDefinition
  prototype={<>const LLT V6S32 = LLT::fixed&#95;vector(6, 32)</>}
  labels = {["static"]}>

Definition at line <a href="#l00315">315</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V6S64 {#aa95cd588b298b4861271199e3afe971f}

<MemberDefinition
  prototype={<>const LLT V6S64 = LLT::fixed&#95;vector(6, 64)</>}
  labels = {["static"]}>

Definition at line <a href="#l00329">329</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V7S32 {#a4c29a6c597e1cb2db05e41d65f76d338}

<MemberDefinition
  prototype={<>const LLT V7S32 = LLT::fixed&#95;vector(7, 32)</>}
  labels = {["static"]}>

Definition at line <a href="#l00316">316</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V7S64 {#a839fd594af5fb0c910f8c3fa13e154a9}

<MemberDefinition
  prototype={<>const LLT V7S64 = LLT::fixed&#95;vector(7, 64)</>}
  labels = {["static"]}>

Definition at line <a href="#l00330">330</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V8S16 {#af904a5a62bedccf8107722036a8df0ce}

<MemberDefinition
  prototype={<>const LLT V8S16 = LLT::fixed&#95;vector(8, 16)</>}
  labels = {["static"]}>

Definition at line <a href="#l00303">303</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V8S32 {#a1348f6cfe026c7a1dca9a61c8713ab07}

<MemberDefinition
  prototype={<>const LLT V8S32 = LLT::fixed&#95;vector(8, 32)</>}
  labels = {["static"]}>

Definition at line <a href="#l00317">317</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V8S64 {#a0c9c5c4bf19122ed92afa6fe3e70b158}

<MemberDefinition
  prototype={<>const LLT V8S64 = LLT::fixed&#95;vector(8, 64)</>}
  labels = {["static"]}>

Definition at line <a href="#l00331">331</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

### V9S32 {#a7261ab9abe3b6583e7e094677e84b50d}

<MemberDefinition
  prototype={<>const LLT V9S32 = LLT::fixed&#95;vector(9, 32)</>}
  labels = {["static"]}>

Definition at line <a href="#l00318">318</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Defines

### DEBUG&#95;TYPE {#ad78e062f62e0d6e453941fb4ca843e4d}

<MemberDefinition
  prototype={<>#define DEBUG&#95;TYPE&nbsp;&nbsp;&nbsp;&quot;amdgpu-legalinfo&quot;</>}>

Definition at line <a href="#l00037">37</a> of file <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-cpp">AMDGPULegalizerInfo.cpp</a>.
</MemberDefinition>

</SectionDefinition>

## File Listing

The file content with the documentation metadata removed is:

<ProgramListing>

<Link id="l00001" /><CodeLine lineNumber="1"><span class="doxyHighlightComment">//===- AMDGPULegalizerInfo.cpp -----------------------------------&#42;- C++ -&#42;-==//</span></CodeLine>
<Link id="l00002" /><CodeLine lineNumber="2"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00003" /><CodeLine lineNumber="3"><span class="doxyHighlightComment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></CodeLine>
<Link id="l00004" /><CodeLine lineNumber="4"><span class="doxyHighlightComment">// See https://llvm.org/LICENSE.txt for license information.</span></CodeLine>
<Link id="l00005" /><CodeLine lineNumber="5"><span class="doxyHighlightComment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></CodeLine>
<Link id="l00006" /><CodeLine lineNumber="6"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00007" /><CodeLine lineNumber="7"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00008" /><CodeLine lineNumber="8"><span class="doxyHighlightComment">/// \\file</span></CodeLine>
<Link id="l00009" /><CodeLine lineNumber="9"><span class="doxyHighlightComment">/// This file implements the targeting of the Machinelegalizer class for</span></CodeLine>
<Link id="l00010" /><CodeLine lineNumber="10"><span class="doxyHighlightComment">/// AMDGPU.</span></CodeLine>
<Link id="l00011" /><CodeLine lineNumber="11"><span class="doxyHighlightComment">/// \\todo This should be generated by TableGen.</span></CodeLine>
<Link id="l00012" /><CodeLine lineNumber="12"><span class="doxyHighlightComment">//===----------------------------------------------------------------------===//</span></CodeLine>
<Link id="l00013" /><CodeLine lineNumber="13"></CodeLine>
<Link id="l00014" /><CodeLine lineNumber="14"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpulegalizerinfo-h">AMDGPULegalizerInfo.h</a>&quot;</span></CodeLine>
<Link id="l00015" /><CodeLine lineNumber="15"></CodeLine>
<Link id="l00016" /><CodeLine lineNumber="16"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpu-h">AMDGPU.h</a>&quot;</span></CodeLine>
<Link id="l00017" /><CodeLine lineNumber="17"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuglobaliselutils-h">AMDGPUGlobalISelUtils.h</a>&quot;</span></CodeLine>
<Link id="l00018" /><CodeLine lineNumber="18"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuinstrinfo-h">AMDGPUInstrInfo.h</a>&quot;</span></CodeLine>
<Link id="l00019" /><CodeLine lineNumber="19"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpumemoryutils-h">AMDGPUMemoryUtils.h</a>&quot;</span></CodeLine>
<Link id="l00020" /><CodeLine lineNumber="20"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgputargetmachine-h">AMDGPUTargetMachine.h</a>&quot;</span></CodeLine>
<Link id="l00021" /><CodeLine lineNumber="21"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/lib/target/amdgpu/mctargetdesc/amdgpumctargetdesc-h">MCTargetDesc/AMDGPUMCTargetDesc.h</a>&quot;</span></CodeLine>
<Link id="l00022" /><CodeLine lineNumber="22"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/siinstrinfo-h">SIInstrInfo.h</a>&quot;</span></CodeLine>
<Link id="l00023" /><CodeLine lineNumber="23"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/simachinefunctioninfo-h">SIMachineFunctionInfo.h</a>&quot;</span></CodeLine>
<Link id="l00024" /><CodeLine lineNumber="24"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/siregisterinfo-h">SIRegisterInfo.h</a>&quot;</span></CodeLine>
<Link id="l00025" /><CodeLine lineNumber="25"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/lib/target/amdgpu/utils/amdgpubaseinfo-h">Utils/AMDGPUBaseInfo.h</a>&quot;</span></CodeLine>
<Link id="l00026" /><CodeLine lineNumber="26"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/scopeexit-h">llvm/ADT/ScopeExit.h</a>&quot;</span></CodeLine>
<Link id="l00027" /><CodeLine lineNumber="27"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/genericmachineinstrs-h">llvm/CodeGen/GlobalISel/GenericMachineInstrs.h</a>&quot;</span></CodeLine>
<Link id="l00028" /><CodeLine lineNumber="28"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/legalizerhelper-h">llvm/CodeGen/GlobalISel/LegalizerHelper.h</a>&quot;</span></CodeLine>
<Link id="l00029" /><CodeLine lineNumber="29"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/mipatternmatch-h">llvm/CodeGen/GlobalISel/MIPatternMatch.h</a>&quot;</span></CodeLine>
<Link id="l00030" /><CodeLine lineNumber="30"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/machineirbuilder-h">llvm/CodeGen/GlobalISel/MachineIRBuilder.h</a>&quot;</span></CodeLine>
<Link id="l00031" /><CodeLine lineNumber="31"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/include/llvm/codegen/globalisel/utils-h">llvm/CodeGen/GlobalISel/Utils.h</a>&quot;</span></CodeLine>
<Link id="l00032" /><CodeLine lineNumber="32"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/codegen/targetopcodes-h">llvm/CodeGen/TargetOpcodes.h</a>&quot;</span></CodeLine>
<Link id="l00033" /><CodeLine lineNumber="33"><span class="doxyHighlightPreprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/diagnosticinfo-h">llvm/IR/DiagnosticInfo.h</a>&quot;</span></CodeLine>
<Link id="l00034" /><CodeLine lineNumber="34"><span class="doxyHighlightPreprocessor">#include &quot;llvm/IR/IntrinsicsAMDGPU.h&quot;</span></CodeLine>
<Link id="l00035" /><CodeLine lineNumber="35"><span class="doxyHighlightPreprocessor">#include &quot;llvm/IR/IntrinsicsR600.h&quot;</span></CodeLine>
<Link id="l00036" /><CodeLine lineNumber="36"></CodeLine>
<Link id="l00037" /><CodeLine lineNumber="37" lineLink="#ad78e062f62e0d6e453941fb4ca843e4d"><span class="doxyHighlightPreprocessor">#define DEBUG&#95;TYPE &quot;amdgpu-legalinfo&quot;</span></CodeLine>
<Link id="l00038" /><CodeLine lineNumber="38"></CodeLine>
<Link id="l00039" /><CodeLine lineNumber="39"><span class="doxyHighlightKeyword">using namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm">llvm</a>;</span></CodeLine>
<Link id="l00040" /><CodeLine lineNumber="40"><span class="doxyHighlightKeyword">using namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/legalizeactions">LegalizeActions</a>;</span></CodeLine>
<Link id="l00041" /><CodeLine lineNumber="41"><span class="doxyHighlightKeyword">using namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/legalizemutations">LegalizeMutations</a>;</span></CodeLine>
<Link id="l00042" /><CodeLine lineNumber="42"><span class="doxyHighlightKeyword">using namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/legalitypredicates">LegalityPredicates</a>;</span></CodeLine>
<Link id="l00043" /><CodeLine lineNumber="43"><span class="doxyHighlightKeyword">using namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/mipatternmatch">MIPatternMatch</a>;</span></CodeLine>
<Link id="l00044" /><CodeLine lineNumber="44"></CodeLine>
<Link id="l00045" /><CodeLine lineNumber="45"><span class="doxyHighlightComment">// Hack until load/store selection patterns support any tuple of legal types.</span></CodeLine>
<Link id="l00046" /><CodeLine lineNumber="46" lineLink="#a051bcca9a10dfdb5c382173aa0d5a860"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a051bcca9a10dfdb5c382173aa0d5a860">EnableNewLegality</a>(</span></CodeLine>
<Link id="l00047" /><CodeLine lineNumber="47"><span class="doxyHighlight">  </span><span class="doxyHighlightStringLiteral">&quot;amdgpu-global-isel-new-legality&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l00048" /><CodeLine lineNumber="48"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</span><span class="doxyHighlightStringLiteral">&quot;Use GlobalISel desired legality, rather than try to use&quot;</span></CodeLine>
<Link id="l00049" /><CodeLine lineNumber="49"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;rules compatible with selection patterns&quot;</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00050" /><CodeLine lineNumber="50"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">),</span></CodeLine>
<Link id="l00051" /><CodeLine lineNumber="51"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40ab81f279502bb9ca74e6629cfb62844be">cl::ReallyHidden</a>);</span></CodeLine>
<Link id="l00052" /><CodeLine lineNumber="52"></CodeLine>
<Link id="l00053" /><CodeLine lineNumber="53" lineLink="#aabec8e9bc89e3e905a71769f8be922c1"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">constexpr</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="#aabec8e9bc89e3e905a71769f8be922c1">MaxRegisterSize</a> = 1024;</span></CodeLine>
<Link id="l00054" /><CodeLine lineNumber="54"></CodeLine>
<Link id="l00055" /><CodeLine lineNumber="55"><span class="doxyHighlightComment">// Round the number of elements to the next power of two elements</span></CodeLine>
<Link id="l00056" /><CodeLine lineNumber="56" lineLink="#ae6dc00935578ac3d7b43326b5f02b2bc"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#ae6dc00935578ac3d7b43326b5f02b2bc">getPow2VectorType</a>(<a href="/docs/api/classes/llvm/llt">LLT</a> Ty) &#123;</span></CodeLine>
<Link id="l00057" /><CodeLine lineNumber="57"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NElts = Ty.getNumElements();</span></CodeLine>
<Link id="l00058" /><CodeLine lineNumber="58"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Pow2NElts = 1 &lt;&lt;  <a href="/docs/api/namespaces/llvm/#a058782b98991f0719657d9008d3df41b">Log2&#95;32&#95;Ceil</a>(NElts);</span></CodeLine>
<Link id="l00059" /><CodeLine lineNumber="59"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Ty.changeElementCount(<a href="/docs/api/classes/llvm/elementcount/#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(Pow2NElts));</span></CodeLine>
<Link id="l00060" /><CodeLine lineNumber="60"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00061" /><CodeLine lineNumber="61"></CodeLine>
<Link id="l00062" /><CodeLine lineNumber="62"><span class="doxyHighlightComment">// Round the number of bits to the next power of two bits</span></CodeLine>
<Link id="l00063" /><CodeLine lineNumber="63" lineLink="#ae9bc1717e31ed947b2eae89a230c744b"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#ae9bc1717e31ed947b2eae89a230c744b">getPow2ScalarType</a>(<a href="/docs/api/classes/llvm/llt">LLT</a> Ty) &#123;</span></CodeLine>
<Link id="l00064" /><CodeLine lineNumber="64"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Bits = Ty.getSizeInBits();</span></CodeLine>
<Link id="l00065" /><CodeLine lineNumber="65"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Pow2Bits = 1 &lt;&lt;  <a href="/docs/api/namespaces/llvm/#a058782b98991f0719657d9008d3df41b">Log2&#95;32&#95;Ceil</a>(Bits);</span></CodeLine>
<Link id="l00066" /><CodeLine lineNumber="66"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(Pow2Bits);</span></CodeLine>
<Link id="l00067" /><CodeLine lineNumber="67"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00068" /><CodeLine lineNumber="68"></CodeLine>
<Link id="l00069" /><CodeLine lineNumber="69"><span class="doxyHighlightComment">/// \\returns true if this is an odd sized vector which should widen by adding an</span></CodeLine>
<Link id="l00070" /><CodeLine lineNumber="70"><span class="doxyHighlightComment">/// additional element. This is mostly to handle &lt;3 x s16&gt; -&gt; &lt;4 x s16&gt;. This</span></CodeLine>
<Link id="l00071" /><CodeLine lineNumber="71"><span class="doxyHighlightComment">/// excludes s1 vectors, which should always be scalarized.</span></CodeLine>
<Link id="l00072" /><CodeLine lineNumber="72" lineLink="#a0dbe048033c8b5adaf283b8fe7de3ba1"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a> <a href="#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx) &#123;</span></CodeLine>
<Link id="l00073" /><CodeLine lineNumber="73"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00074" /><CodeLine lineNumber="74"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = Query.Types&#91;TypeIdx&#93;;</span></CodeLine>
<Link id="l00075" /><CodeLine lineNumber="75"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Ty.isVector())</span></CodeLine>
<Link id="l00076" /><CodeLine lineNumber="76"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00077" /><CodeLine lineNumber="77"></CodeLine>
<Link id="l00078" /><CodeLine lineNumber="78"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> EltTy = Ty.getElementType();</span></CodeLine>
<Link id="l00079" /><CodeLine lineNumber="79"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> EltSize = EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</span></CodeLine>
<Link id="l00080" /><CodeLine lineNumber="80"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Ty.getNumElements() % 2 != 0 &amp;&amp;</span></CodeLine>
<Link id="l00081" /><CodeLine lineNumber="81"><span class="doxyHighlight">           EltSize &gt; 1 &amp;&amp; EltSize &lt; 32 &amp;&amp;</span></CodeLine>
<Link id="l00082" /><CodeLine lineNumber="82"><span class="doxyHighlight">           Ty.getSizeInBits() % 32 != 0;</span></CodeLine>
<Link id="l00083" /><CodeLine lineNumber="83"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00084" /><CodeLine lineNumber="84"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00085" /><CodeLine lineNumber="85"></CodeLine>
<Link id="l00086" /><CodeLine lineNumber="86" lineLink="#afa3cedfbe23049312e516145f0e46cbb"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a> <a href="#afa3cedfbe23049312e516145f0e46cbb">sizeIsMultipleOf32</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx) &#123;</span></CodeLine>
<Link id="l00087" /><CodeLine lineNumber="87"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00088" /><CodeLine lineNumber="88"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = Query.Types&#91;TypeIdx&#93;;</span></CodeLine>
<Link id="l00089" /><CodeLine lineNumber="89"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Ty.getSizeInBits() % 32 == 0;</span></CodeLine>
<Link id="l00090" /><CodeLine lineNumber="90"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00091" /><CodeLine lineNumber="91"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00092" /><CodeLine lineNumber="92"></CodeLine>
<Link id="l00093" /><CodeLine lineNumber="93" lineLink="#a3d552c29a563f3462800870d14e72b0f"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a> <a href="#a3d552c29a563f3462800870d14e72b0f">isWideVec16</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx) &#123;</span></CodeLine>
<Link id="l00094" /><CodeLine lineNumber="94"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00095" /><CodeLine lineNumber="95"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = Query.Types&#91;TypeIdx&#93;;</span></CodeLine>
<Link id="l00096" /><CodeLine lineNumber="96"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> EltTy = Ty.getScalarType();</span></CodeLine>
<Link id="l00097" /><CodeLine lineNumber="97"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 16 &amp;&amp; Ty.getNumElements() &gt; 2;</span></CodeLine>
<Link id="l00098" /><CodeLine lineNumber="98"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00099" /><CodeLine lineNumber="99"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00100" /><CodeLine lineNumber="100"></CodeLine>
<Link id="l00101" /><CodeLine lineNumber="101" lineLink="#a0e3fd79bb281f248eefd08814023d8c8"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a31da885e5f80ee375b306057d2a852ab">LegalizeMutation</a> <a href="#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx) &#123;</span></CodeLine>
<Link id="l00102" /><CodeLine lineNumber="102"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00103" /><CodeLine lineNumber="103"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = Query.Types&#91;TypeIdx&#93;;</span></CodeLine>
<Link id="l00104" /><CodeLine lineNumber="104"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> EltTy = Ty.getElementType();</span></CodeLine>
<Link id="l00105" /><CodeLine lineNumber="105"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(TypeIdx,</span></CodeLine>
<Link id="l00106" /><CodeLine lineNumber="106"><span class="doxyHighlight">                     <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(Ty.getNumElements() + 1, EltTy));</span></CodeLine>
<Link id="l00107" /><CodeLine lineNumber="107"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00108" /><CodeLine lineNumber="108"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00109" /><CodeLine lineNumber="109"></CodeLine>
<Link id="l00110" /><CodeLine lineNumber="110" lineLink="#a3b5805e73f162bbb84584fbc2091806e"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a31da885e5f80ee375b306057d2a852ab">LegalizeMutation</a> <a href="#a3b5805e73f162bbb84584fbc2091806e">fewerEltsToSize64Vector</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx) &#123;</span></CodeLine>
<Link id="l00111" /><CodeLine lineNumber="111"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00112" /><CodeLine lineNumber="112"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = Query.Types&#91;TypeIdx&#93;;</span></CodeLine>
<Link id="l00113" /><CodeLine lineNumber="113"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> EltTy = Ty.getElementType();</span></CodeLine>
<Link id="l00114" /><CodeLine lineNumber="114"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = Ty.getSizeInBits();</span></CodeLine>
<Link id="l00115" /><CodeLine lineNumber="115"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Pieces = (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> + 63) / 64;</span></CodeLine>
<Link id="l00116" /><CodeLine lineNumber="116"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NewNumElts = (Ty.getNumElements() + 1) / Pieces;</span></CodeLine>
<Link id="l00117" /><CodeLine lineNumber="117"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(TypeIdx, <a href="/docs/api/classes/llvm/llt/#ae74a60e5edcee0609a1e4fddc62a8a01">LLT::scalarOrVector</a>(</span></CodeLine>
<Link id="l00118" /><CodeLine lineNumber="118"><span class="doxyHighlight">                                  <a href="/docs/api/classes/llvm/elementcount/#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(NewNumElts), EltTy));</span></CodeLine>
<Link id="l00119" /><CodeLine lineNumber="119"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00120" /><CodeLine lineNumber="120"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00121" /><CodeLine lineNumber="121"></CodeLine>
<Link id="l00122" /><CodeLine lineNumber="122"><span class="doxyHighlightComment">// Increase the number of vector elements to reach the next multiple of 32-bit</span></CodeLine>
<Link id="l00123" /><CodeLine lineNumber="123"><span class="doxyHighlightComment">// type.</span></CodeLine>
<Link id="l00124" /><CodeLine lineNumber="124" lineLink="#ad64f039266036a2ac4d704000928d65b"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a31da885e5f80ee375b306057d2a852ab">LegalizeMutation</a> <a href="#ad64f039266036a2ac4d704000928d65b">moreEltsToNext32Bit</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx) &#123;</span></CodeLine>
<Link id="l00125" /><CodeLine lineNumber="125"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00126" /><CodeLine lineNumber="126"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = Query.Types&#91;TypeIdx&#93;;</span></CodeLine>
<Link id="l00127" /><CodeLine lineNumber="127"></CodeLine>
<Link id="l00128" /><CodeLine lineNumber="128"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> EltTy = Ty.getElementType();</span></CodeLine>
<Link id="l00129" /><CodeLine lineNumber="129"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = Ty.getSizeInBits();</span></CodeLine>
<Link id="l00130" /><CodeLine lineNumber="130"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> EltSize = EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</span></CodeLine>
<Link id="l00131" /><CodeLine lineNumber="131"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NextMul32 = (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> + 31) / 32;</span></CodeLine>
<Link id="l00132" /><CodeLine lineNumber="132"></CodeLine>
<Link id="l00133" /><CodeLine lineNumber="133"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EltSize &lt; 32);</span></CodeLine>
<Link id="l00134" /><CodeLine lineNumber="134"></CodeLine>
<Link id="l00135" /><CodeLine lineNumber="135"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NewNumElts = (32 &#42; NextMul32 + EltSize - 1) / EltSize;</span></CodeLine>
<Link id="l00136" /><CodeLine lineNumber="136"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(TypeIdx, <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(NewNumElts, EltTy));</span></CodeLine>
<Link id="l00137" /><CodeLine lineNumber="137"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00138" /><CodeLine lineNumber="138"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00139" /><CodeLine lineNumber="139"></CodeLine>
<Link id="l00140" /><CodeLine lineNumber="140"><span class="doxyHighlightComment">// Increase the number of vector elements to reach the next legal RegClass.</span></CodeLine>
<Link id="l00141" /><CodeLine lineNumber="141" lineLink="#a4b2db808be70ea68e0f121c1942982a9"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a31da885e5f80ee375b306057d2a852ab">LegalizeMutation</a> <a href="#a4b2db808be70ea68e0f121c1942982a9">moreElementsToNextExistingRegClass</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx) &#123;</span></CodeLine>
<Link id="l00142" /><CodeLine lineNumber="142"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00143" /><CodeLine lineNumber="143"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = Query.Types&#91;TypeIdx&#93;;</span></CodeLine>
<Link id="l00144" /><CodeLine lineNumber="144"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumElts = Ty.getNumElements();</span></CodeLine>
<Link id="l00145" /><CodeLine lineNumber="145"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> EltSize = Ty.getElementType().getSizeInBits();</span></CodeLine>
<Link id="l00146" /><CodeLine lineNumber="146"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> MaxNumElts = <a href="#aabec8e9bc89e3e905a71769f8be922c1">MaxRegisterSize</a> / EltSize;</span></CodeLine>
<Link id="l00147" /><CodeLine lineNumber="147"></CodeLine>
<Link id="l00148" /><CodeLine lineNumber="148"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EltSize == 32 || EltSize == 64);</span></CodeLine>
<Link id="l00149" /><CodeLine lineNumber="149"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty.getSizeInBits() &lt; <a href="#aabec8e9bc89e3e905a71769f8be922c1">MaxRegisterSize</a>);</span></CodeLine>
<Link id="l00150" /><CodeLine lineNumber="150"></CodeLine>
<Link id="l00151" /><CodeLine lineNumber="151"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NewNumElts;</span></CodeLine>
<Link id="l00152" /><CodeLine lineNumber="152"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Find the nearest legal RegClass that is larger than the current type.</span></CodeLine>
<Link id="l00153" /><CodeLine lineNumber="153"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (NewNumElts = NumElts; NewNumElts &lt; MaxNumElts; ++NewNumElts) &#123;</span></CodeLine>
<Link id="l00154" /><CodeLine lineNumber="154"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/siregisterinfo/#a7d8aef424553a9b93de21ced693f0b09">SIRegisterInfo::getSGPRClassForBitWidth</a>(NewNumElts &#42; EltSize))</span></CodeLine>
<Link id="l00155" /><CodeLine lineNumber="155"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00156" /><CodeLine lineNumber="156"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00157" /><CodeLine lineNumber="157"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(TypeIdx,</span></CodeLine>
<Link id="l00158" /><CodeLine lineNumber="158"><span class="doxyHighlight">                     <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(NewNumElts, Ty.getElementType()));</span></CodeLine>
<Link id="l00159" /><CodeLine lineNumber="159"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00160" /><CodeLine lineNumber="160"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00161" /><CodeLine lineNumber="161"></CodeLine>
<Link id="l00162" /><CodeLine lineNumber="162" lineLink="#a0440dee786271aa77b3f640b1c63363c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a0440dee786271aa77b3f640b1c63363c">getBufferRsrcScalarType</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty) &#123;</span></CodeLine>
<Link id="l00163" /><CodeLine lineNumber="163"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Ty.isVector())</span></CodeLine>
<Link id="l00164" /><CodeLine lineNumber="164"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(128);</span></CodeLine>
<Link id="l00165" /><CodeLine lineNumber="165"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/elementcount">ElementCount</a> NumElems = Ty.getElementCount();</span></CodeLine>
<Link id="l00166" /><CodeLine lineNumber="166"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt/#a5360139c6b31d85cf3e29e2e6b7cf873">LLT::vector</a>(NumElems, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(128));</span></CodeLine>
<Link id="l00167" /><CodeLine lineNumber="167"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00168" /><CodeLine lineNumber="168"></CodeLine>
<Link id="l00169" /><CodeLine lineNumber="169" lineLink="#a64443e60c47deb77ad3bb491d2da3c5f"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a64443e60c47deb77ad3bb491d2da3c5f">getBufferRsrcRegisterType</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty) &#123;</span></CodeLine>
<Link id="l00170" /><CodeLine lineNumber="170"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Ty.isVector())</span></CodeLine>
<Link id="l00171" /><CodeLine lineNumber="171"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(4, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32));</span></CodeLine>
<Link id="l00172" /><CodeLine lineNumber="172"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumElems = Ty.getElementCount().getFixedValue();</span></CodeLine>
<Link id="l00173" /><CodeLine lineNumber="173"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(NumElems &#42; 4, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32));</span></CodeLine>
<Link id="l00174" /><CodeLine lineNumber="174"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00175" /><CodeLine lineNumber="175"></CodeLine>
<Link id="l00176" /><CodeLine lineNumber="176" lineLink="#a639711ef50cb300db9e9ade1445ccf07"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a639711ef50cb300db9e9ade1445ccf07">getBitcastRegisterType</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty) &#123;</span></CodeLine>
<Link id="l00177" /><CodeLine lineNumber="177"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = Ty.getSizeInBits();</span></CodeLine>
<Link id="l00178" /><CodeLine lineNumber="178"></CodeLine>
<Link id="l00179" /><CodeLine lineNumber="179"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> &lt;= 32) &#123;</span></CodeLine>
<Link id="l00180" /><CodeLine lineNumber="180"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// &lt;2 x s8&gt; -&gt; s16</span></CodeLine>
<Link id="l00181" /><CodeLine lineNumber="181"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// &lt;4 x s8&gt; -&gt; s32</span></CodeLine>
<Link id="l00182" /><CodeLine lineNumber="182"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>);</span></CodeLine>
<Link id="l00183" /><CodeLine lineNumber="183"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00184" /><CodeLine lineNumber="184"></CodeLine>
<Link id="l00185" /><CodeLine lineNumber="185"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt/#ae74a60e5edcee0609a1e4fddc62a8a01">LLT::scalarOrVector</a>(<a href="/docs/api/classes/llvm/elementcount/#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> / 32), 32);</span></CodeLine>
<Link id="l00186" /><CodeLine lineNumber="186"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00187" /><CodeLine lineNumber="187"></CodeLine>
<Link id="l00188" /><CodeLine lineNumber="188" lineLink="#a6eb46b558dd23ba908853adcc6ba76b7"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a31da885e5f80ee375b306057d2a852ab">LegalizeMutation</a> <a href="#a6eb46b558dd23ba908853adcc6ba76b7">bitcastToRegisterType</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx) &#123;</span></CodeLine>
<Link id="l00189" /><CodeLine lineNumber="189"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00190" /><CodeLine lineNumber="190"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = Query.Types&#91;TypeIdx&#93;;</span></CodeLine>
<Link id="l00191" /><CodeLine lineNumber="191"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(TypeIdx, <a href="#a639711ef50cb300db9e9ade1445ccf07">getBitcastRegisterType</a>(Ty));</span></CodeLine>
<Link id="l00192" /><CodeLine lineNumber="192"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00193" /><CodeLine lineNumber="193"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00194" /><CodeLine lineNumber="194"></CodeLine>
<Link id="l00195" /><CodeLine lineNumber="195" lineLink="#a0aab1c76215e1773caa058744d6ae6af"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a31da885e5f80ee375b306057d2a852ab">LegalizeMutation</a> <a href="#a0aab1c76215e1773caa058744d6ae6af">bitcastToVectorElement32</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx) &#123;</span></CodeLine>
<Link id="l00196" /><CodeLine lineNumber="196"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00197" /><CodeLine lineNumber="197"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = Query.Types&#91;TypeIdx&#93;;</span></CodeLine>
<Link id="l00198" /><CodeLine lineNumber="198"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = Ty.getSizeInBits();</span></CodeLine>
<Link id="l00199" /><CodeLine lineNumber="199"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> % 32 == 0);</span></CodeLine>
<Link id="l00200" /><CodeLine lineNumber="200"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(</span></CodeLine>
<Link id="l00201" /><CodeLine lineNumber="201"><span class="doxyHighlight">        TypeIdx, <a href="/docs/api/classes/llvm/llt/#ae74a60e5edcee0609a1e4fddc62a8a01">LLT::scalarOrVector</a>(<a href="/docs/api/classes/llvm/elementcount/#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> / 32), 32));</span></CodeLine>
<Link id="l00202" /><CodeLine lineNumber="202"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00203" /><CodeLine lineNumber="203"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00204" /><CodeLine lineNumber="204"></CodeLine>
<Link id="l00205" /><CodeLine lineNumber="205" lineLink="#a144b2ed41ce4f22842225b0b1b117a58"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a> <a href="#a144b2ed41ce4f22842225b0b1b117a58">vectorSmallerThan</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>) &#123;</span></CodeLine>
<Link id="l00206" /><CodeLine lineNumber="206"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00207" /><CodeLine lineNumber="207"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> QueryTy = Query.Types&#91;TypeIdx&#93;;</span></CodeLine>
<Link id="l00208" /><CodeLine lineNumber="208"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> QueryTy.<a href="/docs/api/classes/llvm/llt/#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; QueryTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &lt; <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>;</span></CodeLine>
<Link id="l00209" /><CodeLine lineNumber="209"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00210" /><CodeLine lineNumber="210"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00211" /><CodeLine lineNumber="211"></CodeLine>
<Link id="l00212" /><CodeLine lineNumber="212" lineLink="#a2d0beabfcf00e6fd23c97eff8ee516a6"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a> <a href="#a2d0beabfcf00e6fd23c97eff8ee516a6">vectorWiderThan</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>) &#123;</span></CodeLine>
<Link id="l00213" /><CodeLine lineNumber="213"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00214" /><CodeLine lineNumber="214"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> QueryTy = Query.Types&#91;TypeIdx&#93;;</span></CodeLine>
<Link id="l00215" /><CodeLine lineNumber="215"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> QueryTy.<a href="/docs/api/classes/llvm/llt/#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; QueryTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>;</span></CodeLine>
<Link id="l00216" /><CodeLine lineNumber="216"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00217" /><CodeLine lineNumber="217"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00218" /><CodeLine lineNumber="218"></CodeLine>
<Link id="l00219" /><CodeLine lineNumber="219" lineLink="#a8e4a67e6620c2b437e4b7a7707ac0914"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a> <a href="#a8e4a67e6620c2b437e4b7a7707ac0914">numElementsNotEven</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx) &#123;</span></CodeLine>
<Link id="l00220" /><CodeLine lineNumber="220"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00221" /><CodeLine lineNumber="221"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> QueryTy = Query.Types&#91;TypeIdx&#93;;</span></CodeLine>
<Link id="l00222" /><CodeLine lineNumber="222"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> QueryTy.<a href="/docs/api/classes/llvm/llt/#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; QueryTy.<a href="/docs/api/classes/llvm/llt/#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() % 2 != 0;</span></CodeLine>
<Link id="l00223" /><CodeLine lineNumber="223"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00224" /><CodeLine lineNumber="224"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00225" /><CodeLine lineNumber="225"></CodeLine>
<Link id="l00226" /><CodeLine lineNumber="226" lineLink="#a3986167503ccf79606f2249e660c9961"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a3986167503ccf79606f2249e660c9961">isRegisterSize</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>) &#123;</span></CodeLine>
<Link id="l00227" /><CodeLine lineNumber="227"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> % 32 == 0 &amp;&amp; <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> &lt;= <a href="#aabec8e9bc89e3e905a71769f8be922c1">MaxRegisterSize</a>;</span></CodeLine>
<Link id="l00228" /><CodeLine lineNumber="228"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00229" /><CodeLine lineNumber="229"></CodeLine>
<Link id="l00230" /><CodeLine lineNumber="230" lineLink="#a31648fb7411d04ec274b46d8dd635564"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a31648fb7411d04ec274b46d8dd635564">isRegisterVectorElementType</a>(<a href="/docs/api/classes/llvm/llt">LLT</a> EltTy) &#123;</span></CodeLine>
<Link id="l00231" /><CodeLine lineNumber="231"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> EltSize = EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</span></CodeLine>
<Link id="l00232" /><CodeLine lineNumber="232"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> EltSize == 16 || EltSize % 32 == 0;</span></CodeLine>
<Link id="l00233" /><CodeLine lineNumber="233"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00234" /><CodeLine lineNumber="234"></CodeLine>
<Link id="l00235" /><CodeLine lineNumber="235" lineLink="#af6ee8616537a0f758b8962b4e5076b35"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#af6ee8616537a0f758b8962b4e5076b35">isRegisterVectorType</a>(<a href="/docs/api/classes/llvm/llt">LLT</a> Ty) &#123;</span></CodeLine>
<Link id="l00236" /><CodeLine lineNumber="236"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> EltSize = Ty.getElementType().getSizeInBits();</span></CodeLine>
<Link id="l00237" /><CodeLine lineNumber="237"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> EltSize == 32 || EltSize == 64 ||</span></CodeLine>
<Link id="l00238" /><CodeLine lineNumber="238"><span class="doxyHighlight">         (EltSize == 16 &amp;&amp; Ty.getNumElements() % 2 == 0) ||</span></CodeLine>
<Link id="l00239" /><CodeLine lineNumber="239"><span class="doxyHighlight">         EltSize == 128 || EltSize == 256;</span></CodeLine>
<Link id="l00240" /><CodeLine lineNumber="240"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00241" /><CodeLine lineNumber="241"></CodeLine>
<Link id="l00242" /><CodeLine lineNumber="242"><span class="doxyHighlightComment">// TODO: replace all uses of isRegisterType with isRegisterClassType</span></CodeLine>
<Link id="l00243" /><CodeLine lineNumber="243" lineLink="#a2ea867ab6af309ac37d89c0ac9242600"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(<a href="/docs/api/classes/llvm/llt">LLT</a> Ty) &#123;</span></CodeLine>
<Link id="l00244" /><CodeLine lineNumber="244"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#a3986167503ccf79606f2249e660c9961">isRegisterSize</a>(Ty.getSizeInBits()))</span></CodeLine>
<Link id="l00245" /><CodeLine lineNumber="245"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00246" /><CodeLine lineNumber="246"></CodeLine>
<Link id="l00247" /><CodeLine lineNumber="247"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty.isVector())</span></CodeLine>
<Link id="l00248" /><CodeLine lineNumber="248"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#af6ee8616537a0f758b8962b4e5076b35">isRegisterVectorType</a>(Ty);</span></CodeLine>
<Link id="l00249" /><CodeLine lineNumber="249"></CodeLine>
<Link id="l00250" /><CodeLine lineNumber="250"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00251" /><CodeLine lineNumber="251"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00252" /><CodeLine lineNumber="252"></CodeLine>
<Link id="l00253" /><CodeLine lineNumber="253"><span class="doxyHighlightComment">// Any combination of 32 or 64-bit elements up the maximum register size, and</span></CodeLine>
<Link id="l00254" /><CodeLine lineNumber="254"><span class="doxyHighlightComment">// multiples of v2s16.</span></CodeLine>
<Link id="l00255" /><CodeLine lineNumber="255" lineLink="#a6828238e57f3a265b56fb009a227af4e"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a> <a href="#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx) &#123;</span></CodeLine>
<Link id="l00256" /><CodeLine lineNumber="256"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00257" /><CodeLine lineNumber="257"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(Query.Types&#91;TypeIdx&#93;);</span></CodeLine>
<Link id="l00258" /><CodeLine lineNumber="258"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00259" /><CodeLine lineNumber="259"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00260" /><CodeLine lineNumber="260"></CodeLine>
<Link id="l00261" /><CodeLine lineNumber="261"><span class="doxyHighlightComment">// RegisterType that doesn&#39;t have a corresponding RegClass.</span></CodeLine>
<Link id="l00262" /><CodeLine lineNumber="262"><span class="doxyHighlightComment">// TODO: Once &#96;isRegisterType&#96; is replaced with &#96;isRegisterClassType&#96; this</span></CodeLine>
<Link id="l00263" /><CodeLine lineNumber="263"><span class="doxyHighlightComment">// should be removed.</span></CodeLine>
<Link id="l00264" /><CodeLine lineNumber="264" lineLink="#aa5fe965eac66ae9ebc69835fe44c679d"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a> <a href="#aa5fe965eac66ae9ebc69835fe44c679d">isIllegalRegisterType</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx) &#123;</span></CodeLine>
<Link id="l00265" /><CodeLine lineNumber="265"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00266" /><CodeLine lineNumber="266"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = Query.Types&#91;TypeIdx&#93;;</span></CodeLine>
<Link id="l00267" /><CodeLine lineNumber="267"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(Ty) &amp;&amp;</span></CodeLine>
<Link id="l00268" /><CodeLine lineNumber="268"><span class="doxyHighlight">           !<a href="/docs/api/classes/llvm/siregisterinfo/#a7d8aef424553a9b93de21ced693f0b09">SIRegisterInfo::getSGPRClassForBitWidth</a>(Ty.getSizeInBits());</span></CodeLine>
<Link id="l00269" /><CodeLine lineNumber="269"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00270" /><CodeLine lineNumber="270"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00271" /><CodeLine lineNumber="271"></CodeLine>
<Link id="l00272" /><CodeLine lineNumber="272" lineLink="#aed4feaa9baf8df7fe949b9a5ce246646"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a> <a href="#aed4feaa9baf8df7fe949b9a5ce246646">elementTypeIsLegal</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx) &#123;</span></CodeLine>
<Link id="l00273" /><CodeLine lineNumber="273"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00274" /><CodeLine lineNumber="274"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> QueryTy = Query.Types&#91;TypeIdx&#93;;</span></CodeLine>
<Link id="l00275" /><CodeLine lineNumber="275"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!QueryTy.<a href="/docs/api/classes/llvm/llt/#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</span></CodeLine>
<Link id="l00276" /><CodeLine lineNumber="276"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00277" /><CodeLine lineNumber="277"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> EltTy = QueryTy.<a href="/docs/api/classes/llvm/llt/#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</span></CodeLine>
<Link id="l00278" /><CodeLine lineNumber="278"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> EltTy == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16) || EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt;= 32;</span></CodeLine>
<Link id="l00279" /><CodeLine lineNumber="279"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00280" /><CodeLine lineNumber="280"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00281" /><CodeLine lineNumber="281"></CodeLine>
<Link id="l00282" /><CodeLine lineNumber="282" lineLink="#a22eabd3566ae5f32cb6f594f4f343399"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</span></CodeLine>
<Link id="l00283" /><CodeLine lineNumber="283" lineLink="#af00ba7c018760702ba16a5009cec810c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#af00ba7c018760702ba16a5009cec810c">S8</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(8);</span></CodeLine>
<Link id="l00284" /><CodeLine lineNumber="284" lineLink="#acd57bd926bf1c8815e21e1291a54d151"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</span></CodeLine>
<Link id="l00285" /><CodeLine lineNumber="285" lineLink="#a33c95d7d51d4b0b421aaf3d40796b859"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l00286" /><CodeLine lineNumber="286" lineLink="#affe0a8af32c1d4e53b07959b240641b4"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a> = <a href="/docs/api/classes/llvm/llt/#aee6abb440f4fe52097595d934283f0a1">LLT::float32</a>();</span></CodeLine>
<Link id="l00287" /><CodeLine lineNumber="287" lineLink="#a2b96ee4926f7c19420d19ecaf7adc1a8"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</span></CodeLine>
<Link id="l00288" /><CodeLine lineNumber="288" lineLink="#a563bbae35885ba289017e47ec57235fa"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a563bbae35885ba289017e47ec57235fa">F64</a> = <a href="/docs/api/classes/llvm/llt/#a0631408a6598e34659cc5495c3ec090b">LLT::float64</a>();</span></CodeLine>
<Link id="l00289" /><CodeLine lineNumber="289" lineLink="#ac721ed1f1b2048a37c89fa31e662cd3a"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#ac721ed1f1b2048a37c89fa31e662cd3a">S96</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(96);</span></CodeLine>
<Link id="l00290" /><CodeLine lineNumber="290" lineLink="#a0a82f21bb2863eb65c5f28fb9d34a954"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a0a82f21bb2863eb65c5f28fb9d34a954">S128</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(128);</span></CodeLine>
<Link id="l00291" /><CodeLine lineNumber="291" lineLink="#a8d3731c41acd28da69f691b8ce22edd4"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a8d3731c41acd28da69f691b8ce22edd4">S160</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(160);</span></CodeLine>
<Link id="l00292" /><CodeLine lineNumber="292" lineLink="#a7654aba611cb44b8c9d4a43398099bf6"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a7654aba611cb44b8c9d4a43398099bf6">S192</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(192);</span></CodeLine>
<Link id="l00293" /><CodeLine lineNumber="293" lineLink="#af775f87ae257bdc6f0b5e5eac41ad51a"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#af775f87ae257bdc6f0b5e5eac41ad51a">S224</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(224);</span></CodeLine>
<Link id="l00294" /><CodeLine lineNumber="294" lineLink="#ae61a7658a9585eba0ff27a47e0c8aea1"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#ae61a7658a9585eba0ff27a47e0c8aea1">S256</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(256);</span></CodeLine>
<Link id="l00295" /><CodeLine lineNumber="295" lineLink="#a7fcbdd8fbd887c5c2c68588ab6179c64"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a7fcbdd8fbd887c5c2c68588ab6179c64">S512</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(512);</span></CodeLine>
<Link id="l00296" /><CodeLine lineNumber="296" lineLink="#a482bcb2c405924538af22abc4c9e85fc"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a482bcb2c405924538af22abc4c9e85fc">S1024</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1024);</span></CodeLine>
<Link id="l00297" /><CodeLine lineNumber="297" lineLink="#abb0782aaccc0907cc36fe566a642c71b"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#abb0782aaccc0907cc36fe566a642c71b">MaxScalar</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(<a href="#aabec8e9bc89e3e905a71769f8be922c1">MaxRegisterSize</a>);</span></CodeLine>
<Link id="l00298" /><CodeLine lineNumber="298"></CodeLine>
<Link id="l00299" /><CodeLine lineNumber="299" lineLink="#ab8e5c09740bb85eb6c2d25b534f91570"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#ab8e5c09740bb85eb6c2d25b534f91570">V2S8</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2, 8);</span></CodeLine>
<Link id="l00300" /><CodeLine lineNumber="300" lineLink="#a1a23ce3b10dc058d258a405a87e06a1a"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2, 16);</span></CodeLine>
<Link id="l00301" /><CodeLine lineNumber="301" lineLink="#a52e4f67b333637f707e6fe59057c7348"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a52e4f67b333637f707e6fe59057c7348">V4S16</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(4, 16);</span></CodeLine>
<Link id="l00302" /><CodeLine lineNumber="302" lineLink="#af54c894f1513d925a199547dec0ef2b2"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#af54c894f1513d925a199547dec0ef2b2">V6S16</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(6, 16);</span></CodeLine>
<Link id="l00303" /><CodeLine lineNumber="303" lineLink="#af904a5a62bedccf8107722036a8df0ce"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#af904a5a62bedccf8107722036a8df0ce">V8S16</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(8, 16);</span></CodeLine>
<Link id="l00304" /><CodeLine lineNumber="304" lineLink="#ace4e8d195c9498b419467f234000a72e"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#ace4e8d195c9498b419467f234000a72e">V10S16</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(10, 16);</span></CodeLine>
<Link id="l00305" /><CodeLine lineNumber="305" lineLink="#a7a3fa97d0457d84638593bf3da5e21f6"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a7a3fa97d0457d84638593bf3da5e21f6">V12S16</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(12, 16);</span></CodeLine>
<Link id="l00306" /><CodeLine lineNumber="306" lineLink="#a09d7d8b975bcef9c12bd114d3b593b00"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a09d7d8b975bcef9c12bd114d3b593b00">V16S16</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(16, 16);</span></CodeLine>
<Link id="l00307" /><CodeLine lineNumber="307"></CodeLine>
<Link id="l00308" /><CodeLine lineNumber="308" lineLink="#ade55769087ba2b628fd60dc76161764f"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#ade55769087ba2b628fd60dc76161764f">V2F16</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2, <a href="/docs/api/classes/llvm/llt/#abb1f260fc4da86ce2e93fa8628aa0b1d">LLT::float16</a>());</span></CodeLine>
<Link id="l00309" /><CodeLine lineNumber="309" lineLink="#aa6c31d3f7f1803b32735d9b3568e7f12"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#aa6c31d3f7f1803b32735d9b3568e7f12">V2BF16</a> = <a href="#ade55769087ba2b628fd60dc76161764f">V2F16</a>; </span><span class="doxyHighlightComment">// FIXME</span></CodeLine>
<Link id="l00310" /><CodeLine lineNumber="310"></CodeLine>
<Link id="l00311" /><CodeLine lineNumber="311" lineLink="#a0b000f228cb40bf4aee0a19815ce4d99"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2, 32);</span></CodeLine>
<Link id="l00312" /><CodeLine lineNumber="312" lineLink="#a257279ea49c58180217364b89917c6c3"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a257279ea49c58180217364b89917c6c3">V3S32</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(3, 32);</span></CodeLine>
<Link id="l00313" /><CodeLine lineNumber="313" lineLink="#a0af4f63c268470ef2eac6477d33fdce4"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a0af4f63c268470ef2eac6477d33fdce4">V4S32</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(4, 32);</span></CodeLine>
<Link id="l00314" /><CodeLine lineNumber="314" lineLink="#a4d742b8db1d6a22581da42b9b758e2be"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a4d742b8db1d6a22581da42b9b758e2be">V5S32</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(5, 32);</span></CodeLine>
<Link id="l00315" /><CodeLine lineNumber="315" lineLink="#a495ae51584ec946579f24bda39b4fa84"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a495ae51584ec946579f24bda39b4fa84">V6S32</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(6, 32);</span></CodeLine>
<Link id="l00316" /><CodeLine lineNumber="316" lineLink="#a4c29a6c597e1cb2db05e41d65f76d338"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a4c29a6c597e1cb2db05e41d65f76d338">V7S32</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(7, 32);</span></CodeLine>
<Link id="l00317" /><CodeLine lineNumber="317" lineLink="#a1348f6cfe026c7a1dca9a61c8713ab07"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a1348f6cfe026c7a1dca9a61c8713ab07">V8S32</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(8, 32);</span></CodeLine>
<Link id="l00318" /><CodeLine lineNumber="318" lineLink="#a7261ab9abe3b6583e7e094677e84b50d"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a7261ab9abe3b6583e7e094677e84b50d">V9S32</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(9, 32);</span></CodeLine>
<Link id="l00319" /><CodeLine lineNumber="319" lineLink="#a73e961aa3509555c9944d502a52d1303"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a73e961aa3509555c9944d502a52d1303">V10S32</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(10, 32);</span></CodeLine>
<Link id="l00320" /><CodeLine lineNumber="320" lineLink="#a53954ac3898aff9426fc131d14a84f11"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a53954ac3898aff9426fc131d14a84f11">V11S32</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(11, 32);</span></CodeLine>
<Link id="l00321" /><CodeLine lineNumber="321" lineLink="#a11d102c56b1f897e6886c283d8f16ce4"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a11d102c56b1f897e6886c283d8f16ce4">V12S32</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(12, 32);</span></CodeLine>
<Link id="l00322" /><CodeLine lineNumber="322" lineLink="#a83756b36d1fca7fb0054ab52622cda67"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a83756b36d1fca7fb0054ab52622cda67">V16S32</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(16, 32);</span></CodeLine>
<Link id="l00323" /><CodeLine lineNumber="323" lineLink="#a61cf1ca010a7d653f1cf0ddefa7a8e6d"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a61cf1ca010a7d653f1cf0ddefa7a8e6d">V32S32</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(32, 32);</span></CodeLine>
<Link id="l00324" /><CodeLine lineNumber="324"></CodeLine>
<Link id="l00325" /><CodeLine lineNumber="325" lineLink="#acb4ecd614e176840d5b2360a176f1333"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#acb4ecd614e176840d5b2360a176f1333">V2S64</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2, 64);</span></CodeLine>
<Link id="l00326" /><CodeLine lineNumber="326" lineLink="#a0900073ce203e689dc42c702ba6a5c98"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a0900073ce203e689dc42c702ba6a5c98">V3S64</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(3, 64);</span></CodeLine>
<Link id="l00327" /><CodeLine lineNumber="327" lineLink="#a214d79cea6eb493a2f95b0170886311a"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a214d79cea6eb493a2f95b0170886311a">V4S64</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(4, 64);</span></CodeLine>
<Link id="l00328" /><CodeLine lineNumber="328" lineLink="#a8c4f0c5559c18078956303fa71b2a027"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a8c4f0c5559c18078956303fa71b2a027">V5S64</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(5, 64);</span></CodeLine>
<Link id="l00329" /><CodeLine lineNumber="329" lineLink="#aa95cd588b298b4861271199e3afe971f"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#aa95cd588b298b4861271199e3afe971f">V6S64</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(6, 64);</span></CodeLine>
<Link id="l00330" /><CodeLine lineNumber="330" lineLink="#a839fd594af5fb0c910f8c3fa13e154a9"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a839fd594af5fb0c910f8c3fa13e154a9">V7S64</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(7, 64);</span></CodeLine>
<Link id="l00331" /><CodeLine lineNumber="331" lineLink="#a0c9c5c4bf19122ed92afa6fe3e70b158"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a0c9c5c4bf19122ed92afa6fe3e70b158">V8S64</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(8, 64);</span></CodeLine>
<Link id="l00332" /><CodeLine lineNumber="332" lineLink="#a7af378812d0f59470e1ad5ff1ac40679"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a7af378812d0f59470e1ad5ff1ac40679">V16S64</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(16, 64);</span></CodeLine>
<Link id="l00333" /><CodeLine lineNumber="333"></CodeLine>
<Link id="l00334" /><CodeLine lineNumber="334" lineLink="#ad61c521a33598d8ca5b07dd4e0f03087"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#ad61c521a33598d8ca5b07dd4e0f03087">V2S128</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2, 128);</span></CodeLine>
<Link id="l00335" /><CodeLine lineNumber="335" lineLink="#a9e404048aa9a1687a9ec6f9d9420bf39"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a9e404048aa9a1687a9ec6f9d9420bf39">V4S128</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(4, 128);</span></CodeLine>
<Link id="l00336" /><CodeLine lineNumber="336"></CodeLine>
<Link id="l00337" /><CodeLine lineNumber="337" lineLink="#ada70cb9213ffddaebab099c55f886d19"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> std::initializer&#95;list&lt;LLT&gt; <a href="#ada70cb9213ffddaebab099c55f886d19">AllScalarTypes</a> = &#123;</span></CodeLine>
<Link id="l00338" /><CodeLine lineNumber="338"><span class="doxyHighlight">    <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#ac721ed1f1b2048a37c89fa31e662cd3a">S96</a>, <a href="#a0a82f21bb2863eb65c5f28fb9d34a954">S128</a>, <a href="#a8d3731c41acd28da69f691b8ce22edd4">S160</a>, <a href="#a7654aba611cb44b8c9d4a43398099bf6">S192</a>, <a href="#af775f87ae257bdc6f0b5e5eac41ad51a">S224</a>, <a href="#ae61a7658a9585eba0ff27a47e0c8aea1">S256</a>, <a href="#a7fcbdd8fbd887c5c2c68588ab6179c64">S512</a>, <a href="#a482bcb2c405924538af22abc4c9e85fc">S1024</a>&#125;;</span></CodeLine>
<Link id="l00339" /><CodeLine lineNumber="339"></CodeLine>
<Link id="l00340" /><CodeLine lineNumber="340" lineLink="#a60fec3ee73a795e286972083bf85a68e"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> std::initializer&#95;list&lt;LLT&gt; <a href="#a60fec3ee73a795e286972083bf85a68e">AllS16Vectors</a>&#123;</span></CodeLine>
<Link id="l00341" /><CodeLine lineNumber="341"><span class="doxyHighlight">    <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, <a href="#a52e4f67b333637f707e6fe59057c7348">V4S16</a>, <a href="#af54c894f1513d925a199547dec0ef2b2">V6S16</a>, <a href="#af904a5a62bedccf8107722036a8df0ce">V8S16</a>, <a href="#ace4e8d195c9498b419467f234000a72e">V10S16</a>, <a href="#a7a3fa97d0457d84638593bf3da5e21f6">V12S16</a>, <a href="#a09d7d8b975bcef9c12bd114d3b593b00">V16S16</a>, <a href="#ad61c521a33598d8ca5b07dd4e0f03087">V2S128</a>, <a href="#a9e404048aa9a1687a9ec6f9d9420bf39">V4S128</a>&#125;;</span></CodeLine>
<Link id="l00342" /><CodeLine lineNumber="342"></CodeLine>
<Link id="l00343" /><CodeLine lineNumber="343" lineLink="#a4b69b2b66bc8186c8b21b62fe41d444d"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> std::initializer&#95;list&lt;LLT&gt; <a href="#a4b69b2b66bc8186c8b21b62fe41d444d">AllS32Vectors</a> = &#123;</span></CodeLine>
<Link id="l00344" /><CodeLine lineNumber="344"><span class="doxyHighlight">    <a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a>, <a href="#a257279ea49c58180217364b89917c6c3">V3S32</a>,  <a href="#a0af4f63c268470ef2eac6477d33fdce4">V4S32</a>,  <a href="#a4d742b8db1d6a22581da42b9b758e2be">V5S32</a>,  <a href="#a495ae51584ec946579f24bda39b4fa84">V6S32</a>,  <a href="#a4c29a6c597e1cb2db05e41d65f76d338">V7S32</a>, <a href="#a1348f6cfe026c7a1dca9a61c8713ab07">V8S32</a>,</span></CodeLine>
<Link id="l00345" /><CodeLine lineNumber="345"><span class="doxyHighlight">    <a href="#a7261ab9abe3b6583e7e094677e84b50d">V9S32</a>, <a href="#a73e961aa3509555c9944d502a52d1303">V10S32</a>, <a href="#a53954ac3898aff9426fc131d14a84f11">V11S32</a>, <a href="#a11d102c56b1f897e6886c283d8f16ce4">V12S32</a>, <a href="#a83756b36d1fca7fb0054ab52622cda67">V16S32</a>, <a href="#a61cf1ca010a7d653f1cf0ddefa7a8e6d">V32S32</a>&#125;;</span></CodeLine>
<Link id="l00346" /><CodeLine lineNumber="346"></CodeLine>
<Link id="l00347" /><CodeLine lineNumber="347" lineLink="#abf8037dd8ffb10bb4c5fe61c6d0c5c6c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> std::initializer&#95;list&lt;LLT&gt; <a href="#abf8037dd8ffb10bb4c5fe61c6d0c5c6c">AllS64Vectors</a> = &#123;<a href="#acb4ecd614e176840d5b2360a176f1333">V2S64</a>, <a href="#a0900073ce203e689dc42c702ba6a5c98">V3S64</a>, <a href="#a214d79cea6eb493a2f95b0170886311a">V4S64</a>, <a href="#a8c4f0c5559c18078956303fa71b2a027">V5S64</a>,</span></CodeLine>
<Link id="l00348" /><CodeLine lineNumber="348"><span class="doxyHighlight">                                                   <a href="#aa95cd588b298b4861271199e3afe971f">V6S64</a>, <a href="#a839fd594af5fb0c910f8c3fa13e154a9">V7S64</a>, <a href="#a0c9c5c4bf19122ed92afa6fe3e70b158">V8S64</a>, <a href="#a7af378812d0f59470e1ad5ff1ac40679">V16S64</a>&#125;;</span></CodeLine>
<Link id="l00349" /><CodeLine lineNumber="349"></CodeLine>
<Link id="l00350" /><CodeLine lineNumber="350"><span class="doxyHighlightComment">// Checks whether a type is in the list of legal register types.</span></CodeLine>
<Link id="l00351" /><CodeLine lineNumber="351" lineLink="#a8ac13bffc4ec5811abc67aaa4166e9a8"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a8ac13bffc4ec5811abc67aaa4166e9a8">isRegisterClassType</a>(<a href="/docs/api/classes/llvm/llt">LLT</a> Ty) &#123;</span></CodeLine>
<Link id="l00352" /><CodeLine lineNumber="352"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty.isPointerOrPointerVector())</span></CodeLine>
<Link id="l00353" /><CodeLine lineNumber="353"><span class="doxyHighlight">    Ty = Ty.changeElementType(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(Ty.getScalarSizeInBits()));</span></CodeLine>
<Link id="l00354" /><CodeLine lineNumber="354"></CodeLine>
<Link id="l00355" /><CodeLine lineNumber="355"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#acd1cd968cb420c82d70926920fcdc7d7">is&#95;contained</a>(<a href="#a4b69b2b66bc8186c8b21b62fe41d444d">AllS32Vectors</a>, Ty) || <a href="/docs/api/namespaces/llvm/#acd1cd968cb420c82d70926920fcdc7d7">is&#95;contained</a>(<a href="#abf8037dd8ffb10bb4c5fe61c6d0c5c6c">AllS64Vectors</a>, Ty) ||</span></CodeLine>
<Link id="l00356" /><CodeLine lineNumber="356"><span class="doxyHighlight">         <a href="/docs/api/namespaces/llvm/#acd1cd968cb420c82d70926920fcdc7d7">is&#95;contained</a>(<a href="#ada70cb9213ffddaebab099c55f886d19">AllScalarTypes</a>, Ty) || <a href="/docs/api/namespaces/llvm/#acd1cd968cb420c82d70926920fcdc7d7">is&#95;contained</a>(<a href="#a60fec3ee73a795e286972083bf85a68e">AllS16Vectors</a>, Ty);</span></CodeLine>
<Link id="l00357" /><CodeLine lineNumber="357"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00358" /><CodeLine lineNumber="358"></CodeLine>
<Link id="l00359" /><CodeLine lineNumber="359" lineLink="#a6f96e69af9b47cc95fd19cc091b0aea1"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a> <a href="#a8ac13bffc4ec5811abc67aaa4166e9a8">isRegisterClassType</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx) &#123;</span></CodeLine>
<Link id="l00360" /><CodeLine lineNumber="360"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;TypeIdx&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00361" /><CodeLine lineNumber="361"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a8ac13bffc4ec5811abc67aaa4166e9a8">isRegisterClassType</a>(Query.Types&#91;TypeIdx&#93;);</span></CodeLine>
<Link id="l00362" /><CodeLine lineNumber="362"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00363" /><CodeLine lineNumber="363"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00364" /><CodeLine lineNumber="364"></CodeLine>
<Link id="l00365" /><CodeLine lineNumber="365"><span class="doxyHighlightComment">// If we have a truncating store or an extending load with a data size larger</span></CodeLine>
<Link id="l00366" /><CodeLine lineNumber="366"><span class="doxyHighlightComment">// than 32-bits, we need to reduce to a 32-bit type.</span></CodeLine>
<Link id="l00367" /><CodeLine lineNumber="367" lineLink="#ab92c68720091c48aa146f82db0f9ce88"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a652895328c6f5785e94ac8b51b37d63c">LegalityPredicate</a> <a href="#ab92c68720091c48aa146f82db0f9ce88">isWideScalarExtLoadTruncStore</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx) &#123;</span></CodeLine>
<Link id="l00368" /><CodeLine lineNumber="368"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00369" /><CodeLine lineNumber="369"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = Query.Types&#91;TypeIdx&#93;;</span></CodeLine>
<Link id="l00370" /><CodeLine lineNumber="370"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> !Ty.isVector() &amp;&amp; Ty.getSizeInBits() &gt; 32 &amp;&amp;</span></CodeLine>
<Link id="l00371" /><CodeLine lineNumber="371"><span class="doxyHighlight">           Query.MMODescrs&#91;0&#93;.MemoryTy.getSizeInBits() &lt; Ty.getSizeInBits();</span></CodeLine>
<Link id="l00372" /><CodeLine lineNumber="372"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00373" /><CodeLine lineNumber="373"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00374" /><CodeLine lineNumber="374"></CodeLine>
<Link id="l00375" /><CodeLine lineNumber="375"><span class="doxyHighlightComment">// TODO: Should load to s16 be legal? Most loads extend to 32-bits, but we</span></CodeLine>
<Link id="l00376" /><CodeLine lineNumber="376"><span class="doxyHighlightComment">// handle some operations by just promoting the register during</span></CodeLine>
<Link id="l00377" /><CodeLine lineNumber="377"><span class="doxyHighlightComment">// selection. There are also d16 loads on GFX9+ which preserve the high bits.</span></CodeLine>
<Link id="l00378" /><CodeLine lineNumber="378" lineLink="#a807f9ab682878abe0a704736d1f9f298"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="#a807f9ab682878abe0a704736d1f9f298">maxSizeForAddrSpace</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp;ST, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AS,</span></CodeLine>
<Link id="l00379" /><CodeLine lineNumber="379"><span class="doxyHighlight">                                    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsLoad, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsAtomic) &#123;</span></CodeLine>
<Link id="l00380" /><CodeLine lineNumber="380"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (AS) &#123;</span></CodeLine>
<Link id="l00381" /><CodeLine lineNumber="381"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aec164f45437d8827346f2d8ec645479a">AMDGPUAS::PRIVATE&#95;ADDRESS</a>:</span></CodeLine>
<Link id="l00382" /><CodeLine lineNumber="382"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: Private element size.</span></CodeLine>
<Link id="l00383" /><CodeLine lineNumber="383"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ST.enableFlatScratch() ? 128 : 32;</span></CodeLine>
<Link id="l00384" /><CodeLine lineNumber="384"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL&#95;ADDRESS</a>:</span></CodeLine>
<Link id="l00385" /><CodeLine lineNumber="385"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ST.useDS128() ? 128 : 64;</span></CodeLine>
<Link id="l00386" /><CodeLine lineNumber="386"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1abf4559ef958a13c33f6ec7ed13fd44e5">AMDGPUAS::GLOBAL&#95;ADDRESS</a>:</span></CodeLine>
<Link id="l00387" /><CodeLine lineNumber="387"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT&#95;ADDRESS</a>:</span></CodeLine>
<Link id="l00388" /><CodeLine lineNumber="388"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a1caf1e287a5fe7250388d66ed72aa0c1">AMDGPUAS::CONSTANT&#95;ADDRESS&#95;32BIT</a>:</span></CodeLine>
<Link id="l00389" /><CodeLine lineNumber="389"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1af3a547aa91b97183a165b876de8e24d8">AMDGPUAS::BUFFER&#95;RESOURCE</a>:</span></CodeLine>
<Link id="l00390" /><CodeLine lineNumber="390"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Treat constant and global as identical. SMRD loads are sometimes usable for</span></CodeLine>
<Link id="l00391" /><CodeLine lineNumber="391"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// global loads (ideally constant address space should be eliminated)</span></CodeLine>
<Link id="l00392" /><CodeLine lineNumber="392"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// depending on the context. Legality cannot be context dependent, but</span></CodeLine>
<Link id="l00393" /><CodeLine lineNumber="393"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// RegBankSelect can split the load as necessary depending on the pointer</span></CodeLine>
<Link id="l00394" /><CodeLine lineNumber="394"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// register bank/uniformity and if the memory is invariant or not written in a</span></CodeLine>
<Link id="l00395" /><CodeLine lineNumber="395"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// kernel.</span></CodeLine>
<Link id="l00396" /><CodeLine lineNumber="396"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> IsLoad ? 512 : 128;</span></CodeLine>
<Link id="l00397" /><CodeLine lineNumber="397"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00398" /><CodeLine lineNumber="398"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: Flat addresses may contextually need to be split to 32-bit parts</span></CodeLine>
<Link id="l00399" /><CodeLine lineNumber="399"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// if they may alias scratch depending on the subtarget.  This needs to be</span></CodeLine>
<Link id="l00400" /><CodeLine lineNumber="400"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// moved to custom handling to use addressMayBeAccessedAsPrivate</span></CodeLine>
<Link id="l00401" /><CodeLine lineNumber="401"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ST.hasMultiDwordFlatScratchAddressing() || IsAtomic ? 128 : 32;</span></CodeLine>
<Link id="l00402" /><CodeLine lineNumber="402"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00403" /><CodeLine lineNumber="403"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00404" /><CodeLine lineNumber="404"></CodeLine>
<Link id="l00405" /><CodeLine lineNumber="405" lineLink="#a812ebabddd1ad2d8f8bbc6194346e2ed"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a812ebabddd1ad2d8f8bbc6194346e2ed">isLoadStoreSizeLegal</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp;ST,</span></CodeLine>
<Link id="l00406" /><CodeLine lineNumber="406"><span class="doxyHighlight">                                 </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00407" /><CodeLine lineNumber="407"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;;</span></CodeLine>
<Link id="l00408" /><CodeLine lineNumber="408"></CodeLine>
<Link id="l00409" /><CodeLine lineNumber="409"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Handle G&#95;LOAD, G&#95;ZEXTLOAD, G&#95;SEXTLOAD</span></CodeLine>
<Link id="l00410" /><CodeLine lineNumber="410"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsLoad = Query.<a href="/docs/api/structs/llvm/legalityquery/#afd4ab894cdbdc5888a2d10fa5e5f8333">Opcode</a> != AMDGPU::G&#95;STORE;</span></CodeLine>
<Link id="l00411" /><CodeLine lineNumber="411"></CodeLine>
<Link id="l00412" /><CodeLine lineNumber="412"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64mipeepholeopt-cpp/#a9c374320ed4e895f9afa199987182bd2">RegSize</a> = Ty.getSizeInBits();</span></CodeLine>
<Link id="l00413" /><CodeLine lineNumber="413"><span class="doxyHighlight">  uint64&#95;t MemSize = Query.<a href="/docs/api/structs/llvm/legalityquery/#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>&#91;0&#93;.MemoryTy.getSizeInBits();</span></CodeLine>
<Link id="l00414" /><CodeLine lineNumber="414"><span class="doxyHighlight">  uint64&#95;t AlignBits = Query.<a href="/docs/api/structs/llvm/legalityquery/#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>&#91;0&#93;.AlignInBits;</span></CodeLine>
<Link id="l00415" /><CodeLine lineNumber="415"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AS = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;1&#93;.getAddressSpace();</span></CodeLine>
<Link id="l00416" /><CodeLine lineNumber="416"></CodeLine>
<Link id="l00417" /><CodeLine lineNumber="417"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// All of these need to be custom lowered to cast the pointer operand.</span></CodeLine>
<Link id="l00418" /><CodeLine lineNumber="418"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a1caf1e287a5fe7250388d66ed72aa0c1">AMDGPUAS::CONSTANT&#95;ADDRESS&#95;32BIT</a>)</span></CodeLine>
<Link id="l00419" /><CodeLine lineNumber="419"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00420" /><CodeLine lineNumber="420"></CodeLine>
<Link id="l00421" /><CodeLine lineNumber="421"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Do not handle extending vector loads.</span></CodeLine>
<Link id="l00422" /><CodeLine lineNumber="422"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty.isVector() &amp;&amp; MemSize != <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64mipeepholeopt-cpp/#a9c374320ed4e895f9afa199987182bd2">RegSize</a>)</span></CodeLine>
<Link id="l00423" /><CodeLine lineNumber="423"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00424" /><CodeLine lineNumber="424"></CodeLine>
<Link id="l00425" /><CodeLine lineNumber="425"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: We should be able to widen loads if the alignment is high enough, but</span></CodeLine>
<Link id="l00426" /><CodeLine lineNumber="426"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// we also need to modify the memory access size.</span></CodeLine>
<Link id="l00427" /><CodeLine lineNumber="427"><span class="doxyHighlightPreprocessor">#if 0</span></CodeLine>
<Link id="l00428" /><CodeLine lineNumber="428"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Accept widening loads based on alignment.</span></CodeLine>
<Link id="l00429" /><CodeLine lineNumber="429"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsLoad &amp;&amp; MemSize &lt; <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>)</span></CodeLine>
<Link id="l00430" /><CodeLine lineNumber="430"><span class="doxyHighlight">    MemSize = std::max(MemSize, <a href="/docs/api/structs/llvm/align">Align</a>);</span></CodeLine>
<Link id="l00431" /><CodeLine lineNumber="431"><span class="doxyHighlightPreprocessor">#endif</span></CodeLine>
<Link id="l00432" /><CodeLine lineNumber="432"></CodeLine>
<Link id="l00433" /><CodeLine lineNumber="433"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Only 1-byte and 2-byte to 32-bit extloads are valid.</span></CodeLine>
<Link id="l00434" /><CodeLine lineNumber="434"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MemSize != <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64mipeepholeopt-cpp/#a9c374320ed4e895f9afa199987182bd2">RegSize</a> &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64mipeepholeopt-cpp/#a9c374320ed4e895f9afa199987182bd2">RegSize</a> != 32)</span></CodeLine>
<Link id="l00435" /><CodeLine lineNumber="435"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00436" /><CodeLine lineNumber="436"></CodeLine>
<Link id="l00437" /><CodeLine lineNumber="437"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MemSize &gt; <a href="#a807f9ab682878abe0a704736d1f9f298">maxSizeForAddrSpace</a>(ST, AS, IsLoad,</span></CodeLine>
<Link id="l00438" /><CodeLine lineNumber="438"><span class="doxyHighlight">                                    Query.<a href="/docs/api/structs/llvm/legalityquery/#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>&#91;0&#93;.Ordering !=</span></CodeLine>
<Link id="l00439" /><CodeLine lineNumber="439"><span class="doxyHighlight">                                        <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>))</span></CodeLine>
<Link id="l00440" /><CodeLine lineNumber="440"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00441" /><CodeLine lineNumber="441"></CodeLine>
<Link id="l00442" /><CodeLine lineNumber="442"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (MemSize) &#123;</span></CodeLine>
<Link id="l00443" /><CodeLine lineNumber="443"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 8:</span></CodeLine>
<Link id="l00444" /><CodeLine lineNumber="444"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 16:</span></CodeLine>
<Link id="l00445" /><CodeLine lineNumber="445"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 32:</span></CodeLine>
<Link id="l00446" /><CodeLine lineNumber="446"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 64:</span></CodeLine>
<Link id="l00447" /><CodeLine lineNumber="447"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 128:</span></CodeLine>
<Link id="l00448" /><CodeLine lineNumber="448"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00449" /><CodeLine lineNumber="449"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 96:</span></CodeLine>
<Link id="l00450" /><CodeLine lineNumber="450"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ST.hasDwordx3LoadStores())</span></CodeLine>
<Link id="l00451" /><CodeLine lineNumber="451"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00452" /><CodeLine lineNumber="452"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00453" /><CodeLine lineNumber="453"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 256:</span></CodeLine>
<Link id="l00454" /><CodeLine lineNumber="454"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 512:</span></CodeLine>
<Link id="l00455" /><CodeLine lineNumber="455"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// These may contextually need to be broken down.</span></CodeLine>
<Link id="l00456" /><CodeLine lineNumber="456"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00457" /><CodeLine lineNumber="457"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l00458" /><CodeLine lineNumber="458"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00459" /><CodeLine lineNumber="459"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00460" /><CodeLine lineNumber="460"></CodeLine>
<Link id="l00461" /><CodeLine lineNumber="461"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64mipeepholeopt-cpp/#a9c374320ed4e895f9afa199987182bd2">RegSize</a> &gt;= MemSize);</span></CodeLine>
<Link id="l00462" /><CodeLine lineNumber="462"></CodeLine>
<Link id="l00463" /><CodeLine lineNumber="463"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AlignBits &lt; MemSize) &#123;</span></CodeLine>
<Link id="l00464" /><CodeLine lineNumber="464"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sitargetlowering">SITargetLowering</a> &#42;TLI = ST.getTargetLowering();</span></CodeLine>
<Link id="l00465" /><CodeLine lineNumber="465"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!TLI-&gt;<a href="/docs/api/classes/llvm/sitargetlowering/#a21805127d5ae570ea5776ee098c951f1">allowsMisalignedMemoryAccessesImpl</a>(MemSize, AS,</span></CodeLine>
<Link id="l00466" /><CodeLine lineNumber="466"><span class="doxyHighlight">                                                 <a href="/docs/api/structs/llvm/align">Align</a>(AlignBits / 8)))</span></CodeLine>
<Link id="l00467" /><CodeLine lineNumber="467"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00468" /><CodeLine lineNumber="468"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00469" /><CodeLine lineNumber="469"></CodeLine>
<Link id="l00470" /><CodeLine lineNumber="470"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00471" /><CodeLine lineNumber="471"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00472" /><CodeLine lineNumber="472"></CodeLine>
<Link id="l00473" /><CodeLine lineNumber="473"><span class="doxyHighlightComment">// The newer buffer intrinsic forms take their resource arguments as</span></CodeLine>
<Link id="l00474" /><CodeLine lineNumber="474"><span class="doxyHighlightComment">// pointers in address space 8, aka s128 values. However, in order to not break</span></CodeLine>
<Link id="l00475" /><CodeLine lineNumber="475"><span class="doxyHighlightComment">// SelectionDAG, the underlying operations have to continue to take v4i32</span></CodeLine>
<Link id="l00476" /><CodeLine lineNumber="476"><span class="doxyHighlightComment">// arguments. Therefore, we convert resource pointers - or vectors of them</span></CodeLine>
<Link id="l00477" /><CodeLine lineNumber="477"><span class="doxyHighlightComment">// to integer values here.</span></CodeLine>
<Link id="l00478" /><CodeLine lineNumber="478" lineLink="#abb71b9eb64250d4491336cf106be74eb"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#abb71b9eb64250d4491336cf106be74eb">hasBufferRsrcWorkaround</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty) &#123;</span></CodeLine>
<Link id="l00479" /><CodeLine lineNumber="479"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty.isPointer() &amp;&amp; Ty.getAddressSpace() == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1af3a547aa91b97183a165b876de8e24d8">AMDGPUAS::BUFFER&#95;RESOURCE</a>)</span></CodeLine>
<Link id="l00480" /><CodeLine lineNumber="480"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00481" /><CodeLine lineNumber="481"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty.isVector()) &#123;</span></CodeLine>
<Link id="l00482" /><CodeLine lineNumber="482"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> ElemTy = Ty.getElementType();</span></CodeLine>
<Link id="l00483" /><CodeLine lineNumber="483"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#abb71b9eb64250d4491336cf106be74eb">hasBufferRsrcWorkaround</a>(ElemTy);</span></CodeLine>
<Link id="l00484" /><CodeLine lineNumber="484"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00485" /><CodeLine lineNumber="485"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00486" /><CodeLine lineNumber="486"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00487" /><CodeLine lineNumber="487"></CodeLine>
<Link id="l00488" /><CodeLine lineNumber="488"><span class="doxyHighlightComment">// The current selector can&#39;t handle &lt;6 x s16&gt;, &lt;8 x s16&gt;, s96, s128 etc, so</span></CodeLine>
<Link id="l00489" /><CodeLine lineNumber="489"><span class="doxyHighlightComment">// workaround this. Eventually it should ignore the type for loads and only care</span></CodeLine>
<Link id="l00490" /><CodeLine lineNumber="490"><span class="doxyHighlightComment">// about the size. Return true in cases where we will workaround this for now by</span></CodeLine>
<Link id="l00491" /><CodeLine lineNumber="491"><span class="doxyHighlightComment">// bitcasting.</span></CodeLine>
<Link id="l00492" /><CodeLine lineNumber="492" lineLink="#ac6f0c363a0260f50a2e3dae5b8c00d21"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#ac6f0c363a0260f50a2e3dae5b8c00d21">loadStoreBitcastWorkaround</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty) &#123;</span></CodeLine>
<Link id="l00493" /><CodeLine lineNumber="493"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a051bcca9a10dfdb5c382173aa0d5a860">EnableNewLegality</a>)</span></CodeLine>
<Link id="l00494" /><CodeLine lineNumber="494"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00495" /><CodeLine lineNumber="495"></CodeLine>
<Link id="l00496" /><CodeLine lineNumber="496"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = Ty.getSizeInBits();</span></CodeLine>
<Link id="l00497" /><CodeLine lineNumber="497"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty.isPointerVector())</span></CodeLine>
<Link id="l00498" /><CodeLine lineNumber="498"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00499" /><CodeLine lineNumber="499"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> &lt;= 64)</span></CodeLine>
<Link id="l00500" /><CodeLine lineNumber="500"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00501" /><CodeLine lineNumber="501"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Address space 8 pointers get their own workaround.</span></CodeLine>
<Link id="l00502" /><CodeLine lineNumber="502"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#abb71b9eb64250d4491336cf106be74eb">hasBufferRsrcWorkaround</a>(Ty))</span></CodeLine>
<Link id="l00503" /><CodeLine lineNumber="503"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00504" /><CodeLine lineNumber="504"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Ty.isVector())</span></CodeLine>
<Link id="l00505" /><CodeLine lineNumber="505"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00506" /><CodeLine lineNumber="506"></CodeLine>
<Link id="l00507" /><CodeLine lineNumber="507"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> EltSize = Ty.getScalarSizeInBits();</span></CodeLine>
<Link id="l00508" /><CodeLine lineNumber="508"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> EltSize != 32 &amp;&amp; EltSize != 64;</span></CodeLine>
<Link id="l00509" /><CodeLine lineNumber="509"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00510" /><CodeLine lineNumber="510"></CodeLine>
<Link id="l00511" /><CodeLine lineNumber="511" lineLink="#ad2c8a875d4d2a4e73f7a48e64226b265"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#ad2c8a875d4d2a4e73f7a48e64226b265">isLoadStoreLegal</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp;ST, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l00512" /><CodeLine lineNumber="512"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;;</span></CodeLine>
<Link id="l00513" /><CodeLine lineNumber="513"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(Ty) &amp;&amp; <a href="#a812ebabddd1ad2d8f8bbc6194346e2ed">isLoadStoreSizeLegal</a>(ST, Query) &amp;&amp;</span></CodeLine>
<Link id="l00514" /><CodeLine lineNumber="514"><span class="doxyHighlight">         !<a href="#abb71b9eb64250d4491336cf106be74eb">hasBufferRsrcWorkaround</a>(Ty) &amp;&amp; !<a href="#ac6f0c363a0260f50a2e3dae5b8c00d21">loadStoreBitcastWorkaround</a>(Ty);</span></CodeLine>
<Link id="l00515" /><CodeLine lineNumber="515"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00516" /><CodeLine lineNumber="516"></CodeLine>
<Link id="l00517" /><CodeLine lineNumber="517"><span class="doxyHighlightComment">/// Return true if a load or store of the type should be lowered with a bitcast</span></CodeLine>
<Link id="l00518" /><CodeLine lineNumber="518"><span class="doxyHighlightComment">/// to a different type.</span></CodeLine>
<Link id="l00519" /><CodeLine lineNumber="519" lineLink="#a1c42298ffb49a95c87577d3e5de46aea"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a1c42298ffb49a95c87577d3e5de46aea">shouldBitcastLoadStoreType</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp;ST, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty,</span></CodeLine>
<Link id="l00520" /><CodeLine lineNumber="520"><span class="doxyHighlight">                                       </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> MemTy) &#123;</span></CodeLine>
<Link id="l00521" /><CodeLine lineNumber="521"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> MemSizeInBits = MemTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</span></CodeLine>
<Link id="l00522" /><CodeLine lineNumber="522"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = Ty.getSizeInBits();</span></CodeLine>
<Link id="l00523" /><CodeLine lineNumber="523"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> != MemSizeInBits)</span></CodeLine>
<Link id="l00524" /><CodeLine lineNumber="524"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> &lt;= 32 &amp;&amp; Ty.isVector();</span></CodeLine>
<Link id="l00525" /><CodeLine lineNumber="525"></CodeLine>
<Link id="l00526" /><CodeLine lineNumber="526"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#ac6f0c363a0260f50a2e3dae5b8c00d21">loadStoreBitcastWorkaround</a>(Ty) &amp;&amp; <a href="#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(Ty))</span></CodeLine>
<Link id="l00527" /><CodeLine lineNumber="527"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00528" /><CodeLine lineNumber="528"></CodeLine>
<Link id="l00529" /><CodeLine lineNumber="529"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Don&#39;t try to handle bitcasting vector ext loads for now.</span></CodeLine>
<Link id="l00530" /><CodeLine lineNumber="530"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Ty.isVector() &amp;&amp; (!MemTy.<a href="/docs/api/classes/llvm/llt/#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() || MemTy == Ty) &amp;&amp;</span></CodeLine>
<Link id="l00531" /><CodeLine lineNumber="531"><span class="doxyHighlight">         (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> &lt;= 32 || <a href="#a3986167503ccf79606f2249e660c9961">isRegisterSize</a>(<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>)) &amp;&amp;</span></CodeLine>
<Link id="l00532" /><CodeLine lineNumber="532"><span class="doxyHighlight">         !<a href="#a31648fb7411d04ec274b46d8dd635564">isRegisterVectorElementType</a>(Ty.getElementType());</span></CodeLine>
<Link id="l00533" /><CodeLine lineNumber="533"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00534" /><CodeLine lineNumber="534"></CodeLine>
<Link id="l00535" /><CodeLine lineNumber="535"><span class="doxyHighlightComment">/// Return true if we should legalize a load by widening an odd sized memory</span></CodeLine>
<Link id="l00536" /><CodeLine lineNumber="536"><span class="doxyHighlightComment">/// access up to the alignment. Note this case when the memory access itself</span></CodeLine>
<Link id="l00537" /><CodeLine lineNumber="537"><span class="doxyHighlightComment">/// changes, not the size of the result register.</span></CodeLine>
<Link id="l00538" /><CodeLine lineNumber="538" lineLink="#a2d595a51e66614b8adb83efbc8114401"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a2d595a51e66614b8adb83efbc8114401">shouldWidenLoad</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp;ST, <a href="/docs/api/classes/llvm/llt">LLT</a> MemoryTy,</span></CodeLine>
<Link id="l00539" /><CodeLine lineNumber="539"><span class="doxyHighlight">                            uint64&#95;t AlignInBits, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AddrSpace,</span></CodeLine>
<Link id="l00540" /><CodeLine lineNumber="540"><span class="doxyHighlight">                            </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Opcode) &#123;</span></CodeLine>
<Link id="l00541" /><CodeLine lineNumber="541"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SizeInBits = MemoryTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</span></CodeLine>
<Link id="l00542" /><CodeLine lineNumber="542"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We don&#39;t want to widen cases that are naturally legal.</span></CodeLine>
<Link id="l00543" /><CodeLine lineNumber="543"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(SizeInBits))</span></CodeLine>
<Link id="l00544" /><CodeLine lineNumber="544"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00545" /><CodeLine lineNumber="545"></CodeLine>
<Link id="l00546" /><CodeLine lineNumber="546"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If we have 96-bit memory operations, we shouldn&#39;t touch them. Note we may</span></CodeLine>
<Link id="l00547" /><CodeLine lineNumber="547"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// end up widening these for a scalar load during RegBankSelect, if we don&#39;t</span></CodeLine>
<Link id="l00548" /><CodeLine lineNumber="548"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// have 96-bit scalar loads.</span></CodeLine>
<Link id="l00549" /><CodeLine lineNumber="549"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SizeInBits == 96 &amp;&amp; ST.hasDwordx3LoadStores())</span></CodeLine>
<Link id="l00550" /><CodeLine lineNumber="550"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00551" /><CodeLine lineNumber="551"></CodeLine>
<Link id="l00552" /><CodeLine lineNumber="552"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SizeInBits &gt;= <a href="#a807f9ab682878abe0a704736d1f9f298">maxSizeForAddrSpace</a>(ST, AddrSpace, Opcode, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">))</span></CodeLine>
<Link id="l00553" /><CodeLine lineNumber="553"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00554" /><CodeLine lineNumber="554"></CodeLine>
<Link id="l00555" /><CodeLine lineNumber="555"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// A load is known dereferenceable up to the alignment, so it&#39;s legal to widen</span></CodeLine>
<Link id="l00556" /><CodeLine lineNumber="556"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// to it.</span></CodeLine>
<Link id="l00557" /><CodeLine lineNumber="557"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l00558" /><CodeLine lineNumber="558"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Could check dereferenceable for less aligned cases.</span></CodeLine>
<Link id="l00559" /><CodeLine lineNumber="559"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> RoundedSize = <a href="/docs/api/namespaces/llvm/#afb65eef479f0473d0fe1666b80155237">NextPowerOf2</a>(SizeInBits);</span></CodeLine>
<Link id="l00560" /><CodeLine lineNumber="560"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AlignInBits &lt; RoundedSize)</span></CodeLine>
<Link id="l00561" /><CodeLine lineNumber="561"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00562" /><CodeLine lineNumber="562"></CodeLine>
<Link id="l00563" /><CodeLine lineNumber="563"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Do not widen if it would introduce a slow unaligned load.</span></CodeLine>
<Link id="l00564" /><CodeLine lineNumber="564"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sitargetlowering">SITargetLowering</a> &#42;TLI = ST.getTargetLowering();</span></CodeLine>
<Link id="l00565" /><CodeLine lineNumber="565"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cabc8e2ee40a84687a9e12fd08784b87ba">Fast</a> = 0;</span></CodeLine>
<Link id="l00566" /><CodeLine lineNumber="566"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> TLI-&gt;<a href="/docs/api/classes/llvm/sitargetlowering/#a21805127d5ae570ea5776ee098c951f1">allowsMisalignedMemoryAccessesImpl</a>(</span></CodeLine>
<Link id="l00567" /><CodeLine lineNumber="567"><span class="doxyHighlight">             RoundedSize, AddrSpace, <a href="/docs/api/structs/llvm/align">Align</a>(AlignInBits / 8),</span></CodeLine>
<Link id="l00568" /><CodeLine lineNumber="568"><span class="doxyHighlight">             <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a>, &amp;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cabc8e2ee40a84687a9e12fd08784b87ba">Fast</a>) &amp;&amp;</span></CodeLine>
<Link id="l00569" /><CodeLine lineNumber="569"><span class="doxyHighlight">         <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cabc8e2ee40a84687a9e12fd08784b87ba">Fast</a>;</span></CodeLine>
<Link id="l00570" /><CodeLine lineNumber="570"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00571" /><CodeLine lineNumber="571"></CodeLine>
<Link id="l00572" /><CodeLine lineNumber="572" lineLink="#a9ae9993cc0e622c6d10e6e9a2aad0a05"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a2d595a51e66614b8adb83efbc8114401">shouldWidenLoad</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp;ST, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query,</span></CodeLine>
<Link id="l00573" /><CodeLine lineNumber="573"><span class="doxyHighlight">                            </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Opcode) &#123;</span></CodeLine>
<Link id="l00574" /><CodeLine lineNumber="574"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Query.<a href="/docs/api/structs/llvm/legalityquery/#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>&#91;0&#93;.Ordering != <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>)</span></CodeLine>
<Link id="l00575" /><CodeLine lineNumber="575"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00576" /><CodeLine lineNumber="576"></CodeLine>
<Link id="l00577" /><CodeLine lineNumber="577"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a2d595a51e66614b8adb83efbc8114401">shouldWidenLoad</a>(ST, Query.<a href="/docs/api/structs/llvm/legalityquery/#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>&#91;0&#93;.MemoryTy,</span></CodeLine>
<Link id="l00578" /><CodeLine lineNumber="578"><span class="doxyHighlight">                         Query.<a href="/docs/api/structs/llvm/legalityquery/#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>&#91;0&#93;.AlignInBits,</span></CodeLine>
<Link id="l00579" /><CodeLine lineNumber="579"><span class="doxyHighlight">                         Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;1&#93;.getAddressSpace(), Opcode);</span></CodeLine>
<Link id="l00580" /><CodeLine lineNumber="580"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00581" /><CodeLine lineNumber="581"></CodeLine>
<Link id="l00582" /><CodeLine lineNumber="582"><span class="doxyHighlightComment">/// Mutates IR (typicaly a load instruction) to use a &lt;4 x s32&gt; as the initial</span></CodeLine>
<Link id="l00583" /><CodeLine lineNumber="583"><span class="doxyHighlightComment">/// type of the operand &#96;idx&#96; and then to transform it to a &#96;p8&#96; via bitcasts</span></CodeLine>
<Link id="l00584" /><CodeLine lineNumber="584"><span class="doxyHighlightComment">/// and inttoptr. In addition, handle vectors of p8. Returns the new type.</span></CodeLine>
<Link id="l00585" /><CodeLine lineNumber="585" lineLink="#a78249707a06ea5161d8c6bbb442ea46c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a78249707a06ea5161d8c6bbb442ea46c">castBufferRsrcFromV4I32</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l00586" /><CodeLine lineNumber="586"><span class="doxyHighlight">                                   <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Idx) &#123;</span></CodeLine>
<Link id="l00587" /><CodeLine lineNumber="587"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;MO = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(Idx);</span></CodeLine>
<Link id="l00588" /><CodeLine lineNumber="588"></CodeLine>
<Link id="l00589" /><CodeLine lineNumber="589"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="/docs/api/namespaces/llvm/#a41f670c80fbc831d70a472b03c4739ae">PointerTy</a> = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(MO.<a href="/docs/api/classes/llvm/machineoperand/#ac0035d7c1c860501c877c20e6e93297b">getReg</a>());</span></CodeLine>
<Link id="l00590" /><CodeLine lineNumber="590"></CodeLine>
<Link id="l00591" /><CodeLine lineNumber="591"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Paranoidly prevent us from doing this multiple times.</span></CodeLine>
<Link id="l00592" /><CodeLine lineNumber="592"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#abb71b9eb64250d4491336cf106be74eb">hasBufferRsrcWorkaround</a>(<a href="/docs/api/namespaces/llvm/#a41f670c80fbc831d70a472b03c4739ae">PointerTy</a>))</span></CodeLine>
<Link id="l00593" /><CodeLine lineNumber="593"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a41f670c80fbc831d70a472b03c4739ae">PointerTy</a>;</span></CodeLine>
<Link id="l00594" /><CodeLine lineNumber="594"></CodeLine>
<Link id="l00595" /><CodeLine lineNumber="595"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> ScalarTy = <a href="#a0440dee786271aa77b3f640b1c63363c">getBufferRsrcScalarType</a>(<a href="/docs/api/namespaces/llvm/#a41f670c80fbc831d70a472b03c4739ae">PointerTy</a>);</span></CodeLine>
<Link id="l00596" /><CodeLine lineNumber="596"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> VectorTy = <a href="#a64443e60c47deb77ad3bb491d2da3c5f">getBufferRsrcRegisterType</a>(<a href="/docs/api/namespaces/llvm/#a41f670c80fbc831d70a472b03c4739ae">PointerTy</a>);</span></CodeLine>
<Link id="l00597" /><CodeLine lineNumber="597"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#a41f670c80fbc831d70a472b03c4739ae">PointerTy</a>.isVector()) &#123;</span></CodeLine>
<Link id="l00598" /><CodeLine lineNumber="598"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Happy path: (4 x s32) -&gt; (s32, s32, s32, s32) -&gt; (p8)</span></CodeLine>
<Link id="l00599" /><CodeLine lineNumber="599"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumParts = <a href="/docs/api/namespaces/llvm/#a41f670c80fbc831d70a472b03c4739ae">PointerTy</a>.getSizeInBits() / 32;</span></CodeLine>
<Link id="l00600" /><CodeLine lineNumber="600"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l00601" /><CodeLine lineNumber="601"></CodeLine>
<Link id="l00602" /><CodeLine lineNumber="602"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> VectorReg = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(VectorTy);</span></CodeLine>
<Link id="l00603" /><CodeLine lineNumber="603"><span class="doxyHighlight">    std::array&lt;Register, 4&gt; VectorElems;</span></CodeLine>
<Link id="l00604" /><CodeLine lineNumber="604"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.setInsertPt(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMBB(), ++<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getInsertPt());</span></CodeLine>
<Link id="l00605" /><CodeLine lineNumber="605"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; NumParts; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</span></CodeLine>
<Link id="l00606" /><CodeLine lineNumber="606"><span class="doxyHighlight">      VectorElems&#91;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>&#93; =</span></CodeLine>
<Link id="l00607" /><CodeLine lineNumber="607"><span class="doxyHighlight">          <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildExtractVectorElementConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, VectorReg, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>).getReg(0);</span></CodeLine>
<Link id="l00608" /><CodeLine lineNumber="608"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeValues(MO, VectorElems);</span></CodeLine>
<Link id="l00609" /><CodeLine lineNumber="609"><span class="doxyHighlight">    MO.<a href="/docs/api/classes/llvm/machineoperand/#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(VectorReg);</span></CodeLine>
<Link id="l00610" /><CodeLine lineNumber="610"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> VectorTy;</span></CodeLine>
<Link id="l00611" /><CodeLine lineNumber="611"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00612" /><CodeLine lineNumber="612"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> BitcastReg = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(VectorTy);</span></CodeLine>
<Link id="l00613" /><CodeLine lineNumber="613"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.setInsertPt(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMBB(), ++<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getInsertPt());</span></CodeLine>
<Link id="l00614" /><CodeLine lineNumber="614"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Scalar = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBitcast(ScalarTy, BitcastReg);</span></CodeLine>
<Link id="l00615" /><CodeLine lineNumber="615"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntToPtr(MO, Scalar);</span></CodeLine>
<Link id="l00616" /><CodeLine lineNumber="616"><span class="doxyHighlight">  MO.<a href="/docs/api/classes/llvm/machineoperand/#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(BitcastReg);</span></CodeLine>
<Link id="l00617" /><CodeLine lineNumber="617"></CodeLine>
<Link id="l00618" /><CodeLine lineNumber="618"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> VectorTy;</span></CodeLine>
<Link id="l00619" /><CodeLine lineNumber="619"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00620" /><CodeLine lineNumber="620"></CodeLine>
<Link id="l00621" /><CodeLine lineNumber="621"><span class="doxyHighlightComment">/// Cast a buffer resource (an address space 8 pointer) into a 4xi32, which is</span></CodeLine>
<Link id="l00622" /><CodeLine lineNumber="622"><span class="doxyHighlightComment">/// the form in which the value must be in order to be passed to the low-level</span></CodeLine>
<Link id="l00623" /><CodeLine lineNumber="623"><span class="doxyHighlightComment">/// representations used for MUBUF/MTBUF intrinsics. This is a hack, which is</span></CodeLine>
<Link id="l00624" /><CodeLine lineNumber="624"><span class="doxyHighlightComment">/// needed in order to account for the fact that we can&#39;t define a register</span></CodeLine>
<Link id="l00625" /><CodeLine lineNumber="625"><span class="doxyHighlightComment">/// class for s128 without breaking SelectionDAG.</span></CodeLine>
<Link id="l00626" /><CodeLine lineNumber="626" lineLink="#a5a32fa3ab512ce8c3afa4e68c2b56765"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/register">Register</a> <a href="#a5a32fa3ab512ce8c3afa4e68c2b56765">castBufferRsrcToV4I32</a>(<a href="/docs/api/classes/llvm/register">Register</a> Pointer, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l00627" /><CodeLine lineNumber="627"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI();</span></CodeLine>
<Link id="l00628" /><CodeLine lineNumber="628"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="/docs/api/namespaces/llvm/#a41f670c80fbc831d70a472b03c4739ae">PointerTy</a> = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Pointer);</span></CodeLine>
<Link id="l00629" /><CodeLine lineNumber="629"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> ScalarTy = <a href="#a0440dee786271aa77b3f640b1c63363c">getBufferRsrcScalarType</a>(<a href="/docs/api/namespaces/llvm/#a41f670c80fbc831d70a472b03c4739ae">PointerTy</a>);</span></CodeLine>
<Link id="l00630" /><CodeLine lineNumber="630"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> VectorTy = <a href="#a64443e60c47deb77ad3bb491d2da3c5f">getBufferRsrcRegisterType</a>(<a href="/docs/api/namespaces/llvm/#a41f670c80fbc831d70a472b03c4739ae">PointerTy</a>);</span></CodeLine>
<Link id="l00631" /><CodeLine lineNumber="631"></CodeLine>
<Link id="l00632" /><CodeLine lineNumber="632"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#a41f670c80fbc831d70a472b03c4739ae">PointerTy</a>.isVector()) &#123;</span></CodeLine>
<Link id="l00633" /><CodeLine lineNumber="633"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Special case: p8 -&gt; (s32, s32, s32, s32) -&gt; (4xs32)</span></CodeLine>
<Link id="l00634" /><CodeLine lineNumber="634"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Register, 4&gt;</a> PointerParts;</span></CodeLine>
<Link id="l00635" /><CodeLine lineNumber="635"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumParts = <a href="/docs/api/namespaces/llvm/#a41f670c80fbc831d70a472b03c4739ae">PointerTy</a>.getSizeInBits() / 32;</span></CodeLine>
<Link id="l00636" /><CodeLine lineNumber="636"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerged = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32), Pointer);</span></CodeLine>
<Link id="l00637" /><CodeLine lineNumber="637"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; NumParts; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</span></CodeLine>
<Link id="l00638" /><CodeLine lineNumber="638"><span class="doxyHighlight">      PointerParts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Unmerged.getReg(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l00639" /><CodeLine lineNumber="639"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBuildVector(VectorTy, PointerParts).getReg(0);</span></CodeLine>
<Link id="l00640" /><CodeLine lineNumber="640"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00641" /><CodeLine lineNumber="641"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Scalar = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildPtrToInt(ScalarTy, Pointer).getReg(0);</span></CodeLine>
<Link id="l00642" /><CodeLine lineNumber="642"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBitcast(VectorTy, Scalar).getReg(0);</span></CodeLine>
<Link id="l00643" /><CodeLine lineNumber="643"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00644" /><CodeLine lineNumber="644"></CodeLine>
<Link id="l00645" /><CodeLine lineNumber="645" lineLink="#a9d84441ae7638d9c27873f5a3810cb88"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="#a9d84441ae7638d9c27873f5a3810cb88">castBufferRsrcArgToV4I32</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l00646" /><CodeLine lineNumber="646"><span class="doxyHighlight">                                     </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Idx) &#123;</span></CodeLine>
<Link id="l00647" /><CodeLine lineNumber="647"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;MO = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(Idx);</span></CodeLine>
<Link id="l00648" /><CodeLine lineNumber="648"></CodeLine>
<Link id="l00649" /><CodeLine lineNumber="649"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="/docs/api/namespaces/llvm/#a41f670c80fbc831d70a472b03c4739ae">PointerTy</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;getType(MO.<a href="/docs/api/classes/llvm/machineoperand/#ac0035d7c1c860501c877c20e6e93297b">getReg</a>());</span></CodeLine>
<Link id="l00650" /><CodeLine lineNumber="650"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Paranoidly prevent us from doing this multiple times.</span></CodeLine>
<Link id="l00651" /><CodeLine lineNumber="651"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#abb71b9eb64250d4491336cf106be74eb">hasBufferRsrcWorkaround</a>(<a href="/docs/api/namespaces/llvm/#a41f670c80fbc831d70a472b03c4739ae">PointerTy</a>))</span></CodeLine>
<Link id="l00652" /><CodeLine lineNumber="652"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l00653" /><CodeLine lineNumber="653"><span class="doxyHighlight">  MO.<a href="/docs/api/classes/llvm/machineoperand/#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(<a href="#a5a32fa3ab512ce8c3afa4e68c2b56765">castBufferRsrcToV4I32</a>(MO.<a href="/docs/api/classes/llvm/machineoperand/#ac0035d7c1c860501c877c20e6e93297b">getReg</a>(), <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>));</span></CodeLine>
<Link id="l00654" /><CodeLine lineNumber="654"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l00655" /><CodeLine lineNumber="655"></CodeLine>
<Link id="l00656" /><CodeLine lineNumber="656" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a44a4d4c034685aa34a4e8f62b0976e6c"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a44a4d4c034685aa34a4e8f62b0976e6c">AMDGPULegalizerInfo::AMDGPULegalizerInfo</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp;ST&#95;,</span></CodeLine>
<Link id="l00657" /><CodeLine lineNumber="657"><span class="doxyHighlight">                                         </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/gcntargetmachine">GCNTargetMachine</a> &amp;TM)</span></CodeLine>
<Link id="l00658" /><CodeLine lineNumber="658"><span class="doxyHighlight">  :  ST(ST&#95;) &#123;</span></CodeLine>
<Link id="l00659" /><CodeLine lineNumber="659"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using namespace </span><span class="doxyHighlight"><a href="/docs/api/namespaces/llvm/targetopcode">TargetOpcode</a>;</span></CodeLine>
<Link id="l00660" /><CodeLine lineNumber="660"></CodeLine>
<Link id="l00661" /><CodeLine lineNumber="661"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> GetAddrSpacePtr = &#91;&amp;TM&#93;(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AS) &#123;</span></CodeLine>
<Link id="l00662" /><CodeLine lineNumber="662"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt/#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(AS, TM.getPointerSizeInBits(AS));</span></CodeLine>
<Link id="l00663" /><CodeLine lineNumber="663"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00664" /><CodeLine lineNumber="664"></CodeLine>
<Link id="l00665" /><CodeLine lineNumber="665"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> GlobalPtr = GetAddrSpacePtr(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1abf4559ef958a13c33f6ec7ed13fd44e5">AMDGPUAS::GLOBAL&#95;ADDRESS</a>);</span></CodeLine>
<Link id="l00666" /><CodeLine lineNumber="666"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> ConstantPtr = GetAddrSpacePtr(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT&#95;ADDRESS</a>);</span></CodeLine>
<Link id="l00667" /><CodeLine lineNumber="667"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Constant32Ptr = GetAddrSpacePtr(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a1caf1e287a5fe7250388d66ed72aa0c1">AMDGPUAS::CONSTANT&#95;ADDRESS&#95;32BIT</a>);</span></CodeLine>
<Link id="l00668" /><CodeLine lineNumber="668"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> LocalPtr = GetAddrSpacePtr(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL&#95;ADDRESS</a>);</span></CodeLine>
<Link id="l00669" /><CodeLine lineNumber="669"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> RegionPtr = GetAddrSpacePtr(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a5b71ba6fa435ec288aba849e113721a7">AMDGPUAS::REGION&#95;ADDRESS</a>);</span></CodeLine>
<Link id="l00670" /><CodeLine lineNumber="670"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> FlatPtr = GetAddrSpacePtr(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aaa1e27e4fc68e5706a4b7bbaed447c14">AMDGPUAS::FLAT&#95;ADDRESS</a>);</span></CodeLine>
<Link id="l00671" /><CodeLine lineNumber="671"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> PrivatePtr = GetAddrSpacePtr(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aec164f45437d8827346f2d8ec645479a">AMDGPUAS::PRIVATE&#95;ADDRESS</a>);</span></CodeLine>
<Link id="l00672" /><CodeLine lineNumber="672"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> BufferFatPtr = GetAddrSpacePtr(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1ae0523ec09f17ea21ac251db04f249f13">AMDGPUAS::BUFFER&#95;FAT&#95;POINTER</a>);</span></CodeLine>
<Link id="l00673" /><CodeLine lineNumber="673"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> RsrcPtr = GetAddrSpacePtr(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1af3a547aa91b97183a165b876de8e24d8">AMDGPUAS::BUFFER&#95;RESOURCE</a>);</span></CodeLine>
<Link id="l00674" /><CodeLine lineNumber="674"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> BufferStridedPtr =</span></CodeLine>
<Link id="l00675" /><CodeLine lineNumber="675"><span class="doxyHighlight">      GetAddrSpacePtr(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a3f428ecb6bd1846dcc64d491627bf34c">AMDGPUAS::BUFFER&#95;STRIDED&#95;POINTER</a>);</span></CodeLine>
<Link id="l00676" /><CodeLine lineNumber="676"></CodeLine>
<Link id="l00677" /><CodeLine lineNumber="677"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> CodePtr = FlatPtr;</span></CodeLine>
<Link id="l00678" /><CodeLine lineNumber="678"></CodeLine>
<Link id="l00679" /><CodeLine lineNumber="679"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::initializer&#95;list&lt;LLT&gt; AddrSpaces64 = &#123;</span></CodeLine>
<Link id="l00680" /><CodeLine lineNumber="680"><span class="doxyHighlight">    GlobalPtr, ConstantPtr, FlatPtr</span></CodeLine>
<Link id="l00681" /><CodeLine lineNumber="681"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00682" /><CodeLine lineNumber="682"></CodeLine>
<Link id="l00683" /><CodeLine lineNumber="683"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::initializer&#95;list&lt;LLT&gt; AddrSpaces32 = &#123;</span></CodeLine>
<Link id="l00684" /><CodeLine lineNumber="684"><span class="doxyHighlight">    LocalPtr, PrivatePtr, Constant32Ptr, RegionPtr</span></CodeLine>
<Link id="l00685" /><CodeLine lineNumber="685"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00686" /><CodeLine lineNumber="686"></CodeLine>
<Link id="l00687" /><CodeLine lineNumber="687"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::initializer&#95;list&lt;LLT&gt; AddrSpaces128 = &#123;RsrcPtr&#125;;</span></CodeLine>
<Link id="l00688" /><CodeLine lineNumber="688"></CodeLine>
<Link id="l00689" /><CodeLine lineNumber="689"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::initializer&#95;list&lt;LLT&gt; FPTypesBase = &#123;</span></CodeLine>
<Link id="l00690" /><CodeLine lineNumber="690"><span class="doxyHighlight">    <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a></span></CodeLine>
<Link id="l00691" /><CodeLine lineNumber="691"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00692" /><CodeLine lineNumber="692"></CodeLine>
<Link id="l00693" /><CodeLine lineNumber="693"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::initializer&#95;list&lt;LLT&gt; FPTypes16 = &#123;</span></CodeLine>
<Link id="l00694" /><CodeLine lineNumber="694"><span class="doxyHighlight">    <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a></span></CodeLine>
<Link id="l00695" /><CodeLine lineNumber="695"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00696" /><CodeLine lineNumber="696"></CodeLine>
<Link id="l00697" /><CodeLine lineNumber="697"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> std::initializer&#95;list&lt;LLT&gt; FPTypesPK16 = &#123;</span></CodeLine>
<Link id="l00698" /><CodeLine lineNumber="698"><span class="doxyHighlight">    <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a></span></CodeLine>
<Link id="l00699" /><CodeLine lineNumber="699"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l00700" /><CodeLine lineNumber="700"></CodeLine>
<Link id="l00701" /><CodeLine lineNumber="701"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> MinScalarFPTy = ST.has16BitInsts() ? <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a> : <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>;</span></CodeLine>
<Link id="l00702" /><CodeLine lineNumber="702"></CodeLine>
<Link id="l00703" /><CodeLine lineNumber="703"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// s1 for VCC branches, s32 for SCC branches.</span></CodeLine>
<Link id="l00704" /><CodeLine lineNumber="704"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;BRCOND).<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;);</span></CodeLine>
<Link id="l00705" /><CodeLine lineNumber="705"></CodeLine>
<Link id="l00706" /><CodeLine lineNumber="706"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: All multiples of 32, vectors of pointers, all v2s16 pairs, more</span></CodeLine>
<Link id="l00707" /><CodeLine lineNumber="707"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// elements for v3s16</span></CodeLine>
<Link id="l00708" /><CodeLine lineNumber="708"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;PHI)</span></CodeLine>
<Link id="l00709" /><CodeLine lineNumber="709"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a52e4f67b333637f707e6fe59057c7348">V4S16</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, <a href="#a0a82f21bb2863eb65c5f28fb9d34a954">S128</a>, <a href="#ae61a7658a9585eba0ff27a47e0c8aea1">S256</a>&#125;)</span></CodeLine>
<Link id="l00710" /><CodeLine lineNumber="710"><span class="doxyHighlight">      .legalFor(<a href="#a4b69b2b66bc8186c8b21b62fe41d444d">AllS32Vectors</a>)</span></CodeLine>
<Link id="l00711" /><CodeLine lineNumber="711"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(<a href="#abf8037dd8ffb10bb4c5fe61c6d0c5c6c">AllS64Vectors</a>)</span></CodeLine>
<Link id="l00712" /><CodeLine lineNumber="712"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(AddrSpaces64)</span></CodeLine>
<Link id="l00713" /><CodeLine lineNumber="713"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(AddrSpaces32)</span></CodeLine>
<Link id="l00714" /><CodeLine lineNumber="714"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(AddrSpaces128)</span></CodeLine>
<Link id="l00715" /><CodeLine lineNumber="715"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#af6dcfac5a30e4050e3ac204f27062fe6">legalIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a3a162108a998b12a5f51009e450d898c">isPointer</a>(0))</span></CodeLine>
<Link id="l00716" /><CodeLine lineNumber="716"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#ae61a7658a9585eba0ff27a47e0c8aea1">S256</a>)</span></CodeLine>
<Link id="l00717" /><CodeLine lineNumber="717"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0, 32)</span></CodeLine>
<Link id="l00718" /><CodeLine lineNumber="718"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a3b9d49f459b9596f73c60edab6e92673">clampMaxNumElements</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 16)</span></CodeLine>
<Link id="l00719" /><CodeLine lineNumber="719"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6baff39b32f5cec5ea417cba89f077ac">moreElementsIf</a>(<a href="#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(0), <a href="#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(0))</span></CodeLine>
<Link id="l00720" /><CodeLine lineNumber="720"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0);</span></CodeLine>
<Link id="l00721" /><CodeLine lineNumber="721"></CodeLine>
<Link id="l00722" /><CodeLine lineNumber="722"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasVOP3PInsts() &amp;&amp; ST.hasAddNoCarry() &amp;&amp; ST.hasIntClamp()) &#123;</span></CodeLine>
<Link id="l00723" /><CodeLine lineNumber="723"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Full set of gfx9 features.</span></CodeLine>
<Link id="l00724" /><CodeLine lineNumber="724"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasScalarAddSub64()) &#123;</span></CodeLine>
<Link id="l00725" /><CodeLine lineNumber="725"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;ADD, G&#95;SUB&#125;)</span></CodeLine>
<Link id="l00726" /><CodeLine lineNumber="726"><span class="doxyHighlight">          .legalFor(&#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>&#125;)</span></CodeLine>
<Link id="l00727" /><CodeLine lineNumber="727"><span class="doxyHighlight">          .clampMaxNumElementsStrict(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2)</span></CodeLine>
<Link id="l00728" /><CodeLine lineNumber="728"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l00729" /><CodeLine lineNumber="729"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#a009564405d1037574152ee039cd04b9f">minScalar</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)</span></CodeLine>
<Link id="l00730" /><CodeLine lineNumber="730"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#afde49505d22ecf8f8b01f47f6eaa0299">widenScalarToNextMultipleOf</a>(0, 32)</span></CodeLine>
<Link id="l00731" /><CodeLine lineNumber="731"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#a33e181da566d1ebb7556f172888c3b92">maxScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l00732" /><CodeLine lineNumber="732"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00733" /><CodeLine lineNumber="733"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;ADD, G&#95;SUB&#125;)</span></CodeLine>
<Link id="l00734" /><CodeLine lineNumber="734"><span class="doxyHighlight">          .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>&#125;)</span></CodeLine>
<Link id="l00735" /><CodeLine lineNumber="735"><span class="doxyHighlight">          .clampMaxNumElementsStrict(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2)</span></CodeLine>
<Link id="l00736" /><CodeLine lineNumber="736"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l00737" /><CodeLine lineNumber="737"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#a009564405d1037574152ee039cd04b9f">minScalar</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)</span></CodeLine>
<Link id="l00738" /><CodeLine lineNumber="738"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#afde49505d22ecf8f8b01f47f6eaa0299">widenScalarToNextMultipleOf</a>(0, 32)</span></CodeLine>
<Link id="l00739" /><CodeLine lineNumber="739"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#a33e181da566d1ebb7556f172888c3b92">maxScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l00740" /><CodeLine lineNumber="740"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00741" /><CodeLine lineNumber="741"></CodeLine>
<Link id="l00742" /><CodeLine lineNumber="742"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasScalarSMulU64()) &#123;</span></CodeLine>
<Link id="l00743" /><CodeLine lineNumber="743"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;MUL)</span></CodeLine>
<Link id="l00744" /><CodeLine lineNumber="744"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>&#125;)</span></CodeLine>
<Link id="l00745" /><CodeLine lineNumber="745"><span class="doxyHighlight">          .clampMaxNumElementsStrict(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2)</span></CodeLine>
<Link id="l00746" /><CodeLine lineNumber="746"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l00747" /><CodeLine lineNumber="747"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#a009564405d1037574152ee039cd04b9f">minScalar</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)</span></CodeLine>
<Link id="l00748" /><CodeLine lineNumber="748"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#afde49505d22ecf8f8b01f47f6eaa0299">widenScalarToNextMultipleOf</a>(0, 32)</span></CodeLine>
<Link id="l00749" /><CodeLine lineNumber="749"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#a80f41417117f537cd147aaee97aecb1e">custom</a>();</span></CodeLine>
<Link id="l00750" /><CodeLine lineNumber="750"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00751" /><CodeLine lineNumber="751"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;MUL)</span></CodeLine>
<Link id="l00752" /><CodeLine lineNumber="752"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>&#125;)</span></CodeLine>
<Link id="l00753" /><CodeLine lineNumber="753"><span class="doxyHighlight">          .clampMaxNumElementsStrict(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2)</span></CodeLine>
<Link id="l00754" /><CodeLine lineNumber="754"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l00755" /><CodeLine lineNumber="755"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#a009564405d1037574152ee039cd04b9f">minScalar</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)</span></CodeLine>
<Link id="l00756" /><CodeLine lineNumber="756"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#afde49505d22ecf8f8b01f47f6eaa0299">widenScalarToNextMultipleOf</a>(0, 32)</span></CodeLine>
<Link id="l00757" /><CodeLine lineNumber="757"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#a80f41417117f537cd147aaee97aecb1e">custom</a>();</span></CodeLine>
<Link id="l00758" /><CodeLine lineNumber="758"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00759" /><CodeLine lineNumber="759"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ST.hasMad64&#95;32());</span></CodeLine>
<Link id="l00760" /><CodeLine lineNumber="760"></CodeLine>
<Link id="l00761" /><CodeLine lineNumber="761"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;UADDSAT, G&#95;USUBSAT, G&#95;SADDSAT, G&#95;SSUBSAT&#125;)</span></CodeLine>
<Link id="l00762" /><CodeLine lineNumber="762"><span class="doxyHighlight">      .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>&#125;) </span><span class="doxyHighlightComment">// Clamp modifier</span></CodeLine>
<Link id="l00763" /><CodeLine lineNumber="763"><span class="doxyHighlight">      .minScalarOrElt(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)</span></CodeLine>
<Link id="l00764" /><CodeLine lineNumber="764"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a875edaec1f61b358e8026a4b50de8ea8">clampMaxNumElementsStrict</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2)</span></CodeLine>
<Link id="l00765" /><CodeLine lineNumber="765"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l00766" /><CodeLine lineNumber="766"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0, 32)</span></CodeLine>
<Link id="l00767" /><CodeLine lineNumber="767"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l00768" /><CodeLine lineNumber="768"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.has16BitInsts()) &#123;</span></CodeLine>
<Link id="l00769" /><CodeLine lineNumber="769"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;ADD, G&#95;SUB&#125;)</span></CodeLine>
<Link id="l00770" /><CodeLine lineNumber="770"><span class="doxyHighlight">      .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;)</span></CodeLine>
<Link id="l00771" /><CodeLine lineNumber="771"><span class="doxyHighlight">      .minScalar(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)</span></CodeLine>
<Link id="l00772" /><CodeLine lineNumber="772"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#afde49505d22ecf8f8b01f47f6eaa0299">widenScalarToNextMultipleOf</a>(0, 32)</span></CodeLine>
<Link id="l00773" /><CodeLine lineNumber="773"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a33e181da566d1ebb7556f172888c3b92">maxScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l00774" /><CodeLine lineNumber="774"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0);</span></CodeLine>
<Link id="l00775" /><CodeLine lineNumber="775"></CodeLine>
<Link id="l00776" /><CodeLine lineNumber="776"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;MUL)</span></CodeLine>
<Link id="l00777" /><CodeLine lineNumber="777"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;)</span></CodeLine>
<Link id="l00778" /><CodeLine lineNumber="778"><span class="doxyHighlight">      .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l00779" /><CodeLine lineNumber="779"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a009564405d1037574152ee039cd04b9f">minScalar</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)</span></CodeLine>
<Link id="l00780" /><CodeLine lineNumber="780"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#afde49505d22ecf8f8b01f47f6eaa0299">widenScalarToNextMultipleOf</a>(0, 32)</span></CodeLine>
<Link id="l00781" /><CodeLine lineNumber="781"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a80f41417117f537cd147aaee97aecb1e">custom</a>();</span></CodeLine>
<Link id="l00782" /><CodeLine lineNumber="782"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ST.hasMad64&#95;32());</span></CodeLine>
<Link id="l00783" /><CodeLine lineNumber="783"></CodeLine>
<Link id="l00784" /><CodeLine lineNumber="784"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Technically the saturating operations require clamp bit support, but this</span></CodeLine>
<Link id="l00785" /><CodeLine lineNumber="785"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// was introduced at the same time as 16-bit operations.</span></CodeLine>
<Link id="l00786" /><CodeLine lineNumber="786"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;UADDSAT, G&#95;USUBSAT&#125;)</span></CodeLine>
<Link id="l00787" /><CodeLine lineNumber="787"><span class="doxyHighlight">      .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;) </span><span class="doxyHighlightComment">// Clamp modifier</span></CodeLine>
<Link id="l00788" /><CodeLine lineNumber="788"><span class="doxyHighlight">      .minScalar(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)</span></CodeLine>
<Link id="l00789" /><CodeLine lineNumber="789"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l00790" /><CodeLine lineNumber="790"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0, 16)</span></CodeLine>
<Link id="l00791" /><CodeLine lineNumber="791"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l00792" /><CodeLine lineNumber="792"></CodeLine>
<Link id="l00793" /><CodeLine lineNumber="793"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We&#39;re just lowering this, but it helps get a better result to try to</span></CodeLine>
<Link id="l00794" /><CodeLine lineNumber="794"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// coerce to the desired type first.</span></CodeLine>
<Link id="l00795" /><CodeLine lineNumber="795"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;SADDSAT, G&#95;SSUBSAT&#125;)</span></CodeLine>
<Link id="l00796" /><CodeLine lineNumber="796"><span class="doxyHighlight">      .minScalar(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)</span></CodeLine>
<Link id="l00797" /><CodeLine lineNumber="797"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l00798" /><CodeLine lineNumber="798"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l00799" /><CodeLine lineNumber="799"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00800" /><CodeLine lineNumber="800"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;ADD, G&#95;SUB&#125;)</span></CodeLine>
<Link id="l00801" /><CodeLine lineNumber="801"><span class="doxyHighlight">      .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l00802" /><CodeLine lineNumber="802"><span class="doxyHighlight">      .widenScalarToNextMultipleOf(0, 32)</span></CodeLine>
<Link id="l00803" /><CodeLine lineNumber="803"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l00804" /><CodeLine lineNumber="804"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0);</span></CodeLine>
<Link id="l00805" /><CodeLine lineNumber="805"></CodeLine>
<Link id="l00806" /><CodeLine lineNumber="806"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a> = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;MUL)</span></CodeLine>
<Link id="l00807" /><CodeLine lineNumber="807"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l00808" /><CodeLine lineNumber="808"><span class="doxyHighlight">      .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l00809" /><CodeLine lineNumber="809"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a009564405d1037574152ee039cd04b9f">minScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l00810" /><CodeLine lineNumber="810"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#afde49505d22ecf8f8b01f47f6eaa0299">widenScalarToNextMultipleOf</a>(0, 32);</span></CodeLine>
<Link id="l00811" /><CodeLine lineNumber="811"></CodeLine>
<Link id="l00812" /><CodeLine lineNumber="812"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasMad64&#95;32())</span></CodeLine>
<Link id="l00813" /><CodeLine lineNumber="813"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>.custom();</span></CodeLine>
<Link id="l00814" /><CodeLine lineNumber="814"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00815" /><CodeLine lineNumber="815"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>.maxScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l00816" /><CodeLine lineNumber="816"></CodeLine>
<Link id="l00817" /><CodeLine lineNumber="817"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasIntClamp()) &#123;</span></CodeLine>
<Link id="l00818" /><CodeLine lineNumber="818"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;UADDSAT, G&#95;USUBSAT&#125;)</span></CodeLine>
<Link id="l00819" /><CodeLine lineNumber="819"><span class="doxyHighlight">        .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;) </span><span class="doxyHighlightComment">// Clamp modifier.</span></CodeLine>
<Link id="l00820" /><CodeLine lineNumber="820"><span class="doxyHighlight">        .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l00821" /><CodeLine lineNumber="821"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#a3453ec1df80a077b489ea76fee965967">minScalarOrElt</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l00822" /><CodeLine lineNumber="822"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l00823" /><CodeLine lineNumber="823"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00824" /><CodeLine lineNumber="824"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Clamp bit support was added in VI, along with 16-bit operations.</span></CodeLine>
<Link id="l00825" /><CodeLine lineNumber="825"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;UADDSAT, G&#95;USUBSAT&#125;)</span></CodeLine>
<Link id="l00826" /><CodeLine lineNumber="826"><span class="doxyHighlight">        .minScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l00827" /><CodeLine lineNumber="827"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l00828" /><CodeLine lineNumber="828"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l00829" /><CodeLine lineNumber="829"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l00830" /><CodeLine lineNumber="830"></CodeLine>
<Link id="l00831" /><CodeLine lineNumber="831"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: DAG expansion gets better results. The widening uses the smaller</span></CodeLine>
<Link id="l00832" /><CodeLine lineNumber="832"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// range values and goes for the min/max lowering directly.</span></CodeLine>
<Link id="l00833" /><CodeLine lineNumber="833"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;SADDSAT, G&#95;SSUBSAT&#125;)</span></CodeLine>
<Link id="l00834" /><CodeLine lineNumber="834"><span class="doxyHighlight">      .minScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l00835" /><CodeLine lineNumber="835"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l00836" /><CodeLine lineNumber="836"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l00837" /><CodeLine lineNumber="837"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00838" /><CodeLine lineNumber="838"></CodeLine>
<Link id="l00839" /><CodeLine lineNumber="839"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</span></CodeLine>
<Link id="l00840" /><CodeLine lineNumber="840"><span class="doxyHighlight">      &#123;G&#95;SDIV, G&#95;UDIV, G&#95;SREM, G&#95;UREM, G&#95;SDIVREM, G&#95;UDIVREM&#125;)</span></CodeLine>
<Link id="l00841" /><CodeLine lineNumber="841"><span class="doxyHighlight">      .customFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;)</span></CodeLine>
<Link id="l00842" /><CodeLine lineNumber="842"><span class="doxyHighlight">      .clampScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l00843" /><CodeLine lineNumber="843"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0, 32)</span></CodeLine>
<Link id="l00844" /><CodeLine lineNumber="844"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0);</span></CodeLine>
<Link id="l00845" /><CodeLine lineNumber="845"></CodeLine>
<Link id="l00846" /><CodeLine lineNumber="846"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Mulh = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;UMULH, G&#95;SMULH&#125;)</span></CodeLine>
<Link id="l00847" /><CodeLine lineNumber="847"><span class="doxyHighlight">                   .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l00848" /><CodeLine lineNumber="848"><span class="doxyHighlight">                   .maxScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l00849" /><CodeLine lineNumber="849"></CodeLine>
<Link id="l00850" /><CodeLine lineNumber="850"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasVOP3PInsts()) &#123;</span></CodeLine>
<Link id="l00851" /><CodeLine lineNumber="851"><span class="doxyHighlight">    Mulh</span></CodeLine>
<Link id="l00852" /><CodeLine lineNumber="852"><span class="doxyHighlight">      .clampMaxNumElements(0, <a href="#af00ba7c018760702ba16a5009cec810c">S8</a>, 2)</span></CodeLine>
<Link id="l00853" /><CodeLine lineNumber="853"><span class="doxyHighlight">      .lowerFor(&#123;<a href="#ab8e5c09740bb85eb6c2d25b534f91570">V2S8</a>&#125;);</span></CodeLine>
<Link id="l00854" /><CodeLine lineNumber="854"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00855" /><CodeLine lineNumber="855"></CodeLine>
<Link id="l00856" /><CodeLine lineNumber="856"><span class="doxyHighlight">  Mulh</span></CodeLine>
<Link id="l00857" /><CodeLine lineNumber="857"><span class="doxyHighlight">    .scalarize(0)</span></CodeLine>
<Link id="l00858" /><CodeLine lineNumber="858"><span class="doxyHighlight">    .lower();</span></CodeLine>
<Link id="l00859" /><CodeLine lineNumber="859"></CodeLine>
<Link id="l00860" /><CodeLine lineNumber="860"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Report legal for any types we can handle anywhere. For the cases only legal</span></CodeLine>
<Link id="l00861" /><CodeLine lineNumber="861"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// on the SALU, RegBankSelect will be able to re-legalize.</span></CodeLine>
<Link id="l00862" /><CodeLine lineNumber="862"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;AND, G&#95;OR, G&#95;XOR&#125;)</span></CodeLine>
<Link id="l00863" /><CodeLine lineNumber="863"><span class="doxyHighlight">    .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, <a href="#a52e4f67b333637f707e6fe59057c7348">V4S16</a>&#125;)</span></CodeLine>
<Link id="l00864" /><CodeLine lineNumber="864"><span class="doxyHighlight">    .clampScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l00865" /><CodeLine lineNumber="865"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a6baff39b32f5cec5ea417cba89f077ac">moreElementsIf</a>(<a href="#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(0), <a href="#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(0))</span></CodeLine>
<Link id="l00866" /><CodeLine lineNumber="866"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a2650717a05ef92e13ecc9d1f290eabd9">fewerElementsIf</a>(<a href="#a2d0beabfcf00e6fd23c97eff8ee516a6">vectorWiderThan</a>(0, 64), <a href="#a3b5805e73f162bbb84584fbc2091806e">fewerEltsToSize64Vector</a>(0))</span></CodeLine>
<Link id="l00867" /><CodeLine lineNumber="867"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0)</span></CodeLine>
<Link id="l00868" /><CodeLine lineNumber="868"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0);</span></CodeLine>
<Link id="l00869" /><CodeLine lineNumber="869"></CodeLine>
<Link id="l00870" /><CodeLine lineNumber="870"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</span></CodeLine>
<Link id="l00871" /><CodeLine lineNumber="871"><span class="doxyHighlight">      &#123;G&#95;UADDO, G&#95;USUBO, G&#95;UADDE, G&#95;SADDE, G&#95;USUBE, G&#95;SSUBE&#125;)</span></CodeLine>
<Link id="l00872" /><CodeLine lineNumber="872"><span class="doxyHighlight">      .legalFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>&#125;, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;&#125;)</span></CodeLine>
<Link id="l00873" /><CodeLine lineNumber="873"><span class="doxyHighlight">      .clampScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l00874" /><CodeLine lineNumber="874"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0);</span></CodeLine>
<Link id="l00875" /><CodeLine lineNumber="875"></CodeLine>
<Link id="l00876" /><CodeLine lineNumber="876"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;BITCAST)</span></CodeLine>
<Link id="l00877" /><CodeLine lineNumber="877"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Don&#39;t worry about the size constraint.</span></CodeLine>
<Link id="l00878" /><CodeLine lineNumber="878"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#af6dcfac5a30e4050e3ac204f27062fe6">legalIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="#a8ac13bffc4ec5811abc67aaa4166e9a8">isRegisterClassType</a>(0), <a href="#a8ac13bffc4ec5811abc67aaa4166e9a8">isRegisterClassType</a>(1)))</span></CodeLine>
<Link id="l00879" /><CodeLine lineNumber="879"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l00880" /><CodeLine lineNumber="880"></CodeLine>
<Link id="l00881" /><CodeLine lineNumber="881"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;CONSTANT)</span></CodeLine>
<Link id="l00882" /><CodeLine lineNumber="882"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, GlobalPtr,</span></CodeLine>
<Link id="l00883" /><CodeLine lineNumber="883"><span class="doxyHighlight">               LocalPtr, ConstantPtr, PrivatePtr, FlatPtr &#125;)</span></CodeLine>
<Link id="l00884" /><CodeLine lineNumber="884"><span class="doxyHighlight">    .legalIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a3a162108a998b12a5f51009e450d898c">isPointer</a>(0))</span></CodeLine>
<Link id="l00885" /><CodeLine lineNumber="885"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l00886" /><CodeLine lineNumber="886"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0);</span></CodeLine>
<Link id="l00887" /><CodeLine lineNumber="887"></CodeLine>
<Link id="l00888" /><CodeLine lineNumber="888"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FCONSTANT)</span></CodeLine>
<Link id="l00889" /><CodeLine lineNumber="889"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;)</span></CodeLine>
<Link id="l00890" /><CodeLine lineNumber="890"><span class="doxyHighlight">    .clampScalar(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>);</span></CodeLine>
<Link id="l00891" /><CodeLine lineNumber="891"></CodeLine>
<Link id="l00892" /><CodeLine lineNumber="892"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;IMPLICIT&#95;DEF, G&#95;FREEZE&#125;)</span></CodeLine>
<Link id="l00893" /><CodeLine lineNumber="893"><span class="doxyHighlight">      .legalIf(<a href="#a8ac13bffc4ec5811abc67aaa4166e9a8">isRegisterClassType</a>(0))</span></CodeLine>
<Link id="l00894" /><CodeLine lineNumber="894"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// s1 and s16 are special cases because they have legal operations on</span></CodeLine>
<Link id="l00895" /><CodeLine lineNumber="895"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// them, but don&#39;t really occupy registers in the normal way.</span></CodeLine>
<Link id="l00896" /><CodeLine lineNumber="896"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;)</span></CodeLine>
<Link id="l00897" /><CodeLine lineNumber="897"><span class="doxyHighlight">      .clampNumElements(0, <a href="#a83756b36d1fca7fb0054ab52622cda67">V16S32</a>, <a href="#a61cf1ca010a7d653f1cf0ddefa7a8e6d">V32S32</a>)</span></CodeLine>
<Link id="l00898" /><CodeLine lineNumber="898"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6baff39b32f5cec5ea417cba89f077ac">moreElementsIf</a>(<a href="#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(0), <a href="#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(0))</span></CodeLine>
<Link id="l00899" /><CodeLine lineNumber="899"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a2660bbe870c09b7a2cc5a24c8bcd97ae">clampScalarOrElt</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#abb0782aaccc0907cc36fe566a642c71b">MaxScalar</a>)</span></CodeLine>
<Link id="l00900" /><CodeLine lineNumber="900"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0, 32)</span></CodeLine>
<Link id="l00901" /><CodeLine lineNumber="901"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a3b9d49f459b9596f73c60edab6e92673">clampMaxNumElements</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 16);</span></CodeLine>
<Link id="l00902" /><CodeLine lineNumber="902"></CodeLine>
<Link id="l00903" /><CodeLine lineNumber="903"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FRAME&#95;INDEX).<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;PrivatePtr&#125;);</span></CodeLine>
<Link id="l00904" /><CodeLine lineNumber="904"></CodeLine>
<Link id="l00905" /><CodeLine lineNumber="905"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If the amount is divergent, we have to do a wave reduction to get the</span></CodeLine>
<Link id="l00906" /><CodeLine lineNumber="906"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// maximum value, so this is expanded during RegBankSelect.</span></CodeLine>
<Link id="l00907" /><CodeLine lineNumber="907"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;DYN&#95;STACKALLOC)</span></CodeLine>
<Link id="l00908" /><CodeLine lineNumber="908"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;&#123;PrivatePtr, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;&#125;);</span></CodeLine>
<Link id="l00909" /><CodeLine lineNumber="909"></CodeLine>
<Link id="l00910" /><CodeLine lineNumber="910"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;STACKSAVE)</span></CodeLine>
<Link id="l00911" /><CodeLine lineNumber="911"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#afc001d042e6a7093a6954b2d9ff18029">customFor</a>(&#123;PrivatePtr&#125;);</span></CodeLine>
<Link id="l00912" /><CodeLine lineNumber="912"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;STACKRESTORE)</span></CodeLine>
<Link id="l00913" /><CodeLine lineNumber="913"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;PrivatePtr&#125;);</span></CodeLine>
<Link id="l00914" /><CodeLine lineNumber="914"></CodeLine>
<Link id="l00915" /><CodeLine lineNumber="915"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;GET&#95;FPENV, G&#95;SET&#95;FPENV&#125;).customFor(&#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;);</span></CodeLine>
<Link id="l00916" /><CodeLine lineNumber="916"></CodeLine>
<Link id="l00917" /><CodeLine lineNumber="917"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;GLOBAL&#95;VALUE)</span></CodeLine>
<Link id="l00918" /><CodeLine lineNumber="918"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#acda429561493e08ee5cef54f26a1224c">customIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ab82dcf447c1a6ace035cab178a049b39">typeIsNot</a>(0, PrivatePtr));</span></CodeLine>
<Link id="l00919" /><CodeLine lineNumber="919"></CodeLine>
<Link id="l00920" /><CodeLine lineNumber="920"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;BLOCK&#95;ADDR).<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;CodePtr&#125;);</span></CodeLine>
<Link id="l00921" /><CodeLine lineNumber="921"></CodeLine>
<Link id="l00922" /><CodeLine lineNumber="922"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;FPOpActions = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</span></CodeLine>
<Link id="l00923" /><CodeLine lineNumber="923"><span class="doxyHighlight">    &#123; G&#95;FADD, G&#95;FMUL, G&#95;FMA, G&#95;FCANONICALIZE,</span></CodeLine>
<Link id="l00924" /><CodeLine lineNumber="924"><span class="doxyHighlight">      G&#95;STRICT&#95;FADD, G&#95;STRICT&#95;FMUL, G&#95;STRICT&#95;FMA&#125;)</span></CodeLine>
<Link id="l00925" /><CodeLine lineNumber="925"><span class="doxyHighlight">    .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;);</span></CodeLine>
<Link id="l00926" /><CodeLine lineNumber="926"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;TrigActions = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;FSIN, G&#95;FCOS&#125;)</span></CodeLine>
<Link id="l00927" /><CodeLine lineNumber="927"><span class="doxyHighlight">    .customFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;);</span></CodeLine>
<Link id="l00928" /><CodeLine lineNumber="928"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;FDIVActions = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FDIV)</span></CodeLine>
<Link id="l00929" /><CodeLine lineNumber="929"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#afc001d042e6a7093a6954b2d9ff18029">customFor</a>(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;);</span></CodeLine>
<Link id="l00930" /><CodeLine lineNumber="930"></CodeLine>
<Link id="l00931" /><CodeLine lineNumber="931"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.has16BitInsts()) &#123;</span></CodeLine>
<Link id="l00932" /><CodeLine lineNumber="932"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasVOP3PInsts())</span></CodeLine>
<Link id="l00933" /><CodeLine lineNumber="933"><span class="doxyHighlight">      FPOpActions.legalFor(&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>&#125;);</span></CodeLine>
<Link id="l00934" /><CodeLine lineNumber="934"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l00935" /><CodeLine lineNumber="935"><span class="doxyHighlight">      FPOpActions.legalFor(&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;);</span></CodeLine>
<Link id="l00936" /><CodeLine lineNumber="936"></CodeLine>
<Link id="l00937" /><CodeLine lineNumber="937"><span class="doxyHighlight">    TrigActions.customFor(&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;);</span></CodeLine>
<Link id="l00938" /><CodeLine lineNumber="938"><span class="doxyHighlight">    FDIVActions.customFor(&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;);</span></CodeLine>
<Link id="l00939" /><CodeLine lineNumber="939"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00940" /><CodeLine lineNumber="940"></CodeLine>
<Link id="l00941" /><CodeLine lineNumber="941"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasPackedFP32Ops()) &#123;</span></CodeLine>
<Link id="l00942" /><CodeLine lineNumber="942"><span class="doxyHighlight">    FPOpActions.legalFor(&#123;<a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a>&#125;);</span></CodeLine>
<Link id="l00943" /><CodeLine lineNumber="943"><span class="doxyHighlight">    FPOpActions.clampMaxNumElementsStrict(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 2);</span></CodeLine>
<Link id="l00944" /><CodeLine lineNumber="944"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00945" /><CodeLine lineNumber="945"></CodeLine>
<Link id="l00946" /><CodeLine lineNumber="946"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;MinNumMaxNum = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;</span></CodeLine>
<Link id="l00947" /><CodeLine lineNumber="947"><span class="doxyHighlight">      G&#95;FMINNUM, G&#95;FMAXNUM, G&#95;FMINNUM&#95;IEEE, G&#95;FMAXNUM&#95;IEEE&#125;);</span></CodeLine>
<Link id="l00948" /><CodeLine lineNumber="948"></CodeLine>
<Link id="l00949" /><CodeLine lineNumber="949"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasVOP3PInsts()) &#123;</span></CodeLine>
<Link id="l00950" /><CodeLine lineNumber="950"><span class="doxyHighlight">    MinNumMaxNum.customFor(FPTypesPK16)</span></CodeLine>
<Link id="l00951" /><CodeLine lineNumber="951"><span class="doxyHighlight">      .moreElementsIf(<a href="#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(0), <a href="#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(0))</span></CodeLine>
<Link id="l00952" /><CodeLine lineNumber="952"><span class="doxyHighlight">      .clampMaxNumElements(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2)</span></CodeLine>
<Link id="l00953" /><CodeLine lineNumber="953"><span class="doxyHighlight">      .clampScalar(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l00954" /><CodeLine lineNumber="954"><span class="doxyHighlight">      .scalarize(0);</span></CodeLine>
<Link id="l00955" /><CodeLine lineNumber="955"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.has16BitInsts()) &#123;</span></CodeLine>
<Link id="l00956" /><CodeLine lineNumber="956"><span class="doxyHighlight">    MinNumMaxNum.customFor(FPTypes16)</span></CodeLine>
<Link id="l00957" /><CodeLine lineNumber="957"><span class="doxyHighlight">      .clampScalar(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l00958" /><CodeLine lineNumber="958"><span class="doxyHighlight">      .scalarize(0);</span></CodeLine>
<Link id="l00959" /><CodeLine lineNumber="959"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l00960" /><CodeLine lineNumber="960"><span class="doxyHighlight">    MinNumMaxNum.customFor(FPTypesBase)</span></CodeLine>
<Link id="l00961" /><CodeLine lineNumber="961"><span class="doxyHighlight">      .clampScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l00962" /><CodeLine lineNumber="962"><span class="doxyHighlight">      .scalarize(0);</span></CodeLine>
<Link id="l00963" /><CodeLine lineNumber="963"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l00964" /><CodeLine lineNumber="964"></CodeLine>
<Link id="l00965" /><CodeLine lineNumber="965"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasVOP3PInsts())</span></CodeLine>
<Link id="l00966" /><CodeLine lineNumber="966"><span class="doxyHighlight">    FPOpActions.<a href="/docs/api/classes/llvm/legalizeruleset/#a875edaec1f61b358e8026a4b50de8ea8">clampMaxNumElementsStrict</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2);</span></CodeLine>
<Link id="l00967" /><CodeLine lineNumber="967"></CodeLine>
<Link id="l00968" /><CodeLine lineNumber="968"><span class="doxyHighlight">  FPOpActions</span></CodeLine>
<Link id="l00969" /><CodeLine lineNumber="969"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l00970" /><CodeLine lineNumber="970"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, ST.has16BitInsts() ? <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a> : <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>);</span></CodeLine>
<Link id="l00971" /><CodeLine lineNumber="971"></CodeLine>
<Link id="l00972" /><CodeLine lineNumber="972"><span class="doxyHighlight">  TrigActions</span></CodeLine>
<Link id="l00973" /><CodeLine lineNumber="973"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l00974" /><CodeLine lineNumber="974"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, ST.has16BitInsts() ? <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a> : <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>);</span></CodeLine>
<Link id="l00975" /><CodeLine lineNumber="975"></CodeLine>
<Link id="l00976" /><CodeLine lineNumber="976"><span class="doxyHighlight">  FDIVActions</span></CodeLine>
<Link id="l00977" /><CodeLine lineNumber="977"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l00978" /><CodeLine lineNumber="978"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, ST.has16BitInsts() ? <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a> : <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>);</span></CodeLine>
<Link id="l00979" /><CodeLine lineNumber="979"></CodeLine>
<Link id="l00980" /><CodeLine lineNumber="980"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;FNEG, G&#95;FABS&#125;)</span></CodeLine>
<Link id="l00981" /><CodeLine lineNumber="981"><span class="doxyHighlight">    .legalFor(FPTypesPK16)</span></CodeLine>
<Link id="l00982" /><CodeLine lineNumber="982"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a875edaec1f61b358e8026a4b50de8ea8">clampMaxNumElementsStrict</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2)</span></CodeLine>
<Link id="l00983" /><CodeLine lineNumber="983"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l00984" /><CodeLine lineNumber="984"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>);</span></CodeLine>
<Link id="l00985" /><CodeLine lineNumber="985"></CodeLine>
<Link id="l00986" /><CodeLine lineNumber="986"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.has16BitInsts()) &#123;</span></CodeLine>
<Link id="l00987" /><CodeLine lineNumber="987"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FSQRT)</span></CodeLine>
<Link id="l00988" /><CodeLine lineNumber="988"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;)</span></CodeLine>
<Link id="l00989" /><CodeLine lineNumber="989"><span class="doxyHighlight">      .customFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;)</span></CodeLine>
<Link id="l00990" /><CodeLine lineNumber="990"><span class="doxyHighlight">      .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l00991" /><CodeLine lineNumber="991"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a2034405f0aed7259ed9999053c3f591d">unsupported</a>();</span></CodeLine>
<Link id="l00992" /><CodeLine lineNumber="992"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FFLOOR)</span></CodeLine>
<Link id="l00993" /><CodeLine lineNumber="993"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;)</span></CodeLine>
<Link id="l00994" /><CodeLine lineNumber="994"><span class="doxyHighlight">      .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l00995" /><CodeLine lineNumber="995"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>);</span></CodeLine>
<Link id="l00996" /><CodeLine lineNumber="996"></CodeLine>
<Link id="l00997" /><CodeLine lineNumber="997"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;FLDEXP, G&#95;STRICT&#95;FLDEXP&#125;)</span></CodeLine>
<Link id="l00998" /><CodeLine lineNumber="998"><span class="doxyHighlight">      .legalFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;&#125;)</span></CodeLine>
<Link id="l00999" /><CodeLine lineNumber="999"><span class="doxyHighlight">      .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l01000" /><CodeLine lineNumber="1000"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#acd56c0d001ca90095d61c52099f90cd3">maxScalarIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>), 1, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)</span></CodeLine>
<Link id="l01001" /><CodeLine lineNumber="1001"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(1, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01002" /><CodeLine lineNumber="1002"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01003" /><CodeLine lineNumber="1003"></CodeLine>
<Link id="l01004" /><CodeLine lineNumber="1004"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FFREXP)</span></CodeLine>
<Link id="l01005" /><CodeLine lineNumber="1005"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#afc001d042e6a7093a6954b2d9ff18029">customFor</a>(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;, &#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;&#125;)</span></CodeLine>
<Link id="l01006" /><CodeLine lineNumber="1006"><span class="doxyHighlight">      .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l01007" /><CodeLine lineNumber="1007"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01008" /><CodeLine lineNumber="1008"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01009" /><CodeLine lineNumber="1009"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FSQRT)</span></CodeLine>
<Link id="l01010" /><CodeLine lineNumber="1010"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#afc001d042e6a7093a6954b2d9ff18029">customFor</a>(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;)</span></CodeLine>
<Link id="l01011" /><CodeLine lineNumber="1011"><span class="doxyHighlight">      .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l01012" /><CodeLine lineNumber="1012"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a2034405f0aed7259ed9999053c3f591d">unsupported</a>();</span></CodeLine>
<Link id="l01013" /><CodeLine lineNumber="1013"></CodeLine>
<Link id="l01014" /><CodeLine lineNumber="1014"></CodeLine>
<Link id="l01015" /><CodeLine lineNumber="1015"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasFractBug()) &#123;</span></CodeLine>
<Link id="l01016" /><CodeLine lineNumber="1016"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FFLOOR)</span></CodeLine>
<Link id="l01017" /><CodeLine lineNumber="1017"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#afc001d042e6a7093a6954b2d9ff18029">customFor</a>(&#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;)</span></CodeLine>
<Link id="l01018" /><CodeLine lineNumber="1018"><span class="doxyHighlight">        .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;)</span></CodeLine>
<Link id="l01019" /><CodeLine lineNumber="1019"><span class="doxyHighlight">        .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l01020" /><CodeLine lineNumber="1020"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>);</span></CodeLine>
<Link id="l01021" /><CodeLine lineNumber="1021"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01022" /><CodeLine lineNumber="1022"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FFLOOR)</span></CodeLine>
<Link id="l01023" /><CodeLine lineNumber="1023"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;)</span></CodeLine>
<Link id="l01024" /><CodeLine lineNumber="1024"><span class="doxyHighlight">        .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l01025" /><CodeLine lineNumber="1025"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>);</span></CodeLine>
<Link id="l01026" /><CodeLine lineNumber="1026"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01027" /><CodeLine lineNumber="1027"></CodeLine>
<Link id="l01028" /><CodeLine lineNumber="1028"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;FLDEXP, G&#95;STRICT&#95;FLDEXP&#125;)</span></CodeLine>
<Link id="l01029" /><CodeLine lineNumber="1029"><span class="doxyHighlight">      .legalFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;&#125;)</span></CodeLine>
<Link id="l01030" /><CodeLine lineNumber="1030"><span class="doxyHighlight">      .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l01031" /><CodeLine lineNumber="1031"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01032" /><CodeLine lineNumber="1032"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(1, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01033" /><CodeLine lineNumber="1033"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01034" /><CodeLine lineNumber="1034"></CodeLine>
<Link id="l01035" /><CodeLine lineNumber="1035"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FFREXP)</span></CodeLine>
<Link id="l01036" /><CodeLine lineNumber="1036"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#afc001d042e6a7093a6954b2d9ff18029">customFor</a>(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;&#125;)</span></CodeLine>
<Link id="l01037" /><CodeLine lineNumber="1037"><span class="doxyHighlight">      .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l01038" /><CodeLine lineNumber="1038"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a009564405d1037574152ee039cd04b9f">minScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01039" /><CodeLine lineNumber="1039"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(1, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01040" /><CodeLine lineNumber="1040"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01041" /><CodeLine lineNumber="1041"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01042" /><CodeLine lineNumber="1042"></CodeLine>
<Link id="l01043" /><CodeLine lineNumber="1043"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;FPTruncActions = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FPTRUNC);</span></CodeLine>
<Link id="l01044" /><CodeLine lineNumber="1044"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasCvtPkF16F32Inst())</span></CodeLine>
<Link id="l01045" /><CodeLine lineNumber="1045"><span class="doxyHighlight">    FPTruncActions.legalFor(</span></CodeLine>
<Link id="l01046" /><CodeLine lineNumber="1046"><span class="doxyHighlight">        &#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;, &#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, <a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a>&#125;, &#123;<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, <a href="#acb4ecd614e176840d5b2360a176f1333">V2S64</a>&#125;&#125;);</span></CodeLine>
<Link id="l01047" /><CodeLine lineNumber="1047"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01048" /><CodeLine lineNumber="1048"><span class="doxyHighlight">    FPTruncActions.legalFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;, &#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;&#125;);</span></CodeLine>
<Link id="l01049" /><CodeLine lineNumber="1049"><span class="doxyHighlight">  FPTruncActions.scalarize(0).lower();</span></CodeLine>
<Link id="l01050" /><CodeLine lineNumber="1050"></CodeLine>
<Link id="l01051" /><CodeLine lineNumber="1051"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FPEXT)</span></CodeLine>
<Link id="l01052" /><CodeLine lineNumber="1052"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;&#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;&#125;)</span></CodeLine>
<Link id="l01053" /><CodeLine lineNumber="1053"><span class="doxyHighlight">    .narrowScalarFor(&#123;&#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;&#125;, <a href="/docs/api/namespaces/llvm/legalizemutations/#acd331b959990c033f8d612adf7701b05">changeTo</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>))</span></CodeLine>
<Link id="l01054" /><CodeLine lineNumber="1054"><span class="doxyHighlight">    .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0);</span></CodeLine>
<Link id="l01055" /><CodeLine lineNumber="1055"></CodeLine>
<Link id="l01056" /><CodeLine lineNumber="1056"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;FSubActions = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;FSUB, G&#95;STRICT&#95;FSUB&#125;);</span></CodeLine>
<Link id="l01057" /><CodeLine lineNumber="1057"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.has16BitInsts()) &#123;</span></CodeLine>
<Link id="l01058" /><CodeLine lineNumber="1058"><span class="doxyHighlight">    FSubActions</span></CodeLine>
<Link id="l01059" /><CodeLine lineNumber="1059"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Use actual fsub instruction</span></CodeLine>
<Link id="l01060" /><CodeLine lineNumber="1060"><span class="doxyHighlight">      .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;)</span></CodeLine>
<Link id="l01061" /><CodeLine lineNumber="1061"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Must use fadd + fneg</span></CodeLine>
<Link id="l01062" /><CodeLine lineNumber="1062"><span class="doxyHighlight">      .lowerFor(&#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>&#125;);</span></CodeLine>
<Link id="l01063" /><CodeLine lineNumber="1063"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01064" /><CodeLine lineNumber="1064"><span class="doxyHighlight">    FSubActions</span></CodeLine>
<Link id="l01065" /><CodeLine lineNumber="1065"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Use actual fsub instruction</span></CodeLine>
<Link id="l01066" /><CodeLine lineNumber="1066"><span class="doxyHighlight">      .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l01067" /><CodeLine lineNumber="1067"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Must use fadd + fneg</span></CodeLine>
<Link id="l01068" /><CodeLine lineNumber="1068"><span class="doxyHighlight">      .lowerFor(&#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>&#125;);</span></CodeLine>
<Link id="l01069" /><CodeLine lineNumber="1069"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01070" /><CodeLine lineNumber="1070"></CodeLine>
<Link id="l01071" /><CodeLine lineNumber="1071"><span class="doxyHighlight">  FSubActions</span></CodeLine>
<Link id="l01072" /><CodeLine lineNumber="1072"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01073" /><CodeLine lineNumber="1073"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>);</span></CodeLine>
<Link id="l01074" /><CodeLine lineNumber="1074"></CodeLine>
<Link id="l01075" /><CodeLine lineNumber="1075"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Whether this is legal depends on the floating point mode for the function.</span></CodeLine>
<Link id="l01076" /><CodeLine lineNumber="1076"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;FMad = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FMAD);</span></CodeLine>
<Link id="l01077" /><CodeLine lineNumber="1077"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasMadF16() &amp;&amp; ST.hasMadMacF32Insts())</span></CodeLine>
<Link id="l01078" /><CodeLine lineNumber="1078"><span class="doxyHighlight">    FMad.customFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;);</span></CodeLine>
<Link id="l01079" /><CodeLine lineNumber="1079"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasMadMacF32Insts())</span></CodeLine>
<Link id="l01080" /><CodeLine lineNumber="1080"><span class="doxyHighlight">    FMad.customFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;);</span></CodeLine>
<Link id="l01081" /><CodeLine lineNumber="1081"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasMadF16())</span></CodeLine>
<Link id="l01082" /><CodeLine lineNumber="1082"><span class="doxyHighlight">    FMad.customFor(&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;);</span></CodeLine>
<Link id="l01083" /><CodeLine lineNumber="1083"><span class="doxyHighlight">  FMad.scalarize(0)</span></CodeLine>
<Link id="l01084" /><CodeLine lineNumber="1084"><span class="doxyHighlight">      .lower();</span></CodeLine>
<Link id="l01085" /><CodeLine lineNumber="1085"></CodeLine>
<Link id="l01086" /><CodeLine lineNumber="1086"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;FRem = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FREM);</span></CodeLine>
<Link id="l01087" /><CodeLine lineNumber="1087"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.has16BitInsts()) &#123;</span></CodeLine>
<Link id="l01088" /><CodeLine lineNumber="1088"><span class="doxyHighlight">    FRem.customFor(&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;);</span></CodeLine>
<Link id="l01089" /><CodeLine lineNumber="1089"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01090" /><CodeLine lineNumber="1090"><span class="doxyHighlight">    FRem.minScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01091" /><CodeLine lineNumber="1091"><span class="doxyHighlight">        .customFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;);</span></CodeLine>
<Link id="l01092" /><CodeLine lineNumber="1092"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01093" /><CodeLine lineNumber="1093"><span class="doxyHighlight">  FRem.scalarize(0);</span></CodeLine>
<Link id="l01094" /><CodeLine lineNumber="1094"></CodeLine>
<Link id="l01095" /><CodeLine lineNumber="1095"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Do we need to clamp maximum bitwidth?</span></CodeLine>
<Link id="l01096" /><CodeLine lineNumber="1096"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;TRUNC)</span></CodeLine>
<Link id="l01097" /><CodeLine lineNumber="1097"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#af6dcfac5a30e4050e3ac204f27062fe6">legalIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a082316e51330aeb051eaed458a9f8304">isScalar</a>(0))</span></CodeLine>
<Link id="l01098" /><CodeLine lineNumber="1098"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;&#123;<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, <a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a>&#125;&#125;)</span></CodeLine>
<Link id="l01099" /><CodeLine lineNumber="1099"><span class="doxyHighlight">    .clampMaxNumElements(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2)</span></CodeLine>
<Link id="l01100" /><CodeLine lineNumber="1100"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Avoid scalarizing in cases that should be truly illegal. In unresolvable</span></CodeLine>
<Link id="l01101" /><CodeLine lineNumber="1101"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// situations (like an invalid implicit use), we don&#39;t want to infinite loop</span></CodeLine>
<Link id="l01102" /><CodeLine lineNumber="1102"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// in the legalizer.</span></CodeLine>
<Link id="l01103" /><CodeLine lineNumber="1103"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a2650717a05ef92e13ecc9d1f290eabd9">fewerElementsIf</a>(<a href="#aed4feaa9baf8df7fe949b9a5ce246646">elementTypeIsLegal</a>(0), <a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">LegalizeMutations::scalarize</a>(0))</span></CodeLine>
<Link id="l01104" /><CodeLine lineNumber="1104"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#ab250f5144d04471b35f7fc229dc9da5c">alwaysLegal</a>();</span></CodeLine>
<Link id="l01105" /><CodeLine lineNumber="1105"></CodeLine>
<Link id="l01106" /><CodeLine lineNumber="1106"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;SEXT, G&#95;ZEXT, G&#95;ANYEXT&#125;)</span></CodeLine>
<Link id="l01107" /><CodeLine lineNumber="1107"><span class="doxyHighlight">    .legalFor(&#123;&#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;,</span></CodeLine>
<Link id="l01108" /><CodeLine lineNumber="1108"><span class="doxyHighlight">               &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>&#125;, &#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>&#125;&#125;)</span></CodeLine>
<Link id="l01109" /><CodeLine lineNumber="1109"><span class="doxyHighlight">    .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l01110" /><CodeLine lineNumber="1110"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01111" /><CodeLine lineNumber="1111"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(1, 32);</span></CodeLine>
<Link id="l01112" /><CodeLine lineNumber="1112"></CodeLine>
<Link id="l01113" /><CodeLine lineNumber="1113"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Split s1-&gt;s64 during regbankselect for VALU.</span></CodeLine>
<Link id="l01114" /><CodeLine lineNumber="1114"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;IToFP = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;SITOFP, G&#95;UITOFP&#125;)</span></CodeLine>
<Link id="l01115" /><CodeLine lineNumber="1115"><span class="doxyHighlight">                    .legalFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;&#125;)</span></CodeLine>
<Link id="l01116" /><CodeLine lineNumber="1116"><span class="doxyHighlight">                    .lowerIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(1, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>))</span></CodeLine>
<Link id="l01117" /><CodeLine lineNumber="1117"><span class="doxyHighlight">                    .<a href="/docs/api/classes/llvm/legalizeruleset/#afc001d042e6a7093a6954b2d9ff18029">customFor</a>(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;&#125;);</span></CodeLine>
<Link id="l01118" /><CodeLine lineNumber="1118"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.has16BitInsts())</span></CodeLine>
<Link id="l01119" /><CodeLine lineNumber="1119"><span class="doxyHighlight">    IToFP.<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;&#125;);</span></CodeLine>
<Link id="l01120" /><CodeLine lineNumber="1120"><span class="doxyHighlight">  IToFP.<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(1, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01121" /><CodeLine lineNumber="1121"><span class="doxyHighlight">       .<a href="/docs/api/classes/llvm/legalizeruleset/#a009564405d1037574152ee039cd04b9f">minScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01122" /><CodeLine lineNumber="1122"><span class="doxyHighlight">       .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01123" /><CodeLine lineNumber="1123"><span class="doxyHighlight">       .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(1);</span></CodeLine>
<Link id="l01124" /><CodeLine lineNumber="1124"></CodeLine>
<Link id="l01125" /><CodeLine lineNumber="1125"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;FPToI = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;FPTOSI, G&#95;FPTOUI&#125;)</span></CodeLine>
<Link id="l01126" /><CodeLine lineNumber="1126"><span class="doxyHighlight">    .legalFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;&#125;)</span></CodeLine>
<Link id="l01127" /><CodeLine lineNumber="1127"><span class="doxyHighlight">    .customFor(&#123;&#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;&#125;)</span></CodeLine>
<Link id="l01128" /><CodeLine lineNumber="1128"><span class="doxyHighlight">    .narrowScalarFor(&#123;&#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;&#125;, <a href="/docs/api/namespaces/llvm/legalizemutations/#acd331b959990c033f8d612adf7701b05">changeTo</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>));</span></CodeLine>
<Link id="l01129" /><CodeLine lineNumber="1129"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.has16BitInsts())</span></CodeLine>
<Link id="l01130" /><CodeLine lineNumber="1130"><span class="doxyHighlight">    FPToI.<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;&#125;);</span></CodeLine>
<Link id="l01131" /><CodeLine lineNumber="1131"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01132" /><CodeLine lineNumber="1132"><span class="doxyHighlight">    FPToI.<a href="/docs/api/classes/llvm/legalizeruleset/#a009564405d1037574152ee039cd04b9f">minScalar</a>(1, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l01133" /><CodeLine lineNumber="1133"></CodeLine>
<Link id="l01134" /><CodeLine lineNumber="1134"><span class="doxyHighlight">  FPToI.<a href="/docs/api/classes/llvm/legalizeruleset/#a009564405d1037574152ee039cd04b9f">minScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01135" /><CodeLine lineNumber="1135"><span class="doxyHighlight">       .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0, 32)</span></CodeLine>
<Link id="l01136" /><CodeLine lineNumber="1136"><span class="doxyHighlight">       .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01137" /><CodeLine lineNumber="1137"><span class="doxyHighlight">       .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01138" /><CodeLine lineNumber="1138"></CodeLine>
<Link id="l01139" /><CodeLine lineNumber="1139"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;LROUND, G&#95;LLROUND&#125;)</span></CodeLine>
<Link id="l01140" /><CodeLine lineNumber="1140"><span class="doxyHighlight">      .clampScalar(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01141" /><CodeLine lineNumber="1141"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01142" /><CodeLine lineNumber="1142"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01143" /><CodeLine lineNumber="1143"></CodeLine>
<Link id="l01144" /><CodeLine lineNumber="1144"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;INTRINSIC&#95;FPTRUNC&#95;ROUND)</span></CodeLine>
<Link id="l01145" /><CodeLine lineNumber="1145"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l01146" /><CodeLine lineNumber="1146"><span class="doxyHighlight">      .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l01147" /><CodeLine lineNumber="1147"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01148" /><CodeLine lineNumber="1148"></CodeLine>
<Link id="l01149" /><CodeLine lineNumber="1149"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Lower G&#95;FNEARBYINT and G&#95;FRINT into G&#95;INTRINSIC&#95;ROUNDEVEN</span></CodeLine>
<Link id="l01150" /><CodeLine lineNumber="1150"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;INTRINSIC&#95;ROUND, G&#95;FRINT, G&#95;FNEARBYINT&#125;)</span></CodeLine>
<Link id="l01151" /><CodeLine lineNumber="1151"><span class="doxyHighlight">      .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l01152" /><CodeLine lineNumber="1152"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01153" /><CodeLine lineNumber="1153"></CodeLine>
<Link id="l01154" /><CodeLine lineNumber="1154"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;INTRINSIC&#95;LRINT, G&#95;INTRINSIC&#95;LLRINT&#125;)</span></CodeLine>
<Link id="l01155" /><CodeLine lineNumber="1155"><span class="doxyHighlight">      .clampScalar(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01156" /><CodeLine lineNumber="1156"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01157" /><CodeLine lineNumber="1157"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01158" /><CodeLine lineNumber="1158"></CodeLine>
<Link id="l01159" /><CodeLine lineNumber="1159"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.has16BitInsts()) &#123;</span></CodeLine>
<Link id="l01160" /><CodeLine lineNumber="1160"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</span></CodeLine>
<Link id="l01161" /><CodeLine lineNumber="1161"><span class="doxyHighlight">        &#123;G&#95;INTRINSIC&#95;TRUNC, G&#95;FCEIL, G&#95;INTRINSIC&#95;ROUNDEVEN&#125;)</span></CodeLine>
<Link id="l01162" /><CodeLine lineNumber="1162"><span class="doxyHighlight">        .legalFor(&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;)</span></CodeLine>
<Link id="l01163" /><CodeLine lineNumber="1163"><span class="doxyHighlight">        .clampScalar(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01164" /><CodeLine lineNumber="1164"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0);</span></CodeLine>
<Link id="l01165" /><CodeLine lineNumber="1165"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.getGeneration() &gt;= <a href="/docs/api/classes/llvm/amdgpusubtarget/#a53c0ee4138bfbf9e0410a65e0eaa36e2a5a040cb5d61ebf76561fcb74c4a77970">AMDGPUSubtarget::SEA&#95;ISLANDS</a>) &#123;</span></CodeLine>
<Link id="l01166" /><CodeLine lineNumber="1166"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</span></CodeLine>
<Link id="l01167" /><CodeLine lineNumber="1167"><span class="doxyHighlight">        &#123;G&#95;INTRINSIC&#95;TRUNC, G&#95;FCEIL, G&#95;INTRINSIC&#95;ROUNDEVEN&#125;)</span></CodeLine>
<Link id="l01168" /><CodeLine lineNumber="1168"><span class="doxyHighlight">        .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;)</span></CodeLine>
<Link id="l01169" /><CodeLine lineNumber="1169"><span class="doxyHighlight">        .clampScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01170" /><CodeLine lineNumber="1170"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0);</span></CodeLine>
<Link id="l01171" /><CodeLine lineNumber="1171"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01172" /><CodeLine lineNumber="1172"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</span></CodeLine>
<Link id="l01173" /><CodeLine lineNumber="1173"><span class="doxyHighlight">        &#123;G&#95;INTRINSIC&#95;TRUNC, G&#95;FCEIL, G&#95;INTRINSIC&#95;ROUNDEVEN&#125;)</span></CodeLine>
<Link id="l01174" /><CodeLine lineNumber="1174"><span class="doxyHighlight">        .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l01175" /><CodeLine lineNumber="1175"><span class="doxyHighlight">        .customFor(&#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;)</span></CodeLine>
<Link id="l01176" /><CodeLine lineNumber="1176"><span class="doxyHighlight">        .clampScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01177" /><CodeLine lineNumber="1177"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0);</span></CodeLine>
<Link id="l01178" /><CodeLine lineNumber="1178"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01179" /><CodeLine lineNumber="1179"></CodeLine>
<Link id="l01180" /><CodeLine lineNumber="1180"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;PTR&#95;ADD)</span></CodeLine>
<Link id="l01181" /><CodeLine lineNumber="1181"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a4125d6153339fbe5614602c31c5500d3">unsupportedFor</a>(&#123;BufferFatPtr, BufferStridedPtr, RsrcPtr&#125;)</span></CodeLine>
<Link id="l01182" /><CodeLine lineNumber="1182"><span class="doxyHighlight">      .legalIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a3a162108a998b12a5f51009e450d898c">isPointer</a>(0), <a href="/docs/api/namespaces/llvm/legalitypredicates/#a7fe85e30d27726cff2560b3a859f6d90">sameSize</a>(0, 1)))</span></CodeLine>
<Link id="l01183" /><CodeLine lineNumber="1183"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01184" /><CodeLine lineNumber="1184"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a236c4562fff94fbec23fd35c0b5257a1">scalarSameSizeAs</a>(1, 0);</span></CodeLine>
<Link id="l01185" /><CodeLine lineNumber="1185"></CodeLine>
<Link id="l01186" /><CodeLine lineNumber="1186"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;PTRMASK)</span></CodeLine>
<Link id="l01187" /><CodeLine lineNumber="1187"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#af6dcfac5a30e4050e3ac204f27062fe6">legalIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a7fe85e30d27726cff2560b3a859f6d90">sameSize</a>(0, 1), <a href="/docs/api/namespaces/llvm/legalitypredicates/#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(1, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)))</span></CodeLine>
<Link id="l01188" /><CodeLine lineNumber="1188"><span class="doxyHighlight">    .scalarSameSizeAs(1, 0)</span></CodeLine>
<Link id="l01189" /><CodeLine lineNumber="1189"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0);</span></CodeLine>
<Link id="l01190" /><CodeLine lineNumber="1190"></CodeLine>
<Link id="l01191" /><CodeLine lineNumber="1191"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;CmpBuilder =</span></CodeLine>
<Link id="l01192" /><CodeLine lineNumber="1192"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;ICMP)</span></CodeLine>
<Link id="l01193" /><CodeLine lineNumber="1193"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The compare output type differs based on the register bank of the output,</span></CodeLine>
<Link id="l01194" /><CodeLine lineNumber="1194"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// so make both s1 and s32 legal.</span></CodeLine>
<Link id="l01195" /><CodeLine lineNumber="1195"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l01196" /><CodeLine lineNumber="1196"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Scalar compares producing output in scc will be promoted to s32, as that</span></CodeLine>
<Link id="l01197" /><CodeLine lineNumber="1197"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// is the allocatable register type that will be needed for the copy from</span></CodeLine>
<Link id="l01198" /><CodeLine lineNumber="1198"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// scc. This will be promoted during RegBankSelect, and we assume something</span></CodeLine>
<Link id="l01199" /><CodeLine lineNumber="1199"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// before that won&#39;t try to use s32 result types.</span></CodeLine>
<Link id="l01200" /><CodeLine lineNumber="1200"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l01201" /><CodeLine lineNumber="1201"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Vector compares producing an output in vcc/SGPR will use s1 in VCC reg</span></CodeLine>
<Link id="l01202" /><CodeLine lineNumber="1202"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// bank.</span></CodeLine>
<Link id="l01203" /><CodeLine lineNumber="1203"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#ae4c02bcf9d3bfdee70f097d0b6aeb9f3">legalForCartesianProduct</a>(</span></CodeLine>
<Link id="l01204" /><CodeLine lineNumber="1204"><span class="doxyHighlight">      &#123;<a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>&#125;, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, GlobalPtr, LocalPtr, ConstantPtr, PrivatePtr, FlatPtr&#125;)</span></CodeLine>
<Link id="l01205" /><CodeLine lineNumber="1205"><span class="doxyHighlight">    .legalForCartesianProduct(</span></CodeLine>
<Link id="l01206" /><CodeLine lineNumber="1206"><span class="doxyHighlight">      &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, GlobalPtr, LocalPtr, ConstantPtr, PrivatePtr, FlatPtr&#125;);</span></CodeLine>
<Link id="l01207" /><CodeLine lineNumber="1207"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.has16BitInsts()) &#123;</span></CodeLine>
<Link id="l01208" /><CodeLine lineNumber="1208"><span class="doxyHighlight">    CmpBuilder.legalFor(&#123;&#123;<a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;&#125;);</span></CodeLine>
<Link id="l01209" /><CodeLine lineNumber="1209"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01210" /><CodeLine lineNumber="1210"></CodeLine>
<Link id="l01211" /><CodeLine lineNumber="1211"><span class="doxyHighlight">  CmpBuilder</span></CodeLine>
<Link id="l01212" /><CodeLine lineNumber="1212"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(1)</span></CodeLine>
<Link id="l01213" /><CodeLine lineNumber="1213"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(1, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01214" /><CodeLine lineNumber="1214"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01215" /><CodeLine lineNumber="1215"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#af6dcfac5a30e4050e3ac204f27062fe6">legalIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(0, &#123;<a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;), <a href="/docs/api/namespaces/llvm/legalitypredicates/#a3a162108a998b12a5f51009e450d898c">isPointer</a>(1)));</span></CodeLine>
<Link id="l01216" /><CodeLine lineNumber="1216"></CodeLine>
<Link id="l01217" /><CodeLine lineNumber="1217"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;FCmpBuilder =</span></CodeLine>
<Link id="l01218" /><CodeLine lineNumber="1218"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FCMP).<a href="/docs/api/classes/llvm/legalizeruleset/#ae4c02bcf9d3bfdee70f097d0b6aeb9f3">legalForCartesianProduct</a>(</span></CodeLine>
<Link id="l01219" /><CodeLine lineNumber="1219"><span class="doxyHighlight">          &#123;<a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>&#125;, ST.has16BitInsts() ? FPTypes16 : FPTypesBase);</span></CodeLine>
<Link id="l01220" /><CodeLine lineNumber="1220"></CodeLine>
<Link id="l01221" /><CodeLine lineNumber="1221"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasSALUFloatInsts())</span></CodeLine>
<Link id="l01222" /><CodeLine lineNumber="1222"><span class="doxyHighlight">    FCmpBuilder.<a href="/docs/api/classes/llvm/legalizeruleset/#ae4c02bcf9d3bfdee70f097d0b6aeb9f3">legalForCartesianProduct</a>(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;);</span></CodeLine>
<Link id="l01223" /><CodeLine lineNumber="1223"></CodeLine>
<Link id="l01224" /><CodeLine lineNumber="1224"><span class="doxyHighlight">  FCmpBuilder</span></CodeLine>
<Link id="l01225" /><CodeLine lineNumber="1225"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(1)</span></CodeLine>
<Link id="l01226" /><CodeLine lineNumber="1226"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(1, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01227" /><CodeLine lineNumber="1227"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0);</span></CodeLine>
<Link id="l01228" /><CodeLine lineNumber="1228"></CodeLine>
<Link id="l01229" /><CodeLine lineNumber="1229"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: fpow has a selection pattern that should move to custom lowering.</span></CodeLine>
<Link id="l01230" /><CodeLine lineNumber="1230"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;ExpOps = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FPOW);</span></CodeLine>
<Link id="l01231" /><CodeLine lineNumber="1231"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.has16BitInsts())</span></CodeLine>
<Link id="l01232" /><CodeLine lineNumber="1232"><span class="doxyHighlight">    ExpOps.customFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;&#125;);</span></CodeLine>
<Link id="l01233" /><CodeLine lineNumber="1233"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01234" /><CodeLine lineNumber="1234"><span class="doxyHighlight">    ExpOps.customFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;);</span></CodeLine>
<Link id="l01235" /><CodeLine lineNumber="1235"><span class="doxyHighlight">  ExpOps.clampScalar(0, MinScalarFPTy, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01236" /><CodeLine lineNumber="1236"><span class="doxyHighlight">        .scalarize(0);</span></CodeLine>
<Link id="l01237" /><CodeLine lineNumber="1237"></CodeLine>
<Link id="l01238" /><CodeLine lineNumber="1238"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FPOWI)</span></CodeLine>
<Link id="l01239" /><CodeLine lineNumber="1239"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, MinScalarFPTy, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01240" /><CodeLine lineNumber="1240"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01241" /><CodeLine lineNumber="1241"></CodeLine>
<Link id="l01242" /><CodeLine lineNumber="1242"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Log2Ops = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;FLOG2, G&#95;FEXP2&#125;);</span></CodeLine>
<Link id="l01243" /><CodeLine lineNumber="1243"><span class="doxyHighlight">  Log2Ops.<a href="/docs/api/classes/llvm/legalizeruleset/#afc001d042e6a7093a6954b2d9ff18029">customFor</a>(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;);</span></CodeLine>
<Link id="l01244" /><CodeLine lineNumber="1244"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.has16BitInsts())</span></CodeLine>
<Link id="l01245" /><CodeLine lineNumber="1245"><span class="doxyHighlight">    Log2Ops.<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;);</span></CodeLine>
<Link id="l01246" /><CodeLine lineNumber="1246"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01247" /><CodeLine lineNumber="1247"><span class="doxyHighlight">    Log2Ops.<a href="/docs/api/classes/llvm/legalizeruleset/#afc001d042e6a7093a6954b2d9ff18029">customFor</a>(&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;);</span></CodeLine>
<Link id="l01248" /><CodeLine lineNumber="1248"><span class="doxyHighlight">  Log2Ops.<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01249" /><CodeLine lineNumber="1249"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01250" /><CodeLine lineNumber="1250"></CodeLine>
<Link id="l01251" /><CodeLine lineNumber="1251"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;LogOps =</span></CodeLine>
<Link id="l01252" /><CodeLine lineNumber="1252"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;FLOG, G&#95;FLOG10, G&#95;FEXP, G&#95;FEXP10&#125;);</span></CodeLine>
<Link id="l01253" /><CodeLine lineNumber="1253"><span class="doxyHighlight">  LogOps.<a href="/docs/api/classes/llvm/legalizeruleset/#afc001d042e6a7093a6954b2d9ff18029">customFor</a>(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;);</span></CodeLine>
<Link id="l01254" /><CodeLine lineNumber="1254"><span class="doxyHighlight">  LogOps.<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, MinScalarFPTy, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01255" /><CodeLine lineNumber="1255"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0);</span></CodeLine>
<Link id="l01256" /><CodeLine lineNumber="1256"></CodeLine>
<Link id="l01257" /><CodeLine lineNumber="1257"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The 64-bit versions produce 32-bit results, but only on the SALU.</span></CodeLine>
<Link id="l01258" /><CodeLine lineNumber="1258"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;CTPOP)</span></CodeLine>
<Link id="l01259" /><CodeLine lineNumber="1259"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;&#125;)</span></CodeLine>
<Link id="l01260" /><CodeLine lineNumber="1260"><span class="doxyHighlight">    .clampScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01261" /><CodeLine lineNumber="1261"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(1, 32)</span></CodeLine>
<Link id="l01262" /><CodeLine lineNumber="1262"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(1, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01263" /><CodeLine lineNumber="1263"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01264" /><CodeLine lineNumber="1264"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0, 32);</span></CodeLine>
<Link id="l01265" /><CodeLine lineNumber="1265"></CodeLine>
<Link id="l01266" /><CodeLine lineNumber="1266"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If no 16 bit instr is available, lower into different instructions.</span></CodeLine>
<Link id="l01267" /><CodeLine lineNumber="1267"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.has16BitInsts())</span></CodeLine>
<Link id="l01268" /><CodeLine lineNumber="1268"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;IS&#95;FPCLASS)</span></CodeLine>
<Link id="l01269" /><CodeLine lineNumber="1269"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#ae4c02bcf9d3bfdee70f097d0b6aeb9f3">legalForCartesianProduct</a>(&#123;<a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>&#125;, FPTypes16)</span></CodeLine>
<Link id="l01270" /><CodeLine lineNumber="1270"><span class="doxyHighlight">        .widenScalarToNextPow2(1)</span></CodeLine>
<Link id="l01271" /><CodeLine lineNumber="1271"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01272" /><CodeLine lineNumber="1272"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01273" /><CodeLine lineNumber="1273"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01274" /><CodeLine lineNumber="1274"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;IS&#95;FPCLASS)</span></CodeLine>
<Link id="l01275" /><CodeLine lineNumber="1275"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#ae4c02bcf9d3bfdee70f097d0b6aeb9f3">legalForCartesianProduct</a>(&#123;<a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>&#125;, FPTypesBase)</span></CodeLine>
<Link id="l01276" /><CodeLine lineNumber="1276"><span class="doxyHighlight">        .lowerFor(&#123;<a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;)</span></CodeLine>
<Link id="l01277" /><CodeLine lineNumber="1277"><span class="doxyHighlight">        .widenScalarToNextPow2(1)</span></CodeLine>
<Link id="l01278" /><CodeLine lineNumber="1278"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01279" /><CodeLine lineNumber="1279"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01280" /><CodeLine lineNumber="1280"></CodeLine>
<Link id="l01281" /><CodeLine lineNumber="1281"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The hardware instructions return a different result on 0 than the generic</span></CodeLine>
<Link id="l01282" /><CodeLine lineNumber="1282"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// instructions expect. The hardware produces -1, but these produce the</span></CodeLine>
<Link id="l01283" /><CodeLine lineNumber="1283"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// bitwidth.</span></CodeLine>
<Link id="l01284" /><CodeLine lineNumber="1284"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;CTLZ, G&#95;CTTZ&#125;)</span></CodeLine>
<Link id="l01285" /><CodeLine lineNumber="1285"><span class="doxyHighlight">    .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l01286" /><CodeLine lineNumber="1286"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01287" /><CodeLine lineNumber="1287"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(1, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01288" /><CodeLine lineNumber="1288"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0, 32)</span></CodeLine>
<Link id="l01289" /><CodeLine lineNumber="1289"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(1, 32)</span></CodeLine>
<Link id="l01290" /><CodeLine lineNumber="1290"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a80f41417117f537cd147aaee97aecb1e">custom</a>();</span></CodeLine>
<Link id="l01291" /><CodeLine lineNumber="1291"></CodeLine>
<Link id="l01292" /><CodeLine lineNumber="1292"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The 64-bit versions produce 32-bit results, but only on the SALU.</span></CodeLine>
<Link id="l01293" /><CodeLine lineNumber="1293"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;CTLZ&#95;ZERO&#95;UNDEF)</span></CodeLine>
<Link id="l01294" /><CodeLine lineNumber="1294"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;&#125;)</span></CodeLine>
<Link id="l01295" /><CodeLine lineNumber="1295"><span class="doxyHighlight">      .customIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#aff9e886f18a84258e4f794e31aad0bd9">scalarNarrowerThan</a>(1, 32))</span></CodeLine>
<Link id="l01296" /><CodeLine lineNumber="1296"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01297" /><CodeLine lineNumber="1297"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(1, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01298" /><CodeLine lineNumber="1298"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01299" /><CodeLine lineNumber="1299"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0, 32)</span></CodeLine>
<Link id="l01300" /><CodeLine lineNumber="1300"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(1, 32);</span></CodeLine>
<Link id="l01301" /><CodeLine lineNumber="1301"></CodeLine>
<Link id="l01302" /><CodeLine lineNumber="1302"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;CTTZ&#95;ZERO&#95;UNDEF)</span></CodeLine>
<Link id="l01303" /><CodeLine lineNumber="1303"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;&#125;)</span></CodeLine>
<Link id="l01304" /><CodeLine lineNumber="1304"><span class="doxyHighlight">      .clampScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01305" /><CodeLine lineNumber="1305"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(1, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01306" /><CodeLine lineNumber="1306"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01307" /><CodeLine lineNumber="1307"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0, 32)</span></CodeLine>
<Link id="l01308" /><CodeLine lineNumber="1308"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(1, 32);</span></CodeLine>
<Link id="l01309" /><CodeLine lineNumber="1309"></CodeLine>
<Link id="l01310" /><CodeLine lineNumber="1310"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// S64 is only legal on SALU, and needs to be broken into 32-bit elements in</span></CodeLine>
<Link id="l01311" /><CodeLine lineNumber="1311"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// RegBankSelect.</span></CodeLine>
<Link id="l01312" /><CodeLine lineNumber="1312"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;BITREVERSE)</span></CodeLine>
<Link id="l01313" /><CodeLine lineNumber="1313"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;)</span></CodeLine>
<Link id="l01314" /><CodeLine lineNumber="1314"><span class="doxyHighlight">    .clampScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01315" /><CodeLine lineNumber="1315"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01316" /><CodeLine lineNumber="1316"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0);</span></CodeLine>
<Link id="l01317" /><CodeLine lineNumber="1317"></CodeLine>
<Link id="l01318" /><CodeLine lineNumber="1318"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.has16BitInsts()) &#123;</span></CodeLine>
<Link id="l01319" /><CodeLine lineNumber="1319"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;BSWAP)</span></CodeLine>
<Link id="l01320" /><CodeLine lineNumber="1320"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>&#125;)</span></CodeLine>
<Link id="l01321" /><CodeLine lineNumber="1321"><span class="doxyHighlight">      .clampMaxNumElementsStrict(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2)</span></CodeLine>
<Link id="l01322" /><CodeLine lineNumber="1322"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// FIXME: Fixing non-power-of-2 before clamp is workaround for</span></CodeLine>
<Link id="l01323" /><CodeLine lineNumber="1323"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// narrowScalar limitation.</span></CodeLine>
<Link id="l01324" /><CodeLine lineNumber="1324"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0)</span></CodeLine>
<Link id="l01325" /><CodeLine lineNumber="1325"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01326" /><CodeLine lineNumber="1326"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0);</span></CodeLine>
<Link id="l01327" /><CodeLine lineNumber="1327"></CodeLine>
<Link id="l01328" /><CodeLine lineNumber="1328"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasVOP3PInsts()) &#123;</span></CodeLine>
<Link id="l01329" /><CodeLine lineNumber="1329"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;SMIN, G&#95;SMAX, G&#95;UMIN, G&#95;UMAX, G&#95;ABS&#125;)</span></CodeLine>
<Link id="l01330" /><CodeLine lineNumber="1330"><span class="doxyHighlight">        .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>&#125;)</span></CodeLine>
<Link id="l01331" /><CodeLine lineNumber="1331"><span class="doxyHighlight">        .clampMaxNumElements(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2)</span></CodeLine>
<Link id="l01332" /><CodeLine lineNumber="1332"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#a009564405d1037574152ee039cd04b9f">minScalar</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)</span></CodeLine>
<Link id="l01333" /><CodeLine lineNumber="1333"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0)</span></CodeLine>
<Link id="l01334" /><CodeLine lineNumber="1334"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01335" /><CodeLine lineNumber="1335"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01336" /><CodeLine lineNumber="1336"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01337" /><CodeLine lineNumber="1337"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;SMIN, G&#95;SMAX, G&#95;UMIN, G&#95;UMAX, G&#95;ABS&#125;)</span></CodeLine>
<Link id="l01338" /><CodeLine lineNumber="1338"><span class="doxyHighlight">        .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;)</span></CodeLine>
<Link id="l01339" /><CodeLine lineNumber="1339"><span class="doxyHighlight">        .widenScalarToNextPow2(0)</span></CodeLine>
<Link id="l01340" /><CodeLine lineNumber="1340"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#a009564405d1037574152ee039cd04b9f">minScalar</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)</span></CodeLine>
<Link id="l01341" /><CodeLine lineNumber="1341"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01342" /><CodeLine lineNumber="1342"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01343" /><CodeLine lineNumber="1343"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01344" /><CodeLine lineNumber="1344"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01345" /><CodeLine lineNumber="1345"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Should have same legality without v&#95;perm&#95;b32</span></CodeLine>
<Link id="l01346" /><CodeLine lineNumber="1346"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;BSWAP)</span></CodeLine>
<Link id="l01347" /><CodeLine lineNumber="1347"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l01348" /><CodeLine lineNumber="1348"><span class="doxyHighlight">      .lowerIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#aff9e886f18a84258e4f794e31aad0bd9">scalarNarrowerThan</a>(0, 32))</span></CodeLine>
<Link id="l01349" /><CodeLine lineNumber="1349"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// FIXME: Fixing non-power-of-2 before clamp is workaround for</span></CodeLine>
<Link id="l01350" /><CodeLine lineNumber="1350"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// narrowScalar limitation.</span></CodeLine>
<Link id="l01351" /><CodeLine lineNumber="1351"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0)</span></CodeLine>
<Link id="l01352" /><CodeLine lineNumber="1352"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a33e181da566d1ebb7556f172888c3b92">maxScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01353" /><CodeLine lineNumber="1353"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01354" /><CodeLine lineNumber="1354"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01355" /><CodeLine lineNumber="1355"></CodeLine>
<Link id="l01356" /><CodeLine lineNumber="1356"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;SMIN, G&#95;SMAX, G&#95;UMIN, G&#95;UMAX, G&#95;ABS&#125;)</span></CodeLine>
<Link id="l01357" /><CodeLine lineNumber="1357"><span class="doxyHighlight">      .legalFor(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l01358" /><CodeLine lineNumber="1358"><span class="doxyHighlight">      .minScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01359" /><CodeLine lineNumber="1359"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0)</span></CodeLine>
<Link id="l01360" /><CodeLine lineNumber="1360"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01361" /><CodeLine lineNumber="1361"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01362" /><CodeLine lineNumber="1362"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01363" /><CodeLine lineNumber="1363"></CodeLine>
<Link id="l01364" /><CodeLine lineNumber="1364"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;INTTOPTR)</span></CodeLine>
<Link id="l01365" /><CodeLine lineNumber="1365"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// List the common cases</span></CodeLine>
<Link id="l01366" /><CodeLine lineNumber="1366"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#ae4c02bcf9d3bfdee70f097d0b6aeb9f3">legalForCartesianProduct</a>(AddrSpaces64, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;)</span></CodeLine>
<Link id="l01367" /><CodeLine lineNumber="1367"><span class="doxyHighlight">      .legalForCartesianProduct(AddrSpaces32, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l01368" /><CodeLine lineNumber="1368"><span class="doxyHighlight">      .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l01369" /><CodeLine lineNumber="1369"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Accept any address space as long as the size matches</span></CodeLine>
<Link id="l01370" /><CodeLine lineNumber="1370"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#af6dcfac5a30e4050e3ac204f27062fe6">legalIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a7fe85e30d27726cff2560b3a859f6d90">sameSize</a>(0, 1))</span></CodeLine>
<Link id="l01371" /><CodeLine lineNumber="1371"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a99e1a648bb3a1018aed19e77cae2203c">widenScalarIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a45c9d1ec6a1b46697b0363f2c8a605c5">smallerThan</a>(1, 0),</span></CodeLine>
<Link id="l01372" /><CodeLine lineNumber="1372"><span class="doxyHighlight">                     &#91;&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l01373" /><CodeLine lineNumber="1373"><span class="doxyHighlight">                       </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(</span></CodeLine>
<Link id="l01374" /><CodeLine lineNumber="1374"><span class="doxyHighlight">                           1, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;.getSizeInBits()));</span></CodeLine>
<Link id="l01375" /><CodeLine lineNumber="1375"><span class="doxyHighlight">                     &#125;)</span></CodeLine>
<Link id="l01376" /><CodeLine lineNumber="1376"><span class="doxyHighlight">      .narrowScalarIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a58d4c5153a7d50efd2b3e8408193dfab">largerThan</a>(1, 0), &#91;&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l01377" /><CodeLine lineNumber="1377"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(1, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;.getSizeInBits()));</span></CodeLine>
<Link id="l01378" /><CodeLine lineNumber="1378"><span class="doxyHighlight">      &#125;);</span></CodeLine>
<Link id="l01379" /><CodeLine lineNumber="1379"></CodeLine>
<Link id="l01380" /><CodeLine lineNumber="1380"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;PTRTOINT)</span></CodeLine>
<Link id="l01381" /><CodeLine lineNumber="1381"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// List the common cases</span></CodeLine>
<Link id="l01382" /><CodeLine lineNumber="1382"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#ae4c02bcf9d3bfdee70f097d0b6aeb9f3">legalForCartesianProduct</a>(AddrSpaces64, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;)</span></CodeLine>
<Link id="l01383" /><CodeLine lineNumber="1383"><span class="doxyHighlight">      .legalForCartesianProduct(AddrSpaces32, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l01384" /><CodeLine lineNumber="1384"><span class="doxyHighlight">      .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l01385" /><CodeLine lineNumber="1385"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Accept any address space as long as the size matches</span></CodeLine>
<Link id="l01386" /><CodeLine lineNumber="1386"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#af6dcfac5a30e4050e3ac204f27062fe6">legalIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a7fe85e30d27726cff2560b3a859f6d90">sameSize</a>(0, 1))</span></CodeLine>
<Link id="l01387" /><CodeLine lineNumber="1387"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a99e1a648bb3a1018aed19e77cae2203c">widenScalarIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a45c9d1ec6a1b46697b0363f2c8a605c5">smallerThan</a>(0, 1),</span></CodeLine>
<Link id="l01388" /><CodeLine lineNumber="1388"><span class="doxyHighlight">                     &#91;&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l01389" /><CodeLine lineNumber="1389"><span class="doxyHighlight">                       </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(</span></CodeLine>
<Link id="l01390" /><CodeLine lineNumber="1390"><span class="doxyHighlight">                           0, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;1&#93;.getSizeInBits()));</span></CodeLine>
<Link id="l01391" /><CodeLine lineNumber="1391"><span class="doxyHighlight">                     &#125;)</span></CodeLine>
<Link id="l01392" /><CodeLine lineNumber="1392"><span class="doxyHighlight">      .narrowScalarIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a58d4c5153a7d50efd2b3e8408193dfab">largerThan</a>(0, 1), &#91;&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l01393" /><CodeLine lineNumber="1393"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(0, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;1&#93;.getSizeInBits()));</span></CodeLine>
<Link id="l01394" /><CodeLine lineNumber="1394"><span class="doxyHighlight">      &#125;);</span></CodeLine>
<Link id="l01395" /><CodeLine lineNumber="1395"></CodeLine>
<Link id="l01396" /><CodeLine lineNumber="1396"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;ADDRSPACE&#95;CAST)</span></CodeLine>
<Link id="l01397" /><CodeLine lineNumber="1397"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01398" /><CodeLine lineNumber="1398"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a80f41417117f537cd147aaee97aecb1e">custom</a>();</span></CodeLine>
<Link id="l01399" /><CodeLine lineNumber="1399"></CodeLine>
<Link id="l01400" /><CodeLine lineNumber="1400"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> needToSplitMemOp = &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query,</span></CodeLine>
<Link id="l01401" /><CodeLine lineNumber="1401"><span class="doxyHighlight">                                    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsLoad) -&gt; </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01402" /><CodeLine lineNumber="1402"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> DstTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;;</span></CodeLine>
<Link id="l01403" /><CodeLine lineNumber="1403"></CodeLine>
<Link id="l01404" /><CodeLine lineNumber="1404"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Split vector extloads.</span></CodeLine>
<Link id="l01405" /><CodeLine lineNumber="1405"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> MemSize = Query.<a href="/docs/api/structs/llvm/legalityquery/#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>&#91;0&#93;.MemoryTy.getSizeInBits();</span></CodeLine>
<Link id="l01406" /><CodeLine lineNumber="1406"></CodeLine>
<Link id="l01407" /><CodeLine lineNumber="1407"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DstTy.<a href="/docs/api/classes/llvm/llt/#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; DstTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; MemSize)</span></CodeLine>
<Link id="l01408" /><CodeLine lineNumber="1408"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01409" /><CodeLine lineNumber="1409"></CodeLine>
<Link id="l01410" /><CodeLine lineNumber="1410"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> PtrTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;1&#93;;</span></CodeLine>
<Link id="l01411" /><CodeLine lineNumber="1411"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AS = PtrTy.<a href="/docs/api/classes/llvm/llt/#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>();</span></CodeLine>
<Link id="l01412" /><CodeLine lineNumber="1412"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MemSize &gt; <a href="#a807f9ab682878abe0a704736d1f9f298">maxSizeForAddrSpace</a>(ST, AS, IsLoad,</span></CodeLine>
<Link id="l01413" /><CodeLine lineNumber="1413"><span class="doxyHighlight">                                      Query.<a href="/docs/api/structs/llvm/legalityquery/#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>&#91;0&#93;.Ordering !=</span></CodeLine>
<Link id="l01414" /><CodeLine lineNumber="1414"><span class="doxyHighlight">                                          <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>))</span></CodeLine>
<Link id="l01415" /><CodeLine lineNumber="1415"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01416" /><CodeLine lineNumber="1416"></CodeLine>
<Link id="l01417" /><CodeLine lineNumber="1417"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Catch weird sized loads that don&#39;t evenly divide into the access sizes</span></CodeLine>
<Link id="l01418" /><CodeLine lineNumber="1418"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: May be able to widen depending on alignment etc.</span></CodeLine>
<Link id="l01419" /><CodeLine lineNumber="1419"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumRegs = (MemSize + 31) / 32;</span></CodeLine>
<Link id="l01420" /><CodeLine lineNumber="1420"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumRegs == 3) &#123;</span></CodeLine>
<Link id="l01421" /><CodeLine lineNumber="1421"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ST.hasDwordx3LoadStores())</span></CodeLine>
<Link id="l01422" /><CodeLine lineNumber="1422"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01423" /><CodeLine lineNumber="1423"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01424" /><CodeLine lineNumber="1424"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If the alignment allows, these should have been widened.</span></CodeLine>
<Link id="l01425" /><CodeLine lineNumber="1425"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(NumRegs))</span></CodeLine>
<Link id="l01426" /><CodeLine lineNumber="1426"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01427" /><CodeLine lineNumber="1427"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01428" /><CodeLine lineNumber="1428"></CodeLine>
<Link id="l01429" /><CodeLine lineNumber="1429"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01430" /><CodeLine lineNumber="1430"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l01431" /><CodeLine lineNumber="1431"></CodeLine>
<Link id="l01432" /><CodeLine lineNumber="1432"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> GlobalAlign32 = ST.hasUnalignedBufferAccessEnabled() ? 0 : 32;</span></CodeLine>
<Link id="l01433" /><CodeLine lineNumber="1433"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> GlobalAlign16 = ST.hasUnalignedBufferAccessEnabled() ? 0 : 16;</span></CodeLine>
<Link id="l01434" /><CodeLine lineNumber="1434"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> GlobalAlign8 = ST.hasUnalignedBufferAccessEnabled() ? 0 : 8;</span></CodeLine>
<Link id="l01435" /><CodeLine lineNumber="1435"></CodeLine>
<Link id="l01436" /><CodeLine lineNumber="1436"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Refine based on subtargets which support unaligned access or 128-bit</span></CodeLine>
<Link id="l01437" /><CodeLine lineNumber="1437"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// LDS</span></CodeLine>
<Link id="l01438" /><CodeLine lineNumber="1438"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Unsupported flat for SI.</span></CodeLine>
<Link id="l01439" /><CodeLine lineNumber="1439"></CodeLine>
<Link id="l01440" /><CodeLine lineNumber="1440"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> : &#123;G&#95;LOAD, G&#95;STORE&#125;) &#123;</span></CodeLine>
<Link id="l01441" /><CodeLine lineNumber="1441"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsStore = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> == G&#95;STORE;</span></CodeLine>
<Link id="l01442" /><CodeLine lineNumber="1442"></CodeLine>
<Link id="l01443" /><CodeLine lineNumber="1443"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Actions = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>);</span></CodeLine>
<Link id="l01444" /><CodeLine lineNumber="1444"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Explicitly list some common cases.</span></CodeLine>
<Link id="l01445" /><CodeLine lineNumber="1445"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Does this help compile time at all?</span></CodeLine>
<Link id="l01446" /><CodeLine lineNumber="1446"><span class="doxyHighlight">    Actions.legalForTypesWithMemDesc(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, GlobalPtr, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, GlobalAlign32&#125;,</span></CodeLine>
<Link id="l01447" /><CodeLine lineNumber="1447"><span class="doxyHighlight">                                      &#123;<a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a>, GlobalPtr, <a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a>, GlobalAlign32&#125;,</span></CodeLine>
<Link id="l01448" /><CodeLine lineNumber="1448"><span class="doxyHighlight">                                      &#123;<a href="#a0af4f63c268470ef2eac6477d33fdce4">V4S32</a>, GlobalPtr, <a href="#a0af4f63c268470ef2eac6477d33fdce4">V4S32</a>, GlobalAlign32&#125;,</span></CodeLine>
<Link id="l01449" /><CodeLine lineNumber="1449"><span class="doxyHighlight">                                      &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, GlobalPtr, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, GlobalAlign32&#125;,</span></CodeLine>
<Link id="l01450" /><CodeLine lineNumber="1450"><span class="doxyHighlight">                                      &#123;<a href="#acb4ecd614e176840d5b2360a176f1333">V2S64</a>, GlobalPtr, <a href="#acb4ecd614e176840d5b2360a176f1333">V2S64</a>, GlobalAlign32&#125;,</span></CodeLine>
<Link id="l01451" /><CodeLine lineNumber="1451"><span class="doxyHighlight">                                      &#123;<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, GlobalPtr, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, GlobalAlign32&#125;,</span></CodeLine>
<Link id="l01452" /><CodeLine lineNumber="1452"><span class="doxyHighlight">                                      &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, GlobalPtr, <a href="#af00ba7c018760702ba16a5009cec810c">S8</a>, GlobalAlign8&#125;,</span></CodeLine>
<Link id="l01453" /><CodeLine lineNumber="1453"><span class="doxyHighlight">                                      &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, GlobalPtr, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, GlobalAlign16&#125;,</span></CodeLine>
<Link id="l01454" /><CodeLine lineNumber="1454"></CodeLine>
<Link id="l01455" /><CodeLine lineNumber="1455"><span class="doxyHighlight">                                      &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LocalPtr, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 32&#125;,</span></CodeLine>
<Link id="l01456" /><CodeLine lineNumber="1456"><span class="doxyHighlight">                                      &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, LocalPtr, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, 32&#125;,</span></CodeLine>
<Link id="l01457" /><CodeLine lineNumber="1457"><span class="doxyHighlight">                                      &#123;<a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a>, LocalPtr, <a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a>, 32&#125;,</span></CodeLine>
<Link id="l01458" /><CodeLine lineNumber="1458"><span class="doxyHighlight">                                      &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LocalPtr, <a href="#af00ba7c018760702ba16a5009cec810c">S8</a>, 8&#125;,</span></CodeLine>
<Link id="l01459" /><CodeLine lineNumber="1459"><span class="doxyHighlight">                                      &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LocalPtr, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 16&#125;,</span></CodeLine>
<Link id="l01460" /><CodeLine lineNumber="1460"><span class="doxyHighlight">                                      &#123;<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, LocalPtr, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 32&#125;,</span></CodeLine>
<Link id="l01461" /><CodeLine lineNumber="1461"></CodeLine>
<Link id="l01462" /><CodeLine lineNumber="1462"><span class="doxyHighlight">                                      &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, PrivatePtr, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 32&#125;,</span></CodeLine>
<Link id="l01463" /><CodeLine lineNumber="1463"><span class="doxyHighlight">                                      &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, PrivatePtr, <a href="#af00ba7c018760702ba16a5009cec810c">S8</a>, 8&#125;,</span></CodeLine>
<Link id="l01464" /><CodeLine lineNumber="1464"><span class="doxyHighlight">                                      &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, PrivatePtr, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 16&#125;,</span></CodeLine>
<Link id="l01465" /><CodeLine lineNumber="1465"><span class="doxyHighlight">                                      &#123;<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, PrivatePtr, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 32&#125;,</span></CodeLine>
<Link id="l01466" /><CodeLine lineNumber="1466"></CodeLine>
<Link id="l01467" /><CodeLine lineNumber="1467"><span class="doxyHighlight">                                      &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, ConstantPtr, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, GlobalAlign32&#125;,</span></CodeLine>
<Link id="l01468" /><CodeLine lineNumber="1468"><span class="doxyHighlight">                                      &#123;<a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a>, ConstantPtr, <a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a>, GlobalAlign32&#125;,</span></CodeLine>
<Link id="l01469" /><CodeLine lineNumber="1469"><span class="doxyHighlight">                                      &#123;<a href="#a0af4f63c268470ef2eac6477d33fdce4">V4S32</a>, ConstantPtr, <a href="#a0af4f63c268470ef2eac6477d33fdce4">V4S32</a>, GlobalAlign32&#125;,</span></CodeLine>
<Link id="l01470" /><CodeLine lineNumber="1470"><span class="doxyHighlight">                                      &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, ConstantPtr, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, GlobalAlign32&#125;,</span></CodeLine>
<Link id="l01471" /><CodeLine lineNumber="1471"><span class="doxyHighlight">                                      &#123;<a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a>, ConstantPtr, <a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a>, GlobalAlign32&#125;&#125;);</span></CodeLine>
<Link id="l01472" /><CodeLine lineNumber="1472"><span class="doxyHighlight">    Actions.legalIf(</span></CodeLine>
<Link id="l01473" /><CodeLine lineNumber="1473"><span class="doxyHighlight">      &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) -&gt; </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01474" /><CodeLine lineNumber="1474"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#ad2c8a875d4d2a4e73f7a48e64226b265">isLoadStoreLegal</a>(ST, Query);</span></CodeLine>
<Link id="l01475" /><CodeLine lineNumber="1475"><span class="doxyHighlight">      &#125;);</span></CodeLine>
<Link id="l01476" /><CodeLine lineNumber="1476"></CodeLine>
<Link id="l01477" /><CodeLine lineNumber="1477"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The custom pointers (fat pointers, buffer resources) don&#39;t work with load</span></CodeLine>
<Link id="l01478" /><CodeLine lineNumber="1478"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// and store at this level. Fat pointers should have been lowered to</span></CodeLine>
<Link id="l01479" /><CodeLine lineNumber="1479"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// intrinsics before the translation to MIR.</span></CodeLine>
<Link id="l01480" /><CodeLine lineNumber="1480"><span class="doxyHighlight">    Actions.unsupportedIf(</span></CodeLine>
<Link id="l01481" /><CodeLine lineNumber="1481"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/legalitypredicates/#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(1, &#123;BufferFatPtr, BufferStridedPtr, RsrcPtr&#125;));</span></CodeLine>
<Link id="l01482" /><CodeLine lineNumber="1482"></CodeLine>
<Link id="l01483" /><CodeLine lineNumber="1483"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Address space 8 pointers are handled by a 4xs32 load, bitcast, and</span></CodeLine>
<Link id="l01484" /><CodeLine lineNumber="1484"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// ptrtoint. This is needed to account for the fact that we can&#39;t have i128</span></CodeLine>
<Link id="l01485" /><CodeLine lineNumber="1485"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// as a register class for SelectionDAG reasons.</span></CodeLine>
<Link id="l01486" /><CodeLine lineNumber="1486"><span class="doxyHighlight">    Actions.customIf(&#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) -&gt; </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01487" /><CodeLine lineNumber="1487"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#abb71b9eb64250d4491336cf106be74eb">hasBufferRsrcWorkaround</a>(Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;);</span></CodeLine>
<Link id="l01488" /><CodeLine lineNumber="1488"><span class="doxyHighlight">    &#125;);</span></CodeLine>
<Link id="l01489" /><CodeLine lineNumber="1489"></CodeLine>
<Link id="l01490" /><CodeLine lineNumber="1490"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Constant 32-bit is handled by addrspacecasting the 32-bit pointer to</span></CodeLine>
<Link id="l01491" /><CodeLine lineNumber="1491"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// 64-bits.</span></CodeLine>
<Link id="l01492" /><CodeLine lineNumber="1492"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l01493" /><CodeLine lineNumber="1493"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Should generalize bitcast action into coerce, which will also cover</span></CodeLine>
<Link id="l01494" /><CodeLine lineNumber="1494"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// inserting addrspacecasts.</span></CodeLine>
<Link id="l01495" /><CodeLine lineNumber="1495"><span class="doxyHighlight">    Actions.customIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(1, Constant32Ptr));</span></CodeLine>
<Link id="l01496" /><CodeLine lineNumber="1496"></CodeLine>
<Link id="l01497" /><CodeLine lineNumber="1497"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Turn any illegal element vectors into something easier to deal</span></CodeLine>
<Link id="l01498" /><CodeLine lineNumber="1498"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// with. These will ultimately produce 32-bit scalar shifts to extract the</span></CodeLine>
<Link id="l01499" /><CodeLine lineNumber="1499"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// parts anyway.</span></CodeLine>
<Link id="l01500" /><CodeLine lineNumber="1500"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l01501" /><CodeLine lineNumber="1501"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For odd 16-bit element vectors, prefer to split those into pieces with</span></CodeLine>
<Link id="l01502" /><CodeLine lineNumber="1502"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// 16-bit vector parts.</span></CodeLine>
<Link id="l01503" /><CodeLine lineNumber="1503"><span class="doxyHighlight">    Actions.bitcastIf(</span></CodeLine>
<Link id="l01504" /><CodeLine lineNumber="1504"><span class="doxyHighlight">      &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) -&gt; </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01505" /><CodeLine lineNumber="1505"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a1c42298ffb49a95c87577d3e5de46aea">shouldBitcastLoadStoreType</a>(ST, Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;,</span></CodeLine>
<Link id="l01506" /><CodeLine lineNumber="1506"><span class="doxyHighlight">                                          Query.<a href="/docs/api/structs/llvm/legalityquery/#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>&#91;0&#93;.MemoryTy);</span></CodeLine>
<Link id="l01507" /><CodeLine lineNumber="1507"><span class="doxyHighlight">      &#125;, <a href="#a6eb46b558dd23ba908853adcc6ba76b7">bitcastToRegisterType</a>(0));</span></CodeLine>
<Link id="l01508" /><CodeLine lineNumber="1508"></CodeLine>
<Link id="l01509" /><CodeLine lineNumber="1509"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!IsStore) &#123;</span></CodeLine>
<Link id="l01510" /><CodeLine lineNumber="1510"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Widen suitably aligned loads by loading extra bytes. The standard</span></CodeLine>
<Link id="l01511" /><CodeLine lineNumber="1511"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// legalization actions can&#39;t properly express widening memory operands.</span></CodeLine>
<Link id="l01512" /><CodeLine lineNumber="1512"><span class="doxyHighlight">      Actions.customIf(&#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) -&gt; </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01513" /><CodeLine lineNumber="1513"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a2d595a51e66614b8adb83efbc8114401">shouldWidenLoad</a>(ST, Query, G&#95;LOAD);</span></CodeLine>
<Link id="l01514" /><CodeLine lineNumber="1514"><span class="doxyHighlight">      &#125;);</span></CodeLine>
<Link id="l01515" /><CodeLine lineNumber="1515"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01516" /><CodeLine lineNumber="1516"></CodeLine>
<Link id="l01517" /><CodeLine lineNumber="1517"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: load/store narrowing should be moved to lower action</span></CodeLine>
<Link id="l01518" /><CodeLine lineNumber="1518"><span class="doxyHighlight">    Actions</span></CodeLine>
<Link id="l01519" /><CodeLine lineNumber="1519"><span class="doxyHighlight">        .narrowScalarIf(</span></CodeLine>
<Link id="l01520" /><CodeLine lineNumber="1520"><span class="doxyHighlight">            &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) -&gt; </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01521" /><CodeLine lineNumber="1521"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> !Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;.isVector() &amp;&amp;</span></CodeLine>
<Link id="l01522" /><CodeLine lineNumber="1522"><span class="doxyHighlight">                     needToSplitMemOp(Query, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> == G&#95;LOAD);</span></CodeLine>
<Link id="l01523" /><CodeLine lineNumber="1523"><span class="doxyHighlight">            &#125;,</span></CodeLine>
<Link id="l01524" /><CodeLine lineNumber="1524"><span class="doxyHighlight">            &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) -&gt; std::pair&lt;unsigned, LLT&gt; &#123;</span></CodeLine>
<Link id="l01525" /><CodeLine lineNumber="1525"><span class="doxyHighlight">              </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> DstTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;;</span></CodeLine>
<Link id="l01526" /><CodeLine lineNumber="1526"><span class="doxyHighlight">              </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> PtrTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;1&#93;;</span></CodeLine>
<Link id="l01527" /><CodeLine lineNumber="1527"></CodeLine>
<Link id="l01528" /><CodeLine lineNumber="1528"><span class="doxyHighlight">              </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> DstSize = DstTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</span></CodeLine>
<Link id="l01529" /><CodeLine lineNumber="1529"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> MemSize = Query.<a href="/docs/api/structs/llvm/legalityquery/#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>&#91;0&#93;.MemoryTy.getSizeInBits();</span></CodeLine>
<Link id="l01530" /><CodeLine lineNumber="1530"></CodeLine>
<Link id="l01531" /><CodeLine lineNumber="1531"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// Split extloads.</span></CodeLine>
<Link id="l01532" /><CodeLine lineNumber="1532"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DstSize &gt; MemSize)</span></CodeLine>
<Link id="l01533" /><CodeLine lineNumber="1533"><span class="doxyHighlight">                </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(0, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(MemSize));</span></CodeLine>
<Link id="l01534" /><CodeLine lineNumber="1534"></CodeLine>
<Link id="l01535" /><CodeLine lineNumber="1535"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> MaxSize = <a href="#a807f9ab682878abe0a704736d1f9f298">maxSizeForAddrSpace</a>(</span></CodeLine>
<Link id="l01536" /><CodeLine lineNumber="1536"><span class="doxyHighlight">                  ST, PtrTy.<a href="/docs/api/classes/llvm/llt/#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>(), <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> == G&#95;LOAD,</span></CodeLine>
<Link id="l01537" /><CodeLine lineNumber="1537"><span class="doxyHighlight">                  Query.<a href="/docs/api/structs/llvm/legalityquery/#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>&#91;0&#93;.Ordering != <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>);</span></CodeLine>
<Link id="l01538" /><CodeLine lineNumber="1538"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MemSize &gt; MaxSize)</span></CodeLine>
<Link id="l01539" /><CodeLine lineNumber="1539"><span class="doxyHighlight">                </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(0, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(MaxSize));</span></CodeLine>
<Link id="l01540" /><CodeLine lineNumber="1540"></CodeLine>
<Link id="l01541" /><CodeLine lineNumber="1541"><span class="doxyHighlight">              uint64&#95;t <a href="/docs/api/structs/llvm/align">Align</a> = Query.<a href="/docs/api/structs/llvm/legalityquery/#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>&#91;0&#93;.AlignInBits;</span></CodeLine>
<Link id="l01542" /><CodeLine lineNumber="1542"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(0, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(<a href="/docs/api/structs/llvm/align">Align</a>));</span></CodeLine>
<Link id="l01543" /><CodeLine lineNumber="1543"><span class="doxyHighlight">            &#125;)</span></CodeLine>
<Link id="l01544" /><CodeLine lineNumber="1544"><span class="doxyHighlight">        .fewerElementsIf(</span></CodeLine>
<Link id="l01545" /><CodeLine lineNumber="1545"><span class="doxyHighlight">            &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) -&gt; </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01546" /><CodeLine lineNumber="1546"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;.isVector() &amp;&amp;</span></CodeLine>
<Link id="l01547" /><CodeLine lineNumber="1547"><span class="doxyHighlight">                     needToSplitMemOp(Query, <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> == G&#95;LOAD);</span></CodeLine>
<Link id="l01548" /><CodeLine lineNumber="1548"><span class="doxyHighlight">            &#125;,</span></CodeLine>
<Link id="l01549" /><CodeLine lineNumber="1549"><span class="doxyHighlight">            &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) -&gt; std::pair&lt;unsigned, LLT&gt; &#123;</span></CodeLine>
<Link id="l01550" /><CodeLine lineNumber="1550"><span class="doxyHighlight">              </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> DstTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;;</span></CodeLine>
<Link id="l01551" /><CodeLine lineNumber="1551"><span class="doxyHighlight">              </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> PtrTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;1&#93;;</span></CodeLine>
<Link id="l01552" /><CodeLine lineNumber="1552"></CodeLine>
<Link id="l01553" /><CodeLine lineNumber="1553"><span class="doxyHighlight">              <a href="/docs/api/classes/llvm/llt">LLT</a> EltTy = DstTy.<a href="/docs/api/classes/llvm/llt/#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</span></CodeLine>
<Link id="l01554" /><CodeLine lineNumber="1554"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> MaxSize = <a href="#a807f9ab682878abe0a704736d1f9f298">maxSizeForAddrSpace</a>(</span></CodeLine>
<Link id="l01555" /><CodeLine lineNumber="1555"><span class="doxyHighlight">                  ST, PtrTy.<a href="/docs/api/classes/llvm/llt/#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>(), <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> == G&#95;LOAD,</span></CodeLine>
<Link id="l01556" /><CodeLine lineNumber="1556"><span class="doxyHighlight">                  Query.<a href="/docs/api/structs/llvm/legalityquery/#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>&#91;0&#93;.Ordering != <a href="/docs/api/namespaces/llvm/#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>);</span></CodeLine>
<Link id="l01557" /><CodeLine lineNumber="1557"></CodeLine>
<Link id="l01558" /><CodeLine lineNumber="1558"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// FIXME: Handle widened to power of 2 results better. This ends</span></CodeLine>
<Link id="l01559" /><CodeLine lineNumber="1559"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// up scalarizing.</span></CodeLine>
<Link id="l01560" /><CodeLine lineNumber="1560"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// FIXME: 3 element stores scalarized on SI</span></CodeLine>
<Link id="l01561" /><CodeLine lineNumber="1561"></CodeLine>
<Link id="l01562" /><CodeLine lineNumber="1562"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// Split if it&#39;s too large for the address space.</span></CodeLine>
<Link id="l01563" /><CodeLine lineNumber="1563"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> MemSize = Query.<a href="/docs/api/structs/llvm/legalityquery/#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>&#91;0&#93;.MemoryTy.getSizeInBits();</span></CodeLine>
<Link id="l01564" /><CodeLine lineNumber="1564"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MemSize &gt; MaxSize) &#123;</span></CodeLine>
<Link id="l01565" /><CodeLine lineNumber="1565"><span class="doxyHighlight">                </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumElts = DstTy.<a href="/docs/api/classes/llvm/llt/#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</span></CodeLine>
<Link id="l01566" /><CodeLine lineNumber="1566"><span class="doxyHighlight">                </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> EltSize = EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</span></CodeLine>
<Link id="l01567" /><CodeLine lineNumber="1567"></CodeLine>
<Link id="l01568" /><CodeLine lineNumber="1568"><span class="doxyHighlight">                </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MaxSize % EltSize == 0) &#123;</span></CodeLine>
<Link id="l01569" /><CodeLine lineNumber="1569"><span class="doxyHighlight">                  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(</span></CodeLine>
<Link id="l01570" /><CodeLine lineNumber="1570"><span class="doxyHighlight">                      0, <a href="/docs/api/classes/llvm/llt/#ae74a60e5edcee0609a1e4fddc62a8a01">LLT::scalarOrVector</a>(</span></CodeLine>
<Link id="l01571" /><CodeLine lineNumber="1571"><span class="doxyHighlight">                             <a href="/docs/api/classes/llvm/elementcount/#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(MaxSize / EltSize), EltTy));</span></CodeLine>
<Link id="l01572" /><CodeLine lineNumber="1572"><span class="doxyHighlight">                &#125;</span></CodeLine>
<Link id="l01573" /><CodeLine lineNumber="1573"></CodeLine>
<Link id="l01574" /><CodeLine lineNumber="1574"><span class="doxyHighlight">                </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumPieces = MemSize / MaxSize;</span></CodeLine>
<Link id="l01575" /><CodeLine lineNumber="1575"></CodeLine>
<Link id="l01576" /><CodeLine lineNumber="1576"><span class="doxyHighlight">                </span><span class="doxyHighlightComment">// FIXME: Refine when odd breakdowns handled</span></CodeLine>
<Link id="l01577" /><CodeLine lineNumber="1577"><span class="doxyHighlight">                </span><span class="doxyHighlightComment">// The scalars will need to be re-legalized.</span></CodeLine>
<Link id="l01578" /><CodeLine lineNumber="1578"><span class="doxyHighlight">                </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumPieces == 1 || NumPieces &gt;= NumElts ||</span></CodeLine>
<Link id="l01579" /><CodeLine lineNumber="1579"><span class="doxyHighlight">                    NumElts % NumPieces != 0)</span></CodeLine>
<Link id="l01580" /><CodeLine lineNumber="1580"><span class="doxyHighlight">                  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(0, EltTy);</span></CodeLine>
<Link id="l01581" /><CodeLine lineNumber="1581"></CodeLine>
<Link id="l01582" /><CodeLine lineNumber="1582"><span class="doxyHighlight">                </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(0,</span></CodeLine>
<Link id="l01583" /><CodeLine lineNumber="1583"><span class="doxyHighlight">                                 <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(NumElts / NumPieces, EltTy));</span></CodeLine>
<Link id="l01584" /><CodeLine lineNumber="1584"><span class="doxyHighlight">              &#125;</span></CodeLine>
<Link id="l01585" /><CodeLine lineNumber="1585"></CodeLine>
<Link id="l01586" /><CodeLine lineNumber="1586"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// FIXME: We could probably handle weird extending loads better.</span></CodeLine>
<Link id="l01587" /><CodeLine lineNumber="1587"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DstTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; MemSize)</span></CodeLine>
<Link id="l01588" /><CodeLine lineNumber="1588"><span class="doxyHighlight">                </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(0, EltTy);</span></CodeLine>
<Link id="l01589" /><CodeLine lineNumber="1589"></CodeLine>
<Link id="l01590" /><CodeLine lineNumber="1590"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> EltSize = EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</span></CodeLine>
<Link id="l01591" /><CodeLine lineNumber="1591"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> DstSize = DstTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</span></CodeLine>
<Link id="l01592" /><CodeLine lineNumber="1592"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(DstSize)) &#123;</span></CodeLine>
<Link id="l01593" /><CodeLine lineNumber="1593"><span class="doxyHighlight">                </span><span class="doxyHighlightComment">// We&#39;re probably decomposing an odd sized store. Try to split</span></CodeLine>
<Link id="l01594" /><CodeLine lineNumber="1594"><span class="doxyHighlight">                </span><span class="doxyHighlightComment">// to the widest type. TODO: Account for alignment. As-is it</span></CodeLine>
<Link id="l01595" /><CodeLine lineNumber="1595"><span class="doxyHighlight">                </span><span class="doxyHighlightComment">// should be OK, since the new parts will be further legalized.</span></CodeLine>
<Link id="l01596" /><CodeLine lineNumber="1596"><span class="doxyHighlight">                </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> FloorSize = <a href="/docs/api/namespaces/llvm/#ae22967d11b695d268992470debfae4b2">llvm::bit&#95;floor</a>(DstSize);</span></CodeLine>
<Link id="l01597" /><CodeLine lineNumber="1597"><span class="doxyHighlight">                </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(</span></CodeLine>
<Link id="l01598" /><CodeLine lineNumber="1598"><span class="doxyHighlight">                    0, <a href="/docs/api/classes/llvm/llt/#ae74a60e5edcee0609a1e4fddc62a8a01">LLT::scalarOrVector</a>(</span></CodeLine>
<Link id="l01599" /><CodeLine lineNumber="1599"><span class="doxyHighlight">                           <a href="/docs/api/classes/llvm/elementcount/#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(FloorSize / EltSize), EltTy));</span></CodeLine>
<Link id="l01600" /><CodeLine lineNumber="1600"><span class="doxyHighlight">              &#125;</span></CodeLine>
<Link id="l01601" /><CodeLine lineNumber="1601"></CodeLine>
<Link id="l01602" /><CodeLine lineNumber="1602"><span class="doxyHighlight">              </span><span class="doxyHighlightComment">// May need relegalization for the scalars.</span></CodeLine>
<Link id="l01603" /><CodeLine lineNumber="1603"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(0, EltTy);</span></CodeLine>
<Link id="l01604" /><CodeLine lineNumber="1604"><span class="doxyHighlight">            &#125;)</span></CodeLine>
<Link id="l01605" /><CodeLine lineNumber="1605"><span class="doxyHighlight">    .minScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01606" /><CodeLine lineNumber="1606"><span class="doxyHighlight">    .narrowScalarIf(<a href="#ab92c68720091c48aa146f82db0f9ce88">isWideScalarExtLoadTruncStore</a>(0), <a href="/docs/api/namespaces/llvm/legalizemutations/#acd331b959990c033f8d612adf7701b05">changeTo</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>))</span></CodeLine>
<Link id="l01607" /><CodeLine lineNumber="1607"><span class="doxyHighlight">    .widenScalarToNextPow2(0)</span></CodeLine>
<Link id="l01608" /><CodeLine lineNumber="1608"><span class="doxyHighlight">    .moreElementsIf(<a href="#a144b2ed41ce4f22842225b0b1b117a58">vectorSmallerThan</a>(0, 32), <a href="#ad64f039266036a2ac4d704000928d65b">moreEltsToNext32Bit</a>(0))</span></CodeLine>
<Link id="l01609" /><CodeLine lineNumber="1609"><span class="doxyHighlight">    .lower();</span></CodeLine>
<Link id="l01610" /><CodeLine lineNumber="1610"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01611" /><CodeLine lineNumber="1611"></CodeLine>
<Link id="l01612" /><CodeLine lineNumber="1612"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: Unaligned accesses not lowered.</span></CodeLine>
<Link id="l01613" /><CodeLine lineNumber="1613"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;ExtLoads = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;SEXTLOAD, G&#95;ZEXTLOAD&#125;)</span></CodeLine>
<Link id="l01614" /><CodeLine lineNumber="1614"><span class="doxyHighlight">                       .legalForTypesWithMemDesc(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, GlobalPtr, <a href="#af00ba7c018760702ba16a5009cec810c">S8</a>, 8&#125;,</span></CodeLine>
<Link id="l01615" /><CodeLine lineNumber="1615"><span class="doxyHighlight">                                                  &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, GlobalPtr, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2 &#42; 8&#125;,</span></CodeLine>
<Link id="l01616" /><CodeLine lineNumber="1616"><span class="doxyHighlight">                                                  &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LocalPtr, <a href="#af00ba7c018760702ba16a5009cec810c">S8</a>, 8&#125;,</span></CodeLine>
<Link id="l01617" /><CodeLine lineNumber="1617"><span class="doxyHighlight">                                                  &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LocalPtr, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 16&#125;,</span></CodeLine>
<Link id="l01618" /><CodeLine lineNumber="1618"><span class="doxyHighlight">                                                  &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, PrivatePtr, <a href="#af00ba7c018760702ba16a5009cec810c">S8</a>, 8&#125;,</span></CodeLine>
<Link id="l01619" /><CodeLine lineNumber="1619"><span class="doxyHighlight">                                                  &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, PrivatePtr, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 16&#125;,</span></CodeLine>
<Link id="l01620" /><CodeLine lineNumber="1620"><span class="doxyHighlight">                                                  &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, ConstantPtr, <a href="#af00ba7c018760702ba16a5009cec810c">S8</a>, 8&#125;,</span></CodeLine>
<Link id="l01621" /><CodeLine lineNumber="1621"><span class="doxyHighlight">                                                  &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, ConstantPtr, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2 &#42; 8&#125;&#125;)</span></CodeLine>
<Link id="l01622" /><CodeLine lineNumber="1622"><span class="doxyHighlight">                       .legalIf(</span></CodeLine>
<Link id="l01623" /><CodeLine lineNumber="1623"><span class="doxyHighlight">                         &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) -&gt; </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01624" /><CodeLine lineNumber="1624"><span class="doxyHighlight">                           </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#ad2c8a875d4d2a4e73f7a48e64226b265">isLoadStoreLegal</a>(ST, Query);</span></CodeLine>
<Link id="l01625" /><CodeLine lineNumber="1625"><span class="doxyHighlight">                         &#125;);</span></CodeLine>
<Link id="l01626" /><CodeLine lineNumber="1626"></CodeLine>
<Link id="l01627" /><CodeLine lineNumber="1627"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasFlatAddressSpace()) &#123;</span></CodeLine>
<Link id="l01628" /><CodeLine lineNumber="1628"><span class="doxyHighlight">    ExtLoads.legalForTypesWithMemDesc(</span></CodeLine>
<Link id="l01629" /><CodeLine lineNumber="1629"><span class="doxyHighlight">        &#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, FlatPtr, <a href="#af00ba7c018760702ba16a5009cec810c">S8</a>, 8&#125;, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, FlatPtr, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 16&#125;&#125;);</span></CodeLine>
<Link id="l01630" /><CodeLine lineNumber="1630"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01631" /><CodeLine lineNumber="1631"></CodeLine>
<Link id="l01632" /><CodeLine lineNumber="1632"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Constant 32-bit is handled by addrspacecasting the 32-bit pointer to</span></CodeLine>
<Link id="l01633" /><CodeLine lineNumber="1633"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// 64-bits.</span></CodeLine>
<Link id="l01634" /><CodeLine lineNumber="1634"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l01635" /><CodeLine lineNumber="1635"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Should generalize bitcast action into coerce, which will also cover</span></CodeLine>
<Link id="l01636" /><CodeLine lineNumber="1636"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// inserting addrspacecasts.</span></CodeLine>
<Link id="l01637" /><CodeLine lineNumber="1637"><span class="doxyHighlight">  ExtLoads.<a href="/docs/api/classes/llvm/legalizeruleset/#acda429561493e08ee5cef54f26a1224c">customIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(1, Constant32Ptr));</span></CodeLine>
<Link id="l01638" /><CodeLine lineNumber="1638"></CodeLine>
<Link id="l01639" /><CodeLine lineNumber="1639"><span class="doxyHighlight">  ExtLoads.<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01640" /><CodeLine lineNumber="1640"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0)</span></CodeLine>
<Link id="l01641" /><CodeLine lineNumber="1641"><span class="doxyHighlight">          .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01642" /><CodeLine lineNumber="1642"></CodeLine>
<Link id="l01643" /><CodeLine lineNumber="1643"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Atomics = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</span></CodeLine>
<Link id="l01644" /><CodeLine lineNumber="1644"><span class="doxyHighlight">    &#123;G&#95;ATOMICRMW&#95;XCHG, G&#95;ATOMICRMW&#95;ADD, G&#95;ATOMICRMW&#95;SUB,</span></CodeLine>
<Link id="l01645" /><CodeLine lineNumber="1645"><span class="doxyHighlight">     G&#95;ATOMICRMW&#95;AND, G&#95;ATOMICRMW&#95;OR, G&#95;ATOMICRMW&#95;XOR,</span></CodeLine>
<Link id="l01646" /><CodeLine lineNumber="1646"><span class="doxyHighlight">     G&#95;ATOMICRMW&#95;MAX, G&#95;ATOMICRMW&#95;MIN, G&#95;ATOMICRMW&#95;UMAX,</span></CodeLine>
<Link id="l01647" /><CodeLine lineNumber="1647"><span class="doxyHighlight">     G&#95;ATOMICRMW&#95;UMIN, G&#95;ATOMICRMW&#95;UINC&#95;WRAP, G&#95;ATOMICRMW&#95;UDEC&#95;WRAP&#125;)</span></CodeLine>
<Link id="l01648" /><CodeLine lineNumber="1648"><span class="doxyHighlight">    .legalFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, GlobalPtr&#125;, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LocalPtr&#125;,</span></CodeLine>
<Link id="l01649" /><CodeLine lineNumber="1649"><span class="doxyHighlight">               &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, GlobalPtr&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, LocalPtr&#125;,</span></CodeLine>
<Link id="l01650" /><CodeLine lineNumber="1650"><span class="doxyHighlight">               &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, RegionPtr&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, RegionPtr&#125;&#125;);</span></CodeLine>
<Link id="l01651" /><CodeLine lineNumber="1651"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasFlatAddressSpace()) &#123;</span></CodeLine>
<Link id="l01652" /><CodeLine lineNumber="1652"><span class="doxyHighlight">    Atomics.legalFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, FlatPtr&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, FlatPtr&#125;&#125;);</span></CodeLine>
<Link id="l01653" /><CodeLine lineNumber="1653"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01654" /><CodeLine lineNumber="1654"></CodeLine>
<Link id="l01655" /><CodeLine lineNumber="1655"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: v2bf16 operations, and fat buffer pointer support.</span></CodeLine>
<Link id="l01656" /><CodeLine lineNumber="1656"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Atomic = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;ATOMICRMW&#95;FADD);</span></CodeLine>
<Link id="l01657" /><CodeLine lineNumber="1657"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasLDSFPAtomicAddF32()) &#123;</span></CodeLine>
<Link id="l01658" /><CodeLine lineNumber="1658"><span class="doxyHighlight">    Atomic.legalFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LocalPtr&#125;, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, RegionPtr&#125;&#125;);</span></CodeLine>
<Link id="l01659" /><CodeLine lineNumber="1659"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasLdsAtomicAddF64())</span></CodeLine>
<Link id="l01660" /><CodeLine lineNumber="1660"><span class="doxyHighlight">      Atomic.legalFor(&#123;&#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, LocalPtr&#125;&#125;);</span></CodeLine>
<Link id="l01661" /><CodeLine lineNumber="1661"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasAtomicDsPkAdd16Insts())</span></CodeLine>
<Link id="l01662" /><CodeLine lineNumber="1662"><span class="doxyHighlight">      Atomic.legalFor(&#123;&#123;<a href="#ade55769087ba2b628fd60dc76161764f">V2F16</a>, LocalPtr&#125;, &#123;<a href="#aa6c31d3f7f1803b32735d9b3568e7f12">V2BF16</a>, LocalPtr&#125;&#125;);</span></CodeLine>
<Link id="l01663" /><CodeLine lineNumber="1663"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01664" /><CodeLine lineNumber="1664"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasAtomicFaddInsts())</span></CodeLine>
<Link id="l01665" /><CodeLine lineNumber="1665"><span class="doxyHighlight">    Atomic.legalFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, GlobalPtr&#125;&#125;);</span></CodeLine>
<Link id="l01666" /><CodeLine lineNumber="1666"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasFlatAtomicFaddF32Inst())</span></CodeLine>
<Link id="l01667" /><CodeLine lineNumber="1667"><span class="doxyHighlight">    Atomic.legalFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, FlatPtr&#125;&#125;);</span></CodeLine>
<Link id="l01668" /><CodeLine lineNumber="1668"></CodeLine>
<Link id="l01669" /><CodeLine lineNumber="1669"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasGFX90AInsts()) &#123;</span></CodeLine>
<Link id="l01670" /><CodeLine lineNumber="1670"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// These are legal with some caveats, and should have undergone expansion in</span></CodeLine>
<Link id="l01671" /><CodeLine lineNumber="1671"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the IR in most situations</span></CodeLine>
<Link id="l01672" /><CodeLine lineNumber="1672"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Move atomic expansion into legalizer</span></CodeLine>
<Link id="l01673" /><CodeLine lineNumber="1673"><span class="doxyHighlight">    Atomic.legalFor(&#123;</span></CodeLine>
<Link id="l01674" /><CodeLine lineNumber="1674"><span class="doxyHighlight">        &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, GlobalPtr&#125;,</span></CodeLine>
<Link id="l01675" /><CodeLine lineNumber="1675"><span class="doxyHighlight">        &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, GlobalPtr&#125;,</span></CodeLine>
<Link id="l01676" /><CodeLine lineNumber="1676"><span class="doxyHighlight">        &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, FlatPtr&#125;</span></CodeLine>
<Link id="l01677" /><CodeLine lineNumber="1677"><span class="doxyHighlight">      &#125;);</span></CodeLine>
<Link id="l01678" /><CodeLine lineNumber="1678"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01679" /><CodeLine lineNumber="1679"></CodeLine>
<Link id="l01680" /><CodeLine lineNumber="1680"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasAtomicBufferGlobalPkAddF16NoRtnInsts() ||</span></CodeLine>
<Link id="l01681" /><CodeLine lineNumber="1681"><span class="doxyHighlight">      ST.hasAtomicBufferGlobalPkAddF16Insts())</span></CodeLine>
<Link id="l01682" /><CodeLine lineNumber="1682"><span class="doxyHighlight">    Atomic.legalFor(&#123;&#123;<a href="#ade55769087ba2b628fd60dc76161764f">V2F16</a>, GlobalPtr&#125;, &#123;<a href="#ade55769087ba2b628fd60dc76161764f">V2F16</a>, BufferFatPtr&#125;&#125;);</span></CodeLine>
<Link id="l01683" /><CodeLine lineNumber="1683"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasAtomicGlobalPkAddBF16Inst())</span></CodeLine>
<Link id="l01684" /><CodeLine lineNumber="1684"><span class="doxyHighlight">    Atomic.legalFor(&#123;&#123;<a href="#aa6c31d3f7f1803b32735d9b3568e7f12">V2BF16</a>, GlobalPtr&#125;&#125;);</span></CodeLine>
<Link id="l01685" /><CodeLine lineNumber="1685"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasAtomicFlatPkAdd16Insts())</span></CodeLine>
<Link id="l01686" /><CodeLine lineNumber="1686"><span class="doxyHighlight">    Atomic.legalFor(&#123;&#123;<a href="#ade55769087ba2b628fd60dc76161764f">V2F16</a>, FlatPtr&#125;, &#123;<a href="#aa6c31d3f7f1803b32735d9b3568e7f12">V2BF16</a>, FlatPtr&#125;&#125;);</span></CodeLine>
<Link id="l01687" /><CodeLine lineNumber="1687"></CodeLine>
<Link id="l01688" /><CodeLine lineNumber="1688"></CodeLine>
<Link id="l01689" /><CodeLine lineNumber="1689"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Most of the legalization work here is done by AtomicExpand. We could</span></CodeLine>
<Link id="l01690" /><CodeLine lineNumber="1690"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// probably use a simpler legality rule that just assumes anything is OK.</span></CodeLine>
<Link id="l01691" /><CodeLine lineNumber="1691"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;AtomicFMinFMax =</span></CodeLine>
<Link id="l01692" /><CodeLine lineNumber="1692"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;ATOMICRMW&#95;FMIN, G&#95;ATOMICRMW&#95;FMAX&#125;)</span></CodeLine>
<Link id="l01693" /><CodeLine lineNumber="1693"><span class="doxyHighlight">    .legalFor(&#123;&#123;<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, LocalPtr&#125;, &#123;<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, LocalPtr&#125;&#125;);</span></CodeLine>
<Link id="l01694" /><CodeLine lineNumber="1694"></CodeLine>
<Link id="l01695" /><CodeLine lineNumber="1695"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasAtomicFMinFMaxF32GlobalInsts())</span></CodeLine>
<Link id="l01696" /><CodeLine lineNumber="1696"><span class="doxyHighlight">    AtomicFMinFMax.<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;&#123;<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, GlobalPtr&#125;,&#123;<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, BufferFatPtr&#125;&#125;);</span></CodeLine>
<Link id="l01697" /><CodeLine lineNumber="1697"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasAtomicFMinFMaxF64GlobalInsts())</span></CodeLine>
<Link id="l01698" /><CodeLine lineNumber="1698"><span class="doxyHighlight">    AtomicFMinFMax.<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;&#123;<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, GlobalPtr&#125;, &#123;<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, BufferFatPtr&#125;&#125;);</span></CodeLine>
<Link id="l01699" /><CodeLine lineNumber="1699"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasAtomicFMinFMaxF32FlatInsts())</span></CodeLine>
<Link id="l01700" /><CodeLine lineNumber="1700"><span class="doxyHighlight">    AtomicFMinFMax.<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, FlatPtr&#125;);</span></CodeLine>
<Link id="l01701" /><CodeLine lineNumber="1701"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasAtomicFMinFMaxF64FlatInsts())</span></CodeLine>
<Link id="l01702" /><CodeLine lineNumber="1702"><span class="doxyHighlight">    AtomicFMinFMax.<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, FlatPtr&#125;);</span></CodeLine>
<Link id="l01703" /><CodeLine lineNumber="1703"></CodeLine>
<Link id="l01704" /><CodeLine lineNumber="1704"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// BUFFER/FLAT&#95;ATOMIC&#95;CMP&#95;SWAP on GCN GPUs needs input marshalling, and output</span></CodeLine>
<Link id="l01705" /><CodeLine lineNumber="1705"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// demarshalling</span></CodeLine>
<Link id="l01706" /><CodeLine lineNumber="1706"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;ATOMIC&#95;CMPXCHG)</span></CodeLine>
<Link id="l01707" /><CodeLine lineNumber="1707"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#afc001d042e6a7093a6954b2d9ff18029">customFor</a>(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, GlobalPtr&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, GlobalPtr&#125;,</span></CodeLine>
<Link id="l01708" /><CodeLine lineNumber="1708"><span class="doxyHighlight">                &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, FlatPtr&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, FlatPtr&#125;&#125;)</span></CodeLine>
<Link id="l01709" /><CodeLine lineNumber="1709"><span class="doxyHighlight">    .legalFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LocalPtr&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, LocalPtr&#125;,</span></CodeLine>
<Link id="l01710" /><CodeLine lineNumber="1710"><span class="doxyHighlight">               &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, RegionPtr&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, RegionPtr&#125;&#125;);</span></CodeLine>
<Link id="l01711" /><CodeLine lineNumber="1711"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Pointer types, any 32-bit or 64-bit vector</span></CodeLine>
<Link id="l01712" /><CodeLine lineNumber="1712"></CodeLine>
<Link id="l01713" /><CodeLine lineNumber="1713"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Condition should be s32 for scalar, s1 for vector.</span></CodeLine>
<Link id="l01714" /><CodeLine lineNumber="1714"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;SELECT)</span></CodeLine>
<Link id="l01715" /><CodeLine lineNumber="1715"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#ae4c02bcf9d3bfdee70f097d0b6aeb9f3">legalForCartesianProduct</a>(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a0b000f228cb40bf4aee0a19815ce4d99">V2S32</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, <a href="#a52e4f67b333637f707e6fe59057c7348">V4S16</a>, GlobalPtr,</span></CodeLine>
<Link id="l01716" /><CodeLine lineNumber="1716"><span class="doxyHighlight">                                 LocalPtr, FlatPtr, PrivatePtr,</span></CodeLine>
<Link id="l01717" /><CodeLine lineNumber="1717"><span class="doxyHighlight">                                 <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2, LocalPtr),</span></CodeLine>
<Link id="l01718" /><CodeLine lineNumber="1718"><span class="doxyHighlight">                                 <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2, PrivatePtr)&#125;,</span></CodeLine>
<Link id="l01719" /><CodeLine lineNumber="1719"><span class="doxyHighlight">                                &#123;<a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l01720" /><CodeLine lineNumber="1720"><span class="doxyHighlight">      .clampScalar(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01721" /><CodeLine lineNumber="1721"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(1)</span></CodeLine>
<Link id="l01722" /><CodeLine lineNumber="1722"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6baff39b32f5cec5ea417cba89f077ac">moreElementsIf</a>(<a href="#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(0), <a href="#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(0))</span></CodeLine>
<Link id="l01723" /><CodeLine lineNumber="1723"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a2650717a05ef92e13ecc9d1f290eabd9">fewerElementsIf</a>(<a href="#a8e4a67e6620c2b437e4b7a7707ac0914">numElementsNotEven</a>(0), <a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0))</span></CodeLine>
<Link id="l01724" /><CodeLine lineNumber="1724"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a3b9d49f459b9596f73c60edab6e92673">clampMaxNumElements</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 2)</span></CodeLine>
<Link id="l01725" /><CodeLine lineNumber="1725"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a3b9d49f459b9596f73c60edab6e92673">clampMaxNumElements</a>(0, LocalPtr, 2)</span></CodeLine>
<Link id="l01726" /><CodeLine lineNumber="1726"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a3b9d49f459b9596f73c60edab6e92673">clampMaxNumElements</a>(0, PrivatePtr, 2)</span></CodeLine>
<Link id="l01727" /><CodeLine lineNumber="1727"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01728" /><CodeLine lineNumber="1728"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0)</span></CodeLine>
<Link id="l01729" /><CodeLine lineNumber="1729"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#af6dcfac5a30e4050e3ac204f27062fe6">legalIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#a3a162108a998b12a5f51009e450d898c">isPointer</a>(0), <a href="/docs/api/namespaces/llvm/legalitypredicates/#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(1, &#123;<a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)));</span></CodeLine>
<Link id="l01730" /><CodeLine lineNumber="1730"></CodeLine>
<Link id="l01731" /><CodeLine lineNumber="1731"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Only the low 4/5/6 bits of the shift amount are observed, so we can</span></CodeLine>
<Link id="l01732" /><CodeLine lineNumber="1732"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// be more flexible with the shift amount type.</span></CodeLine>
<Link id="l01733" /><CodeLine lineNumber="1733"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Shifts = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;SHL, G&#95;LSHR, G&#95;ASHR&#125;)</span></CodeLine>
<Link id="l01734" /><CodeLine lineNumber="1734"><span class="doxyHighlight">    .legalFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;&#125;);</span></CodeLine>
<Link id="l01735" /><CodeLine lineNumber="1735"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.has16BitInsts()) &#123;</span></CodeLine>
<Link id="l01736" /><CodeLine lineNumber="1736"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasVOP3PInsts()) &#123;</span></CodeLine>
<Link id="l01737" /><CodeLine lineNumber="1737"><span class="doxyHighlight">      Shifts.legalFor(&#123;&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;, &#123;<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>&#125;&#125;)</span></CodeLine>
<Link id="l01738" /><CodeLine lineNumber="1738"><span class="doxyHighlight">            .clampMaxNumElements(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2);</span></CodeLine>
<Link id="l01739" /><CodeLine lineNumber="1739"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l01740" /><CodeLine lineNumber="1740"><span class="doxyHighlight">      Shifts.legalFor(&#123;&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;&#125;);</span></CodeLine>
<Link id="l01741" /><CodeLine lineNumber="1741"></CodeLine>
<Link id="l01742" /><CodeLine lineNumber="1742"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Support 16-bit shift amounts for all types</span></CodeLine>
<Link id="l01743" /><CodeLine lineNumber="1743"><span class="doxyHighlight">    Shifts.widenScalarIf(</span></CodeLine>
<Link id="l01744" /><CodeLine lineNumber="1744"><span class="doxyHighlight">      &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l01745" /><CodeLine lineNumber="1745"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Use 16-bit shift amounts for any 16-bit shift. Otherwise we want a</span></CodeLine>
<Link id="l01746" /><CodeLine lineNumber="1746"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// 32-bit amount.</span></CodeLine>
<Link id="l01747" /><CodeLine lineNumber="1747"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> ValTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93;;</span></CodeLine>
<Link id="l01748" /><CodeLine lineNumber="1748"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> AmountTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;1&#93;;</span></CodeLine>
<Link id="l01749" /><CodeLine lineNumber="1749"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ValTy.getSizeInBits() &lt;= 16 &amp;&amp;</span></CodeLine>
<Link id="l01750" /><CodeLine lineNumber="1750"><span class="doxyHighlight">               AmountTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &lt; 16;</span></CodeLine>
<Link id="l01751" /><CodeLine lineNumber="1751"><span class="doxyHighlight">      &#125;, <a href="/docs/api/namespaces/llvm/legalizemutations/#acd331b959990c033f8d612adf7701b05">changeTo</a>(1, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>));</span></CodeLine>
<Link id="l01752" /><CodeLine lineNumber="1752"><span class="doxyHighlight">    Shifts.maxScalarIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>), 1, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>);</span></CodeLine>
<Link id="l01753" /><CodeLine lineNumber="1753"><span class="doxyHighlight">    Shifts.clampScalar(1, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l01754" /><CodeLine lineNumber="1754"><span class="doxyHighlight">    Shifts.widenScalarToNextPow2(0, 16);</span></CodeLine>
<Link id="l01755" /><CodeLine lineNumber="1755"><span class="doxyHighlight">    Shifts.clampScalar(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>);</span></CodeLine>
<Link id="l01756" /><CodeLine lineNumber="1756"></CodeLine>
<Link id="l01757" /><CodeLine lineNumber="1757"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;SSHLSAT, G&#95;USHLSAT&#125;)</span></CodeLine>
<Link id="l01758" /><CodeLine lineNumber="1758"><span class="doxyHighlight">      .minScalar(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)</span></CodeLine>
<Link id="l01759" /><CodeLine lineNumber="1759"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01760" /><CodeLine lineNumber="1760"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01761" /><CodeLine lineNumber="1761"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01762" /><CodeLine lineNumber="1762"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Make sure we legalize the shift amount type first, as the general</span></CodeLine>
<Link id="l01763" /><CodeLine lineNumber="1763"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// expansion for the shifted type will produce much worse code if it hasn&#39;t</span></CodeLine>
<Link id="l01764" /><CodeLine lineNumber="1764"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// been truncated already.</span></CodeLine>
<Link id="l01765" /><CodeLine lineNumber="1765"><span class="doxyHighlight">    Shifts.clampScalar(1, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l01766" /><CodeLine lineNumber="1766"><span class="doxyHighlight">    Shifts.widenScalarToNextPow2(0, 32);</span></CodeLine>
<Link id="l01767" /><CodeLine lineNumber="1767"><span class="doxyHighlight">    Shifts.clampScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>);</span></CodeLine>
<Link id="l01768" /><CodeLine lineNumber="1768"></CodeLine>
<Link id="l01769" /><CodeLine lineNumber="1769"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;SSHLSAT, G&#95;USHLSAT&#125;)</span></CodeLine>
<Link id="l01770" /><CodeLine lineNumber="1770"><span class="doxyHighlight">      .minScalar(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01771" /><CodeLine lineNumber="1771"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l01772" /><CodeLine lineNumber="1772"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01773" /><CodeLine lineNumber="1773"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01774" /><CodeLine lineNumber="1774"><span class="doxyHighlight">  Shifts.<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0);</span></CodeLine>
<Link id="l01775" /><CodeLine lineNumber="1775"></CodeLine>
<Link id="l01776" /><CodeLine lineNumber="1776"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> : &#123;G&#95;EXTRACT&#95;VECTOR&#95;ELT, G&#95;INSERT&#95;VECTOR&#95;ELT&#125;) &#123;</span></CodeLine>
<Link id="l01777" /><CodeLine lineNumber="1777"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> VecTypeIdx = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> == G&#95;EXTRACT&#95;VECTOR&#95;ELT ? 1 : 0;</span></CodeLine>
<Link id="l01778" /><CodeLine lineNumber="1778"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> EltTypeIdx = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> == G&#95;EXTRACT&#95;VECTOR&#95;ELT ? 0 : 1;</span></CodeLine>
<Link id="l01779" /><CodeLine lineNumber="1779"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> IdxTypeIdx = 2;</span></CodeLine>
<Link id="l01780" /><CodeLine lineNumber="1780"></CodeLine>
<Link id="l01781" /><CodeLine lineNumber="1781"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>)</span></CodeLine>
<Link id="l01782" /><CodeLine lineNumber="1782"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#acda429561493e08ee5cef54f26a1224c">customIf</a>(&#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l01783" /><CodeLine lineNumber="1783"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> EltTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;EltTypeIdx&#93;;</span></CodeLine>
<Link id="l01784" /><CodeLine lineNumber="1784"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> VecTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;VecTypeIdx&#93;;</span></CodeLine>
<Link id="l01785" /><CodeLine lineNumber="1785"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> IdxTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;IdxTypeIdx&#93;;</span></CodeLine>
<Link id="l01786" /><CodeLine lineNumber="1786"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> EltSize = EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</span></CodeLine>
<Link id="l01787" /><CodeLine lineNumber="1787"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> isLegalVecType =</span></CodeLine>
<Link id="l01788" /><CodeLine lineNumber="1788"><span class="doxyHighlight">              !!<a href="/docs/api/classes/llvm/siregisterinfo/#a7d8aef424553a9b93de21ced693f0b09">SIRegisterInfo::getSGPRClassForBitWidth</a>(VecTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</span></CodeLine>
<Link id="l01789" /><CodeLine lineNumber="1789"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Address space 8 pointers are 128-bit wide values, but the logic</span></CodeLine>
<Link id="l01790" /><CodeLine lineNumber="1790"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// below will try to bitcast them to 2N x s64, which will fail.</span></CodeLine>
<Link id="l01791" /><CodeLine lineNumber="1791"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Therefore, as an intermediate step, wrap extracts/insertions from a</span></CodeLine>
<Link id="l01792" /><CodeLine lineNumber="1792"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// ptrtoint-ing the vector and scalar arguments (or inttoptring the</span></CodeLine>
<Link id="l01793" /><CodeLine lineNumber="1793"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// extraction result) in order to produce a vector operation that can</span></CodeLine>
<Link id="l01794" /><CodeLine lineNumber="1794"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// be handled by the logic below.</span></CodeLine>
<Link id="l01795" /><CodeLine lineNumber="1795"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (EltTy.<a href="/docs/api/classes/llvm/llt/#a9d825f5954d7bd527aea490668c624c6">isPointer</a>() &amp;&amp; EltSize &gt; 64)</span></CodeLine>
<Link id="l01796" /><CodeLine lineNumber="1796"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01797" /><CodeLine lineNumber="1797"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> (EltSize == 32 || EltSize == 64) &amp;&amp;</span></CodeLine>
<Link id="l01798" /><CodeLine lineNumber="1798"><span class="doxyHighlight">                  VecTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() % 32 == 0 &amp;&amp;</span></CodeLine>
<Link id="l01799" /><CodeLine lineNumber="1799"><span class="doxyHighlight">                  VecTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &lt;= <a href="#aabec8e9bc89e3e905a71769f8be922c1">MaxRegisterSize</a> &amp;&amp;</span></CodeLine>
<Link id="l01800" /><CodeLine lineNumber="1800"><span class="doxyHighlight">                  IdxTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 32 &amp;&amp;</span></CodeLine>
<Link id="l01801" /><CodeLine lineNumber="1801"><span class="doxyHighlight">                  isLegalVecType;</span></CodeLine>
<Link id="l01802" /><CodeLine lineNumber="1802"><span class="doxyHighlight">        &#125;)</span></CodeLine>
<Link id="l01803" /><CodeLine lineNumber="1803"><span class="doxyHighlight">      .bitcastIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="#afa3cedfbe23049312e516145f0e46cbb">sizeIsMultipleOf32</a>(VecTypeIdx), <a href="/docs/api/namespaces/llvm/legalitypredicates/#a87c5e76f97f435ea42bccaa6242aba92">scalarOrEltNarrowerThan</a>(VecTypeIdx, 32)),</span></CodeLine>
<Link id="l01804" /><CodeLine lineNumber="1804"><span class="doxyHighlight">                 <a href="#a0aab1c76215e1773caa058744d6ae6af">bitcastToVectorElement32</a>(VecTypeIdx))</span></CodeLine>
<Link id="l01805" /><CodeLine lineNumber="1805"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">//.bitcastIf(vectorSmallerThan(1, 32), bitcastToScalar(1))</span></CodeLine>
<Link id="l01806" /><CodeLine lineNumber="1806"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a3128e17013a7e7dd6a855d0b00ad60f9">bitcastIf</a>(</span></CodeLine>
<Link id="l01807" /><CodeLine lineNumber="1807"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="#afa3cedfbe23049312e516145f0e46cbb">sizeIsMultipleOf32</a>(VecTypeIdx), <a href="/docs/api/namespaces/llvm/legalitypredicates/#a0460dde35b7517637d8ac040900d42ba">scalarOrEltWiderThan</a>(VecTypeIdx, 64)),</span></CodeLine>
<Link id="l01808" /><CodeLine lineNumber="1808"><span class="doxyHighlight">        &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l01809" /><CodeLine lineNumber="1809"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// For &gt; 64-bit element types, try to turn this into a 64-bit</span></CodeLine>
<Link id="l01810" /><CodeLine lineNumber="1810"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// element vector since we may be able to do better indexing</span></CodeLine>
<Link id="l01811" /><CodeLine lineNumber="1811"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// if this is scalar. If not, fall back to 32</span></CodeLine>
<Link id="l01812" /><CodeLine lineNumber="1812"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> EltTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;EltTypeIdx&#93;;</span></CodeLine>
<Link id="l01813" /><CodeLine lineNumber="1813"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> VecTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;VecTypeIdx&#93;;</span></CodeLine>
<Link id="l01814" /><CodeLine lineNumber="1814"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> DstEltSize = EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</span></CodeLine>
<Link id="l01815" /><CodeLine lineNumber="1815"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> VecSize = VecTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</span></CodeLine>
<Link id="l01816" /><CodeLine lineNumber="1816"></CodeLine>
<Link id="l01817" /><CodeLine lineNumber="1817"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TargetEltSize = DstEltSize % 64 == 0 ? 64 : 32;</span></CodeLine>
<Link id="l01818" /><CodeLine lineNumber="1818"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(</span></CodeLine>
<Link id="l01819" /><CodeLine lineNumber="1819"><span class="doxyHighlight">              VecTypeIdx,</span></CodeLine>
<Link id="l01820" /><CodeLine lineNumber="1820"><span class="doxyHighlight">              <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(VecSize / TargetEltSize, TargetEltSize));</span></CodeLine>
<Link id="l01821" /><CodeLine lineNumber="1821"><span class="doxyHighlight">        &#125;)</span></CodeLine>
<Link id="l01822" /><CodeLine lineNumber="1822"><span class="doxyHighlight">      .clampScalar(EltTypeIdx, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01823" /><CodeLine lineNumber="1823"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(VecTypeIdx, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l01824" /><CodeLine lineNumber="1824"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(IdxTypeIdx, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l01825" /><CodeLine lineNumber="1825"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a3b9d49f459b9596f73c60edab6e92673">clampMaxNumElements</a>(VecTypeIdx, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 32)</span></CodeLine>
<Link id="l01826" /><CodeLine lineNumber="1826"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// TODO: Clamp elements for 64-bit vectors?</span></CodeLine>
<Link id="l01827" /><CodeLine lineNumber="1827"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6baff39b32f5cec5ea417cba89f077ac">moreElementsIf</a>(</span></CodeLine>
<Link id="l01828" /><CodeLine lineNumber="1828"><span class="doxyHighlight">        <a href="#aa5fe965eac66ae9ebc69835fe44c679d">isIllegalRegisterType</a>(VecTypeIdx),</span></CodeLine>
<Link id="l01829" /><CodeLine lineNumber="1829"><span class="doxyHighlight">        <a href="#a4b2db808be70ea68e0f121c1942982a9">moreElementsToNextExistingRegClass</a>(VecTypeIdx))</span></CodeLine>
<Link id="l01830" /><CodeLine lineNumber="1830"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// It should only be necessary with variable indexes.</span></CodeLine>
<Link id="l01831" /><CodeLine lineNumber="1831"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// As a last resort, lower to the stack</span></CodeLine>
<Link id="l01832" /><CodeLine lineNumber="1832"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01833" /><CodeLine lineNumber="1833"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01834" /><CodeLine lineNumber="1834"></CodeLine>
<Link id="l01835" /><CodeLine lineNumber="1835"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;EXTRACT&#95;VECTOR&#95;ELT)</span></CodeLine>
<Link id="l01836" /><CodeLine lineNumber="1836"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a916cd5bc69b2a149600ab1488c047bc7">unsupportedIf</a>(&#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l01837" /><CodeLine lineNumber="1837"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> &amp;EltTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;1&#93;.getElementType();</span></CodeLine>
<Link id="l01838" /><CodeLine lineNumber="1838"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;0&#93; != EltTy;</span></CodeLine>
<Link id="l01839" /><CodeLine lineNumber="1839"><span class="doxyHighlight">      &#125;);</span></CodeLine>
<Link id="l01840" /><CodeLine lineNumber="1840"></CodeLine>
<Link id="l01841" /><CodeLine lineNumber="1841"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> : &#123;G&#95;EXTRACT, G&#95;INSERT&#125;) &#123;</span></CodeLine>
<Link id="l01842" /><CodeLine lineNumber="1842"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> BigTyIdx = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> == G&#95;EXTRACT ? 1 : 0;</span></CodeLine>
<Link id="l01843" /><CodeLine lineNumber="1843"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> LitTyIdx = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> == G&#95;EXTRACT ? 0 : 1;</span></CodeLine>
<Link id="l01844" /><CodeLine lineNumber="1844"></CodeLine>
<Link id="l01845" /><CodeLine lineNumber="1845"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: Doesn&#39;t handle extract of illegal sizes.</span></CodeLine>
<Link id="l01846" /><CodeLine lineNumber="1846"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>)</span></CodeLine>
<Link id="l01847" /><CodeLine lineNumber="1847"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a76a7807072af618c3ac80dd8d569deba">lowerIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(LitTyIdx, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>), <a href="/docs/api/namespaces/llvm/legalitypredicates/#aa72a80bbb62a1013bb4f43253a4bad1b">sizeIs</a>(BigTyIdx, 32)))</span></CodeLine>
<Link id="l01848" /><CodeLine lineNumber="1848"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a76a7807072af618c3ac80dd8d569deba">lowerIf</a>(&#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l01849" /><CodeLine lineNumber="1849"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Sub-vector(or single element) insert and extract.</span></CodeLine>
<Link id="l01850" /><CodeLine lineNumber="1850"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// TODO: verify immediate offset here since lower only works with</span></CodeLine>
<Link id="l01851" /><CodeLine lineNumber="1851"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// whole elements.</span></CodeLine>
<Link id="l01852" /><CodeLine lineNumber="1852"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> BigTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;BigTyIdx&#93;;</span></CodeLine>
<Link id="l01853" /><CodeLine lineNumber="1853"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> BigTy.<a href="/docs/api/classes/llvm/llt/#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>();</span></CodeLine>
<Link id="l01854" /><CodeLine lineNumber="1854"><span class="doxyHighlight">        &#125;)</span></CodeLine>
<Link id="l01855" /><CodeLine lineNumber="1855"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// FIXME: Multiples of 16 should not be legal.</span></CodeLine>
<Link id="l01856" /><CodeLine lineNumber="1856"><span class="doxyHighlight">      .legalIf(&#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l01857" /><CodeLine lineNumber="1857"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> BigTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;BigTyIdx&#93;;</span></CodeLine>
<Link id="l01858" /><CodeLine lineNumber="1858"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> LitTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;LitTyIdx&#93;;</span></CodeLine>
<Link id="l01859" /><CodeLine lineNumber="1859"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> (BigTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() % 32 == 0) &amp;&amp;</span></CodeLine>
<Link id="l01860" /><CodeLine lineNumber="1860"><span class="doxyHighlight">                 (LitTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() % 16 == 0);</span></CodeLine>
<Link id="l01861" /><CodeLine lineNumber="1861"><span class="doxyHighlight">        &#125;)</span></CodeLine>
<Link id="l01862" /><CodeLine lineNumber="1862"><span class="doxyHighlight">      .widenScalarIf(</span></CodeLine>
<Link id="l01863" /><CodeLine lineNumber="1863"><span class="doxyHighlight">        &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l01864" /><CodeLine lineNumber="1864"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> BigTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;BigTyIdx&#93;;</span></CodeLine>
<Link id="l01865" /><CodeLine lineNumber="1865"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> (BigTy.<a href="/docs/api/classes/llvm/llt/#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() &lt; 16);</span></CodeLine>
<Link id="l01866" /><CodeLine lineNumber="1866"><span class="doxyHighlight">        &#125;,</span></CodeLine>
<Link id="l01867" /><CodeLine lineNumber="1867"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/legalizemutations/#ac48512a9f1e26744de1b6940b4adb68f">LegalizeMutations::widenScalarOrEltToNextPow2</a>(BigTyIdx, 16))</span></CodeLine>
<Link id="l01868" /><CodeLine lineNumber="1868"><span class="doxyHighlight">      .widenScalarIf(</span></CodeLine>
<Link id="l01869" /><CodeLine lineNumber="1869"><span class="doxyHighlight">        &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l01870" /><CodeLine lineNumber="1870"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> LitTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;LitTyIdx&#93;;</span></CodeLine>
<Link id="l01871" /><CodeLine lineNumber="1871"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> (LitTy.<a href="/docs/api/classes/llvm/llt/#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() &lt; 16);</span></CodeLine>
<Link id="l01872" /><CodeLine lineNumber="1872"><span class="doxyHighlight">        &#125;,</span></CodeLine>
<Link id="l01873" /><CodeLine lineNumber="1873"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/legalizemutations/#ac48512a9f1e26744de1b6940b4adb68f">LegalizeMutations::widenScalarOrEltToNextPow2</a>(LitTyIdx, 16))</span></CodeLine>
<Link id="l01874" /><CodeLine lineNumber="1874"><span class="doxyHighlight">      .moreElementsIf(<a href="#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(BigTyIdx), <a href="#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(BigTyIdx))</span></CodeLine>
<Link id="l01875" /><CodeLine lineNumber="1875"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(BigTyIdx, 32);</span></CodeLine>
<Link id="l01876" /><CodeLine lineNumber="1876"></CodeLine>
<Link id="l01877" /><CodeLine lineNumber="1877"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01878" /><CodeLine lineNumber="1878"></CodeLine>
<Link id="l01879" /><CodeLine lineNumber="1879"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;BuildVector = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;BUILD&#95;VECTOR)</span></CodeLine>
<Link id="l01880" /><CodeLine lineNumber="1880"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#ae4c02bcf9d3bfdee70f097d0b6aeb9f3">legalForCartesianProduct</a>(<a href="#a4b69b2b66bc8186c8b21b62fe41d444d">AllS32Vectors</a>, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l01881" /><CodeLine lineNumber="1881"><span class="doxyHighlight">    .legalForCartesianProduct(<a href="#abf8037dd8ffb10bb4c5fe61c6d0c5c6c">AllS64Vectors</a>, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;)</span></CodeLine>
<Link id="l01882" /><CodeLine lineNumber="1882"><span class="doxyHighlight">    .clampNumElements(0, <a href="#a83756b36d1fca7fb0054ab52622cda67">V16S32</a>, <a href="#a61cf1ca010a7d653f1cf0ddefa7a8e6d">V32S32</a>)</span></CodeLine>
<Link id="l01883" /><CodeLine lineNumber="1883"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#ac56e6d7519b8f4f908174aa570bc5e61">clampNumElements</a>(0, <a href="#acb4ecd614e176840d5b2360a176f1333">V2S64</a>, <a href="#a7af378812d0f59470e1ad5ff1ac40679">V16S64</a>)</span></CodeLine>
<Link id="l01884" /><CodeLine lineNumber="1884"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a2650717a05ef92e13ecc9d1f290eabd9">fewerElementsIf</a>(<a href="#a3d552c29a563f3462800870d14e72b0f">isWideVec16</a>(0), <a href="/docs/api/namespaces/llvm/legalizemutations/#acd331b959990c033f8d612adf7701b05">changeTo</a>(0, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>))</span></CodeLine>
<Link id="l01885" /><CodeLine lineNumber="1885"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a6baff39b32f5cec5ea417cba89f077ac">moreElementsIf</a>(</span></CodeLine>
<Link id="l01886" /><CodeLine lineNumber="1886"><span class="doxyHighlight">      <a href="#aa5fe965eac66ae9ebc69835fe44c679d">isIllegalRegisterType</a>(0),</span></CodeLine>
<Link id="l01887" /><CodeLine lineNumber="1887"><span class="doxyHighlight">      <a href="#a4b2db808be70ea68e0f121c1942982a9">moreElementsToNextExistingRegClass</a>(0));</span></CodeLine>
<Link id="l01888" /><CodeLine lineNumber="1888"></CodeLine>
<Link id="l01889" /><CodeLine lineNumber="1889"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasScalarPackInsts()) &#123;</span></CodeLine>
<Link id="l01890" /><CodeLine lineNumber="1890"><span class="doxyHighlight">    BuildVector</span></CodeLine>
<Link id="l01891" /><CodeLine lineNumber="1891"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// FIXME: Should probably widen s1 vectors straight to s32</span></CodeLine>
<Link id="l01892" /><CodeLine lineNumber="1892"><span class="doxyHighlight">      .minScalarOrElt(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)</span></CodeLine>
<Link id="l01893" /><CodeLine lineNumber="1893"><span class="doxyHighlight">      .minScalar(1, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>);</span></CodeLine>
<Link id="l01894" /><CodeLine lineNumber="1894"></CodeLine>
<Link id="l01895" /><CodeLine lineNumber="1895"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;BUILD&#95;VECTOR&#95;TRUNC)</span></CodeLine>
<Link id="l01896" /><CodeLine lineNumber="1896"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l01897" /><CodeLine lineNumber="1897"><span class="doxyHighlight">      .lower();</span></CodeLine>
<Link id="l01898" /><CodeLine lineNumber="1898"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l01899" /><CodeLine lineNumber="1899"><span class="doxyHighlight">    BuildVector.customFor(&#123;<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;);</span></CodeLine>
<Link id="l01900" /><CodeLine lineNumber="1900"><span class="doxyHighlight">    BuildVector.minScalarOrElt(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l01901" /><CodeLine lineNumber="1901"></CodeLine>
<Link id="l01902" /><CodeLine lineNumber="1902"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;BUILD&#95;VECTOR&#95;TRUNC)</span></CodeLine>
<Link id="l01903" /><CodeLine lineNumber="1903"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#afc001d042e6a7093a6954b2d9ff18029">customFor</a>(&#123;<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l01904" /><CodeLine lineNumber="1904"><span class="doxyHighlight">      .lower();</span></CodeLine>
<Link id="l01905" /><CodeLine lineNumber="1905"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01906" /><CodeLine lineNumber="1906"></CodeLine>
<Link id="l01907" /><CodeLine lineNumber="1907"><span class="doxyHighlight">  BuildVector.<a href="/docs/api/classes/llvm/legalizeruleset/#af6dcfac5a30e4050e3ac204f27062fe6">legalIf</a>(<a href="#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(0));</span></CodeLine>
<Link id="l01908" /><CodeLine lineNumber="1908"></CodeLine>
<Link id="l01909" /><CodeLine lineNumber="1909"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: Clamp maximum size</span></CodeLine>
<Link id="l01910" /><CodeLine lineNumber="1910"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;CONCAT&#95;VECTORS)</span></CodeLine>
<Link id="l01911" /><CodeLine lineNumber="1911"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#af6dcfac5a30e4050e3ac204f27062fe6">legalIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(0), <a href="#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(1)))</span></CodeLine>
<Link id="l01912" /><CodeLine lineNumber="1912"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a3b9d49f459b9596f73c60edab6e92673">clampMaxNumElements</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 32)</span></CodeLine>
<Link id="l01913" /><CodeLine lineNumber="1913"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a3b9d49f459b9596f73c60edab6e92673">clampMaxNumElements</a>(1, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2) </span><span class="doxyHighlightComment">// TODO: Make 4?</span></CodeLine>
<Link id="l01914" /><CodeLine lineNumber="1914"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a3b9d49f459b9596f73c60edab6e92673">clampMaxNumElements</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 64);</span></CodeLine>
<Link id="l01915" /><CodeLine lineNumber="1915"></CodeLine>
<Link id="l01916" /><CodeLine lineNumber="1916"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;SHUFFLE&#95;VECTOR).<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l01917" /><CodeLine lineNumber="1917"></CodeLine>
<Link id="l01918" /><CodeLine lineNumber="1918"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Merge/Unmerge</span></CodeLine>
<Link id="l01919" /><CodeLine lineNumber="1919"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> : &#123;G&#95;MERGE&#95;VALUES, G&#95;UNMERGE&#95;VALUES&#125;) &#123;</span></CodeLine>
<Link id="l01920" /><CodeLine lineNumber="1920"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> BigTyIdx = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> == G&#95;MERGE&#95;VALUES ? 0 : 1;</span></CodeLine>
<Link id="l01921" /><CodeLine lineNumber="1921"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> LitTyIdx = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> == G&#95;MERGE&#95;VALUES ? 1 : 0;</span></CodeLine>
<Link id="l01922" /><CodeLine lineNumber="1922"></CodeLine>
<Link id="l01923" /><CodeLine lineNumber="1923"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> notValidElt = &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> TypeIdx) &#123;</span></CodeLine>
<Link id="l01924" /><CodeLine lineNumber="1924"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;TypeIdx&#93;;</span></CodeLine>
<Link id="l01925" /><CodeLine lineNumber="1925"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty.isVector()) &#123;</span></CodeLine>
<Link id="l01926" /><CodeLine lineNumber="1926"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> &amp;EltTy = Ty.getElementType();</span></CodeLine>
<Link id="l01927" /><CodeLine lineNumber="1927"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &lt; 8 || EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; 512)</span></CodeLine>
<Link id="l01928" /><CodeLine lineNumber="1928"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01929" /><CodeLine lineNumber="1929"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#a617c1c04cfa1325ad04eb69339d92188">llvm::has&#95;single&#95;bit&lt;uint32&#95;t&gt;</a>(EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()))</span></CodeLine>
<Link id="l01930" /><CodeLine lineNumber="1930"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01931" /><CodeLine lineNumber="1931"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l01932" /><CodeLine lineNumber="1932"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l01933" /><CodeLine lineNumber="1933"><span class="doxyHighlight">    &#125;;</span></CodeLine>
<Link id="l01934" /><CodeLine lineNumber="1934"></CodeLine>
<Link id="l01935" /><CodeLine lineNumber="1935"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;Builder = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>)</span></CodeLine>
<Link id="l01936" /><CodeLine lineNumber="1936"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#af6dcfac5a30e4050e3ac204f27062fe6">legalIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(0), <a href="#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(1)))</span></CodeLine>
<Link id="l01937" /><CodeLine lineNumber="1937"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6eec582df34bb1c63e8666b41ff561ec">lowerFor</a>(&#123;&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>&#125;&#125;)</span></CodeLine>
<Link id="l01938" /><CodeLine lineNumber="1938"><span class="doxyHighlight">      .lowerIf(&#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l01939" /><CodeLine lineNumber="1939"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> BigTy = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;BigTyIdx&#93;;</span></CodeLine>
<Link id="l01940" /><CodeLine lineNumber="1940"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> BigTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 32;</span></CodeLine>
<Link id="l01941" /><CodeLine lineNumber="1941"><span class="doxyHighlight">        &#125;)</span></CodeLine>
<Link id="l01942" /><CodeLine lineNumber="1942"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Try to widen to s16 first for small types.</span></CodeLine>
<Link id="l01943" /><CodeLine lineNumber="1943"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// TODO: Only do this on targets with legal s16 shifts</span></CodeLine>
<Link id="l01944" /><CodeLine lineNumber="1944"><span class="doxyHighlight">      .minScalarOrEltIf(<a href="/docs/api/namespaces/llvm/legalitypredicates/#aff9e886f18a84258e4f794e31aad0bd9">scalarNarrowerThan</a>(LitTyIdx, 16), LitTyIdx, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)</span></CodeLine>
<Link id="l01945" /><CodeLine lineNumber="1945"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(LitTyIdx, </span><span class="doxyHighlightComment">/&#42;Min&#42;/</span><span class="doxyHighlight"> 16)</span></CodeLine>
<Link id="l01946" /><CodeLine lineNumber="1946"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6baff39b32f5cec5ea417cba89f077ac">moreElementsIf</a>(<a href="#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(BigTyIdx), <a href="#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(BigTyIdx))</span></CodeLine>
<Link id="l01947" /><CodeLine lineNumber="1947"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a2650717a05ef92e13ecc9d1f290eabd9">fewerElementsIf</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ad7ac7032baa62cc00002886633b9f281">all</a>(<a href="/docs/api/namespaces/llvm/legalitypredicates/#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>), <a href="#a2d0beabfcf00e6fd23c97eff8ee516a6">vectorWiderThan</a>(1, 32),</span></CodeLine>
<Link id="l01948" /><CodeLine lineNumber="1948"><span class="doxyHighlight">                           <a href="/docs/api/namespaces/llvm/legalitypredicates/#a7e87df9fdd3792e1b0c27ccf85466cfe">elementTypeIs</a>(1, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)),</span></CodeLine>
<Link id="l01949" /><CodeLine lineNumber="1949"><span class="doxyHighlight">                       <a href="/docs/api/namespaces/llvm/legalizemutations/#acd331b959990c033f8d612adf7701b05">changeTo</a>(1, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>))</span></CodeLine>
<Link id="l01950" /><CodeLine lineNumber="1950"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Clamp the little scalar to s8-s256 and make it a power of 2 It&#39;s not</span></CodeLine>
<Link id="l01951" /><CodeLine lineNumber="1951"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// worth considering the multiples of 64 since 2&#42;192 and 2&#42;384 are not</span></CodeLine>
<Link id="l01952" /><CodeLine lineNumber="1952"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// valid.</span></CodeLine>
<Link id="l01953" /><CodeLine lineNumber="1953"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(LitTyIdx, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a7fcbdd8fbd887c5c2c68588ab6179c64">S512</a>)</span></CodeLine>
<Link id="l01954" /><CodeLine lineNumber="1954"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(LitTyIdx, </span><span class="doxyHighlightComment">/&#42;Min&#42;/</span><span class="doxyHighlight"> 32)</span></CodeLine>
<Link id="l01955" /><CodeLine lineNumber="1955"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Break up vectors with weird elements into scalars</span></CodeLine>
<Link id="l01956" /><CodeLine lineNumber="1956"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a2650717a05ef92e13ecc9d1f290eabd9">fewerElementsIf</a>(</span></CodeLine>
<Link id="l01957" /><CodeLine lineNumber="1957"><span class="doxyHighlight">        &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> notValidElt(Query, LitTyIdx); &#125;,</span></CodeLine>
<Link id="l01958" /><CodeLine lineNumber="1958"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0))</span></CodeLine>
<Link id="l01959" /><CodeLine lineNumber="1959"><span class="doxyHighlight">      .fewerElementsIf(</span></CodeLine>
<Link id="l01960" /><CodeLine lineNumber="1960"><span class="doxyHighlight">        &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123; </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> notValidElt(Query, BigTyIdx); &#125;,</span></CodeLine>
<Link id="l01961" /><CodeLine lineNumber="1961"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(1))</span></CodeLine>
<Link id="l01962" /><CodeLine lineNumber="1962"><span class="doxyHighlight">      .clampScalar(BigTyIdx, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#abb0782aaccc0907cc36fe566a642c71b">MaxScalar</a>);</span></CodeLine>
<Link id="l01963" /><CodeLine lineNumber="1963"></CodeLine>
<Link id="l01964" /><CodeLine lineNumber="1964"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> == G&#95;MERGE&#95;VALUES) &#123;</span></CodeLine>
<Link id="l01965" /><CodeLine lineNumber="1965"><span class="doxyHighlight">      Builder.widenScalarIf(</span></CodeLine>
<Link id="l01966" /><CodeLine lineNumber="1966"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// TODO: Use 16-bit shifts if legal for 8-bit values?</span></CodeLine>
<Link id="l01967" /><CodeLine lineNumber="1967"><span class="doxyHighlight">        &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l01968" /><CodeLine lineNumber="1968"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;LitTyIdx&#93;;</span></CodeLine>
<Link id="l01969" /><CodeLine lineNumber="1969"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Ty.getSizeInBits() &lt; 32;</span></CodeLine>
<Link id="l01970" /><CodeLine lineNumber="1970"><span class="doxyHighlight">        &#125;,</span></CodeLine>
<Link id="l01971" /><CodeLine lineNumber="1971"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/legalizemutations/#acd331b959990c033f8d612adf7701b05">changeTo</a>(LitTyIdx, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>));</span></CodeLine>
<Link id="l01972" /><CodeLine lineNumber="1972"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l01973" /><CodeLine lineNumber="1973"></CodeLine>
<Link id="l01974" /><CodeLine lineNumber="1974"><span class="doxyHighlight">    Builder.<a href="/docs/api/classes/llvm/legalizeruleset/#a99e1a648bb3a1018aed19e77cae2203c">widenScalarIf</a>(</span></CodeLine>
<Link id="l01975" /><CodeLine lineNumber="1975"><span class="doxyHighlight">      &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l01976" /><CodeLine lineNumber="1976"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;BigTyIdx&#93;;</span></CodeLine>
<Link id="l01977" /><CodeLine lineNumber="1977"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Ty.getSizeInBits() % 16 != 0;</span></CodeLine>
<Link id="l01978" /><CodeLine lineNumber="1978"><span class="doxyHighlight">      &#125;,</span></CodeLine>
<Link id="l01979" /><CodeLine lineNumber="1979"><span class="doxyHighlight">      &#91;=&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/legalityquery">LegalityQuery</a> &amp;Query) &#123;</span></CodeLine>
<Link id="l01980" /><CodeLine lineNumber="1980"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Pick the next power of 2, or a multiple of 64 over 128</span></CodeLine>
<Link id="l01981" /><CodeLine lineNumber="1981"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Whichever is smaller.</span></CodeLine>
<Link id="l01982" /><CodeLine lineNumber="1982"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> &amp;Ty = Query.<a href="/docs/api/structs/llvm/legalityquery/#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>&#91;BigTyIdx&#93;;</span></CodeLine>
<Link id="l01983" /><CodeLine lineNumber="1983"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NewSizeInBits = 1 &lt;&lt; <a href="/docs/api/namespaces/llvm/#a058782b98991f0719657d9008d3df41b">Log2&#95;32&#95;Ceil</a>(Ty.getSizeInBits() + 1);</span></CodeLine>
<Link id="l01984" /><CodeLine lineNumber="1984"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NewSizeInBits &gt;= 256) &#123;</span></CodeLine>
<Link id="l01985" /><CodeLine lineNumber="1985"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> RoundedTo = <a href="/docs/api/namespaces/llvm/#ab102f0f12dd38aeea5906b1d80c792ff">alignTo&lt;64&gt;</a>(Ty.getSizeInBits() + 1);</span></CodeLine>
<Link id="l01986" /><CodeLine lineNumber="1986"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (RoundedTo &lt; NewSizeInBits)</span></CodeLine>
<Link id="l01987" /><CodeLine lineNumber="1987"><span class="doxyHighlight">            NewSizeInBits = RoundedTo;</span></CodeLine>
<Link id="l01988" /><CodeLine lineNumber="1988"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l01989" /><CodeLine lineNumber="1989"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(BigTyIdx, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(NewSizeInBits));</span></CodeLine>
<Link id="l01990" /><CodeLine lineNumber="1990"><span class="doxyHighlight">      &#125;)</span></CodeLine>
<Link id="l01991" /><CodeLine lineNumber="1991"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Any vectors left are the wrong size. Scalarize them.</span></CodeLine>
<Link id="l01992" /><CodeLine lineNumber="1992"><span class="doxyHighlight">      .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l01993" /><CodeLine lineNumber="1993"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(1);</span></CodeLine>
<Link id="l01994" /><CodeLine lineNumber="1994"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l01995" /><CodeLine lineNumber="1995"></CodeLine>
<Link id="l01996" /><CodeLine lineNumber="1996"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// S64 is only legal on SALU, and needs to be broken into 32-bit elements in</span></CodeLine>
<Link id="l01997" /><CodeLine lineNumber="1997"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// RegBankSelect.</span></CodeLine>
<Link id="l01998" /><CodeLine lineNumber="1998"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;SextInReg = <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;SEXT&#95;INREG)</span></CodeLine>
<Link id="l01999" /><CodeLine lineNumber="1999"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;&#125;);</span></CodeLine>
<Link id="l02000" /><CodeLine lineNumber="2000"></CodeLine>
<Link id="l02001" /><CodeLine lineNumber="2001"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasVOP3PInsts()) &#123;</span></CodeLine>
<Link id="l02002" /><CodeLine lineNumber="2002"><span class="doxyHighlight">    SextInReg.lowerFor(&#123;&#123;<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>&#125;&#125;)</span></CodeLine>
<Link id="l02003" /><CodeLine lineNumber="2003"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Prefer to reduce vector widths for 16-bit vectors before lowering, to</span></CodeLine>
<Link id="l02004" /><CodeLine lineNumber="2004"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// get more vector shift opportunities, since we&#39;ll get those when</span></CodeLine>
<Link id="l02005" /><CodeLine lineNumber="2005"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// expanded.</span></CodeLine>
<Link id="l02006" /><CodeLine lineNumber="2006"><span class="doxyHighlight">      .clampMaxNumElementsStrict(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2);</span></CodeLine>
<Link id="l02007" /><CodeLine lineNumber="2007"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.has16BitInsts()) &#123;</span></CodeLine>
<Link id="l02008" /><CodeLine lineNumber="2008"><span class="doxyHighlight">    SextInReg.lowerFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;, &#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;&#125;);</span></CodeLine>
<Link id="l02009" /><CodeLine lineNumber="2009"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02010" /><CodeLine lineNumber="2010"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Prefer to promote to s32 before lowering if we don&#39;t have 16-bit</span></CodeLine>
<Link id="l02011" /><CodeLine lineNumber="2011"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// shifts. This avoid a lot of intermediate truncate and extend operations.</span></CodeLine>
<Link id="l02012" /><CodeLine lineNumber="2012"><span class="doxyHighlight">    SextInReg.lowerFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;&#125;);</span></CodeLine>
<Link id="l02013" /><CodeLine lineNumber="2013"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02014" /><CodeLine lineNumber="2014"></CodeLine>
<Link id="l02015" /><CodeLine lineNumber="2015"><span class="doxyHighlight">  SextInReg</span></CodeLine>
<Link id="l02016" /><CodeLine lineNumber="2016"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l02017" /><CodeLine lineNumber="2017"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l02018" /><CodeLine lineNumber="2018"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l02019" /><CodeLine lineNumber="2019"></CodeLine>
<Link id="l02020" /><CodeLine lineNumber="2020"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;ROTR, G&#95;ROTL&#125;)</span></CodeLine>
<Link id="l02021" /><CodeLine lineNumber="2021"><span class="doxyHighlight">    .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l02022" /><CodeLine lineNumber="2022"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l02023" /><CodeLine lineNumber="2023"></CodeLine>
<Link id="l02024" /><CodeLine lineNumber="2024"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Only Try to form v2s16 with legal packed instructions.</span></CodeLine>
<Link id="l02025" /><CodeLine lineNumber="2025"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FSHR)</span></CodeLine>
<Link id="l02026" /><CodeLine lineNumber="2026"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;&#125;)</span></CodeLine>
<Link id="l02027" /><CodeLine lineNumber="2027"><span class="doxyHighlight">    .lowerFor(&#123;&#123;<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>&#125;&#125;)</span></CodeLine>
<Link id="l02028" /><CodeLine lineNumber="2028"><span class="doxyHighlight">    .clampMaxNumElementsStrict(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2)</span></CodeLine>
<Link id="l02029" /><CodeLine lineNumber="2029"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l02030" /><CodeLine lineNumber="2030"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l02031" /><CodeLine lineNumber="2031"></CodeLine>
<Link id="l02032" /><CodeLine lineNumber="2032"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasVOP3PInsts()) &#123;</span></CodeLine>
<Link id="l02033" /><CodeLine lineNumber="2033"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FSHL)</span></CodeLine>
<Link id="l02034" /><CodeLine lineNumber="2034"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6eec582df34bb1c63e8666b41ff561ec">lowerFor</a>(&#123;&#123;<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>&#125;&#125;)</span></CodeLine>
<Link id="l02035" /><CodeLine lineNumber="2035"><span class="doxyHighlight">      .clampMaxNumElementsStrict(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2)</span></CodeLine>
<Link id="l02036" /><CodeLine lineNumber="2036"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l02037" /><CodeLine lineNumber="2037"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l02038" /><CodeLine lineNumber="2038"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02039" /><CodeLine lineNumber="2039"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FSHL)</span></CodeLine>
<Link id="l02040" /><CodeLine lineNumber="2040"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0)</span></CodeLine>
<Link id="l02041" /><CodeLine lineNumber="2041"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l02042" /><CodeLine lineNumber="2042"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02043" /><CodeLine lineNumber="2043"></CodeLine>
<Link id="l02044" /><CodeLine lineNumber="2044"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;READCYCLECOUNTER)</span></CodeLine>
<Link id="l02045" /><CodeLine lineNumber="2045"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;);</span></CodeLine>
<Link id="l02046" /><CodeLine lineNumber="2046"></CodeLine>
<Link id="l02047" /><CodeLine lineNumber="2047"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;READSTEADYCOUNTER).<a href="/docs/api/classes/llvm/legalizeruleset/#a1c27c69ac65f9d4937858c10288a17f6">legalFor</a>(&#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;);</span></CodeLine>
<Link id="l02048" /><CodeLine lineNumber="2048"></CodeLine>
<Link id="l02049" /><CodeLine lineNumber="2049"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;FENCE)</span></CodeLine>
<Link id="l02050" /><CodeLine lineNumber="2050"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/legalizeruleset/#ab250f5144d04471b35f7fc229dc9da5c">alwaysLegal</a>();</span></CodeLine>
<Link id="l02051" /><CodeLine lineNumber="2051"></CodeLine>
<Link id="l02052" /><CodeLine lineNumber="2052"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;SMULO, G&#95;UMULO&#125;)</span></CodeLine>
<Link id="l02053" /><CodeLine lineNumber="2053"><span class="doxyHighlight">      .<a href="/docs/api/namespaces/llvm/legalizemutations/#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</span></CodeLine>
<Link id="l02054" /><CodeLine lineNumber="2054"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a009564405d1037574152ee039cd04b9f">minScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l02055" /><CodeLine lineNumber="2055"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a6a836d4faf3f9f04f1f04cc5f6de3c03">lower</a>();</span></CodeLine>
<Link id="l02056" /><CodeLine lineNumber="2056"></CodeLine>
<Link id="l02057" /><CodeLine lineNumber="2057"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;SBFX, G&#95;UBFX&#125;)</span></CodeLine>
<Link id="l02058" /><CodeLine lineNumber="2058"><span class="doxyHighlight">      .legalFor(&#123;&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;&#125;)</span></CodeLine>
<Link id="l02059" /><CodeLine lineNumber="2059"><span class="doxyHighlight">      .clampScalar(1, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l02060" /><CodeLine lineNumber="2060"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#a7adc16cc9bc8db5fd3c8a6798a846ab0">clampScalar</a>(0, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l02061" /><CodeLine lineNumber="2061"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adef498f01eb5d7c19ac40cd3b302d09e">widenScalarToNextPow2</a>(0)</span></CodeLine>
<Link id="l02062" /><CodeLine lineNumber="2062"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0);</span></CodeLine>
<Link id="l02063" /><CodeLine lineNumber="2063"></CodeLine>
<Link id="l02064" /><CodeLine lineNumber="2064"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</span></CodeLine>
<Link id="l02065" /><CodeLine lineNumber="2065"><span class="doxyHighlight">      &#123;</span><span class="doxyHighlightComment">// TODO: Verify V&#95;BFI&#95;B32 is generated from expanded bit ops</span></CodeLine>
<Link id="l02066" /><CodeLine lineNumber="2066"><span class="doxyHighlight">       G&#95;FCOPYSIGN,</span></CodeLine>
<Link id="l02067" /><CodeLine lineNumber="2067"></CodeLine>
<Link id="l02068" /><CodeLine lineNumber="2068"><span class="doxyHighlight">       G&#95;ATOMIC&#95;CMPXCHG&#95;WITH&#95;SUCCESS, G&#95;ATOMICRMW&#95;NAND, G&#95;ATOMICRMW&#95;FSUB,</span></CodeLine>
<Link id="l02069" /><CodeLine lineNumber="2069"><span class="doxyHighlight">       G&#95;READ&#95;REGISTER, G&#95;WRITE&#95;REGISTER,</span></CodeLine>
<Link id="l02070" /><CodeLine lineNumber="2070"></CodeLine>
<Link id="l02071" /><CodeLine lineNumber="2071"><span class="doxyHighlight">       G&#95;SADDO, G&#95;SSUBO&#125;)</span></CodeLine>
<Link id="l02072" /><CodeLine lineNumber="2072"><span class="doxyHighlight">      .lower();</span></CodeLine>
<Link id="l02073" /><CodeLine lineNumber="2073"></CodeLine>
<Link id="l02074" /><CodeLine lineNumber="2074"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasIEEEMinMax()) &#123;</span></CodeLine>
<Link id="l02075" /><CodeLine lineNumber="2075"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;FMINIMUM, G&#95;FMAXIMUM&#125;)</span></CodeLine>
<Link id="l02076" /><CodeLine lineNumber="2076"><span class="doxyHighlight">        .legalFor(FPTypesPK16)</span></CodeLine>
<Link id="l02077" /><CodeLine lineNumber="2077"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#a3b9d49f459b9596f73c60edab6e92673">clampMaxNumElements</a>(0, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, 2)</span></CodeLine>
<Link id="l02078" /><CodeLine lineNumber="2078"><span class="doxyHighlight">        .<a href="/docs/api/classes/llvm/legalizeruleset/#adf80c6b70ec078f749c51a5e64b4393d">scalarize</a>(0);</span></CodeLine>
<Link id="l02079" /><CodeLine lineNumber="2079"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02080" /><CodeLine lineNumber="2080"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Implement</span></CodeLine>
<Link id="l02081" /><CodeLine lineNumber="2081"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;FMINIMUM, G&#95;FMAXIMUM&#125;).lower();</span></CodeLine>
<Link id="l02082" /><CodeLine lineNumber="2082"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02083" /><CodeLine lineNumber="2083"></CodeLine>
<Link id="l02084" /><CodeLine lineNumber="2084"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;MEMCPY, G&#95;MEMCPY&#95;INLINE, G&#95;MEMMOVE, G&#95;MEMSET&#125;)</span></CodeLine>
<Link id="l02085" /><CodeLine lineNumber="2085"><span class="doxyHighlight">      .lower();</span></CodeLine>
<Link id="l02086" /><CodeLine lineNumber="2086"></CodeLine>
<Link id="l02087" /><CodeLine lineNumber="2087"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;TRAP, G&#95;DEBUGTRAP&#125;).custom();</span></CodeLine>
<Link id="l02088" /><CodeLine lineNumber="2088"></CodeLine>
<Link id="l02089" /><CodeLine lineNumber="2089"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(&#123;G&#95;VASTART, G&#95;VAARG, G&#95;BRJT, G&#95;JUMP&#95;TABLE,</span></CodeLine>
<Link id="l02090" /><CodeLine lineNumber="2090"><span class="doxyHighlight">        G&#95;INDEXED&#95;LOAD, G&#95;INDEXED&#95;SEXTLOAD,</span></CodeLine>
<Link id="l02091" /><CodeLine lineNumber="2091"><span class="doxyHighlight">        G&#95;INDEXED&#95;ZEXTLOAD, G&#95;INDEXED&#95;STORE&#125;)</span></CodeLine>
<Link id="l02092" /><CodeLine lineNumber="2092"><span class="doxyHighlight">    .<a href="/docs/api/files/lib/lib/binaryformat/macho-cpp/#a1a923abcc65272bfe81c0e7081c32421">unsupported</a>();</span></CodeLine>
<Link id="l02093" /><CodeLine lineNumber="2093"></CodeLine>
<Link id="l02094" /><CodeLine lineNumber="2094"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G&#95;PREFETCH).<a href="/docs/api/classes/llvm/legalizeruleset/#ab250f5144d04471b35f7fc229dc9da5c">alwaysLegal</a>();</span></CodeLine>
<Link id="l02095" /><CodeLine lineNumber="2095"></CodeLine>
<Link id="l02096" /><CodeLine lineNumber="2096"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerinfo/#a33b434e9218db992447f811551810394">getLegacyLegalizerInfo</a>().<a href="/docs/api/classes/llvm/legacylegalizerinfo/#a6b586580f1e35e04ae0f3186fadd6594">computeTables</a>();</span></CodeLine>
<Link id="l02097" /><CodeLine lineNumber="2097"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/powerpc/ppcctrloopsverify-cpp/#a593cc2f204f7b2edc16ee222c37c3196">verify</a>(&#42;ST.getInstrInfo());</span></CodeLine>
<Link id="l02098" /><CodeLine lineNumber="2098"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02099" /><CodeLine lineNumber="2099"></CodeLine>
<Link id="l02100" /><CodeLine lineNumber="2100" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a5fcff4c2edfd92fa5cfbd95768477c26"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a5fcff4c2edfd92fa5cfbd95768477c26">AMDGPULegalizerInfo::legalizeCustom</a>(</span></CodeLine>
<Link id="l02101" /><CodeLine lineNumber="2101"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> &amp;Helper, <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l02102" /><CodeLine lineNumber="2102"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/lostdebuglocobserver">LostDebugLocObserver</a> &amp;LocObserver)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02103" /><CodeLine lineNumber="2103"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</span></CodeLine>
<Link id="l02104" /><CodeLine lineNumber="2104"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI();</span></CodeLine>
<Link id="l02105" /><CodeLine lineNumber="2105"></CodeLine>
<Link id="l02106" /><CodeLine lineNumber="2106"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) &#123;</span></CodeLine>
<Link id="l02107" /><CodeLine lineNumber="2107"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;ADDRSPACE&#95;CAST:</span></CodeLine>
<Link id="l02108" /><CodeLine lineNumber="2108"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a805950c6af7deaddb2d8fbcaf4ea011b">legalizeAddrSpaceCast</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02109" /><CodeLine lineNumber="2109"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;INTRINSIC&#95;ROUNDEVEN:</span></CodeLine>
<Link id="l02110" /><CodeLine lineNumber="2110"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ab2bd62dca48651e04d811aff7bfc2aa6">legalizeFroundeven</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02111" /><CodeLine lineNumber="2111"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FCEIL:</span></CodeLine>
<Link id="l02112" /><CodeLine lineNumber="2112"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae468aab9eee24365f029a78836e6435d">legalizeFceil</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02113" /><CodeLine lineNumber="2113"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FREM:</span></CodeLine>
<Link id="l02114" /><CodeLine lineNumber="2114"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a594e9cb4df0c39f1f5263fb07273b19f">legalizeFrem</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02115" /><CodeLine lineNumber="2115"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;INTRINSIC&#95;TRUNC:</span></CodeLine>
<Link id="l02116" /><CodeLine lineNumber="2116"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a0e7378d479179ae1df0b61b83c637a4d">legalizeIntrinsicTrunc</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02117" /><CodeLine lineNumber="2117"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;SITOFP:</span></CodeLine>
<Link id="l02118" /><CodeLine lineNumber="2118"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#abb023d557c720f8730e0c266c1cd0f9c">legalizeITOFP</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02119" /><CodeLine lineNumber="2119"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;UITOFP:</span></CodeLine>
<Link id="l02120" /><CodeLine lineNumber="2120"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#abb023d557c720f8730e0c266c1cd0f9c">legalizeITOFP</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02121" /><CodeLine lineNumber="2121"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FPTOSI:</span></CodeLine>
<Link id="l02122" /><CodeLine lineNumber="2122"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ac6475a6b99e088697d90032ddab24447">legalizeFPTOI</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02123" /><CodeLine lineNumber="2123"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FPTOUI:</span></CodeLine>
<Link id="l02124" /><CodeLine lineNumber="2124"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ac6475a6b99e088697d90032ddab24447">legalizeFPTOI</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02125" /><CodeLine lineNumber="2125"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FMINNUM:</span></CodeLine>
<Link id="l02126" /><CodeLine lineNumber="2126"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FMAXNUM:</span></CodeLine>
<Link id="l02127" /><CodeLine lineNumber="2127"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FMINNUM&#95;IEEE:</span></CodeLine>
<Link id="l02128" /><CodeLine lineNumber="2128"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FMAXNUM&#95;IEEE:</span></CodeLine>
<Link id="l02129" /><CodeLine lineNumber="2129"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a91b85787aa32d7f1f0d38d59a77cee68">legalizeMinNumMaxNum</a>(Helper, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l02130" /><CodeLine lineNumber="2130"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;EXTRACT&#95;VECTOR&#95;ELT:</span></CodeLine>
<Link id="l02131" /><CodeLine lineNumber="2131"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#aec28181fa8c84646c097212f19e379f1">legalizeExtractVectorElt</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02132" /><CodeLine lineNumber="2132"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;INSERT&#95;VECTOR&#95;ELT:</span></CodeLine>
<Link id="l02133" /><CodeLine lineNumber="2133"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a762e3485a3d139ec7ed9d30a7f38f74d">legalizeInsertVectorElt</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02134" /><CodeLine lineNumber="2134"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FSIN:</span></CodeLine>
<Link id="l02135" /><CodeLine lineNumber="2135"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FCOS:</span></CodeLine>
<Link id="l02136" /><CodeLine lineNumber="2136"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#aaac467545afeead836946e5842563fea">legalizeSinCos</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02137" /><CodeLine lineNumber="2137"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;GLOBAL&#95;VALUE:</span></CodeLine>
<Link id="l02138" /><CodeLine lineNumber="2138"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a04975f118b224e8cd322d1aa86f2ceb2">legalizeGlobalValue</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02139" /><CodeLine lineNumber="2139"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;LOAD:</span></CodeLine>
<Link id="l02140" /><CodeLine lineNumber="2140"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;SEXTLOAD:</span></CodeLine>
<Link id="l02141" /><CodeLine lineNumber="2141"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;ZEXTLOAD:</span></CodeLine>
<Link id="l02142" /><CodeLine lineNumber="2142"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#af13d2c38b3bf7586a8f07d511eda68e8">legalizeLoad</a>(Helper, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l02143" /><CodeLine lineNumber="2143"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;STORE:</span></CodeLine>
<Link id="l02144" /><CodeLine lineNumber="2144"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a5fb58d2b96b0e7a4a021fbe21869aaa8">legalizeStore</a>(Helper, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l02145" /><CodeLine lineNumber="2145"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FMAD:</span></CodeLine>
<Link id="l02146" /><CodeLine lineNumber="2146"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a4774d239d20e55380840e775aed66efc">legalizeFMad</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02147" /><CodeLine lineNumber="2147"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FDIV:</span></CodeLine>
<Link id="l02148" /><CodeLine lineNumber="2148"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a4f3b6abeaf9c509c93062f2246a0f40b">legalizeFDIV</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02149" /><CodeLine lineNumber="2149"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FFREXP:</span></CodeLine>
<Link id="l02150" /><CodeLine lineNumber="2150"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a2b530047260b0f52c4dd8823764acb2d">legalizeFFREXP</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02151" /><CodeLine lineNumber="2151"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FSQRT:</span></CodeLine>
<Link id="l02152" /><CodeLine lineNumber="2152"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ad8779ad5bc404af71eaa72036c8be55f">legalizeFSQRT</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02153" /><CodeLine lineNumber="2153"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;UDIV:</span></CodeLine>
<Link id="l02154" /><CodeLine lineNumber="2154"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;UREM:</span></CodeLine>
<Link id="l02155" /><CodeLine lineNumber="2155"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;UDIVREM:</span></CodeLine>
<Link id="l02156" /><CodeLine lineNumber="2156"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a1d0eafc5b0af4bf05b288d62caa72ac9">legalizeUnsignedDIV&#95;REM</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02157" /><CodeLine lineNumber="2157"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;SDIV:</span></CodeLine>
<Link id="l02158" /><CodeLine lineNumber="2158"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;SREM:</span></CodeLine>
<Link id="l02159" /><CodeLine lineNumber="2159"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;SDIVREM:</span></CodeLine>
<Link id="l02160" /><CodeLine lineNumber="2160"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#aba263b2348b84c2d9a10adc0a42d9606">legalizeSignedDIV&#95;REM</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02161" /><CodeLine lineNumber="2161"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;ATOMIC&#95;CMPXCHG:</span></CodeLine>
<Link id="l02162" /><CodeLine lineNumber="2162"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a22a60a10a1cda01d7cef79f4634984dc">legalizeAtomicCmpXChg</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02163" /><CodeLine lineNumber="2163"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FLOG2:</span></CodeLine>
<Link id="l02164" /><CodeLine lineNumber="2164"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#afb13811bb447af9b35a1ae4257e37a36">legalizeFlog2</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02165" /><CodeLine lineNumber="2165"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FLOG:</span></CodeLine>
<Link id="l02166" /><CodeLine lineNumber="2166"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FLOG10:</span></CodeLine>
<Link id="l02167" /><CodeLine lineNumber="2167"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a39adc1637ddc1df880ec4ab13529879e">legalizeFlogCommon</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02168" /><CodeLine lineNumber="2168"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FEXP2:</span></CodeLine>
<Link id="l02169" /><CodeLine lineNumber="2169"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3c2bbefdd60b95a56cf8eeab162ea2ae">legalizeFExp2</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02170" /><CodeLine lineNumber="2170"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FEXP:</span></CodeLine>
<Link id="l02171" /><CodeLine lineNumber="2171"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FEXP10:</span></CodeLine>
<Link id="l02172" /><CodeLine lineNumber="2172"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a5552c2fa1505412508e493149af31543">legalizeFExp</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02173" /><CodeLine lineNumber="2173"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FPOW:</span></CodeLine>
<Link id="l02174" /><CodeLine lineNumber="2174"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#abf712aff736a372430ea6ea027fe32e5">legalizeFPow</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02175" /><CodeLine lineNumber="2175"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FFLOOR:</span></CodeLine>
<Link id="l02176" /><CodeLine lineNumber="2176"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a44186e632d4bab1d35012ed738a23870">legalizeFFloor</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02177" /><CodeLine lineNumber="2177"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;BUILD&#95;VECTOR:</span></CodeLine>
<Link id="l02178" /><CodeLine lineNumber="2178"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;BUILD&#95;VECTOR&#95;TRUNC:</span></CodeLine>
<Link id="l02179" /><CodeLine lineNumber="2179"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a4117d1ecf36af9158c825fb376c4082e">legalizeBuildVector</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02180" /><CodeLine lineNumber="2180"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;MUL:</span></CodeLine>
<Link id="l02181" /><CodeLine lineNumber="2181"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a2645b2c5fc9b404821322ad403c87810">legalizeMul</a>(Helper, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l02182" /><CodeLine lineNumber="2182"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;CTLZ:</span></CodeLine>
<Link id="l02183" /><CodeLine lineNumber="2183"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;CTTZ:</span></CodeLine>
<Link id="l02184" /><CodeLine lineNumber="2184"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a40f12f2bde2de188bff061f11bcd976c">legalizeCTLZ&#95;CTTZ</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02185" /><CodeLine lineNumber="2185"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;CTLZ&#95;ZERO&#95;UNDEF:</span></CodeLine>
<Link id="l02186" /><CodeLine lineNumber="2186"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#af30d14208a085b7b3e39b25a10f55896">legalizeCTLZ&#95;ZERO&#95;UNDEF</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02187" /><CodeLine lineNumber="2187"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;STACKSAVE:</span></CodeLine>
<Link id="l02188" /><CodeLine lineNumber="2188"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ac790f46abd06eb86bf3f84a46584b964">legalizeStackSave</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02189" /><CodeLine lineNumber="2189"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;GET&#95;FPENV:</span></CodeLine>
<Link id="l02190" /><CodeLine lineNumber="2190"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ad6a43ba94ff9ee58996abe2df50464a3">legalizeGetFPEnv</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02191" /><CodeLine lineNumber="2191"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;SET&#95;FPENV:</span></CodeLine>
<Link id="l02192" /><CodeLine lineNumber="2192"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#af6341dd9dcba1872086b57731b9c096d">legalizeSetFPEnv</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02193" /><CodeLine lineNumber="2193"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;TRAP:</span></CodeLine>
<Link id="l02194" /><CodeLine lineNumber="2194"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3c976423cd385375b51359be8283fb8e">legalizeTrap</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02195" /><CodeLine lineNumber="2195"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;DEBUGTRAP:</span></CodeLine>
<Link id="l02196" /><CodeLine lineNumber="2196"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a9fdc052c69668e632b94697f82350488">legalizeDebugTrap</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02197" /><CodeLine lineNumber="2197"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l02198" /><CodeLine lineNumber="2198"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02199" /><CodeLine lineNumber="2199"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02200" /><CodeLine lineNumber="2200"></CodeLine>
<Link id="l02201" /><CodeLine lineNumber="2201"><span class="doxyHighlight">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;expected switch to return&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02202" /><CodeLine lineNumber="2202"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02203" /><CodeLine lineNumber="2203"></CodeLine>
<Link id="l02204" /><CodeLine lineNumber="2204" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a2fd97f50411bc650c7f9f6e3118147f4"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a2fd97f50411bc650c7f9f6e3118147f4">AMDGPULegalizerInfo::getSegmentAperture</a>(</span></CodeLine>
<Link id="l02205" /><CodeLine lineNumber="2205"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AS,</span></CodeLine>
<Link id="l02206" /><CodeLine lineNumber="2206"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l02207" /><CodeLine lineNumber="2207"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02208" /><CodeLine lineNumber="2208"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF();</span></CodeLine>
<Link id="l02209" /><CodeLine lineNumber="2209"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp;ST = MF.<a href="/docs/api/classes/llvm/machinefunction/#a3825368aca2bc1550d173660df4da6a6">getSubtarget</a>&lt;<a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a>&gt;();</span></CodeLine>
<Link id="l02210" /><CodeLine lineNumber="2210"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l02211" /><CodeLine lineNumber="2211"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</span></CodeLine>
<Link id="l02212" /><CodeLine lineNumber="2212"></CodeLine>
<Link id="l02213" /><CodeLine lineNumber="2213"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL&#95;ADDRESS</a> || AS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aec164f45437d8827346f2d8ec645479a">AMDGPUAS::PRIVATE&#95;ADDRESS</a>);</span></CodeLine>
<Link id="l02214" /><CodeLine lineNumber="2214"></CodeLine>
<Link id="l02215" /><CodeLine lineNumber="2215"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasApertureRegs()) &#123;</span></CodeLine>
<Link id="l02216" /><CodeLine lineNumber="2216"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Note: this register is somewhat broken. When used as a 32-bit operand,</span></CodeLine>
<Link id="l02217" /><CodeLine lineNumber="2217"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// it only returns zeroes. The real value is in the upper 32 bits.</span></CodeLine>
<Link id="l02218" /><CodeLine lineNumber="2218"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Thus, we must emit extract the high 32 bits.</span></CodeLine>
<Link id="l02219" /><CodeLine lineNumber="2219"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ApertureRegNo = (AS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL&#95;ADDRESS</a>)</span></CodeLine>
<Link id="l02220" /><CodeLine lineNumber="2220"><span class="doxyHighlight">                                       ? AMDGPU::SRC&#95;SHARED&#95;BASE</span></CodeLine>
<Link id="l02221" /><CodeLine lineNumber="2221"><span class="doxyHighlight">                                       : AMDGPU::SRC&#95;PRIVATE&#95;BASE;</span></CodeLine>
<Link id="l02222" /><CodeLine lineNumber="2222"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: It would be more natural to emit a COPY here, but then copy</span></CodeLine>
<Link id="l02223" /><CodeLine lineNumber="2223"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// coalescing would kick in and it would think it&#39;s okay to use the &quot;HI&quot;</span></CodeLine>
<Link id="l02224" /><CodeLine lineNumber="2224"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// subregister (instead of extracting the HI 32 bits) which is an artificial</span></CodeLine>
<Link id="l02225" /><CodeLine lineNumber="2225"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// (unusable) register.</span></CodeLine>
<Link id="l02226" /><CodeLine lineNumber="2226"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  Register TableGen definitions would need an overhaul to get rid of the</span></CodeLine>
<Link id="l02227" /><CodeLine lineNumber="2227"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  artificial &quot;HI&quot; aperture registers and prevent this kind of issue from</span></CodeLine>
<Link id="l02228" /><CodeLine lineNumber="2228"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//  happening.</span></CodeLine>
<Link id="l02229" /><CodeLine lineNumber="2229"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>);</span></CodeLine>
<Link id="l02230" /><CodeLine lineNumber="2230"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.setRegClass(Dst, &amp;AMDGPU::SReg&#95;64RegClass);</span></CodeLine>
<Link id="l02231" /><CodeLine lineNumber="2231"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::S&#95;MOV&#95;B64, &#123;Dst&#125;, &#123;<a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a>(ApertureRegNo)&#125;);</span></CodeLine>
<Link id="l02232" /><CodeLine lineNumber="2232"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Dst).getReg(1);</span></CodeLine>
<Link id="l02233" /><CodeLine lineNumber="2233"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02234" /><CodeLine lineNumber="2234"></CodeLine>
<Link id="l02235" /><CodeLine lineNumber="2235"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: can we be smarter about machine pointer info?</span></CodeLine>
<Link id="l02236" /><CodeLine lineNumber="2236"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/machinepointerinfo">MachinePointerInfo</a> PtrInfo(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT&#95;ADDRESS</a>);</span></CodeLine>
<Link id="l02237" /><CodeLine lineNumber="2237"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> LoadAddr = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(</span></CodeLine>
<Link id="l02238" /><CodeLine lineNumber="2238"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt/#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT&#95;ADDRESS</a>, 64));</span></CodeLine>
<Link id="l02239" /><CodeLine lineNumber="2239"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For code object version 5, private&#95;base and shared&#95;base are passed through</span></CodeLine>
<Link id="l02240" /><CodeLine lineNumber="2240"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// implicit kernargs.</span></CodeLine>
<Link id="l02241" /><CodeLine lineNumber="2241"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/amdgpu/#a5f9a0bcc6ecfeef7109258c6a8012978">AMDGPU::getAMDHSACodeObjectVersion</a>(&#42;MF.<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>().<a href="/docs/api/classes/llvm/globalvalue/#a739b30c811f1eece61b05320ddf44e5b">getParent</a>()) &gt;=</span></CodeLine>
<Link id="l02242" /><CodeLine lineNumber="2242"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/amdgpu/#a30475b065bebd7bc81d1112d9067d772abd2438b14a6a1a27fae653284aaa3cb4">AMDGPU::AMDHSA&#95;COV5</a>) &#123;</span></CodeLine>
<Link id="l02243" /><CodeLine lineNumber="2243"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/amdgputargetlowering/#aabb66ae6636b6dbd45c1b66dd9353821">AMDGPUTargetLowering::ImplicitParameter</a> Param =</span></CodeLine>
<Link id="l02244" /><CodeLine lineNumber="2244"><span class="doxyHighlight">        AS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL&#95;ADDRESS</a> ? <a href="/docs/api/classes/llvm/amdgputargetlowering/#aabb66ae6636b6dbd45c1b66dd9353821a2e50c74ac7d9d4346f7ed1fa7d65802a">AMDGPUTargetLowering::SHARED&#95;BASE</a></span></CodeLine>
<Link id="l02245" /><CodeLine lineNumber="2245"><span class="doxyHighlight">                                      : <a href="/docs/api/classes/llvm/amdgputargetlowering/#aabb66ae6636b6dbd45c1b66dd9353821a2ebed7459a9c75beedcb87a45b3800cf">AMDGPUTargetLowering::PRIVATE&#95;BASE</a>;</span></CodeLine>
<Link id="l02246" /><CodeLine lineNumber="2246"><span class="doxyHighlight">    uint64&#95;t <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> =</span></CodeLine>
<Link id="l02247" /><CodeLine lineNumber="2247"><span class="doxyHighlight">        ST.getTargetLowering()-&gt;getImplicitParameterOffset(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF(), Param);</span></CodeLine>
<Link id="l02248" /><CodeLine lineNumber="2248"></CodeLine>
<Link id="l02249" /><CodeLine lineNumber="2249"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> KernargPtrReg = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(</span></CodeLine>
<Link id="l02250" /><CodeLine lineNumber="2250"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/llt/#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT&#95;ADDRESS</a>, 64));</span></CodeLine>
<Link id="l02251" /><CodeLine lineNumber="2251"></CodeLine>
<Link id="l02252" /><CodeLine lineNumber="2252"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(KernargPtrReg, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l02253" /><CodeLine lineNumber="2253"><span class="doxyHighlight">                        <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98baf32f3fd30ae548866dc7e45092dd90b9">AMDGPUFunctionArgInfo::KERNARG&#95;SEGMENT&#95;PTR</a>))</span></CodeLine>
<Link id="l02254" /><CodeLine lineNumber="2254"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a>();</span></CodeLine>
<Link id="l02255" /><CodeLine lineNumber="2255"></CodeLine>
<Link id="l02256" /><CodeLine lineNumber="2256"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinememoperand">MachineMemOperand</a> &#42;MMO = MF.<a href="/docs/api/classes/llvm/machinefunction/#a453ae3052b4f5b14cb4c184243ce5027">getMachineMemOperand</a>(</span></CodeLine>
<Link id="l02257" /><CodeLine lineNumber="2257"><span class="doxyHighlight">        PtrInfo,</span></CodeLine>
<Link id="l02258" /><CodeLine lineNumber="2258"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a> | <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2dda7b999a936bc7a4d45dfadbe356e77b3f">MachineMemOperand::MODereferenceable</a> |</span></CodeLine>
<Link id="l02259" /><CodeLine lineNumber="2259"><span class="doxyHighlight">            <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2ddac63dd9c4fe69bfeaac7a363fda846ac6">MachineMemOperand::MOInvariant</a>,</span></CodeLine>
<Link id="l02260" /><CodeLine lineNumber="2260"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32), <a href="/docs/api/namespaces/llvm/#acd6aa057934751aaac54e5c18bcc18eb">commonAlignment</a>(<a href="/docs/api/structs/llvm/align">Align</a>(64), <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>));</span></CodeLine>
<Link id="l02261" /><CodeLine lineNumber="2261"></CodeLine>
<Link id="l02262" /><CodeLine lineNumber="2262"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Pointer address</span></CodeLine>
<Link id="l02263" /><CodeLine lineNumber="2263"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildPtrAdd(LoadAddr, KernargPtrReg,</span></CodeLine>
<Link id="l02264" /><CodeLine lineNumber="2264"><span class="doxyHighlight">                  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64), <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>).getReg(0));</span></CodeLine>
<Link id="l02265" /><CodeLine lineNumber="2265"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Load address</span></CodeLine>
<Link id="l02266" /><CodeLine lineNumber="2266"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildLoad(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LoadAddr, &#42;MMO).getReg(0);</span></CodeLine>
<Link id="l02267" /><CodeLine lineNumber="2267"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02268" /><CodeLine lineNumber="2268"></CodeLine>
<Link id="l02269" /><CodeLine lineNumber="2269"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> QueuePtr = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(</span></CodeLine>
<Link id="l02270" /><CodeLine lineNumber="2270"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt/#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT&#95;ADDRESS</a>, 64));</span></CodeLine>
<Link id="l02271" /><CodeLine lineNumber="2271"></CodeLine>
<Link id="l02272" /><CodeLine lineNumber="2272"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(QueuePtr, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98ba32b5333e2f708d7eeb05c12e415b8fd4">AMDGPUFunctionArgInfo::QUEUE&#95;PTR</a>))</span></CodeLine>
<Link id="l02273" /><CodeLine lineNumber="2273"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a>();</span></CodeLine>
<Link id="l02274" /><CodeLine lineNumber="2274"></CodeLine>
<Link id="l02275" /><CodeLine lineNumber="2275"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Offset into amd&#95;queue&#95;t for group&#95;segment&#95;aperture&#95;base&#95;hi /</span></CodeLine>
<Link id="l02276" /><CodeLine lineNumber="2276"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// private&#95;segment&#95;aperture&#95;base&#95;hi.</span></CodeLine>
<Link id="l02277" /><CodeLine lineNumber="2277"><span class="doxyHighlight">  uint32&#95;t StructOffset = (AS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL&#95;ADDRESS</a>) ? 64 : 0x44;</span></CodeLine>
<Link id="l02278" /><CodeLine lineNumber="2278"></CodeLine>
<Link id="l02279" /><CodeLine lineNumber="2279"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinememoperand">MachineMemOperand</a> &#42;MMO = MF.<a href="/docs/api/classes/llvm/machinefunction/#a453ae3052b4f5b14cb4c184243ce5027">getMachineMemOperand</a>(</span></CodeLine>
<Link id="l02280" /><CodeLine lineNumber="2280"><span class="doxyHighlight">      PtrInfo,</span></CodeLine>
<Link id="l02281" /><CodeLine lineNumber="2281"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a> | <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2dda7b999a936bc7a4d45dfadbe356e77b3f">MachineMemOperand::MODereferenceable</a> |</span></CodeLine>
<Link id="l02282" /><CodeLine lineNumber="2282"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2ddac63dd9c4fe69bfeaac7a363fda846ac6">MachineMemOperand::MOInvariant</a>,</span></CodeLine>
<Link id="l02283" /><CodeLine lineNumber="2283"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32), <a href="/docs/api/namespaces/llvm/#acd6aa057934751aaac54e5c18bcc18eb">commonAlignment</a>(<a href="/docs/api/structs/llvm/align">Align</a>(64), StructOffset));</span></CodeLine>
<Link id="l02284" /><CodeLine lineNumber="2284"></CodeLine>
<Link id="l02285" /><CodeLine lineNumber="2285"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildPtrAdd(LoadAddr, QueuePtr,</span></CodeLine>
<Link id="l02286" /><CodeLine lineNumber="2286"><span class="doxyHighlight">                <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64), StructOffset).getReg(0));</span></CodeLine>
<Link id="l02287" /><CodeLine lineNumber="2287"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildLoad(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LoadAddr, &#42;MMO).getReg(0);</span></CodeLine>
<Link id="l02288" /><CodeLine lineNumber="2288"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02289" /><CodeLine lineNumber="2289"></CodeLine>
<Link id="l02290" /><CodeLine lineNumber="2290"><span class="doxyHighlightComment">/// Return true if the value is a known valid address, such that a null check is</span></CodeLine>
<Link id="l02291" /><CodeLine lineNumber="2291"><span class="doxyHighlightComment">/// not necessary.</span></CodeLine>
<Link id="l02292" /><CodeLine lineNumber="2292" lineLink="#aff707b57a26889c4290a79001f12fd20"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#aff707b57a26889c4290a79001f12fd20">isKnownNonNull</a>(<a href="/docs/api/classes/llvm/register">Register</a> Val, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l02293" /><CodeLine lineNumber="2293"><span class="doxyHighlight">                           </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgputargetmachine">AMDGPUTargetMachine</a> &amp;TM, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AddrSpace) &#123;</span></CodeLine>
<Link id="l02294" /><CodeLine lineNumber="2294"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;Def = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getVRegDef(Val);</span></CodeLine>
<Link id="l02295" /><CodeLine lineNumber="2295"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (Def-&gt;getOpcode()) &#123;</span></CodeLine>
<Link id="l02296" /><CodeLine lineNumber="2296"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> AMDGPU::G&#95;FRAME&#95;INDEX:</span></CodeLine>
<Link id="l02297" /><CodeLine lineNumber="2297"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> AMDGPU::G&#95;GLOBAL&#95;VALUE:</span></CodeLine>
<Link id="l02298" /><CodeLine lineNumber="2298"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> AMDGPU::G&#95;BLOCK&#95;ADDR:</span></CodeLine>
<Link id="l02299" /><CodeLine lineNumber="2299"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02300" /><CodeLine lineNumber="2300"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> AMDGPU::G&#95;CONSTANT: &#123;</span></CodeLine>
<Link id="l02301" /><CodeLine lineNumber="2301"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/constantint">ConstantInt</a> &#42;CI = Def-&gt;getOperand(1).getCImm();</span></CodeLine>
<Link id="l02302" /><CodeLine lineNumber="2302"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> CI-&gt;<a href="/docs/api/classes/llvm/constantint/#aa8f4be0661aa64f5b1f20b15e93bb403">getSExtValue</a>() != TM.getNullPointerValue(AddrSpace);</span></CodeLine>
<Link id="l02303" /><CodeLine lineNumber="2303"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02304" /><CodeLine lineNumber="2304"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l02305" /><CodeLine lineNumber="2305"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02306" /><CodeLine lineNumber="2306"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02307" /><CodeLine lineNumber="2307"></CodeLine>
<Link id="l02308" /><CodeLine lineNumber="2308"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02309" /><CodeLine lineNumber="2309"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02310" /><CodeLine lineNumber="2310"></CodeLine>
<Link id="l02311" /><CodeLine lineNumber="2311" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a805950c6af7deaddb2d8fbcaf4ea011b"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a805950c6af7deaddb2d8fbcaf4ea011b">AMDGPULegalizerInfo::legalizeAddrSpaceCast</a>(</span></CodeLine>
<Link id="l02312" /><CodeLine lineNumber="2312"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l02313" /><CodeLine lineNumber="2313"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02314" /><CodeLine lineNumber="2314"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF();</span></CodeLine>
<Link id="l02315" /><CodeLine lineNumber="2315"></CodeLine>
<Link id="l02316" /><CodeLine lineNumber="2316"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// MI can either be a G&#95;ADDRSPACE&#95;CAST or a</span></CodeLine>
<Link id="l02317" /><CodeLine lineNumber="2317"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// G&#95;INTRINSIC @llvm.amdgcn.addrspacecast.nonnull</span></CodeLine>
<Link id="l02318" /><CodeLine lineNumber="2318"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G&#95;ADDRSPACE&#95;CAST ||</span></CodeLine>
<Link id="l02319" /><CodeLine lineNumber="2319"><span class="doxyHighlight">         (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;GIntrinsic&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) &amp;&amp; <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;GIntrinsic&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>).getIntrinsicID() ==</span></CodeLine>
<Link id="l02320" /><CodeLine lineNumber="2320"><span class="doxyHighlight">                                     Intrinsic::amdgcn&#95;addrspacecast&#95;nonnull));</span></CodeLine>
<Link id="l02321" /><CodeLine lineNumber="2321"></CodeLine>
<Link id="l02322" /><CodeLine lineNumber="2322"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l02323" /><CodeLine lineNumber="2323"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l02324" /><CodeLine lineNumber="2324"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src = <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;GIntrinsic&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) ? <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg()</span></CodeLine>
<Link id="l02325" /><CodeLine lineNumber="2325"><span class="doxyHighlight">                                     : <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l02326" /><CodeLine lineNumber="2326"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> DstTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst);</span></CodeLine>
<Link id="l02327" /><CodeLine lineNumber="2327"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> SrcTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Src);</span></CodeLine>
<Link id="l02328" /><CodeLine lineNumber="2328"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> DestAS = DstTy.<a href="/docs/api/classes/llvm/llt/#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>();</span></CodeLine>
<Link id="l02329" /><CodeLine lineNumber="2329"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SrcAS = SrcTy.getAddressSpace();</span></CodeLine>
<Link id="l02330" /><CodeLine lineNumber="2330"></CodeLine>
<Link id="l02331" /><CodeLine lineNumber="2331"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Avoid reloading from the queue ptr for each cast, or at least each</span></CodeLine>
<Link id="l02332" /><CodeLine lineNumber="2332"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// vector element.</span></CodeLine>
<Link id="l02333" /><CodeLine lineNumber="2333"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!DstTy.<a href="/docs/api/classes/llvm/llt/#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>());</span></CodeLine>
<Link id="l02334" /><CodeLine lineNumber="2334"></CodeLine>
<Link id="l02335" /><CodeLine lineNumber="2335"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgputargetmachine">AMDGPUTargetMachine</a> &amp;TM</span></CodeLine>
<Link id="l02336" /><CodeLine lineNumber="2336"><span class="doxyHighlight">    = </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeyword">const </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/amdgputargetmachine">AMDGPUTargetMachine</a> &amp;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(MF.<a href="/docs/api/classes/llvm/machinefunction/#af777ff93c9e07a6ff5ffe3226deb3e76">getTarget</a>());</span></CodeLine>
<Link id="l02337" /><CodeLine lineNumber="2337"></CodeLine>
<Link id="l02338" /><CodeLine lineNumber="2338"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TM.isNoopAddrSpaceCast(SrcAS, DestAS)) &#123;</span></CodeLine>
<Link id="l02339" /><CodeLine lineNumber="2339"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getTII().get(TargetOpcode::G&#95;BITCAST));</span></CodeLine>
<Link id="l02340" /><CodeLine lineNumber="2340"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02341" /><CodeLine lineNumber="2341"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02342" /><CodeLine lineNumber="2342"></CodeLine>
<Link id="l02343" /><CodeLine lineNumber="2343"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SrcAS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aaa1e27e4fc68e5706a4b7bbaed447c14">AMDGPUAS::FLAT&#95;ADDRESS</a> &amp;&amp;</span></CodeLine>
<Link id="l02344" /><CodeLine lineNumber="2344"><span class="doxyHighlight">      (DestAS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL&#95;ADDRESS</a> ||</span></CodeLine>
<Link id="l02345" /><CodeLine lineNumber="2345"><span class="doxyHighlight">       DestAS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aec164f45437d8827346f2d8ec645479a">AMDGPUAS::PRIVATE&#95;ADDRESS</a>)) &#123;</span></CodeLine>
<Link id="l02346" /><CodeLine lineNumber="2346"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For llvm.amdgcn.addrspacecast.nonnull we can always assume non-null, for</span></CodeLine>
<Link id="l02347" /><CodeLine lineNumber="2347"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// G&#95;ADDRSPACE&#95;CAST we need to guess.</span></CodeLine>
<Link id="l02348" /><CodeLine lineNumber="2348"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;GIntrinsic&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) || <a href="#aff707b57a26889c4290a79001f12fd20">isKnownNonNull</a>(Src, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, TM, SrcAS)) &#123;</span></CodeLine>
<Link id="l02349" /><CodeLine lineNumber="2349"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Extract low 32-bits of the pointer.</span></CodeLine>
<Link id="l02350" /><CodeLine lineNumber="2350"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildExtract(Dst, Src, 0);</span></CodeLine>
<Link id="l02351" /><CodeLine lineNumber="2351"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02352" /><CodeLine lineNumber="2352"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02353" /><CodeLine lineNumber="2353"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02354" /><CodeLine lineNumber="2354"></CodeLine>
<Link id="l02355" /><CodeLine lineNumber="2355"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NullVal = TM.getNullPointerValue(DestAS);</span></CodeLine>
<Link id="l02356" /><CodeLine lineNumber="2356"></CodeLine>
<Link id="l02357" /><CodeLine lineNumber="2357"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SegmentNull = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(DstTy, NullVal);</span></CodeLine>
<Link id="l02358" /><CodeLine lineNumber="2358"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FlatNull = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(SrcTy, 0);</span></CodeLine>
<Link id="l02359" /><CodeLine lineNumber="2359"></CodeLine>
<Link id="l02360" /><CodeLine lineNumber="2360"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Extract low 32-bits of the pointer.</span></CodeLine>
<Link id="l02361" /><CodeLine lineNumber="2361"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> PtrLo32 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildExtract(DstTy, Src, 0);</span></CodeLine>
<Link id="l02362" /><CodeLine lineNumber="2362"></CodeLine>
<Link id="l02363" /><CodeLine lineNumber="2363"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CmpRes =</span></CodeLine>
<Link id="l02364" /><CodeLine lineNumber="2364"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP&#95;NE</a>, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), Src, FlatNull.getReg(0));</span></CodeLine>
<Link id="l02365" /><CodeLine lineNumber="2365"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(Dst, CmpRes, PtrLo32, SegmentNull.getReg(0));</span></CodeLine>
<Link id="l02366" /><CodeLine lineNumber="2366"></CodeLine>
<Link id="l02367" /><CodeLine lineNumber="2367"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02368" /><CodeLine lineNumber="2368"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02369" /><CodeLine lineNumber="2369"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02370" /><CodeLine lineNumber="2370"></CodeLine>
<Link id="l02371" /><CodeLine lineNumber="2371"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DestAS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aaa1e27e4fc68e5706a4b7bbaed447c14">AMDGPUAS::FLAT&#95;ADDRESS</a> &amp;&amp;</span></CodeLine>
<Link id="l02372" /><CodeLine lineNumber="2372"><span class="doxyHighlight">      (SrcAS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL&#95;ADDRESS</a> ||</span></CodeLine>
<Link id="l02373" /><CodeLine lineNumber="2373"><span class="doxyHighlight">       SrcAS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aec164f45437d8827346f2d8ec645479a">AMDGPUAS::PRIVATE&#95;ADDRESS</a>)) &#123;</span></CodeLine>
<Link id="l02374" /><CodeLine lineNumber="2374"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> castLocalOrPrivateToFlat = &#91;&amp;&#93;(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/dstop">DstOp</a> &amp;Dst) -&gt; <a href="/docs/api/classes/llvm/register">Register</a> &#123;</span></CodeLine>
<Link id="l02375" /><CodeLine lineNumber="2375"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/register">Register</a> ApertureReg = <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a2fd97f50411bc650c7f9f6e3118147f4">getSegmentAperture</a>(SrcAS, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02376" /><CodeLine lineNumber="2376"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ApertureReg.<a href="/docs/api/classes/llvm/register/#a7407603b3efcdc8d4c2b76697be34528">isValid</a>())</span></CodeLine>
<Link id="l02377" /><CodeLine lineNumber="2377"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02378" /><CodeLine lineNumber="2378"></CodeLine>
<Link id="l02379" /><CodeLine lineNumber="2379"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Coerce the type of the low half of the result so we can use</span></CodeLine>
<Link id="l02380" /><CodeLine lineNumber="2380"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// merge&#95;values.</span></CodeLine>
<Link id="l02381" /><CodeLine lineNumber="2381"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/register">Register</a> SrcAsInt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildPtrToInt(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Src).getReg(0);</span></CodeLine>
<Link id="l02382" /><CodeLine lineNumber="2382"></CodeLine>
<Link id="l02383" /><CodeLine lineNumber="2383"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// TODO: Should we allow mismatched types but matching sizes in merges to</span></CodeLine>
<Link id="l02384" /><CodeLine lineNumber="2384"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// avoid the ptrtoint?</span></CodeLine>
<Link id="l02385" /><CodeLine lineNumber="2385"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(Dst, &#123;SrcAsInt, ApertureReg&#125;).<a href="/docs/api/files/lib/lib/target/lib/target/mips/lib/target/mips/disassembler/mipsdisassembler-cpp/#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0);</span></CodeLine>
<Link id="l02386" /><CodeLine lineNumber="2386"><span class="doxyHighlight">    &#125;;</span></CodeLine>
<Link id="l02387" /><CodeLine lineNumber="2387"></CodeLine>
<Link id="l02388" /><CodeLine lineNumber="2388"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For llvm.amdgcn.addrspacecast.nonnull we can always assume non-null, for</span></CodeLine>
<Link id="l02389" /><CodeLine lineNumber="2389"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// G&#95;ADDRSPACE&#95;CAST we need to guess.</span></CodeLine>
<Link id="l02390" /><CodeLine lineNumber="2390"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;GIntrinsic&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) || <a href="#aff707b57a26889c4290a79001f12fd20">isKnownNonNull</a>(Src, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, TM, SrcAS)) &#123;</span></CodeLine>
<Link id="l02391" /><CodeLine lineNumber="2391"><span class="doxyHighlight">      castLocalOrPrivateToFlat(Dst);</span></CodeLine>
<Link id="l02392" /><CodeLine lineNumber="2392"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02393" /><CodeLine lineNumber="2393"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02394" /><CodeLine lineNumber="2394"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02395" /><CodeLine lineNumber="2395"></CodeLine>
<Link id="l02396" /><CodeLine lineNumber="2396"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> BuildPtr = castLocalOrPrivateToFlat(DstTy);</span></CodeLine>
<Link id="l02397" /><CodeLine lineNumber="2397"></CodeLine>
<Link id="l02398" /><CodeLine lineNumber="2398"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SegmentNull = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(SrcTy, TM.getNullPointerValue(SrcAS));</span></CodeLine>
<Link id="l02399" /><CodeLine lineNumber="2399"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FlatNull = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(DstTy, TM.getNullPointerValue(DestAS));</span></CodeLine>
<Link id="l02400" /><CodeLine lineNumber="2400"></CodeLine>
<Link id="l02401" /><CodeLine lineNumber="2401"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CmpRes = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP&#95;NE</a>, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), Src,</span></CodeLine>
<Link id="l02402" /><CodeLine lineNumber="2402"><span class="doxyHighlight">                              SegmentNull.getReg(0));</span></CodeLine>
<Link id="l02403" /><CodeLine lineNumber="2403"></CodeLine>
<Link id="l02404" /><CodeLine lineNumber="2404"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(Dst, CmpRes, BuildPtr, FlatNull);</span></CodeLine>
<Link id="l02405" /><CodeLine lineNumber="2405"></CodeLine>
<Link id="l02406" /><CodeLine lineNumber="2406"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02407" /><CodeLine lineNumber="2407"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02408" /><CodeLine lineNumber="2408"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02409" /><CodeLine lineNumber="2409"></CodeLine>
<Link id="l02410" /><CodeLine lineNumber="2410"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DestAS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a1caf1e287a5fe7250388d66ed72aa0c1">AMDGPUAS::CONSTANT&#95;ADDRESS&#95;32BIT</a> &amp;&amp;</span></CodeLine>
<Link id="l02411" /><CodeLine lineNumber="2411"><span class="doxyHighlight">      SrcTy.getSizeInBits() == 64) &#123;</span></CodeLine>
<Link id="l02412" /><CodeLine lineNumber="2412"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Truncate.</span></CodeLine>
<Link id="l02413" /><CodeLine lineNumber="2413"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildExtract(Dst, Src, 0);</span></CodeLine>
<Link id="l02414" /><CodeLine lineNumber="2414"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02415" /><CodeLine lineNumber="2415"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02416" /><CodeLine lineNumber="2416"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02417" /><CodeLine lineNumber="2417"></CodeLine>
<Link id="l02418" /><CodeLine lineNumber="2418"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SrcAS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a1caf1e287a5fe7250388d66ed72aa0c1">AMDGPUAS::CONSTANT&#95;ADDRESS&#95;32BIT</a> &amp;&amp;</span></CodeLine>
<Link id="l02419" /><CodeLine lineNumber="2419"><span class="doxyHighlight">      DstTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 64) &#123;</span></CodeLine>
<Link id="l02420" /><CodeLine lineNumber="2420"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a> &#42;Info = MF.<a href="/docs/api/classes/llvm/machinefunction/#ab7feae1932b436c8630e247166ec42b7">getInfo</a>&lt;<a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a>&gt;();</span></CodeLine>
<Link id="l02421" /><CodeLine lineNumber="2421"><span class="doxyHighlight">    uint32&#95;t AddrHiVal = Info-&gt;get32BitAddressHighBits();</span></CodeLine>
<Link id="l02422" /><CodeLine lineNumber="2422"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> PtrLo = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildPtrToInt(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Src);</span></CodeLine>
<Link id="l02423" /><CodeLine lineNumber="2423"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> HighAddr = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, AddrHiVal);</span></CodeLine>
<Link id="l02424" /><CodeLine lineNumber="2424"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(Dst, &#123;PtrLo, HighAddr&#125;);</span></CodeLine>
<Link id="l02425" /><CodeLine lineNumber="2425"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02426" /><CodeLine lineNumber="2426"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02427" /><CodeLine lineNumber="2427"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02428" /><CodeLine lineNumber="2428"></CodeLine>
<Link id="l02429" /><CodeLine lineNumber="2429"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Invalid casts are poison.</span></CodeLine>
<Link id="l02430" /><CodeLine lineNumber="2430"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Should return poison</span></CodeLine>
<Link id="l02431" /><CodeLine lineNumber="2431"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUndef(Dst);</span></CodeLine>
<Link id="l02432" /><CodeLine lineNumber="2432"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02433" /><CodeLine lineNumber="2433"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02434" /><CodeLine lineNumber="2434"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02435" /><CodeLine lineNumber="2435"></CodeLine>
<Link id="l02436" /><CodeLine lineNumber="2436" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#ab2bd62dca48651e04d811aff7bfc2aa6"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ab2bd62dca48651e04d811aff7bfc2aa6">AMDGPULegalizerInfo::legalizeFroundeven</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l02437" /><CodeLine lineNumber="2437"><span class="doxyHighlight">                                             <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l02438" /><CodeLine lineNumber="2438"><span class="doxyHighlight">                                             <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02439" /><CodeLine lineNumber="2439"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l02440" /><CodeLine lineNumber="2440"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Src);</span></CodeLine>
<Link id="l02441" /><CodeLine lineNumber="2441"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty.isScalar() &amp;&amp; Ty.getSizeInBits() == 64);</span></CodeLine>
<Link id="l02442" /><CodeLine lineNumber="2442"></CodeLine>
<Link id="l02443" /><CodeLine lineNumber="2443"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/apfloat">APFloat</a> C1Val(<a href="/docs/api/structs/llvm/apfloatbase/#a6ba7c3d54a5a714f7a27861ee114cce3">APFloat::IEEEdouble</a>(), </span><span class="doxyHighlightStringLiteral">&quot;0x1.0p+52&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02444" /><CodeLine lineNumber="2444"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/apfloat">APFloat</a> C2Val(<a href="/docs/api/structs/llvm/apfloatbase/#a6ba7c3d54a5a714f7a27861ee114cce3">APFloat::IEEEdouble</a>(), </span><span class="doxyHighlightStringLiteral">&quot;0x1.fffffffffffffp+51&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02445" /><CodeLine lineNumber="2445"></CodeLine>
<Link id="l02446" /><CodeLine lineNumber="2446"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> C1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, C1Val);</span></CodeLine>
<Link id="l02447" /><CodeLine lineNumber="2447"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CopySign = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCopysign(Ty, C1, Src);</span></CodeLine>
<Link id="l02448" /><CodeLine lineNumber="2448"></CodeLine>
<Link id="l02449" /><CodeLine lineNumber="2449"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Should this propagate fast-math-flags?</span></CodeLine>
<Link id="l02450" /><CodeLine lineNumber="2450"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Tmp1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFAdd(Ty, Src, CopySign);</span></CodeLine>
<Link id="l02451" /><CodeLine lineNumber="2451"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Tmp2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFSub(Ty, Tmp1, CopySign);</span></CodeLine>
<Link id="l02452" /><CodeLine lineNumber="2452"></CodeLine>
<Link id="l02453" /><CodeLine lineNumber="2453"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> C2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, C2Val);</span></CodeLine>
<Link id="l02454" /><CodeLine lineNumber="2454"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fabs = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFAbs(Ty, Src);</span></CodeLine>
<Link id="l02455" /><CodeLine lineNumber="2455"></CodeLine>
<Link id="l02456" /><CodeLine lineNumber="2456"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">CmpInst::FCMP&#95;OGT</a>, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), Fabs, C2);</span></CodeLine>
<Link id="l02457" /><CodeLine lineNumber="2457"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, Src, Tmp2);</span></CodeLine>
<Link id="l02458" /><CodeLine lineNumber="2458"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02459" /><CodeLine lineNumber="2459"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02460" /><CodeLine lineNumber="2460"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02461" /><CodeLine lineNumber="2461"></CodeLine>
<Link id="l02462" /><CodeLine lineNumber="2462" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae468aab9eee24365f029a78836e6435d"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae468aab9eee24365f029a78836e6435d">AMDGPULegalizerInfo::legalizeFceil</a>(</span></CodeLine>
<Link id="l02463" /><CodeLine lineNumber="2463"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l02464" /><CodeLine lineNumber="2464"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02465" /><CodeLine lineNumber="2465"></CodeLine>
<Link id="l02466" /><CodeLine lineNumber="2466"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</span></CodeLine>
<Link id="l02467" /><CodeLine lineNumber="2467"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</span></CodeLine>
<Link id="l02468" /><CodeLine lineNumber="2468"></CodeLine>
<Link id="l02469" /><CodeLine lineNumber="2469"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l02470" /><CodeLine lineNumber="2470"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Src) == <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>);</span></CodeLine>
<Link id="l02471" /><CodeLine lineNumber="2471"></CodeLine>
<Link id="l02472" /><CodeLine lineNumber="2472"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// result = trunc(src)</span></CodeLine>
<Link id="l02473" /><CodeLine lineNumber="2473"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// if (src &gt; 0 &amp;&amp; src != result)</span></CodeLine>
<Link id="l02474" /><CodeLine lineNumber="2474"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   result += 1</span></CodeLine>
<Link id="l02475" /><CodeLine lineNumber="2475"></CodeLine>
<Link id="l02476" /><CodeLine lineNumber="2476"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Trunc = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsicTrunc(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, Src);</span></CodeLine>
<Link id="l02477" /><CodeLine lineNumber="2477"></CodeLine>
<Link id="l02478" /><CodeLine lineNumber="2478"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Zero = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, 0.0);</span></CodeLine>
<Link id="l02479" /><CodeLine lineNumber="2479"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> One = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, 1.0);</span></CodeLine>
<Link id="l02480" /><CodeLine lineNumber="2480"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Lt0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">CmpInst::FCMP&#95;OGT</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Src, Zero);</span></CodeLine>
<Link id="l02481" /><CodeLine lineNumber="2481"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NeTrunc = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464">CmpInst::FCMP&#95;ONE</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Src, Trunc);</span></CodeLine>
<Link id="l02482" /><CodeLine lineNumber="2482"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnd(<a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Lt0, NeTrunc);</span></CodeLine>
<Link id="l02483" /><CodeLine lineNumber="2483"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, One, Zero);</span></CodeLine>
<Link id="l02484" /><CodeLine lineNumber="2484"></CodeLine>
<Link id="l02485" /><CodeLine lineNumber="2485"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Should this propagate fast-math-flags?</span></CodeLine>
<Link id="l02486" /><CodeLine lineNumber="2486"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFAdd(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), Trunc, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a>);</span></CodeLine>
<Link id="l02487" /><CodeLine lineNumber="2487"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02488" /><CodeLine lineNumber="2488"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02489" /><CodeLine lineNumber="2489"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02490" /><CodeLine lineNumber="2490"></CodeLine>
<Link id="l02491" /><CodeLine lineNumber="2491" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a594e9cb4df0c39f1f5263fb07273b19f"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a594e9cb4df0c39f1f5263fb07273b19f">AMDGPULegalizerInfo::legalizeFrem</a>(</span></CodeLine>
<Link id="l02492" /><CodeLine lineNumber="2492"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l02493" /><CodeLine lineNumber="2493"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02494" /><CodeLine lineNumber="2494"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> DstReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l02495" /><CodeLine lineNumber="2495"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> Src0Reg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l02496" /><CodeLine lineNumber="2496"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> Src1Reg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l02497" /><CodeLine lineNumber="2497"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l02498" /><CodeLine lineNumber="2498"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(DstReg);</span></CodeLine>
<Link id="l02499" /><CodeLine lineNumber="2499"></CodeLine>
<Link id="l02500" /><CodeLine lineNumber="2500"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Div = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFDiv(Ty, Src0Reg, Src1Reg, Flags);</span></CodeLine>
<Link id="l02501" /><CodeLine lineNumber="2501"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Trunc = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsicTrunc(Ty, Div, Flags);</span></CodeLine>
<Link id="l02502" /><CodeLine lineNumber="2502"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Neg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFNeg(Ty, Trunc, Flags);</span></CodeLine>
<Link id="l02503" /><CodeLine lineNumber="2503"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(DstReg, Neg, Src1Reg, Src0Reg, Flags);</span></CodeLine>
<Link id="l02504" /><CodeLine lineNumber="2504"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02505" /><CodeLine lineNumber="2505"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02506" /><CodeLine lineNumber="2506"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02507" /><CodeLine lineNumber="2507"></CodeLine>
<Link id="l02508" /><CodeLine lineNumber="2508" lineLink="#a47ea7f32b98178dbcb9bf3d1ff00daa1"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a> <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuisellowering-cpp/#a04e235b6a89f8643510cf83561b6d5dc">extractF64Exponent</a>(<a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>,</span></CodeLine>
<Link id="l02509" /><CodeLine lineNumber="2509"><span class="doxyHighlight">                                              <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l02510" /><CodeLine lineNumber="2510"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> FractBits = 52;</span></CodeLine>
<Link id="l02511" /><CodeLine lineNumber="2511"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ExpBits = 11;</span></CodeLine>
<Link id="l02512" /><CodeLine lineNumber="2512"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l02513" /><CodeLine lineNumber="2513"></CodeLine>
<Link id="l02514" /><CodeLine lineNumber="2514"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Const0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, FractBits - 32);</span></CodeLine>
<Link id="l02515" /><CodeLine lineNumber="2515"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Const1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, ExpBits);</span></CodeLine>
<Link id="l02516" /><CodeLine lineNumber="2516"></CodeLine>
<Link id="l02517" /><CodeLine lineNumber="2517"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ExpPart = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;ubfe, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l02518" /><CodeLine lineNumber="2518"><span class="doxyHighlight">                     .addUse(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>)</span></CodeLine>
<Link id="l02519" /><CodeLine lineNumber="2519"><span class="doxyHighlight">                     .addUse(Const0.getReg(0))</span></CodeLine>
<Link id="l02520" /><CodeLine lineNumber="2520"><span class="doxyHighlight">                     .addUse(Const1.getReg(0));</span></CodeLine>
<Link id="l02521" /><CodeLine lineNumber="2521"></CodeLine>
<Link id="l02522" /><CodeLine lineNumber="2522"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSub(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, ExpPart, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 1023));</span></CodeLine>
<Link id="l02523" /><CodeLine lineNumber="2523"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02524" /><CodeLine lineNumber="2524"></CodeLine>
<Link id="l02525" /><CodeLine lineNumber="2525" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a0e7378d479179ae1df0b61b83c637a4d"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a0e7378d479179ae1df0b61b83c637a4d">AMDGPULegalizerInfo::legalizeIntrinsicTrunc</a>(</span></CodeLine>
<Link id="l02526" /><CodeLine lineNumber="2526"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l02527" /><CodeLine lineNumber="2527"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02528" /><CodeLine lineNumber="2528"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</span></CodeLine>
<Link id="l02529" /><CodeLine lineNumber="2529"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l02530" /><CodeLine lineNumber="2530"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</span></CodeLine>
<Link id="l02531" /><CodeLine lineNumber="2531"></CodeLine>
<Link id="l02532" /><CodeLine lineNumber="2532"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l02533" /><CodeLine lineNumber="2533"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Src) == <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>);</span></CodeLine>
<Link id="l02534" /><CodeLine lineNumber="2534"></CodeLine>
<Link id="l02535" /><CodeLine lineNumber="2535"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Should this use extract since the low half is unused?</span></CodeLine>
<Link id="l02536" /><CodeLine lineNumber="2536"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, Src);</span></CodeLine>
<Link id="l02537" /><CodeLine lineNumber="2537"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = Unmerge.getReg(1);</span></CodeLine>
<Link id="l02538" /><CodeLine lineNumber="2538"></CodeLine>
<Link id="l02539" /><CodeLine lineNumber="2539"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Extract the upper half, since this is where we will find the sign and</span></CodeLine>
<Link id="l02540" /><CodeLine lineNumber="2540"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// exponent.</span></CodeLine>
<Link id="l02541" /><CodeLine lineNumber="2541"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Exp = <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuisellowering-cpp/#a04e235b6a89f8643510cf83561b6d5dc">extractF64Exponent</a>(<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l02542" /><CodeLine lineNumber="2542"></CodeLine>
<Link id="l02543" /><CodeLine lineNumber="2543"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> FractBits = 52;</span></CodeLine>
<Link id="l02544" /><CodeLine lineNumber="2544"></CodeLine>
<Link id="l02545" /><CodeLine lineNumber="2545"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Extract the sign bit.</span></CodeLine>
<Link id="l02546" /><CodeLine lineNumber="2546"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SignBitMask = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, UINT32&#95;C(1) &lt;&lt; 31);</span></CodeLine>
<Link id="l02547" /><CodeLine lineNumber="2547"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SignBit = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnd(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>, SignBitMask);</span></CodeLine>
<Link id="l02548" /><CodeLine lineNumber="2548"></CodeLine>
<Link id="l02549" /><CodeLine lineNumber="2549"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FractMask = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, (UINT64&#95;C(1) &lt;&lt; FractBits) - 1);</span></CodeLine>
<Link id="l02550" /><CodeLine lineNumber="2550"></CodeLine>
<Link id="l02551" /><CodeLine lineNumber="2551"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Zero32 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 0);</span></CodeLine>
<Link id="l02552" /><CodeLine lineNumber="2552"></CodeLine>
<Link id="l02553" /><CodeLine lineNumber="2553"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Extend back to 64-bits.</span></CodeLine>
<Link id="l02554" /><CodeLine lineNumber="2554"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SignBit64 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, &#123;Zero32, SignBit&#125;);</span></CodeLine>
<Link id="l02555" /><CodeLine lineNumber="2555"></CodeLine>
<Link id="l02556" /><CodeLine lineNumber="2556"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Shr = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAShr(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, FractMask, Exp);</span></CodeLine>
<Link id="l02557" /><CodeLine lineNumber="2557"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Not = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildNot(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, Shr);</span></CodeLine>
<Link id="l02558" /><CodeLine lineNumber="2558"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Tmp0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnd(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, Src, Not);</span></CodeLine>
<Link id="l02559" /><CodeLine lineNumber="2559"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FiftyOne = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, FractBits - 1);</span></CodeLine>
<Link id="l02560" /><CodeLine lineNumber="2560"></CodeLine>
<Link id="l02561" /><CodeLine lineNumber="2561"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ExpLt0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP&#95;SLT</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Exp, Zero32);</span></CodeLine>
<Link id="l02562" /><CodeLine lineNumber="2562"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ExpGt51 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP&#95;SGT</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Exp, FiftyOne);</span></CodeLine>
<Link id="l02563" /><CodeLine lineNumber="2563"></CodeLine>
<Link id="l02564" /><CodeLine lineNumber="2564"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Tmp1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, ExpLt0, SignBit64, Tmp0);</span></CodeLine>
<Link id="l02565" /><CodeLine lineNumber="2565"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), ExpGt51, Src, Tmp1);</span></CodeLine>
<Link id="l02566" /><CodeLine lineNumber="2566"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02567" /><CodeLine lineNumber="2567"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02568" /><CodeLine lineNumber="2568"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02569" /><CodeLine lineNumber="2569"></CodeLine>
<Link id="l02570" /><CodeLine lineNumber="2570" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#abb023d557c720f8730e0c266c1cd0f9c"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#abb023d557c720f8730e0c266c1cd0f9c">AMDGPULegalizerInfo::legalizeITOFP</a>(</span></CodeLine>
<Link id="l02571" /><CodeLine lineNumber="2571"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l02572" /><CodeLine lineNumber="2572"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02573" /><CodeLine lineNumber="2573"></CodeLine>
<Link id="l02574" /><CodeLine lineNumber="2574"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l02575" /><CodeLine lineNumber="2575"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l02576" /><CodeLine lineNumber="2576"></CodeLine>
<Link id="l02577" /><CodeLine lineNumber="2577"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</span></CodeLine>
<Link id="l02578" /><CodeLine lineNumber="2578"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l02579" /><CodeLine lineNumber="2579"></CodeLine>
<Link id="l02580" /><CodeLine lineNumber="2580"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Src) == <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>);</span></CodeLine>
<Link id="l02581" /><CodeLine lineNumber="2581"></CodeLine>
<Link id="l02582" /><CodeLine lineNumber="2582"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, Src);</span></CodeLine>
<Link id="l02583" /><CodeLine lineNumber="2583"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ThirtyTwo = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 32);</span></CodeLine>
<Link id="l02584" /><CodeLine lineNumber="2584"></CodeLine>
<Link id="l02585" /><CodeLine lineNumber="2585"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst) == <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>) &#123;</span></CodeLine>
<Link id="l02586" /><CodeLine lineNumber="2586"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CvtHi = <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> ? <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSITOFP(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, Unmerge.getReg(1))</span></CodeLine>
<Link id="l02587" /><CodeLine lineNumber="2587"><span class="doxyHighlight">                        : <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUITOFP(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, Unmerge.getReg(1));</span></CodeLine>
<Link id="l02588" /><CodeLine lineNumber="2588"></CodeLine>
<Link id="l02589" /><CodeLine lineNumber="2589"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CvtLo = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUITOFP(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, Unmerge.getReg(0));</span></CodeLine>
<Link id="l02590" /><CodeLine lineNumber="2590"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> LdExp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFLdexp(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, CvtHi, ThirtyTwo);</span></CodeLine>
<Link id="l02591" /><CodeLine lineNumber="2591"></CodeLine>
<Link id="l02592" /><CodeLine lineNumber="2592"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Should this propagate fast-math-flags?</span></CodeLine>
<Link id="l02593" /><CodeLine lineNumber="2593"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFAdd(Dst, LdExp, CvtLo);</span></CodeLine>
<Link id="l02594" /><CodeLine lineNumber="2594"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02595" /><CodeLine lineNumber="2595"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02596" /><CodeLine lineNumber="2596"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02597" /><CodeLine lineNumber="2597"></CodeLine>
<Link id="l02598" /><CodeLine lineNumber="2598"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst) == <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l02599" /><CodeLine lineNumber="2599"></CodeLine>
<Link id="l02600" /><CodeLine lineNumber="2600"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> One = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 1);</span></CodeLine>
<Link id="l02601" /><CodeLine lineNumber="2601"></CodeLine>
<Link id="l02602" /><CodeLine lineNumber="2602"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a> ShAmt;</span></CodeLine>
<Link id="l02603" /><CodeLine lineNumber="2603"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>) &#123;</span></CodeLine>
<Link id="l02604" /><CodeLine lineNumber="2604"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ThirtyOne = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 31);</span></CodeLine>
<Link id="l02605" /><CodeLine lineNumber="2605"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildXor(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Unmerge.getReg(0), Unmerge.getReg(1));</span></CodeLine>
<Link id="l02606" /><CodeLine lineNumber="2606"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> OppositeSign = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAShr(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, ThirtyOne);</span></CodeLine>
<Link id="l02607" /><CodeLine lineNumber="2607"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MaxShAmt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAdd(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, ThirtyTwo, OppositeSign);</span></CodeLine>
<Link id="l02608" /><CodeLine lineNumber="2608"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> LS = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;sffbh, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l02609" /><CodeLine lineNumber="2609"><span class="doxyHighlight">                  .addUse(Unmerge.getReg(1));</span></CodeLine>
<Link id="l02610" /><CodeLine lineNumber="2610"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> LS2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSub(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LS, One);</span></CodeLine>
<Link id="l02611" /><CodeLine lineNumber="2611"><span class="doxyHighlight">    ShAmt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUMin(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LS2, MaxShAmt);</span></CodeLine>
<Link id="l02612" /><CodeLine lineNumber="2612"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l02613" /><CodeLine lineNumber="2613"><span class="doxyHighlight">    ShAmt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildCTLZ(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Unmerge.getReg(1));</span></CodeLine>
<Link id="l02614" /><CodeLine lineNumber="2614"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Norm = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildShl(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, Src, ShAmt);</span></CodeLine>
<Link id="l02615" /><CodeLine lineNumber="2615"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, Norm);</span></CodeLine>
<Link id="l02616" /><CodeLine lineNumber="2616"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Adjust = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUMin(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, One, Unmerge2.getReg(0));</span></CodeLine>
<Link id="l02617" /><CodeLine lineNumber="2617"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Norm2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildOr(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Unmerge2.getReg(1), Adjust);</span></CodeLine>
<Link id="l02618" /><CodeLine lineNumber="2618"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FVal = <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> ? <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSITOFP(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Norm2) : <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUITOFP(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Norm2);</span></CodeLine>
<Link id="l02619" /><CodeLine lineNumber="2619"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Scale = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSub(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, ThirtyTwo, ShAmt);</span></CodeLine>
<Link id="l02620" /><CodeLine lineNumber="2620"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFLdexp(Dst, FVal, Scale);</span></CodeLine>
<Link id="l02621" /><CodeLine lineNumber="2621"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02622" /><CodeLine lineNumber="2622"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02623" /><CodeLine lineNumber="2623"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02624" /><CodeLine lineNumber="2624"></CodeLine>
<Link id="l02625" /><CodeLine lineNumber="2625"><span class="doxyHighlightComment">// TODO: Copied from DAG implementation. Verify logic and document how this</span></CodeLine>
<Link id="l02626" /><CodeLine lineNumber="2626"><span class="doxyHighlightComment">// actually works.</span></CodeLine>
<Link id="l02627" /><CodeLine lineNumber="2627" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#ac6475a6b99e088697d90032ddab24447"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ac6475a6b99e088697d90032ddab24447">AMDGPULegalizerInfo::legalizeFPTOI</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l02628" /><CodeLine lineNumber="2628"><span class="doxyHighlight">                                        <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l02629" /><CodeLine lineNumber="2629"><span class="doxyHighlight">                                        <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l02630" /><CodeLine lineNumber="2630"><span class="doxyHighlight">                                        </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02631" /><CodeLine lineNumber="2631"></CodeLine>
<Link id="l02632" /><CodeLine lineNumber="2632"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l02633" /><CodeLine lineNumber="2633"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l02634" /><CodeLine lineNumber="2634"></CodeLine>
<Link id="l02635" /><CodeLine lineNumber="2635"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</span></CodeLine>
<Link id="l02636" /><CodeLine lineNumber="2636"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l02637" /><CodeLine lineNumber="2637"></CodeLine>
<Link id="l02638" /><CodeLine lineNumber="2638"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> SrcLT = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Src);</span></CodeLine>
<Link id="l02639" /><CodeLine lineNumber="2639"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((SrcLT == <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> || SrcLT == <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>) &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst) == <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>);</span></CodeLine>
<Link id="l02640" /><CodeLine lineNumber="2640"></CodeLine>
<Link id="l02641" /><CodeLine lineNumber="2641"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l02642" /><CodeLine lineNumber="2642"></CodeLine>
<Link id="l02643" /><CodeLine lineNumber="2643"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The basic idea of converting a floating point number into a pair of 32-bit</span></CodeLine>
<Link id="l02644" /><CodeLine lineNumber="2644"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// integers is illustrated as follows:</span></CodeLine>
<Link id="l02645" /><CodeLine lineNumber="2645"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l02646" /><CodeLine lineNumber="2646"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//     tf := trunc(val);</span></CodeLine>
<Link id="l02647" /><CodeLine lineNumber="2647"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    hif := floor(tf &#42; 2^-32);</span></CodeLine>
<Link id="l02648" /><CodeLine lineNumber="2648"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    lof := tf - hif &#42; 2^32; // lof is always positive due to floor.</span></CodeLine>
<Link id="l02649" /><CodeLine lineNumber="2649"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//     hi := fptoi(hif);</span></CodeLine>
<Link id="l02650" /><CodeLine lineNumber="2650"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//     lo := fptoi(lof);</span></CodeLine>
<Link id="l02651" /><CodeLine lineNumber="2651"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l02652" /><CodeLine lineNumber="2652"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Trunc = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsicTrunc(SrcLT, Src, Flags);</span></CodeLine>
<Link id="l02653" /><CodeLine lineNumber="2653"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a> Sign;</span></CodeLine>
<Link id="l02654" /><CodeLine lineNumber="2654"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> &amp;&amp; SrcLT == <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>) &#123;</span></CodeLine>
<Link id="l02655" /><CodeLine lineNumber="2655"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// However, a 32-bit floating point number has only 23 bits mantissa and</span></CodeLine>
<Link id="l02656" /><CodeLine lineNumber="2656"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// it&#39;s not enough to hold all the significant bits of &#96;lof&#96; if val is</span></CodeLine>
<Link id="l02657" /><CodeLine lineNumber="2657"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// negative. To avoid the loss of precision, We need to take the absolute</span></CodeLine>
<Link id="l02658" /><CodeLine lineNumber="2658"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// value after truncating and flip the result back based on the original</span></CodeLine>
<Link id="l02659" /><CodeLine lineNumber="2659"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// signedness.</span></CodeLine>
<Link id="l02660" /><CodeLine lineNumber="2660"><span class="doxyHighlight">    Sign = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAShr(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Src, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 31));</span></CodeLine>
<Link id="l02661" /><CodeLine lineNumber="2661"><span class="doxyHighlight">    Trunc = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFAbs(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Trunc, Flags);</span></CodeLine>
<Link id="l02662" /><CodeLine lineNumber="2662"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02663" /><CodeLine lineNumber="2663"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a> K0, K1;</span></CodeLine>
<Link id="l02664" /><CodeLine lineNumber="2664"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (SrcLT == <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>) &#123;</span></CodeLine>
<Link id="l02665" /><CodeLine lineNumber="2665"><span class="doxyHighlight">    K0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(</span></CodeLine>
<Link id="l02666" /><CodeLine lineNumber="2666"><span class="doxyHighlight">        <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="/docs/api/namespaces/llvm/#aab3863f16cb0767af49f0dd63bc5aa90">llvm::bit&#95;cast&lt;double&gt;</a>(UINT64&#95;C(</span><span class="doxyHighlightComment">/&#42;2^-32&#42;/</span><span class="doxyHighlight"> 0x3df0000000000000)));</span></CodeLine>
<Link id="l02667" /><CodeLine lineNumber="2667"><span class="doxyHighlight">    K1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(</span></CodeLine>
<Link id="l02668" /><CodeLine lineNumber="2668"><span class="doxyHighlight">        <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="/docs/api/namespaces/llvm/#aab3863f16cb0767af49f0dd63bc5aa90">llvm::bit&#95;cast&lt;double&gt;</a>(UINT64&#95;C(</span><span class="doxyHighlightComment">/&#42;-2^32&#42;/</span><span class="doxyHighlight"> 0xc1f0000000000000)));</span></CodeLine>
<Link id="l02669" /><CodeLine lineNumber="2669"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02670" /><CodeLine lineNumber="2670"><span class="doxyHighlight">    K0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(</span></CodeLine>
<Link id="l02671" /><CodeLine lineNumber="2671"><span class="doxyHighlight">        <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/namespaces/llvm/#aab3863f16cb0767af49f0dd63bc5aa90">llvm::bit&#95;cast&lt;float&gt;</a>(UINT32&#95;C(</span><span class="doxyHighlightComment">/&#42;2^-32&#42;/</span><span class="doxyHighlight"> 0x2f800000)));</span></CodeLine>
<Link id="l02672" /><CodeLine lineNumber="2672"><span class="doxyHighlight">    K1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(</span></CodeLine>
<Link id="l02673" /><CodeLine lineNumber="2673"><span class="doxyHighlight">        <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/namespaces/llvm/#aab3863f16cb0767af49f0dd63bc5aa90">llvm::bit&#95;cast&lt;float&gt;</a>(UINT32&#95;C(</span><span class="doxyHighlightComment">/&#42;-2^32&#42;/</span><span class="doxyHighlight"> 0xcf800000)));</span></CodeLine>
<Link id="l02674" /><CodeLine lineNumber="2674"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02675" /><CodeLine lineNumber="2675"></CodeLine>
<Link id="l02676" /><CodeLine lineNumber="2676"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(SrcLT, Trunc, K0, Flags);</span></CodeLine>
<Link id="l02677" /><CodeLine lineNumber="2677"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FloorMul = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFFloor(SrcLT, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>, Flags);</span></CodeLine>
<Link id="l02678" /><CodeLine lineNumber="2678"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fma = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(SrcLT, FloorMul, K1, Trunc, Flags);</span></CodeLine>
<Link id="l02679" /><CodeLine lineNumber="2679"></CodeLine>
<Link id="l02680" /><CodeLine lineNumber="2680"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = (<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> &amp;&amp; SrcLT == <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>) ? <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPTOSI(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, FloorMul)</span></CodeLine>
<Link id="l02681" /><CodeLine lineNumber="2681"><span class="doxyHighlight">                                     : <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPTOUI(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, FloorMul);</span></CodeLine>
<Link id="l02682" /><CodeLine lineNumber="2682"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPTOUI(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Fma);</span></CodeLine>
<Link id="l02683" /><CodeLine lineNumber="2683"></CodeLine>
<Link id="l02684" /><CodeLine lineNumber="2684"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvptxisellowering-cpp/#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> &amp;&amp; SrcLT == <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>) &#123;</span></CodeLine>
<Link id="l02685" /><CodeLine lineNumber="2685"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Flip the result based on the signedness, which is either all 0s or 1s.</span></CodeLine>
<Link id="l02686" /><CodeLine lineNumber="2686"><span class="doxyHighlight">    Sign = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, &#123;Sign, Sign&#125;);</span></CodeLine>
<Link id="l02687" /><CodeLine lineNumber="2687"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// r := xor(&#123;lo, hi&#125;, sign) - sign;</span></CodeLine>
<Link id="l02688" /><CodeLine lineNumber="2688"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSub(Dst, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildXor(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, &#123;Lo, Hi&#125;), Sign),</span></CodeLine>
<Link id="l02689" /><CodeLine lineNumber="2689"><span class="doxyHighlight">               Sign);</span></CodeLine>
<Link id="l02690" /><CodeLine lineNumber="2690"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l02691" /><CodeLine lineNumber="2691"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(Dst, &#123;<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>, <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>&#125;);</span></CodeLine>
<Link id="l02692" /><CodeLine lineNumber="2692"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02693" /><CodeLine lineNumber="2693"></CodeLine>
<Link id="l02694" /><CodeLine lineNumber="2694"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02695" /><CodeLine lineNumber="2695"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02696" /><CodeLine lineNumber="2696"></CodeLine>
<Link id="l02697" /><CodeLine lineNumber="2697" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a91b85787aa32d7f1f0d38d59a77cee68"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a91b85787aa32d7f1f0d38d59a77cee68">AMDGPULegalizerInfo::legalizeMinNumMaxNum</a>(<a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> &amp;Helper,</span></CodeLine>
<Link id="l02698" /><CodeLine lineNumber="2698"><span class="doxyHighlight">                                               <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02699" /><CodeLine lineNumber="2699"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a href="/docs/api/classes/llvm/machineirbuilder/#a9ec04f3692b9601036d2d4477c4c3749">getMF</a>();</span></CodeLine>
<Link id="l02700" /><CodeLine lineNumber="2700"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a> &#42;MFI = MF.<a href="/docs/api/classes/llvm/machinefunction/#ab7feae1932b436c8630e247166ec42b7">getInfo</a>&lt;<a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a>&gt;();</span></CodeLine>
<Link id="l02701" /><CodeLine lineNumber="2701"></CodeLine>
<Link id="l02702" /><CodeLine lineNumber="2702"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsIEEEOp = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::G&#95;FMINNUM&#95;IEEE ||</span></CodeLine>
<Link id="l02703" /><CodeLine lineNumber="2703"><span class="doxyHighlight">                        <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::G&#95;FMAXNUM&#95;IEEE;</span></CodeLine>
<Link id="l02704" /><CodeLine lineNumber="2704"></CodeLine>
<Link id="l02705" /><CodeLine lineNumber="2705"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// With ieee&#95;mode disabled, the instructions have the correct behavior</span></CodeLine>
<Link id="l02706" /><CodeLine lineNumber="2706"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// already for G&#95;FMINNUM/G&#95;FMAXNUM</span></CodeLine>
<Link id="l02707" /><CodeLine lineNumber="2707"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!MFI-&gt;<a href="/docs/api/classes/llvm/simachinefunctioninfo/#a6012de9a1299d35e205f652abc3baf77">getMode</a>().<a href="/docs/api/structs/llvm/simoderegisterdefaults/#a7238526aeceaef9a0db1ab0c21a0cf0e">IEEE</a>)</span></CodeLine>
<Link id="l02708" /><CodeLine lineNumber="2708"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> !IsIEEEOp;</span></CodeLine>
<Link id="l02709" /><CodeLine lineNumber="2709"></CodeLine>
<Link id="l02710" /><CodeLine lineNumber="2710"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsIEEEOp)</span></CodeLine>
<Link id="l02711" /><CodeLine lineNumber="2711"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02712" /><CodeLine lineNumber="2712"></CodeLine>
<Link id="l02713" /><CodeLine lineNumber="2713"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#a105bd213837c5c2e30520113d885b8f3">lowerFMinNumMaxNum</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) == <a href="/docs/api/classes/llvm/legalizerhelper/#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">LegalizerHelper::Legalized</a>;</span></CodeLine>
<Link id="l02714" /><CodeLine lineNumber="2714"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02715" /><CodeLine lineNumber="2715"></CodeLine>
<Link id="l02716" /><CodeLine lineNumber="2716" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#aec28181fa8c84646c097212f19e379f1"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#aec28181fa8c84646c097212f19e379f1">AMDGPULegalizerInfo::legalizeExtractVectorElt</a>(</span></CodeLine>
<Link id="l02717" /><CodeLine lineNumber="2717"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l02718" /><CodeLine lineNumber="2718"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02719" /><CodeLine lineNumber="2719"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Should move some of this into LegalizerHelper.</span></CodeLine>
<Link id="l02720" /><CodeLine lineNumber="2720"></CodeLine>
<Link id="l02721" /><CodeLine lineNumber="2721"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Promote dynamic indexing of s16 to s32</span></CodeLine>
<Link id="l02722" /><CodeLine lineNumber="2722"></CodeLine>
<Link id="l02723" /><CodeLine lineNumber="2723"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l02724" /><CodeLine lineNumber="2724"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Vec = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l02725" /><CodeLine lineNumber="2725"></CodeLine>
<Link id="l02726" /><CodeLine lineNumber="2726"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> VecTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Vec);</span></CodeLine>
<Link id="l02727" /><CodeLine lineNumber="2727"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> EltTy = VecTy.<a href="/docs/api/classes/llvm/llt/#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</span></CodeLine>
<Link id="l02728" /><CodeLine lineNumber="2728"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EltTy == <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst));</span></CodeLine>
<Link id="l02729" /><CodeLine lineNumber="2729"></CodeLine>
<Link id="l02730" /><CodeLine lineNumber="2730"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Other legalization maps vector&lt;? x &#91;type bigger than 64 bits&#93;&gt; via bitcasts</span></CodeLine>
<Link id="l02731" /><CodeLine lineNumber="2731"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// but we can&#39;t go directly to that logic becasue you can&#39;t bitcast a vector</span></CodeLine>
<Link id="l02732" /><CodeLine lineNumber="2732"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// of pointers to a vector of integers. Therefore, introduce an intermediate</span></CodeLine>
<Link id="l02733" /><CodeLine lineNumber="2733"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// vector of integers using ptrtoint (and inttoptr on the output) in order to</span></CodeLine>
<Link id="l02734" /><CodeLine lineNumber="2734"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// drive the legalization forward.</span></CodeLine>
<Link id="l02735" /><CodeLine lineNumber="2735"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (EltTy.<a href="/docs/api/classes/llvm/llt/#a9d825f5954d7bd527aea490668c624c6">isPointer</a>() &amp;&amp; EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; 64) &#123;</span></CodeLine>
<Link id="l02736" /><CodeLine lineNumber="2736"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> IntTy = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</span></CodeLine>
<Link id="l02737" /><CodeLine lineNumber="2737"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> IntVecTy = VecTy.<a href="/docs/api/classes/llvm/llt/#a4f404daab6050b7a8e95bb247d4aefb2">changeElementType</a>(IntTy);</span></CodeLine>
<Link id="l02738" /><CodeLine lineNumber="2738"></CodeLine>
<Link id="l02739" /><CodeLine lineNumber="2739"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> IntVec = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildPtrToInt(IntVecTy, Vec);</span></CodeLine>
<Link id="l02740" /><CodeLine lineNumber="2740"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> IntElt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildExtractVectorElement(IntTy, IntVec, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2));</span></CodeLine>
<Link id="l02741" /><CodeLine lineNumber="2741"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntToPtr(Dst, IntElt);</span></CodeLine>
<Link id="l02742" /><CodeLine lineNumber="2742"></CodeLine>
<Link id="l02743" /><CodeLine lineNumber="2743"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02744" /><CodeLine lineNumber="2744"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02745" /><CodeLine lineNumber="2745"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02746" /><CodeLine lineNumber="2746"></CodeLine>
<Link id="l02747" /><CodeLine lineNumber="2747"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: Artifact combiner probably should have replaced the truncated</span></CodeLine>
<Link id="l02748" /><CodeLine lineNumber="2748"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// constant before this, so we shouldn&#39;t need</span></CodeLine>
<Link id="l02749" /><CodeLine lineNumber="2749"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// getIConstantVRegValWithLookThrough.</span></CodeLine>
<Link id="l02750" /><CodeLine lineNumber="2750"><span class="doxyHighlight">  std::optional&lt;ValueAndVReg&gt; MaybeIdxVal =</span></CodeLine>
<Link id="l02751" /><CodeLine lineNumber="2751"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg(), <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</span></CodeLine>
<Link id="l02752" /><CodeLine lineNumber="2752"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!MaybeIdxVal) </span><span class="doxyHighlightComment">// Dynamic case will be selected to register indexing.</span></CodeLine>
<Link id="l02753" /><CodeLine lineNumber="2753"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02754" /><CodeLine lineNumber="2754"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t IdxVal = MaybeIdxVal-&gt;Value.getZExtValue();</span></CodeLine>
<Link id="l02755" /><CodeLine lineNumber="2755"></CodeLine>
<Link id="l02756" /><CodeLine lineNumber="2756"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IdxVal &lt; VecTy.<a href="/docs/api/classes/llvm/llt/#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>()) &#123;</span></CodeLine>
<Link id="l02757" /><CodeLine lineNumber="2757"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(EltTy, Vec);</span></CodeLine>
<Link id="l02758" /><CodeLine lineNumber="2758"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildCopy(Dst, Unmerge.getReg(IdxVal));</span></CodeLine>
<Link id="l02759" /><CodeLine lineNumber="2759"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02760" /><CodeLine lineNumber="2760"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUndef(Dst);</span></CodeLine>
<Link id="l02761" /><CodeLine lineNumber="2761"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02762" /><CodeLine lineNumber="2762"></CodeLine>
<Link id="l02763" /><CodeLine lineNumber="2763"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02764" /><CodeLine lineNumber="2764"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02765" /><CodeLine lineNumber="2765"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02766" /><CodeLine lineNumber="2766"></CodeLine>
<Link id="l02767" /><CodeLine lineNumber="2767" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a762e3485a3d139ec7ed9d30a7f38f74d"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a762e3485a3d139ec7ed9d30a7f38f74d">AMDGPULegalizerInfo::legalizeInsertVectorElt</a>(</span></CodeLine>
<Link id="l02768" /><CodeLine lineNumber="2768"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l02769" /><CodeLine lineNumber="2769"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02770" /><CodeLine lineNumber="2770"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Should move some of this into LegalizerHelper.</span></CodeLine>
<Link id="l02771" /><CodeLine lineNumber="2771"></CodeLine>
<Link id="l02772" /><CodeLine lineNumber="2772"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Promote dynamic indexing of s16 to s32</span></CodeLine>
<Link id="l02773" /><CodeLine lineNumber="2773"></CodeLine>
<Link id="l02774" /><CodeLine lineNumber="2774"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l02775" /><CodeLine lineNumber="2775"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Vec = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l02776" /><CodeLine lineNumber="2776"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Ins = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l02777" /><CodeLine lineNumber="2777"></CodeLine>
<Link id="l02778" /><CodeLine lineNumber="2778"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> VecTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Vec);</span></CodeLine>
<Link id="l02779" /><CodeLine lineNumber="2779"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> EltTy = VecTy.<a href="/docs/api/classes/llvm/llt/#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</span></CodeLine>
<Link id="l02780" /><CodeLine lineNumber="2780"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EltTy == <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Ins));</span></CodeLine>
<Link id="l02781" /><CodeLine lineNumber="2781"></CodeLine>
<Link id="l02782" /><CodeLine lineNumber="2782"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Other legalization maps vector&lt;? x &#91;type bigger than 64 bits&#93;&gt; via bitcasts</span></CodeLine>
<Link id="l02783" /><CodeLine lineNumber="2783"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// but we can&#39;t go directly to that logic becasue you can&#39;t bitcast a vector</span></CodeLine>
<Link id="l02784" /><CodeLine lineNumber="2784"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// of pointers to a vector of integers. Therefore, make the pointer vector</span></CodeLine>
<Link id="l02785" /><CodeLine lineNumber="2785"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// into an equivalent vector of integers with ptrtoint, insert the ptrtoint&#39;d</span></CodeLine>
<Link id="l02786" /><CodeLine lineNumber="2786"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// new value, and then inttoptr the result vector back. This will then allow</span></CodeLine>
<Link id="l02787" /><CodeLine lineNumber="2787"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the rest of legalization to take over.</span></CodeLine>
<Link id="l02788" /><CodeLine lineNumber="2788"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (EltTy.<a href="/docs/api/classes/llvm/llt/#a9d825f5954d7bd527aea490668c624c6">isPointer</a>() &amp;&amp; EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; 64) &#123;</span></CodeLine>
<Link id="l02789" /><CodeLine lineNumber="2789"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> IntTy = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</span></CodeLine>
<Link id="l02790" /><CodeLine lineNumber="2790"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> IntVecTy = VecTy.<a href="/docs/api/classes/llvm/llt/#a4f404daab6050b7a8e95bb247d4aefb2">changeElementType</a>(IntTy);</span></CodeLine>
<Link id="l02791" /><CodeLine lineNumber="2791"></CodeLine>
<Link id="l02792" /><CodeLine lineNumber="2792"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> IntVecSource = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildPtrToInt(IntVecTy, Vec);</span></CodeLine>
<Link id="l02793" /><CodeLine lineNumber="2793"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> IntIns = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildPtrToInt(IntTy, Ins);</span></CodeLine>
<Link id="l02794" /><CodeLine lineNumber="2794"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> IntVecDest = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInsertVectorElement(IntVecTy, IntVecSource, IntIns,</span></CodeLine>
<Link id="l02795" /><CodeLine lineNumber="2795"><span class="doxyHighlight">                                                 <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3));</span></CodeLine>
<Link id="l02796" /><CodeLine lineNumber="2796"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntToPtr(Dst, IntVecDest);</span></CodeLine>
<Link id="l02797" /><CodeLine lineNumber="2797"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02798" /><CodeLine lineNumber="2798"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02799" /><CodeLine lineNumber="2799"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02800" /><CodeLine lineNumber="2800"></CodeLine>
<Link id="l02801" /><CodeLine lineNumber="2801"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: Artifact combiner probably should have replaced the truncated</span></CodeLine>
<Link id="l02802" /><CodeLine lineNumber="2802"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// constant before this, so we shouldn&#39;t need</span></CodeLine>
<Link id="l02803" /><CodeLine lineNumber="2803"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// getIConstantVRegValWithLookThrough.</span></CodeLine>
<Link id="l02804" /><CodeLine lineNumber="2804"><span class="doxyHighlight">  std::optional&lt;ValueAndVReg&gt; MaybeIdxVal =</span></CodeLine>
<Link id="l02805" /><CodeLine lineNumber="2805"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg(), <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</span></CodeLine>
<Link id="l02806" /><CodeLine lineNumber="2806"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!MaybeIdxVal) </span><span class="doxyHighlightComment">// Dynamic case will be selected to register indexing.</span></CodeLine>
<Link id="l02807" /><CodeLine lineNumber="2807"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02808" /><CodeLine lineNumber="2808"></CodeLine>
<Link id="l02809" /><CodeLine lineNumber="2809"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t IdxVal = MaybeIdxVal-&gt;Value.getZExtValue();</span></CodeLine>
<Link id="l02810" /><CodeLine lineNumber="2810"></CodeLine>
<Link id="l02811" /><CodeLine lineNumber="2811"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumElts = VecTy.<a href="/docs/api/classes/llvm/llt/#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</span></CodeLine>
<Link id="l02812" /><CodeLine lineNumber="2812"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IdxVal &lt; NumElts) &#123;</span></CodeLine>
<Link id="l02813" /><CodeLine lineNumber="2813"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Register, 8&gt;</a> SrcRegs;</span></CodeLine>
<Link id="l02814" /><CodeLine lineNumber="2814"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 0; i &lt; NumElts; ++i)</span></CodeLine>
<Link id="l02815" /><CodeLine lineNumber="2815"><span class="doxyHighlight">      SrcRegs.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(EltTy));</span></CodeLine>
<Link id="l02816" /><CodeLine lineNumber="2816"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(SrcRegs, Vec);</span></CodeLine>
<Link id="l02817" /><CodeLine lineNumber="2817"></CodeLine>
<Link id="l02818" /><CodeLine lineNumber="2818"><span class="doxyHighlight">    SrcRegs&#91;IdxVal&#93; = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l02819" /><CodeLine lineNumber="2819"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(Dst, SrcRegs);</span></CodeLine>
<Link id="l02820" /><CodeLine lineNumber="2820"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l02821" /><CodeLine lineNumber="2821"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUndef(Dst);</span></CodeLine>
<Link id="l02822" /><CodeLine lineNumber="2822"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02823" /><CodeLine lineNumber="2823"></CodeLine>
<Link id="l02824" /><CodeLine lineNumber="2824"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02825" /><CodeLine lineNumber="2825"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02826" /><CodeLine lineNumber="2826"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02827" /><CodeLine lineNumber="2827"></CodeLine>
<Link id="l02828" /><CodeLine lineNumber="2828" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#aaac467545afeead836946e5842563fea"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#aaac467545afeead836946e5842563fea">AMDGPULegalizerInfo::legalizeSinCos</a>(</span></CodeLine>
<Link id="l02829" /><CodeLine lineNumber="2829"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l02830" /><CodeLine lineNumber="2830"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02831" /><CodeLine lineNumber="2831"></CodeLine>
<Link id="l02832" /><CodeLine lineNumber="2832"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DstReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l02833" /><CodeLine lineNumber="2833"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> SrcReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l02834" /><CodeLine lineNumber="2834"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(DstReg);</span></CodeLine>
<Link id="l02835" /><CodeLine lineNumber="2835"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l02836" /><CodeLine lineNumber="2836"></CodeLine>
<Link id="l02837" /><CodeLine lineNumber="2837"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> TrigVal;</span></CodeLine>
<Link id="l02838" /><CodeLine lineNumber="2838"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> OneOver2Pi = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, 0.5 &#42; <a href="/docs/api/namespaces/llvm/numbers/#a3a6cc17866b369b529f20fbb54183134">numbers::inv&#95;pi</a>);</span></CodeLine>
<Link id="l02839" /><CodeLine lineNumber="2839"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasTrigReducedRange()) &#123;</span></CodeLine>
<Link id="l02840" /><CodeLine lineNumber="2840"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MulVal = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(Ty, SrcReg, OneOver2Pi, Flags);</span></CodeLine>
<Link id="l02841" /><CodeLine lineNumber="2841"><span class="doxyHighlight">    TrigVal = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;fract, &#123;Ty&#125;)</span></CodeLine>
<Link id="l02842" /><CodeLine lineNumber="2842"><span class="doxyHighlight">                  .addUse(MulVal.getReg(0))</span></CodeLine>
<Link id="l02843" /><CodeLine lineNumber="2843"><span class="doxyHighlight">                  .setMIFlags(Flags)</span></CodeLine>
<Link id="l02844" /><CodeLine lineNumber="2844"><span class="doxyHighlight">                  .getReg(0);</span></CodeLine>
<Link id="l02845" /><CodeLine lineNumber="2845"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l02846" /><CodeLine lineNumber="2846"><span class="doxyHighlight">    TrigVal = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(Ty, SrcReg, OneOver2Pi, Flags).getReg(0);</span></CodeLine>
<Link id="l02847" /><CodeLine lineNumber="2847"></CodeLine>
<Link id="l02848" /><CodeLine lineNumber="2848"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/intrinsic/#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> TrigIntrin = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::G&#95;FSIN ?</span></CodeLine>
<Link id="l02849" /><CodeLine lineNumber="2849"><span class="doxyHighlight">    Intrinsic::amdgcn&#95;sin : Intrinsic::amdgcn&#95;cos;</span></CodeLine>
<Link id="l02850" /><CodeLine lineNumber="2850"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(TrigIntrin, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Register&gt;</a>(DstReg))</span></CodeLine>
<Link id="l02851" /><CodeLine lineNumber="2851"><span class="doxyHighlight">      .addUse(TrigVal)</span></CodeLine>
<Link id="l02852" /><CodeLine lineNumber="2852"><span class="doxyHighlight">      .setMIFlags(Flags);</span></CodeLine>
<Link id="l02853" /><CodeLine lineNumber="2853"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02854" /><CodeLine lineNumber="2854"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02855" /><CodeLine lineNumber="2855"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02856" /><CodeLine lineNumber="2856"></CodeLine>
<Link id="l02857" /><CodeLine lineNumber="2857" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a6006bd8b7a7155240e3a11c12d104c50"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a6006bd8b7a7155240e3a11c12d104c50">AMDGPULegalizerInfo::buildPCRelGlobalAddress</a>(<a href="/docs/api/classes/llvm/register">Register</a> DstReg, <a href="/docs/api/classes/llvm/llt">LLT</a> PtrTy,</span></CodeLine>
<Link id="l02858" /><CodeLine lineNumber="2858"><span class="doxyHighlight">                                                  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l02859" /><CodeLine lineNumber="2859"><span class="doxyHighlight">                                                  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvalue">GlobalValue</a> &#42;GV,</span></CodeLine>
<Link id="l02860" /><CodeLine lineNumber="2860"><span class="doxyHighlight">                                                  int64&#95;t <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>,</span></CodeLine>
<Link id="l02861" /><CodeLine lineNumber="2861"><span class="doxyHighlight">                                                  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> GAFlags)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02862" /><CodeLine lineNumber="2862"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a1a1e51a5952c3afa00875df90e7ae6f8">isInt&lt;32&gt;</a>(<a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + 4) &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;32-bit offset is expected!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02863" /><CodeLine lineNumber="2863"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// In order to support pc-relative addressing, SI&#95;PC&#95;ADD&#95;REL&#95;OFFSET is lowered</span></CodeLine>
<Link id="l02864" /><CodeLine lineNumber="2864"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// to the following code sequence:</span></CodeLine>
<Link id="l02865" /><CodeLine lineNumber="2865"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l02866" /><CodeLine lineNumber="2866"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For constant address space:</span></CodeLine>
<Link id="l02867" /><CodeLine lineNumber="2867"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   s&#95;getpc&#95;b64 s&#91;0:1&#93;</span></CodeLine>
<Link id="l02868" /><CodeLine lineNumber="2868"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   s&#95;add&#95;u32 s0, s0, $symbol</span></CodeLine>
<Link id="l02869" /><CodeLine lineNumber="2869"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   s&#95;addc&#95;u32 s1, s1, 0</span></CodeLine>
<Link id="l02870" /><CodeLine lineNumber="2870"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l02871" /><CodeLine lineNumber="2871"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   s&#95;getpc&#95;b64 returns the address of the s&#95;add&#95;u32 instruction and then</span></CodeLine>
<Link id="l02872" /><CodeLine lineNumber="2872"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   a fixup or relocation is emitted to replace $symbol with a literal</span></CodeLine>
<Link id="l02873" /><CodeLine lineNumber="2873"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   constant, which is a pc-relative offset from the encoding of the $symbol</span></CodeLine>
<Link id="l02874" /><CodeLine lineNumber="2874"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   operand to the global variable.</span></CodeLine>
<Link id="l02875" /><CodeLine lineNumber="2875"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l02876" /><CodeLine lineNumber="2876"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For global address space:</span></CodeLine>
<Link id="l02877" /><CodeLine lineNumber="2877"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   s&#95;getpc&#95;b64 s&#91;0:1&#93;</span></CodeLine>
<Link id="l02878" /><CodeLine lineNumber="2878"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   s&#95;add&#95;u32 s0, s0, $symbol@&#123;gotpc&#125;rel32@lo</span></CodeLine>
<Link id="l02879" /><CodeLine lineNumber="2879"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   s&#95;addc&#95;u32 s1, s1, $symbol@&#123;gotpc&#125;rel32@hi</span></CodeLine>
<Link id="l02880" /><CodeLine lineNumber="2880"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l02881" /><CodeLine lineNumber="2881"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   s&#95;getpc&#95;b64 returns the address of the s&#95;add&#95;u32 instruction and then</span></CodeLine>
<Link id="l02882" /><CodeLine lineNumber="2882"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   fixups or relocations are emitted to replace $symbol@&#42;@lo and</span></CodeLine>
<Link id="l02883" /><CodeLine lineNumber="2883"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   $symbol@&#42;@hi with lower 32 bits and higher 32 bits of a literal constant,</span></CodeLine>
<Link id="l02884" /><CodeLine lineNumber="2884"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   which is a 64-bit pc-relative offset from the encoding of the $symbol</span></CodeLine>
<Link id="l02885" /><CodeLine lineNumber="2885"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   operand to the global variable.</span></CodeLine>
<Link id="l02886" /><CodeLine lineNumber="2886"></CodeLine>
<Link id="l02887" /><CodeLine lineNumber="2887"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> ConstPtrTy = <a href="/docs/api/classes/llvm/llt/#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT&#95;ADDRESS</a>, 64);</span></CodeLine>
<Link id="l02888" /><CodeLine lineNumber="2888"></CodeLine>
<Link id="l02889" /><CodeLine lineNumber="2889"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> PCReg = PtrTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() != 32 ? DstReg :</span></CodeLine>
<Link id="l02890" /><CodeLine lineNumber="2890"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;createGenericVirtualRegister(ConstPtrTy);</span></CodeLine>
<Link id="l02891" /><CodeLine lineNumber="2891"></CodeLine>
<Link id="l02892" /><CodeLine lineNumber="2892"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a> MIB = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::SI&#95;PC&#95;ADD&#95;REL&#95;OFFSET)</span></CodeLine>
<Link id="l02893" /><CodeLine lineNumber="2893"><span class="doxyHighlight">    .addDef(PCReg);</span></CodeLine>
<Link id="l02894" /><CodeLine lineNumber="2894"></CodeLine>
<Link id="l02895" /><CodeLine lineNumber="2895"><span class="doxyHighlight">  MIB.<a href="/docs/api/classes/llvm/machineinstrbuilder/#a9117be19af857a7bdcee7bdf0279024c">addGlobalAddress</a>(GV, <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, GAFlags);</span></CodeLine>
<Link id="l02896" /><CodeLine lineNumber="2896"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (GAFlags == <a href="/docs/api/classes/llvm/siinstrinfo/#ade90146180a53b9d9edc077b933e70bbab9b475527cd46e49f6208722a1034e92">SIInstrInfo::MO&#95;NONE</a>)</span></CodeLine>
<Link id="l02897" /><CodeLine lineNumber="2897"><span class="doxyHighlight">    MIB.<a href="/docs/api/classes/llvm/machineinstrbuilder/#a6c1f959947905135c7dd215b64957654">addImm</a>(0);</span></CodeLine>
<Link id="l02898" /><CodeLine lineNumber="2898"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l02899" /><CodeLine lineNumber="2899"><span class="doxyHighlight">    MIB.<a href="/docs/api/classes/llvm/machineinstrbuilder/#a9117be19af857a7bdcee7bdf0279024c">addGlobalAddress</a>(GV, <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, GAFlags + 1);</span></CodeLine>
<Link id="l02900" /><CodeLine lineNumber="2900"></CodeLine>
<Link id="l02901" /><CodeLine lineNumber="2901"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;getRegClassOrNull(PCReg))</span></CodeLine>
<Link id="l02902" /><CodeLine lineNumber="2902"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;setRegClass(PCReg, &amp;AMDGPU::SReg&#95;64RegClass);</span></CodeLine>
<Link id="l02903" /><CodeLine lineNumber="2903"></CodeLine>
<Link id="l02904" /><CodeLine lineNumber="2904"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (PtrTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 32)</span></CodeLine>
<Link id="l02905" /><CodeLine lineNumber="2905"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildExtract(DstReg, PCReg, 0);</span></CodeLine>
<Link id="l02906" /><CodeLine lineNumber="2906"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02907" /><CodeLine lineNumber="2907"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02908" /><CodeLine lineNumber="2908"></CodeLine>
<Link id="l02909" /><CodeLine lineNumber="2909"><span class="doxyHighlightComment">// Emit a ABS32&#95;LO / ABS32&#95;HI relocation stub.</span></CodeLine>
<Link id="l02910" /><CodeLine lineNumber="2910" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#ad5c38c10f947e4226f85aade1ebf57f1"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ad5c38c10f947e4226f85aade1ebf57f1">AMDGPULegalizerInfo::buildAbsGlobalAddress</a>(</span></CodeLine>
<Link id="l02911" /><CodeLine lineNumber="2911"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> DstReg, <a href="/docs/api/classes/llvm/llt">LLT</a> PtrTy, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvalue">GlobalValue</a> &#42;GV,</span></CodeLine>
<Link id="l02912" /><CodeLine lineNumber="2912"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02913" /><CodeLine lineNumber="2913"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> RequiresHighHalf = PtrTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() != 32;</span></CodeLine>
<Link id="l02914" /><CodeLine lineNumber="2914"></CodeLine>
<Link id="l02915" /><CodeLine lineNumber="2915"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l02916" /><CodeLine lineNumber="2916"></CodeLine>
<Link id="l02917" /><CodeLine lineNumber="2917"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Use the destination directly, if and only if we store the lower address</span></CodeLine>
<Link id="l02918" /><CodeLine lineNumber="2918"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// part only and we don&#39;t have a register class being set.</span></CodeLine>
<Link id="l02919" /><CodeLine lineNumber="2919"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> AddrLo = !RequiresHighHalf &amp;&amp; !<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getRegClassOrNull(DstReg)</span></CodeLine>
<Link id="l02920" /><CodeLine lineNumber="2920"><span class="doxyHighlight">                        ? DstReg</span></CodeLine>
<Link id="l02921" /><CodeLine lineNumber="2921"><span class="doxyHighlight">                        : <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l02922" /><CodeLine lineNumber="2922"></CodeLine>
<Link id="l02923" /><CodeLine lineNumber="2923"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getRegClassOrNull(AddrLo))</span></CodeLine>
<Link id="l02924" /><CodeLine lineNumber="2924"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.setRegClass(AddrLo, &amp;AMDGPU::SReg&#95;32RegClass);</span></CodeLine>
<Link id="l02925" /><CodeLine lineNumber="2925"></CodeLine>
<Link id="l02926" /><CodeLine lineNumber="2926"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Write the lower half.</span></CodeLine>
<Link id="l02927" /><CodeLine lineNumber="2927"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::S&#95;MOV&#95;B32)</span></CodeLine>
<Link id="l02928" /><CodeLine lineNumber="2928"><span class="doxyHighlight">      .addDef(AddrLo)</span></CodeLine>
<Link id="l02929" /><CodeLine lineNumber="2929"><span class="doxyHighlight">      .addGlobalAddress(GV, 0, <a href="/docs/api/classes/llvm/siinstrinfo/#ade90146180a53b9d9edc077b933e70bbafe82a0bc03151bffd10d66929b1ed545">SIInstrInfo::MO&#95;ABS32&#95;LO</a>);</span></CodeLine>
<Link id="l02930" /><CodeLine lineNumber="2930"></CodeLine>
<Link id="l02931" /><CodeLine lineNumber="2931"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If required, write the upper half as well.</span></CodeLine>
<Link id="l02932" /><CodeLine lineNumber="2932"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (RequiresHighHalf) &#123;</span></CodeLine>
<Link id="l02933" /><CodeLine lineNumber="2933"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PtrTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 64 &amp;&amp;</span></CodeLine>
<Link id="l02934" /><CodeLine lineNumber="2934"><span class="doxyHighlight">           </span><span class="doxyHighlightStringLiteral">&quot;Must provide a 64-bit pointer type!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l02935" /><CodeLine lineNumber="2935"></CodeLine>
<Link id="l02936" /><CodeLine lineNumber="2936"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> AddrHi = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l02937" /><CodeLine lineNumber="2937"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.setRegClass(AddrHi, &amp;AMDGPU::SReg&#95;32RegClass);</span></CodeLine>
<Link id="l02938" /><CodeLine lineNumber="2938"></CodeLine>
<Link id="l02939" /><CodeLine lineNumber="2939"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::S&#95;MOV&#95;B32)</span></CodeLine>
<Link id="l02940" /><CodeLine lineNumber="2940"><span class="doxyHighlight">        .addDef(AddrHi)</span></CodeLine>
<Link id="l02941" /><CodeLine lineNumber="2941"><span class="doxyHighlight">        .addGlobalAddress(GV, 0, <a href="/docs/api/classes/llvm/siinstrinfo/#ade90146180a53b9d9edc077b933e70bba3e9ced1912f545db50d64c7932e9ae72">SIInstrInfo::MO&#95;ABS32&#95;HI</a>);</span></CodeLine>
<Link id="l02942" /><CodeLine lineNumber="2942"></CodeLine>
<Link id="l02943" /><CodeLine lineNumber="2943"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Use the destination directly, if and only if we don&#39;t have a register</span></CodeLine>
<Link id="l02944" /><CodeLine lineNumber="2944"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// class being set.</span></CodeLine>
<Link id="l02945" /><CodeLine lineNumber="2945"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> AddrDst = !<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getRegClassOrNull(DstReg)</span></CodeLine>
<Link id="l02946" /><CodeLine lineNumber="2946"><span class="doxyHighlight">                           ? DstReg</span></CodeLine>
<Link id="l02947" /><CodeLine lineNumber="2947"><span class="doxyHighlight">                           : <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64));</span></CodeLine>
<Link id="l02948" /><CodeLine lineNumber="2948"></CodeLine>
<Link id="l02949" /><CodeLine lineNumber="2949"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getRegClassOrNull(AddrDst))</span></CodeLine>
<Link id="l02950" /><CodeLine lineNumber="2950"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.setRegClass(AddrDst, &amp;AMDGPU::SReg&#95;64RegClass);</span></CodeLine>
<Link id="l02951" /><CodeLine lineNumber="2951"></CodeLine>
<Link id="l02952" /><CodeLine lineNumber="2952"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeValues(AddrDst, &#123;AddrLo, AddrHi&#125;);</span></CodeLine>
<Link id="l02953" /><CodeLine lineNumber="2953"></CodeLine>
<Link id="l02954" /><CodeLine lineNumber="2954"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If we created a new register for the destination, cast the result into</span></CodeLine>
<Link id="l02955" /><CodeLine lineNumber="2955"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the final output.</span></CodeLine>
<Link id="l02956" /><CodeLine lineNumber="2956"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AddrDst != DstReg)</span></CodeLine>
<Link id="l02957" /><CodeLine lineNumber="2957"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildCast(DstReg, AddrDst);</span></CodeLine>
<Link id="l02958" /><CodeLine lineNumber="2958"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AddrLo != DstReg) &#123;</span></CodeLine>
<Link id="l02959" /><CodeLine lineNumber="2959"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If we created a new register for the destination, cast the result into</span></CodeLine>
<Link id="l02960" /><CodeLine lineNumber="2960"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the final output.</span></CodeLine>
<Link id="l02961" /><CodeLine lineNumber="2961"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildCast(DstReg, AddrLo);</span></CodeLine>
<Link id="l02962" /><CodeLine lineNumber="2962"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l02963" /><CodeLine lineNumber="2963"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l02964" /><CodeLine lineNumber="2964"></CodeLine>
<Link id="l02965" /><CodeLine lineNumber="2965" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a04975f118b224e8cd322d1aa86f2ceb2"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a04975f118b224e8cd322d1aa86f2ceb2">AMDGPULegalizerInfo::legalizeGlobalValue</a>(</span></CodeLine>
<Link id="l02966" /><CodeLine lineNumber="2966"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l02967" /><CodeLine lineNumber="2967"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l02968" /><CodeLine lineNumber="2968"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DstReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l02969" /><CodeLine lineNumber="2969"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(DstReg);</span></CodeLine>
<Link id="l02970" /><CodeLine lineNumber="2970"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AS = Ty.getAddressSpace();</span></CodeLine>
<Link id="l02971" /><CodeLine lineNumber="2971"></CodeLine>
<Link id="l02972" /><CodeLine lineNumber="2972"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/globalvalue">GlobalValue</a> &#42;GV = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getGlobal();</span></CodeLine>
<Link id="l02973" /><CodeLine lineNumber="2973"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF();</span></CodeLine>
<Link id="l02974" /><CodeLine lineNumber="2974"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a> &#42;MFI = MF.<a href="/docs/api/classes/llvm/machinefunction/#ab7feae1932b436c8630e247166ec42b7">getInfo</a>&lt;<a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a>&gt;();</span></CodeLine>
<Link id="l02975" /><CodeLine lineNumber="2975"></CodeLine>
<Link id="l02976" /><CodeLine lineNumber="2976"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL&#95;ADDRESS</a> || AS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a5b71ba6fa435ec288aba849e113721a7">AMDGPUAS::REGION&#95;ADDRESS</a>) &#123;</span></CodeLine>
<Link id="l02977" /><CodeLine lineNumber="2977"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!MFI-&gt;<a href="/docs/api/classes/llvm/amdgpumachinefunction/#ac1af3affe7a4cee4c8f08afbd7e20282">isModuleEntryFunction</a>() &amp;&amp;</span></CodeLine>
<Link id="l02978" /><CodeLine lineNumber="2978"><span class="doxyHighlight">        GV-&gt;<a href="/docs/api/classes/llvm/value/#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() != </span><span class="doxyHighlightStringLiteral">&quot;llvm.amdgcn.module.lds&quot;</span><span class="doxyHighlight"> &amp;&amp;</span></CodeLine>
<Link id="l02979" /><CodeLine lineNumber="2979"><span class="doxyHighlight">        !<a href="/docs/api/namespaces/llvm/amdgpu/#a98625eaa7fa561edb6921fc5c7fcefcd">AMDGPU::isNamedBarrier</a>(&#42;<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;GlobalVariable&gt;</a>(GV))) &#123;</span></CodeLine>
<Link id="l02980" /><CodeLine lineNumber="2980"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/function">Function</a> &amp;Fn = MF.<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>();</span></CodeLine>
<Link id="l02981" /><CodeLine lineNumber="2981"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/diagnosticinfounsupported">DiagnosticInfoUnsupported</a> BadLDSDecl(</span></CodeLine>
<Link id="l02982" /><CodeLine lineNumber="2982"><span class="doxyHighlight">        Fn, </span><span class="doxyHighlightStringLiteral">&quot;local memory global used by non-kernel function&quot;</span><span class="doxyHighlight">, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDebugLoc(),</span></CodeLine>
<Link id="l02983" /><CodeLine lineNumber="2983"><span class="doxyHighlight">        <a href="/docs/api/namespaces/llvm/#abfcab32516704f11d146c757f402ad5ca1cde8c8828756cdaf2a93260e247ae31">DS&#95;Warning</a>);</span></CodeLine>
<Link id="l02984" /><CodeLine lineNumber="2984"><span class="doxyHighlight">      Fn.<a href="/docs/api/classes/llvm/function/#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>().<a href="/docs/api/classes/llvm/llvmcontext/#aad03ef5cfbe6e7cad076d9e45ba06592">diagnose</a>(BadLDSDecl);</span></CodeLine>
<Link id="l02985" /><CodeLine lineNumber="2985"></CodeLine>
<Link id="l02986" /><CodeLine lineNumber="2986"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// We currently don&#39;t have a way to correctly allocate LDS objects that</span></CodeLine>
<Link id="l02987" /><CodeLine lineNumber="2987"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// aren&#39;t directly associated with a kernel. We do force inlining of</span></CodeLine>
<Link id="l02988" /><CodeLine lineNumber="2988"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// functions that use local objects. However, if these dead functions are</span></CodeLine>
<Link id="l02989" /><CodeLine lineNumber="2989"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// not eliminated, we don&#39;t want a compile time error. Just emit a warning</span></CodeLine>
<Link id="l02990" /><CodeLine lineNumber="2990"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// and a trap, since there should be no callable path here.</span></CodeLine>
<Link id="l02991" /><CodeLine lineNumber="2991"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildTrap();</span></CodeLine>
<Link id="l02992" /><CodeLine lineNumber="2992"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUndef(DstReg);</span></CodeLine>
<Link id="l02993" /><CodeLine lineNumber="2993"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l02994" /><CodeLine lineNumber="2994"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l02995" /><CodeLine lineNumber="2995"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l02996" /><CodeLine lineNumber="2996"></CodeLine>
<Link id="l02997" /><CodeLine lineNumber="2997"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: We could emit code to handle the initialization somewhere.</span></CodeLine>
<Link id="l02998" /><CodeLine lineNumber="2998"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We ignore the initializer for now and legalize it to allow selection.</span></CodeLine>
<Link id="l02999" /><CodeLine lineNumber="2999"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The initializer will anyway get errored out during assembly emission.</span></CodeLine>
<Link id="l03000" /><CodeLine lineNumber="3000"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sitargetlowering">SITargetLowering</a> &#42;TLI = ST.getTargetLowering();</span></CodeLine>
<Link id="l03001" /><CodeLine lineNumber="3001"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!TLI-&gt;<a href="/docs/api/classes/llvm/sitargetlowering/#ab870ac74feb45bb48a75027da41c0784">shouldUseLDSConstAddress</a>(GV)) &#123;</span></CodeLine>
<Link id="l03002" /><CodeLine lineNumber="3002"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).setTargetFlags(<a href="/docs/api/classes/llvm/siinstrinfo/#ade90146180a53b9d9edc077b933e70bbafe82a0bc03151bffd10d66929b1ed545">SIInstrInfo::MO&#95;ABS32&#95;LO</a>);</span></CodeLine>
<Link id="l03003" /><CodeLine lineNumber="3003"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">; </span><span class="doxyHighlightComment">// Leave in place;</span></CodeLine>
<Link id="l03004" /><CodeLine lineNumber="3004"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03005" /><CodeLine lineNumber="3005"></CodeLine>
<Link id="l03006" /><CodeLine lineNumber="3006"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AS == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL&#95;ADDRESS</a> &amp;&amp; GV-&gt;<a href="/docs/api/classes/llvm/globalvalue/#a1847e956a0087fefdb49e2a9583c7d18">hasExternalLinkage</a>()) &#123;</span></CodeLine>
<Link id="l03007" /><CodeLine lineNumber="3007"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = GV-&gt;<a href="/docs/api/classes/llvm/globalvalue/#af1dd2acfc2950742e41a64a342b15c80">getValueType</a>();</span></CodeLine>
<Link id="l03008" /><CodeLine lineNumber="3008"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// HIP uses an unsized array &#96;extern &#95;&#95;shared&#95;&#95; T s&#91;&#93;&#96; or similar</span></CodeLine>
<Link id="l03009" /><CodeLine lineNumber="3009"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// zero-sized type in other languages to declare the dynamic shared</span></CodeLine>
<Link id="l03010" /><CodeLine lineNumber="3010"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// memory which size is not known at the compile time. They will be</span></CodeLine>
<Link id="l03011" /><CodeLine lineNumber="3011"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// allocated by the runtime and placed directly after the static</span></CodeLine>
<Link id="l03012" /><CodeLine lineNumber="3012"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// allocated ones. They all share the same offset.</span></CodeLine>
<Link id="l03013" /><CodeLine lineNumber="3013"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getDataLayout().getTypeAllocSize(Ty).isZero()) &#123;</span></CodeLine>
<Link id="l03014" /><CodeLine lineNumber="3014"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Adjust alignment for that dynamic shared memory array.</span></CodeLine>
<Link id="l03015" /><CodeLine lineNumber="3015"><span class="doxyHighlight">        MFI-&gt;<a href="/docs/api/classes/llvm/amdgpumachinefunction/#a525be06bfa09ba3686ce7a9406a3f6cf">setDynLDSAlign</a>(MF.<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>(), &#42;<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;GlobalVariable&gt;</a>(GV));</span></CodeLine>
<Link id="l03016" /><CodeLine lineNumber="3016"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l03017" /><CodeLine lineNumber="3017"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sz = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;groupstaticsize, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;);</span></CodeLine>
<Link id="l03018" /><CodeLine lineNumber="3018"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntToPtr(DstReg, Sz);</span></CodeLine>
<Link id="l03019" /><CodeLine lineNumber="3019"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03020" /><CodeLine lineNumber="3020"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03021" /><CodeLine lineNumber="3021"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l03022" /><CodeLine lineNumber="3022"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03023" /><CodeLine lineNumber="3023"></CodeLine>
<Link id="l03024" /><CodeLine lineNumber="3024"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(DstReg, MFI-&gt;<a href="/docs/api/classes/llvm/amdgpumachinefunction/#aafb5cd8f55deecfdc2acb25c44491a36">allocateLDSGlobal</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getDataLayout(),</span></CodeLine>
<Link id="l03025" /><CodeLine lineNumber="3025"><span class="doxyHighlight">                                                   &#42;<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;GlobalVariable&gt;</a>(GV)));</span></CodeLine>
<Link id="l03026" /><CodeLine lineNumber="3026"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03027" /><CodeLine lineNumber="3027"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03028" /><CodeLine lineNumber="3028"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03029" /><CodeLine lineNumber="3029"></CodeLine>
<Link id="l03030" /><CodeLine lineNumber="3030"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.isAmdPalOS() || ST.isMesa3DOS()) &#123;</span></CodeLine>
<Link id="l03031" /><CodeLine lineNumber="3031"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ad5c38c10f947e4226f85aade1ebf57f1">buildAbsGlobalAddress</a>(DstReg, Ty, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, GV, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</span></CodeLine>
<Link id="l03032" /><CodeLine lineNumber="3032"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03033" /><CodeLine lineNumber="3033"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03034" /><CodeLine lineNumber="3034"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03035" /><CodeLine lineNumber="3035"></CodeLine>
<Link id="l03036" /><CodeLine lineNumber="3036"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sitargetlowering">SITargetLowering</a> &#42;TLI = ST.getTargetLowering();</span></CodeLine>
<Link id="l03037" /><CodeLine lineNumber="3037"></CodeLine>
<Link id="l03038" /><CodeLine lineNumber="3038"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TLI-&gt;<a href="/docs/api/classes/llvm/sitargetlowering/#a88e01d7fa3f418c441946a2200eb12c0">shouldEmitFixup</a>(GV)) &#123;</span></CodeLine>
<Link id="l03039" /><CodeLine lineNumber="3039"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a6006bd8b7a7155240e3a11c12d104c50">buildPCRelGlobalAddress</a>(DstReg, Ty, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, GV, 0);</span></CodeLine>
<Link id="l03040" /><CodeLine lineNumber="3040"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03041" /><CodeLine lineNumber="3041"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03042" /><CodeLine lineNumber="3042"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03043" /><CodeLine lineNumber="3043"></CodeLine>
<Link id="l03044" /><CodeLine lineNumber="3044"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (TLI-&gt;<a href="/docs/api/classes/llvm/sitargetlowering/#acf18fd06c03bc65cbbf30fe2dc9201e0">shouldEmitPCReloc</a>(GV)) &#123;</span></CodeLine>
<Link id="l03045" /><CodeLine lineNumber="3045"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a6006bd8b7a7155240e3a11c12d104c50">buildPCRelGlobalAddress</a>(DstReg, Ty, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, GV, 0, <a href="/docs/api/classes/llvm/siinstrinfo/#ade90146180a53b9d9edc077b933e70bba563c4436cfc2d24b41acd1cfd4357977">SIInstrInfo::MO&#95;REL32</a>);</span></CodeLine>
<Link id="l03046" /><CodeLine lineNumber="3046"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03047" /><CodeLine lineNumber="3047"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03048" /><CodeLine lineNumber="3048"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03049" /><CodeLine lineNumber="3049"></CodeLine>
<Link id="l03050" /><CodeLine lineNumber="3050"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> PtrTy = <a href="/docs/api/classes/llvm/llt/#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT&#95;ADDRESS</a>, 64);</span></CodeLine>
<Link id="l03051" /><CodeLine lineNumber="3051"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> GOTAddr = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(PtrTy);</span></CodeLine>
<Link id="l03052" /><CodeLine lineNumber="3052"></CodeLine>
<Link id="l03053" /><CodeLine lineNumber="3053"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> LoadTy = Ty.getSizeInBits() == 32 ? PtrTy : Ty;</span></CodeLine>
<Link id="l03054" /><CodeLine lineNumber="3054"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinememoperand">MachineMemOperand</a> &#42;GOTMMO = MF.<a href="/docs/api/classes/llvm/machinefunction/#a453ae3052b4f5b14cb4c184243ce5027">getMachineMemOperand</a>(</span></CodeLine>
<Link id="l03055" /><CodeLine lineNumber="3055"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/machinepointerinfo/#aa70144cee705b3f0db7f53ff3bf004e9">MachinePointerInfo::getGOT</a>(MF),</span></CodeLine>
<Link id="l03056" /><CodeLine lineNumber="3056"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a> | <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2dda7b999a936bc7a4d45dfadbe356e77b3f">MachineMemOperand::MODereferenceable</a> |</span></CodeLine>
<Link id="l03057" /><CodeLine lineNumber="3057"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2ddac63dd9c4fe69bfeaac7a363fda846ac6">MachineMemOperand::MOInvariant</a>,</span></CodeLine>
<Link id="l03058" /><CodeLine lineNumber="3058"><span class="doxyHighlight">      LoadTy, <a href="/docs/api/structs/llvm/align">Align</a>(8));</span></CodeLine>
<Link id="l03059" /><CodeLine lineNumber="3059"></CodeLine>
<Link id="l03060" /><CodeLine lineNumber="3060"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a6006bd8b7a7155240e3a11c12d104c50">buildPCRelGlobalAddress</a>(GOTAddr, PtrTy, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, GV, 0, <a href="/docs/api/classes/llvm/siinstrinfo/#ade90146180a53b9d9edc077b933e70bbaf8bf104f053c930813dce1aa8b9f9f7c">SIInstrInfo::MO&#95;GOTPCREL32</a>);</span></CodeLine>
<Link id="l03061" /><CodeLine lineNumber="3061"></CodeLine>
<Link id="l03062" /><CodeLine lineNumber="3062"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty.getSizeInBits() == 32) &#123;</span></CodeLine>
<Link id="l03063" /><CodeLine lineNumber="3063"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Truncate if this is a 32-bit constant address.</span></CodeLine>
<Link id="l03064" /><CodeLine lineNumber="3064"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Load = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildLoad(PtrTy, GOTAddr, &#42;GOTMMO);</span></CodeLine>
<Link id="l03065" /><CodeLine lineNumber="3065"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildExtract(DstReg, Load, 0);</span></CodeLine>
<Link id="l03066" /><CodeLine lineNumber="3066"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l03067" /><CodeLine lineNumber="3067"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildLoad(DstReg, GOTAddr, &#42;GOTMMO);</span></CodeLine>
<Link id="l03068" /><CodeLine lineNumber="3068"></CodeLine>
<Link id="l03069" /><CodeLine lineNumber="3069"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03070" /><CodeLine lineNumber="3070"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03071" /><CodeLine lineNumber="3071"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03072" /><CodeLine lineNumber="3072"></CodeLine>
<Link id="l03073" /><CodeLine lineNumber="3073" lineLink="#acbd3ab3957032feb181df036bb6a8d27"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#acbd3ab3957032feb181df036bb6a8d27">widenToNextPowerOf2</a>(<a href="/docs/api/classes/llvm/llt">LLT</a> Ty) &#123;</span></CodeLine>
<Link id="l03074" /><CodeLine lineNumber="3074"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty.isVector())</span></CodeLine>
<Link id="l03075" /><CodeLine lineNumber="3075"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Ty.changeElementCount(</span></CodeLine>
<Link id="l03076" /><CodeLine lineNumber="3076"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/elementcount/#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(<a href="/docs/api/namespaces/llvm/#a5542d44947f8d964b5ce3b20ea719b44">PowerOf2Ceil</a>(Ty.getNumElements())));</span></CodeLine>
<Link id="l03077" /><CodeLine lineNumber="3077"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(<a href="/docs/api/namespaces/llvm/#a5542d44947f8d964b5ce3b20ea719b44">PowerOf2Ceil</a>(Ty.getSizeInBits()));</span></CodeLine>
<Link id="l03078" /><CodeLine lineNumber="3078"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03079" /><CodeLine lineNumber="3079"></CodeLine>
<Link id="l03080" /><CodeLine lineNumber="3080" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#af13d2c38b3bf7586a8f07d511eda68e8"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#af13d2c38b3bf7586a8f07d511eda68e8">AMDGPULegalizerInfo::legalizeLoad</a>(<a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> &amp;Helper,</span></CodeLine>
<Link id="l03081" /><CodeLine lineNumber="3081"><span class="doxyHighlight">                                       <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03082" /><CodeLine lineNumber="3082"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</span></CodeLine>
<Link id="l03083" /><CodeLine lineNumber="3083"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI();</span></CodeLine>
<Link id="l03084" /><CodeLine lineNumber="3084"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/giselchangeobserver">GISelChangeObserver</a> &amp;Observer = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>;</span></CodeLine>
<Link id="l03085" /><CodeLine lineNumber="3085"></CodeLine>
<Link id="l03086" /><CodeLine lineNumber="3086"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> PtrReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l03087" /><CodeLine lineNumber="3087"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> PtrTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(PtrReg);</span></CodeLine>
<Link id="l03088" /><CodeLine lineNumber="3088"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AddrSpace = PtrTy.<a href="/docs/api/classes/llvm/llt/#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>();</span></CodeLine>
<Link id="l03089" /><CodeLine lineNumber="3089"></CodeLine>
<Link id="l03090" /><CodeLine lineNumber="3090"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (AddrSpace == <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a1caf1e287a5fe7250388d66ed72aa0c1">AMDGPUAS::CONSTANT&#95;ADDRESS&#95;32BIT</a>) &#123;</span></CodeLine>
<Link id="l03091" /><CodeLine lineNumber="3091"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> ConstPtr = <a href="/docs/api/classes/llvm/llt/#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT&#95;ADDRESS</a>, 64);</span></CodeLine>
<Link id="l03092" /><CodeLine lineNumber="3092"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Cast = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAddrSpaceCast(ConstPtr, PtrReg);</span></CodeLine>
<Link id="l03093" /><CodeLine lineNumber="3093"><span class="doxyHighlight">    Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l03094" /><CodeLine lineNumber="3094"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).setReg(Cast.getReg(0));</span></CodeLine>
<Link id="l03095" /><CodeLine lineNumber="3095"><span class="doxyHighlight">    Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l03096" /><CodeLine lineNumber="3096"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03097" /><CodeLine lineNumber="3097"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03098" /><CodeLine lineNumber="3098"></CodeLine>
<Link id="l03099" /><CodeLine lineNumber="3099"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() != AMDGPU::G&#95;LOAD)</span></CodeLine>
<Link id="l03100" /><CodeLine lineNumber="3100"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03101" /><CodeLine lineNumber="3101"></CodeLine>
<Link id="l03102" /><CodeLine lineNumber="3102"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> ValReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l03103" /><CodeLine lineNumber="3103"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> ValTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(ValReg);</span></CodeLine>
<Link id="l03104" /><CodeLine lineNumber="3104"></CodeLine>
<Link id="l03105" /><CodeLine lineNumber="3105"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#abb71b9eb64250d4491336cf106be74eb">hasBufferRsrcWorkaround</a>(ValTy)) &#123;</span></CodeLine>
<Link id="l03106" /><CodeLine lineNumber="3106"><span class="doxyHighlight">    Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l03107" /><CodeLine lineNumber="3107"><span class="doxyHighlight">    <a href="#a78249707a06ea5161d8c6bbb442ea46c">castBufferRsrcFromV4I32</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, 0);</span></CodeLine>
<Link id="l03108" /><CodeLine lineNumber="3108"><span class="doxyHighlight">    Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l03109" /><CodeLine lineNumber="3109"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03110" /><CodeLine lineNumber="3110"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03111" /><CodeLine lineNumber="3111"></CodeLine>
<Link id="l03112" /><CodeLine lineNumber="3112"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinememoperand">MachineMemOperand</a> &#42;MMO = &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands&#95;begin();</span></CodeLine>
<Link id="l03113" /><CodeLine lineNumber="3113"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ValSize = ValTy.getSizeInBits();</span></CodeLine>
<Link id="l03114" /><CodeLine lineNumber="3114"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> MemTy = MMO-&gt;<a href="/docs/api/classes/llvm/machinememoperand/#a3e9d2a9063bce7f5b3d7dd21fd05c79d">getMemoryType</a>();</span></CodeLine>
<Link id="l03115" /><CodeLine lineNumber="3115"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> MemAlign = MMO-&gt;<a href="/docs/api/classes/llvm/machinememoperand/#abc15369ab4cc583332950b913e2ef1dd">getAlign</a>();</span></CodeLine>
<Link id="l03116" /><CodeLine lineNumber="3116"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> MemSize = MemTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</span></CodeLine>
<Link id="l03117" /><CodeLine lineNumber="3117"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> uint64&#95;t AlignInBits = 8 &#42; MemAlign.<a href="/docs/api/structs/llvm/align/#a80735739b49cf97a491922c8f9af2cc1">value</a>();</span></CodeLine>
<Link id="l03118" /><CodeLine lineNumber="3118"></CodeLine>
<Link id="l03119" /><CodeLine lineNumber="3119"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Widen non-power-of-2 loads to the alignment if needed</span></CodeLine>
<Link id="l03120" /><CodeLine lineNumber="3120"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a2d595a51e66614b8adb83efbc8114401">shouldWidenLoad</a>(ST, MemTy, AlignInBits, AddrSpace, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode())) &#123;</span></CodeLine>
<Link id="l03121" /><CodeLine lineNumber="3121"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> WideMemSize = <a href="/docs/api/namespaces/llvm/#a5542d44947f8d964b5ce3b20ea719b44">PowerOf2Ceil</a>(MemSize);</span></CodeLine>
<Link id="l03122" /><CodeLine lineNumber="3122"></CodeLine>
<Link id="l03123" /><CodeLine lineNumber="3123"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// This was already the correct extending load result type, so just adjust</span></CodeLine>
<Link id="l03124" /><CodeLine lineNumber="3124"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the memory type.</span></CodeLine>
<Link id="l03125" /><CodeLine lineNumber="3125"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (WideMemSize == ValSize) &#123;</span></CodeLine>
<Link id="l03126" /><CodeLine lineNumber="3126"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF();</span></CodeLine>
<Link id="l03127" /><CodeLine lineNumber="3127"></CodeLine>
<Link id="l03128" /><CodeLine lineNumber="3128"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/machinememoperand">MachineMemOperand</a> &#42;WideMMO =</span></CodeLine>
<Link id="l03129" /><CodeLine lineNumber="3129"><span class="doxyHighlight">          MF.<a href="/docs/api/classes/llvm/machinefunction/#a453ae3052b4f5b14cb4c184243ce5027">getMachineMemOperand</a>(MMO, 0, WideMemSize / 8);</span></CodeLine>
<Link id="l03130" /><CodeLine lineNumber="3130"><span class="doxyHighlight">      Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l03131" /><CodeLine lineNumber="3131"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setMemRefs(MF, &#123;WideMMO&#125;);</span></CodeLine>
<Link id="l03132" /><CodeLine lineNumber="3132"><span class="doxyHighlight">      Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l03133" /><CodeLine lineNumber="3133"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03134" /><CodeLine lineNumber="3134"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03135" /><CodeLine lineNumber="3135"></CodeLine>
<Link id="l03136" /><CodeLine lineNumber="3136"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Don&#39;t bother handling edge case that should probably never be produced.</span></CodeLine>
<Link id="l03137" /><CodeLine lineNumber="3137"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ValSize &gt; WideMemSize)</span></CodeLine>
<Link id="l03138" /><CodeLine lineNumber="3138"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03139" /><CodeLine lineNumber="3139"></CodeLine>
<Link id="l03140" /><CodeLine lineNumber="3140"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> WideTy = <a href="#acbd3ab3957032feb181df036bb6a8d27">widenToNextPowerOf2</a>(ValTy);</span></CodeLine>
<Link id="l03141" /><CodeLine lineNumber="3141"></CodeLine>
<Link id="l03142" /><CodeLine lineNumber="3142"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> WideLoad;</span></CodeLine>
<Link id="l03143" /><CodeLine lineNumber="3143"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!WideTy.<a href="/docs/api/classes/llvm/llt/#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) &#123;</span></CodeLine>
<Link id="l03144" /><CodeLine lineNumber="3144"><span class="doxyHighlight">      WideLoad = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildLoadFromOffset(WideTy, PtrReg, &#42;MMO, 0).getReg(0);</span></CodeLine>
<Link id="l03145" /><CodeLine lineNumber="3145"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildTrunc(ValReg, WideLoad).getReg(0);</span></CodeLine>
<Link id="l03146" /><CodeLine lineNumber="3146"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03147" /><CodeLine lineNumber="3147"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Extract the subvector.</span></CodeLine>
<Link id="l03148" /><CodeLine lineNumber="3148"></CodeLine>
<Link id="l03149" /><CodeLine lineNumber="3149"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(ValTy)) &#123;</span></CodeLine>
<Link id="l03150" /><CodeLine lineNumber="3150"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// If this a case where G&#95;EXTRACT is legal, use it.</span></CodeLine>
<Link id="l03151" /><CodeLine lineNumber="3151"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// (e.g. &lt;3 x s32&gt; -&gt; &lt;4 x s32&gt;)</span></CodeLine>
<Link id="l03152" /><CodeLine lineNumber="3152"><span class="doxyHighlight">        WideLoad = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildLoadFromOffset(WideTy, PtrReg, &#42;MMO, 0).getReg(0);</span></CodeLine>
<Link id="l03153" /><CodeLine lineNumber="3153"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildExtract(ValReg, WideLoad, 0);</span></CodeLine>
<Link id="l03154" /><CodeLine lineNumber="3154"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03155" /><CodeLine lineNumber="3155"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// For cases where the widened type isn&#39;t a nice register value, unmerge</span></CodeLine>
<Link id="l03156" /><CodeLine lineNumber="3156"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// from a widened register (e.g. &lt;3 x s16&gt; -&gt; &lt;4 x s16&gt;)</span></CodeLine>
<Link id="l03157" /><CodeLine lineNumber="3157"><span class="doxyHighlight">        WideLoad = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildLoadFromOffset(WideTy, PtrReg, &#42;MMO, 0).getReg(0);</span></CodeLine>
<Link id="l03158" /><CodeLine lineNumber="3158"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildDeleteTrailingVectorElements(ValReg, WideLoad);</span></CodeLine>
<Link id="l03159" /><CodeLine lineNumber="3159"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l03160" /><CodeLine lineNumber="3160"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03161" /><CodeLine lineNumber="3161"></CodeLine>
<Link id="l03162" /><CodeLine lineNumber="3162"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03163" /><CodeLine lineNumber="3163"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03164" /><CodeLine lineNumber="3164"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03165" /><CodeLine lineNumber="3165"></CodeLine>
<Link id="l03166" /><CodeLine lineNumber="3166"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03167" /><CodeLine lineNumber="3167"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03168" /><CodeLine lineNumber="3168"></CodeLine>
<Link id="l03169" /><CodeLine lineNumber="3169" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a5fb58d2b96b0e7a4a021fbe21869aaa8"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a5fb58d2b96b0e7a4a021fbe21869aaa8">AMDGPULegalizerInfo::legalizeStore</a>(<a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> &amp;Helper,</span></CodeLine>
<Link id="l03170" /><CodeLine lineNumber="3170"><span class="doxyHighlight">                                        <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03171" /><CodeLine lineNumber="3171"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</span></CodeLine>
<Link id="l03172" /><CodeLine lineNumber="3172"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI();</span></CodeLine>
<Link id="l03173" /><CodeLine lineNumber="3173"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/giselchangeobserver">GISelChangeObserver</a> &amp;Observer = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>;</span></CodeLine>
<Link id="l03174" /><CodeLine lineNumber="3174"></CodeLine>
<Link id="l03175" /><CodeLine lineNumber="3175"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DataReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l03176" /><CodeLine lineNumber="3176"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> DataTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(DataReg);</span></CodeLine>
<Link id="l03177" /><CodeLine lineNumber="3177"></CodeLine>
<Link id="l03178" /><CodeLine lineNumber="3178"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#abb71b9eb64250d4491336cf106be74eb">hasBufferRsrcWorkaround</a>(DataTy)) &#123;</span></CodeLine>
<Link id="l03179" /><CodeLine lineNumber="3179"><span class="doxyHighlight">    Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l03180" /><CodeLine lineNumber="3180"><span class="doxyHighlight">    <a href="#a9d84441ae7638d9c27873f5a3810cb88">castBufferRsrcArgToV4I32</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, 0);</span></CodeLine>
<Link id="l03181" /><CodeLine lineNumber="3181"><span class="doxyHighlight">    Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l03182" /><CodeLine lineNumber="3182"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03183" /><CodeLine lineNumber="3183"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03184" /><CodeLine lineNumber="3184"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03185" /><CodeLine lineNumber="3185"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03186" /><CodeLine lineNumber="3186"></CodeLine>
<Link id="l03187" /><CodeLine lineNumber="3187" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a4774d239d20e55380840e775aed66efc"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a4774d239d20e55380840e775aed66efc">AMDGPULegalizerInfo::legalizeFMad</a>(</span></CodeLine>
<Link id="l03188" /><CodeLine lineNumber="3188"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l03189" /><CodeLine lineNumber="3189"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03190" /><CodeLine lineNumber="3190"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</span></CodeLine>
<Link id="l03191" /><CodeLine lineNumber="3191"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty.isScalar());</span></CodeLine>
<Link id="l03192" /><CodeLine lineNumber="3192"></CodeLine>
<Link id="l03193" /><CodeLine lineNumber="3193"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF();</span></CodeLine>
<Link id="l03194" /><CodeLine lineNumber="3194"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a> &#42;MFI = MF.<a href="/docs/api/classes/llvm/machinefunction/#ab7feae1932b436c8630e247166ec42b7">getInfo</a>&lt;<a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a>&gt;();</span></CodeLine>
<Link id="l03195" /><CodeLine lineNumber="3195"></CodeLine>
<Link id="l03196" /><CodeLine lineNumber="3196"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Always legal with future ftz flag.</span></CodeLine>
<Link id="l03197" /><CodeLine lineNumber="3197"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: Do we need just output?</span></CodeLine>
<Link id="l03198" /><CodeLine lineNumber="3198"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="/docs/api/classes/llvm/llt/#aee6abb440f4fe52097595d934283f0a1">LLT::float32</a>() &amp;&amp;</span></CodeLine>
<Link id="l03199" /><CodeLine lineNumber="3199"><span class="doxyHighlight">      MFI-&gt;<a href="/docs/api/classes/llvm/simachinefunctioninfo/#a6012de9a1299d35e205f652abc3baf77">getMode</a>().<a href="/docs/api/structs/llvm/simoderegisterdefaults/#af1d0653d028bac2c78f7eec72f32472e">FP32Denormals</a> == <a href="/docs/api/structs/llvm/denormalmode/#a8b25a485fab5c4ade966d2ad73bc2ccf">DenormalMode::getPreserveSign</a>())</span></CodeLine>
<Link id="l03200" /><CodeLine lineNumber="3200"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03201" /><CodeLine lineNumber="3201"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="/docs/api/classes/llvm/llt/#abb1f260fc4da86ce2e93fa8628aa0b1d">LLT::float16</a>() &amp;&amp;</span></CodeLine>
<Link id="l03202" /><CodeLine lineNumber="3202"><span class="doxyHighlight">      MFI-&gt;<a href="/docs/api/classes/llvm/simachinefunctioninfo/#a6012de9a1299d35e205f652abc3baf77">getMode</a>().<a href="/docs/api/structs/llvm/simoderegisterdefaults/#a69743300b37bda17c4cf7690f2dc2fac">FP64FP16Denormals</a> == <a href="/docs/api/structs/llvm/denormalmode/#a8b25a485fab5c4ade966d2ad73bc2ccf">DenormalMode::getPreserveSign</a>())</span></CodeLine>
<Link id="l03203" /><CodeLine lineNumber="3203"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03204" /><CodeLine lineNumber="3204"></CodeLine>
<Link id="l03205" /><CodeLine lineNumber="3205"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> HelperBuilder(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l03206" /><CodeLine lineNumber="3206"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/giselobserverwrapper">GISelObserverWrapper</a> DummyObserver;</span></CodeLine>
<Link id="l03207" /><CodeLine lineNumber="3207"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> Helper(MF, DummyObserver, HelperBuilder);</span></CodeLine>
<Link id="l03208" /><CodeLine lineNumber="3208"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aac36a82fb8a9d486c3b59ccab7769e4d">lowerFMad</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) == <a href="/docs/api/classes/llvm/legalizerhelper/#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">LegalizerHelper::Legalized</a>;</span></CodeLine>
<Link id="l03209" /><CodeLine lineNumber="3209"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03210" /><CodeLine lineNumber="3210"></CodeLine>
<Link id="l03211" /><CodeLine lineNumber="3211" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a22a60a10a1cda01d7cef79f4634984dc"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a22a60a10a1cda01d7cef79f4634984dc">AMDGPULegalizerInfo::legalizeAtomicCmpXChg</a>(</span></CodeLine>
<Link id="l03212" /><CodeLine lineNumber="3212"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03213" /><CodeLine lineNumber="3213"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DstReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l03214" /><CodeLine lineNumber="3214"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> PtrReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l03215" /><CodeLine lineNumber="3215"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> CmpVal = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l03216" /><CodeLine lineNumber="3216"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> NewVal = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</span></CodeLine>
<Link id="l03217" /><CodeLine lineNumber="3217"></CodeLine>
<Link id="l03218" /><CodeLine lineNumber="3218"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/amdgpu/#a22dc5c679c09756d04fe07f9e22baf84">AMDGPU::isFlatGlobalAddrSpace</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(PtrReg).getAddressSpace()) &amp;&amp;</span></CodeLine>
<Link id="l03219" /><CodeLine lineNumber="3219"><span class="doxyHighlight">         </span><span class="doxyHighlightStringLiteral">&quot;this should not have been custom lowered&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03220" /><CodeLine lineNumber="3220"></CodeLine>
<Link id="l03221" /><CodeLine lineNumber="3221"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> ValTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(CmpVal);</span></CodeLine>
<Link id="l03222" /><CodeLine lineNumber="3222"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> VecTy = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2, ValTy);</span></CodeLine>
<Link id="l03223" /><CodeLine lineNumber="3223"></CodeLine>
<Link id="l03224" /><CodeLine lineNumber="3224"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> PackedVal = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBuildVector(VecTy, &#123; NewVal, CmpVal &#125;).<a href="/docs/api/files/lib/lib/target/lib/target/mips/lib/target/mips/disassembler/mipsdisassembler-cpp/#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0);</span></CodeLine>
<Link id="l03225" /><CodeLine lineNumber="3225"></CodeLine>
<Link id="l03226" /><CodeLine lineNumber="3226"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::G&#95;AMDGPU&#95;ATOMIC&#95;CMPXCHG)</span></CodeLine>
<Link id="l03227" /><CodeLine lineNumber="3227"><span class="doxyHighlight">    .addDef(DstReg)</span></CodeLine>
<Link id="l03228" /><CodeLine lineNumber="3228"><span class="doxyHighlight">    .addUse(PtrReg)</span></CodeLine>
<Link id="l03229" /><CodeLine lineNumber="3229"><span class="doxyHighlight">    .addUse(PackedVal)</span></CodeLine>
<Link id="l03230" /><CodeLine lineNumber="3230"><span class="doxyHighlight">    .setMemRefs(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands());</span></CodeLine>
<Link id="l03231" /><CodeLine lineNumber="3231"></CodeLine>
<Link id="l03232" /><CodeLine lineNumber="3232"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03233" /><CodeLine lineNumber="3233"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03234" /><CodeLine lineNumber="3234"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03235" /><CodeLine lineNumber="3235"></CodeLine>
<Link id="l03236" /><CodeLine lineNumber="3236"><span class="doxyHighlightComment">/// Return true if it&#39;s known that \\p Src can never be an f32 denormal value.</span></CodeLine>
<Link id="l03237" /><CodeLine lineNumber="3237" lineLink="#a344a4fa1e7c1a3a6f6ede4213058ad12"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuisellowering-cpp/#aab56a29f82c8c83fb88e5a2b01550f76">valueIsKnownNeverF32Denorm</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l03238" /><CodeLine lineNumber="3238"><span class="doxyHighlight">                                       <a href="/docs/api/classes/llvm/register">Register</a> Src) &#123;</span></CodeLine>
<Link id="l03239" /><CodeLine lineNumber="3239"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#ad3ece0ac2421637044624c9b01c42466">DefMI</a> = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getVRegDef(Src);</span></CodeLine>
<Link id="l03240" /><CodeLine lineNumber="3240"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#ad3ece0ac2421637044624c9b01c42466">DefMI</a>-&gt;getOpcode()) &#123;</span></CodeLine>
<Link id="l03241" /><CodeLine lineNumber="3241"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;INTRINSIC: &#123;</span></CodeLine>
<Link id="l03242" /><CodeLine lineNumber="3242"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;GIntrinsic&gt;</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#ad3ece0ac2421637044624c9b01c42466">DefMI</a>)-&gt;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64isellowering-cpp/#a62766c75f88612ffa652342472e755f6">getIntrinsicID</a>()) &#123;</span></CodeLine>
<Link id="l03243" /><CodeLine lineNumber="3243"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;frexp&#95;mant:</span></CodeLine>
<Link id="l03244" /><CodeLine lineNumber="3244"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03245" /><CodeLine lineNumber="3245"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l03246" /><CodeLine lineNumber="3246"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03247" /><CodeLine lineNumber="3247"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03248" /><CodeLine lineNumber="3248"></CodeLine>
<Link id="l03249" /><CodeLine lineNumber="3249"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03250" /><CodeLine lineNumber="3250"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03251" /><CodeLine lineNumber="3251"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FFREXP: &#123;</span></CodeLine>
<Link id="l03252" /><CodeLine lineNumber="3252"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#ad3ece0ac2421637044624c9b01c42466">DefMI</a>-&gt;getOperand(0).getReg() == Src)</span></CodeLine>
<Link id="l03253" /><CodeLine lineNumber="3253"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03254" /><CodeLine lineNumber="3254"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03255" /><CodeLine lineNumber="3255"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03256" /><CodeLine lineNumber="3256"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> TargetOpcode::G&#95;FPEXT: &#123;</span></CodeLine>
<Link id="l03257" /><CodeLine lineNumber="3257"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#ad3ece0ac2421637044624c9b01c42466">DefMI</a>-&gt;getOperand(1).getReg()) == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</span></CodeLine>
<Link id="l03258" /><CodeLine lineNumber="3258"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03259" /><CodeLine lineNumber="3259"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l03260" /><CodeLine lineNumber="3260"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03261" /><CodeLine lineNumber="3261"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03262" /><CodeLine lineNumber="3262"></CodeLine>
<Link id="l03263" /><CodeLine lineNumber="3263"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03264" /><CodeLine lineNumber="3264"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03265" /><CodeLine lineNumber="3265"></CodeLine>
<Link id="l03266" /><CodeLine lineNumber="3266" lineLink="#a16c22435b21cfe335c972d971e29b0d7"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a16c22435b21cfe335c972d971e29b0d7">allowApproxFunc</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags) &#123;</span></CodeLine>
<Link id="l03267" /><CodeLine lineNumber="3267"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Flags &amp; <a href="/docs/api/classes/llvm/machineinstr/#aafacf84de1cb994a92dc045f4aa1d518a4802af6d0cf3b900adb6296bccedf2a0">MachineInstr::FmAfn</a>)</span></CodeLine>
<Link id="l03268" /><CodeLine lineNumber="3268"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03269" /><CodeLine lineNumber="3269"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/logicalview/lib/debuginfo/logicalview/core/lvoptions-cpp/#ab4088b7a11f3cbc38ac16a6e9c72494e">Options</a> = MF.<a href="/docs/api/classes/llvm/machinefunction/#af777ff93c9e07a6ff5ffe3226deb3e76">getTarget</a>().<a href="/docs/api/classes/llvm/targetmachine/#ab1fb67187fc37e569cc5171cbebba873">Options</a>;</span></CodeLine>
<Link id="l03270" /><CodeLine lineNumber="3270"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/logicalview/lib/debuginfo/logicalview/core/lvoptions-cpp/#ab4088b7a11f3cbc38ac16a6e9c72494e">Options</a>.UnsafeFPMath || <a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/logicalview/lib/debuginfo/logicalview/core/lvoptions-cpp/#ab4088b7a11f3cbc38ac16a6e9c72494e">Options</a>.ApproxFuncFPMath;</span></CodeLine>
<Link id="l03271" /><CodeLine lineNumber="3271"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03272" /><CodeLine lineNumber="3272"></CodeLine>
<Link id="l03273" /><CodeLine lineNumber="3273" lineLink="#a092571cd6865fc5f86e2a594265ff717"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a092571cd6865fc5f86e2a594265ff717">needsDenormHandlingF32</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF, <a href="/docs/api/classes/llvm/register">Register</a> Src,</span></CodeLine>
<Link id="l03274" /><CodeLine lineNumber="3274"><span class="doxyHighlight">                                   </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags) &#123;</span></CodeLine>
<Link id="l03275" /><CodeLine lineNumber="3275"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> !<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuisellowering-cpp/#aab56a29f82c8c83fb88e5a2b01550f76">valueIsKnownNeverF32Denorm</a>(MF.<a href="/docs/api/classes/llvm/machinefunction/#a810234b6b3d223b7c74a4253fcc5ea5e">getRegInfo</a>(), Src) &amp;&amp;</span></CodeLine>
<Link id="l03276" /><CodeLine lineNumber="3276"><span class="doxyHighlight">         MF.<a href="/docs/api/classes/llvm/machinefunction/#a5f3f664c3c8fef0ffd2833ae21254117">getDenormalMode</a>(<a href="/docs/api/structs/llvm/apfloatbase/#a0c5765e9acba977f6e462c2917276d8f">APFloat::IEEEsingle</a>()).<a href="/docs/api/structs/llvm/denormalmode/#a1b79f1995991b0a757a4d04969c3717f">Input</a> !=</span></CodeLine>
<Link id="l03277" /><CodeLine lineNumber="3277"><span class="doxyHighlight">             <a href="/docs/api/structs/llvm/denormalmode/#a29b26e3ae30f3f6ec4106ff181282893a40bc80ae1d362a1461703637e946cbd8">DenormalMode::PreserveSign</a>;</span></CodeLine>
<Link id="l03278" /><CodeLine lineNumber="3278"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03279" /><CodeLine lineNumber="3279"></CodeLine>
<Link id="l03280" /><CodeLine lineNumber="3280"><span class="doxyHighlight">std::pair&lt;Register, Register&gt;</span></CodeLine>
<Link id="l03281" /><CodeLine lineNumber="3281" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a6cccbc4ab2203366175f55aba0035679"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a6cccbc4ab2203366175f55aba0035679">AMDGPULegalizerInfo::getScaledLogInput</a>(<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/classes/llvm/register">Register</a> Src,</span></CodeLine>
<Link id="l03282" /><CodeLine lineNumber="3282"><span class="doxyHighlight">                                       </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03283" /><CodeLine lineNumber="3283"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#a092571cd6865fc5f86e2a594265ff717">needsDenormHandlingF32</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF(), Src, Flags))</span></CodeLine>
<Link id="l03284" /><CodeLine lineNumber="3284"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#123;&#125;;</span></CodeLine>
<Link id="l03285" /><CodeLine lineNumber="3285"></CodeLine>
<Link id="l03286" /><CodeLine lineNumber="3286"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l03287" /><CodeLine lineNumber="3287"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SmallestNormal = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(</span></CodeLine>
<Link id="l03288" /><CodeLine lineNumber="3288"><span class="doxyHighlight">      <a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, <a href="/docs/api/classes/llvm/apfloat/#a9c568ab8748aba5d37006d52618bbcfd">APFloat::getSmallestNormalized</a>(<a href="/docs/api/structs/llvm/apfloatbase/#a0c5765e9acba977f6e462c2917276d8f">APFloat::IEEEsingle</a>()));</span></CodeLine>
<Link id="l03289" /><CodeLine lineNumber="3289"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> IsLtSmallestNormal =</span></CodeLine>
<Link id="l03290" /><CodeLine lineNumber="3290"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">CmpInst::FCMP&#95;OLT</a>, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), Src, SmallestNormal);</span></CodeLine>
<Link id="l03291" /><CodeLine lineNumber="3291"></CodeLine>
<Link id="l03292" /><CodeLine lineNumber="3292"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Scale32 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, 0x1.0p+32);</span></CodeLine>
<Link id="l03293" /><CodeLine lineNumber="3293"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> One = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, 1.0);</span></CodeLine>
<Link id="l03294" /><CodeLine lineNumber="3294"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ScaleFactor =</span></CodeLine>
<Link id="l03295" /><CodeLine lineNumber="3295"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, IsLtSmallestNormal, Scale32, One, Flags);</span></CodeLine>
<Link id="l03296" /><CodeLine lineNumber="3296"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ScaledInput = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, Src, ScaleFactor, Flags);</span></CodeLine>
<Link id="l03297" /><CodeLine lineNumber="3297"></CodeLine>
<Link id="l03298" /><CodeLine lineNumber="3298"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#123;ScaledInput.getReg(0), IsLtSmallestNormal.getReg(0)&#125;;</span></CodeLine>
<Link id="l03299" /><CodeLine lineNumber="3299"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03300" /><CodeLine lineNumber="3300"></CodeLine>
<Link id="l03301" /><CodeLine lineNumber="3301" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#afb13811bb447af9b35a1ae4257e37a36"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#afb13811bb447af9b35a1ae4257e37a36">AMDGPULegalizerInfo::legalizeFlog2</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l03302" /><CodeLine lineNumber="3302"><span class="doxyHighlight">                                        <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03303" /><CodeLine lineNumber="3303"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// v&#95;log&#95;f32 is good enough for OpenCL, except it doesn&#39;t handle denormals.</span></CodeLine>
<Link id="l03304" /><CodeLine lineNumber="3304"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If we have to handle denormals, scale up the input and adjust the result.</span></CodeLine>
<Link id="l03305" /><CodeLine lineNumber="3305"></CodeLine>
<Link id="l03306" /><CodeLine lineNumber="3306"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// scaled = x &#42; (is&#95;denormal ? 0x1.0p+32 : 1.0)</span></CodeLine>
<Link id="l03307" /><CodeLine lineNumber="3307"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// log2 = amdgpu&#95;log2 - (is&#95;denormal ? 32 : 0.0)</span></CodeLine>
<Link id="l03308" /><CodeLine lineNumber="3308"></CodeLine>
<Link id="l03309" /><CodeLine lineNumber="3309"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l03310" /><CodeLine lineNumber="3310"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l03311" /><CodeLine lineNumber="3311"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;getType(Dst);</span></CodeLine>
<Link id="l03312" /><CodeLine lineNumber="3312"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l03313" /><CodeLine lineNumber="3313"></CodeLine>
<Link id="l03314" /><CodeLine lineNumber="3314"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16)) &#123;</span></CodeLine>
<Link id="l03315" /><CodeLine lineNumber="3315"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l03316" /><CodeLine lineNumber="3316"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Nothing in half is a denormal when promoted to f32.</span></CodeLine>
<Link id="l03317" /><CodeLine lineNumber="3317"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Ext = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPExt(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, Src, Flags);</span></CodeLine>
<Link id="l03318" /><CodeLine lineNumber="3318"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;log, &#123;<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>&#125;)</span></CodeLine>
<Link id="l03319" /><CodeLine lineNumber="3319"><span class="doxyHighlight">                    .addUse(Ext.getReg(0))</span></CodeLine>
<Link id="l03320" /><CodeLine lineNumber="3320"><span class="doxyHighlight">                    .setMIFlags(Flags);</span></CodeLine>
<Link id="l03321" /><CodeLine lineNumber="3321"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPTrunc(Dst, <a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a>, Flags);</span></CodeLine>
<Link id="l03322" /><CodeLine lineNumber="3322"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03323" /><CodeLine lineNumber="3323"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03324" /><CodeLine lineNumber="3324"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03325" /><CodeLine lineNumber="3325"></CodeLine>
<Link id="l03326" /><CodeLine lineNumber="3326"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32));</span></CodeLine>
<Link id="l03327" /><CodeLine lineNumber="3327"></CodeLine>
<Link id="l03328" /><CodeLine lineNumber="3328"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;ScaledInput, IsLtSmallestNormal&#93; = <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a6cccbc4ab2203366175f55aba0035679">getScaledLogInput</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Src, Flags);</span></CodeLine>
<Link id="l03329" /><CodeLine lineNumber="3329"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ScaledInput) &#123;</span></CodeLine>
<Link id="l03330" /><CodeLine lineNumber="3330"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;log, &#123;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0)&#125;)</span></CodeLine>
<Link id="l03331" /><CodeLine lineNumber="3331"><span class="doxyHighlight">        .addUse(Src)</span></CodeLine>
<Link id="l03332" /><CodeLine lineNumber="3332"><span class="doxyHighlight">        .setMIFlags(Flags);</span></CodeLine>
<Link id="l03333" /><CodeLine lineNumber="3333"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03334" /><CodeLine lineNumber="3334"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03335" /><CodeLine lineNumber="3335"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03336" /><CodeLine lineNumber="3336"></CodeLine>
<Link id="l03337" /><CodeLine lineNumber="3337"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;log, &#123;Ty&#125;)</span></CodeLine>
<Link id="l03338" /><CodeLine lineNumber="3338"><span class="doxyHighlight">                  .addUse(ScaledInput)</span></CodeLine>
<Link id="l03339" /><CodeLine lineNumber="3339"><span class="doxyHighlight">                  .setMIFlags(Flags);</span></CodeLine>
<Link id="l03340" /><CodeLine lineNumber="3340"></CodeLine>
<Link id="l03341" /><CodeLine lineNumber="3341"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ThirtyTwo = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, 32.0);</span></CodeLine>
<Link id="l03342" /><CodeLine lineNumber="3342"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Zero = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, 0.0);</span></CodeLine>
<Link id="l03343" /><CodeLine lineNumber="3343"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ResultOffset =</span></CodeLine>
<Link id="l03344" /><CodeLine lineNumber="3344"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(Ty, IsLtSmallestNormal, ThirtyTwo, Zero, Flags);</span></CodeLine>
<Link id="l03345" /><CodeLine lineNumber="3345"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFSub(Dst, <a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a>, ResultOffset, Flags);</span></CodeLine>
<Link id="l03346" /><CodeLine lineNumber="3346"></CodeLine>
<Link id="l03347" /><CodeLine lineNumber="3347"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03348" /><CodeLine lineNumber="3348"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03349" /><CodeLine lineNumber="3349"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03350" /><CodeLine lineNumber="3350"></CodeLine>
<Link id="l03351" /><CodeLine lineNumber="3351" lineLink="#a879e21eca00dd442c2623c505ca81b6e"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuisellowering-cpp/#a25b10fe33f86679525f62e3ebb93c4ae">getMad</a>(<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/classes/llvm/llt">LLT</a> Ty, <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>,</span></CodeLine>
<Link id="l03352" /><CodeLine lineNumber="3352"><span class="doxyHighlight">                       <a href="/docs/api/classes/llvm/register">Register</a> Z, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags) &#123;</span></CodeLine>
<Link id="l03353" /><CodeLine lineNumber="3353"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eab48b2a9934af7a531cfd7236ded9d50e">FMul</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(Ty, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, Flags);</span></CodeLine>
<Link id="l03354" /><CodeLine lineNumber="3354"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFAdd(Ty, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eab48b2a9934af7a531cfd7236ded9d50e">FMul</a>, Z, Flags).getReg(0);</span></CodeLine>
<Link id="l03355" /><CodeLine lineNumber="3355"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03356" /><CodeLine lineNumber="3356"></CodeLine>
<Link id="l03357" /><CodeLine lineNumber="3357" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a39adc1637ddc1df880ec4ab13529879e"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a39adc1637ddc1df880ec4ab13529879e">AMDGPULegalizerInfo::legalizeFlogCommon</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l03358" /><CodeLine lineNumber="3358"><span class="doxyHighlight">                                             <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03359" /><CodeLine lineNumber="3359"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsLog10 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G&#95;FLOG10;</span></CodeLine>
<Link id="l03360" /><CodeLine lineNumber="3360"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IsLog10 || <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G&#95;FLOG);</span></CodeLine>
<Link id="l03361" /><CodeLine lineNumber="3361"></CodeLine>
<Link id="l03362" /><CodeLine lineNumber="3362"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI();</span></CodeLine>
<Link id="l03363" /><CodeLine lineNumber="3363"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l03364" /><CodeLine lineNumber="3364"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l03365" /><CodeLine lineNumber="3365"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l03366" /><CodeLine lineNumber="3366"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>);</span></CodeLine>
<Link id="l03367" /><CodeLine lineNumber="3367"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF();</span></CodeLine>
<Link id="l03368" /><CodeLine lineNumber="3368"></CodeLine>
<Link id="l03369" /><CodeLine lineNumber="3369"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l03370" /><CodeLine lineNumber="3370"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> F16 = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</span></CodeLine>
<Link id="l03371" /><CodeLine lineNumber="3371"></CodeLine>
<Link id="l03372" /><CodeLine lineNumber="3372"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgputargetmachine">AMDGPUTargetMachine</a> &amp;TM =</span></CodeLine>
<Link id="l03373" /><CodeLine lineNumber="3373"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeyword">const </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/amdgputargetmachine">AMDGPUTargetMachine</a> &amp;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(MF.<a href="/docs/api/classes/llvm/machinefunction/#af777ff93c9e07a6ff5ffe3226deb3e76">getTarget</a>());</span></CodeLine>
<Link id="l03374" /><CodeLine lineNumber="3374"></CodeLine>
<Link id="l03375" /><CodeLine lineNumber="3375"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == F16 || <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlag(<a href="/docs/api/classes/llvm/machineinstr/#aafacf84de1cb994a92dc045f4aa1d518a4802af6d0cf3b900adb6296bccedf2a0">MachineInstr::FmAfn</a>) ||</span></CodeLine>
<Link id="l03376" /><CodeLine lineNumber="3376"><span class="doxyHighlight">      TM.Options.ApproxFuncFPMath || TM.Options.UnsafeFPMath) &#123;</span></CodeLine>
<Link id="l03377" /><CodeLine lineNumber="3377"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == F16 &amp;&amp; !ST.has16BitInsts()) &#123;</span></CodeLine>
<Link id="l03378" /><CodeLine lineNumber="3378"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/register">Register</a> LogVal = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>);</span></CodeLine>
<Link id="l03379" /><CodeLine lineNumber="3379"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> PromoteSrc = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPExt(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>);</span></CodeLine>
<Link id="l03380" /><CodeLine lineNumber="3380"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ac7d32c396b93d03561c3c14fde634e9c">legalizeFlogUnsafe</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, LogVal, PromoteSrc.getReg(0), IsLog10, Flags);</span></CodeLine>
<Link id="l03381" /><CodeLine lineNumber="3381"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPTrunc(Dst, LogVal);</span></CodeLine>
<Link id="l03382" /><CodeLine lineNumber="3382"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03383" /><CodeLine lineNumber="3383"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ac7d32c396b93d03561c3c14fde634e9c">legalizeFlogUnsafe</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Dst, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, IsLog10, Flags);</span></CodeLine>
<Link id="l03384" /><CodeLine lineNumber="3384"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03385" /><CodeLine lineNumber="3385"></CodeLine>
<Link id="l03386" /><CodeLine lineNumber="3386"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03387" /><CodeLine lineNumber="3387"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03388" /><CodeLine lineNumber="3388"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03389" /><CodeLine lineNumber="3389"></CodeLine>
<Link id="l03390" /><CodeLine lineNumber="3390"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;ScaledInput, IsScaled&#93; = <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a6cccbc4ab2203366175f55aba0035679">getScaledLogInput</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, Flags);</span></CodeLine>
<Link id="l03391" /><CodeLine lineNumber="3391"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ScaledInput)</span></CodeLine>
<Link id="l03392" /><CodeLine lineNumber="3392"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = ScaledInput;</span></CodeLine>
<Link id="l03393" /><CodeLine lineNumber="3393"></CodeLine>
<Link id="l03394" /><CodeLine lineNumber="3394"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> =</span></CodeLine>
<Link id="l03395" /><CodeLine lineNumber="3395"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;log, &#123;Ty&#125;).addUse(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>).setMIFlags(Flags);</span></CodeLine>
<Link id="l03396" /><CodeLine lineNumber="3396"></CodeLine>
<Link id="l03397" /><CodeLine lineNumber="3397"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> R;</span></CodeLine>
<Link id="l03398" /><CodeLine lineNumber="3398"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasFastFMAF32()) &#123;</span></CodeLine>
<Link id="l03399" /><CodeLine lineNumber="3399"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// c+cc are ln(2)/ln(10) to more than 49 bits</span></CodeLine>
<Link id="l03400" /><CodeLine lineNumber="3400"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">float</span><span class="doxyHighlight"> c&#95;log10 = 0x1.344134p-2f;</span></CodeLine>
<Link id="l03401" /><CodeLine lineNumber="3401"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">float</span><span class="doxyHighlight"> cc&#95;log10 = 0x1.09f79ep-26f;</span></CodeLine>
<Link id="l03402" /><CodeLine lineNumber="3402"></CodeLine>
<Link id="l03403" /><CodeLine lineNumber="3403"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// c + cc is ln(2) to more than 49 bits</span></CodeLine>
<Link id="l03404" /><CodeLine lineNumber="3404"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">float</span><span class="doxyHighlight"> c&#95;log = 0x1.62e42ep-1f;</span></CodeLine>
<Link id="l03405" /><CodeLine lineNumber="3405"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">float</span><span class="doxyHighlight"> cc&#95;log = 0x1.efa39ep-25f;</span></CodeLine>
<Link id="l03406" /><CodeLine lineNumber="3406"></CodeLine>
<Link id="l03407" /><CodeLine lineNumber="3407"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, IsLog10 ? c&#95;log10 : c&#95;log);</span></CodeLine>
<Link id="l03408" /><CodeLine lineNumber="3408"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, IsLog10 ? cc&#95;log10 : cc&#95;log);</span></CodeLine>
<Link id="l03409" /><CodeLine lineNumber="3409"></CodeLine>
<Link id="l03410" /><CodeLine lineNumber="3410"><span class="doxyHighlight">    R = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(Ty, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, Flags).getReg(0);</span></CodeLine>
<Link id="l03411" /><CodeLine lineNumber="3411"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegR = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFNeg(Ty, R, Flags);</span></CodeLine>
<Link id="l03412" /><CodeLine lineNumber="3412"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FMA0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(Ty, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, NegR, Flags);</span></CodeLine>
<Link id="l03413" /><CodeLine lineNumber="3413"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FMA1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(Ty, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>, FMA0, Flags);</span></CodeLine>
<Link id="l03414" /><CodeLine lineNumber="3414"><span class="doxyHighlight">    R = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFAdd(Ty, R, FMA1, Flags).getReg(0);</span></CodeLine>
<Link id="l03415" /><CodeLine lineNumber="3415"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03416" /><CodeLine lineNumber="3416"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// ch+ct is ln(2)/ln(10) to more than 36 bits</span></CodeLine>
<Link id="l03417" /><CodeLine lineNumber="3417"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">float</span><span class="doxyHighlight"> ch&#95;log10 = 0x1.344000p-2f;</span></CodeLine>
<Link id="l03418" /><CodeLine lineNumber="3418"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">float</span><span class="doxyHighlight"> ct&#95;log10 = 0x1.3509f6p-18f;</span></CodeLine>
<Link id="l03419" /><CodeLine lineNumber="3419"></CodeLine>
<Link id="l03420" /><CodeLine lineNumber="3420"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// ch + ct is ln(2) to more than 36 bits</span></CodeLine>
<Link id="l03421" /><CodeLine lineNumber="3421"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">float</span><span class="doxyHighlight"> ch&#95;log = 0x1.62e000p-1f;</span></CodeLine>
<Link id="l03422" /><CodeLine lineNumber="3422"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">float</span><span class="doxyHighlight"> ct&#95;log = 0x1.0bfbe8p-15f;</span></CodeLine>
<Link id="l03423" /><CodeLine lineNumber="3423"></CodeLine>
<Link id="l03424" /><CodeLine lineNumber="3424"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/sha256-cpp/#a0ed6c9c714485592a8c317a8ad91c83b">CH</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, IsLog10 ? ch&#95;log10 : ch&#95;log);</span></CodeLine>
<Link id="l03425" /><CodeLine lineNumber="3425"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CT = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, IsLog10 ? ct&#95;log10 : ct&#95;log);</span></CodeLine>
<Link id="l03426" /><CodeLine lineNumber="3426"></CodeLine>
<Link id="l03427" /><CodeLine lineNumber="3427"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MaskConst = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(Ty, 0xfffff000);</span></CodeLine>
<Link id="l03428" /><CodeLine lineNumber="3428"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> YH = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnd(Ty, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, MaskConst);</span></CodeLine>
<Link id="l03429" /><CodeLine lineNumber="3429"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> YT = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFSub(Ty, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, YH, Flags);</span></CodeLine>
<Link id="l03430" /><CodeLine lineNumber="3430"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> YTCT = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(Ty, YT, CT, Flags);</span></CodeLine>
<Link id="l03431" /><CodeLine lineNumber="3431"></CodeLine>
<Link id="l03432" /><CodeLine lineNumber="3432"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> Mad0 =</span></CodeLine>
<Link id="l03433" /><CodeLine lineNumber="3433"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuisellowering-cpp/#a25b10fe33f86679525f62e3ebb93c4ae">getMad</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Ty, YH.getReg(0), CT.getReg(0), YTCT.getReg(0), Flags);</span></CodeLine>
<Link id="l03434" /><CodeLine lineNumber="3434"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> Mad1 = <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuisellowering-cpp/#a25b10fe33f86679525f62e3ebb93c4ae">getMad</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Ty, YT.getReg(0), <a href="/docs/api/files/lib/lib/support/sha256-cpp/#a0ed6c9c714485592a8c317a8ad91c83b">CH</a>.getReg(0), Mad0, Flags);</span></CodeLine>
<Link id="l03435" /><CodeLine lineNumber="3435"><span class="doxyHighlight">    R = <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuisellowering-cpp/#a25b10fe33f86679525f62e3ebb93c4ae">getMad</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Ty, YH.getReg(0), <a href="/docs/api/files/lib/lib/support/sha256-cpp/#a0ed6c9c714485592a8c317a8ad91c83b">CH</a>.getReg(0), Mad1, Flags);</span></CodeLine>
<Link id="l03436" /><CodeLine lineNumber="3436"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03437" /><CodeLine lineNumber="3437"></CodeLine>
<Link id="l03438" /><CodeLine lineNumber="3438"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsFiniteOnly =</span></CodeLine>
<Link id="l03439" /><CodeLine lineNumber="3439"><span class="doxyHighlight">      (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlag(<a href="/docs/api/classes/llvm/machineinstr/#aafacf84de1cb994a92dc045f4aa1d518aba11aa58176a446ba70d4f0ad0e04418">MachineInstr::FmNoNans</a>) || TM.Options.NoNaNsFPMath) &amp;&amp;</span></CodeLine>
<Link id="l03440" /><CodeLine lineNumber="3440"><span class="doxyHighlight">      (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlag(<a href="/docs/api/classes/llvm/machineinstr/#aafacf84de1cb994a92dc045f4aa1d518a45ffd15293a16979f698cec4e2c60ad0">MachineInstr::FmNoInfs</a>) || TM.Options.NoInfsFPMath);</span></CodeLine>
<Link id="l03441" /><CodeLine lineNumber="3441"></CodeLine>
<Link id="l03442" /><CodeLine lineNumber="3442"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!IsFiniteOnly) &#123;</span></CodeLine>
<Link id="l03443" /><CodeLine lineNumber="3443"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Expand isfinite(x) =&gt; fabs(x) &lt; inf</span></CodeLine>
<Link id="l03444" /><CodeLine lineNumber="3444"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Inf = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, <a href="/docs/api/classes/llvm/apfloat/#ab35b08ed1345493af2c69fbb71e4d0c3">APFloat::getInf</a>(<a href="/docs/api/structs/llvm/apfloatbase/#a0c5765e9acba977f6e462c2917276d8f">APFloat::IEEEsingle</a>()));</span></CodeLine>
<Link id="l03445" /><CodeLine lineNumber="3445"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fabs = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFAbs(Ty, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</span></CodeLine>
<Link id="l03446" /><CodeLine lineNumber="3446"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> IsFinite =</span></CodeLine>
<Link id="l03447" /><CodeLine lineNumber="3447"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">CmpInst::FCMP&#95;OLT</a>, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), Fabs, Inf, Flags);</span></CodeLine>
<Link id="l03448" /><CodeLine lineNumber="3448"><span class="doxyHighlight">    R = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(Ty, IsFinite, R, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>, Flags).getReg(0);</span></CodeLine>
<Link id="l03449" /><CodeLine lineNumber="3449"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03450" /><CodeLine lineNumber="3450"></CodeLine>
<Link id="l03451" /><CodeLine lineNumber="3451"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ScaledInput) &#123;</span></CodeLine>
<Link id="l03452" /><CodeLine lineNumber="3452"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Zero = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, 0.0);</span></CodeLine>
<Link id="l03453" /><CodeLine lineNumber="3453"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ShiftK =</span></CodeLine>
<Link id="l03454" /><CodeLine lineNumber="3454"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, IsLog10 ? 0x1.344136p+3f : 0x1.62e430p+4f);</span></CodeLine>
<Link id="l03455" /><CodeLine lineNumber="3455"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Shift = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(Ty, IsScaled, ShiftK, Zero, Flags);</span></CodeLine>
<Link id="l03456" /><CodeLine lineNumber="3456"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFSub(Dst, R, Shift, Flags);</span></CodeLine>
<Link id="l03457" /><CodeLine lineNumber="3457"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03458" /><CodeLine lineNumber="3458"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildCopy(Dst, R);</span></CodeLine>
<Link id="l03459" /><CodeLine lineNumber="3459"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03460" /><CodeLine lineNumber="3460"></CodeLine>
<Link id="l03461" /><CodeLine lineNumber="3461"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03462" /><CodeLine lineNumber="3462"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03463" /><CodeLine lineNumber="3463"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03464" /><CodeLine lineNumber="3464"></CodeLine>
<Link id="l03465" /><CodeLine lineNumber="3465" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#ac7d32c396b93d03561c3c14fde634e9c"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ac7d32c396b93d03561c3c14fde634e9c">AMDGPULegalizerInfo::legalizeFlogUnsafe</a>(<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/classes/llvm/register">Register</a> Dst,</span></CodeLine>
<Link id="l03466" /><CodeLine lineNumber="3466"><span class="doxyHighlight">                                             <a href="/docs/api/classes/llvm/register">Register</a> Src, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsLog10,</span></CodeLine>
<Link id="l03467" /><CodeLine lineNumber="3467"><span class="doxyHighlight">                                             </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03468" /><CodeLine lineNumber="3468"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">double</span><span class="doxyHighlight"> Log2BaseInverted =</span></CodeLine>
<Link id="l03469" /><CodeLine lineNumber="3469"><span class="doxyHighlight">      IsLog10 ? <a href="/docs/api/namespaces/llvm/numbers/#a5a1948ea51d0921b61af3f41214bc6b6">numbers::ln2</a> / <a href="/docs/api/namespaces/llvm/numbers/#a835b33a501a533391dd99df84ea1c8e7">numbers::ln10</a> : <a href="/docs/api/namespaces/llvm/numbers/#a5a1948ea51d0921b61af3f41214bc6b6">numbers::ln2</a>;</span></CodeLine>
<Link id="l03470" /><CodeLine lineNumber="3470"></CodeLine>
<Link id="l03471" /><CodeLine lineNumber="3471"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;getType(Dst);</span></CodeLine>
<Link id="l03472" /><CodeLine lineNumber="3472"></CodeLine>
<Link id="l03473" /><CodeLine lineNumber="3473"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32)) &#123;</span></CodeLine>
<Link id="l03474" /><CodeLine lineNumber="3474"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#91;ScaledInput, IsScaled&#93; = <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a6cccbc4ab2203366175f55aba0035679">getScaledLogInput</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Src, Flags);</span></CodeLine>
<Link id="l03475" /><CodeLine lineNumber="3475"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ScaledInput) &#123;</span></CodeLine>
<Link id="l03476" /><CodeLine lineNumber="3476"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> LogSrc = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;log, &#123;Ty&#125;)</span></CodeLine>
<Link id="l03477" /><CodeLine lineNumber="3477"><span class="doxyHighlight">                        .addUse(Src)</span></CodeLine>
<Link id="l03478" /><CodeLine lineNumber="3478"><span class="doxyHighlight">                        .setMIFlags(Flags);</span></CodeLine>
<Link id="l03479" /><CodeLine lineNumber="3479"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ScaledResultOffset = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, -32 &#42; Log2BaseInverted);</span></CodeLine>
<Link id="l03480" /><CodeLine lineNumber="3480"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Zero = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, 0.0);</span></CodeLine>
<Link id="l03481" /><CodeLine lineNumber="3481"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ResultOffset =</span></CodeLine>
<Link id="l03482" /><CodeLine lineNumber="3482"><span class="doxyHighlight">          <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(Ty, IsScaled, ScaledResultOffset, Zero, Flags);</span></CodeLine>
<Link id="l03483" /><CodeLine lineNumber="3483"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Log2Inv = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, Log2BaseInverted);</span></CodeLine>
<Link id="l03484" /><CodeLine lineNumber="3484"></CodeLine>
<Link id="l03485" /><CodeLine lineNumber="3485"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasFastFMAF32())</span></CodeLine>
<Link id="l03486" /><CodeLine lineNumber="3486"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(Dst, LogSrc, Log2Inv, ResultOffset, Flags);</span></CodeLine>
<Link id="l03487" /><CodeLine lineNumber="3487"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03488" /><CodeLine lineNumber="3488"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(Ty, LogSrc, Log2Inv, Flags);</span></CodeLine>
<Link id="l03489" /><CodeLine lineNumber="3489"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFAdd(Dst, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>, ResultOffset, Flags);</span></CodeLine>
<Link id="l03490" /><CodeLine lineNumber="3490"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l03491" /><CodeLine lineNumber="3491"></CodeLine>
<Link id="l03492" /><CodeLine lineNumber="3492"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03493" /><CodeLine lineNumber="3493"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03494" /><CodeLine lineNumber="3494"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03495" /><CodeLine lineNumber="3495"></CodeLine>
<Link id="l03496" /><CodeLine lineNumber="3496"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Log2Operand = Ty == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16)</span></CodeLine>
<Link id="l03497" /><CodeLine lineNumber="3497"><span class="doxyHighlight">                         ? <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFLog2(Ty, Src, Flags)</span></CodeLine>
<Link id="l03498" /><CodeLine lineNumber="3498"><span class="doxyHighlight">                         : <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;log, &#123;Ty&#125;)</span></CodeLine>
<Link id="l03499" /><CodeLine lineNumber="3499"><span class="doxyHighlight">                               .addUse(Src)</span></CodeLine>
<Link id="l03500" /><CodeLine lineNumber="3500"><span class="doxyHighlight">                               .setMIFlags(Flags);</span></CodeLine>
<Link id="l03501" /><CodeLine lineNumber="3501"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Log2BaseInvertedOperand = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, Log2BaseInverted);</span></CodeLine>
<Link id="l03502" /><CodeLine lineNumber="3502"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(Dst, Log2Operand, Log2BaseInvertedOperand, Flags);</span></CodeLine>
<Link id="l03503" /><CodeLine lineNumber="3503"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03504" /><CodeLine lineNumber="3504"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03505" /><CodeLine lineNumber="3505"></CodeLine>
<Link id="l03506" /><CodeLine lineNumber="3506" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3c2bbefdd60b95a56cf8eeab162ea2ae"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3c2bbefdd60b95a56cf8eeab162ea2ae">AMDGPULegalizerInfo::legalizeFExp2</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l03507" /><CodeLine lineNumber="3507"><span class="doxyHighlight">                                        <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03508" /><CodeLine lineNumber="3508"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// v&#95;exp&#95;f32 is good enough for OpenCL, except it doesn&#39;t handle denormals.</span></CodeLine>
<Link id="l03509" /><CodeLine lineNumber="3509"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If we have to handle denormals, scale up the input and adjust the result.</span></CodeLine>
<Link id="l03510" /><CodeLine lineNumber="3510"></CodeLine>
<Link id="l03511" /><CodeLine lineNumber="3511"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l03512" /><CodeLine lineNumber="3512"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l03513" /><CodeLine lineNumber="3513"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l03514" /><CodeLine lineNumber="3514"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;getType(Dst);</span></CodeLine>
<Link id="l03515" /><CodeLine lineNumber="3515"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> F16 = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</span></CodeLine>
<Link id="l03516" /><CodeLine lineNumber="3516"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l03517" /><CodeLine lineNumber="3517"></CodeLine>
<Link id="l03518" /><CodeLine lineNumber="3518"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == F16) &#123;</span></CodeLine>
<Link id="l03519" /><CodeLine lineNumber="3519"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Nothing in half is a denormal when promoted to f32.</span></CodeLine>
<Link id="l03520" /><CodeLine lineNumber="3520"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Ext = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPExt(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, Src, Flags);</span></CodeLine>
<Link id="l03521" /><CodeLine lineNumber="3521"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;exp2, &#123;<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>&#125;)</span></CodeLine>
<Link id="l03522" /><CodeLine lineNumber="3522"><span class="doxyHighlight">                    .addUse(Ext.getReg(0))</span></CodeLine>
<Link id="l03523" /><CodeLine lineNumber="3523"><span class="doxyHighlight">                    .setMIFlags(Flags);</span></CodeLine>
<Link id="l03524" /><CodeLine lineNumber="3524"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPTrunc(Dst, <a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a>, Flags);</span></CodeLine>
<Link id="l03525" /><CodeLine lineNumber="3525"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03526" /><CodeLine lineNumber="3526"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03527" /><CodeLine lineNumber="3527"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03528" /><CodeLine lineNumber="3528"></CodeLine>
<Link id="l03529" /><CodeLine lineNumber="3529"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty == <a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>);</span></CodeLine>
<Link id="l03530" /><CodeLine lineNumber="3530"></CodeLine>
<Link id="l03531" /><CodeLine lineNumber="3531"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="#a092571cd6865fc5f86e2a594265ff717">needsDenormHandlingF32</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF(), Src, Flags)) &#123;</span></CodeLine>
<Link id="l03532" /><CodeLine lineNumber="3532"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;exp2, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Register&gt;</a>&#123;Dst&#125;)</span></CodeLine>
<Link id="l03533" /><CodeLine lineNumber="3533"><span class="doxyHighlight">        .addUse(Src)</span></CodeLine>
<Link id="l03534" /><CodeLine lineNumber="3534"><span class="doxyHighlight">        .setMIFlags(Flags);</span></CodeLine>
<Link id="l03535" /><CodeLine lineNumber="3535"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03536" /><CodeLine lineNumber="3536"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03537" /><CodeLine lineNumber="3537"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03538" /><CodeLine lineNumber="3538"></CodeLine>
<Link id="l03539" /><CodeLine lineNumber="3539"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// bool needs&#95;scaling = x &lt; -0x1.f80000p+6f;</span></CodeLine>
<Link id="l03540" /><CodeLine lineNumber="3540"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// v&#95;exp&#95;f32(x + (s ? 0x1.0p+6f : 0.0f)) &#42; (s ? 0x1.0p-64f : 1.0f);</span></CodeLine>
<Link id="l03541" /><CodeLine lineNumber="3541"></CodeLine>
<Link id="l03542" /><CodeLine lineNumber="3542"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// -nextafter(128.0, -1)</span></CodeLine>
<Link id="l03543" /><CodeLine lineNumber="3543"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> RangeCheckConst = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, -0x1.f80000p+6f);</span></CodeLine>
<Link id="l03544" /><CodeLine lineNumber="3544"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NeedsScaling = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">CmpInst::FCMP&#95;OLT</a>, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), Src,</span></CodeLine>
<Link id="l03545" /><CodeLine lineNumber="3545"><span class="doxyHighlight">                                  RangeCheckConst, Flags);</span></CodeLine>
<Link id="l03546" /><CodeLine lineNumber="3546"></CodeLine>
<Link id="l03547" /><CodeLine lineNumber="3547"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SixtyFour = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, 0x1.0p+6f);</span></CodeLine>
<Link id="l03548" /><CodeLine lineNumber="3548"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Zero = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, 0.0);</span></CodeLine>
<Link id="l03549" /><CodeLine lineNumber="3549"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> AddOffset = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, NeedsScaling, SixtyFour, Zero, Flags);</span></CodeLine>
<Link id="l03550" /><CodeLine lineNumber="3550"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> AddInput = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFAdd(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, Src, AddOffset, Flags);</span></CodeLine>
<Link id="l03551" /><CodeLine lineNumber="3551"></CodeLine>
<Link id="l03552" /><CodeLine lineNumber="3552"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Exp2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;exp2, &#123;Ty&#125;)</span></CodeLine>
<Link id="l03553" /><CodeLine lineNumber="3553"><span class="doxyHighlight">                  .addUse(AddInput.getReg(0))</span></CodeLine>
<Link id="l03554" /><CodeLine lineNumber="3554"><span class="doxyHighlight">                  .setMIFlags(Flags);</span></CodeLine>
<Link id="l03555" /><CodeLine lineNumber="3555"></CodeLine>
<Link id="l03556" /><CodeLine lineNumber="3556"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> TwoExpNeg64 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, 0x1.0p-64f);</span></CodeLine>
<Link id="l03557" /><CodeLine lineNumber="3557"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> One = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, 1.0);</span></CodeLine>
<Link id="l03558" /><CodeLine lineNumber="3558"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ResultScale = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, NeedsScaling, TwoExpNeg64, One, Flags);</span></CodeLine>
<Link id="l03559" /><CodeLine lineNumber="3559"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(Dst, Exp2, ResultScale, Flags);</span></CodeLine>
<Link id="l03560" /><CodeLine lineNumber="3560"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03561" /><CodeLine lineNumber="3561"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03562" /><CodeLine lineNumber="3562"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03563" /><CodeLine lineNumber="3563"></CodeLine>
<Link id="l03564" /><CodeLine lineNumber="3564" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a79967954fb48056dab46d231e4aab954"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a79967954fb48056dab46d231e4aab954">AMDGPULegalizerInfo::legalizeFExpUnsafe</a>(<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/classes/llvm/register">Register</a> Dst,</span></CodeLine>
<Link id="l03565" /><CodeLine lineNumber="3565"><span class="doxyHighlight">                                             <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03566" /><CodeLine lineNumber="3566"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;getType(Dst);</span></CodeLine>
<Link id="l03567" /><CodeLine lineNumber="3567"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l03568" /><CodeLine lineNumber="3568"></CodeLine>
<Link id="l03569" /><CodeLine lineNumber="3569"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty != <a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a> || !<a href="#a092571cd6865fc5f86e2a594265ff717">needsDenormHandlingF32</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF(), <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, Flags)) &#123;</span></CodeLine>
<Link id="l03570" /><CodeLine lineNumber="3570"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Log2E = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, <a href="/docs/api/namespaces/llvm/numbers/#ade6685e01ad5a5f6cb3dc9cfa7a59a4f">numbers::log2e</a>);</span></CodeLine>
<Link id="l03571" /><CodeLine lineNumber="3571"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(Ty, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, Log2E, Flags);</span></CodeLine>
<Link id="l03572" /><CodeLine lineNumber="3572"></CodeLine>
<Link id="l03573" /><CodeLine lineNumber="3573"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>) &#123;</span></CodeLine>
<Link id="l03574" /><CodeLine lineNumber="3574"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;exp2, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Register&gt;</a>&#123;Dst&#125;)</span></CodeLine>
<Link id="l03575" /><CodeLine lineNumber="3575"><span class="doxyHighlight">        .addUse(<a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>.getReg(0))</span></CodeLine>
<Link id="l03576" /><CodeLine lineNumber="3576"><span class="doxyHighlight">        .setMIFlags(Flags);</span></CodeLine>
<Link id="l03577" /><CodeLine lineNumber="3577"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03578" /><CodeLine lineNumber="3578"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFExp2(Dst, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>.getReg(0), Flags);</span></CodeLine>
<Link id="l03579" /><CodeLine lineNumber="3579"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03580" /><CodeLine lineNumber="3580"></CodeLine>
<Link id="l03581" /><CodeLine lineNumber="3581"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03582" /><CodeLine lineNumber="3582"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03583" /><CodeLine lineNumber="3583"></CodeLine>
<Link id="l03584" /><CodeLine lineNumber="3584"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Threshold = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, -0x1.5d58a0p+6f);</span></CodeLine>
<Link id="l03585" /><CodeLine lineNumber="3585"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NeedsScaling =</span></CodeLine>
<Link id="l03586" /><CodeLine lineNumber="3586"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">CmpInst::FCMP&#95;OLT</a>, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, Threshold, Flags);</span></CodeLine>
<Link id="l03587" /><CodeLine lineNumber="3587"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ScaleOffset = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, 0x1.0p+6f);</span></CodeLine>
<Link id="l03588" /><CodeLine lineNumber="3588"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ScaledX = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFAdd(Ty, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, ScaleOffset, Flags);</span></CodeLine>
<Link id="l03589" /><CodeLine lineNumber="3589"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> AdjustedX = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(Ty, NeedsScaling, ScaledX, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, Flags);</span></CodeLine>
<Link id="l03590" /><CodeLine lineNumber="3590"></CodeLine>
<Link id="l03591" /><CodeLine lineNumber="3591"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Log2E = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, <a href="/docs/api/namespaces/llvm/numbers/#ade6685e01ad5a5f6cb3dc9cfa7a59a4f">numbers::log2e</a>);</span></CodeLine>
<Link id="l03592" /><CodeLine lineNumber="3592"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ExpInput = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(Ty, AdjustedX, Log2E, Flags);</span></CodeLine>
<Link id="l03593" /><CodeLine lineNumber="3593"></CodeLine>
<Link id="l03594" /><CodeLine lineNumber="3594"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Exp2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;exp2, &#123;Ty&#125;)</span></CodeLine>
<Link id="l03595" /><CodeLine lineNumber="3595"><span class="doxyHighlight">    .addUse(ExpInput.getReg(0))</span></CodeLine>
<Link id="l03596" /><CodeLine lineNumber="3596"><span class="doxyHighlight">    .setMIFlags(Flags);</span></CodeLine>
<Link id="l03597" /><CodeLine lineNumber="3597"></CodeLine>
<Link id="l03598" /><CodeLine lineNumber="3598"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ResultScaleFactor = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, 0x1.969d48p-93f);</span></CodeLine>
<Link id="l03599" /><CodeLine lineNumber="3599"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> AdjustedResult = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(Ty, Exp2, ResultScaleFactor, Flags);</span></CodeLine>
<Link id="l03600" /><CodeLine lineNumber="3600"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(Dst, NeedsScaling, AdjustedResult, Exp2, Flags);</span></CodeLine>
<Link id="l03601" /><CodeLine lineNumber="3601"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03602" /><CodeLine lineNumber="3602"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03603" /><CodeLine lineNumber="3603"></CodeLine>
<Link id="l03604" /><CodeLine lineNumber="3604" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a5552c2fa1505412508e493149af31543"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a5552c2fa1505412508e493149af31543">AMDGPULegalizerInfo::legalizeFExp</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l03605" /><CodeLine lineNumber="3605"><span class="doxyHighlight">                                       <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03606" /><CodeLine lineNumber="3606"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l03607" /><CodeLine lineNumber="3607"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l03608" /><CodeLine lineNumber="3608"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l03609" /><CodeLine lineNumber="3609"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF();</span></CodeLine>
<Link id="l03610" /><CodeLine lineNumber="3610"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI();</span></CodeLine>
<Link id="l03611" /><CodeLine lineNumber="3611"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst);</span></CodeLine>
<Link id="l03612" /><CodeLine lineNumber="3612"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> F16 = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</span></CodeLine>
<Link id="l03613" /><CodeLine lineNumber="3613"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l03614" /><CodeLine lineNumber="3614"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsExp10 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G&#95;FEXP10;</span></CodeLine>
<Link id="l03615" /><CodeLine lineNumber="3615"></CodeLine>
<Link id="l03616" /><CodeLine lineNumber="3616"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == F16) &#123;</span></CodeLine>
<Link id="l03617" /><CodeLine lineNumber="3617"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// v&#95;exp&#95;f16 (fmul x, log2e)</span></CodeLine>
<Link id="l03618" /><CodeLine lineNumber="3618"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a16c22435b21cfe335c972d971e29b0d7">allowApproxFunc</a>(MF, Flags)) &#123;</span></CodeLine>
<Link id="l03619" /><CodeLine lineNumber="3619"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// TODO: Does this really require fast?</span></CodeLine>
<Link id="l03620" /><CodeLine lineNumber="3620"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a79967954fb48056dab46d231e4aab954">legalizeFExpUnsafe</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Dst, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, Flags);</span></CodeLine>
<Link id="l03621" /><CodeLine lineNumber="3621"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03622" /><CodeLine lineNumber="3622"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03623" /><CodeLine lineNumber="3623"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l03624" /><CodeLine lineNumber="3624"></CodeLine>
<Link id="l03625" /><CodeLine lineNumber="3625"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// exp(f16 x) -&gt;</span></CodeLine>
<Link id="l03626" /><CodeLine lineNumber="3626"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//   fptrunc (v&#95;exp&#95;f32 (fmul (fpext x), log2e))</span></CodeLine>
<Link id="l03627" /><CodeLine lineNumber="3627"></CodeLine>
<Link id="l03628" /><CodeLine lineNumber="3628"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Nothing in half is a denormal when promoted to f32.</span></CodeLine>
<Link id="l03629" /><CodeLine lineNumber="3629"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Ext = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPExt(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, Flags);</span></CodeLine>
<Link id="l03630" /><CodeLine lineNumber="3630"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> Lowered = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>);</span></CodeLine>
<Link id="l03631" /><CodeLine lineNumber="3631"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a79967954fb48056dab46d231e4aab954">legalizeFExpUnsafe</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Lowered, Ext.getReg(0), Flags);</span></CodeLine>
<Link id="l03632" /><CodeLine lineNumber="3632"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPTrunc(Dst, Lowered, Flags);</span></CodeLine>
<Link id="l03633" /><CodeLine lineNumber="3633"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03634" /><CodeLine lineNumber="3634"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03635" /><CodeLine lineNumber="3635"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03636" /><CodeLine lineNumber="3636"></CodeLine>
<Link id="l03637" /><CodeLine lineNumber="3637"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty == <a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>);</span></CodeLine>
<Link id="l03638" /><CodeLine lineNumber="3638"></CodeLine>
<Link id="l03639" /><CodeLine lineNumber="3639"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Interpret allowApproxFunc as ignoring DAZ. This is currently copying</span></CodeLine>
<Link id="l03640" /><CodeLine lineNumber="3640"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// library behavior. Also, is known-not-daz source sufficient?</span></CodeLine>
<Link id="l03641" /><CodeLine lineNumber="3641"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a16c22435b21cfe335c972d971e29b0d7">allowApproxFunc</a>(MF, Flags)) &#123;</span></CodeLine>
<Link id="l03642" /><CodeLine lineNumber="3642"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a79967954fb48056dab46d231e4aab954">legalizeFExpUnsafe</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Dst, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, Flags);</span></CodeLine>
<Link id="l03643" /><CodeLine lineNumber="3643"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03644" /><CodeLine lineNumber="3644"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03645" /><CodeLine lineNumber="3645"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03646" /><CodeLine lineNumber="3646"></CodeLine>
<Link id="l03647" /><CodeLine lineNumber="3647"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    Algorithm:</span></CodeLine>
<Link id="l03648" /><CodeLine lineNumber="3648"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03649" /><CodeLine lineNumber="3649"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    e^x = 2^(x/ln(2)) = 2^(x&#42;(64/ln(2))/64)</span></CodeLine>
<Link id="l03650" /><CodeLine lineNumber="3650"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03651" /><CodeLine lineNumber="3651"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    x&#42;(64/ln(2)) = n + f, |f| &lt;= 0.5, n is integer</span></CodeLine>
<Link id="l03652" /><CodeLine lineNumber="3652"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    n = 64&#42;m + j,   0 &lt;= j &lt; 64</span></CodeLine>
<Link id="l03653" /><CodeLine lineNumber="3653"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03654" /><CodeLine lineNumber="3654"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    e^x = 2^((64&#42;m + j + f)/64)</span></CodeLine>
<Link id="l03655" /><CodeLine lineNumber="3655"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//        = (2^m) &#42; (2^(j/64)) &#42; 2^(f/64)</span></CodeLine>
<Link id="l03656" /><CodeLine lineNumber="3656"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//        = (2^m) &#42; (2^(j/64)) &#42; e^(f&#42;(ln(2)/64))</span></CodeLine>
<Link id="l03657" /><CodeLine lineNumber="3657"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03658" /><CodeLine lineNumber="3658"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    f = x&#42;(64/ln(2)) - n</span></CodeLine>
<Link id="l03659" /><CodeLine lineNumber="3659"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    r = f&#42;(ln(2)/64) = x - n&#42;(ln(2)/64)</span></CodeLine>
<Link id="l03660" /><CodeLine lineNumber="3660"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03661" /><CodeLine lineNumber="3661"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    e^x = (2^m) &#42; (2^(j/64)) &#42; e^r</span></CodeLine>
<Link id="l03662" /><CodeLine lineNumber="3662"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03663" /><CodeLine lineNumber="3663"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    (2^(j/64)) is precomputed</span></CodeLine>
<Link id="l03664" /><CodeLine lineNumber="3664"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03665" /><CodeLine lineNumber="3665"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    e^r = 1 + r + (r^2)/2! + (r^3)/3! + (r^4)/4! + (r^5)/5!</span></CodeLine>
<Link id="l03666" /><CodeLine lineNumber="3666"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    e^r = 1 + q</span></CodeLine>
<Link id="l03667" /><CodeLine lineNumber="3667"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03668" /><CodeLine lineNumber="3668"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    q = r + (r^2)/2! + (r^3)/3! + (r^4)/4! + (r^5)/5!</span></CodeLine>
<Link id="l03669" /><CodeLine lineNumber="3669"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03670" /><CodeLine lineNumber="3670"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    e^x = (2^m) &#42; ( (2^(j/64)) + q&#42;(2^(j/64)) )</span></CodeLine>
<Link id="l03671" /><CodeLine lineNumber="3671"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> FlagsNoContract = Flags &amp; <a href="/docs/api/classes/llvm/machineinstr">~MachineInstr</a>::FmContract;</span></CodeLine>
<Link id="l03672" /><CodeLine lineNumber="3672"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> PH, PL;</span></CodeLine>
<Link id="l03673" /><CodeLine lineNumber="3673"></CodeLine>
<Link id="l03674" /><CodeLine lineNumber="3674"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasFastFMAF32()) &#123;</span></CodeLine>
<Link id="l03675" /><CodeLine lineNumber="3675"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">float</span><span class="doxyHighlight"> c&#95;exp = <a href="/docs/api/namespaces/llvm/numbers/#a8a018975df21ebbd2a96b53b6f918896">numbers::log2ef</a>;</span></CodeLine>
<Link id="l03676" /><CodeLine lineNumber="3676"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">float</span><span class="doxyHighlight"> cc&#95;exp = 0x1.4ae0bep-26f; </span><span class="doxyHighlightComment">// c+cc are 49 bits</span></CodeLine>
<Link id="l03677" /><CodeLine lineNumber="3677"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">float</span><span class="doxyHighlight"> c&#95;exp10 = 0x1.a934f0p+1f;</span></CodeLine>
<Link id="l03678" /><CodeLine lineNumber="3678"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">float</span><span class="doxyHighlight"> cc&#95;exp10 = 0x1.2f346ep-24f;</span></CodeLine>
<Link id="l03679" /><CodeLine lineNumber="3679"></CodeLine>
<Link id="l03680" /><CodeLine lineNumber="3680"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, IsExp10 ? c&#95;exp10 : c&#95;exp);</span></CodeLine>
<Link id="l03681" /><CodeLine lineNumber="3681"><span class="doxyHighlight">    PH = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(Ty, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, Flags).getReg(0);</span></CodeLine>
<Link id="l03682" /><CodeLine lineNumber="3682"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegPH = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFNeg(Ty, PH, Flags);</span></CodeLine>
<Link id="l03683" /><CodeLine lineNumber="3683"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FMA0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(Ty, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, NegPH, Flags);</span></CodeLine>
<Link id="l03684" /><CodeLine lineNumber="3684"></CodeLine>
<Link id="l03685" /><CodeLine lineNumber="3685"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, IsExp10 ? cc&#95;exp10 : cc&#95;exp);</span></CodeLine>
<Link id="l03686" /><CodeLine lineNumber="3686"><span class="doxyHighlight">    PL = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(Ty, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>, FMA0, Flags).getReg(0);</span></CodeLine>
<Link id="l03687" /><CodeLine lineNumber="3687"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03688" /><CodeLine lineNumber="3688"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">float</span><span class="doxyHighlight"> ch&#95;exp = 0x1.714000p+0f;</span></CodeLine>
<Link id="l03689" /><CodeLine lineNumber="3689"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">float</span><span class="doxyHighlight"> cl&#95;exp = 0x1.47652ap-12f; </span><span class="doxyHighlightComment">// ch + cl are 36 bits</span></CodeLine>
<Link id="l03690" /><CodeLine lineNumber="3690"></CodeLine>
<Link id="l03691" /><CodeLine lineNumber="3691"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">float</span><span class="doxyHighlight"> ch&#95;exp10 = 0x1.a92000p+1f;</span></CodeLine>
<Link id="l03692" /><CodeLine lineNumber="3692"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">float</span><span class="doxyHighlight"> cl&#95;exp10 = 0x1.4f0978p-11f;</span></CodeLine>
<Link id="l03693" /><CodeLine lineNumber="3693"></CodeLine>
<Link id="l03694" /><CodeLine lineNumber="3694"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MaskConst = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(Ty, 0xfffff000);</span></CodeLine>
<Link id="l03695" /><CodeLine lineNumber="3695"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> XH = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnd(Ty, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, MaskConst);</span></CodeLine>
<Link id="l03696" /><CodeLine lineNumber="3696"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> XL = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFSub(Ty, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, XH, Flags);</span></CodeLine>
<Link id="l03697" /><CodeLine lineNumber="3697"></CodeLine>
<Link id="l03698" /><CodeLine lineNumber="3698"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/sha256-cpp/#a0ed6c9c714485592a8c317a8ad91c83b">CH</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, IsExp10 ? ch&#95;exp10 : ch&#95;exp);</span></CodeLine>
<Link id="l03699" /><CodeLine lineNumber="3699"><span class="doxyHighlight">    PH = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(Ty, XH, <a href="/docs/api/files/lib/lib/support/sha256-cpp/#a0ed6c9c714485592a8c317a8ad91c83b">CH</a>, Flags).getReg(0);</span></CodeLine>
<Link id="l03700" /><CodeLine lineNumber="3700"></CodeLine>
<Link id="l03701" /><CodeLine lineNumber="3701"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CL = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, IsExp10 ? cl&#95;exp10 : cl&#95;exp);</span></CodeLine>
<Link id="l03702" /><CodeLine lineNumber="3702"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> XLCL = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(Ty, XL, CL, Flags);</span></CodeLine>
<Link id="l03703" /><CodeLine lineNumber="3703"></CodeLine>
<Link id="l03704" /><CodeLine lineNumber="3704"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> Mad0 =</span></CodeLine>
<Link id="l03705" /><CodeLine lineNumber="3705"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuisellowering-cpp/#a25b10fe33f86679525f62e3ebb93c4ae">getMad</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Ty, XL.getReg(0), <a href="/docs/api/files/lib/lib/support/sha256-cpp/#a0ed6c9c714485592a8c317a8ad91c83b">CH</a>.getReg(0), XLCL.getReg(0), Flags);</span></CodeLine>
<Link id="l03706" /><CodeLine lineNumber="3706"><span class="doxyHighlight">    PL = <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpuisellowering-cpp/#a25b10fe33f86679525f62e3ebb93c4ae">getMad</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Ty, XH.getReg(0), CL.getReg(0), Mad0, Flags);</span></CodeLine>
<Link id="l03707" /><CodeLine lineNumber="3707"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03708" /><CodeLine lineNumber="3708"></CodeLine>
<Link id="l03709" /><CodeLine lineNumber="3709"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> E = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsicRoundeven(Ty, PH, Flags);</span></CodeLine>
<Link id="l03710" /><CodeLine lineNumber="3710"></CodeLine>
<Link id="l03711" /><CodeLine lineNumber="3711"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// It is unsafe to contract this fsub into the PH multiply.</span></CodeLine>
<Link id="l03712" /><CodeLine lineNumber="3712"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> PHSubE = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFSub(Ty, PH, E, FlagsNoContract);</span></CodeLine>
<Link id="l03713" /><CodeLine lineNumber="3713"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFAdd(Ty, PHSubE, PL, Flags);</span></CodeLine>
<Link id="l03714" /><CodeLine lineNumber="3714"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> IntE = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPTOSI(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32), E);</span></CodeLine>
<Link id="l03715" /><CodeLine lineNumber="3715"></CodeLine>
<Link id="l03716" /><CodeLine lineNumber="3716"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Exp2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;exp2, &#123;Ty&#125;)</span></CodeLine>
<Link id="l03717" /><CodeLine lineNumber="3717"><span class="doxyHighlight">                  .addUse(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a2e38c85003a042421cde1647632d0b72">A</a>.getReg(0))</span></CodeLine>
<Link id="l03718" /><CodeLine lineNumber="3718"><span class="doxyHighlight">                  .setMIFlags(Flags);</span></CodeLine>
<Link id="l03719" /><CodeLine lineNumber="3719"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> R = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFLdexp(Ty, Exp2, IntE, Flags);</span></CodeLine>
<Link id="l03720" /><CodeLine lineNumber="3720"></CodeLine>
<Link id="l03721" /><CodeLine lineNumber="3721"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> UnderflowCheckConst =</span></CodeLine>
<Link id="l03722" /><CodeLine lineNumber="3722"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, IsExp10 ? -0x1.66d3e8p+5f : -0x1.9d1da0p+6f);</span></CodeLine>
<Link id="l03723" /><CodeLine lineNumber="3723"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Zero = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, 0.0);</span></CodeLine>
<Link id="l03724" /><CodeLine lineNumber="3724"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Underflow =</span></CodeLine>
<Link id="l03725" /><CodeLine lineNumber="3725"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">CmpInst::FCMP&#95;OLT</a>, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, UnderflowCheckConst);</span></CodeLine>
<Link id="l03726" /><CodeLine lineNumber="3726"></CodeLine>
<Link id="l03727" /><CodeLine lineNumber="3727"><span class="doxyHighlight">  R = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(Ty, Underflow, Zero, R);</span></CodeLine>
<Link id="l03728" /><CodeLine lineNumber="3728"></CodeLine>
<Link id="l03729" /><CodeLine lineNumber="3729"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &amp;<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/logicalview/lib/debuginfo/logicalview/core/lvoptions-cpp/#ab4088b7a11f3cbc38ac16a6e9c72494e">Options</a> = MF.<a href="/docs/api/classes/llvm/machinefunction/#af777ff93c9e07a6ff5ffe3226deb3e76">getTarget</a>().<a href="/docs/api/classes/llvm/targetmachine/#ab1fb67187fc37e569cc5171cbebba873">Options</a>;</span></CodeLine>
<Link id="l03730" /><CodeLine lineNumber="3730"></CodeLine>
<Link id="l03731" /><CodeLine lineNumber="3731"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!(Flags &amp; <a href="/docs/api/classes/llvm/machineinstr/#aafacf84de1cb994a92dc045f4aa1d518a45ffd15293a16979f698cec4e2c60ad0">MachineInstr::FmNoInfs</a>) &amp;&amp; !<a href="/docs/api/files/lib/lib/debuginfo/lib/debuginfo/logicalview/lib/debuginfo/logicalview/core/lvoptions-cpp/#ab4088b7a11f3cbc38ac16a6e9c72494e">Options</a>.NoInfsFPMath) &#123;</span></CodeLine>
<Link id="l03732" /><CodeLine lineNumber="3732"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> OverflowCheckConst =</span></CodeLine>
<Link id="l03733" /><CodeLine lineNumber="3733"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, IsExp10 ? 0x1.344136p+5f : 0x1.62e430p+6f);</span></CodeLine>
<Link id="l03734" /><CodeLine lineNumber="3734"></CodeLine>
<Link id="l03735" /><CodeLine lineNumber="3735"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Overflow =</span></CodeLine>
<Link id="l03736" /><CodeLine lineNumber="3736"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">CmpInst::FCMP&#95;OGT</a>, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, OverflowCheckConst);</span></CodeLine>
<Link id="l03737" /><CodeLine lineNumber="3737"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Inf = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, <a href="/docs/api/classes/llvm/apfloat/#ab35b08ed1345493af2c69fbb71e4d0c3">APFloat::getInf</a>(<a href="/docs/api/structs/llvm/apfloatbase/#a0c5765e9acba977f6e462c2917276d8f">APFloat::IEEEsingle</a>()));</span></CodeLine>
<Link id="l03738" /><CodeLine lineNumber="3738"><span class="doxyHighlight">    R = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(Ty, Overflow, Inf, R, Flags);</span></CodeLine>
<Link id="l03739" /><CodeLine lineNumber="3739"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03740" /><CodeLine lineNumber="3740"></CodeLine>
<Link id="l03741" /><CodeLine lineNumber="3741"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildCopy(Dst, R);</span></CodeLine>
<Link id="l03742" /><CodeLine lineNumber="3742"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03743" /><CodeLine lineNumber="3743"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03744" /><CodeLine lineNumber="3744"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03745" /><CodeLine lineNumber="3745"></CodeLine>
<Link id="l03746" /><CodeLine lineNumber="3746" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#abf712aff736a372430ea6ea027fe32e5"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#abf712aff736a372430ea6ea027fe32e5">AMDGPULegalizerInfo::legalizeFPow</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l03747" /><CodeLine lineNumber="3747"><span class="doxyHighlight">                                       <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03748" /><CodeLine lineNumber="3748"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l03749" /><CodeLine lineNumber="3749"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src0 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l03750" /><CodeLine lineNumber="3750"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src1 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l03751" /><CodeLine lineNumber="3751"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l03752" /><CodeLine lineNumber="3752"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;getType(Dst);</span></CodeLine>
<Link id="l03753" /><CodeLine lineNumber="3753"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> F16 = <a href="/docs/api/classes/llvm/llt/#abb1f260fc4da86ce2e93fa8628aa0b1d">LLT::float16</a>();</span></CodeLine>
<Link id="l03754" /><CodeLine lineNumber="3754"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a> = <a href="/docs/api/classes/llvm/llt/#aee6abb440f4fe52097595d934283f0a1">LLT::float32</a>();</span></CodeLine>
<Link id="l03755" /><CodeLine lineNumber="3755"></CodeLine>
<Link id="l03756" /><CodeLine lineNumber="3756"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>) &#123;</span></CodeLine>
<Link id="l03757" /><CodeLine lineNumber="3757"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Log = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFLog2(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, Src0, Flags);</span></CodeLine>
<Link id="l03758" /><CodeLine lineNumber="3758"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;fmul&#95;legacy, &#123;<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>&#125;)</span></CodeLine>
<Link id="l03759" /><CodeLine lineNumber="3759"><span class="doxyHighlight">                   .addUse(Log.getReg(0))</span></CodeLine>
<Link id="l03760" /><CodeLine lineNumber="3760"><span class="doxyHighlight">                   .addUse(Src1)</span></CodeLine>
<Link id="l03761" /><CodeLine lineNumber="3761"><span class="doxyHighlight">                   .setMIFlags(Flags);</span></CodeLine>
<Link id="l03762" /><CodeLine lineNumber="3762"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFExp2(Dst, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>, Flags);</span></CodeLine>
<Link id="l03763" /><CodeLine lineNumber="3763"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == F16) &#123;</span></CodeLine>
<Link id="l03764" /><CodeLine lineNumber="3764"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// There&#39;s no f16 fmul&#95;legacy, so we need to convert for it.</span></CodeLine>
<Link id="l03765" /><CodeLine lineNumber="3765"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Log = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFLog2(F16, Src0, Flags);</span></CodeLine>
<Link id="l03766" /><CodeLine lineNumber="3766"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Ext0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPExt(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, Log, Flags);</span></CodeLine>
<Link id="l03767" /><CodeLine lineNumber="3767"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Ext1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPExt(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, Src1, Flags);</span></CodeLine>
<Link id="l03768" /><CodeLine lineNumber="3768"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;fmul&#95;legacy, &#123;<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>&#125;)</span></CodeLine>
<Link id="l03769" /><CodeLine lineNumber="3769"><span class="doxyHighlight">                   .addUse(Ext0.getReg(0))</span></CodeLine>
<Link id="l03770" /><CodeLine lineNumber="3770"><span class="doxyHighlight">                   .addUse(Ext1.getReg(0))</span></CodeLine>
<Link id="l03771" /><CodeLine lineNumber="3771"><span class="doxyHighlight">                   .setMIFlags(Flags);</span></CodeLine>
<Link id="l03772" /><CodeLine lineNumber="3772"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFExp2(Dst, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPTrunc(F16, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>), Flags);</span></CodeLine>
<Link id="l03773" /><CodeLine lineNumber="3773"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l03774" /><CodeLine lineNumber="3774"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03775" /><CodeLine lineNumber="3775"></CodeLine>
<Link id="l03776" /><CodeLine lineNumber="3776"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03777" /><CodeLine lineNumber="3777"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03778" /><CodeLine lineNumber="3778"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03779" /><CodeLine lineNumber="3779"></CodeLine>
<Link id="l03780" /><CodeLine lineNumber="3780"><span class="doxyHighlightComment">// Find a source register, ignoring any possible source modifiers.</span></CodeLine>
<Link id="l03781" /><CodeLine lineNumber="3781" lineLink="#a716801caf6a489a6af735be940932003"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/register">Register</a> <a href="#a716801caf6a489a6af735be940932003">stripAnySourceMods</a>(<a href="/docs/api/classes/llvm/register">Register</a> OrigSrc, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>) &#123;</span></CodeLine>
<Link id="l03782" /><CodeLine lineNumber="3782"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> ModSrc = OrigSrc;</span></CodeLine>
<Link id="l03783" /><CodeLine lineNumber="3783"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;SrcFNeg = <a href="/docs/api/namespaces/llvm/#a0edf31d256ecb3ac003bf2d81a576c9e">getOpcodeDef</a>(AMDGPU::G&#95;FNEG, ModSrc, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>)) &#123;</span></CodeLine>
<Link id="l03784" /><CodeLine lineNumber="3784"><span class="doxyHighlight">    ModSrc = SrcFNeg-&gt;getOperand(1).getReg();</span></CodeLine>
<Link id="l03785" /><CodeLine lineNumber="3785"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;SrcFAbs = <a href="/docs/api/namespaces/llvm/#a0edf31d256ecb3ac003bf2d81a576c9e">getOpcodeDef</a>(AMDGPU::G&#95;FABS, ModSrc, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>))</span></CodeLine>
<Link id="l03786" /><CodeLine lineNumber="3786"><span class="doxyHighlight">      ModSrc = SrcFAbs-&gt;getOperand(1).getReg();</span></CodeLine>
<Link id="l03787" /><CodeLine lineNumber="3787"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;SrcFAbs = <a href="/docs/api/namespaces/llvm/#a0edf31d256ecb3ac003bf2d81a576c9e">getOpcodeDef</a>(AMDGPU::G&#95;FABS, ModSrc, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>))</span></CodeLine>
<Link id="l03788" /><CodeLine lineNumber="3788"><span class="doxyHighlight">    ModSrc = SrcFAbs-&gt;getOperand(1).getReg();</span></CodeLine>
<Link id="l03789" /><CodeLine lineNumber="3789"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ModSrc;</span></CodeLine>
<Link id="l03790" /><CodeLine lineNumber="3790"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03791" /><CodeLine lineNumber="3791"></CodeLine>
<Link id="l03792" /><CodeLine lineNumber="3792" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a44186e632d4bab1d35012ed738a23870"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a44186e632d4bab1d35012ed738a23870">AMDGPULegalizerInfo::legalizeFFloor</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l03793" /><CodeLine lineNumber="3793"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l03794" /><CodeLine lineNumber="3794"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03795" /><CodeLine lineNumber="3795"></CodeLine>
<Link id="l03796" /><CodeLine lineNumber="3796"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</span></CodeLine>
<Link id="l03797" /><CodeLine lineNumber="3797"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a563bbae35885ba289017e47ec57235fa">F64</a> = <a href="/docs/api/classes/llvm/llt/#a0631408a6598e34659cc5495c3ec090b">LLT::float64</a>();</span></CodeLine>
<Link id="l03798" /><CodeLine lineNumber="3798"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l03799" /><CodeLine lineNumber="3799"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> OrigSrc = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l03800" /><CodeLine lineNumber="3800"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l03801" /><CodeLine lineNumber="3801"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ST.hasFractBug() &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst) == <a href="#a563bbae35885ba289017e47ec57235fa">F64</a> &amp;&amp;</span></CodeLine>
<Link id="l03802" /><CodeLine lineNumber="3802"><span class="doxyHighlight">         </span><span class="doxyHighlightStringLiteral">&quot;this should not have been custom lowered&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l03803" /><CodeLine lineNumber="3803"></CodeLine>
<Link id="l03804" /><CodeLine lineNumber="3804"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// V&#95;FRACT is buggy on SI, so the F32 version is never used and (x-floor(x))</span></CodeLine>
<Link id="l03805" /><CodeLine lineNumber="3805"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// is used instead. However, SI doesn&#39;t have V&#95;FLOOR&#95;F64, so the most</span></CodeLine>
<Link id="l03806" /><CodeLine lineNumber="3806"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// efficient way to implement it is using V&#95;FRACT&#95;F64. The workaround for the</span></CodeLine>
<Link id="l03807" /><CodeLine lineNumber="3807"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// V&#95;FRACT bug is:</span></CodeLine>
<Link id="l03808" /><CodeLine lineNumber="3808"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//    fract(x) = isnan(x) ? x : min(V&#95;FRACT(x), 0.99999999999999999)</span></CodeLine>
<Link id="l03809" /><CodeLine lineNumber="3809"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03810" /><CodeLine lineNumber="3810"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Convert floor(x) to (x - fract(x))</span></CodeLine>
<Link id="l03811" /><CodeLine lineNumber="3811"></CodeLine>
<Link id="l03812" /><CodeLine lineNumber="3812"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fract = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;fract, &#123;<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>&#125;)</span></CodeLine>
<Link id="l03813" /><CodeLine lineNumber="3813"><span class="doxyHighlight">                   .addUse(OrigSrc)</span></CodeLine>
<Link id="l03814" /><CodeLine lineNumber="3814"><span class="doxyHighlight">                   .setMIFlags(Flags);</span></CodeLine>
<Link id="l03815" /><CodeLine lineNumber="3815"></CodeLine>
<Link id="l03816" /><CodeLine lineNumber="3816"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Give source modifier matching some assistance before obscuring a foldable</span></CodeLine>
<Link id="l03817" /><CodeLine lineNumber="3817"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// pattern.</span></CodeLine>
<Link id="l03818" /><CodeLine lineNumber="3818"></CodeLine>
<Link id="l03819" /><CodeLine lineNumber="3819"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: We can avoid the neg on the fract? The input sign to fract</span></CodeLine>
<Link id="l03820" /><CodeLine lineNumber="3820"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// shouldn&#39;t matter?</span></CodeLine>
<Link id="l03821" /><CodeLine lineNumber="3821"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> ModSrc = <a href="#a716801caf6a489a6af735be940932003">stripAnySourceMods</a>(OrigSrc, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</span></CodeLine>
<Link id="l03822" /><CodeLine lineNumber="3822"></CodeLine>
<Link id="l03823" /><CodeLine lineNumber="3823"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Const =</span></CodeLine>
<Link id="l03824" /><CodeLine lineNumber="3824"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, <a href="/docs/api/namespaces/llvm/#aab3863f16cb0767af49f0dd63bc5aa90">llvm::bit&#95;cast&lt;double&gt;</a>(0x3fefffffffffffff));</span></CodeLine>
<Link id="l03825" /><CodeLine lineNumber="3825"></CodeLine>
<Link id="l03826" /><CodeLine lineNumber="3826"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Min = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>);</span></CodeLine>
<Link id="l03827" /><CodeLine lineNumber="3827"></CodeLine>
<Link id="l03828" /><CodeLine lineNumber="3828"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We don&#39;t need to concern ourselves with the snan handling difference, so</span></CodeLine>
<Link id="l03829" /><CodeLine lineNumber="3829"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// use the one which will directly select.</span></CodeLine>
<Link id="l03830" /><CodeLine lineNumber="3830"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a> &#42;MFI = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF().getInfo&lt;<a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a>&gt;();</span></CodeLine>
<Link id="l03831" /><CodeLine lineNumber="3831"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MFI-&gt;<a href="/docs/api/classes/llvm/simachinefunctioninfo/#a6012de9a1299d35e205f652abc3baf77">getMode</a>().<a href="/docs/api/structs/llvm/simoderegisterdefaults/#a7238526aeceaef9a0db1ab0c21a0cf0e">IEEE</a>)</span></CodeLine>
<Link id="l03832" /><CodeLine lineNumber="3832"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMinNumIEEE(Min, Fract, Const, Flags);</span></CodeLine>
<Link id="l03833" /><CodeLine lineNumber="3833"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l03834" /><CodeLine lineNumber="3834"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMinNum(Min, Fract, Const, Flags);</span></CodeLine>
<Link id="l03835" /><CodeLine lineNumber="3835"></CodeLine>
<Link id="l03836" /><CodeLine lineNumber="3836"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> CorrectedFract = Min;</span></CodeLine>
<Link id="l03837" /><CodeLine lineNumber="3837"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlag(<a href="/docs/api/classes/llvm/machineinstr/#aafacf84de1cb994a92dc045f4aa1d518aba11aa58176a446ba70d4f0ad0e04418">MachineInstr::FmNoNans</a>)) &#123;</span></CodeLine>
<Link id="l03838" /><CodeLine lineNumber="3838"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> IsNan = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">CmpInst::FCMP&#95;ORD</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, ModSrc, ModSrc, Flags);</span></CodeLine>
<Link id="l03839" /><CodeLine lineNumber="3839"><span class="doxyHighlight">    CorrectedFract = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, IsNan, ModSrc, Min, Flags).getReg(0);</span></CodeLine>
<Link id="l03840" /><CodeLine lineNumber="3840"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03841" /><CodeLine lineNumber="3841"></CodeLine>
<Link id="l03842" /><CodeLine lineNumber="3842"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegFract = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFNeg(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, CorrectedFract, Flags);</span></CodeLine>
<Link id="l03843" /><CodeLine lineNumber="3843"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFAdd(Dst, OrigSrc, NegFract, Flags);</span></CodeLine>
<Link id="l03844" /><CodeLine lineNumber="3844"></CodeLine>
<Link id="l03845" /><CodeLine lineNumber="3845"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03846" /><CodeLine lineNumber="3846"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03847" /><CodeLine lineNumber="3847"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03848" /><CodeLine lineNumber="3848"></CodeLine>
<Link id="l03849" /><CodeLine lineNumber="3849"><span class="doxyHighlightComment">// Turn an illegal packed v2s16 build vector into bit operations.</span></CodeLine>
<Link id="l03850" /><CodeLine lineNumber="3850"><span class="doxyHighlightComment">// TODO: This should probably be a bitcast action in LegalizerHelper.</span></CodeLine>
<Link id="l03851" /><CodeLine lineNumber="3851" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a4117d1ecf36af9158c825fb376c4082e"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a4117d1ecf36af9158c825fb376c4082e">AMDGPULegalizerInfo::legalizeBuildVector</a>(</span></CodeLine>
<Link id="l03852" /><CodeLine lineNumber="3852"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03853" /><CodeLine lineNumber="3853"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l03854" /><CodeLine lineNumber="3854"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l03855" /><CodeLine lineNumber="3855"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</span></CodeLine>
<Link id="l03856" /><CodeLine lineNumber="3856"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst) == <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2, 16));</span></CodeLine>
<Link id="l03857" /><CodeLine lineNumber="3857"></CodeLine>
<Link id="l03858" /><CodeLine lineNumber="3858"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src0 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l03859" /><CodeLine lineNumber="3859"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src1 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l03860" /><CodeLine lineNumber="3860"></CodeLine>
<Link id="l03861" /><CodeLine lineNumber="3861"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::G&#95;BUILD&#95;VECTOR&#95;TRUNC) &#123;</span></CodeLine>
<Link id="l03862" /><CodeLine lineNumber="3862"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Src0) == <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l03863" /><CodeLine lineNumber="3863"><span class="doxyHighlight">    Src0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildTrunc(<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg()).getReg(0);</span></CodeLine>
<Link id="l03864" /><CodeLine lineNumber="3864"><span class="doxyHighlight">    Src1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildTrunc(<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg()).getReg(0);</span></CodeLine>
<Link id="l03865" /><CodeLine lineNumber="3865"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03866" /><CodeLine lineNumber="3866"></CodeLine>
<Link id="l03867" /><CodeLine lineNumber="3867"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/r600clausemergepass-cpp/#aba99928790de45fa7aa12b47fbd828ff">Merge</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, &#123;Src0, Src1&#125;);</span></CodeLine>
<Link id="l03868" /><CodeLine lineNumber="3868"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBitcast(Dst, <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/r600clausemergepass-cpp/#aba99928790de45fa7aa12b47fbd828ff">Merge</a>);</span></CodeLine>
<Link id="l03869" /><CodeLine lineNumber="3869"></CodeLine>
<Link id="l03870" /><CodeLine lineNumber="3870"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l03871" /><CodeLine lineNumber="3871"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03872" /><CodeLine lineNumber="3872"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l03873" /><CodeLine lineNumber="3873"></CodeLine>
<Link id="l03874" /><CodeLine lineNumber="3874"><span class="doxyHighlightComment">// Build a big integer multiply or multiply-add using MAD&#95;64&#95;32 instructions.</span></CodeLine>
<Link id="l03875" /><CodeLine lineNumber="3875"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03876" /><CodeLine lineNumber="3876"><span class="doxyHighlightComment">// Source and accumulation registers must all be 32-bits.</span></CodeLine>
<Link id="l03877" /><CodeLine lineNumber="3877"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03878" /><CodeLine lineNumber="3878"><span class="doxyHighlightComment">// TODO: When the multiply is uniform, we should produce a code sequence</span></CodeLine>
<Link id="l03879" /><CodeLine lineNumber="3879"><span class="doxyHighlightComment">// that is better suited to instruction selection on the SALU. Instead of</span></CodeLine>
<Link id="l03880" /><CodeLine lineNumber="3880"><span class="doxyHighlightComment">// the outer loop going over parts of the result, the outer loop should go</span></CodeLine>
<Link id="l03881" /><CodeLine lineNumber="3881"><span class="doxyHighlightComment">// over parts of one of the factors. This should result in instruction</span></CodeLine>
<Link id="l03882" /><CodeLine lineNumber="3882"><span class="doxyHighlightComment">// selection that makes full use of S&#95;ADDC&#95;U32 instructions.</span></CodeLine>
<Link id="l03883" /><CodeLine lineNumber="3883" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a01959fee9db67c3a625348ae39489c5e"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a01959fee9db67c3a625348ae39489c5e">AMDGPULegalizerInfo::buildMultiply</a>(<a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> &amp;Helper,</span></CodeLine>
<Link id="l03884" /><CodeLine lineNumber="3884"><span class="doxyHighlight">                                        <a href="/docs/api/classes/llvm/mutablearrayref">MutableArrayRef&lt;Register&gt;</a> Accum,</span></CodeLine>
<Link id="l03885" /><CodeLine lineNumber="3885"><span class="doxyHighlight">                                        <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Register&gt;</a> Src0,</span></CodeLine>
<Link id="l03886" /><CodeLine lineNumber="3886"><span class="doxyHighlight">                                        <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Register&gt;</a> Src1,</span></CodeLine>
<Link id="l03887" /><CodeLine lineNumber="3887"><span class="doxyHighlight">                                        </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UsePartialMad64&#95;32,</span></CodeLine>
<Link id="l03888" /><CodeLine lineNumber="3888"><span class="doxyHighlight">                                        </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> SeparateOddAlignedProducts)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l03889" /><CodeLine lineNumber="3889"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Use (possibly empty) vectors of S1 registers to represent the set of</span></CodeLine>
<Link id="l03890" /><CodeLine lineNumber="3890"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// carries from one pair of positions to the next.</span></CodeLine>
<Link id="l03891" /><CodeLine lineNumber="3891"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">using </span><span class="doxyHighlight">Carry = <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Register, 2&gt;</a>;</span></CodeLine>
<Link id="l03892" /><CodeLine lineNumber="3892"></CodeLine>
<Link id="l03893" /><CodeLine lineNumber="3893"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</span></CodeLine>
<Link id="l03894" /><CodeLine lineNumber="3894"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/giselknownbits">GISelKnownBits</a> &amp;KB = &#42;Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#ad0e092c7b577c4a6c2607581405d6a23">getKnownBits</a>();</span></CodeLine>
<Link id="l03895" /><CodeLine lineNumber="3895"></CodeLine>
<Link id="l03896" /><CodeLine lineNumber="3896"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</span></CodeLine>
<Link id="l03897" /><CodeLine lineNumber="3897"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l03898" /><CodeLine lineNumber="3898"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</span></CodeLine>
<Link id="l03899" /><CodeLine lineNumber="3899"></CodeLine>
<Link id="l03900" /><CodeLine lineNumber="3900"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Zero32;</span></CodeLine>
<Link id="l03901" /><CodeLine lineNumber="3901"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Zero64;</span></CodeLine>
<Link id="l03902" /><CodeLine lineNumber="3902"></CodeLine>
<Link id="l03903" /><CodeLine lineNumber="3903"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> getZero32 = &#91;&amp;&#93;() -&gt; <a href="/docs/api/classes/llvm/register">Register</a> &#123;</span></CodeLine>
<Link id="l03904" /><CodeLine lineNumber="3904"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Zero32)</span></CodeLine>
<Link id="l03905" /><CodeLine lineNumber="3905"><span class="doxyHighlight">      Zero32 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 0).getReg(0);</span></CodeLine>
<Link id="l03906" /><CodeLine lineNumber="3906"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Zero32;</span></CodeLine>
<Link id="l03907" /><CodeLine lineNumber="3907"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l03908" /><CodeLine lineNumber="3908"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> getZero64 = &#91;&amp;&#93;() -&gt; <a href="/docs/api/classes/llvm/register">Register</a> &#123;</span></CodeLine>
<Link id="l03909" /><CodeLine lineNumber="3909"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Zero64)</span></CodeLine>
<Link id="l03910" /><CodeLine lineNumber="3910"><span class="doxyHighlight">      Zero64 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, 0).getReg(0);</span></CodeLine>
<Link id="l03911" /><CodeLine lineNumber="3911"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Zero64;</span></CodeLine>
<Link id="l03912" /><CodeLine lineNumber="3912"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l03913" /><CodeLine lineNumber="3913"></CodeLine>
<Link id="l03914" /><CodeLine lineNumber="3914"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;bool, 2&gt;</a> Src0KnownZeros, Src1KnownZeros;</span></CodeLine>
<Link id="l03915" /><CodeLine lineNumber="3915"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 0; i &lt; Src0.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(); ++i) &#123;</span></CodeLine>
<Link id="l03916" /><CodeLine lineNumber="3916"><span class="doxyHighlight">    Src0KnownZeros.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(KB.<a href="/docs/api/classes/llvm/giselknownbits/#ab3bd16b0bda0d7c3290bf9ba7d095400">getKnownBits</a>(Src0&#91;i&#93;).<a href="/docs/api/structs/llvm/knownbits/#a1620c017d995c7ccbcb59e0212618017">isZero</a>());</span></CodeLine>
<Link id="l03917" /><CodeLine lineNumber="3917"><span class="doxyHighlight">    Src1KnownZeros.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(KB.<a href="/docs/api/classes/llvm/giselknownbits/#ab3bd16b0bda0d7c3290bf9ba7d095400">getKnownBits</a>(Src1&#91;i&#93;).<a href="/docs/api/structs/llvm/knownbits/#a1620c017d995c7ccbcb59e0212618017">isZero</a>());</span></CodeLine>
<Link id="l03918" /><CodeLine lineNumber="3918"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l03919" /><CodeLine lineNumber="3919"></CodeLine>
<Link id="l03920" /><CodeLine lineNumber="3920"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Merge the given carries into the 32-bit LocalAccum, which is modified</span></CodeLine>
<Link id="l03921" /><CodeLine lineNumber="3921"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// in-place.</span></CodeLine>
<Link id="l03922" /><CodeLine lineNumber="3922"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03923" /><CodeLine lineNumber="3923"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Returns the carry-out, which is a single S1 register or null.</span></CodeLine>
<Link id="l03924" /><CodeLine lineNumber="3924"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> mergeCarry =</span></CodeLine>
<Link id="l03925" /><CodeLine lineNumber="3925"><span class="doxyHighlight">      &#91;&amp;&#93;(<a href="/docs/api/classes/llvm/register">Register</a> &amp;LocalAccum, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> Carry &amp;CarryIn) -&gt; <a href="/docs/api/classes/llvm/register">Register</a> &#123;</span></CodeLine>
<Link id="l03926" /><CodeLine lineNumber="3926"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CarryIn.empty())</span></CodeLine>
<Link id="l03927" /><CodeLine lineNumber="3927"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a>();</span></CodeLine>
<Link id="l03928" /><CodeLine lineNumber="3928"></CodeLine>
<Link id="l03929" /><CodeLine lineNumber="3929"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> HaveCarryOut = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03930" /><CodeLine lineNumber="3930"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/register">Register</a> CarryAccum;</span></CodeLine>
<Link id="l03931" /><CodeLine lineNumber="3931"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CarryIn.size() == 1) &#123;</span></CodeLine>
<Link id="l03932" /><CodeLine lineNumber="3932"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!LocalAccum) &#123;</span></CodeLine>
<Link id="l03933" /><CodeLine lineNumber="3933"><span class="doxyHighlight">            LocalAccum = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildZExt(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, CarryIn&#91;0&#93;).getReg(0);</span></CodeLine>
<Link id="l03934" /><CodeLine lineNumber="3934"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a>();</span></CodeLine>
<Link id="l03935" /><CodeLine lineNumber="3935"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l03936" /><CodeLine lineNumber="3936"></CodeLine>
<Link id="l03937" /><CodeLine lineNumber="3937"><span class="doxyHighlight">          CarryAccum = getZero32();</span></CodeLine>
<Link id="l03938" /><CodeLine lineNumber="3938"><span class="doxyHighlight">        &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03939" /><CodeLine lineNumber="3939"><span class="doxyHighlight">          CarryAccum = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildZExt(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, CarryIn&#91;0&#93;).getReg(0);</span></CodeLine>
<Link id="l03940" /><CodeLine lineNumber="3940"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 1; i + 1 &lt; CarryIn.size(); ++i) &#123;</span></CodeLine>
<Link id="l03941" /><CodeLine lineNumber="3941"><span class="doxyHighlight">            CarryAccum =</span></CodeLine>
<Link id="l03942" /><CodeLine lineNumber="3942"><span class="doxyHighlight">                <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUAdde(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, CarryAccum, getZero32(), CarryIn&#91;i&#93;)</span></CodeLine>
<Link id="l03943" /><CodeLine lineNumber="3943"><span class="doxyHighlight">                    .getReg(0);</span></CodeLine>
<Link id="l03944" /><CodeLine lineNumber="3944"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l03945" /><CodeLine lineNumber="3945"></CodeLine>
<Link id="l03946" /><CodeLine lineNumber="3946"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!LocalAccum) &#123;</span></CodeLine>
<Link id="l03947" /><CodeLine lineNumber="3947"><span class="doxyHighlight">            LocalAccum = getZero32();</span></CodeLine>
<Link id="l03948" /><CodeLine lineNumber="3948"><span class="doxyHighlight">            HaveCarryOut = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03949" /><CodeLine lineNumber="3949"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l03950" /><CodeLine lineNumber="3950"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l03951" /><CodeLine lineNumber="3951"></CodeLine>
<Link id="l03952" /><CodeLine lineNumber="3952"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a> =</span></CodeLine>
<Link id="l03953" /><CodeLine lineNumber="3953"><span class="doxyHighlight">            <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUAdde(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, CarryAccum, LocalAccum, CarryIn.back());</span></CodeLine>
<Link id="l03954" /><CodeLine lineNumber="3954"><span class="doxyHighlight">        LocalAccum = <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a>.getReg(0);</span></CodeLine>
<Link id="l03955" /><CodeLine lineNumber="3955"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> HaveCarryOut ? <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830eaec211f7c20af43e742bf2570c3cb84f9">Add</a>.getReg(1) : <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a>();</span></CodeLine>
<Link id="l03956" /><CodeLine lineNumber="3956"><span class="doxyHighlight">      &#125;;</span></CodeLine>
<Link id="l03957" /><CodeLine lineNumber="3957"></CodeLine>
<Link id="l03958" /><CodeLine lineNumber="3958"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Build a multiply-add chain to compute</span></CodeLine>
<Link id="l03959" /><CodeLine lineNumber="3959"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03960" /><CodeLine lineNumber="3960"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   LocalAccum + (partial products at DstIndex)</span></CodeLine>
<Link id="l03961" /><CodeLine lineNumber="3961"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//       + (opportunistic subset of CarryIn)</span></CodeLine>
<Link id="l03962" /><CodeLine lineNumber="3962"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03963" /><CodeLine lineNumber="3963"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// LocalAccum is an array of one or two 32-bit registers that are updated</span></CodeLine>
<Link id="l03964" /><CodeLine lineNumber="3964"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// in-place. The incoming registers may be null.</span></CodeLine>
<Link id="l03965" /><CodeLine lineNumber="3965"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l03966" /><CodeLine lineNumber="3966"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// In some edge cases, carry-ins can be consumed &quot;for free&quot;. In that case,</span></CodeLine>
<Link id="l03967" /><CodeLine lineNumber="3967"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the consumed carry bits are removed from CarryIn in-place.</span></CodeLine>
<Link id="l03968" /><CodeLine lineNumber="3968"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> buildMadChain =</span></CodeLine>
<Link id="l03969" /><CodeLine lineNumber="3969"><span class="doxyHighlight">      &#91;&amp;&#93;(<a href="/docs/api/classes/llvm/mutablearrayref">MutableArrayRef&lt;Register&gt;</a> LocalAccum, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> DstIndex, Carry &amp;CarryIn)</span></CodeLine>
<Link id="l03970" /><CodeLine lineNumber="3970"><span class="doxyHighlight">          -&gt; Carry &#123;</span></CodeLine>
<Link id="l03971" /><CodeLine lineNumber="3971"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((DstIndex + 1 &lt; Accum.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() &amp;&amp; LocalAccum.size() == 2) ||</span></CodeLine>
<Link id="l03972" /><CodeLine lineNumber="3972"><span class="doxyHighlight">               (DstIndex + 1 &gt;= Accum.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() &amp;&amp; LocalAccum.size() == 1));</span></CodeLine>
<Link id="l03973" /><CodeLine lineNumber="3973"></CodeLine>
<Link id="l03974" /><CodeLine lineNumber="3974"><span class="doxyHighlight">        Carry CarryOut;</span></CodeLine>
<Link id="l03975" /><CodeLine lineNumber="3975"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> j0 = 0;</span></CodeLine>
<Link id="l03976" /><CodeLine lineNumber="3976"></CodeLine>
<Link id="l03977" /><CodeLine lineNumber="3977"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Use plain 32-bit multiplication for the most significant part of the</span></CodeLine>
<Link id="l03978" /><CodeLine lineNumber="3978"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// result by default.</span></CodeLine>
<Link id="l03979" /><CodeLine lineNumber="3979"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LocalAccum.size() == 1 &amp;&amp;</span></CodeLine>
<Link id="l03980" /><CodeLine lineNumber="3980"><span class="doxyHighlight">            (!UsePartialMad64&#95;32 || !CarryIn.empty())) &#123;</span></CodeLine>
<Link id="l03981" /><CodeLine lineNumber="3981"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">do</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03982" /><CodeLine lineNumber="3982"><span class="doxyHighlight">            </span><span class="doxyHighlightComment">// Skip multiplication if one of the operands is 0</span></CodeLine>
<Link id="l03983" /><CodeLine lineNumber="3983"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> j1 = DstIndex - j0;</span></CodeLine>
<Link id="l03984" /><CodeLine lineNumber="3984"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Src0KnownZeros&#91;j0&#93; || Src1KnownZeros&#91;j1&#93;) &#123;</span></CodeLine>
<Link id="l03985" /><CodeLine lineNumber="3985"><span class="doxyHighlight">              ++j0;</span></CodeLine>
<Link id="l03986" /><CodeLine lineNumber="3986"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l03987" /><CodeLine lineNumber="3987"><span class="doxyHighlight">            &#125;</span></CodeLine>
<Link id="l03988" /><CodeLine lineNumber="3988"><span class="doxyHighlight">            </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMul(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Src0&#91;j0&#93;, Src1&#91;j1&#93;);</span></CodeLine>
<Link id="l03989" /><CodeLine lineNumber="3989"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!LocalAccum&#91;0&#93; || KB.<a href="/docs/api/classes/llvm/giselknownbits/#ab3bd16b0bda0d7c3290bf9ba7d095400">getKnownBits</a>(LocalAccum&#91;0&#93;).<a href="/docs/api/structs/llvm/knownbits/#a1620c017d995c7ccbcb59e0212618017">isZero</a>()) &#123;</span></CodeLine>
<Link id="l03990" /><CodeLine lineNumber="3990"><span class="doxyHighlight">              LocalAccum&#91;0&#93; = <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>.getReg(0);</span></CodeLine>
<Link id="l03991" /><CodeLine lineNumber="3991"><span class="doxyHighlight">            &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03992" /><CodeLine lineNumber="3992"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CarryIn.empty()) &#123;</span></CodeLine>
<Link id="l03993" /><CodeLine lineNumber="3993"><span class="doxyHighlight">                LocalAccum&#91;0&#93; = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAdd(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LocalAccum&#91;0&#93;, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>).getReg(0);</span></CodeLine>
<Link id="l03994" /><CodeLine lineNumber="3994"><span class="doxyHighlight">              &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l03995" /><CodeLine lineNumber="3995"><span class="doxyHighlight">                LocalAccum&#91;0&#93; =</span></CodeLine>
<Link id="l03996" /><CodeLine lineNumber="3996"><span class="doxyHighlight">                    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUAdde(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, LocalAccum&#91;0&#93;, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>, CarryIn.back())</span></CodeLine>
<Link id="l03997" /><CodeLine lineNumber="3997"><span class="doxyHighlight">                        .getReg(0);</span></CodeLine>
<Link id="l03998" /><CodeLine lineNumber="3998"><span class="doxyHighlight">                CarryIn.pop&#95;back();</span></CodeLine>
<Link id="l03999" /><CodeLine lineNumber="3999"><span class="doxyHighlight">              &#125;</span></CodeLine>
<Link id="l04000" /><CodeLine lineNumber="4000"><span class="doxyHighlight">            &#125;</span></CodeLine>
<Link id="l04001" /><CodeLine lineNumber="4001"><span class="doxyHighlight">            ++j0;</span></CodeLine>
<Link id="l04002" /><CodeLine lineNumber="4002"><span class="doxyHighlight">          &#125; </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (j0 &lt;= DstIndex &amp;&amp; (!UsePartialMad64&#95;32 || !CarryIn.empty()));</span></CodeLine>
<Link id="l04003" /><CodeLine lineNumber="4003"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l04004" /><CodeLine lineNumber="4004"></CodeLine>
<Link id="l04005" /><CodeLine lineNumber="4005"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Build full 64-bit multiplies.</span></CodeLine>
<Link id="l04006" /><CodeLine lineNumber="4006"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (j0 &lt;= DstIndex) &#123;</span></CodeLine>
<Link id="l04007" /><CodeLine lineNumber="4007"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> HaveSmallAccum = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04008" /><CodeLine lineNumber="4008"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/register">Register</a> Tmp;</span></CodeLine>
<Link id="l04009" /><CodeLine lineNumber="4009"></CodeLine>
<Link id="l04010" /><CodeLine lineNumber="4010"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LocalAccum&#91;0&#93;) &#123;</span></CodeLine>
<Link id="l04011" /><CodeLine lineNumber="4011"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LocalAccum.size() == 1) &#123;</span></CodeLine>
<Link id="l04012" /><CodeLine lineNumber="4012"><span class="doxyHighlight">              Tmp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnyExt(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, LocalAccum&#91;0&#93;).getReg(0);</span></CodeLine>
<Link id="l04013" /><CodeLine lineNumber="4013"><span class="doxyHighlight">              HaveSmallAccum = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04014" /><CodeLine lineNumber="4014"><span class="doxyHighlight">            &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LocalAccum&#91;1&#93;) &#123;</span></CodeLine>
<Link id="l04015" /><CodeLine lineNumber="4015"><span class="doxyHighlight">              Tmp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, LocalAccum).getReg(0);</span></CodeLine>
<Link id="l04016" /><CodeLine lineNumber="4016"><span class="doxyHighlight">              HaveSmallAccum = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04017" /><CodeLine lineNumber="4017"><span class="doxyHighlight">            &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04018" /><CodeLine lineNumber="4018"><span class="doxyHighlight">              Tmp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildZExt(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, LocalAccum&#91;0&#93;).getReg(0);</span></CodeLine>
<Link id="l04019" /><CodeLine lineNumber="4019"><span class="doxyHighlight">              HaveSmallAccum = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04020" /><CodeLine lineNumber="4020"><span class="doxyHighlight">            &#125;</span></CodeLine>
<Link id="l04021" /><CodeLine lineNumber="4021"><span class="doxyHighlight">          &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04022" /><CodeLine lineNumber="4022"><span class="doxyHighlight">            <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LocalAccum.size() == 1 || !LocalAccum&#91;1&#93;);</span></CodeLine>
<Link id="l04023" /><CodeLine lineNumber="4023"><span class="doxyHighlight">            Tmp = getZero64();</span></CodeLine>
<Link id="l04024" /><CodeLine lineNumber="4024"><span class="doxyHighlight">            HaveSmallAccum = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04025" /><CodeLine lineNumber="4025"><span class="doxyHighlight">          &#125;</span></CodeLine>
<Link id="l04026" /><CodeLine lineNumber="4026"></CodeLine>
<Link id="l04027" /><CodeLine lineNumber="4027"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">do</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04028" /><CodeLine lineNumber="4028"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> j1 = DstIndex - j0;</span></CodeLine>
<Link id="l04029" /><CodeLine lineNumber="4029"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Src0KnownZeros&#91;j0&#93; || Src1KnownZeros&#91;j1&#93;) &#123;</span></CodeLine>
<Link id="l04030" /><CodeLine lineNumber="4030"><span class="doxyHighlight">              ++j0;</span></CodeLine>
<Link id="l04031" /><CodeLine lineNumber="4031"><span class="doxyHighlight">              </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04032" /><CodeLine lineNumber="4032"><span class="doxyHighlight">            &#125;</span></CodeLine>
<Link id="l04033" /><CodeLine lineNumber="4033"><span class="doxyHighlight">            </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Mad = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::G&#95;AMDGPU&#95;MAD&#95;U64&#95;U32, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>&#125;,</span></CodeLine>
<Link id="l04034" /><CodeLine lineNumber="4034"><span class="doxyHighlight">                                    &#123;Src0&#91;j0&#93;, Src1&#91;j1&#93;, Tmp&#125;);</span></CodeLine>
<Link id="l04035" /><CodeLine lineNumber="4035"><span class="doxyHighlight">            Tmp = Mad.getReg(0);</span></CodeLine>
<Link id="l04036" /><CodeLine lineNumber="4036"><span class="doxyHighlight">            </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!HaveSmallAccum)</span></CodeLine>
<Link id="l04037" /><CodeLine lineNumber="4037"><span class="doxyHighlight">              CarryOut.push&#95;back(Mad.getReg(1));</span></CodeLine>
<Link id="l04038" /><CodeLine lineNumber="4038"><span class="doxyHighlight">            HaveSmallAccum = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04039" /><CodeLine lineNumber="4039"></CodeLine>
<Link id="l04040" /><CodeLine lineNumber="4040"><span class="doxyHighlight">            ++j0;</span></CodeLine>
<Link id="l04041" /><CodeLine lineNumber="4041"><span class="doxyHighlight">          &#125; </span><span class="doxyHighlightKeywordFlow">while</span><span class="doxyHighlight"> (j0 &lt;= DstIndex);</span></CodeLine>
<Link id="l04042" /><CodeLine lineNumber="4042"></CodeLine>
<Link id="l04043" /><CodeLine lineNumber="4043"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Tmp);</span></CodeLine>
<Link id="l04044" /><CodeLine lineNumber="4044"><span class="doxyHighlight">          LocalAccum&#91;0&#93; = Unmerge.getReg(0);</span></CodeLine>
<Link id="l04045" /><CodeLine lineNumber="4045"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (LocalAccum.size() &gt; 1)</span></CodeLine>
<Link id="l04046" /><CodeLine lineNumber="4046"><span class="doxyHighlight">            LocalAccum&#91;1&#93; = Unmerge.getReg(1);</span></CodeLine>
<Link id="l04047" /><CodeLine lineNumber="4047"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l04048" /><CodeLine lineNumber="4048"></CodeLine>
<Link id="l04049" /><CodeLine lineNumber="4049"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> CarryOut;</span></CodeLine>
<Link id="l04050" /><CodeLine lineNumber="4050"><span class="doxyHighlight">      &#125;;</span></CodeLine>
<Link id="l04051" /><CodeLine lineNumber="4051"></CodeLine>
<Link id="l04052" /><CodeLine lineNumber="4052"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Outer multiply loop, iterating over destination parts from least</span></CodeLine>
<Link id="l04053" /><CodeLine lineNumber="4053"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// significant to most significant parts.</span></CodeLine>
<Link id="l04054" /><CodeLine lineNumber="4054"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l04055" /><CodeLine lineNumber="4055"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The columns of the following diagram correspond to the destination parts</span></CodeLine>
<Link id="l04056" /><CodeLine lineNumber="4056"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// affected by one iteration of the outer loop (ignoring boundary</span></CodeLine>
<Link id="l04057" /><CodeLine lineNumber="4057"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// conditions).</span></CodeLine>
<Link id="l04058" /><CodeLine lineNumber="4058"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l04059" /><CodeLine lineNumber="4059"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   Dest index relative to 2 &#42; i:      1 0 -1</span></CodeLine>
<Link id="l04060" /><CodeLine lineNumber="4060"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//                                      ------</span></CodeLine>
<Link id="l04061" /><CodeLine lineNumber="4061"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   Carries from previous iteration:     e o</span></CodeLine>
<Link id="l04062" /><CodeLine lineNumber="4062"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   Even-aligned partial product sum:  E E .</span></CodeLine>
<Link id="l04063" /><CodeLine lineNumber="4063"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   Odd-aligned partial product sum:     O O</span></CodeLine>
<Link id="l04064" /><CodeLine lineNumber="4064"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l04065" /><CodeLine lineNumber="4065"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// &#39;o&#39; is OddCarry, &#39;e&#39; is EvenCarry.</span></CodeLine>
<Link id="l04066" /><CodeLine lineNumber="4066"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// EE and OO are computed from partial products via buildMadChain and use</span></CodeLine>
<Link id="l04067" /><CodeLine lineNumber="4067"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// accumulation where possible and appropriate.</span></CodeLine>
<Link id="l04068" /><CodeLine lineNumber="4068"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l04069" /><CodeLine lineNumber="4069"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> SeparateOddCarry;</span></CodeLine>
<Link id="l04070" /><CodeLine lineNumber="4070"><span class="doxyHighlight">  Carry EvenCarry;</span></CodeLine>
<Link id="l04071" /><CodeLine lineNumber="4071"><span class="doxyHighlight">  Carry OddCarry;</span></CodeLine>
<Link id="l04072" /><CodeLine lineNumber="4072"></CodeLine>
<Link id="l04073" /><CodeLine lineNumber="4073"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 0; i &lt;= Accum.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() / 2; ++i) &#123;</span></CodeLine>
<Link id="l04074" /><CodeLine lineNumber="4074"><span class="doxyHighlight">    Carry OddCarryIn = std::move(OddCarry);</span></CodeLine>
<Link id="l04075" /><CodeLine lineNumber="4075"><span class="doxyHighlight">    Carry EvenCarryIn = std::move(EvenCarry);</span></CodeLine>
<Link id="l04076" /><CodeLine lineNumber="4076"><span class="doxyHighlight">    OddCarry.clear();</span></CodeLine>
<Link id="l04077" /><CodeLine lineNumber="4077"><span class="doxyHighlight">    EvenCarry.clear();</span></CodeLine>
<Link id="l04078" /><CodeLine lineNumber="4078"></CodeLine>
<Link id="l04079" /><CodeLine lineNumber="4079"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Partial products at offset 2 &#42; i.</span></CodeLine>
<Link id="l04080" /><CodeLine lineNumber="4080"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (2 &#42; i &lt; Accum.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>()) &#123;</span></CodeLine>
<Link id="l04081" /><CodeLine lineNumber="4081"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> LocalAccum = Accum.<a href="/docs/api/classes/llvm/mutablearrayref/#a23489fd833f61022bf08dbe3ba9f1973">drop&#95;front</a>(2 &#42; i).take&#95;front(2);</span></CodeLine>
<Link id="l04082" /><CodeLine lineNumber="4082"><span class="doxyHighlight">      EvenCarry = buildMadChain(LocalAccum, 2 &#42; i, EvenCarryIn);</span></CodeLine>
<Link id="l04083" /><CodeLine lineNumber="4083"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04084" /><CodeLine lineNumber="4084"></CodeLine>
<Link id="l04085" /><CodeLine lineNumber="4085"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Partial products at offset 2 &#42; i - 1</span></CodeLine>
<Link id="l04086" /><CodeLine lineNumber="4086"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (i &gt; 0) &#123;</span></CodeLine>
<Link id="l04087" /><CodeLine lineNumber="4087"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!SeparateOddAlignedProducts) &#123;</span></CodeLine>
<Link id="l04088" /><CodeLine lineNumber="4088"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> LocalAccum = Accum.<a href="/docs/api/classes/llvm/mutablearrayref/#a23489fd833f61022bf08dbe3ba9f1973">drop&#95;front</a>(2 &#42; i - 1).take&#95;front(2);</span></CodeLine>
<Link id="l04089" /><CodeLine lineNumber="4089"><span class="doxyHighlight">        OddCarry = buildMadChain(LocalAccum, 2 &#42; i - 1, OddCarryIn);</span></CodeLine>
<Link id="l04090" /><CodeLine lineNumber="4090"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04091" /><CodeLine lineNumber="4091"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsHighest = 2 &#42; i &gt;= Accum.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>();</span></CodeLine>
<Link id="l04092" /><CodeLine lineNumber="4092"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/register">Register</a> SeparateOddOut&#91;2&#93;;</span></CodeLine>
<Link id="l04093" /><CodeLine lineNumber="4093"><span class="doxyHighlight">        </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> LocalAccum = <a href="/docs/api/namespaces/llvm/#a99416758c13252bef45320a6ba6aa09c">MutableArrayRef</a>(SeparateOddOut)</span></CodeLine>
<Link id="l04094" /><CodeLine lineNumber="4094"><span class="doxyHighlight">                              .take&#95;front(IsHighest ? 1 : 2);</span></CodeLine>
<Link id="l04095" /><CodeLine lineNumber="4095"><span class="doxyHighlight">        OddCarry = buildMadChain(LocalAccum, 2 &#42; i - 1, OddCarryIn);</span></CodeLine>
<Link id="l04096" /><CodeLine lineNumber="4096"></CodeLine>
<Link id="l04097" /><CodeLine lineNumber="4097"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>;</span></CodeLine>
<Link id="l04098" /><CodeLine lineNumber="4098"></CodeLine>
<Link id="l04099" /><CodeLine lineNumber="4099"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (i == 1) &#123;</span></CodeLine>
<Link id="l04100" /><CodeLine lineNumber="4100"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!IsHighest)</span></CodeLine>
<Link id="l04101" /><CodeLine lineNumber="4101"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUAddo(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Accum&#91;2 &#42; i - 1&#93;, SeparateOddOut&#91;0&#93;);</span></CodeLine>
<Link id="l04102" /><CodeLine lineNumber="4102"><span class="doxyHighlight">          </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l04103" /><CodeLine lineNumber="4103"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAdd(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Accum&#91;2 &#42; i - 1&#93;, SeparateOddOut&#91;0&#93;);</span></CodeLine>
<Link id="l04104" /><CodeLine lineNumber="4104"><span class="doxyHighlight">        &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04105" /><CodeLine lineNumber="4105"><span class="doxyHighlight">          <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUAdde(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Accum&#91;2 &#42; i - 1&#93;, SeparateOddOut&#91;0&#93;,</span></CodeLine>
<Link id="l04106" /><CodeLine lineNumber="4106"><span class="doxyHighlight">                            SeparateOddCarry);</span></CodeLine>
<Link id="l04107" /><CodeLine lineNumber="4107"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l04108" /><CodeLine lineNumber="4108"><span class="doxyHighlight">        Accum&#91;2 &#42; i - 1&#93; = <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>-&gt;getOperand(0).getReg();</span></CodeLine>
<Link id="l04109" /><CodeLine lineNumber="4109"></CodeLine>
<Link id="l04110" /><CodeLine lineNumber="4110"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!IsHighest) &#123;</span></CodeLine>
<Link id="l04111" /><CodeLine lineNumber="4111"><span class="doxyHighlight">          </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUAdde(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Accum&#91;2 &#42; i&#93;, SeparateOddOut&#91;1&#93;,</span></CodeLine>
<Link id="l04112" /><CodeLine lineNumber="4112"><span class="doxyHighlight">                                <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2baff50b4aa1c9cc2197ef898436641c911">Lo</a>-&gt;getOperand(1).getReg());</span></CodeLine>
<Link id="l04113" /><CodeLine lineNumber="4113"><span class="doxyHighlight">          Accum&#91;2 &#42; i&#93; = <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>.getReg(0);</span></CodeLine>
<Link id="l04114" /><CodeLine lineNumber="4114"><span class="doxyHighlight">          SeparateOddCarry = <a href="/docs/api/namespaces/llvm/#a9ac8e4e13ad96a39c3f8db9ed633ad2bac1a5298f939e87e8f962a5edfc206918">Hi</a>.getReg(1);</span></CodeLine>
<Link id="l04115" /><CodeLine lineNumber="4115"><span class="doxyHighlight">        &#125;</span></CodeLine>
<Link id="l04116" /><CodeLine lineNumber="4116"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l04117" /><CodeLine lineNumber="4117"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04118" /><CodeLine lineNumber="4118"></CodeLine>
<Link id="l04119" /><CodeLine lineNumber="4119"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Add in the carries from the previous iteration</span></CodeLine>
<Link id="l04120" /><CodeLine lineNumber="4120"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (i &gt; 0) &#123;</span></CodeLine>
<Link id="l04121" /><CodeLine lineNumber="4121"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/register">Register</a> CarryOut = mergeCarry(Accum&#91;2 &#42; i - 1&#93;, OddCarryIn))</span></CodeLine>
<Link id="l04122" /><CodeLine lineNumber="4122"><span class="doxyHighlight">        EvenCarryIn.push&#95;back(CarryOut);</span></CodeLine>
<Link id="l04123" /><CodeLine lineNumber="4123"></CodeLine>
<Link id="l04124" /><CodeLine lineNumber="4124"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (2 &#42; i &lt; Accum.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>()) &#123;</span></CodeLine>
<Link id="l04125" /><CodeLine lineNumber="4125"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/register">Register</a> CarryOut = mergeCarry(Accum&#91;2 &#42; i&#93;, EvenCarryIn))</span></CodeLine>
<Link id="l04126" /><CodeLine lineNumber="4126"><span class="doxyHighlight">          OddCarry.push&#95;back(CarryOut);</span></CodeLine>
<Link id="l04127" /><CodeLine lineNumber="4127"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l04128" /><CodeLine lineNumber="4128"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04129" /><CodeLine lineNumber="4129"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04130" /><CodeLine lineNumber="4130"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04131" /><CodeLine lineNumber="4131"></CodeLine>
<Link id="l04132" /><CodeLine lineNumber="4132"><span class="doxyHighlightComment">// Custom narrowing of wide multiplies using wide multiply-add instructions.</span></CodeLine>
<Link id="l04133" /><CodeLine lineNumber="4133"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l04134" /><CodeLine lineNumber="4134"><span class="doxyHighlightComment">// TODO: If the multiply is followed by an addition, we should attempt to</span></CodeLine>
<Link id="l04135" /><CodeLine lineNumber="4135"><span class="doxyHighlightComment">// integrate it to make better use of V&#95;MAD&#95;U64&#95;U32&#39;s multiply-add capabilities.</span></CodeLine>
<Link id="l04136" /><CodeLine lineNumber="4136" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a2645b2c5fc9b404821322ad403c87810"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a2645b2c5fc9b404821322ad403c87810">AMDGPULegalizerInfo::legalizeMul</a>(<a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> &amp;Helper,</span></CodeLine>
<Link id="l04137" /><CodeLine lineNumber="4137"><span class="doxyHighlight">                                      <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04138" /><CodeLine lineNumber="4138"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ST.hasMad64&#95;32());</span></CodeLine>
<Link id="l04139" /><CodeLine lineNumber="4139"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G&#95;MUL);</span></CodeLine>
<Link id="l04140" /><CodeLine lineNumber="4140"></CodeLine>
<Link id="l04141" /><CodeLine lineNumber="4141"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</span></CodeLine>
<Link id="l04142" /><CodeLine lineNumber="4142"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI();</span></CodeLine>
<Link id="l04143" /><CodeLine lineNumber="4143"></CodeLine>
<Link id="l04144" /><CodeLine lineNumber="4144"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DstReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04145" /><CodeLine lineNumber="4145"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src0 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l04146" /><CodeLine lineNumber="4146"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src1 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l04147" /><CodeLine lineNumber="4147"></CodeLine>
<Link id="l04148" /><CodeLine lineNumber="4148"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(DstReg);</span></CodeLine>
<Link id="l04149" /><CodeLine lineNumber="4149"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty.isScalar());</span></CodeLine>
<Link id="l04150" /><CodeLine lineNumber="4150"></CodeLine>
<Link id="l04151" /><CodeLine lineNumber="4151"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = Ty.getSizeInBits();</span></CodeLine>
<Link id="l04152" /><CodeLine lineNumber="4152"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumParts = <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> / 32;</span></CodeLine>
<Link id="l04153" /><CodeLine lineNumber="4153"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> % 32) == 0);</span></CodeLine>
<Link id="l04154" /><CodeLine lineNumber="4154"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumParts &gt;= 2);</span></CodeLine>
<Link id="l04155" /><CodeLine lineNumber="4155"></CodeLine>
<Link id="l04156" /><CodeLine lineNumber="4156"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Whether to use MAD&#95;64&#95;32 for partial products whose high half is</span></CodeLine>
<Link id="l04157" /><CodeLine lineNumber="4157"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// discarded. This avoids some ADD instructions but risks false dependency</span></CodeLine>
<Link id="l04158" /><CodeLine lineNumber="4158"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// stalls on some subtargets in some cases.</span></CodeLine>
<Link id="l04159" /><CodeLine lineNumber="4159"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UsePartialMad64&#95;32 = ST.getGeneration() &lt; <a href="/docs/api/classes/llvm/amdgpusubtarget/#a53c0ee4138bfbf9e0410a65e0eaa36e2a0a29519a2da61e1cf78d898e26fef446">AMDGPUSubtarget::GFX10</a>;</span></CodeLine>
<Link id="l04160" /><CodeLine lineNumber="4160"></CodeLine>
<Link id="l04161" /><CodeLine lineNumber="4161"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Whether to compute odd-aligned partial products separately. This is</span></CodeLine>
<Link id="l04162" /><CodeLine lineNumber="4162"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// advisable on subtargets where the accumulator of MAD&#95;64&#95;32 must be placed</span></CodeLine>
<Link id="l04163" /><CodeLine lineNumber="4163"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// in an even-aligned VGPR.</span></CodeLine>
<Link id="l04164" /><CodeLine lineNumber="4164"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> SeparateOddAlignedProducts = ST.hasFullRate64Ops();</span></CodeLine>
<Link id="l04165" /><CodeLine lineNumber="4165"></CodeLine>
<Link id="l04166" /><CodeLine lineNumber="4166"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l04167" /><CodeLine lineNumber="4167"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Register, 2&gt;</a> Src0Parts, Src1Parts;</span></CodeLine>
<Link id="l04168" /><CodeLine lineNumber="4168"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 0; i &lt; NumParts; ++i) &#123;</span></CodeLine>
<Link id="l04169" /><CodeLine lineNumber="4169"><span class="doxyHighlight">    Src0Parts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>));</span></CodeLine>
<Link id="l04170" /><CodeLine lineNumber="4170"><span class="doxyHighlight">    Src1Parts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>));</span></CodeLine>
<Link id="l04171" /><CodeLine lineNumber="4171"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04172" /><CodeLine lineNumber="4172"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(Src0Parts, Src0);</span></CodeLine>
<Link id="l04173" /><CodeLine lineNumber="4173"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(Src1Parts, Src1);</span></CodeLine>
<Link id="l04174" /><CodeLine lineNumber="4174"></CodeLine>
<Link id="l04175" /><CodeLine lineNumber="4175"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Register, 2&gt;</a> AccumRegs(NumParts);</span></CodeLine>
<Link id="l04176" /><CodeLine lineNumber="4176"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a01959fee9db67c3a625348ae39489c5e">buildMultiply</a>(Helper, AccumRegs, Src0Parts, Src1Parts, UsePartialMad64&#95;32,</span></CodeLine>
<Link id="l04177" /><CodeLine lineNumber="4177"><span class="doxyHighlight">                SeparateOddAlignedProducts);</span></CodeLine>
<Link id="l04178" /><CodeLine lineNumber="4178"></CodeLine>
<Link id="l04179" /><CodeLine lineNumber="4179"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(DstReg, AccumRegs);</span></CodeLine>
<Link id="l04180" /><CodeLine lineNumber="4180"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l04181" /><CodeLine lineNumber="4181"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04182" /><CodeLine lineNumber="4182"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04183" /><CodeLine lineNumber="4183"></CodeLine>
<Link id="l04184" /><CodeLine lineNumber="4184"><span class="doxyHighlightComment">// Legalize ctlz/cttz to ffbh/ffbl instead of the default legalization to</span></CodeLine>
<Link id="l04185" /><CodeLine lineNumber="4185"><span class="doxyHighlightComment">// ctlz/cttz&#95;zero&#95;undef. This allows us to fix up the result for the zero input</span></CodeLine>
<Link id="l04186" /><CodeLine lineNumber="4186"><span class="doxyHighlightComment">// case with a single min instruction instead of a compare+select.</span></CodeLine>
<Link id="l04187" /><CodeLine lineNumber="4187" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a40f12f2bde2de188bff061f11bcd976c"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a40f12f2bde2de188bff061f11bcd976c">AMDGPULegalizerInfo::legalizeCTLZ&#95;CTTZ</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l04188" /><CodeLine lineNumber="4188"><span class="doxyHighlight">                                            <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l04189" /><CodeLine lineNumber="4189"><span class="doxyHighlight">                                            <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04190" /><CodeLine lineNumber="4190"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04191" /><CodeLine lineNumber="4191"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l04192" /><CodeLine lineNumber="4192"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> DstTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst);</span></CodeLine>
<Link id="l04193" /><CodeLine lineNumber="4193"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> SrcTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Src);</span></CodeLine>
<Link id="l04194" /><CodeLine lineNumber="4194"></CodeLine>
<Link id="l04195" /><CodeLine lineNumber="4195"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NewOpc = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::G&#95;CTLZ</span></CodeLine>
<Link id="l04196" /><CodeLine lineNumber="4196"><span class="doxyHighlight">                        ? AMDGPU::G&#95;AMDGPU&#95;FFBH&#95;U32</span></CodeLine>
<Link id="l04197" /><CodeLine lineNumber="4197"><span class="doxyHighlight">                        : AMDGPU::G&#95;AMDGPU&#95;FFBL&#95;B32;</span></CodeLine>
<Link id="l04198" /><CodeLine lineNumber="4198"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Tmp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(NewOpc, &#123;DstTy&#125;, &#123;Src&#125;);</span></CodeLine>
<Link id="l04199" /><CodeLine lineNumber="4199"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUMin(Dst, Tmp, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(DstTy, SrcTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()));</span></CodeLine>
<Link id="l04200" /><CodeLine lineNumber="4200"></CodeLine>
<Link id="l04201" /><CodeLine lineNumber="4201"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l04202" /><CodeLine lineNumber="4202"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04203" /><CodeLine lineNumber="4203"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04204" /><CodeLine lineNumber="4204"></CodeLine>
<Link id="l04205" /><CodeLine lineNumber="4205" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#af30d14208a085b7b3e39b25a10f55896"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#af30d14208a085b7b3e39b25a10f55896">AMDGPULegalizerInfo::legalizeCTLZ&#95;ZERO&#95;UNDEF</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l04206" /><CodeLine lineNumber="4206"><span class="doxyHighlight">                                                  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l04207" /><CodeLine lineNumber="4207"><span class="doxyHighlight">                                                  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04208" /><CodeLine lineNumber="4208"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04209" /><CodeLine lineNumber="4209"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l04210" /><CodeLine lineNumber="4210"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> SrcTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Src);</span></CodeLine>
<Link id="l04211" /><CodeLine lineNumber="4211"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/typesize">TypeSize</a> NumBits = SrcTy.getSizeInBits();</span></CodeLine>
<Link id="l04212" /><CodeLine lineNumber="4212"></CodeLine>
<Link id="l04213" /><CodeLine lineNumber="4213"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumBits &lt; 32u);</span></CodeLine>
<Link id="l04214" /><CodeLine lineNumber="4214"></CodeLine>
<Link id="l04215" /><CodeLine lineNumber="4215"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ShiftAmt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 32u - NumBits);</span></CodeLine>
<Link id="l04216" /><CodeLine lineNumber="4216"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Extend = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnyExt(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, &#123;Src&#125;).<a href="/docs/api/files/lib/lib/target/lib/target/mips/lib/target/mips/disassembler/mipsdisassembler-cpp/#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0u);</span></CodeLine>
<Link id="l04217" /><CodeLine lineNumber="4217"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Shift = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildShl(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Extend, ShiftAmt);</span></CodeLine>
<Link id="l04218" /><CodeLine lineNumber="4218"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Ctlz = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::G&#95;AMDGPU&#95;FFBH&#95;U32, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;Shift&#125;);</span></CodeLine>
<Link id="l04219" /><CodeLine lineNumber="4219"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildTrunc(Dst, Ctlz);</span></CodeLine>
<Link id="l04220" /><CodeLine lineNumber="4220"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l04221" /><CodeLine lineNumber="4221"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04222" /><CodeLine lineNumber="4222"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04223" /><CodeLine lineNumber="4223"></CodeLine>
<Link id="l04224" /><CodeLine lineNumber="4224"><span class="doxyHighlightComment">// Check that this is a G&#95;XOR x, -1</span></CodeLine>
<Link id="l04225" /><CodeLine lineNumber="4225" lineLink="#accff22ec9fbd872b5976a4a2dc20ef56"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#accff22ec9fbd872b5976a4a2dc20ef56">isNot</a>(</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) &#123;</span></CodeLine>
<Link id="l04226" /><CodeLine lineNumber="4226"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() != TargetOpcode::G&#95;XOR)</span></CodeLine>
<Link id="l04227" /><CodeLine lineNumber="4227"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04228" /><CodeLine lineNumber="4228"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ConstVal = <a href="/docs/api/namespaces/llvm/#a56f5d55460d7e31fc6c3318882f36ac7">getIConstantVRegSExtVal</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg(), <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</span></CodeLine>
<Link id="l04229" /><CodeLine lineNumber="4229"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ConstVal &amp;&amp; &#42;ConstVal == -1;</span></CodeLine>
<Link id="l04230" /><CodeLine lineNumber="4230"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04231" /><CodeLine lineNumber="4231"></CodeLine>
<Link id="l04232" /><CodeLine lineNumber="4232"><span class="doxyHighlightComment">// Return the use branch instruction, otherwise null if the usage is invalid.</span></CodeLine>
<Link id="l04233" /><CodeLine lineNumber="4233"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;</span></CodeLine>
<Link id="l04234" /><CodeLine lineNumber="4234" lineLink="#a87e58e9d24983c7890c502fbe731f950"><span class="doxyHighlight"><a href="#a87e58e9d24983c7890c502fbe731f950">verifyCFIntrinsic</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;&amp;Br,</span></CodeLine>
<Link id="l04235" /><CodeLine lineNumber="4235"><span class="doxyHighlight">                  <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;&amp;UncondBrTarget, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> &amp;Negated) &#123;</span></CodeLine>
<Link id="l04236" /><CodeLine lineNumber="4236"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> CondDef = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04237" /><CodeLine lineNumber="4237"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.hasOneNonDBGUse(CondDef))</span></CodeLine>
<Link id="l04238" /><CodeLine lineNumber="4238"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04239" /><CodeLine lineNumber="4239"></CodeLine>
<Link id="l04240" /><CodeLine lineNumber="4240"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;Parent = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent();</span></CodeLine>
<Link id="l04241" /><CodeLine lineNumber="4241"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a> = &amp;&#42;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.use&#95;instr&#95;nodbg&#95;begin(CondDef);</span></CodeLine>
<Link id="l04242" /><CodeLine lineNumber="4242"></CodeLine>
<Link id="l04243" /><CodeLine lineNumber="4243"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#accff22ec9fbd872b5976a4a2dc20ef56">isNot</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, &#42;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>)) &#123;</span></CodeLine>
<Link id="l04244" /><CodeLine lineNumber="4244"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> NegatedCond = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>-&gt;getOperand(0).getReg();</span></CodeLine>
<Link id="l04245" /><CodeLine lineNumber="4245"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.hasOneNonDBGUse(NegatedCond))</span></CodeLine>
<Link id="l04246" /><CodeLine lineNumber="4246"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04247" /><CodeLine lineNumber="4247"></CodeLine>
<Link id="l04248" /><CodeLine lineNumber="4248"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We&#39;re deleting the def of this value, so we need to remove it.</span></CodeLine>
<Link id="l04249" /><CodeLine lineNumber="4249"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#abfbb7869d5e1d000bcca6867dd813178">eraseInstr</a>(&#42;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</span></CodeLine>
<Link id="l04250" /><CodeLine lineNumber="4250"></CodeLine>
<Link id="l04251" /><CodeLine lineNumber="4251"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a> = &amp;&#42;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.use&#95;instr&#95;nodbg&#95;begin(NegatedCond);</span></CodeLine>
<Link id="l04252" /><CodeLine lineNumber="4252"><span class="doxyHighlight">    Negated = </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04253" /><CodeLine lineNumber="4253"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04254" /><CodeLine lineNumber="4254"></CodeLine>
<Link id="l04255" /><CodeLine lineNumber="4255"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>-&gt;getParent() != Parent || <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>-&gt;getOpcode() != AMDGPU::G&#95;BRCOND)</span></CodeLine>
<Link id="l04256" /><CodeLine lineNumber="4256"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04257" /><CodeLine lineNumber="4257"></CodeLine>
<Link id="l04258" /><CodeLine lineNumber="4258"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Make sure the cond br is followed by a G&#95;BR, or is the last instruction.</span></CodeLine>
<Link id="l04259" /><CodeLine lineNumber="4259"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinebasicblock/#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> <a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a> = std::next(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>-&gt;getIterator());</span></CodeLine>
<Link id="l04260" /><CodeLine lineNumber="4260"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a> == Parent-&gt;<a href="/docs/api/classes/llvm/machinebasicblock/#acbc921830578e2741be6549db716c0ce">end</a>()) &#123;</span></CodeLine>
<Link id="l04261" /><CodeLine lineNumber="4261"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinefunction/#aaba82c71ffdca966cad10eae0992fff9">MachineFunction::iterator</a> NextMBB = std::next(Parent-&gt;<a href="/docs/api/classes/llvm/ilist-node-impl/#af719fc783be6589465137d997701a432">getIterator</a>());</span></CodeLine>
<Link id="l04262" /><CodeLine lineNumber="4262"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NextMBB == Parent-&gt;<a href="/docs/api/classes/llvm/machinebasicblock/#acf6442108e21e7e5379feb8962de65b7">getParent</a>()-&gt;<a href="/docs/api/classes/llvm/machinefunction/#a9d017af749f76484cb9aec9ff6e4330c">end</a>()) </span><span class="doxyHighlightComment">// Illegal intrinsic use.</span></CodeLine>
<Link id="l04263" /><CodeLine lineNumber="4263"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04264" /><CodeLine lineNumber="4264"><span class="doxyHighlight">    UncondBrTarget = &amp;&#42;NextMBB;</span></CodeLine>
<Link id="l04265" /><CodeLine lineNumber="4265"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04266" /><CodeLine lineNumber="4266"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>-&gt;getOpcode() != AMDGPU::G&#95;BR)</span></CodeLine>
<Link id="l04267" /><CodeLine lineNumber="4267"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04268" /><CodeLine lineNumber="4268"><span class="doxyHighlight">    Br = &amp;&#42;<a href="/docs/api/namespaces/llvm/#ab13c360340346d082b959b8cd79f2c1a">Next</a>;</span></CodeLine>
<Link id="l04269" /><CodeLine lineNumber="4269"><span class="doxyHighlight">    UncondBrTarget = Br-&gt;<a href="/docs/api/classes/llvm/machineinstr/#ad67c9230577a0b640c52852c75c93939">getOperand</a>(0).<a href="/docs/api/classes/llvm/machineoperand/#a57e64b633278df75c699e6b98ce15031">getMBB</a>();</span></CodeLine>
<Link id="l04270" /><CodeLine lineNumber="4270"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04271" /><CodeLine lineNumber="4271"></CodeLine>
<Link id="l04272" /><CodeLine lineNumber="4272"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64expandpseudoinsts-cpp/#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>;</span></CodeLine>
<Link id="l04273" /><CodeLine lineNumber="4273"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04274" /><CodeLine lineNumber="4274"></CodeLine>
<Link id="l04275" /><CodeLine lineNumber="4275" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae63198baedfab72494f0d79823e99b75"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae63198baedfab72494f0d79823e99b75">AMDGPULegalizerInfo::loadInputValue</a>(<a href="/docs/api/classes/llvm/register">Register</a> DstReg, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l04276" /><CodeLine lineNumber="4276"><span class="doxyHighlight">                                         </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/argdescriptor">ArgDescriptor</a> &#42;Arg,</span></CodeLine>
<Link id="l04277" /><CodeLine lineNumber="4277"><span class="doxyHighlight">                                         </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetregisterclass">TargetRegisterClass</a> &#42;ArgRC,</span></CodeLine>
<Link id="l04278" /><CodeLine lineNumber="4278"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/llt">LLT</a> ArgTy)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04279" /><CodeLine lineNumber="4279"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/mcregister">MCRegister</a> SrcReg = Arg-&gt;<a href="/docs/api/structs/llvm/argdescriptor/#a2ee87af66bd7eee85e5a7baabe20afe3">getRegister</a>();</span></CodeLine>
<Link id="l04280" /><CodeLine lineNumber="4280"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SrcReg.<a href="/docs/api/classes/llvm/mcregister/#adab6a6e130a565c2cb11ef465fac90e7">isPhysical</a>() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Physical register expected&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04281" /><CodeLine lineNumber="4281"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DstReg.<a href="/docs/api/classes/llvm/register/#ab203bbcbc320180b1da9e9a92ee0c784">isVirtual</a>() &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Virtual register expected&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04282" /><CodeLine lineNumber="4282"></CodeLine>
<Link id="l04283" /><CodeLine lineNumber="4283"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> LiveIn = <a href="/docs/api/namespaces/llvm/#a02134e88cd18139c71d9274c7d287ac3">getFunctionLiveInPhysReg</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF(), <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getTII(), SrcReg,</span></CodeLine>
<Link id="l04284" /><CodeLine lineNumber="4284"><span class="doxyHighlight">                                             &#42;ArgRC, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getDebugLoc(), ArgTy);</span></CodeLine>
<Link id="l04285" /><CodeLine lineNumber="4285"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Arg-&gt;<a href="/docs/api/structs/llvm/argdescriptor/#aa9bfb4bb223ce3b720ec0ff7260bce95">isMasked</a>()) &#123;</span></CodeLine>
<Link id="l04286" /><CodeLine lineNumber="4286"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Should we try to emit this once in the entry block?</span></CodeLine>
<Link id="l04287" /><CodeLine lineNumber="4287"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l04288" /><CodeLine lineNumber="4288"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Mask = Arg-&gt;<a href="/docs/api/structs/llvm/argdescriptor/#aca6660bcd84fca6d680694ff0c78893d">getMask</a>();</span></CodeLine>
<Link id="l04289" /><CodeLine lineNumber="4289"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Shift = <a href="/docs/api/namespaces/llvm/#a57d2f9ee99e9e68cff564d0d579c8163">llvm::countr&#95;zero&lt;unsigned&gt;</a>(Mask);</span></CodeLine>
<Link id="l04290" /><CodeLine lineNumber="4290"></CodeLine>
<Link id="l04291" /><CodeLine lineNumber="4291"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> AndMaskSrc = LiveIn;</span></CodeLine>
<Link id="l04292" /><CodeLine lineNumber="4292"></CodeLine>
<Link id="l04293" /><CodeLine lineNumber="4293"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Avoid clearing the high bits if we know workitem id y/z are always</span></CodeLine>
<Link id="l04294" /><CodeLine lineNumber="4294"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// 0</span></CodeLine>
<Link id="l04295" /><CodeLine lineNumber="4295"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Shift != 0) &#123;</span></CodeLine>
<Link id="l04296" /><CodeLine lineNumber="4296"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ShiftAmt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Shift);</span></CodeLine>
<Link id="l04297" /><CodeLine lineNumber="4297"><span class="doxyHighlight">      AndMaskSrc = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildLShr(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LiveIn, ShiftAmt).getReg(0);</span></CodeLine>
<Link id="l04298" /><CodeLine lineNumber="4298"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04299" /><CodeLine lineNumber="4299"></CodeLine>
<Link id="l04300" /><CodeLine lineNumber="4300"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnd(DstReg, AndMaskSrc, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Mask &gt;&gt; Shift));</span></CodeLine>
<Link id="l04301" /><CodeLine lineNumber="4301"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04302" /><CodeLine lineNumber="4302"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildCopy(DstReg, LiveIn);</span></CodeLine>
<Link id="l04303" /><CodeLine lineNumber="4303"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04304" /><CodeLine lineNumber="4304"></CodeLine>
<Link id="l04305" /><CodeLine lineNumber="4305"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04306" /><CodeLine lineNumber="4306"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04307" /><CodeLine lineNumber="4307"></CodeLine>
<Link id="l04308" /><CodeLine lineNumber="4308" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a724c83948fec4d3162f4620ec6f61a7a"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae63198baedfab72494f0d79823e99b75">AMDGPULegalizerInfo::loadInputValue</a>(</span></CodeLine>
<Link id="l04309" /><CodeLine lineNumber="4309"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> DstReg, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l04310" /><CodeLine lineNumber="4310"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98b">AMDGPUFunctionArgInfo::PreloadedValue</a> ArgType)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04311" /><CodeLine lineNumber="4311"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a> &#42;MFI = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF().getInfo&lt;<a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a>&gt;();</span></CodeLine>
<Link id="l04312" /><CodeLine lineNumber="4312"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/argdescriptor">ArgDescriptor</a> &#42;Arg = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04313" /><CodeLine lineNumber="4313"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetregisterclass">TargetRegisterClass</a> &#42;ArgRC;</span></CodeLine>
<Link id="l04314" /><CodeLine lineNumber="4314"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> ArgTy;</span></CodeLine>
<Link id="l04315" /><CodeLine lineNumber="4315"></CodeLine>
<Link id="l04316" /><CodeLine lineNumber="4316"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">CallingConv::ID</a> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF().getFunction().getCallingConv();</span></CodeLine>
<Link id="l04317" /><CodeLine lineNumber="4317"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/argdescriptor">ArgDescriptor</a> WorkGroupIDX =</span></CodeLine>
<Link id="l04318" /><CodeLine lineNumber="4318"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/argdescriptor/#ab80da72ac9122b5c4e4a0a2cfaa25d9e">ArgDescriptor::createRegister</a>(AMDGPU::TTMP9);</span></CodeLine>
<Link id="l04319" /><CodeLine lineNumber="4319"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If GridZ is not programmed in an entry function then the hardware will set</span></CodeLine>
<Link id="l04320" /><CodeLine lineNumber="4320"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// it to all zeros, so there is no need to mask the GridY value in the low</span></CodeLine>
<Link id="l04321" /><CodeLine lineNumber="4321"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// order bits.</span></CodeLine>
<Link id="l04322" /><CodeLine lineNumber="4322"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/argdescriptor">ArgDescriptor</a> WorkGroupIDY = <a href="/docs/api/structs/llvm/argdescriptor/#ab80da72ac9122b5c4e4a0a2cfaa25d9e">ArgDescriptor::createRegister</a>(</span></CodeLine>
<Link id="l04323" /><CodeLine lineNumber="4323"><span class="doxyHighlight">      AMDGPU::TTMP7,</span></CodeLine>
<Link id="l04324" /><CodeLine lineNumber="4324"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/amdgpu/#a3c65c76a817d60e322ff750366674a92">AMDGPU::isEntryFunctionCC</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>) &amp;&amp; !MFI-&gt;<a href="/docs/api/classes/llvm/simachinefunctioninfo/#a415bc5b0844c5ed75f12a49aad425bbc">hasWorkGroupIDZ</a>() ? ~0u : 0xFFFFu);</span></CodeLine>
<Link id="l04325" /><CodeLine lineNumber="4325"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/argdescriptor">ArgDescriptor</a> WorkGroupIDZ =</span></CodeLine>
<Link id="l04326" /><CodeLine lineNumber="4326"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/argdescriptor/#ab80da72ac9122b5c4e4a0a2cfaa25d9e">ArgDescriptor::createRegister</a>(AMDGPU::TTMP7, 0xFFFF0000u);</span></CodeLine>
<Link id="l04327" /><CodeLine lineNumber="4327"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasArchitectedSGPRs() &amp;&amp;</span></CodeLine>
<Link id="l04328" /><CodeLine lineNumber="4328"><span class="doxyHighlight">      (<a href="/docs/api/namespaces/llvm/amdgpu/#a5688c3d8cf734f824f2637b7bc91e2cb">AMDGPU::isCompute</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a>) || <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a77c69067ae8279bc00ab8757731e90d7">CC</a> == <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4ca4f9824c54cfd32b3e38c01d5331f318b">CallingConv::AMDGPU&#95;Gfx</a>)) &#123;</span></CodeLine>
<Link id="l04329" /><CodeLine lineNumber="4329"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (ArgType) &#123;</span></CodeLine>
<Link id="l04330" /><CodeLine lineNumber="4330"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98bac8cd3961f0697f74c890c302ff8cd370">AMDGPUFunctionArgInfo::WORKGROUP&#95;ID&#95;X</a>:</span></CodeLine>
<Link id="l04331" /><CodeLine lineNumber="4331"><span class="doxyHighlight">      Arg = &amp;WorkGroupIDX;</span></CodeLine>
<Link id="l04332" /><CodeLine lineNumber="4332"><span class="doxyHighlight">      ArgRC = &amp;AMDGPU::SReg&#95;32RegClass;</span></CodeLine>
<Link id="l04333" /><CodeLine lineNumber="4333"><span class="doxyHighlight">      ArgTy = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l04334" /><CodeLine lineNumber="4334"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04335" /><CodeLine lineNumber="4335"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98ba9df85a25300bb504ac893643b387629b">AMDGPUFunctionArgInfo::WORKGROUP&#95;ID&#95;Y</a>:</span></CodeLine>
<Link id="l04336" /><CodeLine lineNumber="4336"><span class="doxyHighlight">      Arg = &amp;WorkGroupIDY;</span></CodeLine>
<Link id="l04337" /><CodeLine lineNumber="4337"><span class="doxyHighlight">      ArgRC = &amp;AMDGPU::SReg&#95;32RegClass;</span></CodeLine>
<Link id="l04338" /><CodeLine lineNumber="4338"><span class="doxyHighlight">      ArgTy = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l04339" /><CodeLine lineNumber="4339"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04340" /><CodeLine lineNumber="4340"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98baf438f1c55b41dc280fcc1d3455a5c741">AMDGPUFunctionArgInfo::WORKGROUP&#95;ID&#95;Z</a>:</span></CodeLine>
<Link id="l04341" /><CodeLine lineNumber="4341"><span class="doxyHighlight">      Arg = &amp;WorkGroupIDZ;</span></CodeLine>
<Link id="l04342" /><CodeLine lineNumber="4342"><span class="doxyHighlight">      ArgRC = &amp;AMDGPU::SReg&#95;32RegClass;</span></CodeLine>
<Link id="l04343" /><CodeLine lineNumber="4343"><span class="doxyHighlight">      ArgTy = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l04344" /><CodeLine lineNumber="4344"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04345" /><CodeLine lineNumber="4345"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l04346" /><CodeLine lineNumber="4346"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04347" /><CodeLine lineNumber="4347"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04348" /><CodeLine lineNumber="4348"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04349" /><CodeLine lineNumber="4349"></CodeLine>
<Link id="l04350" /><CodeLine lineNumber="4350"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Arg)</span></CodeLine>
<Link id="l04351" /><CodeLine lineNumber="4351"><span class="doxyHighlight">    std::tie(Arg, ArgRC, ArgTy) = MFI-&gt;<a href="/docs/api/classes/llvm/simachinefunctioninfo/#a6fd706ce43820b27fa3744fa42f277cd">getPreloadedValue</a>(ArgType);</span></CodeLine>
<Link id="l04352" /><CodeLine lineNumber="4352"></CodeLine>
<Link id="l04353" /><CodeLine lineNumber="4353"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Arg) &#123;</span></CodeLine>
<Link id="l04354" /><CodeLine lineNumber="4354"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ArgType == <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98baf32f3fd30ae548866dc7e45092dd90b9">AMDGPUFunctionArgInfo::KERNARG&#95;SEGMENT&#95;PTR</a>) &#123;</span></CodeLine>
<Link id="l04355" /><CodeLine lineNumber="4355"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The intrinsic may appear when we have a 0 sized kernarg segment, in which</span></CodeLine>
<Link id="l04356" /><CodeLine lineNumber="4356"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// case the pointer argument may be missing and we use null.</span></CodeLine>
<Link id="l04357" /><CodeLine lineNumber="4357"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(DstReg, 0);</span></CodeLine>
<Link id="l04358" /><CodeLine lineNumber="4358"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04359" /><CodeLine lineNumber="4359"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04360" /><CodeLine lineNumber="4360"></CodeLine>
<Link id="l04361" /><CodeLine lineNumber="4361"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// It&#39;s undefined behavior if a function marked with the amdgpu-no-&#42;</span></CodeLine>
<Link id="l04362" /><CodeLine lineNumber="4362"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// attributes uses the corresponding intrinsic.</span></CodeLine>
<Link id="l04363" /><CodeLine lineNumber="4363"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUndef(DstReg);</span></CodeLine>
<Link id="l04364" /><CodeLine lineNumber="4364"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04365" /><CodeLine lineNumber="4365"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04366" /><CodeLine lineNumber="4366"></CodeLine>
<Link id="l04367" /><CodeLine lineNumber="4367"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Arg-&gt;isRegister() || !Arg-&gt;getRegister().isValid())</span></CodeLine>
<Link id="l04368" /><CodeLine lineNumber="4368"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">; </span><span class="doxyHighlightComment">// TODO: Handle these</span></CodeLine>
<Link id="l04369" /><CodeLine lineNumber="4369"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(DstReg, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Arg, ArgRC, ArgTy);</span></CodeLine>
<Link id="l04370" /><CodeLine lineNumber="4370"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04371" /><CodeLine lineNumber="4371"></CodeLine>
<Link id="l04372" /><CodeLine lineNumber="4372" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a59e8a7f7af57ac84f0bfa83a2e6cd4c3"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">AMDGPULegalizerInfo::legalizePreloadedArgIntrin</a>(</span></CodeLine>
<Link id="l04373" /><CodeLine lineNumber="4373"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l04374" /><CodeLine lineNumber="4374"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98b">AMDGPUFunctionArgInfo::PreloadedValue</a> ArgType)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04375" /><CodeLine lineNumber="4375"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, ArgType))</span></CodeLine>
<Link id="l04376" /><CodeLine lineNumber="4376"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04377" /><CodeLine lineNumber="4377"></CodeLine>
<Link id="l04378" /><CodeLine lineNumber="4378"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l04379" /><CodeLine lineNumber="4379"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04380" /><CodeLine lineNumber="4380"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04381" /><CodeLine lineNumber="4381"></CodeLine>
<Link id="l04382" /><CodeLine lineNumber="4382" lineLink="#a79158bc80349e2c5ecd857cb098db65e"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="#a79158bc80349e2c5ecd857cb098db65e">replaceWithConstant</a>(<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l04383" /><CodeLine lineNumber="4383"><span class="doxyHighlight">                                int64&#95;t <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</span></CodeLine>
<Link id="l04384" /><CodeLine lineNumber="4384"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</span></CodeLine>
<Link id="l04385" /><CodeLine lineNumber="4385"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l04386" /><CodeLine lineNumber="4386"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04387" /><CodeLine lineNumber="4387"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04388" /><CodeLine lineNumber="4388"></CodeLine>
<Link id="l04389" /><CodeLine lineNumber="4389" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#af7e4619611fab877c69f6ec0a1d57525"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#af7e4619611fab877c69f6ec0a1d57525">AMDGPULegalizerInfo::legalizeWorkitemIDIntrinsic</a>(</span></CodeLine>
<Link id="l04390" /><CodeLine lineNumber="4390"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l04391" /><CodeLine lineNumber="4391"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Dim, <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98b">AMDGPUFunctionArgInfo::PreloadedValue</a> ArgType)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04392" /><CodeLine lineNumber="4392"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4ca2f101663d054cffa9c9956f30e7ecf7d">MaxID</a> = ST.getMaxWorkitemID(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF().getFunction(), Dim);</span></CodeLine>
<Link id="l04393" /><CodeLine lineNumber="4393"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4ca2f101663d054cffa9c9956f30e7ecf7d">MaxID</a> == 0)</span></CodeLine>
<Link id="l04394" /><CodeLine lineNumber="4394"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a79158bc80349e2c5ecd857cb098db65e">replaceWithConstant</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, 0);</span></CodeLine>
<Link id="l04395" /><CodeLine lineNumber="4395"></CodeLine>
<Link id="l04396" /><CodeLine lineNumber="4396"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a> &#42;MFI = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF().getInfo&lt;<a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a>&gt;();</span></CodeLine>
<Link id="l04397" /><CodeLine lineNumber="4397"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/argdescriptor">ArgDescriptor</a> &#42;Arg;</span></CodeLine>
<Link id="l04398" /><CodeLine lineNumber="4398"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/targetregisterclass">TargetRegisterClass</a> &#42;ArgRC;</span></CodeLine>
<Link id="l04399" /><CodeLine lineNumber="4399"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> ArgTy;</span></CodeLine>
<Link id="l04400" /><CodeLine lineNumber="4400"><span class="doxyHighlight">  std::tie(Arg, ArgRC, ArgTy) = MFI-&gt;<a href="/docs/api/classes/llvm/simachinefunctioninfo/#a6fd706ce43820b27fa3744fa42f277cd">getPreloadedValue</a>(ArgType);</span></CodeLine>
<Link id="l04401" /><CodeLine lineNumber="4401"></CodeLine>
<Link id="l04402" /><CodeLine lineNumber="4402"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DstReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04403" /><CodeLine lineNumber="4403"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Arg) &#123;</span></CodeLine>
<Link id="l04404" /><CodeLine lineNumber="4404"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// It&#39;s undefined behavior if a function marked with the amdgpu-no-&#42;</span></CodeLine>
<Link id="l04405" /><CodeLine lineNumber="4405"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// attributes uses the corresponding intrinsic.</span></CodeLine>
<Link id="l04406" /><CodeLine lineNumber="4406"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUndef(DstReg);</span></CodeLine>
<Link id="l04407" /><CodeLine lineNumber="4407"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l04408" /><CodeLine lineNumber="4408"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04409" /><CodeLine lineNumber="4409"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04410" /><CodeLine lineNumber="4410"></CodeLine>
<Link id="l04411" /><CodeLine lineNumber="4411"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Arg-&gt;isMasked()) &#123;</span></CodeLine>
<Link id="l04412" /><CodeLine lineNumber="4412"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Don&#39;t bother inserting AssertZext for packed IDs since we&#39;re emitting the</span></CodeLine>
<Link id="l04413" /><CodeLine lineNumber="4413"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// masking operations anyway.</span></CodeLine>
<Link id="l04414" /><CodeLine lineNumber="4414"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l04415" /><CodeLine lineNumber="4415"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: We could assert the top bit is 0 for the source copy.</span></CodeLine>
<Link id="l04416" /><CodeLine lineNumber="4416"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(DstReg, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, ArgType))</span></CodeLine>
<Link id="l04417" /><CodeLine lineNumber="4417"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04418" /><CodeLine lineNumber="4418"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04419" /><CodeLine lineNumber="4419"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> TmpReg = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32));</span></CodeLine>
<Link id="l04420" /><CodeLine lineNumber="4420"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(TmpReg, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, ArgType))</span></CodeLine>
<Link id="l04421" /><CodeLine lineNumber="4421"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04422" /><CodeLine lineNumber="4422"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAssertZExt(DstReg, TmpReg, <a href="/docs/api/namespaces/llvm/#a37c1fdede126353d80c3753dfe06f3c7">llvm::bit&#95;width</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4ca2f101663d054cffa9c9956f30e7ecf7d">MaxID</a>));</span></CodeLine>
<Link id="l04423" /><CodeLine lineNumber="4423"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04424" /><CodeLine lineNumber="4424"></CodeLine>
<Link id="l04425" /><CodeLine lineNumber="4425"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l04426" /><CodeLine lineNumber="4426"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04427" /><CodeLine lineNumber="4427"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04428" /><CodeLine lineNumber="4428"></CodeLine>
<Link id="l04429" /><CodeLine lineNumber="4429" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#adeb18e3c3ca254b1eac668a91c0a18e8"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#adeb18e3c3ca254b1eac668a91c0a18e8">AMDGPULegalizerInfo::getKernargParameterPtr</a>(<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l04430" /><CodeLine lineNumber="4430"><span class="doxyHighlight">                                                     int64&#95;t <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04431" /><CodeLine lineNumber="4431"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> PtrTy = <a href="/docs/api/classes/llvm/llt/#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT&#95;ADDRESS</a>, 64);</span></CodeLine>
<Link id="l04432" /><CodeLine lineNumber="4432"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> KernArgReg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;createGenericVirtualRegister(PtrTy);</span></CodeLine>
<Link id="l04433" /><CodeLine lineNumber="4433"></CodeLine>
<Link id="l04434" /><CodeLine lineNumber="4434"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: If we passed in the base kernel offset we could have a better</span></CodeLine>
<Link id="l04435" /><CodeLine lineNumber="4435"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// alignment than 4, but we don&#39;t really need it.</span></CodeLine>
<Link id="l04436" /><CodeLine lineNumber="4436"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(KernArgReg, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l04437" /><CodeLine lineNumber="4437"><span class="doxyHighlight">                      <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98baf32f3fd30ae548866dc7e45092dd90b9">AMDGPUFunctionArgInfo::KERNARG&#95;SEGMENT&#95;PTR</a>))</span></CodeLine>
<Link id="l04438" /><CodeLine lineNumber="4438"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;failed to find kernarg segment ptr&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04439" /><CodeLine lineNumber="4439"></CodeLine>
<Link id="l04440" /><CodeLine lineNumber="4440"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> COffset = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64), <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</span></CodeLine>
<Link id="l04441" /><CodeLine lineNumber="4441"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Should get nuw</span></CodeLine>
<Link id="l04442" /><CodeLine lineNumber="4442"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildPtrAdd(PtrTy, KernArgReg, COffset).getReg(0);</span></CodeLine>
<Link id="l04443" /><CodeLine lineNumber="4443"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04444" /><CodeLine lineNumber="4444"></CodeLine>
<Link id="l04445" /><CodeLine lineNumber="4445"><span class="doxyHighlightComment">/// Legalize a value that&#39;s loaded from kernel arguments. This is only used by</span></CodeLine>
<Link id="l04446" /><CodeLine lineNumber="4446"><span class="doxyHighlightComment">/// legacy intrinsics.</span></CodeLine>
<Link id="l04447" /><CodeLine lineNumber="4447" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#acd7e869bdfe172fce447a9d289343d1a"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#acd7e869bdfe172fce447a9d289343d1a">AMDGPULegalizerInfo::legalizeKernargMemParameter</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l04448" /><CodeLine lineNumber="4448"><span class="doxyHighlight">                                                      <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l04449" /><CodeLine lineNumber="4449"><span class="doxyHighlight">                                                      uint64&#95;t <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>,</span></CodeLine>
<Link id="l04450" /><CodeLine lineNumber="4450"><span class="doxyHighlight">                                                      <a href="/docs/api/structs/llvm/align">Align</a> Alignment)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04451" /><CodeLine lineNumber="4451"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DstReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04452" /><CodeLine lineNumber="4452"></CodeLine>
<Link id="l04453" /><CodeLine lineNumber="4453"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;getType(DstReg) == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32) &amp;&amp;</span></CodeLine>
<Link id="l04454" /><CodeLine lineNumber="4454"><span class="doxyHighlight">         </span><span class="doxyHighlightStringLiteral">&quot;unexpected kernarg parameter type&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04455" /><CodeLine lineNumber="4455"></CodeLine>
<Link id="l04456" /><CodeLine lineNumber="4456"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#adeb18e3c3ca254b1eac668a91c0a18e8">getKernargParameterPtr</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</span></CodeLine>
<Link id="l04457" /><CodeLine lineNumber="4457"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/machinepointerinfo">MachinePointerInfo</a> PtrInfo(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT&#95;ADDRESS</a>);</span></CodeLine>
<Link id="l04458" /><CodeLine lineNumber="4458"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildLoad(DstReg, <a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, PtrInfo, <a href="/docs/api/structs/llvm/align">Align</a>(4),</span></CodeLine>
<Link id="l04459" /><CodeLine lineNumber="4459"><span class="doxyHighlight">              <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2dda7b999a936bc7a4d45dfadbe356e77b3f">MachineMemOperand::MODereferenceable</a> |</span></CodeLine>
<Link id="l04460" /><CodeLine lineNumber="4460"><span class="doxyHighlight">                  <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2ddac63dd9c4fe69bfeaac7a363fda846ac6">MachineMemOperand::MOInvariant</a>);</span></CodeLine>
<Link id="l04461" /><CodeLine lineNumber="4461"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l04462" /><CodeLine lineNumber="4462"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04463" /><CodeLine lineNumber="4463"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04464" /><CodeLine lineNumber="4464"></CodeLine>
<Link id="l04465" /><CodeLine lineNumber="4465" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a4f3b6abeaf9c509c93062f2246a0f40b"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a4f3b6abeaf9c509c93062f2246a0f40b">AMDGPULegalizerInfo::legalizeFDIV</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l04466" /><CodeLine lineNumber="4466"><span class="doxyHighlight">                                       <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l04467" /><CodeLine lineNumber="4467"><span class="doxyHighlight">                                       <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04468" /><CodeLine lineNumber="4468"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04469" /><CodeLine lineNumber="4469"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> DstTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst);</span></CodeLine>
<Link id="l04470" /><CodeLine lineNumber="4470"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</span></CodeLine>
<Link id="l04471" /><CodeLine lineNumber="4471"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l04472" /><CodeLine lineNumber="4472"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</span></CodeLine>
<Link id="l04473" /><CodeLine lineNumber="4473"></CodeLine>
<Link id="l04474" /><CodeLine lineNumber="4474"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DstTy == <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)</span></CodeLine>
<Link id="l04475" /><CodeLine lineNumber="4475"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a6451bf061f754edbcd6043a20bfc663c">legalizeFDIV16</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l04476" /><CodeLine lineNumber="4476"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DstTy == <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l04477" /><CodeLine lineNumber="4477"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a464ac3e6051fb78eb3ee985975d17cb2">legalizeFDIV32</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l04478" /><CodeLine lineNumber="4478"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DstTy == <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l04479" /><CodeLine lineNumber="4479"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a30fc420ff83b1e2c4ab42e86d9071e34">legalizeFDIV64</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l04480" /><CodeLine lineNumber="4480"></CodeLine>
<Link id="l04481" /><CodeLine lineNumber="4481"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04482" /><CodeLine lineNumber="4482"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04483" /><CodeLine lineNumber="4483"></CodeLine>
<Link id="l04484" /><CodeLine lineNumber="4484" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3db547888c8d2ed5323f320bb5763014"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3db547888c8d2ed5323f320bb5763014">AMDGPULegalizerInfo::legalizeUnsignedDIV&#95;REM32Impl</a>(<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l04485" /><CodeLine lineNumber="4485"><span class="doxyHighlight">                                                        <a href="/docs/api/classes/llvm/register">Register</a> DstDivReg,</span></CodeLine>
<Link id="l04486" /><CodeLine lineNumber="4486"><span class="doxyHighlight">                                                        <a href="/docs/api/classes/llvm/register">Register</a> DstRemReg,</span></CodeLine>
<Link id="l04487" /><CodeLine lineNumber="4487"><span class="doxyHighlight">                                                        <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>,</span></CodeLine>
<Link id="l04488" /><CodeLine lineNumber="4488"><span class="doxyHighlight">                                                        <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04489" /><CodeLine lineNumber="4489"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</span></CodeLine>
<Link id="l04490" /><CodeLine lineNumber="4490"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l04491" /><CodeLine lineNumber="4491"></CodeLine>
<Link id="l04492" /><CodeLine lineNumber="4492"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// See AMDGPUCodeGenPrepare::expandDivRem32 for a description of the</span></CodeLine>
<Link id="l04493" /><CodeLine lineNumber="4493"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// algorithm used here.</span></CodeLine>
<Link id="l04494" /><CodeLine lineNumber="4494"></CodeLine>
<Link id="l04495" /><CodeLine lineNumber="4495"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Initial estimate of inv(y).</span></CodeLine>
<Link id="l04496" /><CodeLine lineNumber="4496"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FloatY = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUITOFP(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</span></CodeLine>
<Link id="l04497" /><CodeLine lineNumber="4497"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> RcpIFlag = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::G&#95;AMDGPU&#95;RCP&#95;IFLAG, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;FloatY&#125;);</span></CodeLine>
<Link id="l04498" /><CodeLine lineNumber="4498"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Scale = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/namespaces/llvm/#aab3863f16cb0767af49f0dd63bc5aa90">llvm::bit&#95;cast&lt;float&gt;</a>(0x4f7ffffe));</span></CodeLine>
<Link id="l04499" /><CodeLine lineNumber="4499"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ScaledY = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, RcpIFlag, Scale);</span></CodeLine>
<Link id="l04500" /><CodeLine lineNumber="4500"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Z = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPTOUI(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, ScaledY);</span></CodeLine>
<Link id="l04501" /><CodeLine lineNumber="4501"></CodeLine>
<Link id="l04502" /><CodeLine lineNumber="4502"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// One round of UNR.</span></CodeLine>
<Link id="l04503" /><CodeLine lineNumber="4503"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegY = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSub(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 0), <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</span></CodeLine>
<Link id="l04504" /><CodeLine lineNumber="4504"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegYZ = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMul(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, NegY, Z);</span></CodeLine>
<Link id="l04505" /><CodeLine lineNumber="4505"><span class="doxyHighlight">  Z = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAdd(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Z, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUMulH(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Z, NegYZ));</span></CodeLine>
<Link id="l04506" /><CodeLine lineNumber="4506"></CodeLine>
<Link id="l04507" /><CodeLine lineNumber="4507"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Quotient/remainder estimate.</span></CodeLine>
<Link id="l04508" /><CodeLine lineNumber="4508"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Q = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUMulH(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, Z);</span></CodeLine>
<Link id="l04509" /><CodeLine lineNumber="4509"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> R = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSub(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMul(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Q, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>));</span></CodeLine>
<Link id="l04510" /><CodeLine lineNumber="4510"></CodeLine>
<Link id="l04511" /><CodeLine lineNumber="4511"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// First quotient/remainder refinement.</span></CodeLine>
<Link id="l04512" /><CodeLine lineNumber="4512"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> One = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 1);</span></CodeLine>
<Link id="l04513" /><CodeLine lineNumber="4513"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP&#95;UGE</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, R, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</span></CodeLine>
<Link id="l04514" /><CodeLine lineNumber="4514"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DstDivReg)</span></CodeLine>
<Link id="l04515" /><CodeLine lineNumber="4515"><span class="doxyHighlight">    Q = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAdd(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Q, One), Q);</span></CodeLine>
<Link id="l04516" /><CodeLine lineNumber="4516"><span class="doxyHighlight">  R = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSub(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, R, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>), R);</span></CodeLine>
<Link id="l04517" /><CodeLine lineNumber="4517"></CodeLine>
<Link id="l04518" /><CodeLine lineNumber="4518"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Second quotient/remainder refinement.</span></CodeLine>
<Link id="l04519" /><CodeLine lineNumber="4519"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP&#95;UGE</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, R, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</span></CodeLine>
<Link id="l04520" /><CodeLine lineNumber="4520"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DstDivReg)</span></CodeLine>
<Link id="l04521" /><CodeLine lineNumber="4521"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(DstDivReg, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAdd(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Q, One), Q);</span></CodeLine>
<Link id="l04522" /><CodeLine lineNumber="4522"></CodeLine>
<Link id="l04523" /><CodeLine lineNumber="4523"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DstRemReg)</span></CodeLine>
<Link id="l04524" /><CodeLine lineNumber="4524"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(DstRemReg, <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSub(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, R, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>), R);</span></CodeLine>
<Link id="l04525" /><CodeLine lineNumber="4525"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04526" /><CodeLine lineNumber="4526"></CodeLine>
<Link id="l04527" /><CodeLine lineNumber="4527"><span class="doxyHighlightComment">// Build integer reciprocal sequence around V&#95;RCP&#95;IFLAG&#95;F32</span></CodeLine>
<Link id="l04528" /><CodeLine lineNumber="4528"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l04529" /><CodeLine lineNumber="4529"><span class="doxyHighlightComment">// Return lo, hi of result</span></CodeLine>
<Link id="l04530" /><CodeLine lineNumber="4530"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l04531" /><CodeLine lineNumber="4531"><span class="doxyHighlightComment">// %cvt.lo = G&#95;UITOFP Val.lo</span></CodeLine>
<Link id="l04532" /><CodeLine lineNumber="4532"><span class="doxyHighlightComment">// %cvt.hi = G&#95;UITOFP Val.hi</span></CodeLine>
<Link id="l04533" /><CodeLine lineNumber="4533"><span class="doxyHighlightComment">// %mad = G&#95;FMAD %cvt.hi, 2&#42;&#42;32, %cvt.lo</span></CodeLine>
<Link id="l04534" /><CodeLine lineNumber="4534"><span class="doxyHighlightComment">// %rcp = G&#95;AMDGPU&#95;RCP&#95;IFLAG %mad</span></CodeLine>
<Link id="l04535" /><CodeLine lineNumber="4535"><span class="doxyHighlightComment">// %mul1 = G&#95;FMUL %rcp, 1602224124</span></CodeLine>
<Link id="l04536" /><CodeLine lineNumber="4536"><span class="doxyHighlightComment">// %mul2 = G&#95;FMUL %mul1, 2&#42;&#42;(-32)</span></CodeLine>
<Link id="l04537" /><CodeLine lineNumber="4537"><span class="doxyHighlightComment">// %trunc = G&#95;INTRINSIC&#95;TRUNC %mul2</span></CodeLine>
<Link id="l04538" /><CodeLine lineNumber="4538"><span class="doxyHighlightComment">// %mad2 = G&#95;FMAD %trunc, -(2&#42;&#42;32), %mul1</span></CodeLine>
<Link id="l04539" /><CodeLine lineNumber="4539"><span class="doxyHighlightComment">// return &#123;G&#95;FPTOUI %mad2, G&#95;FPTOUI %trunc&#125;</span></CodeLine>
<Link id="l04540" /><CodeLine lineNumber="4540" lineLink="#a62e3406e85438cd0a8d5e3de179ef6eb"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> std::pair&lt;Register, Register&gt; <a href="#a62e3406e85438cd0a8d5e3de179ef6eb">emitReciprocalU64</a>(<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l04541" /><CodeLine lineNumber="4541"><span class="doxyHighlight">                                                       <a href="/docs/api/classes/llvm/register">Register</a> Val) &#123;</span></CodeLine>
<Link id="l04542" /><CodeLine lineNumber="4542"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l04543" /><CodeLine lineNumber="4543"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Val);</span></CodeLine>
<Link id="l04544" /><CodeLine lineNumber="4544"></CodeLine>
<Link id="l04545" /><CodeLine lineNumber="4545"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CvtLo = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUITOFP(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Unmerge.getReg(0));</span></CodeLine>
<Link id="l04546" /><CodeLine lineNumber="4546"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CvtHi = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUITOFP(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Unmerge.getReg(1));</span></CodeLine>
<Link id="l04547" /><CodeLine lineNumber="4547"></CodeLine>
<Link id="l04548" /><CodeLine lineNumber="4548"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Mad = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMAD(</span></CodeLine>
<Link id="l04549" /><CodeLine lineNumber="4549"><span class="doxyHighlight">      <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, CvtHi, </span><span class="doxyHighlightComment">// 2&#42;&#42;32</span></CodeLine>
<Link id="l04550" /><CodeLine lineNumber="4550"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/namespaces/llvm/#aab3863f16cb0767af49f0dd63bc5aa90">llvm::bit&#95;cast&lt;float&gt;</a>(0x4f800000)), CvtLo);</span></CodeLine>
<Link id="l04551" /><CodeLine lineNumber="4551"></CodeLine>
<Link id="l04552" /><CodeLine lineNumber="4552"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Rcp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::G&#95;AMDGPU&#95;RCP&#95;IFLAG, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, &#123;Mad&#125;);</span></CodeLine>
<Link id="l04553" /><CodeLine lineNumber="4553"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Mul1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(</span></CodeLine>
<Link id="l04554" /><CodeLine lineNumber="4554"><span class="doxyHighlight">      <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Rcp, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/namespaces/llvm/#aab3863f16cb0767af49f0dd63bc5aa90">llvm::bit&#95;cast&lt;float&gt;</a>(0x5f7ffffc)));</span></CodeLine>
<Link id="l04555" /><CodeLine lineNumber="4555"></CodeLine>
<Link id="l04556" /><CodeLine lineNumber="4556"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// 2&#42;&#42;(-32)</span></CodeLine>
<Link id="l04557" /><CodeLine lineNumber="4557"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Mul2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(</span></CodeLine>
<Link id="l04558" /><CodeLine lineNumber="4558"><span class="doxyHighlight">      <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Mul1, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/namespaces/llvm/#aab3863f16cb0767af49f0dd63bc5aa90">llvm::bit&#95;cast&lt;float&gt;</a>(0x2f800000)));</span></CodeLine>
<Link id="l04559" /><CodeLine lineNumber="4559"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Trunc = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsicTrunc(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Mul2);</span></CodeLine>
<Link id="l04560" /><CodeLine lineNumber="4560"></CodeLine>
<Link id="l04561" /><CodeLine lineNumber="4561"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// -(2&#42;&#42;32)</span></CodeLine>
<Link id="l04562" /><CodeLine lineNumber="4562"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Mad2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMAD(</span></CodeLine>
<Link id="l04563" /><CodeLine lineNumber="4563"><span class="doxyHighlight">      <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Trunc, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/namespaces/llvm/#aab3863f16cb0767af49f0dd63bc5aa90">llvm::bit&#95;cast&lt;float&gt;</a>(0xcf800000)),</span></CodeLine>
<Link id="l04564" /><CodeLine lineNumber="4564"><span class="doxyHighlight">      Mul1);</span></CodeLine>
<Link id="l04565" /><CodeLine lineNumber="4565"></CodeLine>
<Link id="l04566" /><CodeLine lineNumber="4566"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ResultLo = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPTOUI(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Mad2);</span></CodeLine>
<Link id="l04567" /><CodeLine lineNumber="4567"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ResultHi = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPTOUI(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Trunc);</span></CodeLine>
<Link id="l04568" /><CodeLine lineNumber="4568"></CodeLine>
<Link id="l04569" /><CodeLine lineNumber="4569"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> &#123;ResultLo.getReg(0), ResultHi.getReg(0)&#125;;</span></CodeLine>
<Link id="l04570" /><CodeLine lineNumber="4570"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04571" /><CodeLine lineNumber="4571"></CodeLine>
<Link id="l04572" /><CodeLine lineNumber="4572" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a93bbde2af63d129f752ef7c3a0f84c15"><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a93bbde2af63d129f752ef7c3a0f84c15">AMDGPULegalizerInfo::legalizeUnsignedDIV&#95;REM64Impl</a>(<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l04573" /><CodeLine lineNumber="4573"><span class="doxyHighlight">                                                        <a href="/docs/api/classes/llvm/register">Register</a> DstDivReg,</span></CodeLine>
<Link id="l04574" /><CodeLine lineNumber="4574"><span class="doxyHighlight">                                                        <a href="/docs/api/classes/llvm/register">Register</a> DstRemReg,</span></CodeLine>
<Link id="l04575" /><CodeLine lineNumber="4575"><span class="doxyHighlight">                                                        <a href="/docs/api/classes/llvm/register">Register</a> Numer,</span></CodeLine>
<Link id="l04576" /><CodeLine lineNumber="4576"><span class="doxyHighlight">                                                        <a href="/docs/api/classes/llvm/register">Register</a> Denom)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04577" /><CodeLine lineNumber="4577"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l04578" /><CodeLine lineNumber="4578"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</span></CodeLine>
<Link id="l04579" /><CodeLine lineNumber="4579"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</span></CodeLine>
<Link id="l04580" /><CodeLine lineNumber="4580"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> RcpLo, RcpHi;</span></CodeLine>
<Link id="l04581" /><CodeLine lineNumber="4581"></CodeLine>
<Link id="l04582" /><CodeLine lineNumber="4582"><span class="doxyHighlight">  std::tie(RcpLo, RcpHi) = <a href="#a62e3406e85438cd0a8d5e3de179ef6eb">emitReciprocalU64</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Denom);</span></CodeLine>
<Link id="l04583" /><CodeLine lineNumber="4583"></CodeLine>
<Link id="l04584" /><CodeLine lineNumber="4584"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Rcp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, &#123;RcpLo, RcpHi&#125;);</span></CodeLine>
<Link id="l04585" /><CodeLine lineNumber="4585"></CodeLine>
<Link id="l04586" /><CodeLine lineNumber="4586"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Zero64 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, 0);</span></CodeLine>
<Link id="l04587" /><CodeLine lineNumber="4587"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegDenom = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSub(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, Zero64, Denom);</span></CodeLine>
<Link id="l04588" /><CodeLine lineNumber="4588"></CodeLine>
<Link id="l04589" /><CodeLine lineNumber="4589"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MulLo1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMul(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, NegDenom, Rcp);</span></CodeLine>
<Link id="l04590" /><CodeLine lineNumber="4590"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MulHi1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUMulH(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, Rcp, MulLo1);</span></CodeLine>
<Link id="l04591" /><CodeLine lineNumber="4591"></CodeLine>
<Link id="l04592" /><CodeLine lineNumber="4592"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> UnmergeMulHi1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, MulHi1);</span></CodeLine>
<Link id="l04593" /><CodeLine lineNumber="4593"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> MulHi1&#95;Lo = UnmergeMulHi1.getReg(0);</span></CodeLine>
<Link id="l04594" /><CodeLine lineNumber="4594"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> MulHi1&#95;Hi = UnmergeMulHi1.getReg(1);</span></CodeLine>
<Link id="l04595" /><CodeLine lineNumber="4595"></CodeLine>
<Link id="l04596" /><CodeLine lineNumber="4596"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Add1&#95;Lo = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUAddo(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, RcpLo, MulHi1&#95;Lo);</span></CodeLine>
<Link id="l04597" /><CodeLine lineNumber="4597"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Add1&#95;Hi = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUAdde(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, RcpHi, MulHi1&#95;Hi, Add1&#95;Lo.getReg(1));</span></CodeLine>
<Link id="l04598" /><CodeLine lineNumber="4598"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Add1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, &#123;Add1&#95;Lo, Add1&#95;Hi&#125;);</span></CodeLine>
<Link id="l04599" /><CodeLine lineNumber="4599"></CodeLine>
<Link id="l04600" /><CodeLine lineNumber="4600"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MulLo2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMul(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, NegDenom, Add1);</span></CodeLine>
<Link id="l04601" /><CodeLine lineNumber="4601"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MulHi2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUMulH(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, Add1, MulLo2);</span></CodeLine>
<Link id="l04602" /><CodeLine lineNumber="4602"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> UnmergeMulHi2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, MulHi2);</span></CodeLine>
<Link id="l04603" /><CodeLine lineNumber="4603"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> MulHi2&#95;Lo = UnmergeMulHi2.getReg(0);</span></CodeLine>
<Link id="l04604" /><CodeLine lineNumber="4604"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> MulHi2&#95;Hi = UnmergeMulHi2.getReg(1);</span></CodeLine>
<Link id="l04605" /><CodeLine lineNumber="4605"></CodeLine>
<Link id="l04606" /><CodeLine lineNumber="4606"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Zero32 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 0);</span></CodeLine>
<Link id="l04607" /><CodeLine lineNumber="4607"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Add2&#95;Lo = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUAddo(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Add1&#95;Lo, MulHi2&#95;Lo);</span></CodeLine>
<Link id="l04608" /><CodeLine lineNumber="4608"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Add2&#95;Hi = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUAdde(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Add1&#95;Hi, MulHi2&#95;Hi, Add2&#95;Lo.getReg(1));</span></CodeLine>
<Link id="l04609" /><CodeLine lineNumber="4609"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Add2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, &#123;Add2&#95;Lo, Add2&#95;Hi&#125;);</span></CodeLine>
<Link id="l04610" /><CodeLine lineNumber="4610"></CodeLine>
<Link id="l04611" /><CodeLine lineNumber="4611"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> UnmergeNumer = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Numer);</span></CodeLine>
<Link id="l04612" /><CodeLine lineNumber="4612"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> NumerLo = UnmergeNumer.getReg(0);</span></CodeLine>
<Link id="l04613" /><CodeLine lineNumber="4613"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> NumerHi = UnmergeNumer.getReg(1);</span></CodeLine>
<Link id="l04614" /><CodeLine lineNumber="4614"></CodeLine>
<Link id="l04615" /><CodeLine lineNumber="4615"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MulHi3 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUMulH(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, Numer, Add2);</span></CodeLine>
<Link id="l04616" /><CodeLine lineNumber="4616"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Mul3 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMul(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, Denom, MulHi3);</span></CodeLine>
<Link id="l04617" /><CodeLine lineNumber="4617"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> UnmergeMul3 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Mul3);</span></CodeLine>
<Link id="l04618" /><CodeLine lineNumber="4618"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Mul3&#95;Lo = UnmergeMul3.getReg(0);</span></CodeLine>
<Link id="l04619" /><CodeLine lineNumber="4619"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Mul3&#95;Hi = UnmergeMul3.getReg(1);</span></CodeLine>
<Link id="l04620" /><CodeLine lineNumber="4620"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sub1&#95;Lo = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUSubo(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, NumerLo, Mul3&#95;Lo);</span></CodeLine>
<Link id="l04621" /><CodeLine lineNumber="4621"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sub1&#95;Hi = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUSube(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, NumerHi, Mul3&#95;Hi, Sub1&#95;Lo.getReg(1));</span></CodeLine>
<Link id="l04622" /><CodeLine lineNumber="4622"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sub1&#95;Mi = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSub(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, NumerHi, Mul3&#95;Hi);</span></CodeLine>
<Link id="l04623" /><CodeLine lineNumber="4623"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sub1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, &#123;Sub1&#95;Lo, Sub1&#95;Hi&#125;);</span></CodeLine>
<Link id="l04624" /><CodeLine lineNumber="4624"></CodeLine>
<Link id="l04625" /><CodeLine lineNumber="4625"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> UnmergeDenom = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Denom);</span></CodeLine>
<Link id="l04626" /><CodeLine lineNumber="4626"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DenomLo = UnmergeDenom.getReg(0);</span></CodeLine>
<Link id="l04627" /><CodeLine lineNumber="4627"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DenomHi = UnmergeDenom.getReg(1);</span></CodeLine>
<Link id="l04628" /><CodeLine lineNumber="4628"></CodeLine>
<Link id="l04629" /><CodeLine lineNumber="4629"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CmpHi = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP&#95;UGE</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Sub1&#95;Hi, DenomHi);</span></CodeLine>
<Link id="l04630" /><CodeLine lineNumber="4630"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> C1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSExt(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, CmpHi);</span></CodeLine>
<Link id="l04631" /><CodeLine lineNumber="4631"></CodeLine>
<Link id="l04632" /><CodeLine lineNumber="4632"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CmpLo = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP&#95;UGE</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Sub1&#95;Lo, DenomLo);</span></CodeLine>
<Link id="l04633" /><CodeLine lineNumber="4633"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> C2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSExt(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, CmpLo);</span></CodeLine>
<Link id="l04634" /><CodeLine lineNumber="4634"></CodeLine>
<Link id="l04635" /><CodeLine lineNumber="4635"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CmpEq = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP&#95;EQ</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Sub1&#95;Hi, DenomHi);</span></CodeLine>
<Link id="l04636" /><CodeLine lineNumber="4636"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> C3 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, CmpEq, C2, C1);</span></CodeLine>
<Link id="l04637" /><CodeLine lineNumber="4637"></CodeLine>
<Link id="l04638" /><CodeLine lineNumber="4638"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Here and below portions of the code can be enclosed into if/endif.</span></CodeLine>
<Link id="l04639" /><CodeLine lineNumber="4639"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Currently control flow is unconditional and we have 4 selects after</span></CodeLine>
<Link id="l04640" /><CodeLine lineNumber="4640"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// potential endif to substitute PHIs.</span></CodeLine>
<Link id="l04641" /><CodeLine lineNumber="4641"></CodeLine>
<Link id="l04642" /><CodeLine lineNumber="4642"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// if C3 != 0 ...</span></CodeLine>
<Link id="l04643" /><CodeLine lineNumber="4643"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sub2&#95;Lo = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUSubo(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Sub1&#95;Lo, DenomLo);</span></CodeLine>
<Link id="l04644" /><CodeLine lineNumber="4644"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sub2&#95;Mi = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUSube(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Sub1&#95;Mi, DenomHi, Sub1&#95;Lo.getReg(1));</span></CodeLine>
<Link id="l04645" /><CodeLine lineNumber="4645"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sub2&#95;Hi = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUSube(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Sub2&#95;Mi, Zero32, Sub2&#95;Lo.getReg(1));</span></CodeLine>
<Link id="l04646" /><CodeLine lineNumber="4646"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sub2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, &#123;Sub2&#95;Lo, Sub2&#95;Hi&#125;);</span></CodeLine>
<Link id="l04647" /><CodeLine lineNumber="4647"></CodeLine>
<Link id="l04648" /><CodeLine lineNumber="4648"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> One64 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, 1);</span></CodeLine>
<Link id="l04649" /><CodeLine lineNumber="4649"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Add3 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAdd(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, MulHi3, One64);</span></CodeLine>
<Link id="l04650" /><CodeLine lineNumber="4650"></CodeLine>
<Link id="l04651" /><CodeLine lineNumber="4651"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> C4 =</span></CodeLine>
<Link id="l04652" /><CodeLine lineNumber="4652"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSExt(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP&#95;UGE</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Sub2&#95;Hi, DenomHi));</span></CodeLine>
<Link id="l04653" /><CodeLine lineNumber="4653"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> C5 =</span></CodeLine>
<Link id="l04654" /><CodeLine lineNumber="4654"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSExt(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP&#95;UGE</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Sub2&#95;Lo, DenomLo));</span></CodeLine>
<Link id="l04655" /><CodeLine lineNumber="4655"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> C6 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(</span></CodeLine>
<Link id="l04656" /><CodeLine lineNumber="4656"><span class="doxyHighlight">      <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP&#95;EQ</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Sub2&#95;Hi, DenomHi), C5, C4);</span></CodeLine>
<Link id="l04657" /><CodeLine lineNumber="4657"></CodeLine>
<Link id="l04658" /><CodeLine lineNumber="4658"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// if (C6 != 0)</span></CodeLine>
<Link id="l04659" /><CodeLine lineNumber="4659"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Add4 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAdd(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, Add3, One64);</span></CodeLine>
<Link id="l04660" /><CodeLine lineNumber="4660"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sub3&#95;Lo = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUSubo(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Sub2&#95;Lo, DenomLo);</span></CodeLine>
<Link id="l04661" /><CodeLine lineNumber="4661"></CodeLine>
<Link id="l04662" /><CodeLine lineNumber="4662"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sub3&#95;Mi = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUSube(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Sub2&#95;Mi, DenomHi, Sub2&#95;Lo.getReg(1));</span></CodeLine>
<Link id="l04663" /><CodeLine lineNumber="4663"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sub3&#95;Hi = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUSube(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Sub3&#95;Mi, Zero32, Sub3&#95;Lo.getReg(1));</span></CodeLine>
<Link id="l04664" /><CodeLine lineNumber="4664"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sub3 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, &#123;Sub3&#95;Lo, Sub3&#95;Hi&#125;);</span></CodeLine>
<Link id="l04665" /><CodeLine lineNumber="4665"></CodeLine>
<Link id="l04666" /><CodeLine lineNumber="4666"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// endif C6</span></CodeLine>
<Link id="l04667" /><CodeLine lineNumber="4667"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// endif C3</span></CodeLine>
<Link id="l04668" /><CodeLine lineNumber="4668"></CodeLine>
<Link id="l04669" /><CodeLine lineNumber="4669"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DstDivReg) &#123;</span></CodeLine>
<Link id="l04670" /><CodeLine lineNumber="4670"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sel1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(</span></CodeLine>
<Link id="l04671" /><CodeLine lineNumber="4671"><span class="doxyHighlight">        <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP&#95;NE</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, C6, Zero32), Add4, Add3);</span></CodeLine>
<Link id="l04672" /><CodeLine lineNumber="4672"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(DstDivReg, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP&#95;NE</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, C3, Zero32),</span></CodeLine>
<Link id="l04673" /><CodeLine lineNumber="4673"><span class="doxyHighlight">                  Sel1, MulHi3);</span></CodeLine>
<Link id="l04674" /><CodeLine lineNumber="4674"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04675" /><CodeLine lineNumber="4675"></CodeLine>
<Link id="l04676" /><CodeLine lineNumber="4676"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DstRemReg) &#123;</span></CodeLine>
<Link id="l04677" /><CodeLine lineNumber="4677"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sel2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(</span></CodeLine>
<Link id="l04678" /><CodeLine lineNumber="4678"><span class="doxyHighlight">        <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP&#95;NE</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, C6, Zero32), Sub3, Sub2);</span></CodeLine>
<Link id="l04679" /><CodeLine lineNumber="4679"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(DstRemReg, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP&#95;NE</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, C3, Zero32),</span></CodeLine>
<Link id="l04680" /><CodeLine lineNumber="4680"><span class="doxyHighlight">                  Sel2, Sub1);</span></CodeLine>
<Link id="l04681" /><CodeLine lineNumber="4681"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04682" /><CodeLine lineNumber="4682"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04683" /><CodeLine lineNumber="4683"></CodeLine>
<Link id="l04684" /><CodeLine lineNumber="4684" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a1d0eafc5b0af4bf05b288d62caa72ac9"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a1d0eafc5b0af4bf05b288d62caa72ac9">AMDGPULegalizerInfo::legalizeUnsignedDIV&#95;REM</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l04685" /><CodeLine lineNumber="4685"><span class="doxyHighlight">                                                  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l04686" /><CodeLine lineNumber="4686"><span class="doxyHighlight">                                                  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04687" /><CodeLine lineNumber="4687"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DstDivReg, DstRemReg;</span></CodeLine>
<Link id="l04688" /><CodeLine lineNumber="4688"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) &#123;</span></CodeLine>
<Link id="l04689" /><CodeLine lineNumber="4689"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l04690" /><CodeLine lineNumber="4690"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;Unexpected opcode!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04691" /><CodeLine lineNumber="4691"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> AMDGPU::G&#95;UDIV: &#123;</span></CodeLine>
<Link id="l04692" /><CodeLine lineNumber="4692"><span class="doxyHighlight">    DstDivReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04693" /><CodeLine lineNumber="4693"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04694" /><CodeLine lineNumber="4694"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04695" /><CodeLine lineNumber="4695"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> AMDGPU::G&#95;UREM: &#123;</span></CodeLine>
<Link id="l04696" /><CodeLine lineNumber="4696"><span class="doxyHighlight">    DstRemReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04697" /><CodeLine lineNumber="4697"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04698" /><CodeLine lineNumber="4698"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04699" /><CodeLine lineNumber="4699"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> AMDGPU::G&#95;UDIVREM: &#123;</span></CodeLine>
<Link id="l04700" /><CodeLine lineNumber="4700"><span class="doxyHighlight">    DstDivReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04701" /><CodeLine lineNumber="4701"><span class="doxyHighlight">    DstRemReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l04702" /><CodeLine lineNumber="4702"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04703" /><CodeLine lineNumber="4703"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04704" /><CodeLine lineNumber="4704"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04705" /><CodeLine lineNumber="4705"></CodeLine>
<Link id="l04706" /><CodeLine lineNumber="4706"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</span></CodeLine>
<Link id="l04707" /><CodeLine lineNumber="4707"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l04708" /><CodeLine lineNumber="4708"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> FirstSrcOpIdx = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitDefs();</span></CodeLine>
<Link id="l04709" /><CodeLine lineNumber="4709"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Num = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(FirstSrcOpIdx).getReg();</span></CodeLine>
<Link id="l04710" /><CodeLine lineNumber="4710"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Den = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(FirstSrcOpIdx + 1).getReg();</span></CodeLine>
<Link id="l04711" /><CodeLine lineNumber="4711"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</span></CodeLine>
<Link id="l04712" /><CodeLine lineNumber="4712"></CodeLine>
<Link id="l04713" /><CodeLine lineNumber="4713"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l04714" /><CodeLine lineNumber="4714"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3db547888c8d2ed5323f320bb5763014">legalizeUnsignedDIV&#95;REM32Impl</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, DstDivReg, DstRemReg, Num, Den);</span></CodeLine>
<Link id="l04715" /><CodeLine lineNumber="4715"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l04716" /><CodeLine lineNumber="4716"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a93bbde2af63d129f752ef7c3a0f84c15">legalizeUnsignedDIV&#95;REM64Impl</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, DstDivReg, DstRemReg, Num, Den);</span></CodeLine>
<Link id="l04717" /><CodeLine lineNumber="4717"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l04718" /><CodeLine lineNumber="4718"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04719" /><CodeLine lineNumber="4719"></CodeLine>
<Link id="l04720" /><CodeLine lineNumber="4720"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l04721" /><CodeLine lineNumber="4721"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04722" /><CodeLine lineNumber="4722"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04723" /><CodeLine lineNumber="4723"></CodeLine>
<Link id="l04724" /><CodeLine lineNumber="4724" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#aba263b2348b84c2d9a10adc0a42d9606"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#aba263b2348b84c2d9a10adc0a42d9606">AMDGPULegalizerInfo::legalizeSignedDIV&#95;REM</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l04725" /><CodeLine lineNumber="4725"><span class="doxyHighlight">                                                <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l04726" /><CodeLine lineNumber="4726"><span class="doxyHighlight">                                                <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04727" /><CodeLine lineNumber="4727"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</span></CodeLine>
<Link id="l04728" /><CodeLine lineNumber="4728"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l04729" /><CodeLine lineNumber="4729"></CodeLine>
<Link id="l04730" /><CodeLine lineNumber="4730"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</span></CodeLine>
<Link id="l04731" /><CodeLine lineNumber="4731"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty != <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> &amp;&amp; Ty != <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l04732" /><CodeLine lineNumber="4732"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04733" /><CodeLine lineNumber="4733"></CodeLine>
<Link id="l04734" /><CodeLine lineNumber="4734"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> FirstSrcOpIdx = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitDefs();</span></CodeLine>
<Link id="l04735" /><CodeLine lineNumber="4735"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> LHS = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(FirstSrcOpIdx).getReg();</span></CodeLine>
<Link id="l04736" /><CodeLine lineNumber="4736"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> RHS = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(FirstSrcOpIdx + 1).getReg();</span></CodeLine>
<Link id="l04737" /><CodeLine lineNumber="4737"></CodeLine>
<Link id="l04738" /><CodeLine lineNumber="4738"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SignBitOffset = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Ty.getSizeInBits() - 1);</span></CodeLine>
<Link id="l04739" /><CodeLine lineNumber="4739"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> LHSign = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAShr(Ty, LHS, SignBitOffset);</span></CodeLine>
<Link id="l04740" /><CodeLine lineNumber="4740"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> RHSign = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAShr(Ty, RHS, SignBitOffset);</span></CodeLine>
<Link id="l04741" /><CodeLine lineNumber="4741"></CodeLine>
<Link id="l04742" /><CodeLine lineNumber="4742"><span class="doxyHighlight">  LHS = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAdd(Ty, LHS, LHSign).getReg(0);</span></CodeLine>
<Link id="l04743" /><CodeLine lineNumber="4743"><span class="doxyHighlight">  RHS = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAdd(Ty, RHS, RHSign).getReg(0);</span></CodeLine>
<Link id="l04744" /><CodeLine lineNumber="4744"></CodeLine>
<Link id="l04745" /><CodeLine lineNumber="4745"><span class="doxyHighlight">  LHS = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildXor(Ty, LHS, LHSign).getReg(0);</span></CodeLine>
<Link id="l04746" /><CodeLine lineNumber="4746"><span class="doxyHighlight">  RHS = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildXor(Ty, RHS, RHSign).getReg(0);</span></CodeLine>
<Link id="l04747" /><CodeLine lineNumber="4747"></CodeLine>
<Link id="l04748" /><CodeLine lineNumber="4748"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DstDivReg, DstRemReg, TmpDivReg, TmpRemReg;</span></CodeLine>
<Link id="l04749" /><CodeLine lineNumber="4749"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) &#123;</span></CodeLine>
<Link id="l04750" /><CodeLine lineNumber="4750"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l04751" /><CodeLine lineNumber="4751"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;Unexpected opcode!&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l04752" /><CodeLine lineNumber="4752"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> AMDGPU::G&#95;SDIV: &#123;</span></CodeLine>
<Link id="l04753" /><CodeLine lineNumber="4753"><span class="doxyHighlight">    DstDivReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04754" /><CodeLine lineNumber="4754"><span class="doxyHighlight">    TmpDivReg = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(Ty);</span></CodeLine>
<Link id="l04755" /><CodeLine lineNumber="4755"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04756" /><CodeLine lineNumber="4756"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04757" /><CodeLine lineNumber="4757"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> AMDGPU::G&#95;SREM: &#123;</span></CodeLine>
<Link id="l04758" /><CodeLine lineNumber="4758"><span class="doxyHighlight">    DstRemReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04759" /><CodeLine lineNumber="4759"><span class="doxyHighlight">    TmpRemReg = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(Ty);</span></CodeLine>
<Link id="l04760" /><CodeLine lineNumber="4760"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04761" /><CodeLine lineNumber="4761"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04762" /><CodeLine lineNumber="4762"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> AMDGPU::G&#95;SDIVREM: &#123;</span></CodeLine>
<Link id="l04763" /><CodeLine lineNumber="4763"><span class="doxyHighlight">    DstDivReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04764" /><CodeLine lineNumber="4764"><span class="doxyHighlight">    DstRemReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l04765" /><CodeLine lineNumber="4765"><span class="doxyHighlight">    TmpDivReg = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(Ty);</span></CodeLine>
<Link id="l04766" /><CodeLine lineNumber="4766"><span class="doxyHighlight">    TmpRemReg = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(Ty);</span></CodeLine>
<Link id="l04767" /><CodeLine lineNumber="4767"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04768" /><CodeLine lineNumber="4768"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04769" /><CodeLine lineNumber="4769"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04770" /><CodeLine lineNumber="4770"></CodeLine>
<Link id="l04771" /><CodeLine lineNumber="4771"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l04772" /><CodeLine lineNumber="4772"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3db547888c8d2ed5323f320bb5763014">legalizeUnsignedDIV&#95;REM32Impl</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, TmpDivReg, TmpRemReg, LHS, RHS);</span></CodeLine>
<Link id="l04773" /><CodeLine lineNumber="4773"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l04774" /><CodeLine lineNumber="4774"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a93bbde2af63d129f752ef7c3a0f84c15">legalizeUnsignedDIV&#95;REM64Impl</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, TmpDivReg, TmpRemReg, LHS, RHS);</span></CodeLine>
<Link id="l04775" /><CodeLine lineNumber="4775"></CodeLine>
<Link id="l04776" /><CodeLine lineNumber="4776"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DstDivReg) &#123;</span></CodeLine>
<Link id="l04777" /><CodeLine lineNumber="4777"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sign = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildXor(Ty, LHSign, RHSign).getReg(0);</span></CodeLine>
<Link id="l04778" /><CodeLine lineNumber="4778"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SignXor = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildXor(Ty, TmpDivReg, Sign).getReg(0);</span></CodeLine>
<Link id="l04779" /><CodeLine lineNumber="4779"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSub(DstDivReg, SignXor, Sign);</span></CodeLine>
<Link id="l04780" /><CodeLine lineNumber="4780"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04781" /><CodeLine lineNumber="4781"></CodeLine>
<Link id="l04782" /><CodeLine lineNumber="4782"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DstRemReg) &#123;</span></CodeLine>
<Link id="l04783" /><CodeLine lineNumber="4783"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sign = LHSign.getReg(0); </span><span class="doxyHighlightComment">// Remainder sign is the same as LHS</span></CodeLine>
<Link id="l04784" /><CodeLine lineNumber="4784"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SignXor = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildXor(Ty, TmpRemReg, Sign).getReg(0);</span></CodeLine>
<Link id="l04785" /><CodeLine lineNumber="4785"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSub(DstRemReg, SignXor, Sign);</span></CodeLine>
<Link id="l04786" /><CodeLine lineNumber="4786"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04787" /><CodeLine lineNumber="4787"></CodeLine>
<Link id="l04788" /><CodeLine lineNumber="4788"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l04789" /><CodeLine lineNumber="4789"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04790" /><CodeLine lineNumber="4790"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04791" /><CodeLine lineNumber="4791"></CodeLine>
<Link id="l04792" /><CodeLine lineNumber="4792" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#aa71647a93d5e73c28332b6e52407979c"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#aa71647a93d5e73c28332b6e52407979c">AMDGPULegalizerInfo::legalizeFastUnsafeFDIV</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l04793" /><CodeLine lineNumber="4793"><span class="doxyHighlight">                                                 <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l04794" /><CodeLine lineNumber="4794"><span class="doxyHighlight">                                                 <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04795" /><CodeLine lineNumber="4795"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Res = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04796" /><CodeLine lineNumber="4796"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> LHS = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l04797" /><CodeLine lineNumber="4797"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> RHS = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l04798" /><CodeLine lineNumber="4798"><span class="doxyHighlight">  uint16&#95;t Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l04799" /><CodeLine lineNumber="4799"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> ResTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Res);</span></CodeLine>
<Link id="l04800" /><CodeLine lineNumber="4800"></CodeLine>
<Link id="l04801" /><CodeLine lineNumber="4801"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF();</span></CodeLine>
<Link id="l04802" /><CodeLine lineNumber="4802"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> AllowInaccurateRcp = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlag(<a href="/docs/api/classes/llvm/machineinstr/#aafacf84de1cb994a92dc045f4aa1d518a4802af6d0cf3b900adb6296bccedf2a0">MachineInstr::FmAfn</a>) ||</span></CodeLine>
<Link id="l04803" /><CodeLine lineNumber="4803"><span class="doxyHighlight">                            MF.<a href="/docs/api/classes/llvm/machinefunction/#af777ff93c9e07a6ff5ffe3226deb3e76">getTarget</a>().<a href="/docs/api/classes/llvm/targetmachine/#ab1fb67187fc37e569cc5171cbebba873">Options</a>.<a href="/docs/api/classes/llvm/targetoptions/#a0544e2966374684ff74255e5a4290fa7">UnsafeFPMath</a>;</span></CodeLine>
<Link id="l04804" /><CodeLine lineNumber="4804"></CodeLine>
<Link id="l04805" /><CodeLine lineNumber="4805"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> &#42;CLHS = <a href="/docs/api/namespaces/llvm/#a1175ca529ece1df77d922f75a8726f56">getConstantFPVRegVal</a>(LHS, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>)) &#123;</span></CodeLine>
<Link id="l04806" /><CodeLine lineNumber="4806"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!AllowInaccurateRcp &amp;&amp; ResTy != <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16))</span></CodeLine>
<Link id="l04807" /><CodeLine lineNumber="4807"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04808" /><CodeLine lineNumber="4808"></CodeLine>
<Link id="l04809" /><CodeLine lineNumber="4809"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// v&#95;rcp&#95;f32 and v&#95;rsq&#95;f32 do not support denormals, and according to</span></CodeLine>
<Link id="l04810" /><CodeLine lineNumber="4810"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// the CI documentation has a worst case error of 1 ulp.</span></CodeLine>
<Link id="l04811" /><CodeLine lineNumber="4811"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// OpenCL requires &lt;= 2.5 ulp for 1 / x, so it should always be OK to</span></CodeLine>
<Link id="l04812" /><CodeLine lineNumber="4812"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// use it as long as we aren&#39;t trying to use denormals.</span></CodeLine>
<Link id="l04813" /><CodeLine lineNumber="4813"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l04814" /><CodeLine lineNumber="4814"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// v&#95;rcp&#95;f16 and v&#95;rsq&#95;f16 DO support denormals and 0.51ulp.</span></CodeLine>
<Link id="l04815" /><CodeLine lineNumber="4815"></CodeLine>
<Link id="l04816" /><CodeLine lineNumber="4816"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// 1 / x -&gt; RCP(x)</span></CodeLine>
<Link id="l04817" /><CodeLine lineNumber="4817"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CLHS-&gt;isExactlyValue(1.0)) &#123;</span></CodeLine>
<Link id="l04818" /><CodeLine lineNumber="4818"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;rcp, Res)</span></CodeLine>
<Link id="l04819" /><CodeLine lineNumber="4819"><span class="doxyHighlight">          .addUse(RHS)</span></CodeLine>
<Link id="l04820" /><CodeLine lineNumber="4820"><span class="doxyHighlight">          .setMIFlags(Flags);</span></CodeLine>
<Link id="l04821" /><CodeLine lineNumber="4821"></CodeLine>
<Link id="l04822" /><CodeLine lineNumber="4822"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l04823" /><CodeLine lineNumber="4823"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04824" /><CodeLine lineNumber="4824"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04825" /><CodeLine lineNumber="4825"></CodeLine>
<Link id="l04826" /><CodeLine lineNumber="4826"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// -1 / x -&gt; RCP( FNEG(x) )</span></CodeLine>
<Link id="l04827" /><CodeLine lineNumber="4827"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (CLHS-&gt;isExactlyValue(-1.0)) &#123;</span></CodeLine>
<Link id="l04828" /><CodeLine lineNumber="4828"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> FNeg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFNeg(ResTy, RHS, Flags);</span></CodeLine>
<Link id="l04829" /><CodeLine lineNumber="4829"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;rcp, Res)</span></CodeLine>
<Link id="l04830" /><CodeLine lineNumber="4830"><span class="doxyHighlight">          .addUse(FNeg.getReg(0))</span></CodeLine>
<Link id="l04831" /><CodeLine lineNumber="4831"><span class="doxyHighlight">          .setMIFlags(Flags);</span></CodeLine>
<Link id="l04832" /><CodeLine lineNumber="4832"></CodeLine>
<Link id="l04833" /><CodeLine lineNumber="4833"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l04834" /><CodeLine lineNumber="4834"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04835" /><CodeLine lineNumber="4835"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l04836" /><CodeLine lineNumber="4836"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04837" /><CodeLine lineNumber="4837"></CodeLine>
<Link id="l04838" /><CodeLine lineNumber="4838"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For f16 require afn or arcp.</span></CodeLine>
<Link id="l04839" /><CodeLine lineNumber="4839"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For f32 require afn.</span></CodeLine>
<Link id="l04840" /><CodeLine lineNumber="4840"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!AllowInaccurateRcp &amp;&amp; (ResTy != <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16) ||</span></CodeLine>
<Link id="l04841" /><CodeLine lineNumber="4841"><span class="doxyHighlight">                              !<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlag(<a href="/docs/api/classes/llvm/machineinstr/#aafacf84de1cb994a92dc045f4aa1d518a43892bfec2e4bb79639d4b4f1cf28ae8">MachineInstr::FmArcp</a>)))</span></CodeLine>
<Link id="l04842" /><CodeLine lineNumber="4842"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04843" /><CodeLine lineNumber="4843"></CodeLine>
<Link id="l04844" /><CodeLine lineNumber="4844"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// x / y -&gt; x &#42; (1.0 / y)</span></CodeLine>
<Link id="l04845" /><CodeLine lineNumber="4845"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> RCP = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;rcp, &#123;ResTy&#125;)</span></CodeLine>
<Link id="l04846" /><CodeLine lineNumber="4846"><span class="doxyHighlight">                 .addUse(RHS)</span></CodeLine>
<Link id="l04847" /><CodeLine lineNumber="4847"><span class="doxyHighlight">                 .setMIFlags(Flags);</span></CodeLine>
<Link id="l04848" /><CodeLine lineNumber="4848"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(Res, LHS, RCP, Flags);</span></CodeLine>
<Link id="l04849" /><CodeLine lineNumber="4849"></CodeLine>
<Link id="l04850" /><CodeLine lineNumber="4850"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l04851" /><CodeLine lineNumber="4851"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04852" /><CodeLine lineNumber="4852"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04853" /><CodeLine lineNumber="4853"></CodeLine>
<Link id="l04854" /><CodeLine lineNumber="4854" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#ac0184339c875630ffed0e19b55899b82"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ac0184339c875630ffed0e19b55899b82">AMDGPULegalizerInfo::legalizeFastUnsafeFDIV64</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l04855" /><CodeLine lineNumber="4855"><span class="doxyHighlight">                                                   <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l04856" /><CodeLine lineNumber="4856"><span class="doxyHighlight">                                                   <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04857" /><CodeLine lineNumber="4857"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Res = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04858" /><CodeLine lineNumber="4858"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l04859" /><CodeLine lineNumber="4859"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l04860" /><CodeLine lineNumber="4860"><span class="doxyHighlight">  uint16&#95;t Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l04861" /><CodeLine lineNumber="4861"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> ResTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Res);</span></CodeLine>
<Link id="l04862" /><CodeLine lineNumber="4862"></CodeLine>
<Link id="l04863" /><CodeLine lineNumber="4863"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF();</span></CodeLine>
<Link id="l04864" /><CodeLine lineNumber="4864"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> AllowInaccurateRcp = MF.<a href="/docs/api/classes/llvm/machinefunction/#af777ff93c9e07a6ff5ffe3226deb3e76">getTarget</a>().<a href="/docs/api/classes/llvm/targetmachine/#ab1fb67187fc37e569cc5171cbebba873">Options</a>.<a href="/docs/api/classes/llvm/targetoptions/#a0544e2966374684ff74255e5a4290fa7">UnsafeFPMath</a> ||</span></CodeLine>
<Link id="l04865" /><CodeLine lineNumber="4865"><span class="doxyHighlight">                            <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlag(<a href="/docs/api/classes/llvm/machineinstr/#aafacf84de1cb994a92dc045f4aa1d518a4802af6d0cf3b900adb6296bccedf2a0">MachineInstr::FmAfn</a>);</span></CodeLine>
<Link id="l04866" /><CodeLine lineNumber="4866"></CodeLine>
<Link id="l04867" /><CodeLine lineNumber="4867"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!AllowInaccurateRcp)</span></CodeLine>
<Link id="l04868" /><CodeLine lineNumber="4868"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04869" /><CodeLine lineNumber="4869"></CodeLine>
<Link id="l04870" /><CodeLine lineNumber="4870"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegY = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFNeg(ResTy, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>);</span></CodeLine>
<Link id="l04871" /><CodeLine lineNumber="4871"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> One = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(ResTy, 1.0);</span></CodeLine>
<Link id="l04872" /><CodeLine lineNumber="4872"></CodeLine>
<Link id="l04873" /><CodeLine lineNumber="4873"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> R = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;rcp, &#123;ResTy&#125;)</span></CodeLine>
<Link id="l04874" /><CodeLine lineNumber="4874"><span class="doxyHighlight">               .addUse(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#a262774d3e5186511427e5b2414a85f7f">Y</a>)</span></CodeLine>
<Link id="l04875" /><CodeLine lineNumber="4875"><span class="doxyHighlight">               .setMIFlags(Flags);</span></CodeLine>
<Link id="l04876" /><CodeLine lineNumber="4876"></CodeLine>
<Link id="l04877" /><CodeLine lineNumber="4877"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Tmp0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(ResTy, NegY, R, One);</span></CodeLine>
<Link id="l04878" /><CodeLine lineNumber="4878"><span class="doxyHighlight">  R = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(ResTy, Tmp0, R, R);</span></CodeLine>
<Link id="l04879" /><CodeLine lineNumber="4879"></CodeLine>
<Link id="l04880" /><CodeLine lineNumber="4880"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Tmp1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(ResTy, NegY, R, One);</span></CodeLine>
<Link id="l04881" /><CodeLine lineNumber="4881"><span class="doxyHighlight">  R = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(ResTy, Tmp1, R, R);</span></CodeLine>
<Link id="l04882" /><CodeLine lineNumber="4882"></CodeLine>
<Link id="l04883" /><CodeLine lineNumber="4883"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Ret = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(ResTy, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, R);</span></CodeLine>
<Link id="l04884" /><CodeLine lineNumber="4884"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Tmp2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(ResTy, NegY, Ret, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>);</span></CodeLine>
<Link id="l04885" /><CodeLine lineNumber="4885"></CodeLine>
<Link id="l04886" /><CodeLine lineNumber="4886"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(Res, Tmp2, R, Ret);</span></CodeLine>
<Link id="l04887" /><CodeLine lineNumber="4887"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l04888" /><CodeLine lineNumber="4888"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04889" /><CodeLine lineNumber="4889"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04890" /><CodeLine lineNumber="4890"></CodeLine>
<Link id="l04891" /><CodeLine lineNumber="4891" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a6451bf061f754edbcd6043a20bfc663c"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a6451bf061f754edbcd6043a20bfc663c">AMDGPULegalizerInfo::legalizeFDIV16</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l04892" /><CodeLine lineNumber="4892"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l04893" /><CodeLine lineNumber="4893"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04894" /><CodeLine lineNumber="4894"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#aa71647a93d5e73c28332b6e52407979c">legalizeFastUnsafeFDIV</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>))</span></CodeLine>
<Link id="l04895" /><CodeLine lineNumber="4895"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04896" /><CodeLine lineNumber="4896"></CodeLine>
<Link id="l04897" /><CodeLine lineNumber="4897"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Res = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04898" /><CodeLine lineNumber="4898"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> LHS = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l04899" /><CodeLine lineNumber="4899"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> RHS = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l04900" /><CodeLine lineNumber="4900"></CodeLine>
<Link id="l04901" /><CodeLine lineNumber="4901"><span class="doxyHighlight">  uint16&#95;t Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l04902" /><CodeLine lineNumber="4902"></CodeLine>
<Link id="l04903" /><CodeLine lineNumber="4903"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</span></CodeLine>
<Link id="l04904" /><CodeLine lineNumber="4904"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l04905" /><CodeLine lineNumber="4905"></CodeLine>
<Link id="l04906" /><CodeLine lineNumber="4906"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// a32.u = opx(V&#95;CVT&#95;F32&#95;F16, a.u); // CVT to F32</span></CodeLine>
<Link id="l04907" /><CodeLine lineNumber="4907"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// b32.u = opx(V&#95;CVT&#95;F32&#95;F16, b.u); // CVT to F32</span></CodeLine>
<Link id="l04908" /><CodeLine lineNumber="4908"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// r32.u = opx(V&#95;RCP&#95;F32, b32.u); // rcp = 1 / d</span></CodeLine>
<Link id="l04909" /><CodeLine lineNumber="4909"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// q32.u = opx(V&#95;MUL&#95;F32, a32.u, r32.u); // q = n &#42; rcp</span></CodeLine>
<Link id="l04910" /><CodeLine lineNumber="4910"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// e32.u = opx(V&#95;MAD&#95;F32, (b32.u^&#95;neg32), q32.u, a32.u); // err = -d &#42; q + n</span></CodeLine>
<Link id="l04911" /><CodeLine lineNumber="4911"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// q32.u = opx(V&#95;MAD&#95;F32, e32.u, r32.u, q32.u); // q = n &#42; rcp</span></CodeLine>
<Link id="l04912" /><CodeLine lineNumber="4912"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// e32.u = opx(V&#95;MAD&#95;F32, (b32.u^&#95;neg32), q32.u, a32.u); // err = -d &#42; q + n</span></CodeLine>
<Link id="l04913" /><CodeLine lineNumber="4913"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// tmp.u = opx(V&#95;MUL&#95;F32, e32.u, r32.u);</span></CodeLine>
<Link id="l04914" /><CodeLine lineNumber="4914"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// tmp.u = opx(V&#95;AND&#95;B32, tmp.u, 0xff800000)</span></CodeLine>
<Link id="l04915" /><CodeLine lineNumber="4915"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// q32.u = opx(V&#95;ADD&#95;F32, tmp.u, q32.u);</span></CodeLine>
<Link id="l04916" /><CodeLine lineNumber="4916"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// q16.u = opx(V&#95;CVT&#95;F16&#95;F32, q32.u);</span></CodeLine>
<Link id="l04917" /><CodeLine lineNumber="4917"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// q16.u = opx(V&#95;DIV&#95;FIXUP&#95;F16, q16.u, b.u, a.u); // q = touchup(q, d, n)</span></CodeLine>
<Link id="l04918" /><CodeLine lineNumber="4918"></CodeLine>
<Link id="l04919" /><CodeLine lineNumber="4919"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> LHSExt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPExt(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LHS, Flags);</span></CodeLine>
<Link id="l04920" /><CodeLine lineNumber="4920"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> RHSExt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPExt(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, RHS, Flags);</span></CodeLine>
<Link id="l04921" /><CodeLine lineNumber="4921"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegRHSExt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFNeg(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, RHSExt);</span></CodeLine>
<Link id="l04922" /><CodeLine lineNumber="4922"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Rcp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;rcp, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l04923" /><CodeLine lineNumber="4923"><span class="doxyHighlight">                 .addUse(RHSExt.getReg(0))</span></CodeLine>
<Link id="l04924" /><CodeLine lineNumber="4924"><span class="doxyHighlight">                 .setMIFlags(Flags);</span></CodeLine>
<Link id="l04925" /><CodeLine lineNumber="4925"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Quot = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LHSExt, Rcp, Flags);</span></CodeLine>
<Link id="l04926" /><CodeLine lineNumber="4926"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a> Err;</span></CodeLine>
<Link id="l04927" /><CodeLine lineNumber="4927"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasMadMacF32Insts()) &#123;</span></CodeLine>
<Link id="l04928" /><CodeLine lineNumber="4928"><span class="doxyHighlight">    Err = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMAD(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, NegRHSExt, Quot, LHSExt, Flags);</span></CodeLine>
<Link id="l04929" /><CodeLine lineNumber="4929"><span class="doxyHighlight">    Quot = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMAD(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Err, Rcp, Quot, Flags);</span></CodeLine>
<Link id="l04930" /><CodeLine lineNumber="4930"><span class="doxyHighlight">    Err = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMAD(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, NegRHSExt, Quot, LHSExt, Flags);</span></CodeLine>
<Link id="l04931" /><CodeLine lineNumber="4931"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04932" /><CodeLine lineNumber="4932"><span class="doxyHighlight">    Err = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, NegRHSExt, Quot, LHSExt, Flags);</span></CodeLine>
<Link id="l04933" /><CodeLine lineNumber="4933"><span class="doxyHighlight">    Quot = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Err, Rcp, Quot, Flags);</span></CodeLine>
<Link id="l04934" /><CodeLine lineNumber="4934"><span class="doxyHighlight">    Err = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, NegRHSExt, Quot, LHSExt, Flags);</span></CodeLine>
<Link id="l04935" /><CodeLine lineNumber="4935"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04936" /><CodeLine lineNumber="4936"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Tmp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Err, Rcp, Flags);</span></CodeLine>
<Link id="l04937" /><CodeLine lineNumber="4937"><span class="doxyHighlight">  Tmp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnd(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Tmp, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 0xff800000));</span></CodeLine>
<Link id="l04938" /><CodeLine lineNumber="4938"><span class="doxyHighlight">  Quot = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFAdd(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Tmp, Quot, Flags);</span></CodeLine>
<Link id="l04939" /><CodeLine lineNumber="4939"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> RDst = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPTrunc(<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, Quot, Flags);</span></CodeLine>
<Link id="l04940" /><CodeLine lineNumber="4940"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;div&#95;fixup, Res)</span></CodeLine>
<Link id="l04941" /><CodeLine lineNumber="4941"><span class="doxyHighlight">      .addUse(RDst.getReg(0))</span></CodeLine>
<Link id="l04942" /><CodeLine lineNumber="4942"><span class="doxyHighlight">      .addUse(RHS)</span></CodeLine>
<Link id="l04943" /><CodeLine lineNumber="4943"><span class="doxyHighlight">      .addUse(LHS)</span></CodeLine>
<Link id="l04944" /><CodeLine lineNumber="4944"><span class="doxyHighlight">      .setMIFlags(Flags);</span></CodeLine>
<Link id="l04945" /><CodeLine lineNumber="4945"></CodeLine>
<Link id="l04946" /><CodeLine lineNumber="4946"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l04947" /><CodeLine lineNumber="4947"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04948" /><CodeLine lineNumber="4948"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04949" /><CodeLine lineNumber="4949"></CodeLine>
<Link id="l04950" /><CodeLine lineNumber="4950" lineLink="#a795662e773d2eda28caf873fa6eb70c4"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">constexpr</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="#a795662e773d2eda28caf873fa6eb70c4">SPDenormModeBitField</a> =</span></CodeLine>
<Link id="l04951" /><CodeLine lineNumber="4951"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/amdgpu/encodingfields/#a03c632ab947ee3f16c67594f7e010ef5">AMDGPU::Hwreg::HwregEncoding::encode</a>(<a href="/docs/api/namespaces/llvm/amdgpu/hwreg/#a018924463515df5f66f3c5a039750da8aebfc48ed48afe18e84417d0de513b6bb">AMDGPU::Hwreg::ID&#95;MODE</a>, 4, 2);</span></CodeLine>
<Link id="l04952" /><CodeLine lineNumber="4952"></CodeLine>
<Link id="l04953" /><CodeLine lineNumber="4953"><span class="doxyHighlightComment">// Enable or disable FP32 denorm mode. When &#39;Enable&#39; is true, emit instructions</span></CodeLine>
<Link id="l04954" /><CodeLine lineNumber="4954"><span class="doxyHighlightComment">// to enable denorm mode. When &#39;Enable&#39; is false, disable denorm mode.</span></CodeLine>
<Link id="l04955" /><CodeLine lineNumber="4955" lineLink="#abceca15aff80aa1ea3b5e7603981f878"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="#abceca15aff80aa1ea3b5e7603981f878">toggleSPDenormMode</a>(</span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/codegen/lib/codegen/asmprinter/dwarfdebug-cpp/#aaf2a32c0f2738e57cac623b73b2c88aba80cb2080e90221d1f5b425387d9bd030">Enable</a>, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l04956" /><CodeLine lineNumber="4956"><span class="doxyHighlight">                               </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/gcnsubtarget">GCNSubtarget</a> &amp;ST,</span></CodeLine>
<Link id="l04957" /><CodeLine lineNumber="4957"><span class="doxyHighlight">                               <a href="/docs/api/structs/llvm/simoderegisterdefaults">SIModeRegisterDefaults</a> <a href="/docs/api/files/lib/lib/codegen/regallocevictionadvisor-cpp/#aef71c4b21823f236e70cc6d62375adcd">Mode</a>) &#123;</span></CodeLine>
<Link id="l04958" /><CodeLine lineNumber="4958"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Set SP denorm mode to this value.</span></CodeLine>
<Link id="l04959" /><CodeLine lineNumber="4959"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SPDenormMode =</span></CodeLine>
<Link id="l04960" /><CodeLine lineNumber="4960"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/asmprinter/dwarfdebug-cpp/#aaf2a32c0f2738e57cac623b73b2c88aba80cb2080e90221d1f5b425387d9bd030">Enable</a> ? <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/sidefines-h/#a794476833214d5191d905cb35da453a8">FP&#95;DENORM&#95;FLUSH&#95;NONE</a> : <a href="/docs/api/files/lib/lib/codegen/regallocevictionadvisor-cpp/#aef71c4b21823f236e70cc6d62375adcd">Mode</a>.fpDenormModeSPValue();</span></CodeLine>
<Link id="l04961" /><CodeLine lineNumber="4961"></CodeLine>
<Link id="l04962" /><CodeLine lineNumber="4962"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasDenormModeInst()) &#123;</span></CodeLine>
<Link id="l04963" /><CodeLine lineNumber="4963"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Preserve default FP64FP16 denorm mode while updating FP32 mode.</span></CodeLine>
<Link id="l04964" /><CodeLine lineNumber="4964"><span class="doxyHighlight">    uint32&#95;t DPDenormModeDefault = <a href="/docs/api/files/lib/lib/codegen/regallocevictionadvisor-cpp/#aef71c4b21823f236e70cc6d62375adcd">Mode</a>.fpDenormModeDPValue();</span></CodeLine>
<Link id="l04965" /><CodeLine lineNumber="4965"></CodeLine>
<Link id="l04966" /><CodeLine lineNumber="4966"><span class="doxyHighlight">    uint32&#95;t NewDenormModeValue = SPDenormMode | (DPDenormModeDefault &lt;&lt; 2);</span></CodeLine>
<Link id="l04967" /><CodeLine lineNumber="4967"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::S&#95;DENORM&#95;MODE)</span></CodeLine>
<Link id="l04968" /><CodeLine lineNumber="4968"><span class="doxyHighlight">      .addImm(NewDenormModeValue);</span></CodeLine>
<Link id="l04969" /><CodeLine lineNumber="4969"></CodeLine>
<Link id="l04970" /><CodeLine lineNumber="4970"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l04971" /><CodeLine lineNumber="4971"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::S&#95;SETREG&#95;IMM32&#95;B32)</span></CodeLine>
<Link id="l04972" /><CodeLine lineNumber="4972"><span class="doxyHighlight">      .addImm(SPDenormMode)</span></CodeLine>
<Link id="l04973" /><CodeLine lineNumber="4973"><span class="doxyHighlight">      .addImm(<a href="#a795662e773d2eda28caf873fa6eb70c4">SPDenormModeBitField</a>);</span></CodeLine>
<Link id="l04974" /><CodeLine lineNumber="4974"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l04975" /><CodeLine lineNumber="4975"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l04976" /><CodeLine lineNumber="4976"></CodeLine>
<Link id="l04977" /><CodeLine lineNumber="4977" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a464ac3e6051fb78eb3ee985975d17cb2"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a464ac3e6051fb78eb3ee985975d17cb2">AMDGPULegalizerInfo::legalizeFDIV32</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l04978" /><CodeLine lineNumber="4978"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l04979" /><CodeLine lineNumber="4979"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l04980" /><CodeLine lineNumber="4980"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#aa71647a93d5e73c28332b6e52407979c">legalizeFastUnsafeFDIV</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>))</span></CodeLine>
<Link id="l04981" /><CodeLine lineNumber="4981"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l04982" /><CodeLine lineNumber="4982"></CodeLine>
<Link id="l04983" /><CodeLine lineNumber="4983"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Res = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l04984" /><CodeLine lineNumber="4984"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> LHS = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l04985" /><CodeLine lineNumber="4985"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> RHS = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l04986" /><CodeLine lineNumber="4986"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a> &#42;MFI = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF().getInfo&lt;<a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a>&gt;();</span></CodeLine>
<Link id="l04987" /><CodeLine lineNumber="4987"><span class="doxyHighlight">  <a href="/docs/api/structs/llvm/simoderegisterdefaults">SIModeRegisterDefaults</a> Mode = MFI-&gt;<a href="/docs/api/classes/llvm/simachinefunctioninfo/#a6012de9a1299d35e205f652abc3baf77">getMode</a>();</span></CodeLine>
<Link id="l04988" /><CodeLine lineNumber="4988"></CodeLine>
<Link id="l04989" /><CodeLine lineNumber="4989"><span class="doxyHighlight">  uint16&#95;t Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l04990" /><CodeLine lineNumber="4990"></CodeLine>
<Link id="l04991" /><CodeLine lineNumber="4991"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l04992" /><CodeLine lineNumber="4992"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</span></CodeLine>
<Link id="l04993" /><CodeLine lineNumber="4993"></CodeLine>
<Link id="l04994" /><CodeLine lineNumber="4994"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> One = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 1.0f);</span></CodeLine>
<Link id="l04995" /><CodeLine lineNumber="4995"></CodeLine>
<Link id="l04996" /><CodeLine lineNumber="4996"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> DenominatorScaled =</span></CodeLine>
<Link id="l04997" /><CodeLine lineNumber="4997"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;div&#95;scale, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>&#125;)</span></CodeLine>
<Link id="l04998" /><CodeLine lineNumber="4998"><span class="doxyHighlight">          .addUse(LHS)</span></CodeLine>
<Link id="l04999" /><CodeLine lineNumber="4999"><span class="doxyHighlight">          .addUse(RHS)</span></CodeLine>
<Link id="l05000" /><CodeLine lineNumber="5000"><span class="doxyHighlight">          .addImm(0)</span></CodeLine>
<Link id="l05001" /><CodeLine lineNumber="5001"><span class="doxyHighlight">          .setMIFlags(Flags);</span></CodeLine>
<Link id="l05002" /><CodeLine lineNumber="5002"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NumeratorScaled =</span></CodeLine>
<Link id="l05003" /><CodeLine lineNumber="5003"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;div&#95;scale, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>&#125;)</span></CodeLine>
<Link id="l05004" /><CodeLine lineNumber="5004"><span class="doxyHighlight">          .addUse(LHS)</span></CodeLine>
<Link id="l05005" /><CodeLine lineNumber="5005"><span class="doxyHighlight">          .addUse(RHS)</span></CodeLine>
<Link id="l05006" /><CodeLine lineNumber="5006"><span class="doxyHighlight">          .addImm(1)</span></CodeLine>
<Link id="l05007" /><CodeLine lineNumber="5007"><span class="doxyHighlight">          .setMIFlags(Flags);</span></CodeLine>
<Link id="l05008" /><CodeLine lineNumber="5008"></CodeLine>
<Link id="l05009" /><CodeLine lineNumber="5009"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ApproxRcp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;rcp, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l05010" /><CodeLine lineNumber="5010"><span class="doxyHighlight">                       .addUse(DenominatorScaled.getReg(0))</span></CodeLine>
<Link id="l05011" /><CodeLine lineNumber="5011"><span class="doxyHighlight">                       .setMIFlags(Flags);</span></CodeLine>
<Link id="l05012" /><CodeLine lineNumber="5012"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegDivScale0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFNeg(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, DenominatorScaled, Flags);</span></CodeLine>
<Link id="l05013" /><CodeLine lineNumber="5013"></CodeLine>
<Link id="l05014" /><CodeLine lineNumber="5014"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> PreservesDenormals = Mode.FP32Denormals == <a href="/docs/api/structs/llvm/denormalmode/#afc06bc91a5873ec7efe616b733f2c5c8">DenormalMode::getIEEE</a>();</span></CodeLine>
<Link id="l05015" /><CodeLine lineNumber="5015"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> HasDynamicDenormals =</span></CodeLine>
<Link id="l05016" /><CodeLine lineNumber="5016"><span class="doxyHighlight">      (Mode.FP32Denormals.Input == <a href="/docs/api/structs/llvm/denormalmode/#a29b26e3ae30f3f6ec4106ff181282893ab6083e266013055b6c2ef85b1e47444c">DenormalMode::Dynamic</a>) ||</span></CodeLine>
<Link id="l05017" /><CodeLine lineNumber="5017"><span class="doxyHighlight">      (Mode.FP32Denormals.Output == <a href="/docs/api/structs/llvm/denormalmode/#a29b26e3ae30f3f6ec4106ff181282893ab6083e266013055b6c2ef85b1e47444c">DenormalMode::Dynamic</a>);</span></CodeLine>
<Link id="l05018" /><CodeLine lineNumber="5018"></CodeLine>
<Link id="l05019" /><CodeLine lineNumber="5019"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> SavedSPDenormMode;</span></CodeLine>
<Link id="l05020" /><CodeLine lineNumber="5020"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!PreservesDenormals) &#123;</span></CodeLine>
<Link id="l05021" /><CodeLine lineNumber="5021"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (HasDynamicDenormals) &#123;</span></CodeLine>
<Link id="l05022" /><CodeLine lineNumber="5022"><span class="doxyHighlight">      SavedSPDenormMode = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createVirtualRegister(&amp;AMDGPU::SReg&#95;32RegClass);</span></CodeLine>
<Link id="l05023" /><CodeLine lineNumber="5023"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::S&#95;GETREG&#95;B32)</span></CodeLine>
<Link id="l05024" /><CodeLine lineNumber="5024"><span class="doxyHighlight">          .addDef(SavedSPDenormMode)</span></CodeLine>
<Link id="l05025" /><CodeLine lineNumber="5025"><span class="doxyHighlight">          .addImm(<a href="#a795662e773d2eda28caf873fa6eb70c4">SPDenormModeBitField</a>);</span></CodeLine>
<Link id="l05026" /><CodeLine lineNumber="5026"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05027" /><CodeLine lineNumber="5027"><span class="doxyHighlight">    <a href="#abceca15aff80aa1ea3b5e7603981f878">toggleSPDenormMode</a>(</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, ST, Mode);</span></CodeLine>
<Link id="l05028" /><CodeLine lineNumber="5028"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05029" /><CodeLine lineNumber="5029"></CodeLine>
<Link id="l05030" /><CodeLine lineNumber="5030"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fma0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, NegDivScale0, ApproxRcp, One, Flags);</span></CodeLine>
<Link id="l05031" /><CodeLine lineNumber="5031"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fma1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Fma0, ApproxRcp, ApproxRcp, Flags);</span></CodeLine>
<Link id="l05032" /><CodeLine lineNumber="5032"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, NumeratorScaled, Fma1, Flags);</span></CodeLine>
<Link id="l05033" /><CodeLine lineNumber="5033"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fma2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, NegDivScale0, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>, NumeratorScaled, Flags);</span></CodeLine>
<Link id="l05034" /><CodeLine lineNumber="5034"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fma3 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Fma2, Fma1, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>, Flags);</span></CodeLine>
<Link id="l05035" /><CodeLine lineNumber="5035"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fma4 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, NegDivScale0, Fma3, NumeratorScaled, Flags);</span></CodeLine>
<Link id="l05036" /><CodeLine lineNumber="5036"></CodeLine>
<Link id="l05037" /><CodeLine lineNumber="5037"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!PreservesDenormals) &#123;</span></CodeLine>
<Link id="l05038" /><CodeLine lineNumber="5038"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (HasDynamicDenormals) &#123;</span></CodeLine>
<Link id="l05039" /><CodeLine lineNumber="5039"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SavedSPDenormMode);</span></CodeLine>
<Link id="l05040" /><CodeLine lineNumber="5040"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::S&#95;SETREG&#95;B32)</span></CodeLine>
<Link id="l05041" /><CodeLine lineNumber="5041"><span class="doxyHighlight">          .addReg(SavedSPDenormMode)</span></CodeLine>
<Link id="l05042" /><CodeLine lineNumber="5042"><span class="doxyHighlight">          .addImm(<a href="#a795662e773d2eda28caf873fa6eb70c4">SPDenormModeBitField</a>);</span></CodeLine>
<Link id="l05043" /><CodeLine lineNumber="5043"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l05044" /><CodeLine lineNumber="5044"><span class="doxyHighlight">      <a href="#abceca15aff80aa1ea3b5e7603981f878">toggleSPDenormMode</a>(</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, ST, Mode);</span></CodeLine>
<Link id="l05045" /><CodeLine lineNumber="5045"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05046" /><CodeLine lineNumber="5046"></CodeLine>
<Link id="l05047" /><CodeLine lineNumber="5047"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fmas = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;div&#95;fmas, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l05048" /><CodeLine lineNumber="5048"><span class="doxyHighlight">                  .addUse(Fma4.getReg(0))</span></CodeLine>
<Link id="l05049" /><CodeLine lineNumber="5049"><span class="doxyHighlight">                  .addUse(Fma1.getReg(0))</span></CodeLine>
<Link id="l05050" /><CodeLine lineNumber="5050"><span class="doxyHighlight">                  .addUse(Fma3.getReg(0))</span></CodeLine>
<Link id="l05051" /><CodeLine lineNumber="5051"><span class="doxyHighlight">                  .addUse(NumeratorScaled.getReg(1))</span></CodeLine>
<Link id="l05052" /><CodeLine lineNumber="5052"><span class="doxyHighlight">                  .setMIFlags(Flags);</span></CodeLine>
<Link id="l05053" /><CodeLine lineNumber="5053"></CodeLine>
<Link id="l05054" /><CodeLine lineNumber="5054"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;div&#95;fixup, Res)</span></CodeLine>
<Link id="l05055" /><CodeLine lineNumber="5055"><span class="doxyHighlight">      .addUse(Fmas.getReg(0))</span></CodeLine>
<Link id="l05056" /><CodeLine lineNumber="5056"><span class="doxyHighlight">      .addUse(RHS)</span></CodeLine>
<Link id="l05057" /><CodeLine lineNumber="5057"><span class="doxyHighlight">      .addUse(LHS)</span></CodeLine>
<Link id="l05058" /><CodeLine lineNumber="5058"><span class="doxyHighlight">      .setMIFlags(Flags);</span></CodeLine>
<Link id="l05059" /><CodeLine lineNumber="5059"></CodeLine>
<Link id="l05060" /><CodeLine lineNumber="5060"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l05061" /><CodeLine lineNumber="5061"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05062" /><CodeLine lineNumber="5062"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05063" /><CodeLine lineNumber="5063"></CodeLine>
<Link id="l05064" /><CodeLine lineNumber="5064" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a30fc420ff83b1e2c4ab42e86d9071e34"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a30fc420ff83b1e2c4ab42e86d9071e34">AMDGPULegalizerInfo::legalizeFDIV64</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l05065" /><CodeLine lineNumber="5065"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l05066" /><CodeLine lineNumber="5066"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05067" /><CodeLine lineNumber="5067"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ac0184339c875630ffed0e19b55899b82">legalizeFastUnsafeFDIV64</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>))</span></CodeLine>
<Link id="l05068" /><CodeLine lineNumber="5068"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05069" /><CodeLine lineNumber="5069"></CodeLine>
<Link id="l05070" /><CodeLine lineNumber="5070"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Res = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l05071" /><CodeLine lineNumber="5071"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> LHS = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l05072" /><CodeLine lineNumber="5072"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> RHS = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l05073" /><CodeLine lineNumber="5073"></CodeLine>
<Link id="l05074" /><CodeLine lineNumber="5074"><span class="doxyHighlight">  uint16&#95;t Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l05075" /><CodeLine lineNumber="5075"></CodeLine>
<Link id="l05076" /><CodeLine lineNumber="5076"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</span></CodeLine>
<Link id="l05077" /><CodeLine lineNumber="5077"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</span></CodeLine>
<Link id="l05078" /><CodeLine lineNumber="5078"></CodeLine>
<Link id="l05079" /><CodeLine lineNumber="5079"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> One = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, 1.0);</span></CodeLine>
<Link id="l05080" /><CodeLine lineNumber="5080"></CodeLine>
<Link id="l05081" /><CodeLine lineNumber="5081"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> DivScale0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;div&#95;scale, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>&#125;)</span></CodeLine>
<Link id="l05082" /><CodeLine lineNumber="5082"><span class="doxyHighlight">                       .addUse(LHS)</span></CodeLine>
<Link id="l05083" /><CodeLine lineNumber="5083"><span class="doxyHighlight">                       .addUse(RHS)</span></CodeLine>
<Link id="l05084" /><CodeLine lineNumber="5084"><span class="doxyHighlight">                       .addImm(0)</span></CodeLine>
<Link id="l05085" /><CodeLine lineNumber="5085"><span class="doxyHighlight">                       .setMIFlags(Flags);</span></CodeLine>
<Link id="l05086" /><CodeLine lineNumber="5086"></CodeLine>
<Link id="l05087" /><CodeLine lineNumber="5087"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegDivScale0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFNeg(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, DivScale0.getReg(0), Flags);</span></CodeLine>
<Link id="l05088" /><CodeLine lineNumber="5088"></CodeLine>
<Link id="l05089" /><CodeLine lineNumber="5089"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Rcp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;rcp, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;)</span></CodeLine>
<Link id="l05090" /><CodeLine lineNumber="5090"><span class="doxyHighlight">                 .addUse(DivScale0.getReg(0))</span></CodeLine>
<Link id="l05091" /><CodeLine lineNumber="5091"><span class="doxyHighlight">                 .setMIFlags(Flags);</span></CodeLine>
<Link id="l05092" /><CodeLine lineNumber="5092"></CodeLine>
<Link id="l05093" /><CodeLine lineNumber="5093"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fma0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, NegDivScale0, Rcp, One, Flags);</span></CodeLine>
<Link id="l05094" /><CodeLine lineNumber="5094"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fma1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, Rcp, Fma0, Rcp, Flags);</span></CodeLine>
<Link id="l05095" /><CodeLine lineNumber="5095"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fma2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, NegDivScale0, Fma1, One, Flags);</span></CodeLine>
<Link id="l05096" /><CodeLine lineNumber="5096"></CodeLine>
<Link id="l05097" /><CodeLine lineNumber="5097"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> DivScale1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;div&#95;scale, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>&#125;)</span></CodeLine>
<Link id="l05098" /><CodeLine lineNumber="5098"><span class="doxyHighlight">                       .addUse(LHS)</span></CodeLine>
<Link id="l05099" /><CodeLine lineNumber="5099"><span class="doxyHighlight">                       .addUse(RHS)</span></CodeLine>
<Link id="l05100" /><CodeLine lineNumber="5100"><span class="doxyHighlight">                       .addImm(1)</span></CodeLine>
<Link id="l05101" /><CodeLine lineNumber="5101"><span class="doxyHighlight">                       .setMIFlags(Flags);</span></CodeLine>
<Link id="l05102" /><CodeLine lineNumber="5102"></CodeLine>
<Link id="l05103" /><CodeLine lineNumber="5103"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fma3 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, Fma1, Fma2, Fma1, Flags);</span></CodeLine>
<Link id="l05104" /><CodeLine lineNumber="5104"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, DivScale1.getReg(0), Fma3, Flags);</span></CodeLine>
<Link id="l05105" /><CodeLine lineNumber="5105"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fma4 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, NegDivScale0, <a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>, DivScale1.getReg(0), Flags);</span></CodeLine>
<Link id="l05106" /><CodeLine lineNumber="5106"></CodeLine>
<Link id="l05107" /><CodeLine lineNumber="5107"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Scale;</span></CodeLine>
<Link id="l05108" /><CodeLine lineNumber="5108"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ST.hasUsableDivScaleConditionOutput()) &#123;</span></CodeLine>
<Link id="l05109" /><CodeLine lineNumber="5109"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Workaround a hardware bug on SI where the condition output from div&#95;scale</span></CodeLine>
<Link id="l05110" /><CodeLine lineNumber="5110"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// is not usable.</span></CodeLine>
<Link id="l05111" /><CodeLine lineNumber="5111"></CodeLine>
<Link id="l05112" /><CodeLine lineNumber="5112"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l05113" /><CodeLine lineNumber="5113"></CodeLine>
<Link id="l05114" /><CodeLine lineNumber="5114"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NumUnmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LHS);</span></CodeLine>
<Link id="l05115" /><CodeLine lineNumber="5115"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> DenUnmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, RHS);</span></CodeLine>
<Link id="l05116" /><CodeLine lineNumber="5116"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Scale0Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, DivScale0);</span></CodeLine>
<Link id="l05117" /><CodeLine lineNumber="5117"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Scale1Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, DivScale1);</span></CodeLine>
<Link id="l05118" /><CodeLine lineNumber="5118"></CodeLine>
<Link id="l05119" /><CodeLine lineNumber="5119"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CmpNum = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP&#95;EQ</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, NumUnmerge.getReg(1),</span></CodeLine>
<Link id="l05120" /><CodeLine lineNumber="5120"><span class="doxyHighlight">                              Scale1Unmerge.getReg(1));</span></CodeLine>
<Link id="l05121" /><CodeLine lineNumber="5121"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CmpDen = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP&#95;EQ</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, DenUnmerge.getReg(1),</span></CodeLine>
<Link id="l05122" /><CodeLine lineNumber="5122"><span class="doxyHighlight">                              Scale0Unmerge.getReg(1));</span></CodeLine>
<Link id="l05123" /><CodeLine lineNumber="5123"><span class="doxyHighlight">    Scale = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildXor(<a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, CmpNum, CmpDen).getReg(0);</span></CodeLine>
<Link id="l05124" /><CodeLine lineNumber="5124"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l05125" /><CodeLine lineNumber="5125"><span class="doxyHighlight">    Scale = DivScale1.getReg(1);</span></CodeLine>
<Link id="l05126" /><CodeLine lineNumber="5126"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05127" /><CodeLine lineNumber="5127"></CodeLine>
<Link id="l05128" /><CodeLine lineNumber="5128"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fmas = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;div&#95;fmas, &#123;<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>&#125;)</span></CodeLine>
<Link id="l05129" /><CodeLine lineNumber="5129"><span class="doxyHighlight">                  .addUse(Fma4.getReg(0))</span></CodeLine>
<Link id="l05130" /><CodeLine lineNumber="5130"><span class="doxyHighlight">                  .addUse(Fma3.getReg(0))</span></CodeLine>
<Link id="l05131" /><CodeLine lineNumber="5131"><span class="doxyHighlight">                  .addUse(<a href="/docs/api/namespaces/llvm/#aac36edd0f1ce976f0025c98e88d3830ea62b6d55816cf737bfc6f42e60df1a3f2">Mul</a>.getReg(0))</span></CodeLine>
<Link id="l05132" /><CodeLine lineNumber="5132"><span class="doxyHighlight">                  .addUse(Scale)</span></CodeLine>
<Link id="l05133" /><CodeLine lineNumber="5133"><span class="doxyHighlight">                  .setMIFlags(Flags);</span></CodeLine>
<Link id="l05134" /><CodeLine lineNumber="5134"></CodeLine>
<Link id="l05135" /><CodeLine lineNumber="5135"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;div&#95;fixup, <a href="/docs/api/namespaces/llvm/#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(Res))</span></CodeLine>
<Link id="l05136" /><CodeLine lineNumber="5136"><span class="doxyHighlight">      .addUse(Fmas.getReg(0))</span></CodeLine>
<Link id="l05137" /><CodeLine lineNumber="5137"><span class="doxyHighlight">      .addUse(RHS)</span></CodeLine>
<Link id="l05138" /><CodeLine lineNumber="5138"><span class="doxyHighlight">      .addUse(LHS)</span></CodeLine>
<Link id="l05139" /><CodeLine lineNumber="5139"><span class="doxyHighlight">      .setMIFlags(Flags);</span></CodeLine>
<Link id="l05140" /><CodeLine lineNumber="5140"></CodeLine>
<Link id="l05141" /><CodeLine lineNumber="5141"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l05142" /><CodeLine lineNumber="5142"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05143" /><CodeLine lineNumber="5143"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05144" /><CodeLine lineNumber="5144"></CodeLine>
<Link id="l05145" /><CodeLine lineNumber="5145" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a2b530047260b0f52c4dd8823764acb2d"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a2b530047260b0f52c4dd8823764acb2d">AMDGPULegalizerInfo::legalizeFFREXP</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l05146" /><CodeLine lineNumber="5146"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l05147" /><CodeLine lineNumber="5147"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05148" /><CodeLine lineNumber="5148"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Res0 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l05149" /><CodeLine lineNumber="5149"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Res1 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l05150" /><CodeLine lineNumber="5150"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Val = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l05151" /><CodeLine lineNumber="5151"><span class="doxyHighlight">  uint16&#95;t Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l05152" /><CodeLine lineNumber="5152"></CodeLine>
<Link id="l05153" /><CodeLine lineNumber="5153"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Res0);</span></CodeLine>
<Link id="l05154" /><CodeLine lineNumber="5154"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> InstrExpTy = Ty == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16) ? <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16) : <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l05155" /><CodeLine lineNumber="5155"></CodeLine>
<Link id="l05156" /><CodeLine lineNumber="5156"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Mant = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;frexp&#95;mant, &#123;Ty&#125;)</span></CodeLine>
<Link id="l05157" /><CodeLine lineNumber="5157"><span class="doxyHighlight">                  .addUse(Val)</span></CodeLine>
<Link id="l05158" /><CodeLine lineNumber="5158"><span class="doxyHighlight">                  .setMIFlags(Flags);</span></CodeLine>
<Link id="l05159" /><CodeLine lineNumber="5159"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Exp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;frexp&#95;exp, &#123;InstrExpTy&#125;)</span></CodeLine>
<Link id="l05160" /><CodeLine lineNumber="5160"><span class="doxyHighlight">                 .addUse(Val)</span></CodeLine>
<Link id="l05161" /><CodeLine lineNumber="5161"><span class="doxyHighlight">                 .setMIFlags(Flags);</span></CodeLine>
<Link id="l05162" /><CodeLine lineNumber="5162"></CodeLine>
<Link id="l05163" /><CodeLine lineNumber="5163"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasFractBug()) &#123;</span></CodeLine>
<Link id="l05164" /><CodeLine lineNumber="5164"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Fabs = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFAbs(Ty, Val);</span></CodeLine>
<Link id="l05165" /><CodeLine lineNumber="5165"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Inf = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, <a href="/docs/api/classes/llvm/apfloat/#ab35b08ed1345493af2c69fbb71e4d0c3">APFloat::getInf</a>(<a href="/docs/api/namespaces/llvm/#a25ebf05ccdc20f3355715fb29ee82427">getFltSemanticForLLT</a>(Ty)));</span></CodeLine>
<Link id="l05166" /><CodeLine lineNumber="5166"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> IsFinite =</span></CodeLine>
<Link id="l05167" /><CodeLine lineNumber="5167"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">CmpInst::FCMP&#95;OLT</a>, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), Fabs, Inf, Flags);</span></CodeLine>
<Link id="l05168" /><CodeLine lineNumber="5168"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Zero = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(InstrExpTy, 0);</span></CodeLine>
<Link id="l05169" /><CodeLine lineNumber="5169"><span class="doxyHighlight">    Exp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(InstrExpTy, IsFinite, Exp, Zero);</span></CodeLine>
<Link id="l05170" /><CodeLine lineNumber="5170"><span class="doxyHighlight">    Mant = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(Ty, IsFinite, Mant, Val);</span></CodeLine>
<Link id="l05171" /><CodeLine lineNumber="5171"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05172" /><CodeLine lineNumber="5172"></CodeLine>
<Link id="l05173" /><CodeLine lineNumber="5173"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildCopy(Res0, Mant);</span></CodeLine>
<Link id="l05174" /><CodeLine lineNumber="5174"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSExtOrTrunc(Res1, Exp);</span></CodeLine>
<Link id="l05175" /><CodeLine lineNumber="5175"></CodeLine>
<Link id="l05176" /><CodeLine lineNumber="5176"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l05177" /><CodeLine lineNumber="5177"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05178" /><CodeLine lineNumber="5178"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05179" /><CodeLine lineNumber="5179"></CodeLine>
<Link id="l05180" /><CodeLine lineNumber="5180" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a6f737d47e92bb08927c272b12fba32d8"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a6f737d47e92bb08927c272b12fba32d8">AMDGPULegalizerInfo::legalizeFDIVFastIntrin</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l05181" /><CodeLine lineNumber="5181"><span class="doxyHighlight">                                                 <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l05182" /><CodeLine lineNumber="5182"><span class="doxyHighlight">                                                 <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05183" /><CodeLine lineNumber="5183"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Res = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l05184" /><CodeLine lineNumber="5184"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> LHS = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l05185" /><CodeLine lineNumber="5185"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> RHS = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</span></CodeLine>
<Link id="l05186" /><CodeLine lineNumber="5186"><span class="doxyHighlight">  uint16&#95;t Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l05187" /><CodeLine lineNumber="5187"></CodeLine>
<Link id="l05188" /><CodeLine lineNumber="5188"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l05189" /><CodeLine lineNumber="5189"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</span></CodeLine>
<Link id="l05190" /><CodeLine lineNumber="5190"></CodeLine>
<Link id="l05191" /><CodeLine lineNumber="5191"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Abs = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFAbs(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, RHS, Flags);</span></CodeLine>
<Link id="l05192" /><CodeLine lineNumber="5192"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/apfloat">APFloat</a> C0Val(1.0f);</span></CodeLine>
<Link id="l05193" /><CodeLine lineNumber="5193"></CodeLine>
<Link id="l05194" /><CodeLine lineNumber="5194"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> C0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 0x1p+96f);</span></CodeLine>
<Link id="l05195" /><CodeLine lineNumber="5195"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> C1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 0x1p-32f);</span></CodeLine>
<Link id="l05196" /><CodeLine lineNumber="5196"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> C2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 1.0f);</span></CodeLine>
<Link id="l05197" /><CodeLine lineNumber="5197"></CodeLine>
<Link id="l05198" /><CodeLine lineNumber="5198"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> CmpRes = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">CmpInst::FCMP&#95;OGT</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, Abs, C0, Flags);</span></CodeLine>
<Link id="l05199" /><CodeLine lineNumber="5199"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Sel = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, CmpRes, C1, C2, Flags);</span></CodeLine>
<Link id="l05200" /><CodeLine lineNumber="5200"></CodeLine>
<Link id="l05201" /><CodeLine lineNumber="5201"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Mul0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, RHS, Sel, Flags);</span></CodeLine>
<Link id="l05202" /><CodeLine lineNumber="5202"></CodeLine>
<Link id="l05203" /><CodeLine lineNumber="5203"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> RCP = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;rcp, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;)</span></CodeLine>
<Link id="l05204" /><CodeLine lineNumber="5204"><span class="doxyHighlight">                 .addUse(Mul0.getReg(0))</span></CodeLine>
<Link id="l05205" /><CodeLine lineNumber="5205"><span class="doxyHighlight">                 .setMIFlags(Flags);</span></CodeLine>
<Link id="l05206" /><CodeLine lineNumber="5206"></CodeLine>
<Link id="l05207" /><CodeLine lineNumber="5207"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Mul1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LHS, RCP, Flags);</span></CodeLine>
<Link id="l05208" /><CodeLine lineNumber="5208"></CodeLine>
<Link id="l05209" /><CodeLine lineNumber="5209"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(Res, Sel, Mul1, Flags);</span></CodeLine>
<Link id="l05210" /><CodeLine lineNumber="5210"></CodeLine>
<Link id="l05211" /><CodeLine lineNumber="5211"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l05212" /><CodeLine lineNumber="5212"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05213" /><CodeLine lineNumber="5213"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05214" /><CodeLine lineNumber="5214"></CodeLine>
<Link id="l05215" /><CodeLine lineNumber="5215" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a07957999af426a9136774abb7a037286"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a07957999af426a9136774abb7a037286">AMDGPULegalizerInfo::legalizeFSQRTF16</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l05216" /><CodeLine lineNumber="5216"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l05217" /><CodeLine lineNumber="5217"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05218" /><CodeLine lineNumber="5218"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Bypass the correct expansion a standard promotion through G&#95;FSQRT would</span></CodeLine>
<Link id="l05219" /><CodeLine lineNumber="5219"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// get. The f32 op is accurate enough for the f16 cas.</span></CodeLine>
<Link id="l05220" /><CodeLine lineNumber="5220"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l05221" /><CodeLine lineNumber="5221"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!ST.has16BitInsts());</span></CodeLine>
<Link id="l05222" /><CodeLine lineNumber="5222"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l05223" /><CodeLine lineNumber="5223"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Ext = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPExt(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1), Flags);</span></CodeLine>
<Link id="l05224" /><CodeLine lineNumber="5224"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;sqrt, &#123;<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>&#125;)</span></CodeLine>
<Link id="l05225" /><CodeLine lineNumber="5225"><span class="doxyHighlight">    .addUse(Ext.getReg(0))</span></CodeLine>
<Link id="l05226" /><CodeLine lineNumber="5226"><span class="doxyHighlight">    .setMIFlags(Flags);</span></CodeLine>
<Link id="l05227" /><CodeLine lineNumber="5227"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFPTrunc(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), <a href="/docs/api/namespaces/llvm/#ad82de9da62635df78a534de0f16c1129">Log2</a>, Flags);</span></CodeLine>
<Link id="l05228" /><CodeLine lineNumber="5228"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l05229" /><CodeLine lineNumber="5229"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05230" /><CodeLine lineNumber="5230"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05231" /><CodeLine lineNumber="5231"></CodeLine>
<Link id="l05232" /><CodeLine lineNumber="5232" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a20562025b5dd6e948bb3346d29417237"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a20562025b5dd6e948bb3346d29417237">AMDGPULegalizerInfo::legalizeFSQRTF32</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l05233" /><CodeLine lineNumber="5233"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l05234" /><CodeLine lineNumber="5234"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05235" /><CodeLine lineNumber="5235"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF();</span></CodeLine>
<Link id="l05236" /><CodeLine lineNumber="5236"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l05237" /><CodeLine lineNumber="5237"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l05238" /><CodeLine lineNumber="5238"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l05239" /><CodeLine lineNumber="5239"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</span></CodeLine>
<Link id="l05240" /><CodeLine lineNumber="5240"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l05241" /><CodeLine lineNumber="5241"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> I32 = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l05242" /><CodeLine lineNumber="5242"></CodeLine>
<Link id="l05243" /><CodeLine lineNumber="5243"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a16c22435b21cfe335c972d971e29b0d7">allowApproxFunc</a>(MF, Flags)) &#123;</span></CodeLine>
<Link id="l05244" /><CodeLine lineNumber="5244"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;sqrt, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Register&gt;</a>(&#123;Dst&#125;))</span></CodeLine>
<Link id="l05245" /><CodeLine lineNumber="5245"><span class="doxyHighlight">      .addUse(<a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>)</span></CodeLine>
<Link id="l05246" /><CodeLine lineNumber="5246"><span class="doxyHighlight">      .setMIFlags(Flags);</span></CodeLine>
<Link id="l05247" /><CodeLine lineNumber="5247"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l05248" /><CodeLine lineNumber="5248"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05249" /><CodeLine lineNumber="5249"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05250" /><CodeLine lineNumber="5250"></CodeLine>
<Link id="l05251" /><CodeLine lineNumber="5251"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ScaleThreshold = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, 0x1.0p-96f);</span></CodeLine>
<Link id="l05252" /><CodeLine lineNumber="5252"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NeedScale = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">CmpInst::FCMP&#95;OGT</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, ScaleThreshold, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, Flags);</span></CodeLine>
<Link id="l05253" /><CodeLine lineNumber="5253"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ScaleUpFactor = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, 0x1.0p+32f);</span></CodeLine>
<Link id="l05254" /><CodeLine lineNumber="5254"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ScaledX = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, ScaleUpFactor, Flags);</span></CodeLine>
<Link id="l05255" /><CodeLine lineNumber="5255"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtX = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, NeedScale, ScaledX, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, Flags);</span></CodeLine>
<Link id="l05256" /><CodeLine lineNumber="5256"></CodeLine>
<Link id="l05257" /><CodeLine lineNumber="5257"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> SqrtS = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>);</span></CodeLine>
<Link id="l05258" /><CodeLine lineNumber="5258"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a092571cd6865fc5f86e2a594265ff717">needsDenormHandlingF32</a>(MF, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, Flags)) &#123;</span></CodeLine>
<Link id="l05259" /><CodeLine lineNumber="5259"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;sqrt, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Register&gt;</a>(&#123;SqrtS&#125;))</span></CodeLine>
<Link id="l05260" /><CodeLine lineNumber="5260"><span class="doxyHighlight">      .addUse(SqrtX.getReg(0))</span></CodeLine>
<Link id="l05261" /><CodeLine lineNumber="5261"><span class="doxyHighlight">      .setMIFlags(Flags);</span></CodeLine>
<Link id="l05262" /><CodeLine lineNumber="5262"></CodeLine>
<Link id="l05263" /><CodeLine lineNumber="5263"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegOne = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(I32, -1);</span></CodeLine>
<Link id="l05264" /><CodeLine lineNumber="5264"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtSNextDown = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAdd(I32, SqrtS, NegOne);</span></CodeLine>
<Link id="l05265" /><CodeLine lineNumber="5265"></CodeLine>
<Link id="l05266" /><CodeLine lineNumber="5266"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegSqrtSNextDown = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFNeg(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, SqrtSNextDown, Flags);</span></CodeLine>
<Link id="l05267" /><CodeLine lineNumber="5267"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtVP = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, NegSqrtSNextDown, SqrtS, SqrtX, Flags);</span></CodeLine>
<Link id="l05268" /><CodeLine lineNumber="5268"></CodeLine>
<Link id="l05269" /><CodeLine lineNumber="5269"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> PosOne = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(I32, 1);</span></CodeLine>
<Link id="l05270" /><CodeLine lineNumber="5270"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtSNextUp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAdd(I32, SqrtS, PosOne);</span></CodeLine>
<Link id="l05271" /><CodeLine lineNumber="5271"></CodeLine>
<Link id="l05272" /><CodeLine lineNumber="5272"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegSqrtSNextUp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFNeg(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, SqrtSNextUp, Flags);</span></CodeLine>
<Link id="l05273" /><CodeLine lineNumber="5273"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtVS = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, NegSqrtSNextUp, SqrtS, SqrtX, Flags);</span></CodeLine>
<Link id="l05274" /><CodeLine lineNumber="5274"></CodeLine>
<Link id="l05275" /><CodeLine lineNumber="5275"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Zero = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, 0.0f);</span></CodeLine>
<Link id="l05276" /><CodeLine lineNumber="5276"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtVPLE0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba9835cfe02fb5027680bd7203b024f77a">CmpInst::FCMP&#95;OLE</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, SqrtVP, Zero, Flags);</span></CodeLine>
<Link id="l05277" /><CodeLine lineNumber="5277"></CodeLine>
<Link id="l05278" /><CodeLine lineNumber="5278"><span class="doxyHighlight">    SqrtS =</span></CodeLine>
<Link id="l05279" /><CodeLine lineNumber="5279"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, SqrtVPLE0, SqrtSNextDown, SqrtS, Flags).getReg(0);</span></CodeLine>
<Link id="l05280" /><CodeLine lineNumber="5280"></CodeLine>
<Link id="l05281" /><CodeLine lineNumber="5281"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtVPVSGT0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">CmpInst::FCMP&#95;OGT</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, SqrtVS, Zero, Flags);</span></CodeLine>
<Link id="l05282" /><CodeLine lineNumber="5282"><span class="doxyHighlight">    SqrtS =</span></CodeLine>
<Link id="l05283" /><CodeLine lineNumber="5283"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, SqrtVPVSGT0, SqrtSNextUp, SqrtS, Flags).getReg(0);</span></CodeLine>
<Link id="l05284" /><CodeLine lineNumber="5284"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l05285" /><CodeLine lineNumber="5285"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtR =</span></CodeLine>
<Link id="l05286" /><CodeLine lineNumber="5286"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;rsq, &#123;<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>&#125;).addReg(SqrtX.getReg(0));</span></CodeLine>
<Link id="l05287" /><CodeLine lineNumber="5287"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(SqrtS, SqrtX, SqrtR, Flags);</span></CodeLine>
<Link id="l05288" /><CodeLine lineNumber="5288"></CodeLine>
<Link id="l05289" /><CodeLine lineNumber="5289"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Half = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, 0.5f);</span></CodeLine>
<Link id="l05290" /><CodeLine lineNumber="5290"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtH = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, SqrtR, Half, Flags);</span></CodeLine>
<Link id="l05291" /><CodeLine lineNumber="5291"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegSqrtH = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFNeg(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, SqrtH, Flags);</span></CodeLine>
<Link id="l05292" /><CodeLine lineNumber="5292"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtE = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, NegSqrtH, SqrtS, Half, Flags);</span></CodeLine>
<Link id="l05293" /><CodeLine lineNumber="5293"><span class="doxyHighlight">    SqrtH = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, SqrtH, SqrtE, SqrtH, Flags);</span></CodeLine>
<Link id="l05294" /><CodeLine lineNumber="5294"><span class="doxyHighlight">    SqrtS = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, SqrtS, SqrtE, SqrtS, Flags).getReg(0);</span></CodeLine>
<Link id="l05295" /><CodeLine lineNumber="5295"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegSqrtS = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFNeg(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, SqrtS, Flags);</span></CodeLine>
<Link id="l05296" /><CodeLine lineNumber="5296"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtD = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, NegSqrtS, SqrtS, SqrtX, Flags);</span></CodeLine>
<Link id="l05297" /><CodeLine lineNumber="5297"><span class="doxyHighlight">    SqrtS = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, SqrtD, SqrtH, SqrtS, Flags).getReg(0);</span></CodeLine>
<Link id="l05298" /><CodeLine lineNumber="5298"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05299" /><CodeLine lineNumber="5299"></CodeLine>
<Link id="l05300" /><CodeLine lineNumber="5300"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ScaleDownFactor = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, 0x1.0p-16f);</span></CodeLine>
<Link id="l05301" /><CodeLine lineNumber="5301"></CodeLine>
<Link id="l05302" /><CodeLine lineNumber="5302"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ScaledDown = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, SqrtS, ScaleDownFactor, Flags);</span></CodeLine>
<Link id="l05303" /><CodeLine lineNumber="5303"></CodeLine>
<Link id="l05304" /><CodeLine lineNumber="5304"><span class="doxyHighlight">  SqrtS = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="#affe0a8af32c1d4e53b07959b240641b4">F32</a>, NeedScale, ScaledDown, SqrtS, Flags).getReg(0);</span></CodeLine>
<Link id="l05305" /><CodeLine lineNumber="5305"></CodeLine>
<Link id="l05306" /><CodeLine lineNumber="5306"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> IsZeroOrInf = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIsFPClass(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), SqrtX, <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dab6ede72b2b2219068b9bb89732d24e2f">fcZero</a> | <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dada0d259988860d7a2f882aa40b25fee1">fcPosInf</a>);</span></CodeLine>
<Link id="l05307" /><CodeLine lineNumber="5307"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(Dst, IsZeroOrInf, SqrtX, SqrtS, Flags);</span></CodeLine>
<Link id="l05308" /><CodeLine lineNumber="5308"></CodeLine>
<Link id="l05309" /><CodeLine lineNumber="5309"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l05310" /><CodeLine lineNumber="5310"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05311" /><CodeLine lineNumber="5311"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05312" /><CodeLine lineNumber="5312"></CodeLine>
<Link id="l05313" /><CodeLine lineNumber="5313" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae6424442b4dd0280dd56bc1c577e68ed"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae6424442b4dd0280dd56bc1c577e68ed">AMDGPULegalizerInfo::legalizeFSQRTF64</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l05314" /><CodeLine lineNumber="5314"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l05315" /><CodeLine lineNumber="5315"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05316" /><CodeLine lineNumber="5316"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For double type, the SQRT and RSQ instructions don&#39;t have required</span></CodeLine>
<Link id="l05317" /><CodeLine lineNumber="5317"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// precision, we apply Goldschmidt&#39;s algorithm to improve the result:</span></CodeLine>
<Link id="l05318" /><CodeLine lineNumber="5318"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l05319" /><CodeLine lineNumber="5319"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   y0 = rsq(x)</span></CodeLine>
<Link id="l05320" /><CodeLine lineNumber="5320"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   g0 = x &#42; y0</span></CodeLine>
<Link id="l05321" /><CodeLine lineNumber="5321"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   h0 = 0.5 &#42; y0</span></CodeLine>
<Link id="l05322" /><CodeLine lineNumber="5322"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l05323" /><CodeLine lineNumber="5323"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   r0 = 0.5 - h0 &#42; g0</span></CodeLine>
<Link id="l05324" /><CodeLine lineNumber="5324"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   g1 = g0 &#42; r0 + g0</span></CodeLine>
<Link id="l05325" /><CodeLine lineNumber="5325"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   h1 = h0 &#42; r0 + h0</span></CodeLine>
<Link id="l05326" /><CodeLine lineNumber="5326"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l05327" /><CodeLine lineNumber="5327"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   r1 = 0.5 - h1 &#42; g1 =&gt; d0 = x - g1 &#42; g1</span></CodeLine>
<Link id="l05328" /><CodeLine lineNumber="5328"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   g2 = g1 &#42; r1 + g1     g2 = d0 &#42; h1 + g1</span></CodeLine>
<Link id="l05329" /><CodeLine lineNumber="5329"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   h2 = h1 &#42; r1 + h1</span></CodeLine>
<Link id="l05330" /><CodeLine lineNumber="5330"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l05331" /><CodeLine lineNumber="5331"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   r2 = 0.5 - h2 &#42; g2 =&gt; d1 = x - g2 &#42; g2</span></CodeLine>
<Link id="l05332" /><CodeLine lineNumber="5332"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   g3 = g2 &#42; r2 + g2     g3 = d1 &#42; h1 + g2</span></CodeLine>
<Link id="l05333" /><CodeLine lineNumber="5333"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l05334" /><CodeLine lineNumber="5334"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//   sqrt(x) = g3</span></CodeLine>
<Link id="l05335" /><CodeLine lineNumber="5335"></CodeLine>
<Link id="l05336" /><CodeLine lineNumber="5336"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</span></CodeLine>
<Link id="l05337" /><CodeLine lineNumber="5337"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l05338" /><CodeLine lineNumber="5338"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a563bbae35885ba289017e47ec57235fa">F64</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</span></CodeLine>
<Link id="l05339" /><CodeLine lineNumber="5339"></CodeLine>
<Link id="l05340" /><CodeLine lineNumber="5340"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l05341" /><CodeLine lineNumber="5341"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst) == <a href="#a563bbae35885ba289017e47ec57235fa">F64</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;only expect to lower f64 sqrt&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05342" /><CodeLine lineNumber="5342"></CodeLine>
<Link id="l05343" /><CodeLine lineNumber="5343"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l05344" /><CodeLine lineNumber="5344"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l05345" /><CodeLine lineNumber="5345"></CodeLine>
<Link id="l05346" /><CodeLine lineNumber="5346"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ScaleConstant = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, 0x1.0p-767);</span></CodeLine>
<Link id="l05347" /><CodeLine lineNumber="5347"></CodeLine>
<Link id="l05348" /><CodeLine lineNumber="5348"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ZeroInt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 0);</span></CodeLine>
<Link id="l05349" /><CodeLine lineNumber="5349"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Scaling = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFCmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">FCmpInst::FCMP&#95;OLT</a>, <a href="#a22eabd3566ae5f32cb6f594f4f343399">S1</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, ScaleConstant);</span></CodeLine>
<Link id="l05350" /><CodeLine lineNumber="5350"></CodeLine>
<Link id="l05351" /><CodeLine lineNumber="5351"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Scale up input if it is too small.</span></CodeLine>
<Link id="l05352" /><CodeLine lineNumber="5352"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ScaleUpFactor = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 256);</span></CodeLine>
<Link id="l05353" /><CodeLine lineNumber="5353"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ScaleUp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Scaling, ScaleUpFactor, ZeroInt);</span></CodeLine>
<Link id="l05354" /><CodeLine lineNumber="5354"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtX = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFLdexp(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, <a href="/docs/api/files/lib/lib/tablegen/tablegenbackendskeleton-cpp/#ab60f28d7a141ac46ccc200176a1bca8b">X</a>, ScaleUp, Flags);</span></CodeLine>
<Link id="l05355" /><CodeLine lineNumber="5355"></CodeLine>
<Link id="l05356" /><CodeLine lineNumber="5356"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtY =</span></CodeLine>
<Link id="l05357" /><CodeLine lineNumber="5357"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;rsq, &#123;<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>&#125;).addReg(SqrtX.getReg(0));</span></CodeLine>
<Link id="l05358" /><CodeLine lineNumber="5358"></CodeLine>
<Link id="l05359" /><CodeLine lineNumber="5359"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Half = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, 0.5);</span></CodeLine>
<Link id="l05360" /><CodeLine lineNumber="5360"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtH0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, SqrtY, Half);</span></CodeLine>
<Link id="l05361" /><CodeLine lineNumber="5361"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtS0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMul(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, SqrtX, SqrtY);</span></CodeLine>
<Link id="l05362" /><CodeLine lineNumber="5362"></CodeLine>
<Link id="l05363" /><CodeLine lineNumber="5363"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegSqrtH0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFNeg(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, SqrtH0);</span></CodeLine>
<Link id="l05364" /><CodeLine lineNumber="5364"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtR0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, NegSqrtH0, SqrtS0, Half);</span></CodeLine>
<Link id="l05365" /><CodeLine lineNumber="5365"></CodeLine>
<Link id="l05366" /><CodeLine lineNumber="5366"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtS1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, SqrtS0, SqrtR0, SqrtS0);</span></CodeLine>
<Link id="l05367" /><CodeLine lineNumber="5367"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtH1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, SqrtH0, SqrtR0, SqrtH0);</span></CodeLine>
<Link id="l05368" /><CodeLine lineNumber="5368"></CodeLine>
<Link id="l05369" /><CodeLine lineNumber="5369"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegSqrtS1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFNeg(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, SqrtS1);</span></CodeLine>
<Link id="l05370" /><CodeLine lineNumber="5370"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtD0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, NegSqrtS1, SqrtS1, SqrtX);</span></CodeLine>
<Link id="l05371" /><CodeLine lineNumber="5371"></CodeLine>
<Link id="l05372" /><CodeLine lineNumber="5372"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtS2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, SqrtD0, SqrtH1, SqrtS1);</span></CodeLine>
<Link id="l05373" /><CodeLine lineNumber="5373"></CodeLine>
<Link id="l05374" /><CodeLine lineNumber="5374"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> NegSqrtS2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFNeg(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, SqrtS2);</span></CodeLine>
<Link id="l05375" /><CodeLine lineNumber="5375"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtD1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, NegSqrtS2, SqrtS2, SqrtX);</span></CodeLine>
<Link id="l05376" /><CodeLine lineNumber="5376"></CodeLine>
<Link id="l05377" /><CodeLine lineNumber="5377"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> SqrtRet = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMA(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, SqrtD1, SqrtH1, SqrtS2);</span></CodeLine>
<Link id="l05378" /><CodeLine lineNumber="5378"></CodeLine>
<Link id="l05379" /><CodeLine lineNumber="5379"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Scale down the result.</span></CodeLine>
<Link id="l05380" /><CodeLine lineNumber="5380"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ScaleDownFactor = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, -128);</span></CodeLine>
<Link id="l05381" /><CodeLine lineNumber="5381"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ScaleDown = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Scaling, ScaleDownFactor, ZeroInt);</span></CodeLine>
<Link id="l05382" /><CodeLine lineNumber="5382"><span class="doxyHighlight">  SqrtRet = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFLdexp(<a href="#a563bbae35885ba289017e47ec57235fa">F64</a>, SqrtRet, ScaleDown, Flags);</span></CodeLine>
<Link id="l05383" /><CodeLine lineNumber="5383"></CodeLine>
<Link id="l05384" /><CodeLine lineNumber="5384"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Switch to fcmp oeq 0 for finite only. Can&#39;t fully remove this check</span></CodeLine>
<Link id="l05385" /><CodeLine lineNumber="5385"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// with finite only or nsz because rsq(+/-0) = +/-inf</span></CodeLine>
<Link id="l05386" /><CodeLine lineNumber="5386"></CodeLine>
<Link id="l05387" /><CodeLine lineNumber="5387"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Check for DAZ and expand to subnormals</span></CodeLine>
<Link id="l05388" /><CodeLine lineNumber="5388"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> IsZeroOrInf = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIsFPClass(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), SqrtX, <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dab6ede72b2b2219068b9bb89732d24e2f">fcZero</a> | <a href="/docs/api/namespaces/llvm/#a76921eddf6329af860916f3278ef1d1dada0d259988860d7a2f882aa40b25fee1">fcPosInf</a>);</span></CodeLine>
<Link id="l05389" /><CodeLine lineNumber="5389"></CodeLine>
<Link id="l05390" /><CodeLine lineNumber="5390"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If x is +INF, +0, or -0, use its original value</span></CodeLine>
<Link id="l05391" /><CodeLine lineNumber="5391"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildSelect(Dst, IsZeroOrInf, SqrtX, SqrtRet, Flags);</span></CodeLine>
<Link id="l05392" /><CodeLine lineNumber="5392"></CodeLine>
<Link id="l05393" /><CodeLine lineNumber="5393"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l05394" /><CodeLine lineNumber="5394"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05395" /><CodeLine lineNumber="5395"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05396" /><CodeLine lineNumber="5396"></CodeLine>
<Link id="l05397" /><CodeLine lineNumber="5397" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#ad8779ad5bc404af71eaa72036c8be55f"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ad8779ad5bc404af71eaa72036c8be55f">AMDGPULegalizerInfo::legalizeFSQRT</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l05398" /><CodeLine lineNumber="5398"><span class="doxyHighlight">                                        <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l05399" /><CodeLine lineNumber="5399"><span class="doxyHighlight">                                        <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05400" /><CodeLine lineNumber="5400"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</span></CodeLine>
<Link id="l05401" /><CodeLine lineNumber="5401"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32))</span></CodeLine>
<Link id="l05402" /><CodeLine lineNumber="5402"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a20562025b5dd6e948bb3346d29417237">legalizeFSQRTF32</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l05403" /><CodeLine lineNumber="5403"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64))</span></CodeLine>
<Link id="l05404" /><CodeLine lineNumber="5404"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae6424442b4dd0280dd56bc1c577e68ed">legalizeFSQRTF64</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l05405" /><CodeLine lineNumber="5405"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16))</span></CodeLine>
<Link id="l05406" /><CodeLine lineNumber="5406"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a07957999af426a9136774abb7a037286">legalizeFSQRTF16</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l05407" /><CodeLine lineNumber="5407"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05408" /><CodeLine lineNumber="5408"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05409" /><CodeLine lineNumber="5409"></CodeLine>
<Link id="l05410" /><CodeLine lineNumber="5410"><span class="doxyHighlightComment">// Expand llvm.amdgcn.rsq.clamp on targets that don&#39;t support the instruction.</span></CodeLine>
<Link id="l05411" /><CodeLine lineNumber="5411"><span class="doxyHighlightComment">// FIXME: Why do we handle this one but not other removed instructions?</span></CodeLine>
<Link id="l05412" /><CodeLine lineNumber="5412"><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l05413" /><CodeLine lineNumber="5413"><span class="doxyHighlightComment">// Reciprocal square root.  The clamp prevents infinite results, clamping</span></CodeLine>
<Link id="l05414" /><CodeLine lineNumber="5414"><span class="doxyHighlightComment">// infinities to max&#95;float.  D.f = 1 / sqrt(S0.f), result clamped to</span></CodeLine>
<Link id="l05415" /><CodeLine lineNumber="5415"><span class="doxyHighlightComment">// +-max&#95;float.</span></CodeLine>
<Link id="l05416" /><CodeLine lineNumber="5416" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a68b29f4aff8a6db0040bc8e00a520116"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a68b29f4aff8a6db0040bc8e00a520116">AMDGPULegalizerInfo::legalizeRsqClampIntrinsic</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l05417" /><CodeLine lineNumber="5417"><span class="doxyHighlight">                                                    <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l05418" /><CodeLine lineNumber="5418"><span class="doxyHighlight">                                                    <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05419" /><CodeLine lineNumber="5419"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.getGeneration() &lt; <a href="/docs/api/classes/llvm/amdgpusubtarget/#a53c0ee4138bfbf9e0410a65e0eaa36e2aef8609af541a5b1b01484b29d0f62534">AMDGPUSubtarget::VOLCANIC&#95;ISLANDS</a>)</span></CodeLine>
<Link id="l05420" /><CodeLine lineNumber="5420"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05421" /><CodeLine lineNumber="5421"></CodeLine>
<Link id="l05422" /><CodeLine lineNumber="5422"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l05423" /><CodeLine lineNumber="5423"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l05424" /><CodeLine lineNumber="5424"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</span></CodeLine>
<Link id="l05425" /><CodeLine lineNumber="5425"></CodeLine>
<Link id="l05426" /><CodeLine lineNumber="5426"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst);</span></CodeLine>
<Link id="l05427" /><CodeLine lineNumber="5427"></CodeLine>
<Link id="l05428" /><CodeLine lineNumber="5428"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/fltsemantics">fltSemantics</a> &#42;FltSemantics;</span></CodeLine>
<Link id="l05429" /><CodeLine lineNumber="5429"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32))</span></CodeLine>
<Link id="l05430" /><CodeLine lineNumber="5430"><span class="doxyHighlight">    FltSemantics = &amp;<a href="/docs/api/structs/llvm/apfloatbase/#a0c5765e9acba977f6e462c2917276d8f">APFloat::IEEEsingle</a>();</span></CodeLine>
<Link id="l05431" /><CodeLine lineNumber="5431"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64))</span></CodeLine>
<Link id="l05432" /><CodeLine lineNumber="5432"><span class="doxyHighlight">    FltSemantics = &amp;<a href="/docs/api/structs/llvm/apfloatbase/#a6ba7c3d54a5a714f7a27861ee114cce3">APFloat::IEEEdouble</a>();</span></CodeLine>
<Link id="l05433" /><CodeLine lineNumber="5433"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l05434" /><CodeLine lineNumber="5434"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05435" /><CodeLine lineNumber="5435"></CodeLine>
<Link id="l05436" /><CodeLine lineNumber="5436"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Rsq = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;rsq, &#123;Ty&#125;)</span></CodeLine>
<Link id="l05437" /><CodeLine lineNumber="5437"><span class="doxyHighlight">                 .addUse(Src)</span></CodeLine>
<Link id="l05438" /><CodeLine lineNumber="5438"><span class="doxyHighlight">                 .setMIFlags(Flags);</span></CodeLine>
<Link id="l05439" /><CodeLine lineNumber="5439"></CodeLine>
<Link id="l05440" /><CodeLine lineNumber="5440"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We don&#39;t need to concern ourselves with the snan handling difference, since</span></CodeLine>
<Link id="l05441" /><CodeLine lineNumber="5441"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// the rsq quieted (or not) so use the one which will directly select.</span></CodeLine>
<Link id="l05442" /><CodeLine lineNumber="5442"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a> &#42;MFI = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF().getInfo&lt;<a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a>&gt;();</span></CodeLine>
<Link id="l05443" /><CodeLine lineNumber="5443"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseIEEE = MFI-&gt;<a href="/docs/api/classes/llvm/simachinefunctioninfo/#a6012de9a1299d35e205f652abc3baf77">getMode</a>().<a href="/docs/api/structs/llvm/simoderegisterdefaults/#a7238526aeceaef9a0db1ab0c21a0cf0e">IEEE</a>;</span></CodeLine>
<Link id="l05444" /><CodeLine lineNumber="5444"></CodeLine>
<Link id="l05445" /><CodeLine lineNumber="5445"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MaxFlt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, <a href="/docs/api/classes/llvm/apfloat/#aaa67fe0741c2b3712630ae636f8c2c20">APFloat::getLargest</a>(&#42;FltSemantics));</span></CodeLine>
<Link id="l05446" /><CodeLine lineNumber="5446"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ClampMax = UseIEEE ? <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMinNumIEEE(Ty, Rsq, MaxFlt, Flags) :</span></CodeLine>
<Link id="l05447" /><CodeLine lineNumber="5447"><span class="doxyHighlight">                            <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMinNum(Ty, Rsq, MaxFlt, Flags);</span></CodeLine>
<Link id="l05448" /><CodeLine lineNumber="5448"></CodeLine>
<Link id="l05449" /><CodeLine lineNumber="5449"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MinFlt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFConstant(Ty, <a href="/docs/api/classes/llvm/apfloat/#aaa67fe0741c2b3712630ae636f8c2c20">APFloat::getLargest</a>(&#42;FltSemantics, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">));</span></CodeLine>
<Link id="l05450" /><CodeLine lineNumber="5450"></CodeLine>
<Link id="l05451" /><CodeLine lineNumber="5451"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UseIEEE)</span></CodeLine>
<Link id="l05452" /><CodeLine lineNumber="5452"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMaxNumIEEE(Dst, ClampMax, MinFlt, Flags);</span></CodeLine>
<Link id="l05453" /><CodeLine lineNumber="5453"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l05454" /><CodeLine lineNumber="5454"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildFMaxNum(Dst, ClampMax, MinFlt, Flags);</span></CodeLine>
<Link id="l05455" /><CodeLine lineNumber="5455"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l05456" /><CodeLine lineNumber="5456"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05457" /><CodeLine lineNumber="5457"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05458" /><CodeLine lineNumber="5458"></CodeLine>
<Link id="l05459" /><CodeLine lineNumber="5459"><span class="doxyHighlightComment">// TODO: Fix pointer type handling</span></CodeLine>
<Link id="l05460" /><CodeLine lineNumber="5460" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#af4667ecbc4447b41863430fb572d8f82"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#af4667ecbc4447b41863430fb572d8f82">AMDGPULegalizerInfo::legalizeLaneOp</a>(<a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> &amp;Helper,</span></CodeLine>
<Link id="l05461" /><CodeLine lineNumber="5461"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l05462" /><CodeLine lineNumber="5462"><span class="doxyHighlight">                                         <a href="/docs/api/namespaces/llvm/intrinsic/#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IID)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05463" /><CodeLine lineNumber="5463"></CodeLine>
<Link id="l05464" /><CodeLine lineNumber="5464"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</span></CodeLine>
<Link id="l05465" /><CodeLine lineNumber="5465"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI();</span></CodeLine>
<Link id="l05466" /><CodeLine lineNumber="5466"></CodeLine>
<Link id="l05467" /><CodeLine lineNumber="5467"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsPermLane16 = IID == Intrinsic::amdgcn&#95;permlane16 ||</span></CodeLine>
<Link id="l05468" /><CodeLine lineNumber="5468"><span class="doxyHighlight">                      IID == Intrinsic::amdgcn&#95;permlanex16;</span></CodeLine>
<Link id="l05469" /><CodeLine lineNumber="5469"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsSetInactive = IID == Intrinsic::amdgcn&#95;set&#95;inactive ||</span></CodeLine>
<Link id="l05470" /><CodeLine lineNumber="5470"><span class="doxyHighlight">                       IID == Intrinsic::amdgcn&#95;set&#95;inactive&#95;chain&#95;arg;</span></CodeLine>
<Link id="l05471" /><CodeLine lineNumber="5471"></CodeLine>
<Link id="l05472" /><CodeLine lineNumber="5472"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> createLaneOp = &#91;&amp;IID, &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>&#93;(<a href="/docs/api/classes/llvm/register">Register</a> Src0, <a href="/docs/api/classes/llvm/register">Register</a> Src1,</span></CodeLine>
<Link id="l05473" /><CodeLine lineNumber="5473"><span class="doxyHighlight">                                      <a href="/docs/api/classes/llvm/register">Register</a> Src2, <a href="/docs/api/classes/llvm/llt">LLT</a> VT) -&gt; <a href="/docs/api/classes/llvm/register">Register</a> &#123;</span></CodeLine>
<Link id="l05474" /><CodeLine lineNumber="5474"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> LaneOp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(IID, &#123;VT&#125;).addUse(Src0);</span></CodeLine>
<Link id="l05475" /><CodeLine lineNumber="5475"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (IID) &#123;</span></CodeLine>
<Link id="l05476" /><CodeLine lineNumber="5476"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;readfirstlane:</span></CodeLine>
<Link id="l05477" /><CodeLine lineNumber="5477"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;permlane64:</span></CodeLine>
<Link id="l05478" /><CodeLine lineNumber="5478"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> LaneOp.getReg(0);</span></CodeLine>
<Link id="l05479" /><CodeLine lineNumber="5479"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;readlane:</span></CodeLine>
<Link id="l05480" /><CodeLine lineNumber="5480"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;set&#95;inactive:</span></CodeLine>
<Link id="l05481" /><CodeLine lineNumber="5481"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;set&#95;inactive&#95;chain&#95;arg:</span></CodeLine>
<Link id="l05482" /><CodeLine lineNumber="5482"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> LaneOp.addUse(Src1).getReg(0);</span></CodeLine>
<Link id="l05483" /><CodeLine lineNumber="5483"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;writelane:</span></CodeLine>
<Link id="l05484" /><CodeLine lineNumber="5484"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> LaneOp.addUse(Src1).addUse(Src2).getReg(0);</span></CodeLine>
<Link id="l05485" /><CodeLine lineNumber="5485"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;permlane16:</span></CodeLine>
<Link id="l05486" /><CodeLine lineNumber="5486"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;permlanex16: &#123;</span></CodeLine>
<Link id="l05487" /><CodeLine lineNumber="5487"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/register">Register</a> Src3 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5).getReg();</span></CodeLine>
<Link id="l05488" /><CodeLine lineNumber="5488"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/register">Register</a> Src4 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(6).getImm();</span></CodeLine>
<Link id="l05489" /><CodeLine lineNumber="5489"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/register">Register</a> Src5 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(7).getImm();</span></CodeLine>
<Link id="l05490" /><CodeLine lineNumber="5490"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> LaneOp.addUse(Src1)</span></CodeLine>
<Link id="l05491" /><CodeLine lineNumber="5491"><span class="doxyHighlight">          .addUse(Src2)</span></CodeLine>
<Link id="l05492" /><CodeLine lineNumber="5492"><span class="doxyHighlight">          .addUse(Src3)</span></CodeLine>
<Link id="l05493" /><CodeLine lineNumber="5493"><span class="doxyHighlight">          .addImm(Src4)</span></CodeLine>
<Link id="l05494" /><CodeLine lineNumber="5494"><span class="doxyHighlight">          .addImm(Src5)</span></CodeLine>
<Link id="l05495" /><CodeLine lineNumber="5495"><span class="doxyHighlight">          .getReg(0);</span></CodeLine>
<Link id="l05496" /><CodeLine lineNumber="5496"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05497" /><CodeLine lineNumber="5497"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;mov&#95;dpp8:</span></CodeLine>
<Link id="l05498" /><CodeLine lineNumber="5498"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> LaneOp.addImm(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getImm()).getReg(0);</span></CodeLine>
<Link id="l05499" /><CodeLine lineNumber="5499"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;update&#95;dpp:</span></CodeLine>
<Link id="l05500" /><CodeLine lineNumber="5500"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> LaneOp.addUse(Src1)</span></CodeLine>
<Link id="l05501" /><CodeLine lineNumber="5501"><span class="doxyHighlight">          .addImm(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getImm())</span></CodeLine>
<Link id="l05502" /><CodeLine lineNumber="5502"><span class="doxyHighlight">          .addImm(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5).getImm())</span></CodeLine>
<Link id="l05503" /><CodeLine lineNumber="5503"><span class="doxyHighlight">          .addImm(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(6).getImm())</span></CodeLine>
<Link id="l05504" /><CodeLine lineNumber="5504"><span class="doxyHighlight">          .addImm(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(7).getImm())</span></CodeLine>
<Link id="l05505" /><CodeLine lineNumber="5505"><span class="doxyHighlight">          .getReg(0);</span></CodeLine>
<Link id="l05506" /><CodeLine lineNumber="5506"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l05507" /><CodeLine lineNumber="5507"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;unhandled lane op&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05508" /><CodeLine lineNumber="5508"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05509" /><CodeLine lineNumber="5509"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l05510" /><CodeLine lineNumber="5510"></CodeLine>
<Link id="l05511" /><CodeLine lineNumber="5511"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DstReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l05512" /><CodeLine lineNumber="5512"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src0 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l05513" /><CodeLine lineNumber="5513"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src1, Src2;</span></CodeLine>
<Link id="l05514" /><CodeLine lineNumber="5514"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IID == Intrinsic::amdgcn&#95;readlane || IID == Intrinsic::amdgcn&#95;writelane ||</span></CodeLine>
<Link id="l05515" /><CodeLine lineNumber="5515"><span class="doxyHighlight">      IID == Intrinsic::amdgcn&#95;update&#95;dpp || IsSetInactive || IsPermLane16) &#123;</span></CodeLine>
<Link id="l05516" /><CodeLine lineNumber="5516"><span class="doxyHighlight">    Src1 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</span></CodeLine>
<Link id="l05517" /><CodeLine lineNumber="5517"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IID == Intrinsic::amdgcn&#95;writelane || IsPermLane16) &#123;</span></CodeLine>
<Link id="l05518" /><CodeLine lineNumber="5518"><span class="doxyHighlight">      Src2 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getReg();</span></CodeLine>
<Link id="l05519" /><CodeLine lineNumber="5519"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05520" /><CodeLine lineNumber="5520"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05521" /><CodeLine lineNumber="5521"></CodeLine>
<Link id="l05522" /><CodeLine lineNumber="5522"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(DstReg);</span></CodeLine>
<Link id="l05523" /><CodeLine lineNumber="5523"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = Ty.getSizeInBits();</span></CodeLine>
<Link id="l05524" /><CodeLine lineNumber="5524"></CodeLine>
<Link id="l05525" /><CodeLine lineNumber="5525"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> SplitSize = 32;</span></CodeLine>
<Link id="l05526" /><CodeLine lineNumber="5526"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IID == Intrinsic::amdgcn&#95;update&#95;dpp &amp;&amp; (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> % 64 == 0) &amp;&amp;</span></CodeLine>
<Link id="l05527" /><CodeLine lineNumber="5527"><span class="doxyHighlight">      ST.hasDPALU&#95;DPP() &amp;&amp;</span></CodeLine>
<Link id="l05528" /><CodeLine lineNumber="5528"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/amdgpu/#a18d2b72326bbdea2a9c1653b090f00ff">AMDGPU::isLegalDPALU&#95;DPPControl</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getImm()))</span></CodeLine>
<Link id="l05529" /><CodeLine lineNumber="5529"><span class="doxyHighlight">    SplitSize = 64;</span></CodeLine>
<Link id="l05530" /><CodeLine lineNumber="5530"></CodeLine>
<Link id="l05531" /><CodeLine lineNumber="5531"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> == SplitSize) &#123;</span></CodeLine>
<Link id="l05532" /><CodeLine lineNumber="5532"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Already legal</span></CodeLine>
<Link id="l05533" /><CodeLine lineNumber="5533"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05534" /><CodeLine lineNumber="5534"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05535" /><CodeLine lineNumber="5535"></CodeLine>
<Link id="l05536" /><CodeLine lineNumber="5536"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> &lt; 32) &#123;</span></CodeLine>
<Link id="l05537" /><CodeLine lineNumber="5537"><span class="doxyHighlight">    Src0 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnyExt(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Src0).getReg(0);</span></CodeLine>
<Link id="l05538" /><CodeLine lineNumber="5538"></CodeLine>
<Link id="l05539" /><CodeLine lineNumber="5539"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IID == Intrinsic::amdgcn&#95;update&#95;dpp || IsSetInactive || IsPermLane16)</span></CodeLine>
<Link id="l05540" /><CodeLine lineNumber="5540"><span class="doxyHighlight">      Src1 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnyExt(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32), Src1).getReg(0);</span></CodeLine>
<Link id="l05541" /><CodeLine lineNumber="5541"></CodeLine>
<Link id="l05542" /><CodeLine lineNumber="5542"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IID == Intrinsic::amdgcn&#95;writelane)</span></CodeLine>
<Link id="l05543" /><CodeLine lineNumber="5543"><span class="doxyHighlight">      Src2 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnyExt(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32), Src2).getReg(0);</span></CodeLine>
<Link id="l05544" /><CodeLine lineNumber="5544"></CodeLine>
<Link id="l05545" /><CodeLine lineNumber="5545"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> LaneOpDst = createLaneOp(Src0, Src1, Src2, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l05546" /><CodeLine lineNumber="5546"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildTrunc(DstReg, LaneOpDst);</span></CodeLine>
<Link id="l05547" /><CodeLine lineNumber="5547"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l05548" /><CodeLine lineNumber="5548"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05549" /><CodeLine lineNumber="5549"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05550" /><CodeLine lineNumber="5550"></CodeLine>
<Link id="l05551" /><CodeLine lineNumber="5551"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> % SplitSize != 0)</span></CodeLine>
<Link id="l05552" /><CodeLine lineNumber="5552"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05553" /><CodeLine lineNumber="5553"></CodeLine>
<Link id="l05554" /><CodeLine lineNumber="5554"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> PartialResTy = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(SplitSize);</span></CodeLine>
<Link id="l05555" /><CodeLine lineNumber="5555"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty.isVector()) &#123;</span></CodeLine>
<Link id="l05556" /><CodeLine lineNumber="5556"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> EltTy = Ty.getElementType();</span></CodeLine>
<Link id="l05557" /><CodeLine lineNumber="5557"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> EltSize = EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</span></CodeLine>
<Link id="l05558" /><CodeLine lineNumber="5558"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (EltSize == SplitSize) &#123;</span></CodeLine>
<Link id="l05559" /><CodeLine lineNumber="5559"><span class="doxyHighlight">      PartialResTy = EltTy;</span></CodeLine>
<Link id="l05560" /><CodeLine lineNumber="5560"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (EltSize == 16 || EltSize == 32) &#123;</span></CodeLine>
<Link id="l05561" /><CodeLine lineNumber="5561"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NElem = SplitSize / EltSize;</span></CodeLine>
<Link id="l05562" /><CodeLine lineNumber="5562"><span class="doxyHighlight">      PartialResTy = Ty.changeElementCount(<a href="/docs/api/classes/llvm/elementcount/#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(NElem));</span></CodeLine>
<Link id="l05563" /><CodeLine lineNumber="5563"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05564" /><CodeLine lineNumber="5564"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Handle all other cases via S32/S64 pieces;</span></CodeLine>
<Link id="l05565" /><CodeLine lineNumber="5565"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05566" /><CodeLine lineNumber="5566"></CodeLine>
<Link id="l05567" /><CodeLine lineNumber="5567"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Register, 4&gt;</a> PartialRes;</span></CodeLine>
<Link id="l05568" /><CodeLine lineNumber="5568"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumParts = <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> / SplitSize;</span></CodeLine>
<Link id="l05569" /><CodeLine lineNumber="5569"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a> Src0Parts = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(PartialResTy, Src0);</span></CodeLine>
<Link id="l05570" /><CodeLine lineNumber="5570"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a> Src1Parts, Src2Parts;</span></CodeLine>
<Link id="l05571" /><CodeLine lineNumber="5571"></CodeLine>
<Link id="l05572" /><CodeLine lineNumber="5572"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IID == Intrinsic::amdgcn&#95;update&#95;dpp || IsSetInactive || IsPermLane16)</span></CodeLine>
<Link id="l05573" /><CodeLine lineNumber="5573"><span class="doxyHighlight">    Src1Parts = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(PartialResTy, Src1);</span></CodeLine>
<Link id="l05574" /><CodeLine lineNumber="5574"></CodeLine>
<Link id="l05575" /><CodeLine lineNumber="5575"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IID == Intrinsic::amdgcn&#95;writelane)</span></CodeLine>
<Link id="l05576" /><CodeLine lineNumber="5576"><span class="doxyHighlight">    Src2Parts = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(PartialResTy, Src2);</span></CodeLine>
<Link id="l05577" /><CodeLine lineNumber="5577"></CodeLine>
<Link id="l05578" /><CodeLine lineNumber="5578"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> i = 0; i &lt; NumParts; ++i) &#123;</span></CodeLine>
<Link id="l05579" /><CodeLine lineNumber="5579"><span class="doxyHighlight">    Src0 = Src0Parts.<a href="/docs/api/classes/llvm/machineinstrbuilder/#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(i);</span></CodeLine>
<Link id="l05580" /><CodeLine lineNumber="5580"></CodeLine>
<Link id="l05581" /><CodeLine lineNumber="5581"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IID == Intrinsic::amdgcn&#95;update&#95;dpp || IsSetInactive || IsPermLane16)</span></CodeLine>
<Link id="l05582" /><CodeLine lineNumber="5582"><span class="doxyHighlight">      Src1 = Src1Parts.<a href="/docs/api/classes/llvm/machineinstrbuilder/#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(i);</span></CodeLine>
<Link id="l05583" /><CodeLine lineNumber="5583"></CodeLine>
<Link id="l05584" /><CodeLine lineNumber="5584"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IID == Intrinsic::amdgcn&#95;writelane)</span></CodeLine>
<Link id="l05585" /><CodeLine lineNumber="5585"><span class="doxyHighlight">      Src2 = Src2Parts.<a href="/docs/api/classes/llvm/machineinstrbuilder/#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(i);</span></CodeLine>
<Link id="l05586" /><CodeLine lineNumber="5586"></CodeLine>
<Link id="l05587" /><CodeLine lineNumber="5587"><span class="doxyHighlight">    PartialRes.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(createLaneOp(Src0, Src1, Src2, PartialResTy));</span></CodeLine>
<Link id="l05588" /><CodeLine lineNumber="5588"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05589" /><CodeLine lineNumber="5589"></CodeLine>
<Link id="l05590" /><CodeLine lineNumber="5590"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(DstReg, PartialRes);</span></CodeLine>
<Link id="l05591" /><CodeLine lineNumber="5591"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l05592" /><CodeLine lineNumber="5592"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05593" /><CodeLine lineNumber="5593"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05594" /><CodeLine lineNumber="5594"></CodeLine>
<Link id="l05595" /><CodeLine lineNumber="5595" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#ad7c01a9166d49578fc9cb3162a87f396"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ad7c01a9166d49578fc9cb3162a87f396">AMDGPULegalizerInfo::getImplicitArgPtr</a>(<a href="/docs/api/classes/llvm/register">Register</a> DstReg,</span></CodeLine>
<Link id="l05596" /><CodeLine lineNumber="5596"><span class="doxyHighlight">                                            <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l05597" /><CodeLine lineNumber="5597"><span class="doxyHighlight">                                            <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05598" /><CodeLine lineNumber="5598"><span class="doxyHighlight">  uint64&#95;t <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> =</span></CodeLine>
<Link id="l05599" /><CodeLine lineNumber="5599"><span class="doxyHighlight">    ST.getTargetLowering()-&gt;getImplicitParameterOffset(</span></CodeLine>
<Link id="l05600" /><CodeLine lineNumber="5600"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF(), <a href="/docs/api/classes/llvm/amdgputargetlowering/#aabb66ae6636b6dbd45c1b66dd9353821a3b608a404034c22b030fca524632ebb0">AMDGPUTargetLowering::FIRST&#95;IMPLICIT</a>);</span></CodeLine>
<Link id="l05601" /><CodeLine lineNumber="5601"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> DstTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(DstReg);</span></CodeLine>
<Link id="l05602" /><CodeLine lineNumber="5602"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> IdxTy = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(DstTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</span></CodeLine>
<Link id="l05603" /><CodeLine lineNumber="5603"></CodeLine>
<Link id="l05604" /><CodeLine lineNumber="5604"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> KernargPtrReg = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(DstTy);</span></CodeLine>
<Link id="l05605" /><CodeLine lineNumber="5605"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(KernargPtrReg, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l05606" /><CodeLine lineNumber="5606"><span class="doxyHighlight">                      <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98baf32f3fd30ae548866dc7e45092dd90b9">AMDGPUFunctionArgInfo::KERNARG&#95;SEGMENT&#95;PTR</a>))</span></CodeLine>
<Link id="l05607" /><CodeLine lineNumber="5607"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05608" /><CodeLine lineNumber="5608"></CodeLine>
<Link id="l05609" /><CodeLine lineNumber="5609"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: This should be nuw</span></CodeLine>
<Link id="l05610" /><CodeLine lineNumber="5610"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildPtrAdd(DstReg, KernargPtrReg, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(IdxTy, <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>).getReg(0));</span></CodeLine>
<Link id="l05611" /><CodeLine lineNumber="5611"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05612" /><CodeLine lineNumber="5612"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05613" /><CodeLine lineNumber="5613"></CodeLine>
<Link id="l05614" /><CodeLine lineNumber="5614"><span class="doxyHighlightComment">/// To create a buffer resource from a 64-bit pointer, mask off the upper 32</span></CodeLine>
<Link id="l05615" /><CodeLine lineNumber="5615"><span class="doxyHighlightComment">/// bits of the pointer and replace them with the stride argument, then</span></CodeLine>
<Link id="l05616" /><CodeLine lineNumber="5616"><span class="doxyHighlightComment">/// merge&#95;values everything together. In the common case of a raw buffer (the</span></CodeLine>
<Link id="l05617" /><CodeLine lineNumber="5617"><span class="doxyHighlightComment">/// stride component is 0), we can just AND off the upper half.</span></CodeLine>
<Link id="l05618" /><CodeLine lineNumber="5618" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a376125f5ee6f0a21fdd6336557fa3913"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a376125f5ee6f0a21fdd6336557fa3913">AMDGPULegalizerInfo::legalizePointerAsRsrcIntrin</a>(</span></CodeLine>
<Link id="l05619" /><CodeLine lineNumber="5619"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05620" /><CodeLine lineNumber="5620"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Result = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l05621" /><CodeLine lineNumber="5621"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Pointer = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l05622" /><CodeLine lineNumber="5622"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Stride = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</span></CodeLine>
<Link id="l05623" /><CodeLine lineNumber="5623"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> NumRecords = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getReg();</span></CodeLine>
<Link id="l05624" /><CodeLine lineNumber="5624"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Flags = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5).getReg();</span></CodeLine>
<Link id="l05625" /><CodeLine lineNumber="5625"></CodeLine>
<Link id="l05626" /><CodeLine lineNumber="5626"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l05627" /><CodeLine lineNumber="5627"></CodeLine>
<Link id="l05628" /><CodeLine lineNumber="5628"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.setInsertPt(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMBB(), ++<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getInsertPt());</span></CodeLine>
<Link id="l05629" /><CodeLine lineNumber="5629"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Pointer);</span></CodeLine>
<Link id="l05630" /><CodeLine lineNumber="5630"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> LowHalf = Unmerge.getReg(0);</span></CodeLine>
<Link id="l05631" /><CodeLine lineNumber="5631"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> HighHalf = Unmerge.getReg(1);</span></CodeLine>
<Link id="l05632" /><CodeLine lineNumber="5632"></CodeLine>
<Link id="l05633" /><CodeLine lineNumber="5633"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> AndMask = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 0x0000ffff);</span></CodeLine>
<Link id="l05634" /><CodeLine lineNumber="5634"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#a205029ee514828d0fb4988399ef3ece4a6864311f985d160ad4bd46a9fbe4a4d4">Masked</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnd(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, HighHalf, AndMask);</span></CodeLine>
<Link id="l05635" /><CodeLine lineNumber="5635"></CodeLine>
<Link id="l05636" /><CodeLine lineNumber="5636"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a> NewHighHalf = <a href="/docs/api/namespaces/llvm/#a205029ee514828d0fb4988399ef3ece4a6864311f985d160ad4bd46a9fbe4a4d4">Masked</a>;</span></CodeLine>
<Link id="l05637" /><CodeLine lineNumber="5637"><span class="doxyHighlight">  std::optional&lt;ValueAndVReg&gt; StrideConst =</span></CodeLine>
<Link id="l05638" /><CodeLine lineNumber="5638"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(Stride, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</span></CodeLine>
<Link id="l05639" /><CodeLine lineNumber="5639"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!StrideConst || !StrideConst-&gt;Value.isZero()) &#123;</span></CodeLine>
<Link id="l05640" /><CodeLine lineNumber="5640"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineinstrbuilder">MachineInstrBuilder</a> ShiftedStride;</span></CodeLine>
<Link id="l05641" /><CodeLine lineNumber="5641"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (StrideConst) &#123;</span></CodeLine>
<Link id="l05642" /><CodeLine lineNumber="5642"><span class="doxyHighlight">      uint32&#95;t StrideVal = StrideConst-&gt;Value.getZExtValue();</span></CodeLine>
<Link id="l05643" /><CodeLine lineNumber="5643"><span class="doxyHighlight">      uint32&#95;t ShiftedStrideVal = StrideVal &lt;&lt; 16;</span></CodeLine>
<Link id="l05644" /><CodeLine lineNumber="5644"><span class="doxyHighlight">      ShiftedStride = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, ShiftedStrideVal);</span></CodeLine>
<Link id="l05645" /><CodeLine lineNumber="5645"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l05646" /><CodeLine lineNumber="5646"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ExtStride = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnyExt(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Stride);</span></CodeLine>
<Link id="l05647" /><CodeLine lineNumber="5647"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ShiftConst = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 16);</span></CodeLine>
<Link id="l05648" /><CodeLine lineNumber="5648"><span class="doxyHighlight">      ShiftedStride = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildShl(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, ExtStride, ShiftConst);</span></CodeLine>
<Link id="l05649" /><CodeLine lineNumber="5649"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05650" /><CodeLine lineNumber="5650"><span class="doxyHighlight">    NewHighHalf = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildOr(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/namespaces/llvm/#a205029ee514828d0fb4988399ef3ece4a6864311f985d160ad4bd46a9fbe4a4d4">Masked</a>, ShiftedStride);</span></CodeLine>
<Link id="l05651" /><CodeLine lineNumber="5651"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05652" /><CodeLine lineNumber="5652"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> NewHighHalfReg = NewHighHalf.<a href="/docs/api/classes/llvm/machineinstrbuilder/#a1c5fadb14ff1d77faad0cb58a43252ab">getReg</a>(0);</span></CodeLine>
<Link id="l05653" /><CodeLine lineNumber="5653"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeValues(Result, &#123;LowHalf, NewHighHalfReg, NumRecords, Flags&#125;);</span></CodeLine>
<Link id="l05654" /><CodeLine lineNumber="5654"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l05655" /><CodeLine lineNumber="5655"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05656" /><CodeLine lineNumber="5656"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05657" /><CodeLine lineNumber="5657"></CodeLine>
<Link id="l05658" /><CodeLine lineNumber="5658" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a8bc1455f0ec29a33f76adecf8e668af8"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a8bc1455f0ec29a33f76adecf8e668af8">AMDGPULegalizerInfo::legalizeImplicitArgPtr</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l05659" /><CodeLine lineNumber="5659"><span class="doxyHighlight">                                                 <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l05660" /><CodeLine lineNumber="5660"><span class="doxyHighlight">                                                 <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05661" /><CodeLine lineNumber="5661"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a> &#42;MFI = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF().getInfo&lt;<a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a>&gt;();</span></CodeLine>
<Link id="l05662" /><CodeLine lineNumber="5662"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!MFI-&gt;<a href="/docs/api/classes/llvm/amdgpumachinefunction/#ab37f1839fd82f8b84b7a2ca87b289c46">isEntryFunction</a>()) &#123;</span></CodeLine>
<Link id="l05663" /><CodeLine lineNumber="5663"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l05664" /><CodeLine lineNumber="5664"><span class="doxyHighlight">                                      <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98ba42b0ab73a3671c39fa2798ffe9e80747">AMDGPUFunctionArgInfo::IMPLICIT&#95;ARG&#95;PTR</a>);</span></CodeLine>
<Link id="l05665" /><CodeLine lineNumber="5665"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05666" /><CodeLine lineNumber="5666"></CodeLine>
<Link id="l05667" /><CodeLine lineNumber="5667"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DstReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l05668" /><CodeLine lineNumber="5668"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ad7c01a9166d49578fc9cb3162a87f396">getImplicitArgPtr</a>(DstReg, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>))</span></CodeLine>
<Link id="l05669" /><CodeLine lineNumber="5669"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05670" /><CodeLine lineNumber="5670"></CodeLine>
<Link id="l05671" /><CodeLine lineNumber="5671"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l05672" /><CodeLine lineNumber="5672"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05673" /><CodeLine lineNumber="5673"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05674" /><CodeLine lineNumber="5674"></CodeLine>
<Link id="l05675" /><CodeLine lineNumber="5675" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3bf20d7d5d2943a38d01c00d1aa82104"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3bf20d7d5d2943a38d01c00d1aa82104">AMDGPULegalizerInfo::getLDSKernelId</a>(<a href="/docs/api/classes/llvm/register">Register</a> DstReg,</span></CodeLine>
<Link id="l05676" /><CodeLine lineNumber="5676"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l05677" /><CodeLine lineNumber="5677"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05678" /><CodeLine lineNumber="5678"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF().getFunction();</span></CodeLine>
<Link id="l05679" /><CodeLine lineNumber="5679"><span class="doxyHighlight">  std::optional&lt;uint32&#95;t&gt; KnownSize =</span></CodeLine>
<Link id="l05680" /><CodeLine lineNumber="5680"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/amdgpumachinefunction/#a13726c00b6a447734d47ecaae49ebbd0">AMDGPUMachineFunction::getLDSKernelIdMetadata</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</span></CodeLine>
<Link id="l05681" /><CodeLine lineNumber="5681"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (KnownSize.has&#95;value())</span></CodeLine>
<Link id="l05682" /><CodeLine lineNumber="5682"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(DstReg, &#42;KnownSize);</span></CodeLine>
<Link id="l05683" /><CodeLine lineNumber="5683"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05684" /><CodeLine lineNumber="5684"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05685" /><CodeLine lineNumber="5685"></CodeLine>
<Link id="l05686" /><CodeLine lineNumber="5686" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#ab40f765949a66d4973d528dcf38615fc"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ab40f765949a66d4973d528dcf38615fc">AMDGPULegalizerInfo::legalizeLDSKernelId</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l05687" /><CodeLine lineNumber="5687"><span class="doxyHighlight">                                              <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l05688" /><CodeLine lineNumber="5688"><span class="doxyHighlight">                                              <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05689" /><CodeLine lineNumber="5689"></CodeLine>
<Link id="l05690" /><CodeLine lineNumber="5690"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a> &#42;MFI = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF().getInfo&lt;<a href="/docs/api/classes/llvm/simachinefunctioninfo">SIMachineFunctionInfo</a>&gt;();</span></CodeLine>
<Link id="l05691" /><CodeLine lineNumber="5691"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!MFI-&gt;<a href="/docs/api/classes/llvm/amdgpumachinefunction/#ab37f1839fd82f8b84b7a2ca87b289c46">isEntryFunction</a>()) &#123;</span></CodeLine>
<Link id="l05692" /><CodeLine lineNumber="5692"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l05693" /><CodeLine lineNumber="5693"><span class="doxyHighlight">                                      <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98ba20d047732dd4b74606c9c63280727fa3">AMDGPUFunctionArgInfo::LDS&#95;KERNEL&#95;ID</a>);</span></CodeLine>
<Link id="l05694" /><CodeLine lineNumber="5694"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05695" /><CodeLine lineNumber="5695"></CodeLine>
<Link id="l05696" /><CodeLine lineNumber="5696"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DstReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l05697" /><CodeLine lineNumber="5697"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3bf20d7d5d2943a38d01c00d1aa82104">getLDSKernelId</a>(DstReg, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>))</span></CodeLine>
<Link id="l05698" /><CodeLine lineNumber="5698"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05699" /><CodeLine lineNumber="5699"></CodeLine>
<Link id="l05700" /><CodeLine lineNumber="5700"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l05701" /><CodeLine lineNumber="5701"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05702" /><CodeLine lineNumber="5702"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05703" /><CodeLine lineNumber="5703"></CodeLine>
<Link id="l05704" /><CodeLine lineNumber="5704" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a1a1ef8cdc87d83bb4e114e897e86d58c"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a1a1ef8cdc87d83bb4e114e897e86d58c">AMDGPULegalizerInfo::legalizeIsAddrSpace</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l05705" /><CodeLine lineNumber="5705"><span class="doxyHighlight">                                              <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l05706" /><CodeLine lineNumber="5706"><span class="doxyHighlight">                                              <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l05707" /><CodeLine lineNumber="5707"><span class="doxyHighlight">                                              </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AddrSpace)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05708" /><CodeLine lineNumber="5708"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> ApertureReg = <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a2fd97f50411bc650c7f9f6e3118147f4">getSegmentAperture</a>(AddrSpace, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l05709" /><CodeLine lineNumber="5709"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32), <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg());</span></CodeLine>
<Link id="l05710" /><CodeLine lineNumber="5710"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Hi32 = Unmerge.getReg(1);</span></CodeLine>
<Link id="l05711" /><CodeLine lineNumber="5711"></CodeLine>
<Link id="l05712" /><CodeLine lineNumber="5712"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildICmp(<a href="/docs/api/classes/llvm/cmpinst/#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP&#95;EQ</a>, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), Hi32, ApertureReg);</span></CodeLine>
<Link id="l05713" /><CodeLine lineNumber="5713"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l05714" /><CodeLine lineNumber="5714"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05715" /><CodeLine lineNumber="5715"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05716" /><CodeLine lineNumber="5716"></CodeLine>
<Link id="l05717" /><CodeLine lineNumber="5717"><span class="doxyHighlightComment">// The raw.(t)buffer and struct.(t)buffer intrinsics have two offset args:</span></CodeLine>
<Link id="l05718" /><CodeLine lineNumber="5718"><span class="doxyHighlightComment">// offset (the offset that is included in bounds checking and swizzling, to be</span></CodeLine>
<Link id="l05719" /><CodeLine lineNumber="5719"><span class="doxyHighlightComment">// split between the instruction&#39;s voffset and immoffset fields) and soffset</span></CodeLine>
<Link id="l05720" /><CodeLine lineNumber="5720"><span class="doxyHighlightComment">// (the offset that is excluded from bounds checking and swizzling, to go in</span></CodeLine>
<Link id="l05721" /><CodeLine lineNumber="5721"><span class="doxyHighlightComment">// the instruction&#39;s soffset field).  This function takes the first kind of</span></CodeLine>
<Link id="l05722" /><CodeLine lineNumber="5722"><span class="doxyHighlightComment">// offset and figures out how to split it between voffset and immoffset.</span></CodeLine>
<Link id="l05723" /><CodeLine lineNumber="5723"><span class="doxyHighlight">std::pair&lt;Register, unsigned&gt;</span></CodeLine>
<Link id="l05724" /><CodeLine lineNumber="5724" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a14daf64c8f1ebcbe259a41854f49ad12"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a14daf64c8f1ebcbe259a41854f49ad12">AMDGPULegalizerInfo::splitBufferOffsets</a>(<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l05725" /><CodeLine lineNumber="5725"><span class="doxyHighlight">                                        <a href="/docs/api/classes/llvm/register">Register</a> OrigOffset)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05726" /><CodeLine lineNumber="5726"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> MaxImm = <a href="/docs/api/classes/llvm/siinstrinfo/#a1fa48fff435124100b9bc18b162bcfd3">SIInstrInfo::getMaxMUBUFImmOffset</a>(ST);</span></CodeLine>
<Link id="l05727" /><CodeLine lineNumber="5727"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> BaseReg;</span></CodeLine>
<Link id="l05728" /><CodeLine lineNumber="5728"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ImmOffset;</span></CodeLine>
<Link id="l05729" /><CodeLine lineNumber="5729"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l05730" /><CodeLine lineNumber="5730"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI();</span></CodeLine>
<Link id="l05731" /><CodeLine lineNumber="5731"></CodeLine>
<Link id="l05732" /><CodeLine lineNumber="5732"><span class="doxyHighlight">  std::tie(BaseReg, ImmOffset) =</span></CodeLine>
<Link id="l05733" /><CodeLine lineNumber="5733"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/amdgpu/#afc1af790923d299c9f6c0b631034dbc6">AMDGPU::getBaseWithConstantOffset</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, OrigOffset);</span></CodeLine>
<Link id="l05734" /><CodeLine lineNumber="5734"></CodeLine>
<Link id="l05735" /><CodeLine lineNumber="5735"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If BaseReg is a pointer, convert it to int.</span></CodeLine>
<Link id="l05736" /><CodeLine lineNumber="5736"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(BaseReg).isPointer())</span></CodeLine>
<Link id="l05737" /><CodeLine lineNumber="5737"><span class="doxyHighlight">    BaseReg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildPtrToInt(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(OrigOffset), BaseReg).getReg(0);</span></CodeLine>
<Link id="l05738" /><CodeLine lineNumber="5738"></CodeLine>
<Link id="l05739" /><CodeLine lineNumber="5739"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If the immediate value is too big for the immoffset field, put only bits</span></CodeLine>
<Link id="l05740" /><CodeLine lineNumber="5740"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// that would normally fit in the immoffset field. The remaining value that</span></CodeLine>
<Link id="l05741" /><CodeLine lineNumber="5741"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// is copied/added for the voffset field is a large power of 2, and it</span></CodeLine>
<Link id="l05742" /><CodeLine lineNumber="5742"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// stands more chance of being CSEd with the copy/add for another similar</span></CodeLine>
<Link id="l05743" /><CodeLine lineNumber="5743"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// load/store.</span></CodeLine>
<Link id="l05744" /><CodeLine lineNumber="5744"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// However, do not do that rounding down if that is a negative</span></CodeLine>
<Link id="l05745" /><CodeLine lineNumber="5745"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// number, as it appears to be illegal to have a negative offset in the</span></CodeLine>
<Link id="l05746" /><CodeLine lineNumber="5746"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// vgpr, even if adding the immediate offset makes it positive.</span></CodeLine>
<Link id="l05747" /><CodeLine lineNumber="5747"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Overflow = ImmOffset &amp; ~MaxImm;</span></CodeLine>
<Link id="l05748" /><CodeLine lineNumber="5748"><span class="doxyHighlight">  ImmOffset -= Overflow;</span></CodeLine>
<Link id="l05749" /><CodeLine lineNumber="5749"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((int32&#95;t)Overflow &lt; 0) &#123;</span></CodeLine>
<Link id="l05750" /><CodeLine lineNumber="5750"><span class="doxyHighlight">    Overflow += ImmOffset;</span></CodeLine>
<Link id="l05751" /><CodeLine lineNumber="5751"><span class="doxyHighlight">    ImmOffset = 0;</span></CodeLine>
<Link id="l05752" /><CodeLine lineNumber="5752"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05753" /><CodeLine lineNumber="5753"></CodeLine>
<Link id="l05754" /><CodeLine lineNumber="5754"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Overflow != 0) &#123;</span></CodeLine>
<Link id="l05755" /><CodeLine lineNumber="5755"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!BaseReg) &#123;</span></CodeLine>
<Link id="l05756" /><CodeLine lineNumber="5756"><span class="doxyHighlight">      BaseReg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Overflow).getReg(0);</span></CodeLine>
<Link id="l05757" /><CodeLine lineNumber="5757"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l05758" /><CodeLine lineNumber="5758"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> OverflowVal = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Overflow);</span></CodeLine>
<Link id="l05759" /><CodeLine lineNumber="5759"><span class="doxyHighlight">      BaseReg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAdd(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, BaseReg, OverflowVal).getReg(0);</span></CodeLine>
<Link id="l05760" /><CodeLine lineNumber="5760"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05761" /><CodeLine lineNumber="5761"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05762" /><CodeLine lineNumber="5762"></CodeLine>
<Link id="l05763" /><CodeLine lineNumber="5763"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!BaseReg)</span></CodeLine>
<Link id="l05764" /><CodeLine lineNumber="5764"><span class="doxyHighlight">    BaseReg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 0).getReg(0);</span></CodeLine>
<Link id="l05765" /><CodeLine lineNumber="5765"></CodeLine>
<Link id="l05766" /><CodeLine lineNumber="5766"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> std::pair(BaseReg, ImmOffset);</span></CodeLine>
<Link id="l05767" /><CodeLine lineNumber="5767"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05768" /><CodeLine lineNumber="5768"></CodeLine>
<Link id="l05769" /><CodeLine lineNumber="5769"><span class="doxyHighlightComment">/// Handle register layout difference for f16 images for some subtargets.</span></CodeLine>
<Link id="l05770" /><CodeLine lineNumber="5770" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3dcd2bcf223daced673ed18e4ad47efa"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3dcd2bcf223daced673ed18e4ad47efa">AMDGPULegalizerInfo::handleD16VData</a>(<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l05771" /><CodeLine lineNumber="5771"><span class="doxyHighlight">                                             <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l05772" /><CodeLine lineNumber="5772"><span class="doxyHighlight">                                             <a href="/docs/api/classes/llvm/register">Register</a> Reg,</span></CodeLine>
<Link id="l05773" /><CodeLine lineNumber="5773"><span class="doxyHighlight">                                             </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> ImageStore)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05774" /><CodeLine lineNumber="5774"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</span></CodeLine>
<Link id="l05775" /><CodeLine lineNumber="5775"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l05776" /><CodeLine lineNumber="5776"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> StoreVT = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Reg);</span></CodeLine>
<Link id="l05777" /><CodeLine lineNumber="5777"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(StoreVT.<a href="/docs/api/classes/llvm/llt/#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; StoreVT.<a href="/docs/api/classes/llvm/llt/#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>() == <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>);</span></CodeLine>
<Link id="l05778" /><CodeLine lineNumber="5778"></CodeLine>
<Link id="l05779" /><CodeLine lineNumber="5779"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasUnpackedD16VMem()) &#123;</span></CodeLine>
<Link id="l05780" /><CodeLine lineNumber="5780"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, Reg);</span></CodeLine>
<Link id="l05781" /><CodeLine lineNumber="5781"></CodeLine>
<Link id="l05782" /><CodeLine lineNumber="5782"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Register, 4&gt;</a> WideRegs;</span></CodeLine>
<Link id="l05783" /><CodeLine lineNumber="5783"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = Unmerge-&gt;getNumOperands() - 1; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</span></CodeLine>
<Link id="l05784" /><CodeLine lineNumber="5784"><span class="doxyHighlight">      WideRegs.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnyExt(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Unmerge.getReg(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)).getReg(0));</span></CodeLine>
<Link id="l05785" /><CodeLine lineNumber="5785"></CodeLine>
<Link id="l05786" /><CodeLine lineNumber="5786"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NumElts = StoreVT.<a href="/docs/api/classes/llvm/llt/#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</span></CodeLine>
<Link id="l05787" /><CodeLine lineNumber="5787"></CodeLine>
<Link id="l05788" /><CodeLine lineNumber="5788"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBuildVector(<a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(NumElts, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>), WideRegs)</span></CodeLine>
<Link id="l05789" /><CodeLine lineNumber="5789"><span class="doxyHighlight">        .getReg(0);</span></CodeLine>
<Link id="l05790" /><CodeLine lineNumber="5790"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05791" /><CodeLine lineNumber="5791"></CodeLine>
<Link id="l05792" /><CodeLine lineNumber="5792"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ImageStore &amp;&amp; ST.hasImageStoreD16Bug()) &#123;</span></CodeLine>
<Link id="l05793" /><CodeLine lineNumber="5793"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (StoreVT.<a href="/docs/api/classes/llvm/llt/#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() == 2) &#123;</span></CodeLine>
<Link id="l05794" /><CodeLine lineNumber="5794"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Register, 4&gt;</a> PackedRegs;</span></CodeLine>
<Link id="l05795" /><CodeLine lineNumber="5795"><span class="doxyHighlight">      Reg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBitcast(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Reg).getReg(0);</span></CodeLine>
<Link id="l05796" /><CodeLine lineNumber="5796"><span class="doxyHighlight">      PackedRegs.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Reg);</span></CodeLine>
<Link id="l05797" /><CodeLine lineNumber="5797"><span class="doxyHighlight">      PackedRegs.<a href="/docs/api/classes/llvm/smallvectorimpl/#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(2, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUndef(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>).getReg(0));</span></CodeLine>
<Link id="l05798" /><CodeLine lineNumber="5798"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBuildVector(<a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>), PackedRegs)</span></CodeLine>
<Link id="l05799" /><CodeLine lineNumber="5799"><span class="doxyHighlight">          .getReg(0);</span></CodeLine>
<Link id="l05800" /><CodeLine lineNumber="5800"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05801" /><CodeLine lineNumber="5801"></CodeLine>
<Link id="l05802" /><CodeLine lineNumber="5802"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (StoreVT.<a href="/docs/api/classes/llvm/llt/#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() == 3) &#123;</span></CodeLine>
<Link id="l05803" /><CodeLine lineNumber="5803"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Register, 4&gt;</a> PackedRegs;</span></CodeLine>
<Link id="l05804" /><CodeLine lineNumber="5804"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, Reg);</span></CodeLine>
<Link id="l05805" /><CodeLine lineNumber="5805"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = Unmerge-&gt;getNumOperands() - 1; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</span></CodeLine>
<Link id="l05806" /><CodeLine lineNumber="5806"><span class="doxyHighlight">        PackedRegs.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Unmerge.getReg(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l05807" /><CodeLine lineNumber="5807"><span class="doxyHighlight">      PackedRegs.<a href="/docs/api/classes/llvm/smallvectorimpl/#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(6, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUndef(<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>).getReg(0));</span></CodeLine>
<Link id="l05808" /><CodeLine lineNumber="5808"><span class="doxyHighlight">      Reg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBuildVector(<a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(6, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>), PackedRegs).getReg(0);</span></CodeLine>
<Link id="l05809" /><CodeLine lineNumber="5809"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBitcast(<a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(3, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>), Reg).getReg(0);</span></CodeLine>
<Link id="l05810" /><CodeLine lineNumber="5810"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05811" /><CodeLine lineNumber="5811"></CodeLine>
<Link id="l05812" /><CodeLine lineNumber="5812"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (StoreVT.<a href="/docs/api/classes/llvm/llt/#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() == 4) &#123;</span></CodeLine>
<Link id="l05813" /><CodeLine lineNumber="5813"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Register, 4&gt;</a> PackedRegs;</span></CodeLine>
<Link id="l05814" /><CodeLine lineNumber="5814"><span class="doxyHighlight">      Reg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBitcast(<a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>), Reg).getReg(0);</span></CodeLine>
<Link id="l05815" /><CodeLine lineNumber="5815"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Reg);</span></CodeLine>
<Link id="l05816" /><CodeLine lineNumber="5816"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = Unmerge-&gt;getNumOperands() - 1; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</span></CodeLine>
<Link id="l05817" /><CodeLine lineNumber="5817"><span class="doxyHighlight">        PackedRegs.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Unmerge.getReg(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</span></CodeLine>
<Link id="l05818" /><CodeLine lineNumber="5818"><span class="doxyHighlight">      PackedRegs.<a href="/docs/api/classes/llvm/smallvectorimpl/#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(4, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUndef(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>).getReg(0));</span></CodeLine>
<Link id="l05819" /><CodeLine lineNumber="5819"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBuildVector(<a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(4, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>), PackedRegs)</span></CodeLine>
<Link id="l05820" /><CodeLine lineNumber="5820"><span class="doxyHighlight">          .getReg(0);</span></CodeLine>
<Link id="l05821" /><CodeLine lineNumber="5821"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05822" /><CodeLine lineNumber="5822"></CodeLine>
<Link id="l05823" /><CodeLine lineNumber="5823"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;invalid data type&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l05824" /><CodeLine lineNumber="5824"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05825" /><CodeLine lineNumber="5825"></CodeLine>
<Link id="l05826" /><CodeLine lineNumber="5826"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (StoreVT == <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(3, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)) &#123;</span></CodeLine>
<Link id="l05827" /><CodeLine lineNumber="5827"><span class="doxyHighlight">    Reg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildPadVectorWithUndefElements(<a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(4, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>), Reg)</span></CodeLine>
<Link id="l05828" /><CodeLine lineNumber="5828"><span class="doxyHighlight">              .getReg(0);</span></CodeLine>
<Link id="l05829" /><CodeLine lineNumber="5829"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05830" /><CodeLine lineNumber="5830"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> Reg;</span></CodeLine>
<Link id="l05831" /><CodeLine lineNumber="5831"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05832" /><CodeLine lineNumber="5832"></CodeLine>
<Link id="l05833" /><CodeLine lineNumber="5833" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#af3c20d55579ac56788b8134a4d3e724f"><span class="doxyHighlight"><a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#af3c20d55579ac56788b8134a4d3e724f">AMDGPULegalizerInfo::fixStoreSourceType</a>(<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l05834" /><CodeLine lineNumber="5834"><span class="doxyHighlight">                                                 <a href="/docs/api/classes/llvm/register">Register</a> VData, <a href="/docs/api/classes/llvm/llt">LLT</a> MemTy,</span></CodeLine>
<Link id="l05835" /><CodeLine lineNumber="5835"><span class="doxyHighlight">                                                 </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsFormat)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05836" /><CodeLine lineNumber="5836"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI();</span></CodeLine>
<Link id="l05837" /><CodeLine lineNumber="5837"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;getType(VData);</span></CodeLine>
<Link id="l05838" /><CodeLine lineNumber="5838"></CodeLine>
<Link id="l05839" /><CodeLine lineNumber="5839"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</span></CodeLine>
<Link id="l05840" /><CodeLine lineNumber="5840"></CodeLine>
<Link id="l05841" /><CodeLine lineNumber="5841"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Fixup buffer resources themselves needing to be v4i128.</span></CodeLine>
<Link id="l05842" /><CodeLine lineNumber="5842"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#abb71b9eb64250d4491336cf106be74eb">hasBufferRsrcWorkaround</a>(Ty))</span></CodeLine>
<Link id="l05843" /><CodeLine lineNumber="5843"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="#a5a32fa3ab512ce8c3afa4e68c2b56765">castBufferRsrcToV4I32</a>(VData, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l05844" /><CodeLine lineNumber="5844"></CodeLine>
<Link id="l05845" /><CodeLine lineNumber="5845"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a1c42298ffb49a95c87577d3e5de46aea">shouldBitcastLoadStoreType</a>(ST, Ty, MemTy)) &#123;</span></CodeLine>
<Link id="l05846" /><CodeLine lineNumber="5846"><span class="doxyHighlight">    Ty = <a href="#a639711ef50cb300db9e9ade1445ccf07">getBitcastRegisterType</a>(Ty);</span></CodeLine>
<Link id="l05847" /><CodeLine lineNumber="5847"><span class="doxyHighlight">    VData = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBitcast(Ty, VData).getReg(0);</span></CodeLine>
<Link id="l05848" /><CodeLine lineNumber="5848"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05849" /><CodeLine lineNumber="5849"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Fixup illegal register types for i8 stores.</span></CodeLine>
<Link id="l05850" /><CodeLine lineNumber="5850"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(8) || Ty == <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>) &#123;</span></CodeLine>
<Link id="l05851" /><CodeLine lineNumber="5851"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> AnyExt = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnyExt(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32), VData).getReg(0);</span></CodeLine>
<Link id="l05852" /><CodeLine lineNumber="5852"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AnyExt;</span></CodeLine>
<Link id="l05853" /><CodeLine lineNumber="5853"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05854" /><CodeLine lineNumber="5854"></CodeLine>
<Link id="l05855" /><CodeLine lineNumber="5855"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty.isVector()) &#123;</span></CodeLine>
<Link id="l05856" /><CodeLine lineNumber="5856"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty.getElementType() == <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a> &amp;&amp; Ty.getNumElements() &lt;= 4) &#123;</span></CodeLine>
<Link id="l05857" /><CodeLine lineNumber="5857"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsFormat)</span></CodeLine>
<Link id="l05858" /><CodeLine lineNumber="5858"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3dcd2bcf223daced673ed18e4ad47efa">handleD16VData</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, &#42;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, VData);</span></CodeLine>
<Link id="l05859" /><CodeLine lineNumber="5859"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05860" /><CodeLine lineNumber="5860"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05861" /><CodeLine lineNumber="5861"></CodeLine>
<Link id="l05862" /><CodeLine lineNumber="5862"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> VData;</span></CodeLine>
<Link id="l05863" /><CodeLine lineNumber="5863"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05864" /><CodeLine lineNumber="5864"></CodeLine>
<Link id="l05865" /><CodeLine lineNumber="5865" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a2324ad614c957fc91b34a00f32e89d60"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a2324ad614c957fc91b34a00f32e89d60">AMDGPULegalizerInfo::legalizeBufferStore</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l05866" /><CodeLine lineNumber="5866"><span class="doxyHighlight">                                              <a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> &amp;Helper,</span></CodeLine>
<Link id="l05867" /><CodeLine lineNumber="5867"><span class="doxyHighlight">                                              </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsTyped,</span></CodeLine>
<Link id="l05868" /><CodeLine lineNumber="5868"><span class="doxyHighlight">                                              </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsFormat)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05869" /><CodeLine lineNumber="5869"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</span></CodeLine>
<Link id="l05870" /><CodeLine lineNumber="5870"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI();</span></CodeLine>
<Link id="l05871" /><CodeLine lineNumber="5871"></CodeLine>
<Link id="l05872" /><CodeLine lineNumber="5872"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> VData = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l05873" /><CodeLine lineNumber="5873"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(VData);</span></CodeLine>
<Link id="l05874" /><CodeLine lineNumber="5874"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> EltTy = Ty.getScalarType();</span></CodeLine>
<Link id="l05875" /><CodeLine lineNumber="5875"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsD16 = IsFormat &amp;&amp; (EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 16);</span></CodeLine>
<Link id="l05876" /><CodeLine lineNumber="5876"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l05877" /><CodeLine lineNumber="5877"></CodeLine>
<Link id="l05878" /><CodeLine lineNumber="5878"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinememoperand">MachineMemOperand</a> &#42;MMO = &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands&#95;begin();</span></CodeLine>
<Link id="l05879" /><CodeLine lineNumber="5879"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> MemSize = MMO-&gt;<a href="/docs/api/classes/llvm/machinememoperand/#a0ffa31699dee0349f9b9ae1d3ccb21f1">getSize</a>().<a href="/docs/api/classes/llvm/locationsize/#a935a116f6c8690449f4eddd56a99504b">getValue</a>();</span></CodeLine>
<Link id="l05880" /><CodeLine lineNumber="5880"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> MemTy = MMO-&gt;<a href="/docs/api/classes/llvm/machinememoperand/#a3e9d2a9063bce7f5b3d7dd21fd05c79d">getMemoryType</a>();</span></CodeLine>
<Link id="l05881" /><CodeLine lineNumber="5881"></CodeLine>
<Link id="l05882" /><CodeLine lineNumber="5882"><span class="doxyHighlight">  VData = <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#af3c20d55579ac56788b8134a4d3e724f">fixStoreSourceType</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, VData, MemTy, IsFormat);</span></CodeLine>
<Link id="l05883" /><CodeLine lineNumber="5883"></CodeLine>
<Link id="l05884" /><CodeLine lineNumber="5884"><span class="doxyHighlight">  <a href="#a9d84441ae7638d9c27873f5a3810cb88">castBufferRsrcArgToV4I32</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, 2);</span></CodeLine>
<Link id="l05885" /><CodeLine lineNumber="5885"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> RSrc = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l05886" /><CodeLine lineNumber="5886"></CodeLine>
<Link id="l05887" /><CodeLine lineNumber="5887"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ImmOffset;</span></CodeLine>
<Link id="l05888" /><CodeLine lineNumber="5888"></CodeLine>
<Link id="l05889" /><CodeLine lineNumber="5889"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The typed intrinsics add an immediate after the registers.</span></CodeLine>
<Link id="l05890" /><CodeLine lineNumber="5890"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumVIndexOps = IsTyped ? 8 : 7;</span></CodeLine>
<Link id="l05891" /><CodeLine lineNumber="5891"></CodeLine>
<Link id="l05892" /><CodeLine lineNumber="5892"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The struct intrinsic variants add one additional operand over raw.</span></CodeLine>
<Link id="l05893" /><CodeLine lineNumber="5893"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> HasVIndex = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() == NumVIndexOps;</span></CodeLine>
<Link id="l05894" /><CodeLine lineNumber="5894"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> VIndex;</span></CodeLine>
<Link id="l05895" /><CodeLine lineNumber="5895"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> OpOffset = 0;</span></CodeLine>
<Link id="l05896" /><CodeLine lineNumber="5896"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (HasVIndex) &#123;</span></CodeLine>
<Link id="l05897" /><CodeLine lineNumber="5897"><span class="doxyHighlight">    VIndex = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</span></CodeLine>
<Link id="l05898" /><CodeLine lineNumber="5898"><span class="doxyHighlight">    OpOffset = 1;</span></CodeLine>
<Link id="l05899" /><CodeLine lineNumber="5899"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l05900" /><CodeLine lineNumber="5900"><span class="doxyHighlight">    VIndex = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 0).getReg(0);</span></CodeLine>
<Link id="l05901" /><CodeLine lineNumber="5901"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05902" /><CodeLine lineNumber="5902"></CodeLine>
<Link id="l05903" /><CodeLine lineNumber="5903"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> VOffset = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3 + OpOffset).getReg();</span></CodeLine>
<Link id="l05904" /><CodeLine lineNumber="5904"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> SOffset = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4 + OpOffset).getReg();</span></CodeLine>
<Link id="l05905" /><CodeLine lineNumber="5905"></CodeLine>
<Link id="l05906" /><CodeLine lineNumber="5906"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ab7530cd22b8952cb41774507dd40c6f3a520d0db389f362bf79ef56ca0af3dcab">Format</a> = 0;</span></CodeLine>
<Link id="l05907" /><CodeLine lineNumber="5907"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTyped) &#123;</span></CodeLine>
<Link id="l05908" /><CodeLine lineNumber="5908"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#ab7530cd22b8952cb41774507dd40c6f3a520d0db389f362bf79ef56ca0af3dcab">Format</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5 + OpOffset).getImm();</span></CodeLine>
<Link id="l05909" /><CodeLine lineNumber="5909"><span class="doxyHighlight">    ++OpOffset;</span></CodeLine>
<Link id="l05910" /><CodeLine lineNumber="5910"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05911" /><CodeLine lineNumber="5911"></CodeLine>
<Link id="l05912" /><CodeLine lineNumber="5912"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AuxiliaryData = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5 + OpOffset).getImm();</span></CodeLine>
<Link id="l05913" /><CodeLine lineNumber="5913"></CodeLine>
<Link id="l05914" /><CodeLine lineNumber="5914"><span class="doxyHighlight">  std::tie(VOffset, ImmOffset) = <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a14daf64c8f1ebcbe259a41854f49ad12">splitBufferOffsets</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, VOffset);</span></CodeLine>
<Link id="l05915" /><CodeLine lineNumber="5915"></CodeLine>
<Link id="l05916" /><CodeLine lineNumber="5916"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Opc;</span></CodeLine>
<Link id="l05917" /><CodeLine lineNumber="5917"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTyped) &#123;</span></CodeLine>
<Link id="l05918" /><CodeLine lineNumber="5918"><span class="doxyHighlight">    Opc = IsD16 ? AMDGPU::G&#95;AMDGPU&#95;TBUFFER&#95;STORE&#95;FORMAT&#95;D16 :</span></CodeLine>
<Link id="l05919" /><CodeLine lineNumber="5919"><span class="doxyHighlight">                  AMDGPU::G&#95;AMDGPU&#95;TBUFFER&#95;STORE&#95;FORMAT;</span></CodeLine>
<Link id="l05920" /><CodeLine lineNumber="5920"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsFormat) &#123;</span></CodeLine>
<Link id="l05921" /><CodeLine lineNumber="5921"><span class="doxyHighlight">    Opc = IsD16 ? AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;STORE&#95;FORMAT&#95;D16 :</span></CodeLine>
<Link id="l05922" /><CodeLine lineNumber="5922"><span class="doxyHighlight">                  AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;STORE&#95;FORMAT;</span></CodeLine>
<Link id="l05923" /><CodeLine lineNumber="5923"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l05924" /><CodeLine lineNumber="5924"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (MemSize) &#123;</span></CodeLine>
<Link id="l05925" /><CodeLine lineNumber="5925"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 1:</span></CodeLine>
<Link id="l05926" /><CodeLine lineNumber="5926"><span class="doxyHighlight">      Opc = AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;STORE&#95;BYTE;</span></CodeLine>
<Link id="l05927" /><CodeLine lineNumber="5927"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05928" /><CodeLine lineNumber="5928"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 2:</span></CodeLine>
<Link id="l05929" /><CodeLine lineNumber="5929"><span class="doxyHighlight">      Opc = AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;STORE&#95;SHORT;</span></CodeLine>
<Link id="l05930" /><CodeLine lineNumber="5930"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05931" /><CodeLine lineNumber="5931"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l05932" /><CodeLine lineNumber="5932"><span class="doxyHighlight">      Opc = AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;STORE;</span></CodeLine>
<Link id="l05933" /><CodeLine lineNumber="5933"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05934" /><CodeLine lineNumber="5934"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l05935" /><CodeLine lineNumber="5935"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l05936" /><CodeLine lineNumber="5936"></CodeLine>
<Link id="l05937" /><CodeLine lineNumber="5937"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MIB = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(Opc)</span></CodeLine>
<Link id="l05938" /><CodeLine lineNumber="5938"><span class="doxyHighlight">    .addUse(VData)              </span><span class="doxyHighlightComment">// vdata</span></CodeLine>
<Link id="l05939" /><CodeLine lineNumber="5939"><span class="doxyHighlight">    .addUse(RSrc)               </span><span class="doxyHighlightComment">// rsrc</span></CodeLine>
<Link id="l05940" /><CodeLine lineNumber="5940"><span class="doxyHighlight">    .addUse(VIndex)             </span><span class="doxyHighlightComment">// vindex</span></CodeLine>
<Link id="l05941" /><CodeLine lineNumber="5941"><span class="doxyHighlight">    .addUse(VOffset)            </span><span class="doxyHighlightComment">// voffset</span></CodeLine>
<Link id="l05942" /><CodeLine lineNumber="5942"><span class="doxyHighlight">    .addUse(SOffset)            </span><span class="doxyHighlightComment">// soffset</span></CodeLine>
<Link id="l05943" /><CodeLine lineNumber="5943"><span class="doxyHighlight">    .addImm(ImmOffset);         </span><span class="doxyHighlightComment">// offset(imm)</span></CodeLine>
<Link id="l05944" /><CodeLine lineNumber="5944"></CodeLine>
<Link id="l05945" /><CodeLine lineNumber="5945"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTyped)</span></CodeLine>
<Link id="l05946" /><CodeLine lineNumber="5946"><span class="doxyHighlight">    MIB.addImm(<a href="/docs/api/namespaces/llvm/#ab7530cd22b8952cb41774507dd40c6f3a520d0db389f362bf79ef56ca0af3dcab">Format</a>);</span></CodeLine>
<Link id="l05947" /><CodeLine lineNumber="5947"></CodeLine>
<Link id="l05948" /><CodeLine lineNumber="5948"><span class="doxyHighlight">  MIB.addImm(AuxiliaryData)      </span><span class="doxyHighlightComment">// cachepolicy, swizzled buffer(imm)</span></CodeLine>
<Link id="l05949" /><CodeLine lineNumber="5949"><span class="doxyHighlight">     .addImm(HasVIndex ? -1 : 0) </span><span class="doxyHighlightComment">// idxen(imm)</span></CodeLine>
<Link id="l05950" /><CodeLine lineNumber="5950"><span class="doxyHighlight">     .addMemOperand(MMO);</span></CodeLine>
<Link id="l05951" /><CodeLine lineNumber="5951"></CodeLine>
<Link id="l05952" /><CodeLine lineNumber="5952"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l05953" /><CodeLine lineNumber="5953"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l05954" /><CodeLine lineNumber="5954"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05955" /><CodeLine lineNumber="5955"></CodeLine>
<Link id="l05956" /><CodeLine lineNumber="5956" lineLink="#ae6e9dca782411211a3526572f6ebeb33"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="#ae6e9dca782411211a3526572f6ebeb33">buildBufferLoad</a>(</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Opc, <a href="/docs/api/classes/llvm/register">Register</a> LoadDstReg, <a href="/docs/api/classes/llvm/register">Register</a> RSrc,</span></CodeLine>
<Link id="l05957" /><CodeLine lineNumber="5957"><span class="doxyHighlight">                            <a href="/docs/api/classes/llvm/register">Register</a> VIndex, <a href="/docs/api/classes/llvm/register">Register</a> VOffset, <a href="/docs/api/classes/llvm/register">Register</a> SOffset,</span></CodeLine>
<Link id="l05958" /><CodeLine lineNumber="5958"><span class="doxyHighlight">                            </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ImmOffset, </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Format,</span></CodeLine>
<Link id="l05959" /><CodeLine lineNumber="5959"><span class="doxyHighlight">                            </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AuxiliaryData, <a href="/docs/api/classes/llvm/machinememoperand">MachineMemOperand</a> &#42;MMO,</span></CodeLine>
<Link id="l05960" /><CodeLine lineNumber="5960"><span class="doxyHighlight">                            </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsTyped, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> HasVIndex, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) &#123;</span></CodeLine>
<Link id="l05961" /><CodeLine lineNumber="5961"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MIB = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(Opc)</span></CodeLine>
<Link id="l05962" /><CodeLine lineNumber="5962"><span class="doxyHighlight">                 .addDef(LoadDstReg) </span><span class="doxyHighlightComment">// vdata</span></CodeLine>
<Link id="l05963" /><CodeLine lineNumber="5963"><span class="doxyHighlight">                 .addUse(RSrc)       </span><span class="doxyHighlightComment">// rsrc</span></CodeLine>
<Link id="l05964" /><CodeLine lineNumber="5964"><span class="doxyHighlight">                 .addUse(VIndex)     </span><span class="doxyHighlightComment">// vindex</span></CodeLine>
<Link id="l05965" /><CodeLine lineNumber="5965"><span class="doxyHighlight">                 .addUse(VOffset)    </span><span class="doxyHighlightComment">// voffset</span></CodeLine>
<Link id="l05966" /><CodeLine lineNumber="5966"><span class="doxyHighlight">                 .addUse(SOffset)    </span><span class="doxyHighlightComment">// soffset</span></CodeLine>
<Link id="l05967" /><CodeLine lineNumber="5967"><span class="doxyHighlight">                 .addImm(ImmOffset); </span><span class="doxyHighlightComment">// offset(imm)</span></CodeLine>
<Link id="l05968" /><CodeLine lineNumber="5968"></CodeLine>
<Link id="l05969" /><CodeLine lineNumber="5969"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTyped)</span></CodeLine>
<Link id="l05970" /><CodeLine lineNumber="5970"><span class="doxyHighlight">    MIB.addImm(Format);</span></CodeLine>
<Link id="l05971" /><CodeLine lineNumber="5971"></CodeLine>
<Link id="l05972" /><CodeLine lineNumber="5972"><span class="doxyHighlight">  MIB.addImm(AuxiliaryData)       </span><span class="doxyHighlightComment">// cachepolicy, swizzled buffer(imm)</span></CodeLine>
<Link id="l05973" /><CodeLine lineNumber="5973"><span class="doxyHighlight">      .addImm(HasVIndex ? -1 : 0) </span><span class="doxyHighlightComment">// idxen(imm)</span></CodeLine>
<Link id="l05974" /><CodeLine lineNumber="5974"><span class="doxyHighlight">      .addMemOperand(MMO);</span></CodeLine>
<Link id="l05975" /><CodeLine lineNumber="5975"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l05976" /><CodeLine lineNumber="5976"></CodeLine>
<Link id="l05977" /><CodeLine lineNumber="5977" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a89e5277b1b90b54ea21a51120f9a4206"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a89e5277b1b90b54ea21a51120f9a4206">AMDGPULegalizerInfo::legalizeBufferLoad</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l05978" /><CodeLine lineNumber="5978"><span class="doxyHighlight">                                             <a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> &amp;Helper,</span></CodeLine>
<Link id="l05979" /><CodeLine lineNumber="5979"><span class="doxyHighlight">                                             </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsFormat,</span></CodeLine>
<Link id="l05980" /><CodeLine lineNumber="5980"><span class="doxyHighlight">                                             </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsTyped)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l05981" /><CodeLine lineNumber="5981"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</span></CodeLine>
<Link id="l05982" /><CodeLine lineNumber="5982"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI();</span></CodeLine>
<Link id="l05983" /><CodeLine lineNumber="5983"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/giselchangeobserver">GISelChangeObserver</a> &amp;Observer = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>;</span></CodeLine>
<Link id="l05984" /><CodeLine lineNumber="5984"></CodeLine>
<Link id="l05985" /><CodeLine lineNumber="5985"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: Verifier should enforce 1 MMO for these intrinsics.</span></CodeLine>
<Link id="l05986" /><CodeLine lineNumber="5986"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinememoperand">MachineMemOperand</a> &#42;MMO = &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands&#95;begin();</span></CodeLine>
<Link id="l05987" /><CodeLine lineNumber="5987"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> MemTy = MMO-&gt;<a href="/docs/api/classes/llvm/machinememoperand/#a3e9d2a9063bce7f5b3d7dd21fd05c79d">getMemoryType</a>();</span></CodeLine>
<Link id="l05988" /><CodeLine lineNumber="5988"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l05989" /><CodeLine lineNumber="5989"></CodeLine>
<Link id="l05990" /><CodeLine lineNumber="5990"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l05991" /><CodeLine lineNumber="5991"></CodeLine>
<Link id="l05992" /><CodeLine lineNumber="5992"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> StatusDst;</span></CodeLine>
<Link id="l05993" /><CodeLine lineNumber="5993"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> OpOffset = 0;</span></CodeLine>
<Link id="l05994" /><CodeLine lineNumber="5994"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitDefs() == 1 || <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitDefs() == 2);</span></CodeLine>
<Link id="l05995" /><CodeLine lineNumber="5995"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsTFE = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitDefs() == 2;</span></CodeLine>
<Link id="l05996" /><CodeLine lineNumber="5996"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTFE) &#123;</span></CodeLine>
<Link id="l05997" /><CodeLine lineNumber="5997"><span class="doxyHighlight">    StatusDst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l05998" /><CodeLine lineNumber="5998"><span class="doxyHighlight">    ++OpOffset;</span></CodeLine>
<Link id="l05999" /><CodeLine lineNumber="5999"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06000" /><CodeLine lineNumber="6000"></CodeLine>
<Link id="l06001" /><CodeLine lineNumber="6001"><span class="doxyHighlight">  <a href="#a9d84441ae7638d9c27873f5a3810cb88">castBufferRsrcArgToV4I32</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, 2 + OpOffset);</span></CodeLine>
<Link id="l06002" /><CodeLine lineNumber="6002"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> RSrc = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2 + OpOffset).getReg();</span></CodeLine>
<Link id="l06003" /><CodeLine lineNumber="6003"></CodeLine>
<Link id="l06004" /><CodeLine lineNumber="6004"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The typed intrinsics add an immediate after the registers.</span></CodeLine>
<Link id="l06005" /><CodeLine lineNumber="6005"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumVIndexOps = IsTyped ? 8 : 7;</span></CodeLine>
<Link id="l06006" /><CodeLine lineNumber="6006"></CodeLine>
<Link id="l06007" /><CodeLine lineNumber="6007"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The struct intrinsic variants add one additional operand over raw.</span></CodeLine>
<Link id="l06008" /><CodeLine lineNumber="6008"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> HasVIndex = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() == NumVIndexOps + OpOffset;</span></CodeLine>
<Link id="l06009" /><CodeLine lineNumber="6009"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> VIndex;</span></CodeLine>
<Link id="l06010" /><CodeLine lineNumber="6010"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (HasVIndex) &#123;</span></CodeLine>
<Link id="l06011" /><CodeLine lineNumber="6011"><span class="doxyHighlight">    VIndex = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3 + OpOffset).getReg();</span></CodeLine>
<Link id="l06012" /><CodeLine lineNumber="6012"><span class="doxyHighlight">    ++OpOffset;</span></CodeLine>
<Link id="l06013" /><CodeLine lineNumber="6013"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06014" /><CodeLine lineNumber="6014"><span class="doxyHighlight">    VIndex = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 0).getReg(0);</span></CodeLine>
<Link id="l06015" /><CodeLine lineNumber="6015"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06016" /><CodeLine lineNumber="6016"></CodeLine>
<Link id="l06017" /><CodeLine lineNumber="6017"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> VOffset = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3 + OpOffset).getReg();</span></CodeLine>
<Link id="l06018" /><CodeLine lineNumber="6018"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> SOffset = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4 + OpOffset).getReg();</span></CodeLine>
<Link id="l06019" /><CodeLine lineNumber="6019"></CodeLine>
<Link id="l06020" /><CodeLine lineNumber="6020"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/namespaces/llvm/#ab7530cd22b8952cb41774507dd40c6f3a520d0db389f362bf79ef56ca0af3dcab">Format</a> = 0;</span></CodeLine>
<Link id="l06021" /><CodeLine lineNumber="6021"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTyped) &#123;</span></CodeLine>
<Link id="l06022" /><CodeLine lineNumber="6022"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#ab7530cd22b8952cb41774507dd40c6f3a520d0db389f362bf79ef56ca0af3dcab">Format</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5 + OpOffset).getImm();</span></CodeLine>
<Link id="l06023" /><CodeLine lineNumber="6023"><span class="doxyHighlight">    ++OpOffset;</span></CodeLine>
<Link id="l06024" /><CodeLine lineNumber="6024"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06025" /><CodeLine lineNumber="6025"></CodeLine>
<Link id="l06026" /><CodeLine lineNumber="6026"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AuxiliaryData = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5 + OpOffset).getImm();</span></CodeLine>
<Link id="l06027" /><CodeLine lineNumber="6027"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ImmOffset;</span></CodeLine>
<Link id="l06028" /><CodeLine lineNumber="6028"></CodeLine>
<Link id="l06029" /><CodeLine lineNumber="6029"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Dst);</span></CodeLine>
<Link id="l06030" /><CodeLine lineNumber="6030"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Make addrspace 8 pointers loads into 4xs32 loads here, so the rest of the</span></CodeLine>
<Link id="l06031" /><CodeLine lineNumber="6031"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// logic doesn&#39;t have to handle that case.</span></CodeLine>
<Link id="l06032" /><CodeLine lineNumber="6032"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#abb71b9eb64250d4491336cf106be74eb">hasBufferRsrcWorkaround</a>(Ty)) &#123;</span></CodeLine>
<Link id="l06033" /><CodeLine lineNumber="6033"><span class="doxyHighlight">    Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l06034" /><CodeLine lineNumber="6034"><span class="doxyHighlight">    Ty = <a href="#a78249707a06ea5161d8c6bbb442ea46c">castBufferRsrcFromV4I32</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, 0);</span></CodeLine>
<Link id="l06035" /><CodeLine lineNumber="6035"><span class="doxyHighlight">    Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l06036" /><CodeLine lineNumber="6036"><span class="doxyHighlight">    Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l06037" /><CodeLine lineNumber="6037"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.setInsertPt(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMBB(), <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l06038" /><CodeLine lineNumber="6038"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06039" /><CodeLine lineNumber="6039"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a1c42298ffb49a95c87577d3e5de46aea">shouldBitcastLoadStoreType</a>(ST, Ty, MemTy)) &#123;</span></CodeLine>
<Link id="l06040" /><CodeLine lineNumber="6040"><span class="doxyHighlight">    Ty = <a href="#a639711ef50cb300db9e9ade1445ccf07">getBitcastRegisterType</a>(Ty);</span></CodeLine>
<Link id="l06041" /><CodeLine lineNumber="6041"><span class="doxyHighlight">    Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l06042" /><CodeLine lineNumber="6042"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aaa02ab5ab2c50cce96f4fec73c8186c3">bitcastDst</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Ty, 0);</span></CodeLine>
<Link id="l06043" /><CodeLine lineNumber="6043"><span class="doxyHighlight">    Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l06044" /><CodeLine lineNumber="6044"><span class="doxyHighlight">    Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l06045" /><CodeLine lineNumber="6045"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.setInsertPt(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMBB(), <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l06046" /><CodeLine lineNumber="6046"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06047" /><CodeLine lineNumber="6047"></CodeLine>
<Link id="l06048" /><CodeLine lineNumber="6048"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> EltTy = Ty.getScalarType();</span></CodeLine>
<Link id="l06049" /><CodeLine lineNumber="6049"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsD16 = IsFormat &amp;&amp; (EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 16);</span></CodeLine>
<Link id="l06050" /><CodeLine lineNumber="6050"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Unpacked = ST.hasUnpackedD16VMem();</span></CodeLine>
<Link id="l06051" /><CodeLine lineNumber="6051"></CodeLine>
<Link id="l06052" /><CodeLine lineNumber="6052"><span class="doxyHighlight">  std::tie(VOffset, ImmOffset) = <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a14daf64c8f1ebcbe259a41854f49ad12">splitBufferOffsets</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, VOffset);</span></CodeLine>
<Link id="l06053" /><CodeLine lineNumber="6053"></CodeLine>
<Link id="l06054" /><CodeLine lineNumber="6054"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Opc;</span></CodeLine>
<Link id="l06055" /><CodeLine lineNumber="6055"></CodeLine>
<Link id="l06056" /><CodeLine lineNumber="6056"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Support TFE for typed and narrow loads.</span></CodeLine>
<Link id="l06057" /><CodeLine lineNumber="6057"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTyped) &#123;</span></CodeLine>
<Link id="l06058" /><CodeLine lineNumber="6058"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTFE)</span></CodeLine>
<Link id="l06059" /><CodeLine lineNumber="6059"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06060" /><CodeLine lineNumber="6060"><span class="doxyHighlight">    Opc = IsD16 ? AMDGPU::G&#95;AMDGPU&#95;TBUFFER&#95;LOAD&#95;FORMAT&#95;D16 :</span></CodeLine>
<Link id="l06061" /><CodeLine lineNumber="6061"><span class="doxyHighlight">                  AMDGPU::G&#95;AMDGPU&#95;TBUFFER&#95;LOAD&#95;FORMAT;</span></CodeLine>
<Link id="l06062" /><CodeLine lineNumber="6062"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsFormat) &#123;</span></CodeLine>
<Link id="l06063" /><CodeLine lineNumber="6063"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsD16) &#123;</span></CodeLine>
<Link id="l06064" /><CodeLine lineNumber="6064"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTFE)</span></CodeLine>
<Link id="l06065" /><CodeLine lineNumber="6065"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06066" /><CodeLine lineNumber="6066"><span class="doxyHighlight">      Opc = AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;LOAD&#95;FORMAT&#95;D16;</span></CodeLine>
<Link id="l06067" /><CodeLine lineNumber="6067"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06068" /><CodeLine lineNumber="6068"><span class="doxyHighlight">      Opc = IsTFE ? AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;LOAD&#95;FORMAT&#95;TFE</span></CodeLine>
<Link id="l06069" /><CodeLine lineNumber="6069"><span class="doxyHighlight">                  : AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;LOAD&#95;FORMAT;</span></CodeLine>
<Link id="l06070" /><CodeLine lineNumber="6070"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06071" /><CodeLine lineNumber="6071"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06072" /><CodeLine lineNumber="6072"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (MemTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) &#123;</span></CodeLine>
<Link id="l06073" /><CodeLine lineNumber="6073"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 8:</span></CodeLine>
<Link id="l06074" /><CodeLine lineNumber="6074"><span class="doxyHighlight">      Opc = IsTFE ? AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;LOAD&#95;UBYTE&#95;TFE</span></CodeLine>
<Link id="l06075" /><CodeLine lineNumber="6075"><span class="doxyHighlight">                  : AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;LOAD&#95;UBYTE;</span></CodeLine>
<Link id="l06076" /><CodeLine lineNumber="6076"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06077" /><CodeLine lineNumber="6077"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> 16:</span></CodeLine>
<Link id="l06078" /><CodeLine lineNumber="6078"><span class="doxyHighlight">      Opc = IsTFE ? AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;LOAD&#95;USHORT&#95;TFE</span></CodeLine>
<Link id="l06079" /><CodeLine lineNumber="6079"><span class="doxyHighlight">                  : AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;LOAD&#95;USHORT;</span></CodeLine>
<Link id="l06080" /><CodeLine lineNumber="6080"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06081" /><CodeLine lineNumber="6081"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l06082" /><CodeLine lineNumber="6082"><span class="doxyHighlight">      Opc = IsTFE ? AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;LOAD&#95;TFE</span></CodeLine>
<Link id="l06083" /><CodeLine lineNumber="6083"><span class="doxyHighlight">                  : AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;LOAD;</span></CodeLine>
<Link id="l06084" /><CodeLine lineNumber="6084"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">break</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06085" /><CodeLine lineNumber="6085"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06086" /><CodeLine lineNumber="6086"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06087" /><CodeLine lineNumber="6087"></CodeLine>
<Link id="l06088" /><CodeLine lineNumber="6088"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTFE) &#123;</span></CodeLine>
<Link id="l06089" /><CodeLine lineNumber="6089"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumValueDWords = <a href="/docs/api/namespaces/llvm/#a9dda4472ee0b7ea92ab49eedf6e13d50">divideCeil</a>(Ty.getSizeInBits(), 32);</span></CodeLine>
<Link id="l06090" /><CodeLine lineNumber="6090"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumLoadDWords = NumValueDWords + 1;</span></CodeLine>
<Link id="l06091" /><CodeLine lineNumber="6091"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> LoadTy = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(NumLoadDWords, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l06092" /><CodeLine lineNumber="6092"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> LoadDstReg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;createGenericVirtualRegister(LoadTy);</span></CodeLine>
<Link id="l06093" /><CodeLine lineNumber="6093"><span class="doxyHighlight">    <a href="#ae6e9dca782411211a3526572f6ebeb33">buildBufferLoad</a>(Opc, LoadDstReg, RSrc, VIndex, VOffset, SOffset, ImmOffset,</span></CodeLine>
<Link id="l06094" /><CodeLine lineNumber="6094"><span class="doxyHighlight">                    <a href="/docs/api/namespaces/llvm/#ab7530cd22b8952cb41774507dd40c6f3a520d0db389f362bf79ef56ca0af3dcab">Format</a>, AuxiliaryData, MMO, IsTyped, HasVIndex, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l06095" /><CodeLine lineNumber="6095"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (MemTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &lt; 32) &#123;</span></CodeLine>
<Link id="l06096" /><CodeLine lineNumber="6096"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/register">Register</a> ExtDst = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;createGenericVirtualRegister(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l06097" /><CodeLine lineNumber="6097"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(&#123;ExtDst, StatusDst&#125;, LoadDstReg);</span></CodeLine>
<Link id="l06098" /><CodeLine lineNumber="6098"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildTrunc(Dst, ExtDst);</span></CodeLine>
<Link id="l06099" /><CodeLine lineNumber="6099"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumValueDWords == 1) &#123;</span></CodeLine>
<Link id="l06100" /><CodeLine lineNumber="6100"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(&#123;Dst, StatusDst&#125;, LoadDstReg);</span></CodeLine>
<Link id="l06101" /><CodeLine lineNumber="6101"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06102" /><CodeLine lineNumber="6102"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Register, 5&gt;</a> LoadElts;</span></CodeLine>
<Link id="l06103" /><CodeLine lineNumber="6103"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumValueDWords; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</span></CodeLine>
<Link id="l06104" /><CodeLine lineNumber="6104"><span class="doxyHighlight">        LoadElts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;createGenericVirtualRegister(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>));</span></CodeLine>
<Link id="l06105" /><CodeLine lineNumber="6105"><span class="doxyHighlight">      LoadElts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(StatusDst);</span></CodeLine>
<Link id="l06106" /><CodeLine lineNumber="6106"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(LoadElts, LoadDstReg);</span></CodeLine>
<Link id="l06107" /><CodeLine lineNumber="6107"><span class="doxyHighlight">      LoadElts.<a href="/docs/api/classes/llvm/smallvectorimpl/#aae26f659b722d1d053b93b5f1735f52f">truncate</a>(NumValueDWords);</span></CodeLine>
<Link id="l06108" /><CodeLine lineNumber="6108"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(Dst, LoadElts);</span></CodeLine>
<Link id="l06109" /><CodeLine lineNumber="6109"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06110" /><CodeLine lineNumber="6110"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((!IsD16 &amp;&amp; MemTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &lt; 32) ||</span></CodeLine>
<Link id="l06111" /><CodeLine lineNumber="6111"><span class="doxyHighlight">             (IsD16 &amp;&amp; !Ty.isVector())) &#123;</span></CodeLine>
<Link id="l06112" /><CodeLine lineNumber="6112"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> LoadDstReg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;createGenericVirtualRegister(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l06113" /><CodeLine lineNumber="6113"><span class="doxyHighlight">    <a href="#ae6e9dca782411211a3526572f6ebeb33">buildBufferLoad</a>(Opc, LoadDstReg, RSrc, VIndex, VOffset, SOffset, ImmOffset,</span></CodeLine>
<Link id="l06114" /><CodeLine lineNumber="6114"><span class="doxyHighlight">                    <a href="/docs/api/namespaces/llvm/#ab7530cd22b8952cb41774507dd40c6f3a520d0db389f362bf79ef56ca0af3dcab">Format</a>, AuxiliaryData, MMO, IsTyped, HasVIndex, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l06115" /><CodeLine lineNumber="6115"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.setInsertPt(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMBB(), ++<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getInsertPt());</span></CodeLine>
<Link id="l06116" /><CodeLine lineNumber="6116"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildTrunc(Dst, LoadDstReg);</span></CodeLine>
<Link id="l06117" /><CodeLine lineNumber="6117"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Unpacked &amp;&amp; IsD16 &amp;&amp; Ty.isVector()) &#123;</span></CodeLine>
<Link id="l06118" /><CodeLine lineNumber="6118"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> UnpackedTy = Ty.changeElementSize(32);</span></CodeLine>
<Link id="l06119" /><CodeLine lineNumber="6119"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> LoadDstReg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;createGenericVirtualRegister(UnpackedTy);</span></CodeLine>
<Link id="l06120" /><CodeLine lineNumber="6120"><span class="doxyHighlight">    <a href="#ae6e9dca782411211a3526572f6ebeb33">buildBufferLoad</a>(Opc, LoadDstReg, RSrc, VIndex, VOffset, SOffset, ImmOffset,</span></CodeLine>
<Link id="l06121" /><CodeLine lineNumber="6121"><span class="doxyHighlight">                    <a href="/docs/api/namespaces/llvm/#ab7530cd22b8952cb41774507dd40c6f3a520d0db389f362bf79ef56ca0af3dcab">Format</a>, AuxiliaryData, MMO, IsTyped, HasVIndex, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l06122" /><CodeLine lineNumber="6122"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.setInsertPt(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMBB(), ++<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getInsertPt());</span></CodeLine>
<Link id="l06123" /><CodeLine lineNumber="6123"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: G&#95;TRUNC should work, but legalization currently fails</span></CodeLine>
<Link id="l06124" /><CodeLine lineNumber="6124"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, LoadDstReg);</span></CodeLine>
<Link id="l06125" /><CodeLine lineNumber="6125"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Register, 4&gt;</a> Repack;</span></CodeLine>
<Link id="l06126" /><CodeLine lineNumber="6126"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = Unmerge-&gt;getNumOperands() - 1; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</span></CodeLine>
<Link id="l06127" /><CodeLine lineNumber="6127"><span class="doxyHighlight">      Repack.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildTrunc(EltTy, Unmerge.getReg(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)).getReg(0));</span></CodeLine>
<Link id="l06128" /><CodeLine lineNumber="6128"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(Dst, Repack);</span></CodeLine>
<Link id="l06129" /><CodeLine lineNumber="6129"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06130" /><CodeLine lineNumber="6130"><span class="doxyHighlight">    <a href="#ae6e9dca782411211a3526572f6ebeb33">buildBufferLoad</a>(Opc, Dst, RSrc, VIndex, VOffset, SOffset, ImmOffset, <a href="/docs/api/namespaces/llvm/#ab7530cd22b8952cb41774507dd40c6f3a520d0db389f362bf79ef56ca0af3dcab">Format</a>,</span></CodeLine>
<Link id="l06131" /><CodeLine lineNumber="6131"><span class="doxyHighlight">                    AuxiliaryData, MMO, IsTyped, HasVIndex, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l06132" /><CodeLine lineNumber="6132"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06133" /><CodeLine lineNumber="6133"></CodeLine>
<Link id="l06134" /><CodeLine lineNumber="6134"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l06135" /><CodeLine lineNumber="6135"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06136" /><CodeLine lineNumber="6136"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l06137" /><CodeLine lineNumber="6137"></CodeLine>
<Link id="l06138" /><CodeLine lineNumber="6138" lineLink="#a0356a7c051be3c82d2c7da7e0bdb229c"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="#a0356a7c051be3c82d2c7da7e0bdb229c">getBufferAtomicPseudo</a>(<a href="/docs/api/namespaces/llvm/intrinsic/#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IntrID) &#123;</span></CodeLine>
<Link id="l06139" /><CodeLine lineNumber="6139"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (IntrID) &#123;</span></CodeLine>
<Link id="l06140" /><CodeLine lineNumber="6140"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;swap:</span></CodeLine>
<Link id="l06141" /><CodeLine lineNumber="6141"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;swap:</span></CodeLine>
<Link id="l06142" /><CodeLine lineNumber="6142"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;swap:</span></CodeLine>
<Link id="l06143" /><CodeLine lineNumber="6143"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;swap:</span></CodeLine>
<Link id="l06144" /><CodeLine lineNumber="6144"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;SWAP;</span></CodeLine>
<Link id="l06145" /><CodeLine lineNumber="6145"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;add:</span></CodeLine>
<Link id="l06146" /><CodeLine lineNumber="6146"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;add:</span></CodeLine>
<Link id="l06147" /><CodeLine lineNumber="6147"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;add:</span></CodeLine>
<Link id="l06148" /><CodeLine lineNumber="6148"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;add:</span></CodeLine>
<Link id="l06149" /><CodeLine lineNumber="6149"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;ADD;</span></CodeLine>
<Link id="l06150" /><CodeLine lineNumber="6150"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;sub:</span></CodeLine>
<Link id="l06151" /><CodeLine lineNumber="6151"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;sub:</span></CodeLine>
<Link id="l06152" /><CodeLine lineNumber="6152"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;sub:</span></CodeLine>
<Link id="l06153" /><CodeLine lineNumber="6153"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;sub:</span></CodeLine>
<Link id="l06154" /><CodeLine lineNumber="6154"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;SUB;</span></CodeLine>
<Link id="l06155" /><CodeLine lineNumber="6155"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;smin:</span></CodeLine>
<Link id="l06156" /><CodeLine lineNumber="6156"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;smin:</span></CodeLine>
<Link id="l06157" /><CodeLine lineNumber="6157"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;smin:</span></CodeLine>
<Link id="l06158" /><CodeLine lineNumber="6158"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;smin:</span></CodeLine>
<Link id="l06159" /><CodeLine lineNumber="6159"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;SMIN;</span></CodeLine>
<Link id="l06160" /><CodeLine lineNumber="6160"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;umin:</span></CodeLine>
<Link id="l06161" /><CodeLine lineNumber="6161"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;umin:</span></CodeLine>
<Link id="l06162" /><CodeLine lineNumber="6162"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;umin:</span></CodeLine>
<Link id="l06163" /><CodeLine lineNumber="6163"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;umin:</span></CodeLine>
<Link id="l06164" /><CodeLine lineNumber="6164"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;UMIN;</span></CodeLine>
<Link id="l06165" /><CodeLine lineNumber="6165"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;smax:</span></CodeLine>
<Link id="l06166" /><CodeLine lineNumber="6166"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;smax:</span></CodeLine>
<Link id="l06167" /><CodeLine lineNumber="6167"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;smax:</span></CodeLine>
<Link id="l06168" /><CodeLine lineNumber="6168"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;smax:</span></CodeLine>
<Link id="l06169" /><CodeLine lineNumber="6169"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;SMAX;</span></CodeLine>
<Link id="l06170" /><CodeLine lineNumber="6170"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;umax:</span></CodeLine>
<Link id="l06171" /><CodeLine lineNumber="6171"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;umax:</span></CodeLine>
<Link id="l06172" /><CodeLine lineNumber="6172"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;umax:</span></CodeLine>
<Link id="l06173" /><CodeLine lineNumber="6173"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;umax:</span></CodeLine>
<Link id="l06174" /><CodeLine lineNumber="6174"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;UMAX;</span></CodeLine>
<Link id="l06175" /><CodeLine lineNumber="6175"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;and:</span></CodeLine>
<Link id="l06176" /><CodeLine lineNumber="6176"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;and:</span></CodeLine>
<Link id="l06177" /><CodeLine lineNumber="6177"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;and:</span></CodeLine>
<Link id="l06178" /><CodeLine lineNumber="6178"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;and:</span></CodeLine>
<Link id="l06179" /><CodeLine lineNumber="6179"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;AND;</span></CodeLine>
<Link id="l06180" /><CodeLine lineNumber="6180"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;or:</span></CodeLine>
<Link id="l06181" /><CodeLine lineNumber="6181"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;or:</span></CodeLine>
<Link id="l06182" /><CodeLine lineNumber="6182"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;or:</span></CodeLine>
<Link id="l06183" /><CodeLine lineNumber="6183"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;or:</span></CodeLine>
<Link id="l06184" /><CodeLine lineNumber="6184"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;OR;</span></CodeLine>
<Link id="l06185" /><CodeLine lineNumber="6185"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;xor:</span></CodeLine>
<Link id="l06186" /><CodeLine lineNumber="6186"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;xor:</span></CodeLine>
<Link id="l06187" /><CodeLine lineNumber="6187"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;xor:</span></CodeLine>
<Link id="l06188" /><CodeLine lineNumber="6188"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;xor:</span></CodeLine>
<Link id="l06189" /><CodeLine lineNumber="6189"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;XOR;</span></CodeLine>
<Link id="l06190" /><CodeLine lineNumber="6190"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;inc:</span></CodeLine>
<Link id="l06191" /><CodeLine lineNumber="6191"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;inc:</span></CodeLine>
<Link id="l06192" /><CodeLine lineNumber="6192"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;inc:</span></CodeLine>
<Link id="l06193" /><CodeLine lineNumber="6193"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;inc:</span></CodeLine>
<Link id="l06194" /><CodeLine lineNumber="6194"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;INC;</span></CodeLine>
<Link id="l06195" /><CodeLine lineNumber="6195"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;dec:</span></CodeLine>
<Link id="l06196" /><CodeLine lineNumber="6196"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;dec:</span></CodeLine>
<Link id="l06197" /><CodeLine lineNumber="6197"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;dec:</span></CodeLine>
<Link id="l06198" /><CodeLine lineNumber="6198"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;dec:</span></CodeLine>
<Link id="l06199" /><CodeLine lineNumber="6199"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;DEC;</span></CodeLine>
<Link id="l06200" /><CodeLine lineNumber="6200"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;cmpswap:</span></CodeLine>
<Link id="l06201" /><CodeLine lineNumber="6201"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;cmpswap:</span></CodeLine>
<Link id="l06202" /><CodeLine lineNumber="6202"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;cmpswap:</span></CodeLine>
<Link id="l06203" /><CodeLine lineNumber="6203"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;cmpswap:</span></CodeLine>
<Link id="l06204" /><CodeLine lineNumber="6204"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;CMPSWAP;</span></CodeLine>
<Link id="l06205" /><CodeLine lineNumber="6205"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;fadd:</span></CodeLine>
<Link id="l06206" /><CodeLine lineNumber="6206"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;fadd:</span></CodeLine>
<Link id="l06207" /><CodeLine lineNumber="6207"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;fadd:</span></CodeLine>
<Link id="l06208" /><CodeLine lineNumber="6208"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;fadd:</span></CodeLine>
<Link id="l06209" /><CodeLine lineNumber="6209"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;FADD;</span></CodeLine>
<Link id="l06210" /><CodeLine lineNumber="6210"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;fmin:</span></CodeLine>
<Link id="l06211" /><CodeLine lineNumber="6211"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;fmin:</span></CodeLine>
<Link id="l06212" /><CodeLine lineNumber="6212"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;fmin:</span></CodeLine>
<Link id="l06213" /><CodeLine lineNumber="6213"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;fmin:</span></CodeLine>
<Link id="l06214" /><CodeLine lineNumber="6214"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;FMIN;</span></CodeLine>
<Link id="l06215" /><CodeLine lineNumber="6215"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;fmax:</span></CodeLine>
<Link id="l06216" /><CodeLine lineNumber="6216"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;fmax:</span></CodeLine>
<Link id="l06217" /><CodeLine lineNumber="6217"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;fmax:</span></CodeLine>
<Link id="l06218" /><CodeLine lineNumber="6218"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;fmax:</span></CodeLine>
<Link id="l06219" /><CodeLine lineNumber="6219"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;FMAX;</span></CodeLine>
<Link id="l06220" /><CodeLine lineNumber="6220"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;cond&#95;sub&#95;u32:</span></CodeLine>
<Link id="l06221" /><CodeLine lineNumber="6221"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;cond&#95;sub&#95;u32:</span></CodeLine>
<Link id="l06222" /><CodeLine lineNumber="6222"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> AMDGPU::G&#95;AMDGPU&#95;BUFFER&#95;ATOMIC&#95;COND&#95;SUB&#95;U32;</span></CodeLine>
<Link id="l06223" /><CodeLine lineNumber="6223"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">:</span></CodeLine>
<Link id="l06224" /><CodeLine lineNumber="6224"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</span><span class="doxyHighlightStringLiteral">&quot;unhandled atomic opcode&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06225" /><CodeLine lineNumber="6225"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06226" /><CodeLine lineNumber="6226"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l06227" /><CodeLine lineNumber="6227"></CodeLine>
<Link id="l06228" /><CodeLine lineNumber="6228" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3cc7860fbf211f566f62809ac1144023"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3cc7860fbf211f566f62809ac1144023">AMDGPULegalizerInfo::legalizeBufferAtomic</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l06229" /><CodeLine lineNumber="6229"><span class="doxyHighlight">                                               <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l06230" /><CodeLine lineNumber="6230"><span class="doxyHighlight">                                               <a href="/docs/api/namespaces/llvm/intrinsic/#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IID)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l06231" /><CodeLine lineNumber="6231"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsCmpSwap =</span></CodeLine>
<Link id="l06232" /><CodeLine lineNumber="6232"><span class="doxyHighlight">      IID == Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;cmpswap ||</span></CodeLine>
<Link id="l06233" /><CodeLine lineNumber="6233"><span class="doxyHighlight">      IID == Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;cmpswap ||</span></CodeLine>
<Link id="l06234" /><CodeLine lineNumber="6234"><span class="doxyHighlight">      IID == Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;cmpswap ||</span></CodeLine>
<Link id="l06235" /><CodeLine lineNumber="6235"><span class="doxyHighlight">      IID == Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;cmpswap;</span></CodeLine>
<Link id="l06236" /><CodeLine lineNumber="6236"></CodeLine>
<Link id="l06237" /><CodeLine lineNumber="6237"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l06238" /><CodeLine lineNumber="6238"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Since we don&#39;t have 128-bit atomics, we don&#39;t need to handle the case of</span></CodeLine>
<Link id="l06239" /><CodeLine lineNumber="6239"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// p8 argmunents to the atomic itself</span></CodeLine>
<Link id="l06240" /><CodeLine lineNumber="6240"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> VData = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l06241" /><CodeLine lineNumber="6241"></CodeLine>
<Link id="l06242" /><CodeLine lineNumber="6242"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> CmpVal;</span></CodeLine>
<Link id="l06243" /><CodeLine lineNumber="6243"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> OpOffset = 0;</span></CodeLine>
<Link id="l06244" /><CodeLine lineNumber="6244"></CodeLine>
<Link id="l06245" /><CodeLine lineNumber="6245"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsCmpSwap) &#123;</span></CodeLine>
<Link id="l06246" /><CodeLine lineNumber="6246"><span class="doxyHighlight">    CmpVal = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</span></CodeLine>
<Link id="l06247" /><CodeLine lineNumber="6247"><span class="doxyHighlight">    ++OpOffset;</span></CodeLine>
<Link id="l06248" /><CodeLine lineNumber="6248"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06249" /><CodeLine lineNumber="6249"></CodeLine>
<Link id="l06250" /><CodeLine lineNumber="6250"><span class="doxyHighlight">  <a href="#a9d84441ae7638d9c27873f5a3810cb88">castBufferRsrcArgToV4I32</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, 3 + OpOffset);</span></CodeLine>
<Link id="l06251" /><CodeLine lineNumber="6251"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> RSrc = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3 + OpOffset).getReg();</span></CodeLine>
<Link id="l06252" /><CodeLine lineNumber="6252"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumVIndexOps = IsCmpSwap ? 9 : 8;</span></CodeLine>
<Link id="l06253" /><CodeLine lineNumber="6253"></CodeLine>
<Link id="l06254" /><CodeLine lineNumber="6254"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The struct intrinsic variants add one additional operand over raw.</span></CodeLine>
<Link id="l06255" /><CodeLine lineNumber="6255"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> HasVIndex = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() == NumVIndexOps;</span></CodeLine>
<Link id="l06256" /><CodeLine lineNumber="6256"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> VIndex;</span></CodeLine>
<Link id="l06257" /><CodeLine lineNumber="6257"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (HasVIndex) &#123;</span></CodeLine>
<Link id="l06258" /><CodeLine lineNumber="6258"><span class="doxyHighlight">    VIndex = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4 + OpOffset).getReg();</span></CodeLine>
<Link id="l06259" /><CodeLine lineNumber="6259"><span class="doxyHighlight">    ++OpOffset;</span></CodeLine>
<Link id="l06260" /><CodeLine lineNumber="6260"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06261" /><CodeLine lineNumber="6261"><span class="doxyHighlight">    VIndex = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32), 0).getReg(0);</span></CodeLine>
<Link id="l06262" /><CodeLine lineNumber="6262"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06263" /><CodeLine lineNumber="6263"></CodeLine>
<Link id="l06264" /><CodeLine lineNumber="6264"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> VOffset = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4 + OpOffset).getReg();</span></CodeLine>
<Link id="l06265" /><CodeLine lineNumber="6265"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> SOffset = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5 + OpOffset).getReg();</span></CodeLine>
<Link id="l06266" /><CodeLine lineNumber="6266"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AuxiliaryData = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(6 + OpOffset).getImm();</span></CodeLine>
<Link id="l06267" /><CodeLine lineNumber="6267"></CodeLine>
<Link id="l06268" /><CodeLine lineNumber="6268"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinememoperand">MachineMemOperand</a> &#42;MMO = &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands&#95;begin();</span></CodeLine>
<Link id="l06269" /><CodeLine lineNumber="6269"></CodeLine>
<Link id="l06270" /><CodeLine lineNumber="6270"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ImmOffset;</span></CodeLine>
<Link id="l06271" /><CodeLine lineNumber="6271"><span class="doxyHighlight">  std::tie(VOffset, ImmOffset) = <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a14daf64c8f1ebcbe259a41854f49ad12">splitBufferOffsets</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, VOffset);</span></CodeLine>
<Link id="l06272" /><CodeLine lineNumber="6272"></CodeLine>
<Link id="l06273" /><CodeLine lineNumber="6273"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MIB = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(<a href="#a0356a7c051be3c82d2c7da7e0bdb229c">getBufferAtomicPseudo</a>(IID))</span></CodeLine>
<Link id="l06274" /><CodeLine lineNumber="6274"><span class="doxyHighlight">      .addDef(Dst)</span></CodeLine>
<Link id="l06275" /><CodeLine lineNumber="6275"><span class="doxyHighlight">      .addUse(VData); </span><span class="doxyHighlightComment">// vdata</span></CodeLine>
<Link id="l06276" /><CodeLine lineNumber="6276"></CodeLine>
<Link id="l06277" /><CodeLine lineNumber="6277"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsCmpSwap)</span></CodeLine>
<Link id="l06278" /><CodeLine lineNumber="6278"><span class="doxyHighlight">    MIB.addReg(CmpVal);</span></CodeLine>
<Link id="l06279" /><CodeLine lineNumber="6279"></CodeLine>
<Link id="l06280" /><CodeLine lineNumber="6280"><span class="doxyHighlight">  MIB.addUse(RSrc)               </span><span class="doxyHighlightComment">// rsrc</span></CodeLine>
<Link id="l06281" /><CodeLine lineNumber="6281"><span class="doxyHighlight">     .addUse(VIndex)             </span><span class="doxyHighlightComment">// vindex</span></CodeLine>
<Link id="l06282" /><CodeLine lineNumber="6282"><span class="doxyHighlight">     .addUse(VOffset)            </span><span class="doxyHighlightComment">// voffset</span></CodeLine>
<Link id="l06283" /><CodeLine lineNumber="6283"><span class="doxyHighlight">     .addUse(SOffset)            </span><span class="doxyHighlightComment">// soffset</span></CodeLine>
<Link id="l06284" /><CodeLine lineNumber="6284"><span class="doxyHighlight">     .addImm(ImmOffset)          </span><span class="doxyHighlightComment">// offset(imm)</span></CodeLine>
<Link id="l06285" /><CodeLine lineNumber="6285"><span class="doxyHighlight">     .addImm(AuxiliaryData)      </span><span class="doxyHighlightComment">// cachepolicy, swizzled buffer(imm)</span></CodeLine>
<Link id="l06286" /><CodeLine lineNumber="6286"><span class="doxyHighlight">     .addImm(HasVIndex ? -1 : 0) </span><span class="doxyHighlightComment">// idxen(imm)</span></CodeLine>
<Link id="l06287" /><CodeLine lineNumber="6287"><span class="doxyHighlight">     .addMemOperand(MMO);</span></CodeLine>
<Link id="l06288" /><CodeLine lineNumber="6288"></CodeLine>
<Link id="l06289" /><CodeLine lineNumber="6289"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l06290" /><CodeLine lineNumber="6290"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06291" /><CodeLine lineNumber="6291"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l06292" /><CodeLine lineNumber="6292"></CodeLine>
<Link id="l06293" /><CodeLine lineNumber="6293"><span class="doxyHighlightComment">/// Turn a set of s16 typed registers in \\p AddrRegs into a dword sized</span></CodeLine>
<Link id="l06294" /><CodeLine lineNumber="6294"><span class="doxyHighlightComment">/// vector with s16 typed elements.</span></CodeLine>
<Link id="l06295" /><CodeLine lineNumber="6295" lineLink="#a0022aa73e6337684561159d1f7929966"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="#a0022aa73e6337684561159d1f7929966">packImage16bitOpsToDwords</a>(<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l06296" /><CodeLine lineNumber="6296"><span class="doxyHighlight">                                      <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;Register&gt;</a> &amp;PackedAddrs,</span></CodeLine>
<Link id="l06297" /><CodeLine lineNumber="6297"><span class="doxyHighlight">                                      </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ArgOffset,</span></CodeLine>
<Link id="l06298" /><CodeLine lineNumber="6298"><span class="doxyHighlight">                                      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo">AMDGPU::ImageDimIntrinsicInfo</a> &#42;Intr,</span></CodeLine>
<Link id="l06299" /><CodeLine lineNumber="6299"><span class="doxyHighlight">                                      </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsA16, </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsG16) &#123;</span></CodeLine>
<Link id="l06300" /><CodeLine lineNumber="6300"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</span></CodeLine>
<Link id="l06301" /><CodeLine lineNumber="6301"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2, 16);</span></CodeLine>
<Link id="l06302" /><CodeLine lineNumber="6302"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> EndIdx = Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#a30d38b0c21817d31cdda049b08e632e6">VAddrEnd</a>;</span></CodeLine>
<Link id="l06303" /><CodeLine lineNumber="6303"></CodeLine>
<Link id="l06304" /><CodeLine lineNumber="6304"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#af38eeafc61d19839d3beafae2395776b">VAddrStart</a>; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; EndIdx; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) &#123;</span></CodeLine>
<Link id="l06305" /><CodeLine lineNumber="6305"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;<a href="/docs/api/classes/llvm/srcop">SrcOp</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(ArgOffset + <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l06306" /><CodeLine lineNumber="6306"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/srcop">SrcOp</a>.isReg())</span></CodeLine>
<Link id="l06307" /><CodeLine lineNumber="6307"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">; </span><span class="doxyHighlightComment">// &#95;L to &#95;LZ may have eliminated this.</span></CodeLine>
<Link id="l06308" /><CodeLine lineNumber="6308"></CodeLine>
<Link id="l06309" /><CodeLine lineNumber="6309"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> AddrReg = <a href="/docs/api/classes/llvm/srcop">SrcOp</a>.<a href="/docs/api/classes/llvm/srcop/#ae229785d0c8a8ce25d34be18fe150a54">getReg</a>();</span></CodeLine>
<Link id="l06310" /><CodeLine lineNumber="6310"></CodeLine>
<Link id="l06311" /><CodeLine lineNumber="6311"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I &lt; Intr-&gt;</a>GradientStart) ||</span></CodeLine>
<Link id="l06312" /><CodeLine lineNumber="6312"><span class="doxyHighlight">        (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &gt;= Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#ac293c5b2a8dc63dc52c90978fd3f141b">GradientStart</a> &amp;&amp; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I &lt; Intr-&gt;</a>CoordStart &amp;&amp; !IsG16) ||</span></CodeLine>
<Link id="l06313" /><CodeLine lineNumber="6313"><span class="doxyHighlight">        (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> &gt;= Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#ae03876722d50e94e3f7fea62d1a357f5">CoordStart</a> &amp;&amp; !IsA16)) &#123;</span></CodeLine>
<Link id="l06314" /><CodeLine lineNumber="6314"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> ((<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I &lt; Intr-&gt;</a>GradientStart) &amp;&amp; IsA16 &amp;&amp;</span></CodeLine>
<Link id="l06315" /><CodeLine lineNumber="6315"><span class="doxyHighlight">          (<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;getType(AddrReg) == <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>)) &#123;</span></CodeLine>
<Link id="l06316" /><CodeLine lineNumber="6316"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> == Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#a9c2123200d7aaa8788be3dc92100af4e">BiasIndex</a> &amp;&amp; </span><span class="doxyHighlightStringLiteral">&quot;Got unexpected 16-bit extra argument&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06317" /><CodeLine lineNumber="6317"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Special handling of bias when A16 is on. Bias is of type half but</span></CodeLine>
<Link id="l06318" /><CodeLine lineNumber="6318"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// occupies full 32-bit.</span></CodeLine>
<Link id="l06319" /><CodeLine lineNumber="6319"><span class="doxyHighlight">        PackedAddrs.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(</span></CodeLine>
<Link id="l06320" /><CodeLine lineNumber="6320"><span class="doxyHighlight">            <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBuildVector(<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, &#123;AddrReg, B.buildUndef(S16).getReg(0)&#125;)</span></CodeLine>
<Link id="l06321" /><CodeLine lineNumber="6321"><span class="doxyHighlight">                .getReg(0));</span></CodeLine>
<Link id="l06322" /><CodeLine lineNumber="6322"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06323" /><CodeLine lineNumber="6323"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!IsA16 || Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#a91c53b6a1976c724071eafc0400873ff">NumBiasArgs</a> == 0 || <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#a9c2123200d7aaa8788be3dc92100af4e">BiasIndex</a>) &amp;&amp;</span></CodeLine>
<Link id="l06324" /><CodeLine lineNumber="6324"><span class="doxyHighlight">               </span><span class="doxyHighlightStringLiteral">&quot;Bias needs to be converted to 16 bit in A16 mode&quot;</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06325" /><CodeLine lineNumber="6325"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// Handle any gradient or coordinate operands that should not be packed</span></CodeLine>
<Link id="l06326" /><CodeLine lineNumber="6326"><span class="doxyHighlight">        AddrReg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBitcast(<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, AddrReg).getReg(0);</span></CodeLine>
<Link id="l06327" /><CodeLine lineNumber="6327"><span class="doxyHighlight">        PackedAddrs.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(AddrReg);</span></CodeLine>
<Link id="l06328" /><CodeLine lineNumber="6328"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l06329" /><CodeLine lineNumber="6329"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06330" /><CodeLine lineNumber="6330"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Dz/dh, dz/dv and the last odd coord are packed with undef. Also, in 1D,</span></CodeLine>
<Link id="l06331" /><CodeLine lineNumber="6331"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// derivatives dx/dh and dx/dv are packed with undef.</span></CodeLine>
<Link id="l06332" /><CodeLine lineNumber="6332"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (((<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> + 1) &gt;= EndIdx) ||</span></CodeLine>
<Link id="l06333" /><CodeLine lineNumber="6333"><span class="doxyHighlight">          ((Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#ad2823ce8b3af31f5775b2868e2773d77">NumGradients</a> / 2) % 2 == 1 &amp;&amp;</span></CodeLine>
<Link id="l06334" /><CodeLine lineNumber="6334"><span class="doxyHighlight">           (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> == </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#ac293c5b2a8dc63dc52c90978fd3f141b">GradientStart</a> +</span></CodeLine>
<Link id="l06335" /><CodeLine lineNumber="6335"><span class="doxyHighlight">                                       (Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#ad2823ce8b3af31f5775b2868e2773d77">NumGradients</a> / 2) - 1) ||</span></CodeLine>
<Link id="l06336" /><CodeLine lineNumber="6336"><span class="doxyHighlight">            <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> == </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#ac293c5b2a8dc63dc52c90978fd3f141b">GradientStart</a> +</span></CodeLine>
<Link id="l06337" /><CodeLine lineNumber="6337"><span class="doxyHighlight">                                       Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#ad2823ce8b3af31f5775b2868e2773d77">NumGradients</a> - 1))) ||</span></CodeLine>
<Link id="l06338" /><CodeLine lineNumber="6338"><span class="doxyHighlight">          </span><span class="doxyHighlightComment">// Check for &#95;L to &#95;LZ optimization</span></CodeLine>
<Link id="l06339" /><CodeLine lineNumber="6339"><span class="doxyHighlight">          !<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(ArgOffset + <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> + 1).isReg()) &#123;</span></CodeLine>
<Link id="l06340" /><CodeLine lineNumber="6340"><span class="doxyHighlight">        PackedAddrs.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(</span></CodeLine>
<Link id="l06341" /><CodeLine lineNumber="6341"><span class="doxyHighlight">            <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBuildVector(<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, &#123;AddrReg, B.buildUndef(S16).getReg(0)&#125;)</span></CodeLine>
<Link id="l06342" /><CodeLine lineNumber="6342"><span class="doxyHighlight">                .getReg(0));</span></CodeLine>
<Link id="l06343" /><CodeLine lineNumber="6343"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06344" /><CodeLine lineNumber="6344"><span class="doxyHighlight">        PackedAddrs.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(</span></CodeLine>
<Link id="l06345" /><CodeLine lineNumber="6345"><span class="doxyHighlight">            <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBuildVector(</span></CodeLine>
<Link id="l06346" /><CodeLine lineNumber="6346"><span class="doxyHighlight">                 <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, &#123;AddrReg, MI.getOperand(ArgOffset + I + 1).getReg()&#125;)</span></CodeLine>
<Link id="l06347" /><CodeLine lineNumber="6347"><span class="doxyHighlight">                .getReg(0));</span></CodeLine>
<Link id="l06348" /><CodeLine lineNumber="6348"><span class="doxyHighlight">        ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</span></CodeLine>
<Link id="l06349" /><CodeLine lineNumber="6349"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l06350" /><CodeLine lineNumber="6350"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06351" /><CodeLine lineNumber="6351"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06352" /><CodeLine lineNumber="6352"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l06353" /><CodeLine lineNumber="6353"></CodeLine>
<Link id="l06354" /><CodeLine lineNumber="6354"><span class="doxyHighlightComment">/// Convert from separate vaddr components to a single vector address register,</span></CodeLine>
<Link id="l06355" /><CodeLine lineNumber="6355"><span class="doxyHighlightComment">/// and replace the remaining operands with $noreg.</span></CodeLine>
<Link id="l06356" /><CodeLine lineNumber="6356" lineLink="#ad049a79d46df2c25561d90e9d80fb5e3"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">void</span><span class="doxyHighlight"> <a href="#ad049a79d46df2c25561d90e9d80fb5e3">convertImageAddrToPacked</a>(<a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l06357" /><CodeLine lineNumber="6357"><span class="doxyHighlight">                                     </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> DimIdx, </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NumVAddrs) &#123;</span></CodeLine>
<Link id="l06358" /><CodeLine lineNumber="6358"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l06359" /><CodeLine lineNumber="6359"><span class="doxyHighlight">  (void)<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>;</span></CodeLine>
<Link id="l06360" /><CodeLine lineNumber="6360"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Register, 8&gt;</a> AddrRegs;</span></CodeLine>
<Link id="l06361" /><CodeLine lineNumber="6361"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumVAddrs; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l06362" /><CodeLine lineNumber="6362"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;<a href="/docs/api/classes/llvm/srcop">SrcOp</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(DimIdx + <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l06363" /><CodeLine lineNumber="6363"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/srcop">SrcOp</a>.isReg()) &#123;</span></CodeLine>
<Link id="l06364" /><CodeLine lineNumber="6364"><span class="doxyHighlight">      AddrRegs.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/classes/llvm/srcop">SrcOp</a>.<a href="/docs/api/classes/llvm/srcop/#ae229785d0c8a8ce25d34be18fe150a54">getReg</a>());</span></CodeLine>
<Link id="l06365" /><CodeLine lineNumber="6365"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;getType(<a href="/docs/api/classes/llvm/srcop">SrcOp</a>.<a href="/docs/api/classes/llvm/srcop/#ae229785d0c8a8ce25d34be18fe150a54">getReg</a>()) == <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l06366" /><CodeLine lineNumber="6366"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06367" /><CodeLine lineNumber="6367"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06368" /><CodeLine lineNumber="6368"></CodeLine>
<Link id="l06369" /><CodeLine lineNumber="6369"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NumAddrRegs = AddrRegs.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>();</span></CodeLine>
<Link id="l06370" /><CodeLine lineNumber="6370"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumAddrRegs != 1) &#123;</span></CodeLine>
<Link id="l06371" /><CodeLine lineNumber="6371"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> VAddr =</span></CodeLine>
<Link id="l06372" /><CodeLine lineNumber="6372"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBuildVector(<a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(NumAddrRegs, 32), AddrRegs);</span></CodeLine>
<Link id="l06373" /><CodeLine lineNumber="6373"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(DimIdx).setReg(VAddr.getReg(0));</span></CodeLine>
<Link id="l06374" /><CodeLine lineNumber="6374"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06375" /><CodeLine lineNumber="6375"></CodeLine>
<Link id="l06376" /><CodeLine lineNumber="6376"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 1; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumVAddrs; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</span></CodeLine>
<Link id="l06377" /><CodeLine lineNumber="6377"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;<a href="/docs/api/classes/llvm/srcop">SrcOp</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(DimIdx + <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l06378" /><CodeLine lineNumber="6378"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/srcop">SrcOp</a>.isReg())</span></CodeLine>
<Link id="l06379" /><CodeLine lineNumber="6379"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(DimIdx + <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>).setReg(AMDGPU::NoRegister);</span></CodeLine>
<Link id="l06380" /><CodeLine lineNumber="6380"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06381" /><CodeLine lineNumber="6381"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l06382" /><CodeLine lineNumber="6382"></CodeLine>
<Link id="l06383" /><CodeLine lineNumber="6383"><span class="doxyHighlightComment">/// Rewrite image intrinsics to use register layouts expected by the subtarget.</span></CodeLine>
<Link id="l06384" /><CodeLine lineNumber="6384"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l06385" /><CodeLine lineNumber="6385"><span class="doxyHighlightComment">/// Depending on the subtarget, load/store with 16-bit element data need to be</span></CodeLine>
<Link id="l06386" /><CodeLine lineNumber="6386"><span class="doxyHighlightComment">/// rewritten to use the low half of 32-bit registers, or directly use a packed</span></CodeLine>
<Link id="l06387" /><CodeLine lineNumber="6387"><span class="doxyHighlightComment">/// layout. 16-bit addresses should also sometimes be packed into 32-bit</span></CodeLine>
<Link id="l06388" /><CodeLine lineNumber="6388"><span class="doxyHighlightComment">/// registers.</span></CodeLine>
<Link id="l06389" /><CodeLine lineNumber="6389"><span class="doxyHighlightComment">///</span></CodeLine>
<Link id="l06390" /><CodeLine lineNumber="6390"><span class="doxyHighlightComment">/// We don&#39;t want to directly select image instructions just yet, but also want</span></CodeLine>
<Link id="l06391" /><CodeLine lineNumber="6391"><span class="doxyHighlightComment">/// to exposes all register repacking to the legalizer/combiners. We also don&#39;t</span></CodeLine>
<Link id="l06392" /><CodeLine lineNumber="6392"><span class="doxyHighlightComment">/// want a selected instruction entering RegBankSelect. In order to avoid</span></CodeLine>
<Link id="l06393" /><CodeLine lineNumber="6393"><span class="doxyHighlightComment">/// defining a multitude of intermediate image instructions, directly hack on</span></CodeLine>
<Link id="l06394" /><CodeLine lineNumber="6394"><span class="doxyHighlightComment">/// the intrinsic&#39;s arguments. In cases like a16 addresses, this requires</span></CodeLine>
<Link id="l06395" /><CodeLine lineNumber="6395"><span class="doxyHighlightComment">/// padding now unnecessary arguments with $noreg.</span></CodeLine>
<Link id="l06396" /><CodeLine lineNumber="6396" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#ad0be6e871a184d6f7b814515324eee1b"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ad0be6e871a184d6f7b814515324eee1b">AMDGPULegalizerInfo::legalizeImageIntrinsic</a>(</span></CodeLine>
<Link id="l06397" /><CodeLine lineNumber="6397"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/classes/llvm/giselchangeobserver">GISelChangeObserver</a> &amp;Observer,</span></CodeLine>
<Link id="l06398" /><CodeLine lineNumber="6398"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo">AMDGPU::ImageDimIntrinsicInfo</a> &#42;Intr)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l06399" /><CodeLine lineNumber="6399"></CodeLine>
<Link id="l06400" /><CodeLine lineNumber="6400"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getMF();</span></CodeLine>
<Link id="l06401" /><CodeLine lineNumber="6401"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumDefs = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitDefs();</span></CodeLine>
<Link id="l06402" /><CodeLine lineNumber="6402"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> ArgOffset = NumDefs + 1;</span></CodeLine>
<Link id="l06403" /><CodeLine lineNumber="6403"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsTFE = NumDefs == 2;</span></CodeLine>
<Link id="l06404" /><CodeLine lineNumber="6404"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We are only processing the operands of d16 image operations on subtargets</span></CodeLine>
<Link id="l06405" /><CodeLine lineNumber="6405"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// that use the unpacked register layout, or need to repack the TFE result.</span></CodeLine>
<Link id="l06406" /><CodeLine lineNumber="6406"></CodeLine>
<Link id="l06407" /><CodeLine lineNumber="6407"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Do we need to guard against already legalized intrinsics?</span></CodeLine>
<Link id="l06408" /><CodeLine lineNumber="6408"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo">AMDGPU::MIMGBaseOpcodeInfo</a> &#42;BaseOpcode =</span></CodeLine>
<Link id="l06409" /><CodeLine lineNumber="6409"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/amdgpu/#ae1884e3318cb1f8a4465b1b4bd4d9827">AMDGPU::getMIMGBaseOpcodeInfo</a>(Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#a1f61248ac876bb611a05aee7346d54e6">BaseOpcode</a>);</span></CodeLine>
<Link id="l06410" /><CodeLine lineNumber="6410"></CodeLine>
<Link id="l06411" /><CodeLine lineNumber="6411"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI();</span></CodeLine>
<Link id="l06412" /><CodeLine lineNumber="6412"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l06413" /><CodeLine lineNumber="6413"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</span></CodeLine>
<Link id="l06414" /><CodeLine lineNumber="6414"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2, 16);</span></CodeLine>
<Link id="l06415" /><CodeLine lineNumber="6415"></CodeLine>
<Link id="l06416" /><CodeLine lineNumber="6416"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> DMask = 0;</span></CodeLine>
<Link id="l06417" /><CodeLine lineNumber="6417"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> VData;</span></CodeLine>
<Link id="l06418" /><CodeLine lineNumber="6418"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty;</span></CodeLine>
<Link id="l06419" /><CodeLine lineNumber="6419"></CodeLine>
<Link id="l06420" /><CodeLine lineNumber="6420"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!BaseOpcode-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#a5a48932ddd4bf7828d868c20e0cb14c6">NoReturn</a> || BaseOpcode-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#a89201ea82f62bd544438593981c5b8ff">Store</a>) &#123;</span></CodeLine>
<Link id="l06421" /><CodeLine lineNumber="6421"><span class="doxyHighlight">    VData = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(NumDefs == 0 ? 1 : 0).getReg();</span></CodeLine>
<Link id="l06422" /><CodeLine lineNumber="6422"><span class="doxyHighlight">    Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;getType(VData);</span></CodeLine>
<Link id="l06423" /><CodeLine lineNumber="6423"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06424" /><CodeLine lineNumber="6424"></CodeLine>
<Link id="l06425" /><CodeLine lineNumber="6425"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsAtomicPacked16Bit =</span></CodeLine>
<Link id="l06426" /><CodeLine lineNumber="6426"><span class="doxyHighlight">      (BaseOpcode-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#a4a00ba2881acaf308adce8c29b70fc07">BaseOpcode</a> == AMDGPU::IMAGE&#95;ATOMIC&#95;PK&#95;ADD&#95;F16 ||</span></CodeLine>
<Link id="l06427" /><CodeLine lineNumber="6427"><span class="doxyHighlight">       BaseOpcode-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#a4a00ba2881acaf308adce8c29b70fc07">BaseOpcode</a> == AMDGPU::IMAGE&#95;ATOMIC&#95;PK&#95;ADD&#95;BF16);</span></CodeLine>
<Link id="l06428" /><CodeLine lineNumber="6428"></CodeLine>
<Link id="l06429" /><CodeLine lineNumber="6429"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Check for 16 bit addresses and pack if true.</span></CodeLine>
<Link id="l06430" /><CodeLine lineNumber="6430"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> GradTy =</span></CodeLine>
<Link id="l06431" /><CodeLine lineNumber="6431"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;getType(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(ArgOffset + Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#ac293c5b2a8dc63dc52c90978fd3f141b">GradientStart</a>).getReg());</span></CodeLine>
<Link id="l06432" /><CodeLine lineNumber="6432"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> AddrTy =</span></CodeLine>
<Link id="l06433" /><CodeLine lineNumber="6433"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;getType(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(ArgOffset + Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#ae03876722d50e94e3f7fea62d1a357f5">CoordStart</a>).getReg());</span></CodeLine>
<Link id="l06434" /><CodeLine lineNumber="6434"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsG16 =</span></CodeLine>
<Link id="l06435" /><CodeLine lineNumber="6435"><span class="doxyHighlight">      ST.hasG16() ? (BaseOpcode-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#a0adbb6ce25f3ffd10c57280e27cc2cd2">Gradients</a> &amp;&amp; GradTy == <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>) : GradTy == <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>;</span></CodeLine>
<Link id="l06436" /><CodeLine lineNumber="6436"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsA16 = AddrTy == <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>;</span></CodeLine>
<Link id="l06437" /><CodeLine lineNumber="6437"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsD16 = !IsAtomicPacked16Bit &amp;&amp; Ty.getScalarType() == <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>;</span></CodeLine>
<Link id="l06438" /><CodeLine lineNumber="6438"></CodeLine>
<Link id="l06439" /><CodeLine lineNumber="6439"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> DMaskLanes = 0;</span></CodeLine>
<Link id="l06440" /><CodeLine lineNumber="6440"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!BaseOpcode-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#a9b768edaf13fa245f7f32392066e8214">Atomic</a>) &#123;</span></CodeLine>
<Link id="l06441" /><CodeLine lineNumber="6441"><span class="doxyHighlight">    DMask = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(ArgOffset + Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#afe5fbadc77f54c7d03537484b374e52d">DMaskIndex</a>).getImm();</span></CodeLine>
<Link id="l06442" /><CodeLine lineNumber="6442"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BaseOpcode-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#a08a241a250332ee93cf1dce846b01cad">Gather4</a>) &#123;</span></CodeLine>
<Link id="l06443" /><CodeLine lineNumber="6443"><span class="doxyHighlight">      DMaskLanes = 4;</span></CodeLine>
<Link id="l06444" /><CodeLine lineNumber="6444"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (DMask != 0) &#123;</span></CodeLine>
<Link id="l06445" /><CodeLine lineNumber="6445"><span class="doxyHighlight">      DMaskLanes = <a href="/docs/api/namespaces/llvm/#a0eea77e7bfa82e0219d2ec7b4efbc94f">llvm::popcount</a>(DMask);</span></CodeLine>
<Link id="l06446" /><CodeLine lineNumber="6446"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!IsTFE &amp;&amp; !BaseOpcode-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#a89201ea82f62bd544438593981c5b8ff">Store</a>) &#123;</span></CodeLine>
<Link id="l06447" /><CodeLine lineNumber="6447"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// If dmask is 0, this is a no-op load. This can be eliminated.</span></CodeLine>
<Link id="l06448" /><CodeLine lineNumber="6448"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUndef(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0));</span></CodeLine>
<Link id="l06449" /><CodeLine lineNumber="6449"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l06450" /><CodeLine lineNumber="6450"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06451" /><CodeLine lineNumber="6451"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06452" /><CodeLine lineNumber="6452"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06453" /><CodeLine lineNumber="6453"></CodeLine>
<Link id="l06454" /><CodeLine lineNumber="6454"><span class="doxyHighlight">  Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l06455" /><CodeLine lineNumber="6455"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ChangedInstr = <a href="/docs/api/namespaces/llvm/#a1af45c4dc83c083c5ae914d96fd3ce96">make&#95;scope&#95;exit</a>(&#91;&amp;&#93; &#123; Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>); &#125;);</span></CodeLine>
<Link id="l06456" /><CodeLine lineNumber="6456"></CodeLine>
<Link id="l06457" /><CodeLine lineNumber="6457"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> StoreOpcode = IsD16 ? AMDGPU::G&#95;AMDGPU&#95;INTRIN&#95;IMAGE&#95;STORE&#95;D16</span></CodeLine>
<Link id="l06458" /><CodeLine lineNumber="6458"><span class="doxyHighlight">                                     : AMDGPU::G&#95;AMDGPU&#95;INTRIN&#95;IMAGE&#95;STORE;</span></CodeLine>
<Link id="l06459" /><CodeLine lineNumber="6459"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> LoadOpcode = IsD16 ? AMDGPU::G&#95;AMDGPU&#95;INTRIN&#95;IMAGE&#95;LOAD&#95;D16</span></CodeLine>
<Link id="l06460" /><CodeLine lineNumber="6460"><span class="doxyHighlight">                                    : AMDGPU::G&#95;AMDGPU&#95;INTRIN&#95;IMAGE&#95;LOAD;</span></CodeLine>
<Link id="l06461" /><CodeLine lineNumber="6461"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NewOpcode = LoadOpcode;</span></CodeLine>
<Link id="l06462" /><CodeLine lineNumber="6462"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BaseOpcode-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#a89201ea82f62bd544438593981c5b8ff">Store</a>)</span></CodeLine>
<Link id="l06463" /><CodeLine lineNumber="6463"><span class="doxyHighlight">    NewOpcode = StoreOpcode;</span></CodeLine>
<Link id="l06464" /><CodeLine lineNumber="6464"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BaseOpcode-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#a5a48932ddd4bf7828d868c20e0cb14c6">NoReturn</a>)</span></CodeLine>
<Link id="l06465" /><CodeLine lineNumber="6465"><span class="doxyHighlight">    NewOpcode = AMDGPU::G&#95;AMDGPU&#95;INTRIN&#95;IMAGE&#95;LOAD&#95;NORET;</span></CodeLine>
<Link id="l06466" /><CodeLine lineNumber="6466"></CodeLine>
<Link id="l06467" /><CodeLine lineNumber="6467"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Track that we legalized this</span></CodeLine>
<Link id="l06468" /><CodeLine lineNumber="6468"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getTII().get(NewOpcode));</span></CodeLine>
<Link id="l06469" /><CodeLine lineNumber="6469"></CodeLine>
<Link id="l06470" /><CodeLine lineNumber="6470"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Expecting to get an error flag since TFC is on - and dmask is 0 Force</span></CodeLine>
<Link id="l06471" /><CodeLine lineNumber="6471"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// dmask to be at least 1 otherwise the instruction will fail</span></CodeLine>
<Link id="l06472" /><CodeLine lineNumber="6472"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTFE &amp;&amp; DMask == 0) &#123;</span></CodeLine>
<Link id="l06473" /><CodeLine lineNumber="6473"><span class="doxyHighlight">    DMask = 0x1;</span></CodeLine>
<Link id="l06474" /><CodeLine lineNumber="6474"><span class="doxyHighlight">    DMaskLanes = 1;</span></CodeLine>
<Link id="l06475" /><CodeLine lineNumber="6475"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(ArgOffset + Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#afe5fbadc77f54c7d03537484b374e52d">DMaskIndex</a>).setImm(DMask);</span></CodeLine>
<Link id="l06476" /><CodeLine lineNumber="6476"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06477" /><CodeLine lineNumber="6477"></CodeLine>
<Link id="l06478" /><CodeLine lineNumber="6478"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BaseOpcode-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#a9b768edaf13fa245f7f32392066e8214">Atomic</a>) &#123;</span></CodeLine>
<Link id="l06479" /><CodeLine lineNumber="6479"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> VData0 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l06480" /><CodeLine lineNumber="6480"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;getType(VData0);</span></CodeLine>
<Link id="l06481" /><CodeLine lineNumber="6481"></CodeLine>
<Link id="l06482" /><CodeLine lineNumber="6482"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Allow atomic swap and bit ops for v2s16/v4s16</span></CodeLine>
<Link id="l06483" /><CodeLine lineNumber="6483"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty.isVector() &amp;&amp; !IsAtomicPacked16Bit)</span></CodeLine>
<Link id="l06484" /><CodeLine lineNumber="6484"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06485" /><CodeLine lineNumber="6485"></CodeLine>
<Link id="l06486" /><CodeLine lineNumber="6486"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BaseOpcode-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#a3b6665b446a6192cc2b5ecf51082ea83">AtomicX2</a>) &#123;</span></CodeLine>
<Link id="l06487" /><CodeLine lineNumber="6487"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/register">Register</a> VData1 = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</span></CodeLine>
<Link id="l06488" /><CodeLine lineNumber="6488"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// The two values are packed in one register.</span></CodeLine>
<Link id="l06489" /><CodeLine lineNumber="6489"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/llt">LLT</a> PackedTy = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2, Ty);</span></CodeLine>
<Link id="l06490" /><CodeLine lineNumber="6490"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86interleavedaccess-cpp/#a76c9562101f54d25482f88ae29ed6131">Concat</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBuildVector(PackedTy, &#123;VData0, VData1&#125;);</span></CodeLine>
<Link id="l06491" /><CodeLine lineNumber="6491"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).setReg(<a href="/docs/api/files/lib/lib/target/lib/target/x86/x86interleavedaccess-cpp/#a76c9562101f54d25482f88ae29ed6131">Concat</a>.getReg(0));</span></CodeLine>
<Link id="l06492" /><CodeLine lineNumber="6492"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).setReg(AMDGPU::NoRegister);</span></CodeLine>
<Link id="l06493" /><CodeLine lineNumber="6493"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06494" /><CodeLine lineNumber="6494"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06495" /><CodeLine lineNumber="6495"></CodeLine>
<Link id="l06496" /><CodeLine lineNumber="6496"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> CorrectedNumVAddrs = Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#a057d849feff860943f90a0e8e0012e93">NumVAddrs</a>;</span></CodeLine>
<Link id="l06497" /><CodeLine lineNumber="6497"></CodeLine>
<Link id="l06498" /><CodeLine lineNumber="6498"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Rewrite the addressing register layout before doing anything else.</span></CodeLine>
<Link id="l06499" /><CodeLine lineNumber="6499"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BaseOpcode-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#a0adbb6ce25f3ffd10c57280e27cc2cd2">Gradients</a> &amp;&amp; !ST.hasG16() &amp;&amp; (IsA16 != IsG16)) &#123;</span></CodeLine>
<Link id="l06500" /><CodeLine lineNumber="6500"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// 16 bit gradients are supported, but are tied to the A16 control</span></CodeLine>
<Link id="l06501" /><CodeLine lineNumber="6501"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// so both gradients and addresses must be 16 bit</span></CodeLine>
<Link id="l06502" /><CodeLine lineNumber="6502"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06503" /><CodeLine lineNumber="6503"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06504" /><CodeLine lineNumber="6504"></CodeLine>
<Link id="l06505" /><CodeLine lineNumber="6505"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsA16 &amp;&amp; !ST.hasA16()) &#123;</span></CodeLine>
<Link id="l06506" /><CodeLine lineNumber="6506"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// A16 not supported</span></CodeLine>
<Link id="l06507" /><CodeLine lineNumber="6507"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06508" /><CodeLine lineNumber="6508"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06509" /><CodeLine lineNumber="6509"></CodeLine>
<Link id="l06510" /><CodeLine lineNumber="6510"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NSAMaxSize = ST.getNSAMaxSize(BaseOpcode-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#a48ae3b8db545c374ea470b0d856e302f">Sampler</a>);</span></CodeLine>
<Link id="l06511" /><CodeLine lineNumber="6511"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> HasPartialNSA = ST.hasPartialNSAEncoding();</span></CodeLine>
<Link id="l06512" /><CodeLine lineNumber="6512"></CodeLine>
<Link id="l06513" /><CodeLine lineNumber="6513"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsA16 || IsG16) &#123;</span></CodeLine>
<Link id="l06514" /><CodeLine lineNumber="6514"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Even if NumVAddrs == 1 we should pack it into a 32-bit value, because the</span></CodeLine>
<Link id="l06515" /><CodeLine lineNumber="6515"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// instructions expect VGPR&#95;32</span></CodeLine>
<Link id="l06516" /><CodeLine lineNumber="6516"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Register, 4&gt;</a> PackedRegs;</span></CodeLine>
<Link id="l06517" /><CodeLine lineNumber="6517"></CodeLine>
<Link id="l06518" /><CodeLine lineNumber="6518"><span class="doxyHighlight">    <a href="#a0022aa73e6337684561159d1f7929966">packImage16bitOpsToDwords</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, PackedRegs, ArgOffset, Intr, IsA16, IsG16);</span></CodeLine>
<Link id="l06519" /><CodeLine lineNumber="6519"></CodeLine>
<Link id="l06520" /><CodeLine lineNumber="6520"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// See also below in the non-a16 branch</span></CodeLine>
<Link id="l06521" /><CodeLine lineNumber="6521"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseNSA = ST.hasNSAEncoding() &amp;&amp;</span></CodeLine>
<Link id="l06522" /><CodeLine lineNumber="6522"><span class="doxyHighlight">                        PackedRegs.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() &gt;= ST.getNSAThreshold(MF) &amp;&amp;</span></CodeLine>
<Link id="l06523" /><CodeLine lineNumber="6523"><span class="doxyHighlight">                        (PackedRegs.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() &lt;= NSAMaxSize || HasPartialNSA);</span></CodeLine>
<Link id="l06524" /><CodeLine lineNumber="6524"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UsePartialNSA =</span></CodeLine>
<Link id="l06525" /><CodeLine lineNumber="6525"><span class="doxyHighlight">        UseNSA &amp;&amp; HasPartialNSA &amp;&amp; PackedRegs.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() &gt; NSAMaxSize;</span></CodeLine>
<Link id="l06526" /><CodeLine lineNumber="6526"></CodeLine>
<Link id="l06527" /><CodeLine lineNumber="6527"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UsePartialNSA) &#123;</span></CodeLine>
<Link id="l06528" /><CodeLine lineNumber="6528"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// Pack registers that would go over NSAMaxSize into last VAddr register</span></CodeLine>
<Link id="l06529" /><CodeLine lineNumber="6529"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/llt">LLT</a> PackedAddrTy =</span></CodeLine>
<Link id="l06530" /><CodeLine lineNumber="6530"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2 &#42; (PackedRegs.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() - NSAMaxSize + 1), 16);</span></CodeLine>
<Link id="l06531" /><CodeLine lineNumber="6531"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86interleavedaccess-cpp/#a76c9562101f54d25482f88ae29ed6131">Concat</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConcatVectors(</span></CodeLine>
<Link id="l06532" /><CodeLine lineNumber="6532"><span class="doxyHighlight">          PackedAddrTy, <a href="/docs/api/namespaces/llvm/#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(PackedRegs).slice(NSAMaxSize - 1));</span></CodeLine>
<Link id="l06533" /><CodeLine lineNumber="6533"><span class="doxyHighlight">      PackedRegs&#91;NSAMaxSize - 1&#93; = <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86interleavedaccess-cpp/#a76c9562101f54d25482f88ae29ed6131">Concat</a>.getReg(0);</span></CodeLine>
<Link id="l06534" /><CodeLine lineNumber="6534"><span class="doxyHighlight">      PackedRegs.<a href="/docs/api/classes/llvm/smallvectorimpl/#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(NSAMaxSize);</span></CodeLine>
<Link id="l06535" /><CodeLine lineNumber="6535"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!UseNSA &amp;&amp; PackedRegs.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() &gt; 1) &#123;</span></CodeLine>
<Link id="l06536" /><CodeLine lineNumber="6536"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/llt">LLT</a> PackedAddrTy = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2 &#42; PackedRegs.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>(), 16);</span></CodeLine>
<Link id="l06537" /><CodeLine lineNumber="6537"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86interleavedaccess-cpp/#a76c9562101f54d25482f88ae29ed6131">Concat</a> = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConcatVectors(PackedAddrTy, PackedRegs);</span></CodeLine>
<Link id="l06538" /><CodeLine lineNumber="6538"><span class="doxyHighlight">      PackedRegs&#91;0&#93; = <a href="/docs/api/files/lib/lib/target/lib/target/x86/x86interleavedaccess-cpp/#a76c9562101f54d25482f88ae29ed6131">Concat</a>.getReg(0);</span></CodeLine>
<Link id="l06539" /><CodeLine lineNumber="6539"><span class="doxyHighlight">      PackedRegs.<a href="/docs/api/classes/llvm/smallvectorimpl/#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(1);</span></CodeLine>
<Link id="l06540" /><CodeLine lineNumber="6540"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06541" /><CodeLine lineNumber="6541"></CodeLine>
<Link id="l06542" /><CodeLine lineNumber="6542"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumPacked = PackedRegs.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>();</span></CodeLine>
<Link id="l06543" /><CodeLine lineNumber="6543"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#af38eeafc61d19839d3beafae2395776b">VAddrStart</a>; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I &lt; Intr-&gt;</a>VAddrEnd; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) &#123;</span></CodeLine>
<Link id="l06544" /><CodeLine lineNumber="6544"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/machineoperand">MachineOperand</a> &amp;<a href="/docs/api/classes/llvm/srcop">SrcOp</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(ArgOffset + <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</span></CodeLine>
<Link id="l06545" /><CodeLine lineNumber="6545"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/srcop">SrcOp</a>.isReg()) &#123;</span></CodeLine>
<Link id="l06546" /><CodeLine lineNumber="6546"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/srcop">SrcOp</a>.isImm() &amp;&amp; <a href="/docs/api/classes/llvm/srcop">SrcOp</a>.<a href="/docs/api/classes/llvm/srcop/#a9370c0de85c12bd0062063b7fcbc64ed">getImm</a>() == 0);</span></CodeLine>
<Link id="l06547" /><CodeLine lineNumber="6547"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">continue</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06548" /><CodeLine lineNumber="6548"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l06549" /><CodeLine lineNumber="6549"></CodeLine>
<Link id="l06550" /><CodeLine lineNumber="6550"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/srcop">SrcOp</a>.<a href="/docs/api/classes/llvm/srcop/#ae229785d0c8a8ce25d34be18fe150a54">getReg</a>() != AMDGPU::NoRegister);</span></CodeLine>
<Link id="l06551" /><CodeLine lineNumber="6551"></CodeLine>
<Link id="l06552" /><CodeLine lineNumber="6552"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> - Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#af38eeafc61d19839d3beafae2395776b">VAddrStart</a> &lt; NumPacked)</span></CodeLine>
<Link id="l06553" /><CodeLine lineNumber="6553"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/srcop">SrcOp</a>.setReg(PackedRegs&#91;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> - Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#af38eeafc61d19839d3beafae2395776b">VAddrStart</a>&#93;);</span></CodeLine>
<Link id="l06554" /><CodeLine lineNumber="6554"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l06555" /><CodeLine lineNumber="6555"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/srcop">SrcOp</a>.setReg(AMDGPU::NoRegister);</span></CodeLine>
<Link id="l06556" /><CodeLine lineNumber="6556"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06557" /><CodeLine lineNumber="6557"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06558" /><CodeLine lineNumber="6558"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// If the register allocator cannot place the address registers contiguously</span></CodeLine>
<Link id="l06559" /><CodeLine lineNumber="6559"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// without introducing moves, then using the non-sequential address encoding</span></CodeLine>
<Link id="l06560" /><CodeLine lineNumber="6560"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// is always preferable, since it saves VALU instructions and is usually a</span></CodeLine>
<Link id="l06561" /><CodeLine lineNumber="6561"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// wash in terms of code size or even better.</span></CodeLine>
<Link id="l06562" /><CodeLine lineNumber="6562"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l06563" /><CodeLine lineNumber="6563"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// However, we currently have no way of hinting to the register allocator</span></CodeLine>
<Link id="l06564" /><CodeLine lineNumber="6564"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// that MIMG addresses should be placed contiguously when it is possible to</span></CodeLine>
<Link id="l06565" /><CodeLine lineNumber="6565"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// do so, so force non-NSA for the common 2-address case as a heuristic.</span></CodeLine>
<Link id="l06566" /><CodeLine lineNumber="6566"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l06567" /><CodeLine lineNumber="6567"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// SIShrinkInstructions will convert NSA encodings to non-NSA after register</span></CodeLine>
<Link id="l06568" /><CodeLine lineNumber="6568"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// allocation when possible.</span></CodeLine>
<Link id="l06569" /><CodeLine lineNumber="6569"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l06570" /><CodeLine lineNumber="6570"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Partial NSA is allowed on GFX11+ where the final register is a contiguous</span></CodeLine>
<Link id="l06571" /><CodeLine lineNumber="6571"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// set of the remaining addresses.</span></CodeLine>
<Link id="l06572" /><CodeLine lineNumber="6572"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseNSA = ST.hasNSAEncoding() &amp;&amp;</span></CodeLine>
<Link id="l06573" /><CodeLine lineNumber="6573"><span class="doxyHighlight">                        CorrectedNumVAddrs &gt;= ST.getNSAThreshold(MF) &amp;&amp;</span></CodeLine>
<Link id="l06574" /><CodeLine lineNumber="6574"><span class="doxyHighlight">                        (CorrectedNumVAddrs &lt;= NSAMaxSize || HasPartialNSA);</span></CodeLine>
<Link id="l06575" /><CodeLine lineNumber="6575"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UsePartialNSA =</span></CodeLine>
<Link id="l06576" /><CodeLine lineNumber="6576"><span class="doxyHighlight">        UseNSA &amp;&amp; HasPartialNSA &amp;&amp; CorrectedNumVAddrs &gt; NSAMaxSize;</span></CodeLine>
<Link id="l06577" /><CodeLine lineNumber="6577"></CodeLine>
<Link id="l06578" /><CodeLine lineNumber="6578"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UsePartialNSA) &#123;</span></CodeLine>
<Link id="l06579" /><CodeLine lineNumber="6579"><span class="doxyHighlight">      <a href="#ad049a79d46df2c25561d90e9d80fb5e3">convertImageAddrToPacked</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l06580" /><CodeLine lineNumber="6580"><span class="doxyHighlight">                               ArgOffset + Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#af38eeafc61d19839d3beafae2395776b">VAddrStart</a> + NSAMaxSize - 1,</span></CodeLine>
<Link id="l06581" /><CodeLine lineNumber="6581"><span class="doxyHighlight">                               Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#a057d849feff860943f90a0e8e0012e93">NumVAddrs</a> - NSAMaxSize + 1);</span></CodeLine>
<Link id="l06582" /><CodeLine lineNumber="6582"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!UseNSA &amp;&amp; Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#a057d849feff860943f90a0e8e0012e93">NumVAddrs</a> &gt; 1) &#123;</span></CodeLine>
<Link id="l06583" /><CodeLine lineNumber="6583"><span class="doxyHighlight">      <a href="#ad049a79d46df2c25561d90e9d80fb5e3">convertImageAddrToPacked</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, ArgOffset + Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#af38eeafc61d19839d3beafae2395776b">VAddrStart</a>,</span></CodeLine>
<Link id="l06584" /><CodeLine lineNumber="6584"><span class="doxyHighlight">                               Intr-&gt;<a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo/#a057d849feff860943f90a0e8e0012e93">NumVAddrs</a>);</span></CodeLine>
<Link id="l06585" /><CodeLine lineNumber="6585"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06586" /><CodeLine lineNumber="6586"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06587" /><CodeLine lineNumber="6587"></CodeLine>
<Link id="l06588" /><CodeLine lineNumber="6588"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> Flags = 0;</span></CodeLine>
<Link id="l06589" /><CodeLine lineNumber="6589"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsA16)</span></CodeLine>
<Link id="l06590" /><CodeLine lineNumber="6590"><span class="doxyHighlight">    Flags |= 1;</span></CodeLine>
<Link id="l06591" /><CodeLine lineNumber="6591"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsG16)</span></CodeLine>
<Link id="l06592" /><CodeLine lineNumber="6592"><span class="doxyHighlight">    Flags |= 2;</span></CodeLine>
<Link id="l06593" /><CodeLine lineNumber="6593"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.addOperand(<a href="/docs/api/classes/llvm/machineoperand/#ab09679b541a6ba1219b3602569847364">MachineOperand::CreateImm</a>(Flags));</span></CodeLine>
<Link id="l06594" /><CodeLine lineNumber="6594"></CodeLine>
<Link id="l06595" /><CodeLine lineNumber="6595"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BaseOpcode-&gt;<a href="/docs/api/structs/llvm/amdgpu/mimgbaseopcodeinfo/#a5a48932ddd4bf7828d868c20e0cb14c6">NoReturn</a>) &#123; </span><span class="doxyHighlightComment">// No TFE for stores?</span></CodeLine>
<Link id="l06596" /><CodeLine lineNumber="6596"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Handle dmask trim</span></CodeLine>
<Link id="l06597" /><CodeLine lineNumber="6597"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!Ty.isVector() || !IsD16)</span></CodeLine>
<Link id="l06598" /><CodeLine lineNumber="6598"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06599" /><CodeLine lineNumber="6599"></CodeLine>
<Link id="l06600" /><CodeLine lineNumber="6600"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> RepackedReg = <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3dcd2bcf223daced673ed18e4ad47efa">handleD16VData</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, &#42;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, VData, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06601" /><CodeLine lineNumber="6601"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (RepackedReg != VData) &#123;</span></CodeLine>
<Link id="l06602" /><CodeLine lineNumber="6602"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).setReg(RepackedReg);</span></CodeLine>
<Link id="l06603" /><CodeLine lineNumber="6603"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06604" /><CodeLine lineNumber="6604"></CodeLine>
<Link id="l06605" /><CodeLine lineNumber="6605"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06606" /><CodeLine lineNumber="6606"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06607" /><CodeLine lineNumber="6607"></CodeLine>
<Link id="l06608" /><CodeLine lineNumber="6608"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DstReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l06609" /><CodeLine lineNumber="6609"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> EltTy = Ty.getScalarType();</span></CodeLine>
<Link id="l06610" /><CodeLine lineNumber="6610"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NumElts = Ty.isVector() ? Ty.getNumElements() : 1;</span></CodeLine>
<Link id="l06611" /><CodeLine lineNumber="6611"></CodeLine>
<Link id="l06612" /><CodeLine lineNumber="6612"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Confirm that the return type is large enough for the dmask specified</span></CodeLine>
<Link id="l06613" /><CodeLine lineNumber="6613"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumElts &lt; DMaskLanes)</span></CodeLine>
<Link id="l06614" /><CodeLine lineNumber="6614"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06615" /><CodeLine lineNumber="6615"></CodeLine>
<Link id="l06616" /><CodeLine lineNumber="6616"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumElts &gt; 4 || DMaskLanes &gt; 4)</span></CodeLine>
<Link id="l06617" /><CodeLine lineNumber="6617"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06618" /><CodeLine lineNumber="6618"></CodeLine>
<Link id="l06619" /><CodeLine lineNumber="6619"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Image atomic instructions are using DMask to specify how many bits</span></CodeLine>
<Link id="l06620" /><CodeLine lineNumber="6620"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// input/output data will have. 32-bits (s32, v2s16) or 64-bits (s64, v4s16).</span></CodeLine>
<Link id="l06621" /><CodeLine lineNumber="6621"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// DMaskLanes for image atomic has default value &#39;0&#39;.</span></CodeLine>
<Link id="l06622" /><CodeLine lineNumber="6622"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We must be sure that atomic variants (especially packed) will not be</span></CodeLine>
<Link id="l06623" /><CodeLine lineNumber="6623"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// truncated from v2s16 or v4s16 to s16 type.</span></CodeLine>
<Link id="l06624" /><CodeLine lineNumber="6624"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l06625" /><CodeLine lineNumber="6625"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// ChangeElementCount will be needed for image load where Ty is always scalar.</span></CodeLine>
<Link id="l06626" /><CodeLine lineNumber="6626"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> AdjustedNumElts = DMaskLanes == 0 ? 1 : DMaskLanes;</span></CodeLine>
<Link id="l06627" /><CodeLine lineNumber="6627"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> AdjustedTy =</span></CodeLine>
<Link id="l06628" /><CodeLine lineNumber="6628"><span class="doxyHighlight">      DMaskLanes == 0</span></CodeLine>
<Link id="l06629" /><CodeLine lineNumber="6629"><span class="doxyHighlight">          ? Ty</span></CodeLine>
<Link id="l06630" /><CodeLine lineNumber="6630"><span class="doxyHighlight">          : Ty.changeElementCount(<a href="/docs/api/classes/llvm/elementcount/#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(AdjustedNumElts));</span></CodeLine>
<Link id="l06631" /><CodeLine lineNumber="6631"></CodeLine>
<Link id="l06632" /><CodeLine lineNumber="6632"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The raw dword aligned data component of the load. The only legal cases</span></CodeLine>
<Link id="l06633" /><CodeLine lineNumber="6633"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// where this matters should be when using the packed D16 format, for</span></CodeLine>
<Link id="l06634" /><CodeLine lineNumber="6634"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// s16 -&gt; &lt;2 x s16&gt;, and &lt;3 x s16&gt; -&gt; &lt;4 x s16&gt;,</span></CodeLine>
<Link id="l06635" /><CodeLine lineNumber="6635"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> RoundedTy;</span></CodeLine>
<Link id="l06636" /><CodeLine lineNumber="6636"></CodeLine>
<Link id="l06637" /><CodeLine lineNumber="6637"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// S32 vector to cover all data, plus TFE result element.</span></CodeLine>
<Link id="l06638" /><CodeLine lineNumber="6638"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> TFETy;</span></CodeLine>
<Link id="l06639" /><CodeLine lineNumber="6639"></CodeLine>
<Link id="l06640" /><CodeLine lineNumber="6640"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Register type to use for each loaded component. Will be S32 or V2S16.</span></CodeLine>
<Link id="l06641" /><CodeLine lineNumber="6641"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> RegTy;</span></CodeLine>
<Link id="l06642" /><CodeLine lineNumber="6642"></CodeLine>
<Link id="l06643" /><CodeLine lineNumber="6643"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsD16 &amp;&amp; ST.hasUnpackedD16VMem()) &#123;</span></CodeLine>
<Link id="l06644" /><CodeLine lineNumber="6644"><span class="doxyHighlight">    RoundedTy =</span></CodeLine>
<Link id="l06645" /><CodeLine lineNumber="6645"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/llt/#ae74a60e5edcee0609a1e4fddc62a8a01">LLT::scalarOrVector</a>(<a href="/docs/api/classes/llvm/elementcount/#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(AdjustedNumElts), 32);</span></CodeLine>
<Link id="l06646" /><CodeLine lineNumber="6646"><span class="doxyHighlight">    TFETy = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(AdjustedNumElts + 1, 32);</span></CodeLine>
<Link id="l06647" /><CodeLine lineNumber="6647"><span class="doxyHighlight">    RegTy = <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>;</span></CodeLine>
<Link id="l06648" /><CodeLine lineNumber="6648"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06649" /><CodeLine lineNumber="6649"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> EltSize = EltTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</span></CodeLine>
<Link id="l06650" /><CodeLine lineNumber="6650"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> RoundedElts = (AdjustedTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() + 31) / 32;</span></CodeLine>
<Link id="l06651" /><CodeLine lineNumber="6651"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> RoundedSize = 32 &#42; RoundedElts;</span></CodeLine>
<Link id="l06652" /><CodeLine lineNumber="6652"><span class="doxyHighlight">    RoundedTy = <a href="/docs/api/classes/llvm/llt/#ae74a60e5edcee0609a1e4fddc62a8a01">LLT::scalarOrVector</a>(</span></CodeLine>
<Link id="l06653" /><CodeLine lineNumber="6653"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/elementcount/#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(RoundedSize / EltSize), EltSize);</span></CodeLine>
<Link id="l06654" /><CodeLine lineNumber="6654"><span class="doxyHighlight">    TFETy = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(RoundedSize / 32 + 1, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l06655" /><CodeLine lineNumber="6655"><span class="doxyHighlight">    RegTy = !IsTFE &amp;&amp; EltSize == 16 ? <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a> : <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>;</span></CodeLine>
<Link id="l06656" /><CodeLine lineNumber="6656"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06657" /><CodeLine lineNumber="6657"></CodeLine>
<Link id="l06658" /><CodeLine lineNumber="6658"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// The return type does not need adjustment.</span></CodeLine>
<Link id="l06659" /><CodeLine lineNumber="6659"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: Should we change s16 case to s32 or &lt;2 x s16&gt;?</span></CodeLine>
<Link id="l06660" /><CodeLine lineNumber="6660"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!IsTFE &amp;&amp; (RoundedTy == Ty || !Ty.isVector()))</span></CodeLine>
<Link id="l06661" /><CodeLine lineNumber="6661"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06662" /><CodeLine lineNumber="6662"></CodeLine>
<Link id="l06663" /><CodeLine lineNumber="6663"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst1Reg;</span></CodeLine>
<Link id="l06664" /><CodeLine lineNumber="6664"></CodeLine>
<Link id="l06665" /><CodeLine lineNumber="6665"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Insert after the instruction.</span></CodeLine>
<Link id="l06666" /><CodeLine lineNumber="6666"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.setInsertPt(&#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent(), ++<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getIterator());</span></CodeLine>
<Link id="l06667" /><CodeLine lineNumber="6667"></CodeLine>
<Link id="l06668" /><CodeLine lineNumber="6668"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// TODO: For TFE with d16, if we used a TFE type that was a multiple of &lt;2 x</span></CodeLine>
<Link id="l06669" /><CodeLine lineNumber="6669"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// s16&gt; instead of s32, we would only need 1 bitcast instead of multiple.</span></CodeLine>
<Link id="l06670" /><CodeLine lineNumber="6670"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> LoadResultTy = IsTFE ? TFETy : RoundedTy;</span></CodeLine>
<Link id="l06671" /><CodeLine lineNumber="6671"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> ResultNumRegs = LoadResultTy.<a href="/docs/api/classes/llvm/llt/#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() / 32;</span></CodeLine>
<Link id="l06672" /><CodeLine lineNumber="6672"></CodeLine>
<Link id="l06673" /><CodeLine lineNumber="6673"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> NewResultReg = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;createGenericVirtualRegister(LoadResultTy);</span></CodeLine>
<Link id="l06674" /><CodeLine lineNumber="6674"></CodeLine>
<Link id="l06675" /><CodeLine lineNumber="6675"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).setReg(NewResultReg);</span></CodeLine>
<Link id="l06676" /><CodeLine lineNumber="6676"></CodeLine>
<Link id="l06677" /><CodeLine lineNumber="6677"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// In the IR, TFE is supposed to be used with a 2 element struct return</span></CodeLine>
<Link id="l06678" /><CodeLine lineNumber="6678"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// type. The instruction really returns these two values in one contiguous</span></CodeLine>
<Link id="l06679" /><CodeLine lineNumber="6679"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// register, with one additional dword beyond the loaded data. Rewrite the</span></CodeLine>
<Link id="l06680" /><CodeLine lineNumber="6680"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// return type to use a single register result.</span></CodeLine>
<Link id="l06681" /><CodeLine lineNumber="6681"></CodeLine>
<Link id="l06682" /><CodeLine lineNumber="6682"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTFE) &#123;</span></CodeLine>
<Link id="l06683" /><CodeLine lineNumber="6683"><span class="doxyHighlight">    Dst1Reg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l06684" /><CodeLine lineNumber="6684"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;getType(Dst1Reg) != <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l06685" /><CodeLine lineNumber="6685"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06686" /><CodeLine lineNumber="6686"></CodeLine>
<Link id="l06687" /><CodeLine lineNumber="6687"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Make sure the TFE operand bit is set.</span></CodeLine>
<Link id="l06688" /><CodeLine lineNumber="6688"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.removeOperand(1);</span></CodeLine>
<Link id="l06689" /><CodeLine lineNumber="6689"></CodeLine>
<Link id="l06690" /><CodeLine lineNumber="6690"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Handle the easy case that requires no repack instructions.</span></CodeLine>
<Link id="l06691" /><CodeLine lineNumber="6691"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>) &#123;</span></CodeLine>
<Link id="l06692" /><CodeLine lineNumber="6692"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(&#123;DstReg, Dst1Reg&#125;, NewResultReg);</span></CodeLine>
<Link id="l06693" /><CodeLine lineNumber="6693"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06694" /><CodeLine lineNumber="6694"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06695" /><CodeLine lineNumber="6695"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06696" /><CodeLine lineNumber="6696"></CodeLine>
<Link id="l06697" /><CodeLine lineNumber="6697"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Now figure out how to copy the new result register back into the old</span></CodeLine>
<Link id="l06698" /><CodeLine lineNumber="6698"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// result.</span></CodeLine>
<Link id="l06699" /><CodeLine lineNumber="6699"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Register, 5&gt;</a> ResultRegs(ResultNumRegs, Dst1Reg);</span></CodeLine>
<Link id="l06700" /><CodeLine lineNumber="6700"></CodeLine>
<Link id="l06701" /><CodeLine lineNumber="6701"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NumDataRegs = IsTFE ? ResultNumRegs - 1  : ResultNumRegs;</span></CodeLine>
<Link id="l06702" /><CodeLine lineNumber="6702"></CodeLine>
<Link id="l06703" /><CodeLine lineNumber="6703"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ResultNumRegs == 1) &#123;</span></CodeLine>
<Link id="l06704" /><CodeLine lineNumber="6704"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!IsTFE);</span></CodeLine>
<Link id="l06705" /><CodeLine lineNumber="6705"><span class="doxyHighlight">    ResultRegs&#91;0&#93; = NewResultReg;</span></CodeLine>
<Link id="l06706" /><CodeLine lineNumber="6706"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06707" /><CodeLine lineNumber="6707"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// We have to repack into a new vector of some kind.</span></CodeLine>
<Link id="l06708" /><CodeLine lineNumber="6708"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumDataRegs; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</span></CodeLine>
<Link id="l06709" /><CodeLine lineNumber="6709"><span class="doxyHighlight">      ResultRegs&#91;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>&#93; = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;createGenericVirtualRegister(RegTy);</span></CodeLine>
<Link id="l06710" /><CodeLine lineNumber="6710"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(ResultRegs, NewResultReg);</span></CodeLine>
<Link id="l06711" /><CodeLine lineNumber="6711"></CodeLine>
<Link id="l06712" /><CodeLine lineNumber="6712"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Drop the final TFE element to get the data part. The TFE result is</span></CodeLine>
<Link id="l06713" /><CodeLine lineNumber="6713"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// directly written to the right place already.</span></CodeLine>
<Link id="l06714" /><CodeLine lineNumber="6714"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTFE)</span></CodeLine>
<Link id="l06715" /><CodeLine lineNumber="6715"><span class="doxyHighlight">      ResultRegs.<a href="/docs/api/classes/llvm/smallvectorimpl/#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(NumDataRegs);</span></CodeLine>
<Link id="l06716" /><CodeLine lineNumber="6716"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06717" /><CodeLine lineNumber="6717"></CodeLine>
<Link id="l06718" /><CodeLine lineNumber="6718"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For an s16 scalar result, we form an s32 result with a truncate regardless</span></CodeLine>
<Link id="l06719" /><CodeLine lineNumber="6719"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// of packed vs. unpacked.</span></CodeLine>
<Link id="l06720" /><CodeLine lineNumber="6720"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsD16 &amp;&amp; !Ty.isVector()) &#123;</span></CodeLine>
<Link id="l06721" /><CodeLine lineNumber="6721"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildTrunc(DstReg, ResultRegs&#91;0&#93;);</span></CodeLine>
<Link id="l06722" /><CodeLine lineNumber="6722"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06723" /><CodeLine lineNumber="6723"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06724" /><CodeLine lineNumber="6724"></CodeLine>
<Link id="l06725" /><CodeLine lineNumber="6725"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Avoid a build/concat&#95;vector of 1 entry.</span></CodeLine>
<Link id="l06726" /><CodeLine lineNumber="6726"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a> &amp;&amp; NumDataRegs == 1 &amp;&amp; !ST.hasUnpackedD16VMem()) &#123;</span></CodeLine>
<Link id="l06727" /><CodeLine lineNumber="6727"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBitcast(DstReg, ResultRegs&#91;0&#93;);</span></CodeLine>
<Link id="l06728" /><CodeLine lineNumber="6728"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06729" /><CodeLine lineNumber="6729"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06730" /><CodeLine lineNumber="6730"></CodeLine>
<Link id="l06731" /><CodeLine lineNumber="6731"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty.isVector());</span></CodeLine>
<Link id="l06732" /><CodeLine lineNumber="6732"></CodeLine>
<Link id="l06733" /><CodeLine lineNumber="6733"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsD16) &#123;</span></CodeLine>
<Link id="l06734" /><CodeLine lineNumber="6734"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// For packed D16 results with TFE enabled, all the data components are</span></CodeLine>
<Link id="l06735" /><CodeLine lineNumber="6735"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// S32. Cast back to the expected type.</span></CodeLine>
<Link id="l06736" /><CodeLine lineNumber="6736"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">//</span></CodeLine>
<Link id="l06737" /><CodeLine lineNumber="6737"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: We don&#39;t really need to use load s32 elements. We would only need one</span></CodeLine>
<Link id="l06738" /><CodeLine lineNumber="6738"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// cast for the TFE result if a multiple of v2s16 was used.</span></CodeLine>
<Link id="l06739" /><CodeLine lineNumber="6739"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (RegTy != <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a> &amp;&amp; !ST.hasUnpackedD16VMem()) &#123;</span></CodeLine>
<Link id="l06740" /><CodeLine lineNumber="6740"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/register">Register</a> &amp;Reg : ResultRegs)</span></CodeLine>
<Link id="l06741" /><CodeLine lineNumber="6741"><span class="doxyHighlight">        Reg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBitcast(<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, Reg).getReg(0);</span></CodeLine>
<Link id="l06742" /><CodeLine lineNumber="6742"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasUnpackedD16VMem()) &#123;</span></CodeLine>
<Link id="l06743" /><CodeLine lineNumber="6743"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/register">Register</a> &amp;Reg : ResultRegs)</span></CodeLine>
<Link id="l06744" /><CodeLine lineNumber="6744"><span class="doxyHighlight">        Reg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildTrunc(<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, Reg).getReg(0);</span></CodeLine>
<Link id="l06745" /><CodeLine lineNumber="6745"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06746" /><CodeLine lineNumber="6746"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06747" /><CodeLine lineNumber="6747"></CodeLine>
<Link id="l06748" /><CodeLine lineNumber="6748"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> padWithUndef = &#91;&amp;&#93;(<a href="/docs/api/classes/llvm/llt">LLT</a> Ty, </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> NumElts) &#123;</span></CodeLine>
<Link id="l06749" /><CodeLine lineNumber="6749"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (NumElts == 0)</span></CodeLine>
<Link id="l06750" /><CodeLine lineNumber="6750"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06751" /><CodeLine lineNumber="6751"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> Undef = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUndef(Ty).getReg(0);</span></CodeLine>
<Link id="l06752" /><CodeLine lineNumber="6752"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumElts; ++<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</span></CodeLine>
<Link id="l06753" /><CodeLine lineNumber="6753"><span class="doxyHighlight">      ResultRegs.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Undef);</span></CodeLine>
<Link id="l06754" /><CodeLine lineNumber="6754"><span class="doxyHighlight">  &#125;;</span></CodeLine>
<Link id="l06755" /><CodeLine lineNumber="6755"></CodeLine>
<Link id="l06756" /><CodeLine lineNumber="6756"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Pad out any elements eliminated due to the dmask.</span></CodeLine>
<Link id="l06757" /><CodeLine lineNumber="6757"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> ResTy = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;getType(ResultRegs&#91;0&#93;);</span></CodeLine>
<Link id="l06758" /><CodeLine lineNumber="6758"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ResTy.<a href="/docs/api/classes/llvm/llt/#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) &#123;</span></CodeLine>
<Link id="l06759" /><CodeLine lineNumber="6759"><span class="doxyHighlight">    padWithUndef(ResTy, NumElts - ResultRegs.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>());</span></CodeLine>
<Link id="l06760" /><CodeLine lineNumber="6760"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBuildVector(DstReg, ResultRegs);</span></CodeLine>
<Link id="l06761" /><CodeLine lineNumber="6761"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06762" /><CodeLine lineNumber="6762"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06763" /><CodeLine lineNumber="6763"></CodeLine>
<Link id="l06764" /><CodeLine lineNumber="6764"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!ST.hasUnpackedD16VMem() &amp;&amp; ResTy == <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>);</span></CodeLine>
<Link id="l06765" /><CodeLine lineNumber="6765"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> RegsToCover = (Ty.getSizeInBits() + 31) / 32;</span></CodeLine>
<Link id="l06766" /><CodeLine lineNumber="6766"></CodeLine>
<Link id="l06767" /><CodeLine lineNumber="6767"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Deal with the one annoying legal case.</span></CodeLine>
<Link id="l06768" /><CodeLine lineNumber="6768"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> V3S16 = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(3, 16);</span></CodeLine>
<Link id="l06769" /><CodeLine lineNumber="6769"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty == V3S16) &#123;</span></CodeLine>
<Link id="l06770" /><CodeLine lineNumber="6770"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsTFE) &#123;</span></CodeLine>
<Link id="l06771" /><CodeLine lineNumber="6771"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ResultRegs.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 1) &#123;</span></CodeLine>
<Link id="l06772" /><CodeLine lineNumber="6772"><span class="doxyHighlight">        NewResultReg = ResultRegs&#91;0&#93;;</span></CodeLine>
<Link id="l06773" /><CodeLine lineNumber="6773"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ResultRegs.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() == 2) &#123;</span></CodeLine>
<Link id="l06774" /><CodeLine lineNumber="6774"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a52e4f67b333637f707e6fe59057c7348">V4S16</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(4, 16);</span></CodeLine>
<Link id="l06775" /><CodeLine lineNumber="6775"><span class="doxyHighlight">        NewResultReg = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConcatVectors(<a href="#a52e4f67b333637f707e6fe59057c7348">V4S16</a>, ResultRegs).getReg(0);</span></CodeLine>
<Link id="l06776" /><CodeLine lineNumber="6776"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06777" /><CodeLine lineNumber="6777"><span class="doxyHighlight">        </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06778" /><CodeLine lineNumber="6778"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l06779" /><CodeLine lineNumber="6779"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06780" /><CodeLine lineNumber="6780"></CodeLine>
<Link id="l06781" /><CodeLine lineNumber="6781"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;getType(DstReg).getNumElements() &lt;</span></CodeLine>
<Link id="l06782" /><CodeLine lineNumber="6782"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;getType(NewResultReg).getNumElements()) &#123;</span></CodeLine>
<Link id="l06783" /><CodeLine lineNumber="6783"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildDeleteTrailingVectorElements(DstReg, NewResultReg);</span></CodeLine>
<Link id="l06784" /><CodeLine lineNumber="6784"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06785" /><CodeLine lineNumber="6785"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildPadVectorWithUndefElements(DstReg, NewResultReg);</span></CodeLine>
<Link id="l06786" /><CodeLine lineNumber="6786"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l06787" /><CodeLine lineNumber="6787"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06788" /><CodeLine lineNumber="6788"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06789" /><CodeLine lineNumber="6789"></CodeLine>
<Link id="l06790" /><CodeLine lineNumber="6790"><span class="doxyHighlight">  padWithUndef(ResTy, RegsToCover - ResultRegs.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>());</span></CodeLine>
<Link id="l06791" /><CodeLine lineNumber="6791"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConcatVectors(DstReg, ResultRegs);</span></CodeLine>
<Link id="l06792" /><CodeLine lineNumber="6792"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06793" /><CodeLine lineNumber="6793"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l06794" /><CodeLine lineNumber="6794"></CodeLine>
<Link id="l06795" /><CodeLine lineNumber="6795" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae0d1532576a7c6e3bda2d8966700d27a"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae0d1532576a7c6e3bda2d8966700d27a">AMDGPULegalizerInfo::legalizeSBufferLoad</a>(<a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> &amp;Helper,</span></CodeLine>
<Link id="l06796" /><CodeLine lineNumber="6796"><span class="doxyHighlight">                                              <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l06797" /><CodeLine lineNumber="6797"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</span></CodeLine>
<Link id="l06798" /><CodeLine lineNumber="6798"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/giselchangeobserver">GISelChangeObserver</a> &amp;Observer = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>;</span></CodeLine>
<Link id="l06799" /><CodeLine lineNumber="6799"></CodeLine>
<Link id="l06800" /><CodeLine lineNumber="6800"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> OrigDst = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l06801" /><CodeLine lineNumber="6801"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Dst;</span></CodeLine>
<Link id="l06802" /><CodeLine lineNumber="6802"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> Ty = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;getType(OrigDst);</span></CodeLine>
<Link id="l06803" /><CodeLine lineNumber="6803"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = Ty.getSizeInBits();</span></CodeLine>
<Link id="l06804" /><CodeLine lineNumber="6804"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF();</span></CodeLine>
<Link id="l06805" /><CodeLine lineNumber="6805"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> Opc = 0;</span></CodeLine>
<Link id="l06806" /><CodeLine lineNumber="6806"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> &lt; 32 &amp;&amp; ST.hasScalarSubwordLoads()) &#123;</span></CodeLine>
<Link id="l06807" /><CodeLine lineNumber="6807"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> == 8 || <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> == 16);</span></CodeLine>
<Link id="l06808" /><CodeLine lineNumber="6808"><span class="doxyHighlight">    Opc = <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> == 8 ? AMDGPU::G&#95;AMDGPU&#95;S&#95;BUFFER&#95;LOAD&#95;UBYTE</span></CodeLine>
<Link id="l06809" /><CodeLine lineNumber="6809"><span class="doxyHighlight">                    : AMDGPU::G&#95;AMDGPU&#95;S&#95;BUFFER&#95;LOAD&#95;USHORT;</span></CodeLine>
<Link id="l06810" /><CodeLine lineNumber="6810"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// The 8-bit and 16-bit scalar buffer load instructions have 32-bit</span></CodeLine>
<Link id="l06811" /><CodeLine lineNumber="6811"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// destination register.</span></CodeLine>
<Link id="l06812" /><CodeLine lineNumber="6812"><span class="doxyHighlight">    Dst = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI()-&gt;createGenericVirtualRegister(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32));</span></CodeLine>
<Link id="l06813" /><CodeLine lineNumber="6813"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l06814" /><CodeLine lineNumber="6814"><span class="doxyHighlight">    Opc = AMDGPU::G&#95;AMDGPU&#95;S&#95;BUFFER&#95;LOAD;</span></CodeLine>
<Link id="l06815" /><CodeLine lineNumber="6815"><span class="doxyHighlight">    Dst = OrigDst;</span></CodeLine>
<Link id="l06816" /><CodeLine lineNumber="6816"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06817" /><CodeLine lineNumber="6817"></CodeLine>
<Link id="l06818" /><CodeLine lineNumber="6818"><span class="doxyHighlight">  Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l06819" /><CodeLine lineNumber="6819"></CodeLine>
<Link id="l06820" /><CodeLine lineNumber="6820"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Handle needing to s.buffer.load() a p8 value.</span></CodeLine>
<Link id="l06821" /><CodeLine lineNumber="6821"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#abb71b9eb64250d4491336cf106be74eb">hasBufferRsrcWorkaround</a>(Ty)) &#123;</span></CodeLine>
<Link id="l06822" /><CodeLine lineNumber="6822"><span class="doxyHighlight">    Ty = <a href="#a78249707a06ea5161d8c6bbb442ea46c">castBufferRsrcFromV4I32</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI(), 0);</span></CodeLine>
<Link id="l06823" /><CodeLine lineNumber="6823"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.setInsertPt(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMBB(), <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l06824" /><CodeLine lineNumber="6824"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06825" /><CodeLine lineNumber="6825"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="#a1c42298ffb49a95c87577d3e5de46aea">shouldBitcastLoadStoreType</a>(ST, Ty, <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>))) &#123;</span></CodeLine>
<Link id="l06826" /><CodeLine lineNumber="6826"><span class="doxyHighlight">    Ty = <a href="#a639711ef50cb300db9e9ade1445ccf07">getBitcastRegisterType</a>(Ty);</span></CodeLine>
<Link id="l06827" /><CodeLine lineNumber="6827"><span class="doxyHighlight">    Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aaa02ab5ab2c50cce96f4fec73c8186c3">bitcastDst</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Ty, 0);</span></CodeLine>
<Link id="l06828" /><CodeLine lineNumber="6828"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.setInsertPt(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMBB(), <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l06829" /><CodeLine lineNumber="6829"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06830" /><CodeLine lineNumber="6830"></CodeLine>
<Link id="l06831" /><CodeLine lineNumber="6831"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: We don&#39;t really need this intermediate instruction. The intrinsic</span></CodeLine>
<Link id="l06832" /><CodeLine lineNumber="6832"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// should be fixed to have a memory operand. Since it&#39;s readnone, we&#39;re not</span></CodeLine>
<Link id="l06833" /><CodeLine lineNumber="6833"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// allowed to add one.</span></CodeLine>
<Link id="l06834" /><CodeLine lineNumber="6834"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getTII().get(Opc));</span></CodeLine>
<Link id="l06835" /><CodeLine lineNumber="6835"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.removeOperand(1); </span><span class="doxyHighlightComment">// Remove intrinsic ID</span></CodeLine>
<Link id="l06836" /><CodeLine lineNumber="6836"></CodeLine>
<Link id="l06837" /><CodeLine lineNumber="6837"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// FIXME: When intrinsic definition is fixed, this should have an MMO already.</span></CodeLine>
<Link id="l06838" /><CodeLine lineNumber="6838"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> MemSize = (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> + 7) / 8;</span></CodeLine>
<Link id="l06839" /><CodeLine lineNumber="6839"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/align">Align</a> MemAlign = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getDataLayout().getABITypeAlign(</span></CodeLine>
<Link id="l06840" /><CodeLine lineNumber="6840"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/#a0a0911ef4a610d70c5104c1932fec0e1">getTypeForLLT</a>(Ty, MF.<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>().<a href="/docs/api/classes/llvm/function/#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>()));</span></CodeLine>
<Link id="l06841" /><CodeLine lineNumber="6841"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinememoperand">MachineMemOperand</a> &#42;MMO = MF.<a href="/docs/api/classes/llvm/machinefunction/#a453ae3052b4f5b14cb4c184243ce5027">getMachineMemOperand</a>(</span></CodeLine>
<Link id="l06842" /><CodeLine lineNumber="6842"><span class="doxyHighlight">      <a href="/docs/api/structs/llvm/machinepointerinfo">MachinePointerInfo</a>(),</span></CodeLine>
<Link id="l06843" /><CodeLine lineNumber="6843"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a> | <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2dda7b999a936bc7a4d45dfadbe356e77b3f">MachineMemOperand::MODereferenceable</a> |</span></CodeLine>
<Link id="l06844" /><CodeLine lineNumber="6844"><span class="doxyHighlight">          <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2ddac63dd9c4fe69bfeaac7a363fda846ac6">MachineMemOperand::MOInvariant</a>,</span></CodeLine>
<Link id="l06845" /><CodeLine lineNumber="6845"><span class="doxyHighlight">      MemSize, MemAlign);</span></CodeLine>
<Link id="l06846" /><CodeLine lineNumber="6846"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.addMemOperand(MF, MMO);</span></CodeLine>
<Link id="l06847" /><CodeLine lineNumber="6847"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Dst != OrigDst) &#123;</span></CodeLine>
<Link id="l06848" /><CodeLine lineNumber="6848"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).setReg(Dst);</span></CodeLine>
<Link id="l06849" /><CodeLine lineNumber="6849"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.setInsertPt(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMBB(), ++<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getInsertPt());</span></CodeLine>
<Link id="l06850" /><CodeLine lineNumber="6850"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildTrunc(OrigDst, Dst);</span></CodeLine>
<Link id="l06851" /><CodeLine lineNumber="6851"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06852" /><CodeLine lineNumber="6852"></CodeLine>
<Link id="l06853" /><CodeLine lineNumber="6853"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// If we don&#39;t have 96-bit result scalar loads, widening to 128-bit should</span></CodeLine>
<Link id="l06854" /><CodeLine lineNumber="6854"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// always be legal. We may need to restore this to a 96-bit result if it turns</span></CodeLine>
<Link id="l06855" /><CodeLine lineNumber="6855"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// out this needs to be converted to a vector load during RegBankSelect.</span></CodeLine>
<Link id="l06856" /><CodeLine lineNumber="6856"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>) &amp;&amp; (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> != 96 || !ST.hasScalarDwordx3Loads())) &#123;</span></CodeLine>
<Link id="l06857" /><CodeLine lineNumber="6857"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Ty.isVector())</span></CodeLine>
<Link id="l06858" /><CodeLine lineNumber="6858"><span class="doxyHighlight">      Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#a25a4c14864c6f574bc99e19e15a8b4d2">moreElementsVectorDst</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="#ae6dc00935578ac3d7b43326b5f02b2bc">getPow2VectorType</a>(Ty), 0);</span></CodeLine>
<Link id="l06859" /><CodeLine lineNumber="6859"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l06860" /><CodeLine lineNumber="6860"><span class="doxyHighlight">      Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="#ae9bc1717e31ed947b2eae89a230c744b">getPow2ScalarType</a>(Ty), 0);</span></CodeLine>
<Link id="l06861" /><CodeLine lineNumber="6861"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06862" /><CodeLine lineNumber="6862"></CodeLine>
<Link id="l06863" /><CodeLine lineNumber="6863"><span class="doxyHighlight">  Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l06864" /><CodeLine lineNumber="6864"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06865" /><CodeLine lineNumber="6865"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l06866" /><CodeLine lineNumber="6866"></CodeLine>
<Link id="l06867" /><CodeLine lineNumber="6867" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a51ac04efbaa3282a12478341fa0a7b9a"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a51ac04efbaa3282a12478341fa0a7b9a">AMDGPULegalizerInfo::legalizeSBufferPrefetch</a>(<a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> &amp;Helper,</span></CodeLine>
<Link id="l06868" /><CodeLine lineNumber="6868"><span class="doxyHighlight">                                                  <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l06869" /><CodeLine lineNumber="6869"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</span></CodeLine>
<Link id="l06870" /><CodeLine lineNumber="6870"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/giselchangeobserver">GISelChangeObserver</a> &amp;Observer = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>;</span></CodeLine>
<Link id="l06871" /><CodeLine lineNumber="6871"><span class="doxyHighlight">  Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l06872" /><CodeLine lineNumber="6872"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getTII().get(AMDGPU::G&#95;AMDGPU&#95;S&#95;BUFFER&#95;PREFETCH));</span></CodeLine>
<Link id="l06873" /><CodeLine lineNumber="6873"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.removeOperand(0); </span><span class="doxyHighlightComment">// Remove intrinsic ID</span></CodeLine>
<Link id="l06874" /><CodeLine lineNumber="6874"><span class="doxyHighlight">  <a href="#a9d84441ae7638d9c27873f5a3810cb88">castBufferRsrcArgToV4I32</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, 0);</span></CodeLine>
<Link id="l06875" /><CodeLine lineNumber="6875"><span class="doxyHighlight">  Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l06876" /><CodeLine lineNumber="6876"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06877" /><CodeLine lineNumber="6877"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l06878" /><CodeLine lineNumber="6878"></CodeLine>
<Link id="l06879" /><CodeLine lineNumber="6879"><span class="doxyHighlightComment">// TODO: Move to selection</span></CodeLine>
<Link id="l06880" /><CodeLine lineNumber="6880" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3c976423cd385375b51359be8283fb8e"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3c976423cd385375b51359be8283fb8e">AMDGPULegalizerInfo::legalizeTrap</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l06881" /><CodeLine lineNumber="6881"><span class="doxyHighlight">                                       <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l06882" /><CodeLine lineNumber="6882"><span class="doxyHighlight">                                       <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l06883" /><CodeLine lineNumber="6883"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ST.isTrapHandlerEnabled() ||</span></CodeLine>
<Link id="l06884" /><CodeLine lineNumber="6884"><span class="doxyHighlight">      ST.getTrapHandlerAbi() != <a href="/docs/api/classes/llvm/gcnsubtarget/#a347289a8e670a14bc5c60464df2f445caf778ffa73665e8e41448bf12f1350f02">GCNSubtarget::TrapHandlerAbi::AMDHSA</a>)</span></CodeLine>
<Link id="l06885" /><CodeLine lineNumber="6885"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#aff7dfc9d1d4355acbd741d76ce27fca1">legalizeTrapEndpgm</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l06886" /><CodeLine lineNumber="6886"></CodeLine>
<Link id="l06887" /><CodeLine lineNumber="6887"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> ST.supportsGetDoorbellID() ?</span></CodeLine>
<Link id="l06888" /><CodeLine lineNumber="6888"><span class="doxyHighlight">         <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a22adf879f91d77dee4214883f1b94a07">legalizeTrapHsa</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>) : <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#af9de933caeeaebd4387c7c62f02a3bbd">legalizeTrapHsaQueuePtr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l06889" /><CodeLine lineNumber="6889"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l06890" /><CodeLine lineNumber="6890"></CodeLine>
<Link id="l06891" /><CodeLine lineNumber="6891" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#aff7dfc9d1d4355acbd741d76ce27fca1"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#aff7dfc9d1d4355acbd741d76ce27fca1">AMDGPULegalizerInfo::legalizeTrapEndpgm</a>(</span></CodeLine>
<Link id="l06892" /><CodeLine lineNumber="6892"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l06893" /><CodeLine lineNumber="6893"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/debugloc">DebugLoc</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDebugLoc();</span></CodeLine>
<Link id="l06894" /><CodeLine lineNumber="6894"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &amp;BB = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMBB();</span></CodeLine>
<Link id="l06895" /><CodeLine lineNumber="6895"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &#42;MF = BB.<a href="/docs/api/classes/llvm/machinebasicblock/#acf6442108e21e7e5379feb8962de65b7">getParent</a>();</span></CodeLine>
<Link id="l06896" /><CodeLine lineNumber="6896"></CodeLine>
<Link id="l06897" /><CodeLine lineNumber="6897"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (BB.<a href="/docs/api/classes/llvm/machinebasicblock/#aa8d1d8d88835b75b05b14ab774785e8a">succ&#95;empty</a>() &amp;&amp; std::next(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getIterator()) == BB.<a href="/docs/api/classes/llvm/machinebasicblock/#acbc921830578e2741be6549db716c0ce">end</a>()) &#123;</span></CodeLine>
<Link id="l06898" /><CodeLine lineNumber="6898"><span class="doxyHighlight">    <a href="/docs/api/namespaces/llvm/#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(BB, BB.<a href="/docs/api/classes/llvm/machinebasicblock/#acbc921830578e2741be6549db716c0ce">end</a>(), <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getTII().get(AMDGPU::S&#95;ENDPGM))</span></CodeLine>
<Link id="l06899" /><CodeLine lineNumber="6899"><span class="doxyHighlight">      .<a href="/docs/api/classes/llvm/machineinstrbuilder/#a6c1f959947905135c7dd215b64957654">addImm</a>(0);</span></CodeLine>
<Link id="l06900" /><CodeLine lineNumber="6900"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l06901" /><CodeLine lineNumber="6901"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06902" /><CodeLine lineNumber="6902"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06903" /><CodeLine lineNumber="6903"></CodeLine>
<Link id="l06904" /><CodeLine lineNumber="6904"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We need a block split to make the real endpgm a terminator. We also don&#39;t</span></CodeLine>
<Link id="l06905" /><CodeLine lineNumber="6905"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// want to break phis in successor blocks, so we can&#39;t just delete to the</span></CodeLine>
<Link id="l06906" /><CodeLine lineNumber="6906"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// end of the block.</span></CodeLine>
<Link id="l06907" /><CodeLine lineNumber="6907"><span class="doxyHighlight">  BB.<a href="/docs/api/classes/llvm/machinebasicblock/#ac0bfa894f538166cb476b439a2cb0aea">splitAt</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight"> </span><span class="doxyHighlightComment">/&#42;UpdateLiveIns&#42;/</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l06908" /><CodeLine lineNumber="6908"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;TrapBB = MF-&gt;<a href="/docs/api/classes/llvm/machinefunction/#adfc62ee16549afaac5bde30156ddc989">CreateMachineBasicBlock</a>();</span></CodeLine>
<Link id="l06909" /><CodeLine lineNumber="6909"><span class="doxyHighlight">  MF-&gt;<a href="/docs/api/classes/llvm/machinefunction/#a70b0525ecc6022336feb019ff63c934c">push&#95;back</a>(TrapBB);</span></CodeLine>
<Link id="l06910" /><CodeLine lineNumber="6910"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(&#42;TrapBB, TrapBB-&gt;<a href="/docs/api/classes/llvm/machinebasicblock/#acbc921830578e2741be6549db716c0ce">end</a>(), <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getTII().get(AMDGPU::S&#95;ENDPGM))</span></CodeLine>
<Link id="l06911" /><CodeLine lineNumber="6911"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/machineinstrbuilder/#a6c1f959947905135c7dd215b64957654">addImm</a>(0);</span></CodeLine>
<Link id="l06912" /><CodeLine lineNumber="6912"><span class="doxyHighlight">  <a href="/docs/api/namespaces/llvm/#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(BB, &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getTII().get(AMDGPU::S&#95;CBRANCH&#95;EXECNZ))</span></CodeLine>
<Link id="l06913" /><CodeLine lineNumber="6913"><span class="doxyHighlight">    .<a href="/docs/api/classes/llvm/machineinstrbuilder/#abf1febf2a98f588146548a3a485d3838">addMBB</a>(TrapBB);</span></CodeLine>
<Link id="l06914" /><CodeLine lineNumber="6914"></CodeLine>
<Link id="l06915" /><CodeLine lineNumber="6915"><span class="doxyHighlight">  BB.<a href="/docs/api/classes/llvm/machinebasicblock/#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(TrapBB);</span></CodeLine>
<Link id="l06916" /><CodeLine lineNumber="6916"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l06917" /><CodeLine lineNumber="6917"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06918" /><CodeLine lineNumber="6918"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l06919" /><CodeLine lineNumber="6919"></CodeLine>
<Link id="l06920" /><CodeLine lineNumber="6920" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#af9de933caeeaebd4387c7c62f02a3bbd"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#af9de933caeeaebd4387c7c62f02a3bbd">AMDGPULegalizerInfo::legalizeTrapHsaQueuePtr</a>(</span></CodeLine>
<Link id="l06921" /><CodeLine lineNumber="6921"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l06922" /><CodeLine lineNumber="6922"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machinefunction">MachineFunction</a> &amp;MF = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF();</span></CodeLine>
<Link id="l06923" /><CodeLine lineNumber="6923"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</span></CodeLine>
<Link id="l06924" /><CodeLine lineNumber="6924"></CodeLine>
<Link id="l06925" /><CodeLine lineNumber="6925"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> SGPR01(AMDGPU::SGPR0&#95;SGPR1);</span></CodeLine>
<Link id="l06926" /><CodeLine lineNumber="6926"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// For code object version 5, queue&#95;ptr is passed through implicit kernarg.</span></CodeLine>
<Link id="l06927" /><CodeLine lineNumber="6927"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/namespaces/llvm/amdgpu/#a5f9a0bcc6ecfeef7109258c6a8012978">AMDGPU::getAMDHSACodeObjectVersion</a>(&#42;MF.<a href="/docs/api/classes/llvm/machinefunction/#a977ddce262de45c645be23d951066351">getFunction</a>().<a href="/docs/api/classes/llvm/globalvalue/#a739b30c811f1eece61b05320ddf44e5b">getParent</a>()) &gt;=</span></CodeLine>
<Link id="l06928" /><CodeLine lineNumber="6928"><span class="doxyHighlight">      <a href="/docs/api/namespaces/llvm/amdgpu/#a30475b065bebd7bc81d1112d9067d772abd2438b14a6a1a27fae653284aaa3cb4">AMDGPU::AMDHSA&#95;COV5</a>) &#123;</span></CodeLine>
<Link id="l06929" /><CodeLine lineNumber="6929"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/amdgputargetlowering/#aabb66ae6636b6dbd45c1b66dd9353821">AMDGPUTargetLowering::ImplicitParameter</a> Param =</span></CodeLine>
<Link id="l06930" /><CodeLine lineNumber="6930"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/amdgputargetlowering/#aabb66ae6636b6dbd45c1b66dd9353821aa0198e1c8a37613471dfc9d64c02beed">AMDGPUTargetLowering::QUEUE&#95;PTR</a>;</span></CodeLine>
<Link id="l06931" /><CodeLine lineNumber="6931"><span class="doxyHighlight">    uint64&#95;t <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> =</span></CodeLine>
<Link id="l06932" /><CodeLine lineNumber="6932"><span class="doxyHighlight">        ST.getTargetLowering()-&gt;getImplicitParameterOffset(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF(), Param);</span></CodeLine>
<Link id="l06933" /><CodeLine lineNumber="6933"></CodeLine>
<Link id="l06934" /><CodeLine lineNumber="6934"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> KernargPtrReg = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(</span></CodeLine>
<Link id="l06935" /><CodeLine lineNumber="6935"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/llt/#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT&#95;ADDRESS</a>, 64));</span></CodeLine>
<Link id="l06936" /><CodeLine lineNumber="6936"></CodeLine>
<Link id="l06937" /><CodeLine lineNumber="6937"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(KernargPtrReg, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l06938" /><CodeLine lineNumber="6938"><span class="doxyHighlight">                        <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98baf32f3fd30ae548866dc7e45092dd90b9">AMDGPUFunctionArgInfo::KERNARG&#95;SEGMENT&#95;PTR</a>))</span></CodeLine>
<Link id="l06939" /><CodeLine lineNumber="6939"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06940" /><CodeLine lineNumber="6940"></CodeLine>
<Link id="l06941" /><CodeLine lineNumber="6941"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: can we be smarter about machine pointer info?</span></CodeLine>
<Link id="l06942" /><CodeLine lineNumber="6942"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/machinepointerinfo">MachinePointerInfo</a> PtrInfo(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT&#95;ADDRESS</a>);</span></CodeLine>
<Link id="l06943" /><CodeLine lineNumber="6943"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinememoperand">MachineMemOperand</a> &#42;MMO = MF.<a href="/docs/api/classes/llvm/machinefunction/#a453ae3052b4f5b14cb4c184243ce5027">getMachineMemOperand</a>(</span></CodeLine>
<Link id="l06944" /><CodeLine lineNumber="6944"><span class="doxyHighlight">        PtrInfo,</span></CodeLine>
<Link id="l06945" /><CodeLine lineNumber="6945"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a> | <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2dda7b999a936bc7a4d45dfadbe356e77b3f">MachineMemOperand::MODereferenceable</a> |</span></CodeLine>
<Link id="l06946" /><CodeLine lineNumber="6946"><span class="doxyHighlight">            <a href="/docs/api/classes/llvm/machinememoperand/#aaa2020e47e35179234b9ea27d555b2ddac63dd9c4fe69bfeaac7a363fda846ac6">MachineMemOperand::MOInvariant</a>,</span></CodeLine>
<Link id="l06947" /><CodeLine lineNumber="6947"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64), <a href="/docs/api/namespaces/llvm/#acd6aa057934751aaac54e5c18bcc18eb">commonAlignment</a>(<a href="/docs/api/structs/llvm/align">Align</a>(64), <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>));</span></CodeLine>
<Link id="l06948" /><CodeLine lineNumber="6948"></CodeLine>
<Link id="l06949" /><CodeLine lineNumber="6949"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Pointer address</span></CodeLine>
<Link id="l06950" /><CodeLine lineNumber="6950"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> LoadAddr = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(</span></CodeLine>
<Link id="l06951" /><CodeLine lineNumber="6951"><span class="doxyHighlight">        <a href="/docs/api/classes/llvm/llt/#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT&#95;ADDRESS</a>, 64));</span></CodeLine>
<Link id="l06952" /><CodeLine lineNumber="6952"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildPtrAdd(LoadAddr, KernargPtrReg,</span></CodeLine>
<Link id="l06953" /><CodeLine lineNumber="6953"><span class="doxyHighlight">                  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64), <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>).getReg(0));</span></CodeLine>
<Link id="l06954" /><CodeLine lineNumber="6954"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Load address</span></CodeLine>
<Link id="l06955" /><CodeLine lineNumber="6955"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> Temp = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildLoad(<a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>, LoadAddr, &#42;MMO).getReg(0);</span></CodeLine>
<Link id="l06956" /><CodeLine lineNumber="6956"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildCopy(SGPR01, Temp);</span></CodeLine>
<Link id="l06957" /><CodeLine lineNumber="6957"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::S&#95;TRAP)</span></CodeLine>
<Link id="l06958" /><CodeLine lineNumber="6958"><span class="doxyHighlight">        .addImm(</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(<a href="/docs/api/classes/llvm/gcnsubtarget/#a80e7aa469ce27c761eef3c645e55ed88a47de73eb7c73a07ac2cfc17fc3533f33">GCNSubtarget::TrapID::LLVMAMDHSATrap</a>))</span></CodeLine>
<Link id="l06959" /><CodeLine lineNumber="6959"><span class="doxyHighlight">        .addReg(SGPR01, <a href="/docs/api/namespaces/llvm/regstate/#ade26fe5c9b3fe6948def36f7ca12dfc5a0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a>);</span></CodeLine>
<Link id="l06960" /><CodeLine lineNumber="6960"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l06961" /><CodeLine lineNumber="6961"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06962" /><CodeLine lineNumber="6962"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06963" /><CodeLine lineNumber="6963"></CodeLine>
<Link id="l06964" /><CodeLine lineNumber="6964"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Pass queue pointer to trap handler as input, and insert trap instruction</span></CodeLine>
<Link id="l06965" /><CodeLine lineNumber="6965"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Reference: https://llvm.org/docs/AMDGPUUsage.html#trap-handler-abi</span></CodeLine>
<Link id="l06966" /><CodeLine lineNumber="6966"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> LiveIn =</span></CodeLine>
<Link id="l06967" /><CodeLine lineNumber="6967"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(<a href="/docs/api/classes/llvm/llt/#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT&#95;ADDRESS</a>, 64));</span></CodeLine>
<Link id="l06968" /><CodeLine lineNumber="6968"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(LiveIn, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98ba32b5333e2f708d7eeb05c12e415b8fd4">AMDGPUFunctionArgInfo::QUEUE&#95;PTR</a>))</span></CodeLine>
<Link id="l06969" /><CodeLine lineNumber="6969"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06970" /><CodeLine lineNumber="6970"></CodeLine>
<Link id="l06971" /><CodeLine lineNumber="6971"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildCopy(SGPR01, LiveIn);</span></CodeLine>
<Link id="l06972" /><CodeLine lineNumber="6972"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::S&#95;TRAP)</span></CodeLine>
<Link id="l06973" /><CodeLine lineNumber="6973"><span class="doxyHighlight">      .addImm(</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(<a href="/docs/api/classes/llvm/gcnsubtarget/#a80e7aa469ce27c761eef3c645e55ed88a47de73eb7c73a07ac2cfc17fc3533f33">GCNSubtarget::TrapID::LLVMAMDHSATrap</a>))</span></CodeLine>
<Link id="l06974" /><CodeLine lineNumber="6974"><span class="doxyHighlight">      .addReg(SGPR01, <a href="/docs/api/namespaces/llvm/regstate/#ade26fe5c9b3fe6948def36f7ca12dfc5a0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a>);</span></CodeLine>
<Link id="l06975" /><CodeLine lineNumber="6975"></CodeLine>
<Link id="l06976" /><CodeLine lineNumber="6976"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l06977" /><CodeLine lineNumber="6977"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06978" /><CodeLine lineNumber="6978"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l06979" /><CodeLine lineNumber="6979"></CodeLine>
<Link id="l06980" /><CodeLine lineNumber="6980" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a22adf879f91d77dee4214883f1b94a07"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a22adf879f91d77dee4214883f1b94a07">AMDGPULegalizerInfo::legalizeTrapHsa</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l06981" /><CodeLine lineNumber="6981"><span class="doxyHighlight">                                          <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l06982" /><CodeLine lineNumber="6982"><span class="doxyHighlight">                                          <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l06983" /><CodeLine lineNumber="6983"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// We need to simulate the &#39;s&#95;trap 2&#39; instruction on targets that run in</span></CodeLine>
<Link id="l06984" /><CodeLine lineNumber="6984"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// PRIV=1 (where it is treated as a nop).</span></CodeLine>
<Link id="l06985" /><CodeLine lineNumber="6985"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (ST.hasPrivEnabledTrap2NopBug()) &#123;</span></CodeLine>
<Link id="l06986" /><CodeLine lineNumber="6986"><span class="doxyHighlight">    ST.getInstrInfo()-&gt;insertSimulatedTrap(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMBB(), <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l06987" /><CodeLine lineNumber="6987"><span class="doxyHighlight">                                           <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDebugLoc());</span></CodeLine>
<Link id="l06988" /><CodeLine lineNumber="6988"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l06989" /><CodeLine lineNumber="6989"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06990" /><CodeLine lineNumber="6990"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l06991" /><CodeLine lineNumber="6991"></CodeLine>
<Link id="l06992" /><CodeLine lineNumber="6992"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::S&#95;TRAP)</span></CodeLine>
<Link id="l06993" /><CodeLine lineNumber="6993"><span class="doxyHighlight">      .addImm(</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(<a href="/docs/api/classes/llvm/gcnsubtarget/#a80e7aa469ce27c761eef3c645e55ed88a47de73eb7c73a07ac2cfc17fc3533f33">GCNSubtarget::TrapID::LLVMAMDHSATrap</a>));</span></CodeLine>
<Link id="l06994" /><CodeLine lineNumber="6994"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l06995" /><CodeLine lineNumber="6995"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l06996" /><CodeLine lineNumber="6996"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l06997" /><CodeLine lineNumber="6997"></CodeLine>
<Link id="l06998" /><CodeLine lineNumber="6998" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a9fdc052c69668e632b94697f82350488"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a9fdc052c69668e632b94697f82350488">AMDGPULegalizerInfo::legalizeDebugTrap</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l06999" /><CodeLine lineNumber="6999"><span class="doxyHighlight">                                            <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l07000" /><CodeLine lineNumber="7000"><span class="doxyHighlight">                                            <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l07001" /><CodeLine lineNumber="7001"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Is non-HSA path or trap-handler disabled? Then, report a warning</span></CodeLine>
<Link id="l07002" /><CodeLine lineNumber="7002"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// accordingly</span></CodeLine>
<Link id="l07003" /><CodeLine lineNumber="7003"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ST.isTrapHandlerEnabled() ||</span></CodeLine>
<Link id="l07004" /><CodeLine lineNumber="7004"><span class="doxyHighlight">      ST.getTrapHandlerAbi() != <a href="/docs/api/classes/llvm/gcnsubtarget/#a347289a8e670a14bc5c60464df2f445caf778ffa73665e8e41448bf12f1350f02">GCNSubtarget::TrapHandlerAbi::AMDHSA</a>) &#123;</span></CodeLine>
<Link id="l07005" /><CodeLine lineNumber="7005"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/diagnosticinfounsupported">DiagnosticInfoUnsupported</a> NoTrap(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF().getFunction(),</span></CodeLine>
<Link id="l07006" /><CodeLine lineNumber="7006"><span class="doxyHighlight">                                     </span><span class="doxyHighlightStringLiteral">&quot;debugtrap handler not supported&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l07007" /><CodeLine lineNumber="7007"><span class="doxyHighlight">                                     <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDebugLoc(), <a href="/docs/api/namespaces/llvm/#abfcab32516704f11d146c757f402ad5ca1cde8c8828756cdaf2a93260e247ae31">DS&#95;Warning</a>);</span></CodeLine>
<Link id="l07008" /><CodeLine lineNumber="7008"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llvmcontext">LLVMContext</a> &amp;Ctx = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF().getFunction().getContext();</span></CodeLine>
<Link id="l07009" /><CodeLine lineNumber="7009"><span class="doxyHighlight">    Ctx.diagnose(NoTrap);</span></CodeLine>
<Link id="l07010" /><CodeLine lineNumber="7010"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l07011" /><CodeLine lineNumber="7011"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Insert debug-trap instruction</span></CodeLine>
<Link id="l07012" /><CodeLine lineNumber="7012"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::S&#95;TRAP)</span></CodeLine>
<Link id="l07013" /><CodeLine lineNumber="7013"><span class="doxyHighlight">        .addImm(</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(<a href="/docs/api/classes/llvm/gcnsubtarget/#a80e7aa469ce27c761eef3c645e55ed88a094657b2a471074638cef694d53f50d8">GCNSubtarget::TrapID::LLVMAMDHSADebugTrap</a>));</span></CodeLine>
<Link id="l07014" /><CodeLine lineNumber="7014"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l07015" /><CodeLine lineNumber="7015"></CodeLine>
<Link id="l07016" /><CodeLine lineNumber="7016"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l07017" /><CodeLine lineNumber="7017"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07018" /><CodeLine lineNumber="7018"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l07019" /><CodeLine lineNumber="7019"></CodeLine>
<Link id="l07020" /><CodeLine lineNumber="7020" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a94974538095721fcce4cf479555bc25c"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a94974538095721fcce4cf479555bc25c">AMDGPULegalizerInfo::legalizeBVHIntrinsic</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l07021" /><CodeLine lineNumber="7021"><span class="doxyHighlight">                                               <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l07022" /><CodeLine lineNumber="7022"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI();</span></CodeLine>
<Link id="l07023" /><CodeLine lineNumber="7023"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</span></CodeLine>
<Link id="l07024" /><CodeLine lineNumber="7024"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l07025" /><CodeLine lineNumber="7025"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(2, 16);</span></CodeLine>
<Link id="l07026" /><CodeLine lineNumber="7026"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a257279ea49c58180217364b89917c6c3">V3S32</a> = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(3, 32);</span></CodeLine>
<Link id="l07027" /><CodeLine lineNumber="7027"></CodeLine>
<Link id="l07028" /><CodeLine lineNumber="7028"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DstReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l07029" /><CodeLine lineNumber="7029"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> NodePtr = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l07030" /><CodeLine lineNumber="7030"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> RayExtent = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</span></CodeLine>
<Link id="l07031" /><CodeLine lineNumber="7031"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> RayOrigin = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getReg();</span></CodeLine>
<Link id="l07032" /><CodeLine lineNumber="7032"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> RayDir = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5).getReg();</span></CodeLine>
<Link id="l07033" /><CodeLine lineNumber="7033"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> RayInvDir = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(6).getReg();</span></CodeLine>
<Link id="l07034" /><CodeLine lineNumber="7034"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> TDescr = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(7).getReg();</span></CodeLine>
<Link id="l07035" /><CodeLine lineNumber="7035"></CodeLine>
<Link id="l07036" /><CodeLine lineNumber="7036"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ST.hasGFX10&#95;AEncoding()) &#123;</span></CodeLine>
<Link id="l07037" /><CodeLine lineNumber="7037"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/diagnosticinfounsupported">DiagnosticInfoUnsupported</a> BadIntrin(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF().getFunction(),</span></CodeLine>
<Link id="l07038" /><CodeLine lineNumber="7038"><span class="doxyHighlight">                                        </span><span class="doxyHighlightStringLiteral">&quot;intrinsic not supported on subtarget&quot;</span><span class="doxyHighlight">,</span></CodeLine>
<Link id="l07039" /><CodeLine lineNumber="7039"><span class="doxyHighlight">                                        <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDebugLoc());</span></CodeLine>
<Link id="l07040" /><CodeLine lineNumber="7040"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF().getFunction().getContext().diagnose(BadIntrin);</span></CodeLine>
<Link id="l07041" /><CodeLine lineNumber="7041"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07042" /><CodeLine lineNumber="7042"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l07043" /><CodeLine lineNumber="7043"></CodeLine>
<Link id="l07044" /><CodeLine lineNumber="7044"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsGFX11 = <a href="/docs/api/namespaces/llvm/amdgpu/#a3d6f72ac6639b51b7a8a54368ad6332e">AMDGPU::isGFX11</a>(ST);</span></CodeLine>
<Link id="l07045" /><CodeLine lineNumber="7045"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsGFX11Plus = <a href="/docs/api/namespaces/llvm/amdgpu/#aa5f3cd2ec6af3adbc143654720b1214b">AMDGPU::isGFX11Plus</a>(ST);</span></CodeLine>
<Link id="l07046" /><CodeLine lineNumber="7046"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsGFX12Plus = <a href="/docs/api/namespaces/llvm/amdgpu/#a318d59d6a50364a460b64bb7ad1f17d0">AMDGPU::isGFX12Plus</a>(ST);</span></CodeLine>
<Link id="l07047" /><CodeLine lineNumber="7047"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> IsA16 = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(RayDir).getElementType().getSizeInBits() == 16;</span></CodeLine>
<Link id="l07048" /><CodeLine lineNumber="7048"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Is64 = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(NodePtr).getSizeInBits() == 64;</span></CodeLine>
<Link id="l07049" /><CodeLine lineNumber="7049"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumVDataDwords = 4;</span></CodeLine>
<Link id="l07050" /><CodeLine lineNumber="7050"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumVAddrDwords = IsA16 ? (Is64 ? 9 : 8) : (Is64 ? 12 : 11);</span></CodeLine>
<Link id="l07051" /><CodeLine lineNumber="7051"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> NumVAddrs = IsGFX11Plus ? (IsA16 ? 4 : 5) : NumVAddrDwords;</span></CodeLine>
<Link id="l07052" /><CodeLine lineNumber="7052"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> UseNSA =</span></CodeLine>
<Link id="l07053" /><CodeLine lineNumber="7053"><span class="doxyHighlight">      IsGFX12Plus || (ST.hasNSAEncoding() &amp;&amp; NumVAddrs &lt;= ST.getNSAMaxSize());</span></CodeLine>
<Link id="l07054" /><CodeLine lineNumber="7054"></CodeLine>
<Link id="l07055" /><CodeLine lineNumber="7055"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> BaseOpcodes&#91;2&#93;&#91;2&#93; = &#123;</span></CodeLine>
<Link id="l07056" /><CodeLine lineNumber="7056"><span class="doxyHighlight">      &#123;AMDGPU::IMAGE&#95;BVH&#95;INTERSECT&#95;RAY, AMDGPU::IMAGE&#95;BVH&#95;INTERSECT&#95;RAY&#95;a16&#125;,</span></CodeLine>
<Link id="l07057" /><CodeLine lineNumber="7057"><span class="doxyHighlight">      &#123;AMDGPU::IMAGE&#95;BVH64&#95;INTERSECT&#95;RAY,</span></CodeLine>
<Link id="l07058" /><CodeLine lineNumber="7058"><span class="doxyHighlight">       AMDGPU::IMAGE&#95;BVH64&#95;INTERSECT&#95;RAY&#95;a16&#125;&#125;;</span></CodeLine>
<Link id="l07059" /><CodeLine lineNumber="7059"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordType">int</span><span class="doxyHighlight"> Opcode;</span></CodeLine>
<Link id="l07060" /><CodeLine lineNumber="7060"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UseNSA) &#123;</span></CodeLine>
<Link id="l07061" /><CodeLine lineNumber="7061"><span class="doxyHighlight">    Opcode = <a href="/docs/api/namespaces/llvm/amdgpu/#a176f799037e98f7743008924c4b72266">AMDGPU::getMIMGOpcode</a>(BaseOpcodes&#91;Is64&#93;&#91;IsA16&#93;,</span></CodeLine>
<Link id="l07062" /><CodeLine lineNumber="7062"><span class="doxyHighlight">                                   IsGFX12Plus ? AMDGPU::MIMGEncGfx12</span></CodeLine>
<Link id="l07063" /><CodeLine lineNumber="7063"><span class="doxyHighlight">                                   : IsGFX11   ? AMDGPU::MIMGEncGfx11NSA</span></CodeLine>
<Link id="l07064" /><CodeLine lineNumber="7064"><span class="doxyHighlight">                                               : AMDGPU::MIMGEncGfx10NSA,</span></CodeLine>
<Link id="l07065" /><CodeLine lineNumber="7065"><span class="doxyHighlight">                                   NumVDataDwords, NumVAddrDwords);</span></CodeLine>
<Link id="l07066" /><CodeLine lineNumber="7066"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l07067" /><CodeLine lineNumber="7067"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!IsGFX12Plus);</span></CodeLine>
<Link id="l07068" /><CodeLine lineNumber="7068"><span class="doxyHighlight">    Opcode = <a href="/docs/api/namespaces/llvm/amdgpu/#a176f799037e98f7743008924c4b72266">AMDGPU::getMIMGOpcode</a>(BaseOpcodes&#91;Is64&#93;&#91;IsA16&#93;,</span></CodeLine>
<Link id="l07069" /><CodeLine lineNumber="7069"><span class="doxyHighlight">                                   IsGFX11 ? AMDGPU::MIMGEncGfx11Default</span></CodeLine>
<Link id="l07070" /><CodeLine lineNumber="7070"><span class="doxyHighlight">                                           : AMDGPU::MIMGEncGfx10Default,</span></CodeLine>
<Link id="l07071" /><CodeLine lineNumber="7071"><span class="doxyHighlight">                                   NumVDataDwords, NumVAddrDwords);</span></CodeLine>
<Link id="l07072" /><CodeLine lineNumber="7072"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l07073" /><CodeLine lineNumber="7073"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Opcode != -1);</span></CodeLine>
<Link id="l07074" /><CodeLine lineNumber="7074"></CodeLine>
<Link id="l07075" /><CodeLine lineNumber="7075"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Register, 12&gt;</a> <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>;</span></CodeLine>
<Link id="l07076" /><CodeLine lineNumber="7076"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (UseNSA &amp;&amp; IsGFX11Plus) &#123;</span></CodeLine>
<Link id="l07077" /><CodeLine lineNumber="7077"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> packLanes = &#91;&amp;<a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>, &amp;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, &amp;<a href="#a257279ea49c58180217364b89917c6c3">V3S32</a>, &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>&#93;(<a href="/docs/api/classes/llvm/register">Register</a> Src) &#123;</span></CodeLine>
<Link id="l07078" /><CodeLine lineNumber="7078"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, Src);</span></CodeLine>
<Link id="l07079" /><CodeLine lineNumber="7079"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Merged = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(</span></CodeLine>
<Link id="l07080" /><CodeLine lineNumber="7080"><span class="doxyHighlight">          <a href="#a257279ea49c58180217364b89917c6c3">V3S32</a>, &#123;Unmerge.getReg(0), Unmerge.getReg(1), Unmerge.getReg(2)&#125;);</span></CodeLine>
<Link id="l07081" /><CodeLine lineNumber="7081"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(Merged.getReg(0));</span></CodeLine>
<Link id="l07082" /><CodeLine lineNumber="7082"><span class="doxyHighlight">    &#125;;</span></CodeLine>
<Link id="l07083" /><CodeLine lineNumber="7083"></CodeLine>
<Link id="l07084" /><CodeLine lineNumber="7084"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(NodePtr);</span></CodeLine>
<Link id="l07085" /><CodeLine lineNumber="7085"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(RayExtent);</span></CodeLine>
<Link id="l07086" /><CodeLine lineNumber="7086"><span class="doxyHighlight">    packLanes(RayOrigin);</span></CodeLine>
<Link id="l07087" /><CodeLine lineNumber="7087"></CodeLine>
<Link id="l07088" /><CodeLine lineNumber="7088"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsA16) &#123;</span></CodeLine>
<Link id="l07089" /><CodeLine lineNumber="7089"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> UnmergeRayDir = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;, RayDir);</span></CodeLine>
<Link id="l07090" /><CodeLine lineNumber="7090"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> UnmergeRayInvDir = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;, RayInvDir);</span></CodeLine>
<Link id="l07091" /><CodeLine lineNumber="7091"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MergedDir = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(</span></CodeLine>
<Link id="l07092" /><CodeLine lineNumber="7092"><span class="doxyHighlight">          <a href="#a257279ea49c58180217364b89917c6c3">V3S32</a>,</span></CodeLine>
<Link id="l07093" /><CodeLine lineNumber="7093"><span class="doxyHighlight">          &#123;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBitcast(</span></CodeLine>
<Link id="l07094" /><CodeLine lineNumber="7094"><span class="doxyHighlight">                <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, &#123;UnmergeRayInvDir.getReg(0),</span></CodeLine>
<Link id="l07095" /><CodeLine lineNumber="7095"><span class="doxyHighlight">                                                   UnmergeRayDir.getReg(0)&#125;))</span></CodeLine>
<Link id="l07096" /><CodeLine lineNumber="7096"><span class="doxyHighlight">               .getReg(0),</span></CodeLine>
<Link id="l07097" /><CodeLine lineNumber="7097"><span class="doxyHighlight">           <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBitcast(</span></CodeLine>
<Link id="l07098" /><CodeLine lineNumber="7098"><span class="doxyHighlight">                <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, &#123;UnmergeRayInvDir.getReg(1),</span></CodeLine>
<Link id="l07099" /><CodeLine lineNumber="7099"><span class="doxyHighlight">                                                   UnmergeRayDir.getReg(1)&#125;))</span></CodeLine>
<Link id="l07100" /><CodeLine lineNumber="7100"><span class="doxyHighlight">               .getReg(0),</span></CodeLine>
<Link id="l07101" /><CodeLine lineNumber="7101"><span class="doxyHighlight">           <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBitcast(</span></CodeLine>
<Link id="l07102" /><CodeLine lineNumber="7102"><span class="doxyHighlight">                <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(<a href="#a1a23ce3b10dc058d258a405a87e06a1a">V2S16</a>, &#123;UnmergeRayInvDir.getReg(2),</span></CodeLine>
<Link id="l07103" /><CodeLine lineNumber="7103"><span class="doxyHighlight">                                                   UnmergeRayDir.getReg(2)&#125;))</span></CodeLine>
<Link id="l07104" /><CodeLine lineNumber="7104"><span class="doxyHighlight">               .getReg(0)&#125;);</span></CodeLine>
<Link id="l07105" /><CodeLine lineNumber="7105"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(MergedDir.getReg(0));</span></CodeLine>
<Link id="l07106" /><CodeLine lineNumber="7106"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l07107" /><CodeLine lineNumber="7107"><span class="doxyHighlight">      packLanes(RayDir);</span></CodeLine>
<Link id="l07108" /><CodeLine lineNumber="7108"><span class="doxyHighlight">      packLanes(RayInvDir);</span></CodeLine>
<Link id="l07109" /><CodeLine lineNumber="7109"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l07110" /><CodeLine lineNumber="7110"><span class="doxyHighlight">  &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l07111" /><CodeLine lineNumber="7111"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Is64) &#123;</span></CodeLine>
<Link id="l07112" /><CodeLine lineNumber="7112"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, NodePtr);</span></CodeLine>
<Link id="l07113" /><CodeLine lineNumber="7113"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(Unmerge.getReg(0));</span></CodeLine>
<Link id="l07114" /><CodeLine lineNumber="7114"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(Unmerge.getReg(1));</span></CodeLine>
<Link id="l07115" /><CodeLine lineNumber="7115"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l07116" /><CodeLine lineNumber="7116"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(NodePtr);</span></CodeLine>
<Link id="l07117" /><CodeLine lineNumber="7117"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l07118" /><CodeLine lineNumber="7118"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(RayExtent);</span></CodeLine>
<Link id="l07119" /><CodeLine lineNumber="7119"></CodeLine>
<Link id="l07120" /><CodeLine lineNumber="7120"><span class="doxyHighlight">    </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> packLanes = &#91;&amp;<a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>, &amp;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>&#93;(<a href="/docs/api/classes/llvm/register">Register</a> Src) &#123;</span></CodeLine>
<Link id="l07121" /><CodeLine lineNumber="7121"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, Src);</span></CodeLine>
<Link id="l07122" /><CodeLine lineNumber="7122"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(Unmerge.getReg(0));</span></CodeLine>
<Link id="l07123" /><CodeLine lineNumber="7123"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(Unmerge.getReg(1));</span></CodeLine>
<Link id="l07124" /><CodeLine lineNumber="7124"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(Unmerge.getReg(2));</span></CodeLine>
<Link id="l07125" /><CodeLine lineNumber="7125"><span class="doxyHighlight">    &#125;;</span></CodeLine>
<Link id="l07126" /><CodeLine lineNumber="7126"></CodeLine>
<Link id="l07127" /><CodeLine lineNumber="7127"><span class="doxyHighlight">    packLanes(RayOrigin);</span></CodeLine>
<Link id="l07128" /><CodeLine lineNumber="7128"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IsA16) &#123;</span></CodeLine>
<Link id="l07129" /><CodeLine lineNumber="7129"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> UnmergeRayDir = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;, RayDir);</span></CodeLine>
<Link id="l07130" /><CodeLine lineNumber="7130"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> UnmergeRayInvDir = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(&#123;<a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>, <a href="#acd57bd926bf1c8815e21e1291a54d151">S16</a>&#125;, RayInvDir);</span></CodeLine>
<Link id="l07131" /><CodeLine lineNumber="7131"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/register">Register</a> R1 = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l07132" /><CodeLine lineNumber="7132"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/files/include/include/llvm/include/llvm/support/mathextras-h/#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a> = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l07133" /><CodeLine lineNumber="7133"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/register">Register</a> R3 = <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.createGenericVirtualRegister(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>);</span></CodeLine>
<Link id="l07134" /><CodeLine lineNumber="7134"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(R1,</span></CodeLine>
<Link id="l07135" /><CodeLine lineNumber="7135"><span class="doxyHighlight">                            &#123;UnmergeRayDir.getReg(0), UnmergeRayDir.getReg(1)&#125;);</span></CodeLine>
<Link id="l07136" /><CodeLine lineNumber="7136"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(</span></CodeLine>
<Link id="l07137" /><CodeLine lineNumber="7137"><span class="doxyHighlight">          <a href="/docs/api/files/include/include/llvm/include/llvm/support/mathextras-h/#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>, &#123;UnmergeRayDir.getReg(2), UnmergeRayInvDir.getReg(0)&#125;);</span></CodeLine>
<Link id="l07138" /><CodeLine lineNumber="7138"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(</span></CodeLine>
<Link id="l07139" /><CodeLine lineNumber="7139"><span class="doxyHighlight">          R3, &#123;UnmergeRayInvDir.getReg(1), UnmergeRayInvDir.getReg(2)&#125;);</span></CodeLine>
<Link id="l07140" /><CodeLine lineNumber="7140"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(R1);</span></CodeLine>
<Link id="l07141" /><CodeLine lineNumber="7141"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(<a href="/docs/api/files/include/include/llvm/include/llvm/support/mathextras-h/#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>);</span></CodeLine>
<Link id="l07142" /><CodeLine lineNumber="7142"><span class="doxyHighlight">      <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(R3);</span></CodeLine>
<Link id="l07143" /><CodeLine lineNumber="7143"><span class="doxyHighlight">    &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l07144" /><CodeLine lineNumber="7144"><span class="doxyHighlight">      packLanes(RayDir);</span></CodeLine>
<Link id="l07145" /><CodeLine lineNumber="7145"><span class="doxyHighlight">      packLanes(RayInvDir);</span></CodeLine>
<Link id="l07146" /><CodeLine lineNumber="7146"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l07147" /><CodeLine lineNumber="7147"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l07148" /><CodeLine lineNumber="7148"></CodeLine>
<Link id="l07149" /><CodeLine lineNumber="7149"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!UseNSA) &#123;</span></CodeLine>
<Link id="l07150" /><CodeLine lineNumber="7150"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// Build a single vector containing all the operands so far prepared.</span></CodeLine>
<Link id="l07151" /><CodeLine lineNumber="7151"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> OpTy = <a href="/docs/api/classes/llvm/llt/#acd1eca3232b7b3072543294cd2377a37">LLT::fixed&#95;vector</a>(<a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.size(), 32);</span></CodeLine>
<Link id="l07152" /><CodeLine lineNumber="7152"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> MergedOps = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(OpTy, <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>).getReg(0);</span></CodeLine>
<Link id="l07153" /><CodeLine lineNumber="7153"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.clear();</span></CodeLine>
<Link id="l07154" /><CodeLine lineNumber="7154"><span class="doxyHighlight">    <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>.push&#95;back(MergedOps);</span></CodeLine>
<Link id="l07155" /><CodeLine lineNumber="7155"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l07156" /><CodeLine lineNumber="7156"></CodeLine>
<Link id="l07157" /><CodeLine lineNumber="7157"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> MIB = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::G&#95;AMDGPU&#95;INTRIN&#95;BVH&#95;INTERSECT&#95;RAY)</span></CodeLine>
<Link id="l07158" /><CodeLine lineNumber="7158"><span class="doxyHighlight">    .addDef(DstReg)</span></CodeLine>
<Link id="l07159" /><CodeLine lineNumber="7159"><span class="doxyHighlight">    .addImm(Opcode);</span></CodeLine>
<Link id="l07160" /><CodeLine lineNumber="7160"></CodeLine>
<Link id="l07161" /><CodeLine lineNumber="7161"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">for</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/register">Register</a> R : <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a926d7ce2143863b7a2afda0fca4d2b65">Ops</a>) &#123;</span></CodeLine>
<Link id="l07162" /><CodeLine lineNumber="7162"><span class="doxyHighlight">    MIB.addUse(R);</span></CodeLine>
<Link id="l07163" /><CodeLine lineNumber="7163"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l07164" /><CodeLine lineNumber="7164"></CodeLine>
<Link id="l07165" /><CodeLine lineNumber="7165"><span class="doxyHighlight">  MIB.addUse(TDescr)</span></CodeLine>
<Link id="l07166" /><CodeLine lineNumber="7166"><span class="doxyHighlight">     .addImm(IsA16 ? 1 : 0)</span></CodeLine>
<Link id="l07167" /><CodeLine lineNumber="7167"><span class="doxyHighlight">     .cloneMemRefs(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l07168" /><CodeLine lineNumber="7168"></CodeLine>
<Link id="l07169" /><CodeLine lineNumber="7169"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l07170" /><CodeLine lineNumber="7170"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07171" /><CodeLine lineNumber="7171"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l07172" /><CodeLine lineNumber="7172"></CodeLine>
<Link id="l07173" /><CodeLine lineNumber="7173" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#ac790f46abd06eb86bf3f84a46584b964"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ac790f46abd06eb86bf3f84a46584b964">AMDGPULegalizerInfo::legalizeStackSave</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l07174" /><CodeLine lineNumber="7174"><span class="doxyHighlight">                                            <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l07175" /><CodeLine lineNumber="7175"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/sitargetlowering">SITargetLowering</a> &#42;TLI = ST.getTargetLowering();</span></CodeLine>
<Link id="l07176" /><CodeLine lineNumber="7176"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> StackPtr = TLI-&gt;<a href="/docs/api/classes/llvm/targetloweringbase/#a5de0162fac7c57cab62e5bb81f0b5542">getStackPointerRegisterToSaveRestore</a>();</span></CodeLine>
<Link id="l07177" /><CodeLine lineNumber="7177"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DstReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l07178" /><CodeLine lineNumber="7178"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::G&#95;AMDGPU&#95;WAVE&#95;ADDRESS, &#123;DstReg&#125;, &#123;StackPtr&#125;);</span></CodeLine>
<Link id="l07179" /><CodeLine lineNumber="7179"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l07180" /><CodeLine lineNumber="7180"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07181" /><CodeLine lineNumber="7181"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l07182" /><CodeLine lineNumber="7182"></CodeLine>
<Link id="l07183" /><CodeLine lineNumber="7183" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#ab0873d6f5bfe8490b5ef6be3a84dd805"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ab0873d6f5bfe8490b5ef6be3a84dd805">AMDGPULegalizerInfo::legalizeWaveID</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l07184" /><CodeLine lineNumber="7184"><span class="doxyHighlight">                                         <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l07185" /><CodeLine lineNumber="7185"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// With architected SGPRs, waveIDinGroup is in TTMP8&#91;29:25&#93;.</span></CodeLine>
<Link id="l07186" /><CodeLine lineNumber="7186"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!ST.hasArchitectedSGPRs())</span></CodeLine>
<Link id="l07187" /><CodeLine lineNumber="7187"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07188" /><CodeLine lineNumber="7188"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l07189" /><CodeLine lineNumber="7189"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> DstReg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l07190" /><CodeLine lineNumber="7190"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> TTMP8 = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildCopy(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="/docs/api/files/lib/lib/transforms/lib/transforms/utils/mem2reg-cpp/#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a>(AMDGPU::TTMP8));</span></CodeLine>
<Link id="l07191" /><CodeLine lineNumber="7191"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> LSB = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 25);</span></CodeLine>
<Link id="l07192" /><CodeLine lineNumber="7192"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Width = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, 5);</span></CodeLine>
<Link id="l07193" /><CodeLine lineNumber="7193"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUbfx(DstReg, TTMP8, LSB, Width);</span></CodeLine>
<Link id="l07194" /><CodeLine lineNumber="7194"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l07195" /><CodeLine lineNumber="7195"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07196" /><CodeLine lineNumber="7196"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l07197" /><CodeLine lineNumber="7197"></CodeLine>
<Link id="l07198" /><CodeLine lineNumber="7198" lineLink="#a1fff431f58bc2af2caae5f611ba0791f"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">constexpr</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="#a1fff431f58bc2af2caae5f611ba0791f">FPEnvModeBitField</a> =</span></CodeLine>
<Link id="l07199" /><CodeLine lineNumber="7199"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/amdgpu/encodingfields/#a03c632ab947ee3f16c67594f7e010ef5">AMDGPU::Hwreg::HwregEncoding::encode</a>(<a href="/docs/api/namespaces/llvm/amdgpu/hwreg/#a018924463515df5f66f3c5a039750da8aebfc48ed48afe18e84417d0de513b6bb">AMDGPU::Hwreg::ID&#95;MODE</a>, 0, 23);</span></CodeLine>
<Link id="l07200" /><CodeLine lineNumber="7200"></CodeLine>
<Link id="l07201" /><CodeLine lineNumber="7201" lineLink="#aa0516ba249c5d556a3ee34bfd27737f3"><span class="doxyHighlightKeyword">static</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">constexpr</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeywordType">unsigned</span><span class="doxyHighlight"> <a href="#aa0516ba249c5d556a3ee34bfd27737f3">FPEnvTrapBitField</a> =</span></CodeLine>
<Link id="l07202" /><CodeLine lineNumber="7202"><span class="doxyHighlight">    <a href="/docs/api/structs/llvm/amdgpu/encodingfields/#a03c632ab947ee3f16c67594f7e010ef5">AMDGPU::Hwreg::HwregEncoding::encode</a>(<a href="/docs/api/namespaces/llvm/amdgpu/hwreg/#a018924463515df5f66f3c5a039750da8a12601e1f7c9c510e01f7a019d3d249b9">AMDGPU::Hwreg::ID&#95;TRAPSTS</a>, 0, 5);</span></CodeLine>
<Link id="l07203" /><CodeLine lineNumber="7203"></CodeLine>
<Link id="l07204" /><CodeLine lineNumber="7204" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#ad6a43ba94ff9ee58996abe2df50464a3"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ad6a43ba94ff9ee58996abe2df50464a3">AMDGPULegalizerInfo::legalizeGetFPEnv</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l07205" /><CodeLine lineNumber="7205"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l07206" /><CodeLine lineNumber="7206"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l07207" /><CodeLine lineNumber="7207"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l07208" /><CodeLine lineNumber="7208"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Src) != <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l07209" /><CodeLine lineNumber="7209"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07210" /><CodeLine lineNumber="7210"></CodeLine>
<Link id="l07211" /><CodeLine lineNumber="7211"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> ModeReg =</span></CodeLine>
<Link id="l07212" /><CodeLine lineNumber="7212"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;s&#95;getreg, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;,</span></CodeLine>
<Link id="l07213" /><CodeLine lineNumber="7213"><span class="doxyHighlight">                       </span><span class="doxyHighlightComment">/&#42;HasSideEffects=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, </span><span class="doxyHighlightComment">/&#42;isConvergent=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l07214" /><CodeLine lineNumber="7214"><span class="doxyHighlight">          .addImm(<a href="#a1fff431f58bc2af2caae5f611ba0791f">FPEnvModeBitField</a>);</span></CodeLine>
<Link id="l07215" /><CodeLine lineNumber="7215"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> TrapReg =</span></CodeLine>
<Link id="l07216" /><CodeLine lineNumber="7216"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;s&#95;getreg, &#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;,</span></CodeLine>
<Link id="l07217" /><CodeLine lineNumber="7217"><span class="doxyHighlight">                       </span><span class="doxyHighlightComment">/&#42;HasSideEffects=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, </span><span class="doxyHighlightComment">/&#42;isConvergent=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l07218" /><CodeLine lineNumber="7218"><span class="doxyHighlight">          .addImm(<a href="#aa0516ba249c5d556a3ee34bfd27737f3">FPEnvTrapBitField</a>);</span></CodeLine>
<Link id="l07219" /><CodeLine lineNumber="7219"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildMergeLikeInstr(Src, &#123;ModeReg, TrapReg&#125;);</span></CodeLine>
<Link id="l07220" /><CodeLine lineNumber="7220"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l07221" /><CodeLine lineNumber="7221"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07222" /><CodeLine lineNumber="7222"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l07223" /><CodeLine lineNumber="7223"></CodeLine>
<Link id="l07224" /><CodeLine lineNumber="7224" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#af6341dd9dcba1872086b57731b9c096d"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#af6341dd9dcba1872086b57731b9c096d">AMDGPULegalizerInfo::legalizeSetFPEnv</a>(<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</span></CodeLine>
<Link id="l07225" /><CodeLine lineNumber="7225"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</span></CodeLine>
<Link id="l07226" /><CodeLine lineNumber="7226"><span class="doxyHighlight">                                           <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l07227" /><CodeLine lineNumber="7227"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/register">Register</a> Src = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</span></CodeLine>
<Link id="l07228" /><CodeLine lineNumber="7228"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Src) != <a href="#a2b96ee4926f7c19420d19ecaf7adc1a8">S64</a>)</span></CodeLine>
<Link id="l07229" /><CodeLine lineNumber="7229"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07230" /><CodeLine lineNumber="7230"></CodeLine>
<Link id="l07231" /><CodeLine lineNumber="7231"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> Unmerge = <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildUnmerge(&#123;<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>&#125;, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0));</span></CodeLine>
<Link id="l07232" /><CodeLine lineNumber="7232"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;s&#95;setreg, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;DstOp&gt;</a>(),</span></CodeLine>
<Link id="l07233" /><CodeLine lineNumber="7233"><span class="doxyHighlight">                   </span><span class="doxyHighlightComment">/&#42;HasSideEffects=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, </span><span class="doxyHighlightComment">/&#42;isConvergent=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l07234" /><CodeLine lineNumber="7234"><span class="doxyHighlight">      .addImm(</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlight">int16&#95;t</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(<a href="#a1fff431f58bc2af2caae5f611ba0791f">FPEnvModeBitField</a>))</span></CodeLine>
<Link id="l07235" /><CodeLine lineNumber="7235"><span class="doxyHighlight">      .addReg(Unmerge.getReg(0));</span></CodeLine>
<Link id="l07236" /><CodeLine lineNumber="7236"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildIntrinsic(Intrinsic::amdgcn&#95;s&#95;setreg, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;DstOp&gt;</a>(),</span></CodeLine>
<Link id="l07237" /><CodeLine lineNumber="7237"><span class="doxyHighlight">                   </span><span class="doxyHighlightComment">/&#42;HasSideEffects=&#42;/</span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, </span><span class="doxyHighlightComment">/&#42;isConvergent=&#42;/</span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">)</span></CodeLine>
<Link id="l07238" /><CodeLine lineNumber="7238"><span class="doxyHighlight">      .addImm(</span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlight">int16&#95;t</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(<a href="#aa0516ba249c5d556a3ee34bfd27737f3">FPEnvTrapBitField</a>))</span></CodeLine>
<Link id="l07239" /><CodeLine lineNumber="7239"><span class="doxyHighlight">      .addReg(Unmerge.getReg(1));</span></CodeLine>
<Link id="l07240" /><CodeLine lineNumber="7240"><span class="doxyHighlight">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l07241" /><CodeLine lineNumber="7241"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07242" /><CodeLine lineNumber="7242"><span class="doxyHighlight">&#125;</span></CodeLine>
<Link id="l07243" /><CodeLine lineNumber="7243"></CodeLine>
<Link id="l07244" /><CodeLine lineNumber="7244" lineLink="/docs/api/classes/llvm/amdgpulegalizerinfo/#a5892da00df1f8fb432eab72498344583"><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a5892da00df1f8fb432eab72498344583">AMDGPULegalizerInfo::legalizeIntrinsic</a>(<a href="/docs/api/classes/llvm/legalizerhelper">LegalizerHelper</a> &amp;Helper,</span></CodeLine>
<Link id="l07245" /><CodeLine lineNumber="7245"><span class="doxyHighlight">                                            <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &amp;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</span><span class="doxyHighlightKeyword"> const </span><span class="doxyHighlight">&#123;</span></CodeLine>
<Link id="l07246" /><CodeLine lineNumber="7246"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineirbuilder">MachineIRBuilder</a> &amp;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a> = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</span></CodeLine>
<Link id="l07247" /><CodeLine lineNumber="7247"><span class="doxyHighlight">  <a href="/docs/api/classes/llvm/machineregisterinfo">MachineRegisterInfo</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &#42;<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMRI();</span></CodeLine>
<Link id="l07248" /><CodeLine lineNumber="7248"></CodeLine>
<Link id="l07249" /><CodeLine lineNumber="7249"><span class="doxyHighlight">  </span><span class="doxyHighlightComment">// Replace the use G&#95;BRCOND with the exec manipulate and branch pseudos.</span></CodeLine>
<Link id="l07250" /><CodeLine lineNumber="7250"><span class="doxyHighlight">  </span><span class="doxyHighlightKeyword">auto</span><span class="doxyHighlight"> IntrID = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;GIntrinsic&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>).getIntrinsicID();</span></CodeLine>
<Link id="l07251" /><CodeLine lineNumber="7251"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">switch</span><span class="doxyHighlight"> (IntrID) &#123;</span></CodeLine>
<Link id="l07252" /><CodeLine lineNumber="7252"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;if:</span></CodeLine>
<Link id="l07253" /><CodeLine lineNumber="7253"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;else: &#123;</span></CodeLine>
<Link id="l07254" /><CodeLine lineNumber="7254"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;Br = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07255" /><CodeLine lineNumber="7255"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;UncondBrTarget = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07256" /><CodeLine lineNumber="7256"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Negated = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07257" /><CodeLine lineNumber="7257"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;BrCond =</span></CodeLine>
<Link id="l07258" /><CodeLine lineNumber="7258"><span class="doxyHighlight">            <a href="#a87e58e9d24983c7890c502fbe731f950">verifyCFIntrinsic</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, Br, UncondBrTarget, Negated)) &#123;</span></CodeLine>
<Link id="l07259" /><CodeLine lineNumber="7259"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/siregisterinfo">SIRegisterInfo</a> &#42;<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a></span></CodeLine>
<Link id="l07260" /><CodeLine lineNumber="7260"><span class="doxyHighlight">        = </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeyword">const </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/siregisterinfo">SIRegisterInfo</a> &#42;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getTargetRegisterInfo());</span></CodeLine>
<Link id="l07261" /><CodeLine lineNumber="7261"></CodeLine>
<Link id="l07262" /><CodeLine lineNumber="7262"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/register">Register</a> Def = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</span></CodeLine>
<Link id="l07263" /><CodeLine lineNumber="7263"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/register">Register</a> <a href="/docs/api/classes/llvm/use">Use</a> = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</span></CodeLine>
<Link id="l07264" /><CodeLine lineNumber="7264"></CodeLine>
<Link id="l07265" /><CodeLine lineNumber="7265"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;CondBrTarget = BrCond-&gt;getOperand(1).getMBB();</span></CodeLine>
<Link id="l07266" /><CodeLine lineNumber="7266"></CodeLine>
<Link id="l07267" /><CodeLine lineNumber="7267"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Negated)</span></CodeLine>
<Link id="l07268" /><CodeLine lineNumber="7268"><span class="doxyHighlight">        <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(CondBrTarget, UncondBrTarget);</span></CodeLine>
<Link id="l07269" /><CodeLine lineNumber="7269"></CodeLine>
<Link id="l07270" /><CodeLine lineNumber="7270"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.setInsertPt(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMBB(), BrCond-&gt;getIterator());</span></CodeLine>
<Link id="l07271" /><CodeLine lineNumber="7271"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (IntrID == Intrinsic::amdgcn&#95;if) &#123;</span></CodeLine>
<Link id="l07272" /><CodeLine lineNumber="7272"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::SI&#95;IF)</span></CodeLine>
<Link id="l07273" /><CodeLine lineNumber="7273"><span class="doxyHighlight">          .addDef(Def)</span></CodeLine>
<Link id="l07274" /><CodeLine lineNumber="7274"><span class="doxyHighlight">          .addUse(<a href="/docs/api/classes/llvm/use">Use</a>)</span></CodeLine>
<Link id="l07275" /><CodeLine lineNumber="7275"><span class="doxyHighlight">          .addMBB(UncondBrTarget);</span></CodeLine>
<Link id="l07276" /><CodeLine lineNumber="7276"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l07277" /><CodeLine lineNumber="7277"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::SI&#95;ELSE)</span></CodeLine>
<Link id="l07278" /><CodeLine lineNumber="7278"><span class="doxyHighlight">            .addDef(Def)</span></CodeLine>
<Link id="l07279" /><CodeLine lineNumber="7279"><span class="doxyHighlight">            .addUse(<a href="/docs/api/classes/llvm/use">Use</a>)</span></CodeLine>
<Link id="l07280" /><CodeLine lineNumber="7280"><span class="doxyHighlight">            .addMBB(UncondBrTarget);</span></CodeLine>
<Link id="l07281" /><CodeLine lineNumber="7281"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l07282" /><CodeLine lineNumber="7282"></CodeLine>
<Link id="l07283" /><CodeLine lineNumber="7283"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Br) &#123;</span></CodeLine>
<Link id="l07284" /><CodeLine lineNumber="7284"><span class="doxyHighlight">        Br-&gt;<a href="/docs/api/classes/llvm/machineinstr/#ad67c9230577a0b640c52852c75c93939">getOperand</a>(0).<a href="/docs/api/classes/llvm/machineoperand/#a98e9c9e8ef7cbb6c4aa89a38f21decfa">setMBB</a>(CondBrTarget);</span></CodeLine>
<Link id="l07285" /><CodeLine lineNumber="7285"><span class="doxyHighlight">      &#125; </span><span class="doxyHighlightKeywordFlow">else</span><span class="doxyHighlight"> &#123;</span></CodeLine>
<Link id="l07286" /><CodeLine lineNumber="7286"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// The IRTranslator skips inserting the G&#95;BR for fallthrough cases, but</span></CodeLine>
<Link id="l07287" /><CodeLine lineNumber="7287"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// since we&#39;re swapping branch targets it needs to be reinserted.</span></CodeLine>
<Link id="l07288" /><CodeLine lineNumber="7288"><span class="doxyHighlight">        </span><span class="doxyHighlightComment">// FIXME: IRTranslator should probably not do this</span></CodeLine>
<Link id="l07289" /><CodeLine lineNumber="7289"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBr(&#42;CondBrTarget);</span></CodeLine>
<Link id="l07290" /><CodeLine lineNumber="7290"><span class="doxyHighlight">      &#125;</span></CodeLine>
<Link id="l07291" /><CodeLine lineNumber="7291"></CodeLine>
<Link id="l07292" /><CodeLine lineNumber="7292"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.setRegClass(Def, <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;getWaveMaskRegClass());</span></CodeLine>
<Link id="l07293" /><CodeLine lineNumber="7293"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.setRegClass(<a href="/docs/api/classes/llvm/use">Use</a>, <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;getWaveMaskRegClass());</span></CodeLine>
<Link id="l07294" /><CodeLine lineNumber="7294"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l07295" /><CodeLine lineNumber="7295"><span class="doxyHighlight">      BrCond-&gt;eraseFromParent();</span></CodeLine>
<Link id="l07296" /><CodeLine lineNumber="7296"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07297" /><CodeLine lineNumber="7297"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l07298" /><CodeLine lineNumber="7298"></CodeLine>
<Link id="l07299" /><CodeLine lineNumber="7299"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07300" /><CodeLine lineNumber="7300"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l07301" /><CodeLine lineNumber="7301"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;loop: &#123;</span></CodeLine>
<Link id="l07302" /><CodeLine lineNumber="7302"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;Br = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07303" /><CodeLine lineNumber="7303"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;UncondBrTarget = </span><span class="doxyHighlightKeyword">nullptr</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07304" /><CodeLine lineNumber="7304"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordType">bool</span><span class="doxyHighlight"> Negated = </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07305" /><CodeLine lineNumber="7305"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/classes/llvm/machineinstr">MachineInstr</a> &#42;BrCond =</span></CodeLine>
<Link id="l07306" /><CodeLine lineNumber="7306"><span class="doxyHighlight">            <a href="#a87e58e9d24983c7890c502fbe731f950">verifyCFIntrinsic</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, Br, UncondBrTarget, Negated)) &#123;</span></CodeLine>
<Link id="l07307" /><CodeLine lineNumber="7307"><span class="doxyHighlight">      </span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/siregisterinfo">SIRegisterInfo</a> &#42;<a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a></span></CodeLine>
<Link id="l07308" /><CodeLine lineNumber="7308"><span class="doxyHighlight">        = </span><span class="doxyHighlightKeyword">static&#95;cast&lt;</span><span class="doxyHighlightKeyword">const </span><span class="doxyHighlight"><a href="/docs/api/classes/llvm/siregisterinfo">SIRegisterInfo</a> &#42;</span><span class="doxyHighlightKeyword">&gt;</span><span class="doxyHighlight">(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getTargetRegisterInfo());</span></CodeLine>
<Link id="l07309" /><CodeLine lineNumber="7309"></CodeLine>
<Link id="l07310" /><CodeLine lineNumber="7310"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/machinebasicblock">MachineBasicBlock</a> &#42;CondBrTarget = BrCond-&gt;getOperand(1).getMBB();</span></CodeLine>
<Link id="l07311" /><CodeLine lineNumber="7311"><span class="doxyHighlight">      <a href="/docs/api/classes/llvm/register">Register</a> Reg = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</span></CodeLine>
<Link id="l07312" /><CodeLine lineNumber="7312"></CodeLine>
<Link id="l07313" /><CodeLine lineNumber="7313"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Negated)</span></CodeLine>
<Link id="l07314" /><CodeLine lineNumber="7314"><span class="doxyHighlight">        <a href="/docs/api/namespaces/std/#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(CondBrTarget, UncondBrTarget);</span></CodeLine>
<Link id="l07315" /><CodeLine lineNumber="7315"></CodeLine>
<Link id="l07316" /><CodeLine lineNumber="7316"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.setInsertPt(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMBB(), BrCond-&gt;getIterator());</span></CodeLine>
<Link id="l07317" /><CodeLine lineNumber="7317"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildInstr(AMDGPU::SI&#95;LOOP)</span></CodeLine>
<Link id="l07318" /><CodeLine lineNumber="7318"><span class="doxyHighlight">        .addUse(Reg)</span></CodeLine>
<Link id="l07319" /><CodeLine lineNumber="7319"><span class="doxyHighlight">        .addMBB(UncondBrTarget);</span></CodeLine>
<Link id="l07320" /><CodeLine lineNumber="7320"></CodeLine>
<Link id="l07321" /><CodeLine lineNumber="7321"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (Br)</span></CodeLine>
<Link id="l07322" /><CodeLine lineNumber="7322"><span class="doxyHighlight">        Br-&gt;<a href="/docs/api/classes/llvm/machineinstr/#ad67c9230577a0b640c52852c75c93939">getOperand</a>(0).<a href="/docs/api/classes/llvm/machineoperand/#a98e9c9e8ef7cbb6c4aa89a38f21decfa">setMBB</a>(CondBrTarget);</span></CodeLine>
<Link id="l07323" /><CodeLine lineNumber="7323"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">else</span></CodeLine>
<Link id="l07324" /><CodeLine lineNumber="7324"><span class="doxyHighlight">        <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildBr(&#42;CondBrTarget);</span></CodeLine>
<Link id="l07325" /><CodeLine lineNumber="7325"></CodeLine>
<Link id="l07326" /><CodeLine lineNumber="7326"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l07327" /><CodeLine lineNumber="7327"><span class="doxyHighlight">      BrCond-&gt;eraseFromParent();</span></CodeLine>
<Link id="l07328" /><CodeLine lineNumber="7328"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.setRegClass(Reg, <a href="/docs/api/files/lib/lib/codegen/machinesink-cpp/#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;getWaveMaskRegClass());</span></CodeLine>
<Link id="l07329" /><CodeLine lineNumber="7329"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07330" /><CodeLine lineNumber="7330"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l07331" /><CodeLine lineNumber="7331"></CodeLine>
<Link id="l07332" /><CodeLine lineNumber="7332"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07333" /><CodeLine lineNumber="7333"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l07334" /><CodeLine lineNumber="7334"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;addrspacecast&#95;nonnull:</span></CodeLine>
<Link id="l07335" /><CodeLine lineNumber="7335"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a805950c6af7deaddb2d8fbcaf4ea011b">legalizeAddrSpaceCast</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l07336" /><CodeLine lineNumber="7336"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;make&#95;buffer&#95;rsrc:</span></CodeLine>
<Link id="l07337" /><CodeLine lineNumber="7337"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a376125f5ee6f0a21fdd6336557fa3913">legalizePointerAsRsrcIntrin</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l07338" /><CodeLine lineNumber="7338"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;kernarg&#95;segment&#95;ptr:</span></CodeLine>
<Link id="l07339" /><CodeLine lineNumber="7339"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (!<a href="/docs/api/namespaces/llvm/amdgpu/#a3cc437d6699fb55c69e78b5d0cad641d">AMDGPU::isKernel</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getMF().getFunction().getCallingConv())) &#123;</span></CodeLine>
<Link id="l07340" /><CodeLine lineNumber="7340"><span class="doxyHighlight">      </span><span class="doxyHighlightComment">// This only makes sense to call in a kernel, so just lower to null.</span></CodeLine>
<Link id="l07341" /><CodeLine lineNumber="7341"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), 0);</span></CodeLine>
<Link id="l07342" /><CodeLine lineNumber="7342"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l07343" /><CodeLine lineNumber="7343"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07344" /><CodeLine lineNumber="7344"><span class="doxyHighlight">    &#125;</span></CodeLine>
<Link id="l07345" /><CodeLine lineNumber="7345"></CodeLine>
<Link id="l07346" /><CodeLine lineNumber="7346"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(</span></CodeLine>
<Link id="l07347" /><CodeLine lineNumber="7347"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98baf32f3fd30ae548866dc7e45092dd90b9">AMDGPUFunctionArgInfo::KERNARG&#95;SEGMENT&#95;PTR</a>);</span></CodeLine>
<Link id="l07348" /><CodeLine lineNumber="7348"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;implicitarg&#95;ptr:</span></CodeLine>
<Link id="l07349" /><CodeLine lineNumber="7349"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a8bc1455f0ec29a33f76adecf8e668af8">legalizeImplicitArgPtr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l07350" /><CodeLine lineNumber="7350"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;workitem&#95;id&#95;x:</span></CodeLine>
<Link id="l07351" /><CodeLine lineNumber="7351"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#af7e4619611fab877c69f6ec0a1d57525">legalizeWorkitemIDIntrinsic</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, 0,</span></CodeLine>
<Link id="l07352" /><CodeLine lineNumber="7352"><span class="doxyHighlight">                                       <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98baed4ee8d30a77bb954964f9910e8cdcb6">AMDGPUFunctionArgInfo::WORKITEM&#95;ID&#95;X</a>);</span></CodeLine>
<Link id="l07353" /><CodeLine lineNumber="7353"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;workitem&#95;id&#95;y:</span></CodeLine>
<Link id="l07354" /><CodeLine lineNumber="7354"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#af7e4619611fab877c69f6ec0a1d57525">legalizeWorkitemIDIntrinsic</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, 1,</span></CodeLine>
<Link id="l07355" /><CodeLine lineNumber="7355"><span class="doxyHighlight">                                       <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98ba99b2fc1acb49563d2e3ad89278385103">AMDGPUFunctionArgInfo::WORKITEM&#95;ID&#95;Y</a>);</span></CodeLine>
<Link id="l07356" /><CodeLine lineNumber="7356"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;workitem&#95;id&#95;z:</span></CodeLine>
<Link id="l07357" /><CodeLine lineNumber="7357"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#af7e4619611fab877c69f6ec0a1d57525">legalizeWorkitemIDIntrinsic</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, 2,</span></CodeLine>
<Link id="l07358" /><CodeLine lineNumber="7358"><span class="doxyHighlight">                                       <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98baeefc8c0370c3704fada7f546da0b6086">AMDGPUFunctionArgInfo::WORKITEM&#95;ID&#95;Z</a>);</span></CodeLine>
<Link id="l07359" /><CodeLine lineNumber="7359"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;workgroup&#95;id&#95;x:</span></CodeLine>
<Link id="l07360" /><CodeLine lineNumber="7360"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l07361" /><CodeLine lineNumber="7361"><span class="doxyHighlight">                                      <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98bac8cd3961f0697f74c890c302ff8cd370">AMDGPUFunctionArgInfo::WORKGROUP&#95;ID&#95;X</a>);</span></CodeLine>
<Link id="l07362" /><CodeLine lineNumber="7362"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;workgroup&#95;id&#95;y:</span></CodeLine>
<Link id="l07363" /><CodeLine lineNumber="7363"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l07364" /><CodeLine lineNumber="7364"><span class="doxyHighlight">                                      <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98ba9df85a25300bb504ac893643b387629b">AMDGPUFunctionArgInfo::WORKGROUP&#95;ID&#95;Y</a>);</span></CodeLine>
<Link id="l07365" /><CodeLine lineNumber="7365"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;workgroup&#95;id&#95;z:</span></CodeLine>
<Link id="l07366" /><CodeLine lineNumber="7366"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l07367" /><CodeLine lineNumber="7367"><span class="doxyHighlight">                                      <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98baf438f1c55b41dc280fcc1d3455a5c741">AMDGPUFunctionArgInfo::WORKGROUP&#95;ID&#95;Z</a>);</span></CodeLine>
<Link id="l07368" /><CodeLine lineNumber="7368"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;wave&#95;id:</span></CodeLine>
<Link id="l07369" /><CodeLine lineNumber="7369"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ab0873d6f5bfe8490b5ef6be3a84dd805">legalizeWaveID</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l07370" /><CodeLine lineNumber="7370"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;lds&#95;kernel&#95;id:</span></CodeLine>
<Link id="l07371" /><CodeLine lineNumber="7371"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l07372" /><CodeLine lineNumber="7372"><span class="doxyHighlight">                                      <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98ba20d047732dd4b74606c9c63280727fa3">AMDGPUFunctionArgInfo::LDS&#95;KERNEL&#95;ID</a>);</span></CodeLine>
<Link id="l07373" /><CodeLine lineNumber="7373"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;dispatch&#95;ptr:</span></CodeLine>
<Link id="l07374" /><CodeLine lineNumber="7374"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l07375" /><CodeLine lineNumber="7375"><span class="doxyHighlight">                                      <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98bac637a232c5c5f79fa806ae4958a1ff2a">AMDGPUFunctionArgInfo::DISPATCH&#95;PTR</a>);</span></CodeLine>
<Link id="l07376" /><CodeLine lineNumber="7376"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;queue&#95;ptr:</span></CodeLine>
<Link id="l07377" /><CodeLine lineNumber="7377"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l07378" /><CodeLine lineNumber="7378"><span class="doxyHighlight">                                      <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98ba32b5333e2f708d7eeb05c12e415b8fd4">AMDGPUFunctionArgInfo::QUEUE&#95;PTR</a>);</span></CodeLine>
<Link id="l07379" /><CodeLine lineNumber="7379"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;implicit&#95;buffer&#95;ptr:</span></CodeLine>
<Link id="l07380" /><CodeLine lineNumber="7380"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(</span></CodeLine>
<Link id="l07381" /><CodeLine lineNumber="7381"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98bacc30be6da6e4621e76201b6ee1b7d2ac">AMDGPUFunctionArgInfo::IMPLICIT&#95;BUFFER&#95;PTR</a>);</span></CodeLine>
<Link id="l07382" /><CodeLine lineNumber="7382"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;dispatch&#95;id:</span></CodeLine>
<Link id="l07383" /><CodeLine lineNumber="7383"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l07384" /><CodeLine lineNumber="7384"><span class="doxyHighlight">                                      <a href="/docs/api/structs/llvm/amdgpufunctionarginfo/#a0e789059bf7f286b7f6bc75b43aac98bab51517a3febb0cdc35645334784ff805">AMDGPUFunctionArgInfo::DISPATCH&#95;ID</a>);</span></CodeLine>
<Link id="l07385" /><CodeLine lineNumber="7385"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::r600&#95;read&#95;ngroups&#95;x:</span></CodeLine>
<Link id="l07386" /><CodeLine lineNumber="7386"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Emit error for hsa</span></CodeLine>
<Link id="l07387" /><CodeLine lineNumber="7387"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l07388" /><CodeLine lineNumber="7388"><span class="doxyHighlight">                                       <a href="/docs/api/namespaces/llvm/si/kernelinputoffsets/#a58b4eae4b0a45d478c7c0f3959b04612a857fe4edfc845f9b0eee86ace55971c8">SI::KernelInputOffsets::NGROUPS&#95;X</a>);</span></CodeLine>
<Link id="l07389" /><CodeLine lineNumber="7389"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::r600&#95;read&#95;ngroups&#95;y:</span></CodeLine>
<Link id="l07390" /><CodeLine lineNumber="7390"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l07391" /><CodeLine lineNumber="7391"><span class="doxyHighlight">                                       <a href="/docs/api/namespaces/llvm/si/kernelinputoffsets/#a58b4eae4b0a45d478c7c0f3959b04612a114e8b572de0ca0a14b4beec74337b9f">SI::KernelInputOffsets::NGROUPS&#95;Y</a>);</span></CodeLine>
<Link id="l07392" /><CodeLine lineNumber="7392"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::r600&#95;read&#95;ngroups&#95;z:</span></CodeLine>
<Link id="l07393" /><CodeLine lineNumber="7393"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,</span></CodeLine>
<Link id="l07394" /><CodeLine lineNumber="7394"><span class="doxyHighlight">                                       <a href="/docs/api/namespaces/llvm/si/kernelinputoffsets/#a58b4eae4b0a45d478c7c0f3959b04612a50479b16c92722ed623d81fe63879639">SI::KernelInputOffsets::NGROUPS&#95;Z</a>);</span></CodeLine>
<Link id="l07395" /><CodeLine lineNumber="7395"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::r600&#95;read&#95;local&#95;size&#95;x:</span></CodeLine>
<Link id="l07396" /><CodeLine lineNumber="7396"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Could insert G&#95;ASSERT&#95;ZEXT from s16</span></CodeLine>
<Link id="l07397" /><CodeLine lineNumber="7397"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/namespaces/llvm/si/kernelinputoffsets/#a58b4eae4b0a45d478c7c0f3959b04612aad70bdccb9143514e90e2ffed213e4ae">SI::KernelInputOffsets::LOCAL&#95;SIZE&#95;X</a>);</span></CodeLine>
<Link id="l07398" /><CodeLine lineNumber="7398"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::r600&#95;read&#95;local&#95;size&#95;y:</span></CodeLine>
<Link id="l07399" /><CodeLine lineNumber="7399"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Could insert G&#95;ASSERT&#95;ZEXT from s16</span></CodeLine>
<Link id="l07400" /><CodeLine lineNumber="7400"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>,  <a href="/docs/api/namespaces/llvm/si/kernelinputoffsets/#a58b4eae4b0a45d478c7c0f3959b04612a89d4956fc6fdfd046ec5650281c75e6b">SI::KernelInputOffsets::LOCAL&#95;SIZE&#95;Y</a>);</span></CodeLine>
<Link id="l07401" /><CodeLine lineNumber="7401"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// TODO: Could insert G&#95;ASSERT&#95;ZEXT from s16</span></CodeLine>
<Link id="l07402" /><CodeLine lineNumber="7402"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::r600&#95;read&#95;local&#95;size&#95;z:</span></CodeLine>
<Link id="l07403" /><CodeLine lineNumber="7403"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/namespaces/llvm/si/kernelinputoffsets/#a58b4eae4b0a45d478c7c0f3959b04612a8397b2e7a714eebb964c86930299ba2e">SI::KernelInputOffsets::LOCAL&#95;SIZE&#95;Z</a>);</span></CodeLine>
<Link id="l07404" /><CodeLine lineNumber="7404"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::r600&#95;read&#95;global&#95;size&#95;x:</span></CodeLine>
<Link id="l07405" /><CodeLine lineNumber="7405"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/namespaces/llvm/si/kernelinputoffsets/#a58b4eae4b0a45d478c7c0f3959b04612acaf6a7dc31f80148ce9ad3eaa8871db2">SI::KernelInputOffsets::GLOBAL&#95;SIZE&#95;X</a>);</span></CodeLine>
<Link id="l07406" /><CodeLine lineNumber="7406"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::r600&#95;read&#95;global&#95;size&#95;y:</span></CodeLine>
<Link id="l07407" /><CodeLine lineNumber="7407"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/namespaces/llvm/si/kernelinputoffsets/#a58b4eae4b0a45d478c7c0f3959b04612aa0fc2d47a80ef17faaee718a2659384d">SI::KernelInputOffsets::GLOBAL&#95;SIZE&#95;Y</a>);</span></CodeLine>
<Link id="l07408" /><CodeLine lineNumber="7408"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::r600&#95;read&#95;global&#95;size&#95;z:</span></CodeLine>
<Link id="l07409" /><CodeLine lineNumber="7409"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/namespaces/llvm/si/kernelinputoffsets/#a58b4eae4b0a45d478c7c0f3959b04612a517d5b2e170532fbf6c01d5b69d7b7d6">SI::KernelInputOffsets::GLOBAL&#95;SIZE&#95;Z</a>);</span></CodeLine>
<Link id="l07410" /><CodeLine lineNumber="7410"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;fdiv&#95;fast:</span></CodeLine>
<Link id="l07411" /><CodeLine lineNumber="7411"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a6f737d47e92bb08927c272b12fba32d8">legalizeFDIVFastIntrin</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l07412" /><CodeLine lineNumber="7412"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;is&#95;shared:</span></CodeLine>
<Link id="l07413" /><CodeLine lineNumber="7413"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a1a1ef8cdc87d83bb4e114e897e86d58c">legalizeIsAddrSpace</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1a77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL&#95;ADDRESS</a>);</span></CodeLine>
<Link id="l07414" /><CodeLine lineNumber="7414"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;is&#95;private:</span></CodeLine>
<Link id="l07415" /><CodeLine lineNumber="7415"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a1a1ef8cdc87d83bb4e114e897e86d58c">legalizeIsAddrSpace</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, <a href="/docs/api/namespaces/llvm/amdgpuas/#a899ad5bfccfc22965a6714929a3dfae1aec164f45437d8827346f2d8ec645479a">AMDGPUAS::PRIVATE&#95;ADDRESS</a>);</span></CodeLine>
<Link id="l07416" /><CodeLine lineNumber="7416"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;wavefrontsize: &#123;</span></CodeLine>
<Link id="l07417" /><CodeLine lineNumber="7417"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildConstant(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), ST.getWavefrontSize());</span></CodeLine>
<Link id="l07418" /><CodeLine lineNumber="7418"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</span></CodeLine>
<Link id="l07419" /><CodeLine lineNumber="7419"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07420" /><CodeLine lineNumber="7420"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l07421" /><CodeLine lineNumber="7421"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;s&#95;buffer&#95;load:</span></CodeLine>
<Link id="l07422" /><CodeLine lineNumber="7422"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ae0d1532576a7c6e3bda2d8966700d27a">legalizeSBufferLoad</a>(Helper, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l07423" /><CodeLine lineNumber="7423"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;store:</span></CodeLine>
<Link id="l07424" /><CodeLine lineNumber="7424"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;store:</span></CodeLine>
<Link id="l07425" /><CodeLine lineNumber="7425"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;store:</span></CodeLine>
<Link id="l07426" /><CodeLine lineNumber="7426"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;store:</span></CodeLine>
<Link id="l07427" /><CodeLine lineNumber="7427"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a2324ad614c957fc91b34a00f32e89d60">legalizeBufferStore</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Helper, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l07428" /><CodeLine lineNumber="7428"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;store&#95;format:</span></CodeLine>
<Link id="l07429" /><CodeLine lineNumber="7429"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;store&#95;format:</span></CodeLine>
<Link id="l07430" /><CodeLine lineNumber="7430"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;store&#95;format:</span></CodeLine>
<Link id="l07431" /><CodeLine lineNumber="7431"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;store&#95;format:</span></CodeLine>
<Link id="l07432" /><CodeLine lineNumber="7432"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a2324ad614c957fc91b34a00f32e89d60">legalizeBufferStore</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Helper, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l07433" /><CodeLine lineNumber="7433"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;tbuffer&#95;store:</span></CodeLine>
<Link id="l07434" /><CodeLine lineNumber="7434"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;tbuffer&#95;store:</span></CodeLine>
<Link id="l07435" /><CodeLine lineNumber="7435"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;tbuffer&#95;store:</span></CodeLine>
<Link id="l07436" /><CodeLine lineNumber="7436"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;tbuffer&#95;store:</span></CodeLine>
<Link id="l07437" /><CodeLine lineNumber="7437"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a2324ad614c957fc91b34a00f32e89d60">legalizeBufferStore</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Helper, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l07438" /><CodeLine lineNumber="7438"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;load:</span></CodeLine>
<Link id="l07439" /><CodeLine lineNumber="7439"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;load:</span></CodeLine>
<Link id="l07440" /><CodeLine lineNumber="7440"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;atomic&#95;buffer&#95;load:</span></CodeLine>
<Link id="l07441" /><CodeLine lineNumber="7441"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;atomic&#95;buffer&#95;load:</span></CodeLine>
<Link id="l07442" /><CodeLine lineNumber="7442"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;load:</span></CodeLine>
<Link id="l07443" /><CodeLine lineNumber="7443"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;load:</span></CodeLine>
<Link id="l07444" /><CodeLine lineNumber="7444"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;atomic&#95;buffer&#95;load:</span></CodeLine>
<Link id="l07445" /><CodeLine lineNumber="7445"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;atomic&#95;buffer&#95;load:</span></CodeLine>
<Link id="l07446" /><CodeLine lineNumber="7446"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a89e5277b1b90b54ea21a51120f9a4206">legalizeBufferLoad</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Helper, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l07447" /><CodeLine lineNumber="7447"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;load&#95;format:</span></CodeLine>
<Link id="l07448" /><CodeLine lineNumber="7448"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;load&#95;format:</span></CodeLine>
<Link id="l07449" /><CodeLine lineNumber="7449"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;load&#95;format:</span></CodeLine>
<Link id="l07450" /><CodeLine lineNumber="7450"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;load&#95;format:</span></CodeLine>
<Link id="l07451" /><CodeLine lineNumber="7451"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a89e5277b1b90b54ea21a51120f9a4206">legalizeBufferLoad</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Helper, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeyword">false</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l07452" /><CodeLine lineNumber="7452"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;tbuffer&#95;load:</span></CodeLine>
<Link id="l07453" /><CodeLine lineNumber="7453"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;tbuffer&#95;load:</span></CodeLine>
<Link id="l07454" /><CodeLine lineNumber="7454"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;tbuffer&#95;load:</span></CodeLine>
<Link id="l07455" /><CodeLine lineNumber="7455"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;tbuffer&#95;load:</span></CodeLine>
<Link id="l07456" /><CodeLine lineNumber="7456"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a89e5277b1b90b54ea21a51120f9a4206">legalizeBufferLoad</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Helper, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">, </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">);</span></CodeLine>
<Link id="l07457" /><CodeLine lineNumber="7457"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;swap:</span></CodeLine>
<Link id="l07458" /><CodeLine lineNumber="7458"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;swap:</span></CodeLine>
<Link id="l07459" /><CodeLine lineNumber="7459"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;swap:</span></CodeLine>
<Link id="l07460" /><CodeLine lineNumber="7460"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;swap:</span></CodeLine>
<Link id="l07461" /><CodeLine lineNumber="7461"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;add:</span></CodeLine>
<Link id="l07462" /><CodeLine lineNumber="7462"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;add:</span></CodeLine>
<Link id="l07463" /><CodeLine lineNumber="7463"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;add:</span></CodeLine>
<Link id="l07464" /><CodeLine lineNumber="7464"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;add:</span></CodeLine>
<Link id="l07465" /><CodeLine lineNumber="7465"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;sub:</span></CodeLine>
<Link id="l07466" /><CodeLine lineNumber="7466"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;sub:</span></CodeLine>
<Link id="l07467" /><CodeLine lineNumber="7467"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;sub:</span></CodeLine>
<Link id="l07468" /><CodeLine lineNumber="7468"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;sub:</span></CodeLine>
<Link id="l07469" /><CodeLine lineNumber="7469"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;smin:</span></CodeLine>
<Link id="l07470" /><CodeLine lineNumber="7470"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;smin:</span></CodeLine>
<Link id="l07471" /><CodeLine lineNumber="7471"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;smin:</span></CodeLine>
<Link id="l07472" /><CodeLine lineNumber="7472"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;smin:</span></CodeLine>
<Link id="l07473" /><CodeLine lineNumber="7473"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;umin:</span></CodeLine>
<Link id="l07474" /><CodeLine lineNumber="7474"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;umin:</span></CodeLine>
<Link id="l07475" /><CodeLine lineNumber="7475"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;umin:</span></CodeLine>
<Link id="l07476" /><CodeLine lineNumber="7476"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;umin:</span></CodeLine>
<Link id="l07477" /><CodeLine lineNumber="7477"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;smax:</span></CodeLine>
<Link id="l07478" /><CodeLine lineNumber="7478"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;smax:</span></CodeLine>
<Link id="l07479" /><CodeLine lineNumber="7479"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;smax:</span></CodeLine>
<Link id="l07480" /><CodeLine lineNumber="7480"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;smax:</span></CodeLine>
<Link id="l07481" /><CodeLine lineNumber="7481"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;umax:</span></CodeLine>
<Link id="l07482" /><CodeLine lineNumber="7482"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;umax:</span></CodeLine>
<Link id="l07483" /><CodeLine lineNumber="7483"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;umax:</span></CodeLine>
<Link id="l07484" /><CodeLine lineNumber="7484"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;umax:</span></CodeLine>
<Link id="l07485" /><CodeLine lineNumber="7485"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;and:</span></CodeLine>
<Link id="l07486" /><CodeLine lineNumber="7486"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;and:</span></CodeLine>
<Link id="l07487" /><CodeLine lineNumber="7487"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;and:</span></CodeLine>
<Link id="l07488" /><CodeLine lineNumber="7488"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;and:</span></CodeLine>
<Link id="l07489" /><CodeLine lineNumber="7489"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;or:</span></CodeLine>
<Link id="l07490" /><CodeLine lineNumber="7490"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;or:</span></CodeLine>
<Link id="l07491" /><CodeLine lineNumber="7491"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;or:</span></CodeLine>
<Link id="l07492" /><CodeLine lineNumber="7492"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;or:</span></CodeLine>
<Link id="l07493" /><CodeLine lineNumber="7493"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;xor:</span></CodeLine>
<Link id="l07494" /><CodeLine lineNumber="7494"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;xor:</span></CodeLine>
<Link id="l07495" /><CodeLine lineNumber="7495"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;xor:</span></CodeLine>
<Link id="l07496" /><CodeLine lineNumber="7496"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;xor:</span></CodeLine>
<Link id="l07497" /><CodeLine lineNumber="7497"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;inc:</span></CodeLine>
<Link id="l07498" /><CodeLine lineNumber="7498"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;inc:</span></CodeLine>
<Link id="l07499" /><CodeLine lineNumber="7499"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;inc:</span></CodeLine>
<Link id="l07500" /><CodeLine lineNumber="7500"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;inc:</span></CodeLine>
<Link id="l07501" /><CodeLine lineNumber="7501"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;dec:</span></CodeLine>
<Link id="l07502" /><CodeLine lineNumber="7502"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;dec:</span></CodeLine>
<Link id="l07503" /><CodeLine lineNumber="7503"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;dec:</span></CodeLine>
<Link id="l07504" /><CodeLine lineNumber="7504"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;dec:</span></CodeLine>
<Link id="l07505" /><CodeLine lineNumber="7505"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;cmpswap:</span></CodeLine>
<Link id="l07506" /><CodeLine lineNumber="7506"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;cmpswap:</span></CodeLine>
<Link id="l07507" /><CodeLine lineNumber="7507"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;cmpswap:</span></CodeLine>
<Link id="l07508" /><CodeLine lineNumber="7508"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;cmpswap:</span></CodeLine>
<Link id="l07509" /><CodeLine lineNumber="7509"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;fmin:</span></CodeLine>
<Link id="l07510" /><CodeLine lineNumber="7510"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;fmin:</span></CodeLine>
<Link id="l07511" /><CodeLine lineNumber="7511"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;fmin:</span></CodeLine>
<Link id="l07512" /><CodeLine lineNumber="7512"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;fmin:</span></CodeLine>
<Link id="l07513" /><CodeLine lineNumber="7513"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;fmax:</span></CodeLine>
<Link id="l07514" /><CodeLine lineNumber="7514"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;fmax:</span></CodeLine>
<Link id="l07515" /><CodeLine lineNumber="7515"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;fmax:</span></CodeLine>
<Link id="l07516" /><CodeLine lineNumber="7516"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;fmax:</span></CodeLine>
<Link id="l07517" /><CodeLine lineNumber="7517"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;buffer&#95;atomic&#95;fadd:</span></CodeLine>
<Link id="l07518" /><CodeLine lineNumber="7518"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;raw&#95;ptr&#95;buffer&#95;atomic&#95;fadd:</span></CodeLine>
<Link id="l07519" /><CodeLine lineNumber="7519"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;buffer&#95;atomic&#95;fadd:</span></CodeLine>
<Link id="l07520" /><CodeLine lineNumber="7520"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;struct&#95;ptr&#95;buffer&#95;atomic&#95;fadd:</span></CodeLine>
<Link id="l07521" /><CodeLine lineNumber="7521"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a3cc7860fbf211f566f62809ac1144023">legalizeBufferAtomic</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, IntrID);</span></CodeLine>
<Link id="l07522" /><CodeLine lineNumber="7522"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;rsq&#95;clamp:</span></CodeLine>
<Link id="l07523" /><CodeLine lineNumber="7523"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a68b29f4aff8a6db0040bc8e00a520116">legalizeRsqClampIntrinsic</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l07524" /><CodeLine lineNumber="7524"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;image&#95;bvh&#95;intersect&#95;ray:</span></CodeLine>
<Link id="l07525" /><CodeLine lineNumber="7525"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a94974538095721fcce4cf479555bc25c">legalizeBVHIntrinsic</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>);</span></CodeLine>
<Link id="l07526" /><CodeLine lineNumber="7526"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;swmmac&#95;f16&#95;16x16x32&#95;f16:</span></CodeLine>
<Link id="l07527" /><CodeLine lineNumber="7527"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;swmmac&#95;bf16&#95;16x16x32&#95;bf16:</span></CodeLine>
<Link id="l07528" /><CodeLine lineNumber="7528"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;swmmac&#95;f32&#95;16x16x32&#95;bf16:</span></CodeLine>
<Link id="l07529" /><CodeLine lineNumber="7529"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;swmmac&#95;f32&#95;16x16x32&#95;f16:</span></CodeLine>
<Link id="l07530" /><CodeLine lineNumber="7530"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;swmmac&#95;f32&#95;16x16x32&#95;fp8&#95;fp8:</span></CodeLine>
<Link id="l07531" /><CodeLine lineNumber="7531"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;swmmac&#95;f32&#95;16x16x32&#95;fp8&#95;bf8:</span></CodeLine>
<Link id="l07532" /><CodeLine lineNumber="7532"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;swmmac&#95;f32&#95;16x16x32&#95;bf8&#95;fp8:</span></CodeLine>
<Link id="l07533" /><CodeLine lineNumber="7533"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;swmmac&#95;f32&#95;16x16x32&#95;bf8&#95;bf8: &#123;</span></CodeLine>
<Link id="l07534" /><CodeLine lineNumber="7534"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> Index = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5).getReg();</span></CodeLine>
<Link id="l07535" /><CodeLine lineNumber="7535"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l07536" /><CodeLine lineNumber="7536"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Index) != <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l07537" /><CodeLine lineNumber="7537"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5).setReg(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnyExt(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Index).getReg(0));</span></CodeLine>
<Link id="l07538" /><CodeLine lineNumber="7538"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07539" /><CodeLine lineNumber="7539"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l07540" /><CodeLine lineNumber="7540"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;swmmac&#95;i32&#95;16x16x32&#95;iu4:</span></CodeLine>
<Link id="l07541" /><CodeLine lineNumber="7541"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;swmmac&#95;i32&#95;16x16x32&#95;iu8:</span></CodeLine>
<Link id="l07542" /><CodeLine lineNumber="7542"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;swmmac&#95;i32&#95;16x16x64&#95;iu4: &#123;</span></CodeLine>
<Link id="l07543" /><CodeLine lineNumber="7543"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/register">Register</a> Index = <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(7).getReg();</span></CodeLine>
<Link id="l07544" /><CodeLine lineNumber="7544"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/llt">LLT</a> <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a> = <a href="/docs/api/classes/llvm/llt/#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</span></CodeLine>
<Link id="l07545" /><CodeLine lineNumber="7545"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64advsimdscalarpass-cpp/#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.getType(Index) != <a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>)</span></CodeLine>
<Link id="l07546" /><CodeLine lineNumber="7546"><span class="doxyHighlight">      <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(7).setReg(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.buildAnyExt(<a href="#a33c95d7d51d4b0b421aaf3d40796b859">S32</a>, Index).getReg(0));</span></CodeLine>
<Link id="l07547" /><CodeLine lineNumber="7547"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07548" /><CodeLine lineNumber="7548"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l07549" /><CodeLine lineNumber="7549"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;fmed3: &#123;</span></CodeLine>
<Link id="l07550" /><CodeLine lineNumber="7550"><span class="doxyHighlight">    <a href="/docs/api/classes/llvm/giselchangeobserver">GISelChangeObserver</a> &amp;Observer = Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>;</span></CodeLine>
<Link id="l07551" /><CodeLine lineNumber="7551"></CodeLine>
<Link id="l07552" /><CodeLine lineNumber="7552"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// FIXME: This is to workaround the inability of tablegen match combiners to</span></CodeLine>
<Link id="l07553" /><CodeLine lineNumber="7553"><span class="doxyHighlight">    </span><span class="doxyHighlightComment">// match intrinsics in patterns.</span></CodeLine>
<Link id="l07554" /><CodeLine lineNumber="7554"><span class="doxyHighlight">    Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l07555" /><CodeLine lineNumber="7555"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>.getTII().get(AMDGPU::G&#95;AMDGPU&#95;FMED3));</span></CodeLine>
<Link id="l07556" /><CodeLine lineNumber="7556"><span class="doxyHighlight">    <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.removeOperand(1);</span></CodeLine>
<Link id="l07557" /><CodeLine lineNumber="7557"><span class="doxyHighlight">    Observer.<a href="/docs/api/classes/llvm/giselchangeobserver/#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l07558" /><CodeLine lineNumber="7558"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07559" /><CodeLine lineNumber="7559"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l07560" /><CodeLine lineNumber="7560"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;readlane:</span></CodeLine>
<Link id="l07561" /><CodeLine lineNumber="7561"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;writelane:</span></CodeLine>
<Link id="l07562" /><CodeLine lineNumber="7562"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;readfirstlane:</span></CodeLine>
<Link id="l07563" /><CodeLine lineNumber="7563"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;permlane16:</span></CodeLine>
<Link id="l07564" /><CodeLine lineNumber="7564"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;permlanex16:</span></CodeLine>
<Link id="l07565" /><CodeLine lineNumber="7565"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;permlane64:</span></CodeLine>
<Link id="l07566" /><CodeLine lineNumber="7566"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;set&#95;inactive:</span></CodeLine>
<Link id="l07567" /><CodeLine lineNumber="7567"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;set&#95;inactive&#95;chain&#95;arg:</span></CodeLine>
<Link id="l07568" /><CodeLine lineNumber="7568"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;mov&#95;dpp8:</span></CodeLine>
<Link id="l07569" /><CodeLine lineNumber="7569"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;update&#95;dpp:</span></CodeLine>
<Link id="l07570" /><CodeLine lineNumber="7570"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#af4667ecbc4447b41863430fb572d8f82">legalizeLaneOp</a>(Helper, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, IntrID);</span></CodeLine>
<Link id="l07571" /><CodeLine lineNumber="7571"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">case</span><span class="doxyHighlight"> Intrinsic::amdgcn&#95;s&#95;buffer&#95;prefetch&#95;data:</span></CodeLine>
<Link id="l07572" /><CodeLine lineNumber="7572"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#a51ac04efbaa3282a12478341fa0a7b9a">legalizeSBufferPrefetch</a>(Helper, <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</span></CodeLine>
<Link id="l07573" /><CodeLine lineNumber="7573"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">default</span><span class="doxyHighlight">: &#123;</span></CodeLine>
<Link id="l07574" /><CodeLine lineNumber="7574"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">if</span><span class="doxyHighlight"> (</span><span class="doxyHighlightKeyword">const</span><span class="doxyHighlight"> <a href="/docs/api/structs/llvm/amdgpu/imagedimintrinsicinfo">AMDGPU::ImageDimIntrinsicInfo</a> &#42;ImageDimIntr =</span></CodeLine>
<Link id="l07575" /><CodeLine lineNumber="7575"><span class="doxyHighlight">            <a href="/docs/api/namespaces/llvm/amdgpu/#aed8a22d92c99b81842589d3cd66c7bee">AMDGPU::getImageDimIntrinsicInfo</a>(IntrID))</span></CodeLine>
<Link id="l07576" /><CodeLine lineNumber="7576"><span class="doxyHighlight">      </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> <a href="/docs/api/classes/llvm/amdgpulegalizerinfo/#ad0be6e871a184d6f7b814515324eee1b">legalizeImageIntrinsic</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#ae76959fe811ba090de4cba69ac00f1da">B</a>, Helper.<a href="/docs/api/classes/llvm/legalizerhelper/#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>, ImageDimIntr);</span></CodeLine>
<Link id="l07577" /><CodeLine lineNumber="7577"><span class="doxyHighlight">    </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07578" /><CodeLine lineNumber="7578"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l07579" /><CodeLine lineNumber="7579"><span class="doxyHighlight">  &#125;</span></CodeLine>
<Link id="l07580" /><CodeLine lineNumber="7580"></CodeLine>
<Link id="l07581" /><CodeLine lineNumber="7581"><span class="doxyHighlight">  </span><span class="doxyHighlightKeywordFlow">return</span><span class="doxyHighlight"> </span><span class="doxyHighlightKeyword">true</span><span class="doxyHighlight">;</span></CodeLine>
<Link id="l07582" /><CodeLine lineNumber="7582"><span class="doxyHighlight">&#125;</span></CodeLine>

</ProgramListing>


</DoxygenPage>
