---

# DO NOT EDIT!
# Automatically generated via docusaurus-plugin-doxygen by Doxygen.

slug: /api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp
custom_edit_url: null
keywords:
  - doxygen
  - reference
  - file

---

import Link from '@docusaurus/Link'

import CodeLine from '@xpack/docusaurus-plugin-doxygen/components/CodeLine'
import DoxygenPage from '@xpack/docusaurus-plugin-doxygen/components/DoxygenPage'
import Highlight from '@xpack/docusaurus-plugin-doxygen/components/Highlight'
import IncludesList from '@xpack/docusaurus-plugin-doxygen/components/IncludesList'
import IncludesListItem from '@xpack/docusaurus-plugin-doxygen/components/IncludesListItem'
import MemberDefinition from '@xpack/docusaurus-plugin-doxygen/components/MemberDefinition'
import MembersIndex from '@xpack/docusaurus-plugin-doxygen/components/MembersIndex'
import MembersIndexItem from '@xpack/docusaurus-plugin-doxygen/components/MembersIndexItem'
import ProgramListing from '@xpack/docusaurus-plugin-doxygen/components/ProgramListing'
import SectionDefinition from '@xpack/docusaurus-plugin-doxygen/components/SectionDefinition'

import pluginConfig from '@site/docusaurus-plugin-doxygen-config.json'

# The `AddressSanitizer.cpp` File Reference

<DoxygenPage pluginConfig={pluginConfig}>



## Included Headers

<IncludesList>
<IncludesListItem
  filePath="llvm/Transforms/Instrumentation/AddressSanitizer.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/instrumentation/addresssanitizer-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/ArrayRef.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/arrayref-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/DenseMap.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/densemap-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/DepthFirstIterator.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/depthfirstiterator-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/SmallPtrSet.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/smallptrset-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/SmallVector.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/smallvector-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/Statistic.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/StringExtras.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/stringextras-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/StringRef.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/stringref-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/ADT/Twine.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/adt/twine-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/GlobalsModRef.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/globalsmodref-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/MemoryBuiltins.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/memorybuiltins-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/StackSafetyAnalysis.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/stacksafetyanalysis-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/TargetLibraryInfo.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/targetlibraryinfo-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Analysis/ValueTracking.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/analysis/valuetracking-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/BinaryFormat/MachO.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/binaryformat/macho-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Demangle/Demangle.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/demangle/demangle-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Argument.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/argument-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Attributes.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/attributes-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/BasicBlock.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/basicblock-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Comdat.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/comdat-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Constant.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/constant-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Constants.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/constants-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DIBuilder.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/dibuilder-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DataLayout.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/datalayout-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DebugInfoMetadata.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/debuginfometadata-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DebugLoc.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/debugloc-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/DerivedTypes.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/derivedtypes-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/EHPersonalities.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/ehpersonalities-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Function.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/function-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/GlobalAlias.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/globalalias-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/GlobalValue.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/globalvalue-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/GlobalVariable.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/globalvariable-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/IRBuilder.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/irbuilder-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/InlineAsm.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/inlineasm-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/InstVisitor.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/instvisitor-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/InstrTypes.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/instrtypes-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Instruction.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/instruction-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Instructions.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/instructions-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/IntrinsicInst.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/intrinsicinst-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Intrinsics.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/intrinsics-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/LLVMContext.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/llvmcontext-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/MDBuilder.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/mdbuilder-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Metadata.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/metadata-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Module.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/module-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Type.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/type-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Use.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/use-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/IR/Value.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/ir/value-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/MC/MCSectionMachO.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/mc/mcsectionmacho-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Casting.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/casting-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/CommandLine.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/Debug.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/debug-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/ErrorHandling.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/MathExtras.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/mathextras-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Support/raw_ostream.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/support/raw-ostream-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/TargetParser/Triple.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/targetparser/triple-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Instrumentation/AddressSanitizerCommon.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/instrumentation/addresssanitizercommon-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Instrumentation/AddressSanitizerOptions.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/instrumentation/addresssanitizeroptions-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/ASanStackFrameLayout.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/asanstackframelayout-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/BasicBlockUtils.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/basicblockutils-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/Instrumentation.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/instrumentation-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/Local.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/local-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/ModuleUtils.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/moduleutils-h"
  isLocal="true" />
<IncludesListItem
  filePath="llvm/Transforms/Utils/PromoteMemToReg.h"
  permalink="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/promotememtoreg-h"
  isLocal="true" />
<IncludesListItem
  filePath="algorithm"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="cassert"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="cstddef"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="cstdint"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="iomanip"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="limits"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="sstream"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="string"
  permalink=""
  isLocal="false" />
<IncludesListItem
  filePath="tuple"
  permalink=""
  isLocal="false" />
</IncludesList>

## Namespaces Index

<MembersIndex>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/anonymous-addresssanitizer-cpp-">anonymous&#123;AddressSanitizer.cpp&#125;</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="namespace"
  name={<><a href="/docs/api/namespaces/llvm">llvm</a></>}>
This is an optimization pass for GlobalISel generic memory operations. <a href="/docs/api/namespaces/llvm/#details">More...</a>
</MembersIndexItem>

</MembersIndex>

## Classes Index

<MembersIndex>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping">ShadowMapping</a></>}>
This struct defines the shadow mapping using the rule: shadow = (mem &gt;&gt; Scale) ADD-or-OR Offset. <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a></>}>
Helper RAII class to post-process inserted asan runtime calls during a pass on a single <a href="/docs/api/classes/llvm/function">Function</a>. <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer">AddressSanitizer</a></>}>
<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer">AddressSanitizer</a>: instrument the code in module to find memory bugs. <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/functionstateraii">FunctionStateRAII</a></>}>
Helper to cleanup per-function state. <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/functionstateraii/#details">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="class"
  name={<><a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/moduleaddresssanitizer">ModuleAddressSanitizer</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner">FunctionStackPoisoner</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type="struct"
  name={<><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall">AllocaPoisonCall</a></>}>
</MembersIndexItem>

</MembersIndex>

## Functions Index

<MembersIndex>

<MembersIndexItem
  type="void"
  name={<><a href="#a01b9989f797101a150d7a960255adfec">doInstrumentAddress</a> (AddressSanitizer &#42;Pass, Instruction &#42;I, Instruction &#42;InsertBefore, Value &#42;Addr, MaybeAlign Alignment, unsigned Granularity, TypeSize TypeStoreSize, bool IsWrite, Value &#42;SizeArgument, bool UseCalls, uint32&#95;t Exp, RuntimeCallInserter &amp;RTCI)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="void"
  name={<><a href="#a0050ea5bb47a2b75ed9e8239bcd469a6">findStoresToUninstrumentedArgAllocas</a> (AddressSanitizer &amp;ASan, Instruction &amp;InsBefore, SmallVectorImpl&lt; Instruction &#42; &gt; &amp;InitInsts)</>}>
Collect instructions in the entry block after <code>InsBefore</code> which initialize permanent storage for a function argument. <a href="#a0050ea5bb47a2b75ed9e8239bcd469a6">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/twine">Twine</a></>}
  name={<><a href="#a2cd6efecbc36daba036d332c2556b668">genName</a> (StringRef suffix)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint64&#95;t</>}
  name={<><a href="#a30ad890949cdfd6777919b71f4d09dfe">GetCtorAndDtorPriority</a> (Triple &amp;TargetTriple)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>uint64&#95;t</>}
  name={<><a href="#a4ae843502b417fca05b0d9b1ccd9df94">getRedzoneSizeForScale</a> (int MappingScale)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="ShadowMapping"
  name={<><a href="#ac4b45ab450a043187e92eaace7d62018">getShadowMapping</a> (const Triple &amp;TargetTriple, int LongSize, bool IsKasan)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a74f90b5c14043cd0038dc90723eab4c2">GlobalWasGeneratedByCompiler</a> (GlobalVariable &#42;G)</>}>
<a href="/docs/api/namespaces/llvm/check">Check</a> if <code>G</code> has been created by a trusted compiler pass. <a href="#a74f90b5c14043cd0038dc90723eab4c2">More...</a>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a8d829e3f1a798c5c559b716ba05a4d7d">isInterestingPointerComparison</a> (Instruction &#42;I)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a1e0c09290631b1be732e7387c75aca09">isInterestingPointerSubtraction</a> (Instruction &#42;I)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a84925f563ac5648b7a5c359d835cc947">isPointerOperand</a> (Value &#42;V)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="bool"
  name={<><a href="#a66fb0770ddf5f596079ee32ca4b8b599">isUnsupportedAMDGPUAddrspace</a> (Value &#42;Addr)</>}>
</MembersIndexItem>

<MembersIndexItem
  type="int"
  name={<><a href="#a956c8ddbdae78e48e5a76c33430a4ef6">StackMallocSizeClass</a> (uint64&#95;t LocalStackSize)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a70700f8036b11342dbf363f4f81f529f">STATISTIC</a> (NumInstrumentedReads, &quot;Number of instrumented reads&quot;)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a8910bcb5acc6a97247337ab859f77190">STATISTIC</a> (NumInstrumentedWrites, &quot;Number of instrumented writes&quot;)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#a53ff0da5ad7ad5f867f88b745a5afd21">STATISTIC</a> (NumOptimizedAccessesToGlobalVar, &quot;Number of optimized accesses to global vars&quot;)</>}>
</MembersIndexItem>

<MembersIndexItem
  name={<><a href="#aabbeec619cf71418f7195e062894d2dc">STATISTIC</a> (NumOptimizedAccessesToStackVar, &quot;Number of optimized accesses to stack vars&quot;)</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>size&#95;t</>}
  name={<><a href="#adcdff5e32d9b4d801f187d48b106e579">TypeStoreSizeToSizeIndex</a> (uint32&#95;t TypeSize)</>}>
</MembersIndexItem>

</MembersIndex>

## Variables Index

<MembersIndex>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#acfc2efa648ba005caa42cf6f28d82757">ClAlwaysSlowPath</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08">AsanCtorKind</a> &gt;</>}
  name={<><a href="#aca33036eb9649523a6345787acc33d29">ClConstructorKind</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#afcea04380058a94008cda9fc41056a16">ClDebug</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#ae2b0d0345572d6718e219aa76d1d54edab45cffe084dd3d20d928bee85e7b0f21">std::string</a> &gt;</>}
  name={<><a href="#aa14af85369bdb6b331cd00f499d4cf63">ClDebugFunc</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#a8052781b69a1a9e2f58c190a15b67628">ClDebugMax</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#a0dd632512536154ac3d012e7065f2bcf">ClDebugMin</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#a635e0541e4c0f8a4c5faba9e9c94aebc">ClDebugStack</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ab65506fece0b5302fe804c49e6580446">ClDynamicAllocaStack</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#aa09777d1507554d2873581bb83442022">ClEnableKasan</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a25d1ca975f48d54e4290d63829f35a95">ClForceDynamicShadow</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; uint32&#95;t &gt;</>}
  name={<><a href="#a8769662e83dc63443d2cfa743cd8407b">ClForceExperiment</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a37e75a212ee37baa76869a8d0195d9e6">ClGlobals</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ad7ffe665351fede3f8025e2cb84ccc83">ClInitializers</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a2a1656d1f4ddeb386daf49396b178ab3">ClInsertVersionCheck</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#a7b6dcf17e1b173746a4939b677ca1fb0">ClInstrumentationWithCallsThreshold</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a98491b92a3cd11f11c29f752625b136d">ClInstrumentAtomics</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a33190b8a2d49613b79d5374db635dd0a">ClInstrumentByval</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#aacabf2f74c684a07a8d7b499d252f8c9">ClInstrumentDynamicAllocas</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#adc5cd4695253418937546218dbe26922">ClInstrumentReads</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a2df764565c5764a2af608a819cfa2540">ClInstrumentWrites</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a7988b8281b1972c35eb5833f8c23a1a3">ClInvalidPointerCmp</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#afe56a2bdf58d01cf437e1abba61e2830">ClInvalidPointerPairs</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a8398c67027004edc3649be6b6db60eab">ClInvalidPointerSub</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ae49da4e77feeb6c094e35e7c86f5613e">ClKasanMemIntrinCallbackPrefix</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; uint64&#95;t &gt;</>}
  name={<><a href="#aebb74a0c8e6baa32b77d0782e9e911dc">ClMappingOffset</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#a9d0c59216cf72992129adb73dc73ec65">ClMappingScale</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; uint32&#95;t &gt;</>}
  name={<><a href="#a96c36d2e9698f2974735d30dfea6893c">ClMaxInlinePoisoningSize</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; int &gt;</>}
  name={<><a href="#af7099fa6660e94761e7f5b525b330bb2">ClMaxInsnsToInstrumentPerBB</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#ae2b0d0345572d6718e219aa76d1d54edab45cffe084dd3d20d928bee85e7b0f21">std::string</a> &gt;</>}
  name={<><a href="#a27774720f5060297840f5e603fba95f1">ClMemoryAccessCallbackPrefix</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a6d7586f09e72a8d0b38a7b28ce03068c">ClOpt</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#abd03cce0a222ad0e49b3074b9258f894">ClOptGlobals</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a53fdfe303964c0943c25d294cd1cf193">ClOptimizeCallbacks</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ab320a8dd5d6290c1e021de274df4c809">ClOptSameTemp</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ab6e8695312b588ef5a110f33c9beb09c">ClOptStack</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bf">AsanDtorKind</a> &gt;</>}
  name={<><a href="#a2ca87f4ce47405a2ebd8d6e0ab259d65">ClOverrideDestructorKind</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; unsigned &gt;</>}
  name={<><a href="#adbb45684e8c1f7cc79db81a276e70471">ClRealignStack</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ab07c89b5ab3621d59817baefdae128cb">ClRecover</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a3ad807be99d9d4ce4b6a2038719b015c">ClRedzoneByvalArgs</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#aeff4047a82cefd8108f2bc7263e924fa">ClSkipPromotableAllocas</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a9123bbb6c01ba4b0e0ef3547a5132cd1">ClStack</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabd">AsanDetectStackUseAfterReturnMode</a> &gt;</>}
  name={<><a href="#ab96ca2732f7eaecb2e762c9c754f7b37">ClUseAfterReturn</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a9a4fc66faeab43a236796f382e142af4">ClUseAfterScope</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#aa612bd13cbe0dc1e574383f4eddc0760">ClUseGlobalsGC</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a7499c29bb36dd906803322453ac406ad">ClUseOdrIndicator</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a108a44e27f64b25d5be99eab0c12b840">ClUsePrivateAlias</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#af9d879b52ddf70fb1fe578bd5d1c508e">ClUseStackSafety</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#aeded18588e9deea14f9c30eb995da5bb">ClWithComdat</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#ae3d5d96c349d9c866c3641bbadc0554b">ClWithIfunc</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/classes/llvm/cl/opt">cl::opt</a>&lt; bool &gt;</>}
  name={<><a href="#a63147f939444e77f3a294dc59c2939ba">ClWithIfuncSuppressRemat</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#afe1c55791cd733a93d250395352569df">kAArch64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 36</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>size&#95;t</>}
  name={<><a href="#a095b4c60115113ef59a28ffb3a817422">kAccessSizeIndexMask</a> = 0xf</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>size&#95;t</>}
  name={<><a href="#a9bd091ccb08f4fcaef69d6c5f956572a">kAccessSizeIndexShift</a> = 1</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a6da7b2b680f4518d9d5545432e701ba1">kAllocaRzSize</a> = 32</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#ae6098b64cdbf4d809b1f3f86a866c56a">kAMDGPUAddressPrivateName</a> = &quot;llvm.amdgcn.is.private&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a2121416d2692ea7ec2c9522291600a19">kAMDGPUAddressSharedName</a> = &quot;llvm.amdgcn.is.shared&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#ae7f00801ef2ef87699661f1dca513b52">kAMDGPUBallotName</a> = &quot;llvm.amdgcn.ballot.i64&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a0942316ad508b030eec9f8ac3104b964">kAMDGPUUnreachableName</a> = &quot;llvm.amdgcn.unreachable&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#addbdc1734f12bc122f2b204052f426df">kAsanAllocaPoison</a> = &quot;&#95;&#95;asan&#95;alloca&#95;poison&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#afd65995ac50736f33beadc3c0549ce0b">kAsanAllocasUnpoison</a> = &quot;&#95;&#95;asan&#95;allocas&#95;unpoison&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a602962e4e3026aa808d7a026ef6b300f">kAsanCtorAndDtorPriority</a> = 1</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a79c217bbf91742b02797b0c426674dfe">kAsanEmscriptenCtorAndDtorPriority</a> = 50</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a476e7801fbfecbea19d62de9a27e71ae">kAsanGenPrefix</a> = &quot;&#95;&#95;&#95;asan&#95;gen&#95;&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#aae785da38ce552b3ab47791e9abb9fd9">kAsanGlobalsRegisteredFlagName</a> = &quot;&#95;&#95;&#95;asan&#95;globals&#95;registered&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#afa4db1804122bafade11f423f5a483f5">kAsanHandleNoReturnName</a> = &quot;&#95;&#95;asan&#95;handle&#95;no&#95;return&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a361b5f11d7b296279f45007be01c2913">kAsanInitName</a> = &quot;&#95;&#95;asan&#95;init&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#aad3e6eabecd50c9664b21071407c2267">kAsanModuleCtorName</a> = &quot;asan.module&#95;ctor&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a8bcb2cf7d004c924b63f1a9d0dfa2847">kAsanModuleDtorName</a> = &quot;asan.module&#95;dtor&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a27766fe2066043a2c55cc0becdcdd9f1">kAsanOptionDetectUseAfterReturn</a> =
    &quot;&#95;&#95;asan&#95;option&#95;detect&#95;stack&#95;use&#95;after&#95;return&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#af9f3c07d9fc38e3b9ac12f6c4386dad5">kAsanPoisonGlobalsName</a> = &quot;&#95;&#95;asan&#95;before&#95;dynamic&#95;init&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a9de96b20be410e7c2014587a070465d4">kAsanPoisonStackMemoryName</a> = &quot;&#95;&#95;asan&#95;poison&#95;stack&#95;memory&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a2fa18fb24f9feafbd0d0fc1107b131ed">kAsanPtrCmp</a> = &quot;&#95;&#95;sanitizer&#95;ptr&#95;cmp&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#adac38b7a834c74bc8d152337671c1ab7">kAsanPtrSub</a> = &quot;&#95;&#95;sanitizer&#95;ptr&#95;sub&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#aea03f393f423aab3e80a1bf6ee59a3b1">kAsanRegisterElfGlobalsName</a> = &quot;&#95;&#95;asan&#95;register&#95;elf&#95;globals&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#aa9fe31e1276128051e55a18579091356">kAsanRegisterGlobalsName</a> = &quot;&#95;&#95;asan&#95;register&#95;globals&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a6756689ed60e2d83d51a12e960517e19">kAsanRegisterImageGlobalsName</a> = &quot;&#95;&#95;asan&#95;register&#95;image&#95;globals&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#aec7167f84edee7a2c075e1571bab8d8e">kAsanReportErrorTemplate</a> = &quot;&#95;&#95;asan&#95;report&#95;&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a2bec6b8d5a441c0918bbdd1be9df32b3">kAsanSetShadowPrefix</a> = &quot;&#95;&#95;asan&#95;set&#95;shadow&#95;&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a72f82be6c1dbdf567e8dd11251e87000">kAsanShadowMemoryDynamicAddress</a> =
    &quot;&#95;&#95;asan&#95;shadow&#95;memory&#95;dynamic&#95;address&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a21dae1495bdaa52cff0efeff2bb65742">kAsanStackFreeNameTemplate</a> = &quot;&#95;&#95;asan&#95;stack&#95;free&#95;&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a7827de59665600c15eebeb456731627c">kAsanStackMallocAlwaysNameTemplate</a> =
    &quot;&#95;&#95;asan&#95;stack&#95;malloc&#95;always&#95;&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a311ac214c991fe60e693899d731e311e">kAsanStackMallocNameTemplate</a> = &quot;&#95;&#95;asan&#95;stack&#95;malloc&#95;&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a61e87da131e672072ffa897d6c3f954e">kAsanUnpoisonGlobalsName</a> = &quot;&#95;&#95;asan&#95;after&#95;dynamic&#95;init&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#aa6ae2abfa7c1477f42010a614aa2e20b">kAsanUnpoisonStackMemoryName</a> = &quot;&#95;&#95;asan&#95;unpoison&#95;stack&#95;memory&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a652aabcf278acb60ed86440a1489bcf0">kAsanUnregisterElfGlobalsName</a> = &quot;&#95;&#95;asan&#95;unregister&#95;elf&#95;globals&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a5b0465f40b3ec7684fdc252ed5e01ed4">kAsanUnregisterGlobalsName</a> = &quot;&#95;&#95;asan&#95;unregister&#95;globals&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#ab8a40552186ca947c5570a1e9895dcd3">kAsanUnregisterImageGlobalsName</a> =
    &quot;&#95;&#95;asan&#95;unregister&#95;image&#95;globals&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#ae54fd57142396b1edba3f62247d5a176">kAsanVersionCheckNamePrefix</a> = &quot;&#95;&#95;asan&#95;version&#95;mismatch&#95;check&#95;v&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>size&#95;t</>}
  name={<><a href="#a230c7d7ca3e0e9088b709d8ee861c23c">kCompileKernelMask</a> = 0x1</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>size&#95;t</>}
  name={<><a href="#ae065abe1628e445fa1a1a378d8ee0648">kCompileKernelShift</a> = 0</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uintptr&#95;t</>}
  name={<><a href="#abd89ac2b95ec4f9f9b87cf28f156322d">kCurrentStackFrameMagic</a> = 0x41B58AB3</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a7221cab4eb5396f920c432650580815d">kDefaultShadowOffset32</a> = 1ULL &lt;&lt; 29</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a52e0a578af8418ff6a63a4b03d385012">kDefaultShadowOffset64</a> = 1ULL &lt;&lt; 44</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a0825e9eeff024102856e9a30f41bb386">kDefaultShadowScale</a> = 3</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a> =
    std::numeric&#95;limits&lt;uint64&#95;t&gt;::max()</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a40e81ce979aa27fb2789c389719b1d7b">kEmscriptenShadowOffset</a> = 0</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a19c339ea0be179f2cd9a609083711b2d">kFreeBSD&#95;ShadowOffset32</a> = 1ULL &lt;&lt; 30</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a8749ec5f43deb3d657141795f9dbb210">kFreeBSD&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 46</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#ad2b59a0cc04cb42c94cc18e9d5f5ec6b">kFreeBSDAArch64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 47</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a8a860b5741776f43c99ab75b0660e59a">kFreeBSDKasan&#95;ShadowOffset64</a> = 0xdffff7c000000000</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>size&#95;t</>}
  name={<><a href="#a4ac0cc78d7c86822b81df1b7db4338bc">kIsWriteMask</a> = 0x1</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<>size&#95;t</>}
  name={<><a href="#a19deb83e797e941c8400caa50f648a50">kIsWriteShift</a> = 5</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a924de63e7606463a6405a1a7276fa33a">kLinuxKasan&#95;ShadowOffset64</a> = 0xdffffc0000000000</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#aa8e5653e53fa32049d96cebcd3564b15">kLoongArch64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 46</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> int</>}
  name={<><a href="#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a> = 10</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> size&#95;t</>}
  name={<><a href="#aaf5f0e81eb832fe48c6dc33db623a03c">kMaxStackMallocSize</a> = 1 &lt;&lt; 16</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> size&#95;t</>}
  name={<><a href="#afb368a1d773581543db2f164baf7fbdf">kMinStackMallocSize</a> = 1 &lt;&lt; 6</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#ab6f29d0b2de1b74e731e1efbc653f844">kMIPS&#95;ShadowOffsetN32</a> = 1ULL &lt;&lt; 29</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#acda94f3cd0782a06ec8c4035ab6a6ba0">kMIPS32&#95;ShadowOffset32</a> = 0x0aaa0000</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a9141b9519404ab70f9def3fb4e44cbf6">kMIPS64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 37</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#ad16c0ca942afbe549bcfa4f06b2eae12">kNetBSD&#95;ShadowOffset32</a> = 1ULL &lt;&lt; 30</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#ad92d9ebd9f88c5f9fe134d9e2cd329d9">kNetBSD&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 46</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#ae705b5638cfef61445fc086ff309257b">kNetBSDKasan&#95;ShadowOffset64</a> = 0xdfff900000000000</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> size&#95;t</>}
  name={<><a href="#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a> = 5</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a6e54679eb7c171172210d5898f5e2ebc">kODRGenPrefix</a> = &quot;&#95;&#95;odr&#95;asan&#95;gen&#95;&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#ac71a9d13684166ebbd2dc2fae6ada036">kPPC64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 44</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a11a7b9f550cc8f2096e2feb0a6e7d77d">kPS&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 40</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uintptr&#95;t</>}
  name={<><a href="#af955cd27ba6d5632e02d374282c4afae">kRetiredStackFrameMagic</a> = 0x45E0360E</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a2959b7316b7440ef0479456a1f224f95">kRISCV64&#95;ShadowOffset64</a> = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a></>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> char</>}
  name={<><a href="#a89f98c73fceabd5b3e0c1862003f7b6a">kSanCovGenPrefix</a> = &quot;&#95;&#95;sancov&#95;gen&#95;&quot;</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a1bb96936cdfae1973dcbae7e9a6e9afa">kSmallX86&#95;64ShadowOffsetAlignMask</a> = ~0xFFFULL</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#ad4d2d4a3e49a33b6eb2f2d7696f73284">kSmallX86&#95;64ShadowOffsetBase</a> = 0x7FFFFFFF</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a714b1c9d5243d23282452c2ec154bf64">kSystemZ&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 52</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#adc0285e7406db187db7f4b477b888eca">kWindowsShadowOffset32</a> = 3ULL &lt;&lt; 28</>}>
</MembersIndexItem>

<MembersIndexItem
  type={<><a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> uint64&#95;t</>}
  name={<><a href="#a3f40cbca316fdd29c447fc96d7373109">kWindowsShadowOffset64</a> = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a></>}>
</MembersIndexItem>

</MembersIndex>

## Defines Index

<MembersIndex>

<MembersIndexItem
  type="#define"
  name={<><a href="#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG&#95;TYPE</a>&nbsp;&nbsp;&nbsp;&quot;asan&quot;</>}>
</MembersIndexItem>

</MembersIndex>


<SectionDefinition>

## Functions

### doInstrumentAddress() {#a01b9989f797101a150d7a960255adfec}

<MemberDefinition
  prototype={<>static void doInstrumentAddress (AddressSanitizer &#42; Pass, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; I, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; InsertBefore, <a href="/docs/api/classes/llvm/value">Value</a> &#42; Addr, <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment, unsigned Granularity, <a href="/docs/api/classes/llvm/typesize">TypeSize</a> TypeStoreSize, bool IsWrite, <a href="/docs/api/classes/llvm/value">Value</a> &#42; SizeArgument, bool UseCalls, uint32&#95;t Exp, RuntimeCallInserter &amp; RTCI)</>}
  labels = {["static"]}>

Definition at line <a href="#l01604">1604</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### findStoresToUninstrumentedArgAllocas() {#a0050ea5bb47a2b75ed9e8239bcd469a6}

<MemberDefinition
  prototype={<>static void findStoresToUninstrumentedArgAllocas (AddressSanitizer &amp; ASan, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp; InsBefore, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl</a>&lt; <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; &gt; &amp; InitInsts)</>}
  labels = {["static"]}>
Collect instructions in the entry block after <code>InsBefore</code> which initialize permanent storage for a function argument.

These instructions must remain in the entry block so that uninitialized values do not appear in backtraces. An added benefit is that this conserves spill slots. This does not move stores before instrumented / &quot;interesting&quot; allocas.

Definition at line <a href="#l03347">3347</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### genName() {#a2cd6efecbc36daba036d332c2556b668}

<MemberDefinition
  prototype={<>static Twine genName (<a href="/docs/api/classes/llvm/stringref">StringRef</a> suffix)</>}
  labels = {["static"]}>

Definition at line <a href="#l00645">645</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### GetCtorAndDtorPriority() {#a30ad890949cdfd6777919b71f4d09dfe}

<MemberDefinition
  prototype={<>static uint64&#95;t GetCtorAndDtorPriority (<a href="/docs/api/classes/llvm/triple">Triple</a> &amp; TargetTriple)</>}
  labels = {["static"]}>

Definition at line <a href="#l00637">637</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### getRedzoneSizeForScale() {#a4ae843502b417fca05b0d9b1ccd9df94}

<MemberDefinition
  prototype={<>static uint64&#95;t getRedzoneSizeForScale (int MappingScale)</>}
  labels = {["static"]}>

Definition at line <a href="#l00631">631</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### getShadowMapping() {#ac4b45ab450a043187e92eaace7d62018}

<MemberDefinition
  prototype={<>static ShadowMapping getShadowMapping (<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64promoteconstant-cpp/#a90f8350fecae261c25be85d38b451bff">const</a> <a href="/docs/api/classes/llvm/triple">Triple</a> &amp; TargetTriple, int LongSize, bool IsKasan)</>}
  labels = {["static"]}>

Definition at line <a href="#l00478">478</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### GlobalWasGeneratedByCompiler() {#a74f90b5c14043cd0038dc90723eab4c2}

<MemberDefinition
  prototype={<>static bool GlobalWasGeneratedByCompiler (<a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42; G)</>}
  labels = {["static"]}>
<a href="/docs/api/namespaces/llvm/check">Check</a> if <code>G</code> has been created by a trusted compiler pass.

Definition at line <a href="#l01301">1301</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### isInterestingPointerComparison() {#a8d829e3f1a798c5c559b716ba05a4d7d}

<MemberDefinition
  prototype={<>static bool isInterestingPointerComparison (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; I)</>}
  labels = {["static"]}>

Definition at line <a href="#l01554">1554</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### isInterestingPointerSubtraction() {#a1e0c09290631b1be732e7387c75aca09}

<MemberDefinition
  prototype={<>static bool isInterestingPointerSubtraction (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42; I)</>}
  labels = {["static"]}>

Definition at line <a href="#l01568">1568</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### isPointerOperand() {#a84925f563ac5648b7a5c359d835cc947}

<MemberDefinition
  prototype={<>static bool isPointerOperand (<a href="/docs/api/classes/llvm/value">Value</a> &#42; V)</>}
  labels = {["static"]}>

Definition at line <a href="#l01547">1547</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### isUnsupportedAMDGPUAddrspace() {#a66fb0770ddf5f596079ee32ca4b8b599}

<MemberDefinition
  prototype={<>static bool isUnsupportedAMDGPUAddrspace (<a href="/docs/api/classes/llvm/value">Value</a> &#42; Addr)</>}
  labels = {["static"]}>

Definition at line <a href="#l01319">1319</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### StackMallocSizeClass() {#a956c8ddbdae78e48e5a76c33430a4ef6}

<MemberDefinition
  prototype={<>static int StackMallocSizeClass (uint64&#95;t LocalStackSize)</>}
  labels = {["static"]}>

Definition at line <a href="#l03241">3241</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### STATISTIC() {#a70700f8036b11342dbf363f4f81f529f}

<MemberDefinition
  prototype={<>STATISTIC (NumInstrumentedReads, &quot;Number of instrumented reads&quot;)</>}>

Definition at line <a href="#l00455">455</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### STATISTIC() {#a8910bcb5acc6a97247337ab859f77190}

<MemberDefinition
  prototype={<>STATISTIC (NumInstrumentedWrites, &quot;Number of instrumented writes&quot;)</>}>

Definition at line <a href="#l00456">456</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### STATISTIC() {#a53ff0da5ad7ad5f867f88b745a5afd21}

<MemberDefinition
  prototype={<>STATISTIC (NumOptimizedAccessesToGlobalVar, &quot;Number of optimized accesses to global vars&quot;)</>}>

Definition at line <a href="#l00457">457</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### STATISTIC() {#aabbeec619cf71418f7195e062894d2dc}

<MemberDefinition
  prototype={<>STATISTIC (NumOptimizedAccessesToStackVar, &quot;Number of optimized accesses to stack vars&quot;)</>}>

Definition at line <a href="#l00459">459</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### TypeStoreSizeToSizeIndex() {#adcdff5e32d9b4d801f187d48b106e579}

<MemberDefinition
  prototype={<>static size&#95;t TypeStoreSizeToSizeIndex (uint32&#95;t TypeSize)</>}
  labels = {["static"]}>

Definition at line <a href="#l01294">1294</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Variables

### ClAlwaysSlowPath {#acfc2efa648ba005caa42cf6f28d82757}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClAlwaysSlowPath(&quot;asan-always-slow-path&quot;, cl::desc(&quot;use instrumentation with slow path for all accesses&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00234">234</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClConstructorKind {#aca33036eb9649523a6345787acc33d29}

<MemberDefinition
  prototype={<>cl::opt&lt; AsanCtorKind &gt; ClConstructorKind(&quot;asan-constructor-kind&quot;, cl::desc(&quot;Sets the ASan constructor kind&quot;), cl::values(clEnumValN(AsanCtorKind::None, &quot;none&quot;, &quot;No constructors&quot;), clEnumValN(AsanCtorKind::Global, &quot;global&quot;, &quot;Use global constructors&quot;)), cl::init(AsanCtorKind::Global), cl::Hidden)</>}
  labels = {["static"]}>

Definition at line <a href="#l00354">354</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClDebug {#afcea04380058a94008cda9fc41056a16}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClDebug(&quot;asan-debug&quot;, cl::desc(&quot;debug&quot;), cl::Hidden, cl::init(0))</>}
  labels = {["static"]}>

Definition at line <a href="#l00440">440</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClDebugFunc {#aa14af85369bdb6b331cd00f499d4cf63}

<MemberDefinition
  prototype={<>cl::opt&lt; std::string &gt; ClDebugFunc(&quot;asan-debug-func&quot;, cl::Hidden, cl::desc(&quot;Debug func&quot;))</>}
  labels = {["static"]}>

Definition at line <a href="#l00446">446</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClDebugMax {#a8052781b69a1a9e2f58c190a15b67628}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClDebugMax(&quot;asan-debug-max&quot;, cl::desc(&quot;Debug max inst&quot;), cl::Hidden, cl::init(-1))</>}
  labels = {["static"]}>

Definition at line <a href="#l00452">452</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClDebugMin {#a0dd632512536154ac3d012e7065f2bcf}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClDebugMin(&quot;asan-debug-min&quot;, cl::desc(&quot;Debug min inst&quot;), cl::Hidden, cl::init(-1))</>}
  labels = {["static"]}>

Definition at line <a href="#l00449">449</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClDebugStack {#a635e0541e4c0f8a4c5faba9e9c94aebc}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClDebugStack(&quot;asan-debug-stack&quot;, cl::desc(&quot;debug stack&quot;), cl::Hidden, cl::init(0))</>}
  labels = {["static"]}>

Definition at line <a href="#l00443">443</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClDynamicAllocaStack {#ab65506fece0b5302fe804c49e6580446}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClDynamicAllocaStack(&quot;asan-stack-dynamic-alloca&quot;, cl::desc(&quot;Use dynamic alloca to represent stack variables&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00396">396</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClEnableKasan {#aa09777d1507554d2873581bb83442022}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClEnableKasan(&quot;asan-kernel&quot;, cl::desc(&quot;Enable KernelAddressSanitizer instrumentation&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00196">196</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClForceDynamicShadow {#a25d1ca975f48d54e4290d63829f35a95}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClForceDynamicShadow(&quot;asan-force-dynamic-shadow&quot;, cl::desc(&quot;Load shadow address into a local variable for each function&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00239">239</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClForceExperiment {#a8769662e83dc63443d2cfa743cd8407b}

<MemberDefinition
  prototype={<>cl::opt&lt; uint32&#95;t &gt; ClForceExperiment(&quot;asan-force-experiment&quot;, cl::desc(&quot;Force optimization experiment (for testing)&quot;), cl::Hidden, cl::init(0))</>}
  labels = {["static"]}>

Definition at line <a href="#l00401">401</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClGlobals {#a37e75a212ee37baa76869a8d0195d9e6}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClGlobals(&quot;asan-globals&quot;, cl::desc(&quot;Handle global objects&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00299">299</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInitializers {#ad7ffe665351fede3f8025e2cb84ccc83}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInitializers(&quot;asan-initialization-order&quot;, cl::desc(&quot;Handle C++ initializer order&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00303">303</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInsertVersionCheck {#a2a1656d1f4ddeb386daf49396b178ab3}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInsertVersionCheck(&quot;asan-guard-against-version-mismatch&quot;, cl::desc(&quot;Guard against compiler/runtime version mismatch.&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00205">205</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInstrumentationWithCallsThreshold {#a7b6dcf17e1b173746a4939b677ca1fb0}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClInstrumentationWithCallsThreshold(&quot;asan-instrumentation-with-call-threshold&quot;, cl::desc(&quot;If the function being instrumented contains more than &quot; &quot;this number of memory accesses, use callbacks instead of &quot; &quot;inline checks (-1 means never use callbacks).&quot;), cl::Hidden, cl::init(7000))</>}
  labels = {["static"]}>

Definition at line <a href="#l00327">327</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInstrumentAtomics {#a98491b92a3cd11f11c29f752625b136d}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInstrumentAtomics(&quot;asan-instrument-atomics&quot;, cl::desc(&quot;instrument atomic instructions (rmw, cmpxchg)&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00224">224</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInstrumentByval {#a33190b8a2d49613b79d5374db635dd0a}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInstrumentByval(&quot;asan-instrument-byval&quot;, cl::desc(&quot;instrument byval call arguments&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00230">230</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInstrumentDynamicAllocas {#aacabf2f74c684a07a8d7b499d252f8c9}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInstrumentDynamicAllocas(&quot;asan-instrument-dynamic-allocas&quot;, cl::desc(&quot;instrument dynamic allocas&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00345">345</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInstrumentReads {#adc5cd4695253418937546218dbe26922}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInstrumentReads(&quot;asan-instrument-reads&quot;, cl::desc(&quot;instrument read instructions&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00211">211</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInstrumentWrites {#a2df764565c5764a2af608a819cfa2540}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInstrumentWrites(&quot;asan-instrument-writes&quot;, cl::desc(&quot;instrument write instructions&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00215">215</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInvalidPointerCmp {#a7988b8281b1972c35eb5833f8c23a1a3}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInvalidPointerCmp(&quot;asan-detect-invalid-pointer-cmp&quot;, cl::desc(&quot;Instrument &lt;, &lt;=, &gt;, &gt;= with pointer operands&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00312">312</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInvalidPointerPairs {#afe56a2bdf58d01cf437e1abba61e2830}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInvalidPointerPairs(&quot;asan-detect-invalid-pointer-pair&quot;, cl::desc(&quot;Instrument &lt;, &lt;=, &gt;, &gt;=, - with pointer operands&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00307">307</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClInvalidPointerSub {#a8398c67027004edc3649be6b6db60eab}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClInvalidPointerSub(&quot;asan-detect-invalid-pointer-sub&quot;, cl::desc(&quot;Instrument - operations with pointer operands&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00317">317</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClKasanMemIntrinCallbackPrefix {#ae49da4e77feeb6c094e35e7c86f5613e}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClKasanMemIntrinCallbackPrefix(&quot;asan-kernel-mem-intrinsic-prefix&quot;, cl::desc(&quot;Use prefix for memory intrinsics in KASAN mode&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00339">339</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClMappingOffset {#aebb74a0c8e6baa32b77d0782e9e911dc}

<MemberDefinition
  prototype={<>cl::opt&lt; uint64&#95;t &gt; ClMappingOffset(&quot;asan-mapping-offset&quot;, cl::desc(&quot;offset of asan shadow mapping &#91;EXPERIMENTAL&#93;&quot;), cl::Hidden, cl::init(0))</>}
  labels = {["static"]}>

Definition at line <a href="#l00370">370</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClMappingScale {#a9d0c59216cf72992129adb73dc73ec65}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClMappingScale(&quot;asan-mapping-scale&quot;, cl::desc(&quot;scale of asan shadow mapping&quot;), cl::Hidden, cl::init(0))</>}
  labels = {["static"]}>

Definition at line <a href="#l00365">365</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClMaxInlinePoisoningSize {#a96c36d2e9698f2974735d30dfea6893c}

<MemberDefinition
  prototype={<>cl::opt&lt; uint32&#95;t &gt; ClMaxInlinePoisoningSize(&quot;asan-max-inline-poisoning-size&quot;, cl::desc( &quot;Inline shadow poisoning for blocks up to the given size in bytes.&quot;), cl::Hidden, cl::init(64))</>}
  labels = {["static"]}>

Definition at line <a href="#l00268">268</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClMaxInsnsToInstrumentPerBB {#af7099fa6660e94761e7f5b525b330bb2}

<MemberDefinition
  prototype={<>cl::opt&lt; int &gt; ClMaxInsnsToInstrumentPerBB(&quot;asan-max-ins-per-bb&quot;, cl::init(10000), cl::desc(&quot;maximal number of instructions to instrument in any given BB&quot;), cl::Hidden)</>}
  labels = {["static"]}>

Definition at line <a href="#l00260">260</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClMemoryAccessCallbackPrefix {#a27774720f5060297840f5e603fba95f1}

<MemberDefinition
  prototype={<>cl::opt&lt; std::string &gt; ClMemoryAccessCallbackPrefix(&quot;asan-memory-access-callback-prefix&quot;, cl::desc(&quot;Prefix for memory access callbacks&quot;), cl::Hidden, cl::init(&quot;&#95;&#95;asan&#95;&quot;))</>}
  labels = {["static"]}>

Definition at line <a href="#l00334">334</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClOpt {#a6d7586f09e72a8d0b38a7b28ce03068c}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClOpt(&quot;asan-opt&quot;, cl::desc(&quot;Optimize instrumentation&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00377">377</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClOptGlobals {#abd03cce0a222ad0e49b3074b9258f894}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClOptGlobals(&quot;asan-opt-globals&quot;, cl::desc(&quot;Don&#39;t instrument scalar globals&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00388">388</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClOptimizeCallbacks {#a53fdfe303964c0943c25d294cd1cf193}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClOptimizeCallbacks(&quot;asan-optimize-callbacks&quot;, cl::desc(&quot;Optimize callbacks&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00380">380</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClOptSameTemp {#ab320a8dd5d6290c1e021de274df4c809}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClOptSameTemp(&quot;asan-opt-same-temp&quot;, cl::desc(&quot;Instrument the same temp just once&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00384">384</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClOptStack {#ab6e8695312b588ef5a110f33c9beb09c}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClOptStack(&quot;asan-opt-stack&quot;, cl::desc(&quot;Don&#39;t instrument scalar stack variables&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00392">392</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClOverrideDestructorKind {#a2ca87f4ce47405a2ebd8d6e0ab259d65}

<MemberDefinition
  prototype={<>cl::opt&lt; AsanDtorKind &gt; ClOverrideDestructorKind(&quot;asan-destructor-kind&quot;, cl::desc(&quot;Sets the ASan destructor kind. The default is to use the value &quot; &quot;provided to the pass constructor&quot;), cl::values(clEnumValN(AsanDtorKind::None, &quot;none&quot;, &quot;No destructors&quot;), clEnumValN(AsanDtorKind::Global, &quot;global&quot;, &quot;Use global destructors&quot;)), cl::init(AsanDtorKind::Invalid), cl::Hidden)</>}
  labels = {["static"]}>

Definition at line <a href="#l00429">429</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClRealignStack {#adbb45684e8c1f7cc79db81a276e70471}

<MemberDefinition
  prototype={<>cl::opt&lt; unsigned &gt; ClRealignStack(&quot;asan-realign-stack&quot;, cl::desc(&quot;Realign stack to the value of this flag (power of two)&quot;), cl::Hidden, cl::init(32))</>}
  labels = {["static"]}>

Definition at line <a href="#l00322">322</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClRecover {#ab07c89b5ab3621d59817baefdae128cb}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClRecover(&quot;asan-recover&quot;, cl::desc(&quot;Enable recovery mode (continue-after-error).&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00200">200</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClRedzoneByvalArgs {#a3ad807be99d9d4ce4b6a2038719b015c}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClRedzoneByvalArgs(&quot;asan-redzone-byval-args&quot;, cl::desc(&quot;Create redzones for byval &quot; &quot;arguments (extra copy &quot; &quot;required)&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00288">288</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClSkipPromotableAllocas {#aeff4047a82cefd8108f2bc7263e924fa}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClSkipPromotableAllocas(&quot;asan-skip-promotable-allocas&quot;, cl::desc(&quot;Do not instrument promotable allocas&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00349">349</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClStack {#a9123bbb6c01ba4b0e0ef3547a5132cd1}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClStack(&quot;asan-stack&quot;, cl::desc(&quot;Handle stack memory&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00266">266</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClUseAfterReturn {#ab96ca2732f7eaecb2e762c9c754f7b37}

<MemberDefinition
  prototype={<>cl::opt&lt; AsanDetectStackUseAfterReturnMode &gt; ClUseAfterReturn(&quot;asan-use-after-return&quot;, cl::desc(&quot;Sets the mode of detection for stack-use-after-return.&quot;), cl::values( clEnumValN(AsanDetectStackUseAfterReturnMode::Never, &quot;never&quot;, &quot;Never detect stack use after return.&quot;), clEnumValN( AsanDetectStackUseAfterReturnMode::Runtime, &quot;runtime&quot;, &quot;Detect stack use after return if &quot; &quot;binary flag &#39;ASAN&#95;OPTIONS=detect&#95;stack&#95;use&#95;after&#95;return&#39; is set.&quot;), clEnumValN(AsanDetectStackUseAfterReturnMode::Always, &quot;always&quot;, &quot;Always detect stack use after return.&quot;)), cl::Hidden, cl::init(AsanDetectStackUseAfterReturnMode::Runtime))</>}
  labels = {["static"]}>

Definition at line <a href="#l00274">274</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClUseAfterScope {#a9a4fc66faeab43a236796f382e142af4}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClUseAfterScope(&quot;asan-use-after-scope&quot;, cl::desc(&quot;Check stack-use-after-scope&quot;), cl::Hidden, cl::init(false))</>}
  labels = {["static"]}>

Definition at line <a href="#l00294">294</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClUseGlobalsGC {#aa612bd13cbe0dc1e574383f4eddc0760}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClUseGlobalsGC(&quot;asan-globals-live-support&quot;, cl::desc(&quot;Use linker features to support dead &quot; &quot;code stripping of globals&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00417">417</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClUseOdrIndicator {#a7499c29bb36dd906803322453ac406ad}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClUseOdrIndicator(&quot;asan-use-odr-indicator&quot;, cl::desc(&quot;Use odr indicators to improve ODR reporting&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00412">412</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClUsePrivateAlias {#a108a44e27f64b25d5be99eab0c12b840}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClUsePrivateAlias(&quot;asan-use-private-alias&quot;, cl::desc(&quot;Use private aliases for global variables&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00407">407</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClUseStackSafety {#af9d879b52ddf70fb1fe578bd5d1c508e}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClUseStackSafety(&quot;asan-use-stack-safety&quot;, cl::Hidden, cl::init(true), cl::Hidden, cl::desc(&quot;Use Stack Safety analysis results&quot;), cl::Optional)</>}
  labels = {["static"]}>

Definition at line <a href="#l00220">220</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClWithComdat {#aeded18588e9deea14f9c30eb995da5bb}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClWithComdat(&quot;asan-with-comdat&quot;, cl::desc(&quot;Place ASan constructors in comdat sections&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00425">425</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClWithIfunc {#ae3d5d96c349d9c866c3641bbadc0554b}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClWithIfunc(&quot;asan-with-ifunc&quot;, cl::desc(&quot;Access dynamic shadow through an ifunc global on &quot; &quot;platforms that support this&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00245">245</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### ClWithIfuncSuppressRemat {#a63147f939444e77f3a294dc59c2939ba}

<MemberDefinition
  prototype={<>cl::opt&lt; bool &gt; ClWithIfuncSuppressRemat(&quot;asan-with-ifunc-suppress-remat&quot;, cl::desc(&quot;Suppress rematerialization of dynamic shadow address by passing &quot; &quot;it through inline asm in prologue.&quot;), cl::Hidden, cl::init(true))</>}
  labels = {["static"]}>

Definition at line <a href="#l00250">250</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAArch64&#95;ShadowOffset64 {#afe1c55791cd733a93d250395352569df}

<MemberDefinition
  prototype={<>const uint64&#95;t kAArch64&#95;ShadowOffset64 = 1ULL &lt;&lt; 36</>}
  labels = {["static"]}>

Definition at line <a href="#l00109">109</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAccessSizeIndexMask {#a095b4c60115113ef59a28ffb3a817422}

<MemberDefinition
  prototype={<>size&#95;t kAccessSizeIndexMask = 0xf</>}
  labels = {["constexpr"]}>

Definition at line <a href="#l00190">190</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAccessSizeIndexShift {#a9bd091ccb08f4fcaef69d6c5f956572a}

<MemberDefinition
  prototype={<>size&#95;t kAccessSizeIndexShift = 1</>}
  labels = {["constexpr"]}>

Definition at line <a href="#l00189">189</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAllocaRzSize {#a6da7b2b680f4518d9d5545432e701ba1}

<MemberDefinition
  prototype={<>const uint64&#95;t kAllocaRzSize = 32</>}
  labels = {["static"]}>

Definition at line <a href="#l00184">184</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAMDGPUAddressPrivateName {#ae6098b64cdbf4d809b1f3f86a866c56a}

<MemberDefinition
  prototype={<>const char kAMDGPUAddressPrivateName&#91;&#93; = &quot;llvm.amdgcn.is.private&quot;</>}>

Definition at line <a href="#l00177">177</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAMDGPUAddressSharedName {#a2121416d2692ea7ec2c9522291600a19}

<MemberDefinition
  prototype={<>const char kAMDGPUAddressSharedName&#91;&#93; = &quot;llvm.amdgcn.is.shared&quot;</>}>

Definition at line <a href="#l00176">176</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAMDGPUBallotName {#ae7f00801ef2ef87699661f1dca513b52}

<MemberDefinition
  prototype={<>const char kAMDGPUBallotName&#91;&#93; = &quot;llvm.amdgcn.ballot.i64&quot;</>}>

Definition at line <a href="#l00178">178</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAMDGPUUnreachableName {#a0942316ad508b030eec9f8ac3104b964}

<MemberDefinition
  prototype={<>const char kAMDGPUUnreachableName&#91;&#93; = &quot;llvm.amdgcn.unreachable&quot;</>}>

Definition at line <a href="#l00179">179</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanAllocaPoison {#addbdc1734f12bc122f2b204052f426df}

<MemberDefinition
  prototype={<>const char kAsanAllocaPoison&#91;&#93; = &quot;&#95;&#95;asan&#95;alloca&#95;poison&quot;</>}>

Definition at line <a href="#l00173">173</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanAllocasUnpoison {#afd65995ac50736f33beadc3c0549ce0b}

<MemberDefinition
  prototype={<>const char kAsanAllocasUnpoison&#91;&#93; = &quot;&#95;&#95;asan&#95;allocas&#95;unpoison&quot;</>}>

Definition at line <a href="#l00174">174</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanCtorAndDtorPriority {#a602962e4e3026aa808d7a026ef6b300f}

<MemberDefinition
  prototype={<>const uint64&#95;t kAsanCtorAndDtorPriority = 1</>}
  labels = {["static"]}>

Definition at line <a href="#l00133">133</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanEmscriptenCtorAndDtorPriority {#a79c217bbf91742b02797b0c426674dfe}

<MemberDefinition
  prototype={<>const uint64&#95;t kAsanEmscriptenCtorAndDtorPriority = 50</>}
  labels = {["static"]}>

Definition at line <a href="#l00135">135</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanGenPrefix {#a476e7801fbfecbea19d62de9a27e71ae}

<MemberDefinition
  prototype={<>const char kAsanGenPrefix&#91;&#93; = &quot;&#95;&#95;&#95;asan&#95;gen&#95;&quot;</>}>

Definition at line <a href="#l00156">156</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanGlobalsRegisteredFlagName {#aae785da38ce552b3ab47791e9abb9fd9}

<MemberDefinition
  prototype={<>const char kAsanGlobalsRegisteredFlagName&#91;&#93; = &quot;&#95;&#95;&#95;asan&#95;globals&#95;registered&quot;</>}>

Definition at line <a href="#l00165">165</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanHandleNoReturnName {#afa4db1804122bafade11f423f5a483f5}

<MemberDefinition
  prototype={<>const char kAsanHandleNoReturnName&#91;&#93; = &quot;&#95;&#95;asan&#95;handle&#95;no&#95;return&quot;</>}>

Definition at line <a href="#l00150">150</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanInitName {#a361b5f11d7b296279f45007be01c2913}

<MemberDefinition
  prototype={<>const char kAsanInitName&#91;&#93; = &quot;&#95;&#95;asan&#95;init&quot;</>}>

Definition at line <a href="#l00146">146</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanModuleCtorName {#aad3e6eabecd50c9664b21071407c2267}

<MemberDefinition
  prototype={<>const char kAsanModuleCtorName&#91;&#93; = &quot;asan.module&#95;ctor&quot;</>}>

Definition at line <a href="#l00131">131</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanModuleDtorName {#a8bcb2cf7d004c924b63f1a9d0dfa2847}

<MemberDefinition
  prototype={<>const char kAsanModuleDtorName&#91;&#93; = &quot;asan.module&#95;dtor&quot;</>}>

Definition at line <a href="#l00132">132</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanOptionDetectUseAfterReturn {#a27766fe2066043a2c55cc0becdcdd9f1}

<MemberDefinition
  prototype={<>const char kAsanOptionDetectUseAfterReturn&#91;&#93; =
    &quot;&#95;&#95;asan&#95;option&#95;detect&#95;stack&#95;use&#95;after&#95;return&quot;</>}>

Definition at line <a href="#l00167">167</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanPoisonGlobalsName {#af9f3c07d9fc38e3b9ac12f6c4386dad5}

<MemberDefinition
  prototype={<>const char kAsanPoisonGlobalsName&#91;&#93; = &quot;&#95;&#95;asan&#95;before&#95;dynamic&#95;init&quot;</>}>

Definition at line <a href="#l00144">144</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanPoisonStackMemoryName {#a9de96b20be410e7c2014587a070465d4}

<MemberDefinition
  prototype={<>const char kAsanPoisonStackMemoryName&#91;&#93; = &quot;&#95;&#95;asan&#95;poison&#95;stack&#95;memory&quot;</>}>

Definition at line <a href="#l00160">160</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanPtrCmp {#a2fa18fb24f9feafbd0d0fc1107b131ed}

<MemberDefinition
  prototype={<>const char kAsanPtrCmp&#91;&#93; = &quot;&#95;&#95;sanitizer&#95;ptr&#95;cmp&quot;</>}>

Definition at line <a href="#l00148">148</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanPtrSub {#adac38b7a834c74bc8d152337671c1ab7}

<MemberDefinition
  prototype={<>const char kAsanPtrSub&#91;&#93; = &quot;&#95;&#95;sanitizer&#95;ptr&#95;sub&quot;</>}>

Definition at line <a href="#l00149">149</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanRegisterElfGlobalsName {#aea03f393f423aab3e80a1bf6ee59a3b1}

<MemberDefinition
  prototype={<>const char kAsanRegisterElfGlobalsName&#91;&#93; = &quot;&#95;&#95;asan&#95;register&#95;elf&#95;globals&quot;</>}>

Definition at line <a href="#l00142">142</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanRegisterGlobalsName {#aa9fe31e1276128051e55a18579091356}

<MemberDefinition
  prototype={<>const char kAsanRegisterGlobalsName&#91;&#93; = &quot;&#95;&#95;asan&#95;register&#95;globals&quot;</>}>

Definition at line <a href="#l00137">137</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanRegisterImageGlobalsName {#a6756689ed60e2d83d51a12e960517e19}

<MemberDefinition
  prototype={<>const char kAsanRegisterImageGlobalsName&#91;&#93; = &quot;&#95;&#95;asan&#95;register&#95;image&#95;globals&quot;</>}>

Definition at line <a href="#l00139">139</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanReportErrorTemplate {#aec7167f84edee7a2c075e1571bab8d8e}

<MemberDefinition
  prototype={<>const char kAsanReportErrorTemplate&#91;&#93; = &quot;&#95;&#95;asan&#95;report&#95;&quot;</>}>

Definition at line <a href="#l00136">136</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanSetShadowPrefix {#a2bec6b8d5a441c0918bbdd1be9df32b3}

<MemberDefinition
  prototype={<>const char kAsanSetShadowPrefix&#91;&#93; = &quot;&#95;&#95;asan&#95;set&#95;shadow&#95;&quot;</>}>

Definition at line <a href="#l00159">159</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanShadowMemoryDynamicAddress {#a72f82be6c1dbdf567e8dd11251e87000}

<MemberDefinition
  prototype={<>const char kAsanShadowMemoryDynamicAddress&#91;&#93; =
    &quot;&#95;&#95;asan&#95;shadow&#95;memory&#95;dynamic&#95;address&quot;</>}>

Definition at line <a href="#l00170">170</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanStackFreeNameTemplate {#a21dae1495bdaa52cff0efeff2bb65742}

<MemberDefinition
  prototype={<>const char kAsanStackFreeNameTemplate&#91;&#93; = &quot;&#95;&#95;asan&#95;stack&#95;free&#95;&quot;</>}>

Definition at line <a href="#l00155">155</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanStackMallocAlwaysNameTemplate {#a7827de59665600c15eebeb456731627c}

<MemberDefinition
  prototype={<>const char kAsanStackMallocAlwaysNameTemplate&#91;&#93; =
    &quot;&#95;&#95;asan&#95;stack&#95;malloc&#95;always&#95;&quot;</>}>

Definition at line <a href="#l00153">153</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanStackMallocNameTemplate {#a311ac214c991fe60e693899d731e311e}

<MemberDefinition
  prototype={<>const char kAsanStackMallocNameTemplate&#91;&#93; = &quot;&#95;&#95;asan&#95;stack&#95;malloc&#95;&quot;</>}>

Definition at line <a href="#l00152">152</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanUnpoisonGlobalsName {#a61e87da131e672072ffa897d6c3f954e}

<MemberDefinition
  prototype={<>const char kAsanUnpoisonGlobalsName&#91;&#93; = &quot;&#95;&#95;asan&#95;after&#95;dynamic&#95;init&quot;</>}>

Definition at line <a href="#l00145">145</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanUnpoisonStackMemoryName {#aa6ae2abfa7c1477f42010a614aa2e20b}

<MemberDefinition
  prototype={<>const char kAsanUnpoisonStackMemoryName&#91;&#93; = &quot;&#95;&#95;asan&#95;unpoison&#95;stack&#95;memory&quot;</>}>

Definition at line <a href="#l00161">161</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanUnregisterElfGlobalsName {#a652aabcf278acb60ed86440a1489bcf0}

<MemberDefinition
  prototype={<>const char kAsanUnregisterElfGlobalsName&#91;&#93; = &quot;&#95;&#95;asan&#95;unregister&#95;elf&#95;globals&quot;</>}>

Definition at line <a href="#l00143">143</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanUnregisterGlobalsName {#a5b0465f40b3ec7684fdc252ed5e01ed4}

<MemberDefinition
  prototype={<>const char kAsanUnregisterGlobalsName&#91;&#93; = &quot;&#95;&#95;asan&#95;unregister&#95;globals&quot;</>}>

Definition at line <a href="#l00138">138</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanUnregisterImageGlobalsName {#ab8a40552186ca947c5570a1e9895dcd3}

<MemberDefinition
  prototype={<>const char kAsanUnregisterImageGlobalsName&#91;&#93; =
    &quot;&#95;&#95;asan&#95;unregister&#95;image&#95;globals&quot;</>}>

Definition at line <a href="#l00140">140</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kAsanVersionCheckNamePrefix {#ae54fd57142396b1edba3f62247d5a176}

<MemberDefinition
  prototype={<>const char kAsanVersionCheckNamePrefix&#91;&#93; = &quot;&#95;&#95;asan&#95;version&#95;mismatch&#95;check&#95;v&quot;</>}>

Definition at line <a href="#l00147">147</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kCompileKernelMask {#a230c7d7ca3e0e9088b709d8ee861c23c}

<MemberDefinition
  prototype={<>size&#95;t kCompileKernelMask = 0x1</>}
  labels = {["constexpr"]}>

Definition at line <a href="#l00188">188</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kCompileKernelShift {#ae065abe1628e445fa1a1a378d8ee0648}

<MemberDefinition
  prototype={<>size&#95;t kCompileKernelShift = 0</>}
  labels = {["constexpr"]}>

Definition at line <a href="#l00187">187</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kCurrentStackFrameMagic {#abd89ac2b95ec4f9f9b87cf28f156322d}

<MemberDefinition
  prototype={<>const uintptr&#95;t kCurrentStackFrameMagic = 0x41B58AB3</>}
  labels = {["static"]}>

Definition at line <a href="#l00128">128</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kDefaultShadowOffset32 {#a7221cab4eb5396f920c432650580815d}

<MemberDefinition
  prototype={<>const uint64&#95;t kDefaultShadowOffset32 = 1ULL &lt;&lt; 29</>}
  labels = {["static"]}>

Definition at line <a href="#l00097">97</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kDefaultShadowOffset64 {#a52e0a578af8418ff6a63a4b03d385012}

<MemberDefinition
  prototype={<>const uint64&#95;t kDefaultShadowOffset64 = 1ULL &lt;&lt; 44</>}
  labels = {["static"]}>

Definition at line <a href="#l00098">98</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kDefaultShadowScale {#a0825e9eeff024102856e9a30f41bb386}

<MemberDefinition
  prototype={<>const uint64&#95;t kDefaultShadowScale = 3</>}
  labels = {["static"]}>

Definition at line <a href="#l00096">96</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kDynamicShadowSentinel {#a8d1135f2ee91e5d486647a37f8074dcc}

<MemberDefinition
  prototype={<>const uint64&#95;t kDynamicShadowSentinel =
    std::numeric&#95;limits&lt;uint64&#95;t&gt;::max()</>}
  labels = {["static"]}>

Definition at line <a href="#l00099">99</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kEmscriptenShadowOffset {#a40e81ce979aa27fb2789c389719b1d7b}

<MemberDefinition
  prototype={<>const uint64&#95;t kEmscriptenShadowOffset = 0</>}
  labels = {["static"]}>

Definition at line <a href="#l00121">121</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kFreeBSD&#95;ShadowOffset32 {#a19c339ea0be179f2cd9a609083711b2d}

<MemberDefinition
  prototype={<>const uint64&#95;t kFreeBSD&#95;ShadowOffset32 = 1ULL &lt;&lt; 30</>}
  labels = {["static"]}>

Definition at line <a href="#l00112">112</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kFreeBSD&#95;ShadowOffset64 {#a8749ec5f43deb3d657141795f9dbb210}

<MemberDefinition
  prototype={<>const uint64&#95;t kFreeBSD&#95;ShadowOffset64 = 1ULL &lt;&lt; 46</>}
  labels = {["static"]}>

Definition at line <a href="#l00113">113</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kFreeBSDAArch64&#95;ShadowOffset64 {#ad2b59a0cc04cb42c94cc18e9d5f5ec6b}

<MemberDefinition
  prototype={<>const uint64&#95;t kFreeBSDAArch64&#95;ShadowOffset64 = 1ULL &lt;&lt; 47</>}
  labels = {["static"]}>

Definition at line <a href="#l00114">114</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kFreeBSDKasan&#95;ShadowOffset64 {#a8a860b5741776f43c99ab75b0660e59a}

<MemberDefinition
  prototype={<>const uint64&#95;t kFreeBSDKasan&#95;ShadowOffset64 = 0xdffff7c000000000</>}
  labels = {["static"]}>

Definition at line <a href="#l00115">115</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kIsWriteMask {#a4ac0cc78d7c86822b81df1b7db4338bc}

<MemberDefinition
  prototype={<>size&#95;t kIsWriteMask = 0x1</>}
  labels = {["constexpr"]}>

Definition at line <a href="#l00192">192</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kIsWriteShift {#a19deb83e797e941c8400caa50f648a50}

<MemberDefinition
  prototype={<>size&#95;t kIsWriteShift = 5</>}
  labels = {["constexpr"]}>

Definition at line <a href="#l00191">191</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kLinuxKasan&#95;ShadowOffset64 {#a924de63e7606463a6405a1a7276fa33a}

<MemberDefinition
  prototype={<>const uint64&#95;t kLinuxKasan&#95;ShadowOffset64 = 0xdffffc0000000000</>}
  labels = {["static"]}>

Definition at line <a href="#l00103">103</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kLoongArch64&#95;ShadowOffset64 {#aa8e5653e53fa32049d96cebcd3564b15}

<MemberDefinition
  prototype={<>const uint64&#95;t kLoongArch64&#95;ShadowOffset64 = 1ULL &lt;&lt; 46</>}
  labels = {["static"]}>

Definition at line <a href="#l00110">110</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kMaxAsanStackMallocSizeClass {#acba05c6df950ff8712fa2194a2b83c87}

<MemberDefinition
  prototype="const int kMaxAsanStackMallocSizeClass = 10"
  labels = {["static"]}>

Definition at line <a href="#l00151">151</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kMaxStackMallocSize {#aaf5f0e81eb832fe48c6dc33db623a03c}

<MemberDefinition
  prototype={<>const size&#95;t kMaxStackMallocSize = 1 &lt;&lt; 16</>}
  labels = {["static"]}>

Definition at line <a href="#l00127">127</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kMinStackMallocSize {#afb368a1d773581543db2f164baf7fbdf}

<MemberDefinition
  prototype={<>const size&#95;t kMinStackMallocSize = 1 &lt;&lt; 6</>}
  labels = {["static"]}>

Definition at line <a href="#l00126">126</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kMIPS&#95;ShadowOffsetN32 {#ab6f29d0b2de1b74e731e1efbc653f844}

<MemberDefinition
  prototype={<>const uint64&#95;t kMIPS&#95;ShadowOffsetN32 = 1ULL &lt;&lt; 29</>}
  labels = {["static"]}>

Definition at line <a href="#l00106">106</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kMIPS32&#95;ShadowOffset32 {#acda94f3cd0782a06ec8c4035ab6a6ba0}

<MemberDefinition
  prototype={<>const uint64&#95;t kMIPS32&#95;ShadowOffset32 = 0x0aaa0000</>}
  labels = {["static"]}>

Definition at line <a href="#l00107">107</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kMIPS64&#95;ShadowOffset64 {#a9141b9519404ab70f9def3fb4e44cbf6}

<MemberDefinition
  prototype={<>const uint64&#95;t kMIPS64&#95;ShadowOffset64 = 1ULL &lt;&lt; 37</>}
  labels = {["static"]}>

Definition at line <a href="#l00108">108</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kNetBSD&#95;ShadowOffset32 {#ad16c0ca942afbe549bcfa4f06b2eae12}

<MemberDefinition
  prototype={<>const uint64&#95;t kNetBSD&#95;ShadowOffset32 = 1ULL &lt;&lt; 30</>}
  labels = {["static"]}>

Definition at line <a href="#l00116">116</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kNetBSD&#95;ShadowOffset64 {#ad92d9ebd9f88c5f9fe134d9e2cd329d9}

<MemberDefinition
  prototype={<>const uint64&#95;t kNetBSD&#95;ShadowOffset64 = 1ULL &lt;&lt; 46</>}
  labels = {["static"]}>

Definition at line <a href="#l00117">117</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kNetBSDKasan&#95;ShadowOffset64 {#ae705b5638cfef61445fc086ff309257b}

<MemberDefinition
  prototype={<>const uint64&#95;t kNetBSDKasan&#95;ShadowOffset64 = 0xdfff900000000000</>}
  labels = {["static"]}>

Definition at line <a href="#l00118">118</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kNumberOfAccessSizes {#aa62a4d0672bab180dd339cda25b23b2e}

<MemberDefinition
  prototype={<>const size&#95;t kNumberOfAccessSizes = 5</>}
  labels = {["static"]}>

Definition at line <a href="#l00182">182</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kODRGenPrefix {#a6e54679eb7c171172210d5898f5e2ebc}

<MemberDefinition
  prototype={<>const char kODRGenPrefix&#91;&#93; = &quot;&#95;&#95;odr&#95;asan&#95;gen&#95;&quot;</>}>

Definition at line <a href="#l00157">157</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kPPC64&#95;ShadowOffset64 {#ac71a9d13684166ebbd2dc2fae6ada036}

<MemberDefinition
  prototype={<>const uint64&#95;t kPPC64&#95;ShadowOffset64 = 1ULL &lt;&lt; 44</>}
  labels = {["static"]}>

Definition at line <a href="#l00104">104</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kPS&#95;ShadowOffset64 {#a11a7b9f550cc8f2096e2feb0a6e7d77d}

<MemberDefinition
  prototype={<>const uint64&#95;t kPS&#95;ShadowOffset64 = 1ULL &lt;&lt; 40</>}
  labels = {["static"]}>

Definition at line <a href="#l00119">119</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kRetiredStackFrameMagic {#af955cd27ba6d5632e02d374282c4afae}

<MemberDefinition
  prototype={<>const uintptr&#95;t kRetiredStackFrameMagic = 0x45E0360E</>}
  labels = {["static"]}>

Definition at line <a href="#l00129">129</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kRISCV64&#95;ShadowOffset64 {#a2959b7316b7440ef0479456a1f224f95}

<MemberDefinition
  prototype={<>const uint64&#95;t kRISCV64&#95;ShadowOffset64 = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a></>}
  labels = {["static"]}>

Definition at line <a href="#l00111">111</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kSanCovGenPrefix {#a89f98c73fceabd5b3e0c1862003f7b6a}

<MemberDefinition
  prototype={<>const char kSanCovGenPrefix&#91;&#93; = &quot;&#95;&#95;sancov&#95;gen&#95;&quot;</>}>

Definition at line <a href="#l00158">158</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kSmallX86&#95;64ShadowOffsetAlignMask {#a1bb96936cdfae1973dcbae7e9a6e9afa}

<MemberDefinition
  prototype={<>const uint64&#95;t kSmallX86&#95;64ShadowOffsetAlignMask = ~0xFFFULL</>}
  labels = {["static"]}>

Definition at line <a href="#l00102">102</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kSmallX86&#95;64ShadowOffsetBase {#ad4d2d4a3e49a33b6eb2f2d7696f73284}

<MemberDefinition
  prototype={<>const uint64&#95;t kSmallX86&#95;64ShadowOffsetBase = 0x7FFFFFFF</>}
  labels = {["static"]}>

Definition at line <a href="#l00101">101</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kSystemZ&#95;ShadowOffset64 {#a714b1c9d5243d23282452c2ec154bf64}

<MemberDefinition
  prototype={<>const uint64&#95;t kSystemZ&#95;ShadowOffset64 = 1ULL &lt;&lt; 52</>}
  labels = {["static"]}>

Definition at line <a href="#l00105">105</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kWindowsShadowOffset32 {#adc0285e7406db187db7f4b477b888eca}

<MemberDefinition
  prototype={<>const uint64&#95;t kWindowsShadowOffset32 = 3ULL &lt;&lt; 28</>}
  labels = {["static"]}>

Definition at line <a href="#l00120">120</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

### kWindowsShadowOffset64 {#a3f40cbca316fdd29c447fc96d7373109}

<MemberDefinition
  prototype={<>const uint64&#95;t kWindowsShadowOffset64 = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a></>}
  labels = {["static"]}>

Definition at line <a href="#l00124">124</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

<SectionDefinition>

## Defines

### DEBUG&#95;TYPE {#ad78e062f62e0d6e453941fb4ca843e4d}

<MemberDefinition
  prototype={<>#define DEBUG&#95;TYPE&nbsp;&nbsp;&nbsp;&quot;asan&quot;</>}>

Definition at line <a href="#l00094">94</a> of file <a href="/docs/api/files/lib/lib/transforms/lib/transforms/instrumentation/addresssanitizer-cpp">AddressSanitizer.cpp</a>.
</MemberDefinition>

</SectionDefinition>

## File Listing

The file content with the documentation metadata removed is:

<ProgramListing>

<Link id="l00001" /><CodeLine lineNumber="1"><Highlight kind="comment">//===- AddressSanitizer.cpp - memory error detector -----------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00002" /><CodeLine lineNumber="2"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00003" /><CodeLine lineNumber="3"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00004" /><CodeLine lineNumber="4"><Highlight kind="normal"></Highlight><Highlight kind="comment">// See https://llvm.org/LICENSE.txt for license information.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00005" /><CodeLine lineNumber="5"><Highlight kind="normal"></Highlight><Highlight kind="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00006" /><CodeLine lineNumber="6"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00007" /><CodeLine lineNumber="7"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00008" /><CodeLine lineNumber="8"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00009" /><CodeLine lineNumber="9"><Highlight kind="normal"></Highlight><Highlight kind="comment">// This file is a part of AddressSanitizer, an address basic correctness</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00010" /><CodeLine lineNumber="10"><Highlight kind="normal"></Highlight><Highlight kind="comment">// checker.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00011" /><CodeLine lineNumber="11"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Details of the algorithm:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00012" /><CodeLine lineNumber="12"><Highlight kind="normal"></Highlight><Highlight kind="comment">//  https://github.com/google/sanitizers/wiki/AddressSanitizerAlgorithm</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00013" /><CodeLine lineNumber="13"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00014" /><CodeLine lineNumber="14"><Highlight kind="normal"></Highlight><Highlight kind="comment">// FIXME: This sanitizer does not yet handle scalable vectors</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00015" /><CodeLine lineNumber="15"><Highlight kind="normal"></Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00016" /><CodeLine lineNumber="16"><Highlight kind="normal"></Highlight><Highlight kind="comment">//===----------------------------------------------------------------------===//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00017" /><CodeLine lineNumber="17"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00018" /><CodeLine lineNumber="18"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/instrumentation/addresssanitizer-h">llvm/Transforms/Instrumentation/AddressSanitizer.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00019" /><CodeLine lineNumber="19"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/arrayref-h">llvm/ADT/ArrayRef.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00020" /><CodeLine lineNumber="20"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/densemap-h">llvm/ADT/DenseMap.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00021" /><CodeLine lineNumber="21"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/depthfirstiterator-h">llvm/ADT/DepthFirstIterator.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00022" /><CodeLine lineNumber="22"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/smallptrset-h">llvm/ADT/SmallPtrSet.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00023" /><CodeLine lineNumber="23"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/smallvector-h">llvm/ADT/SmallVector.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00024" /><CodeLine lineNumber="24"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h">llvm/ADT/Statistic.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00025" /><CodeLine lineNumber="25"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/stringextras-h">llvm/ADT/StringExtras.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00026" /><CodeLine lineNumber="26"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/stringref-h">llvm/ADT/StringRef.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00027" /><CodeLine lineNumber="27"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/adt/twine-h">llvm/ADT/Twine.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00028" /><CodeLine lineNumber="28"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/globalsmodref-h">llvm/Analysis/GlobalsModRef.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00029" /><CodeLine lineNumber="29"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/memorybuiltins-h">llvm/Analysis/MemoryBuiltins.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00030" /><CodeLine lineNumber="30"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/stacksafetyanalysis-h">llvm/Analysis/StackSafetyAnalysis.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00031" /><CodeLine lineNumber="31"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/targetlibraryinfo-h">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00032" /><CodeLine lineNumber="32"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/analysis/valuetracking-h">llvm/Analysis/ValueTracking.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00033" /><CodeLine lineNumber="33"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/binaryformat/macho-h">llvm/BinaryFormat/MachO.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00034" /><CodeLine lineNumber="34"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/demangle/demangle-h">llvm/Demangle/Demangle.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00035" /><CodeLine lineNumber="35"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/argument-h">llvm/IR/Argument.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00036" /><CodeLine lineNumber="36"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/attributes-h">llvm/IR/Attributes.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00037" /><CodeLine lineNumber="37"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/basicblock-h">llvm/IR/BasicBlock.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00038" /><CodeLine lineNumber="38"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/comdat-h">llvm/IR/Comdat.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00039" /><CodeLine lineNumber="39"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/constant-h">llvm/IR/Constant.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00040" /><CodeLine lineNumber="40"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/constants-h">llvm/IR/Constants.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00041" /><CodeLine lineNumber="41"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/dibuilder-h">llvm/IR/DIBuilder.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00042" /><CodeLine lineNumber="42"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/datalayout-h">llvm/IR/DataLayout.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00043" /><CodeLine lineNumber="43"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/debuginfometadata-h">llvm/IR/DebugInfoMetadata.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00044" /><CodeLine lineNumber="44"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/debugloc-h">llvm/IR/DebugLoc.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00045" /><CodeLine lineNumber="45"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/derivedtypes-h">llvm/IR/DerivedTypes.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00046" /><CodeLine lineNumber="46"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/ehpersonalities-h">llvm/IR/EHPersonalities.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00047" /><CodeLine lineNumber="47"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/function-h">llvm/IR/Function.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00048" /><CodeLine lineNumber="48"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/globalalias-h">llvm/IR/GlobalAlias.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00049" /><CodeLine lineNumber="49"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/globalvalue-h">llvm/IR/GlobalValue.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00050" /><CodeLine lineNumber="50"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/globalvariable-h">llvm/IR/GlobalVariable.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00051" /><CodeLine lineNumber="51"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/irbuilder-h">llvm/IR/IRBuilder.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00052" /><CodeLine lineNumber="52"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/inlineasm-h">llvm/IR/InlineAsm.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00053" /><CodeLine lineNumber="53"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/instvisitor-h">llvm/IR/InstVisitor.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00054" /><CodeLine lineNumber="54"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/instrtypes-h">llvm/IR/InstrTypes.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00055" /><CodeLine lineNumber="55"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/instruction-h">llvm/IR/Instruction.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00056" /><CodeLine lineNumber="56"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/instructions-h">llvm/IR/Instructions.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00057" /><CodeLine lineNumber="57"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/intrinsicinst-h">llvm/IR/IntrinsicInst.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00058" /><CodeLine lineNumber="58"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/intrinsics-h">llvm/IR/Intrinsics.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00059" /><CodeLine lineNumber="59"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/llvmcontext-h">llvm/IR/LLVMContext.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00060" /><CodeLine lineNumber="60"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/mdbuilder-h">llvm/IR/MDBuilder.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00061" /><CodeLine lineNumber="61"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/metadata-h">llvm/IR/Metadata.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00062" /><CodeLine lineNumber="62"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/module-h">llvm/IR/Module.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00063" /><CodeLine lineNumber="63"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/type-h">llvm/IR/Type.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00064" /><CodeLine lineNumber="64"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/use-h">llvm/IR/Use.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00065" /><CodeLine lineNumber="65"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/ir/value-h">llvm/IR/Value.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00066" /><CodeLine lineNumber="66"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/mc/mcsectionmacho-h">llvm/MC/MCSectionMachO.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00067" /><CodeLine lineNumber="67"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/casting-h">llvm/Support/Casting.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00068" /><CodeLine lineNumber="68"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h">llvm/Support/CommandLine.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00069" /><CodeLine lineNumber="69"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h">llvm/Support/Debug.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00070" /><CodeLine lineNumber="70"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h">llvm/Support/ErrorHandling.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00071" /><CodeLine lineNumber="71"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/mathextras-h">llvm/Support/MathExtras.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00072" /><CodeLine lineNumber="72"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/support/raw-ostream-h">llvm/Support/raw&#95;ostream.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00073" /><CodeLine lineNumber="73"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/targetparser/triple-h">llvm/TargetParser/Triple.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00074" /><CodeLine lineNumber="74"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/instrumentation/addresssanitizercommon-h">llvm/Transforms/Instrumentation/AddressSanitizerCommon.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00075" /><CodeLine lineNumber="75"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/instrumentation/addresssanitizeroptions-h">llvm/Transforms/Instrumentation/AddressSanitizerOptions.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00076" /><CodeLine lineNumber="76"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/asanstackframelayout-h">llvm/Transforms/Utils/ASanStackFrameLayout.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00077" /><CodeLine lineNumber="77"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/basicblockutils-h">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00078" /><CodeLine lineNumber="78"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/instrumentation-h">llvm/Transforms/Utils/Instrumentation.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00079" /><CodeLine lineNumber="79"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/local-h">llvm/Transforms/Utils/Local.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00080" /><CodeLine lineNumber="80"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/moduleutils-h">llvm/Transforms/Utils/ModuleUtils.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00081" /><CodeLine lineNumber="81"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &quot;<a href="/docs/api/files/include/include/llvm/include/llvm/transforms/include/llvm/transforms/utils/promotememtoreg-h">llvm/Transforms/Utils/PromoteMemToReg.h</a>&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00082" /><CodeLine lineNumber="82"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;algorithm&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00083" /><CodeLine lineNumber="83"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;cassert&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00084" /><CodeLine lineNumber="84"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;cstddef&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00085" /><CodeLine lineNumber="85"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;cstdint&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00086" /><CodeLine lineNumber="86"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;iomanip&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00087" /><CodeLine lineNumber="87"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;limits&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00088" /><CodeLine lineNumber="88"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;sstream&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00089" /><CodeLine lineNumber="89"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;string&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00090" /><CodeLine lineNumber="90"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#include &lt;tuple&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00091" /><CodeLine lineNumber="91"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00092" /><CodeLine lineNumber="92"><Highlight kind="normal"></Highlight><Highlight kind="keyword">using namespace </Highlight><Highlight kind="normal"><a href="/docs/api/namespaces/llvm">llvm</a>;</Highlight></CodeLine>
<Link id="l00093" /><CodeLine lineNumber="93"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00094" /><CodeLine lineNumber="94" lineLink="#ad78e062f62e0d6e453941fb4ca843e4d"><Highlight kind="normal"></Highlight><Highlight kind="preprocessor">#define DEBUG&#95;TYPE &quot;asan&quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00095" /><CodeLine lineNumber="95"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00096" /><CodeLine lineNumber="96" lineLink="#a0825e9eeff024102856e9a30f41bb386"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a0825e9eeff024102856e9a30f41bb386">kDefaultShadowScale</a> = 3;</Highlight></CodeLine>
<Link id="l00097" /><CodeLine lineNumber="97" lineLink="#a7221cab4eb5396f920c432650580815d"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a7221cab4eb5396f920c432650580815d">kDefaultShadowOffset32</a> = 1ULL &lt;&lt; 29;</Highlight></CodeLine>
<Link id="l00098" /><CodeLine lineNumber="98" lineLink="#a52e0a578af8418ff6a63a4b03d385012"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a52e0a578af8418ff6a63a4b03d385012">kDefaultShadowOffset64</a> = 1ULL &lt;&lt; 44;</Highlight></CodeLine>
<Link id="l00099" /><CodeLine lineNumber="99" lineLink="#a8d1135f2ee91e5d486647a37f8074dcc"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a> =</Highlight></CodeLine>
<Link id="l00100" /><CodeLine lineNumber="100"><Highlight kind="normal">    std::numeric&#95;limits&lt;uint64&#95;t&gt;::max();</Highlight></CodeLine>
<Link id="l00101" /><CodeLine lineNumber="101" lineLink="#ad4d2d4a3e49a33b6eb2f2d7696f73284"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#ad4d2d4a3e49a33b6eb2f2d7696f73284">kSmallX86&#95;64ShadowOffsetBase</a> = 0x7FFFFFFF;  </Highlight><Highlight kind="comment">// &lt; 2G.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00102" /><CodeLine lineNumber="102" lineLink="#a1bb96936cdfae1973dcbae7e9a6e9afa"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a1bb96936cdfae1973dcbae7e9a6e9afa">kSmallX86&#95;64ShadowOffsetAlignMask</a> = ~0xFFFULL;</Highlight></CodeLine>
<Link id="l00103" /><CodeLine lineNumber="103" lineLink="#a924de63e7606463a6405a1a7276fa33a"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a924de63e7606463a6405a1a7276fa33a">kLinuxKasan&#95;ShadowOffset64</a> = 0xdffffc0000000000;</Highlight></CodeLine>
<Link id="l00104" /><CodeLine lineNumber="104" lineLink="#ac71a9d13684166ebbd2dc2fae6ada036"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#ac71a9d13684166ebbd2dc2fae6ada036">kPPC64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 44;</Highlight></CodeLine>
<Link id="l00105" /><CodeLine lineNumber="105" lineLink="#a714b1c9d5243d23282452c2ec154bf64"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a714b1c9d5243d23282452c2ec154bf64">kSystemZ&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 52;</Highlight></CodeLine>
<Link id="l00106" /><CodeLine lineNumber="106" lineLink="#ab6f29d0b2de1b74e731e1efbc653f844"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#ab6f29d0b2de1b74e731e1efbc653f844">kMIPS&#95;ShadowOffsetN32</a> = 1ULL &lt;&lt; 29;</Highlight></CodeLine>
<Link id="l00107" /><CodeLine lineNumber="107" lineLink="#acda94f3cd0782a06ec8c4035ab6a6ba0"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#acda94f3cd0782a06ec8c4035ab6a6ba0">kMIPS32&#95;ShadowOffset32</a> = 0x0aaa0000;</Highlight></CodeLine>
<Link id="l00108" /><CodeLine lineNumber="108" lineLink="#a9141b9519404ab70f9def3fb4e44cbf6"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a9141b9519404ab70f9def3fb4e44cbf6">kMIPS64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 37;</Highlight></CodeLine>
<Link id="l00109" /><CodeLine lineNumber="109" lineLink="#afe1c55791cd733a93d250395352569df"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#afe1c55791cd733a93d250395352569df">kAArch64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 36;</Highlight></CodeLine>
<Link id="l00110" /><CodeLine lineNumber="110" lineLink="#aa8e5653e53fa32049d96cebcd3564b15"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#aa8e5653e53fa32049d96cebcd3564b15">kLoongArch64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 46;</Highlight></CodeLine>
<Link id="l00111" /><CodeLine lineNumber="111" lineLink="#a2959b7316b7440ef0479456a1f224f95"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a2959b7316b7440ef0479456a1f224f95">kRISCV64&#95;ShadowOffset64</a> = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>;</Highlight></CodeLine>
<Link id="l00112" /><CodeLine lineNumber="112" lineLink="#a19c339ea0be179f2cd9a609083711b2d"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a19c339ea0be179f2cd9a609083711b2d">kFreeBSD&#95;ShadowOffset32</a> = 1ULL &lt;&lt; 30;</Highlight></CodeLine>
<Link id="l00113" /><CodeLine lineNumber="113" lineLink="#a8749ec5f43deb3d657141795f9dbb210"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a8749ec5f43deb3d657141795f9dbb210">kFreeBSD&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 46;</Highlight></CodeLine>
<Link id="l00114" /><CodeLine lineNumber="114" lineLink="#ad2b59a0cc04cb42c94cc18e9d5f5ec6b"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#ad2b59a0cc04cb42c94cc18e9d5f5ec6b">kFreeBSDAArch64&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 47;</Highlight></CodeLine>
<Link id="l00115" /><CodeLine lineNumber="115" lineLink="#a8a860b5741776f43c99ab75b0660e59a"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a8a860b5741776f43c99ab75b0660e59a">kFreeBSDKasan&#95;ShadowOffset64</a> = 0xdffff7c000000000;</Highlight></CodeLine>
<Link id="l00116" /><CodeLine lineNumber="116" lineLink="#ad16c0ca942afbe549bcfa4f06b2eae12"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#ad16c0ca942afbe549bcfa4f06b2eae12">kNetBSD&#95;ShadowOffset32</a> = 1ULL &lt;&lt; 30;</Highlight></CodeLine>
<Link id="l00117" /><CodeLine lineNumber="117" lineLink="#ad92d9ebd9f88c5f9fe134d9e2cd329d9"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#ad92d9ebd9f88c5f9fe134d9e2cd329d9">kNetBSD&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 46;</Highlight></CodeLine>
<Link id="l00118" /><CodeLine lineNumber="118" lineLink="#ae705b5638cfef61445fc086ff309257b"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#ae705b5638cfef61445fc086ff309257b">kNetBSDKasan&#95;ShadowOffset64</a> = 0xdfff900000000000;</Highlight></CodeLine>
<Link id="l00119" /><CodeLine lineNumber="119" lineLink="#a11a7b9f550cc8f2096e2feb0a6e7d77d"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a11a7b9f550cc8f2096e2feb0a6e7d77d">kPS&#95;ShadowOffset64</a> = 1ULL &lt;&lt; 40;</Highlight></CodeLine>
<Link id="l00120" /><CodeLine lineNumber="120" lineLink="#adc0285e7406db187db7f4b477b888eca"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#adc0285e7406db187db7f4b477b888eca">kWindowsShadowOffset32</a> = 3ULL &lt;&lt; 28;</Highlight></CodeLine>
<Link id="l00121" /><CodeLine lineNumber="121" lineLink="#a40e81ce979aa27fb2789c389719b1d7b"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a40e81ce979aa27fb2789c389719b1d7b">kEmscriptenShadowOffset</a> = 0;</Highlight></CodeLine>
<Link id="l00122" /><CodeLine lineNumber="122"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00123" /><CodeLine lineNumber="123"><Highlight kind="normal"></Highlight><Highlight kind="comment">// The shadow memory space is dynamically allocated.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00124" /><CodeLine lineNumber="124" lineLink="#a3f40cbca316fdd29c447fc96d7373109"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a3f40cbca316fdd29c447fc96d7373109">kWindowsShadowOffset64</a> = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>;</Highlight></CodeLine>
<Link id="l00125" /><CodeLine lineNumber="125"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00126" /><CodeLine lineNumber="126" lineLink="#afb368a1d773581543db2f164baf7fbdf"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> <a href="#afb368a1d773581543db2f164baf7fbdf">kMinStackMallocSize</a> = 1 &lt;&lt; 6;   </Highlight><Highlight kind="comment">// 64B</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00127" /><CodeLine lineNumber="127" lineLink="#aaf5f0e81eb832fe48c6dc33db623a03c"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> <a href="#aaf5f0e81eb832fe48c6dc33db623a03c">kMaxStackMallocSize</a> = 1 &lt;&lt; 16;  </Highlight><Highlight kind="comment">// 64K</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00128" /><CodeLine lineNumber="128" lineLink="#abd89ac2b95ec4f9f9b87cf28f156322d"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uintptr&#95;t <a href="#abd89ac2b95ec4f9f9b87cf28f156322d">kCurrentStackFrameMagic</a> = 0x41B58AB3;</Highlight></CodeLine>
<Link id="l00129" /><CodeLine lineNumber="129" lineLink="#af955cd27ba6d5632e02d374282c4afae"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uintptr&#95;t <a href="#af955cd27ba6d5632e02d374282c4afae">kRetiredStackFrameMagic</a> = 0x45E0360E;</Highlight></CodeLine>
<Link id="l00130" /><CodeLine lineNumber="130"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00131" /><CodeLine lineNumber="131" lineLink="#aad3e6eabecd50c9664b21071407c2267"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#aad3e6eabecd50c9664b21071407c2267">kAsanModuleCtorName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;asan.module&#95;ctor&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00132" /><CodeLine lineNumber="132" lineLink="#a8bcb2cf7d004c924b63f1a9d0dfa2847"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a8bcb2cf7d004c924b63f1a9d0dfa2847">kAsanModuleDtorName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;asan.module&#95;dtor&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00133" /><CodeLine lineNumber="133" lineLink="#a602962e4e3026aa808d7a026ef6b300f"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a602962e4e3026aa808d7a026ef6b300f">kAsanCtorAndDtorPriority</a> = 1;</Highlight></CodeLine>
<Link id="l00134" /><CodeLine lineNumber="134"><Highlight kind="normal"></Highlight><Highlight kind="comment">// On Emscripten, the system needs more than one priorities for constructors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00135" /><CodeLine lineNumber="135" lineLink="#a79c217bbf91742b02797b0c426674dfe"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a79c217bbf91742b02797b0c426674dfe">kAsanEmscriptenCtorAndDtorPriority</a> = 50;</Highlight></CodeLine>
<Link id="l00136" /><CodeLine lineNumber="136" lineLink="#aec7167f84edee7a2c075e1571bab8d8e"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#aec7167f84edee7a2c075e1571bab8d8e">kAsanReportErrorTemplate</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;report&#95;&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00137" /><CodeLine lineNumber="137" lineLink="#aa9fe31e1276128051e55a18579091356"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#aa9fe31e1276128051e55a18579091356">kAsanRegisterGlobalsName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;register&#95;globals&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00138" /><CodeLine lineNumber="138" lineLink="#a5b0465f40b3ec7684fdc252ed5e01ed4"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a5b0465f40b3ec7684fdc252ed5e01ed4">kAsanUnregisterGlobalsName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;unregister&#95;globals&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00139" /><CodeLine lineNumber="139" lineLink="#a6756689ed60e2d83d51a12e960517e19"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a6756689ed60e2d83d51a12e960517e19">kAsanRegisterImageGlobalsName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;register&#95;image&#95;globals&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00140" /><CodeLine lineNumber="140" lineLink="#ab8a40552186ca947c5570a1e9895dcd3"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#ab8a40552186ca947c5570a1e9895dcd3">kAsanUnregisterImageGlobalsName</a>&#91;&#93; =</Highlight></CodeLine>
<Link id="l00141" /><CodeLine lineNumber="141"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;unregister&#95;image&#95;globals&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00142" /><CodeLine lineNumber="142" lineLink="#aea03f393f423aab3e80a1bf6ee59a3b1"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#aea03f393f423aab3e80a1bf6ee59a3b1">kAsanRegisterElfGlobalsName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;register&#95;elf&#95;globals&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00143" /><CodeLine lineNumber="143" lineLink="#a652aabcf278acb60ed86440a1489bcf0"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a652aabcf278acb60ed86440a1489bcf0">kAsanUnregisterElfGlobalsName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;unregister&#95;elf&#95;globals&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00144" /><CodeLine lineNumber="144" lineLink="#af9f3c07d9fc38e3b9ac12f6c4386dad5"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#af9f3c07d9fc38e3b9ac12f6c4386dad5">kAsanPoisonGlobalsName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;before&#95;dynamic&#95;init&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00145" /><CodeLine lineNumber="145" lineLink="#a61e87da131e672072ffa897d6c3f954e"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a61e87da131e672072ffa897d6c3f954e">kAsanUnpoisonGlobalsName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;after&#95;dynamic&#95;init&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00146" /><CodeLine lineNumber="146" lineLink="#a361b5f11d7b296279f45007be01c2913"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a361b5f11d7b296279f45007be01c2913">kAsanInitName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;init&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00147" /><CodeLine lineNumber="147" lineLink="#ae54fd57142396b1edba3f62247d5a176"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#ae54fd57142396b1edba3f62247d5a176">kAsanVersionCheckNamePrefix</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;version&#95;mismatch&#95;check&#95;v&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00148" /><CodeLine lineNumber="148" lineLink="#a2fa18fb24f9feafbd0d0fc1107b131ed"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a2fa18fb24f9feafbd0d0fc1107b131ed">kAsanPtrCmp</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;sanitizer&#95;ptr&#95;cmp&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00149" /><CodeLine lineNumber="149" lineLink="#adac38b7a834c74bc8d152337671c1ab7"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#adac38b7a834c74bc8d152337671c1ab7">kAsanPtrSub</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;sanitizer&#95;ptr&#95;sub&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00150" /><CodeLine lineNumber="150" lineLink="#afa4db1804122bafade11f423f5a483f5"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#afa4db1804122bafade11f423f5a483f5">kAsanHandleNoReturnName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;handle&#95;no&#95;return&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00151" /><CodeLine lineNumber="151" lineLink="#acba05c6df950ff8712fa2194a2b83c87"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> <a href="#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a> = 10;</Highlight></CodeLine>
<Link id="l00152" /><CodeLine lineNumber="152" lineLink="#a311ac214c991fe60e693899d731e311e"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a311ac214c991fe60e693899d731e311e">kAsanStackMallocNameTemplate</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;stack&#95;malloc&#95;&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00153" /><CodeLine lineNumber="153" lineLink="#a7827de59665600c15eebeb456731627c"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a7827de59665600c15eebeb456731627c">kAsanStackMallocAlwaysNameTemplate</a>&#91;&#93; =</Highlight></CodeLine>
<Link id="l00154" /><CodeLine lineNumber="154"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;stack&#95;malloc&#95;always&#95;&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00155" /><CodeLine lineNumber="155" lineLink="#a21dae1495bdaa52cff0efeff2bb65742"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a21dae1495bdaa52cff0efeff2bb65742">kAsanStackFreeNameTemplate</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;stack&#95;free&#95;&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00156" /><CodeLine lineNumber="156" lineLink="#a476e7801fbfecbea19d62de9a27e71ae"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a476e7801fbfecbea19d62de9a27e71ae">kAsanGenPrefix</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;&#95;asan&#95;gen&#95;&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00157" /><CodeLine lineNumber="157" lineLink="#a6e54679eb7c171172210d5898f5e2ebc"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a6e54679eb7c171172210d5898f5e2ebc">kODRGenPrefix</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;odr&#95;asan&#95;gen&#95;&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00158" /><CodeLine lineNumber="158" lineLink="#a89f98c73fceabd5b3e0c1862003f7b6a"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a89f98c73fceabd5b3e0c1862003f7b6a">kSanCovGenPrefix</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;sancov&#95;gen&#95;&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00159" /><CodeLine lineNumber="159" lineLink="#a2bec6b8d5a441c0918bbdd1be9df32b3"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a2bec6b8d5a441c0918bbdd1be9df32b3">kAsanSetShadowPrefix</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;set&#95;shadow&#95;&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00160" /><CodeLine lineNumber="160" lineLink="#a9de96b20be410e7c2014587a070465d4"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a9de96b20be410e7c2014587a070465d4">kAsanPoisonStackMemoryName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;poison&#95;stack&#95;memory&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00161" /><CodeLine lineNumber="161" lineLink="#aa6ae2abfa7c1477f42010a614aa2e20b"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#aa6ae2abfa7c1477f42010a614aa2e20b">kAsanUnpoisonStackMemoryName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;unpoison&#95;stack&#95;memory&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00162" /><CodeLine lineNumber="162"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00163" /><CodeLine lineNumber="163"><Highlight kind="normal"></Highlight><Highlight kind="comment">// ASan version script has &#95;&#95;asan&#95;&#42; wildcard. Triple underscore prevents a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00164" /><CodeLine lineNumber="164"><Highlight kind="normal"></Highlight><Highlight kind="comment">// linker (gold) warning about attempting to export a local symbol.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00165" /><CodeLine lineNumber="165" lineLink="#aae785da38ce552b3ab47791e9abb9fd9"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#aae785da38ce552b3ab47791e9abb9fd9">kAsanGlobalsRegisteredFlagName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;&#95;asan&#95;globals&#95;registered&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00166" /><CodeLine lineNumber="166"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00167" /><CodeLine lineNumber="167" lineLink="#a27766fe2066043a2c55cc0becdcdd9f1"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a27766fe2066043a2c55cc0becdcdd9f1">kAsanOptionDetectUseAfterReturn</a>&#91;&#93; =</Highlight></CodeLine>
<Link id="l00168" /><CodeLine lineNumber="168"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;option&#95;detect&#95;stack&#95;use&#95;after&#95;return&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00169" /><CodeLine lineNumber="169"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00170" /><CodeLine lineNumber="170" lineLink="#a72f82be6c1dbdf567e8dd11251e87000"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a72f82be6c1dbdf567e8dd11251e87000">kAsanShadowMemoryDynamicAddress</a>&#91;&#93; =</Highlight></CodeLine>
<Link id="l00171" /><CodeLine lineNumber="171"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;shadow&#95;memory&#95;dynamic&#95;address&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00172" /><CodeLine lineNumber="172"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00173" /><CodeLine lineNumber="173" lineLink="#addbdc1734f12bc122f2b204052f426df"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#addbdc1734f12bc122f2b204052f426df">kAsanAllocaPoison</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;alloca&#95;poison&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00174" /><CodeLine lineNumber="174" lineLink="#afd65995ac50736f33beadc3c0549ce0b"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#afd65995ac50736f33beadc3c0549ce0b">kAsanAllocasUnpoison</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;allocas&#95;unpoison&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00175" /><CodeLine lineNumber="175"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00176" /><CodeLine lineNumber="176" lineLink="#a2121416d2692ea7ec2c9522291600a19"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a2121416d2692ea7ec2c9522291600a19">kAMDGPUAddressSharedName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;llvm.amdgcn.is.shared&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00177" /><CodeLine lineNumber="177" lineLink="#ae6098b64cdbf4d809b1f3f86a866c56a"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#ae6098b64cdbf4d809b1f3f86a866c56a">kAMDGPUAddressPrivateName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;llvm.amdgcn.is.private&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00178" /><CodeLine lineNumber="178" lineLink="#ae7f00801ef2ef87699661f1dca513b52"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#ae7f00801ef2ef87699661f1dca513b52">kAMDGPUBallotName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;llvm.amdgcn.ballot.i64&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00179" /><CodeLine lineNumber="179" lineLink="#a0942316ad508b030eec9f8ac3104b964"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> <a href="#a0942316ad508b030eec9f8ac3104b964">kAMDGPUUnreachableName</a>&#91;&#93; = </Highlight><Highlight kind="stringliteral">&quot;llvm.amdgcn.unreachable&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00180" /><CodeLine lineNumber="180"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00181" /><CodeLine lineNumber="181"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Accesses sizes are powers of two: 1, 2, 4, 8, 16</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00182" /><CodeLine lineNumber="182" lineLink="#aa62a4d0672bab180dd339cda25b23b2e"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> <a href="#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a> = 5;</Highlight></CodeLine>
<Link id="l00183" /><CodeLine lineNumber="183"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00184" /><CodeLine lineNumber="184" lineLink="#a6da7b2b680f4518d9d5545432e701ba1"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a6da7b2b680f4518d9d5545432e701ba1">kAllocaRzSize</a> = 32;</Highlight></CodeLine>
<Link id="l00185" /><CodeLine lineNumber="185"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00186" /><CodeLine lineNumber="186"><Highlight kind="normal"></Highlight><Highlight kind="comment">// ASanAccessInfo implementation constants.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00187" /><CodeLine lineNumber="187" lineLink="#ae065abe1628e445fa1a1a378d8ee0648"><Highlight kind="normal"></Highlight><Highlight kind="keyword">constexpr</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> <a href="#ae065abe1628e445fa1a1a378d8ee0648">kCompileKernelShift</a> = 0;</Highlight></CodeLine>
<Link id="l00188" /><CodeLine lineNumber="188" lineLink="#a230c7d7ca3e0e9088b709d8ee861c23c"><Highlight kind="normal"></Highlight><Highlight kind="keyword">constexpr</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> <a href="#a230c7d7ca3e0e9088b709d8ee861c23c">kCompileKernelMask</a> = 0x1;</Highlight></CodeLine>
<Link id="l00189" /><CodeLine lineNumber="189" lineLink="#a9bd091ccb08f4fcaef69d6c5f956572a"><Highlight kind="normal"></Highlight><Highlight kind="keyword">constexpr</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> <a href="#a9bd091ccb08f4fcaef69d6c5f956572a">kAccessSizeIndexShift</a> = 1;</Highlight></CodeLine>
<Link id="l00190" /><CodeLine lineNumber="190" lineLink="#a095b4c60115113ef59a28ffb3a817422"><Highlight kind="normal"></Highlight><Highlight kind="keyword">constexpr</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> <a href="#a095b4c60115113ef59a28ffb3a817422">kAccessSizeIndexMask</a> = 0xf;</Highlight></CodeLine>
<Link id="l00191" /><CodeLine lineNumber="191" lineLink="#a19deb83e797e941c8400caa50f648a50"><Highlight kind="normal"></Highlight><Highlight kind="keyword">constexpr</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> <a href="#a19deb83e797e941c8400caa50f648a50">kIsWriteShift</a> = 5;</Highlight></CodeLine>
<Link id="l00192" /><CodeLine lineNumber="192" lineLink="#a4ac0cc78d7c86822b81df1b7db4338bc"><Highlight kind="normal"></Highlight><Highlight kind="keyword">constexpr</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> <a href="#a4ac0cc78d7c86822b81df1b7db4338bc">kIsWriteMask</a> = 0x1;</Highlight></CodeLine>
<Link id="l00193" /><CodeLine lineNumber="193"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00194" /><CodeLine lineNumber="194"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Command-line flags.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00195" /><CodeLine lineNumber="195"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00196" /><CodeLine lineNumber="196" lineLink="#aa09777d1507554d2873581bb83442022"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#aa09777d1507554d2873581bb83442022">ClEnableKasan</a>(</Highlight></CodeLine>
<Link id="l00197" /><CodeLine lineNumber="197"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-kernel&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Enable KernelAddressSanitizer instrumentation&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00198" /><CodeLine lineNumber="198"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00199" /><CodeLine lineNumber="199"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00200" /><CodeLine lineNumber="200" lineLink="#ab07c89b5ab3621d59817baefdae128cb"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#ab07c89b5ab3621d59817baefdae128cb">ClRecover</a>(</Highlight></CodeLine>
<Link id="l00201" /><CodeLine lineNumber="201"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-recover&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00202" /><CodeLine lineNumber="202"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Enable recovery mode (continue-after-error).&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00203" /><CodeLine lineNumber="203"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00204" /><CodeLine lineNumber="204"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00205" /><CodeLine lineNumber="205" lineLink="#a2a1656d1f4ddeb386daf49396b178ab3"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a2a1656d1f4ddeb386daf49396b178ab3">ClInsertVersionCheck</a>(</Highlight></CodeLine>
<Link id="l00206" /><CodeLine lineNumber="206"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-guard-against-version-mismatch&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00207" /><CodeLine lineNumber="207"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Guard against compiler/runtime version mismatch.&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00208" /><CodeLine lineNumber="208"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00209" /><CodeLine lineNumber="209"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00210" /><CodeLine lineNumber="210"><Highlight kind="normal"></Highlight><Highlight kind="comment">// This flag may need to be replaced with -f&#91;no-&#93;asan-reads.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00211" /><CodeLine lineNumber="211" lineLink="#adc5cd4695253418937546218dbe26922"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#adc5cd4695253418937546218dbe26922">ClInstrumentReads</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-instrument-reads&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00212" /><CodeLine lineNumber="212"><Highlight kind="normal">                                       <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;instrument read instructions&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00213" /><CodeLine lineNumber="213"><Highlight kind="normal">                                       <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00214" /><CodeLine lineNumber="214"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00215" /><CodeLine lineNumber="215" lineLink="#a2df764565c5764a2af608a819cfa2540"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a2df764565c5764a2af608a819cfa2540">ClInstrumentWrites</a>(</Highlight></CodeLine>
<Link id="l00216" /><CodeLine lineNumber="216"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-instrument-writes&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;instrument write instructions&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00217" /><CodeLine lineNumber="217"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00218" /><CodeLine lineNumber="218"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00219" /><CodeLine lineNumber="219"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></Highlight></CodeLine>
<Link id="l00220" /><CodeLine lineNumber="220" lineLink="#af9d879b52ddf70fb1fe578bd5d1c508e"><Highlight kind="normal">    <a href="#af9d879b52ddf70fb1fe578bd5d1c508e">ClUseStackSafety</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-use-stack-safety&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00221" /><CodeLine lineNumber="221"><Highlight kind="normal">                     <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Use Stack Safety analysis results&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00222" /><CodeLine lineNumber="222"><Highlight kind="normal">                     <a href="/docs/api/namespaces/llvm/cl/#a492234b10e0c5918d72a3a15a6f0fa6eaee3d7c816c2a04f9f49c4aa194ef25b0">cl::Optional</a>);</Highlight></CodeLine>
<Link id="l00223" /><CodeLine lineNumber="223"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00224" /><CodeLine lineNumber="224" lineLink="#a98491b92a3cd11f11c29f752625b136d"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a98491b92a3cd11f11c29f752625b136d">ClInstrumentAtomics</a>(</Highlight></CodeLine>
<Link id="l00225" /><CodeLine lineNumber="225"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-instrument-atomics&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00226" /><CodeLine lineNumber="226"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;instrument atomic instructions (rmw, cmpxchg)&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00227" /><CodeLine lineNumber="227"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00228" /><CodeLine lineNumber="228"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00229" /><CodeLine lineNumber="229"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></Highlight></CodeLine>
<Link id="l00230" /><CodeLine lineNumber="230" lineLink="#a33190b8a2d49613b79d5374db635dd0a"><Highlight kind="normal">    <a href="#a33190b8a2d49613b79d5374db635dd0a">ClInstrumentByval</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-instrument-byval&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00231" /><CodeLine lineNumber="231"><Highlight kind="normal">                      <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;instrument byval call arguments&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00232" /><CodeLine lineNumber="232"><Highlight kind="normal">                      <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00233" /><CodeLine lineNumber="233"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00234" /><CodeLine lineNumber="234" lineLink="#acfc2efa648ba005caa42cf6f28d82757"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#acfc2efa648ba005caa42cf6f28d82757">ClAlwaysSlowPath</a>(</Highlight></CodeLine>
<Link id="l00235" /><CodeLine lineNumber="235"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-always-slow-path&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00236" /><CodeLine lineNumber="236"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;use instrumentation with slow path for all accesses&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00237" /><CodeLine lineNumber="237"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00238" /><CodeLine lineNumber="238"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00239" /><CodeLine lineNumber="239" lineLink="#a25d1ca975f48d54e4290d63829f35a95"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a25d1ca975f48d54e4290d63829f35a95">ClForceDynamicShadow</a>(</Highlight></CodeLine>
<Link id="l00240" /><CodeLine lineNumber="240"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-force-dynamic-shadow&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00241" /><CodeLine lineNumber="241"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Load shadow address into a local variable for each function&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00242" /><CodeLine lineNumber="242"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00243" /><CodeLine lineNumber="243"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00244" /><CodeLine lineNumber="244"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></Highlight></CodeLine>
<Link id="l00245" /><CodeLine lineNumber="245" lineLink="#ae3d5d96c349d9c866c3641bbadc0554b"><Highlight kind="normal">    <a href="#ae3d5d96c349d9c866c3641bbadc0554b">ClWithIfunc</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-with-ifunc&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00246" /><CodeLine lineNumber="246"><Highlight kind="normal">                <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Access dynamic shadow through an ifunc global on &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00247" /><CodeLine lineNumber="247"><Highlight kind="normal">                         </Highlight><Highlight kind="stringliteral">&quot;platforms that support this&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00248" /><CodeLine lineNumber="248"><Highlight kind="normal">                <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00249" /><CodeLine lineNumber="249"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00250" /><CodeLine lineNumber="250" lineLink="#a63147f939444e77f3a294dc59c2939ba"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a63147f939444e77f3a294dc59c2939ba">ClWithIfuncSuppressRemat</a>(</Highlight></CodeLine>
<Link id="l00251" /><CodeLine lineNumber="251"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-with-ifunc-suppress-remat&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00252" /><CodeLine lineNumber="252"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Suppress rematerialization of dynamic shadow address by passing &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00253" /><CodeLine lineNumber="253"><Highlight kind="normal">             </Highlight><Highlight kind="stringliteral">&quot;it through inline asm in prologue.&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00254" /><CodeLine lineNumber="254"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00255" /><CodeLine lineNumber="255"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00256" /><CodeLine lineNumber="256"><Highlight kind="normal"></Highlight><Highlight kind="comment">// This flag limits the number of instructions to be instrumented</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00257" /><CodeLine lineNumber="257"><Highlight kind="normal"></Highlight><Highlight kind="comment">// in any given BB. Normally, this should be set to unlimited (INT&#95;MAX),</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00258" /><CodeLine lineNumber="258"><Highlight kind="normal"></Highlight><Highlight kind="comment">// but due to http://llvm.org/bugs/show&#95;bug.cgi?id=12652 we temporary</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00259" /><CodeLine lineNumber="259"><Highlight kind="normal"></Highlight><Highlight kind="comment">// set it to 10000</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00260" /><CodeLine lineNumber="260" lineLink="#af7099fa6660e94761e7f5b525b330bb2"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#af7099fa6660e94761e7f5b525b330bb2">ClMaxInsnsToInstrumentPerBB</a>(</Highlight></CodeLine>
<Link id="l00261" /><CodeLine lineNumber="261"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-max-ins-per-bb&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(10000),</Highlight></CodeLine>
<Link id="l00262" /><CodeLine lineNumber="262"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;maximal number of instructions to instrument in any given BB&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00263" /><CodeLine lineNumber="263"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</Highlight></CodeLine>
<Link id="l00264" /><CodeLine lineNumber="264"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00265" /><CodeLine lineNumber="265"><Highlight kind="normal"></Highlight><Highlight kind="comment">// This flag may need to be replaced with -f&#91;no&#93;asan-stack.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00266" /><CodeLine lineNumber="266" lineLink="#a9123bbb6c01ba4b0e0ef3547a5132cd1"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a9123bbb6c01ba4b0e0ef3547a5132cd1">ClStack</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-stack&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Handle stack memory&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00267" /><CodeLine lineNumber="267"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00268" /><CodeLine lineNumber="268" lineLink="#a96c36d2e9698f2974735d30dfea6893c"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;uint32&#95;t&gt;</a> <a href="#a96c36d2e9698f2974735d30dfea6893c">ClMaxInlinePoisoningSize</a>(</Highlight></CodeLine>
<Link id="l00269" /><CodeLine lineNumber="269"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-max-inline-poisoning-size&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00270" /><CodeLine lineNumber="270"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight></CodeLine>
<Link id="l00271" /><CodeLine lineNumber="271"><Highlight kind="normal">        </Highlight><Highlight kind="stringliteral">&quot;Inline shadow poisoning for blocks up to the given size in bytes.&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00272" /><CodeLine lineNumber="272"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(64));</Highlight></CodeLine>
<Link id="l00273" /><CodeLine lineNumber="273"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00274" /><CodeLine lineNumber="274" lineLink="#ab96ca2732f7eaecb2e762c9c754f7b37"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;AsanDetectStackUseAfterReturnMode&gt;</a> <a href="#ab96ca2732f7eaecb2e762c9c754f7b37">ClUseAfterReturn</a>(</Highlight></CodeLine>
<Link id="l00275" /><CodeLine lineNumber="275"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-use-after-return&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00276" /><CodeLine lineNumber="276"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Sets the mode of detection for stack-use-after-return.&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00277" /><CodeLine lineNumber="277"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a8fa743aa76b6902028f8a643dfb87171">cl::values</a>(</Highlight></CodeLine>
<Link id="l00278" /><CodeLine lineNumber="278"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabda6e7b34fa59e1bd229b207892956dc41c">AsanDetectStackUseAfterReturnMode::Never</a>, </Highlight><Highlight kind="stringliteral">&quot;never&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00279" /><CodeLine lineNumber="279"><Highlight kind="normal">                   </Highlight><Highlight kind="stringliteral">&quot;Never detect stack use after return.&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00280" /><CodeLine lineNumber="280"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(</Highlight></CodeLine>
<Link id="l00281" /><CodeLine lineNumber="281"><Highlight kind="normal">            <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabdabc366f2d0ba3d681e7a3899917c5d3de">AsanDetectStackUseAfterReturnMode::Runtime</a>, </Highlight><Highlight kind="stringliteral">&quot;runtime&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00282" /><CodeLine lineNumber="282"><Highlight kind="normal">            </Highlight><Highlight kind="stringliteral">&quot;Detect stack use after return if &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00283" /><CodeLine lineNumber="283"><Highlight kind="normal">            </Highlight><Highlight kind="stringliteral">&quot;binary flag &#39;ASAN&#95;OPTIONS=detect&#95;stack&#95;use&#95;after&#95;return&#39; is set.&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00284" /><CodeLine lineNumber="284"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabda68eec46437c384d8dad18d5464ebc35c">AsanDetectStackUseAfterReturnMode::Always</a>, </Highlight><Highlight kind="stringliteral">&quot;always&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00285" /><CodeLine lineNumber="285"><Highlight kind="normal">                   </Highlight><Highlight kind="stringliteral">&quot;Always detect stack use after return.&quot;</Highlight><Highlight kind="normal">)),</Highlight></CodeLine>
<Link id="l00286" /><CodeLine lineNumber="286"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(<a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabdabc366f2d0ba3d681e7a3899917c5d3de">AsanDetectStackUseAfterReturnMode::Runtime</a>));</Highlight></CodeLine>
<Link id="l00287" /><CodeLine lineNumber="287"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00288" /><CodeLine lineNumber="288" lineLink="#a3ad807be99d9d4ce4b6a2038719b015c"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a3ad807be99d9d4ce4b6a2038719b015c">ClRedzoneByvalArgs</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-redzone-byval-args&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00289" /><CodeLine lineNumber="289"><Highlight kind="normal">                                        <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Create redzones for byval &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00290" /><CodeLine lineNumber="290"><Highlight kind="normal">                                                 </Highlight><Highlight kind="stringliteral">&quot;arguments (extra copy &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00291" /><CodeLine lineNumber="291"><Highlight kind="normal">                                                 </Highlight><Highlight kind="stringliteral">&quot;required)&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00292" /><CodeLine lineNumber="292"><Highlight kind="normal">                                        <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00293" /><CodeLine lineNumber="293"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00294" /><CodeLine lineNumber="294" lineLink="#a9a4fc66faeab43a236796f382e142af4"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a9a4fc66faeab43a236796f382e142af4">ClUseAfterScope</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-use-after-scope&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00295" /><CodeLine lineNumber="295"><Highlight kind="normal">                                     <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Check stack-use-after-scope&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00296" /><CodeLine lineNumber="296"><Highlight kind="normal">                                     <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00297" /><CodeLine lineNumber="297"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00298" /><CodeLine lineNumber="298"><Highlight kind="normal"></Highlight><Highlight kind="comment">// This flag may need to be replaced with -f&#91;no&#93;asan-globals.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00299" /><CodeLine lineNumber="299" lineLink="#a37e75a212ee37baa76869a8d0195d9e6"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a37e75a212ee37baa76869a8d0195d9e6">ClGlobals</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-globals&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00300" /><CodeLine lineNumber="300"><Highlight kind="normal">                               <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Handle global objects&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00301" /><CodeLine lineNumber="301"><Highlight kind="normal">                               <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00302" /><CodeLine lineNumber="302"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00303" /><CodeLine lineNumber="303" lineLink="#ad7ffe665351fede3f8025e2cb84ccc83"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#ad7ffe665351fede3f8025e2cb84ccc83">ClInitializers</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-initialization-order&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00304" /><CodeLine lineNumber="304"><Highlight kind="normal">                                    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Handle C++ initializer order&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00305" /><CodeLine lineNumber="305"><Highlight kind="normal">                                    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00306" /><CodeLine lineNumber="306"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00307" /><CodeLine lineNumber="307" lineLink="#afe56a2bdf58d01cf437e1abba61e2830"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#afe56a2bdf58d01cf437e1abba61e2830">ClInvalidPointerPairs</a>(</Highlight></CodeLine>
<Link id="l00308" /><CodeLine lineNumber="308"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-detect-invalid-pointer-pair&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00309" /><CodeLine lineNumber="309"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Instrument &lt;, &lt;=, &gt;, &gt;=, - with pointer operands&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00310" /><CodeLine lineNumber="310"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00311" /><CodeLine lineNumber="311"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00312" /><CodeLine lineNumber="312" lineLink="#a7988b8281b1972c35eb5833f8c23a1a3"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a7988b8281b1972c35eb5833f8c23a1a3">ClInvalidPointerCmp</a>(</Highlight></CodeLine>
<Link id="l00313" /><CodeLine lineNumber="313"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-detect-invalid-pointer-cmp&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00314" /><CodeLine lineNumber="314"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Instrument &lt;, &lt;=, &gt;, &gt;= with pointer operands&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00315" /><CodeLine lineNumber="315"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00316" /><CodeLine lineNumber="316"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00317" /><CodeLine lineNumber="317" lineLink="#a8398c67027004edc3649be6b6db60eab"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a8398c67027004edc3649be6b6db60eab">ClInvalidPointerSub</a>(</Highlight></CodeLine>
<Link id="l00318" /><CodeLine lineNumber="318"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-detect-invalid-pointer-sub&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00319" /><CodeLine lineNumber="319"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Instrument - operations with pointer operands&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00320" /><CodeLine lineNumber="320"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00321" /><CodeLine lineNumber="321"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00322" /><CodeLine lineNumber="322" lineLink="#adbb45684e8c1f7cc79db81a276e70471"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;unsigned&gt;</a> <a href="#adbb45684e8c1f7cc79db81a276e70471">ClRealignStack</a>(</Highlight></CodeLine>
<Link id="l00323" /><CodeLine lineNumber="323"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-realign-stack&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00324" /><CodeLine lineNumber="324"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Realign stack to the value of this flag (power of two)&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00325" /><CodeLine lineNumber="325"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(32));</Highlight></CodeLine>
<Link id="l00326" /><CodeLine lineNumber="326"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00327" /><CodeLine lineNumber="327" lineLink="#a7b6dcf17e1b173746a4939b677ca1fb0"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#a7b6dcf17e1b173746a4939b677ca1fb0">ClInstrumentationWithCallsThreshold</a>(</Highlight></CodeLine>
<Link id="l00328" /><CodeLine lineNumber="328"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-instrumentation-with-call-threshold&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00329" /><CodeLine lineNumber="329"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;If the function being instrumented contains more than &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00330" /><CodeLine lineNumber="330"><Highlight kind="normal">             </Highlight><Highlight kind="stringliteral">&quot;this number of memory accesses, use callbacks instead of &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00331" /><CodeLine lineNumber="331"><Highlight kind="normal">             </Highlight><Highlight kind="stringliteral">&quot;inline checks (-1 means never use callbacks).&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00332" /><CodeLine lineNumber="332"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(7000));</Highlight></CodeLine>
<Link id="l00333" /><CodeLine lineNumber="333"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00334" /><CodeLine lineNumber="334" lineLink="#a27774720f5060297840f5e603fba95f1"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;std::string&gt;</a> <a href="#a27774720f5060297840f5e603fba95f1">ClMemoryAccessCallbackPrefix</a>(</Highlight></CodeLine>
<Link id="l00335" /><CodeLine lineNumber="335"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-memory-access-callback-prefix&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00336" /><CodeLine lineNumber="336"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Prefix for memory access callbacks&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00337" /><CodeLine lineNumber="337"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00338" /><CodeLine lineNumber="338"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00339" /><CodeLine lineNumber="339" lineLink="#ae49da4e77feeb6c094e35e7c86f5613e"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#ae49da4e77feeb6c094e35e7c86f5613e">ClKasanMemIntrinCallbackPrefix</a>(</Highlight></CodeLine>
<Link id="l00340" /><CodeLine lineNumber="340"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-kernel-mem-intrinsic-prefix&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00341" /><CodeLine lineNumber="341"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Use prefix for memory intrinsics in KASAN mode&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00342" /><CodeLine lineNumber="342"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00343" /><CodeLine lineNumber="343"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00344" /><CodeLine lineNumber="344"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></Highlight></CodeLine>
<Link id="l00345" /><CodeLine lineNumber="345" lineLink="#aacabf2f74c684a07a8d7b499d252f8c9"><Highlight kind="normal">    <a href="#aacabf2f74c684a07a8d7b499d252f8c9">ClInstrumentDynamicAllocas</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-instrument-dynamic-allocas&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00346" /><CodeLine lineNumber="346"><Highlight kind="normal">                               <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;instrument dynamic allocas&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00347" /><CodeLine lineNumber="347"><Highlight kind="normal">                               <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00348" /><CodeLine lineNumber="348"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00349" /><CodeLine lineNumber="349" lineLink="#aeff4047a82cefd8108f2bc7263e924fa"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#aeff4047a82cefd8108f2bc7263e924fa">ClSkipPromotableAllocas</a>(</Highlight></CodeLine>
<Link id="l00350" /><CodeLine lineNumber="350"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-skip-promotable-allocas&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00351" /><CodeLine lineNumber="351"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Do not instrument promotable allocas&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00352" /><CodeLine lineNumber="352"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00353" /><CodeLine lineNumber="353"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00354" /><CodeLine lineNumber="354" lineLink="#aca33036eb9649523a6345787acc33d29"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;AsanCtorKind&gt;</a> <a href="#aca33036eb9649523a6345787acc33d29">ClConstructorKind</a>(</Highlight></CodeLine>
<Link id="l00355" /><CodeLine lineNumber="355"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-constructor-kind&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00356" /><CodeLine lineNumber="356"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Sets the ASan constructor kind&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00357" /><CodeLine lineNumber="357"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a8fa743aa76b6902028f8a643dfb87171">cl::values</a>(<a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a6adf97f83acf6453d4a6a4b1070f3754">AsanCtorKind::None</a>, </Highlight><Highlight kind="stringliteral">&quot;none&quot;</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;No constructors&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00358" /><CodeLine lineNumber="358"><Highlight kind="normal">               <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a4cc6684df7b4a92b1dec6fce3264fac8">AsanCtorKind::Global</a>, </Highlight><Highlight kind="stringliteral">&quot;global&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00359" /><CodeLine lineNumber="359"><Highlight kind="normal">                          </Highlight><Highlight kind="stringliteral">&quot;Use global constructors&quot;</Highlight><Highlight kind="normal">)),</Highlight></CodeLine>
<Link id="l00360" /><CodeLine lineNumber="360"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(<a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a4cc6684df7b4a92b1dec6fce3264fac8">AsanCtorKind::Global</a>), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</Highlight></CodeLine>
<Link id="l00361" /><CodeLine lineNumber="361"><Highlight kind="normal"></Highlight><Highlight kind="comment">// These flags allow to change the shadow mapping.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00362" /><CodeLine lineNumber="362"><Highlight kind="normal"></Highlight><Highlight kind="comment">// The shadow mapping looks like</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00363" /><CodeLine lineNumber="363"><Highlight kind="normal"></Highlight><Highlight kind="comment">//    Shadow = (Mem &gt;&gt; scale) + offset</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00364" /><CodeLine lineNumber="364"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00365" /><CodeLine lineNumber="365" lineLink="#a9d0c59216cf72992129adb73dc73ec65"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#a9d0c59216cf72992129adb73dc73ec65">ClMappingScale</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-mapping-scale&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00366" /><CodeLine lineNumber="366"><Highlight kind="normal">                                   <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;scale of asan shadow mapping&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00367" /><CodeLine lineNumber="367"><Highlight kind="normal">                                   <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(0));</Highlight></CodeLine>
<Link id="l00368" /><CodeLine lineNumber="368"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00369" /><CodeLine lineNumber="369"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;uint64&#95;t&gt;</a></Highlight></CodeLine>
<Link id="l00370" /><CodeLine lineNumber="370" lineLink="#aebb74a0c8e6baa32b77d0782e9e911dc"><Highlight kind="normal">    <a href="#aebb74a0c8e6baa32b77d0782e9e911dc">ClMappingOffset</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-mapping-offset&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00371" /><CodeLine lineNumber="371"><Highlight kind="normal">                    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;offset of asan shadow mapping &#91;EXPERIMENTAL&#93;&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00372" /><CodeLine lineNumber="372"><Highlight kind="normal">                    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(0));</Highlight></CodeLine>
<Link id="l00373" /><CodeLine lineNumber="373"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00374" /><CodeLine lineNumber="374"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Optimization flags. Not user visible, used mostly for testing</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00375" /><CodeLine lineNumber="375"><Highlight kind="normal"></Highlight><Highlight kind="comment">// and benchmarking the tool.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00376" /><CodeLine lineNumber="376"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00377" /><CodeLine lineNumber="377" lineLink="#a6d7586f09e72a8d0b38a7b28ce03068c"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a6d7586f09e72a8d0b38a7b28ce03068c">ClOpt</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-opt&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Optimize instrumentation&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00378" /><CodeLine lineNumber="378"><Highlight kind="normal">                           <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00379" /><CodeLine lineNumber="379"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00380" /><CodeLine lineNumber="380" lineLink="#a53fdfe303964c0943c25d294cd1cf193"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#a53fdfe303964c0943c25d294cd1cf193">ClOptimizeCallbacks</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-optimize-callbacks&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00381" /><CodeLine lineNumber="381"><Highlight kind="normal">                                         <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Optimize callbacks&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00382" /><CodeLine lineNumber="382"><Highlight kind="normal">                                         <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00383" /><CodeLine lineNumber="383"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00384" /><CodeLine lineNumber="384" lineLink="#ab320a8dd5d6290c1e021de274df4c809"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#ab320a8dd5d6290c1e021de274df4c809">ClOptSameTemp</a>(</Highlight></CodeLine>
<Link id="l00385" /><CodeLine lineNumber="385"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-opt-same-temp&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Instrument the same temp just once&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00386" /><CodeLine lineNumber="386"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00387" /><CodeLine lineNumber="387"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00388" /><CodeLine lineNumber="388" lineLink="#abd03cce0a222ad0e49b3074b9258f894"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#abd03cce0a222ad0e49b3074b9258f894">ClOptGlobals</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-opt-globals&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00389" /><CodeLine lineNumber="389"><Highlight kind="normal">                                  <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Don&#39;t instrument scalar globals&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00390" /><CodeLine lineNumber="390"><Highlight kind="normal">                                  <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00391" /><CodeLine lineNumber="391"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00392" /><CodeLine lineNumber="392" lineLink="#ab6e8695312b588ef5a110f33c9beb09c"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#ab6e8695312b588ef5a110f33c9beb09c">ClOptStack</a>(</Highlight></CodeLine>
<Link id="l00393" /><CodeLine lineNumber="393"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-opt-stack&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Don&#39;t instrument scalar stack variables&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00394" /><CodeLine lineNumber="394"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00395" /><CodeLine lineNumber="395"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00396" /><CodeLine lineNumber="396" lineLink="#ab65506fece0b5302fe804c49e6580446"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a> <a href="#ab65506fece0b5302fe804c49e6580446">ClDynamicAllocaStack</a>(</Highlight></CodeLine>
<Link id="l00397" /><CodeLine lineNumber="397"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-stack-dynamic-alloca&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00398" /><CodeLine lineNumber="398"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Use dynamic alloca to represent stack variables&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00399" /><CodeLine lineNumber="399"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00400" /><CodeLine lineNumber="400"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00401" /><CodeLine lineNumber="401" lineLink="#a8769662e83dc63443d2cfa743cd8407b"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;uint32&#95;t&gt;</a> <a href="#a8769662e83dc63443d2cfa743cd8407b">ClForceExperiment</a>(</Highlight></CodeLine>
<Link id="l00402" /><CodeLine lineNumber="402"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-force-experiment&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00403" /><CodeLine lineNumber="403"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Force optimization experiment (for testing)&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00404" /><CodeLine lineNumber="404"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(0));</Highlight></CodeLine>
<Link id="l00405" /><CodeLine lineNumber="405"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00406" /><CodeLine lineNumber="406"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></Highlight></CodeLine>
<Link id="l00407" /><CodeLine lineNumber="407" lineLink="#a108a44e27f64b25d5be99eab0c12b840"><Highlight kind="normal">    <a href="#a108a44e27f64b25d5be99eab0c12b840">ClUsePrivateAlias</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-use-private-alias&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00408" /><CodeLine lineNumber="408"><Highlight kind="normal">                      <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Use private aliases for global variables&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00409" /><CodeLine lineNumber="409"><Highlight kind="normal">                      <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00410" /><CodeLine lineNumber="410"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00411" /><CodeLine lineNumber="411"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></Highlight></CodeLine>
<Link id="l00412" /><CodeLine lineNumber="412" lineLink="#a7499c29bb36dd906803322453ac406ad"><Highlight kind="normal">    <a href="#a7499c29bb36dd906803322453ac406ad">ClUseOdrIndicator</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-use-odr-indicator&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00413" /><CodeLine lineNumber="413"><Highlight kind="normal">                      <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Use odr indicators to improve ODR reporting&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00414" /><CodeLine lineNumber="414"><Highlight kind="normal">                      <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00415" /><CodeLine lineNumber="415"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00416" /><CodeLine lineNumber="416"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></Highlight></CodeLine>
<Link id="l00417" /><CodeLine lineNumber="417" lineLink="#aa612bd13cbe0dc1e574383f4eddc0760"><Highlight kind="normal">    <a href="#aa612bd13cbe0dc1e574383f4eddc0760">ClUseGlobalsGC</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-globals-live-support&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00418" /><CodeLine lineNumber="418"><Highlight kind="normal">                   <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Use linker features to support dead &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00419" /><CodeLine lineNumber="419"><Highlight kind="normal">                            </Highlight><Highlight kind="stringliteral">&quot;code stripping of globals&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00420" /><CodeLine lineNumber="420"><Highlight kind="normal">                   <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00421" /><CodeLine lineNumber="421"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00422" /><CodeLine lineNumber="422"><Highlight kind="normal"></Highlight><Highlight kind="comment">// This is on by default even though there is a bug in gold:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00423" /><CodeLine lineNumber="423"><Highlight kind="normal"></Highlight><Highlight kind="comment">// https://sourceware.org/bugzilla/show&#95;bug.cgi?id=19002</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00424" /><CodeLine lineNumber="424"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;bool&gt;</a></Highlight></CodeLine>
<Link id="l00425" /><CodeLine lineNumber="425" lineLink="#aeded18588e9deea14f9c30eb995da5bb"><Highlight kind="normal">    <a href="#aeded18588e9deea14f9c30eb995da5bb">ClWithComdat</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-with-comdat&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00426" /><CodeLine lineNumber="426"><Highlight kind="normal">                 <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Place ASan constructors in comdat sections&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00427" /><CodeLine lineNumber="427"><Highlight kind="normal">                 <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(</Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00428" /><CodeLine lineNumber="428"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00429" /><CodeLine lineNumber="429" lineLink="#a2ca87f4ce47405a2ebd8d6e0ab259d65"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;AsanDtorKind&gt;</a> <a href="#a2ca87f4ce47405a2ebd8d6e0ab259d65">ClOverrideDestructorKind</a>(</Highlight></CodeLine>
<Link id="l00430" /><CodeLine lineNumber="430"><Highlight kind="normal">    </Highlight><Highlight kind="stringliteral">&quot;asan-destructor-kind&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00431" /><CodeLine lineNumber="431"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Sets the ASan destructor kind. The default is to use the value &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00432" /><CodeLine lineNumber="432"><Highlight kind="normal">             </Highlight><Highlight kind="stringliteral">&quot;provided to the pass constructor&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00433" /><CodeLine lineNumber="433"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#a8fa743aa76b6902028f8a643dfb87171">cl::values</a>(<a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa6adf97f83acf6453d4a6a4b1070f3754">AsanDtorKind::None</a>, </Highlight><Highlight kind="stringliteral">&quot;none&quot;</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;No destructors&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00434" /><CodeLine lineNumber="434"><Highlight kind="normal">               <a href="/docs/api/files/include/include/llvm/include/llvm/support/commandline-h/#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa4cc6684df7b4a92b1dec6fce3264fac8">AsanDtorKind::Global</a>, </Highlight><Highlight kind="stringliteral">&quot;global&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00435" /><CodeLine lineNumber="435"><Highlight kind="normal">                          </Highlight><Highlight kind="stringliteral">&quot;Use global destructors&quot;</Highlight><Highlight kind="normal">)),</Highlight></CodeLine>
<Link id="l00436" /><CodeLine lineNumber="436"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(<a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa4bbb8f967da6d1a610596d7257179c2b">AsanDtorKind::Invalid</a>), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</Highlight></CodeLine>
<Link id="l00437" /><CodeLine lineNumber="437"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00438" /><CodeLine lineNumber="438"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Debug flags.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00439" /><CodeLine lineNumber="439"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00440" /><CodeLine lineNumber="440" lineLink="#afcea04380058a94008cda9fc41056a16"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#afcea04380058a94008cda9fc41056a16">ClDebug</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-debug&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;debug&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00441" /><CodeLine lineNumber="441"><Highlight kind="normal">                            <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(0));</Highlight></CodeLine>
<Link id="l00442" /><CodeLine lineNumber="442"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00443" /><CodeLine lineNumber="443" lineLink="#a635e0541e4c0f8a4c5faba9e9c94aebc"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#a635e0541e4c0f8a4c5faba9e9c94aebc">ClDebugStack</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-debug-stack&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;debug stack&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00444" /><CodeLine lineNumber="444"><Highlight kind="normal">                                 <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(0));</Highlight></CodeLine>
<Link id="l00445" /><CodeLine lineNumber="445"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00446" /><CodeLine lineNumber="446" lineLink="#aa14af85369bdb6b331cd00f499d4cf63"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;std::string&gt;</a> <a href="#aa14af85369bdb6b331cd00f499d4cf63">ClDebugFunc</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-debug-func&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</Highlight></CodeLine>
<Link id="l00447" /><CodeLine lineNumber="447"><Highlight kind="normal">                                        <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Debug func&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l00448" /><CodeLine lineNumber="448"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00449" /><CodeLine lineNumber="449" lineLink="#a0dd632512536154ac3d012e7065f2bcf"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#a0dd632512536154ac3d012e7065f2bcf">ClDebugMin</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-debug-min&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Debug min inst&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00450" /><CodeLine lineNumber="450"><Highlight kind="normal">                               <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(-1));</Highlight></CodeLine>
<Link id="l00451" /><CodeLine lineNumber="451"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00452" /><CodeLine lineNumber="452" lineLink="#a8052781b69a1a9e2f58c190a15b67628"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/cl/opt">cl::opt&lt;int&gt;</a> <a href="#a8052781b69a1a9e2f58c190a15b67628">ClDebugMax</a>(</Highlight><Highlight kind="stringliteral">&quot;asan-debug-max&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/structs/llvm/cl/desc">cl::desc</a>(</Highlight><Highlight kind="stringliteral">&quot;Debug max inst&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l00453" /><CodeLine lineNumber="453"><Highlight kind="normal">                               <a href="/docs/api/namespaces/llvm/cl/#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a href="/docs/api/namespaces/llvm/cl/#ac12e6a8f3a1b511f0dee2ed6de0ae806">cl::init</a>(-1));</Highlight></CodeLine>
<Link id="l00454" /><CodeLine lineNumber="454"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00455" /><CodeLine lineNumber="455" lineLink="#a70700f8036b11342dbf363f4f81f529f"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h/#ad6117415b93e5675d5a6c8e1855b3b2f">STATISTIC</a>(NumInstrumentedReads, </Highlight><Highlight kind="stringliteral">&quot;Number of instrumented reads&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00456" /><CodeLine lineNumber="456" lineLink="#a8910bcb5acc6a97247337ab859f77190"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h/#ad6117415b93e5675d5a6c8e1855b3b2f">STATISTIC</a>(NumInstrumentedWrites, </Highlight><Highlight kind="stringliteral">&quot;Number of instrumented writes&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00457" /><CodeLine lineNumber="457" lineLink="#a53ff0da5ad7ad5f867f88b745a5afd21"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h/#ad6117415b93e5675d5a6c8e1855b3b2f">STATISTIC</a>(NumOptimizedAccessesToGlobalVar,</Highlight></CodeLine>
<Link id="l00458" /><CodeLine lineNumber="458"><Highlight kind="normal">          </Highlight><Highlight kind="stringliteral">&quot;Number of optimized accesses to global vars&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00459" /><CodeLine lineNumber="459" lineLink="#aabbeec619cf71418f7195e062894d2dc"><Highlight kind="normal"><a href="/docs/api/files/include/include/llvm/include/llvm/adt/statistic-h/#ad6117415b93e5675d5a6c8e1855b3b2f">STATISTIC</a>(NumOptimizedAccessesToStackVar,</Highlight></CodeLine>
<Link id="l00460" /><CodeLine lineNumber="460"><Highlight kind="normal">          </Highlight><Highlight kind="stringliteral">&quot;Number of optimized accesses to stack vars&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00461" /><CodeLine lineNumber="461"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00462" /><CodeLine lineNumber="462" lineLink="/docs/api/namespaces/anonymous-addresssanitizer-cpp-"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00463" /><CodeLine lineNumber="463"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00464" /><CodeLine lineNumber="464"><Highlight kind="comment">/// This struct defines the shadow mapping using the rule:</Highlight></CodeLine>
<Link id="l00465" /><CodeLine lineNumber="465"><Highlight kind="comment">///   shadow = (mem &gt;&gt; Scale) ADD-or-OR Offset.</Highlight></CodeLine>
<Link id="l00466" /><CodeLine lineNumber="466"><Highlight kind="comment">/// If InGlobal is true, then</Highlight></CodeLine>
<Link id="l00467" /><CodeLine lineNumber="467"><Highlight kind="comment">///   extern char &#95;&#95;asan&#95;shadow&#91;&#93;;</Highlight></CodeLine>
<Link id="l00468" /><CodeLine lineNumber="468"><Highlight kind="comment">///   shadow = (mem &gt;&gt; Scale) + &amp;&#95;&#95;asan&#95;shadow</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00469" /><CodeLine lineNumber="469" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping"><Highlight kind="normal"></Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal"><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping">ShadowMapping</a> &#123;</Highlight></CodeLine>
<Link id="l00470" /><CodeLine lineNumber="470" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#a461403dafb1ef7bdd929d3309ac48aaa"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#a461403dafb1ef7bdd929d3309ac48aaa">Scale</a>;</Highlight></CodeLine>
<Link id="l00471" /><CodeLine lineNumber="471" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#a4675b06d40b381d3a2122279ba6920bf"><Highlight kind="normal">  uint64&#95;t <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#a4675b06d40b381d3a2122279ba6920bf">Offset</a>;</Highlight></CodeLine>
<Link id="l00472" /><CodeLine lineNumber="472" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#a49fd7274949c135a3d2191e8cafeda4d"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#a49fd7274949c135a3d2191e8cafeda4d">OrShadowOffset</a>;</Highlight></CodeLine>
<Link id="l00473" /><CodeLine lineNumber="473" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#a115362cbcbbe17b578d4ec92786fba12"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping/#a115362cbcbbe17b578d4ec92786fba12">InGlobal</a>;</Highlight></CodeLine>
<Link id="l00474" /><CodeLine lineNumber="474"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l00475" /><CodeLine lineNumber="475"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00476" /><CodeLine lineNumber="476"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// end anonymous namespace</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00477" /><CodeLine lineNumber="477"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00478" /><CodeLine lineNumber="478" lineLink="#ac4b45ab450a043187e92eaace7d62018"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> ShadowMapping <a href="#ac4b45ab450a043187e92eaace7d62018">getShadowMapping</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/triple">Triple</a> &amp;TargetTriple, </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> LongSize,</Highlight></CodeLine>
<Link id="l00479" /><CodeLine lineNumber="479"><Highlight kind="normal">                                      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsKasan) &#123;</Highlight></CodeLine>
<Link id="l00480" /><CodeLine lineNumber="480"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsAndroid = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a3f3873f607a36e40241082727fef44db">isAndroid</a>();</Highlight></CodeLine>
<Link id="l00481" /><CodeLine lineNumber="481"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsIOS = TargetTriple.<a href="/docs/api/classes/llvm/triple/#ac36bf25c234d956997781778c866808e">isiOS</a>() || TargetTriple.<a href="/docs/api/classes/llvm/triple/#ac2eddca981f187178a53969d88465b4c">isWatchOS</a>() ||</Highlight></CodeLine>
<Link id="l00482" /><CodeLine lineNumber="482"><Highlight kind="normal">               TargetTriple.<a href="/docs/api/classes/llvm/triple/#a1f396e16b49f3277fc279f94a12d03a5">isDriverKit</a>();</Highlight></CodeLine>
<Link id="l00483" /><CodeLine lineNumber="483"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsMacOS = TargetTriple.<a href="/docs/api/classes/llvm/triple/#aa6a7d5d218ef0d2334fe24eaf997bbb6">isMacOSX</a>();</Highlight></CodeLine>
<Link id="l00484" /><CodeLine lineNumber="484"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsFreeBSD = TargetTriple.<a href="/docs/api/classes/llvm/triple/#aa98a01c1d72fde0f87823d204dc98334">isOSFreeBSD</a>();</Highlight></CodeLine>
<Link id="l00485" /><CodeLine lineNumber="485"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsNetBSD = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a3d98f3cc4fe2adddfa98dc0dbee55bdb">isOSNetBSD</a>();</Highlight></CodeLine>
<Link id="l00486" /><CodeLine lineNumber="486"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsPS = TargetTriple.<a href="/docs/api/classes/llvm/triple/#acd9044b8fc48fe6073b88c278aa12d28">isPS</a>();</Highlight></CodeLine>
<Link id="l00487" /><CodeLine lineNumber="487"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsLinux = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a898af817f450422b11443c35c99e64da">isOSLinux</a>();</Highlight></CodeLine>
<Link id="l00488" /><CodeLine lineNumber="488"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsPPC64 = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154aab15cb6de66f724829436a3466411993">Triple::ppc64</a> ||</Highlight></CodeLine>
<Link id="l00489" /><CodeLine lineNumber="489"><Highlight kind="normal">                 TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a4c6fec6469969e44d4af328ef7782c46">Triple::ppc64le</a>;</Highlight></CodeLine>
<Link id="l00490" /><CodeLine lineNumber="490"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsSystemZ = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154af0a491fddfa0a73d2b9074b587ca337f">Triple::systemz</a>;</Highlight></CodeLine>
<Link id="l00491" /><CodeLine lineNumber="491"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsX86&#95;64 = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a13d8ce5e71051718a537277c6a594062">Triple::x86&#95;64</a>;</Highlight></CodeLine>
<Link id="l00492" /><CodeLine lineNumber="492"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsMIPSN32ABI = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a47bfd723026a27a754135ac44f10b9b8">isABIN32</a>();</Highlight></CodeLine>
<Link id="l00493" /><CodeLine lineNumber="493"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsMIPS32 = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a73717ef7418a714f20be268c55a2c19e">isMIPS32</a>();</Highlight></CodeLine>
<Link id="l00494" /><CodeLine lineNumber="494"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsMIPS64 = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a52f9355613c6f3388d5761349926d835">isMIPS64</a>();</Highlight></CodeLine>
<Link id="l00495" /><CodeLine lineNumber="495"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsArmOrThumb = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a846115743c5cbbf80216168ad22f906c">isARM</a>() || TargetTriple.<a href="/docs/api/classes/llvm/triple/#a17b2679f91f697a4ffe46b872152e25b">isThumb</a>();</Highlight></CodeLine>
<Link id="l00496" /><CodeLine lineNumber="496"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsAArch64 = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154aee7bfdb86a0614afb9b44615e3e652d3">Triple::aarch64</a> ||</Highlight></CodeLine>
<Link id="l00497" /><CodeLine lineNumber="497"><Highlight kind="normal">                   TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154a6d5df0cfd7a0b0c0854555554396efd9">Triple::aarch64&#95;be</a>;</Highlight></CodeLine>
<Link id="l00498" /><CodeLine lineNumber="498"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsLoongArch64 = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a66a1a1858e17b6bcfcbbb1d5229d275e">isLoongArch64</a>();</Highlight></CodeLine>
<Link id="l00499" /><CodeLine lineNumber="499"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsRISCV64 = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a5fc23559f17bbe5ff83ec0fed0a5fdcf">getArch</a>() == <a href="/docs/api/classes/llvm/triple/#a547abd13f7a3c063aa72c8192a868154ae4763cb7c05a2a59ce27d51040bf4b08">Triple::riscv64</a>;</Highlight></CodeLine>
<Link id="l00500" /><CodeLine lineNumber="500"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsWindows = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a7736bfc4c1afef875ecf02f2a7701fe3">isOSWindows</a>();</Highlight></CodeLine>
<Link id="l00501" /><CodeLine lineNumber="501"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsFuchsia = TargetTriple.<a href="/docs/api/classes/llvm/triple/#ae891092a64f3b737dcba557a8450587c">isOSFuchsia</a>();</Highlight></CodeLine>
<Link id="l00502" /><CodeLine lineNumber="502"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsEmscripten = TargetTriple.<a href="/docs/api/classes/llvm/triple/#ac044f740fee04796ffe5ba17fdc3fa0c">isOSEmscripten</a>();</Highlight></CodeLine>
<Link id="l00503" /><CodeLine lineNumber="503"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsAMDGPU = TargetTriple.<a href="/docs/api/classes/llvm/triple/#a9318bd992483581cc335e1a33782ea45">isAMDGPU</a>();</Highlight></CodeLine>
<Link id="l00504" /><CodeLine lineNumber="504"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00505" /><CodeLine lineNumber="505"><Highlight kind="normal">  ShadowMapping Mapping;</Highlight></CodeLine>
<Link id="l00506" /><CodeLine lineNumber="506"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00507" /><CodeLine lineNumber="507"><Highlight kind="normal">  Mapping.Scale = <a href="#a0825e9eeff024102856e9a30f41bb386">kDefaultShadowScale</a>;</Highlight></CodeLine>
<Link id="l00508" /><CodeLine lineNumber="508"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a9d0c59216cf72992129adb73dc73ec65">ClMappingScale</a>.getNumOccurrences() &gt; 0) &#123;</Highlight></CodeLine>
<Link id="l00509" /><CodeLine lineNumber="509"><Highlight kind="normal">    Mapping.Scale = <a href="#a9d0c59216cf72992129adb73dc73ec65">ClMappingScale</a>;</Highlight></CodeLine>
<Link id="l00510" /><CodeLine lineNumber="510"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00511" /><CodeLine lineNumber="511"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00512" /><CodeLine lineNumber="512"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LongSize == 32) &#123;</Highlight></CodeLine>
<Link id="l00513" /><CodeLine lineNumber="513"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsAndroid)</Highlight></CodeLine>
<Link id="l00514" /><CodeLine lineNumber="514"><Highlight kind="normal">      Mapping.Offset = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>;</Highlight></CodeLine>
<Link id="l00515" /><CodeLine lineNumber="515"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsMIPSN32ABI)</Highlight></CodeLine>
<Link id="l00516" /><CodeLine lineNumber="516"><Highlight kind="normal">      Mapping.Offset = <a href="#ab6f29d0b2de1b74e731e1efbc653f844">kMIPS&#95;ShadowOffsetN32</a>;</Highlight></CodeLine>
<Link id="l00517" /><CodeLine lineNumber="517"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsMIPS32)</Highlight></CodeLine>
<Link id="l00518" /><CodeLine lineNumber="518"><Highlight kind="normal">      Mapping.Offset = <a href="#acda94f3cd0782a06ec8c4035ab6a6ba0">kMIPS32&#95;ShadowOffset32</a>;</Highlight></CodeLine>
<Link id="l00519" /><CodeLine lineNumber="519"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsFreeBSD)</Highlight></CodeLine>
<Link id="l00520" /><CodeLine lineNumber="520"><Highlight kind="normal">      Mapping.Offset = <a href="#a19c339ea0be179f2cd9a609083711b2d">kFreeBSD&#95;ShadowOffset32</a>;</Highlight></CodeLine>
<Link id="l00521" /><CodeLine lineNumber="521"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsNetBSD)</Highlight></CodeLine>
<Link id="l00522" /><CodeLine lineNumber="522"><Highlight kind="normal">      Mapping.Offset = <a href="#ad16c0ca942afbe549bcfa4f06b2eae12">kNetBSD&#95;ShadowOffset32</a>;</Highlight></CodeLine>
<Link id="l00523" /><CodeLine lineNumber="523"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsIOS)</Highlight></CodeLine>
<Link id="l00524" /><CodeLine lineNumber="524"><Highlight kind="normal">      Mapping.Offset = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>;</Highlight></CodeLine>
<Link id="l00525" /><CodeLine lineNumber="525"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsWindows)</Highlight></CodeLine>
<Link id="l00526" /><CodeLine lineNumber="526"><Highlight kind="normal">      Mapping.Offset = <a href="#adc0285e7406db187db7f4b477b888eca">kWindowsShadowOffset32</a>;</Highlight></CodeLine>
<Link id="l00527" /><CodeLine lineNumber="527"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsEmscripten)</Highlight></CodeLine>
<Link id="l00528" /><CodeLine lineNumber="528"><Highlight kind="normal">      Mapping.Offset = <a href="#a40e81ce979aa27fb2789c389719b1d7b">kEmscriptenShadowOffset</a>;</Highlight></CodeLine>
<Link id="l00529" /><CodeLine lineNumber="529"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00530" /><CodeLine lineNumber="530"><Highlight kind="normal">      Mapping.Offset = <a href="#a7221cab4eb5396f920c432650580815d">kDefaultShadowOffset32</a>;</Highlight></CodeLine>
<Link id="l00531" /><CodeLine lineNumber="531"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;  </Highlight><Highlight kind="comment">// LongSize == 64</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00532" /><CodeLine lineNumber="532"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Fuchsia is always PIE, which means that the beginning of the address</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00533" /><CodeLine lineNumber="533"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// space is always available.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00534" /><CodeLine lineNumber="534"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsFuchsia)</Highlight></CodeLine>
<Link id="l00535" /><CodeLine lineNumber="535"><Highlight kind="normal">      Mapping.Offset = 0;</Highlight></CodeLine>
<Link id="l00536" /><CodeLine lineNumber="536"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsPPC64)</Highlight></CodeLine>
<Link id="l00537" /><CodeLine lineNumber="537"><Highlight kind="normal">      Mapping.Offset = <a href="#ac71a9d13684166ebbd2dc2fae6ada036">kPPC64&#95;ShadowOffset64</a>;</Highlight></CodeLine>
<Link id="l00538" /><CodeLine lineNumber="538"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsSystemZ)</Highlight></CodeLine>
<Link id="l00539" /><CodeLine lineNumber="539"><Highlight kind="normal">      Mapping.Offset = <a href="#a714b1c9d5243d23282452c2ec154bf64">kSystemZ&#95;ShadowOffset64</a>;</Highlight></CodeLine>
<Link id="l00540" /><CodeLine lineNumber="540"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsFreeBSD &amp;&amp; IsAArch64)</Highlight></CodeLine>
<Link id="l00541" /><CodeLine lineNumber="541"><Highlight kind="normal">        Mapping.Offset = <a href="#ad2b59a0cc04cb42c94cc18e9d5f5ec6b">kFreeBSDAArch64&#95;ShadowOffset64</a>;</Highlight></CodeLine>
<Link id="l00542" /><CodeLine lineNumber="542"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsFreeBSD &amp;&amp; !IsMIPS64) &#123;</Highlight></CodeLine>
<Link id="l00543" /><CodeLine lineNumber="543"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsKasan)</Highlight></CodeLine>
<Link id="l00544" /><CodeLine lineNumber="544"><Highlight kind="normal">        Mapping.Offset = <a href="#a8a860b5741776f43c99ab75b0660e59a">kFreeBSDKasan&#95;ShadowOffset64</a>;</Highlight></CodeLine>
<Link id="l00545" /><CodeLine lineNumber="545"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00546" /><CodeLine lineNumber="546"><Highlight kind="normal">        Mapping.Offset = <a href="#a8749ec5f43deb3d657141795f9dbb210">kFreeBSD&#95;ShadowOffset64</a>;</Highlight></CodeLine>
<Link id="l00547" /><CodeLine lineNumber="547"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsNetBSD) &#123;</Highlight></CodeLine>
<Link id="l00548" /><CodeLine lineNumber="548"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsKasan)</Highlight></CodeLine>
<Link id="l00549" /><CodeLine lineNumber="549"><Highlight kind="normal">        Mapping.Offset = <a href="#ae705b5638cfef61445fc086ff309257b">kNetBSDKasan&#95;ShadowOffset64</a>;</Highlight></CodeLine>
<Link id="l00550" /><CodeLine lineNumber="550"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00551" /><CodeLine lineNumber="551"><Highlight kind="normal">        Mapping.Offset = <a href="#ad92d9ebd9f88c5f9fe134d9e2cd329d9">kNetBSD&#95;ShadowOffset64</a>;</Highlight></CodeLine>
<Link id="l00552" /><CodeLine lineNumber="552"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsPS)</Highlight></CodeLine>
<Link id="l00553" /><CodeLine lineNumber="553"><Highlight kind="normal">      Mapping.Offset = <a href="#a11a7b9f550cc8f2096e2feb0a6e7d77d">kPS&#95;ShadowOffset64</a>;</Highlight></CodeLine>
<Link id="l00554" /><CodeLine lineNumber="554"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsLinux &amp;&amp; IsX86&#95;64) &#123;</Highlight></CodeLine>
<Link id="l00555" /><CodeLine lineNumber="555"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsKasan)</Highlight></CodeLine>
<Link id="l00556" /><CodeLine lineNumber="556"><Highlight kind="normal">        Mapping.Offset = <a href="#a924de63e7606463a6405a1a7276fa33a">kLinuxKasan&#95;ShadowOffset64</a>;</Highlight></CodeLine>
<Link id="l00557" /><CodeLine lineNumber="557"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00558" /><CodeLine lineNumber="558"><Highlight kind="normal">        Mapping.Offset = (<a href="#ad4d2d4a3e49a33b6eb2f2d7696f73284">kSmallX86&#95;64ShadowOffsetBase</a> &amp;</Highlight></CodeLine>
<Link id="l00559" /><CodeLine lineNumber="559"><Highlight kind="normal">                          (<a href="#a1bb96936cdfae1973dcbae7e9a6e9afa">kSmallX86&#95;64ShadowOffsetAlignMask</a> &lt;&lt; Mapping.Scale));</Highlight></CodeLine>
<Link id="l00560" /><CodeLine lineNumber="560"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsWindows &amp;&amp; IsX86&#95;64) &#123;</Highlight></CodeLine>
<Link id="l00561" /><CodeLine lineNumber="561"><Highlight kind="normal">      Mapping.Offset = <a href="#a3f40cbca316fdd29c447fc96d7373109">kWindowsShadowOffset64</a>;</Highlight></CodeLine>
<Link id="l00562" /><CodeLine lineNumber="562"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsMIPS64)</Highlight></CodeLine>
<Link id="l00563" /><CodeLine lineNumber="563"><Highlight kind="normal">      Mapping.Offset = <a href="#a9141b9519404ab70f9def3fb4e44cbf6">kMIPS64&#95;ShadowOffset64</a>;</Highlight></CodeLine>
<Link id="l00564" /><CodeLine lineNumber="564"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsIOS)</Highlight></CodeLine>
<Link id="l00565" /><CodeLine lineNumber="565"><Highlight kind="normal">      Mapping.Offset = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>;</Highlight></CodeLine>
<Link id="l00566" /><CodeLine lineNumber="566"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsMacOS &amp;&amp; IsAArch64)</Highlight></CodeLine>
<Link id="l00567" /><CodeLine lineNumber="567"><Highlight kind="normal">      Mapping.Offset = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>;</Highlight></CodeLine>
<Link id="l00568" /><CodeLine lineNumber="568"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsAArch64)</Highlight></CodeLine>
<Link id="l00569" /><CodeLine lineNumber="569"><Highlight kind="normal">      Mapping.Offset = <a href="#afe1c55791cd733a93d250395352569df">kAArch64&#95;ShadowOffset64</a>;</Highlight></CodeLine>
<Link id="l00570" /><CodeLine lineNumber="570"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsLoongArch64)</Highlight></CodeLine>
<Link id="l00571" /><CodeLine lineNumber="571"><Highlight kind="normal">      Mapping.Offset = <a href="#aa8e5653e53fa32049d96cebcd3564b15">kLoongArch64&#95;ShadowOffset64</a>;</Highlight></CodeLine>
<Link id="l00572" /><CodeLine lineNumber="572"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsRISCV64)</Highlight></CodeLine>
<Link id="l00573" /><CodeLine lineNumber="573"><Highlight kind="normal">      Mapping.Offset = <a href="#a2959b7316b7440ef0479456a1f224f95">kRISCV64&#95;ShadowOffset64</a>;</Highlight></CodeLine>
<Link id="l00574" /><CodeLine lineNumber="574"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsAMDGPU)</Highlight></CodeLine>
<Link id="l00575" /><CodeLine lineNumber="575"><Highlight kind="normal">      Mapping.Offset = (<a href="#ad4d2d4a3e49a33b6eb2f2d7696f73284">kSmallX86&#95;64ShadowOffsetBase</a> &amp;</Highlight></CodeLine>
<Link id="l00576" /><CodeLine lineNumber="576"><Highlight kind="normal">                        (<a href="#a1bb96936cdfae1973dcbae7e9a6e9afa">kSmallX86&#95;64ShadowOffsetAlignMask</a> &lt;&lt; Mapping.Scale));</Highlight></CodeLine>
<Link id="l00577" /><CodeLine lineNumber="577"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00578" /><CodeLine lineNumber="578"><Highlight kind="normal">      Mapping.Offset = <a href="#a52e0a578af8418ff6a63a4b03d385012">kDefaultShadowOffset64</a>;</Highlight></CodeLine>
<Link id="l00579" /><CodeLine lineNumber="579"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00580" /><CodeLine lineNumber="580"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00581" /><CodeLine lineNumber="581"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a25d1ca975f48d54e4290d63829f35a95">ClForceDynamicShadow</a>) &#123;</Highlight></CodeLine>
<Link id="l00582" /><CodeLine lineNumber="582"><Highlight kind="normal">    Mapping.Offset = <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>;</Highlight></CodeLine>
<Link id="l00583" /><CodeLine lineNumber="583"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00584" /><CodeLine lineNumber="584"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00585" /><CodeLine lineNumber="585"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#aebb74a0c8e6baa32b77d0782e9e911dc">ClMappingOffset</a>.getNumOccurrences() &gt; 0) &#123;</Highlight></CodeLine>
<Link id="l00586" /><CodeLine lineNumber="586"><Highlight kind="normal">    Mapping.Offset = <a href="#aebb74a0c8e6baa32b77d0782e9e911dc">ClMappingOffset</a>;</Highlight></CodeLine>
<Link id="l00587" /><CodeLine lineNumber="587"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00588" /><CodeLine lineNumber="588"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00589" /><CodeLine lineNumber="589"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// OR-ing shadow offset if more efficient (at least on x86) if the offset</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00590" /><CodeLine lineNumber="590"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// is a power of two, but on ppc64 and loongarch64 we have to use add since</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00591" /><CodeLine lineNumber="591"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the shadow offset is not necessarily 1/8-th of the address space.  On</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00592" /><CodeLine lineNumber="592"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// SystemZ, we could OR the constant in a single instruction, but it&#39;s more</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00593" /><CodeLine lineNumber="593"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// efficient to load it once and use indexed addressing.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00594" /><CodeLine lineNumber="594"><Highlight kind="normal">  Mapping.OrShadowOffset = !IsAArch64 &amp;&amp; !IsPPC64 &amp;&amp; !IsSystemZ &amp;&amp; !IsPS &amp;&amp;</Highlight></CodeLine>
<Link id="l00595" /><CodeLine lineNumber="595"><Highlight kind="normal">                           !IsRISCV64 &amp;&amp; !IsLoongArch64 &amp;&amp;</Highlight></CodeLine>
<Link id="l00596" /><CodeLine lineNumber="596"><Highlight kind="normal">                           !(Mapping.Offset &amp; (Mapping.Offset - 1)) &amp;&amp;</Highlight></CodeLine>
<Link id="l00597" /><CodeLine lineNumber="597"><Highlight kind="normal">                           Mapping.Offset != <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>;</Highlight></CodeLine>
<Link id="l00598" /><CodeLine lineNumber="598"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsAndroidWithIfuncSupport =</Highlight></CodeLine>
<Link id="l00599" /><CodeLine lineNumber="599"><Highlight kind="normal">      IsAndroid &amp;&amp; !TargetTriple.<a href="/docs/api/classes/llvm/triple/#a13b920f74d7ae331cfd2740a790de541">isAndroidVersionLT</a>(21);</Highlight></CodeLine>
<Link id="l00600" /><CodeLine lineNumber="600"><Highlight kind="normal">  Mapping.InGlobal = <a href="#ae3d5d96c349d9c866c3641bbadc0554b">ClWithIfunc</a> &amp;&amp; IsAndroidWithIfuncSupport &amp;&amp; IsArmOrThumb;</Highlight></CodeLine>
<Link id="l00601" /><CodeLine lineNumber="601"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00602" /><CodeLine lineNumber="602"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Mapping;</Highlight></CodeLine>
<Link id="l00603" /><CodeLine lineNumber="603"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00604" /><CodeLine lineNumber="604"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00605" /><CodeLine lineNumber="605"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal"><a href="/docs/api/namespaces/llvm">llvm</a> &#123;</Highlight></CodeLine>
<Link id="l00606" /><CodeLine lineNumber="606" lineLink="/docs/api/namespaces/llvm/#aef7ea18a6637c39986a0da770872af6d"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#aef7ea18a6637c39986a0da770872af6d">getAddressSanitizerParams</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/triple">Triple</a> &amp;TargetTriple, </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> LongSize,</Highlight></CodeLine>
<Link id="l00607" /><CodeLine lineNumber="607"><Highlight kind="normal">                               </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsKasan, uint64&#95;t &#42;ShadowBase,</Highlight></CodeLine>
<Link id="l00608" /><CodeLine lineNumber="608"><Highlight kind="normal">                               </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> &#42;MappingScale, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> &#42;OrShadowOffset) &#123;</Highlight></CodeLine>
<Link id="l00609" /><CodeLine lineNumber="609"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> Mapping = <a href="#ac4b45ab450a043187e92eaace7d62018">getShadowMapping</a>(TargetTriple, LongSize, IsKasan);</Highlight></CodeLine>
<Link id="l00610" /><CodeLine lineNumber="610"><Highlight kind="normal">  &#42;ShadowBase = Mapping.Offset;</Highlight></CodeLine>
<Link id="l00611" /><CodeLine lineNumber="611"><Highlight kind="normal">  &#42;MappingScale = Mapping.Scale;</Highlight></CodeLine>
<Link id="l00612" /><CodeLine lineNumber="612"><Highlight kind="normal">  &#42;OrShadowOffset = Mapping.OrShadowOffset;</Highlight></CodeLine>
<Link id="l00613" /><CodeLine lineNumber="613"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00614" /><CodeLine lineNumber="614"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00615" /><CodeLine lineNumber="615" lineLink="/docs/api/structs/llvm/asanaccessinfo/#af9d35ec5498e796bfff16fbd43f46a6d"><Highlight kind="normal"><a href="/docs/api/structs/llvm/asanaccessinfo/#af9d35ec5498e796bfff16fbd43f46a6d">ASanAccessInfo::ASanAccessInfo</a>(int32&#95;t <a href="/docs/api/structs/llvm/asanaccessinfo/#ac266711cabbe76782e3e68d0ad07f120">Packed</a>)</Highlight></CodeLine>
<Link id="l00616" /><CodeLine lineNumber="616"><Highlight kind="normal">    : <a href="/docs/api/structs/llvm/asanaccessinfo/#ac266711cabbe76782e3e68d0ad07f120">Packed</a>(<a href="/docs/api/structs/llvm/asanaccessinfo/#ac266711cabbe76782e3e68d0ad07f120">Packed</a>),</Highlight></CodeLine>
<Link id="l00617" /><CodeLine lineNumber="617"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/asanaccessinfo/#aedb158c99ad471e46b041664fc41d53d">AccessSizeIndex</a>((<a href="/docs/api/structs/llvm/asanaccessinfo/#ac266711cabbe76782e3e68d0ad07f120">Packed</a> &gt;&gt; <a href="#a9bd091ccb08f4fcaef69d6c5f956572a">kAccessSizeIndexShift</a>) &amp; <a href="#a095b4c60115113ef59a28ffb3a817422">kAccessSizeIndexMask</a>),</Highlight></CodeLine>
<Link id="l00618" /><CodeLine lineNumber="618"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/asanaccessinfo/#a07a91a2e62ba8d9f691cc2453c3328b7">IsWrite</a>((<a href="/docs/api/structs/llvm/asanaccessinfo/#ac266711cabbe76782e3e68d0ad07f120">Packed</a> &gt;&gt; <a href="#a19deb83e797e941c8400caa50f648a50">kIsWriteShift</a>) &amp; <a href="#a4ac0cc78d7c86822b81df1b7db4338bc">kIsWriteMask</a>),</Highlight></CodeLine>
<Link id="l00619" /><CodeLine lineNumber="619"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/asanaccessinfo/#a2f77ba3162e2f25ed0298eb7c374901e">CompileKernel</a>((<a href="/docs/api/structs/llvm/asanaccessinfo/#ac266711cabbe76782e3e68d0ad07f120">Packed</a> &gt;&gt; <a href="#ae065abe1628e445fa1a1a378d8ee0648">kCompileKernelShift</a>) &amp; <a href="#a230c7d7ca3e0e9088b709d8ee861c23c">kCompileKernelMask</a>) &#123;&#125;</Highlight></CodeLine>
<Link id="l00620" /><CodeLine lineNumber="620"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00621" /><CodeLine lineNumber="621" lineLink="/docs/api/structs/llvm/asanaccessinfo/#a44344ba0968ab6dc77b69cfd881e9595"><Highlight kind="normal"><a href="/docs/api/structs/llvm/asanaccessinfo/#af9d35ec5498e796bfff16fbd43f46a6d">ASanAccessInfo::ASanAccessInfo</a>(</Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/asanaccessinfo/#a07a91a2e62ba8d9f691cc2453c3328b7">IsWrite</a>, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/asanaccessinfo/#a2f77ba3162e2f25ed0298eb7c374901e">CompileKernel</a>,</Highlight></CodeLine>
<Link id="l00622" /><CodeLine lineNumber="622"><Highlight kind="normal">                               uint8&#95;t <a href="/docs/api/structs/llvm/asanaccessinfo/#aedb158c99ad471e46b041664fc41d53d">AccessSizeIndex</a>)</Highlight></CodeLine>
<Link id="l00623" /><CodeLine lineNumber="623"><Highlight kind="normal">    : <a href="/docs/api/structs/llvm/asanaccessinfo/#ac266711cabbe76782e3e68d0ad07f120">Packed</a>((<a href="/docs/api/structs/llvm/asanaccessinfo/#a07a91a2e62ba8d9f691cc2453c3328b7">IsWrite</a> &lt;&lt; <a href="#a19deb83e797e941c8400caa50f648a50">kIsWriteShift</a>) +</Highlight></CodeLine>
<Link id="l00624" /><CodeLine lineNumber="624"><Highlight kind="normal">             (<a href="/docs/api/structs/llvm/asanaccessinfo/#a2f77ba3162e2f25ed0298eb7c374901e">CompileKernel</a> &lt;&lt; <a href="#ae065abe1628e445fa1a1a378d8ee0648">kCompileKernelShift</a>) +</Highlight></CodeLine>
<Link id="l00625" /><CodeLine lineNumber="625"><Highlight kind="normal">             (<a href="/docs/api/structs/llvm/asanaccessinfo/#aedb158c99ad471e46b041664fc41d53d">AccessSizeIndex</a> &lt;&lt; <a href="#a9bd091ccb08f4fcaef69d6c5f956572a">kAccessSizeIndexShift</a>)),</Highlight></CodeLine>
<Link id="l00626" /><CodeLine lineNumber="626"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/asanaccessinfo/#aedb158c99ad471e46b041664fc41d53d">AccessSizeIndex</a>(<a href="/docs/api/structs/llvm/asanaccessinfo/#aedb158c99ad471e46b041664fc41d53d">AccessSizeIndex</a>), <a href="/docs/api/structs/llvm/asanaccessinfo/#a07a91a2e62ba8d9f691cc2453c3328b7">IsWrite</a>(<a href="/docs/api/structs/llvm/asanaccessinfo/#a07a91a2e62ba8d9f691cc2453c3328b7">IsWrite</a>),</Highlight></CodeLine>
<Link id="l00627" /><CodeLine lineNumber="627"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/asanaccessinfo/#a2f77ba3162e2f25ed0298eb7c374901e">CompileKernel</a>(<a href="/docs/api/structs/llvm/asanaccessinfo/#a2f77ba3162e2f25ed0298eb7c374901e">CompileKernel</a>) &#123;&#125;</Highlight></CodeLine>
<Link id="l00628" /><CodeLine lineNumber="628"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00629" /><CodeLine lineNumber="629"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// namespace llvm</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00630" /><CodeLine lineNumber="630"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00631" /><CodeLine lineNumber="631" lineLink="#a4ae843502b417fca05b0d9b1ccd9df94"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a4ae843502b417fca05b0d9b1ccd9df94">getRedzoneSizeForScale</a>(</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> MappingScale) &#123;</Highlight></CodeLine>
<Link id="l00632" /><CodeLine lineNumber="632"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Redzone used for stack and globals is at least 32 bytes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00633" /><CodeLine lineNumber="633"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For scales 6 and 7, the redzone has to be 64 and 128 bytes respectively.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00634" /><CodeLine lineNumber="634"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> std::max(32U, 1U &lt;&lt; MappingScale);</Highlight></CodeLine>
<Link id="l00635" /><CodeLine lineNumber="635"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00636" /><CodeLine lineNumber="636"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00637" /><CodeLine lineNumber="637" lineLink="#a30ad890949cdfd6777919b71f4d09dfe"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> uint64&#95;t <a href="#a30ad890949cdfd6777919b71f4d09dfe">GetCtorAndDtorPriority</a>(<a href="/docs/api/classes/llvm/triple">Triple</a> &amp;TargetTriple) &#123;</Highlight></CodeLine>
<Link id="l00638" /><CodeLine lineNumber="638"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TargetTriple.<a href="/docs/api/classes/llvm/triple/#ac044f740fee04796ffe5ba17fdc3fa0c">isOSEmscripten</a>()) &#123;</Highlight></CodeLine>
<Link id="l00639" /><CodeLine lineNumber="639"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="#a79c217bbf91742b02797b0c426674dfe">kAsanEmscriptenCtorAndDtorPriority</a>;</Highlight></CodeLine>
<Link id="l00640" /><CodeLine lineNumber="640"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l00641" /><CodeLine lineNumber="641"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="#a602962e4e3026aa808d7a026ef6b300f">kAsanCtorAndDtorPriority</a>;</Highlight></CodeLine>
<Link id="l00642" /><CodeLine lineNumber="642"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00643" /><CodeLine lineNumber="643"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00644" /><CodeLine lineNumber="644"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00645" /><CodeLine lineNumber="645" lineLink="#a2cd6efecbc36daba036d332c2556b668"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/twine">Twine</a> <a href="#a2cd6efecbc36daba036d332c2556b668">genName</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a> suffix) &#123;</Highlight></CodeLine>
<Link id="l00646" /><CodeLine lineNumber="646"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/twine">Twine</a>(<a href="#a476e7801fbfecbea19d62de9a27e71ae">kAsanGenPrefix</a>) + suffix;</Highlight></CodeLine>
<Link id="l00647" /><CodeLine lineNumber="647"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l00648" /><CodeLine lineNumber="648"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00649" /><CodeLine lineNumber="649"><Highlight kind="normal"></Highlight><Highlight kind="keyword">namespace </Highlight><Highlight kind="normal">&#123;</Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00650" /><CodeLine lineNumber="650"><Highlight kind="comment">/// Helper RAII class to post-process inserted asan runtime calls during a</Highlight></CodeLine>
<Link id="l00651" /><CodeLine lineNumber="651"><Highlight kind="comment">/// pass on a single Function. Upon end of scope, detects and applies the</Highlight></CodeLine>
<Link id="l00652" /><CodeLine lineNumber="652"><Highlight kind="comment">/// required funclet OpBundle.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00653" /><CodeLine lineNumber="653" lineLink="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter"><Highlight kind="normal"></Highlight><Highlight kind="keyword">class </Highlight><Highlight kind="normal"><a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#a5290d0349e696ca38a092b3c61a0f1f8">RuntimeCallInserter</a> &#123;</Highlight></CodeLine>
<Link id="l00654" /><CodeLine lineNumber="654"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/function">Function</a> &#42;OwnerFn = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00655" /><CodeLine lineNumber="655"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> TrackInsertedCalls = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00656" /><CodeLine lineNumber="656"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;CallInst &#42;&gt;</a> InsertedCalls;</Highlight></CodeLine>
<Link id="l00657" /><CodeLine lineNumber="657"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00658" /><CodeLine lineNumber="658"><Highlight kind="normal"></Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l00659" /><CodeLine lineNumber="659" lineLink="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#a5290d0349e696ca38a092b3c61a0f1f8"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#a5290d0349e696ca38a092b3c61a0f1f8">RuntimeCallInserter</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;Fn) : OwnerFn(&amp;Fn) &#123;</Highlight></CodeLine>
<Link id="l00660" /><CodeLine lineNumber="660"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Fn.<a href="/docs/api/classes/llvm/function/#a6a0f6312963ee6fb0969243607174949">hasPersonalityFn</a>()) &#123;</Highlight></CodeLine>
<Link id="l00661" /><CodeLine lineNumber="661"><Highlight kind="normal">      auto Personality = classifyEHPersonality(Fn.getPersonalityFn());</Highlight></CodeLine>
<Link id="l00662" /><CodeLine lineNumber="662"><Highlight kind="normal">      if (isScopedEHPersonality(Personality))</Highlight></CodeLine>
<Link id="l00663" /><CodeLine lineNumber="663"><Highlight kind="normal">        TrackInsertedCalls = true;</Highlight></CodeLine>
<Link id="l00664" /><CodeLine lineNumber="664"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00665" /><CodeLine lineNumber="665"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00666" /><CodeLine lineNumber="666"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00667" /><CodeLine lineNumber="667" lineLink="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#af2c1b11e25a6289f7eca7c11acd304dc"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#af2c1b11e25a6289f7eca7c11acd304dc">~RuntimeCallInserter</a>() &#123;</Highlight></CodeLine>
<Link id="l00668" /><CodeLine lineNumber="668"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (InsertedCalls.empty())</Highlight></CodeLine>
<Link id="l00669" /><CodeLine lineNumber="669"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00670" /><CodeLine lineNumber="670"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TrackInsertedCalls &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Calls were wrongly tracked&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00671" /><CodeLine lineNumber="671"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00672" /><CodeLine lineNumber="672"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;BasicBlock &#42;, ColorVector&gt;</a> BlockColors = <a href="/docs/api/namespaces/llvm/#a3a3a97fed79c86bf242b0f090e1cb2e6">colorEHFunclets</a>(&#42;OwnerFn);</Highlight></CodeLine>
<Link id="l00673" /><CodeLine lineNumber="673"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;CI : InsertedCalls) &#123;</Highlight></CodeLine>
<Link id="l00674" /><CodeLine lineNumber="674"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;BB = CI-&gt;<a href="/docs/api/classes/llvm/basicblock/#a1b4bf7c97cdc8159fd73d48063f0b250">getParent</a>();</Highlight></CodeLine>
<Link id="l00675" /><CodeLine lineNumber="675"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BB &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Instruction doesn&#39;t belong to a BasicBlock&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00676" /><CodeLine lineNumber="676"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BB-&gt;<a href="/docs/api/classes/llvm/basicblock/#a1b4bf7c97cdc8159fd73d48063f0b250">getParent</a>() == OwnerFn &amp;&amp;</Highlight></CodeLine>
<Link id="l00677" /><CodeLine lineNumber="677"><Highlight kind="normal">             </Highlight><Highlight kind="stringliteral">&quot;Instruction doesn&#39;t belong to the expected Function!&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00678" /><CodeLine lineNumber="678"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00679" /><CodeLine lineNumber="679"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#ac16c24df0637600996c9c6081da170a2">ColorVector</a> &amp;Colors = BlockColors&#91;BB&#93;;</Highlight></CodeLine>
<Link id="l00680" /><CodeLine lineNumber="680"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// funclet opbundles are only valid in monochromatic BBs.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00681" /><CodeLine lineNumber="681"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Note that unreachable BBs are seen as colorless by colorEHFunclets()</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00682" /><CodeLine lineNumber="682"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// and will be DCE&#39;ed later.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00683" /><CodeLine lineNumber="683"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Colors.<a href="/docs/api/classes/llvm/tinyptrvector/#a9dc659b723e6725130ad354ed821d400">empty</a>())</Highlight></CodeLine>
<Link id="l00684" /><CodeLine lineNumber="684"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00685" /><CodeLine lineNumber="685"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Colors.<a href="/docs/api/classes/llvm/tinyptrvector/#aac784c7664f3f6b8076756c6fb0eed74">size</a>() != 1) &#123;</Highlight></CodeLine>
<Link id="l00686" /><CodeLine lineNumber="686"><Highlight kind="normal">        OwnerFn-&gt;getContext().emitError(</Highlight></CodeLine>
<Link id="l00687" /><CodeLine lineNumber="687"><Highlight kind="normal">            </Highlight><Highlight kind="stringliteral">&quot;Instruction&#39;s BasicBlock is not monochromatic&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00688" /><CodeLine lineNumber="688"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00689" /><CodeLine lineNumber="689"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00690" /><CodeLine lineNumber="690"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00691" /><CodeLine lineNumber="691"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;Color = Colors.<a href="/docs/api/classes/llvm/tinyptrvector/#a3a26404d33061e8aaeab39c490181389">front</a>();</Highlight></CodeLine>
<Link id="l00692" /><CodeLine lineNumber="692"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/basicblock/#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> EHPadIt = Color-&gt;getFirstNonPHIIt();</Highlight></CodeLine>
<Link id="l00693" /><CodeLine lineNumber="693"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00694" /><CodeLine lineNumber="694"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (EHPadIt != Color-&gt;end() &amp;&amp; EHPadIt-&gt;isEHPad()) &#123;</Highlight></CodeLine>
<Link id="l00695" /><CodeLine lineNumber="695"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Replace CI with a clone with an added funclet OperandBundle</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00696" /><CodeLine lineNumber="696"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#aa97c65466bdd34abda6772dd32eb5d19">OperandBundleDef</a> OB(</Highlight><Highlight kind="stringliteral">&quot;funclet&quot;</Highlight><Highlight kind="normal">, &amp;&#42;EHPadIt);</Highlight></CodeLine>
<Link id="l00697" /><CodeLine lineNumber="697"><Highlight kind="normal">        </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;NewCall = <a href="/docs/api/classes/llvm/callbase/#a70d8ffa4f0ffa07bd736cb74d178d917">CallBase::addOperandBundle</a>(CI, <a href="/docs/api/classes/llvm/llvmcontext/#a44d727ac5fccf852bfb2bae3e06adc9ca8997c6b0930e2c05209e95e7172c6cf3">LLVMContext::OB&#95;funclet</a>,</Highlight></CodeLine>
<Link id="l00698" /><CodeLine lineNumber="698"><Highlight kind="normal">                                                   OB, CI-&gt;getIterator());</Highlight></CodeLine>
<Link id="l00699" /><CodeLine lineNumber="699"><Highlight kind="normal">        NewCall-&gt;copyMetadata(&#42;CI);</Highlight></CodeLine>
<Link id="l00700" /><CodeLine lineNumber="700"><Highlight kind="normal">        CI-&gt;replaceAllUsesWith(NewCall);</Highlight></CodeLine>
<Link id="l00701" /><CodeLine lineNumber="701"><Highlight kind="normal">        CI-&gt;eraseFromParent();</Highlight></CodeLine>
<Link id="l00702" /><CodeLine lineNumber="702"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l00703" /><CodeLine lineNumber="703"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00704" /><CodeLine lineNumber="704"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00705" /><CodeLine lineNumber="705"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00706" /><CodeLine lineNumber="706" lineLink="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> Callee,</Highlight></CodeLine>
<Link id="l00707" /><CodeLine lineNumber="707"><Highlight kind="normal">                              <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Value &#42;&gt;</a> Args = &#123;&#125;,</Highlight></CodeLine>
<Link id="l00708" /><CodeLine lineNumber="708"><Highlight kind="normal">                              </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/twine">Twine</a> &amp;Name = </Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l00709" /><CodeLine lineNumber="709"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a60a6d6c205f483fa96597a960f3c093b">GetInsertBlock</a>()-&gt;<a href="/docs/api/classes/llvm/basicblock/#a1b4bf7c97cdc8159fd73d48063f0b250">getParent</a>() == OwnerFn);</Highlight></CodeLine>
<Link id="l00710" /><CodeLine lineNumber="710"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00711" /><CodeLine lineNumber="711"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;Inst = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(Callee, Args, Name, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00712" /><CodeLine lineNumber="712"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TrackInsertedCalls)</Highlight></CodeLine>
<Link id="l00713" /><CodeLine lineNumber="713"><Highlight kind="normal">      InsertedCalls.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Inst);</Highlight></CodeLine>
<Link id="l00714" /><CodeLine lineNumber="714"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Inst;</Highlight></CodeLine>
<Link id="l00715" /><CodeLine lineNumber="715"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00716" /><CodeLine lineNumber="716"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l00717" /><CodeLine lineNumber="717"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00718" /><CodeLine lineNumber="718"><Highlight kind="comment">/// AddressSanitizer: instrument the code in module to find memory bugs.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00719" /><CodeLine lineNumber="719" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer"><Highlight kind="normal"></Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal"><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae700acd5d174922e475ea31fdb8fe51f">AddressSanitizer</a> &#123;</Highlight></CodeLine>
<Link id="l00720" /><CodeLine lineNumber="720" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae700acd5d174922e475ea31fdb8fe51f"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae700acd5d174922e475ea31fdb8fe51f">AddressSanitizer</a>(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/stacksafetyglobalinfo">StackSafetyGlobalInfo</a> &#42;SSGI,</Highlight></CodeLine>
<Link id="l00721" /><CodeLine lineNumber="721"><Highlight kind="normal">                   </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> InstrumentationWithCallsThreshold,</Highlight></CodeLine>
<Link id="l00722" /><CodeLine lineNumber="722"><Highlight kind="normal">                   uint32&#95;t MaxInlinePoisoningSize, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> CompileKernel = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00723" /><CodeLine lineNumber="723"><Highlight kind="normal">                   </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Recover = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseAfterScope = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00724" /><CodeLine lineNumber="724"><Highlight kind="normal">                   <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabd">AsanDetectStackUseAfterReturnMode</a> UseAfterReturn =</Highlight></CodeLine>
<Link id="l00725" /><CodeLine lineNumber="725"><Highlight kind="normal">                       <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabdabc366f2d0ba3d681e7a3899917c5d3de">AsanDetectStackUseAfterReturnMode::Runtime</a>)</Highlight></CodeLine>
<Link id="l00726" /><CodeLine lineNumber="726"><Highlight kind="normal">      : M(M),</Highlight></CodeLine>
<Link id="l00727" /><CodeLine lineNumber="727"><Highlight kind="normal">        CompileKernel(<a href="#aa09777d1507554d2873581bb83442022">ClEnableKasan</a>.getNumOccurrences() &gt; 0 ? <a href="#aa09777d1507554d2873581bb83442022">ClEnableKasan</a></Highlight></CodeLine>
<Link id="l00728" /><CodeLine lineNumber="728"><Highlight kind="normal">                                                            : CompileKernel),</Highlight></CodeLine>
<Link id="l00729" /><CodeLine lineNumber="729"><Highlight kind="normal">        Recover(<a href="#ab07c89b5ab3621d59817baefdae128cb">ClRecover</a>.getNumOccurrences() &gt; 0 ? <a href="#ab07c89b5ab3621d59817baefdae128cb">ClRecover</a> : Recover),</Highlight></CodeLine>
<Link id="l00730" /><CodeLine lineNumber="730"><Highlight kind="normal">        UseAfterScope(UseAfterScope || <a href="#a9a4fc66faeab43a236796f382e142af4">ClUseAfterScope</a>),</Highlight></CodeLine>
<Link id="l00731" /><CodeLine lineNumber="731"><Highlight kind="normal">        UseAfterReturn(<a href="#ab96ca2732f7eaecb2e762c9c754f7b37">ClUseAfterReturn</a>.getNumOccurrences() ? <a href="#ab96ca2732f7eaecb2e762c9c754f7b37">ClUseAfterReturn</a></Highlight></CodeLine>
<Link id="l00732" /><CodeLine lineNumber="732"><Highlight kind="normal">                                                            : UseAfterReturn),</Highlight></CodeLine>
<Link id="l00733" /><CodeLine lineNumber="733"><Highlight kind="normal">        SSGI(SSGI),</Highlight></CodeLine>
<Link id="l00734" /><CodeLine lineNumber="734"><Highlight kind="normal">        InstrumentationWithCallsThreshold(</Highlight></CodeLine>
<Link id="l00735" /><CodeLine lineNumber="735"><Highlight kind="normal">            <a href="#a7b6dcf17e1b173746a4939b677ca1fb0">ClInstrumentationWithCallsThreshold</a>.getNumOccurrences() &gt; 0</Highlight></CodeLine>
<Link id="l00736" /><CodeLine lineNumber="736"><Highlight kind="normal">                ? <a href="#a7b6dcf17e1b173746a4939b677ca1fb0">ClInstrumentationWithCallsThreshold</a></Highlight></CodeLine>
<Link id="l00737" /><CodeLine lineNumber="737"><Highlight kind="normal">                : InstrumentationWithCallsThreshold),</Highlight></CodeLine>
<Link id="l00738" /><CodeLine lineNumber="738"><Highlight kind="normal">        MaxInlinePoisoningSize(<a href="#a96c36d2e9698f2974735d30dfea6893c">ClMaxInlinePoisoningSize</a>.getNumOccurrences() &gt; 0</Highlight></CodeLine>
<Link id="l00739" /><CodeLine lineNumber="739"><Highlight kind="normal">                                   ? <a href="#a96c36d2e9698f2974735d30dfea6893c">ClMaxInlinePoisoningSize</a></Highlight></CodeLine>
<Link id="l00740" /><CodeLine lineNumber="740"><Highlight kind="normal">                                   : MaxInlinePoisoningSize) &#123;</Highlight></CodeLine>
<Link id="l00741" /><CodeLine lineNumber="741"><Highlight kind="normal">    C = &amp;(M.getContext());</Highlight></CodeLine>
<Link id="l00742" /><CodeLine lineNumber="742"><Highlight kind="normal">    DL = &amp;M.getDataLayout();</Highlight></CodeLine>
<Link id="l00743" /><CodeLine lineNumber="743"><Highlight kind="normal">    LongSize = M.getDataLayout().getPointerSizeInBits();</Highlight></CodeLine>
<Link id="l00744" /><CodeLine lineNumber="744"><Highlight kind="normal">    IntptrTy = <a href="/docs/api/classes/llvm/type/#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(&#42;C, LongSize);</Highlight></CodeLine>
<Link id="l00745" /><CodeLine lineNumber="745"><Highlight kind="normal">    PtrTy = <a href="/docs/api/classes/llvm/pointertype/#af8a1dbdbfd89aa4899b3c0d39495d0dd">PointerType::getUnqual</a>(&#42;C);</Highlight></CodeLine>
<Link id="l00746" /><CodeLine lineNumber="746"><Highlight kind="normal">    Int32Ty = <a href="/docs/api/classes/llvm/type/#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(&#42;C);</Highlight></CodeLine>
<Link id="l00747" /><CodeLine lineNumber="747"><Highlight kind="normal">    TargetTriple = <a href="/docs/api/classes/llvm/triple">Triple</a>(M.getTargetTriple());</Highlight></CodeLine>
<Link id="l00748" /><CodeLine lineNumber="748"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00749" /><CodeLine lineNumber="749"><Highlight kind="normal">    Mapping = <a href="#ac4b45ab450a043187e92eaace7d62018">getShadowMapping</a>(TargetTriple, LongSize, this-&gt;CompileKernel);</Highlight></CodeLine>
<Link id="l00750" /><CodeLine lineNumber="750"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00751" /><CodeLine lineNumber="751"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(this-&gt;UseAfterReturn != <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabda4bbb8f967da6d1a610596d7257179c2b">AsanDetectStackUseAfterReturnMode::Invalid</a>);</Highlight></CodeLine>
<Link id="l00752" /><CodeLine lineNumber="752"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00753" /><CodeLine lineNumber="753"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00754" /><CodeLine lineNumber="754" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a8a8741af2dcfc3312679330e1069c734"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/typesize">TypeSize</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a8a8741af2dcfc3312679330e1069c734">getAllocaSizeInBytes</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &amp;AI)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00755" /><CodeLine lineNumber="755"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> &#42;AI.<a href="/docs/api/classes/llvm/allocainst/#ad92f6c67d55ced3de1569ee791c38679">getAllocationSize</a>(AI.<a href="/docs/api/classes/llvm/instruction/#af65afd02332c4f21c2fab7d217d6600f">getDataLayout</a>());</Highlight></CodeLine>
<Link id="l00756" /><CodeLine lineNumber="756"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00757" /><CodeLine lineNumber="757"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00758" /><CodeLine lineNumber="758"><Highlight kind="comment">  /// Check if we want (and can) handle this alloca.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00759" /><CodeLine lineNumber="759"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> isInterestingAlloca(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &amp;AI);</Highlight></CodeLine>
<Link id="l00760" /><CodeLine lineNumber="760"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00761" /><CodeLine lineNumber="761"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> ignoreAccess(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Inst, <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>);</Highlight></CodeLine>
<Link id="l00762" /><CodeLine lineNumber="762"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> getInterestingMemoryOperands(</Highlight></CodeLine>
<Link id="l00763" /><CodeLine lineNumber="763"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;InterestingMemoryOperand&gt;</a> &amp;Interesting);</Highlight></CodeLine>
<Link id="l00764" /><CodeLine lineNumber="764"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00765" /><CodeLine lineNumber="765"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> instrumentMop(<a href="/docs/api/classes/llvm/objectsizeoffsetvisitor">ObjectSizeOffsetVisitor</a> &amp;ObjSizeVis,</Highlight></CodeLine>
<Link id="l00766" /><CodeLine lineNumber="766"><Highlight kind="normal">                     <a href="/docs/api/classes/llvm/interestingmemoryoperand">InterestingMemoryOperand</a> &amp;O, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseCalls,</Highlight></CodeLine>
<Link id="l00767" /><CodeLine lineNumber="767"><Highlight kind="normal">                     </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI);</Highlight></CodeLine>
<Link id="l00768" /><CodeLine lineNumber="768"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> instrumentPointerComparisonOrSubtraction(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</Highlight></CodeLine>
<Link id="l00769" /><CodeLine lineNumber="769"><Highlight kind="normal">                                                <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI);</Highlight></CodeLine>
<Link id="l00770" /><CodeLine lineNumber="770"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> instrumentAddress(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;OrigIns, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore,</Highlight></CodeLine>
<Link id="l00771" /><CodeLine lineNumber="771"><Highlight kind="normal">                         <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr, <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment,</Highlight></CodeLine>
<Link id="l00772" /><CodeLine lineNumber="772"><Highlight kind="normal">                         uint32&#95;t TypeStoreSize, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsWrite,</Highlight></CodeLine>
<Link id="l00773" /><CodeLine lineNumber="773"><Highlight kind="normal">                         <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseCalls, uint32&#95;t Exp,</Highlight></CodeLine>
<Link id="l00774" /><CodeLine lineNumber="774"><Highlight kind="normal">                         <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI);</Highlight></CodeLine>
<Link id="l00775" /><CodeLine lineNumber="775"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;instrumentAMDGPUAddress(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;OrigIns,</Highlight></CodeLine>
<Link id="l00776" /><CodeLine lineNumber="776"><Highlight kind="normal">                                       <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</Highlight></CodeLine>
<Link id="l00777" /><CodeLine lineNumber="777"><Highlight kind="normal">                                       uint32&#95;t TypeStoreSize, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsWrite,</Highlight></CodeLine>
<Link id="l00778" /><CodeLine lineNumber="778"><Highlight kind="normal">                                       <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument);</Highlight></CodeLine>
<Link id="l00779" /><CodeLine lineNumber="779"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;genAMDGPUReportBlock(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>,</Highlight></CodeLine>
<Link id="l00780" /><CodeLine lineNumber="780"><Highlight kind="normal">                                    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Recover);</Highlight></CodeLine>
<Link id="l00781" /><CodeLine lineNumber="781"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> instrumentUnusualSizeOrAlignment(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</Highlight></CodeLine>
<Link id="l00782" /><CodeLine lineNumber="782"><Highlight kind="normal">                                        <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</Highlight></CodeLine>
<Link id="l00783" /><CodeLine lineNumber="783"><Highlight kind="normal">                                        <a href="/docs/api/classes/llvm/typesize">TypeSize</a> TypeStoreSize, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsWrite,</Highlight></CodeLine>
<Link id="l00784" /><CodeLine lineNumber="784"><Highlight kind="normal">                                        <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseCalls,</Highlight></CodeLine>
<Link id="l00785" /><CodeLine lineNumber="785"><Highlight kind="normal">                                        uint32&#95;t Exp,</Highlight></CodeLine>
<Link id="l00786" /><CodeLine lineNumber="786"><Highlight kind="normal">                                        <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI);</Highlight></CodeLine>
<Link id="l00787" /><CodeLine lineNumber="787"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> instrumentMaskedLoadOrStore(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer">AddressSanitizer</a> &#42;<a href="/docs/api/classes/llvm/pass">Pass</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</Highlight></CodeLine>
<Link id="l00788" /><CodeLine lineNumber="788"><Highlight kind="normal">                                   <a href="/docs/api/classes/llvm/type">Type</a> &#42;IntptrTy, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Mask, <a href="/docs/api/classes/llvm/value">Value</a> &#42;EVL,</Highlight></CodeLine>
<Link id="l00789" /><CodeLine lineNumber="789"><Highlight kind="normal">                                   <a href="/docs/api/classes/llvm/value">Value</a> &#42;Stride, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</Highlight></CodeLine>
<Link id="l00790" /><CodeLine lineNumber="790"><Highlight kind="normal">                                   <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Granularity,</Highlight></CodeLine>
<Link id="l00791" /><CodeLine lineNumber="791"><Highlight kind="normal">                                   <a href="/docs/api/classes/llvm/type">Type</a> &#42;OpType, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsWrite,</Highlight></CodeLine>
<Link id="l00792" /><CodeLine lineNumber="792"><Highlight kind="normal">                                   <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseCalls,</Highlight></CodeLine>
<Link id="l00793" /><CodeLine lineNumber="793"><Highlight kind="normal">                                   uint32&#95;t Exp, <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI);</Highlight></CodeLine>
<Link id="l00794" /><CodeLine lineNumber="794"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;createSlowPathCmp(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;AddrLong,</Highlight></CodeLine>
<Link id="l00795" /><CodeLine lineNumber="795"><Highlight kind="normal">                           <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowValue, uint32&#95;t TypeStoreSize);</Highlight></CodeLine>
<Link id="l00796" /><CodeLine lineNumber="796"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;generateCrashCode(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</Highlight></CodeLine>
<Link id="l00797" /><CodeLine lineNumber="797"><Highlight kind="normal">                                 </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsWrite, </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> AccessSizeIndex,</Highlight></CodeLine>
<Link id="l00798" /><CodeLine lineNumber="798"><Highlight kind="normal">                                 <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument, uint32&#95;t Exp,</Highlight></CodeLine>
<Link id="l00799" /><CodeLine lineNumber="799"><Highlight kind="normal">                                 <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI);</Highlight></CodeLine>
<Link id="l00800" /><CodeLine lineNumber="800"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> instrumentMemIntrinsic(<a href="/docs/api/classes/llvm/memintrinsic">MemIntrinsic</a> &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI);</Highlight></CodeLine>
<Link id="l00801" /><CodeLine lineNumber="801"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;memToShadow(<a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB);</Highlight></CodeLine>
<Link id="l00802" /><CodeLine lineNumber="802"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> suppressInstrumentationSiteForDebug(</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> &amp;Instrumented);</Highlight></CodeLine>
<Link id="l00803" /><CodeLine lineNumber="803"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> instrumentFunction(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &#42;TLI);</Highlight></CodeLine>
<Link id="l00804" /><CodeLine lineNumber="804"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> maybeInsertAsanInitAtFunctionEntry(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</Highlight></CodeLine>
<Link id="l00805" /><CodeLine lineNumber="805"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> maybeInsertDynamicShadowAtFunctionEntry(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</Highlight></CodeLine>
<Link id="l00806" /><CodeLine lineNumber="806"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> markEscapedLocalAllocas(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</Highlight></CodeLine>
<Link id="l00807" /><CodeLine lineNumber="807"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00808" /><CodeLine lineNumber="808"><Highlight kind="normal"></Highlight><Highlight kind="keyword">private</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l00809" /><CodeLine lineNumber="809" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a5d62ed5898951d0775ed218ad3e2d56e"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">friend</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal"><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a5d62ed5898951d0775ed218ad3e2d56e">FunctionStackPoisoner</a>;</Highlight></CodeLine>
<Link id="l00810" /><CodeLine lineNumber="810"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00811" /><CodeLine lineNumber="811"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> initializeCallbacks(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &#42;TLI);</Highlight></CodeLine>
<Link id="l00812" /><CodeLine lineNumber="812"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00813" /><CodeLine lineNumber="813"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> LooksLikeCodeInBug11395(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</Highlight></CodeLine>
<Link id="l00814" /><CodeLine lineNumber="814"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> GlobalIsLinkerInitialized(<a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</Highlight></CodeLine>
<Link id="l00815" /><CodeLine lineNumber="815"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> isSafeAccess(<a href="/docs/api/classes/llvm/objectsizeoffsetvisitor">ObjectSizeOffsetVisitor</a> &amp;ObjSizeVis, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</Highlight></CodeLine>
<Link id="l00816" /><CodeLine lineNumber="816"><Highlight kind="normal">                    <a href="/docs/api/classes/llvm/typesize">TypeSize</a> TypeStoreSize) </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00817" /><CodeLine lineNumber="817"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l00818" /><CodeLine lineNumber="818"><Highlight kind="comment">  /// Helper to cleanup per-function state.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00819" /><CodeLine lineNumber="819"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal">FunctionStateRAII &#123;</Highlight></CodeLine>
<Link id="l00820" /><CodeLine lineNumber="820"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae700acd5d174922e475ea31fdb8fe51f">AddressSanitizer</a> &#42;<a href="/docs/api/classes/llvm/pass">Pass</a>;</Highlight></CodeLine>
<Link id="l00821" /><CodeLine lineNumber="821"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00822" /><CodeLine lineNumber="822"><Highlight kind="normal">    FunctionStateRAII(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae700acd5d174922e475ea31fdb8fe51f">AddressSanitizer</a> &#42;<a href="/docs/api/classes/llvm/pass">Pass</a>) : <a href="/docs/api/classes/llvm/pass">Pass</a>(<a href="/docs/api/classes/llvm/pass">Pass</a>) &#123;</Highlight></CodeLine>
<Link id="l00823" /><CodeLine lineNumber="823"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/classes/llvm/pass">Pass</a>-&gt;ProcessedAllocas.empty() &amp;&amp;</Highlight></CodeLine>
<Link id="l00824" /><CodeLine lineNumber="824"><Highlight kind="normal">             </Highlight><Highlight kind="stringliteral">&quot;last pass forgot to clear cache&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l00825" /><CodeLine lineNumber="825"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a href="/docs/api/classes/llvm/pass">Pass</a>-&gt;LocalDynamicShadow);</Highlight></CodeLine>
<Link id="l00826" /><CodeLine lineNumber="826"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00827" /><CodeLine lineNumber="827"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00828" /><CodeLine lineNumber="828"><Highlight kind="normal">    ~FunctionStateRAII() &#123;</Highlight></CodeLine>
<Link id="l00829" /><CodeLine lineNumber="829"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/pass">Pass</a>-&gt;LocalDynamicShadow = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00830" /><CodeLine lineNumber="830"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/pass">Pass</a>-&gt;ProcessedAllocas.clear();</Highlight></CodeLine>
<Link id="l00831" /><CodeLine lineNumber="831"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l00832" /><CodeLine lineNumber="832"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l00833" /><CodeLine lineNumber="833"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00834" /><CodeLine lineNumber="834"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/codegen/machinecheckdebugify-cpp/#a85892acfa8970627e9bd9c9815f15c25">Module</a> &amp;M;</Highlight></CodeLine>
<Link id="l00835" /><CodeLine lineNumber="835"><Highlight kind="normal">  LLVMContext &#42;C;</Highlight></CodeLine>
<Link id="l00836" /><CodeLine lineNumber="836"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> DataLayout &#42;DL;</Highlight></CodeLine>
<Link id="l00837" /><CodeLine lineNumber="837"><Highlight kind="normal">  Triple TargetTriple;</Highlight></CodeLine>
<Link id="l00838" /><CodeLine lineNumber="838"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> LongSize;</Highlight></CodeLine>
<Link id="l00839" /><CodeLine lineNumber="839"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> CompileKernel;</Highlight></CodeLine>
<Link id="l00840" /><CodeLine lineNumber="840"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Recover;</Highlight></CodeLine>
<Link id="l00841" /><CodeLine lineNumber="841"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseAfterScope;</Highlight></CodeLine>
<Link id="l00842" /><CodeLine lineNumber="842"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabd">AsanDetectStackUseAfterReturnMode</a> UseAfterReturn;</Highlight></CodeLine>
<Link id="l00843" /><CodeLine lineNumber="843"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a88ee8e4eea43084bd8964682683da88caa1fa27779242b4902f7ae3bdd5c6d508">Type</a> &#42;IntptrTy;</Highlight></CodeLine>
<Link id="l00844" /><CodeLine lineNumber="844"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/demangle/itaniumdemangle-h/#a88ee8e4eea43084bd8964682683da88caa1fa27779242b4902f7ae3bdd5c6d508">Type</a> &#42;Int32Ty;</Highlight></CodeLine>
<Link id="l00845" /><CodeLine lineNumber="845"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/pdb/#a33e853ec74d48b1340d1d4bae772d30bae385c38bb67ea909198e13ee23c21028">PointerType</a> &#42;PtrTy;</Highlight></CodeLine>
<Link id="l00846" /><CodeLine lineNumber="846"><Highlight kind="normal">  ShadowMapping Mapping;</Highlight></CodeLine>
<Link id="l00847" /><CodeLine lineNumber="847"><Highlight kind="normal">  FunctionCallee AsanHandleNoReturnFunc;</Highlight></CodeLine>
<Link id="l00848" /><CodeLine lineNumber="848"><Highlight kind="normal">  FunctionCallee AsanPtrCmpFunction, AsanPtrSubFunction;</Highlight></CodeLine>
<Link id="l00849" /><CodeLine lineNumber="849"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/isd/#a22ea9cec080dd5f4f47ba234c2f59110aac2f0a84dd2aa5ee4c3f1385e9565f5e">Constant</a> &#42;AsanShadowGlobal;</Highlight></CodeLine>
<Link id="l00850" /><CodeLine lineNumber="850"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00851" /><CodeLine lineNumber="851"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// These arrays is indexed by AccessIsWrite, Experiment and log2(AccessSize).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00852" /><CodeLine lineNumber="852"><Highlight kind="normal">  FunctionCallee AsanErrorCallback&#91;2&#93;&#91;2&#93;&#91;<a href="#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>&#93;;</Highlight></CodeLine>
<Link id="l00853" /><CodeLine lineNumber="853"><Highlight kind="normal">  FunctionCallee AsanMemoryAccessCallback&#91;2&#93;&#91;2&#93;&#91;<a href="#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>&#93;;</Highlight></CodeLine>
<Link id="l00854" /><CodeLine lineNumber="854"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00855" /><CodeLine lineNumber="855"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// These arrays is indexed by AccessIsWrite and Experiment.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00856" /><CodeLine lineNumber="856"><Highlight kind="normal">  FunctionCallee AsanErrorCallbackSized&#91;2&#93;&#91;2&#93;;</Highlight></CodeLine>
<Link id="l00857" /><CodeLine lineNumber="857"><Highlight kind="normal">  FunctionCallee AsanMemoryAccessCallbackSized&#91;2&#93;&#91;2&#93;;</Highlight></CodeLine>
<Link id="l00858" /><CodeLine lineNumber="858"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00859" /><CodeLine lineNumber="859"><Highlight kind="normal">  FunctionCallee AsanMemmove, AsanMemcpy, AsanMemset;</Highlight></CodeLine>
<Link id="l00860" /><CodeLine lineNumber="860"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a066e2a31a13d6520e52ae1944f194662">Value</a> &#42;LocalDynamicShadow = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00861" /><CodeLine lineNumber="861"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> StackSafetyGlobalInfo &#42;SSGI;</Highlight></CodeLine>
<Link id="l00862" /><CodeLine lineNumber="862"><Highlight kind="normal">  DenseMap&lt;const AllocaInst &#42;, bool&gt; ProcessedAllocas;</Highlight></CodeLine>
<Link id="l00863" /><CodeLine lineNumber="863"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00864" /><CodeLine lineNumber="864"><Highlight kind="normal">  FunctionCallee AMDGPUAddressShared;</Highlight></CodeLine>
<Link id="l00865" /><CodeLine lineNumber="865"><Highlight kind="normal">  FunctionCallee AMDGPUAddressPrivate;</Highlight></CodeLine>
<Link id="l00866" /><CodeLine lineNumber="866"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> InstrumentationWithCallsThreshold;</Highlight></CodeLine>
<Link id="l00867" /><CodeLine lineNumber="867"><Highlight kind="normal">  uint32&#95;t MaxInlinePoisoningSize;</Highlight></CodeLine>
<Link id="l00868" /><CodeLine lineNumber="868"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l00869" /><CodeLine lineNumber="869"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00870" /><CodeLine lineNumber="870" lineLink="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/moduleaddresssanitizer"><Highlight kind="normal"></Highlight><Highlight kind="keyword">class </Highlight><Highlight kind="normal"><a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/moduleaddresssanitizer/#aff0e7e435e8bbd930b71c32df8f2c421">ModuleAddressSanitizer</a> &#123;</Highlight></CodeLine>
<Link id="l00871" /><CodeLine lineNumber="871"><Highlight kind="normal"></Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l00872" /><CodeLine lineNumber="872" lineLink="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/moduleaddresssanitizer/#aff0e7e435e8bbd930b71c32df8f2c421"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/moduleaddresssanitizer/#aff0e7e435e8bbd930b71c32df8f2c421">ModuleAddressSanitizer</a>(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> InsertVersionCheck,</Highlight></CodeLine>
<Link id="l00873" /><CodeLine lineNumber="873"><Highlight kind="normal">                         </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> CompileKernel = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Recover = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00874" /><CodeLine lineNumber="874"><Highlight kind="normal">                         </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseGlobalsGC = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseOdrIndicator = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l00875" /><CodeLine lineNumber="875"><Highlight kind="normal">                         <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bf">AsanDtorKind</a> DestructorKind = <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa4cc6684df7b4a92b1dec6fce3264fac8">AsanDtorKind::Global</a>,</Highlight></CodeLine>
<Link id="l00876" /><CodeLine lineNumber="876"><Highlight kind="normal">                         <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08">AsanCtorKind</a> ConstructorKind = <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a4cc6684df7b4a92b1dec6fce3264fac8">AsanCtorKind::Global</a>)</Highlight></CodeLine>
<Link id="l00877" /><CodeLine lineNumber="877"><Highlight kind="normal">      : M(M),</Highlight></CodeLine>
<Link id="l00878" /><CodeLine lineNumber="878"><Highlight kind="normal">        CompileKernel(<a href="#aa09777d1507554d2873581bb83442022">ClEnableKasan</a>.getNumOccurrences() &gt; 0 ? <a href="#aa09777d1507554d2873581bb83442022">ClEnableKasan</a></Highlight></CodeLine>
<Link id="l00879" /><CodeLine lineNumber="879"><Highlight kind="normal">                                                            : CompileKernel),</Highlight></CodeLine>
<Link id="l00880" /><CodeLine lineNumber="880"><Highlight kind="normal">        InsertVersionCheck(<a href="#a2a1656d1f4ddeb386daf49396b178ab3">ClInsertVersionCheck</a>.getNumOccurrences() &gt; 0</Highlight></CodeLine>
<Link id="l00881" /><CodeLine lineNumber="881"><Highlight kind="normal">                               ? <a href="#a2a1656d1f4ddeb386daf49396b178ab3">ClInsertVersionCheck</a></Highlight></CodeLine>
<Link id="l00882" /><CodeLine lineNumber="882"><Highlight kind="normal">                               : InsertVersionCheck),</Highlight></CodeLine>
<Link id="l00883" /><CodeLine lineNumber="883"><Highlight kind="normal">        Recover(<a href="#ab07c89b5ab3621d59817baefdae128cb">ClRecover</a>.getNumOccurrences() &gt; 0 ? <a href="#ab07c89b5ab3621d59817baefdae128cb">ClRecover</a> : Recover),</Highlight></CodeLine>
<Link id="l00884" /><CodeLine lineNumber="884"><Highlight kind="normal">        UseGlobalsGC(UseGlobalsGC &amp;&amp; <a href="#aa612bd13cbe0dc1e574383f4eddc0760">ClUseGlobalsGC</a> &amp;&amp; !this-&gt;CompileKernel),</Highlight></CodeLine>
<Link id="l00885" /><CodeLine lineNumber="885"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Enable aliases as they should have no downside with ODR indicators.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00886" /><CodeLine lineNumber="886"><Highlight kind="normal">        UsePrivateAlias(<a href="#a108a44e27f64b25d5be99eab0c12b840">ClUsePrivateAlias</a>.getNumOccurrences() &gt; 0</Highlight></CodeLine>
<Link id="l00887" /><CodeLine lineNumber="887"><Highlight kind="normal">                            ? <a href="#a108a44e27f64b25d5be99eab0c12b840">ClUsePrivateAlias</a></Highlight></CodeLine>
<Link id="l00888" /><CodeLine lineNumber="888"><Highlight kind="normal">                            : UseOdrIndicator),</Highlight></CodeLine>
<Link id="l00889" /><CodeLine lineNumber="889"><Highlight kind="normal">        UseOdrIndicator(<a href="#a7499c29bb36dd906803322453ac406ad">ClUseOdrIndicator</a>.getNumOccurrences() &gt; 0</Highlight></CodeLine>
<Link id="l00890" /><CodeLine lineNumber="890"><Highlight kind="normal">                            ? <a href="#a7499c29bb36dd906803322453ac406ad">ClUseOdrIndicator</a></Highlight></CodeLine>
<Link id="l00891" /><CodeLine lineNumber="891"><Highlight kind="normal">                            : UseOdrIndicator),</Highlight></CodeLine>
<Link id="l00892" /><CodeLine lineNumber="892"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Not a typo: ClWithComdat is almost completely pointless without</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00893" /><CodeLine lineNumber="893"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// ClUseGlobalsGC (because then it only works on modules without</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00894" /><CodeLine lineNumber="894"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// globals, which are rare); it is a prerequisite for ClUseGlobalsGC;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00895" /><CodeLine lineNumber="895"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// and both suffer from gold PR19002 for which UseGlobalsGC constructor</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00896" /><CodeLine lineNumber="896"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// argument is designed as workaround. Therefore, disable both</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00897" /><CodeLine lineNumber="897"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// ClWithComdat and ClUseGlobalsGC unless the frontend says it&#39;s ok to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00898" /><CodeLine lineNumber="898"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// do globals-gc.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00899" /><CodeLine lineNumber="899"><Highlight kind="normal">        UseCtorComdat(UseGlobalsGC &amp;&amp; <a href="#aeded18588e9deea14f9c30eb995da5bb">ClWithComdat</a> &amp;&amp; !this-&gt;CompileKernel),</Highlight></CodeLine>
<Link id="l00900" /><CodeLine lineNumber="900"><Highlight kind="normal">        DestructorKind(DestructorKind),</Highlight></CodeLine>
<Link id="l00901" /><CodeLine lineNumber="901"><Highlight kind="normal">        ConstructorKind(<a href="#aca33036eb9649523a6345787acc33d29">ClConstructorKind</a>.getNumOccurrences() &gt; 0</Highlight></CodeLine>
<Link id="l00902" /><CodeLine lineNumber="902"><Highlight kind="normal">                            ? <a href="#aca33036eb9649523a6345787acc33d29">ClConstructorKind</a></Highlight></CodeLine>
<Link id="l00903" /><CodeLine lineNumber="903"><Highlight kind="normal">                            : ConstructorKind) &#123;</Highlight></CodeLine>
<Link id="l00904" /><CodeLine lineNumber="904"><Highlight kind="normal">    C = &amp;(M.getContext());</Highlight></CodeLine>
<Link id="l00905" /><CodeLine lineNumber="905"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> LongSize = M.getDataLayout().getPointerSizeInBits();</Highlight></CodeLine>
<Link id="l00906" /><CodeLine lineNumber="906"><Highlight kind="normal">    IntptrTy = <a href="/docs/api/classes/llvm/type/#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(&#42;C, LongSize);</Highlight></CodeLine>
<Link id="l00907" /><CodeLine lineNumber="907"><Highlight kind="normal">    PtrTy = <a href="/docs/api/classes/llvm/pointertype/#af8a1dbdbfd89aa4899b3c0d39495d0dd">PointerType::getUnqual</a>(&#42;C);</Highlight></CodeLine>
<Link id="l00908" /><CodeLine lineNumber="908"><Highlight kind="normal">    TargetTriple = <a href="/docs/api/classes/llvm/triple">Triple</a>(M.getTargetTriple());</Highlight></CodeLine>
<Link id="l00909" /><CodeLine lineNumber="909"><Highlight kind="normal">    Mapping = <a href="#ac4b45ab450a043187e92eaace7d62018">getShadowMapping</a>(TargetTriple, LongSize, this-&gt;CompileKernel);</Highlight></CodeLine>
<Link id="l00910" /><CodeLine lineNumber="910"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00911" /><CodeLine lineNumber="911"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a2ca87f4ce47405a2ebd8d6e0ab259d65">ClOverrideDestructorKind</a> != <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa4bbb8f967da6d1a610596d7257179c2b">AsanDtorKind::Invalid</a>)</Highlight></CodeLine>
<Link id="l00912" /><CodeLine lineNumber="912"><Highlight kind="normal">      this-&gt;DestructorKind = <a href="#a2ca87f4ce47405a2ebd8d6e0ab259d65">ClOverrideDestructorKind</a>;</Highlight></CodeLine>
<Link id="l00913" /><CodeLine lineNumber="913"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(this-&gt;DestructorKind != <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa4bbb8f967da6d1a610596d7257179c2b">AsanDtorKind::Invalid</a>);</Highlight></CodeLine>
<Link id="l00914" /><CodeLine lineNumber="914"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00915" /><CodeLine lineNumber="915"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00916" /><CodeLine lineNumber="916"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> instrumentModule();</Highlight></CodeLine>
<Link id="l00917" /><CodeLine lineNumber="917"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00918" /><CodeLine lineNumber="918"><Highlight kind="normal"></Highlight><Highlight kind="keyword">private</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l00919" /><CodeLine lineNumber="919"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> initializeCallbacks();</Highlight></CodeLine>
<Link id="l00920" /><CodeLine lineNumber="920"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00921" /><CodeLine lineNumber="921"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> instrumentGlobals(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> &#42;CtorComdat);</Highlight></CodeLine>
<Link id="l00922" /><CodeLine lineNumber="922"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> InstrumentGlobalsCOFF(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</Highlight></CodeLine>
<Link id="l00923" /><CodeLine lineNumber="923"><Highlight kind="normal">                             <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalVariable &#42;&gt;</a> ExtendedGlobals,</Highlight></CodeLine>
<Link id="l00924" /><CodeLine lineNumber="924"><Highlight kind="normal">                             <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Constant &#42;&gt;</a> MetadataInitializers);</Highlight></CodeLine>
<Link id="l00925" /><CodeLine lineNumber="925"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> instrumentGlobalsELF(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</Highlight></CodeLine>
<Link id="l00926" /><CodeLine lineNumber="926"><Highlight kind="normal">                            <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalVariable &#42;&gt;</a> ExtendedGlobals,</Highlight></CodeLine>
<Link id="l00927" /><CodeLine lineNumber="927"><Highlight kind="normal">                            <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Constant &#42;&gt;</a> MetadataInitializers,</Highlight></CodeLine>
<Link id="l00928" /><CodeLine lineNumber="928"><Highlight kind="normal">                            </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> std::string &amp;UniqueModuleId);</Highlight></CodeLine>
<Link id="l00929" /><CodeLine lineNumber="929"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> InstrumentGlobalsMachO(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</Highlight></CodeLine>
<Link id="l00930" /><CodeLine lineNumber="930"><Highlight kind="normal">                              <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalVariable &#42;&gt;</a> ExtendedGlobals,</Highlight></CodeLine>
<Link id="l00931" /><CodeLine lineNumber="931"><Highlight kind="normal">                              <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Constant &#42;&gt;</a> MetadataInitializers);</Highlight></CodeLine>
<Link id="l00932" /><CodeLine lineNumber="932"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00933" /><CodeLine lineNumber="933"><Highlight kind="normal">  InstrumentGlobalsWithMetadataArray(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</Highlight></CodeLine>
<Link id="l00934" /><CodeLine lineNumber="934"><Highlight kind="normal">                                     <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalVariable &#42;&gt;</a> ExtendedGlobals,</Highlight></CodeLine>
<Link id="l00935" /><CodeLine lineNumber="935"><Highlight kind="normal">                                     <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Constant &#42;&gt;</a> MetadataInitializers);</Highlight></CodeLine>
<Link id="l00936" /><CodeLine lineNumber="936"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00937" /><CodeLine lineNumber="937"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;CreateMetadataGlobal(<a href="/docs/api/classes/llvm/constant">Constant</a> &#42;Initializer,</Highlight></CodeLine>
<Link id="l00938" /><CodeLine lineNumber="938"><Highlight kind="normal">                                       <a href="/docs/api/classes/llvm/stringref">StringRef</a> OriginalName);</Highlight></CodeLine>
<Link id="l00939" /><CodeLine lineNumber="939"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> SetComdatForGlobalMetadata(<a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>, <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/classes/llvm/metadata">Metadata</a>,</Highlight></CodeLine>
<Link id="l00940" /><CodeLine lineNumber="940"><Highlight kind="normal">                                  <a href="/docs/api/classes/llvm/stringref">StringRef</a> InternalSuffix);</Highlight></CodeLine>
<Link id="l00941" /><CodeLine lineNumber="941"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;CreateAsanModuleDtor();</Highlight></CodeLine>
<Link id="l00942" /><CodeLine lineNumber="942"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00943" /><CodeLine lineNumber="943"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;getExcludedAliasedGlobal(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/globalalias">GlobalAlias</a> &amp;GA) </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00944" /><CodeLine lineNumber="944"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> shouldInstrumentGlobal(<a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00945" /><CodeLine lineNumber="945"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> ShouldUseMachOGlobalsSection() </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00946" /><CodeLine lineNumber="946"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/stringref">StringRef</a> getGlobalMetadataSection() </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00947" /><CodeLine lineNumber="947"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> poisonOneInitializer(<a href="/docs/api/classes/llvm/function">Function</a> &amp;GlobalInit);</Highlight></CodeLine>
<Link id="l00948" /><CodeLine lineNumber="948"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> createInitializerPoisonCalls();</Highlight></CodeLine>
<Link id="l00949" /><CodeLine lineNumber="949"><Highlight kind="normal">  uint64&#95;t getMinRedzoneSizeForGlobal()</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l00950" /><CodeLine lineNumber="950"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="#a4ae843502b417fca05b0d9b1ccd9df94">getRedzoneSizeForScale</a>(Mapping.Scale);</Highlight></CodeLine>
<Link id="l00951" /><CodeLine lineNumber="951"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l00952" /><CodeLine lineNumber="952"><Highlight kind="normal">  uint64&#95;t getRedzoneSizeForGlobal(uint64&#95;t SizeInBytes) </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00953" /><CodeLine lineNumber="953"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> GetAsanVersion() </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00954" /><CodeLine lineNumber="954"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;getOrCreateModuleName();</Highlight></CodeLine>
<Link id="l00955" /><CodeLine lineNumber="955"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00956" /><CodeLine lineNumber="956"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/module">Module</a> &amp;M;</Highlight></CodeLine>
<Link id="l00957" /><CodeLine lineNumber="957"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> CompileKernel;</Highlight></CodeLine>
<Link id="l00958" /><CodeLine lineNumber="958"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> InsertVersionCheck;</Highlight></CodeLine>
<Link id="l00959" /><CodeLine lineNumber="959"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Recover;</Highlight></CodeLine>
<Link id="l00960" /><CodeLine lineNumber="960"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseGlobalsGC;</Highlight></CodeLine>
<Link id="l00961" /><CodeLine lineNumber="961"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UsePrivateAlias;</Highlight></CodeLine>
<Link id="l00962" /><CodeLine lineNumber="962"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseOdrIndicator;</Highlight></CodeLine>
<Link id="l00963" /><CodeLine lineNumber="963"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseCtorComdat;</Highlight></CodeLine>
<Link id="l00964" /><CodeLine lineNumber="964"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bf">AsanDtorKind</a> DestructorKind;</Highlight></CodeLine>
<Link id="l00965" /><CodeLine lineNumber="965"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08">AsanCtorKind</a> ConstructorKind;</Highlight></CodeLine>
<Link id="l00966" /><CodeLine lineNumber="966"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;IntptrTy;</Highlight></CodeLine>
<Link id="l00967" /><CodeLine lineNumber="967"><Highlight kind="normal">  <a href="/docs/api/classes/pointertype">PointerType</a> &#42;PtrTy;</Highlight></CodeLine>
<Link id="l00968" /><CodeLine lineNumber="968"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/llvmcontext">LLVMContext</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>;</Highlight></CodeLine>
<Link id="l00969" /><CodeLine lineNumber="969"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/triple">Triple</a> TargetTriple;</Highlight></CodeLine>
<Link id="l00970" /><CodeLine lineNumber="970"><Highlight kind="normal">  ShadowMapping Mapping;</Highlight></CodeLine>
<Link id="l00971" /><CodeLine lineNumber="971"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanPoisonGlobals;</Highlight></CodeLine>
<Link id="l00972" /><CodeLine lineNumber="972"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanUnpoisonGlobals;</Highlight></CodeLine>
<Link id="l00973" /><CodeLine lineNumber="973"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanRegisterGlobals;</Highlight></CodeLine>
<Link id="l00974" /><CodeLine lineNumber="974"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanUnregisterGlobals;</Highlight></CodeLine>
<Link id="l00975" /><CodeLine lineNumber="975"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanRegisterImageGlobals;</Highlight></CodeLine>
<Link id="l00976" /><CodeLine lineNumber="976"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanUnregisterImageGlobals;</Highlight></CodeLine>
<Link id="l00977" /><CodeLine lineNumber="977"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanRegisterElfGlobals;</Highlight></CodeLine>
<Link id="l00978" /><CodeLine lineNumber="978"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanUnregisterElfGlobals;</Highlight></CodeLine>
<Link id="l00979" /><CodeLine lineNumber="979"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00980" /><CodeLine lineNumber="980"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/function">Function</a> &#42;AsanCtorFunction = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00981" /><CodeLine lineNumber="981"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/function">Function</a> &#42;AsanDtorFunction = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00982" /><CodeLine lineNumber="982"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/structs/modulename">ModuleName</a> = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l00983" /><CodeLine lineNumber="983"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l00984" /><CodeLine lineNumber="984"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00985" /><CodeLine lineNumber="985"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Stack poisoning does not play well with exception handling.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00986" /><CodeLine lineNumber="986"><Highlight kind="normal"></Highlight><Highlight kind="comment">// When an exception is thrown, we essentially bypass the code</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00987" /><CodeLine lineNumber="987"><Highlight kind="normal"></Highlight><Highlight kind="comment">// that unpoisones the stack. This is why the run-time library has</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00988" /><CodeLine lineNumber="988"><Highlight kind="normal"></Highlight><Highlight kind="comment">// to intercept &#95;&#95;cxa&#95;throw (as well as longjmp, etc) and unpoison the entire</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00989" /><CodeLine lineNumber="989"><Highlight kind="normal"></Highlight><Highlight kind="comment">// stack in the interceptor. This however does not work inside the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00990" /><CodeLine lineNumber="990"><Highlight kind="normal"></Highlight><Highlight kind="comment">// actual function which catches the exception. Most likely because the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00991" /><CodeLine lineNumber="991"><Highlight kind="normal"></Highlight><Highlight kind="comment">// compiler hoists the load of the shadow value somewhere too high.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00992" /><CodeLine lineNumber="992"><Highlight kind="normal"></Highlight><Highlight kind="comment">// This causes asan to report a non-existing bug on 453.povray.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00993" /><CodeLine lineNumber="993"><Highlight kind="normal"></Highlight><Highlight kind="comment">// It sounds like an LLVM bug.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l00994" /><CodeLine lineNumber="994" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner"><Highlight kind="normal"></Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal"><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a22469895240423b61ee2b39822d5c0af">FunctionStackPoisoner</a> : </Highlight><Highlight kind="keyword">public</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/instvisitor">InstVisitor</a>&lt;FunctionStackPoisoner&gt; &#123;</Highlight></CodeLine>
<Link id="l00995" /><CodeLine lineNumber="995" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>;</Highlight></CodeLine>
<Link id="l00996" /><CodeLine lineNumber="996" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer">AddressSanitizer</a> &amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>;</Highlight></CodeLine>
<Link id="l00997" /><CodeLine lineNumber="997" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>;</Highlight></CodeLine>
<Link id="l00998" /><CodeLine lineNumber="998" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a1846db5a2df4a8c900560be95363210d"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/dibuilder">DIBuilder</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a1846db5a2df4a8c900560be95363210d">DIB</a>;</Highlight></CodeLine>
<Link id="l00999" /><CodeLine lineNumber="999" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a07bc11db490f2edf7839493076c56cb0"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/llvmcontext">LLVMContext</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a07bc11db490f2edf7839493076c56cb0">C</a>;</Highlight></CodeLine>
<Link id="l01000" /><CodeLine lineNumber="1000" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>;</Highlight></CodeLine>
<Link id="l01001" /><CodeLine lineNumber="1001" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf5c2780ad835c54c27248ed826c61e3"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf5c2780ad835c54c27248ed826c61e3">IntptrPtrTy</a>;</Highlight></CodeLine>
<Link id="l01002" /><CodeLine lineNumber="1002" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a994ce80af04048616ca5954e257d6723"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/shadowmapping">ShadowMapping</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a994ce80af04048616ca5954e257d6723">Mapping</a>;</Highlight></CodeLine>
<Link id="l01003" /><CodeLine lineNumber="1003"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01004" /><CodeLine lineNumber="1004" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;AllocaInst &#42;, 16&gt;</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>;</Highlight></CodeLine>
<Link id="l01005" /><CodeLine lineNumber="1005" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ae4f03fc1e1d45f5bab36586281790978"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;AllocaInst &#42;, 16&gt;</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ae4f03fc1e1d45f5bab36586281790978">StaticAllocasToMoveUp</a>;</Highlight></CodeLine>
<Link id="l01006" /><CodeLine lineNumber="1006" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a73c4bbaeb91bf3a238b7b0ce80358601"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Instruction &#42;, 8&gt;</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a73c4bbaeb91bf3a238b7b0ce80358601">RetVec</a>;</Highlight></CodeLine>
<Link id="l01007" /><CodeLine lineNumber="1007"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01008" /><CodeLine lineNumber="1008" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a47e2de0b4b9f5aa2f4dbac5934918332"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a47e2de0b4b9f5aa2f4dbac5934918332">AsanStackMallocFunc</a>&#91;<a href="#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a> + 1&#93;,</Highlight></CodeLine>
<Link id="l01009" /><CodeLine lineNumber="1009" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a46862a84496d12848de821de87be3cc3"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a46862a84496d12848de821de87be3cc3">AsanStackFreeFunc</a>&#91;<a href="#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a> + 1&#93;;</Highlight></CodeLine>
<Link id="l01010" /><CodeLine lineNumber="1010" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6e0e5d7f6bd2776c14ebd7d9da5913b9"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6e0e5d7f6bd2776c14ebd7d9da5913b9">AsanSetShadowFunc</a>&#91;0x100&#93; = &#123;&#125;;</Highlight></CodeLine>
<Link id="l01011" /><CodeLine lineNumber="1011" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a129445d4046d1bb9112ae575997c63cb"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a129445d4046d1bb9112ae575997c63cb">AsanPoisonStackMemoryFunc</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#abe4c5b51b8f9aa8c954504023b4c3164">AsanUnpoisonStackMemoryFunc</a>;</Highlight></CodeLine>
<Link id="l01012" /><CodeLine lineNumber="1012" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ae4bcb221f841432521314e7b60c5db2c"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ae4bcb221f841432521314e7b60c5db2c">AsanAllocaPoisonFunc</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a7eec6ba17e8f3a985fc2103aadeb95f2">AsanAllocasUnpoisonFunc</a>;</Highlight></CodeLine>
<Link id="l01013" /><CodeLine lineNumber="1013"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01014" /><CodeLine lineNumber="1014"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Stores a place and arguments of poisoning/unpoisoning call for alloca.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01015" /><CodeLine lineNumber="1015" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">struct </Highlight><Highlight kind="normal"><a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall">AllocaPoisonCall</a> &#123;</Highlight></CodeLine>
<Link id="l01016" /><CodeLine lineNumber="1016" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall/#a2aa2d136a5f88bd6ef779bc192eaf415"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall/#a2aa2d136a5f88bd6ef779bc192eaf415">InsBefore</a>;</Highlight></CodeLine>
<Link id="l01017" /><CodeLine lineNumber="1017" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall/#a9140b49802f459a5ce232cdc30c8d2ec"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall/#a9140b49802f459a5ce232cdc30c8d2ec">AI</a>;</Highlight></CodeLine>
<Link id="l01018" /><CodeLine lineNumber="1018" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall/#a757b99f85b9693a6e71a6533947242b3"><Highlight kind="normal">    uint64&#95;t <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall/#a757b99f85b9693a6e71a6533947242b3">Size</a>;</Highlight></CodeLine>
<Link id="l01019" /><CodeLine lineNumber="1019" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall/#a7305b6a922afe5e3adc4bac32edd92e8"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall/#a7305b6a922afe5e3adc4bac32edd92e8">DoPoison</a>;</Highlight></CodeLine>
<Link id="l01020" /><CodeLine lineNumber="1020"><Highlight kind="normal">  &#125;;</Highlight></CodeLine>
<Link id="l01021" /><CodeLine lineNumber="1021" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#adc8c21ea67c0f1d6c30c46a92c39b7ce"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;AllocaPoisonCall, 8&gt;</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#adc8c21ea67c0f1d6c30c46a92c39b7ce">DynamicAllocaPoisonCallVec</a>;</Highlight></CodeLine>
<Link id="l01022" /><CodeLine lineNumber="1022" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2488dfb5dc557ef2572c0968fbe9c48b"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;AllocaPoisonCall, 8&gt;</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2488dfb5dc557ef2572c0968fbe9c48b">StaticAllocaPoisonCallVec</a>;</Highlight></CodeLine>
<Link id="l01023" /><CodeLine lineNumber="1023" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a06f2eb7cc598cb7f4b9c71f7297899ad"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a06f2eb7cc598cb7f4b9c71f7297899ad">HasUntracedLifetimeIntrinsic</a> = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01024" /><CodeLine lineNumber="1024"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01025" /><CodeLine lineNumber="1025" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac9c6e2f693408658584fa84e7b4f9833"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;AllocaInst &#42;, 1&gt;</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac9c6e2f693408658584fa84e7b4f9833">DynamicAllocaVec</a>;</Highlight></CodeLine>
<Link id="l01026" /><CodeLine lineNumber="1026" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a58ac19be3b0c63885b1ce9e4082b6f29"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;IntrinsicInst &#42;, 1&gt;</a> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a58ac19be3b0c63885b1ce9e4082b6f29">StackRestoreVec</a>;</Highlight></CodeLine>
<Link id="l01027" /><CodeLine lineNumber="1027" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a8318591e05d8e62436dee43551e5a115"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a8318591e05d8e62436dee43551e5a115">DynamicAllocaLayout</a> = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01028" /><CodeLine lineNumber="1028" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5d3920fe2be39cc356f1eb8117bb2a3a"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5d3920fe2be39cc356f1eb8117bb2a3a">LocalEscapeCall</a> = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01029" /><CodeLine lineNumber="1029"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01030" /><CodeLine lineNumber="1030" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a568149a261a1175e1ca710fd701bd4f8"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a568149a261a1175e1ca710fd701bd4f8">HasInlineAsm</a> = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01031" /><CodeLine lineNumber="1031" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a37e62c009b4b8ee7e5854c795bde1ae1"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a37e62c009b4b8ee7e5854c795bde1ae1">HasReturnsTwiceCall</a> = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01032" /><CodeLine lineNumber="1032" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5c399c0c45426b1c1f0970e28ca70b98"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5c399c0c45426b1c1f0970e28ca70b98">PoisonStack</a>;</Highlight></CodeLine>
<Link id="l01033" /><CodeLine lineNumber="1033"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01034" /><CodeLine lineNumber="1034" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a22469895240423b61ee2b39822d5c0af"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a22469895240423b61ee2b39822d5c0af">FunctionStackPoisoner</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer">AddressSanitizer</a> &amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>,</Highlight></CodeLine>
<Link id="l01035" /><CodeLine lineNumber="1035"><Highlight kind="normal">                        <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>)</Highlight></CodeLine>
<Link id="l01036" /><CodeLine lineNumber="1036"><Highlight kind="normal">      : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>),</Highlight></CodeLine>
<Link id="l01037" /><CodeLine lineNumber="1037"><Highlight kind="normal">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a1846db5a2df4a8c900560be95363210d">DIB</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.<a href="/docs/api/files/lib/lib/analysis/basicaliasanalysis-cpp/#a1b8850f1ed44c12bc3501175a71c251c">getParent</a>(), </Highlight><Highlight kind="comment">/&#42;AllowUnresolved&#42;/</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/false">false</a>), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a07bc11db490f2edf7839493076c56cb0">C</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a07bc11db490f2edf7839493076c56cb0">C</a>),</Highlight></CodeLine>
<Link id="l01038" /><CodeLine lineNumber="1038"><Highlight kind="normal">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>),</Highlight></CodeLine>
<Link id="l01039" /><CodeLine lineNumber="1039"><Highlight kind="normal">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf5c2780ad835c54c27248ed826c61e3">IntptrPtrTy</a>(<a href="/docs/api/classes/llvm/pointertype">PointerType</a>::<a href="/docs/api/namespaces/llvm/#a73257f51950d9ea50955e3fb9c724a25">get</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>-&gt;getContext(), 0)),</Highlight></CodeLine>
<Link id="l01040" /><CodeLine lineNumber="1040"><Highlight kind="normal">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a994ce80af04048616ca5954e257d6723">Mapping</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a994ce80af04048616ca5954e257d6723">Mapping</a>),</Highlight></CodeLine>
<Link id="l01041" /><CodeLine lineNumber="1041"><Highlight kind="normal">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5c399c0c45426b1c1f0970e28ca70b98">PoisonStack</a>(<a href="#a9123bbb6c01ba4b0e0ef3547a5132cd1">ClStack</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l01042" /><CodeLine lineNumber="1042"><Highlight kind="normal">                    !<a href="/docs/api/classes/llvm/triple">Triple</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.<a href="/docs/api/files/lib/lib/analysis/basicaliasanalysis-cpp/#a1b8850f1ed44c12bc3501175a71c251c">getParent</a>()-&gt;getTargetTriple()).isAMDGPU()) &#123;&#125;</Highlight></CodeLine>
<Link id="l01043" /><CodeLine lineNumber="1043"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01044" /><CodeLine lineNumber="1044" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6d9d3b77ad59887d486351a427b585b0"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6d9d3b77ad59887d486351a427b585b0">runOnFunction</a>() &#123;</Highlight></CodeLine>
<Link id="l01045" /><CodeLine lineNumber="1045"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5c399c0c45426b1c1f0970e28ca70b98">PoisonStack</a>)</Highlight></CodeLine>
<Link id="l01046" /><CodeLine lineNumber="1046"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01047" /><CodeLine lineNumber="1047"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01048" /><CodeLine lineNumber="1048"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a3ad807be99d9d4ce4b6a2038719b015c">ClRedzoneByvalArgs</a>)</Highlight></CodeLine>
<Link id="l01049" /><CodeLine lineNumber="1049"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf9b16e74216c278e3362f8e84c16ab0">copyArgsPassedByValToAllocas</a>();</Highlight></CodeLine>
<Link id="l01050" /><CodeLine lineNumber="1050"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01051" /><CodeLine lineNumber="1051"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Collect alloca, ret, lifetime instructions etc.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01052" /><CodeLine lineNumber="1052"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;BB : <a href="/docs/api/namespaces/llvm/#ad6e19a09aeed4c56617c284e099c81de">depth&#95;first</a>(&amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getEntryBlock())) <a href="/docs/api/files/lib/lib/target/lib/target/spirv/spirvpostlegalizer-cpp/#a090736355958192cac4db32336c48bbd">visit</a>(&#42;BB);</Highlight></CodeLine>
<Link id="l01053" /><CodeLine lineNumber="1053"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01054" /><CodeLine lineNumber="1054"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>.empty() &amp;&amp; <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac9c6e2f693408658584fa84e7b4f9833">DynamicAllocaVec</a>.empty()) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01055" /><CodeLine lineNumber="1055"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01056" /><CodeLine lineNumber="1056"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a3e899fce2d5eb5d59204369bb5328878">initializeCallbacks</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getParent());</Highlight></CodeLine>
<Link id="l01057" /><CodeLine lineNumber="1057"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01058" /><CodeLine lineNumber="1058"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a06f2eb7cc598cb7f4b9c71f7297899ad">HasUntracedLifetimeIntrinsic</a>) &#123;</Highlight></CodeLine>
<Link id="l01059" /><CodeLine lineNumber="1059"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If there are lifetime intrinsics which couldn&#39;t be traced back to an</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01060" /><CodeLine lineNumber="1060"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// alloca, we may not know exactly when a variable enters scope, and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01061" /><CodeLine lineNumber="1061"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// therefore should &quot;fail safe&quot; by not poisoning them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01062" /><CodeLine lineNumber="1062"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2488dfb5dc557ef2572c0968fbe9c48b">StaticAllocaPoisonCallVec</a>.clear();</Highlight></CodeLine>
<Link id="l01063" /><CodeLine lineNumber="1063"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#adc8c21ea67c0f1d6c30c46a92c39b7ce">DynamicAllocaPoisonCallVec</a>.clear();</Highlight></CodeLine>
<Link id="l01064" /><CodeLine lineNumber="1064"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01065" /><CodeLine lineNumber="1065"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01066" /><CodeLine lineNumber="1066"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac2abcf486d1ecbb52d28309b221d6e93">processDynamicAllocas</a>();</Highlight></CodeLine>
<Link id="l01067" /><CodeLine lineNumber="1067"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a914ea1510476a800508ae70d159bd8c0">processStaticAllocas</a>();</Highlight></CodeLine>
<Link id="l01068" /><CodeLine lineNumber="1068"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01069" /><CodeLine lineNumber="1069"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a635e0541e4c0f8a4c5faba9e9c94aebc">ClDebugStack</a>) &#123;</Highlight></CodeLine>
<Link id="l01070" /><CodeLine lineNumber="1070"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>);</Highlight></CodeLine>
<Link id="l01071" /><CodeLine lineNumber="1071"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01072" /><CodeLine lineNumber="1072"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01073" /><CodeLine lineNumber="1073"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01074" /><CodeLine lineNumber="1074"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01075" /><CodeLine lineNumber="1075"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Arguments marked with the &quot;byval&quot; attribute are implicitly copied without</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01076" /><CodeLine lineNumber="1076"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// using an alloca instruction.  To produce redzones for those arguments, we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01077" /><CodeLine lineNumber="1077"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// copy them a second time into memory allocated with an alloca instruction.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01078" /><CodeLine lineNumber="1078"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> copyArgsPassedByValToAllocas();</Highlight></CodeLine>
<Link id="l01079" /><CodeLine lineNumber="1079"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01080" /><CodeLine lineNumber="1080"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Finds all Alloca instructions and puts</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01081" /><CodeLine lineNumber="1081"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// poisoned red zones around all of them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01082" /><CodeLine lineNumber="1082"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Then unpoison everything back before the function returns.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01083" /><CodeLine lineNumber="1083"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> processStaticAllocas();</Highlight></CodeLine>
<Link id="l01084" /><CodeLine lineNumber="1084"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> processDynamicAllocas();</Highlight></CodeLine>
<Link id="l01085" /><CodeLine lineNumber="1085"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01086" /><CodeLine lineNumber="1086"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> createDynamicAllocasInitStorage();</Highlight></CodeLine>
<Link id="l01087" /><CodeLine lineNumber="1087"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01088" /><CodeLine lineNumber="1088"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ----------------------- Visitors.</Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01089" /><CodeLine lineNumber="1089"><Highlight kind="comment">  /// Collect all Ret instructions, or the musttail call instruction if it</Highlight></CodeLine>
<Link id="l01090" /><CodeLine lineNumber="1090"><Highlight kind="comment">  /// precedes the return instruction.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01091" /><CodeLine lineNumber="1091" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a10bdecf66bc72577ab6c3cc964a076b7"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a10bdecf66bc72577ab6c3cc964a076b7">visitReturnInst</a>(<a href="/docs/api/classes/llvm/returninst">ReturnInst</a> &amp;RI) &#123;</Highlight></CodeLine>
<Link id="l01092" /><CodeLine lineNumber="1092"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;CI = RI.<a href="/docs/api/classes/llvm/ilist-detail/node-parent-access/#a7e19e7508415378ad9523e0339b23e22">getParent</a>()-&gt;getTerminatingMustTailCall())</Highlight></CodeLine>
<Link id="l01093" /><CodeLine lineNumber="1093"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a73c4bbaeb91bf3a238b7b0ce80358601">RetVec</a>.push&#95;back(CI);</Highlight></CodeLine>
<Link id="l01094" /><CodeLine lineNumber="1094"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01095" /><CodeLine lineNumber="1095"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a73c4bbaeb91bf3a238b7b0ce80358601">RetVec</a>.push&#95;back(&amp;RI);</Highlight></CodeLine>
<Link id="l01096" /><CodeLine lineNumber="1096"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01097" /><CodeLine lineNumber="1097"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01098" /><CodeLine lineNumber="1098"><Highlight kind="comment">  /// Collect all Resume instructions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01099" /><CodeLine lineNumber="1099" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa896496e66721145430011f6ff3021cd"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa896496e66721145430011f6ff3021cd">visitResumeInst</a>(<a href="/docs/api/classes/llvm/resumeinst">ResumeInst</a> &amp;RI) &#123; <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a73c4bbaeb91bf3a238b7b0ce80358601">RetVec</a>.push&#95;back(&amp;RI); &#125;</Highlight></CodeLine>
<Link id="l01100" /><CodeLine lineNumber="1100"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01101" /><CodeLine lineNumber="1101"><Highlight kind="comment">  /// Collect all CatchReturnInst instructions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01102" /><CodeLine lineNumber="1102" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2d46cb46ca03244c80471051959180eb"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2d46cb46ca03244c80471051959180eb">visitCleanupReturnInst</a>(<a href="/docs/api/classes/llvm/cleanupreturninst">CleanupReturnInst</a> &amp;CRI) &#123; <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a73c4bbaeb91bf3a238b7b0ce80358601">RetVec</a>.push&#95;back(&amp;CRI); &#125;</Highlight></CodeLine>
<Link id="l01103" /><CodeLine lineNumber="1103"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01104" /><CodeLine lineNumber="1104" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab62218bb90bcf921250b9e15b771519d"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab62218bb90bcf921250b9e15b771519d">unpoisonDynamicAllocasBeforeInst</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InstBefore,</Highlight></CodeLine>
<Link id="l01105" /><CodeLine lineNumber="1105"><Highlight kind="normal">                                        <a href="/docs/api/classes/llvm/value">Value</a> &#42;SavedStack) &#123;</Highlight></CodeLine>
<Link id="l01106" /><CodeLine lineNumber="1106"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(InstBefore);</Highlight></CodeLine>
<Link id="l01107" /><CodeLine lineNumber="1107"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;DynamicAreaPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(SavedStack, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</Highlight></CodeLine>
<Link id="l01108" /><CodeLine lineNumber="1108"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// When we insert &#95;asan&#95;allocas&#95;unpoison before @llvm.stackrestore, we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01109" /><CodeLine lineNumber="1109"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// need to adjust extracted SP to compute the address of the most recent</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01110" /><CodeLine lineNumber="1110"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// alloca. We have a special @llvm.get.dynamic.area.offset intrinsic for</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01111" /><CodeLine lineNumber="1111"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// this purpose.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01112" /><CodeLine lineNumber="1112"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ReturnInst&gt;</a>(InstBefore)) &#123;</Highlight></CodeLine>
<Link id="l01113" /><CodeLine lineNumber="1113"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;DynamicAreaOffset = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a80eec4efbded89b11092babf42a65b82">CreateIntrinsic</a>(</Highlight></CodeLine>
<Link id="l01114" /><CodeLine lineNumber="1114"><Highlight kind="normal">          Intrinsic::get&#95;dynamic&#95;area&#95;offset, &#123;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>&#125;, &#123;&#125;);</Highlight></CodeLine>
<Link id="l01115" /><CodeLine lineNumber="1115"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01116" /><CodeLine lineNumber="1116"><Highlight kind="normal">      DynamicAreaPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(SavedStack, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>),</Highlight></CodeLine>
<Link id="l01117" /><CodeLine lineNumber="1117"><Highlight kind="normal">                                     DynamicAreaOffset);</Highlight></CodeLine>
<Link id="l01118" /><CodeLine lineNumber="1118"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01119" /><CodeLine lineNumber="1119"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01120" /><CodeLine lineNumber="1120"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>.createRuntimeCall(</Highlight></CodeLine>
<Link id="l01121" /><CodeLine lineNumber="1121"><Highlight kind="normal">        IRB, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a7eec6ba17e8f3a985fc2103aadeb95f2">AsanAllocasUnpoisonFunc</a>,</Highlight></CodeLine>
<Link id="l01122" /><CodeLine lineNumber="1122"><Highlight kind="normal">        &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a8318591e05d8e62436dee43551e5a115">DynamicAllocaLayout</a>), DynamicAreaPtr&#125;);</Highlight></CodeLine>
<Link id="l01123" /><CodeLine lineNumber="1123"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01124" /><CodeLine lineNumber="1124"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01125" /><CodeLine lineNumber="1125"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Unpoison dynamic allocas redzones.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01126" /><CodeLine lineNumber="1126" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a46b8e1495b7d2175e14c470a1e8d6892"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a46b8e1495b7d2175e14c470a1e8d6892">unpoisonDynamicAllocas</a>() &#123;</Highlight></CodeLine>
<Link id="l01127" /><CodeLine lineNumber="1127"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Ret : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a73c4bbaeb91bf3a238b7b0ce80358601">RetVec</a>)</Highlight></CodeLine>
<Link id="l01128" /><CodeLine lineNumber="1128"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab62218bb90bcf921250b9e15b771519d">unpoisonDynamicAllocasBeforeInst</a>(Ret, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a8318591e05d8e62436dee43551e5a115">DynamicAllocaLayout</a>);</Highlight></CodeLine>
<Link id="l01129" /><CodeLine lineNumber="1129"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01130" /><CodeLine lineNumber="1130"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;StackRestoreInst : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a58ac19be3b0c63885b1ce9e4082b6f29">StackRestoreVec</a>)</Highlight></CodeLine>
<Link id="l01131" /><CodeLine lineNumber="1131"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab62218bb90bcf921250b9e15b771519d">unpoisonDynamicAllocasBeforeInst</a>(StackRestoreInst,</Highlight></CodeLine>
<Link id="l01132" /><CodeLine lineNumber="1132"><Highlight kind="normal">                                       StackRestoreInst-&gt;getOperand(0));</Highlight></CodeLine>
<Link id="l01133" /><CodeLine lineNumber="1133"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01134" /><CodeLine lineNumber="1134"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01135" /><CodeLine lineNumber="1135"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Deploy and poison redzones around dynamic alloca call. To do this, we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01136" /><CodeLine lineNumber="1136"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// should replace this call with another one with changed parameters and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01137" /><CodeLine lineNumber="1137"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// replace all its uses with new address, so</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01138" /><CodeLine lineNumber="1138"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   addr = alloca type, old&#95;size, align</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01139" /><CodeLine lineNumber="1139"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// is replaced by</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01140" /><CodeLine lineNumber="1140"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   new&#95;size = (old&#95;size + additional&#95;size) &#42; sizeof(type)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01141" /><CodeLine lineNumber="1141"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   tmp = alloca i8, new&#95;size, max(align, 32)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01142" /><CodeLine lineNumber="1142"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   addr = tmp + 32 (first 32 bytes are for the left redzone).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01143" /><CodeLine lineNumber="1143"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Additional&#95;size is added to make new memory allocation contain not only</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01144" /><CodeLine lineNumber="1144"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// requested memory, but also left, partial and right redzones.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01145" /><CodeLine lineNumber="1145"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> handleDynamicAllocaCall(<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;AI);</Highlight></CodeLine>
<Link id="l01146" /><CodeLine lineNumber="1146"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01147" /><CodeLine lineNumber="1147"><Highlight kind="comment">  /// Collect Alloca instructions we want (and can) handle.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01148" /><CodeLine lineNumber="1148" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2d3b181e57e15921dd726d62c5f68a5c"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2d3b181e57e15921dd726d62c5f68a5c">visitAllocaInst</a>(<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &amp;AI) &#123;</Highlight></CodeLine>
<Link id="l01149" /><CodeLine lineNumber="1149"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// FIXME: Handle scalable vectors instead of ignoring them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01150" /><CodeLine lineNumber="1150"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/type">Type</a> &#42;AllocaType = AI.<a href="/docs/api/classes/llvm/allocainst/#a9b5ec84ea363eca9e35ddca20a5313af">getAllocatedType</a>();</Highlight></CodeLine>
<Link id="l01151" /><CodeLine lineNumber="1151"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;STy = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;StructType&gt;</a>(AllocaType);</Highlight></CodeLine>
<Link id="l01152" /><CodeLine lineNumber="1152"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.isInterestingAlloca(AI) || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ScalableVectorType&gt;</a>(AllocaType) ||</Highlight></CodeLine>
<Link id="l01153" /><CodeLine lineNumber="1153"><Highlight kind="normal">        (STy &amp;&amp; STy-&gt;containsHomogeneousScalableVectorTypes())) &#123;</Highlight></CodeLine>
<Link id="l01154" /><CodeLine lineNumber="1154"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AI.<a href="/docs/api/classes/llvm/allocainst/#a36e31f42170be95fc392dad696d9ba19">isStaticAlloca</a>()) &#123;</Highlight></CodeLine>
<Link id="l01155" /><CodeLine lineNumber="1155"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Skip over allocas that are present &#42;before&#42; the first instrumented</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01156" /><CodeLine lineNumber="1156"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// alloca, we don&#39;t want to move those around.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01157" /><CodeLine lineNumber="1157"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>.empty())</Highlight></CodeLine>
<Link id="l01158" /><CodeLine lineNumber="1158"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01159" /><CodeLine lineNumber="1159"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01160" /><CodeLine lineNumber="1160"><Highlight kind="normal">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ae4f03fc1e1d45f5bab36586281790978">StaticAllocasToMoveUp</a>.push&#95;back(&amp;AI);</Highlight></CodeLine>
<Link id="l01161" /><CodeLine lineNumber="1161"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01162" /><CodeLine lineNumber="1162"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01163" /><CodeLine lineNumber="1163"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01164" /><CodeLine lineNumber="1164"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01165" /><CodeLine lineNumber="1165"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!AI.<a href="/docs/api/classes/llvm/allocainst/#a36e31f42170be95fc392dad696d9ba19">isStaticAlloca</a>())</Highlight></CodeLine>
<Link id="l01166" /><CodeLine lineNumber="1166"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac9c6e2f693408658584fa84e7b4f9833">DynamicAllocaVec</a>.push&#95;back(&amp;AI);</Highlight></CodeLine>
<Link id="l01167" /><CodeLine lineNumber="1167"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01168" /><CodeLine lineNumber="1168"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>.push&#95;back(&amp;AI);</Highlight></CodeLine>
<Link id="l01169" /><CodeLine lineNumber="1169"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01170" /><CodeLine lineNumber="1170"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01171" /><CodeLine lineNumber="1171"><Highlight kind="comment">  /// Collect lifetime intrinsic calls to check for use-after-scope</Highlight></CodeLine>
<Link id="l01172" /><CodeLine lineNumber="1172"><Highlight kind="comment">  /// errors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01173" /><CodeLine lineNumber="1173" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a307e0ed6d4058b4486ae85bbc1908015"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a307e0ed6d4058b4486ae85bbc1908015">visitIntrinsicInst</a>(<a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>) &#123;</Highlight></CodeLine>
<Link id="l01174" /><CodeLine lineNumber="1174"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/intrinsic/#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> <a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a> = <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.getIntrinsicID();</Highlight></CodeLine>
<Link id="l01175" /><CodeLine lineNumber="1175"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a> == Intrinsic::stackrestore) <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a58ac19be3b0c63885b1ce9e4082b6f29">StackRestoreVec</a>.push&#95;back(&amp;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>);</Highlight></CodeLine>
<Link id="l01176" /><CodeLine lineNumber="1176"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a> == Intrinsic::localescape) <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5d3920fe2be39cc356f1eb8117bb2a3a">LocalEscapeCall</a> = &amp;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>;</Highlight></CodeLine>
<Link id="l01177" /><CodeLine lineNumber="1177"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.UseAfterScope)</Highlight></CodeLine>
<Link id="l01178" /><CodeLine lineNumber="1178"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01179" /><CodeLine lineNumber="1179"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.isLifetimeStartOrEnd())</Highlight></CodeLine>
<Link id="l01180" /><CodeLine lineNumber="1180"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01181" /><CodeLine lineNumber="1181"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Found lifetime intrinsic, add ASan instrumentation if necessary.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01182" /><CodeLine lineNumber="1182"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantInt&gt;</a>(<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.getArgOperand(0));</Highlight></CodeLine>
<Link id="l01183" /><CodeLine lineNumber="1183"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If size argument is undefined, don&#39;t do anything.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01184" /><CodeLine lineNumber="1184"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>-&gt;isMinusOne()) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01185" /><CodeLine lineNumber="1185"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Check that size doesn&#39;t saturate uint64&#95;t and can</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01186" /><CodeLine lineNumber="1186"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// be stored in IntptrTy.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01187" /><CodeLine lineNumber="1187"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t SizeValue = <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>-&gt;getValue().getLimitedValue();</Highlight></CodeLine>
<Link id="l01188" /><CodeLine lineNumber="1188"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SizeValue == ~0ULL ||</Highlight></CodeLine>
<Link id="l01189" /><CodeLine lineNumber="1189"><Highlight kind="normal">        !<a href="/docs/api/classes/llvm/constantint/#a5b75b94b0d81c2ae458192b4a6544e18">ConstantInt::isValueValidForType</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, SizeValue))</Highlight></CodeLine>
<Link id="l01190" /><CodeLine lineNumber="1190"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01191" /><CodeLine lineNumber="1191"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Find alloca instruction that corresponds to llvm.lifetime argument.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01192" /><CodeLine lineNumber="1192"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Currently we can only handle lifetime markers pointing to the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01193" /><CodeLine lineNumber="1193"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// beginning of the alloca.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01194" /><CodeLine lineNumber="1194"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;AI = <a href="/docs/api/namespaces/llvm/#a21fe87bf00db76089c043fed6a23fb76">findAllocaForValue</a>(<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>.getArgOperand(1), </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01195" /><CodeLine lineNumber="1195"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!AI) &#123;</Highlight></CodeLine>
<Link id="l01196" /><CodeLine lineNumber="1196"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a06f2eb7cc598cb7f4b9c71f7297899ad">HasUntracedLifetimeIntrinsic</a> = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01197" /><CodeLine lineNumber="1197"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01198" /><CodeLine lineNumber="1198"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01199" /><CodeLine lineNumber="1199"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We&#39;re interested only in allocas we can handle.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01200" /><CodeLine lineNumber="1200"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.isInterestingAlloca(&#42;AI))</Highlight></CodeLine>
<Link id="l01201" /><CodeLine lineNumber="1201"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01202" /><CodeLine lineNumber="1202"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> DoPoison = (<a href="/docs/api/namespaces/llvm/callingconv/#abdf8cf606905c10634e831390981b0ed">ID</a> == Intrinsic::lifetime&#95;end);</Highlight></CodeLine>
<Link id="l01203" /><CodeLine lineNumber="1203"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/allocapoisoncall">AllocaPoisonCall</a> APC = &#123;&amp;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>, AI, SizeValue, DoPoison&#125;;</Highlight></CodeLine>
<Link id="l01204" /><CodeLine lineNumber="1204"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AI-&gt;<a href="/docs/api/classes/llvm/allocainst/#a36e31f42170be95fc392dad696d9ba19">isStaticAlloca</a>())</Highlight></CodeLine>
<Link id="l01205" /><CodeLine lineNumber="1205"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2488dfb5dc557ef2572c0968fbe9c48b">StaticAllocaPoisonCallVec</a>.push&#95;back(APC);</Highlight></CodeLine>
<Link id="l01206" /><CodeLine lineNumber="1206"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#aacabf2f74c684a07a8d7b499d252f8c9">ClInstrumentDynamicAllocas</a>)</Highlight></CodeLine>
<Link id="l01207" /><CodeLine lineNumber="1207"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#adc8c21ea67c0f1d6c30c46a92c39b7ce">DynamicAllocaPoisonCallVec</a>.push&#95;back(APC);</Highlight></CodeLine>
<Link id="l01208" /><CodeLine lineNumber="1208"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01209" /><CodeLine lineNumber="1209"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01210" /><CodeLine lineNumber="1210" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a549c93c786b6052ba5e485c8eed99a33"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a549c93c786b6052ba5e485c8eed99a33">visitCallBase</a>(<a href="/docs/api/classes/llvm/callbase">CallBase</a> &amp;CB) &#123;</Highlight></CodeLine>
<Link id="l01211" /><CodeLine lineNumber="1211"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;CI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;CallInst&gt;</a>(&amp;CB)) &#123;</Highlight></CodeLine>
<Link id="l01212" /><CodeLine lineNumber="1212"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a568149a261a1175e1ca710fd701bd4f8">HasInlineAsm</a> |= CI-&gt;isInlineAsm() &amp;&amp; &amp;CB != <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.LocalDynamicShadow;</Highlight></CodeLine>
<Link id="l01213" /><CodeLine lineNumber="1213"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a37e62c009b4b8ee7e5854c795bde1ae1">HasReturnsTwiceCall</a> |= CI-&gt;canReturnTwice();</Highlight></CodeLine>
<Link id="l01214" /><CodeLine lineNumber="1214"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01215" /><CodeLine lineNumber="1215"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01216" /><CodeLine lineNumber="1216"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01217" /><CodeLine lineNumber="1217"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ---------------------- Helpers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01218" /><CodeLine lineNumber="1218"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> initializeCallbacks(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M);</Highlight></CodeLine>
<Link id="l01219" /><CodeLine lineNumber="1219"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01220" /><CodeLine lineNumber="1220"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Copies bytes from ShadowBytes into shadow memory for indexes where</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01221" /><CodeLine lineNumber="1221"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ShadowMask is not zero. If ShadowMask&#91;i&#93; is zero, we assume that</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01222" /><CodeLine lineNumber="1222"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ShadowBytes&#91;i&#93; is constantly zero and doesn&#39;t need to be overwritten.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01223" /><CodeLine lineNumber="1223"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> copyToShadow(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowMask, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowBytes,</Highlight></CodeLine>
<Link id="l01224" /><CodeLine lineNumber="1224"><Highlight kind="normal">                    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase);</Highlight></CodeLine>
<Link id="l01225" /><CodeLine lineNumber="1225"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> copyToShadow(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowMask, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowBytes,</Highlight></CodeLine>
<Link id="l01226" /><CodeLine lineNumber="1226"><Highlight kind="normal">                    </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> Begin, </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> End, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</Highlight></CodeLine>
<Link id="l01227" /><CodeLine lineNumber="1227"><Highlight kind="normal">                    <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase);</Highlight></CodeLine>
<Link id="l01228" /><CodeLine lineNumber="1228"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> copyToShadowInline(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowMask,</Highlight></CodeLine>
<Link id="l01229" /><CodeLine lineNumber="1229"><Highlight kind="normal">                          <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowBytes, </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> Begin,</Highlight></CodeLine>
<Link id="l01230" /><CodeLine lineNumber="1230"><Highlight kind="normal">                          </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> End, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase);</Highlight></CodeLine>
<Link id="l01231" /><CodeLine lineNumber="1231"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01232" /><CodeLine lineNumber="1232"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> poisonAlloca(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V, uint64&#95;t <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> DoPoison);</Highlight></CodeLine>
<Link id="l01233" /><CodeLine lineNumber="1233"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01234" /><CodeLine lineNumber="1234"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;createAllocaForLayout(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/asanstackframelayout">ASanStackFrameLayout</a> &amp;L,</Highlight></CodeLine>
<Link id="l01235" /><CodeLine lineNumber="1235"><Highlight kind="normal">                               </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab7af0c09900daed62bbdb01dba180f7ca971fd8cc345d8bd9f92e9f7d88fdf20c">Dynamic</a>);</Highlight></CodeLine>
<Link id="l01236" /><CodeLine lineNumber="1236"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/phinode">PHINode</a> &#42;createPHI(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, <a href="/docs/api/classes/llvm/value">Value</a> &#42;ValueIfTrue,</Highlight></CodeLine>
<Link id="l01237" /><CodeLine lineNumber="1237"><Highlight kind="normal">                     <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;ThenTerm, <a href="/docs/api/classes/llvm/value">Value</a> &#42;ValueIfFalse);</Highlight></CodeLine>
<Link id="l01238" /><CodeLine lineNumber="1238"><Highlight kind="normal">&#125;;</Highlight></CodeLine>
<Link id="l01239" /><CodeLine lineNumber="1239"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01240" /><CodeLine lineNumber="1240"><Highlight kind="normal">&#125; </Highlight><Highlight kind="comment">// end anonymous namespace</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01241" /><CodeLine lineNumber="1241"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01242" /><CodeLine lineNumber="1242" lineLink="/docs/api/classes/llvm/addresssanitizerpass/#aceddb13fdde6e52b98aa58d12ddd3642"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/addresssanitizerpass/#aceddb13fdde6e52b98aa58d12ddd3642">AddressSanitizerPass::printPipeline</a>(</Highlight></CodeLine>
<Link id="l01243" /><CodeLine lineNumber="1243"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/raw-ostream">raw&#95;ostream</a> &amp;OS, <a href="/docs/api/classes/llvm/function-ref">function&#95;ref</a>&lt;<a href="/docs/api/classes/llvm/stringref">StringRef</a>(<a href="/docs/api/classes/llvm/stringref">StringRef</a>)&gt; MapClassName2PassName) &#123;</Highlight></CodeLine>
<Link id="l01244" /><CodeLine lineNumber="1244"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">static&#95;cast&lt;</Highlight><Highlight kind="normal"><a href="/docs/api/structs/llvm/passinfomixin">PassInfoMixin&lt;AddressSanitizerPass&gt;</a> &#42;</Highlight><Highlight kind="keyword">&gt;</Highlight><Highlight kind="normal">(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">)-&gt;<a href="/docs/api/classes/llvm/addresssanitizerpass/#aceddb13fdde6e52b98aa58d12ddd3642">printPipeline</a>(</Highlight></CodeLine>
<Link id="l01245" /><CodeLine lineNumber="1245"><Highlight kind="normal">      OS, MapClassName2PassName);</Highlight></CodeLine>
<Link id="l01246" /><CodeLine lineNumber="1246"><Highlight kind="normal">  OS &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;&lt;&#39;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01247" /><CodeLine lineNumber="1247"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Options.CompileKernel)</Highlight></CodeLine>
<Link id="l01248" /><CodeLine lineNumber="1248"><Highlight kind="normal">    OS &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;kernel&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01249" /><CodeLine lineNumber="1249"><Highlight kind="normal">  OS &lt;&lt; </Highlight><Highlight kind="charliteral">&#39;&gt;&#39;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01250" /><CodeLine lineNumber="1250"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01251" /><CodeLine lineNumber="1251"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01252" /><CodeLine lineNumber="1252" lineLink="/docs/api/classes/llvm/addresssanitizerpass/#a583050ca1dcbfcc2b6f24fecd345387e"><Highlight kind="normal"><a href="/docs/api/classes/llvm/addresssanitizerpass/#a583050ca1dcbfcc2b6f24fecd345387e">AddressSanitizerPass::AddressSanitizerPass</a>(</Highlight></CodeLine>
<Link id="l01253" /><CodeLine lineNumber="1253"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/addresssanitizeroptions">AddressSanitizerOptions</a> &amp;Options, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseGlobalGC,</Highlight></CodeLine>
<Link id="l01254" /><CodeLine lineNumber="1254"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseOdrIndicator, <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bf">AsanDtorKind</a> DestructorKind,</Highlight></CodeLine>
<Link id="l01255" /><CodeLine lineNumber="1255"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08">AsanCtorKind</a> ConstructorKind)</Highlight></CodeLine>
<Link id="l01256" /><CodeLine lineNumber="1256"><Highlight kind="normal">    : Options(Options), UseGlobalGC(UseGlobalGC),</Highlight></CodeLine>
<Link id="l01257" /><CodeLine lineNumber="1257"><Highlight kind="normal">      UseOdrIndicator(UseOdrIndicator), DestructorKind(DestructorKind),</Highlight></CodeLine>
<Link id="l01258" /><CodeLine lineNumber="1258"><Highlight kind="normal">      ConstructorKind(ConstructorKind) &#123;&#125;</Highlight></CodeLine>
<Link id="l01259" /><CodeLine lineNumber="1259"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01260" /><CodeLine lineNumber="1260" lineLink="/docs/api/classes/llvm/addresssanitizerpass/#a987afb1c68c5891e0b9a67cdac48147d"><Highlight kind="normal"><a href="/docs/api/classes/llvm/preservedanalyses">PreservedAnalyses</a> <a href="/docs/api/classes/llvm/addresssanitizerpass/#a987afb1c68c5891e0b9a67cdac48147d">AddressSanitizerPass::run</a>(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M,</Highlight></CodeLine>
<Link id="l01261" /><CodeLine lineNumber="1261"><Highlight kind="normal">                                            <a href="/docs/api/namespaces/llvm/#af9c9208365fd9ce11392b4d79485e259">ModuleAnalysisManager</a> &amp;<a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a85bddafa659a93a7a67c9094648259be">MAM</a>) &#123;</Highlight></CodeLine>
<Link id="l01262" /><CodeLine lineNumber="1262"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Return early if nosanitize&#95;address module flag is present for the module.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01263" /><CodeLine lineNumber="1263"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This implies that asan pass has already run before.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01264" /><CodeLine lineNumber="1264"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#aeed520b6f17bd6271d563ee25f3e4728">checkIfAlreadyInstrumented</a>(M, </Highlight><Highlight kind="stringliteral">&quot;nosanitize&#95;address&quot;</Highlight><Highlight kind="normal">))</Highlight></CodeLine>
<Link id="l01265" /><CodeLine lineNumber="1265"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/preservedanalyses/#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</Highlight></CodeLine>
<Link id="l01266" /><CodeLine lineNumber="1266"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01267" /><CodeLine lineNumber="1267"><Highlight kind="normal">  ModuleAddressSanitizer ModuleSanitizer(</Highlight></CodeLine>
<Link id="l01268" /><CodeLine lineNumber="1268"><Highlight kind="normal">      M, Options.InsertVersionCheck, Options.CompileKernel, Options.Recover,</Highlight></CodeLine>
<Link id="l01269" /><CodeLine lineNumber="1269"><Highlight kind="normal">      UseGlobalGC, UseOdrIndicator, DestructorKind, ConstructorKind);</Highlight></CodeLine>
<Link id="l01270" /><CodeLine lineNumber="1270"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopdeletion-cpp/#a0f1c83c3d08d80b12c424962a5e94ce8a35e0c8c0b180c95d4e122e55ed62cc64">Modified</a> = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01271" /><CodeLine lineNumber="1271"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;<a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> = <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a85bddafa659a93a7a67c9094648259be">MAM</a>.getResult&lt;<a href="/docs/api/namespaces/llvm/#a4143e067711d3c7795276b225a8d6eb9">FunctionAnalysisManagerModuleProxy</a>&gt;(M).getManager();</Highlight></CodeLine>
<Link id="l01272" /><CodeLine lineNumber="1272"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/stacksafetyglobalinfo">StackSafetyGlobalInfo</a> &#42;</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> SSGI =</Highlight></CodeLine>
<Link id="l01273" /><CodeLine lineNumber="1273"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64stacktagging-cpp/#ac69fc2e5e9b097e6ebeb1c4e4a34fcf3">ClUseStackSafety</a> ? &amp;<a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a85bddafa659a93a7a67c9094648259be">MAM</a>.getResult&lt;<a href="/docs/api/classes/llvm/stacksafetyglobalanalysis">StackSafetyGlobalAnalysis</a>&gt;(M) : </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01274" /><CodeLine lineNumber="1274"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : M) &#123;</Highlight></CodeLine>
<Link id="l01275" /><CodeLine lineNumber="1275"><Highlight kind="normal">    AddressSanitizer FunctionSanitizer(</Highlight></CodeLine>
<Link id="l01276" /><CodeLine lineNumber="1276"><Highlight kind="normal">        M, SSGI, Options.InstrumentationWithCallsThreshold,</Highlight></CodeLine>
<Link id="l01277" /><CodeLine lineNumber="1277"><Highlight kind="normal">        Options.MaxInlinePoisoningSize, Options.CompileKernel, Options.Recover,</Highlight></CodeLine>
<Link id="l01278" /><CodeLine lineNumber="1278"><Highlight kind="normal">        Options.UseAfterScope, Options.UseAfterReturn);</Highlight></CodeLine>
<Link id="l01279" /><CodeLine lineNumber="1279"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &amp;TLI = <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.getResult&lt;<a href="/docs/api/classes/llvm/targetlibraryanalysis">TargetLibraryAnalysis</a>&gt;(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</Highlight></CodeLine>
<Link id="l01280" /><CodeLine lineNumber="1280"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopdeletion-cpp/#a0f1c83c3d08d80b12c424962a5e94ce8a35e0c8c0b180c95d4e122e55ed62cc64">Modified</a> |= FunctionSanitizer.instrumentFunction(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, &amp;TLI);</Highlight></CodeLine>
<Link id="l01281" /><CodeLine lineNumber="1281"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01282" /><CodeLine lineNumber="1282"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopdeletion-cpp/#a0f1c83c3d08d80b12c424962a5e94ce8a35e0c8c0b180c95d4e122e55ed62cc64">Modified</a> |= ModuleSanitizer.instrumentModule();</Highlight></CodeLine>
<Link id="l01283" /><CodeLine lineNumber="1283"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/transforms/lib/transforms/scalar/loopdeletion-cpp/#a0f1c83c3d08d80b12c424962a5e94ce8a35e0c8c0b180c95d4e122e55ed62cc64">Modified</a>)</Highlight></CodeLine>
<Link id="l01284" /><CodeLine lineNumber="1284"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/preservedanalyses/#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</Highlight></CodeLine>
<Link id="l01285" /><CodeLine lineNumber="1285"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01286" /><CodeLine lineNumber="1286"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/preservedanalyses">PreservedAnalyses</a> PA = <a href="/docs/api/classes/llvm/preservedanalyses/#a03797a73044a81cbc6a3409d6c72ee8f">PreservedAnalyses::none</a>();</Highlight></CodeLine>
<Link id="l01287" /><CodeLine lineNumber="1287"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// GlobalsAA is considered stateless and does not get invalidated unless</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01288" /><CodeLine lineNumber="1288"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// explicitly invalidated; PreservedAnalyses::none() is not enough. Sanitizers</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01289" /><CodeLine lineNumber="1289"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// make changes that require GlobalsAA to be invalidated.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01290" /><CodeLine lineNumber="1290"><Highlight kind="normal">  PA.<a href="/docs/api/classes/llvm/preservedanalyses/#ac8a842a601c470fa22db443ac34d0a67">abandon</a>&lt;<a href="/docs/api/classes/llvm/globalsaa">GlobalsAA</a>&gt;();</Highlight></CodeLine>
<Link id="l01291" /><CodeLine lineNumber="1291"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> PA;</Highlight></CodeLine>
<Link id="l01292" /><CodeLine lineNumber="1292"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01293" /><CodeLine lineNumber="1293"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01294" /><CodeLine lineNumber="1294" lineLink="#adcdff5e32d9b4d801f187d48b106e579"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> <a href="#adcdff5e32d9b4d801f187d48b106e579">TypeStoreSizeToSizeIndex</a>(uint32&#95;t <a href="/docs/api/classes/llvm/typesize">TypeSize</a>) &#123;</Highlight></CodeLine>
<Link id="l01295" /><CodeLine lineNumber="1295"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> Res = <a href="/docs/api/namespaces/llvm/#a57d2f9ee99e9e68cff564d0d579c8163">llvm::countr&#95;zero</a>(<a href="/docs/api/classes/llvm/typesize">TypeSize</a> / 8);</Highlight></CodeLine>
<Link id="l01296" /><CodeLine lineNumber="1296"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Res &lt; <a href="#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>);</Highlight></CodeLine>
<Link id="l01297" /><CodeLine lineNumber="1297"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Res;</Highlight></CodeLine>
<Link id="l01298" /><CodeLine lineNumber="1298"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01299" /><CodeLine lineNumber="1299"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01300" /><CodeLine lineNumber="1300"><Highlight kind="comment">/// Check if \\p G has been created by a trusted compiler pass.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01301" /><CodeLine lineNumber="1301" lineLink="#a74f90b5c14043cd0038dc90723eab4c2"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="#a74f90b5c14043cd0038dc90723eab4c2">GlobalWasGeneratedByCompiler</a>(<a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) &#123;</Highlight></CodeLine>
<Link id="l01302" /><CodeLine lineNumber="1302"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Do not instrument @llvm.global&#95;ctors, @llvm.used, etc.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01303" /><CodeLine lineNumber="1303"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().starts&#95;with(</Highlight><Highlight kind="stringliteral">&quot;llvm.&quot;</Highlight><Highlight kind="normal">) ||</Highlight></CodeLine>
<Link id="l01304" /><CodeLine lineNumber="1304"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Do not instrument gcov counter arrays.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01305" /><CodeLine lineNumber="1305"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().starts&#95;with(</Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;llvm&#95;gcov&#95;ctr&quot;</Highlight><Highlight kind="normal">) ||</Highlight></CodeLine>
<Link id="l01306" /><CodeLine lineNumber="1306"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Do not instrument rtti proxy symbols for function sanitizer.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01307" /><CodeLine lineNumber="1307"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().starts&#95;with(</Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;llvm&#95;rtti&#95;proxy&quot;</Highlight><Highlight kind="normal">))</Highlight></CodeLine>
<Link id="l01308" /><CodeLine lineNumber="1308"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01309" /><CodeLine lineNumber="1309"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01310" /><CodeLine lineNumber="1310"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Do not instrument asan globals.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01311" /><CodeLine lineNumber="1311"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().starts&#95;with(<a href="#a476e7801fbfecbea19d62de9a27e71ae">kAsanGenPrefix</a>) ||</Highlight></CodeLine>
<Link id="l01312" /><CodeLine lineNumber="1312"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().starts&#95;with(<a href="#a89f98c73fceabd5b3e0c1862003f7b6a">kSanCovGenPrefix</a>) ||</Highlight></CodeLine>
<Link id="l01313" /><CodeLine lineNumber="1313"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().starts&#95;with(<a href="#a6e54679eb7c171172210d5898f5e2ebc">kODRGenPrefix</a>))</Highlight></CodeLine>
<Link id="l01314" /><CodeLine lineNumber="1314"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01315" /><CodeLine lineNumber="1315"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01316" /><CodeLine lineNumber="1316"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01317" /><CodeLine lineNumber="1317"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01318" /><CodeLine lineNumber="1318"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01319" /><CodeLine lineNumber="1319" lineLink="#a66fb0770ddf5f596079ee32ca4b8b599"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="#a66fb0770ddf5f596079ee32ca4b8b599">isUnsupportedAMDGPUAddrspace</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr) &#123;</Highlight></CodeLine>
<Link id="l01320" /><CodeLine lineNumber="1320"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;PtrTy = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;PointerType&gt;</a>(Addr-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#a7c742b32ebcd73d6dc851afac295b0f2">getScalarType</a>());</Highlight></CodeLine>
<Link id="l01321" /><CodeLine lineNumber="1321"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> AddrSpace = PtrTy-&gt;<a href="/docs/api/classes/llvm/type/#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>();</Highlight></CodeLine>
<Link id="l01322" /><CodeLine lineNumber="1322"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AddrSpace == 3 || AddrSpace == 5)</Highlight></CodeLine>
<Link id="l01323" /><CodeLine lineNumber="1323"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01324" /><CodeLine lineNumber="1324"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01325" /><CodeLine lineNumber="1325"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01326" /><CodeLine lineNumber="1326"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01327" /><CodeLine lineNumber="1327" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a220cbee431faba18cde250a8c23a9409"><Highlight kind="normal"><a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a220cbee431faba18cde250a8c23a9409">AddressSanitizer::memToShadow</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;Shadow, <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB) &#123;</Highlight></CodeLine>
<Link id="l01328" /><CodeLine lineNumber="1328"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Shadow &gt;&gt; scale</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01329" /><CodeLine lineNumber="1329"><Highlight kind="normal">  Shadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5849d19e500f8c6713ec44889058f424">CreateLShr</a>(Shadow, Mapping.Scale);</Highlight></CodeLine>
<Link id="l01330" /><CodeLine lineNumber="1330"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Mapping.Offset == 0) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Shadow;</Highlight></CodeLine>
<Link id="l01331" /><CodeLine lineNumber="1331"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (Shadow &gt;&gt; scale) | offset</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01332" /><CodeLine lineNumber="1332"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase;</Highlight></CodeLine>
<Link id="l01333" /><CodeLine lineNumber="1333"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LocalDynamicShadow)</Highlight></CodeLine>
<Link id="l01334" /><CodeLine lineNumber="1334"><Highlight kind="normal">    ShadowBase = LocalDynamicShadow;</Highlight></CodeLine>
<Link id="l01335" /><CodeLine lineNumber="1335"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01336" /><CodeLine lineNumber="1336"><Highlight kind="normal">    ShadowBase = ConstantInt::get(IntptrTy, Mapping.Offset);</Highlight></CodeLine>
<Link id="l01337" /><CodeLine lineNumber="1337"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Mapping.OrShadowOffset)</Highlight></CodeLine>
<Link id="l01338" /><CodeLine lineNumber="1338"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(Shadow, ShadowBase);</Highlight></CodeLine>
<Link id="l01339" /><CodeLine lineNumber="1339"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01340" /><CodeLine lineNumber="1340"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(Shadow, ShadowBase);</Highlight></CodeLine>
<Link id="l01341" /><CodeLine lineNumber="1341"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01342" /><CodeLine lineNumber="1342"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01343" /><CodeLine lineNumber="1343"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Instrument memset/memmove/memcpy</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01344" /><CodeLine lineNumber="1344" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ab8e997542278bc23b2e3a5f3ddeffdea"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ab8e997542278bc23b2e3a5f3ddeffdea">AddressSanitizer::instrumentMemIntrinsic</a>(<a href="/docs/api/classes/llvm/memintrinsic">MemIntrinsic</a> &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</Highlight></CodeLine>
<Link id="l01345" /><CodeLine lineNumber="1345"><Highlight kind="normal">                                              <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI) &#123;</Highlight></CodeLine>
<Link id="l01346" /><CodeLine lineNumber="1346"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/instrumentationirbuilder">InstrumentationIRBuilder</a> IRB(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</Highlight></CodeLine>
<Link id="l01347" /><CodeLine lineNumber="1347"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;MemTransferInst&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) &#123;</Highlight></CodeLine>
<Link id="l01348" /><CodeLine lineNumber="1348"><Highlight kind="normal">    RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(</Highlight></CodeLine>
<Link id="l01349" /><CodeLine lineNumber="1349"><Highlight kind="normal">        IRB, <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;MemMoveInst&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) ? AsanMemmove : AsanMemcpy,</Highlight></CodeLine>
<Link id="l01350" /><CodeLine lineNumber="1350"><Highlight kind="normal">        &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aeb6ccc122c2f6868fc3a1e68e1ae157c">CreateAddrSpaceCast</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(0), PtrTy),</Highlight></CodeLine>
<Link id="l01351" /><CodeLine lineNumber="1351"><Highlight kind="normal">         IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aeb6ccc122c2f6868fc3a1e68e1ae157c">CreateAddrSpaceCast</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(1), PtrTy),</Highlight></CodeLine>
<Link id="l01352" /><CodeLine lineNumber="1352"><Highlight kind="normal">         IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(2), IntptrTy, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">)&#125;);</Highlight></CodeLine>
<Link id="l01353" /><CodeLine lineNumber="1353"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;MemSetInst&gt;</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) &#123;</Highlight></CodeLine>
<Link id="l01354" /><CodeLine lineNumber="1354"><Highlight kind="normal">    RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(</Highlight></CodeLine>
<Link id="l01355" /><CodeLine lineNumber="1355"><Highlight kind="normal">        IRB, AsanMemset,</Highlight></CodeLine>
<Link id="l01356" /><CodeLine lineNumber="1356"><Highlight kind="normal">        &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aeb6ccc122c2f6868fc3a1e68e1ae157c">CreateAddrSpaceCast</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(0), PtrTy),</Highlight></CodeLine>
<Link id="l01357" /><CodeLine lineNumber="1357"><Highlight kind="normal">         IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(1), IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l01358" /><CodeLine lineNumber="1358"><Highlight kind="normal">         IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(2), IntptrTy, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">)&#125;);</Highlight></CodeLine>
<Link id="l01359" /><CodeLine lineNumber="1359"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01360" /><CodeLine lineNumber="1360"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;eraseFromParent();</Highlight></CodeLine>
<Link id="l01361" /><CodeLine lineNumber="1361"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01362" /><CodeLine lineNumber="1362"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l01363" /><CodeLine lineNumber="1363"><Highlight kind="comment">/// Check if we want (and can) handle this alloca.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01364" /><CodeLine lineNumber="1364" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a3b2938393443d2c8a8e005292eed060f"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a3b2938393443d2c8a8e005292eed060f">AddressSanitizer::isInterestingAlloca</a>(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &amp;AI) &#123;</Highlight></CodeLine>
<Link id="l01365" /><CodeLine lineNumber="1365"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> PreviouslySeenAllocaInfo = ProcessedAllocas.find(&amp;AI);</Highlight></CodeLine>
<Link id="l01366" /><CodeLine lineNumber="1366"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01367" /><CodeLine lineNumber="1367"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PreviouslySeenAllocaInfo != ProcessedAllocas.end())</Highlight></CodeLine>
<Link id="l01368" /><CodeLine lineNumber="1368"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> PreviouslySeenAllocaInfo-&gt;getSecond();</Highlight></CodeLine>
<Link id="l01369" /><CodeLine lineNumber="1369"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01370" /><CodeLine lineNumber="1370"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsInteresting =</Highlight></CodeLine>
<Link id="l01371" /><CodeLine lineNumber="1371"><Highlight kind="normal">      (AI.<a href="/docs/api/classes/llvm/allocainst/#a9b5ec84ea363eca9e35ddca20a5313af">getAllocatedType</a>()-&gt;isSized() &amp;&amp;</Highlight></CodeLine>
<Link id="l01372" /><CodeLine lineNumber="1372"><Highlight kind="normal">       </Highlight><Highlight kind="comment">// alloca() may be called with 0 size, ignore it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01373" /><CodeLine lineNumber="1373"><Highlight kind="normal">       ((!AI.<a href="/docs/api/classes/llvm/allocainst/#a36e31f42170be95fc392dad696d9ba19">isStaticAlloca</a>()) || !<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a8a8741af2dcfc3312679330e1069c734">getAllocaSizeInBytes</a>(AI).<a href="/docs/api/files/lib/lib/analysis/lint-cpp/#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>()) &amp;&amp;</Highlight></CodeLine>
<Link id="l01374" /><CodeLine lineNumber="1374"><Highlight kind="normal">       </Highlight><Highlight kind="comment">// We are only interested in allocas not promotable to registers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01375" /><CodeLine lineNumber="1375"><Highlight kind="normal">       </Highlight><Highlight kind="comment">// Promotable allocas are common under -O0.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01376" /><CodeLine lineNumber="1376"><Highlight kind="normal">       (!<a href="#aeff4047a82cefd8108f2bc7263e924fa">ClSkipPromotableAllocas</a> || !<a href="/docs/api/namespaces/llvm/#a5023b360abc7a5d1612061fba30003a6">isAllocaPromotable</a>(&amp;AI)) &amp;&amp;</Highlight></CodeLine>
<Link id="l01377" /><CodeLine lineNumber="1377"><Highlight kind="normal">       </Highlight><Highlight kind="comment">// inalloca allocas are not treated as static, and we don&#39;t want</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01378" /><CodeLine lineNumber="1378"><Highlight kind="normal">       </Highlight><Highlight kind="comment">// dynamic alloca instrumentation for them as well.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01379" /><CodeLine lineNumber="1379"><Highlight kind="normal">       !AI.<a href="/docs/api/classes/llvm/allocainst/#a9bb98c4ac4cf77f5782e5e41f2c6f38a">isUsedWithInAlloca</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l01380" /><CodeLine lineNumber="1380"><Highlight kind="normal">       </Highlight><Highlight kind="comment">// swifterror allocas are register promoted by ISel</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01381" /><CodeLine lineNumber="1381"><Highlight kind="normal">       !AI.<a href="/docs/api/classes/llvm/allocainst/#a3016b467a9ecb5506956f7d029509db5">isSwiftError</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l01382" /><CodeLine lineNumber="1382"><Highlight kind="normal">       </Highlight><Highlight kind="comment">// safe allocas are not interesting</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01383" /><CodeLine lineNumber="1383"><Highlight kind="normal">       !(SSGI &amp;&amp; SSGI-&gt;isSafe(AI)));</Highlight></CodeLine>
<Link id="l01384" /><CodeLine lineNumber="1384"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01385" /><CodeLine lineNumber="1385"><Highlight kind="normal">  ProcessedAllocas&#91;&amp;AI&#93; = IsInteresting;</Highlight></CodeLine>
<Link id="l01386" /><CodeLine lineNumber="1386"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> IsInteresting;</Highlight></CodeLine>
<Link id="l01387" /><CodeLine lineNumber="1387"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01388" /><CodeLine lineNumber="1388"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01389" /><CodeLine lineNumber="1389" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65">AddressSanitizer::ignoreAccess</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Inst, <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>) &#123;</Highlight></CodeLine>
<Link id="l01390" /><CodeLine lineNumber="1390"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Instrument accesses from different address spaces only for AMDGPU.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01391" /><CodeLine lineNumber="1391"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;PtrTy = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;PointerType&gt;</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>-&gt;getType()-&gt;getScalarType());</Highlight></CodeLine>
<Link id="l01392" /><CodeLine lineNumber="1392"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PtrTy-&gt;getPointerAddressSpace() != 0 &amp;&amp;</Highlight></CodeLine>
<Link id="l01393" /><CodeLine lineNumber="1393"><Highlight kind="normal">      !(TargetTriple.isAMDGPU() &amp;&amp; !<a href="#a66fb0770ddf5f596079ee32ca4b8b599">isUnsupportedAMDGPUAddrspace</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>)))</Highlight></CodeLine>
<Link id="l01394" /><CodeLine lineNumber="1394"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01395" /><CodeLine lineNumber="1395"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01396" /><CodeLine lineNumber="1396"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Ignore swifterror addresses.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01397" /><CodeLine lineNumber="1397"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// swifterror memory addresses are mem2reg promoted by instruction</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01398" /><CodeLine lineNumber="1398"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// selection. As such they cannot have regular uses like an instrumentation</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01399" /><CodeLine lineNumber="1399"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// function and it makes no sense to track them as memory.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01400" /><CodeLine lineNumber="1400"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>-&gt;isSwiftError())</Highlight></CodeLine>
<Link id="l01401" /><CodeLine lineNumber="1401"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01402" /><CodeLine lineNumber="1402"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01403" /><CodeLine lineNumber="1403"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Treat memory accesses to promotable allocas as non-interesting since they</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01404" /><CodeLine lineNumber="1404"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// will not cause memory violations. This greatly speeds up the instrumented</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01405" /><CodeLine lineNumber="1405"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// executable at -O0.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01406" /><CodeLine lineNumber="1406"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> AI = <a href="/docs/api/namespaces/llvm/#a5f6182886dc2f96c204299e92c1565d5">dyn&#95;cast&#95;or&#95;null&lt;AllocaInst&gt;</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>))</Highlight></CodeLine>
<Link id="l01407" /><CodeLine lineNumber="1407"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#aeff4047a82cefd8108f2bc7263e924fa">ClSkipPromotableAllocas</a> &amp;&amp; !<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a3b2938393443d2c8a8e005292eed060f">isInterestingAlloca</a>(&#42;AI))</Highlight></CodeLine>
<Link id="l01408" /><CodeLine lineNumber="1408"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01409" /><CodeLine lineNumber="1409"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01410" /><CodeLine lineNumber="1410"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SSGI != </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal"> &amp;&amp; SSGI-&gt;stackAccessIsSafe(&#42;Inst) &amp;&amp;</Highlight></CodeLine>
<Link id="l01411" /><CodeLine lineNumber="1411"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a21fe87bf00db76089c043fed6a23fb76">findAllocaForValue</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>))</Highlight></CodeLine>
<Link id="l01412" /><CodeLine lineNumber="1412"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01413" /><CodeLine lineNumber="1413"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01414" /><CodeLine lineNumber="1414"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01415" /><CodeLine lineNumber="1415"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01416" /><CodeLine lineNumber="1416"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01417" /><CodeLine lineNumber="1417" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a768d59ed528e3f461065b20571b913dc"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a768d59ed528e3f461065b20571b913dc">AddressSanitizer::getInterestingMemoryOperands</a>(</Highlight></CodeLine>
<Link id="l01418" /><CodeLine lineNumber="1418"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;InterestingMemoryOperand&gt;</a> &amp;Interesting) &#123;</Highlight></CodeLine>
<Link id="l01419" /><CodeLine lineNumber="1419"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Do not instrument the load fetching the dynamic shadow address.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01420" /><CodeLine lineNumber="1420"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LocalDynamicShadow == <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</Highlight></CodeLine>
<Link id="l01421" /><CodeLine lineNumber="1421"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01422" /><CodeLine lineNumber="1422"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01423" /><CodeLine lineNumber="1423"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/loadinst">LoadInst</a> &#42;LI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;LoadInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</Highlight></CodeLine>
<Link id="l01424" /><CodeLine lineNumber="1424"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="#adc5cd4695253418937546218dbe26922">ClInstrumentReads</a> || <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65">ignoreAccess</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, LI-&gt;getPointerOperand()))</Highlight></CodeLine>
<Link id="l01425" /><CodeLine lineNumber="1425"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01426" /><CodeLine lineNumber="1426"><Highlight kind="normal">    Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, LI-&gt;getPointerOperandIndex(), </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l01427" /><CodeLine lineNumber="1427"><Highlight kind="normal">                             LI-&gt;getType(), LI-&gt;getAlign());</Highlight></CodeLine>
<Link id="l01428" /><CodeLine lineNumber="1428"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/storeinst">StoreInst</a> &#42;<a href="/docs/api/namespaces/llvm/si">SI</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;StoreInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</Highlight></CodeLine>
<Link id="l01429" /><CodeLine lineNumber="1429"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="#a2df764565c5764a2af608a819cfa2540">ClInstrumentWrites</a> || <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65">ignoreAccess</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/namespaces/llvm/si">SI</a>-&gt;getPointerOperand()))</Highlight></CodeLine>
<Link id="l01430" /><CodeLine lineNumber="1430"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01431" /><CodeLine lineNumber="1431"><Highlight kind="normal">    Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/namespaces/llvm/si">SI</a>-&gt;getPointerOperandIndex(), </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l01432" /><CodeLine lineNumber="1432"><Highlight kind="normal">                             <a href="/docs/api/namespaces/llvm/si">SI</a>-&gt;getValueOperand()-&gt;getType(), <a href="/docs/api/namespaces/llvm/si">SI</a>-&gt;getAlign());</Highlight></CodeLine>
<Link id="l01433" /><CodeLine lineNumber="1433"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/atomicrmwinst">AtomicRMWInst</a> &#42;RMW = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;AtomicRMWInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</Highlight></CodeLine>
<Link id="l01434" /><CodeLine lineNumber="1434"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="#a98491b92a3cd11f11c29f752625b136d">ClInstrumentAtomics</a> || <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65">ignoreAccess</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, RMW-&gt;getPointerOperand()))</Highlight></CodeLine>
<Link id="l01435" /><CodeLine lineNumber="1435"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01436" /><CodeLine lineNumber="1436"><Highlight kind="normal">    Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, RMW-&gt;getPointerOperandIndex(), </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l01437" /><CodeLine lineNumber="1437"><Highlight kind="normal">                             RMW-&gt;getValOperand()-&gt;getType(), std::nullopt);</Highlight></CodeLine>
<Link id="l01438" /><CodeLine lineNumber="1438"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/atomiccmpxchginst">AtomicCmpXchgInst</a> &#42;XCHG = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;AtomicCmpXchgInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</Highlight></CodeLine>
<Link id="l01439" /><CodeLine lineNumber="1439"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="#a98491b92a3cd11f11c29f752625b136d">ClInstrumentAtomics</a> || <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65">ignoreAccess</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, XCHG-&gt;getPointerOperand()))</Highlight></CodeLine>
<Link id="l01440" /><CodeLine lineNumber="1440"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01441" /><CodeLine lineNumber="1441"><Highlight kind="normal">    Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, XCHG-&gt;getPointerOperandIndex(), </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l01442" /><CodeLine lineNumber="1442"><Highlight kind="normal">                             XCHG-&gt;getCompareOperand()-&gt;getType(),</Highlight></CodeLine>
<Link id="l01443" /><CodeLine lineNumber="1443"><Highlight kind="normal">                             std::nullopt);</Highlight></CodeLine>
<Link id="l01444" /><CodeLine lineNumber="1444"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> CI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;CallInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</Highlight></CodeLine>
<Link id="l01445" /><CodeLine lineNumber="1445"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (CI-&gt;getIntrinsicID()) &#123;</Highlight></CodeLine>
<Link id="l01446" /><CodeLine lineNumber="1446"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> Intrinsic::masked&#95;load:</Highlight></CodeLine>
<Link id="l01447" /><CodeLine lineNumber="1447"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> Intrinsic::masked&#95;store:</Highlight></CodeLine>
<Link id="l01448" /><CodeLine lineNumber="1448"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> Intrinsic::masked&#95;gather:</Highlight></CodeLine>
<Link id="l01449" /><CodeLine lineNumber="1449"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> Intrinsic::masked&#95;scatter: &#123;</Highlight></CodeLine>
<Link id="l01450" /><CodeLine lineNumber="1450"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsWrite = CI-&gt;getType()-&gt;isVoidTy();</Highlight></CodeLine>
<Link id="l01451" /><CodeLine lineNumber="1451"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Masked store has an initial operand for the value.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01452" /><CodeLine lineNumber="1452"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> OpOffset = IsWrite ? 1 : 0;</Highlight></CodeLine>
<Link id="l01453" /><CodeLine lineNumber="1453"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsWrite ? !<a href="#a2df764565c5764a2af608a819cfa2540">ClInstrumentWrites</a> : !<a href="#adc5cd4695253418937546218dbe26922">ClInstrumentReads</a>)</Highlight></CodeLine>
<Link id="l01454" /><CodeLine lineNumber="1454"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01455" /><CodeLine lineNumber="1455"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01456" /><CodeLine lineNumber="1456"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> BasePtr = CI-&gt;getOperand(OpOffset);</Highlight></CodeLine>
<Link id="l01457" /><CodeLine lineNumber="1457"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65">ignoreAccess</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, BasePtr))</Highlight></CodeLine>
<Link id="l01458" /><CodeLine lineNumber="1458"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01459" /><CodeLine lineNumber="1459"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = IsWrite ? CI-&gt;getArgOperand(0)-&gt;getType() : CI-&gt;getType();</Highlight></CodeLine>
<Link id="l01460" /><CodeLine lineNumber="1460"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment = <a href="/docs/api/structs/llvm/align">Align</a>(1);</Highlight></CodeLine>
<Link id="l01461" /><CodeLine lineNumber="1461"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Otherwise no alignment guarantees. We probably got Undef.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01462" /><CodeLine lineNumber="1462"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;<a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantInt&gt;</a>(CI-&gt;getOperand(1 + OpOffset)))</Highlight></CodeLine>
<Link id="l01463" /><CodeLine lineNumber="1463"><Highlight kind="normal">        Alignment = <a href="/docs/api/namespaces/llvm/#ab471937b9a227e70c7fe8bd9604014d6">Op</a>-&gt;getMaybeAlignValue();</Highlight></CodeLine>
<Link id="l01464" /><CodeLine lineNumber="1464"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Mask = CI-&gt;getOperand(2 + OpOffset);</Highlight></CodeLine>
<Link id="l01465" /><CodeLine lineNumber="1465"><Highlight kind="normal">      Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, OpOffset, IsWrite, Ty, Alignment, Mask);</Highlight></CodeLine>
<Link id="l01466" /><CodeLine lineNumber="1466"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01467" /><CodeLine lineNumber="1467"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01468" /><CodeLine lineNumber="1468"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> Intrinsic::masked&#95;expandload:</Highlight></CodeLine>
<Link id="l01469" /><CodeLine lineNumber="1469"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> Intrinsic::masked&#95;compressstore: &#123;</Highlight></CodeLine>
<Link id="l01470" /><CodeLine lineNumber="1470"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsWrite = CI-&gt;getIntrinsicID() == Intrinsic::masked&#95;compressstore;</Highlight></CodeLine>
<Link id="l01471" /><CodeLine lineNumber="1471"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> OpOffset = IsWrite ? 1 : 0;</Highlight></CodeLine>
<Link id="l01472" /><CodeLine lineNumber="1472"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsWrite ? !<a href="#a2df764565c5764a2af608a819cfa2540">ClInstrumentWrites</a> : !<a href="#adc5cd4695253418937546218dbe26922">ClInstrumentReads</a>)</Highlight></CodeLine>
<Link id="l01473" /><CodeLine lineNumber="1473"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01474" /><CodeLine lineNumber="1474"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> BasePtr = CI-&gt;getOperand(OpOffset);</Highlight></CodeLine>
<Link id="l01475" /><CodeLine lineNumber="1475"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65">ignoreAccess</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, BasePtr))</Highlight></CodeLine>
<Link id="l01476" /><CodeLine lineNumber="1476"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01477" /><CodeLine lineNumber="1477"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment = BasePtr-&gt;getPointerAlignment(&#42;DL);</Highlight></CodeLine>
<Link id="l01478" /><CodeLine lineNumber="1478"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = IsWrite ? CI-&gt;getArgOperand(0)-&gt;getType() : CI-&gt;getType();</Highlight></CodeLine>
<Link id="l01479" /><CodeLine lineNumber="1479"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01480" /><CodeLine lineNumber="1480"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a> IB(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</Highlight></CodeLine>
<Link id="l01481" /><CodeLine lineNumber="1481"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Mask = CI-&gt;getOperand(1 + OpOffset);</Highlight></CodeLine>
<Link id="l01482" /><CodeLine lineNumber="1482"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Use the popcount of Mask as the effective vector length.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01483" /><CodeLine lineNumber="1483"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;ExtTy = <a href="/docs/api/classes/llvm/vectortype/#a861be1e2092622462053c6d31dddbfd5">VectorType::get</a>(IntptrTy, <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VectorType&gt;</a>(Ty));</Highlight></CodeLine>
<Link id="l01484" /><CodeLine lineNumber="1484"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;ExtMask = IB.CreateZExt(Mask, ExtTy);</Highlight></CodeLine>
<Link id="l01485" /><CodeLine lineNumber="1485"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;EVL = IB.CreateAddReduce(ExtMask);</Highlight></CodeLine>
<Link id="l01486" /><CodeLine lineNumber="1486"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;TrueMask = ConstantInt::get(Mask-&gt;getType(), 1);</Highlight></CodeLine>
<Link id="l01487" /><CodeLine lineNumber="1487"><Highlight kind="normal">      Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, OpOffset, IsWrite, Ty, Alignment, TrueMask,</Highlight></CodeLine>
<Link id="l01488" /><CodeLine lineNumber="1488"><Highlight kind="normal">                               EVL);</Highlight></CodeLine>
<Link id="l01489" /><CodeLine lineNumber="1489"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01490" /><CodeLine lineNumber="1490"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01491" /><CodeLine lineNumber="1491"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> Intrinsic::vp&#95;load:</Highlight></CodeLine>
<Link id="l01492" /><CodeLine lineNumber="1492"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> Intrinsic::vp&#95;store:</Highlight></CodeLine>
<Link id="l01493" /><CodeLine lineNumber="1493"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> Intrinsic::experimental&#95;vp&#95;strided&#95;load:</Highlight></CodeLine>
<Link id="l01494" /><CodeLine lineNumber="1494"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> Intrinsic::experimental&#95;vp&#95;strided&#95;store: &#123;</Highlight></CodeLine>
<Link id="l01495" /><CodeLine lineNumber="1495"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;VPI = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VPIntrinsic&gt;</a>(CI);</Highlight></CodeLine>
<Link id="l01496" /><CodeLine lineNumber="1496"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> IID = CI-&gt;getIntrinsicID();</Highlight></CodeLine>
<Link id="l01497" /><CodeLine lineNumber="1497"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsWrite = CI-&gt;getType()-&gt;isVoidTy();</Highlight></CodeLine>
<Link id="l01498" /><CodeLine lineNumber="1498"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsWrite ? !<a href="#a2df764565c5764a2af608a819cfa2540">ClInstrumentWrites</a> : !<a href="#adc5cd4695253418937546218dbe26922">ClInstrumentReads</a>)</Highlight></CodeLine>
<Link id="l01499" /><CodeLine lineNumber="1499"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01500" /><CodeLine lineNumber="1500"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> PtrOpNo = &#42;VPI-&gt;getMemoryPointerParamPos(IID);</Highlight></CodeLine>
<Link id="l01501" /><CodeLine lineNumber="1501"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = IsWrite ? CI-&gt;getArgOperand(0)-&gt;getType() : CI-&gt;getType();</Highlight></CodeLine>
<Link id="l01502" /><CodeLine lineNumber="1502"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment = VPI-&gt;getOperand(PtrOpNo)-&gt;getPointerAlignment(&#42;DL);</Highlight></CodeLine>
<Link id="l01503" /><CodeLine lineNumber="1503"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Stride = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01504" /><CodeLine lineNumber="1504"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IID == Intrinsic::experimental&#95;vp&#95;strided&#95;store ||</Highlight></CodeLine>
<Link id="l01505" /><CodeLine lineNumber="1505"><Highlight kind="normal">          IID == Intrinsic::experimental&#95;vp&#95;strided&#95;load) &#123;</Highlight></CodeLine>
<Link id="l01506" /><CodeLine lineNumber="1506"><Highlight kind="normal">        Stride = VPI-&gt;getOperand(PtrOpNo + 1);</Highlight></CodeLine>
<Link id="l01507" /><CodeLine lineNumber="1507"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// Use the pointer alignment as the element alignment if the stride is a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01508" /><CodeLine lineNumber="1508"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// mutiple of the pointer alignment. Otherwise, the element alignment</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01509" /><CodeLine lineNumber="1509"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// should be Align(1).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01510" /><CodeLine lineNumber="1510"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> PointerAlign = Alignment.<a href="/docs/api/structs/llvm/maybealign/#a06846474be3ab85f8d30c388faf3b116">valueOrOne</a>().<a href="/docs/api/structs/llvm/align/#a80735739b49cf97a491922c8f9af2cc1">value</a>();</Highlight></CodeLine>
<Link id="l01511" /><CodeLine lineNumber="1511"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantInt&gt;</a>(Stride) ||</Highlight></CodeLine>
<Link id="l01512" /><CodeLine lineNumber="1512"><Highlight kind="normal">            <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantInt&gt;</a>(Stride)-&gt;getZExtValue() % PointerAlign != 0)</Highlight></CodeLine>
<Link id="l01513" /><CodeLine lineNumber="1513"><Highlight kind="normal">          Alignment = <a href="/docs/api/structs/llvm/align">Align</a>(1);</Highlight></CodeLine>
<Link id="l01514" /><CodeLine lineNumber="1514"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01515" /><CodeLine lineNumber="1515"><Highlight kind="normal">      Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, PtrOpNo, IsWrite, Ty, Alignment,</Highlight></CodeLine>
<Link id="l01516" /><CodeLine lineNumber="1516"><Highlight kind="normal">                               VPI-&gt;getMaskParam(), VPI-&gt;getVectorLengthParam(),</Highlight></CodeLine>
<Link id="l01517" /><CodeLine lineNumber="1517"><Highlight kind="normal">                               Stride);</Highlight></CodeLine>
<Link id="l01518" /><CodeLine lineNumber="1518"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01519" /><CodeLine lineNumber="1519"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01520" /><CodeLine lineNumber="1520"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> Intrinsic::vp&#95;gather:</Highlight></CodeLine>
<Link id="l01521" /><CodeLine lineNumber="1521"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> Intrinsic::vp&#95;scatter: &#123;</Highlight></CodeLine>
<Link id="l01522" /><CodeLine lineNumber="1522"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;VPI = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VPIntrinsic&gt;</a>(CI);</Highlight></CodeLine>
<Link id="l01523" /><CodeLine lineNumber="1523"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> IID = CI-&gt;getIntrinsicID();</Highlight></CodeLine>
<Link id="l01524" /><CodeLine lineNumber="1524"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsWrite = IID == Intrinsic::vp&#95;scatter;</Highlight></CodeLine>
<Link id="l01525" /><CodeLine lineNumber="1525"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsWrite ? !<a href="#a2df764565c5764a2af608a819cfa2540">ClInstrumentWrites</a> : !<a href="#adc5cd4695253418937546218dbe26922">ClInstrumentReads</a>)</Highlight></CodeLine>
<Link id="l01526" /><CodeLine lineNumber="1526"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01527" /><CodeLine lineNumber="1527"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> PtrOpNo = &#42;VPI-&gt;getMemoryPointerParamPos(IID);</Highlight></CodeLine>
<Link id="l01528" /><CodeLine lineNumber="1528"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = IsWrite ? CI-&gt;getArgOperand(0)-&gt;getType() : CI-&gt;getType();</Highlight></CodeLine>
<Link id="l01529" /><CodeLine lineNumber="1529"><Highlight kind="normal">      <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment = VPI-&gt;getPointerAlignment();</Highlight></CodeLine>
<Link id="l01530" /><CodeLine lineNumber="1530"><Highlight kind="normal">      Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, PtrOpNo, IsWrite, Ty, Alignment,</Highlight></CodeLine>
<Link id="l01531" /><CodeLine lineNumber="1531"><Highlight kind="normal">                               VPI-&gt;getMaskParam(),</Highlight></CodeLine>
<Link id="l01532" /><CodeLine lineNumber="1532"><Highlight kind="normal">                               VPI-&gt;getVectorLengthParam());</Highlight></CodeLine>
<Link id="l01533" /><CodeLine lineNumber="1533"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01534" /><CodeLine lineNumber="1534"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01535" /><CodeLine lineNumber="1535"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">default</Highlight><Highlight kind="normal">:</Highlight></CodeLine>
<Link id="l01536" /><CodeLine lineNumber="1536"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ArgNo = 0; ArgNo &lt; CI-&gt;arg&#95;size(); ArgNo++) &#123;</Highlight></CodeLine>
<Link id="l01537" /><CodeLine lineNumber="1537"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="#a33190b8a2d49613b79d5374db635dd0a">ClInstrumentByval</a> || !CI-&gt;isByValArgument(ArgNo) ||</Highlight></CodeLine>
<Link id="l01538" /><CodeLine lineNumber="1538"><Highlight kind="normal">            <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#aef822a56c96fe3f688c09d71bacb9b65">ignoreAccess</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, CI-&gt;getArgOperand(ArgNo)))</Highlight></CodeLine>
<Link id="l01539" /><CodeLine lineNumber="1539"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01540" /><CodeLine lineNumber="1540"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = CI-&gt;getParamByValType(ArgNo);</Highlight></CodeLine>
<Link id="l01541" /><CodeLine lineNumber="1541"><Highlight kind="normal">        Interesting.<a href="/docs/api/classes/llvm/smallvectorimpl/#a396fcfee6914c76974b73c3d203da6a5">emplace&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ArgNo, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, Ty, <a href="/docs/api/structs/llvm/align">Align</a>(1));</Highlight></CodeLine>
<Link id="l01542" /><CodeLine lineNumber="1542"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l01543" /><CodeLine lineNumber="1543"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01544" /><CodeLine lineNumber="1544"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01545" /><CodeLine lineNumber="1545"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01546" /><CodeLine lineNumber="1546"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01547" /><CodeLine lineNumber="1547" lineLink="#a84925f563ac5648b7a5c359d835cc947"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/bpf/bpfpreservestaticoffset-cpp/#afc00f27e00d04515eed04435def6d8fd">isPointerOperand</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V) &#123;</Highlight></CodeLine>
<Link id="l01548" /><CodeLine lineNumber="1548"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> V-&gt;getType()-&gt;isPointerTy() || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;PtrToIntInst&gt;</a>(V);</Highlight></CodeLine>
<Link id="l01549" /><CodeLine lineNumber="1549"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01550" /><CodeLine lineNumber="1550"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01551" /><CodeLine lineNumber="1551"><Highlight kind="normal"></Highlight><Highlight kind="comment">// This is a rough heuristic; it may cause both false positives and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01552" /><CodeLine lineNumber="1552"><Highlight kind="normal"></Highlight><Highlight kind="comment">// false negatives. The proper implementation requires cooperation with</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01553" /><CodeLine lineNumber="1553"><Highlight kind="normal"></Highlight><Highlight kind="comment">// the frontend.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01554" /><CodeLine lineNumber="1554" lineLink="#a8d829e3f1a798c5c559b716ba05a4d7d"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="#a8d829e3f1a798c5c559b716ba05a4d7d">isInterestingPointerComparison</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</Highlight></CodeLine>
<Link id="l01555" /><CodeLine lineNumber="1555"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/icmpinst">ICmpInst</a> &#42;Cmp = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ICmpInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</Highlight></CodeLine>
<Link id="l01556" /><CodeLine lineNumber="1556"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Cmp-&gt;isRelational())</Highlight></CodeLine>
<Link id="l01557" /><CodeLine lineNumber="1557"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01558" /><CodeLine lineNumber="1558"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01559" /><CodeLine lineNumber="1559"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01560" /><CodeLine lineNumber="1560"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01561" /><CodeLine lineNumber="1561"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/bpf/bpfpreservestaticoffset-cpp/#afc00f27e00d04515eed04435def6d8fd">isPointerOperand</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0)) &amp;&amp;</Highlight></CodeLine>
<Link id="l01562" /><CodeLine lineNumber="1562"><Highlight kind="normal">         <a href="/docs/api/files/lib/lib/target/lib/target/bpf/bpfpreservestaticoffset-cpp/#afc00f27e00d04515eed04435def6d8fd">isPointerOperand</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1));</Highlight></CodeLine>
<Link id="l01563" /><CodeLine lineNumber="1563"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01564" /><CodeLine lineNumber="1564"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01565" /><CodeLine lineNumber="1565"><Highlight kind="normal"></Highlight><Highlight kind="comment">// This is a rough heuristic; it may cause both false positives and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01566" /><CodeLine lineNumber="1566"><Highlight kind="normal"></Highlight><Highlight kind="comment">// false negatives. The proper implementation requires cooperation with</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01567" /><CodeLine lineNumber="1567"><Highlight kind="normal"></Highlight><Highlight kind="comment">// the frontend.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01568" /><CodeLine lineNumber="1568" lineLink="#a1e0c09290631b1be732e7387c75aca09"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="#a1e0c09290631b1be732e7387c75aca09">isInterestingPointerSubtraction</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</Highlight></CodeLine>
<Link id="l01569" /><CodeLine lineNumber="1569"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/binaryoperator">BinaryOperator</a> &#42;BO = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;BinaryOperator&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) &#123;</Highlight></CodeLine>
<Link id="l01570" /><CodeLine lineNumber="1570"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (BO-&gt;getOpcode() != Instruction::Sub)</Highlight></CodeLine>
<Link id="l01571" /><CodeLine lineNumber="1571"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01572" /><CodeLine lineNumber="1572"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01573" /><CodeLine lineNumber="1573"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01574" /><CodeLine lineNumber="1574"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01575" /><CodeLine lineNumber="1575"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/bpf/bpfpreservestaticoffset-cpp/#afc00f27e00d04515eed04435def6d8fd">isPointerOperand</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0)) &amp;&amp;</Highlight></CodeLine>
<Link id="l01576" /><CodeLine lineNumber="1576"><Highlight kind="normal">         <a href="/docs/api/files/lib/lib/target/lib/target/bpf/bpfpreservestaticoffset-cpp/#afc00f27e00d04515eed04435def6d8fd">isPointerOperand</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1));</Highlight></CodeLine>
<Link id="l01577" /><CodeLine lineNumber="1577"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01578" /><CodeLine lineNumber="1578"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01579" /><CodeLine lineNumber="1579"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AddressSanitizer::GlobalIsLinkerInitialized(<a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) &#123;</Highlight></CodeLine>
<Link id="l01580" /><CodeLine lineNumber="1580"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If a global variable does not have dynamic initialization we don&#39;t</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01581" /><CodeLine lineNumber="1581"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// have to instrument it.  However, if a global does not have initializer</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01582" /><CodeLine lineNumber="1582"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// at all, we assume it has dynamic initializer (in other TU).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01583" /><CodeLine lineNumber="1583"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasInitializer())</Highlight></CodeLine>
<Link id="l01584" /><CodeLine lineNumber="1584"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01585" /><CodeLine lineNumber="1585"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01586" /><CodeLine lineNumber="1586"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasSanitizerMetadata() &amp;&amp; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getSanitizerMetadata().IsDynInit)</Highlight></CodeLine>
<Link id="l01587" /><CodeLine lineNumber="1587"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01588" /><CodeLine lineNumber="1588"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01589" /><CodeLine lineNumber="1589"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01590" /><CodeLine lineNumber="1590"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01591" /><CodeLine lineNumber="1591"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01592" /><CodeLine lineNumber="1592" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae2d43eb64d8a2c479e94d13a0699ba38"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae2d43eb64d8a2c479e94d13a0699ba38">AddressSanitizer::instrumentPointerComparisonOrSubtraction</a>(</Highlight></CodeLine>
<Link id="l01593" /><CodeLine lineNumber="1593"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI) &#123;</Highlight></CodeLine>
<Link id="l01594" /><CodeLine lineNumber="1594"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</Highlight></CodeLine>
<Link id="l01595" /><CodeLine lineNumber="1595"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ICmpInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ? AsanPtrCmpFunction : AsanPtrSubFunction;</Highlight></CodeLine>
<Link id="l01596" /><CodeLine lineNumber="1596"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;Param&#91;2&#93; = &#123;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1)&#125;;</Highlight></CodeLine>
<Link id="l01597" /><CodeLine lineNumber="1597"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/value">Value</a> &#42;&amp;i : Param) &#123;</Highlight></CodeLine>
<Link id="l01598" /><CodeLine lineNumber="1598"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (i-&gt;getType()-&gt;isPointerTy())</Highlight></CodeLine>
<Link id="l01599" /><CodeLine lineNumber="1599"><Highlight kind="normal">      i = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(i, IntptrTy);</Highlight></CodeLine>
<Link id="l01600" /><CodeLine lineNumber="1600"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01601" /><CodeLine lineNumber="1601"><Highlight kind="normal">  RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(IRB, <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, Param);</Highlight></CodeLine>
<Link id="l01602" /><CodeLine lineNumber="1602"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01603" /><CodeLine lineNumber="1603"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01604" /><CodeLine lineNumber="1604" lineLink="#a01b9989f797101a150d7a960255adfec"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="#a01b9989f797101a150d7a960255adfec">doInstrumentAddress</a>(AddressSanitizer &#42;<a href="/docs/api/classes/llvm/pass">Pass</a>, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</Highlight></CodeLine>
<Link id="l01605" /><CodeLine lineNumber="1605"><Highlight kind="normal">                                <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</Highlight></CodeLine>
<Link id="l01606" /><CodeLine lineNumber="1606"><Highlight kind="normal">                                <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Granularity,</Highlight></CodeLine>
<Link id="l01607" /><CodeLine lineNumber="1607"><Highlight kind="normal">                                <a href="/docs/api/classes/llvm/typesize">TypeSize</a> TypeStoreSize, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsWrite,</Highlight></CodeLine>
<Link id="l01608" /><CodeLine lineNumber="1608"><Highlight kind="normal">                                <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseCalls,</Highlight></CodeLine>
<Link id="l01609" /><CodeLine lineNumber="1609"><Highlight kind="normal">                                uint32&#95;t Exp, RuntimeCallInserter &amp;RTCI) &#123;</Highlight></CodeLine>
<Link id="l01610" /><CodeLine lineNumber="1610"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Instrument a 1-, 2-, 4-, 8-, or 16- byte access with one check</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01611" /><CodeLine lineNumber="1611"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// if the data is properly aligned.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01612" /><CodeLine lineNumber="1612"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!TypeStoreSize.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>()) &#123;</Highlight></CodeLine>
<Link id="l01613" /><CodeLine lineNumber="1613"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> FixedSize = TypeStoreSize.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>();</Highlight></CodeLine>
<Link id="l01614" /><CodeLine lineNumber="1614"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (FixedSize) &#123;</Highlight></CodeLine>
<Link id="l01615" /><CodeLine lineNumber="1615"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> 8:</Highlight></CodeLine>
<Link id="l01616" /><CodeLine lineNumber="1616"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> 16:</Highlight></CodeLine>
<Link id="l01617" /><CodeLine lineNumber="1617"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> 32:</Highlight></CodeLine>
<Link id="l01618" /><CodeLine lineNumber="1618"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> 64:</Highlight></CodeLine>
<Link id="l01619" /><CodeLine lineNumber="1619"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> 128:</Highlight></CodeLine>
<Link id="l01620" /><CodeLine lineNumber="1620"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Alignment || &#42;Alignment &gt;= Granularity ||</Highlight></CodeLine>
<Link id="l01621" /><CodeLine lineNumber="1621"><Highlight kind="normal">          &#42;Alignment &gt;= FixedSize / 8)</Highlight></CodeLine>
<Link id="l01622" /><CodeLine lineNumber="1622"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/pass">Pass</a>-&gt;instrumentAddress(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, InsertBefore, Addr, Alignment,</Highlight></CodeLine>
<Link id="l01623" /><CodeLine lineNumber="1623"><Highlight kind="normal">                                       FixedSize, IsWrite, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">, UseCalls,</Highlight></CodeLine>
<Link id="l01624" /><CodeLine lineNumber="1624"><Highlight kind="normal">                                       Exp, RTCI);</Highlight></CodeLine>
<Link id="l01625" /><CodeLine lineNumber="1625"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01626" /><CodeLine lineNumber="1626"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01627" /><CodeLine lineNumber="1627"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/pass">Pass</a>-&gt;instrumentUnusualSizeOrAlignment(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, InsertBefore, Addr, TypeStoreSize,</Highlight></CodeLine>
<Link id="l01628" /><CodeLine lineNumber="1628"><Highlight kind="normal">                                         IsWrite, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">, UseCalls, Exp, RTCI);</Highlight></CodeLine>
<Link id="l01629" /><CodeLine lineNumber="1629"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01630" /><CodeLine lineNumber="1630"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01631" /><CodeLine lineNumber="1631" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ad73240db48b2eda2b2ca2ce38530c552"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ad73240db48b2eda2b2ca2ce38530c552">AddressSanitizer::instrumentMaskedLoadOrStore</a>(</Highlight></CodeLine>
<Link id="l01632" /><CodeLine lineNumber="1632"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae700acd5d174922e475ea31fdb8fe51f">AddressSanitizer</a> &#42;<a href="/docs/api/classes/llvm/pass">Pass</a>, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;DL, <a href="/docs/api/classes/llvm/type">Type</a> &#42;IntptrTy, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Mask,</Highlight></CodeLine>
<Link id="l01633" /><CodeLine lineNumber="1633"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;EVL, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Stride, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</Highlight></CodeLine>
<Link id="l01634" /><CodeLine lineNumber="1634"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment, </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Granularity, <a href="/docs/api/classes/llvm/type">Type</a> &#42;OpType, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsWrite,</Highlight></CodeLine>
<Link id="l01635" /><CodeLine lineNumber="1635"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseCalls, uint32&#95;t Exp,</Highlight></CodeLine>
<Link id="l01636" /><CodeLine lineNumber="1636"><Highlight kind="normal">    <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI) &#123;</Highlight></CodeLine>
<Link id="l01637" /><CodeLine lineNumber="1637"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;VTy = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;VectorType&gt;</a>(OpType);</Highlight></CodeLine>
<Link id="l01638" /><CodeLine lineNumber="1638"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/typesize">TypeSize</a> ElemTypeSize = DL.getTypeStoreSizeInBits(VTy-&gt;getScalarType());</Highlight></CodeLine>
<Link id="l01639" /><CodeLine lineNumber="1639"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> Zero = ConstantInt::get(IntptrTy, 0);</Highlight></CodeLine>
<Link id="l01640" /><CodeLine lineNumber="1640"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01641" /><CodeLine lineNumber="1641"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder</a> IB(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</Highlight></CodeLine>
<Link id="l01642" /><CodeLine lineNumber="1642"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;LoopInsertBefore = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</Highlight></CodeLine>
<Link id="l01643" /><CodeLine lineNumber="1643"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (EVL) &#123;</Highlight></CodeLine>
<Link id="l01644" /><CodeLine lineNumber="1644"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The end argument of SplitBlockAndInsertForLane is assumed bigger</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01645" /><CodeLine lineNumber="1645"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// than zero, so we should check whether EVL is zero here.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01646" /><CodeLine lineNumber="1646"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;EVLType = EVL-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>();</Highlight></CodeLine>
<Link id="l01647" /><CodeLine lineNumber="1647"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;IsEVLZero = IB.CreateICmpNE(EVL, ConstantInt::get(EVLType, 0));</Highlight></CodeLine>
<Link id="l01648" /><CodeLine lineNumber="1648"><Highlight kind="normal">    LoopInsertBefore = <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(IsEVLZero, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01649" /><CodeLine lineNumber="1649"><Highlight kind="normal">    IB.SetInsertPoint(LoopInsertBefore);</Highlight></CodeLine>
<Link id="l01650" /><CodeLine lineNumber="1650"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Cast EVL to IntptrTy.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01651" /><CodeLine lineNumber="1651"><Highlight kind="normal">    EVL = IB.CreateZExtOrTrunc(EVL, IntptrTy);</Highlight></CodeLine>
<Link id="l01652" /><CodeLine lineNumber="1652"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// To avoid undefined behavior for extracting with out of range index, use</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01653" /><CodeLine lineNumber="1653"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the minimum of evl and element count as trip count.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01654" /><CodeLine lineNumber="1654"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;EC = IB.CreateElementCount(IntptrTy, VTy-&gt;getElementCount());</Highlight></CodeLine>
<Link id="l01655" /><CodeLine lineNumber="1655"><Highlight kind="normal">    EVL = IB.CreateBinaryIntrinsic(Intrinsic::umin, EVL, EC);</Highlight></CodeLine>
<Link id="l01656" /><CodeLine lineNumber="1656"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01657" /><CodeLine lineNumber="1657"><Highlight kind="normal">    EVL = IB.CreateElementCount(IntptrTy, VTy-&gt;getElementCount());</Highlight></CodeLine>
<Link id="l01658" /><CodeLine lineNumber="1658"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01659" /><CodeLine lineNumber="1659"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01660" /><CodeLine lineNumber="1660"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Cast Stride to IntptrTy.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01661" /><CodeLine lineNumber="1661"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Stride)</Highlight></CodeLine>
<Link id="l01662" /><CodeLine lineNumber="1662"><Highlight kind="normal">    Stride = IB.CreateZExtOrTrunc(Stride, IntptrTy);</Highlight></CodeLine>
<Link id="l01663" /><CodeLine lineNumber="1663"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01664" /><CodeLine lineNumber="1664"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#af71ef8ea795d6a6eb87a3499f3b0c90f">SplitBlockAndInsertForEachLane</a>(EVL, LoopInsertBefore-&gt;<a href="/docs/api/classes/llvm/ilist-node-impl/#af719fc783be6589465137d997701a432">getIterator</a>(),</Highlight></CodeLine>
<Link id="l01665" /><CodeLine lineNumber="1665"><Highlight kind="normal">                                 &#91;&amp;&#93;(<a href="/docs/api/classes/llvm/irbuilderbase">IRBuilderBase</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Index) &#123;</Highlight></CodeLine>
<Link id="l01666" /><CodeLine lineNumber="1666"><Highlight kind="normal">    Value &#42;MaskElem = IRB.CreateExtractElement(Mask, Index);</Highlight></CodeLine>
<Link id="l01667" /><CodeLine lineNumber="1667"><Highlight kind="normal">    if (auto &#42;MaskElemC = dyn&#95;cast&lt;ConstantInt&gt;(MaskElem)) &#123;</Highlight></CodeLine>
<Link id="l01668" /><CodeLine lineNumber="1668"><Highlight kind="normal">      if (MaskElemC-&gt;isZero())</Highlight></CodeLine>
<Link id="l01669" /><CodeLine lineNumber="1669"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// No check</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01670" /><CodeLine lineNumber="1670"><Highlight kind="normal">        return;</Highlight></CodeLine>
<Link id="l01671" /><CodeLine lineNumber="1671"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Unconditional check</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01672" /><CodeLine lineNumber="1672"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01673" /><CodeLine lineNumber="1673"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Conditional check</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01674" /><CodeLine lineNumber="1674"><Highlight kind="normal">      Instruction &#42;ThenTerm = SplitBlockAndInsertIfThen(</Highlight></CodeLine>
<Link id="l01675" /><CodeLine lineNumber="1675"><Highlight kind="normal">          MaskElem, &amp;&#42;IRB.GetInsertPoint(), false);</Highlight></CodeLine>
<Link id="l01676" /><CodeLine lineNumber="1676"><Highlight kind="normal">      IRB.SetInsertPoint(ThenTerm);</Highlight></CodeLine>
<Link id="l01677" /><CodeLine lineNumber="1677"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01678" /><CodeLine lineNumber="1678"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01679" /><CodeLine lineNumber="1679"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;InstrumentedAddress;</Highlight></CodeLine>
<Link id="l01680" /><CodeLine lineNumber="1680"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#acdfbcf188e2d4a80837e89de2ccdffab">if</a> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;VectorType&gt;</a>(Addr-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>())) &#123;</Highlight></CodeLine>
<Link id="l01681" /><CodeLine lineNumber="1681"><Highlight kind="normal">      assert(</Highlight></CodeLine>
<Link id="l01682" /><CodeLine lineNumber="1682"><Highlight kind="normal">          cast&lt;VectorType&gt;(Addr-&gt;getType())-&gt;getElementType()-&gt;isPointerTy() &amp;&amp;</Highlight></CodeLine>
<Link id="l01683" /><CodeLine lineNumber="1683"><Highlight kind="normal">          </Highlight><Highlight kind="stringliteral">&quot;Expected vector of pointer.&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01684" /><CodeLine lineNumber="1684"><Highlight kind="normal">      InstrumentedAddress = IRB.CreateExtractElement(Addr, Index);</Highlight></CodeLine>
<Link id="l01685" /><CodeLine lineNumber="1685"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/passes/passbuilderbindings-cpp/#acdfbcf188e2d4a80837e89de2ccdffab">if</a> (Stride) &#123;</Highlight></CodeLine>
<Link id="l01686" /><CodeLine lineNumber="1686"><Highlight kind="normal">      Index = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aecd40f9a16dc0ef1e0bc416599f89277">CreateMul</a>(Index, Stride);</Highlight></CodeLine>
<Link id="l01687" /><CodeLine lineNumber="1687"><Highlight kind="normal">      InstrumentedAddress = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5b416a8603ccb844165c8df22454ac05">CreatePtrAdd</a>(Addr, Index);</Highlight></CodeLine>
<Link id="l01688" /><CodeLine lineNumber="1688"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01689" /><CodeLine lineNumber="1689"><Highlight kind="normal">      InstrumentedAddress = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a73e0482b96d9d0cdfcc90c0a34f5b0db">CreateGEP</a>(VTy, Addr, &#123;Zero, Index&#125;);</Highlight></CodeLine>
<Link id="l01690" /><CodeLine lineNumber="1690"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01691" /><CodeLine lineNumber="1691"><Highlight kind="normal">    <a href="#a01b9989f797101a150d7a960255adfec">doInstrumentAddress</a>(<a href="/docs/api/classes/llvm/pass">Pass</a>, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &amp;&#42;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4e5c1b91bf5e2860398e3fa35c96b5af">GetInsertPoint</a>(), InstrumentedAddress,</Highlight></CodeLine>
<Link id="l01692" /><CodeLine lineNumber="1692"><Highlight kind="normal">                        Alignment, Granularity, ElemTypeSize, IsWrite,</Highlight></CodeLine>
<Link id="l01693" /><CodeLine lineNumber="1693"><Highlight kind="normal">                        SizeArgument, UseCalls, Exp, RTCI);</Highlight></CodeLine>
<Link id="l01694" /><CodeLine lineNumber="1694"><Highlight kind="normal">  &#125;);</Highlight></CodeLine>
<Link id="l01695" /><CodeLine lineNumber="1695"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01696" /><CodeLine lineNumber="1696"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01697" /><CodeLine lineNumber="1697" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a9e375fb896826338e488dae6f16e853b"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a9e375fb896826338e488dae6f16e853b">AddressSanitizer::instrumentMop</a>(<a href="/docs/api/classes/llvm/objectsizeoffsetvisitor">ObjectSizeOffsetVisitor</a> &amp;ObjSizeVis,</Highlight></CodeLine>
<Link id="l01698" /><CodeLine lineNumber="1698"><Highlight kind="normal">                                     <a href="/docs/api/classes/llvm/interestingmemoryoperand">InterestingMemoryOperand</a> &amp;O, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseCalls,</Highlight></CodeLine>
<Link id="l01699" /><CodeLine lineNumber="1699"><Highlight kind="normal">                                     </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;DL,</Highlight></CodeLine>
<Link id="l01700" /><CodeLine lineNumber="1700"><Highlight kind="normal">                                     <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI) &#123;</Highlight></CodeLine>
<Link id="l01701" /><CodeLine lineNumber="1701"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr = O.getPtr();</Highlight></CodeLine>
<Link id="l01702" /><CodeLine lineNumber="1702"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01703" /><CodeLine lineNumber="1703"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Optimization experiments.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01704" /><CodeLine lineNumber="1704"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// The experiments can be used to evaluate potential optimizations that remove</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01705" /><CodeLine lineNumber="1705"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// instrumentation (assess false negatives). Instead of completely removing</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01706" /><CodeLine lineNumber="1706"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// some instrumentation, you set Exp to a non-zero value (mask of optimization</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01707" /><CodeLine lineNumber="1707"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// experiments that want to remove instrumentation of this instruction).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01708" /><CodeLine lineNumber="1708"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If Exp is non-zero, this pass will emit special calls into runtime</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01709" /><CodeLine lineNumber="1709"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (e.g. &#95;&#95;asan&#95;report&#95;exp&#95;load1 instead of &#95;&#95;asan&#95;report&#95;load1). These calls</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01710" /><CodeLine lineNumber="1710"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// make runtime terminate the program in a special way (with a different</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01711" /><CodeLine lineNumber="1711"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// exit status). Then you run the new compiler on a buggy corpus, collect</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01712" /><CodeLine lineNumber="1712"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the special terminations (ideally, you don&#39;t see them at all -- no false</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01713" /><CodeLine lineNumber="1713"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// negatives) and make the decision on the optimization.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01714" /><CodeLine lineNumber="1714"><Highlight kind="normal">  uint32&#95;t Exp = <a href="#a8769662e83dc63443d2cfa743cd8407b">ClForceExperiment</a>;</Highlight></CodeLine>
<Link id="l01715" /><CodeLine lineNumber="1715"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01716" /><CodeLine lineNumber="1716"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a6d7586f09e72a8d0b38a7b28ce03068c">ClOpt</a> &amp;&amp; <a href="#abd03cce0a222ad0e49b3074b9258f894">ClOptGlobals</a>) &#123;</Highlight></CodeLine>
<Link id="l01717" /><CodeLine lineNumber="1717"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If initialization order checking is disabled, a simple access to a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01718" /><CodeLine lineNumber="1718"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// dynamically initialized global is always valid.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01719" /><CodeLine lineNumber="1719"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;GlobalVariable&gt;</a>(<a href="/docs/api/namespaces/llvm/#a3b1c5788b85ffa254be0e834edf5cf8f">getUnderlyingObject</a>(Addr));</Highlight></CodeLine>
<Link id="l01720" /><CodeLine lineNumber="1720"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> &amp;&amp; (!<a href="#ad7ffe665351fede3f8025e2cb84ccc83">ClInitializers</a> || GlobalIsLinkerInitialized(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>)) &amp;&amp;</Highlight></CodeLine>
<Link id="l01721" /><CodeLine lineNumber="1721"><Highlight kind="normal">        isSafeAccess(ObjSizeVis, Addr, O.TypeStoreSize)) &#123;</Highlight></CodeLine>
<Link id="l01722" /><CodeLine lineNumber="1722"><Highlight kind="normal">      NumOptimizedAccessesToGlobalVar++;</Highlight></CodeLine>
<Link id="l01723" /><CodeLine lineNumber="1723"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01724" /><CodeLine lineNumber="1724"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01725" /><CodeLine lineNumber="1725"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01726" /><CodeLine lineNumber="1726"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01727" /><CodeLine lineNumber="1727"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a6d7586f09e72a8d0b38a7b28ce03068c">ClOpt</a> &amp;&amp; <a href="#ab6e8695312b588ef5a110f33c9beb09c">ClOptStack</a>) &#123;</Highlight></CodeLine>
<Link id="l01728" /><CodeLine lineNumber="1728"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// A direct inbounds access to a stack variable is always valid.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01729" /><CodeLine lineNumber="1729"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;AllocaInst&gt;</a>(<a href="/docs/api/namespaces/llvm/#a3b1c5788b85ffa254be0e834edf5cf8f">getUnderlyingObject</a>(Addr)) &amp;&amp;</Highlight></CodeLine>
<Link id="l01730" /><CodeLine lineNumber="1730"><Highlight kind="normal">        isSafeAccess(ObjSizeVis, Addr, O.TypeStoreSize)) &#123;</Highlight></CodeLine>
<Link id="l01731" /><CodeLine lineNumber="1731"><Highlight kind="normal">      NumOptimizedAccessesToStackVar++;</Highlight></CodeLine>
<Link id="l01732" /><CodeLine lineNumber="1732"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01733" /><CodeLine lineNumber="1733"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01734" /><CodeLine lineNumber="1734"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01735" /><CodeLine lineNumber="1735"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01736" /><CodeLine lineNumber="1736"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (O.IsWrite)</Highlight></CodeLine>
<Link id="l01737" /><CodeLine lineNumber="1737"><Highlight kind="normal">    NumInstrumentedWrites++;</Highlight></CodeLine>
<Link id="l01738" /><CodeLine lineNumber="1738"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01739" /><CodeLine lineNumber="1739"><Highlight kind="normal">    NumInstrumentedReads++;</Highlight></CodeLine>
<Link id="l01740" /><CodeLine lineNumber="1740"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01741" /><CodeLine lineNumber="1741"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Granularity = 1 &lt;&lt; Mapping.Scale;</Highlight></CodeLine>
<Link id="l01742" /><CodeLine lineNumber="1742"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (O.MaybeMask) &#123;</Highlight></CodeLine>
<Link id="l01743" /><CodeLine lineNumber="1743"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ad73240db48b2eda2b2ca2ce38530c552">instrumentMaskedLoadOrStore</a>(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">, DL, IntptrTy, O.MaybeMask, O.MaybeEVL,</Highlight></CodeLine>
<Link id="l01744" /><CodeLine lineNumber="1744"><Highlight kind="normal">                                O.MaybeStride, O.getInsn(), Addr, O.Alignment,</Highlight></CodeLine>
<Link id="l01745" /><CodeLine lineNumber="1745"><Highlight kind="normal">                                Granularity, O.OpType, O.IsWrite, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l01746" /><CodeLine lineNumber="1746"><Highlight kind="normal">                                UseCalls, Exp, RTCI);</Highlight></CodeLine>
<Link id="l01747" /><CodeLine lineNumber="1747"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01748" /><CodeLine lineNumber="1748"><Highlight kind="normal">    <a href="#a01b9989f797101a150d7a960255adfec">doInstrumentAddress</a>(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">, O.getInsn(), O.getInsn(), Addr, O.Alignment,</Highlight></CodeLine>
<Link id="l01749" /><CodeLine lineNumber="1749"><Highlight kind="normal">                        Granularity, O.TypeStoreSize, O.IsWrite, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l01750" /><CodeLine lineNumber="1750"><Highlight kind="normal">                        UseCalls, Exp, RTCI);</Highlight></CodeLine>
<Link id="l01751" /><CodeLine lineNumber="1751"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01752" /><CodeLine lineNumber="1752"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01753" /><CodeLine lineNumber="1753"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01754" /><CodeLine lineNumber="1754" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a67ce284f582c0557f843076f92ab7fd6"><Highlight kind="normal"><a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a67ce284f582c0557f843076f92ab7fd6">AddressSanitizer::generateCrashCode</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore,</Highlight></CodeLine>
<Link id="l01755" /><CodeLine lineNumber="1755"><Highlight kind="normal">                                                 <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsWrite,</Highlight></CodeLine>
<Link id="l01756" /><CodeLine lineNumber="1756"><Highlight kind="normal">                                                 </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> AccessSizeIndex,</Highlight></CodeLine>
<Link id="l01757" /><CodeLine lineNumber="1757"><Highlight kind="normal">                                                 <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument,</Highlight></CodeLine>
<Link id="l01758" /><CodeLine lineNumber="1758"><Highlight kind="normal">                                                 uint32&#95;t Exp,</Highlight></CodeLine>
<Link id="l01759" /><CodeLine lineNumber="1759"><Highlight kind="normal">                                                 <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI) &#123;</Highlight></CodeLine>
<Link id="l01760" /><CodeLine lineNumber="1760"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/instrumentationirbuilder">InstrumentationIRBuilder</a> IRB(InsertBefore);</Highlight></CodeLine>
<Link id="l01761" /><CodeLine lineNumber="1761"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;ExpVal = Exp == 0 ? nullptr : ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), Exp);</Highlight></CodeLine>
<Link id="l01762" /><CodeLine lineNumber="1762"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;<a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a> = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01763" /><CodeLine lineNumber="1763"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SizeArgument) &#123;</Highlight></CodeLine>
<Link id="l01764" /><CodeLine lineNumber="1764"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Exp == 0)</Highlight></CodeLine>
<Link id="l01765" /><CodeLine lineNumber="1765"><Highlight kind="normal">      <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a> = RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(IRB, AsanErrorCallbackSized&#91;IsWrite&#93;&#91;0&#93;,</Highlight></CodeLine>
<Link id="l01766" /><CodeLine lineNumber="1766"><Highlight kind="normal">                                    &#123;Addr, SizeArgument&#125;);</Highlight></CodeLine>
<Link id="l01767" /><CodeLine lineNumber="1767"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01768" /><CodeLine lineNumber="1768"><Highlight kind="normal">      <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a> = RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(IRB, AsanErrorCallbackSized&#91;IsWrite&#93;&#91;1&#93;,</Highlight></CodeLine>
<Link id="l01769" /><CodeLine lineNumber="1769"><Highlight kind="normal">                                    &#123;Addr, SizeArgument, ExpVal&#125;);</Highlight></CodeLine>
<Link id="l01770" /><CodeLine lineNumber="1770"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01771" /><CodeLine lineNumber="1771"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Exp == 0)</Highlight></CodeLine>
<Link id="l01772" /><CodeLine lineNumber="1772"><Highlight kind="normal">      <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a> = RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(</Highlight></CodeLine>
<Link id="l01773" /><CodeLine lineNumber="1773"><Highlight kind="normal">          IRB, AsanErrorCallback&#91;IsWrite&#93;&#91;0&#93;&#91;AccessSizeIndex&#93;, Addr);</Highlight></CodeLine>
<Link id="l01774" /><CodeLine lineNumber="1774"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01775" /><CodeLine lineNumber="1775"><Highlight kind="normal">      <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a> = RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(</Highlight></CodeLine>
<Link id="l01776" /><CodeLine lineNumber="1776"><Highlight kind="normal">          IRB, AsanErrorCallback&#91;IsWrite&#93;&#91;1&#93;&#91;AccessSizeIndex&#93;, &#123;Addr, ExpVal&#125;);</Highlight></CodeLine>
<Link id="l01777" /><CodeLine lineNumber="1777"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01778" /><CodeLine lineNumber="1778"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01779" /><CodeLine lineNumber="1779"><Highlight kind="normal">  <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>-&gt;setCannotMerge();</Highlight></CodeLine>
<Link id="l01780" /><CodeLine lineNumber="1780"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/groups/arcopt/#ga9c9cf6ad55eb23d77d083a184e416c09">Call</a>;</Highlight></CodeLine>
<Link id="l01781" /><CodeLine lineNumber="1781"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01782" /><CodeLine lineNumber="1782"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01783" /><CodeLine lineNumber="1783" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a0406832b34218bdfd92947d2612f3c3d"><Highlight kind="normal"><a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a0406832b34218bdfd92947d2612f3c3d">AddressSanitizer::createSlowPathCmp</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;AddrLong,</Highlight></CodeLine>
<Link id="l01784" /><CodeLine lineNumber="1784"><Highlight kind="normal">                                           <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowValue,</Highlight></CodeLine>
<Link id="l01785" /><CodeLine lineNumber="1785"><Highlight kind="normal">                                           uint32&#95;t TypeStoreSize) &#123;</Highlight></CodeLine>
<Link id="l01786" /><CodeLine lineNumber="1786"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> Granularity = </Highlight><Highlight kind="keyword">static&#95;cast&lt;</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="keyword">&gt;</Highlight><Highlight kind="normal">(1) &lt;&lt; Mapping.Scale;</Highlight></CodeLine>
<Link id="l01787" /><CodeLine lineNumber="1787"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Addr &amp; (Granularity - 1)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01788" /><CodeLine lineNumber="1788"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;LastAccessedByte =</Highlight></CodeLine>
<Link id="l01789" /><CodeLine lineNumber="1789"><Highlight kind="normal">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(AddrLong, ConstantInt::get(IntptrTy, Granularity - 1));</Highlight></CodeLine>
<Link id="l01790" /><CodeLine lineNumber="1790"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (Addr &amp; (Granularity - 1)) + size - 1</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01791" /><CodeLine lineNumber="1791"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TypeStoreSize / 8 &gt; 1)</Highlight></CodeLine>
<Link id="l01792" /><CodeLine lineNumber="1792"><Highlight kind="normal">    LastAccessedByte = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(</Highlight></CodeLine>
<Link id="l01793" /><CodeLine lineNumber="1793"><Highlight kind="normal">        LastAccessedByte, ConstantInt::get(IntptrTy, TypeStoreSize / 8 - 1));</Highlight></CodeLine>
<Link id="l01794" /><CodeLine lineNumber="1794"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (uint8&#95;t) ((Addr &amp; (Granularity-1)) + size - 1)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01795" /><CodeLine lineNumber="1795"><Highlight kind="normal">  LastAccessedByte =</Highlight></CodeLine>
<Link id="l01796" /><CodeLine lineNumber="1796"><Highlight kind="normal">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(LastAccessedByte, ShadowValue-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>(), </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01797" /><CodeLine lineNumber="1797"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ((uint8&#95;t) ((Addr &amp; (Granularity-1)) + size - 1)) &gt;= ShadowValue</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01798" /><CodeLine lineNumber="1798"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4841d2c05da686940d2c9cc56f0bb348">CreateICmpSGE</a>(LastAccessedByte, ShadowValue);</Highlight></CodeLine>
<Link id="l01799" /><CodeLine lineNumber="1799"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01800" /><CodeLine lineNumber="1800"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01801" /><CodeLine lineNumber="1801" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a548c5b4779101e84af6a92e2548be083"><Highlight kind="normal"><a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a548c5b4779101e84af6a92e2548be083">AddressSanitizer::instrumentAMDGPUAddress</a>(</Highlight></CodeLine>
<Link id="l01802" /><CodeLine lineNumber="1802"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;OrigIns, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</Highlight></CodeLine>
<Link id="l01803" /><CodeLine lineNumber="1803"><Highlight kind="normal">    uint32&#95;t TypeStoreSize, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsWrite, <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument) &#123;</Highlight></CodeLine>
<Link id="l01804" /><CodeLine lineNumber="1804"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Do not instrument unsupported addrspaces.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01805" /><CodeLine lineNumber="1805"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a66fb0770ddf5f596079ee32ca4b8b599">isUnsupportedAMDGPUAddrspace</a>(Addr))</Highlight></CodeLine>
<Link id="l01806" /><CodeLine lineNumber="1806"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01807" /><CodeLine lineNumber="1807"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;PtrTy = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;PointerType&gt;</a>(Addr-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a href="/docs/api/classes/llvm/type/#a7c742b32ebcd73d6dc851afac295b0f2">getScalarType</a>());</Highlight></CodeLine>
<Link id="l01808" /><CodeLine lineNumber="1808"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Follow host instrumentation for global and constant addresses.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01809" /><CodeLine lineNumber="1809"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (PtrTy-&gt;getPointerAddressSpace() != 0)</Highlight></CodeLine>
<Link id="l01810" /><CodeLine lineNumber="1810"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> InsertBefore;</Highlight></CodeLine>
<Link id="l01811" /><CodeLine lineNumber="1811"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Instrument generic addresses in supported addressspaces.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01812" /><CodeLine lineNumber="1812"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(InsertBefore);</Highlight></CodeLine>
<Link id="l01813" /><CodeLine lineNumber="1813"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;IsShared = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(AMDGPUAddressShared, &#123;Addr&#125;);</Highlight></CodeLine>
<Link id="l01814" /><CodeLine lineNumber="1814"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;IsPrivate = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(AMDGPUAddressPrivate, &#123;Addr&#125;);</Highlight></CodeLine>
<Link id="l01815" /><CodeLine lineNumber="1815"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;IsSharedOrPrivate = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab61be8e3cf17e9848aeeeabacfa1b09a">CreateOr</a>(IsShared, IsPrivate);</Highlight></CodeLine>
<Link id="l01816" /><CodeLine lineNumber="1816"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;Cmp = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a89f675aadae7232445c74ee4167ff591">CreateNot</a>(IsSharedOrPrivate);</Highlight></CodeLine>
<Link id="l01817" /><CodeLine lineNumber="1817"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;AddrSpaceZeroLanding =</Highlight></CodeLine>
<Link id="l01818" /><CodeLine lineNumber="1818"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(Cmp, InsertBefore, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01819" /><CodeLine lineNumber="1819"><Highlight kind="normal">  InsertBefore = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;Instruction&gt;</a>(AddrSpaceZeroLanding);</Highlight></CodeLine>
<Link id="l01820" /><CodeLine lineNumber="1820"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> InsertBefore;</Highlight></CodeLine>
<Link id="l01821" /><CodeLine lineNumber="1821"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01822" /><CodeLine lineNumber="1822"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01823" /><CodeLine lineNumber="1823" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#af54e01fb7fd5db7ff76495fcabc90ea1"><Highlight kind="normal"><a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#af54e01fb7fd5db7ff76495fcabc90ea1">AddressSanitizer::genAMDGPUReportBlock</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</Highlight></CodeLine>
<Link id="l01824" /><CodeLine lineNumber="1824"><Highlight kind="normal">                                                    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> Recover) &#123;</Highlight></CodeLine>
<Link id="l01825" /><CodeLine lineNumber="1825"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/module">Module</a> &amp;M = &#42;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a60a6d6c205f483fa96597a960f3c093b">GetInsertBlock</a>()-&gt;<a href="/docs/api/classes/llvm/basicblock/#afc70e919c88c86159cc94cea29b6c210">getModule</a>();</Highlight></CodeLine>
<Link id="l01826" /><CodeLine lineNumber="1826"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;ReportCond = <a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>;</Highlight></CodeLine>
<Link id="l01827" /><CodeLine lineNumber="1827"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Recover) &#123;</Highlight></CodeLine>
<Link id="l01828" /><CodeLine lineNumber="1828"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> Ballot = M.getOrInsertFunction(<a href="#ae7f00801ef2ef87699661f1dca513b52">kAMDGPUBallotName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(),</Highlight></CodeLine>
<Link id="l01829" /><CodeLine lineNumber="1829"><Highlight kind="normal">                                        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1fb6e8365dbf4ef3a7426ff3d531ff87">getInt1Ty</a>());</Highlight></CodeLine>
<Link id="l01830" /><CodeLine lineNumber="1830"><Highlight kind="normal">    ReportCond = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aafd864f39fd28e235eea03ae424ab8e0">CreateIsNotNull</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(Ballot, &#123;Cond&#125;));</Highlight></CodeLine>
<Link id="l01831" /><CodeLine lineNumber="1831"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01832" /><CodeLine lineNumber="1832"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01833" /><CodeLine lineNumber="1833"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;Trm =</Highlight></CodeLine>
<Link id="l01834" /><CodeLine lineNumber="1834"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(ReportCond, &amp;&#42;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a4e5c1b91bf5e2860398e3fa35c96b5af">GetInsertPoint</a>(), </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l01835" /><CodeLine lineNumber="1835"><Highlight kind="normal">                                <a href="/docs/api/classes/llvm/mdbuilder">MDBuilder</a>(&#42;C).<a href="/docs/api/classes/llvm/mdbuilder/#ae609aeb09c2b1c9f03fb90228654b281">createUnlikelyBranchWeights</a>());</Highlight></CodeLine>
<Link id="l01836" /><CodeLine lineNumber="1836"><Highlight kind="normal">  Trm-&gt;getParent()-&gt;setName(</Highlight><Highlight kind="stringliteral">&quot;asan.report&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01837" /><CodeLine lineNumber="1837"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01838" /><CodeLine lineNumber="1838"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Recover)</Highlight></CodeLine>
<Link id="l01839" /><CodeLine lineNumber="1839"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> Trm;</Highlight></CodeLine>
<Link id="l01840" /><CodeLine lineNumber="1840"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01841" /><CodeLine lineNumber="1841"><Highlight kind="normal">  Trm = <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, Trm, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01842" /><CodeLine lineNumber="1842"><Highlight kind="normal">  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(Trm);</Highlight></CodeLine>
<Link id="l01843" /><CodeLine lineNumber="1843"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(</Highlight></CodeLine>
<Link id="l01844" /><CodeLine lineNumber="1844"><Highlight kind="normal">      M.getOrInsertFunction(<a href="#a0942316ad508b030eec9f8ac3104b964">kAMDGPUUnreachableName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>()), &#123;&#125;);</Highlight></CodeLine>
<Link id="l01845" /><CodeLine lineNumber="1845"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01846" /><CodeLine lineNumber="1846"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01847" /><CodeLine lineNumber="1847" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a9b79beccbeb33ff89c797f5ac7b3fce3"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a9b79beccbeb33ff89c797f5ac7b3fce3">AddressSanitizer::instrumentAddress</a>(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;OrigIns,</Highlight></CodeLine>
<Link id="l01848" /><CodeLine lineNumber="1848"><Highlight kind="normal">                                         <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</Highlight></CodeLine>
<Link id="l01849" /><CodeLine lineNumber="1849"><Highlight kind="normal">                                         <a href="/docs/api/structs/llvm/maybealign">MaybeAlign</a> Alignment,</Highlight></CodeLine>
<Link id="l01850" /><CodeLine lineNumber="1850"><Highlight kind="normal">                                         uint32&#95;t TypeStoreSize, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsWrite,</Highlight></CodeLine>
<Link id="l01851" /><CodeLine lineNumber="1851"><Highlight kind="normal">                                         <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseCalls,</Highlight></CodeLine>
<Link id="l01852" /><CodeLine lineNumber="1852"><Highlight kind="normal">                                         uint32&#95;t Exp,</Highlight></CodeLine>
<Link id="l01853" /><CodeLine lineNumber="1853"><Highlight kind="normal">                                         <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI) &#123;</Highlight></CodeLine>
<Link id="l01854" /><CodeLine lineNumber="1854"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TargetTriple.isAMDGPU()) &#123;</Highlight></CodeLine>
<Link id="l01855" /><CodeLine lineNumber="1855"><Highlight kind="normal">    InsertBefore = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a548c5b4779101e84af6a92e2548be083">instrumentAMDGPUAddress</a>(OrigIns, InsertBefore, Addr,</Highlight></CodeLine>
<Link id="l01856" /><CodeLine lineNumber="1856"><Highlight kind="normal">                                           TypeStoreSize, IsWrite, SizeArgument);</Highlight></CodeLine>
<Link id="l01857" /><CodeLine lineNumber="1857"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!InsertBefore)</Highlight></CodeLine>
<Link id="l01858" /><CodeLine lineNumber="1858"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01859" /><CodeLine lineNumber="1859"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01860" /><CodeLine lineNumber="1860"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01861" /><CodeLine lineNumber="1861"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/instrumentationirbuilder">InstrumentationIRBuilder</a> IRB(InsertBefore);</Highlight></CodeLine>
<Link id="l01862" /><CodeLine lineNumber="1862"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> AccessSizeIndex = <a href="#adcdff5e32d9b4d801f187d48b106e579">TypeStoreSizeToSizeIndex</a>(TypeStoreSize);</Highlight></CodeLine>
<Link id="l01863" /><CodeLine lineNumber="1863"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01864" /><CodeLine lineNumber="1864"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UseCalls &amp;&amp; <a href="#a53fdfe303964c0943c25d294cd1cf193">ClOptimizeCallbacks</a>) &#123;</Highlight></CodeLine>
<Link id="l01865" /><CodeLine lineNumber="1865"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/asanaccessinfo">ASanAccessInfo</a> AccessInfo(IsWrite, CompileKernel, AccessSizeIndex);</Highlight></CodeLine>
<Link id="l01866" /><CodeLine lineNumber="1866"><Highlight kind="normal">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a80eec4efbded89b11092babf42a65b82">CreateIntrinsic</a>(Intrinsic::asan&#95;check&#95;memaccess, &#123;&#125;,</Highlight></CodeLine>
<Link id="l01867" /><CodeLine lineNumber="1867"><Highlight kind="normal">                        &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(Addr, PtrTy),</Highlight></CodeLine>
<Link id="l01868" /><CodeLine lineNumber="1868"><Highlight kind="normal">                         ConstantInt::get(Int32Ty, AccessInfo.<a href="/docs/api/structs/llvm/asanaccessinfo/#ac266711cabbe76782e3e68d0ad07f120">Packed</a>)&#125;);</Highlight></CodeLine>
<Link id="l01869" /><CodeLine lineNumber="1869"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01870" /><CodeLine lineNumber="1870"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01871" /><CodeLine lineNumber="1871"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01872" /><CodeLine lineNumber="1872"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;AddrLong = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(Addr, IntptrTy);</Highlight></CodeLine>
<Link id="l01873" /><CodeLine lineNumber="1873"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UseCalls) &#123;</Highlight></CodeLine>
<Link id="l01874" /><CodeLine lineNumber="1874"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Exp == 0)</Highlight></CodeLine>
<Link id="l01875" /><CodeLine lineNumber="1875"><Highlight kind="normal">      RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(</Highlight></CodeLine>
<Link id="l01876" /><CodeLine lineNumber="1876"><Highlight kind="normal">          IRB, AsanMemoryAccessCallback&#91;IsWrite&#93;&#91;0&#93;&#91;AccessSizeIndex&#93;, AddrLong);</Highlight></CodeLine>
<Link id="l01877" /><CodeLine lineNumber="1877"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01878" /><CodeLine lineNumber="1878"><Highlight kind="normal">      RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(</Highlight></CodeLine>
<Link id="l01879" /><CodeLine lineNumber="1879"><Highlight kind="normal">          IRB, AsanMemoryAccessCallback&#91;IsWrite&#93;&#91;1&#93;&#91;AccessSizeIndex&#93;,</Highlight></CodeLine>
<Link id="l01880" /><CodeLine lineNumber="1880"><Highlight kind="normal">          &#123;AddrLong, ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), Exp)&#125;);</Highlight></CodeLine>
<Link id="l01881" /><CodeLine lineNumber="1881"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01882" /><CodeLine lineNumber="1882"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01883" /><CodeLine lineNumber="1883"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01884" /><CodeLine lineNumber="1884"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowTy =</Highlight></CodeLine>
<Link id="l01885" /><CodeLine lineNumber="1885"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/integertype/#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(&#42;C, std::max(8U, TypeStoreSize &gt;&gt; Mapping.Scale));</Highlight></CodeLine>
<Link id="l01886" /><CodeLine lineNumber="1886"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;ShadowPtrTy = <a href="/docs/api/classes/llvm/pointertype/#a8d7f800be5fd53dcfcdcbdc6fd9ccfe3">PointerType::get</a>(&#42;C, 0);</Highlight></CodeLine>
<Link id="l01887" /><CodeLine lineNumber="1887"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowPtr = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a220cbee431faba18cde250a8c23a9409">memToShadow</a>(AddrLong, IRB);</Highlight></CodeLine>
<Link id="l01888" /><CodeLine lineNumber="1888"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t ShadowAlign =</Highlight></CodeLine>
<Link id="l01889" /><CodeLine lineNumber="1889"><Highlight kind="normal">      std::max&lt;uint64&#95;t&gt;(Alignment.<a href="/docs/api/structs/llvm/maybealign/#a06846474be3ab85f8d30c388faf3b116">valueOrOne</a>().<a href="/docs/api/structs/llvm/align/#a80735739b49cf97a491922c8f9af2cc1">value</a>() &gt;&gt; Mapping.Scale, 1);</Highlight></CodeLine>
<Link id="l01890" /><CodeLine lineNumber="1890"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowValue = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3313ae2d314fb689cebdaf062d86eec5">CreateAlignedLoad</a>(</Highlight></CodeLine>
<Link id="l01891" /><CodeLine lineNumber="1891"><Highlight kind="normal">      ShadowTy, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(ShadowPtr, ShadowPtrTy), <a href="/docs/api/structs/llvm/align">Align</a>(ShadowAlign));</Highlight></CodeLine>
<Link id="l01892" /><CodeLine lineNumber="1892"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01893" /><CodeLine lineNumber="1893"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;Cmp = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aafd864f39fd28e235eea03ae424ab8e0">CreateIsNotNull</a>(ShadowValue);</Highlight></CodeLine>
<Link id="l01894" /><CodeLine lineNumber="1894"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> Granularity = 1ULL &lt;&lt; Mapping.Scale;</Highlight></CodeLine>
<Link id="l01895" /><CodeLine lineNumber="1895"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;CrashTerm = </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01896" /><CodeLine lineNumber="1896"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01897" /><CodeLine lineNumber="1897"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> GenSlowPath = (<a href="#acfc2efa648ba005caa42cf6f28d82757">ClAlwaysSlowPath</a> || (TypeStoreSize &lt; 8 &#42; Granularity));</Highlight></CodeLine>
<Link id="l01898" /><CodeLine lineNumber="1898"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01899" /><CodeLine lineNumber="1899"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TargetTriple.isAMDGCN()) &#123;</Highlight></CodeLine>
<Link id="l01900" /><CodeLine lineNumber="1900"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (GenSlowPath) &#123;</Highlight></CodeLine>
<Link id="l01901" /><CodeLine lineNumber="1901"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;Cmp2 = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a0406832b34218bdfd92947d2612f3c3d">createSlowPathCmp</a>(IRB, AddrLong, ShadowValue, TypeStoreSize);</Highlight></CodeLine>
<Link id="l01902" /><CodeLine lineNumber="1902"><Highlight kind="normal">      Cmp = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(Cmp, Cmp2);</Highlight></CodeLine>
<Link id="l01903" /><CodeLine lineNumber="1903"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01904" /><CodeLine lineNumber="1904"><Highlight kind="normal">    CrashTerm = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#af54e01fb7fd5db7ff76495fcabc90ea1">genAMDGPUReportBlock</a>(IRB, Cmp, Recover);</Highlight></CodeLine>
<Link id="l01905" /><CodeLine lineNumber="1905"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (GenSlowPath) &#123;</Highlight></CodeLine>
<Link id="l01906" /><CodeLine lineNumber="1906"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We use branch weights for the slow path check, to indicate that the slow</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01907" /><CodeLine lineNumber="1907"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// path is rarely taken. This seems to be the case for SPEC benchmarks.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01908" /><CodeLine lineNumber="1908"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;CheckTerm = <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(</Highlight></CodeLine>
<Link id="l01909" /><CodeLine lineNumber="1909"><Highlight kind="normal">        Cmp, InsertBefore, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, <a href="/docs/api/classes/llvm/mdbuilder">MDBuilder</a>(&#42;C).<a href="/docs/api/classes/llvm/mdbuilder/#ae609aeb09c2b1c9f03fb90228654b281">createUnlikelyBranchWeights</a>());</Highlight></CodeLine>
<Link id="l01910" /><CodeLine lineNumber="1910"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;BranchInst&gt;</a>(CheckTerm)-&gt;isUnconditional());</Highlight></CodeLine>
<Link id="l01911" /><CodeLine lineNumber="1911"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;NextBB = CheckTerm-&gt;<a href="/docs/api/classes/llvm/instruction/#a6e5d2e18c81baaeec7dadc81a0dea993">getSuccessor</a>(0);</Highlight></CodeLine>
<Link id="l01912" /><CodeLine lineNumber="1912"><Highlight kind="normal">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(CheckTerm);</Highlight></CodeLine>
<Link id="l01913" /><CodeLine lineNumber="1913"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Cmp2 = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a0406832b34218bdfd92947d2612f3c3d">createSlowPathCmp</a>(IRB, AddrLong, ShadowValue, TypeStoreSize);</Highlight></CodeLine>
<Link id="l01914" /><CodeLine lineNumber="1914"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Recover) &#123;</Highlight></CodeLine>
<Link id="l01915" /><CodeLine lineNumber="1915"><Highlight kind="normal">      CrashTerm = <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(Cmp2, CheckTerm, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01916" /><CodeLine lineNumber="1916"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01917" /><CodeLine lineNumber="1917"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;CrashBlock =</Highlight></CodeLine>
<Link id="l01918" /><CodeLine lineNumber="1918"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/basicblock/#a4a5b798214be930cf8e133c032ba0129">BasicBlock::Create</a>(&#42;C, </Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">, NextBB-&gt;<a href="/docs/api/classes/llvm/basicblock/#a1b4bf7c97cdc8159fd73d48063f0b250">getParent</a>(), NextBB);</Highlight></CodeLine>
<Link id="l01919" /><CodeLine lineNumber="1919"><Highlight kind="normal">      CrashTerm = </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/unreachableinst">UnreachableInst</a>(&#42;C, CrashBlock);</Highlight></CodeLine>
<Link id="l01920" /><CodeLine lineNumber="1920"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/branchinst">BranchInst</a> &#42;NewTerm = <a href="/docs/api/classes/llvm/branchinst/#a9f40e42226cee617c16cb1c447b115c5">BranchInst::Create</a>(CrashBlock, NextBB, Cmp2);</Highlight></CodeLine>
<Link id="l01921" /><CodeLine lineNumber="1921"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a016a85f7487f995fe80141e102a7a5ae">ReplaceInstWithInst</a>(CheckTerm, NewTerm);</Highlight></CodeLine>
<Link id="l01922" /><CodeLine lineNumber="1922"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l01923" /><CodeLine lineNumber="1923"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01924" /><CodeLine lineNumber="1924"><Highlight kind="normal">    CrashTerm = <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(Cmp, InsertBefore, !Recover);</Highlight></CodeLine>
<Link id="l01925" /><CodeLine lineNumber="1925"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01926" /><CodeLine lineNumber="1926"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01927" /><CodeLine lineNumber="1927"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Crash = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a67ce284f582c0557f843076f92ab7fd6">generateCrashCode</a>(</Highlight></CodeLine>
<Link id="l01928" /><CodeLine lineNumber="1928"><Highlight kind="normal">      CrashTerm, AddrLong, IsWrite, AccessSizeIndex, SizeArgument, Exp, RTCI);</Highlight></CodeLine>
<Link id="l01929" /><CodeLine lineNumber="1929"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (OrigIns-&gt;<a href="/docs/api/classes/llvm/instruction/#a4b8faae4ff9e7434a1d226d03d15dcd2">getDebugLoc</a>())</Highlight></CodeLine>
<Link id="l01930" /><CodeLine lineNumber="1930"><Highlight kind="normal">    Crash-&gt;<a href="/docs/api/classes/llvm/instruction/#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(OrigIns-&gt;<a href="/docs/api/classes/llvm/instruction/#a4b8faae4ff9e7434a1d226d03d15dcd2">getDebugLoc</a>());</Highlight></CodeLine>
<Link id="l01931" /><CodeLine lineNumber="1931"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01932" /><CodeLine lineNumber="1932"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01933" /><CodeLine lineNumber="1933"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Instrument unusual size or unusual alignment.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01934" /><CodeLine lineNumber="1934"><Highlight kind="normal"></Highlight><Highlight kind="comment">// We can not do it with a single check, so we do 1-byte check for the first</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01935" /><CodeLine lineNumber="1935"><Highlight kind="normal"></Highlight><Highlight kind="comment">// and the last bytes. We call &#95;&#95;asan&#95;report&#95;&#42;&#95;n(addr, real&#95;size) to be able</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01936" /><CodeLine lineNumber="1936"><Highlight kind="normal"></Highlight><Highlight kind="comment">// to report the actual access size.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01937" /><CodeLine lineNumber="1937" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ac6119f1988ee2e260e58defc26361639"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ac6119f1988ee2e260e58defc26361639">AddressSanitizer::instrumentUnusualSizeOrAlignment</a>(</Highlight></CodeLine>
<Link id="l01938" /><CodeLine lineNumber="1938"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsertBefore, <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr,</Highlight></CodeLine>
<Link id="l01939" /><CodeLine lineNumber="1939"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/typesize">TypeSize</a> TypeStoreSize, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsWrite, <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArgument, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseCalls,</Highlight></CodeLine>
<Link id="l01940" /><CodeLine lineNumber="1940"><Highlight kind="normal">    uint32&#95;t Exp, <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> &amp;RTCI) &#123;</Highlight></CodeLine>
<Link id="l01941" /><CodeLine lineNumber="1941"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/instrumentationirbuilder">InstrumentationIRBuilder</a> IRB(InsertBefore);</Highlight></CodeLine>
<Link id="l01942" /><CodeLine lineNumber="1942"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;NumBits = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a55086d93549de64322f4d3e8f5dd4883">CreateTypeSize</a>(IntptrTy, TypeStoreSize);</Highlight></CodeLine>
<Link id="l01943" /><CodeLine lineNumber="1943"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5849d19e500f8c6713ec44889058f424">CreateLShr</a>(NumBits, ConstantInt::get(IntptrTy, 3));</Highlight></CodeLine>
<Link id="l01944" /><CodeLine lineNumber="1944"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01945" /><CodeLine lineNumber="1945"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;AddrLong = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(Addr, IntptrTy);</Highlight></CodeLine>
<Link id="l01946" /><CodeLine lineNumber="1946"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UseCalls) &#123;</Highlight></CodeLine>
<Link id="l01947" /><CodeLine lineNumber="1947"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Exp == 0)</Highlight></CodeLine>
<Link id="l01948" /><CodeLine lineNumber="1948"><Highlight kind="normal">      RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(IRB, AsanMemoryAccessCallbackSized&#91;IsWrite&#93;&#91;0&#93;,</Highlight></CodeLine>
<Link id="l01949" /><CodeLine lineNumber="1949"><Highlight kind="normal">                             &#123;AddrLong, <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>&#125;);</Highlight></CodeLine>
<Link id="l01950" /><CodeLine lineNumber="1950"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01951" /><CodeLine lineNumber="1951"><Highlight kind="normal">      RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(</Highlight></CodeLine>
<Link id="l01952" /><CodeLine lineNumber="1952"><Highlight kind="normal">          IRB, AsanMemoryAccessCallbackSized&#91;IsWrite&#93;&#91;1&#93;,</Highlight></CodeLine>
<Link id="l01953" /><CodeLine lineNumber="1953"><Highlight kind="normal">          &#123;AddrLong, <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), Exp)&#125;);</Highlight></CodeLine>
<Link id="l01954" /><CodeLine lineNumber="1954"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l01955" /><CodeLine lineNumber="1955"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeMinusOne = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a92c83e803f2cf22906da0aaec44ff6d7">CreateSub</a>(<a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, ConstantInt::get(IntptrTy, 1));</Highlight></CodeLine>
<Link id="l01956" /><CodeLine lineNumber="1956"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;LastByte = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</Highlight></CodeLine>
<Link id="l01957" /><CodeLine lineNumber="1957"><Highlight kind="normal">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(AddrLong, SizeMinusOne),</Highlight></CodeLine>
<Link id="l01958" /><CodeLine lineNumber="1958"><Highlight kind="normal">        Addr-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</Highlight></CodeLine>
<Link id="l01959" /><CodeLine lineNumber="1959"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a9b79beccbeb33ff89c797f5ac7b3fce3">instrumentAddress</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, InsertBefore, Addr, &#123;&#125;, 8, IsWrite, <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, Exp,</Highlight></CodeLine>
<Link id="l01960" /><CodeLine lineNumber="1960"><Highlight kind="normal">                      RTCI);</Highlight></CodeLine>
<Link id="l01961" /><CodeLine lineNumber="1961"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a9b79beccbeb33ff89c797f5ac7b3fce3">instrumentAddress</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>, InsertBefore, LastByte, &#123;&#125;, 8, IsWrite, <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l01962" /><CodeLine lineNumber="1962"><Highlight kind="normal">                      Exp, RTCI);</Highlight></CodeLine>
<Link id="l01963" /><CodeLine lineNumber="1963"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l01964" /><CodeLine lineNumber="1964"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01965" /><CodeLine lineNumber="1965"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01966" /><CodeLine lineNumber="1966"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> ModuleAddressSanitizer::poisonOneInitializer(<a href="/docs/api/classes/llvm/function">Function</a> &amp;GlobalInit) &#123;</Highlight></CodeLine>
<Link id="l01967" /><CodeLine lineNumber="1967"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Set up the arguments to our poison/unpoison functions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01968" /><CodeLine lineNumber="1968"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;GlobalInit.<a href="/docs/api/classes/llvm/function/#a3ec0b920bf30d0e15bace383192691da">front</a>(),</Highlight></CodeLine>
<Link id="l01969" /><CodeLine lineNumber="1969"><Highlight kind="normal">                  GlobalInit.<a href="/docs/api/classes/llvm/function/#a3ec0b920bf30d0e15bace383192691da">front</a>().<a href="/docs/api/classes/llvm/basicblock/#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</Highlight></CodeLine>
<Link id="l01970" /><CodeLine lineNumber="1970"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01971" /><CodeLine lineNumber="1971"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Add a call to poison all external globals before the given function starts.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01972" /><CodeLine lineNumber="1972"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;ModuleNameAddr =</Highlight></CodeLine>
<Link id="l01973" /><CodeLine lineNumber="1973"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/constantexpr/#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(getOrCreateModuleName(), IntptrTy);</Highlight></CodeLine>
<Link id="l01974" /><CodeLine lineNumber="1974"><Highlight kind="normal">  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(AsanPoisonGlobals, ModuleNameAddr);</Highlight></CodeLine>
<Link id="l01975" /><CodeLine lineNumber="1975"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01976" /><CodeLine lineNumber="1976"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Add calls to unpoison all globals before each return instruction.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01977" /><CodeLine lineNumber="1977"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;BB : GlobalInit)</Highlight></CodeLine>
<Link id="l01978" /><CodeLine lineNumber="1978"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/returninst">ReturnInst</a> &#42;RI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ReturnInst&gt;</a>(BB.getTerminator()))</Highlight></CodeLine>
<Link id="l01979" /><CodeLine lineNumber="1979"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/callinst/#aa04721251be00370fbde6d21f47fed1a">CallInst::Create</a>(AsanUnpoisonGlobals, </Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">, RI-&gt;getIterator());</Highlight></CodeLine>
<Link id="l01980" /><CodeLine lineNumber="1980"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l01981" /><CodeLine lineNumber="1981"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01982" /><CodeLine lineNumber="1982"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> ModuleAddressSanitizer::createInitializerPoisonCalls() &#123;</Highlight></CodeLine>
<Link id="l01983" /><CodeLine lineNumber="1983"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;GV = M.getGlobalVariable(</Highlight><Highlight kind="stringliteral">&quot;llvm.global&#95;ctors&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l01984" /><CodeLine lineNumber="1984"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!GV)</Highlight></CodeLine>
<Link id="l01985" /><CodeLine lineNumber="1985"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01986" /><CodeLine lineNumber="1986"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01987" /><CodeLine lineNumber="1987"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/constantarray">ConstantArray</a> &#42;CA = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantArray&gt;</a>(GV-&gt;<a href="/docs/api/classes/llvm/globalvariable/#a0698d5bcabbfbca4f56a9d7a81cecb25">getInitializer</a>());</Highlight></CodeLine>
<Link id="l01988" /><CodeLine lineNumber="1988"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!CA)</Highlight></CodeLine>
<Link id="l01989" /><CodeLine lineNumber="1989"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01990" /><CodeLine lineNumber="1990"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01991" /><CodeLine lineNumber="1991"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/use">Use</a> &amp;<a href="/docs/api/files/include/include/llvm/include/llvm/sandboxir/instruction-h/#a0b0cd724f4b7f8589a602b17d6caa1fb">OP</a> : CA-&gt;<a href="/docs/api/classes/llvm/user/#a0b931781aa589c6ebe64a76c1447e5b2">operands</a>()) &#123;</Highlight></CodeLine>
<Link id="l01992" /><CodeLine lineNumber="1992"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;ConstantAggregateZero&gt;</a>(<a href="/docs/api/files/include/include/llvm/include/llvm/sandboxir/instruction-h/#a0b0cd724f4b7f8589a602b17d6caa1fb">OP</a>)) </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01993" /><CodeLine lineNumber="1993"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/constantstruct">ConstantStruct</a> &#42;CS = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantStruct&gt;</a>(<a href="/docs/api/files/include/include/llvm/include/llvm/sandboxir/instruction-h/#a0b0cd724f4b7f8589a602b17d6caa1fb">OP</a>);</Highlight></CodeLine>
<Link id="l01994" /><CodeLine lineNumber="1994"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01995" /><CodeLine lineNumber="1995"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Must have a function or null ptr.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l01996" /><CodeLine lineNumber="1996"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/function">Function</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;Function&gt;</a>(CS-&gt;<a href="/docs/api/classes/llvm/user/#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(1))) &#123;</Highlight></CodeLine>
<Link id="l01997" /><CodeLine lineNumber="1997"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName() == <a href="#aad3e6eabecd50c9664b21071407c2267">kAsanModuleCtorName</a>) </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l01998" /><CodeLine lineNumber="1998"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;Priority = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;ConstantInt&gt;</a>(CS-&gt;<a href="/docs/api/classes/llvm/user/#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(0));</Highlight></CodeLine>
<Link id="l01999" /><CodeLine lineNumber="1999"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Don&#39;t instrument CTORs that will run before asan.module&#95;ctor.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02000" /><CodeLine lineNumber="2000"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Priority-&gt;getLimitedValue() &lt;= <a href="#a30ad890949cdfd6777919b71f4d09dfe">GetCtorAndDtorPriority</a>(TargetTriple))</Highlight></CodeLine>
<Link id="l02001" /><CodeLine lineNumber="2001"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02002" /><CodeLine lineNumber="2002"><Highlight kind="normal">      poisonOneInitializer(&#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</Highlight></CodeLine>
<Link id="l02003" /><CodeLine lineNumber="2003"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02004" /><CodeLine lineNumber="2004"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02005" /><CodeLine lineNumber="2005"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02006" /><CodeLine lineNumber="2006"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02007" /><CodeLine lineNumber="2007"><Highlight kind="normal"></Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;</Highlight></CodeLine>
<Link id="l02008" /><CodeLine lineNumber="2008"><Highlight kind="normal">ModuleAddressSanitizer::getExcludedAliasedGlobal(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/globalalias">GlobalAlias</a> &amp;GA)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l02009" /><CodeLine lineNumber="2009"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// In case this function should be expanded to include rules that do not just</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02010" /><CodeLine lineNumber="2010"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// apply when CompileKernel is true, either guard all existing rules with an</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02011" /><CodeLine lineNumber="2011"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// &#39;if (CompileKernel) &#123; ... &#125;&#39; or be absolutely sure that all these rules</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02012" /><CodeLine lineNumber="2012"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// should also apply to user space.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02013" /><CodeLine lineNumber="2013"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CompileKernel &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;Only expecting to be called when compiling kernel&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02014" /><CodeLine lineNumber="2014"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02015" /><CodeLine lineNumber="2015"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = GA.<a href="/docs/api/classes/llvm/globalalias/#a7666cc7bd9294c7ae9992c41c591e08b">getAliasee</a>();</Highlight></CodeLine>
<Link id="l02016" /><CodeLine lineNumber="2016"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02017" /><CodeLine lineNumber="2017"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// When compiling the kernel, globals that are aliased by symbols prefixed</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02018" /><CodeLine lineNumber="2018"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// by &quot;&#95;&#95;&quot; are special and cannot be padded with a redzone.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02019" /><CodeLine lineNumber="2019"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (GA.<a href="/docs/api/classes/llvm/value/#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>().<a href="/docs/api/classes/llvm/stringref/#a2cd8968ff703aaeb395dcd63f6805ff1">starts&#95;with</a>(</Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;&quot;</Highlight><Highlight kind="normal">))</Highlight></CodeLine>
<Link id="l02020" /><CodeLine lineNumber="2020"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;GlobalVariable&gt;</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;stripPointerCastsAndAliases());</Highlight></CodeLine>
<Link id="l02021" /><CodeLine lineNumber="2021"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02022" /><CodeLine lineNumber="2022"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02023" /><CodeLine lineNumber="2023"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02024" /><CodeLine lineNumber="2024"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02025" /><CodeLine lineNumber="2025"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> ModuleAddressSanitizer::shouldInstrumentGlobal(<a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l02026" /><CodeLine lineNumber="2026"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getValueType();</Highlight></CodeLine>
<Link id="l02027" /><CodeLine lineNumber="2027"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;GLOBAL: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02028" /><CodeLine lineNumber="2028"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02029" /><CodeLine lineNumber="2029"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasSanitizerMetadata() &amp;&amp; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getSanitizerMetadata().NoAddress)</Highlight></CodeLine>
<Link id="l02030" /><CodeLine lineNumber="2030"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02031" /><CodeLine lineNumber="2031"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Ty-&gt;<a href="/docs/api/classes/llvm/type/#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>()) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02032" /><CodeLine lineNumber="2032"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasInitializer()) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02033" /><CodeLine lineNumber="2033"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Globals in address space 1 and 4 are supported for AMDGPU.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02034" /><CodeLine lineNumber="2034"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getAddressSpace() &amp;&amp;</Highlight></CodeLine>
<Link id="l02035" /><CodeLine lineNumber="2035"><Highlight kind="normal">      !(TargetTriple.isAMDGPU() &amp;&amp; !<a href="#a66fb0770ddf5f596079ee32ca4b8b599">isUnsupportedAMDGPUAddrspace</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>)))</Highlight></CodeLine>
<Link id="l02036" /><CodeLine lineNumber="2036"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02037" /><CodeLine lineNumber="2037"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a74f90b5c14043cd0038dc90723eab4c2">GlobalWasGeneratedByCompiler</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>)) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">; </Highlight><Highlight kind="comment">// Our own globals.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02038" /><CodeLine lineNumber="2038"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Two problems with thread-locals:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02039" /><CodeLine lineNumber="2039"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   - The address of the main thread&#39;s copy can&#39;t be computed at link-time.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02040" /><CodeLine lineNumber="2040"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   - Need to poison all copies, not just the main thread&#39;s one.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02041" /><CodeLine lineNumber="2041"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;isThreadLocal()) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02042" /><CodeLine lineNumber="2042"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For now, just ignore this Global if the alignment is large.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02043" /><CodeLine lineNumber="2043"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getAlign() &amp;&amp; &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getAlign() &gt; getMinRedzoneSizeForGlobal()) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02044" /><CodeLine lineNumber="2044"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02045" /><CodeLine lineNumber="2045"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For non-COFF targets, only instrument globals known to be defined by this</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02046" /><CodeLine lineNumber="2046"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// TU.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02047" /><CodeLine lineNumber="2047"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// FIXME: We can instrument comdat globals on ELF if we are using the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02048" /><CodeLine lineNumber="2048"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// GC-friendly metadata scheme.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02049" /><CodeLine lineNumber="2049"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!TargetTriple.isOSBinFormatCOFF()) &#123;</Highlight></CodeLine>
<Link id="l02050" /><CodeLine lineNumber="2050"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasExactDefinition() || <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasComdat())</Highlight></CodeLine>
<Link id="l02051" /><CodeLine lineNumber="2051"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02052" /><CodeLine lineNumber="2052"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02053" /><CodeLine lineNumber="2053"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// On COFF, don&#39;t instrument non-ODR linkages.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02054" /><CodeLine lineNumber="2054"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;isInterposable())</Highlight></CodeLine>
<Link id="l02055" /><CodeLine lineNumber="2055"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02056" /><CodeLine lineNumber="2056"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// If the global has AvailableExternally linkage, then it is not in this</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02057" /><CodeLine lineNumber="2057"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// module, which means it does not need to be instrumented.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02058" /><CodeLine lineNumber="2058"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasAvailableExternallyLinkage())</Highlight></CodeLine>
<Link id="l02059" /><CodeLine lineNumber="2059"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02060" /><CodeLine lineNumber="2060"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02061" /><CodeLine lineNumber="2061"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02062" /><CodeLine lineNumber="2062"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If a comdat is present, it must have a selection kind that implies ODR</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02063" /><CodeLine lineNumber="2063"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// semantics: no duplicates, any, or exact match.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02064" /><CodeLine lineNumber="2064"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/comdat">Comdat</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getComdat()) &#123;</Highlight></CodeLine>
<Link id="l02065" /><CodeLine lineNumber="2065"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;getSelectionKind()) &#123;</Highlight></CodeLine>
<Link id="l02066" /><CodeLine lineNumber="2066"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/comdat/#ab40cbf8243fad70968f9ecf82f48a035a8c4ae4df3d085db275a58182612ff3be">Comdat::Any</a>:</Highlight></CodeLine>
<Link id="l02067" /><CodeLine lineNumber="2067"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/comdat/#ab40cbf8243fad70968f9ecf82f48a035acceb065ea69a5e06e80bd6ceddd7b9a7">Comdat::ExactMatch</a>:</Highlight></CodeLine>
<Link id="l02068" /><CodeLine lineNumber="2068"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/comdat/#ab40cbf8243fad70968f9ecf82f48a035ab2d0d4bc9ba11b7324f5ffc20a9dc37a">Comdat::NoDeduplicate</a>:</Highlight></CodeLine>
<Link id="l02069" /><CodeLine lineNumber="2069"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02070" /><CodeLine lineNumber="2070"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/comdat/#ab40cbf8243fad70968f9ecf82f48a035a2444b05a47619decc80c2ce0cc224dc8">Comdat::Largest</a>:</Highlight></CodeLine>
<Link id="l02071" /><CodeLine lineNumber="2071"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/comdat/#ab40cbf8243fad70968f9ecf82f48a035a8b148d3d05688ddb23b7abb81527b7ce">Comdat::SameSize</a>:</Highlight></CodeLine>
<Link id="l02072" /><CodeLine lineNumber="2072"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02073" /><CodeLine lineNumber="2073"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02074" /><CodeLine lineNumber="2074"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02075" /><CodeLine lineNumber="2075"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02076" /><CodeLine lineNumber="2076"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasSection()) &#123;</Highlight></CodeLine>
<Link id="l02077" /><CodeLine lineNumber="2077"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The kernel uses explicit sections for mostly special global variables</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02078" /><CodeLine lineNumber="2078"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// that we should not instrument. E.g. the kernel may rely on their layout</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02079" /><CodeLine lineNumber="2079"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// without redzones, or remove them at link time (&quot;discard.&#42;&quot;), etc.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02080" /><CodeLine lineNumber="2080"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CompileKernel)</Highlight></CodeLine>
<Link id="l02081" /><CodeLine lineNumber="2081"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02082" /><CodeLine lineNumber="2082"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02083" /><CodeLine lineNumber="2083"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/stringref">StringRef</a> <a href="/docs/api/namespaces/llvm/armbuildattrs/#aea10ca6bf098a425d51ac7fe65d30ed6a69c8a3bdf3f5753779a342f0cd97c090">Section</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getSection();</Highlight></CodeLine>
<Link id="l02084" /><CodeLine lineNumber="2084"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02085" /><CodeLine lineNumber="2085"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Globals from llvm.metadata aren&#39;t emitted, do not instrument them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02086" /><CodeLine lineNumber="2086"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Section == </Highlight><Highlight kind="stringliteral">&quot;llvm.metadata&quot;</Highlight><Highlight kind="normal">) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02087" /><CodeLine lineNumber="2087"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Do not instrument globals from special LLVM sections.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02088" /><CodeLine lineNumber="2088"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/armbuildattrs/#aea10ca6bf098a425d51ac7fe65d30ed6a69c8a3bdf3f5753779a342f0cd97c090">Section</a>.contains(</Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;llvm&quot;</Highlight><Highlight kind="normal">) || <a href="/docs/api/namespaces/llvm/armbuildattrs/#aea10ca6bf098a425d51ac7fe65d30ed6a69c8a3bdf3f5753779a342f0cd97c090">Section</a>.contains(</Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;LLVM&quot;</Highlight><Highlight kind="normal">))</Highlight></CodeLine>
<Link id="l02089" /><CodeLine lineNumber="2089"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02090" /><CodeLine lineNumber="2090"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02091" /><CodeLine lineNumber="2091"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Do not instrument function pointers to initialization and termination</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02092" /><CodeLine lineNumber="2092"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// routines: dynamic linker will not properly handle redzones.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02093" /><CodeLine lineNumber="2093"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/armbuildattrs/#aea10ca6bf098a425d51ac7fe65d30ed6a69c8a3bdf3f5753779a342f0cd97c090">Section</a>.starts&#95;with(</Highlight><Highlight kind="stringliteral">&quot;.preinit&#95;array&quot;</Highlight><Highlight kind="normal">) ||</Highlight></CodeLine>
<Link id="l02094" /><CodeLine lineNumber="2094"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/armbuildattrs/#aea10ca6bf098a425d51ac7fe65d30ed6a69c8a3bdf3f5753779a342f0cd97c090">Section</a>.starts&#95;with(</Highlight><Highlight kind="stringliteral">&quot;.init&#95;array&quot;</Highlight><Highlight kind="normal">) ||</Highlight></CodeLine>
<Link id="l02095" /><CodeLine lineNumber="2095"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/armbuildattrs/#aea10ca6bf098a425d51ac7fe65d30ed6a69c8a3bdf3f5753779a342f0cd97c090">Section</a>.starts&#95;with(</Highlight><Highlight kind="stringliteral">&quot;.fini&#95;array&quot;</Highlight><Highlight kind="normal">)) &#123;</Highlight></CodeLine>
<Link id="l02096" /><CodeLine lineNumber="2096"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02097" /><CodeLine lineNumber="2097"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02098" /><CodeLine lineNumber="2098"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02099" /><CodeLine lineNumber="2099"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Do not instrument user-defined sections (with names resembling</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02100" /><CodeLine lineNumber="2100"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// valid C identifiers)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02101" /><CodeLine lineNumber="2101"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TargetTriple.isOSBinFormatELF()) &#123;</Highlight></CodeLine>
<Link id="l02102" /><CodeLine lineNumber="2102"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all&#95;of</a>(Section,</Highlight></CodeLine>
<Link id="l02103" /><CodeLine lineNumber="2103"><Highlight kind="normal">                       &#91;&#93;(</Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> c) &#123; </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a8a0d39a17f2152e31271da7e7491d60e">llvm::isAlnum</a>(c) || c == </Highlight><Highlight kind="charliteral">&#39;&#95;&#39;</Highlight><Highlight kind="normal">; &#125;))</Highlight></CodeLine>
<Link id="l02104" /><CodeLine lineNumber="2104"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02105" /><CodeLine lineNumber="2105"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02106" /><CodeLine lineNumber="2106"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02107" /><CodeLine lineNumber="2107"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// On COFF, if the section name contains &#39;$&#39;, it is highly likely that the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02108" /><CodeLine lineNumber="2108"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// user is using section sorting to create an array of globals similar to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02109" /><CodeLine lineNumber="2109"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// the way initialization callbacks are registered in .init&#95;array and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02110" /><CodeLine lineNumber="2110"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// .CRT$XCU. The ATL also registers things in .ATL$&#95;&#95;&#91;azm&#93;. Adding redzones</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02111" /><CodeLine lineNumber="2111"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// to such globals is counterproductive, because the intent is that they</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02112" /><CodeLine lineNumber="2112"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// will form an array, and out-of-bounds accesses are expected.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02113" /><CodeLine lineNumber="2113"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// See https://github.com/google/sanitizers/issues/305</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02114" /><CodeLine lineNumber="2114"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// and http://msdn.microsoft.com/en-US/en-en/library/bb918180(v=vs.120).aspx</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02115" /><CodeLine lineNumber="2115"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TargetTriple.isOSBinFormatCOFF() &amp;&amp; <a href="/docs/api/namespaces/llvm/armbuildattrs/#aea10ca6bf098a425d51ac7fe65d30ed6a69c8a3bdf3f5753779a342f0cd97c090">Section</a>.contains(</Highlight><Highlight kind="charliteral">&#39;$&#39;</Highlight><Highlight kind="normal">)) &#123;</Highlight></CodeLine>
<Link id="l02116" /><CodeLine lineNumber="2116"><Highlight kind="normal">      <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Ignoring global in sorted section (contains &#39;$&#39;): &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02117" /><CodeLine lineNumber="2117"><Highlight kind="normal">                        &lt;&lt; &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02118" /><CodeLine lineNumber="2118"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02119" /><CodeLine lineNumber="2119"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02120" /><CodeLine lineNumber="2120"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02121" /><CodeLine lineNumber="2121"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TargetTriple.isOSBinFormatMachO()) &#123;</Highlight></CodeLine>
<Link id="l02122" /><CodeLine lineNumber="2122"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/stringref">StringRef</a> ParsedSegment, ParsedSection;</Highlight></CodeLine>
<Link id="l02123" /><CodeLine lineNumber="2123"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> TAA = 0, StubSize = 0;</Highlight></CodeLine>
<Link id="l02124" /><CodeLine lineNumber="2124"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> TAAParsed;</Highlight></CodeLine>
<Link id="l02125" /><CodeLine lineNumber="2125"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#aa1e1474f15df639f0d874b21f15666f7">cantFail</a>(<a href="/docs/api/classes/llvm/mcsectionmacho/#a1ea0b527a25e96bb74c8217704b22a07">MCSectionMachO::ParseSectionSpecifier</a>(</Highlight></CodeLine>
<Link id="l02126" /><CodeLine lineNumber="2126"><Highlight kind="normal">          Section, ParsedSegment, ParsedSection, TAA, TAAParsed, StubSize));</Highlight></CodeLine>
<Link id="l02127" /><CodeLine lineNumber="2127"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02128" /><CodeLine lineNumber="2128"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Ignore the globals from the &#95;&#95;OBJC section. The ObjC runtime assumes</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02129" /><CodeLine lineNumber="2129"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// those conform to /usr/lib/objc/runtime.h, so we can&#39;t add redzones to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02130" /><CodeLine lineNumber="2130"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02131" /><CodeLine lineNumber="2131"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ParsedSegment == </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;OBJC&quot;</Highlight><Highlight kind="normal"> ||</Highlight></CodeLine>
<Link id="l02132" /><CodeLine lineNumber="2132"><Highlight kind="normal">          (ParsedSegment == </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;DATA&quot;</Highlight><Highlight kind="normal"> &amp;&amp; ParsedSection.<a href="/docs/api/classes/llvm/stringref/#a2cd8968ff703aaeb395dcd63f6805ff1">starts&#95;with</a>(</Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;objc&#95;&quot;</Highlight><Highlight kind="normal">))) &#123;</Highlight></CodeLine>
<Link id="l02133" /><CodeLine lineNumber="2133"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Ignoring ObjC runtime global: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02134" /><CodeLine lineNumber="2134"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02135" /><CodeLine lineNumber="2135"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02136" /><CodeLine lineNumber="2136"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// See https://github.com/google/sanitizers/issues/32</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02137" /><CodeLine lineNumber="2137"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Constant CFString instances are compiled in the following way:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02138" /><CodeLine lineNumber="2138"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//  -- the string buffer is emitted into</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02139" /><CodeLine lineNumber="2139"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//     &#95;&#95;TEXT,&#95;&#95;cstring,cstring&#95;literals</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02140" /><CodeLine lineNumber="2140"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//  -- the constant NSConstantString structure referencing that buffer</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02141" /><CodeLine lineNumber="2141"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//     is placed into &#95;&#95;DATA,&#95;&#95;cfstring</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02142" /><CodeLine lineNumber="2142"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Therefore there&#39;s no point in placing redzones into &#95;&#95;DATA,&#95;&#95;cfstring.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02143" /><CodeLine lineNumber="2143"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Moreover, it causes the linker to crash on OS X 10.7</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02144" /><CodeLine lineNumber="2144"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ParsedSegment == </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;DATA&quot;</Highlight><Highlight kind="normal"> &amp;&amp; ParsedSection == </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;cfstring&quot;</Highlight><Highlight kind="normal">) &#123;</Highlight></CodeLine>
<Link id="l02145" /><CodeLine lineNumber="2145"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Ignoring CFString: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02146" /><CodeLine lineNumber="2146"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02147" /><CodeLine lineNumber="2147"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02148" /><CodeLine lineNumber="2148"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// The linker merges the contents of cstring&#95;literals and removes the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02149" /><CodeLine lineNumber="2149"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// trailing zeroes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02150" /><CodeLine lineNumber="2150"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ParsedSegment == </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;TEXT&quot;</Highlight><Highlight kind="normal"> &amp;&amp; (TAA &amp; <a href="/docs/api/namespaces/llvm/macho/#a48b52b2439385a6f96a6e50defb27409a857886b2cccfd23c2445e9912addf150">MachO::S&#95;CSTRING&#95;LITERALS</a>)) &#123;</Highlight></CodeLine>
<Link id="l02151" /><CodeLine lineNumber="2151"><Highlight kind="normal">        <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;Ignoring a cstring literal: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02152" /><CodeLine lineNumber="2152"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02153" /><CodeLine lineNumber="2153"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02154" /><CodeLine lineNumber="2154"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02155" /><CodeLine lineNumber="2155"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02156" /><CodeLine lineNumber="2156"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02157" /><CodeLine lineNumber="2157"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CompileKernel) &#123;</Highlight></CodeLine>
<Link id="l02158" /><CodeLine lineNumber="2158"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Globals that prefixed by &quot;&#95;&#95;&quot; are special and cannot be padded with a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02159" /><CodeLine lineNumber="2159"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// redzone.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02160" /><CodeLine lineNumber="2160"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().starts&#95;with(</Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;&quot;</Highlight><Highlight kind="normal">))</Highlight></CodeLine>
<Link id="l02161" /><CodeLine lineNumber="2161"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02162" /><CodeLine lineNumber="2162"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02163" /><CodeLine lineNumber="2163"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02164" /><CodeLine lineNumber="2164"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02165" /><CodeLine lineNumber="2165"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02166" /><CodeLine lineNumber="2166"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02167" /><CodeLine lineNumber="2167"><Highlight kind="normal"></Highlight><Highlight kind="comment">// On Mach-O platforms, we emit global metadata in a separate section of the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02168" /><CodeLine lineNumber="2168"><Highlight kind="normal"></Highlight><Highlight kind="comment">// binary in order to allow the linker to properly dead strip. This is only</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02169" /><CodeLine lineNumber="2169"><Highlight kind="normal"></Highlight><Highlight kind="comment">// supported on recent versions of ld64.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02170" /><CodeLine lineNumber="2170"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> ModuleAddressSanitizer::ShouldUseMachOGlobalsSection()</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l02171" /><CodeLine lineNumber="2171"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!TargetTriple.isOSBinFormatMachO())</Highlight></CodeLine>
<Link id="l02172" /><CodeLine lineNumber="2172"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02173" /><CodeLine lineNumber="2173"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02174" /><CodeLine lineNumber="2174"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TargetTriple.isMacOSX() &amp;&amp; !TargetTriple.isMacOSXVersionLT(10, 11))</Highlight></CodeLine>
<Link id="l02175" /><CodeLine lineNumber="2175"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02176" /><CodeLine lineNumber="2176"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TargetTriple.isiOS() </Highlight><Highlight kind="comment">/&#42; or tvOS &#42;/</Highlight><Highlight kind="normal"> &amp;&amp; !TargetTriple.isOSVersionLT(9))</Highlight></CodeLine>
<Link id="l02177" /><CodeLine lineNumber="2177"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02178" /><CodeLine lineNumber="2178"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TargetTriple.isWatchOS() &amp;&amp; !TargetTriple.isOSVersionLT(2))</Highlight></CodeLine>
<Link id="l02179" /><CodeLine lineNumber="2179"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02180" /><CodeLine lineNumber="2180"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TargetTriple.isDriverKit())</Highlight></CodeLine>
<Link id="l02181" /><CodeLine lineNumber="2181"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02182" /><CodeLine lineNumber="2182"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TargetTriple.isXROS())</Highlight></CodeLine>
<Link id="l02183" /><CodeLine lineNumber="2183"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02184" /><CodeLine lineNumber="2184"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02185" /><CodeLine lineNumber="2185"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02186" /><CodeLine lineNumber="2186"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02187" /><CodeLine lineNumber="2187"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02188" /><CodeLine lineNumber="2188"><Highlight kind="normal"><a href="/docs/api/classes/llvm/stringref">StringRef</a> ModuleAddressSanitizer::getGlobalMetadataSection()</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l02189" /><CodeLine lineNumber="2189"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">switch</Highlight><Highlight kind="normal"> (TargetTriple.getObjectFormat()) &#123;</Highlight></CodeLine>
<Link id="l02190" /><CodeLine lineNumber="2190"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201aa943abc041caa1cc4c074bbf38b76267">Triple::COFF</a>:  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;.ASAN$GL&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02191" /><CodeLine lineNumber="2191"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201a456b64e26b8bcdbd8294689615d8a055">Triple::ELF</a>:   </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;asan&#95;globals&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02192" /><CodeLine lineNumber="2192"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201a2ed78f59e2d35011e1d1ed0ad96cf411">Triple::MachO</a>: </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;DATA,&#95;&#95;asan&#95;globals,regular&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02193" /><CodeLine lineNumber="2193"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201a660d4029da29691e97daf8c8aabb1ffb">Triple::Wasm</a>:</Highlight></CodeLine>
<Link id="l02194" /><CodeLine lineNumber="2194"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201a7d71851eea2209e547ae06c9c03768f5">Triple::GOFF</a>:</Highlight></CodeLine>
<Link id="l02195" /><CodeLine lineNumber="2195"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201ae057411e10951f5a7dc545e6199c5490">Triple::SPIRV</a>:</Highlight></CodeLine>
<Link id="l02196" /><CodeLine lineNumber="2196"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201a1f7d761ca747e66d2ac0caa0d54b1824">Triple::XCOFF</a>:</Highlight></CodeLine>
<Link id="l02197" /><CodeLine lineNumber="2197"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201a382f97aab858a35311f657a88f998a68">Triple::DXContainer</a>:</Highlight></CodeLine>
<Link id="l02198" /><CodeLine lineNumber="2198"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a7f2a3d4dcfee70225988aec53ff1e173">report&#95;fatal&#95;error</a>(</Highlight></CodeLine>
<Link id="l02199" /><CodeLine lineNumber="2199"><Highlight kind="normal">        </Highlight><Highlight kind="stringliteral">&quot;ModuleAddressSanitizer not implemented for object file format&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02200" /><CodeLine lineNumber="2200"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">case</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/triple/#a83e907e55fa50e093caa96a0aff96201af2f88d8b470958614a01866d4714b5a4">Triple::UnknownObjectFormat</a>:</Highlight></CodeLine>
<Link id="l02201" /><CodeLine lineNumber="2201"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02202" /><CodeLine lineNumber="2202"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02203" /><CodeLine lineNumber="2203"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;unsupported object format&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02204" /><CodeLine lineNumber="2204"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02205" /><CodeLine lineNumber="2205"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02206" /><CodeLine lineNumber="2206"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> ModuleAddressSanitizer::initializeCallbacks() &#123;</Highlight></CodeLine>
<Link id="l02207" /><CodeLine lineNumber="2207"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</Highlight></CodeLine>
<Link id="l02208" /><CodeLine lineNumber="2208"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02209" /><CodeLine lineNumber="2209"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Declare our poisoning and unpoisoning functions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02210" /><CodeLine lineNumber="2210"><Highlight kind="normal">  AsanPoisonGlobals =</Highlight></CodeLine>
<Link id="l02211" /><CodeLine lineNumber="2211"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#af9f3c07d9fc38e3b9ac12f6c4386dad5">kAsanPoisonGlobalsName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), IntptrTy);</Highlight></CodeLine>
<Link id="l02212" /><CodeLine lineNumber="2212"><Highlight kind="normal">  AsanUnpoisonGlobals =</Highlight></CodeLine>
<Link id="l02213" /><CodeLine lineNumber="2213"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#a61e87da131e672072ffa897d6c3f954e">kAsanUnpoisonGlobalsName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>());</Highlight></CodeLine>
<Link id="l02214" /><CodeLine lineNumber="2214"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02215" /><CodeLine lineNumber="2215"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Declare functions that register/unregister globals.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02216" /><CodeLine lineNumber="2216"><Highlight kind="normal">  AsanRegisterGlobals = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</Highlight></CodeLine>
<Link id="l02217" /><CodeLine lineNumber="2217"><Highlight kind="normal">      <a href="#aa9fe31e1276128051e55a18579091356">kAsanRegisterGlobalsName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), IntptrTy, IntptrTy);</Highlight></CodeLine>
<Link id="l02218" /><CodeLine lineNumber="2218"><Highlight kind="normal">  AsanUnregisterGlobals = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</Highlight></CodeLine>
<Link id="l02219" /><CodeLine lineNumber="2219"><Highlight kind="normal">      <a href="#a5b0465f40b3ec7684fdc252ed5e01ed4">kAsanUnregisterGlobalsName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), IntptrTy, IntptrTy);</Highlight></CodeLine>
<Link id="l02220" /><CodeLine lineNumber="2220"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02221" /><CodeLine lineNumber="2221"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Declare the functions that find globals in a shared object and then invoke</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02222" /><CodeLine lineNumber="2222"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the (un)register function on them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02223" /><CodeLine lineNumber="2223"><Highlight kind="normal">  AsanRegisterImageGlobals = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</Highlight></CodeLine>
<Link id="l02224" /><CodeLine lineNumber="2224"><Highlight kind="normal">      <a href="#a6756689ed60e2d83d51a12e960517e19">kAsanRegisterImageGlobalsName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), IntptrTy);</Highlight></CodeLine>
<Link id="l02225" /><CodeLine lineNumber="2225"><Highlight kind="normal">  AsanUnregisterImageGlobals = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</Highlight></CodeLine>
<Link id="l02226" /><CodeLine lineNumber="2226"><Highlight kind="normal">      <a href="#ab8a40552186ca947c5570a1e9895dcd3">kAsanUnregisterImageGlobalsName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), IntptrTy);</Highlight></CodeLine>
<Link id="l02227" /><CodeLine lineNumber="2227"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02228" /><CodeLine lineNumber="2228"><Highlight kind="normal">  AsanRegisterElfGlobals =</Highlight></CodeLine>
<Link id="l02229" /><CodeLine lineNumber="2229"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#aea03f393f423aab3e80a1bf6ee59a3b1">kAsanRegisterElfGlobalsName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(),</Highlight></CodeLine>
<Link id="l02230" /><CodeLine lineNumber="2230"><Highlight kind="normal">                            IntptrTy, IntptrTy, IntptrTy);</Highlight></CodeLine>
<Link id="l02231" /><CodeLine lineNumber="2231"><Highlight kind="normal">  AsanUnregisterElfGlobals =</Highlight></CodeLine>
<Link id="l02232" /><CodeLine lineNumber="2232"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#a652aabcf278acb60ed86440a1489bcf0">kAsanUnregisterElfGlobalsName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(),</Highlight></CodeLine>
<Link id="l02233" /><CodeLine lineNumber="2233"><Highlight kind="normal">                            IntptrTy, IntptrTy, IntptrTy);</Highlight></CodeLine>
<Link id="l02234" /><CodeLine lineNumber="2234"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02235" /><CodeLine lineNumber="2235"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02236" /><CodeLine lineNumber="2236"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Put the metadata and the instrumented global in the same group. This ensures</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02237" /><CodeLine lineNumber="2237"><Highlight kind="normal"></Highlight><Highlight kind="comment">// that the metadata is discarded if the instrumented global is discarded.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02238" /><CodeLine lineNumber="2238"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> ModuleAddressSanitizer::SetComdatForGlobalMetadata(</Highlight></CodeLine>
<Link id="l02239" /><CodeLine lineNumber="2239"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>, <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/classes/llvm/metadata">Metadata</a>, <a href="/docs/api/classes/llvm/stringref">StringRef</a> InternalSuffix) &#123;</Highlight></CodeLine>
<Link id="l02240" /><CodeLine lineNumber="2240"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/module">Module</a> &amp;<a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a> = &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getParent();</Highlight></CodeLine>
<Link id="l02241" /><CodeLine lineNumber="2241"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/comdat">Comdat</a> &#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getComdat();</Highlight></CodeLine>
<Link id="l02242" /><CodeLine lineNumber="2242"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>) &#123;</Highlight></CodeLine>
<Link id="l02243" /><CodeLine lineNumber="2243"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasName()) &#123;</Highlight></CodeLine>
<Link id="l02244" /><CodeLine lineNumber="2244"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// If G is unnamed, it must be internal. Give it an artificial name</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02245" /><CodeLine lineNumber="2245"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// so we can put it in a comdat.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02246" /><CodeLine lineNumber="2246"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasLocalLinkage());</Highlight></CodeLine>
<Link id="l02247" /><CodeLine lineNumber="2247"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;setName(<a href="#a2cd6efecbc36daba036d332c2556b668">genName</a>(</Highlight><Highlight kind="stringliteral">&quot;anon&#95;global&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l02248" /><CodeLine lineNumber="2248"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02249" /><CodeLine lineNumber="2249"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02250" /><CodeLine lineNumber="2250"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!InternalSuffix.<a href="/docs/api/classes/llvm/stringref/#a2dc80c585ad5882da8cae7b5968f7e74">empty</a>() &amp;&amp; <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasLocalLinkage()) &#123;</Highlight></CodeLine>
<Link id="l02251" /><CodeLine lineNumber="2251"><Highlight kind="normal">      std::string <a href="/docs/api/namespaces/llvm/graphprogram/#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> = std::string(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName());</Highlight></CodeLine>
<Link id="l02252" /><CodeLine lineNumber="2252"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/graphprogram/#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> += InternalSuffix;</Highlight></CodeLine>
<Link id="l02253" /><CodeLine lineNumber="2253"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertComdat(Name);</Highlight></CodeLine>
<Link id="l02254" /><CodeLine lineNumber="2254"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02255" /><CodeLine lineNumber="2255"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a> = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertComdat(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName());</Highlight></CodeLine>
<Link id="l02256" /><CodeLine lineNumber="2256"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02257" /><CodeLine lineNumber="2257"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02258" /><CodeLine lineNumber="2258"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Make this IMAGE&#95;COMDAT&#95;SELECT&#95;NODUPLICATES on COFF. Also upgrade private</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02259" /><CodeLine lineNumber="2259"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// linkage to internal linkage so that a symbol table entry is emitted. This</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02260" /><CodeLine lineNumber="2260"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// is necessary in order to create the comdat group.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02261" /><CodeLine lineNumber="2261"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TargetTriple.isOSBinFormatCOFF()) &#123;</Highlight></CodeLine>
<Link id="l02262" /><CodeLine lineNumber="2262"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>-&gt;setSelectionKind(<a href="/docs/api/classes/llvm/comdat/#ab40cbf8243fad70968f9ecf82f48a035ab2d0d4bc9ba11b7324f5ffc20a9dc37a">Comdat::NoDeduplicate</a>);</Highlight></CodeLine>
<Link id="l02263" /><CodeLine lineNumber="2263"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasPrivateLinkage())</Highlight></CodeLine>
<Link id="l02264" /><CodeLine lineNumber="2264"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;setLinkage(<a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>);</Highlight></CodeLine>
<Link id="l02265" /><CodeLine lineNumber="2265"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02266" /><CodeLine lineNumber="2266"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;setComdat(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</Highlight></CodeLine>
<Link id="l02267" /><CodeLine lineNumber="2267"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02268" /><CodeLine lineNumber="2268"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02269" /><CodeLine lineNumber="2269"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasComdat());</Highlight></CodeLine>
<Link id="l02270" /><CodeLine lineNumber="2270"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/metadata">Metadata</a>-&gt;setComdat(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getComdat());</Highlight></CodeLine>
<Link id="l02271" /><CodeLine lineNumber="2271"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02272" /><CodeLine lineNumber="2272"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02273" /><CodeLine lineNumber="2273"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Create a separate metadata global and put it in the appropriate ASan</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02274" /><CodeLine lineNumber="2274"><Highlight kind="normal"></Highlight><Highlight kind="comment">// global registration section.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02275" /><CodeLine lineNumber="2275"><Highlight kind="normal"><a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;</Highlight></CodeLine>
<Link id="l02276" /><CodeLine lineNumber="2276"><Highlight kind="normal">ModuleAddressSanitizer::CreateMetadataGlobal(<a href="/docs/api/classes/llvm/constant">Constant</a> &#42;Initializer,</Highlight></CodeLine>
<Link id="l02277" /><CodeLine lineNumber="2277"><Highlight kind="normal">                                             <a href="/docs/api/classes/llvm/stringref">StringRef</a> OriginalName) &#123;</Highlight></CodeLine>
<Link id="l02278" /><CodeLine lineNumber="2278"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/directx/dxilfinalizelinkage-cpp/#ae721973516c2b86042a5127b776e2806">Linkage</a> = TargetTriple.isOSBinFormatMachO()</Highlight></CodeLine>
<Link id="l02279" /><CodeLine lineNumber="2279"><Highlight kind="normal">                     ? <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalVariable::InternalLinkage</a></Highlight></CodeLine>
<Link id="l02280" /><CodeLine lineNumber="2280"><Highlight kind="normal">                     : <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalVariable::PrivateLinkage</a>;</Highlight></CodeLine>
<Link id="l02281" /><CodeLine lineNumber="2281"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/classes/llvm/metadata">Metadata</a> = </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(</Highlight></CodeLine>
<Link id="l02282" /><CodeLine lineNumber="2282"><Highlight kind="normal">      M, Initializer-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>(), </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, <a href="/docs/api/files/lib/lib/target/lib/target/directx/dxilfinalizelinkage-cpp/#ae721973516c2b86042a5127b776e2806">Linkage</a>, Initializer,</Highlight></CodeLine>
<Link id="l02283" /><CodeLine lineNumber="2283"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/twine">Twine</a>(</Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;global&#95;&quot;</Highlight><Highlight kind="normal">) + <a href="/docs/api/classes/llvm/globalvalue/#a3e999e4bb7297d284f931638721840e5">GlobalValue::dropLLVMManglingEscape</a>(OriginalName));</Highlight></CodeLine>
<Link id="l02284" /><CodeLine lineNumber="2284"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/metadata">Metadata</a>-&gt;setSection(getGlobalMetadataSection());</Highlight></CodeLine>
<Link id="l02285" /><CodeLine lineNumber="2285"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Place metadata in a large section for x86-64 ELF binaries to mitigate</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02286" /><CodeLine lineNumber="2286"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// relocation pressure.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02287" /><CodeLine lineNumber="2287"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#aaf2ff3020b311fe77e208f80459017aa">setGlobalVariableLargeSection</a>(TargetTriple, &#42;<a href="/docs/api/classes/llvm/metadata">Metadata</a>);</Highlight></CodeLine>
<Link id="l02288" /><CodeLine lineNumber="2288"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/metadata">Metadata</a>;</Highlight></CodeLine>
<Link id="l02289" /><CodeLine lineNumber="2289"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02290" /><CodeLine lineNumber="2290"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02291" /><CodeLine lineNumber="2291"><Highlight kind="normal"><a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;ModuleAddressSanitizer::CreateAsanModuleDtor() &#123;</Highlight></CodeLine>
<Link id="l02292" /><CodeLine lineNumber="2292"><Highlight kind="normal">  AsanDtorFunction = <a href="/docs/api/classes/llvm/function/#a5dfae571c803bc1e2cd79bf98cc1951f">Function::createWithDefaultAttr</a>(</Highlight></CodeLine>
<Link id="l02293" /><CodeLine lineNumber="2293"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/functiontype/#af8be7844c269f201ebcee1e15048c378">FunctionType::get</a>(<a href="/docs/api/classes/llvm/type/#a6e20e76960d952de088354cbcd14c3ab">Type::getVoidTy</a>(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>), </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l02294" /><CodeLine lineNumber="2294"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>, 0, <a href="#a8bcb2cf7d004c924b63f1a9d0dfa2847">kAsanModuleDtorName</a>, &amp;M);</Highlight></CodeLine>
<Link id="l02295" /><CodeLine lineNumber="2295"><Highlight kind="normal">  AsanDtorFunction-&gt;addFnAttr(Attribute::NoUnwind);</Highlight></CodeLine>
<Link id="l02296" /><CodeLine lineNumber="2296"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Ensure Dtor cannot be discarded, even if in a comdat.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02297" /><CodeLine lineNumber="2297"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#ae879dd14ccc28696f3d8c7b484df3c9a">appendToUsed</a>(M, &#123;AsanDtorFunction&#125;);</Highlight></CodeLine>
<Link id="l02298" /><CodeLine lineNumber="2298"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;AsanDtorBB = <a href="/docs/api/classes/llvm/basicblock/#a4a5b798214be930cf8e133c032ba0129">BasicBlock::Create</a>(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, </Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">, AsanDtorFunction);</Highlight></CodeLine>
<Link id="l02299" /><CodeLine lineNumber="2299"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02300" /><CodeLine lineNumber="2300"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/returninst/#a932710d4c1c965497707751eb4f7948f">ReturnInst::Create</a>(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, AsanDtorBB);</Highlight></CodeLine>
<Link id="l02301" /><CodeLine lineNumber="2301"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02302" /><CodeLine lineNumber="2302"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02303" /><CodeLine lineNumber="2303"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> ModuleAddressSanitizer::InstrumentGlobalsCOFF(</Highlight></CodeLine>
<Link id="l02304" /><CodeLine lineNumber="2304"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalVariable &#42;&gt;</a> ExtendedGlobals,</Highlight></CodeLine>
<Link id="l02305" /><CodeLine lineNumber="2305"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Constant &#42;&gt;</a> MetadataInitializers) &#123;</Highlight></CodeLine>
<Link id="l02306" /><CodeLine lineNumber="2306"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() == MetadataInitializers.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</Highlight></CodeLine>
<Link id="l02307" /><CodeLine lineNumber="2307"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getDataLayout();</Highlight></CodeLine>
<Link id="l02308" /><CodeLine lineNumber="2308"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02309" /><CodeLine lineNumber="2309"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;GlobalValue &#42;, 16&gt;</a> MetadataGlobals(ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</Highlight></CodeLine>
<Link id="l02310" /><CodeLine lineNumber="2310"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> i = 0; i &lt; ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(); i++) &#123;</Highlight></CodeLine>
<Link id="l02311" /><CodeLine lineNumber="2311"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;Initializer = MetadataInitializers&#91;i&#93;;</Highlight></CodeLine>
<Link id="l02312" /><CodeLine lineNumber="2312"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> = ExtendedGlobals&#91;i&#93;;</Highlight></CodeLine>
<Link id="l02313" /><CodeLine lineNumber="2313"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/classes/llvm/metadata">Metadata</a> = CreateMetadataGlobal(Initializer, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName());</Highlight></CodeLine>
<Link id="l02314" /><CodeLine lineNumber="2314"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/mdnode">MDNode</a> &#42;MD = <a href="/docs/api/classes/llvm/mdnode/#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(<a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getContext(), <a href="/docs/api/classes/llvm/valueasmetadata/#a53fc78b63202142110d0e86dd1a71fbe">ValueAsMetadata::get</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>));</Highlight></CodeLine>
<Link id="l02315" /><CodeLine lineNumber="2315"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/metadata">Metadata</a>-&gt;setMetadata(LLVMContext::MD&#95;associated, MD);</Highlight></CodeLine>
<Link id="l02316" /><CodeLine lineNumber="2316"><Highlight kind="normal">    MetadataGlobals&#91;i&#93; = <a href="/docs/api/classes/llvm/metadata">Metadata</a>;</Highlight></CodeLine>
<Link id="l02317" /><CodeLine lineNumber="2317"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02318" /><CodeLine lineNumber="2318"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The MSVC linker always inserts padding when linking incrementally. We</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02319" /><CodeLine lineNumber="2319"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// cope with that by aligning each struct to its size, which must be a power</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02320" /><CodeLine lineNumber="2320"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// of two.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02321" /><CodeLine lineNumber="2321"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> SizeOfGlobalStruct = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(Initializer-&gt;<a href="/docs/api/classes/llvm/value/#a0344a49526443edf90cc0aef3abd3337">getType</a>());</Highlight></CodeLine>
<Link id="l02322" /><CodeLine lineNumber="2322"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2&#95;32</a>(SizeOfGlobalStruct) &amp;&amp;</Highlight></CodeLine>
<Link id="l02323" /><CodeLine lineNumber="2323"><Highlight kind="normal">           </Highlight><Highlight kind="stringliteral">&quot;global metadata will not be padded appropriately&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02324" /><CodeLine lineNumber="2324"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/metadata">Metadata</a>-&gt;setAlignment(<a href="/docs/api/namespaces/llvm/#ad4b2e7a84faf3d7b6ffb84b541358e00">assumeAligned</a>(SizeOfGlobalStruct));</Highlight></CodeLine>
<Link id="l02325" /><CodeLine lineNumber="2325"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02326" /><CodeLine lineNumber="2326"><Highlight kind="normal">    SetComdatForGlobalMetadata(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>, <a href="/docs/api/classes/llvm/metadata">Metadata</a>, </Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02327" /><CodeLine lineNumber="2327"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02328" /><CodeLine lineNumber="2328"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02329" /><CodeLine lineNumber="2329"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Update llvm.compiler.used, adding the new metadata globals. This is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02330" /><CodeLine lineNumber="2330"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// needed so that during LTO these variables stay alive.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02331" /><CodeLine lineNumber="2331"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!MetadataGlobals.empty())</Highlight></CodeLine>
<Link id="l02332" /><CodeLine lineNumber="2332"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#aab730f72aa213d5ecc7d1101efda8811">appendToCompilerUsed</a>(M, MetadataGlobals);</Highlight></CodeLine>
<Link id="l02333" /><CodeLine lineNumber="2333"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02334" /><CodeLine lineNumber="2334"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02335" /><CodeLine lineNumber="2335"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> ModuleAddressSanitizer::instrumentGlobalsELF(</Highlight></CodeLine>
<Link id="l02336" /><CodeLine lineNumber="2336"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalVariable &#42;&gt;</a> ExtendedGlobals,</Highlight></CodeLine>
<Link id="l02337" /><CodeLine lineNumber="2337"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Constant &#42;&gt;</a> MetadataInitializers,</Highlight></CodeLine>
<Link id="l02338" /><CodeLine lineNumber="2338"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> std::string &amp;UniqueModuleId) &#123;</Highlight></CodeLine>
<Link id="l02339" /><CodeLine lineNumber="2339"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() == MetadataInitializers.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</Highlight></CodeLine>
<Link id="l02340" /><CodeLine lineNumber="2340"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02341" /><CodeLine lineNumber="2341"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Putting globals in a comdat changes the semantic and potentially cause</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02342" /><CodeLine lineNumber="2342"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// false negative odr violations at link time. If odr indicators are used, we</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02343" /><CodeLine lineNumber="2343"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// keep the comdat sections, as link time odr violations will be dectected on</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02344" /><CodeLine lineNumber="2344"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the odr indicator symbols.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02345" /><CodeLine lineNumber="2345"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseComdatForGlobalsGC = UseOdrIndicator &amp;&amp; !UniqueModuleId.empty();</Highlight></CodeLine>
<Link id="l02346" /><CodeLine lineNumber="2346"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02347" /><CodeLine lineNumber="2347"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;GlobalValue &#42;, 16&gt;</a> MetadataGlobals(ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</Highlight></CodeLine>
<Link id="l02348" /><CodeLine lineNumber="2348"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> i = 0; i &lt; ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(); i++) &#123;</Highlight></CodeLine>
<Link id="l02349" /><CodeLine lineNumber="2349"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> = ExtendedGlobals&#91;i&#93;;</Highlight></CodeLine>
<Link id="l02350" /><CodeLine lineNumber="2350"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/classes/llvm/metadata">Metadata</a> =</Highlight></CodeLine>
<Link id="l02351" /><CodeLine lineNumber="2351"><Highlight kind="normal">        CreateMetadataGlobal(MetadataInitializers&#91;i&#93;, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName());</Highlight></CodeLine>
<Link id="l02352" /><CodeLine lineNumber="2352"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/mdnode">MDNode</a> &#42;MD = <a href="/docs/api/classes/llvm/mdnode/#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(<a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getContext(), <a href="/docs/api/classes/llvm/valueasmetadata/#a53fc78b63202142110d0e86dd1a71fbe">ValueAsMetadata::get</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>));</Highlight></CodeLine>
<Link id="l02353" /><CodeLine lineNumber="2353"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/metadata">Metadata</a>-&gt;setMetadata(LLVMContext::MD&#95;associated, MD);</Highlight></CodeLine>
<Link id="l02354" /><CodeLine lineNumber="2354"><Highlight kind="normal">    MetadataGlobals&#91;i&#93; = <a href="/docs/api/classes/llvm/metadata">Metadata</a>;</Highlight></CodeLine>
<Link id="l02355" /><CodeLine lineNumber="2355"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02356" /><CodeLine lineNumber="2356"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UseComdatForGlobalsGC)</Highlight></CodeLine>
<Link id="l02357" /><CodeLine lineNumber="2357"><Highlight kind="normal">      SetComdatForGlobalMetadata(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>, <a href="/docs/api/classes/llvm/metadata">Metadata</a>, UniqueModuleId);</Highlight></CodeLine>
<Link id="l02358" /><CodeLine lineNumber="2358"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02359" /><CodeLine lineNumber="2359"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02360" /><CodeLine lineNumber="2360"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Update llvm.compiler.used, adding the new metadata globals. This is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02361" /><CodeLine lineNumber="2361"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// needed so that during LTO these variables stay alive.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02362" /><CodeLine lineNumber="2362"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!MetadataGlobals.empty())</Highlight></CodeLine>
<Link id="l02363" /><CodeLine lineNumber="2363"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#aab730f72aa213d5ecc7d1101efda8811">appendToCompilerUsed</a>(M, MetadataGlobals);</Highlight></CodeLine>
<Link id="l02364" /><CodeLine lineNumber="2364"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02365" /><CodeLine lineNumber="2365"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// RegisteredFlag serves two purposes. First, we can pass it to dladdr()</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02366" /><CodeLine lineNumber="2366"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// to look up the loaded image that contains it. Second, we can store in it</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02367" /><CodeLine lineNumber="2367"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// whether registration has already occurred, to prevent duplicate</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02368" /><CodeLine lineNumber="2368"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// registration.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02369" /><CodeLine lineNumber="2369"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02370" /><CodeLine lineNumber="2370"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Common linkage ensures that there is only one global per shared library.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02371" /><CodeLine lineNumber="2371"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;RegisteredFlag = </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(</Highlight></CodeLine>
<Link id="l02372" /><CodeLine lineNumber="2372"><Highlight kind="normal">      M, IntptrTy, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca08c6a63ca3d9cdb39fb584655bf5c501">GlobalVariable::CommonLinkage</a>,</Highlight></CodeLine>
<Link id="l02373" /><CodeLine lineNumber="2373"><Highlight kind="normal">      ConstantInt::get(IntptrTy, 0), <a href="#aae785da38ce552b3ab47791e9abb9fd9">kAsanGlobalsRegisteredFlagName</a>);</Highlight></CodeLine>
<Link id="l02374" /><CodeLine lineNumber="2374"><Highlight kind="normal">  RegisteredFlag-&gt;<a href="/docs/api/classes/llvm/globalvalue/#aa242d8ab89216c14beab812e07009b2a">setVisibility</a>(<a href="/docs/api/classes/llvm/globalvalue/#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">GlobalVariable::HiddenVisibility</a>);</Highlight></CodeLine>
<Link id="l02375" /><CodeLine lineNumber="2375"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02376" /><CodeLine lineNumber="2376"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Create start and stop symbols.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02377" /><CodeLine lineNumber="2377"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;StartELFMetadata = </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(</Highlight></CodeLine>
<Link id="l02378" /><CodeLine lineNumber="2378"><Highlight kind="normal">      M, IntptrTy, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57caa81fc8db28ac4af45766fbab2e79d466">GlobalVariable::ExternalWeakLinkage</a>, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l02379" /><CodeLine lineNumber="2379"><Highlight kind="normal">      </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;start&#95;&quot;</Highlight><Highlight kind="normal"> + getGlobalMetadataSection());</Highlight></CodeLine>
<Link id="l02380" /><CodeLine lineNumber="2380"><Highlight kind="normal">  StartELFMetadata-&gt;<a href="/docs/api/classes/llvm/globalvalue/#aa242d8ab89216c14beab812e07009b2a">setVisibility</a>(<a href="/docs/api/classes/llvm/globalvalue/#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">GlobalVariable::HiddenVisibility</a>);</Highlight></CodeLine>
<Link id="l02381" /><CodeLine lineNumber="2381"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;StopELFMetadata = </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(</Highlight></CodeLine>
<Link id="l02382" /><CodeLine lineNumber="2382"><Highlight kind="normal">      M, IntptrTy, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57caa81fc8db28ac4af45766fbab2e79d466">GlobalVariable::ExternalWeakLinkage</a>, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l02383" /><CodeLine lineNumber="2383"><Highlight kind="normal">      </Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;stop&#95;&quot;</Highlight><Highlight kind="normal"> + getGlobalMetadataSection());</Highlight></CodeLine>
<Link id="l02384" /><CodeLine lineNumber="2384"><Highlight kind="normal">  StopELFMetadata-&gt;<a href="/docs/api/classes/llvm/globalvalue/#aa242d8ab89216c14beab812e07009b2a">setVisibility</a>(<a href="/docs/api/classes/llvm/globalvalue/#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">GlobalVariable::HiddenVisibility</a>);</Highlight></CodeLine>
<Link id="l02385" /><CodeLine lineNumber="2385"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02386" /><CodeLine lineNumber="2386"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Create a call to register the globals with the runtime.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02387" /><CodeLine lineNumber="2387"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ConstructorKind == <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a4cc6684df7b4a92b1dec6fce3264fac8">AsanCtorKind::Global</a>)</Highlight></CodeLine>
<Link id="l02388" /><CodeLine lineNumber="2388"><Highlight kind="normal">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(AsanRegisterElfGlobals,</Highlight></CodeLine>
<Link id="l02389" /><CodeLine lineNumber="2389"><Highlight kind="normal">                 &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(RegisteredFlag, IntptrTy),</Highlight></CodeLine>
<Link id="l02390" /><CodeLine lineNumber="2390"><Highlight kind="normal">                  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(StartELFMetadata, IntptrTy),</Highlight></CodeLine>
<Link id="l02391" /><CodeLine lineNumber="2391"><Highlight kind="normal">                  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(StopELFMetadata, IntptrTy)&#125;);</Highlight></CodeLine>
<Link id="l02392" /><CodeLine lineNumber="2392"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02393" /><CodeLine lineNumber="2393"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We also need to unregister globals at the end, e.g., when a shared library</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02394" /><CodeLine lineNumber="2394"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// gets closed.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02395" /><CodeLine lineNumber="2395"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DestructorKind != <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa6adf97f83acf6453d4a6a4b1070f3754">AsanDtorKind::None</a> &amp;&amp; !MetadataGlobals.empty()) &#123;</Highlight></CodeLine>
<Link id="l02396" /><CodeLine lineNumber="2396"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IrbDtor(CreateAsanModuleDtor());</Highlight></CodeLine>
<Link id="l02397" /><CodeLine lineNumber="2397"><Highlight kind="normal">    IrbDtor.CreateCall(AsanUnregisterElfGlobals,</Highlight></CodeLine>
<Link id="l02398" /><CodeLine lineNumber="2398"><Highlight kind="normal">                       &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(RegisteredFlag, IntptrTy),</Highlight></CodeLine>
<Link id="l02399" /><CodeLine lineNumber="2399"><Highlight kind="normal">                        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(StartELFMetadata, IntptrTy),</Highlight></CodeLine>
<Link id="l02400" /><CodeLine lineNumber="2400"><Highlight kind="normal">                        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(StopELFMetadata, IntptrTy)&#125;);</Highlight></CodeLine>
<Link id="l02401" /><CodeLine lineNumber="2401"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02402" /><CodeLine lineNumber="2402"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02403" /><CodeLine lineNumber="2403"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02404" /><CodeLine lineNumber="2404"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> ModuleAddressSanitizer::InstrumentGlobalsMachO(</Highlight></CodeLine>
<Link id="l02405" /><CodeLine lineNumber="2405"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalVariable &#42;&gt;</a> ExtendedGlobals,</Highlight></CodeLine>
<Link id="l02406" /><CodeLine lineNumber="2406"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Constant &#42;&gt;</a> MetadataInitializers) &#123;</Highlight></CodeLine>
<Link id="l02407" /><CodeLine lineNumber="2407"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() == MetadataInitializers.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</Highlight></CodeLine>
<Link id="l02408" /><CodeLine lineNumber="2408"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02409" /><CodeLine lineNumber="2409"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// On recent Mach-O platforms, use a structure which binds the liveness of</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02410" /><CodeLine lineNumber="2410"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the global variable to the metadata struct. Keep the list of &quot;Liveness&quot; GV</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02411" /><CodeLine lineNumber="2411"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// created to be added to llvm.compiler.used</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02412" /><CodeLine lineNumber="2412"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/structtype">StructType</a> &#42;LivenessTy = <a href="/docs/api/classes/llvm/structtype/#a18fc4545474c6ebb6f7c547f64f4fb31">StructType::get</a>(IntptrTy, IntptrTy);</Highlight></CodeLine>
<Link id="l02413" /><CodeLine lineNumber="2413"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;GlobalValue &#42;, 16&gt;</a> LivenessGlobals(ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</Highlight></CodeLine>
<Link id="l02414" /><CodeLine lineNumber="2414"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02415" /><CodeLine lineNumber="2415"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> i = 0; i &lt; ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(); i++) &#123;</Highlight></CodeLine>
<Link id="l02416" /><CodeLine lineNumber="2416"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;Initializer = MetadataInitializers&#91;i&#93;;</Highlight></CodeLine>
<Link id="l02417" /><CodeLine lineNumber="2417"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> = ExtendedGlobals&#91;i&#93;;</Highlight></CodeLine>
<Link id="l02418" /><CodeLine lineNumber="2418"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/classes/llvm/metadata">Metadata</a> = CreateMetadataGlobal(Initializer, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName());</Highlight></CodeLine>
<Link id="l02419" /><CodeLine lineNumber="2419"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02420" /><CodeLine lineNumber="2420"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// On recent Mach-O platforms, we emit the global metadata in a way that</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02421" /><CodeLine lineNumber="2421"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// allows the linker to properly strip dead globals.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02422" /><CodeLine lineNumber="2422"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> LivenessBinder =</Highlight></CodeLine>
<Link id="l02423" /><CodeLine lineNumber="2423"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/constantstruct/#a54fcfa620deb80373f489ba2fdad7643">ConstantStruct::get</a>(LivenessTy, Initializer-&gt;<a href="/docs/api/classes/llvm/constant/#acd530d0571f320d47d37e7ae51cf70ff">getAggregateElement</a>(0u),</Highlight></CodeLine>
<Link id="l02424" /><CodeLine lineNumber="2424"><Highlight kind="normal">                            <a href="/docs/api/classes/llvm/constantexpr/#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(<a href="/docs/api/classes/llvm/metadata">Metadata</a>, IntptrTy));</Highlight></CodeLine>
<Link id="l02425" /><CodeLine lineNumber="2425"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;Liveness = </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(</Highlight></CodeLine>
<Link id="l02426" /><CodeLine lineNumber="2426"><Highlight kind="normal">        M, LivenessTy, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalVariable::InternalLinkage</a>, LivenessBinder,</Highlight></CodeLine>
<Link id="l02427" /><CodeLine lineNumber="2427"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/twine">Twine</a>(</Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;binder&#95;&quot;</Highlight><Highlight kind="normal">) + <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName());</Highlight></CodeLine>
<Link id="l02428" /><CodeLine lineNumber="2428"><Highlight kind="normal">    Liveness-&gt;<a href="/docs/api/classes/llvm/globalobject/#a959c99adbdc7f8375cf866916c6b60f2">setSection</a>(</Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;DATA,&#95;&#95;asan&#95;liveness,regular,live&#95;support&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02429" /><CodeLine lineNumber="2429"><Highlight kind="normal">    LivenessGlobals&#91;i&#93; = Liveness;</Highlight></CodeLine>
<Link id="l02430" /><CodeLine lineNumber="2430"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02431" /><CodeLine lineNumber="2431"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02432" /><CodeLine lineNumber="2432"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Update llvm.compiler.used, adding the new liveness globals. This is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02433" /><CodeLine lineNumber="2433"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// needed so that during LTO these variables stay alive. The alternative</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02434" /><CodeLine lineNumber="2434"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// would be to have the linker handling the LTO symbols, but libLTO</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02435" /><CodeLine lineNumber="2435"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// current API does not expose access to the section for each symbol.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02436" /><CodeLine lineNumber="2436"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!LivenessGlobals.empty())</Highlight></CodeLine>
<Link id="l02437" /><CodeLine lineNumber="2437"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#aab730f72aa213d5ecc7d1101efda8811">appendToCompilerUsed</a>(M, LivenessGlobals);</Highlight></CodeLine>
<Link id="l02438" /><CodeLine lineNumber="2438"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02439" /><CodeLine lineNumber="2439"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// RegisteredFlag serves two purposes. First, we can pass it to dladdr()</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02440" /><CodeLine lineNumber="2440"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// to look up the loaded image that contains it. Second, we can store in it</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02441" /><CodeLine lineNumber="2441"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// whether registration has already occurred, to prevent duplicate</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02442" /><CodeLine lineNumber="2442"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// registration.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02443" /><CodeLine lineNumber="2443"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02444" /><CodeLine lineNumber="2444"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// common linkage ensures that there is only one global per shared library.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02445" /><CodeLine lineNumber="2445"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;RegisteredFlag = </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(</Highlight></CodeLine>
<Link id="l02446" /><CodeLine lineNumber="2446"><Highlight kind="normal">      M, IntptrTy, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca08c6a63ca3d9cdb39fb584655bf5c501">GlobalVariable::CommonLinkage</a>,</Highlight></CodeLine>
<Link id="l02447" /><CodeLine lineNumber="2447"><Highlight kind="normal">      ConstantInt::get(IntptrTy, 0), <a href="#aae785da38ce552b3ab47791e9abb9fd9">kAsanGlobalsRegisteredFlagName</a>);</Highlight></CodeLine>
<Link id="l02448" /><CodeLine lineNumber="2448"><Highlight kind="normal">  RegisteredFlag-&gt;<a href="/docs/api/classes/llvm/globalvalue/#aa242d8ab89216c14beab812e07009b2a">setVisibility</a>(<a href="/docs/api/classes/llvm/globalvalue/#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">GlobalVariable::HiddenVisibility</a>);</Highlight></CodeLine>
<Link id="l02449" /><CodeLine lineNumber="2449"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02450" /><CodeLine lineNumber="2450"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ConstructorKind == <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a4cc6684df7b4a92b1dec6fce3264fac8">AsanCtorKind::Global</a>)</Highlight></CodeLine>
<Link id="l02451" /><CodeLine lineNumber="2451"><Highlight kind="normal">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(AsanRegisterImageGlobals,</Highlight></CodeLine>
<Link id="l02452" /><CodeLine lineNumber="2452"><Highlight kind="normal">                 &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(RegisteredFlag, IntptrTy)&#125;);</Highlight></CodeLine>
<Link id="l02453" /><CodeLine lineNumber="2453"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02454" /><CodeLine lineNumber="2454"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We also need to unregister globals at the end, e.g., when a shared library</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02455" /><CodeLine lineNumber="2455"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// gets closed.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02456" /><CodeLine lineNumber="2456"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DestructorKind != <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa6adf97f83acf6453d4a6a4b1070f3754">AsanDtorKind::None</a>) &#123;</Highlight></CodeLine>
<Link id="l02457" /><CodeLine lineNumber="2457"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IrbDtor(CreateAsanModuleDtor());</Highlight></CodeLine>
<Link id="l02458" /><CodeLine lineNumber="2458"><Highlight kind="normal">    IrbDtor.CreateCall(AsanUnregisterImageGlobals,</Highlight></CodeLine>
<Link id="l02459" /><CodeLine lineNumber="2459"><Highlight kind="normal">                       &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(RegisteredFlag, IntptrTy)&#125;);</Highlight></CodeLine>
<Link id="l02460" /><CodeLine lineNumber="2460"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02461" /><CodeLine lineNumber="2461"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02462" /><CodeLine lineNumber="2462"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02463" /><CodeLine lineNumber="2463"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> ModuleAddressSanitizer::InstrumentGlobalsWithMetadataArray(</Highlight></CodeLine>
<Link id="l02464" /><CodeLine lineNumber="2464"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalVariable &#42;&gt;</a> ExtendedGlobals,</Highlight></CodeLine>
<Link id="l02465" /><CodeLine lineNumber="2465"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;Constant &#42;&gt;</a> MetadataInitializers) &#123;</Highlight></CodeLine>
<Link id="l02466" /><CodeLine lineNumber="2466"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() == MetadataInitializers.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</Highlight></CodeLine>
<Link id="l02467" /><CodeLine lineNumber="2467"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> = ExtendedGlobals.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>();</Highlight></CodeLine>
<Link id="l02468" /><CodeLine lineNumber="2468"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a> &gt; 0);</Highlight></CodeLine>
<Link id="l02469" /><CodeLine lineNumber="2469"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02470" /><CodeLine lineNumber="2470"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// On platforms that don&#39;t have a custom metadata section, we emit an array</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02471" /><CodeLine lineNumber="2471"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// of global metadata structures.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02472" /><CodeLine lineNumber="2472"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/arraytype">ArrayType</a> &#42;ArrayOfGlobalStructTy =</Highlight></CodeLine>
<Link id="l02473" /><CodeLine lineNumber="2473"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(MetadataInitializers&#91;0&#93;-&gt;<a href="/docs/api/files/lib/lib/object/tapifile-cpp/#a913a691648e20063bbd278e8f02d8430">getType</a>(), <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>);</Highlight></CodeLine>
<Link id="l02474" /><CodeLine lineNumber="2474"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> AllGlobals = </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(</Highlight></CodeLine>
<Link id="l02475" /><CodeLine lineNumber="2475"><Highlight kind="normal">      M, ArrayOfGlobalStructTy, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalVariable::InternalLinkage</a>,</Highlight></CodeLine>
<Link id="l02476" /><CodeLine lineNumber="2476"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/constantarray/#a0900dacdc7ad8e3ea0cc92993c7fd422">ConstantArray::get</a>(ArrayOfGlobalStructTy, MetadataInitializers), </Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02477" /><CodeLine lineNumber="2477"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Mapping.Scale &gt; 3)</Highlight></CodeLine>
<Link id="l02478" /><CodeLine lineNumber="2478"><Highlight kind="normal">    AllGlobals-&gt;setAlignment(<a href="/docs/api/structs/llvm/align">Align</a>(1ULL &lt;&lt; Mapping.Scale));</Highlight></CodeLine>
<Link id="l02479" /><CodeLine lineNumber="2479"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02480" /><CodeLine lineNumber="2480"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ConstructorKind == <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a4cc6684df7b4a92b1dec6fce3264fac8">AsanCtorKind::Global</a>)</Highlight></CodeLine>
<Link id="l02481" /><CodeLine lineNumber="2481"><Highlight kind="normal">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(AsanRegisterGlobals,</Highlight></CodeLine>
<Link id="l02482" /><CodeLine lineNumber="2482"><Highlight kind="normal">                 &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(AllGlobals, IntptrTy),</Highlight></CodeLine>
<Link id="l02483" /><CodeLine lineNumber="2483"><Highlight kind="normal">                  ConstantInt::get(IntptrTy, <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)&#125;);</Highlight></CodeLine>
<Link id="l02484" /><CodeLine lineNumber="2484"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02485" /><CodeLine lineNumber="2485"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We also need to unregister globals at the end, e.g., when a shared library</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02486" /><CodeLine lineNumber="2486"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// gets closed.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02487" /><CodeLine lineNumber="2487"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DestructorKind != <a href="/docs/api/namespaces/llvm/#a9aa6dce3613309b3509522a00d6569bfa6adf97f83acf6453d4a6a4b1070f3754">AsanDtorKind::None</a>) &#123;</Highlight></CodeLine>
<Link id="l02488" /><CodeLine lineNumber="2488"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IrbDtor(CreateAsanModuleDtor());</Highlight></CodeLine>
<Link id="l02489" /><CodeLine lineNumber="2489"><Highlight kind="normal">    IrbDtor.CreateCall(AsanUnregisterGlobals,</Highlight></CodeLine>
<Link id="l02490" /><CodeLine lineNumber="2490"><Highlight kind="normal">                       &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(AllGlobals, IntptrTy),</Highlight></CodeLine>
<Link id="l02491" /><CodeLine lineNumber="2491"><Highlight kind="normal">                        ConstantInt::get(IntptrTy, <a href="/docs/api/files/lib/lib/support/regcomp-c/#a0240ac851181b84ac374872dc5434ee4">N</a>)&#125;);</Highlight></CodeLine>
<Link id="l02492" /><CodeLine lineNumber="2492"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02493" /><CodeLine lineNumber="2493"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02494" /><CodeLine lineNumber="2494"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02495" /><CodeLine lineNumber="2495"><Highlight kind="normal"></Highlight><Highlight kind="comment">// This function replaces all global variables with new variables that have</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02496" /><CodeLine lineNumber="2496"><Highlight kind="normal"></Highlight><Highlight kind="comment">// trailing redzones. It also creates a function that poisons</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02497" /><CodeLine lineNumber="2497"><Highlight kind="normal"></Highlight><Highlight kind="comment">// redzones and inserts this function into llvm.global&#95;ctors.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02498" /><CodeLine lineNumber="2498"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Sets &#42;CtorComdat to true if the global registration code emitted into the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02499" /><CodeLine lineNumber="2499"><Highlight kind="normal"></Highlight><Highlight kind="comment">// asan constructor is comdat-compatible.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02500" /><CodeLine lineNumber="2500"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> ModuleAddressSanitizer::instrumentGlobals(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</Highlight></CodeLine>
<Link id="l02501" /><CodeLine lineNumber="2501"><Highlight kind="normal">                                               </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> &#42;CtorComdat) &#123;</Highlight></CodeLine>
<Link id="l02502" /><CodeLine lineNumber="2502"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Build set of globals that are aliased by some GA, where</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02503" /><CodeLine lineNumber="2503"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// getExcludedAliasedGlobal(GA) returns the relevant GlobalVariable.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02504" /><CodeLine lineNumber="2504"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet&lt;const GlobalVariable &#42;, 16&gt;</a> AliasedGlobalExclusions;</Highlight></CodeLine>
<Link id="l02505" /><CodeLine lineNumber="2505"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CompileKernel) &#123;</Highlight></CodeLine>
<Link id="l02506" /><CodeLine lineNumber="2506"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;GA : <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.aliases()) &#123;</Highlight></CodeLine>
<Link id="l02507" /><CodeLine lineNumber="2507"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;GV = getExcludedAliasedGlobal(GA))</Highlight></CodeLine>
<Link id="l02508" /><CodeLine lineNumber="2508"><Highlight kind="normal">        AliasedGlobalExclusions.<a href="/docs/api/classes/llvm/smallptrsetimpl/#a9d834ae3da8c62c2b668dada51335eb0">insert</a>(GV);</Highlight></CodeLine>
<Link id="l02509" /><CodeLine lineNumber="2509"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02510" /><CodeLine lineNumber="2510"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02511" /><CodeLine lineNumber="2511"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02512" /><CodeLine lineNumber="2512"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;GlobalVariable &#42;, 16&gt;</a> GlobalsToChange;</Highlight></CodeLine>
<Link id="l02513" /><CodeLine lineNumber="2513"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> : <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.globals()) &#123;</Highlight></CodeLine>
<Link id="l02514" /><CodeLine lineNumber="2514"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!AliasedGlobalExclusions.<a href="/docs/api/classes/llvm/smallptrsetimpl/#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) &amp;&amp; shouldInstrumentGlobal(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>))</Highlight></CodeLine>
<Link id="l02515" /><CodeLine lineNumber="2515"><Highlight kind="normal">      GlobalsToChange.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</Highlight></CodeLine>
<Link id="l02516" /><CodeLine lineNumber="2516"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02517" /><CodeLine lineNumber="2517"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02518" /><CodeLine lineNumber="2518"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> n = GlobalsToChange.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>();</Highlight></CodeLine>
<Link id="l02519" /><CodeLine lineNumber="2519"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getDataLayout();</Highlight></CodeLine>
<Link id="l02520" /><CodeLine lineNumber="2520"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02521" /><CodeLine lineNumber="2521"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// A global is described by a structure</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02522" /><CodeLine lineNumber="2522"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   size&#95;t beg;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02523" /><CodeLine lineNumber="2523"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   size&#95;t size;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02524" /><CodeLine lineNumber="2524"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   size&#95;t size&#95;with&#95;redzone;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02525" /><CodeLine lineNumber="2525"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   const char &#42;name;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02526" /><CodeLine lineNumber="2526"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   const char &#42;module&#95;name;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02527" /><CodeLine lineNumber="2527"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   size&#95;t has&#95;dynamic&#95;init;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02528" /><CodeLine lineNumber="2528"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   size&#95;t padding&#95;for&#95;windows&#95;msvc&#95;incremental&#95;link;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02529" /><CodeLine lineNumber="2529"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//   size&#95;t odr&#95;indicator;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02530" /><CodeLine lineNumber="2530"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We initialize an array of such structures and pass it to a run-time call.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02531" /><CodeLine lineNumber="2531"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/structtype">StructType</a> &#42;GlobalStructTy =</Highlight></CodeLine>
<Link id="l02532" /><CodeLine lineNumber="2532"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/structtype/#a18fc4545474c6ebb6f7c547f64f4fb31">StructType::get</a>(IntptrTy, IntptrTy, IntptrTy, IntptrTy, IntptrTy,</Highlight></CodeLine>
<Link id="l02533" /><CodeLine lineNumber="2533"><Highlight kind="normal">                      IntptrTy, IntptrTy, IntptrTy);</Highlight></CodeLine>
<Link id="l02534" /><CodeLine lineNumber="2534"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;GlobalVariable &#42;, 16&gt;</a> NewGlobals(n);</Highlight></CodeLine>
<Link id="l02535" /><CodeLine lineNumber="2535"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Constant &#42;, 16&gt;</a> Initializers(n);</Highlight></CodeLine>
<Link id="l02536" /><CodeLine lineNumber="2536"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02537" /><CodeLine lineNumber="2537"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> i = 0; i &lt; n; i++) &#123;</Highlight></CodeLine>
<Link id="l02538" /><CodeLine lineNumber="2538"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> = GlobalsToChange&#91;i&#93;;</Highlight></CodeLine>
<Link id="l02539" /><CodeLine lineNumber="2539"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02540" /><CodeLine lineNumber="2540"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/globalvalue/sanitizermetadata">GlobalValue::SanitizerMetadata</a> MD;</Highlight></CodeLine>
<Link id="l02541" /><CodeLine lineNumber="2541"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasSanitizerMetadata())</Highlight></CodeLine>
<Link id="l02542" /><CodeLine lineNumber="2542"><Highlight kind="normal">      MD = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getSanitizerMetadata();</Highlight></CodeLine>
<Link id="l02543" /><CodeLine lineNumber="2543"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02544" /><CodeLine lineNumber="2544"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// The runtime library tries demangling symbol names in the descriptor but</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02545" /><CodeLine lineNumber="2545"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// functionality like &#95;&#95;cxa&#95;demangle may be unavailable (e.g.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02546" /><CodeLine lineNumber="2546"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// -static-libstdc++). So we demangle the symbol names here.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02547" /><CodeLine lineNumber="2547"><Highlight kind="normal">    std::string NameForGlobal = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().str();</Highlight></CodeLine>
<Link id="l02548" /><CodeLine lineNumber="2548"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/namespaces/llvm/graphprogram/#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> =</Highlight></CodeLine>
<Link id="l02549" /><CodeLine lineNumber="2549"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a15889f1df360601e4f92325b39882a34">createPrivateGlobalForString</a>(M, <a href="/docs/api/namespaces/llvm/#ab996639d406a5466d5c8a1586fb4a9d8">llvm::demangle</a>(NameForGlobal),</Highlight></CodeLine>
<Link id="l02550" /><CodeLine lineNumber="2550"><Highlight kind="normal">                                     </Highlight><Highlight kind="comment">/&#42;AllowMerging&#42;/</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, <a href="#a2cd6efecbc36daba036d332c2556b668">genName</a>(</Highlight><Highlight kind="stringliteral">&quot;global&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l02551" /><CodeLine lineNumber="2551"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02552" /><CodeLine lineNumber="2552"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getValueType();</Highlight></CodeLine>
<Link id="l02553" /><CodeLine lineNumber="2553"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t SizeInBytes = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(Ty);</Highlight></CodeLine>
<Link id="l02554" /><CodeLine lineNumber="2554"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t RightRedzoneSize = <a href="/docs/api/namespaces/llvm/amdgpu/#afe65ef65468a7a89e95db0c4b32456f3">getRedzoneSizeForGlobal</a>(SizeInBytes);</Highlight></CodeLine>
<Link id="l02555" /><CodeLine lineNumber="2555"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/type">Type</a> &#42;RightRedZoneTy = <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), RightRedzoneSize);</Highlight></CodeLine>
<Link id="l02556" /><CodeLine lineNumber="2556"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02557" /><CodeLine lineNumber="2557"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/structtype">StructType</a> &#42;NewTy = <a href="/docs/api/classes/llvm/structtype/#a18fc4545474c6ebb6f7c547f64f4fb31">StructType::get</a>(Ty, RightRedZoneTy);</Highlight></CodeLine>
<Link id="l02558" /><CodeLine lineNumber="2558"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;NewInitializer = <a href="/docs/api/classes/llvm/constantstruct/#a54fcfa620deb80373f489ba2fdad7643">ConstantStruct::get</a>(</Highlight></CodeLine>
<Link id="l02559" /><CodeLine lineNumber="2559"><Highlight kind="normal">        NewTy, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getInitializer(), <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(RightRedZoneTy));</Highlight></CodeLine>
<Link id="l02560" /><CodeLine lineNumber="2560"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02561" /><CodeLine lineNumber="2561"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Create a new global variable with enough space for a redzone.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02562" /><CodeLine lineNumber="2562"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57c">GlobalValue::LinkageTypes</a> <a href="/docs/api/files/lib/lib/target/lib/target/directx/dxilfinalizelinkage-cpp/#ae721973516c2b86042a5127b776e2806">Linkage</a> = <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getLinkage();</Highlight></CodeLine>
<Link id="l02563" /><CodeLine lineNumber="2563"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;isConstant() &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/directx/dxilfinalizelinkage-cpp/#ae721973516c2b86042a5127b776e2806">Linkage</a> == <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalValue::PrivateLinkage</a>)</Highlight></CodeLine>
<Link id="l02564" /><CodeLine lineNumber="2564"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/directx/dxilfinalizelinkage-cpp/#ae721973516c2b86042a5127b776e2806">Linkage</a> = <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>;</Highlight></CodeLine>
<Link id="l02565" /><CodeLine lineNumber="2565"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;NewGlobal = </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(</Highlight></CodeLine>
<Link id="l02566" /><CodeLine lineNumber="2566"><Highlight kind="normal">        M, NewTy, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;isConstant(), <a href="/docs/api/files/lib/lib/target/lib/target/directx/dxilfinalizelinkage-cpp/#ae721973516c2b86042a5127b776e2806">Linkage</a>, NewInitializer, </Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">, <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>,</Highlight></CodeLine>
<Link id="l02567" /><CodeLine lineNumber="2567"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getThreadLocalMode(), <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getAddressSpace());</Highlight></CodeLine>
<Link id="l02568" /><CodeLine lineNumber="2568"><Highlight kind="normal">    NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalvariable/#a53f47ebcc1a7ac4553ba2a2eeca596e5">copyAttributesFrom</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</Highlight></CodeLine>
<Link id="l02569" /><CodeLine lineNumber="2569"><Highlight kind="normal">    NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalobject/#a800a5183372ed37a74be5cddf5df325c">setComdat</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getComdat());</Highlight></CodeLine>
<Link id="l02570" /><CodeLine lineNumber="2570"><Highlight kind="normal">    NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalobject/#a49b398b1c83ef4d42c8f7756b443f61f">setAlignment</a>(<a href="/docs/api/structs/llvm/align">Align</a>(getMinRedzoneSizeForGlobal()));</Highlight></CodeLine>
<Link id="l02571" /><CodeLine lineNumber="2571"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Don&#39;t fold globals with redzones. ODR violation detector and redzone</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02572" /><CodeLine lineNumber="2572"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// poisoning implicitly creates a dependence on the global&#39;s address, so it</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02573" /><CodeLine lineNumber="2573"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// is no longer valid for it to be marked unnamed&#95;addr.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02574" /><CodeLine lineNumber="2574"><Highlight kind="normal">    NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalvalue/#a38c97622dccff7ae31fe0be3b21c9b3d">setUnnamedAddr</a>(<a href="/docs/api/classes/llvm/globalvalue/#ae8df4be75bfc50b1eadd74e85c25fa45a6adf97f83acf6453d4a6a4b1070f3754">GlobalValue::UnnamedAddr::None</a>);</Highlight></CodeLine>
<Link id="l02575" /><CodeLine lineNumber="2575"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02576" /><CodeLine lineNumber="2576"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Move null-terminated C strings to &quot;&#95;&#95;asan&#95;cstring&quot; section on Darwin.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02577" /><CodeLine lineNumber="2577"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TargetTriple.isOSBinFormatMachO() &amp;&amp; !<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;hasSection() &amp;&amp;</Highlight></CodeLine>
<Link id="l02578" /><CodeLine lineNumber="2578"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;isConstant()) &#123;</Highlight></CodeLine>
<Link id="l02579" /><CodeLine lineNumber="2579"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> Seq = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;ConstantDataSequential&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getInitializer());</Highlight></CodeLine>
<Link id="l02580" /><CodeLine lineNumber="2580"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Seq &amp;&amp; Seq-&gt;isCString())</Highlight></CodeLine>
<Link id="l02581" /><CodeLine lineNumber="2581"><Highlight kind="normal">        NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalobject/#a959c99adbdc7f8375cf866916c6b60f2">setSection</a>(</Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;TEXT,&#95;&#95;asan&#95;cstring,regular&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02582" /><CodeLine lineNumber="2582"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02583" /><CodeLine lineNumber="2583"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02584" /><CodeLine lineNumber="2584"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Transfer the debug info and type metadata.  The payload starts at offset</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02585" /><CodeLine lineNumber="2585"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// zero so we can copy the metadata over as is.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02586" /><CodeLine lineNumber="2586"><Highlight kind="normal">    NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalobject/#a6aa0afd1200f5f282ca02a9ebcf87ca7">copyMetadata</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>, 0);</Highlight></CodeLine>
<Link id="l02587" /><CodeLine lineNumber="2587"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02588" /><CodeLine lineNumber="2588"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Indices2&#91;2&#93;;</Highlight></CodeLine>
<Link id="l02589" /><CodeLine lineNumber="2589"><Highlight kind="normal">    Indices2&#91;0&#93; = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a8246a9e9405ffe2a9d8d020a949c8e96">getInt32</a>(0);</Highlight></CodeLine>
<Link id="l02590" /><CodeLine lineNumber="2590"><Highlight kind="normal">    Indices2&#91;1&#93; = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a8246a9e9405ffe2a9d8d020a949c8e96">getInt32</a>(0);</Highlight></CodeLine>
<Link id="l02591" /><CodeLine lineNumber="2591"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02592" /><CodeLine lineNumber="2592"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;<a href="/docs/api/classes/llvm/value/#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(</Highlight></CodeLine>
<Link id="l02593" /><CodeLine lineNumber="2593"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/constantexpr/#ae4d4490a35a575d97166684fb15f8662">ConstantExpr::getGetElementPtr</a>(NewTy, NewGlobal, Indices2, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l02594" /><CodeLine lineNumber="2594"><Highlight kind="normal">    NewGlobal-&gt;<a href="/docs/api/classes/llvm/value/#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</Highlight></CodeLine>
<Link id="l02595" /><CodeLine lineNumber="2595"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;eraseFromParent();</Highlight></CodeLine>
<Link id="l02596" /><CodeLine lineNumber="2596"><Highlight kind="normal">    NewGlobals&#91;i&#93; = NewGlobal;</Highlight></CodeLine>
<Link id="l02597" /><CodeLine lineNumber="2597"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02598" /><CodeLine lineNumber="2598"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;ODRIndicator = <a href="/docs/api/classes/llvm/constantpointernull/#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(PtrTy);</Highlight></CodeLine>
<Link id="l02599" /><CodeLine lineNumber="2599"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/globalvalue">GlobalValue</a> &#42;InstrumentedGlobal = NewGlobal;</Highlight></CodeLine>
<Link id="l02600" /><CodeLine lineNumber="2600"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02601" /><CodeLine lineNumber="2601"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> CanUsePrivateAliases =</Highlight></CodeLine>
<Link id="l02602" /><CodeLine lineNumber="2602"><Highlight kind="normal">        TargetTriple.isOSBinFormatELF() || TargetTriple.isOSBinFormatMachO() ||</Highlight></CodeLine>
<Link id="l02603" /><CodeLine lineNumber="2603"><Highlight kind="normal">        TargetTriple.isOSBinFormatWasm();</Highlight></CodeLine>
<Link id="l02604" /><CodeLine lineNumber="2604"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CanUsePrivateAliases &amp;&amp; UsePrivateAlias) &#123;</Highlight></CodeLine>
<Link id="l02605" /><CodeLine lineNumber="2605"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Create local alias for NewGlobal to avoid crash on ODR between</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02606" /><CodeLine lineNumber="2606"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// instrumented and non-instrumented libraries.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02607" /><CodeLine lineNumber="2607"><Highlight kind="normal">      InstrumentedGlobal =</Highlight></CodeLine>
<Link id="l02608" /><CodeLine lineNumber="2608"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/globalalias/#a8a638534b520f72ab7f2c886da739a6c">GlobalAlias::create</a>(<a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalValue::PrivateLinkage</a>, </Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">, NewGlobal);</Highlight></CodeLine>
<Link id="l02609" /><CodeLine lineNumber="2609"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02610" /><CodeLine lineNumber="2610"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02611" /><CodeLine lineNumber="2611"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// ODR should not happen for local linkage.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02612" /><CodeLine lineNumber="2612"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalvalue/#a3ba1af4b9d9faa4a33729bbbecee83d1">hasLocalLinkage</a>()) &#123;</Highlight></CodeLine>
<Link id="l02613" /><CodeLine lineNumber="2613"><Highlight kind="normal">      ODRIndicator =</Highlight></CodeLine>
<Link id="l02614" /><CodeLine lineNumber="2614"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/constantexpr/#a02560cda155aaed54314383bed827d60">ConstantExpr::getIntToPtr</a>(ConstantInt::get(IntptrTy, -1), PtrTy);</Highlight></CodeLine>
<Link id="l02615" /><CodeLine lineNumber="2615"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UseOdrIndicator) &#123;</Highlight></CodeLine>
<Link id="l02616" /><CodeLine lineNumber="2616"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// With local aliases, we need to provide another externally visible</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02617" /><CodeLine lineNumber="2617"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// symbol &#95;&#95;odr&#95;asan&#95;XXX to detect ODR violation.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02618" /><CodeLine lineNumber="2618"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;ODRIndicatorSym =</Highlight></CodeLine>
<Link id="l02619" /><CodeLine lineNumber="2619"><Highlight kind="normal">          </Highlight><Highlight kind="keyword">new</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a>(M, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, <a href="/docs/api/files/lib/lib/target/lib/target/directx/dxilfinalizelinkage-cpp/#ae721973516c2b86042a5127b776e2806">Linkage</a>,</Highlight></CodeLine>
<Link id="l02620" /><CodeLine lineNumber="2620"><Highlight kind="normal">                             <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>()),</Highlight></CodeLine>
<Link id="l02621" /><CodeLine lineNumber="2621"><Highlight kind="normal">                             <a href="#a6e54679eb7c171172210d5898f5e2ebc">kODRGenPrefix</a> + NameForGlobal, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l02622" /><CodeLine lineNumber="2622"><Highlight kind="normal">                             NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalvalue/#a52126ae2091b18cecfd5ad0f0012839a">getThreadLocalMode</a>());</Highlight></CodeLine>
<Link id="l02623" /><CodeLine lineNumber="2623"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02624" /><CodeLine lineNumber="2624"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Set meaningful attributes for indicator symbol.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02625" /><CodeLine lineNumber="2625"><Highlight kind="normal">      ODRIndicatorSym-&gt;setVisibility(NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalvalue/#a28b9561d9ef3d237ef894023187fa26c">getVisibility</a>());</Highlight></CodeLine>
<Link id="l02626" /><CodeLine lineNumber="2626"><Highlight kind="normal">      ODRIndicatorSym-&gt;setDLLStorageClass(NewGlobal-&gt;<a href="/docs/api/classes/llvm/globalvalue/#af09a662b4e302d0683d0fe9dc2a9335f">getDLLStorageClass</a>());</Highlight></CodeLine>
<Link id="l02627" /><CodeLine lineNumber="2627"><Highlight kind="normal">      ODRIndicatorSym-&gt;setAlignment(<a href="/docs/api/structs/llvm/align">Align</a>(1));</Highlight></CodeLine>
<Link id="l02628" /><CodeLine lineNumber="2628"><Highlight kind="normal">      ODRIndicator = ODRIndicatorSym;</Highlight></CodeLine>
<Link id="l02629" /><CodeLine lineNumber="2629"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02630" /><CodeLine lineNumber="2630"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02631" /><CodeLine lineNumber="2631"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;Initializer = <a href="/docs/api/classes/llvm/constantstruct/#a54fcfa620deb80373f489ba2fdad7643">ConstantStruct::get</a>(</Highlight></CodeLine>
<Link id="l02632" /><CodeLine lineNumber="2632"><Highlight kind="normal">        GlobalStructTy,</Highlight></CodeLine>
<Link id="l02633" /><CodeLine lineNumber="2633"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/constantexpr/#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(InstrumentedGlobal, IntptrTy),</Highlight></CodeLine>
<Link id="l02634" /><CodeLine lineNumber="2634"><Highlight kind="normal">        ConstantInt::get(IntptrTy, SizeInBytes),</Highlight></CodeLine>
<Link id="l02635" /><CodeLine lineNumber="2635"><Highlight kind="normal">        ConstantInt::get(IntptrTy, SizeInBytes + RightRedzoneSize),</Highlight></CodeLine>
<Link id="l02636" /><CodeLine lineNumber="2636"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/constantexpr/#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(Name, IntptrTy),</Highlight></CodeLine>
<Link id="l02637" /><CodeLine lineNumber="2637"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/constantexpr/#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(getOrCreateModuleName(), IntptrTy),</Highlight></CodeLine>
<Link id="l02638" /><CodeLine lineNumber="2638"><Highlight kind="normal">        ConstantInt::get(IntptrTy, MD.<a href="/docs/api/structs/llvm/globalvalue/sanitizermetadata/#ac1da5875b7fe84a87d30ef1a90524c1c">IsDynInit</a>),</Highlight></CodeLine>
<Link id="l02639" /><CodeLine lineNumber="2639"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IntptrTy),</Highlight></CodeLine>
<Link id="l02640" /><CodeLine lineNumber="2640"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/constantexpr/#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(ODRIndicator, IntptrTy));</Highlight></CodeLine>
<Link id="l02641" /><CodeLine lineNumber="2641"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02642" /><CodeLine lineNumber="2642"><Highlight kind="normal">    <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;NEW GLOBAL: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; &#42;NewGlobal &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02643" /><CodeLine lineNumber="2643"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02644" /><CodeLine lineNumber="2644"><Highlight kind="normal">    Initializers&#91;i&#93; = Initializer;</Highlight></CodeLine>
<Link id="l02645" /><CodeLine lineNumber="2645"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02646" /><CodeLine lineNumber="2646"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02647" /><CodeLine lineNumber="2647"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Add instrumented globals to llvm.compiler.used list to avoid LTO from</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02648" /><CodeLine lineNumber="2648"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ConstantMerge&#39;ing them.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02649" /><CodeLine lineNumber="2649"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;GlobalValue &#42;, 16&gt;</a> GlobalsToAddToUsedList;</Highlight></CodeLine>
<Link id="l02650" /><CodeLine lineNumber="2650"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> i = 0; i &lt; n; i++) &#123;</Highlight></CodeLine>
<Link id="l02651" /><CodeLine lineNumber="2651"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> = NewGlobals&#91;i&#93;;</Highlight></CodeLine>
<Link id="l02652" /><CodeLine lineNumber="2652"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getName().empty()) </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02653" /><CodeLine lineNumber="2653"><Highlight kind="normal">    GlobalsToAddToUsedList.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</Highlight></CodeLine>
<Link id="l02654" /><CodeLine lineNumber="2654"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02655" /><CodeLine lineNumber="2655"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#aab730f72aa213d5ecc7d1101efda8811">appendToCompilerUsed</a>(M, <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;GlobalValue &#42;&gt;</a>(GlobalsToAddToUsedList));</Highlight></CodeLine>
<Link id="l02656" /><CodeLine lineNumber="2656"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02657" /><CodeLine lineNumber="2657"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UseGlobalsGC &amp;&amp; TargetTriple.isOSBinFormatELF()) &#123;</Highlight></CodeLine>
<Link id="l02658" /><CodeLine lineNumber="2658"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Use COMDAT and register globals even if n == 0 to ensure that (a) the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02659" /><CodeLine lineNumber="2659"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// linkage unit will only have one module constructor, and (b) the register</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02660" /><CodeLine lineNumber="2660"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// function will be called. The module destructor is not created when n ==</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02661" /><CodeLine lineNumber="2661"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02662" /><CodeLine lineNumber="2662"><Highlight kind="normal">    &#42;CtorComdat = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02663" /><CodeLine lineNumber="2663"><Highlight kind="normal">    instrumentGlobalsELF(IRB, NewGlobals, Initializers, <a href="/docs/api/namespaces/llvm/#a6b8599f07b1b0181899c650b7b385b26">getUniqueModuleId</a>(&amp;M));</Highlight></CodeLine>
<Link id="l02664" /><CodeLine lineNumber="2664"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (n == 0) &#123;</Highlight></CodeLine>
<Link id="l02665" /><CodeLine lineNumber="2665"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// When UseGlobalsGC is false, COMDAT can still be used if n == 0, because</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02666" /><CodeLine lineNumber="2666"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// all compile units will have identical module constructor/destructor.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02667" /><CodeLine lineNumber="2667"><Highlight kind="normal">    &#42;CtorComdat = TargetTriple.isOSBinFormatELF();</Highlight></CodeLine>
<Link id="l02668" /><CodeLine lineNumber="2668"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02669" /><CodeLine lineNumber="2669"><Highlight kind="normal">    &#42;CtorComdat = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02670" /><CodeLine lineNumber="2670"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UseGlobalsGC &amp;&amp; TargetTriple.isOSBinFormatCOFF()) &#123;</Highlight></CodeLine>
<Link id="l02671" /><CodeLine lineNumber="2671"><Highlight kind="normal">      InstrumentGlobalsCOFF(IRB, NewGlobals, Initializers);</Highlight></CodeLine>
<Link id="l02672" /><CodeLine lineNumber="2672"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UseGlobalsGC &amp;&amp; ShouldUseMachOGlobalsSection()) &#123;</Highlight></CodeLine>
<Link id="l02673" /><CodeLine lineNumber="2673"><Highlight kind="normal">      InstrumentGlobalsMachO(IRB, NewGlobals, Initializers);</Highlight></CodeLine>
<Link id="l02674" /><CodeLine lineNumber="2674"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02675" /><CodeLine lineNumber="2675"><Highlight kind="normal">      InstrumentGlobalsWithMetadataArray(IRB, NewGlobals, Initializers);</Highlight></CodeLine>
<Link id="l02676" /><CodeLine lineNumber="2676"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02677" /><CodeLine lineNumber="2677"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02678" /><CodeLine lineNumber="2678"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02679" /><CodeLine lineNumber="2679"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Create calls for poisoning before initializers run and unpoisoning after.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02680" /><CodeLine lineNumber="2680"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#ad7ffe665351fede3f8025e2cb84ccc83">ClInitializers</a>)</Highlight></CodeLine>
<Link id="l02681" /><CodeLine lineNumber="2681"><Highlight kind="normal">    createInitializerPoisonCalls();</Highlight></CodeLine>
<Link id="l02682" /><CodeLine lineNumber="2682"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02683" /><CodeLine lineNumber="2683"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; M);</Highlight></CodeLine>
<Link id="l02684" /><CodeLine lineNumber="2684"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02685" /><CodeLine lineNumber="2685"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02686" /><CodeLine lineNumber="2686"><Highlight kind="normal">uint64&#95;t</Highlight></CodeLine>
<Link id="l02687" /><CodeLine lineNumber="2687"><Highlight kind="normal">ModuleAddressSanitizer::getRedzoneSizeForGlobal(uint64&#95;t SizeInBytes)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l02688" /><CodeLine lineNumber="2688"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">constexpr</Highlight><Highlight kind="normal"> uint64&#95;t kMaxRZ = 1 &lt;&lt; 18;</Highlight></CodeLine>
<Link id="l02689" /><CodeLine lineNumber="2689"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t MinRZ = getMinRedzoneSizeForGlobal();</Highlight></CodeLine>
<Link id="l02690" /><CodeLine lineNumber="2690"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02691" /><CodeLine lineNumber="2691"><Highlight kind="normal">  uint64&#95;t <a href="/docs/api/namespaces/llvm/aarch64/#a2a1421dcee7067c8a9c69752bd8ec566a205f1ecf68d1ece7e0640f7b35d4108f">RZ</a> = 0;</Highlight></CodeLine>
<Link id="l02692" /><CodeLine lineNumber="2692"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SizeInBytes &lt;= MinRZ / 2) &#123;</Highlight></CodeLine>
<Link id="l02693" /><CodeLine lineNumber="2693"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Reduce redzone size for small size objects, e.g. int, char&#91;1&#93;. MinRZ is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02694" /><CodeLine lineNumber="2694"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// at least 32 bytes, optimize when SizeInBytes is less than or equal to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02695" /><CodeLine lineNumber="2695"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// half of MinRZ.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02696" /><CodeLine lineNumber="2696"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/aarch64/#a2a1421dcee7067c8a9c69752bd8ec566a205f1ecf68d1ece7e0640f7b35d4108f">RZ</a> = MinRZ - SizeInBytes;</Highlight></CodeLine>
<Link id="l02697" /><CodeLine lineNumber="2697"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02698" /><CodeLine lineNumber="2698"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Calculate RZ, where MinRZ &lt;= RZ &lt;= MaxRZ, and RZ ~ 1/4 &#42; SizeInBytes.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02699" /><CodeLine lineNumber="2699"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/aarch64/#a2a1421dcee7067c8a9c69752bd8ec566a205f1ecf68d1ece7e0640f7b35d4108f">RZ</a> = std::clamp((SizeInBytes / MinRZ / 4) &#42; MinRZ, MinRZ, kMaxRZ);</Highlight></CodeLine>
<Link id="l02700" /><CodeLine lineNumber="2700"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02701" /><CodeLine lineNumber="2701"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Round up to multiple of MinRZ.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02702" /><CodeLine lineNumber="2702"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (SizeInBytes % MinRZ)</Highlight></CodeLine>
<Link id="l02703" /><CodeLine lineNumber="2703"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/aarch64/#a2a1421dcee7067c8a9c69752bd8ec566a205f1ecf68d1ece7e0640f7b35d4108f">RZ</a> += MinRZ - (SizeInBytes % MinRZ);</Highlight></CodeLine>
<Link id="l02704" /><CodeLine lineNumber="2704"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02705" /><CodeLine lineNumber="2705"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02706" /><CodeLine lineNumber="2706"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((RZ + SizeInBytes) % MinRZ == 0);</Highlight></CodeLine>
<Link id="l02707" /><CodeLine lineNumber="2707"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02708" /><CodeLine lineNumber="2708"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/aarch64/#a2a1421dcee7067c8a9c69752bd8ec566a205f1ecf68d1ece7e0640f7b35d4108f">RZ</a>;</Highlight></CodeLine>
<Link id="l02709" /><CodeLine lineNumber="2709"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02710" /><CodeLine lineNumber="2710"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02711" /><CodeLine lineNumber="2711"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> ModuleAddressSanitizer::GetAsanVersion()</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l02712" /><CodeLine lineNumber="2712"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> LongSize = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getDataLayout().getPointerSizeInBits();</Highlight></CodeLine>
<Link id="l02713" /><CodeLine lineNumber="2713"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> isAndroid = <a href="/docs/api/classes/llvm/triple">Triple</a>(<a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getTargetTriple()).<a href="/docs/api/classes/llvm/triple/#a3f3873f607a36e40241082727fef44db">isAndroid</a>();</Highlight></CodeLine>
<Link id="l02714" /><CodeLine lineNumber="2714"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a689a023f54d38d41f6d952cac41ee538">Version</a> = 8;</Highlight></CodeLine>
<Link id="l02715" /><CodeLine lineNumber="2715"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// 32-bit Android is one version ahead because of the switch to dynamic</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02716" /><CodeLine lineNumber="2716"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// shadow.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02717" /><CodeLine lineNumber="2717"><Highlight kind="normal">  <a href="/docs/api/namespaces/llvm/#a689a023f54d38d41f6d952cac41ee538">Version</a> += (LongSize == 32 &amp;&amp; isAndroid);</Highlight></CodeLine>
<Link id="l02718" /><CodeLine lineNumber="2718"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a689a023f54d38d41f6d952cac41ee538">Version</a>;</Highlight></CodeLine>
<Link id="l02719" /><CodeLine lineNumber="2719"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02720" /><CodeLine lineNumber="2720"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02721" /><CodeLine lineNumber="2721"><Highlight kind="normal"><a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;ModuleAddressSanitizer::getOrCreateModuleName() &#123;</Highlight></CodeLine>
<Link id="l02722" /><CodeLine lineNumber="2722"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!ModuleName) &#123;</Highlight></CodeLine>
<Link id="l02723" /><CodeLine lineNumber="2723"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// We shouldn&#39;t merge same module names, as this string serves as unique</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02724" /><CodeLine lineNumber="2724"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// module ID in runtime.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02725" /><CodeLine lineNumber="2725"><Highlight kind="normal">    ModuleName =</Highlight></CodeLine>
<Link id="l02726" /><CodeLine lineNumber="2726"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a15889f1df360601e4f92325b39882a34">createPrivateGlobalForString</a>(M, <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getModuleIdentifier(),</Highlight></CodeLine>
<Link id="l02727" /><CodeLine lineNumber="2727"><Highlight kind="normal">                                     </Highlight><Highlight kind="comment">/&#42;AllowMerging&#42;/</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">, <a href="#a2cd6efecbc36daba036d332c2556b668">genName</a>(</Highlight><Highlight kind="stringliteral">&quot;module&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l02728" /><CodeLine lineNumber="2728"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02729" /><CodeLine lineNumber="2729"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> ModuleName;</Highlight></CodeLine>
<Link id="l02730" /><CodeLine lineNumber="2730"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02731" /><CodeLine lineNumber="2731"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02732" /><CodeLine lineNumber="2732" lineLink="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/moduleaddresssanitizer/#aa85ee3a1ece5874da0e12dc71778c036"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/moduleaddresssanitizer/#aa85ee3a1ece5874da0e12dc71778c036">ModuleAddressSanitizer::instrumentModule</a>() &#123;</Highlight></CodeLine>
<Link id="l02733" /><CodeLine lineNumber="2733"><Highlight kind="normal">  initializeCallbacks();</Highlight></CodeLine>
<Link id="l02734" /><CodeLine lineNumber="2734"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02735" /><CodeLine lineNumber="2735"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Create a module constructor. A destructor is created lazily because not all</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02736" /><CodeLine lineNumber="2736"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// platforms, and not all modules need it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02737" /><CodeLine lineNumber="2737"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ConstructorKind == <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a4cc6684df7b4a92b1dec6fce3264fac8">AsanCtorKind::Global</a>) &#123;</Highlight></CodeLine>
<Link id="l02738" /><CodeLine lineNumber="2738"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CompileKernel) &#123;</Highlight></CodeLine>
<Link id="l02739" /><CodeLine lineNumber="2739"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// The kernel always builds with its own runtime, and therefore does not</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02740" /><CodeLine lineNumber="2740"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// need the init and version check calls.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02741" /><CodeLine lineNumber="2741"><Highlight kind="normal">      AsanCtorFunction = <a href="/docs/api/namespaces/llvm/#a256980e987af753b4c497757fad18000">createSanitizerCtor</a>(M, <a href="#aad3e6eabecd50c9664b21071407c2267">kAsanModuleCtorName</a>);</Highlight></CodeLine>
<Link id="l02742" /><CodeLine lineNumber="2742"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02743" /><CodeLine lineNumber="2743"><Highlight kind="normal">      std::string AsanVersion = std::to&#95;string(GetAsanVersion());</Highlight></CodeLine>
<Link id="l02744" /><CodeLine lineNumber="2744"><Highlight kind="normal">      std::string VersionCheckName =</Highlight></CodeLine>
<Link id="l02745" /><CodeLine lineNumber="2745"><Highlight kind="normal">          InsertVersionCheck ? (<a href="#ae54fd57142396b1edba3f62247d5a176">kAsanVersionCheckNamePrefix</a> + AsanVersion) : </Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02746" /><CodeLine lineNumber="2746"><Highlight kind="normal">      std::tie(AsanCtorFunction, std::ignore) =</Highlight></CodeLine>
<Link id="l02747" /><CodeLine lineNumber="2747"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#a7260773aac0c8769857f551c78b439a3">createSanitizerCtorAndInitFunctions</a>(</Highlight></CodeLine>
<Link id="l02748" /><CodeLine lineNumber="2748"><Highlight kind="normal">              M, <a href="#aad3e6eabecd50c9664b21071407c2267">kAsanModuleCtorName</a>, <a href="#a361b5f11d7b296279f45007be01c2913">kAsanInitName</a>, </Highlight><Highlight kind="comment">/&#42;InitArgTypes=&#42;/</Highlight><Highlight kind="normal">&#123;&#125;,</Highlight></CodeLine>
<Link id="l02749" /><CodeLine lineNumber="2749"><Highlight kind="normal">              </Highlight><Highlight kind="comment">/&#42;InitArgs=&#42;/</Highlight><Highlight kind="normal">&#123;&#125;, VersionCheckName);</Highlight></CodeLine>
<Link id="l02750" /><CodeLine lineNumber="2750"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02751" /><CodeLine lineNumber="2751"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02752" /><CodeLine lineNumber="2752"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02753" /><CodeLine lineNumber="2753"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> CtorComdat = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02754" /><CodeLine lineNumber="2754"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a37e75a212ee37baa76869a8d0195d9e6">ClGlobals</a>) &#123;</Highlight></CodeLine>
<Link id="l02755" /><CodeLine lineNumber="2755"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AsanCtorFunction || ConstructorKind == <a href="/docs/api/namespaces/llvm/#ae42efdb5798a010a1c768129ea7ddf08a6adf97f83acf6453d4a6a4b1070f3754">AsanCtorKind::None</a>);</Highlight></CodeLine>
<Link id="l02756" /><CodeLine lineNumber="2756"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AsanCtorFunction) &#123;</Highlight></CodeLine>
<Link id="l02757" /><CodeLine lineNumber="2757"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(AsanCtorFunction-&gt;getEntryBlock().getTerminator());</Highlight></CodeLine>
<Link id="l02758" /><CodeLine lineNumber="2758"><Highlight kind="normal">      instrumentGlobals(IRB, &amp;CtorComdat);</Highlight></CodeLine>
<Link id="l02759" /><CodeLine lineNumber="2759"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02760" /><CodeLine lineNumber="2760"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&#42;C);</Highlight></CodeLine>
<Link id="l02761" /><CodeLine lineNumber="2761"><Highlight kind="normal">      instrumentGlobals(IRB, &amp;CtorComdat);</Highlight></CodeLine>
<Link id="l02762" /><CodeLine lineNumber="2762"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02763" /><CodeLine lineNumber="2763"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02764" /><CodeLine lineNumber="2764"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02765" /><CodeLine lineNumber="2765"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t Priority = <a href="#a30ad890949cdfd6777919b71f4d09dfe">GetCtorAndDtorPriority</a>(TargetTriple);</Highlight></CodeLine>
<Link id="l02766" /><CodeLine lineNumber="2766"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02767" /><CodeLine lineNumber="2767"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Put the constructor and destructor in comdat if both</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02768" /><CodeLine lineNumber="2768"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (1) global instrumentation is not TU-specific</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02769" /><CodeLine lineNumber="2769"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (2) target is ELF.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02770" /><CodeLine lineNumber="2770"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (UseCtorComdat &amp;&amp; TargetTriple.isOSBinFormatELF() &amp;&amp; CtorComdat) &#123;</Highlight></CodeLine>
<Link id="l02771" /><CodeLine lineNumber="2771"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AsanCtorFunction) &#123;</Highlight></CodeLine>
<Link id="l02772" /><CodeLine lineNumber="2772"><Highlight kind="normal">      AsanCtorFunction-&gt;setComdat(M.getOrInsertComdat(<a href="#aad3e6eabecd50c9664b21071407c2267">kAsanModuleCtorName</a>));</Highlight></CodeLine>
<Link id="l02773" /><CodeLine lineNumber="2773"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#ac030f6d03b674c2d132fd54fb60c9f26">appendToGlobalCtors</a>(M, AsanCtorFunction, Priority, AsanCtorFunction);</Highlight></CodeLine>
<Link id="l02774" /><CodeLine lineNumber="2774"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02775" /><CodeLine lineNumber="2775"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AsanDtorFunction) &#123;</Highlight></CodeLine>
<Link id="l02776" /><CodeLine lineNumber="2776"><Highlight kind="normal">      AsanDtorFunction-&gt;setComdat(M.getOrInsertComdat(<a href="#a8bcb2cf7d004c924b63f1a9d0dfa2847">kAsanModuleDtorName</a>));</Highlight></CodeLine>
<Link id="l02777" /><CodeLine lineNumber="2777"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#aece96440bab42936aa9cf334fb0054cc">appendToGlobalDtors</a>(M, AsanDtorFunction, Priority, AsanDtorFunction);</Highlight></CodeLine>
<Link id="l02778" /><CodeLine lineNumber="2778"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02779" /><CodeLine lineNumber="2779"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02780" /><CodeLine lineNumber="2780"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AsanCtorFunction)</Highlight></CodeLine>
<Link id="l02781" /><CodeLine lineNumber="2781"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#ac030f6d03b674c2d132fd54fb60c9f26">appendToGlobalCtors</a>(M, AsanCtorFunction, Priority);</Highlight></CodeLine>
<Link id="l02782" /><CodeLine lineNumber="2782"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AsanDtorFunction)</Highlight></CodeLine>
<Link id="l02783" /><CodeLine lineNumber="2783"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#aece96440bab42936aa9cf334fb0054cc">appendToGlobalDtors</a>(M, AsanDtorFunction, Priority);</Highlight></CodeLine>
<Link id="l02784" /><CodeLine lineNumber="2784"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02785" /><CodeLine lineNumber="2785"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02786" /><CodeLine lineNumber="2786"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02787" /><CodeLine lineNumber="2787"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02788" /><CodeLine lineNumber="2788"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02789" /><CodeLine lineNumber="2789"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> AddressSanitizer::initializeCallbacks(</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &#42;TLI) &#123;</Highlight></CodeLine>
<Link id="l02790" /><CodeLine lineNumber="2790"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</Highlight></CodeLine>
<Link id="l02791" /><CodeLine lineNumber="2791"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Create &#95;&#95;asan&#95;report&#42; callbacks.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02792" /><CodeLine lineNumber="2792"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// IsWrite, TypeSize and Exp are encoded in the function name.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02793" /><CodeLine lineNumber="2793"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> Exp = 0; Exp &lt; 2; Exp++) &#123;</Highlight></CodeLine>
<Link id="l02794" /><CodeLine lineNumber="2794"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> AccessIsWrite = 0; AccessIsWrite &lt;= 1; AccessIsWrite++) &#123;</Highlight></CodeLine>
<Link id="l02795" /><CodeLine lineNumber="2795"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> std::string TypeStr = AccessIsWrite ? </Highlight><Highlight kind="stringliteral">&quot;store&quot;</Highlight><Highlight kind="normal"> : </Highlight><Highlight kind="stringliteral">&quot;load&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02796" /><CodeLine lineNumber="2796"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> std::string ExpStr = Exp ? </Highlight><Highlight kind="stringliteral">&quot;exp&#95;&quot;</Highlight><Highlight kind="normal"> : </Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02797" /><CodeLine lineNumber="2797"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> std::string EndingStr = Recover ? </Highlight><Highlight kind="stringliteral">&quot;&#95;noabort&quot;</Highlight><Highlight kind="normal"> : </Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02798" /><CodeLine lineNumber="2798"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02799" /><CodeLine lineNumber="2799"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Type &#42;, 3&gt;</a> Args2 = &#123;IntptrTy, IntptrTy&#125;;</Highlight></CodeLine>
<Link id="l02800" /><CodeLine lineNumber="2800"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Type &#42;, 2&gt;</a> Args1&#123;1, IntptrTy&#125;;</Highlight></CodeLine>
<Link id="l02801" /><CodeLine lineNumber="2801"><Highlight kind="normal">      AttributeList AL2;</Highlight></CodeLine>
<Link id="l02802" /><CodeLine lineNumber="2802"><Highlight kind="normal">      AttributeList AL1;</Highlight></CodeLine>
<Link id="l02803" /><CodeLine lineNumber="2803"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Exp) &#123;</Highlight></CodeLine>
<Link id="l02804" /><CodeLine lineNumber="2804"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/type">Type</a> &#42;ExpType = <a href="/docs/api/classes/llvm/type/#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>);</Highlight></CodeLine>
<Link id="l02805" /><CodeLine lineNumber="2805"><Highlight kind="normal">        Args2.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(ExpType);</Highlight></CodeLine>
<Link id="l02806" /><CodeLine lineNumber="2806"><Highlight kind="normal">        Args1.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(ExpType);</Highlight></CodeLine>
<Link id="l02807" /><CodeLine lineNumber="2807"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> AK = TLI-&gt;getExtAttrForI32Param(</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">)) &#123;</Highlight></CodeLine>
<Link id="l02808" /><CodeLine lineNumber="2808"><Highlight kind="normal">          AL2 = AL2.addParamAttribute(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, 2, AK);</Highlight></CodeLine>
<Link id="l02809" /><CodeLine lineNumber="2809"><Highlight kind="normal">          AL1 = AL1.addParamAttribute(&#42;<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, 1, AK);</Highlight></CodeLine>
<Link id="l02810" /><CodeLine lineNumber="2810"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l02811" /><CodeLine lineNumber="2811"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02812" /><CodeLine lineNumber="2812"><Highlight kind="normal">      AsanErrorCallbackSized&#91;AccessIsWrite&#93;&#91;<a href="/docs/api/namespaces/llvm/codeview/#a3fd487d9643d814ffb8ef37443e70a27acad39a154bffb61175f674d6eefaf6d0">Exp</a>&#93; = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</Highlight></CodeLine>
<Link id="l02813" /><CodeLine lineNumber="2813"><Highlight kind="normal">          <a href="#aec7167f84edee7a2c075e1571bab8d8e">kAsanReportErrorTemplate</a> + ExpStr + TypeStr + </Highlight><Highlight kind="stringliteral">&quot;&#95;n&quot;</Highlight><Highlight kind="normal"> + EndingStr,</Highlight></CodeLine>
<Link id="l02814" /><CodeLine lineNumber="2814"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/functiontype/#af8be7844c269f201ebcee1e15048c378">FunctionType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), Args2, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">), AL2);</Highlight></CodeLine>
<Link id="l02815" /><CodeLine lineNumber="2815"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02816" /><CodeLine lineNumber="2816"><Highlight kind="normal">      AsanMemoryAccessCallbackSized&#91;AccessIsWrite&#93;&#91;<a href="/docs/api/namespaces/llvm/codeview/#a3fd487d9643d814ffb8ef37443e70a27acad39a154bffb61175f674d6eefaf6d0">Exp</a>&#93; = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</Highlight></CodeLine>
<Link id="l02817" /><CodeLine lineNumber="2817"><Highlight kind="normal">          <a href="#a27774720f5060297840f5e603fba95f1">ClMemoryAccessCallbackPrefix</a> + ExpStr + TypeStr + </Highlight><Highlight kind="stringliteral">&quot;N&quot;</Highlight><Highlight kind="normal"> + EndingStr,</Highlight></CodeLine>
<Link id="l02818" /><CodeLine lineNumber="2818"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/functiontype/#af8be7844c269f201ebcee1e15048c378">FunctionType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), Args2, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">), AL2);</Highlight></CodeLine>
<Link id="l02819" /><CodeLine lineNumber="2819"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02820" /><CodeLine lineNumber="2820"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> AccessSizeIndex = 0; AccessSizeIndex &lt; <a href="#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>;</Highlight></CodeLine>
<Link id="l02821" /><CodeLine lineNumber="2821"><Highlight kind="normal">           AccessSizeIndex++) &#123;</Highlight></CodeLine>
<Link id="l02822" /><CodeLine lineNumber="2822"><Highlight kind="normal">        </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> std::string Suffix = TypeStr + <a href="/docs/api/namespaces/llvm/#af6295cac2790cf237a57525d3d74b4a6">itostr</a>(1ULL &lt;&lt; AccessSizeIndex);</Highlight></CodeLine>
<Link id="l02823" /><CodeLine lineNumber="2823"><Highlight kind="normal">        AsanErrorCallback&#91;AccessIsWrite&#93;&#91;<a href="/docs/api/namespaces/llvm/codeview/#a3fd487d9643d814ffb8ef37443e70a27acad39a154bffb61175f674d6eefaf6d0">Exp</a>&#93;&#91;AccessSizeIndex&#93; =</Highlight></CodeLine>
<Link id="l02824" /><CodeLine lineNumber="2824"><Highlight kind="normal">            <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</Highlight></CodeLine>
<Link id="l02825" /><CodeLine lineNumber="2825"><Highlight kind="normal">                <a href="#aec7167f84edee7a2c075e1571bab8d8e">kAsanReportErrorTemplate</a> + ExpStr + Suffix + EndingStr,</Highlight></CodeLine>
<Link id="l02826" /><CodeLine lineNumber="2826"><Highlight kind="normal">                <a href="/docs/api/classes/llvm/functiontype/#af8be7844c269f201ebcee1e15048c378">FunctionType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), Args1, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">), AL1);</Highlight></CodeLine>
<Link id="l02827" /><CodeLine lineNumber="2827"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02828" /><CodeLine lineNumber="2828"><Highlight kind="normal">        AsanMemoryAccessCallback&#91;AccessIsWrite&#93;&#91;<a href="/docs/api/namespaces/llvm/codeview/#a3fd487d9643d814ffb8ef37443e70a27acad39a154bffb61175f674d6eefaf6d0">Exp</a>&#93;&#91;AccessSizeIndex&#93; =</Highlight></CodeLine>
<Link id="l02829" /><CodeLine lineNumber="2829"><Highlight kind="normal">            <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(</Highlight></CodeLine>
<Link id="l02830" /><CodeLine lineNumber="2830"><Highlight kind="normal">                <a href="#a27774720f5060297840f5e603fba95f1">ClMemoryAccessCallbackPrefix</a> + ExpStr + Suffix + EndingStr,</Highlight></CodeLine>
<Link id="l02831" /><CodeLine lineNumber="2831"><Highlight kind="normal">                <a href="/docs/api/classes/llvm/functiontype/#af8be7844c269f201ebcee1e15048c378">FunctionType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), Args1, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">), AL1);</Highlight></CodeLine>
<Link id="l02832" /><CodeLine lineNumber="2832"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02833" /><CodeLine lineNumber="2833"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02834" /><CodeLine lineNumber="2834"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02835" /><CodeLine lineNumber="2835"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02836" /><CodeLine lineNumber="2836"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> std::string MemIntrinCallbackPrefix =</Highlight></CodeLine>
<Link id="l02837" /><CodeLine lineNumber="2837"><Highlight kind="normal">      (CompileKernel &amp;&amp; !<a href="#ae49da4e77feeb6c094e35e7c86f5613e">ClKasanMemIntrinCallbackPrefix</a>)</Highlight></CodeLine>
<Link id="l02838" /><CodeLine lineNumber="2838"><Highlight kind="normal">          ? std::string(</Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">)</Highlight></CodeLine>
<Link id="l02839" /><CodeLine lineNumber="2839"><Highlight kind="normal">          : <a href="#a27774720f5060297840f5e603fba95f1">ClMemoryAccessCallbackPrefix</a>;</Highlight></CodeLine>
<Link id="l02840" /><CodeLine lineNumber="2840"><Highlight kind="normal">  AsanMemmove = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(MemIntrinCallbackPrefix + </Highlight><Highlight kind="stringliteral">&quot;memmove&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l02841" /><CodeLine lineNumber="2841"><Highlight kind="normal">                                      PtrTy, PtrTy, PtrTy, IntptrTy);</Highlight></CodeLine>
<Link id="l02842" /><CodeLine lineNumber="2842"><Highlight kind="normal">  AsanMemcpy = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(MemIntrinCallbackPrefix + </Highlight><Highlight kind="stringliteral">&quot;memcpy&quot;</Highlight><Highlight kind="normal">, PtrTy,</Highlight></CodeLine>
<Link id="l02843" /><CodeLine lineNumber="2843"><Highlight kind="normal">                                     PtrTy, PtrTy, IntptrTy);</Highlight></CodeLine>
<Link id="l02844" /><CodeLine lineNumber="2844"><Highlight kind="normal">  AsanMemset = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(MemIntrinCallbackPrefix + </Highlight><Highlight kind="stringliteral">&quot;memset&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l02845" /><CodeLine lineNumber="2845"><Highlight kind="normal">                                     TLI-&gt;<a href="/docs/api/classes/llvm/targetlibraryinfo/#a08ab82ef887ca585ab51c676c55b7a66">getAttrList</a>(<a href="/docs/api/namespaces/llvm/callingconv/#ac6aa1387c4375260e2468eb5a77fdb4cafd841a49aec1539bc88abc8ff9e170fb">C</a>, &#123;1&#125;, </Highlight><Highlight kind="comment">/&#42;Signed=&#42;/</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l02846" /><CodeLine lineNumber="2846"><Highlight kind="normal">                                     PtrTy, PtrTy, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), IntptrTy);</Highlight></CodeLine>
<Link id="l02847" /><CodeLine lineNumber="2847"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02848" /><CodeLine lineNumber="2848"><Highlight kind="normal">  AsanHandleNoReturnFunc =</Highlight></CodeLine>
<Link id="l02849" /><CodeLine lineNumber="2849"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#afa4db1804122bafade11f423f5a483f5">kAsanHandleNoReturnName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>());</Highlight></CodeLine>
<Link id="l02850" /><CodeLine lineNumber="2850"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02851" /><CodeLine lineNumber="2851"><Highlight kind="normal">  AsanPtrCmpFunction =</Highlight></CodeLine>
<Link id="l02852" /><CodeLine lineNumber="2852"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#a2fa18fb24f9feafbd0d0fc1107b131ed">kAsanPtrCmp</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), IntptrTy, IntptrTy);</Highlight></CodeLine>
<Link id="l02853" /><CodeLine lineNumber="2853"><Highlight kind="normal">  AsanPtrSubFunction =</Highlight></CodeLine>
<Link id="l02854" /><CodeLine lineNumber="2854"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#adac38b7a834c74bc8d152337671c1ab7">kAsanPtrSub</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), IntptrTy, IntptrTy);</Highlight></CodeLine>
<Link id="l02855" /><CodeLine lineNumber="2855"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Mapping.InGlobal)</Highlight></CodeLine>
<Link id="l02856" /><CodeLine lineNumber="2856"><Highlight kind="normal">    AsanShadowGlobal = <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertGlobal(</Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;shadow&quot;</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l02857" /><CodeLine lineNumber="2857"><Highlight kind="normal">                                           <a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), 0));</Highlight></CodeLine>
<Link id="l02858" /><CodeLine lineNumber="2858"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02859" /><CodeLine lineNumber="2859"><Highlight kind="normal">  AMDGPUAddressShared =</Highlight></CodeLine>
<Link id="l02860" /><CodeLine lineNumber="2860"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#a2121416d2692ea7ec2c9522291600a19">kAMDGPUAddressSharedName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1fb6e8365dbf4ef3a7426ff3d531ff87">getInt1Ty</a>(), PtrTy);</Highlight></CodeLine>
<Link id="l02861" /><CodeLine lineNumber="2861"><Highlight kind="normal">  AMDGPUAddressPrivate =</Highlight></CodeLine>
<Link id="l02862" /><CodeLine lineNumber="2862"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/arm/#ac2456158e5acb44477d8ecfa2d04dbdea69691c7bdcc3ce6d5d8a1361f22d04ac">M</a>.getOrInsertFunction(<a href="#ae6098b64cdbf4d809b1f3f86a866c56a">kAMDGPUAddressPrivateName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1fb6e8365dbf4ef3a7426ff3d531ff87">getInt1Ty</a>(), PtrTy);</Highlight></CodeLine>
<Link id="l02863" /><CodeLine lineNumber="2863"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02864" /><CodeLine lineNumber="2864"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02865" /><CodeLine lineNumber="2865" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a10f3ee26e5d2bcc100abe6939fdf9fd6"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a10f3ee26e5d2bcc100abe6939fdf9fd6">AddressSanitizer::maybeInsertAsanInitAtFunctionEntry</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &#123;</Highlight></CodeLine>
<Link id="l02866" /><CodeLine lineNumber="2866"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For each NSObject descendant having a +load method, this method is invoked</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02867" /><CodeLine lineNumber="2867"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// by the ObjC runtime before any of the static constructors is called.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02868" /><CodeLine lineNumber="2868"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Therefore we need to instrument such methods with a call to &#95;&#95;asan&#95;init</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02869" /><CodeLine lineNumber="2869"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// at the beginning in order to initialize our runtime before any access to</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02870" /><CodeLine lineNumber="2870"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// the shadow memory.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02871" /><CodeLine lineNumber="2871"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We cannot just ignore these methods, because they may call other</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02872" /><CodeLine lineNumber="2872"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// instrumented functions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02873" /><CodeLine lineNumber="2873"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName().contains(</Highlight><Highlight kind="stringliteral">&quot; load&#93;&quot;</Highlight><Highlight kind="normal">)) &#123;</Highlight></CodeLine>
<Link id="l02874" /><CodeLine lineNumber="2874"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/functioncallee">FunctionCallee</a> AsanInitFunction =</Highlight></CodeLine>
<Link id="l02875" /><CodeLine lineNumber="2875"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#a67d90c79914c0bdfadad630647f8843b">declareSanitizerInitFunction</a>(&#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent(), <a href="#a361b5f11d7b296279f45007be01c2913">kAsanInitName</a>, &#123;&#125;);</Highlight></CodeLine>
<Link id="l02876" /><CodeLine lineNumber="2876"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.front(), <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.front().begin());</Highlight></CodeLine>
<Link id="l02877" /><CodeLine lineNumber="2877"><Highlight kind="normal">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(AsanInitFunction, &#123;&#125;);</Highlight></CodeLine>
<Link id="l02878" /><CodeLine lineNumber="2878"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02879" /><CodeLine lineNumber="2879"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02880" /><CodeLine lineNumber="2880"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02881" /><CodeLine lineNumber="2881"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02882" /><CodeLine lineNumber="2882"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02883" /><CodeLine lineNumber="2883" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#abc1dbfd3922f952c6e5edbed42521c54"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#abc1dbfd3922f952c6e5edbed42521c54">AddressSanitizer::maybeInsertDynamicShadowAtFunctionEntry</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &#123;</Highlight></CodeLine>
<Link id="l02884" /><CodeLine lineNumber="2884"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Generate code only when dynamic addressing is needed.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02885" /><CodeLine lineNumber="2885"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Mapping.Offset != <a href="#a8d1135f2ee91e5d486647a37f8074dcc">kDynamicShadowSentinel</a>)</Highlight></CodeLine>
<Link id="l02886" /><CodeLine lineNumber="2886"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02887" /><CodeLine lineNumber="2887"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02888" /><CodeLine lineNumber="2888"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.front().front());</Highlight></CodeLine>
<Link id="l02889" /><CodeLine lineNumber="2889"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Mapping.InGlobal) &#123;</Highlight></CodeLine>
<Link id="l02890" /><CodeLine lineNumber="2890"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a63147f939444e77f3a294dc59c2939ba">ClWithIfuncSuppressRemat</a>) &#123;</Highlight></CodeLine>
<Link id="l02891" /><CodeLine lineNumber="2891"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// An empty inline asm with input reg == output reg.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02892" /><CodeLine lineNumber="2892"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// An opaque pointer-to-int cast, basically.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02893" /><CodeLine lineNumber="2893"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/inlineasm">InlineAsm</a> &#42;Asm = <a href="/docs/api/classes/llvm/inlineasm/#a44dec91bb943f56f8bba3e9171a76947">InlineAsm::get</a>(</Highlight></CodeLine>
<Link id="l02894" /><CodeLine lineNumber="2894"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/functiontype/#af8be7844c269f201ebcee1e15048c378">FunctionType::get</a>(IntptrTy, &#123;AsanShadowGlobal-&gt;getType()&#125;, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l02895" /><CodeLine lineNumber="2895"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/stringref">StringRef</a>(</Highlight><Highlight kind="stringliteral">&quot;&quot;</Highlight><Highlight kind="normal">), <a href="/docs/api/classes/llvm/stringref">StringRef</a>(</Highlight><Highlight kind="stringliteral">&quot;=r,0&quot;</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l02896" /><CodeLine lineNumber="2896"><Highlight kind="normal">          </Highlight><Highlight kind="comment">/&#42;hasSideEffects=&#42;/</Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02897" /><CodeLine lineNumber="2897"><Highlight kind="normal">      LocalDynamicShadow =</Highlight></CodeLine>
<Link id="l02898" /><CodeLine lineNumber="2898"><Highlight kind="normal">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ab086c5b9f9563eda0cdd703f454e041e">CreateCall</a>(Asm, &#123;AsanShadowGlobal&#125;, </Highlight><Highlight kind="stringliteral">&quot;.asan.shadow&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02899" /><CodeLine lineNumber="2899"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02900" /><CodeLine lineNumber="2900"><Highlight kind="normal">      LocalDynamicShadow =</Highlight></CodeLine>
<Link id="l02901" /><CodeLine lineNumber="2901"><Highlight kind="normal">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(AsanShadowGlobal, IntptrTy, </Highlight><Highlight kind="stringliteral">&quot;.asan.shadow&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02902" /><CodeLine lineNumber="2902"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02903" /><CodeLine lineNumber="2903"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l02904" /><CodeLine lineNumber="2904"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;GlobalDynamicAddress = <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent()-&gt;getOrInsertGlobal(</Highlight></CodeLine>
<Link id="l02905" /><CodeLine lineNumber="2905"><Highlight kind="normal">        <a href="#a72f82be6c1dbdf567e8dd11251e87000">kAsanShadowMemoryDynamicAddress</a>, IntptrTy);</Highlight></CodeLine>
<Link id="l02906" /><CodeLine lineNumber="2906"><Highlight kind="normal">    LocalDynamicShadow = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(IntptrTy, GlobalDynamicAddress);</Highlight></CodeLine>
<Link id="l02907" /><CodeLine lineNumber="2907"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02908" /><CodeLine lineNumber="2908"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02909" /><CodeLine lineNumber="2909"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02910" /><CodeLine lineNumber="2910"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02911" /><CodeLine lineNumber="2911" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a5f0e568588160e095493dcfc7b5a010e"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a5f0e568588160e095493dcfc7b5a010e">AddressSanitizer::markEscapedLocalAllocas</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &#123;</Highlight></CodeLine>
<Link id="l02912" /><CodeLine lineNumber="2912"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Find the one possible call to llvm.localescape and pre-mark allocas passed</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02913" /><CodeLine lineNumber="2913"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// to it as uninteresting. This assumes we haven&#39;t started processing allocas</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02914" /><CodeLine lineNumber="2914"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// yet. This check is done up front because iterating the use list in</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02915" /><CodeLine lineNumber="2915"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// isInterestingAlloca would be algorithmically slower.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02916" /><CodeLine lineNumber="2916"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ProcessedAllocas.empty() &amp;&amp; </Highlight><Highlight kind="stringliteral">&quot;must process localescape before allocas&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02917" /><CodeLine lineNumber="2917"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02918" /><CodeLine lineNumber="2918"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Try to get the declaration of llvm.localescape. If it&#39;s not in the module,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02919" /><CodeLine lineNumber="2919"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// we can exit early.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02920" /><CodeLine lineNumber="2920"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent()-&gt;getFunction(</Highlight><Highlight kind="stringliteral">&quot;llvm.localescape&quot;</Highlight><Highlight kind="normal">)) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02921" /><CodeLine lineNumber="2921"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02922" /><CodeLine lineNumber="2922"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Look for a call to llvm.localescape call in the entry block. It can&#39;t be in</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02923" /><CodeLine lineNumber="2923"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// any other block.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02924" /><CodeLine lineNumber="2924"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getEntryBlock()) &#123;</Highlight></CodeLine>
<Link id="l02925" /><CodeLine lineNumber="2925"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/intrinsicinst">IntrinsicInst</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;IntrinsicInst&gt;</a>(&amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</Highlight></CodeLine>
<Link id="l02926" /><CodeLine lineNumber="2926"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a> &amp;&amp; <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>-&gt;getIntrinsicID() == Intrinsic::localescape) &#123;</Highlight></CodeLine>
<Link id="l02927" /><CodeLine lineNumber="2927"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// We found a call. Mark all the allocas passed in as uninteresting.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02928" /><CodeLine lineNumber="2928"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/value">Value</a> &#42;Arg : <a href="/docs/api/files/lib/lib/target/lib/target/nvptx/nvvmintrrange-cpp/#ac5804672fc0850438d63caec770647f8">II</a>-&gt;args()) &#123;</Highlight></CodeLine>
<Link id="l02929" /><CodeLine lineNumber="2929"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;AI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;AllocaInst&gt;</a>(Arg-&gt;stripPointerCasts());</Highlight></CodeLine>
<Link id="l02930" /><CodeLine lineNumber="2930"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AI &amp;&amp; AI-&gt;<a href="/docs/api/classes/llvm/allocainst/#a36e31f42170be95fc392dad696d9ba19">isStaticAlloca</a>() &amp;&amp;</Highlight></CodeLine>
<Link id="l02931" /><CodeLine lineNumber="2931"><Highlight kind="normal">               </Highlight><Highlight kind="stringliteral">&quot;non-static alloca arg to localescape&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02932" /><CodeLine lineNumber="2932"><Highlight kind="normal">        ProcessedAllocas&#91;AI&#93; = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02933" /><CodeLine lineNumber="2933"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l02934" /><CodeLine lineNumber="2934"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02935" /><CodeLine lineNumber="2935"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l02936" /><CodeLine lineNumber="2936"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l02937" /><CodeLine lineNumber="2937"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02938" /><CodeLine lineNumber="2938"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02939" /><CodeLine lineNumber="2939" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a198a94d5bead3d753bfc1bc8383e16e6"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a198a94d5bead3d753bfc1bc8383e16e6">AddressSanitizer::suppressInstrumentationSiteForDebug</a>(</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> &amp;Instrumented) &#123;</Highlight></CodeLine>
<Link id="l02940" /><CodeLine lineNumber="2940"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> ShouldInstrument =</Highlight></CodeLine>
<Link id="l02941" /><CodeLine lineNumber="2941"><Highlight kind="normal">      <a href="#a0dd632512536154ac3d012e7065f2bcf">ClDebugMin</a> &lt; 0 || <a href="#a8052781b69a1a9e2f58c190a15b67628">ClDebugMax</a> &lt; 0 ||</Highlight></CodeLine>
<Link id="l02942" /><CodeLine lineNumber="2942"><Highlight kind="normal">      (Instrumented &gt;= <a href="#a0dd632512536154ac3d012e7065f2bcf">ClDebugMin</a> &amp;&amp; Instrumented &lt;= <a href="#a8052781b69a1a9e2f58c190a15b67628">ClDebugMax</a>);</Highlight></CodeLine>
<Link id="l02943" /><CodeLine lineNumber="2943"><Highlight kind="normal">  Instrumented++;</Highlight></CodeLine>
<Link id="l02944" /><CodeLine lineNumber="2944"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> !ShouldInstrument;</Highlight></CodeLine>
<Link id="l02945" /><CodeLine lineNumber="2945"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l02946" /><CodeLine lineNumber="2946"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02947" /><CodeLine lineNumber="2947" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a489ae04c136c4b088d849d7d6dc20965"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a489ae04c136c4b088d849d7d6dc20965">AddressSanitizer::instrumentFunction</a>(<a href="/docs/api/classes/llvm/function">Function</a> &amp;<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</Highlight></CodeLine>
<Link id="l02948" /><CodeLine lineNumber="2948"><Highlight kind="normal">                                          </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/targetlibraryinfo">TargetLibraryInfo</a> &#42;TLI) &#123;</Highlight></CodeLine>
<Link id="l02949" /><CodeLine lineNumber="2949"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.empty())</Highlight></CodeLine>
<Link id="l02950" /><CodeLine lineNumber="2950"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02951" /><CodeLine lineNumber="2951"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getLinkage() == <a href="/docs/api/classes/llvm/globalvalue/#aedfa75f0c85c4aa85b257f066fbea57caa67f293befacbbf974525116ccf2ff42">GlobalValue::AvailableExternallyLinkage</a>) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02952" /><CodeLine lineNumber="2952"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="#aa14af85369bdb6b331cd00f499d4cf63">ClDebugFunc</a>.empty() &amp;&amp; <a href="#aa14af85369bdb6b331cd00f499d4cf63">ClDebugFunc</a> == <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName()) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02953" /><CodeLine lineNumber="2953"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName().starts&#95;with(</Highlight><Highlight kind="stringliteral">&quot;&#95;&#95;asan&#95;&quot;</Highlight><Highlight kind="normal">)) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02954" /><CodeLine lineNumber="2954"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.isPresplitCoroutine())</Highlight></CodeLine>
<Link id="l02955" /><CodeLine lineNumber="2955"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02956" /><CodeLine lineNumber="2956"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02957" /><CodeLine lineNumber="2957"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> FunctionModified = </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02958" /><CodeLine lineNumber="2958"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02959" /><CodeLine lineNumber="2959"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Do not apply any instrumentation for naked functions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02960" /><CodeLine lineNumber="2960"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(Attribute::Naked))</Highlight></CodeLine>
<Link id="l02961" /><CodeLine lineNumber="2961"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> FunctionModified;</Highlight></CodeLine>
<Link id="l02962" /><CodeLine lineNumber="2962"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02963" /><CodeLine lineNumber="2963"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If needed, insert &#95;&#95;asan&#95;init before checking for SanitizeAddress attr.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02964" /><CodeLine lineNumber="2964"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// This function needs to be called even if the function body is not</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02965" /><CodeLine lineNumber="2965"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// instrumented.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02966" /><CodeLine lineNumber="2966"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a10f3ee26e5d2bcc100abe6939fdf9fd6">maybeInsertAsanInitAtFunctionEntry</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))</Highlight></CodeLine>
<Link id="l02967" /><CodeLine lineNumber="2967"><Highlight kind="normal">    FunctionModified = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l02968" /><CodeLine lineNumber="2968"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02969" /><CodeLine lineNumber="2969"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Leave if the function doesn&#39;t need instrumentation.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02970" /><CodeLine lineNumber="2970"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(Attribute::SanitizeAddress)) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> FunctionModified;</Highlight></CodeLine>
<Link id="l02971" /><CodeLine lineNumber="2971"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02972" /><CodeLine lineNumber="2972"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(Attribute::DisableSanitizerInstrumentation))</Highlight></CodeLine>
<Link id="l02973" /><CodeLine lineNumber="2973"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> FunctionModified;</Highlight></CodeLine>
<Link id="l02974" /><CodeLine lineNumber="2974"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02975" /><CodeLine lineNumber="2975"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;ASAN instrumenting:\\n&quot;</Highlight><Highlight kind="normal"> &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02976" /><CodeLine lineNumber="2976"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02977" /><CodeLine lineNumber="2977"><Highlight kind="normal">  initializeCallbacks(TLI);</Highlight></CodeLine>
<Link id="l02978" /><CodeLine lineNumber="2978"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02979" /><CodeLine lineNumber="2979"><Highlight kind="normal">  FunctionStateRAII CleanupObj(</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l02980" /><CodeLine lineNumber="2980"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02981" /><CodeLine lineNumber="2981"><Highlight kind="normal">  <a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter">RuntimeCallInserter</a> RTCI(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</Highlight></CodeLine>
<Link id="l02982" /><CodeLine lineNumber="2982"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02983" /><CodeLine lineNumber="2983"><Highlight kind="normal">  FunctionModified |= <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#abc1dbfd3922f952c6e5edbed42521c54">maybeInsertDynamicShadowAtFunctionEntry</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</Highlight></CodeLine>
<Link id="l02984" /><CodeLine lineNumber="2984"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02985" /><CodeLine lineNumber="2985"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We can&#39;t instrument allocas used with llvm.localescape. Only static allocas</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02986" /><CodeLine lineNumber="2986"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// can be passed to that intrinsic.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02987" /><CodeLine lineNumber="2987"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a5f0e568588160e095493dcfc7b5a010e">markEscapedLocalAllocas</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</Highlight></CodeLine>
<Link id="l02988" /><CodeLine lineNumber="2988"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02989" /><CodeLine lineNumber="2989"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We want to instrument every address only once per basic block (unless there</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02990" /><CodeLine lineNumber="2990"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// are calls between uses).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02991" /><CodeLine lineNumber="2991"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallptrset">SmallPtrSet&lt;Value &#42;, 16&gt;</a> TempsToInstrument;</Highlight></CodeLine>
<Link id="l02992" /><CodeLine lineNumber="2992"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;InterestingMemoryOperand, 16&gt;</a> OperandsToInstrument;</Highlight></CodeLine>
<Link id="l02993" /><CodeLine lineNumber="2993"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;MemIntrinsic &#42;, 16&gt;</a> IntrinToInstrument;</Highlight></CodeLine>
<Link id="l02994" /><CodeLine lineNumber="2994"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Instruction &#42;, 8&gt;</a> NoReturnCalls;</Highlight></CodeLine>
<Link id="l02995" /><CodeLine lineNumber="2995"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;BasicBlock &#42;, 16&gt;</a> AllBlocks;</Highlight></CodeLine>
<Link id="l02996" /><CodeLine lineNumber="2996"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Instruction &#42;, 16&gt;</a> PointerComparisonsOrSubtracts;</Highlight></CodeLine>
<Link id="l02997" /><CodeLine lineNumber="2997"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02998" /><CodeLine lineNumber="2998"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Fill the set of memory operations to instrument.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l02999" /><CodeLine lineNumber="2999"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;BB : <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &#123;</Highlight></CodeLine>
<Link id="l03000" /><CodeLine lineNumber="3000"><Highlight kind="normal">    AllBlocks.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(&amp;BB);</Highlight></CodeLine>
<Link id="l03001" /><CodeLine lineNumber="3001"><Highlight kind="normal">    TempsToInstrument.<a href="/docs/api/classes/llvm/smallptrsetimplbase/#a16413f1a88d8baca228d0a1b4cc0bfc6">clear</a>();</Highlight></CodeLine>
<Link id="l03002" /><CodeLine lineNumber="3002"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> NumInsnsPerBB = 0;</Highlight></CodeLine>
<Link id="l03003" /><CodeLine lineNumber="3003"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;Inst : BB) &#123;</Highlight></CodeLine>
<Link id="l03004" /><CodeLine lineNumber="3004"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LooksLikeCodeInBug11395(&amp;Inst)) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03005" /><CodeLine lineNumber="3005"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// Skip instructions inserted by another instrumentation.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03006" /><CodeLine lineNumber="3006"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Inst.<a href="/docs/api/classes/llvm/instruction/#a565f546ad95bd3a9bbe9a1e5040803f0">hasMetadata</a>(LLVMContext::MD&#95;nosanitize))</Highlight></CodeLine>
<Link id="l03007" /><CodeLine lineNumber="3007"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03008" /><CodeLine lineNumber="3008"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;InterestingMemoryOperand, 1&gt;</a> InterestingOperands;</Highlight></CodeLine>
<Link id="l03009" /><CodeLine lineNumber="3009"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a768d59ed528e3f461065b20571b913dc">getInterestingMemoryOperands</a>(&amp;Inst, InterestingOperands);</Highlight></CodeLine>
<Link id="l03010" /><CodeLine lineNumber="3010"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03011" /><CodeLine lineNumber="3011"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!InterestingOperands.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#ad9a3c7bc26b130377bbafc170b5f88a2">empty</a>()) &#123;</Highlight></CodeLine>
<Link id="l03012" /><CodeLine lineNumber="3012"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;Operand : InterestingOperands) &#123;</Highlight></CodeLine>
<Link id="l03013" /><CodeLine lineNumber="3013"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="#a6d7586f09e72a8d0b38a7b28ce03068c">ClOpt</a> &amp;&amp; <a href="#ab320a8dd5d6290c1e021de274df4c809">ClOptSameTemp</a>) &#123;</Highlight></CodeLine>
<Link id="l03014" /><CodeLine lineNumber="3014"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = Operand.getPtr();</Highlight></CodeLine>
<Link id="l03015" /><CodeLine lineNumber="3015"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// If we have a mask, skip instrumentation if we&#39;ve already</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03016" /><CodeLine lineNumber="3016"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// instrumented the full object. But don&#39;t add to TempsToInstrument</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03017" /><CodeLine lineNumber="3017"><Highlight kind="normal">            </Highlight><Highlight kind="comment">// because we might get another load/store with a different mask.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03018" /><CodeLine lineNumber="3018"><Highlight kind="normal">            </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Operand.MaybeMask) &#123;</Highlight></CodeLine>
<Link id="l03019" /><CodeLine lineNumber="3019"><Highlight kind="normal">              </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TempsToInstrument.<a href="/docs/api/classes/llvm/smallptrsetimpl/#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>))</Highlight></CodeLine>
<Link id="l03020" /><CodeLine lineNumber="3020"><Highlight kind="normal">                </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">; </Highlight><Highlight kind="comment">// We&#39;ve seen this (whole) temp in the current BB.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03021" /><CodeLine lineNumber="3021"><Highlight kind="normal">            &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03022" /><CodeLine lineNumber="3022"><Highlight kind="normal">              </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!TempsToInstrument.<a href="/docs/api/classes/llvm/smallptrsetimpl/#a9d834ae3da8c62c2b668dada51335eb0">insert</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>).second)</Highlight></CodeLine>
<Link id="l03023" /><CodeLine lineNumber="3023"><Highlight kind="normal">                </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">; </Highlight><Highlight kind="comment">// We&#39;ve seen this temp in the current BB.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03024" /><CodeLine lineNumber="3024"><Highlight kind="normal">            &#125;</Highlight></CodeLine>
<Link id="l03025" /><CodeLine lineNumber="3025"><Highlight kind="normal">          &#125;</Highlight></CodeLine>
<Link id="l03026" /><CodeLine lineNumber="3026"><Highlight kind="normal">          OperandsToInstrument.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Operand);</Highlight></CodeLine>
<Link id="l03027" /><CodeLine lineNumber="3027"><Highlight kind="normal">          NumInsnsPerBB++;</Highlight></CodeLine>
<Link id="l03028" /><CodeLine lineNumber="3028"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l03029" /><CodeLine lineNumber="3029"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (((<a href="#afe56a2bdf58d01cf437e1abba61e2830">ClInvalidPointerPairs</a> || <a href="#a7988b8281b1972c35eb5833f8c23a1a3">ClInvalidPointerCmp</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l03030" /><CodeLine lineNumber="3030"><Highlight kind="normal">                  <a href="#a8d829e3f1a798c5c559b716ba05a4d7d">isInterestingPointerComparison</a>(&amp;Inst)) ||</Highlight></CodeLine>
<Link id="l03031" /><CodeLine lineNumber="3031"><Highlight kind="normal">                 ((<a href="#afe56a2bdf58d01cf437e1abba61e2830">ClInvalidPointerPairs</a> || <a href="#a8398c67027004edc3649be6b6db60eab">ClInvalidPointerSub</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l03032" /><CodeLine lineNumber="3032"><Highlight kind="normal">                  <a href="#a1e0c09290631b1be732e7387c75aca09">isInterestingPointerSubtraction</a>(&amp;Inst))) &#123;</Highlight></CodeLine>
<Link id="l03033" /><CodeLine lineNumber="3033"><Highlight kind="normal">        PointerComparisonsOrSubtracts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(&amp;Inst);</Highlight></CodeLine>
<Link id="l03034" /><CodeLine lineNumber="3034"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/memintrinsic">MemIntrinsic</a> &#42;<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;MemIntrinsic&gt;</a>(&amp;Inst)) &#123;</Highlight></CodeLine>
<Link id="l03035" /><CodeLine lineNumber="3035"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// ok, take it.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03036" /><CodeLine lineNumber="3036"><Highlight kind="normal">        IntrinToInstrument.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/files/lib/lib/codegen/lib/codegen/globalisel/irtranslator-cpp/#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</Highlight></CodeLine>
<Link id="l03037" /><CodeLine lineNumber="3037"><Highlight kind="normal">        NumInsnsPerBB++;</Highlight></CodeLine>
<Link id="l03038" /><CodeLine lineNumber="3038"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03039" /><CodeLine lineNumber="3039"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;CB = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;CallBase&gt;</a>(&amp;Inst)) &#123;</Highlight></CodeLine>
<Link id="l03040" /><CodeLine lineNumber="3040"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// A call inside BB.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03041" /><CodeLine lineNumber="3041"><Highlight kind="normal">          TempsToInstrument.<a href="/docs/api/classes/llvm/smallptrsetimplbase/#a16413f1a88d8baca228d0a1b4cc0bfc6">clear</a>();</Highlight></CodeLine>
<Link id="l03042" /><CodeLine lineNumber="3042"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CB-&gt;doesNotReturn())</Highlight></CodeLine>
<Link id="l03043" /><CodeLine lineNumber="3043"><Highlight kind="normal">            NoReturnCalls.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(CB);</Highlight></CodeLine>
<Link id="l03044" /><CodeLine lineNumber="3044"><Highlight kind="normal">        &#125;</Highlight></CodeLine>
<Link id="l03045" /><CodeLine lineNumber="3045"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;CI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;CallInst&gt;</a>(&amp;Inst))</Highlight></CodeLine>
<Link id="l03046" /><CodeLine lineNumber="3046"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ae63427c4d8f3c1ce48401b38ed9198f1">maybeMarkSanitizerLibraryCallNoBuiltin</a>(CI, TLI);</Highlight></CodeLine>
<Link id="l03047" /><CodeLine lineNumber="3047"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03048" /><CodeLine lineNumber="3048"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (NumInsnsPerBB &gt;= <a href="#af7099fa6660e94761e7f5b525b330bb2">ClMaxInsnsToInstrumentPerBB</a>) </Highlight><Highlight kind="keywordflow">break</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03049" /><CodeLine lineNumber="3049"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03050" /><CodeLine lineNumber="3050"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03051" /><CodeLine lineNumber="3051"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03052" /><CodeLine lineNumber="3052"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> UseCalls = (InstrumentationWithCallsThreshold &gt;= 0 &amp;&amp;</Highlight></CodeLine>
<Link id="l03053" /><CodeLine lineNumber="3053"><Highlight kind="normal">                   OperandsToInstrument.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() + IntrinToInstrument.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#a1c479a8c434377c2b8cb056bdfdfc201">size</a>() &gt;</Highlight></CodeLine>
<Link id="l03054" /><CodeLine lineNumber="3054"><Highlight kind="normal">                       (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal">)InstrumentationWithCallsThreshold);</Highlight></CodeLine>
<Link id="l03055" /><CodeLine lineNumber="3055"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;DL = <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getDataLayout();</Highlight></CodeLine>
<Link id="l03056" /><CodeLine lineNumber="3056"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/objectsizeoffsetvisitor">ObjectSizeOffsetVisitor</a> ObjSizeVis(DL, TLI, <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getContext());</Highlight></CodeLine>
<Link id="l03057" /><CodeLine lineNumber="3057"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03058" /><CodeLine lineNumber="3058"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Instrument.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03059" /><CodeLine lineNumber="3059"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> NumInstrumented = 0;</Highlight></CodeLine>
<Link id="l03060" /><CodeLine lineNumber="3060"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;Operand : OperandsToInstrument) &#123;</Highlight></CodeLine>
<Link id="l03061" /><CodeLine lineNumber="3061"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a198a94d5bead3d753bfc1bc8383e16e6">suppressInstrumentationSiteForDebug</a>(NumInstrumented))</Highlight></CodeLine>
<Link id="l03062" /><CodeLine lineNumber="3062"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a9e375fb896826338e488dae6f16e853b">instrumentMop</a>(ObjSizeVis, Operand, UseCalls,</Highlight></CodeLine>
<Link id="l03063" /><CodeLine lineNumber="3063"><Highlight kind="normal">                    <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getDataLayout(), RTCI);</Highlight></CodeLine>
<Link id="l03064" /><CodeLine lineNumber="3064"><Highlight kind="normal">    FunctionModified = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03065" /><CodeLine lineNumber="3065"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03066" /><CodeLine lineNumber="3066"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;Inst : IntrinToInstrument) &#123;</Highlight></CodeLine>
<Link id="l03067" /><CodeLine lineNumber="3067"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a198a94d5bead3d753bfc1bc8383e16e6">suppressInstrumentationSiteForDebug</a>(NumInstrumented))</Highlight></CodeLine>
<Link id="l03068" /><CodeLine lineNumber="3068"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ab8e997542278bc23b2e3a5f3ddeffdea">instrumentMemIntrinsic</a>(Inst, RTCI);</Highlight></CodeLine>
<Link id="l03069" /><CodeLine lineNumber="3069"><Highlight kind="normal">    FunctionModified = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03070" /><CodeLine lineNumber="3070"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03071" /><CodeLine lineNumber="3071"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03072" /><CodeLine lineNumber="3072"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#a5d62ed5898951d0775ed218ad3e2d56e">FunctionStackPoisoner</a> FSP(<a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, &#42;</Highlight><Highlight kind="keyword">this</Highlight><Highlight kind="normal">, RTCI);</Highlight></CodeLine>
<Link id="l03073" /><CodeLine lineNumber="3073"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> ChangedStack = FSP.<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6d9d3b77ad59887d486351a427b585b0">runOnFunction</a>();</Highlight></CodeLine>
<Link id="l03074" /><CodeLine lineNumber="3074"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03075" /><CodeLine lineNumber="3075"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We must unpoison the stack before NoReturn calls (throw, &#95;exit, etc).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03076" /><CodeLine lineNumber="3076"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// See e.g. https://github.com/google/sanitizers/issues/37</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03077" /><CodeLine lineNumber="3077"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;CI : NoReturnCalls) &#123;</Highlight></CodeLine>
<Link id="l03078" /><CodeLine lineNumber="3078"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(CI);</Highlight></CodeLine>
<Link id="l03079" /><CodeLine lineNumber="3079"><Highlight kind="normal">    RTCI.<a href="/docs/api/classes/anonymous-namespace-addresssanitizer-cpp-/runtimecallinserter/#ac35be115df797c75d7875cf63e56ea2b">createRuntimeCall</a>(IRB, AsanHandleNoReturnFunc, &#123;&#125;);</Highlight></CodeLine>
<Link id="l03080" /><CodeLine lineNumber="3080"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03081" /><CodeLine lineNumber="3081"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03082" /><CodeLine lineNumber="3082"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;Inst : PointerComparisonsOrSubtracts) &#123;</Highlight></CodeLine>
<Link id="l03083" /><CodeLine lineNumber="3083"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/addresssanitizer/#ae2d43eb64d8a2c479e94d13a0699ba38">instrumentPointerComparisonOrSubtraction</a>(Inst, RTCI);</Highlight></CodeLine>
<Link id="l03084" /><CodeLine lineNumber="3084"><Highlight kind="normal">    FunctionModified = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03085" /><CodeLine lineNumber="3085"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03086" /><CodeLine lineNumber="3086"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03087" /><CodeLine lineNumber="3087"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (ChangedStack || !NoReturnCalls.<a href="/docs/api/classes/llvm/smallvectortemplatecommon/#ad9a3c7bc26b130377bbafc170b5f88a2">empty</a>())</Highlight></CodeLine>
<Link id="l03088" /><CodeLine lineNumber="3088"><Highlight kind="normal">    FunctionModified = </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03089" /><CodeLine lineNumber="3089"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03090" /><CodeLine lineNumber="3090"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;ASAN done instrumenting: &quot;</Highlight><Highlight kind="normal"> &lt;&lt; FunctionModified &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; &quot;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03091" /><CodeLine lineNumber="3091"><Highlight kind="normal">                    &lt;&lt; <a href="/docs/api/files/lib/lib/support/md5-cpp/#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03092" /><CodeLine lineNumber="3092"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03093" /><CodeLine lineNumber="3093"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> FunctionModified;</Highlight></CodeLine>
<Link id="l03094" /><CodeLine lineNumber="3094"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03095" /><CodeLine lineNumber="3095"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03096" /><CodeLine lineNumber="3096"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Workaround for bug 11395: we don&#39;t want to instrument stack in functions</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03097" /><CodeLine lineNumber="3097"><Highlight kind="normal"></Highlight><Highlight kind="comment">// with large assembly blobs (32-bit only), otherwise reg alloc may crash.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03098" /><CodeLine lineNumber="3098"><Highlight kind="normal"></Highlight><Highlight kind="comment">// FIXME: remove once the bug 11395 is fixed.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03099" /><CodeLine lineNumber="3099"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AddressSanitizer::LooksLikeCodeInBug11395(<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &#123;</Highlight></CodeLine>
<Link id="l03100" /><CodeLine lineNumber="3100"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LongSize != 32) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03101" /><CodeLine lineNumber="3101"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/callinst">CallInst</a> &#42;CI = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;CallInst&gt;</a>(<a href="/docs/api/files/lib/lib/support/md5-cpp/#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</Highlight></CodeLine>
<Link id="l03102" /><CodeLine lineNumber="3102"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!CI || !CI-&gt;<a href="/docs/api/classes/llvm/callbase/#a018f0394a375233d538109968b76a05a">isInlineAsm</a>()) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03103" /><CodeLine lineNumber="3103"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CI-&gt;<a href="/docs/api/classes/llvm/callbase/#adde2ea00dd2613ee41bfe91908e4e68e">arg&#95;size</a>() &lt;= 5)</Highlight></CodeLine>
<Link id="l03104" /><CodeLine lineNumber="3104"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03105" /><CodeLine lineNumber="3105"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We have inline assembly with quite a few arguments.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03106" /><CodeLine lineNumber="3106"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03107" /><CodeLine lineNumber="3107"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03108" /><CodeLine lineNumber="3108"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03109" /><CodeLine lineNumber="3109" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a3e899fce2d5eb5d59204369bb5328878"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a3e899fce2d5eb5d59204369bb5328878">FunctionStackPoisoner::initializeCallbacks</a>(<a href="/docs/api/classes/llvm/module">Module</a> &amp;M) &#123;</Highlight></CodeLine>
<Link id="l03110" /><CodeLine lineNumber="3110"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(&#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a07bc11db490f2edf7839493076c56cb0">C</a>);</Highlight></CodeLine>
<Link id="l03111" /><CodeLine lineNumber="3111"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.UseAfterReturn == <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabda68eec46437c384d8dad18d5464ebc35c">AsanDetectStackUseAfterReturnMode::Always</a> ||</Highlight></CodeLine>
<Link id="l03112" /><CodeLine lineNumber="3112"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.UseAfterReturn == <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabdabc366f2d0ba3d681e7a3899917c5d3de">AsanDetectStackUseAfterReturnMode::Runtime</a>) &#123;</Highlight></CodeLine>
<Link id="l03113" /><CodeLine lineNumber="3113"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">char</Highlight><Highlight kind="normal"> &#42;MallocNameTemplate =</Highlight></CodeLine>
<Link id="l03114" /><CodeLine lineNumber="3114"><Highlight kind="normal">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.UseAfterReturn == <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabda68eec46437c384d8dad18d5464ebc35c">AsanDetectStackUseAfterReturnMode::Always</a></Highlight></CodeLine>
<Link id="l03115" /><CodeLine lineNumber="3115"><Highlight kind="normal">            ? <a href="#a7827de59665600c15eebeb456731627c">kAsanStackMallocAlwaysNameTemplate</a></Highlight></CodeLine>
<Link id="l03116" /><CodeLine lineNumber="3116"><Highlight kind="normal">            : <a href="#a311ac214c991fe60e693899d731e311e">kAsanStackMallocNameTemplate</a>;</Highlight></CodeLine>
<Link id="l03117" /><CodeLine lineNumber="3117"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> Index = 0; Index &lt;= <a href="#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a>; Index++) &#123;</Highlight></CodeLine>
<Link id="l03118" /><CodeLine lineNumber="3118"><Highlight kind="normal">      std::string Suffix = <a href="/docs/api/namespaces/llvm/#af6295cac2790cf237a57525d3d74b4a6">itostr</a>(Index);</Highlight></CodeLine>
<Link id="l03119" /><CodeLine lineNumber="3119"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a47e2de0b4b9f5aa2f4dbac5934918332">AsanStackMallocFunc</a>&#91;Index&#93; = M.getOrInsertFunction(</Highlight></CodeLine>
<Link id="l03120" /><CodeLine lineNumber="3120"><Highlight kind="normal">          MallocNameTemplate + Suffix, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</Highlight></CodeLine>
<Link id="l03121" /><CodeLine lineNumber="3121"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a46862a84496d12848de821de87be3cc3">AsanStackFreeFunc</a>&#91;Index&#93; =</Highlight></CodeLine>
<Link id="l03122" /><CodeLine lineNumber="3122"><Highlight kind="normal">          M.getOrInsertFunction(<a href="#a21dae1495bdaa52cff0efeff2bb65742">kAsanStackFreeNameTemplate</a> + Suffix,</Highlight></CodeLine>
<Link id="l03123" /><CodeLine lineNumber="3123"><Highlight kind="normal">                                IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</Highlight></CodeLine>
<Link id="l03124" /><CodeLine lineNumber="3124"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03125" /><CodeLine lineNumber="3125"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03126" /><CodeLine lineNumber="3126"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.UseAfterScope) &#123;</Highlight></CodeLine>
<Link id="l03127" /><CodeLine lineNumber="3127"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a129445d4046d1bb9112ae575997c63cb">AsanPoisonStackMemoryFunc</a> = M.getOrInsertFunction(</Highlight></CodeLine>
<Link id="l03128" /><CodeLine lineNumber="3128"><Highlight kind="normal">        <a href="#a9de96b20be410e7c2014587a070465d4">kAsanPoisonStackMemoryName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</Highlight></CodeLine>
<Link id="l03129" /><CodeLine lineNumber="3129"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#abe4c5b51b8f9aa8c954504023b4c3164">AsanUnpoisonStackMemoryFunc</a> = M.getOrInsertFunction(</Highlight></CodeLine>
<Link id="l03130" /><CodeLine lineNumber="3130"><Highlight kind="normal">        <a href="#aa6ae2abfa7c1477f42010a614aa2e20b">kAsanUnpoisonStackMemoryName</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</Highlight></CodeLine>
<Link id="l03131" /><CodeLine lineNumber="3131"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03132" /><CodeLine lineNumber="3132"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03133" /><CodeLine lineNumber="3133"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> Val : &#123;0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0xf1, 0xf2,</Highlight></CodeLine>
<Link id="l03134" /><CodeLine lineNumber="3134"><Highlight kind="normal">                     0xf3, 0xf5, 0xf8&#125;) &#123;</Highlight></CodeLine>
<Link id="l03135" /><CodeLine lineNumber="3135"><Highlight kind="normal">    std::ostringstream Name;</Highlight></CodeLine>
<Link id="l03136" /><CodeLine lineNumber="3136"><Highlight kind="normal">    Name &lt;&lt; <a href="#a2bec6b8d5a441c0918bbdd1be9df32b3">kAsanSetShadowPrefix</a>;</Highlight></CodeLine>
<Link id="l03137" /><CodeLine lineNumber="3137"><Highlight kind="normal">    Name &lt;&lt; std::setw(2) &lt;&lt; std::setfill(</Highlight><Highlight kind="charliteral">&#39;0&#39;</Highlight><Highlight kind="normal">) &lt;&lt; std::hex &lt;&lt; Val;</Highlight></CodeLine>
<Link id="l03138" /><CodeLine lineNumber="3138"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6e0e5d7f6bd2776c14ebd7d9da5913b9">AsanSetShadowFunc</a>&#91;Val&#93; =</Highlight></CodeLine>
<Link id="l03139" /><CodeLine lineNumber="3139"><Highlight kind="normal">        M.getOrInsertFunction(Name.str(), IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</Highlight></CodeLine>
<Link id="l03140" /><CodeLine lineNumber="3140"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03141" /><CodeLine lineNumber="3141"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03142" /><CodeLine lineNumber="3142"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ae4bcb221f841432521314e7b60c5db2c">AsanAllocaPoisonFunc</a> = M.getOrInsertFunction(</Highlight></CodeLine>
<Link id="l03143" /><CodeLine lineNumber="3143"><Highlight kind="normal">      <a href="#addbdc1734f12bc122f2b204052f426df">kAsanAllocaPoison</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</Highlight></CodeLine>
<Link id="l03144" /><CodeLine lineNumber="3144"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a7eec6ba17e8f3a985fc2103aadeb95f2">AsanAllocasUnpoisonFunc</a> = M.getOrInsertFunction(</Highlight></CodeLine>
<Link id="l03145" /><CodeLine lineNumber="3145"><Highlight kind="normal">      <a href="#afd65995ac50736f33beadc3c0549ce0b">kAsanAllocasUnpoison</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad0243f1634f75e231041023ffaa8501a">getVoidTy</a>(), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</Highlight></CodeLine>
<Link id="l03146" /><CodeLine lineNumber="3146"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03147" /><CodeLine lineNumber="3147"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03148" /><CodeLine lineNumber="3148" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a20e0bf83ea626a73aedc5bc770c461bd"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a20e0bf83ea626a73aedc5bc770c461bd">FunctionStackPoisoner::copyToShadowInline</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowMask,</Highlight></CodeLine>
<Link id="l03149" /><CodeLine lineNumber="3149"><Highlight kind="normal">                                               <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowBytes,</Highlight></CodeLine>
<Link id="l03150" /><CodeLine lineNumber="3150"><Highlight kind="normal">                                               </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> Begin, </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> End,</Highlight></CodeLine>
<Link id="l03151" /><CodeLine lineNumber="3151"><Highlight kind="normal">                                               <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB,</Highlight></CodeLine>
<Link id="l03152" /><CodeLine lineNumber="3152"><Highlight kind="normal">                                               <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase) &#123;</Highlight></CodeLine>
<Link id="l03153" /><CodeLine lineNumber="3153"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Begin &gt;= End)</Highlight></CodeLine>
<Link id="l03154" /><CodeLine lineNumber="3154"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03155" /><CodeLine lineNumber="3155"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03156" /><CodeLine lineNumber="3156"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> LargestStoreSizeInBytes =</Highlight></CodeLine>
<Link id="l03157" /><CodeLine lineNumber="3157"><Highlight kind="normal">      std::min&lt;size&#95;t&gt;(</Highlight><Highlight kind="keyword">sizeof</Highlight><Highlight kind="normal">(uint64&#95;t), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.LongSize / 8);</Highlight></CodeLine>
<Link id="l03158" /><CodeLine lineNumber="3158"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03159" /><CodeLine lineNumber="3159"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsLittleEndian = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getDataLayout().isLittleEndian();</Highlight></CodeLine>
<Link id="l03160" /><CodeLine lineNumber="3160"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03161" /><CodeLine lineNumber="3161"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Poison given range in shadow using larges store size with out leading and</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03162" /><CodeLine lineNumber="3162"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// trailing zeros in ShadowMask. Zeros never change, so they need neither</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03163" /><CodeLine lineNumber="3163"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// poisoning nor up-poisoning. Still we don&#39;t mind if some of them get into a</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03164" /><CodeLine lineNumber="3164"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// middle of a store.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03165" /><CodeLine lineNumber="3165"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> i = Begin; i &lt; End;) &#123;</Highlight></CodeLine>
<Link id="l03166" /><CodeLine lineNumber="3166"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!ShadowMask&#91;i&#93;) &#123;</Highlight></CodeLine>
<Link id="l03167" /><CodeLine lineNumber="3167"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!ShadowBytes&#91;i&#93;);</Highlight></CodeLine>
<Link id="l03168" /><CodeLine lineNumber="3168"><Highlight kind="normal">      ++i;</Highlight></CodeLine>
<Link id="l03169" /><CodeLine lineNumber="3169"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03170" /><CodeLine lineNumber="3170"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03171" /><CodeLine lineNumber="3171"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03172" /><CodeLine lineNumber="3172"><Highlight kind="normal">    </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> StoreSizeInBytes = LargestStoreSizeInBytes;</Highlight></CodeLine>
<Link id="l03173" /><CodeLine lineNumber="3173"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Fit store size into the range.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03174" /><CodeLine lineNumber="3174"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (StoreSizeInBytes &gt; End - i)</Highlight></CodeLine>
<Link id="l03175" /><CodeLine lineNumber="3175"><Highlight kind="normal">      StoreSizeInBytes /= 2;</Highlight></CodeLine>
<Link id="l03176" /><CodeLine lineNumber="3176"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03177" /><CodeLine lineNumber="3177"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Minimize store size by trimming trailing zeros.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03178" /><CodeLine lineNumber="3178"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> j = StoreSizeInBytes - 1; j &amp;&amp; !ShadowMask&#91;i + j&#93;; --j) &#123;</Highlight></CodeLine>
<Link id="l03179" /><CodeLine lineNumber="3179"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">while</Highlight><Highlight kind="normal"> (j &lt;= StoreSizeInBytes / 2)</Highlight></CodeLine>
<Link id="l03180" /><CodeLine lineNumber="3180"><Highlight kind="normal">        StoreSizeInBytes /= 2;</Highlight></CodeLine>
<Link id="l03181" /><CodeLine lineNumber="3181"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03182" /><CodeLine lineNumber="3182"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03183" /><CodeLine lineNumber="3183"><Highlight kind="normal">    uint64&#95;t Val = 0;</Highlight></CodeLine>
<Link id="l03184" /><CodeLine lineNumber="3184"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> j = 0; j &lt; StoreSizeInBytes; j++) &#123;</Highlight></CodeLine>
<Link id="l03185" /><CodeLine lineNumber="3185"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsLittleEndian)</Highlight></CodeLine>
<Link id="l03186" /><CodeLine lineNumber="3186"><Highlight kind="normal">        Val |= (uint64&#95;t)ShadowBytes&#91;i + j&#93; &lt;&lt; (8 &#42; j);</Highlight></CodeLine>
<Link id="l03187" /><CodeLine lineNumber="3187"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03188" /><CodeLine lineNumber="3188"><Highlight kind="normal">        Val = (Val &lt;&lt; 8) | ShadowBytes&#91;i + j&#93;;</Highlight></CodeLine>
<Link id="l03189" /><CodeLine lineNumber="3189"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03190" /><CodeLine lineNumber="3190"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03191" /><CodeLine lineNumber="3191"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(ShadowBase, ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, i));</Highlight></CodeLine>
<Link id="l03192" /><CodeLine lineNumber="3192"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64asmprinter-cpp/#a434449d5a0f4b334aca9163b13b6286ba02b848adda8d7d33a2b25d87dbef1d75">Poison</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a95df4f20c933779306b9a936b88b99a5">getIntN</a>(StoreSizeInBytes &#42; 8, Val);</Highlight></CodeLine>
<Link id="l03193" /><CodeLine lineNumber="3193"><Highlight kind="normal">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ad4e4b11a1bf18be51b28b7fadfaa97d6">CreateAlignedStore</a>(</Highlight></CodeLine>
<Link id="l03194" /><CodeLine lineNumber="3194"><Highlight kind="normal">        <a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64asmprinter-cpp/#a434449d5a0f4b334aca9163b13b6286ba02b848adda8d7d33a2b25d87dbef1d75">Poison</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(<a href="/docs/api/files/lib/lib/analysis/targetlibraryinfo-cpp/#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <a href="/docs/api/classes/llvm/pointertype/#af8a1dbdbfd89aa4899b3c0d39495d0dd">PointerType::getUnqual</a>(<a href="/docs/api/files/lib/lib/target/lib/target/aarch64/aarch64asmprinter-cpp/#a434449d5a0f4b334aca9163b13b6286ba02b848adda8d7d33a2b25d87dbef1d75">Poison</a>-&gt;getContext())),</Highlight></CodeLine>
<Link id="l03195" /><CodeLine lineNumber="3195"><Highlight kind="normal">        <a href="/docs/api/structs/llvm/align">Align</a>(1));</Highlight></CodeLine>
<Link id="l03196" /><CodeLine lineNumber="3196"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03197" /><CodeLine lineNumber="3197"><Highlight kind="normal">    i += StoreSizeInBytes;</Highlight></CodeLine>
<Link id="l03198" /><CodeLine lineNumber="3198"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03199" /><CodeLine lineNumber="3199"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03200" /><CodeLine lineNumber="3200"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03201" /><CodeLine lineNumber="3201" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4">FunctionStackPoisoner::copyToShadow</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowMask,</Highlight></CodeLine>
<Link id="l03202" /><CodeLine lineNumber="3202"><Highlight kind="normal">                                         <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowBytes,</Highlight></CodeLine>
<Link id="l03203" /><CodeLine lineNumber="3203"><Highlight kind="normal">                                         <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase) &#123;</Highlight></CodeLine>
<Link id="l03204" /><CodeLine lineNumber="3204"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4">copyToShadow</a>(ShadowMask, ShadowBytes, 0, ShadowMask.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(), IRB, ShadowBase);</Highlight></CodeLine>
<Link id="l03205" /><CodeLine lineNumber="3205"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03206" /><CodeLine lineNumber="3206"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03207" /><CodeLine lineNumber="3207" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a37064f808b1971939c4076441e36f79d"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4">FunctionStackPoisoner::copyToShadow</a>(<a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowMask,</Highlight></CodeLine>
<Link id="l03208" /><CodeLine lineNumber="3208"><Highlight kind="normal">                                         <a href="/docs/api/classes/llvm/arrayref">ArrayRef&lt;uint8&#95;t&gt;</a> ShadowBytes,</Highlight></CodeLine>
<Link id="l03209" /><CodeLine lineNumber="3209"><Highlight kind="normal">                                         </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> Begin, </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> End,</Highlight></CodeLine>
<Link id="l03210" /><CodeLine lineNumber="3210"><Highlight kind="normal">                                         <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase) &#123;</Highlight></CodeLine>
<Link id="l03211" /><CodeLine lineNumber="3211"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ShadowMask.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() == ShadowBytes.<a href="/docs/api/classes/llvm/arrayref/#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</Highlight></CodeLine>
<Link id="l03212" /><CodeLine lineNumber="3212"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a233737223c9a3dba810df5b91bc91d1fabbb9957d8adae962b153273c16bce571">Done</a> = Begin;</Highlight></CodeLine>
<Link id="l03213" /><CodeLine lineNumber="3213"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> i = Begin, j = Begin + 1; i &lt; End; i = j++) &#123;</Highlight></CodeLine>
<Link id="l03214" /><CodeLine lineNumber="3214"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!ShadowMask&#91;i&#93;) &#123;</Highlight></CodeLine>
<Link id="l03215" /><CodeLine lineNumber="3215"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!ShadowBytes&#91;i&#93;);</Highlight></CodeLine>
<Link id="l03216" /><CodeLine lineNumber="3216"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03217" /><CodeLine lineNumber="3217"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03218" /><CodeLine lineNumber="3218"><Highlight kind="normal">    uint8&#95;t Val = ShadowBytes&#91;i&#93;;</Highlight></CodeLine>
<Link id="l03219" /><CodeLine lineNumber="3219"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6e0e5d7f6bd2776c14ebd7d9da5913b9">AsanSetShadowFunc</a>&#91;Val&#93;)</Highlight></CodeLine>
<Link id="l03220" /><CodeLine lineNumber="3220"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03221" /><CodeLine lineNumber="3221"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03222" /><CodeLine lineNumber="3222"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Skip same values.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03223" /><CodeLine lineNumber="3223"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (; j &lt; End &amp;&amp; ShadowMask&#91;j&#93; &amp;&amp; Val == ShadowBytes&#91;j&#93;; ++j) &#123;</Highlight></CodeLine>
<Link id="l03224" /><CodeLine lineNumber="3224"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03225" /><CodeLine lineNumber="3225"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03226" /><CodeLine lineNumber="3226"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (j - i &gt;= <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.MaxInlinePoisoningSize) &#123;</Highlight></CodeLine>
<Link id="l03227" /><CodeLine lineNumber="3227"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a20e0bf83ea626a73aedc5bc770c461bd">copyToShadowInline</a>(ShadowMask, ShadowBytes, <a href="/docs/api/namespaces/llvm/#a233737223c9a3dba810df5b91bc91d1fabbb9957d8adae962b153273c16bce571">Done</a>, i, IRB, ShadowBase);</Highlight></CodeLine>
<Link id="l03228" /><CodeLine lineNumber="3228"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>.createRuntimeCall(</Highlight></CodeLine>
<Link id="l03229" /><CodeLine lineNumber="3229"><Highlight kind="normal">          IRB, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6e0e5d7f6bd2776c14ebd7d9da5913b9">AsanSetShadowFunc</a>&#91;Val&#93;,</Highlight></CodeLine>
<Link id="l03230" /><CodeLine lineNumber="3230"><Highlight kind="normal">          &#123;IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(ShadowBase, ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, i)),</Highlight></CodeLine>
<Link id="l03231" /><CodeLine lineNumber="3231"><Highlight kind="normal">           ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, j - i)&#125;);</Highlight></CodeLine>
<Link id="l03232" /><CodeLine lineNumber="3232"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a233737223c9a3dba810df5b91bc91d1fabbb9957d8adae962b153273c16bce571">Done</a> = j;</Highlight></CodeLine>
<Link id="l03233" /><CodeLine lineNumber="3233"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03234" /><CodeLine lineNumber="3234"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03235" /><CodeLine lineNumber="3235"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03236" /><CodeLine lineNumber="3236"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a20e0bf83ea626a73aedc5bc770c461bd">copyToShadowInline</a>(ShadowMask, ShadowBytes, <a href="/docs/api/namespaces/llvm/#a233737223c9a3dba810df5b91bc91d1fabbb9957d8adae962b153273c16bce571">Done</a>, End, IRB, ShadowBase);</Highlight></CodeLine>
<Link id="l03237" /><CodeLine lineNumber="3237"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03238" /><CodeLine lineNumber="3238"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03239" /><CodeLine lineNumber="3239"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Fake stack allocator (asan&#95;fake&#95;stack.h) has 11 size classes</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03240" /><CodeLine lineNumber="3240"><Highlight kind="normal"></Highlight><Highlight kind="comment">// for every power of 2 from kMinStackMallocSize to kMaxAsanStackMallocSizeClass</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03241" /><CodeLine lineNumber="3241" lineLink="#a956c8ddbdae78e48e5a76c33430a4ef6"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> <a href="#a956c8ddbdae78e48e5a76c33430a4ef6">StackMallocSizeClass</a>(uint64&#95;t LocalStackSize) &#123;</Highlight></CodeLine>
<Link id="l03242" /><CodeLine lineNumber="3242"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LocalStackSize &lt;= <a href="#aaf5f0e81eb832fe48c6dc33db623a03c">kMaxStackMallocSize</a>);</Highlight></CodeLine>
<Link id="l03243" /><CodeLine lineNumber="3243"><Highlight kind="normal">  uint64&#95;t MaxSize = <a href="#afb368a1d773581543db2f164baf7fbdf">kMinStackMallocSize</a>;</Highlight></CodeLine>
<Link id="l03244" /><CodeLine lineNumber="3244"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> i = 0;; i++, MaxSize &#42;= 2)</Highlight></CodeLine>
<Link id="l03245" /><CodeLine lineNumber="3245"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LocalStackSize &lt;= MaxSize) </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> i;</Highlight></CodeLine>
<Link id="l03246" /><CodeLine lineNumber="3246"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/errorhandling-h/#ace243f5c25697a1107cce46626b3dc94">llvm&#95;unreachable</a>(</Highlight><Highlight kind="stringliteral">&quot;impossible LocalStackSize&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03247" /><CodeLine lineNumber="3247"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03248" /><CodeLine lineNumber="3248"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03249" /><CodeLine lineNumber="3249" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf9b16e74216c278e3362f8e84c16ab0"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf9b16e74216c278e3362f8e84c16ab0">FunctionStackPoisoner::copyArgsPassedByValToAllocas</a>() &#123;</Highlight></CodeLine>
<Link id="l03250" /><CodeLine lineNumber="3250"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;CopyInsertPoint = &amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.front().front();</Highlight></CodeLine>
<Link id="l03251" /><CodeLine lineNumber="3251"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (CopyInsertPoint == <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.LocalDynamicShadow) &#123;</Highlight></CodeLine>
<Link id="l03252" /><CodeLine lineNumber="3252"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Insert after the dynamic shadow location is determined</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03253" /><CodeLine lineNumber="3253"><Highlight kind="normal">    CopyInsertPoint = CopyInsertPoint-&gt;<a href="/docs/api/classes/llvm/ilist-node-with-parent/#a62ee7ece4986606d41363bc1f70d5ab2">getNextNode</a>();</Highlight></CodeLine>
<Link id="l03254" /><CodeLine lineNumber="3254"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CopyInsertPoint);</Highlight></CodeLine>
<Link id="l03255" /><CodeLine lineNumber="3255"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03256" /><CodeLine lineNumber="3256"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(CopyInsertPoint);</Highlight></CodeLine>
<Link id="l03257" /><CodeLine lineNumber="3257"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/datalayout">DataLayout</a> &amp;<a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getDataLayout();</Highlight></CodeLine>
<Link id="l03258" /><CodeLine lineNumber="3258"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/argument">Argument</a> &amp;Arg : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.args()) &#123;</Highlight></CodeLine>
<Link id="l03259" /><CodeLine lineNumber="3259"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (Arg.hasByValAttr()) &#123;</Highlight></CodeLine>
<Link id="l03260" /><CodeLine lineNumber="3260"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/type">Type</a> &#42;Ty = Arg.getParamByValType();</Highlight></CodeLine>
<Link id="l03261" /><CodeLine lineNumber="3261"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment =</Highlight></CodeLine>
<Link id="l03262" /><CodeLine lineNumber="3262"><Highlight kind="normal">          <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getValueOrABITypeAlignment(Arg.getParamAlign(), Ty);</Highlight></CodeLine>
<Link id="l03263" /><CodeLine lineNumber="3263"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03264" /><CodeLine lineNumber="3264"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;AI = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(</Highlight></CodeLine>
<Link id="l03265" /><CodeLine lineNumber="3265"><Highlight kind="normal">          Ty, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">,</Highlight></CodeLine>
<Link id="l03266" /><CodeLine lineNumber="3266"><Highlight kind="normal">          (Arg.hasName() ? Arg.getName() : </Highlight><Highlight kind="stringliteral">&quot;Arg&quot;</Highlight><Highlight kind="normal"> + <a href="/docs/api/classes/llvm/twine">Twine</a>(Arg.getArgNo())) +</Highlight></CodeLine>
<Link id="l03267" /><CodeLine lineNumber="3267"><Highlight kind="normal">              </Highlight><Highlight kind="stringliteral">&quot;.byval&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03268" /><CodeLine lineNumber="3268"><Highlight kind="normal">      AI-&gt;<a href="/docs/api/classes/llvm/allocainst/#af3bb24b322533dbe8a63c84b18568fe1">setAlignment</a>(Alignment);</Highlight></CodeLine>
<Link id="l03269" /><CodeLine lineNumber="3269"><Highlight kind="normal">      Arg.replaceAllUsesWith(AI);</Highlight></CodeLine>
<Link id="l03270" /><CodeLine lineNumber="3270"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03271" /><CodeLine lineNumber="3271"><Highlight kind="normal">      uint64&#95;t AllocSize = <a href="/docs/api/files/lib/lib/target/lib/target/arm/armslshardening-cpp/#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(Ty);</Highlight></CodeLine>
<Link id="l03272" /><CodeLine lineNumber="3272"><Highlight kind="normal">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae9f2730f66215fdb82f4e41e45124811">CreateMemCpy</a>(AI, Alignment, &amp;Arg, Alignment, AllocSize);</Highlight></CodeLine>
<Link id="l03273" /><CodeLine lineNumber="3273"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03274" /><CodeLine lineNumber="3274"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03275" /><CodeLine lineNumber="3275"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03276" /><CodeLine lineNumber="3276"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03277" /><CodeLine lineNumber="3277" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a7497538730b6264d4783b4cbd71db816"><Highlight kind="normal"><a href="/docs/api/classes/llvm/phinode">PHINode</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a7497538730b6264d4783b4cbd71db816">FunctionStackPoisoner::createPHI</a>(<a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>,</Highlight></CodeLine>
<Link id="l03278" /><CodeLine lineNumber="3278"><Highlight kind="normal">                                          <a href="/docs/api/classes/llvm/value">Value</a> &#42;ValueIfTrue,</Highlight></CodeLine>
<Link id="l03279" /><CodeLine lineNumber="3279"><Highlight kind="normal">                                          <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;ThenTerm,</Highlight></CodeLine>
<Link id="l03280" /><CodeLine lineNumber="3280"><Highlight kind="normal">                                          <a href="/docs/api/classes/llvm/value">Value</a> &#42;ValueIfFalse) &#123;</Highlight></CodeLine>
<Link id="l03281" /><CodeLine lineNumber="3281"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/phinode">PHINode</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpurewriteundefforphi-cpp/#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a876fb556ecea804faa2cd8ad1e498ec3">CreatePHI</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, 2);</Highlight></CodeLine>
<Link id="l03282" /><CodeLine lineNumber="3282"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;CondBlock = <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;Instruction&gt;</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>)-&gt;<a href="/docs/api/classes/llvm/basicblock/#a1b4bf7c97cdc8159fd73d48063f0b250">getParent</a>();</Highlight></CodeLine>
<Link id="l03283" /><CodeLine lineNumber="3283"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpurewriteundefforphi-cpp/#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;addIncoming(ValueIfFalse, CondBlock);</Highlight></CodeLine>
<Link id="l03284" /><CodeLine lineNumber="3284"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &#42;ThenBlock = ThenTerm-&gt;<a href="/docs/api/classes/llvm/ilist-detail/node-parent-access/#a7e19e7508415378ad9523e0339b23e22">getParent</a>();</Highlight></CodeLine>
<Link id="l03285" /><CodeLine lineNumber="3285"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpurewriteundefforphi-cpp/#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;addIncoming(ValueIfTrue, ThenBlock);</Highlight></CodeLine>
<Link id="l03286" /><CodeLine lineNumber="3286"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/amdgpurewriteundefforphi-cpp/#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>;</Highlight></CodeLine>
<Link id="l03287" /><CodeLine lineNumber="3287"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03288" /><CodeLine lineNumber="3288"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03289" /><CodeLine lineNumber="3289" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a98d7c2e28dffebb3542fd7c608e6b4cc"><Highlight kind="normal"><a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a98d7c2e28dffebb3542fd7c608e6b4cc">FunctionStackPoisoner::createAllocaForLayout</a>(</Highlight></CodeLine>
<Link id="l03290" /><CodeLine lineNumber="3290"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/asanstackframelayout">ASanStackFrameLayout</a> &amp;L, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#ab7af0c09900daed62bbdb01dba180f7ca971fd8cc345d8bd9f92e9f7d88fdf20c">Dynamic</a>) &#123;</Highlight></CodeLine>
<Link id="l03291" /><CodeLine lineNumber="3291"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;Alloca;</Highlight></CodeLine>
<Link id="l03292" /><CodeLine lineNumber="3292"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#ab7af0c09900daed62bbdb01dba180f7ca971fd8cc345d8bd9f92e9f7d88fdf20c">Dynamic</a>) &#123;</Highlight></CodeLine>
<Link id="l03293" /><CodeLine lineNumber="3293"><Highlight kind="normal">    Alloca = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(),</Highlight></CodeLine>
<Link id="l03294" /><CodeLine lineNumber="3294"><Highlight kind="normal">                              ConstantInt::get(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a64748b5a9f8d8dd4499f84312e2c1336">getInt64Ty</a>(), L.FrameSize),</Highlight></CodeLine>
<Link id="l03295" /><CodeLine lineNumber="3295"><Highlight kind="normal">                              </Highlight><Highlight kind="stringliteral">&quot;MyAlloca&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03296" /><CodeLine lineNumber="3296"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03297" /><CodeLine lineNumber="3297"><Highlight kind="normal">    Alloca = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(<a href="/docs/api/classes/llvm/arraytype/#a309fed0882f9d27038ff2df2afed7a00">ArrayType::get</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), L.FrameSize),</Highlight></CodeLine>
<Link id="l03298" /><CodeLine lineNumber="3298"><Highlight kind="normal">                              </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;MyAlloca&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03299" /><CodeLine lineNumber="3299"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Alloca-&gt;<a href="/docs/api/classes/llvm/allocainst/#a36e31f42170be95fc392dad696d9ba19">isStaticAlloca</a>());</Highlight></CodeLine>
<Link id="l03300" /><CodeLine lineNumber="3300"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03301" /><CodeLine lineNumber="3301"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a href="#adbb45684e8c1f7cc79db81a276e70471">ClRealignStack</a> &amp; (<a href="#adbb45684e8c1f7cc79db81a276e70471">ClRealignStack</a> - 1)) == 0);</Highlight></CodeLine>
<Link id="l03302" /><CodeLine lineNumber="3302"><Highlight kind="normal">  uint64&#95;t FrameAlignment = std::max(L.FrameAlignment, uint64&#95;t(<a href="#adbb45684e8c1f7cc79db81a276e70471">ClRealignStack</a>));</Highlight></CodeLine>
<Link id="l03303" /><CodeLine lineNumber="3303"><Highlight kind="normal">  Alloca-&gt;<a href="/docs/api/classes/llvm/allocainst/#af3bb24b322533dbe8a63c84b18568fe1">setAlignment</a>(<a href="/docs/api/structs/llvm/align">Align</a>(FrameAlignment));</Highlight></CodeLine>
<Link id="l03304" /><CodeLine lineNumber="3304"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(Alloca, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</Highlight></CodeLine>
<Link id="l03305" /><CodeLine lineNumber="3305"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03306" /><CodeLine lineNumber="3306"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03307" /><CodeLine lineNumber="3307" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ad5fb89357898044869d600aef33cd1ba"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ad5fb89357898044869d600aef33cd1ba">FunctionStackPoisoner::createDynamicAllocasInitStorage</a>() &#123;</Highlight></CodeLine>
<Link id="l03308" /><CodeLine lineNumber="3308"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/basicblock">BasicBlock</a> &amp;FirstBB = &#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.begin();</Highlight></CodeLine>
<Link id="l03309" /><CodeLine lineNumber="3309"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(<a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;Instruction&gt;</a>(FirstBB.<a href="/docs/api/classes/llvm/basicblock/#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>()));</Highlight></CodeLine>
<Link id="l03310" /><CodeLine lineNumber="3310"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a8318591e05d8e62436dee43551e5a115">DynamicAllocaLayout</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03311" /><CodeLine lineNumber="3311"><Highlight kind="normal">  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(<a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a8318591e05d8e62436dee43551e5a115">DynamicAllocaLayout</a>);</Highlight></CodeLine>
<Link id="l03312" /><CodeLine lineNumber="3312"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a8318591e05d8e62436dee43551e5a115">DynamicAllocaLayout</a>-&gt;setAlignment(<a href="/docs/api/structs/llvm/align">Align</a>(32));</Highlight></CodeLine>
<Link id="l03313" /><CodeLine lineNumber="3313"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03314" /><CodeLine lineNumber="3314"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03315" /><CodeLine lineNumber="3315" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac2abcf486d1ecbb52d28309b221d6e93"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac2abcf486d1ecbb52d28309b221d6e93">FunctionStackPoisoner::processDynamicAllocas</a>() &#123;</Highlight></CodeLine>
<Link id="l03316" /><CodeLine lineNumber="3316"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="#aacabf2f74c684a07a8d7b499d252f8c9">ClInstrumentDynamicAllocas</a> || <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac9c6e2f693408658584fa84e7b4f9833">DynamicAllocaVec</a>.empty()) &#123;</Highlight></CodeLine>
<Link id="l03317" /><CodeLine lineNumber="3317"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#adc8c21ea67c0f1d6c30c46a92c39b7ce">DynamicAllocaPoisonCallVec</a>.empty());</Highlight></CodeLine>
<Link id="l03318" /><CodeLine lineNumber="3318"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03319" /><CodeLine lineNumber="3319"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03320" /><CodeLine lineNumber="3320"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03321" /><CodeLine lineNumber="3321"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Insert poison calls for lifetime intrinsics for dynamic allocas.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03322" /><CodeLine lineNumber="3322"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;APC : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#adc8c21ea67c0f1d6c30c46a92c39b7ce">DynamicAllocaPoisonCallVec</a>) &#123;</Highlight></CodeLine>
<Link id="l03323" /><CodeLine lineNumber="3323"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(APC.InsBefore);</Highlight></CodeLine>
<Link id="l03324" /><CodeLine lineNumber="3324"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(APC.AI);</Highlight></CodeLine>
<Link id="l03325" /><CodeLine lineNumber="3325"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.isInterestingAlloca(&#42;APC.AI));</Highlight></CodeLine>
<Link id="l03326" /><CodeLine lineNumber="3326"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!APC.AI-&gt;isStaticAlloca());</Highlight></CodeLine>
<Link id="l03327" /><CodeLine lineNumber="3327"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03328" /><CodeLine lineNumber="3328"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(APC.InsBefore);</Highlight></CodeLine>
<Link id="l03329" /><CodeLine lineNumber="3329"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a299eb6fe46b875b6f4f3b16ed6255f66">poisonAlloca</a>(APC.AI, APC.Size, IRB, APC.DoPoison);</Highlight></CodeLine>
<Link id="l03330" /><CodeLine lineNumber="3330"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Dynamic allocas will be unpoisoned unconditionally below in</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03331" /><CodeLine lineNumber="3331"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// unpoisonDynamicAllocas.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03332" /><CodeLine lineNumber="3332"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Flag that we need unpoison static allocas.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03333" /><CodeLine lineNumber="3333"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03334" /><CodeLine lineNumber="3334"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03335" /><CodeLine lineNumber="3335"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Handle dynamic allocas.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03336" /><CodeLine lineNumber="3336"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ad5fb89357898044869d600aef33cd1ba">createDynamicAllocasInitStorage</a>();</Highlight></CodeLine>
<Link id="l03337" /><CodeLine lineNumber="3337"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;AI : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ac9c6e2f693408658584fa84e7b4f9833">DynamicAllocaVec</a>)</Highlight></CodeLine>
<Link id="l03338" /><CodeLine lineNumber="3338"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2c1978d516a0154dd7f006e502ab4cfa">handleDynamicAllocaCall</a>(AI);</Highlight></CodeLine>
<Link id="l03339" /><CodeLine lineNumber="3339"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a46b8e1495b7d2175e14c470a1e8d6892">unpoisonDynamicAllocas</a>();</Highlight></CodeLine>
<Link id="l03340" /><CodeLine lineNumber="3340"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03341" /><CodeLine lineNumber="3341"><Highlight kind="normal"></Highlight><Highlight kind="comment"></Highlight></CodeLine>
<Link id="l03342" /><CodeLine lineNumber="3342"><Highlight kind="comment">/// Collect instructions in the entry block after \\p InsBefore which initialize</Highlight></CodeLine>
<Link id="l03343" /><CodeLine lineNumber="3343"><Highlight kind="comment">/// permanent storage for a function argument. These instructions must remain in</Highlight></CodeLine>
<Link id="l03344" /><CodeLine lineNumber="3344"><Highlight kind="comment">/// the entry block so that uninitialized values do not appear in backtraces. An</Highlight></CodeLine>
<Link id="l03345" /><CodeLine lineNumber="3345"><Highlight kind="comment">/// added benefit is that this conserves spill slots. This does not move stores</Highlight></CodeLine>
<Link id="l03346" /><CodeLine lineNumber="3346"><Highlight kind="comment">/// before instrumented / &quot;interesting&quot; allocas.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03347" /><CodeLine lineNumber="3347" lineLink="#a0050ea5bb47a2b75ed9e8239bcd469a6"><Highlight kind="normal"></Highlight><Highlight kind="keyword">static</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="#a0050ea5bb47a2b75ed9e8239bcd469a6">findStoresToUninstrumentedArgAllocas</a>(</Highlight></CodeLine>
<Link id="l03348" /><CodeLine lineNumber="3348"><Highlight kind="normal">    AddressSanitizer &amp;ASan, <a href="/docs/api/classes/llvm/instruction">Instruction</a> &amp;InsBefore,</Highlight></CodeLine>
<Link id="l03349" /><CodeLine lineNumber="3349"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/smallvectorimpl">SmallVectorImpl&lt;Instruction &#42;&gt;</a> &amp;InitInsts) &#123;</Highlight></CodeLine>
<Link id="l03350" /><CodeLine lineNumber="3350"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Start = InsBefore.<a href="/docs/api/classes/llvm/instruction/#a91bd28adea418a08cec78b72413d9d45">getNextNonDebugInstruction</a>();</Highlight></CodeLine>
<Link id="l03351" /><CodeLine lineNumber="3351"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;It = Start; It; It = It-&gt;getNextNonDebugInstruction()) &#123;</Highlight></CodeLine>
<Link id="l03352" /><CodeLine lineNumber="3352"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Argument initialization looks like:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03353" /><CodeLine lineNumber="3353"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// 1) store &lt;Argument&gt;, &lt;Alloca&gt; OR</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03354" /><CodeLine lineNumber="3354"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// 2) &lt;CastArgument&gt; = cast &lt;Argument&gt; to ...</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03355" /><CodeLine lineNumber="3355"><Highlight kind="normal">    </Highlight><Highlight kind="comment">//    store &lt;CastArgument&gt; to &lt;Alloca&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03356" /><CodeLine lineNumber="3356"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Do not consider any other kind of instruction.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03357" /><CodeLine lineNumber="3357"><Highlight kind="normal">    </Highlight><Highlight kind="comment">//</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03358" /><CodeLine lineNumber="3358"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Note: This covers all known cases, but may not be exhaustive. An</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03359" /><CodeLine lineNumber="3359"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// alternative to pattern-matching stores is to DFS over all Argument uses:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03360" /><CodeLine lineNumber="3360"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// this might be more general, but is probably much more complicated.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03361" /><CodeLine lineNumber="3361"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;AllocaInst&gt;</a>(It) || <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;CastInst&gt;</a>(It))</Highlight></CodeLine>
<Link id="l03362" /><CodeLine lineNumber="3362"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03363" /><CodeLine lineNumber="3363"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;Store = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;StoreInst&gt;</a>(It)) &#123;</Highlight></CodeLine>
<Link id="l03364" /><CodeLine lineNumber="3364"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// The store destination must be an alloca that isn&#39;t interesting for</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03365" /><CodeLine lineNumber="3365"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// ASan to instrument. These are moved up before InsBefore, and they&#39;re</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03366" /><CodeLine lineNumber="3366"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// not interesting because allocas for arguments can be mem2reg&#39;d.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03367" /><CodeLine lineNumber="3367"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;Alloca = <a href="/docs/api/namespaces/llvm/#a22eeee01734061ac1b31ccd994c49eef">dyn&#95;cast&lt;AllocaInst&gt;</a>(Store-&gt;getPointerOperand());</Highlight></CodeLine>
<Link id="l03368" /><CodeLine lineNumber="3368"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!Alloca || ASan.isInterestingAlloca(&#42;Alloca))</Highlight></CodeLine>
<Link id="l03369" /><CodeLine lineNumber="3369"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03370" /><CodeLine lineNumber="3370"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03371" /><CodeLine lineNumber="3371"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Val = Store-&gt;getValueOperand();</Highlight></CodeLine>
<Link id="l03372" /><CodeLine lineNumber="3372"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsDirectArgInit = <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;Argument&gt;</a>(Val);</Highlight></CodeLine>
<Link id="l03373" /><CodeLine lineNumber="3373"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsArgInitViaCast =</Highlight></CodeLine>
<Link id="l03374" /><CodeLine lineNumber="3374"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;CastInst&gt;</a>(Val) &amp;&amp;</Highlight></CodeLine>
<Link id="l03375" /><CodeLine lineNumber="3375"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;Argument&gt;</a>(<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;CastInst&gt;</a>(Val)-&gt;getOperand(0)) &amp;&amp;</Highlight></CodeLine>
<Link id="l03376" /><CodeLine lineNumber="3376"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// Check that the cast appears directly before the store. Otherwise</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03377" /><CodeLine lineNumber="3377"><Highlight kind="normal">          </Highlight><Highlight kind="comment">// moving the cast before InsBefore may break the IR.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03378" /><CodeLine lineNumber="3378"><Highlight kind="normal">          Val == It-&gt;getPrevNonDebugInstruction();</Highlight></CodeLine>
<Link id="l03379" /><CodeLine lineNumber="3379"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> IsArgInit = IsDirectArgInit || IsArgInitViaCast;</Highlight></CodeLine>
<Link id="l03380" /><CodeLine lineNumber="3380"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!IsArgInit)</Highlight></CodeLine>
<Link id="l03381" /><CodeLine lineNumber="3381"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03382" /><CodeLine lineNumber="3382"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03383" /><CodeLine lineNumber="3383"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (IsArgInitViaCast)</Highlight></CodeLine>
<Link id="l03384" /><CodeLine lineNumber="3384"><Highlight kind="normal">        InitInsts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;Instruction&gt;</a>(Val));</Highlight></CodeLine>
<Link id="l03385" /><CodeLine lineNumber="3385"><Highlight kind="normal">      InitInsts.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(Store);</Highlight></CodeLine>
<Link id="l03386" /><CodeLine lineNumber="3386"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">continue</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03387" /><CodeLine lineNumber="3387"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03388" /><CodeLine lineNumber="3388"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03389" /><CodeLine lineNumber="3389"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Do not reorder past unknown instructions: argument initialization should</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03390" /><CodeLine lineNumber="3390"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// only involve casts and stores.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03391" /><CodeLine lineNumber="3391"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03392" /><CodeLine lineNumber="3392"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03393" /><CodeLine lineNumber="3393"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03394" /><CodeLine lineNumber="3394"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03395" /><CodeLine lineNumber="3395" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a914ea1510476a800508ae70d159bd8c0"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a914ea1510476a800508ae70d159bd8c0">FunctionStackPoisoner::processStaticAllocas</a>() &#123;</Highlight></CodeLine>
<Link id="l03396" /><CodeLine lineNumber="3396"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>.empty()) &#123;</Highlight></CodeLine>
<Link id="l03397" /><CodeLine lineNumber="3397"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2488dfb5dc557ef2572c0968fbe9c48b">StaticAllocaPoisonCallVec</a>.empty());</Highlight></CodeLine>
<Link id="l03398" /><CodeLine lineNumber="3398"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03399" /><CodeLine lineNumber="3399"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03400" /><CodeLine lineNumber="3400"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03401" /><CodeLine lineNumber="3401"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> StackMallocIdx = -1;</Highlight></CodeLine>
<Link id="l03402" /><CodeLine lineNumber="3402"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/debugloc">DebugLoc</a> EntryDebugLocation;</Highlight></CodeLine>
<Link id="l03403" /><CodeLine lineNumber="3403"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> SP = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getSubprogram())</Highlight></CodeLine>
<Link id="l03404" /><CodeLine lineNumber="3404"><Highlight kind="normal">    EntryDebugLocation =</Highlight></CodeLine>
<Link id="l03405" /><CodeLine lineNumber="3405"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/mdnode/#a7d10a7b9b7f40b04d27ed97c38ea1950">DILocation::get</a>(SP-&gt;getContext(), SP-&gt;getScopeLine(), 0, SP);</Highlight></CodeLine>
<Link id="l03406" /><CodeLine lineNumber="3406"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03407" /><CodeLine lineNumber="3407"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;InsBefore = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>&#91;0&#93;;</Highlight></CodeLine>
<Link id="l03408" /><CodeLine lineNumber="3408"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(InsBefore);</Highlight></CodeLine>
<Link id="l03409" /><CodeLine lineNumber="3409"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03410" /><CodeLine lineNumber="3410"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Make sure non-instrumented allocas stay in the entry block. Otherwise,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03411" /><CodeLine lineNumber="3411"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// debug info is broken, because only entry-block allocas are treated as</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03412" /><CodeLine lineNumber="3412"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// regular stack slots.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03413" /><CodeLine lineNumber="3413"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> InsBeforeB = InsBefore-&gt;<a href="/docs/api/classes/llvm/ilist-detail/node-parent-access/#a7e19e7508415378ad9523e0339b23e22">getParent</a>();</Highlight></CodeLine>
<Link id="l03414" /><CodeLine lineNumber="3414"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InsBeforeB == &amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getEntryBlock());</Highlight></CodeLine>
<Link id="l03415" /><CodeLine lineNumber="3415"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;AI : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ae4f03fc1e1d45f5bab36586281790978">StaticAllocasToMoveUp</a>)</Highlight></CodeLine>
<Link id="l03416" /><CodeLine lineNumber="3416"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (AI-&gt;getParent() == InsBeforeB)</Highlight></CodeLine>
<Link id="l03417" /><CodeLine lineNumber="3417"><Highlight kind="normal">      AI-&gt;moveBefore(InsBefore-&gt;<a href="/docs/api/classes/llvm/ilist-node-impl/#af719fc783be6589465137d997701a432">getIterator</a>());</Highlight></CodeLine>
<Link id="l03418" /><CodeLine lineNumber="3418"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03419" /><CodeLine lineNumber="3419"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Move stores of arguments into entry-block allocas as well. This prevents</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03420" /><CodeLine lineNumber="3420"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// extra stack slots from being generated (to house the argument values until</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03421" /><CodeLine lineNumber="3421"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// they can be stored into the allocas). This also prevents uninitialized</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03422" /><CodeLine lineNumber="3422"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// values from being shown in backtraces.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03423" /><CodeLine lineNumber="3423"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;Instruction &#42;, 8&gt;</a> ArgInitInsts;</Highlight></CodeLine>
<Link id="l03424" /><CodeLine lineNumber="3424"><Highlight kind="normal">  <a href="#a0050ea5bb47a2b75ed9e8239bcd469a6">findStoresToUninstrumentedArgAllocas</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>, &#42;InsBefore, ArgInitInsts);</Highlight></CodeLine>
<Link id="l03425" /><CodeLine lineNumber="3425"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;ArgInitInst : ArgInitInsts)</Highlight></CodeLine>
<Link id="l03426" /><CodeLine lineNumber="3426"><Highlight kind="normal">    ArgInitInst-&gt;moveBefore(InsBefore-&gt;<a href="/docs/api/classes/llvm/ilist-node-impl/#af719fc783be6589465137d997701a432">getIterator</a>());</Highlight></CodeLine>
<Link id="l03427" /><CodeLine lineNumber="3427"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03428" /><CodeLine lineNumber="3428"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// If we have a call to llvm.localescape, keep it in the entry block.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03429" /><CodeLine lineNumber="3429"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5d3920fe2be39cc356f1eb8117bb2a3a">LocalEscapeCall</a>)</Highlight></CodeLine>
<Link id="l03430" /><CodeLine lineNumber="3430"><Highlight kind="normal">    <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a5d3920fe2be39cc356f1eb8117bb2a3a">LocalEscapeCall</a>-&gt;moveBefore(InsBefore-&gt;<a href="/docs/api/classes/llvm/ilist-node-impl/#af719fc783be6589465137d997701a432">getIterator</a>());</Highlight></CodeLine>
<Link id="l03431" /><CodeLine lineNumber="3431"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03432" /><CodeLine lineNumber="3432"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;ASanStackVariableDescription, 16&gt;</a> SVD;</Highlight></CodeLine>
<Link id="l03433" /><CodeLine lineNumber="3433"><Highlight kind="normal">  SVD.<a href="/docs/api/classes/llvm/smallvectorimpl/#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>.size());</Highlight></CodeLine>
<Link id="l03434" /><CodeLine lineNumber="3434"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;AI : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>) &#123;</Highlight></CodeLine>
<Link id="l03435" /><CodeLine lineNumber="3435"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/asanstackvariabledescription">ASanStackVariableDescription</a> <a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a> = &#123;AI-&gt;getName().data(),</Highlight></CodeLine>
<Link id="l03436" /><CodeLine lineNumber="3436"><Highlight kind="normal">                                      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.getAllocaSizeInBytes(&#42;AI),</Highlight></CodeLine>
<Link id="l03437" /><CodeLine lineNumber="3437"><Highlight kind="normal">                                      0,</Highlight></CodeLine>
<Link id="l03438" /><CodeLine lineNumber="3438"><Highlight kind="normal">                                      AI-&gt;getAlign().value(),</Highlight></CodeLine>
<Link id="l03439" /><CodeLine lineNumber="3439"><Highlight kind="normal">                                      AI,</Highlight></CodeLine>
<Link id="l03440" /><CodeLine lineNumber="3440"><Highlight kind="normal">                                      0,</Highlight></CodeLine>
<Link id="l03441" /><CodeLine lineNumber="3441"><Highlight kind="normal">                                      0&#125;;</Highlight></CodeLine>
<Link id="l03442" /><CodeLine lineNumber="3442"><Highlight kind="normal">    SVD.<a href="/docs/api/classes/llvm/smallvectortemplatebase/#af42bfbc067df27c19ee2fc859df58799">push&#95;back</a>(<a href="/docs/api/files/lib/lib/ir/builtingcs-cpp/#a6a9f043784cf87001c84980afa76da82">D</a>);</Highlight></CodeLine>
<Link id="l03443" /><CodeLine lineNumber="3443"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03444" /><CodeLine lineNumber="3444"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03445" /><CodeLine lineNumber="3445"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Minimal header size (left redzone) is 4 pointers,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03446" /><CodeLine lineNumber="3446"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// i.e. 32 bytes on 64-bit platforms and 16 bytes in 32-bit platforms.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03447" /><CodeLine lineNumber="3447"><Highlight kind="normal">  uint64&#95;t Granularity = 1ULL &lt;&lt; <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a994ce80af04048616ca5954e257d6723">Mapping</a>.Scale;</Highlight></CodeLine>
<Link id="l03448" /><CodeLine lineNumber="3448"><Highlight kind="normal">  uint64&#95;t MinHeaderSize = std::max((uint64&#95;t)<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.LongSize / 2, Granularity);</Highlight></CodeLine>
<Link id="l03449" /><CodeLine lineNumber="3449"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/asanstackframelayout">ASanStackFrameLayout</a> &amp;L =</Highlight></CodeLine>
<Link id="l03450" /><CodeLine lineNumber="3450"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a9c3dc14da623315dbade0f0d23c8976a">ComputeASanStackFrameLayout</a>(SVD, Granularity, MinHeaderSize);</Highlight></CodeLine>
<Link id="l03451" /><CodeLine lineNumber="3451"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03452" /><CodeLine lineNumber="3452"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Build AllocaToSVDMap for ASanStackVariableDescription lookup.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03453" /><CodeLine lineNumber="3453"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/densemap">DenseMap&lt;const AllocaInst &#42;, ASanStackVariableDescription &#42;&gt;</a> AllocaToSVDMap;</Highlight></CodeLine>
<Link id="l03454" /><CodeLine lineNumber="3454"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;<a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a> : SVD)</Highlight></CodeLine>
<Link id="l03455" /><CodeLine lineNumber="3455"><Highlight kind="normal">    AllocaToSVDMap&#91;<a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.AI&#93; = &amp;<a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>;</Highlight></CodeLine>
<Link id="l03456" /><CodeLine lineNumber="3456"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03457" /><CodeLine lineNumber="3457"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Update SVD with information from lifetime intrinsics.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03458" /><CodeLine lineNumber="3458"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;APC : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2488dfb5dc557ef2572c0968fbe9c48b">StaticAllocaPoisonCallVec</a>) &#123;</Highlight></CodeLine>
<Link id="l03459" /><CodeLine lineNumber="3459"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(APC.InsBefore);</Highlight></CodeLine>
<Link id="l03460" /><CodeLine lineNumber="3460"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(APC.AI);</Highlight></CodeLine>
<Link id="l03461" /><CodeLine lineNumber="3461"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.isInterestingAlloca(&#42;APC.AI));</Highlight></CodeLine>
<Link id="l03462" /><CodeLine lineNumber="3462"><Highlight kind="normal">    <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(APC.AI-&gt;isStaticAlloca());</Highlight></CodeLine>
<Link id="l03463" /><CodeLine lineNumber="3463"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03464" /><CodeLine lineNumber="3464"><Highlight kind="normal">    <a href="/docs/api/structs/llvm/asanstackvariabledescription">ASanStackVariableDescription</a> &amp;<a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a> = &#42;AllocaToSVDMap&#91;APC.AI&#93;;</Highlight></CodeLine>
<Link id="l03465" /><CodeLine lineNumber="3465"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.LifetimeSize = <a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.Size;</Highlight></CodeLine>
<Link id="l03466" /><CodeLine lineNumber="3466"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/dilocation">DILocation</a> &#42;FnLoc = EntryDebugLocation.<a href="/docs/api/classes/llvm/debugloc/#a4ff1bb484be62f8dac94fc087f72f524">get</a>()) &#123;</Highlight></CodeLine>
<Link id="l03467" /><CodeLine lineNumber="3467"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/classes/llvm/dilocation">DILocation</a> &#42;LifetimeLoc = APC.InsBefore-&gt;getDebugLoc().<a href="/docs/api/classes/llvm/mdnode/#a7d10a7b9b7f40b04d27ed97c38ea1950">get</a>()) &#123;</Highlight></CodeLine>
<Link id="l03468" /><CodeLine lineNumber="3468"><Highlight kind="normal">        </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (LifetimeLoc-&gt;getFile() == FnLoc-&gt;getFile())</Highlight></CodeLine>
<Link id="l03469" /><CodeLine lineNumber="3469"><Highlight kind="normal">          </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> Line = LifetimeLoc-&gt;getLine())</Highlight></CodeLine>
<Link id="l03470" /><CodeLine lineNumber="3470"><Highlight kind="normal">            <a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.Line = std::min(<a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.Line ? <a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.Line : Line, Line);</Highlight></CodeLine>
<Link id="l03471" /><CodeLine lineNumber="3471"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03472" /><CodeLine lineNumber="3472"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03473" /><CodeLine lineNumber="3473"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03474" /><CodeLine lineNumber="3474"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03475" /><CodeLine lineNumber="3475"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> DescriptionString = <a href="/docs/api/namespaces/llvm/#a5443261ddc0795520b7c673e11af38f3">ComputeASanStackFrameDescription</a>(SVD);</Highlight></CodeLine>
<Link id="l03476" /><CodeLine lineNumber="3476"><Highlight kind="normal">  <a href="/docs/api/files/include/include/llvm/include/llvm/support/debug-h/#a196897517069dda1bdb549e24468f7d7">LLVM&#95;DEBUG</a>(<a href="/docs/api/namespaces/llvm/#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; DescriptionString &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot; --- &quot;</Highlight><Highlight kind="normal"> &lt;&lt; L.FrameSize &lt;&lt; </Highlight><Highlight kind="stringliteral">&quot;\\n&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03477" /><CodeLine lineNumber="3477"><Highlight kind="normal">  uint64&#95;t LocalStackSize = L.FrameSize;</Highlight></CodeLine>
<Link id="l03478" /><CodeLine lineNumber="3478"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> DoStackMalloc =</Highlight></CodeLine>
<Link id="l03479" /><CodeLine lineNumber="3479"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.UseAfterReturn != <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabda6e7b34fa59e1bd229b207892956dc41c">AsanDetectStackUseAfterReturnMode::Never</a> &amp;&amp;</Highlight></CodeLine>
<Link id="l03480" /><CodeLine lineNumber="3480"><Highlight kind="normal">      !<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.CompileKernel &amp;&amp; LocalStackSize &lt;= <a href="#aaf5f0e81eb832fe48c6dc33db623a03c">kMaxStackMallocSize</a>;</Highlight></CodeLine>
<Link id="l03481" /><CodeLine lineNumber="3481"><Highlight kind="normal">  </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> DoDynamicAlloca = <a href="#ab65506fece0b5302fe804c49e6580446">ClDynamicAllocaStack</a>;</Highlight></CodeLine>
<Link id="l03482" /><CodeLine lineNumber="3482"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Don&#39;t do dynamic alloca or stack malloc if:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03483" /><CodeLine lineNumber="3483"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// 1) There is inline asm: too often it makes assumptions on which registers</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03484" /><CodeLine lineNumber="3484"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//    are available.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03485" /><CodeLine lineNumber="3485"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// 2) There is a returns&#95;twice call (typically setjmp), which is</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03486" /><CodeLine lineNumber="3486"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//    optimization-hostile, and doesn&#39;t play well with introduced indirect</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03487" /><CodeLine lineNumber="3487"><Highlight kind="normal">  </Highlight><Highlight kind="comment">//    register-relative calculation of local variable addresses.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03488" /><CodeLine lineNumber="3488"><Highlight kind="normal">  DoDynamicAlloca &amp;= !<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a568149a261a1175e1ca710fd701bd4f8">HasInlineAsm</a> &amp;&amp; !<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a37e62c009b4b8ee7e5854c795bde1ae1">HasReturnsTwiceCall</a>;</Highlight></CodeLine>
<Link id="l03489" /><CodeLine lineNumber="3489"><Highlight kind="normal">  DoStackMalloc &amp;= !<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a568149a261a1175e1ca710fd701bd4f8">HasInlineAsm</a> &amp;&amp; !<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a37e62c009b4b8ee7e5854c795bde1ae1">HasReturnsTwiceCall</a>;</Highlight></CodeLine>
<Link id="l03490" /><CodeLine lineNumber="3490"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03491" /><CodeLine lineNumber="3491"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;StaticAlloca =</Highlight></CodeLine>
<Link id="l03492" /><CodeLine lineNumber="3492"><Highlight kind="normal">      DoDynamicAlloca ? nullptr : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a98d7c2e28dffebb3542fd7c608e6b4cc">createAllocaForLayout</a>(IRB, L, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03493" /><CodeLine lineNumber="3493"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03494" /><CodeLine lineNumber="3494"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;FakeStack;</Highlight></CodeLine>
<Link id="l03495" /><CodeLine lineNumber="3495"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;LocalStackBase;</Highlight></CodeLine>
<Link id="l03496" /><CodeLine lineNumber="3496"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;LocalStackBaseAlloca;</Highlight></CodeLine>
<Link id="l03497" /><CodeLine lineNumber="3497"><Highlight kind="normal">  uint8&#95;t DIExprFlags = <a href="/docs/api/classes/llvm/diexpression/#a6472489551b8960cc115a93d95eef9f6a4ce0a0358c0de36a6ea4413d7abcbca8">DIExpression::ApplyOffset</a>;</Highlight></CodeLine>
<Link id="l03498" /><CodeLine lineNumber="3498"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03499" /><CodeLine lineNumber="3499"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DoStackMalloc) &#123;</Highlight></CodeLine>
<Link id="l03500" /><CodeLine lineNumber="3500"><Highlight kind="normal">    LocalStackBaseAlloca =</Highlight></CodeLine>
<Link id="l03501" /><CodeLine lineNumber="3501"><Highlight kind="normal">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, </Highlight><Highlight kind="keyword">nullptr</Highlight><Highlight kind="normal">, </Highlight><Highlight kind="stringliteral">&quot;asan&#95;local&#95;stack&#95;base&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03502" /><CodeLine lineNumber="3502"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.UseAfterReturn == <a href="/docs/api/namespaces/llvm/#a273ffd11c1ebf40fc70e3b22009adabdabc366f2d0ba3d681e7a3899917c5d3de">AsanDetectStackUseAfterReturnMode::Runtime</a>) &#123;</Highlight></CodeLine>
<Link id="l03503" /><CodeLine lineNumber="3503"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// void &#42;FakeStack = &#95;&#95;asan&#95;option&#95;detect&#95;stack&#95;use&#95;after&#95;return</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03504" /><CodeLine lineNumber="3504"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//     ? &#95;&#95;asan&#95;stack&#95;malloc&#95;N(LocalStackSize)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03505" /><CodeLine lineNumber="3505"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//     : nullptr;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03506" /><CodeLine lineNumber="3506"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// void &#42;LocalStackBase = (FakeStack) ? FakeStack :</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03507" /><CodeLine lineNumber="3507"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//                        alloca(LocalStackSize);</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03508" /><CodeLine lineNumber="3508"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/constant">Constant</a> &#42;OptionDetectUseAfterReturn = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getParent()-&gt;getOrInsertGlobal(</Highlight></CodeLine>
<Link id="l03509" /><CodeLine lineNumber="3509"><Highlight kind="normal">          <a href="#a27766fe2066043a2c55cc0becdcdd9f1">kAsanOptionDetectUseAfterReturn</a>, IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>());</Highlight></CodeLine>
<Link id="l03510" /><CodeLine lineNumber="3510"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;UseAfterReturnIsEnabled = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(</Highlight></CodeLine>
<Link id="l03511" /><CodeLine lineNumber="3511"><Highlight kind="normal">          IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>(), OptionDetectUseAfterReturn),</Highlight></CodeLine>
<Link id="l03512" /><CodeLine lineNumber="3512"><Highlight kind="normal">          <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a5852dc0d180581d34902e8abcbf7e930">getInt32Ty</a>()));</Highlight></CodeLine>
<Link id="l03513" /><CodeLine lineNumber="3513"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Term =</Highlight></CodeLine>
<Link id="l03514" /><CodeLine lineNumber="3514"><Highlight kind="normal">          <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(UseAfterReturnIsEnabled, InsBefore, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03515" /><CodeLine lineNumber="3515"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRBIf(Term);</Highlight></CodeLine>
<Link id="l03516" /><CodeLine lineNumber="3516"><Highlight kind="normal">      StackMallocIdx = <a href="#a956c8ddbdae78e48e5a76c33430a4ef6">StackMallocSizeClass</a>(LocalStackSize);</Highlight></CodeLine>
<Link id="l03517" /><CodeLine lineNumber="3517"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(StackMallocIdx &lt;= <a href="#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a>);</Highlight></CodeLine>
<Link id="l03518" /><CodeLine lineNumber="3518"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;FakeStackValue =</Highlight></CodeLine>
<Link id="l03519" /><CodeLine lineNumber="3519"><Highlight kind="normal">          <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>.createRuntimeCall(IRBIf, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a47e2de0b4b9f5aa2f4dbac5934918332">AsanStackMallocFunc</a>&#91;StackMallocIdx&#93;,</Highlight></CodeLine>
<Link id="l03520" /><CodeLine lineNumber="3520"><Highlight kind="normal">                                 ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, LocalStackSize));</Highlight></CodeLine>
<Link id="l03521" /><CodeLine lineNumber="3521"><Highlight kind="normal">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(InsBefore);</Highlight></CodeLine>
<Link id="l03522" /><CodeLine lineNumber="3522"><Highlight kind="normal">      FakeStack = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a7497538730b6264d4783b4cbd71db816">createPHI</a>(IRB, UseAfterReturnIsEnabled, FakeStackValue, Term,</Highlight></CodeLine>
<Link id="l03523" /><CodeLine lineNumber="3523"><Highlight kind="normal">                            ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, 0));</Highlight></CodeLine>
<Link id="l03524" /><CodeLine lineNumber="3524"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03525" /><CodeLine lineNumber="3525"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// assert(ASan.UseAfterReturn == AsanDetectStackUseAfterReturnMode:Always)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03526" /><CodeLine lineNumber="3526"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// void &#42;FakeStack = &#95;&#95;asan&#95;stack&#95;malloc&#95;N(LocalStackSize);</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03527" /><CodeLine lineNumber="3527"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// void &#42;LocalStackBase = (FakeStack) ? FakeStack :</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03528" /><CodeLine lineNumber="3528"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//                        alloca(LocalStackSize);</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03529" /><CodeLine lineNumber="3529"><Highlight kind="normal">      StackMallocIdx = <a href="#a956c8ddbdae78e48e5a76c33430a4ef6">StackMallocSizeClass</a>(LocalStackSize);</Highlight></CodeLine>
<Link id="l03530" /><CodeLine lineNumber="3530"><Highlight kind="normal">      FakeStack =</Highlight></CodeLine>
<Link id="l03531" /><CodeLine lineNumber="3531"><Highlight kind="normal">          <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>.createRuntimeCall(IRB, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a47e2de0b4b9f5aa2f4dbac5934918332">AsanStackMallocFunc</a>&#91;StackMallocIdx&#93;,</Highlight></CodeLine>
<Link id="l03532" /><CodeLine lineNumber="3532"><Highlight kind="normal">                                 ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, LocalStackSize));</Highlight></CodeLine>
<Link id="l03533" /><CodeLine lineNumber="3533"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03534" /><CodeLine lineNumber="3534"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;NoFakeStack =</Highlight></CodeLine>
<Link id="l03535" /><CodeLine lineNumber="3535"><Highlight kind="normal">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a8c75539a39f167f352b37ccdd788a7e4">CreateICmpEQ</a>(FakeStack, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>));</Highlight></CodeLine>
<Link id="l03536" /><CodeLine lineNumber="3536"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Term =</Highlight></CodeLine>
<Link id="l03537" /><CodeLine lineNumber="3537"><Highlight kind="normal">        <a href="/docs/api/namespaces/llvm/#ad957413955739c91204c96e33e0cc933">SplitBlockAndInsertIfThen</a>(NoFakeStack, InsBefore, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03538" /><CodeLine lineNumber="3538"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRBIf(Term);</Highlight></CodeLine>
<Link id="l03539" /><CodeLine lineNumber="3539"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;AllocaValue =</Highlight></CodeLine>
<Link id="l03540" /><CodeLine lineNumber="3540"><Highlight kind="normal">        DoDynamicAlloca ? <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a98d7c2e28dffebb3542fd7c608e6b4cc">createAllocaForLayout</a>(IRBIf, L, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">) : StaticAlloca;</Highlight></CodeLine>
<Link id="l03541" /><CodeLine lineNumber="3541"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03542" /><CodeLine lineNumber="3542"><Highlight kind="normal">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(InsBefore);</Highlight></CodeLine>
<Link id="l03543" /><CodeLine lineNumber="3543"><Highlight kind="normal">    LocalStackBase = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a7497538730b6264d4783b4cbd71db816">createPHI</a>(IRB, NoFakeStack, AllocaValue, Term, FakeStack);</Highlight></CodeLine>
<Link id="l03544" /><CodeLine lineNumber="3544"><Highlight kind="normal">    IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(LocalStackBase, LocalStackBaseAlloca);</Highlight></CodeLine>
<Link id="l03545" /><CodeLine lineNumber="3545"><Highlight kind="normal">    DIExprFlags |= <a href="/docs/api/classes/llvm/diexpression/#a6472489551b8960cc115a93d95eef9f6a18f3c7099f5b8bfe10361a97ee34a5c9">DIExpression::DerefBefore</a>;</Highlight></CodeLine>
<Link id="l03546" /><CodeLine lineNumber="3546"><Highlight kind="normal">  &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03547" /><CodeLine lineNumber="3547"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// void &#42;FakeStack = nullptr;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03548" /><CodeLine lineNumber="3548"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// void &#42;LocalStackBase = alloca(LocalStackSize);</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03549" /><CodeLine lineNumber="3549"><Highlight kind="normal">    FakeStack = ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, 0);</Highlight></CodeLine>
<Link id="l03550" /><CodeLine lineNumber="3550"><Highlight kind="normal">    LocalStackBase =</Highlight></CodeLine>
<Link id="l03551" /><CodeLine lineNumber="3551"><Highlight kind="normal">        DoDynamicAlloca ? <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a98d7c2e28dffebb3542fd7c608e6b4cc">createAllocaForLayout</a>(IRB, L, </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">) : StaticAlloca;</Highlight></CodeLine>
<Link id="l03552" /><CodeLine lineNumber="3552"><Highlight kind="normal">    LocalStackBaseAlloca = LocalStackBase;</Highlight></CodeLine>
<Link id="l03553" /><CodeLine lineNumber="3553"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03554" /><CodeLine lineNumber="3554"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03555" /><CodeLine lineNumber="3555"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// It shouldn&#39;t matter whether we pass an &#96;alloca&#96; or a &#96;ptrtoint&#96; as the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03556" /><CodeLine lineNumber="3556"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// dbg.declare address opereand, but passing a &#96;ptrtoint&#96; seems to confuse</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03557" /><CodeLine lineNumber="3557"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// later passes and can result in dropped variable coverage in debug info.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03558" /><CodeLine lineNumber="3558"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;LocalStackBaseAllocaPtr =</Highlight></CodeLine>
<Link id="l03559" /><CodeLine lineNumber="3559"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;PtrToIntInst&gt;</a>(LocalStackBaseAlloca)</Highlight></CodeLine>
<Link id="l03560" /><CodeLine lineNumber="3560"><Highlight kind="normal">          ? <a href="/docs/api/namespaces/llvm/#ac4fc845f5ed92de63cd4474f128f5fc5">cast&lt;PtrToIntInst&gt;</a>(LocalStackBaseAlloca)-&gt;getPointerOperand()</Highlight></CodeLine>
<Link id="l03561" /><CodeLine lineNumber="3561"><Highlight kind="normal">          : LocalStackBaseAlloca;</Highlight></CodeLine>
<Link id="l03562" /><CodeLine lineNumber="3562"><Highlight kind="normal">  <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a92ca992e52dddc420f4b069cae06dfbe">isa&lt;AllocaInst&gt;</a>(LocalStackBaseAllocaPtr) &amp;&amp;</Highlight></CodeLine>
<Link id="l03563" /><CodeLine lineNumber="3563"><Highlight kind="normal">         </Highlight><Highlight kind="stringliteral">&quot;Variable descriptions relative to ASan stack base will be dropped&quot;</Highlight><Highlight kind="normal">);</Highlight></CodeLine>
<Link id="l03564" /><CodeLine lineNumber="3564"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03565" /><CodeLine lineNumber="3565"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Replace Alloca instructions with base+offset.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03566" /><CodeLine lineNumber="3566"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;<a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a> : SVD) &#123;</Highlight></CodeLine>
<Link id="l03567" /><CodeLine lineNumber="3567"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;AI = <a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.AI;</Highlight></CodeLine>
<Link id="l03568" /><CodeLine lineNumber="3568"><Highlight kind="normal">    <a href="/docs/api/namespaces/llvm/#afae608ddbbaa668b04aac083a6683245">replaceDbgDeclare</a>(AI, LocalStackBaseAllocaPtr, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a1846db5a2df4a8c900560be95363210d">DIB</a>, DIExprFlags,</Highlight></CodeLine>
<Link id="l03569" /><CodeLine lineNumber="3569"><Highlight kind="normal">                      <a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.Offset);</Highlight></CodeLine>
<Link id="l03570" /><CodeLine lineNumber="3570"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/value">Value</a> &#42;NewAllocaPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</Highlight></CodeLine>
<Link id="l03571" /><CodeLine lineNumber="3571"><Highlight kind="normal">        IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(LocalStackBase, ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.Offset)),</Highlight></CodeLine>
<Link id="l03572" /><CodeLine lineNumber="3572"><Highlight kind="normal">        AI-&gt;<a href="/docs/api/classes/llvm/allocainst/#a5d19f3955a23e8eb2a974efcc8fb19da">getType</a>());</Highlight></CodeLine>
<Link id="l03573" /><CodeLine lineNumber="3573"><Highlight kind="normal">    AI-&gt;<a href="/docs/api/classes/llvm/value/#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewAllocaPtr);</Highlight></CodeLine>
<Link id="l03574" /><CodeLine lineNumber="3574"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03575" /><CodeLine lineNumber="3575"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03576" /><CodeLine lineNumber="3576"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// The left-most redzone has enough space for at least 4 pointers.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03577" /><CodeLine lineNumber="3577"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Write the Magic value to redzone&#91;0&#93;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03578" /><CodeLine lineNumber="3578"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;BasePlus0 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(LocalStackBase, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf5c2780ad835c54c27248ed826c61e3">IntptrPtrTy</a>);</Highlight></CodeLine>
<Link id="l03579" /><CodeLine lineNumber="3579"><Highlight kind="normal">  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="#abd89ac2b95ec4f9f9b87cf28f156322d">kCurrentStackFrameMagic</a>),</Highlight></CodeLine>
<Link id="l03580" /><CodeLine lineNumber="3580"><Highlight kind="normal">                  BasePlus0);</Highlight></CodeLine>
<Link id="l03581" /><CodeLine lineNumber="3581"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Write the frame description constant to redzone&#91;1&#93;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03582" /><CodeLine lineNumber="3582"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;BasePlus1 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</Highlight></CodeLine>
<Link id="l03583" /><CodeLine lineNumber="3583"><Highlight kind="normal">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(LocalStackBase,</Highlight></CodeLine>
<Link id="l03584" /><CodeLine lineNumber="3584"><Highlight kind="normal">                    ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.LongSize / 8)),</Highlight></CodeLine>
<Link id="l03585" /><CodeLine lineNumber="3585"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf5c2780ad835c54c27248ed826c61e3">IntptrPtrTy</a>);</Highlight></CodeLine>
<Link id="l03586" /><CodeLine lineNumber="3586"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/globalvariable">GlobalVariable</a> &#42;StackDescriptionGlobal =</Highlight></CodeLine>
<Link id="l03587" /><CodeLine lineNumber="3587"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a15889f1df360601e4f92325b39882a34">createPrivateGlobalForString</a>(&#42;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getParent(), DescriptionString,</Highlight></CodeLine>
<Link id="l03588" /><CodeLine lineNumber="3588"><Highlight kind="normal">                                   </Highlight><Highlight kind="comment">/&#42;AllowMerging&#42;/</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">true</Highlight><Highlight kind="normal">, <a href="#a2cd6efecbc36daba036d332c2556b668">genName</a>(</Highlight><Highlight kind="stringliteral">&quot;stack&quot;</Highlight><Highlight kind="normal">));</Highlight></CodeLine>
<Link id="l03589" /><CodeLine lineNumber="3589"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;Description = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(StackDescriptionGlobal, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</Highlight></CodeLine>
<Link id="l03590" /><CodeLine lineNumber="3590"><Highlight kind="normal">  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(Description, BasePlus1);</Highlight></CodeLine>
<Link id="l03591" /><CodeLine lineNumber="3591"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Write the PC to redzone&#91;2&#93;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03592" /><CodeLine lineNumber="3592"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;BasePlus2 = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(</Highlight></CodeLine>
<Link id="l03593" /><CodeLine lineNumber="3593"><Highlight kind="normal">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(LocalStackBase,</Highlight></CodeLine>
<Link id="l03594" /><CodeLine lineNumber="3594"><Highlight kind="normal">                    ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, 2 &#42; <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.LongSize / 8)),</Highlight></CodeLine>
<Link id="l03595" /><CodeLine lineNumber="3595"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf5c2780ad835c54c27248ed826c61e3">IntptrPtrTy</a>);</Highlight></CodeLine>
<Link id="l03596" /><CodeLine lineNumber="3596"><Highlight kind="normal">  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(&amp;<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>), BasePlus2);</Highlight></CodeLine>
<Link id="l03597" /><CodeLine lineNumber="3597"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03598" /><CodeLine lineNumber="3598"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;ShadowAfterScope = <a href="/docs/api/namespaces/llvm/#a14a462c7b5d011363ae9c50a15595609">GetShadowBytesAfterScope</a>(SVD, L);</Highlight></CodeLine>
<Link id="l03599" /><CodeLine lineNumber="3599"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03600" /><CodeLine lineNumber="3600"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Poison the stack red zones at the entry.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03601" /><CodeLine lineNumber="3601"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;ShadowBase = <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.memToShadow(LocalStackBase, IRB);</Highlight></CodeLine>
<Link id="l03602" /><CodeLine lineNumber="3602"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// As mask we must use most poisoned case: red zones and after scope.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03603" /><CodeLine lineNumber="3603"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// As bytes we can use either the same or just red zones only.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03604" /><CodeLine lineNumber="3604"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4">copyToShadow</a>(ShadowAfterScope, ShadowAfterScope, IRB, ShadowBase);</Highlight></CodeLine>
<Link id="l03605" /><CodeLine lineNumber="3605"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03606" /><CodeLine lineNumber="3606"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2488dfb5dc557ef2572c0968fbe9c48b">StaticAllocaPoisonCallVec</a>.empty()) &#123;</Highlight></CodeLine>
<Link id="l03607" /><CodeLine lineNumber="3607"><Highlight kind="normal">    </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;ShadowInScope = <a href="/docs/api/namespaces/llvm/#a575e3a33ce947932f93b30172ca12f05">GetShadowBytes</a>(SVD, L);</Highlight></CodeLine>
<Link id="l03608" /><CodeLine lineNumber="3608"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03609" /><CodeLine lineNumber="3609"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Poison static allocas near lifetime intrinsics.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03610" /><CodeLine lineNumber="3610"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &amp;APC : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2488dfb5dc557ef2572c0968fbe9c48b">StaticAllocaPoisonCallVec</a>) &#123;</Highlight></CodeLine>
<Link id="l03611" /><CodeLine lineNumber="3611"><Highlight kind="normal">      </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/asanstackvariabledescription">ASanStackVariableDescription</a> &amp;<a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a> = &#42;AllocaToSVDMap&#91;APC.AI&#93;;</Highlight></CodeLine>
<Link id="l03612" /><CodeLine lineNumber="3612"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.Offset % L.Granularity == 0);</Highlight></CodeLine>
<Link id="l03613" /><CodeLine lineNumber="3613"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> Begin = <a href="/docs/api/namespaces/llvm/#a4de98a9acffcef5bb4b31862cb8c72ac">Desc</a>.Offset / L.Granularity;</Highlight></CodeLine>
<Link id="l03614" /><CodeLine lineNumber="3614"><Highlight kind="normal">      </Highlight><Highlight kind="keywordtype">size&#95;t</Highlight><Highlight kind="normal"> End = Begin + (APC.Size + L.Granularity - 1) / L.Granularity;</Highlight></CodeLine>
<Link id="l03615" /><CodeLine lineNumber="3615"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03616" /><CodeLine lineNumber="3616"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(APC.InsBefore);</Highlight></CodeLine>
<Link id="l03617" /><CodeLine lineNumber="3617"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4">copyToShadow</a>(ShadowAfterScope,</Highlight></CodeLine>
<Link id="l03618" /><CodeLine lineNumber="3618"><Highlight kind="normal">                   APC.DoPoison ? ShadowAfterScope : ShadowInScope, Begin, End,</Highlight></CodeLine>
<Link id="l03619" /><CodeLine lineNumber="3619"><Highlight kind="normal">                   IRB, ShadowBase);</Highlight></CodeLine>
<Link id="l03620" /><CodeLine lineNumber="3620"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03621" /><CodeLine lineNumber="3621"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03622" /><CodeLine lineNumber="3622"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03623" /><CodeLine lineNumber="3623"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;uint8&#95;t, 64&gt;</a> ShadowClean(ShadowAfterScope.size(), 0);</Highlight></CodeLine>
<Link id="l03624" /><CodeLine lineNumber="3624"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/smallvector">SmallVector&lt;uint8&#95;t, 64&gt;</a> ShadowAfterReturn;</Highlight></CodeLine>
<Link id="l03625" /><CodeLine lineNumber="3625"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03626" /><CodeLine lineNumber="3626"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// (Un)poison the stack before all ret instructions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03627" /><CodeLine lineNumber="3627"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (<a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;Ret : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a73c4bbaeb91bf3a238b7b0ce80358601">RetVec</a>) &#123;</Highlight></CodeLine>
<Link id="l03628" /><CodeLine lineNumber="3628"><Highlight kind="normal">    <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRBRet(Ret);</Highlight></CodeLine>
<Link id="l03629" /><CodeLine lineNumber="3629"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// Mark the current frame as retired.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03630" /><CodeLine lineNumber="3630"><Highlight kind="normal">    IRBRet.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="#af955cd27ba6d5632e02d374282c4afae">kRetiredStackFrameMagic</a>),</Highlight></CodeLine>
<Link id="l03631" /><CodeLine lineNumber="3631"><Highlight kind="normal">                       BasePlus0);</Highlight></CodeLine>
<Link id="l03632" /><CodeLine lineNumber="3632"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (DoStackMalloc) &#123;</Highlight></CodeLine>
<Link id="l03633" /><CodeLine lineNumber="3633"><Highlight kind="normal">      <a href="/docs/api/files/lib/lib/target/lib/target/amdgpu/silowercontrolflow-cpp/#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(StackMallocIdx &gt;= 0);</Highlight></CodeLine>
<Link id="l03634" /><CodeLine lineNumber="3634"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// if FakeStack != 0  // LocalStackBase == FakeStack</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03635" /><CodeLine lineNumber="3635"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//     // In use-after-return mode, poison the whole stack frame.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03636" /><CodeLine lineNumber="3636"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//     if StackMallocIdx &lt;= 4</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03637" /><CodeLine lineNumber="3637"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//         // For small sizes inline the whole thing:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03638" /><CodeLine lineNumber="3638"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//         memset(ShadowBase, kAsanStackAfterReturnMagic, ShadowSize);</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03639" /><CodeLine lineNumber="3639"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//         &#42;&#42;SavedFlagPtr(FakeStack) = 0</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03640" /><CodeLine lineNumber="3640"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//     else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03641" /><CodeLine lineNumber="3641"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//         &#95;&#95;asan&#95;stack&#95;free&#95;N(FakeStack, LocalStackSize)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03642" /><CodeLine lineNumber="3642"><Highlight kind="normal">      </Highlight><Highlight kind="comment">// else</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03643" /><CodeLine lineNumber="3643"><Highlight kind="normal">      </Highlight><Highlight kind="comment">//     &lt;This is not a fake stack; unpoison the redzones&gt;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03644" /><CodeLine lineNumber="3644"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/value">Value</a> &#42;Cmp =</Highlight></CodeLine>
<Link id="l03645" /><CodeLine lineNumber="3645"><Highlight kind="normal">          IRBRet.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(FakeStack, <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>));</Highlight></CodeLine>
<Link id="l03646" /><CodeLine lineNumber="3646"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/instruction">Instruction</a> &#42;ThenTerm, &#42;ElseTerm;</Highlight></CodeLine>
<Link id="l03647" /><CodeLine lineNumber="3647"><Highlight kind="normal">      <a href="/docs/api/namespaces/llvm/#a7ac00229d8c59902686f52ed061cdc80">SplitBlockAndInsertIfThenElse</a>(Cmp, Ret, &amp;ThenTerm, &amp;ElseTerm);</Highlight></CodeLine>
<Link id="l03648" /><CodeLine lineNumber="3648"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03649" /><CodeLine lineNumber="3649"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRBPoison(ThenTerm);</Highlight></CodeLine>
<Link id="l03650" /><CodeLine lineNumber="3650"><Highlight kind="normal">      </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.MaxInlinePoisoningSize != 0 &amp;&amp; StackMallocIdx &lt;= 4) &#123;</Highlight></CodeLine>
<Link id="l03651" /><CodeLine lineNumber="3651"><Highlight kind="normal">        </Highlight><Highlight kind="keywordtype">int</Highlight><Highlight kind="normal"> ClassSize = <a href="#afb368a1d773581543db2f164baf7fbdf">kMinStackMallocSize</a> &lt;&lt; StackMallocIdx;</Highlight></CodeLine>
<Link id="l03652" /><CodeLine lineNumber="3652"><Highlight kind="normal">        ShadowAfterReturn.<a href="/docs/api/classes/llvm/smallvectorimpl/#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(ClassSize / L.Granularity,</Highlight></CodeLine>
<Link id="l03653" /><CodeLine lineNumber="3653"><Highlight kind="normal">                                 <a href="/docs/api/namespaces/llvm/#aaec439e7453d5235457273e9d3739718">kAsanStackUseAfterReturnMagic</a>);</Highlight></CodeLine>
<Link id="l03654" /><CodeLine lineNumber="3654"><Highlight kind="normal">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4">copyToShadow</a>(ShadowAfterReturn, ShadowAfterReturn, IRBPoison,</Highlight></CodeLine>
<Link id="l03655" /><CodeLine lineNumber="3655"><Highlight kind="normal">                     ShadowBase);</Highlight></CodeLine>
<Link id="l03656" /><CodeLine lineNumber="3656"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;SavedFlagPtrPtr = IRBPoison.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(</Highlight></CodeLine>
<Link id="l03657" /><CodeLine lineNumber="3657"><Highlight kind="normal">            FakeStack,</Highlight></CodeLine>
<Link id="l03658" /><CodeLine lineNumber="3658"><Highlight kind="normal">            ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, ClassSize - <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a0cf315d5c0ee6b5a3212d0da8ab95361">ASan</a>.LongSize / 8));</Highlight></CodeLine>
<Link id="l03659" /><CodeLine lineNumber="3659"><Highlight kind="normal">        <a href="/docs/api/classes/llvm/value">Value</a> &#42;SavedFlagPtr = IRBPoison.<a href="/docs/api/classes/llvm/irbuilderbase/#a9b01712e5f196d6d3d021ef23aad50e4">CreateLoad</a>(</Highlight></CodeLine>
<Link id="l03660" /><CodeLine lineNumber="3660"><Highlight kind="normal">            <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, IRBPoison.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(SavedFlagPtrPtr, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#acf5c2780ad835c54c27248ed826c61e3">IntptrPtrTy</a>));</Highlight></CodeLine>
<Link id="l03661" /><CodeLine lineNumber="3661"><Highlight kind="normal">        IRBPoison.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(</Highlight></CodeLine>
<Link id="l03662" /><CodeLine lineNumber="3662"><Highlight kind="normal">            <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRBPoison.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>()),</Highlight></CodeLine>
<Link id="l03663" /><CodeLine lineNumber="3663"><Highlight kind="normal">            IRBPoison.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(SavedFlagPtr, IRBPoison.<a href="/docs/api/classes/llvm/irbuilderbase/#ab73bb6948312ca0f98055c6a74c37045">getPtrTy</a>()));</Highlight></CodeLine>
<Link id="l03664" /><CodeLine lineNumber="3664"><Highlight kind="normal">      &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03665" /><CodeLine lineNumber="3665"><Highlight kind="normal">        </Highlight><Highlight kind="comment">// For larger frames call &#95;&#95;asan&#95;stack&#95;free&#95;&#42;.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03666" /><CodeLine lineNumber="3666"><Highlight kind="normal">        <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>.createRuntimeCall(</Highlight></CodeLine>
<Link id="l03667" /><CodeLine lineNumber="3667"><Highlight kind="normal">            IRBPoison, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a46862a84496d12848de821de87be3cc3">AsanStackFreeFunc</a>&#91;StackMallocIdx&#93;,</Highlight></CodeLine>
<Link id="l03668" /><CodeLine lineNumber="3668"><Highlight kind="normal">            &#123;FakeStack, ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, LocalStackSize)&#125;);</Highlight></CodeLine>
<Link id="l03669" /><CodeLine lineNumber="3669"><Highlight kind="normal">      &#125;</Highlight></CodeLine>
<Link id="l03670" /><CodeLine lineNumber="3670"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03671" /><CodeLine lineNumber="3671"><Highlight kind="normal">      <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRBElse(ElseTerm);</Highlight></CodeLine>
<Link id="l03672" /><CodeLine lineNumber="3672"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4">copyToShadow</a>(ShadowAfterScope, ShadowClean, IRBElse, ShadowBase);</Highlight></CodeLine>
<Link id="l03673" /><CodeLine lineNumber="3673"><Highlight kind="normal">    &#125; </Highlight><Highlight kind="keywordflow">else</Highlight><Highlight kind="normal"> &#123;</Highlight></CodeLine>
<Link id="l03674" /><CodeLine lineNumber="3674"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#aa4f1a33698e2466ce414169501f01cf4">copyToShadow</a>(ShadowAfterScope, ShadowClean, IRBRet, ShadowBase);</Highlight></CodeLine>
<Link id="l03675" /><CodeLine lineNumber="3675"><Highlight kind="normal">    &#125;</Highlight></CodeLine>
<Link id="l03676" /><CodeLine lineNumber="3676"><Highlight kind="normal">  &#125;</Highlight></CodeLine>
<Link id="l03677" /><CodeLine lineNumber="3677"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03678" /><CodeLine lineNumber="3678"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We are done. Remove the old unused alloca instructions.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03679" /><CodeLine lineNumber="3679"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">for</Highlight><Highlight kind="normal"> (</Highlight><Highlight kind="keyword">auto</Highlight><Highlight kind="normal"> &#42;AI : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ab7b0b16192f320acab41cea291ab89af">AllocaVec</a>)</Highlight></CodeLine>
<Link id="l03680" /><CodeLine lineNumber="3680"><Highlight kind="normal">    AI-&gt;eraseFromParent();</Highlight></CodeLine>
<Link id="l03681" /><CodeLine lineNumber="3681"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03682" /><CodeLine lineNumber="3682"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03683" /><CodeLine lineNumber="3683" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a299eb6fe46b875b6f4f3b16ed6255f66"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a299eb6fe46b875b6f4f3b16ed6255f66">FunctionStackPoisoner::poisonAlloca</a>(<a href="/docs/api/classes/llvm/value">Value</a> &#42;V, uint64&#95;t <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>,</Highlight></CodeLine>
<Link id="l03684" /><CodeLine lineNumber="3684"><Highlight kind="normal">                                         <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> &amp;IRB, </Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> DoPoison) &#123;</Highlight></CodeLine>
<Link id="l03685" /><CodeLine lineNumber="3685"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// For now just insert the call to ASan runtime.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03686" /><CodeLine lineNumber="3686"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;AddrArg = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a3ef26a11123d639b64307cc3c1b869b9">CreatePointerCast</a>(V, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</Highlight></CodeLine>
<Link id="l03687" /><CodeLine lineNumber="3687"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;SizeArg = ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a>);</Highlight></CodeLine>
<Link id="l03688" /><CodeLine lineNumber="3688"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>.createRuntimeCall(</Highlight></CodeLine>
<Link id="l03689" /><CodeLine lineNumber="3689"><Highlight kind="normal">      IRB, DoPoison ? <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a129445d4046d1bb9112ae575997c63cb">AsanPoisonStackMemoryFunc</a> : <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#abe4c5b51b8f9aa8c954504023b4c3164">AsanUnpoisonStackMemoryFunc</a>,</Highlight></CodeLine>
<Link id="l03690" /><CodeLine lineNumber="3690"><Highlight kind="normal">      &#123;AddrArg, SizeArg&#125;);</Highlight></CodeLine>
<Link id="l03691" /><CodeLine lineNumber="3691"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03692" /><CodeLine lineNumber="3692"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03693" /><CodeLine lineNumber="3693"><Highlight kind="normal"></Highlight><Highlight kind="comment">// Handling llvm.lifetime intrinsics for a given %alloca:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03694" /><CodeLine lineNumber="3694"><Highlight kind="normal"></Highlight><Highlight kind="comment">// (1) collect all llvm.lifetime.xxx(%size, %value) describing the alloca.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03695" /><CodeLine lineNumber="3695"><Highlight kind="normal"></Highlight><Highlight kind="comment">// (2) if %size is constant, poison memory for llvm.lifetime.end (to detect</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03696" /><CodeLine lineNumber="3696"><Highlight kind="normal"></Highlight><Highlight kind="comment">//     invalid accesses) and unpoison it for llvm.lifetime.start (the memory</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03697" /><CodeLine lineNumber="3697"><Highlight kind="normal"></Highlight><Highlight kind="comment">//     could be poisoned by previous llvm.lifetime.end instruction, as the</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03698" /><CodeLine lineNumber="3698"><Highlight kind="normal"></Highlight><Highlight kind="comment">//     variable may go in and out of scope several times, e.g. in loops).</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03699" /><CodeLine lineNumber="3699"><Highlight kind="normal"></Highlight><Highlight kind="comment">// (3) if we poisoned at least one %alloca in a function,</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03700" /><CodeLine lineNumber="3700"><Highlight kind="normal"></Highlight><Highlight kind="comment">//     unpoison the whole stack frame at function exit.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03701" /><CodeLine lineNumber="3701" lineLink="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2c1978d516a0154dd7f006e502ab4cfa"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">void</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a2c1978d516a0154dd7f006e502ab4cfa">FunctionStackPoisoner::handleDynamicAllocaCall</a>(<a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;AI) &#123;</Highlight></CodeLine>
<Link id="l03702" /><CodeLine lineNumber="3702"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/irbuilder">IRBuilder&lt;&gt;</a> IRB(AI);</Highlight></CodeLine>
<Link id="l03703" /><CodeLine lineNumber="3703"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03704" /><CodeLine lineNumber="3704"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> <a href="/docs/api/structs/llvm/align">Align</a> Alignment = std::max(<a href="/docs/api/structs/llvm/align">Align</a>(<a href="#a6da7b2b680f4518d9d5545432e701ba1">kAllocaRzSize</a>), AI-&gt;<a href="/docs/api/classes/llvm/allocainst/#a42438d0a43720a6571c9138224481754">getAlign</a>());</Highlight></CodeLine>
<Link id="l03705" /><CodeLine lineNumber="3705"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> uint64&#95;t AllocaRedzoneMask = <a href="#a6da7b2b680f4518d9d5545432e701ba1">kAllocaRzSize</a> - 1;</Highlight></CodeLine>
<Link id="l03706" /><CodeLine lineNumber="3706"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03707" /><CodeLine lineNumber="3707"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;Zero = <a href="/docs/api/classes/llvm/constant/#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>);</Highlight></CodeLine>
<Link id="l03708" /><CodeLine lineNumber="3708"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;AllocaRzSize = ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, <a href="#a6da7b2b680f4518d9d5545432e701ba1">kAllocaRzSize</a>);</Highlight></CodeLine>
<Link id="l03709" /><CodeLine lineNumber="3709"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;AllocaRzMask = ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, AllocaRedzoneMask);</Highlight></CodeLine>
<Link id="l03710" /><CodeLine lineNumber="3710"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03711" /><CodeLine lineNumber="3711"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Since we need to extend alloca with additional memory to locate</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03712" /><CodeLine lineNumber="3712"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// redzones, and OldSize is number of allocated blocks with</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03713" /><CodeLine lineNumber="3713"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// ElementSize size, get allocated memory size in bytes by</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03714" /><CodeLine lineNumber="3714"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// OldSize &#42; ElementSize.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03715" /><CodeLine lineNumber="3715"><Highlight kind="normal">  </Highlight><Highlight kind="keyword">const</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keywordtype">unsigned</Highlight><Highlight kind="normal"> ElementSize =</Highlight></CodeLine>
<Link id="l03716" /><CodeLine lineNumber="3716"><Highlight kind="normal">      <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a069c9f01d5b2e44e5171beae7f71b62b">F</a>.getDataLayout().getTypeAllocSize(AI-&gt;<a href="/docs/api/classes/llvm/allocainst/#a9b5ec84ea363eca9e35ddca20a5313af">getAllocatedType</a>());</Highlight></CodeLine>
<Link id="l03717" /><CodeLine lineNumber="3717"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;OldSize =</Highlight></CodeLine>
<Link id="l03718" /><CodeLine lineNumber="3718"><Highlight kind="normal">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aecd40f9a16dc0ef1e0bc416599f89277">CreateMul</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ac79ca3c2d2d74cf33684397a91846564">CreateIntCast</a>(AI-&gt;<a href="/docs/api/classes/llvm/allocainst/#af4283a4cef4e2b88f565d827d5857e14">getArraySize</a>(), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">),</Highlight></CodeLine>
<Link id="l03719" /><CodeLine lineNumber="3719"><Highlight kind="normal">                    ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, ElementSize));</Highlight></CodeLine>
<Link id="l03720" /><CodeLine lineNumber="3720"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03721" /><CodeLine lineNumber="3721"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// PartialSize = OldSize % 32</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03722" /><CodeLine lineNumber="3722"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;PartialSize = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aa4f2cec52a8e17a4c72319334fbef771">CreateAnd</a>(OldSize, AllocaRzMask);</Highlight></CodeLine>
<Link id="l03723" /><CodeLine lineNumber="3723"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03724" /><CodeLine lineNumber="3724"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Misalign = kAllocaRzSize - PartialSize;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03725" /><CodeLine lineNumber="3725"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;Misalign = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a92c83e803f2cf22906da0aaec44ff6d7">CreateSub</a>(AllocaRzSize, PartialSize);</Highlight></CodeLine>
<Link id="l03726" /><CodeLine lineNumber="3726"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03727" /><CodeLine lineNumber="3727"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// PartialPadding = Misalign != kAllocaRzSize ? Misalign : 0;</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03728" /><CodeLine lineNumber="3728"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a> = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a6ef1729b04a4fbd6c6f27787cdd0e813">CreateICmpNE</a>(Misalign, AllocaRzSize);</Highlight></CodeLine>
<Link id="l03729" /><CodeLine lineNumber="3729"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;PartialPadding = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a49b228f797f9b3563256da446100c3ac">CreateSelect</a>(<a href="/docs/api/files/lib/lib/target/lib/target/riscv/riscvredundantcopyelimination-cpp/#a193847098793cdbab306803186676899">Cond</a>, Misalign, Zero);</Highlight></CodeLine>
<Link id="l03730" /><CodeLine lineNumber="3730"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03731" /><CodeLine lineNumber="3731"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// AdditionalChunkSize = Alignment + PartialPadding + kAllocaRzSize</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03732" /><CodeLine lineNumber="3732"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Alignment is added to locate left redzone, PartialPadding for possible</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03733" /><CodeLine lineNumber="3733"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// partial redzone and kAllocaRzSize for right redzone respectively.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03734" /><CodeLine lineNumber="3734"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;AdditionalChunkSize = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(</Highlight></CodeLine>
<Link id="l03735" /><CodeLine lineNumber="3735"><Highlight kind="normal">      ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, Alignment.<a href="/docs/api/structs/llvm/align/#a80735739b49cf97a491922c8f9af2cc1">value</a>() + <a href="#a6da7b2b680f4518d9d5545432e701ba1">kAllocaRzSize</a>),</Highlight></CodeLine>
<Link id="l03736" /><CodeLine lineNumber="3736"><Highlight kind="normal">      PartialPadding);</Highlight></CodeLine>
<Link id="l03737" /><CodeLine lineNumber="3737"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03738" /><CodeLine lineNumber="3738"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;NewSize = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(OldSize, AdditionalChunkSize);</Highlight></CodeLine>
<Link id="l03739" /><CodeLine lineNumber="3739"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03740" /><CodeLine lineNumber="3740"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Insert new alloca with new NewSize and Alignment params.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03741" /><CodeLine lineNumber="3741"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/allocainst">AllocaInst</a> &#42;NewAlloca = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a1b30cd686a320a8e5cb4532fd3a552a8">CreateAlloca</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#ae7be2e1490f01c049d748436f03760c5">getInt8Ty</a>(), NewSize);</Highlight></CodeLine>
<Link id="l03742" /><CodeLine lineNumber="3742"><Highlight kind="normal">  NewAlloca-&gt;<a href="/docs/api/classes/llvm/allocainst/#af3bb24b322533dbe8a63c84b18568fe1">setAlignment</a>(Alignment);</Highlight></CodeLine>
<Link id="l03743" /><CodeLine lineNumber="3743"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03744" /><CodeLine lineNumber="3744"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// NewAddress = Address + Alignment</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03745" /><CodeLine lineNumber="3745"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;NewAddress =</Highlight></CodeLine>
<Link id="l03746" /><CodeLine lineNumber="3746"><Highlight kind="normal">      IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aada1d6d8de104a5cd1cb9a02c676cc6c">CreateAdd</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(NewAlloca, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>),</Highlight></CodeLine>
<Link id="l03747" /><CodeLine lineNumber="3747"><Highlight kind="normal">                    ConstantInt::get(<a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>, Alignment.<a href="/docs/api/structs/llvm/align/#a80735739b49cf97a491922c8f9af2cc1">value</a>()));</Highlight></CodeLine>
<Link id="l03748" /><CodeLine lineNumber="3748"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03749" /><CodeLine lineNumber="3749"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Insert &#95;&#95;asan&#95;alloca&#95;poison call for new created alloca.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03750" /><CodeLine lineNumber="3750"><Highlight kind="normal">  <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a6658c9ec8a5872994fee162488df739c">RTCI</a>.createRuntimeCall(IRB, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#ae4bcb221f841432521314e7b60c5db2c">AsanAllocaPoisonFunc</a>, &#123;NewAddress, OldSize&#125;);</Highlight></CodeLine>
<Link id="l03751" /><CodeLine lineNumber="3751"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03752" /><CodeLine lineNumber="3752"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Store the last alloca&#39;s address to DynamicAllocaLayout. We&#39;ll need this</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03753" /><CodeLine lineNumber="3753"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// for unpoisoning stuff.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03754" /><CodeLine lineNumber="3754"><Highlight kind="normal">  IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aabfc20af4dcf7d94262824dcac2e7bed">CreateStore</a>(IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#aae2c1bf70058f3665edaec525457030c">CreatePtrToInt</a>(NewAlloca, <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a4c513a8365fda3ff1b3d103e7a52ac26">IntptrTy</a>), <a href="/docs/api/structs/anonymous-namespace-addresssanitizer-cpp-/functionstackpoisoner/#a8318591e05d8e62436dee43551e5a115">DynamicAllocaLayout</a>);</Highlight></CodeLine>
<Link id="l03755" /><CodeLine lineNumber="3755"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03756" /><CodeLine lineNumber="3756"><Highlight kind="normal">  <a href="/docs/api/classes/llvm/value">Value</a> &#42;NewAddressPtr = IRB.<a href="/docs/api/classes/llvm/irbuilderbase/#a53541ed6f92b18419f937f1f969aa0f6">CreateIntToPtr</a>(NewAddress, AI-&gt;<a href="/docs/api/classes/llvm/allocainst/#a5d19f3955a23e8eb2a974efcc8fb19da">getType</a>());</Highlight></CodeLine>
<Link id="l03757" /><CodeLine lineNumber="3757"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03758" /><CodeLine lineNumber="3758"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Replace all uses of AddessReturnedByAlloca with NewAddressPtr.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03759" /><CodeLine lineNumber="3759"><Highlight kind="normal">  AI-&gt;<a href="/docs/api/classes/llvm/value/#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewAddressPtr);</Highlight></CodeLine>
<Link id="l03760" /><CodeLine lineNumber="3760"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03761" /><CodeLine lineNumber="3761"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// We are done. Erase old alloca from parent.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03762" /><CodeLine lineNumber="3762"><Highlight kind="normal">  AI-&gt;<a href="/docs/api/classes/llvm/instruction/#a601ee49a4c4e0babf29bd1cf09036570">eraseFromParent</a>();</Highlight></CodeLine>
<Link id="l03763" /><CodeLine lineNumber="3763"><Highlight kind="normal">&#125;</Highlight></CodeLine>
<Link id="l03764" /><CodeLine lineNumber="3764"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03765" /><CodeLine lineNumber="3765"><Highlight kind="normal"></Highlight><Highlight kind="comment">// isSafeAccess returns true if Addr is always inbounds with respect to its</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03766" /><CodeLine lineNumber="3766"><Highlight kind="normal"></Highlight><Highlight kind="comment">// base object. For example, it is a field access or an array access with</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03767" /><CodeLine lineNumber="3767"><Highlight kind="normal"></Highlight><Highlight kind="comment">// constant inbounds index.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03768" /><CodeLine lineNumber="3768"><Highlight kind="normal"></Highlight><Highlight kind="keywordtype">bool</Highlight><Highlight kind="normal"> AddressSanitizer::isSafeAccess(<a href="/docs/api/classes/llvm/objectsizeoffsetvisitor">ObjectSizeOffsetVisitor</a> &amp;ObjSizeVis,</Highlight></CodeLine>
<Link id="l03769" /><CodeLine lineNumber="3769"><Highlight kind="normal">                                    <a href="/docs/api/classes/llvm/value">Value</a> &#42;Addr, <a href="/docs/api/classes/llvm/typesize">TypeSize</a> TypeStoreSize)</Highlight><Highlight kind="keyword"> const </Highlight><Highlight kind="normal">&#123;</Highlight></CodeLine>
<Link id="l03770" /><CodeLine lineNumber="3770"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (TypeStoreSize.<a href="/docs/api/classes/llvm/details/fixedorscalablequantity/#a9188f84e1dd67530330dcab9cae787d7">isScalable</a>())</Highlight></CodeLine>
<Link id="l03771" /><CodeLine lineNumber="3771"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// TODO: We can use vscale&#95;range to convert a scalable value to an</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03772" /><CodeLine lineNumber="3772"><Highlight kind="normal">    </Highlight><Highlight kind="comment">// upper bound on the access size.</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03773" /><CodeLine lineNumber="3773"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03774" /><CodeLine lineNumber="3774"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03775" /><CodeLine lineNumber="3775"><Highlight kind="normal">  <a href="/docs/api/structs/llvm/sizeoffsetapint">SizeOffsetAPInt</a> SizeOffset = ObjSizeVis.<a href="/docs/api/classes/llvm/objectsizeoffsetvisitor/#a8c0cefa2bf3b3199ab80b4b897c49e86">compute</a>(Addr);</Highlight></CodeLine>
<Link id="l03776" /><CodeLine lineNumber="3776"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">if</Highlight><Highlight kind="normal"> (!SizeOffset.<a href="/docs/api/structs/llvm/sizeoffsettype/#afc0e6253ea9fff92cd5396514e74a3b8">bothKnown</a>())</Highlight></CodeLine>
<Link id="l03777" /><CodeLine lineNumber="3777"><Highlight kind="normal">    </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> </Highlight><Highlight kind="keyword">false</Highlight><Highlight kind="normal">;</Highlight></CodeLine>
<Link id="l03778" /><CodeLine lineNumber="3778"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03779" /><CodeLine lineNumber="3779"><Highlight kind="normal">  uint64&#95;t <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> = SizeOffset.<a href="/docs/api/structs/llvm/sizeoffsettype/#a06605ec689995010ade897ee0ebd3023">Size</a>.<a href="/docs/api/classes/llvm/apint/#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>();</Highlight></CodeLine>
<Link id="l03780" /><CodeLine lineNumber="3780"><Highlight kind="normal">  int64&#95;t <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = SizeOffset.<a href="/docs/api/structs/llvm/sizeoffsettype/#a8859bafd8bfb3cd956d6490367ffe3eb">Offset</a>.<a href="/docs/api/classes/llvm/apint/#af2daa0ee117afefed4c82eee55bf97b7">getSExtValue</a>();</Highlight></CodeLine>
<Link id="l03781" /><CodeLine lineNumber="3781"><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03782" /><CodeLine lineNumber="3782"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// Three checks are required to ensure safety:</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03783" /><CodeLine lineNumber="3783"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// . Offset &gt;= 0  (since the offset is given from the base ptr)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03784" /><CodeLine lineNumber="3784"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// . Size &gt;= Offset  (unsigned)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03785" /><CodeLine lineNumber="3785"><Highlight kind="normal">  </Highlight><Highlight kind="comment">// . Size - Offset &gt;= NeededSize  (unsigned)</Highlight><Highlight kind="normal"></Highlight></CodeLine>
<Link id="l03786" /><CodeLine lineNumber="3786"><Highlight kind="normal">  </Highlight><Highlight kind="keywordflow">return</Highlight><Highlight kind="normal"> <a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &gt;= 0 &amp;&amp; <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> &gt;= uint64&#95;t(<a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>) &amp;&amp;</Highlight></CodeLine>
<Link id="l03787" /><CodeLine lineNumber="3787"><Highlight kind="normal">         <a href="/docs/api/files/lib/lib/analysis/inlineorder-cpp/#a7ee6f0cb51c3b9056199e9a0001fe8c3a6f6cb72d544962fa333e2e34ce64f719">Size</a> - uint64&#95;t(<a href="/docs/api/namespaces/llvm/#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>) &gt;= TypeStoreSize / 8;</Highlight></CodeLine>
<Link id="l03788" /><CodeLine lineNumber="3788"><Highlight kind="normal">&#125;</Highlight></CodeLine>

</ProgramListing>

</DoxygenPage>
